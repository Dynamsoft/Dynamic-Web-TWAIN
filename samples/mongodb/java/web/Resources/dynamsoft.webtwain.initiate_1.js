/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft Support Team
* Version: 10.2.0.324
*/
var KISSY=function(b){function e(f){var i={},j;for(j in c){(function(g,k){g[k]=function(l){return h.log(l,k,f)}})(i,j)}return i}var h,d=0,c={debug:10,info:20,warn:30,error:40};h={__BUILD_TIME:"20131209235320",Env:{host:this},Config:{debug:"",fns:{}},version:"1.41",config:function(p,j){var l,i,o=this,f,n=h.Config,k=n.fns;h.isObject(p)?h.each(p,function(m,g){(f=k[g])?f.call(o,m):n[g]=m}):(l=k[p],j===b?i=l?l.call(o):n[p]:l?i=l.call(o,j):n[p]=j);return i},log:function(){return b},getLogger:function(f){return e(f)},error:function(){},guid:function(f){return(f||"")+d++},Logger:{}};h.Logger.Level={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};return h}();(function(x,r){function s(){}function p(P,L,Q,O,J,M){if(!L||!P){return P}var N,C,A,H;L[v]=P;M.push(L);A=x.keys(L);H=A.length;for(N=0;N<H;N++){if(C=A[N],C!==v){var K=P,c=L,G=Q,B=O,y=J,g=M;if(G||!(C in K)||y){var i=K[C],l=c[C];if(i===l){i===r&&(K[C]=i)}else{if(B&&(l=B.call(c,C,l)),y&&l&&(x.isArray(l)||x.isPlainObject(l))){l[v]?K[C]=l[v]:(c=i&&(x.isArray(i)||x.isPlainObject(i))?i:x.isArray(l)?[]:{},K[C]=c,p(c,l,G,B,n,g))}else{if(l!==r&&(G||!(C in K))){K[C]=l}}}}}}return P}function o(b,c){return"constructor"===b?r:c}var v="__MIX_CIRCULAR",q=this,n=!0,w=Object,u=w.create,j=!{toString:1}.propertyIsEnumerable("toString"),t="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toString,toLocaleString,valueOf".split(",");(function(e,f){for(var c in f){e[c]=f[c]}})(x,{stamp:function(i,g,f){var f=f||"__~ks_stamped",h=i[f];if(!h&&!g){try{h=i[f]=x.guid(f)}catch(k){h=r}}return h},keys:w.keys||function(f){var g=[],e,h;for(e in f){f.hasOwnProperty(e)&&g.push(e)}if(j){for(h=t.length-1;0<=h;h--){e=t[h],f.hasOwnProperty(e)&&g.push(e)}}return g},mix:function(A,g,z,c,l){"object"===typeof z&&(c=z.whitelist,l=z.deep,z=z.overwrite);if(c&&"function"!==typeof c){var k=c,c=function(f,e){return x.inArray(f,k)?e:r}}z===r&&(z=n);var y=[],i=0;for(p(A,g,z,c,l,y);g=y[i++];){delete g[v]}return A},merge:function(h){var h=x.makeArray(arguments),f={},g,i=h.length;for(g=0;g<i;g++){x.mix(f,h[g])}return f},augment:function(y,A){var l=x.makeArray(arguments),z=l.length-2,g=1,i,k,C=l[z],B=l[z+1];l[1]=A;x.isArray(B)||(C=B,B=r,z++);"boolean"!==typeof C&&(C=r,z++);for(;g<z;g++){k=l[g];if(i=k.prototype){k=x.mix({},i,!0,o)}x.mix(y.prototype,k,C,B)}return y},extend:function(f,g,h,i){var d=g.prototype;d.constructor=g;u?g=u(d):(s.prototype=d,g=new s);g.constructor=f;f.prototype=x.mix(g,f.prototype);f.superclass=d;h&&x.mix(g,h);i&&x.mix(f,i);return f},namespace:function(){var z=x.makeArray(arguments),i=z.length,y=null,A,h,l,k=z[i-1]===n&&i--;for(A=0;A<i;A++){l=(""+z[A]).split(".");y=k?q:this;for(h=q[l[0]]===y?1:0;h<l.length;++h){y=y[l[h]]=y[l[h]]||{}}}return y}})})(KISSY);(function(r,n){var o=Array.prototype,j=o.indexOf,e=o.lastIndexOf,p=o.filter,m=o.every,d=o.some,q=o.map;r.mix(r,{each:function(i,f,h){if(i){var l,g,k=0;l=i&&i.length;g=l===n||"function"===r.type(i);h=h||null;if(g){for(g=r.keys(i);k<g.length&&!(l=g[k],!1===f.call(h,i[l],l,i));k++){}}else{for(g=i[0];k<l&&!1!==f.call(h,g,k,i);g=i[++k]){}}}return i},indexOf:j?function(f,c){return j.call(c,f)}:function(g,f){for(var h=0,i=f.length;h<i;++h){if(f[h]===g){return h}}return -1},lastIndexOf:e?function(f,c){return e.call(c,f)}:function(f,c){for(var g=c.length-1;0<=g&&c[g]!==f;g--){}return g},unique:function(f,l){var i=f.slice();l&&i.reverse();for(var h=0,g,k;h<i.length;){for(k=i[h];(g=r.lastIndexOf(k,i))!==h;){i.splice(g,1)}h+=1}l&&i.reverse();return i},inArray:function(f,g){return -1<r.indexOf(f,g)},filter:p?function(f,c,g){return p.call(f,c,g||this)}:function(f,i,h){var g=[];r.each(f,function(k,c,l){i.call(h||this,k,c,l)&&g.push(k)});return g},map:q?function(b,g,f){return q.call(b,g,f||this)}:function(h,g,l){for(var t=h.length,i=Array(t),s=0;s<t;s++){var k="string"===typeof h?h.charAt(s):h[s];if(k||s in h){i[s]=g.call(l||this,k,s,h)}}return i},reduce:function(h,g,l){var s=h.length;if("function"!==typeof g){throw new TypeError("callback is not function!")}if(0===s&&2===arguments.length){throw new TypeError("arguments invalid")}var i=0,k;if(3<=arguments.length){k=l}else{do{if(i in h){k=h[i++];break}i+=1;if(i>=s){throw new TypeError}}while(1)}for(;i<s;){i in h&&(k=g.call(n,k,h[i],i,h)),i++}return k},every:m?function(f,c,g){return m.call(f,c,g||this)}:function(g,f,i){for(var k=g&&g.length||0,h=0;h<k;h++){if(h in g&&!f.call(i,g[h],h,g)){return !1}}return !0},some:d?function(f,c,g){return d.call(f,c,g||this)}:function(g,f,i){for(var k=g&&g.length||0,h=0;h<k;h++){if(h in g&&f.call(i,g[h],h,g)){return !0}}return !1},makeArray:function(g){if(null==g){return[]}if(r.isArray(g)){return g}var k=typeof g.length,i=typeof g;if("number"!==k||g.alert||"string"===i||"function"===i&&!("item" in g&&"number"===k)){return[g]}for(var k=[],i=0,h=g.length;i<h;i++){k[i]=g[i]}return k}})})(KISSY);(function(v,q){function r(d){var c=typeof d;return null==d||"object"!==c&&"function"!==c}function o(){if(u){return u}var b=t;v.each(p,function(c){b+=c+"|"});b=b.slice(0,-1);return u=RegExp(b,"g")}function n(){if(s){return s}var c=t;v.each(j,function(b){c+=b+"|"});c+="&#(\\d{1,5});";return s=RegExp(c,"g")}var t="",p={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},j={},u,s,e=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;(function(){for(var b in p){j[p[b]]=b}})();v.mix(v,{urlEncode:function(b){return encodeURIComponent(""+b)},urlDecode:function(b){return decodeURIComponent(b.replace(/\+/g," "))},fromUnicode:function(b){return b.replace(/\\u([a-f\d]{4})/ig,function(d,c){return String.fromCharCode(parseInt(c,16))})},escapeHtml:function(b){return(b+"").replace(o(),function(c){return j[c]})},escapeRegExp:function(b){return b.replace(e,"\\$&")},unEscapeHtml:function(b){return b.replace(n(),function(d,c){return p[d]||String.fromCharCode(+c)})},param:function(z,y,l,f){y=y||"&";l=l||"=";f===q&&(f=!0);var x=[],C,g,w,B,A,c=v.urlEncode;for(C in z){if(A=z[C],C=c(C),r(A)){x.push(C),A!==q&&x.push(l,c(A+t)),x.push(y)}else{if(v.isArray(A)&&A.length){g=0;for(B=A.length;g<B;++g){w=A[g],r(w)&&(x.push(C,f?c("[]"):t),w!==q&&x.push(l,c(w+t)),x.push(y))}}}}x.pop();return x.join(t)},unparam:function(B,z,A){if("string"!==typeof B||!(B=v.trim(B))){return{}}for(var A=A||"=",y={},x,g=v.urlDecode,B=B.split(z||"&"),l=0,w=B.length;l<w;++l){x=B[l].indexOf(A);if(-1===x){z=g(B[l]),x=q}else{z=g(B[l].substring(0,x));x=B[l].substring(x+1);try{x=g(x)}catch(C){"decodeURIComponent error : "+x,C}v.endsWith(z,"[]")&&(z=z.substring(0,z.length-2))}z in y?v.isArray(y[z])?y[z].push(x):y[z]=[y[z],x]:y[z]=x}return y}});v.escapeHTML=v.escapeHtml;v.unEscapeHTML=v.unEscapeHtml})(KISSY);(function(b){function c(f,m,i){function n(){}var j=[].slice,e=j.call(arguments,3),d=function(){var g=j.call(arguments);return m.apply(this instanceof n?this:i||this,f?g.concat(e):e.concat(g))};n.prototype=m.prototype;d.prototype=new n;return d}b.mix(b,{noop:function(){},bind:c(0,c,null,0),rbind:c(0,c,null,1),later:function(o,n,j,q,m){var n=n||0,i=o,e=b.makeArray(m),p;"string"===typeof o&&(i=q[o]);i||"method undefined";o=function(){i.apply(q,e)};p=j?setInterval(o,n):setTimeout(o,n);return{id:p,interval:j,cancel:function(){this.interval?clearInterval(p):clearTimeout(p)}}},throttle:function(h,e,d){e=e||150;if(-1===e){return function(){h.apply(d||this,arguments)}}var i=b.now();return function(){var f=b.now();f-i>e&&(i=f,h.apply(d||this,arguments))}},buffer:function(j,i,d){function l(){l.stop();e=b.later(j,i,0,d||this,arguments)}i=i||150;if(-1===i){return function(){j.apply(d||this,arguments)}}var e=null;l.stop=function(){e&&(e.cancel(),e=0)};return l}})})(KISSY);(function(d,n){function o(c,s,q){var r=c,h,i,t,f;if(!c){return r}if(c[m]){return q[c[m]].destination}if("object"===typeof c){f=c.constructor;if(d.inArray(f,[Boolean,String,Number,Date,RegExp])){r=new f(c.valueOf())}else{if(h=d.isArray(c)){r=s?d.filter(c,s):c.concat()}else{if(i=d.isPlainObject(c)){r={}}}}c[m]=f=d.guid("c");q[f]={destination:r,input:c}}if(h){for(c=0;c<r.length;c++){r[c]=o(r[c],s,q)}}else{if(i){for(t in c){if(t!==m&&(!s||s.call(c,c[t],t,c)!==p)){r[t]=o(c[t],s,q)}}}}return r}function j(f,l,q,k){if(f[b]===l&&l[b]===f){return e}f[b]=l;l[b]=f;var i=function(h,c){return null!==h&&h!==n&&h[c]!==n},g;for(g in l){!i(f,g)&&i(l,g)&&q.push("expected has key "+g+'", but missing from actual.')}for(g in f){!i(l,g)&&i(f,g)&&q.push('expected missing key "'+g+'", but present in actual.')}for(g in l){g!==b&&(d.equals(f[g],l[g],q,k)||k.push('"'+g+'" was "'+(l[g]?l[g].toString():l[g])+'" in expected, but was "'+(f[g]?f[g].toString():f[g])+'" in actual.'))}d.isArray(f)&&d.isArray(l)&&f.length!==l.length&&k.push("arrays were not the same length");delete f[b];delete l[b];return 0===q.length&&0===k.length}var e=!0,p=!1,m="__~ks_cloned",b="__~ks_compared";d.mix(d,{equals:function(f,h,i,g){i=i||[];g=g||[];return f===h?e:f===n||null===f||h===n||null===h?null==f&&null==h:f instanceof Date&&h instanceof Date?f.getTime()===h.getTime():"string"===typeof f&&"string"===typeof h||"number"===typeof f&&"number"===typeof h?f===h:"object"===typeof f&&"object"===typeof h?j(f,h,i,g):f===h},clone:function(f,h){var i={},g=o(f,h,i);d.each(i,function(k){k=k.input;if(k[m]){try{delete k[m]}catch(c){k[m]=n}}});i=null;return g},now:Date.now||function(){return +new Date}})})(KISSY);(function(b,e){var h=/^[\s\xa0]+|[\s\xa0]+$/g,d=String.prototype.trim,c=/\\?\{([^{}]+)\}/g;b.mix(b,{trim:d?function(f){return null==f?"":d.call(f)}:function(f){return null==f?"":(f+"").replace(h,"")},substitute:function(g,i,j){return"string"!==typeof g||!i?g:g.replace(j||c,function(f,k){return"\\"===f.charAt(0)?f.slice(1):i[k]===e?"":i[k]})},ucfirst:function(f){f+="";return f.charAt(0).toUpperCase()+f.substring(1)},startsWith:function(f,g){return 0===f.lastIndexOf(g,0)},endsWith:function(g,i){var j=g.length-i.length;return 0<=j&&g.indexOf(i,j)===j}})})(KISSY);(function(b,e){var h={},d=Object.prototype,c=d.toString;b.mix(b,{type:function(f){return null==f?""+f:h[c.call(f)]||"object"},isNull:function(f){return null===f},isUndefined:function(f){return f===e},isEmptyObject:function(f){for(var g in f){if(g!==e){return !1}}return !0},isPlainObject:function(k){if(!k||"object"!==b.type(k)||k.nodeType||k.window==k){return !1}var i,j;try{if((j=k.constructor)&&!d.hasOwnProperty.call(k,"constructor")&&!d.hasOwnProperty.call(j.prototype,"isPrototypeOf")){return !1}}catch(g){return !1}for(i in k){}return i===e||d.hasOwnProperty.call(k,i)}});b.each("Boolean,Number,String,Function,Date,RegExp,Object,Array".split(","),function(g,f){h["[object "+g+"]"]=f=g.toLowerCase();b["is"+g]=function(i){return b.type(i)===f}});b.isArray=Array.isArray||b.isArray})(KISSY);(function(b){function l(){for(var f=0,c;c=m[f++];){try{c()}catch(g){g.stack||g,"error",setTimeout(function(){throw g},0)}}1<f&&(m=[]);e=0}var m=[],e=0;b.setImmediate=function(c){m.push(c);e||(e=1,d())};var d;if("function"===typeof setImmediate){d=function(){setImmediate(l)}}else{if("undefined"!==typeof process&&"function"===typeof process.nextTick){d=function(){process.nextTick(l)}}else{if("undefined"!==typeof MessageChannel){var n=new MessageChannel;n.port1.onmessage=function(){d=j;n.port1.onmessage=l;l()};var j=function(){n.port2.postMessage(0)};d=function(){setTimeout(l,0);j()}}else{d=function(){setTimeout(l,0)}}}}})(KISSY);(function(b){function d(i,m){for(var k=0,j=i.length-1,h=[],l;0<=j;j--){l=i[j],"."!==l&&(".."===l?k++:k?k--:h[h.length]=l)}if(m){for(;k--;k){h[h.length]=".."}}return h=h.reverse()}var e=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/,c=b.Path={resolve:function(){var l="",m,k=arguments,j,g=0;for(m=k.length-1;0<=m&&!g;m--){j=k[m],"string"===typeof j&&j&&(l=j+"/"+l,g="/"===j.charAt(0))}l=d(b.filter(l.split("/"),function(f){return !!f}),!g).join("/");return(g?"/":"")+l||"."},normalize:function(i){var j="/"===i.charAt(0),g="/"===i.slice(-1),i=d(b.filter(i.split("/"),function(f){return !!f}),!j).join("/");!i&&!j&&(i=".");i&&g&&(i+="/");return(j?"/":"")+i},join:function(){var g=b.makeArray(arguments);return c.normalize(b.filter(g,function(f){return f&&"string"===typeof f}).join("/"))},relative:function(n,p){var n=c.normalize(n),p=c.normalize(p),k=b.filter(n.split("/"),function(f){return !!f}),j=[],i,o,h=b.filter(p.split("/"),function(f){return !!f});o=Math.min(k.length,h.length);for(i=0;i<o&&k[i]===h[i];i++){}for(o=i;i<k.length;){j.push(".."),i++}j=j.concat(h.slice(o));return j=j.join("/")},basename:function(f,i){var h;h=(f.match(e)||[])[3]||"";i&&h&&h.slice(-1*i.length)===i&&(h=h.slice(0,-1*i.length));return h},dirname:function(f){var g=f.match(e)||[],f=g[1]||"",g=g[2]||"";if(!f&&!g){return"."}g&&(g=g.substring(0,g.length-1));return f+g},extname:function(f){return(f.match(e)||[])[4]||""}}})(KISSY);(function(z,t){function u(c){c._queryMap||(c._queryMap=z.unparam(c._query))}function q(b){this._query=b||""}function p(d,c){return encodeURI(d).replace(c,function(b){b=b.charCodeAt(0).toString(16);return"%"+(1===b.length?"0"+b:b)})}function x(c){if(c instanceof x){return c.clone()}var e=this;z.mix(e,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});c=x.getComponents(c);z.each(c,function(d,g){d=d||"";if("query"===g){e.query=new q(d)}else{try{d=z.urlDecode(d)}catch(f){f+"urlDecode error : "+d}e[g]=d}});return e}var s=/[#\/\?@]/g,o=/[#\?]/g,y=/[#@]/g,w=/#/g,n=RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),v=z.Path,j={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7};q.prototype={constructor:q,clone:function(){return new q(this.toString())},reset:function(b){this._query=b||"";this._queryMap=null;return this},count:function(){var e=0,f,g;u(this);f=this._queryMap;for(g in f){z.isArray(f[g])?e+=f[g].length:e++}return e},has:function(c){var e;u(this);e=this._queryMap;return c?c in e:!z.isEmptyObject(e)},get:function(d){var c;u(this);c=this._queryMap;return d?c[d]:c},keys:function(){u(this);return z.keys(this._queryMap)},set:function(e,f){var g;u(this);g=this._queryMap;"string"===typeof e?this._queryMap[e]=f:(e instanceof q&&(e=e.get()),z.each(e,function(d,c){g[c]=d}));return this},remove:function(b){u(this);b?delete this._queryMap[b]:this._queryMap={};return this},add:function(f,e){var g,h;if("string"===typeof f){u(this),g=this._queryMap,h=g[f],h=h===t?e:[].concat(h).concat(e),g[f]=h}else{for(g in f instanceof q&&(f=f.get()),f){this.add(g,f[g])}}return this},toString:function(c){u(this);return z.param(this._queryMap,t,t,c)}};x.prototype={constructor:x,clone:function(){var c=new x,e=this;z.each(j,function(b,d){c[d]=e[d]});c.query=c.query.clone();return c},resolve:function(c){"string"===typeof c&&(c=new x(c));var i=0,h,e=this.clone();z.each("scheme,userInfo,hostname,port,path,query,fragment".split(","),function(b){if(b==="path"){if(i){e[b]=c[b]}else{if(b=c.path){i=1;if(!z.startsWith(b,"/")){if(e.hostname&&!e.path){b="/"+b}else{if(e.path){h=e.path.lastIndexOf("/");h!==-1&&(b=e.path.slice(0,h+1)+b)}}}e.path=v.normalize(b)}}}else{if(b==="query"){if(i||c.query.toString()){e.query=c.query.clone();i=1}}else{if(i||c[b]){e[b]=c[b];i=1}}}});return e},getScheme:function(){return this.scheme},setScheme:function(b){this.scheme=b;return this},getHostname:function(){return this.hostname},setHostname:function(b){this.hostname=b;return this},setUserInfo:function(b){this.userInfo=b;return this},getUserInfo:function(){return this.userInfo},setPort:function(b){this.port=b;return this},getPort:function(){return this.port},setPath:function(b){this.path=b;return this},getPath:function(){return this.path},setQuery:function(b){"string"===typeof b&&(z.startsWith(b,"?")&&(b=b.slice(1)),b=new q(p(b,y)));this.query=b;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(c){z.startsWith(c,"#")&&(c=c.slice(1));this.fragment=c;return this},isSameOriginAs:function(b){return this.hostname.toLowerCase()===b.hostname.toLowerCase()&&this.scheme.toLowerCase()===b.scheme.toLowerCase()&&this.port.toLowerCase()===b.port.toLowerCase()},toString:function(d){var i=[],h,e;if(h=this.scheme){i.push(p(h,s)),i.push(":")}if(h=this.hostname){i.push("//");if(e=this.userInfo){i.push(p(e,s)),i.push("@")}i.push(encodeURIComponent(h));if(e=this.port){i.push(":"),i.push(e)}}if(e=this.path){h&&!z.startsWith(e,"/")&&(e="/"+e),e=v.normalize(e),i.push(p(e,o))}if(d=this.query.toString.call(this.query,d)){i.push("?"),i.push(d)}if(d=this.fragment){i.push("#"),i.push(p(d,w))}return i.join("")}};x.Query=q;x.getComponents=function(e){var f=(e||"").match(n)||[],g={};z.each(j,function(d,c){g[c]=f[d]});return g};z.Uri=x})(KISSY);(function(x,r){function s(d){var c=0;return parseFloat(d.replace(/\./g,function(){return 0===c++?".":""}))}function p(e,c){var f;c.trident=0.1;if((f=e.match(/Trident\/([\d.]*)/))&&f[1]){c.trident=s(f[1])}c.core="trident"}function o(e){var c,f;return(c=e.match(/MSIE ([^;]*)|Trident.*; rv(?:\s|:)?([0-9.]+)/))&&(f=c[1]||c[2])?s(f):0}function v(A){var z,l="",y="",k,i=[6,9],g,C=n&&n.createElement("div"),B=[],f={webkit:r,trident:r,gecko:r,presto:r,chrome:r,safari:r,firefox:r,ie:r,ieMode:r,opera:r,mobile:r,core:r,shell:r,phantomjs:r,os:r,ipad:r,iphone:r,ipod:r,ios:r,android:r,nodejs:r};C&&C.getElementsByTagName&&(C.innerHTML="<!--[if IE {{version}}]><s></s><![endif]-->".replace("{{version}}",""),B=C.getElementsByTagName("s"));if(0<B.length){p(A,f);k=i[0];for(i=i[1];k<=i;k++){if(C.innerHTML="<!--[if IE {{version}}]><s></s><![endif]-->".replace("{{version}}",k),0<B.length){f[y="ie"]=k;break}}if(!f.ie&&(g=o(A))){f[y="ie"]=g}}else{if((k=A.match(/AppleWebKit\/([\d.]*)/))&&k[1]){f[l="webkit"]=s(k[1]);if((k=A.match(/OPR\/(\d+\.\d+)/))&&k[1]){f[y="opera"]=s(k[1])}else{if((k=A.match(/Chrome\/([\d.]*)/))&&k[1]){f[y="chrome"]=s(k[1])}else{if((k=A.match(/\/([\d.]*) Safari/))&&k[1]){f[y="safari"]=s(k[1])}}}if(/ Mobile\//.test(A)&&A.match(/iPad|iPod|iPhone/)){f.mobile="apple";if((k=A.match(/OS ([^\s]*)/))&&k[1]){f.ios=s(k[1].replace("_","."))}z="ios";if((k=A.match(/iPad|iPod|iPhone/))&&k[0]){f[k[0].toLowerCase()]=f.ios}}else{if(/ Android/i.test(A)){if(/Mobile/.test(A)&&(z=f.mobile="android"),(k=A.match(/Android ([^\s]*);/))&&k[1]){f.android=s(k[1])}}else{if(k=A.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/)){f.mobile=k[0].toLowerCase()}}}if((k=A.match(/PhantomJS\/([^\s]*)/))&&k[1]){f.phantomjs=s(k[1])}}else{if((k=A.match(/Presto\/([\d.]*)/))&&k[1]){if(f[l="presto"]=s(k[1]),(k=A.match(/Opera\/([\d.]*)/))&&k[1]){f[y="opera"]=s(k[1]);if((k=A.match(/Opera\/.* Version\/([\d.]*)/))&&k[1]){f[y]=s(k[1])}if((k=A.match(/Opera Mini[^;]*/))&&k){f.mobile=k[0].toLowerCase()}else{if((k=A.match(/Opera Mobi[^;]*/))&&k){f.mobile=k[0]}}}}else{if(g=o(A)){f[y="ie"]=g,p(A,f)}else{if(k=A.match(/Gecko/)){f[l="gecko"]=0.1;if((k=A.match(/rv:([\d.]*)/))&&k[1]){f[l]=s(k[1]),/Mobile|Tablet/.test(A)&&(f.mobile="firefox")}if((k=A.match(/Firefox\/([\d.]*)/))&&k[1]){f[y="firefox"]=s(k[1])}}}}}}z||(/windows|win32/i.test(A)?z="windows":/macintosh|mac_powerpc/i.test(A)?z="macintosh":/linux/i.test(A)?z="linux":/rhino/i.test(A)&&(z="rhino"));f.os=z;f.core=f.core||l;f.shell=y;f.ieMode=f.ie&&n.documentMode||f.ie;return f}var q=x.Env.host,n=q.document,q=q.navigator,w=KISSY.UA=v(q&&q.userAgent||"");if("object"===typeof process){var u,j;if((u=process.versions)&&(j=u.node)){w.os=process.platform,w.nodejs=s(j)}}w.getDescriptorFromUserAgent=v;u="webkit,trident,gecko,presto,chrome,safari,firefox,ie,opera".split(",");j=n&&n.documentElement;var t="";j&&(x.each(u,function(b){var c=w[b];c&&(t+=" ks-"+b+(parseInt(c)+""),t+=" ks-"+b)}),x.trim(t)&&(j.className=x.trim(j.className+t)))})(KISSY);
(function(L,F){var G=L.Env.host,D=L.UA,B=["","Webkit","Moz","O","ms"],J=G.document||{},E,A,K,I,z,H,u,C=J.documentElement,y,w=!0,t=!1,x="ontouchstart" in J&&!D.phantomjs,p=D.ieMode;
if(C){
C.querySelector&&8!==p&&(t=!0),y=C.style,L.each(B,function(b){var e=b?b+"Transition":"transition",d=b?b+"Transform":"transform";z===F&&e in y&&(z=b,K=e);H===F&&d in y&&(H=b,I=d)}),w="classList" in C,D=G.navigator||{},E="msPointerEnabled" in D,A="pointerEnabled" in D;
if(I){try{J=J.createElement("p"),C.insertBefore(J,C.firstChild),J.style[I]="translate3d(1px,1px,1px)",D=G.getComputedStyle(J),D=D.getPropertyValue(I)||D[I],C.removeChild(J),u=D!==F&&0<D.length&&"none"!==D}catch(_F){u=true}};
};
L.Features={isMsPointerSupported:function(){return E},isPointerSupported:function(){return A},isTouchEventSupported:function(){return x},isTouchGestureSupported:function(){return x||A||E},isDeviceMotionSupported:function(){return !!G.DeviceMotionEvent},isHashChangeSupported:function(){return"onhashchange" in G&&(!p||p>7)},isTransitionSupported:function(){return z!==F},isTransformSupported:function(){return H!==F},isTransform3dSupported:function(){return u},isClassListSupported:function(){return w},isQuerySelectorSupported:function(){return !L.config("dom/selector")&&t},isIELessThan:function(b){return !!(p&&p<b)},getTransitionPrefix:function(){return z},getTransformPrefix:function(){return H},getTransitionProperty:function(){return K},getTransformProperty:function(){return I}}})(KISSY);
(function(b){(b.Loader={}).Status={ERROR:-1,INIT:0,LOADING:1,LOADED:2,READY_TO_ATTACH:3,ATTACHING:4,ATTACHED:5}})(KISSY);(function(L){function F(f){if("string"===typeof f){return G(f)}for(var e=[],g=0,h=f.length;g<h;g++){e[g]=G(f[g])}return e}function G(c){"/"===c.charAt(c.length-1)&&(c+="index");L.endsWith(c,".js")&&(c=c.slice(0,-3));return c}function D(f,h){var i=h.indexOf("!");if(-1!==i){var g=h.substring(0,i),h=h.substring(i+1);L.use(g,{sync:!0,success:function(b,d){d.alias&&(h=d.alias(f,h,g))}})}return h}function B(d){var c;(c=d.match(/^\s*["']([^'"\s]+)["']\s*$/))||"can not find required mod in require call: "+d;return c[1]}var J=L.Loader,E=L.Path,A=L.Env.host,K=L.startsWith,I=J.Status,z=I.ATTACHED,H=I.READY_TO_ATTACH,u=I.LOADED,C=I.ATTACHING,y=I.ERROR,w=J.Utils={},t=A.document;L.mix(w,{docHead:function(){return t.getElementsByTagName("head")[0]||t.documentElement},normalDepModuleName:function(b,g){var h=0,f;if(!g){return g}if("string"===typeof g){return K(g,"../")||K(g,"./")?E.resolve(E.dirname(b),g):E.normalize(g)}for(f=g.length;h<f;h++){g[h]=w.normalDepModuleName(b,g[h])}return g},createModulesInfo:function(c,e){L.each(e,function(b){w.createModuleInfo(c,b)})},createModuleInfo:function(c,k,j){var k=G(k),i=c.Env.mods,f=i[k];return f?f:i[k]=f=new J.Module(L.mix({name:k,runtime:c},j))},getModules:function(j,q){var r=[j],o,n,l,k,i=j.Env.mods;L.each(q,function(b){o=i[b];!o||"css"!==o.getType()?(n=w.unalias(j,b),(l=L.reduce(n,function(d,c){k=i[c];return d&&k&&k.status>=C},!0))?r.push(i[n[0]].exports):r.push(null)):r.push(void 0)});return r},attachModsRecursively:function(f,e){var g,h=f.length;for(g=0;g<h;g++){w.attachModRecursively(f[g],e)}},checkModsLoadRecursively:function(s,r,o,q,n){var o=o||[],n=n||{},l,k=1,j=s.length,i=o.length;for(l=0;l<j;l++){k=k&&w.checkModLoadRecursively(s[l],r,o,q,n),o.length=i}return !!k},checkModLoadRecursively:function(i,e,m,n,l){var k,j=e.Env.mods[i];if(i in l){return l[i]}if(!j){return l[i]=!1}k=j.status;return k===y?(n.push(j),l[i]=!1):k>=H?l[i]=!0:k!==u?l[i]=!1:w.checkModsLoadRecursively(j.getNormalizedRequires(),e,m,n,l)?(j.status=H,l[i]=!0):l[i]=!1},attachModRecursively:function(e,c){var f=c.Env.mods[e];f.status>=C||(f.status=C,f.cjs||w.attachModsRecursively(f.getNormalizedRequires(),c),w.attachMod(c,f))},attachMod:function(f,h){var i=h.factory;if("function"===typeof i){var g;h.requires&&h.requires.length&&(g=L.bind(h.require,h));i=i.apply(h,h.cjs?[f,g,h.exports,h]:w.getModules(f,h.getRequiresWithAlias()));void 0!==i&&(h.exports=i)}else{h.exports=i}h.status=z},getModNamesAsArray:function(b){"string"===typeof b&&(b=b.replace(/\s+/g,"").split(","));return b},normalizeModNames:function(e,c,f){return w.unalias(e,w.normalizeModNamesWithAlias(e,c,f))},unalias:function(s,r){for(var o=[].concat(r),q,n,l,k=0,g,i=s.Env.mods;!k;){k=1;for(q=o.length-1;0<=q;q--){if((n=i[o[q]])&&"alias" in n){k=0;l=n.alias;"string"===typeof l&&(l=[l]);for(g=l.length-1;0<=g;g--){l[g]||l.splice(g,1)}o.splice.apply(o,[q,1].concat(F(l)))}}}return o},normalizeModNamesWithAlias:function(h,g,k){var l=[],j,i;if(g){j=0;for(i=g.length;j<i;j++){g[j]&&l.push(D(h,F(g[j])))}}k&&(l=w.normalDepModuleName(k,l));return l},registerModule:function(f,l,m,k){var l=G(l),j=f.Env.mods,i=j[l];i&&void 0!==i.factory?(l+" is defined more than once","warn"):(w.createModuleInfo(f,l),i=j[l],L.mix(i,{name:l,status:u,factory:m}),L.mix(i,k))},getHash:function(e){var c=5381,f;for(f=e.length;-1<--f;){c=(c<<5)+c+e.charCodeAt(f)}return c+""},getRequiresFromFn:function(d){var c=[];d.toString().replace(x,"").replace(p,function(b,e){c.push(B(e))});return c}});var x=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,p=/[^.'"]\s*require\s*\(([^)]+)\)/g})(KISSY);(function(d){function n(c,f){return f in c?c[f]:c.runtime.Config[f]}function o(c){d.mix(this,c)}function j(c){this.exports={};this.status=e.Status.INIT;this.factory=this.name=void 0;this.cjs=1;d.mix(this,c);this.waitedCallbacks=[]}var e=d.Loader,p=d.Path,m=e.Utils;o.prototype={constructor:o,reset:function(c){d.mix(this,c)},getTag:function(){return n(this,"tag")},getName:function(){return this.name},getBase:function(){return n(this,"base")},getPrefixUriForCombo:function(){var c=this.name;return this.getBase()+(c&&!this.isIgnorePackageNameInUri()?c+"/":"")},getPackageUri:function(){this.packageUri||(this.packageUri=new d.Uri(this.getPrefixUriForCombo()));return this.packageUri},getBaseUri:function(){return n(this,"baseUri")},isDebug:function(){return n(this,"debug")},isIgnorePackageNameInUri:function(){return n(this,"ignorePackageNameInUri")},getCharset:function(){return n(this,"charset")},isCombine:function(){return n(this,"combine")},getGroup:function(){return n(this,"group")}};e.Package=o;j.prototype={kissy:1,constructor:j,use:function(c,f){c=m.getModNamesAsArray(c);return KISSY.use(m.normalDepModuleName(this.name,c),f)},resolve:function(c){return this.getFullPathUri().resolve(c)},resolveByName:function(c){return m.normalDepModuleName(this.name,c)},require:function(c){return d.require(c,this.name)},wait:function(c){this.waitedCallbacks.push(c)},notifyAll:function(){for(var f,h=this.waitedCallbacks.length,i=0;i<h;i++){f=this.waitedCallbacks[i];try{f(this)}catch(g){g.stack||g,"error",setTimeout(function(){throw g},0)}}this.waitedCallbacks=[]},getType:function(){var c=this.type;c||(this.type=c=".css"===p.extname(this.name).toLowerCase()?"css":"js");return c},getFullPathUri:function(){var c,i,g,h;if(!this.fullPathUri){if(this.fullpath){i=new d.Uri(this.fullpath)}else{i=this.getPackage();c=i.getBaseUri();h=this.getPath();if(i.isIgnorePackageNameInUri()&&(g=i.name)){h=p.relative(g,h)}i=c.resolve(h);if(c=this.getTag()){c+="."+this.getType(),i.query.set("t",c)}}this.fullPathUri=i}return this.fullPathUri},getFullPath:function(){var c;this.fullpath||(c=this.getFullPathUri(),this.fullpath=c.toString());return this.fullpath},getPath:function(){var c;if(!(c=this.path)){c=this.name;var h="."+this.getType(),g="-min";c=p.join(p.dirname(c),p.basename(c,h));this.getPackage().isDebug()&&(g="");c=this.path=c+g+h}return c},getName:function(){return this.name},getPackage:function(){var f;if(!(f=this.packageInfo)){var h=this.name;f=this.runtime.config("packages");var h=h+"/",i="",g;for(g in f){d.startsWith(h,g+"/")&&g.length>i.length&&(i=g)}f=this.packageInfo=f[i]||b}return f},getTag:function(){return this.tag||this.getPackage().getTag()},getCharset:function(){return this.charset||this.getPackage().getCharset()},getRequiresWithAlias:function(){var c=this.requiresWithAlias,f=this.requires;if(!f||0===f.length){return f||[]}c||(this.requiresWithAlias=c=m.normalizeModNamesWithAlias(this.runtime,f,this.name));return c},getRequiredMods:function(){var c=this.runtime;return d.map(this.getNormalizedRequires(),function(f){return m.createModuleInfo(c,f)})},getNormalizedRequires:function(){var f,h=this.normalizedRequiresStatus,i=this.status,g=this.requires;if(!g||0===g.length){return g||[]}if((f=this.normalizedRequires)&&h===i){return f}this.normalizedRequiresStatus=i;return this.normalizedRequires=m.normalizeModNames(this.runtime,g,this.name)}};e.Module=j;var b=new o({name:"",runtime:d})})(KISSY);(function(d){function n(g,k){var l=0;if(e.webkit){g.sheet&&("webkit css poll loaded: "+k,l=1)}else{if(g.sheet){try{g.sheet.cssRules&&("same domain css poll loaded: "+k,l=1)}catch(i){var h=i.name;"css poll exception: "+h+" "+i.code+" "+k;"NS_ERROR_DOM_SECURITY_ERR"===h&&("css poll exception: "+h+"loaded : "+k,l=1)}}}return l}function o(){for(var f in b){var g=b[f],h=g.node;n(h,f)&&(g.callback&&g.callback.call(h),delete b[f])}d.isEmptyObject(b)?("clear css poll timer",m=0):m=setTimeout(o,j)}var j=30,e=d.UA,p=d.Loader.Utils,m=0,b={};p.pollCss=function(f,g){var h;h=b[f.href]={};h.node=f;h.callback=g;m||("start css poll timer",o())};p.isCssLoaded=n})(KISSY);(function(b){var l=b.Env.host.document,m=b.Loader.Utils,e=b.Path,d={},n,j=b.UA;b.getScript=function(k,w,u){function i(){var o=g.readyState;if(!o||"loaded"===o||"complete"===o){g.onreadystatechange=g.onload=null,x(0)}}var t=w,c=0,p,h,f,y;b.startsWith(e.extname(k).toLowerCase(),".css")&&(c=1);b.isPlainObject(t)&&(w=t.success,p=t.error,h=t.timeout,u=t.charset,f=t.attrs);t=d[k]=d[k]||[];t.push([w,p]);if(1<t.length){return t.node}var g=l.createElement(c?"link":"script");f&&b.each(f,function(q,o){g.setAttribute(o,q)});u&&(g.charset=u);c?(g.href=k,g.rel="stylesheet"):(g.src=k,g.async=!0);t.node=g;var x=function(o){var q;if(y){y.cancel();y=void 0}b.each(d[k],function(r){(q=r[o])&&q.call(g)});delete d[k]},w="onload" in g,u=b.Config.forceCssPoll||j.webkit&&536>j.webkit;c&&u&&w&&(w=!1);w?(g.onload=i,g.onerror=function(){g.onerror=null;x(1)}):c?m.pollCss(g,function(){x(0)}):g.onreadystatechange=i;h&&(y=b.later(function(){x(1)},1000*h));n||(n=m.docHead());c?n.appendChild(g):n.insertBefore(g,n.firstChild);return g}})(KISSY);(function(r,n){function o(c){c=c.replace(/\\/g,"/");"/"!==c.charAt(c.length-1)&&(c+="/");m?c=m.resolve(c):(r.startsWith(c,"file:")||(c="file:"+c),c=new r.Uri(c));return c}var j=r.Loader,e=j.Utils,p=r.Env.host.location,m,d,q=r.Config.fns;if(!r.UA.nodejs&&p&&(d=p.href)){m=new r.Uri(d)}r.Config.loadModsFn=function(f,g){r.getScript(f.fullpath,g)};q.packages=function(f){var k,i=this.Config,g=i.packages=i.packages||{};return f?(r.each(f,function(c,l){k=c.name||l;var h=o(c.base||c.path);c.name=k;c.base=h.toString();c.baseUri=h;c.runtime=r;delete c.path;g[k]?g[k].reset(c):g[k]=new j.Package(c)}),n):!1===f?(i.packages={},n):g};q.modules=function(f){var g=this;f&&r.each(f,function(c,i){var h=e.createModuleInfo(g,i,c);h.status===j.Status.INIT&&r.mix(h,c)})};q.base=function(f){var c=this.Config;if(!f){return c.base}f=o(f);c.base=f.toString();c.baseUri=f;return n}})(KISSY);(function(L,F){function G(g,r,q,o,l){var n=r&&r.length,d=[],h=[];L.each(r,function(f){var b,e={timeout:l,success:function(){h.push(f);b&&t&&("standard browser get mod name after load : "+b.name,I.registerModule(g,b.name,t.factory,t.config),t=F);--n||q(h,d)},error:function(){d.push(f);--n||q(h,d)},charset:o};f.combine||(b=f.mods[0],"css"===b.getType()?b=F:E&&(x=b.name,p=L.now(),e.attrs={"data-mod-name":b.name}));L.Config.loadModsFn(f,e)})}function D(c,e){L.mix(this,{runtime:c,waitingModules:e})}function B(e,d){if(!e&&"function"===typeof d&&1<d.length){var f=I.getRequiresFromFn(d);f.length&&(e=e||{},e.requires=f)}else{e&&e.requires&&!e.cjs&&(e.cjs=0)}return e}function J(f,e){for(var f=f.split(/\//),e=e.split(/\//),g=Math.min(f.length,e.length),h=0;h<g&&f[h]===e[h];h++){}return f.slice(0,h).join("/")+"/"}var E=10>L.UA.ieMode,A=L.Loader,K=A.Status,I=A.Utils,z=I.getHash,H=K.LOADING,u=K.LOADED,C=K.READY_TO_ATTACH,y=K.ERROR,w=L.now();D.groupTag=w;var t,x,p;D.add=function(g,o,n,l,h){if(3===h&&L.isArray(o)){var k=o,o=n,n={requires:k,cjs:1}}if("function"===typeof g||1===h){if(n=o,o=g,n=B(n,o),E){for(var g=L.Env.host.document.getElementsByTagName("script"),d,h=g.length-1;0<=h;h--){if(k=g[h],"interactive"===k.readyState){d=k;break}}d?d=d.getAttribute("data-mod-name"):("can not find interactive script,time diff : "+(L.now()-p),"old_ie get mod name from cache : "+x,d=x);I.registerModule(l,d,o,n);x=null;p=0}else{t={factory:o,config:n}}}else{E?(x=null,p=0):t=F,n=B(n,o),I.registerModule(l,g,o,n)}};L.augment(D,{use:function(d){var g=L.Config.timeout,f=this.runtime,d=L.keys(this.calculate(d));I.createModulesInfo(f,d);d=this.getComboUrls(d);L.each(d.css,function(c){G(f,c,function(e,h){L.each(e,function(i){L.each(i.mods,function(j){I.registerModule(f,j.name,L.noop);j.notifyAll()})});L.each(h,function(i){L.each(i.mods,function(b){b.name+" is not loaded! can not find module in path : "+i.fullpath;"error";b.status=y;b.notifyAll()})})},c.charset,g)});L.each(d.js,function(c){G(f,c,function(){L.each(c,function(e){L.each(e.mods,function(b){b.factory||(b.name+" is not loaded! can not find module in path : "+e.fullpath,"error",b.status=y);b.notifyAll()})})},c.charset,g)})},calculate:function(s,r,q){var o,n,l,d,j=this.waitingModules,e=this.runtime,q=q||{},r=r||{};for(o=0;o<s.length;o++){n=s[o],r[n]||(r[n]=1,l=I.createModuleInfo(e,n),d=l.status,d>=C||(d!==u&&!j.contains(n)&&(d!==H&&(l.status=H,q[n]=1),l.wait(function(b){j.remove(b.name);j.notifyAll()}),j.add(n)),this.calculate(l.getNormalizedRequires(),r,q)))}return q},getComboMods:function(W,U){for(var T={},S,R=this.runtime,M=0,Q=W.length,P,O,N,d,q,X,c,Z,Y;M<Q;++M){P=W[M];P=I.createModuleInfo(R,P);N=P.getType();Y=P.getFullPath();O=P.getPackage();c=O.name;q=O.getCharset();d=O.getTag();Z=O.getGroup();X=O.getPrefixUriForCombo();S=O.getPackageUri();var V=c;(P.canBeCombined=O.isCombine()&&L.startsWith(Y,X))&&Z?(V=Z+"_"+q+"_"+w,(O=U[V])?O.isSameOriginAs(S)?O.setPath(J(O.getPath(),S.getPath())):(V=c,U[c]=S):U[V]=S.clone()):U[c]=S;S=T[N]=T[N]||{};(N=S[V])?1===N.tags.length&&N.tags[0]===d||N.tags.push(d):(N=S[V]=[],N.charset=q,N.tags=[d]);N.push(P)}return T},getComboUrls:function(ag){var af=this.runtime.Config,ae=af.comboPrefix,ad=af.comboSep,ac=af.comboMaxFileNum,af=af.comboMaxUrlLength,ab={},ag=this.getComboMods(ag,ab),aa={},Z;for(Z in ag){aa[Z]={};for(var X in ag[Z]){var Y=[],W=[],V=ag[Z][X],T=V.tags,U=(T=1<T.length?z(T.join("")):T[0])?"?t="+encodeURIComponent(T)+"."+Z:"",T=U.length,M=ab[X].toString(),P=M.length,N=M+ae,R=aa[Z][X]=[],M=N.length;R.charset=V.charset;R.mods=[];for(var m=function(){R.push({combine:1,fullpath:N+Y.join(ad)+U,mods:W})},Q=0;Q<V.length;Q++){var S=V[Q];R.mods.push(S);var O=S.getFullPath();if(S.canBeCombined){if(O=O.slice(P).replace(/\?.*$/,""),Y.push(O),W.push(S),Y.length>ac||M+Y.join(ad).length+T>af){Y.pop(),W.pop(),m(),Y=[],W=[],Q--}}else{R.push({combine:0,fullpath:O,mods:[S]})}}Y.length&&m()}}return aa}});A.ComboLoader=D})(KISSY);(function(d,n){function o(c){d.mix(this,{fn:c,waitMods:{}})}var j=d.Loader,e=d.Env,p=j.Utils,m=d.setImmediate,b=j.ComboLoader;o.prototype={constructor:o,notifyAll:function(){var c=this.fn;c&&d.isEmptyObject(this.waitMods)&&(this.fn=null,c())},add:function(c){this.waitMods[c]=1},remove:function(c){delete this.waitMods[c]},contains:function(c){return this.waitMods[c]}};j.WaitingModules=o;d.mix(d,{add:function(g,i,h){b.add(g,i,h,d,arguments.length)},use:function(v,u){function r(){++c;var q=[],i=d.now(),k;k=p.checkModsLoadRecursively(t,d,n,q);c+" check duration "+(d.now()-i);k?(p.attachModsRecursively(t,d),u&&(g?w():m(w))):q.length?l&&(g?l.apply(d,q):m(function(){l.apply(d,q)})):(c+" reload "+v,f.fn=r,h.use(t))}var t,h,l,g,c=0,w,f=new o(r);d.isPlainObject(u)&&(g=u.sync,l=u.error,u=u.success);w=function(){u.apply(d,p.getModules(d,v))};v=p.getModNamesAsArray(v);v=p.normalizeModNamesWithAlias(d,v);t=p.unalias(d,v);h=new b(d,f);g?f.notifyAll():m(function(){f.notifyAll()});return d},require:function(c,h){if(c){var g=p.unalias(d,p.normalizeModNamesWithAlias(d,[c],h));p.attachModsRecursively(g,d);return p.getModules(d,g)[1]}}});e.mods={}})(KISSY);(function(t){function o(h){var k=h.src||"";if(!k.match(q)){return 0}var h=(h=h.getAttribute("data-config"))?(new Function("return "+h))():{},c=h.comboPrefix||n,b=h.comboSep||e,l,d=k.indexOf(c);-1===d?l=k.replace(s,"$1"):(l=k.substring(0,d),"/"!==l.charAt(l.length-1)&&(l+="/"),c=k.substring(d+c.length).split(b),t.each(c,function(f){if(f.match(q)){return l+=f.replace(s,"$1"),!1}}));"tag" in h||(c=k.lastIndexOf("?"),-1!==c&&(k=k.substring(c+1),h.tag=j.getHash(r+k)));h.base=h.base||l;return h}function p(){var f=m.getElementsByTagName("script"),d,g;for(d=f.length-1;0<=d;d--){if(g=o(f[d])){return g}}"must load kissy by file name in browser environment: seed.js or seed-min.js";"error";return null}var m=t.Env.host&&t.Env.host.document,j=t.Loader.Utils,r="20131209235315",n="??",e=",",s=/^(.*)(seed|kissy)(?:-min)?\.js[^/]*/i,q=/(seed|kissy)(?:-min)?\.js/i;t.config({comboPrefix:n,comboSep:e,charset:"utf-8",lang:"zh-cn",tag:r});t.UA.nodejs?t.config({charset:"utf-8",base:__dirname.replace(/\\/g,"/").replace(/\/$/,"")+"/"}):m&&m.getElementsByTagName&&t.config(t.mix({comboMaxUrlLength:2000,comboMaxFileNum:40},p()))})(KISSY);KISSY.add("i18n",{alias:function(b,c){return c+"/i18n/"+b.Config.lang}});(function(a,g){function f(){if(!b){c&&!k.nodejs&&q(i,j,f);b=1;for(var e=0;e<d.length;e++){try{d[e](a)}catch(g){g.stack||g,"error",setTimeout(function(){throw g},0)}}}}var i=a.Env.host,k=a.UA,c=i.document,h=c&&c.documentElement,l=i.location,b=0,d=[],m=/^#?([\w-]+)$/,e=/\S/,r=!(!c||!c.addEventListener),j="load",n=r?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},q=r?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)};a.mix(a,{isWindow:function(a){return null!=a&&a==a.window},parseXML:function(a){if(a.documentElement){return a}var b;try{i.DOMParser?b=(new DOMParser).parseFromString(a,"text/xml"):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a))}catch(c){"parseXML error :",c,b=g}(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)&&"Invalid XML: "+a;return b},globalEval:function(a){a&&e.test(a)&&(i.execScript?i.execScript(a):i.eval.call(i,a))},ready:function(c){if(b){try{c(a)}catch(e){e.stack||e,"error",setTimeout(function(){throw e},0)}}else{d.push(c)}return this},available:function(b,d){var b=(b+"").match(m)[1],e=1,f=a.later(function(){if(500<++e){f.cancel()}else{var a=c.getElementById(b);a&&(d(a),f.cancel())}},40,!0)}});if(l&&-1!==(l.search||"").indexOf("ks-debug")){a.Config.debug=!0}(function(){if(!c||"complete"===c.readyState){f()}else{if(n(i,j,f),r){var a=function(){q(c,"DOMContentLoaded",a);f()};n(c,"DOMContentLoaded",a)}else{var b=function(){"complete"===c.readyState&&(q(c,"readystatechange",b),f())};n(c,"readystatechange",b);var d,e=h&&h.doScroll;try{d=null===i.frameElement}catch(g){d=!1}if(e&&d){var k=function(){try{e("left"),f()}catch(a){setTimeout(k,40)}};k()}}}})();if(k.ie){try{c.execCommand("BackgroundImageCache",!1,!0)}catch(s){}}})(KISSY,void 0);(function(b){b.config({modules:{core:{alias:"dom,event,io,anim,base,node,json,ua,cookie".split(",")},ajax:{alias:"io"},"rich-base":{alias:"base"}}});if("undefined"!==typeof location){var c=b.startsWith(location.href,"https")?"https://s.tbcdn.cn/s/kissy/":"http://a.tbcdn.cn/s/kissy/";b.config({packages:{gallery:{base:c},mobile:{base:c}}})}})(KISSY);(function(b,c,d){b({"anim/transition?":{alias:KISSY.Features.isTransitionSupported()?"anim/transition":""}});b({anim:{requires:["anim/base","anim/timer","anim/transition?"]}});b({"anim/base":{requires:["dom","promise"]}});b({"anim/timer":{requires:["dom","anim/base"]}});b({"anim/transition":{requires:["dom","event/dom","anim/base"]}});b({attribute:{requires:["event/custom"]}});b({base:{requires:["attribute"]}});b({button:{requires:["node","component/control"]}});b({color:{requires:["attribute"]}});b({combobox:{requires:["node","component/control","menu","attribute","io"]}});b({"component/container":{requires:["component/control","component/manager"]}});b({"component/control":{requires:["node","base","promise","component/manager","xtemplate/runtime"]}});b({"component/extension/align":{requires:["node"]}});b({"component/extension/content-render":{requires:["component/extension/content-xtpl"]}});b({"component/extension/delegate-children":{requires:["node","component/manager"]}});b({"component/plugin/drag":{requires:["dd"]}});b({"component/plugin/resize":{requires:["resizable"]}});b({"date/format":{requires:["date/gregorian","i18n!date"]}});b({"date/gregorian":{requires:["i18n!date"]}});b({"date/picker":{requires:["node","date/gregorian","i18n!date/picker","component/control","date/format"]}});b({"date/popup-picker":{requires:["date/picker/picker-xtpl","date/picker","component/extension/shim","component/extension/align"]}});b({dd:{requires:["node","base"]}});b({"dd/plugin/constrain":{requires:["node","base"]}});b({"dd/plugin/proxy":{requires:["node","dd","base"]}});b({"dd/plugin/scroll":{requires:["node","dd","base"]}});b({"dom/basic":{alias:["dom/base",c.isIELessThan(9)?"dom/ie":"",c.isClassListSupported()?"":"dom/class-list"]},dom:{alias:["dom/basic",!c.isQuerySelectorSupported()?"dom/selector":""]}});b({"dom/class-list":{requires:["dom/base"]}});b({"dom/ie":{requires:["dom/base"]}});b({"dom/selector":{requires:["dom/basic"]}});b({editor:{requires:["node","html-parser","component/control"]}});b({event:{requires:["event/dom","event/custom"]}});b({"event/custom":{requires:["event/base"]}});b({"event/dom":{alias:["event/dom/base",c.isTouchGestureSupported()?"event/dom/touch":"",c.isDeviceMotionSupported()?"event/dom/shake":"",c.isHashChangeSupported()?"":"event/dom/hashchange",c.isIELessThan(9)?"event/dom/ie":"",d.ie?"":"event/dom/focusin"]}});b({"event/dom/base":{requires:["event/base","dom"]}});b({"event/dom/focusin":{requires:["event/dom/base"]}});b({"event/dom/hashchange":{requires:["event/dom/base","dom"]}});b({"event/dom/ie":{requires:["event/dom/base","dom"]}});b({"event/dom/shake":{requires:["event/dom/base"]}});b({"event/dom/touch":{requires:["event/dom/base","dom"]}});b({"filter-menu":{requires:["menu","component/extension/content-xtpl","component/extension/content-render"]}});b({io:{requires:["dom","event/custom","promise","event/dom"]}});b({kison:{requires:["base"]}});b({menu:{requires:"node,component/container,component/extension/delegate-children,component/control,component/extension/content-render,component/extension/content-xtpl,component/extension/align,component/extension/shim".split(",")}});b({menubutton:{requires:["node","button","component/extension/content-xtpl","component/extension/content-render","menu"]}});b({mvc:{requires:["io","json","attribute","node"]}});b({node:{requires:["dom","event/dom","anim"]}});b({overlay:{requires:"component/container,component/extension/shim,component/extension/align,node,component/extension/content-xtpl,component/extension/content-render".split(",")}});b({resizable:{requires:["node","base","dd"]}});b({"resizable/plugin/proxy":{requires:["node","base"]}});b({"scroll-view":{alias:c.isTouchGestureSupported()?"scroll-view/drag":"scroll-view/base"}});b({"scroll-view/base":{requires:["node","anim","component/container","component/extension/content-render"]}});b({"scroll-view/drag":{requires:["scroll-view/base","node","anim"]}});b({"scroll-view/plugin/pull-to-refresh":{requires:["base"]}});b({"scroll-view/plugin/scrollbar":{requires:["base","node","component/control"]}});b({separator:{requires:["component/control"]}});b({"split-button":{requires:["component/container","button","menubutton"]}});b({stylesheet:{requires:["dom"]}});b({swf:{requires:["dom","json","attribute"]}});b({tabs:{requires:["component/container","toolbar","button"]}});b({toolbar:{requires:["component/container","component/extension/delegate-children","node"]}});b({tree:{requires:["node","component/container","component/extension/content-xtpl","component/extension/content-render","component/extension/delegate-children"]}});b({xtemplate:{requires:["xtemplate/runtime","xtemplate/compiler"]}});b({"xtemplate/compiler":{requires:["xtemplate/runtime"]}});b({"xtemplate/nodejs":{requires:["xtemplate"]}});b({"xtemplate/runtime":{requires:["path"]}})})(function(b){KISSY.config("modules",b)},KISSY.Features,KISSY.UA);(function(d){d.add("ua",function(){return d.UA});d.add("uri",function(){return d.Uri});d.add("path",function(){return d.Path});var n=d.UA,o=d.Env.host,j=(n.nodejs&&"object"===typeof global?global:o).JSON;9>n.ieMode&&(j=null);if(j){d.add("json",function(){return d.JSON=j}),d.parseJson=function(c){return j.parse(c)}}else{var e=/^[\],:{}\s]*$/,p=/(?:^|:|,)(?:\s*\[)+/g,m=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,b=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;d.parseJson=function(c){return null===c?c:"string"===typeof c&&(c=d.trim(c))&&e.test(c.replace(m,"@").replace(b,"]").replace(p,""))?(new Function("return "+c))():d.error("Invalid Json: "+c)}}d.UA.nodejs&&(d.KISSY=d,module.exports=d)})(KISSY);KISSY.add("io/form-serializer",["dom"],function(o,n){function j(c){return c.replace(l,"\r\n")}var e=n("dom"),m=/^(?:select|textarea)/i,l=/\r?\n/g,b,p=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;return b={serialize:function(f,d){return o.param(b.getFormData(f),void 0,void 0,d||!1)},getFormData:function(c){var d=[],f={};o.each(e.query(c),function(g){g=g.elements?o.makeArray(g.elements):[g];d.push.apply(d,g)});d=o.filter(d,function(g){return g.name&&!g.disabled&&(g.checked||m.test(g.nodeName)||p.test(g.type))});o.each(d,function(h){var i=e.val(h),g;null!==i&&(i=o.isArray(i)?o.map(i,j):j(i),(g=f[h.name])?(g&&!o.isArray(g)&&(g=f[h.name]=[g]),g.push.apply(g,o.makeArray(i))):f[h.name]=i)});return f}}});KISSY.add("io/base",["event/custom","promise"],function(x,v){function s(d){var f=d.context;delete d.context;d=x.mix(x.clone(r),d,{deep:!0});d.context=f||d;var c,e=d.type,g=d.dataType,f=d.uri=b.resolve(d.url);d.uri.setQuery("");"crossDomain" in d||(d.crossDomain=!d.uri.isSameOriginAs(b));e=d.type=e.toUpperCase();d.hasContent=!w.test(e);if(d.processData&&(c=d.data)&&"string"!==typeof c){d.data=x.param(c,void 0,void 0,d.serializeArray)}g=d.dataType=x.trim(g||"*").split(y);!("cache" in d)&&x.inArray(g[0],["script","jsonp"])&&(d.cache=!1);d.hasContent||(d.data&&f.query.add(x.unparam(d.data)),!1===d.cache&&f.query.set("_ksTS",x.now()+"_"+x.guid()));return d}function q(D){var E=this;if(!(E instanceof q)){return new q(D)}t.call(E);D=s(D);x.mix(E,{responseData:null,config:D||{},timeoutTimer:null,responseText:null,responseXML:null,responseHeadersString:"",responseHeaders:null,requestHeaders:{},readyState:0,state:0,statusText:null,status:0,transport:null});t.Defer(E);var C;q.fire("start",{ajaxConfig:D,io:E});C=new (o[D.dataType[0]]||o["*"])(E);E.transport=C;D.contentType&&E.setRequestHeader("Content-Type",D.contentType);var k=D.dataType[0],B,i=D.timeout,h=D.context,m=D.headers,A=D.accepts;E.setRequestHeader("Accept",k&&A[k]?A[k]+("*"===k?"":", */*; q=0.01"):A["*"]);for(B in m){E.setRequestHeader(B,m[B])}if(D.beforeSend&&!1===D.beforeSend.call(h,E,D)){return E}E.readyState=1;q.fire("send",{ajaxConfig:D,io:E});D.async&&0<i&&(E.timeoutTimer=setTimeout(function(){E.abort("timeout")},1000*i));try{E.state=1,C.send()}catch(d){2>E.state?(d.stack||d,"error",E._ioReady(-1,d.message)):d}return E}var u=v("event/custom"),t=v("promise"),z=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,y=/\s+/,p=function(c){return c},w=/^(?:GET|HEAD)$/,b=new x.Uri((x.Env.host.location||{}).href),z=b&&z.test(b.getScheme()),o={},r={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,serializeArray:!0,processData:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},converters:{text:{json:x.parseJson,html:p,text:p,xml:x.parseXML}},headers:{},responseType: false,contents:{xml:/xml/,html:/html/,json:/json/,blob:/image/}};r.converters.html=r.converters.text;x.mix(q,u.Target);x.mix(q,{isLocal:z,setupConfig:function(c){x.mix(r,c,{deep:!0})},setupTransport:function(c,d){o[c]=d},getTransport:function(c){return o[c]},getConfig:function(){return r}});return q});KISSY.add("io/xhr-transport-base",["./base"],function(t,r){function o(d,e){try{return new (e||p).XMLHttpRequest}catch(c){}}function m(c){var d;c.ifModified&&(d=c.uri,!1===c.cache&&(d=d.clone(),d.query.remove("_ksTS")),d=d.toString());return d}var q=r("./base"),p=t.Env.host,v=7<t.UA.ieMode&&p.XDomainRequest,u={proto:{}},j={},s={};q.__lastModifiedCached=j;q.__eTagCached=s;u.nativeXhr=p.ActiveXObject?function(e,f){var d;if(!b&&e&&v){d=new v}else{if(!(d=!q.isLocal&&o(e,f))){v:{try{d=new (f||p).ActiveXObject("Microsoft.XMLHTTP");break v}catch(g){}d=void 0}}}return d}:o;u.XDomainRequest_=v;var b=u.supportCORS="withCredentials" in u.nativeXhr();t.mix(u.proto,{sendInternal:function(){var l=this,B=l.io,C=B.config,k=l.nativeXhr,y=C.files,z=y?"post":C.type,A=C.async,n,H=C.mimeType,d=B.requestHeaders||{},B=B._getUrlForSend(),G=m(C),e,F;if(G){if(e=j[G]){d["If-Modified-Since"]=e}if(e=s[G]){d["If-None-Match"]=e}}(n=C.username)?k.open(z,B,A,n,C.password):k.open(z,B,A);z=C.xhrFields||{};if("withCredentials" in z && (!A || !b)) delete z.withCredentials;for(F in z){try{k[F]=z[F]}catch(D){D}}H&&k.overrideMimeType&&k.overrideMimeType(H);!1===d["X-Requested-With"]&&delete d["X-Requested-With"];if("undefined"!==typeof k.setRequestHeader){for(F in d){k.setRequestHeader(F,d[F])}}var E=C.hasContent&&C.data||null;y&&(H=E,d={},H&&(d=t.unparam(H)),d=t.mix(d,y),E=new FormData,t.each(d,function(f,c){t.isArray(f)?t.each(f,function(g){E.append(c+(C.serializeArray?"[]":""),g)}):E.append(c,f)}));if(C.responseType){k.responseType=C.responseType;}k.send(E);!A||4===k.readyState?l._callback():v&&k instanceof v?(k.onload=function(){k.readyState=4;k.status=200;l._callback()},k.onerror=function(){k.readyState=4;k.status=500;l._callback()}):k.onreadystatechange=function(){l._callback()}},abort:function(){this._callback(0,1)},_callback:function(l,C){var E=this.nativeXhr,g=this.io,A,k,B,z,J,R,d=g.config;try{if(C||4===E.readyState){if(v&&E instanceof v?(E.onerror=t.noop,E.onload=t.noop):E.onreadystatechange=t.noop,C){4!==E.readyState&&E.abort()}else{A=m(d);var I=E.status;v&&E instanceof v||(g.responseHeadersString=E.getAllResponseHeaders());A&&(k=E.getResponseHeader("Last-Modified"),B=E.getResponseHeader("ETag"),k&&(j[A]=k),B&&(s[B]=B));R=E.response;if(E.responseType&&E.responseType==='blob'){g.responseData=R}else{if((J=E.responseXML)&&J.documentElement){g.responseXML=J}var e=g.responseText=E.responseText;if(d.files&&e){var H,F;if(-1!==(H=e.indexOf("<body>"))){F=e.lastIndexOf("</body>"),-1===F&&(F=e.length),e=e.slice(H+6,F)}g.responseText=t.unEscapeHtml(e)}}try{z=E.statusText}catch(G){"xhr statusText error: ",G,z=""}!I&&q.isLocal&&!d.crossDomain?I=g.responseText?200:404:1223===I&&(I=204);g._ioReady(I,z)}}}catch(D){D.stack||D,"error",setTimeout(function(){throw D},0),E.onreadystatechange=t.noop,C||g._ioReady(-1,D)}}});return u});KISSY.add("io/xdr-flash-transport",["./base","dom"],function(t,r){function o(e,f,c){b||(b=!0,e='<object id="'+u+'" type="application/x-shockwave-flash" data="'+e+'" width="0" height="0"><param name="movie" value="'+e+'" /><param name="FlashVars" value="yid='+f+"&uid="+c+'&host=KISSY.IO" /><param name="allowScriptAccess" value="always" /></object>',f=s.createElement("div"),p.prepend(f,s.body||s.documentElement),f.innerHTML=e)}function m(c){"use XdrFlashTransport for: "+c.config.url;this.io=c}var q=r("./base"),p=r("dom"),v={},u="io_swf",j,s=t.Env.host.document,b=!1;t.augment(m,{send:function(){var g=this,f=g.io,d=f.config;o((d.xdr||{}).src||t.Config.base+"io/assets/io.swf",1,1);j?(g._uid=t.guid(),v[g._uid]=g,j.send(f._getUrlForSend(),{id:g._uid,uid:g._uid,method:d.type,data:d.hasContent&&d.data||{}})):setTimeout(function(){g.send()},200)},abort:function(){j.abort(this._uid)},_xdrResponse:function(y,x){var f,w=x.id,i,k=x.c,n=this.io;if(k&&(i=k.responseText)){n.responseText=decodeURI(i)}switch(y){case"success":f={status:200,statusText:"success"};delete v[w];break;case"abort":delete v[w];break;case"timeout":case"transport error":case"failure":delete v[w],f={status:"status" in k?k.status:500,statusText:k.statusText||y}}f&&n._ioReady(f.status,f.statusText)}});q.applyTo=function(f,h,d){var f=h.split(".").slice(1),g=q;t.each(f,function(c){g=g[c]});g.apply(null,d)};q.xdrReady=function(){j=s.getElementById(u)};q.xdrResponse=function(g,f){var d=v[f.uid];d&&d._xdrResponse(g,f)};return m});KISSY.add("io/sub-domain-transport",["event/dom","dom","./xhr-transport-base"],function(p,o){function j(d){var f=d.config;this.io=d;f.crossDomain=!1;"use SubDomainTransport for: "+f.url}function e(){var c=this.io.config.uri.getHostname(),c=b[c];c.ready=1;n.detach(c.iframe,"load",e,this);this.send()}var n=o("event/dom"),m=o("dom"),r=o("./xhr-transport-base"),q=p.Env.host.document,b={};p.augment(j,r.proto,{send:function(){var g=this.io.config,h=g.uri,d=h.getHostname(),f;f=b[d];var c="/sub_domain_proxy.html";g.xdr&&g.xdr.subDomain&&g.xdr.subDomain.proxy&&(c=g.xdr.subDomain.proxy);f&&f.ready?(this.nativeXhr=r.nativeXhr(0,f.iframe.contentWindow))?this.sendInternal():"document.domain not set correctly!":(f?g=f.iframe:(f=b[d]={},g=f.iframe=q.createElement("iframe"),m.css(g,{position:"absolute",left:"-9999px",top:"-9999px"}),m.prepend(g,q.body||q.documentElement),f=new p.Uri,f.setScheme(h.getScheme()),f.setPort(h.getPort()),f.setHostname(d),f.setPath(c),g.src=f.toString()),n.on(g,"load",e,this))}});return j});KISSY.add("io/xhr-transport",["./base","./xhr-transport-base","./xdr-flash-transport","./sub-domain-transport"],function(p,o){function j(g){var i=g.config,d=i.crossDomain,f=i.xdr||{},c=f.subDomain=f.subDomain||{};this.io=g;if(d&&!n.supportCORS){var h=i.uri.getHostname();if(q.domain&&p.endsWith(h,q.domain)&&!1!==c.proxy){return new r(g)}if("flash"===""+f.use||!b){return new m(g)}}g=this.nativeXhr=n.nativeXhr(d);"crossDomain: "+d+", use "+(b&&g instanceof b?"XDomainRequest":"XhrTransport")+" for: "+i.url;return this}var e=o("./base"),n=o("./xhr-transport-base"),m=o("./xdr-flash-transport"),r=o("./sub-domain-transport"),q=p.Env.host.document,b=n.XDomainRequest_;p.augment(j,n.proto,{send:function(){this.sendInternal()}});e.setupTransport("*",j);return e});KISSY.add("io/script-transport",["./base"],function(g,e){function c(i){var f=i.config;if(!f.crossDomain){return new (b.getTransport("*"))(i)}this.io=i;"use ScriptTransport for: "+f.url;return this}var b=e("./base");b.setupConfig({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{text:{script:function(d){g.globalEval(d);return d}}}});g.augment(c,{send:function(){var i=this,f=i.io,d=f.config;i.script=g.getScript(f._getUrlForSend(),{charset:d.scriptCharset,success:function(){i._callback("success")},error:function(){i._callback("error")}})},_callback:function(j,i){var f=this.io;this.script&&(this.script=void 0,i||("error"!==j?f._ioReady(200,"success"):"error"===j&&f._ioReady(500,"script error")))},abort:function(){this._callback(0,1)}});b.setupTransport("script",c);return b});KISSY.add("io/jsonp",["./base"],function(g,e){var c=e("./base"),b=g.Env.host;c.setupConfig({jsonp:"callback",jsonpCallback:function(){return g.guid("jsonp")}});c.on("start",function(j){var i=j.io,f=i.config,j=f.dataType;if("jsonp"===j[0]){delete f.contentType;var o,d=f.jsonpCallback,k="function"===typeof d?d():d,m=b[k];f.uri.query.set(f.jsonp,k);b[k]=function(h){1<arguments.length&&(h=g.makeArray(arguments));o=[h]};i.fin(function(){b[k]=m;if(void 0===m){try{delete b[k]}catch(h){}}else{o&&m(o[0])}});i=f.converters;i.script=i.script||{};i.script.json=function(){o||" not call jsonpCallback: "+k;return o[0]};j.length=2;j[0]="script";j[1]="json"}});return c});KISSY.add("io/form",["./base","dom","./form-serializer"],function(n,m){var e=m("./base"),c=m("dom"),l=m("./form-serializer"),j=Array.prototype.slice,b=n.Env.host.FormData;e.on("start",function(t){var k,s,t=t.io.config;if(s=t.form){k=c.get(s);s=t.data;for(var g=!1,h={},p=c.query("input",k),u=0,d=p.length;u<d;u++){var r=p[u];if("file"===r.type.toLowerCase()){g=!0;if(!b){break}var q=j.call(r.files,0);h[c.attr(r,"name")]=1<q.length?q:q[0]||null}}g&&b&&(t.files=t.files||{},n.mix(t.files,h),delete t.contentType);!g||b?(k=l.getFormData(k),t.hasContent?(k=n.param(k,void 0,void 0,t.serializeArray),t.data=s?t.data+("&"+k):k):t.uri.query.add(k)):(s=t.dataType,t=s[0],"*"===t&&(t="text"),s.length=2,s[0]="iframe",s[1]=t)}});return e});KISSY.add("io/iframe-transport",["dom","./base","event/dom"],function(r,p){function m(d){var g=r.guid("io-iframe"),f=n.getEmptyIframeSrc(),d=d.iframe=n.create("<iframe "+(f?' src="'+f+'" ':"")+' id="'+g+'" name="'+g+'" style="position:absolute;left:-9999px;top:-9999px;"/>');n.prepend(d,b.body||b.documentElement);return d}function j(h,y,x){var d=[],v,w,u,l;r.each(h,function(c,e){v=r.isArray(c);w=r.makeArray(c);for(u=0;u<w.length;u++){l=b.createElement("input"),l.type="hidden",l.name=e+(v&&x?"[]":""),l.value=w[u],n.append(l,y),d.push(l)}});return d}function o(c){this.io=c;"use IframeTransport for: "+c.config.url}var n=p("dom"),t=p("./base"),s=p("event/dom"),b=r.Env.host.document,q=r.clone(t.getConfig().converters.text);q.json=function(c){return r.parseJson(r.unEscapeHtml(c))};t.setupConfig({converters:{iframe:q,text:{iframe:function(c){return c}},xml:{iframe:function(c){return c}}}});r.augment(o,{send:function(){function w(){s.on(k,"load error",u._callback,u);x.submit()}var u=this,h=u.io,v=h.config,i,k,c,d=v.data,x=n.get(v.form);u.attrs={target:n.attr(x,"target")||"",action:n.attr(x,"action")||"",encoding:n.attr(x,"encoding"),enctype:n.attr(x,"enctype"),method:n.attr(x,"method")};u.form=x;k=m(h);n.attr(x,{target:k.id,action:h._getUrlForSend(),method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"});d&&(c=r.unparam(d));c&&(i=j(c,x,v.serializeArray));u.fields=i;6===r.UA.ie?setTimeout(w,0):w()},_callback:function(h){var w=this,d=w.form,c=w.io,h=h.type,u,v=c.iframe;if(v){if("abort"===h&&6===r.UA.ie?setTimeout(function(){n.attr(d,w.attrs)},0):n.attr(d,w.attrs),n.remove(this.fields),s.detach(v),setTimeout(function(){n.remove(v)},30),c.iframe=null,"load"===h){try{if((u=v.contentWindow.document)&&u.body){c.responseText=n.html(u.body),r.startsWith(c.responseText,"<?xml")&&(c.responseText=void 0)}c.responseXML=u&&u.XMLDocument?u.XMLDocument:u;u?c._ioReady(200,"success"):c._ioReady(500,"parser error")}catch(k){c._ioReady(500,"parser error")}}else{"error"===h&&c._ioReady(500,"error")}}},abort:function(){this._callback({type:"abort"})}});t.setupTransport("iframe",o);return t});KISSY.add("io/methods",["promise","./base"],function(m,l){function c(x){var v=x.responseText,s=x.responseXML,u=x.config,q=u.converters,t,o,w=u.contents,p=u.dataType;if(u.responseType==='blob' && x.responseData){return}for(u=x.mimeType||x.getResponseHeader("Content-Type");"*"===p[0];){p.shift()}if(!p.length){for(t in w){if(w[t].test(u)){p[0]!==t&&p.unshift(t);break}}}p[0]=p[0]||"text";if(v||s){for(t=0;t<p.length;t++){if("text"===p[t]&&void 0!==v){o=v;break}else{if("xml"===p[t]&&void 0!==s){o=s;break}}}if(!o){var n={text:v,xml:s};m.each(["text","xml"],function(g){var f=p[0];if(q[g]&&q[g][f]&&n[g]){return p.unshift(g),o="text"===g?v:s,!1}})}}w=p[0];for(u=1;u<p.length;u++){t=p[u];var d=q[w]&&q[w][t];if(!d){throw"no covert for "+w+" => "+t}o=d(o);w=t}x.responseData=o}var b=l("promise"),j=l("./base"),e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg;m.extend(j,b,{setRequestHeader:function(d,f){this.requestHeaders[d]=f;return this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getResponseHeader:function(f){var h,g,f=f.toLowerCase();if(2===this.state){if(!(g=this.responseHeaders)){for(g=this.responseHeaders={};h=e.exec(this.responseHeadersString);){g[h[1].toLowerCase()]=h[2]}}h=g[f]}return void 0===h?null:h},overrideMimeType:function(d){this.state||(this.mimeType=d);return this},abort:function(d){d=d||"abort";this.transport&&this.transport.abort(d);this._ioReady(0,d);return this},getNativeXhr:function(){var d=this.transport;return d?d.nativeXhr:null},_ioReady:function(w,u){if(2!==this.state){this.state=2;this.readyState=4;var s;if(200<=w&&300>w||304===w){if(304===w){u="not modified",s=!0}else{try{c(this),u="success",s=!0}catch(q){q.stack||q,"error",setTimeout(function(){throw q},0),u="parser error"}}}else{0>w&&(w=0)}this.status=w;this.statusText=u;var p=this.defer,o=this.config,n;if(n=this.timeoutTimer){clearTimeout(n),this.timeoutTimer=0}n=s?"success":"error";var v,i=[this.responseData,u,this],t=o.context,g={ajaxConfig:o,io:this};(v=o[n])&&v.apply(t,i);(v=o.complete)&&v.apply(t,i);j.fire(n,g);j.fire("complete",g);p[s?"resolve":"reject"](i)}},_getUrlForSend:function(){var d=this.config,g=d.uri,f=m.Uri.getComponents(d.url).query||"";return g.toString.call(g,d.serializeArray)+(f?(g.query.has()?"&":"?")+f:f)}})});KISSY.add("io","io/form-serializer,io/base,io/xhr-transport,io/script-transport,io/jsonp,io/form,io/iframe-transport,io/methods".split(","),function(j,h){function c(l,g,m,i,k){if(typeof g==="function"){i=m;m=g;g=void 0}return e({type:k||"get",url:l,data:g,success:m,dataType:i})}var b=h("io/form-serializer"),e=h("io/base");h("io/xhr-transport");h("io/script-transport");h("io/jsonp");h("io/form");h("io/iframe-transport");h("io/methods");j.mix(e,{serialize:b.serialize,get:c,post:function(k,g,l,i){if(typeof g==="function"){i=l;l=g;g=void 0}return c(k,g,l,i,"post")},jsonp:function(g,f,i){if(typeof f==="function"){i=f;f=void 0}return c(g,f,i,"jsonp")},getScript:j.getScript,getJSON:function(g,f,i){if(typeof f==="function"){i=f;f=void 0}return c(g,f,i,"json")},upload:function(l,g,m,i,k){if(typeof m==="function"){k=i;i=m;m=void 0}return e({url:l,type:"post",dataType:k,form:g,data:m,success:i})}});j.mix(j,{Ajax:e,IO:e,ajax:e,io:e,jsonp:e.jsonp});return e});KISSY.add("dom/base/api",[],function(f){var d=f.Env.host||{},j=d.document,g=f.UA,c={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},i={isCustomDomain:function(e){var e=e||d,e=i.get(e),h=e.document.domain,e=e.location.hostname;return h!==e&&h!=="["+e+"]"},getEmptyIframeSrc:function(e){e=e||d;e=i.get(e);return g.ie&&i.isCustomDomain(e)?"javascript:void(function(){"+encodeURIComponent('document.open();document.domain="'+e.document.domain+'";document.close();')+"}())":""},NodeType:c,getWindow:function(b){if(!b){return d}b=i.get(b);if(f.isWindow(b)){return b}var e=b;e.nodeType!==c.DOCUMENT_NODE&&(e=b.ownerDocument);return e.defaultView||e.parentWindow},getDocument:function(b){if(!b){return j}b=i.get(b);return f.isWindow(b)?b.document:b.nodeType===c.DOCUMENT_NODE?b:b.ownerDocument},isDomNodeList:function(e){return e&&!e.nodeType&&e.item&&!e.setTimeout},nodeName:function(e){var h=i.get(e),e=h.nodeName.toLowerCase();g.ie&&(h=h.scopeName)&&"HTML"!==h&&(e=h.toLowerCase()+":"+e);return e},_RE_NUM_NO_PX:RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i")};f.mix(i,c);return i});KISSY.add("dom/base/attr",["./api"],function(I,D){function C(b){return null==b?"":b+""}function A(e,f){var f=H[f]||f,c=x[f];return c&&c.get?c.get(e,f):e[f]}var O=D("./api"),L=I.Env.host.document,E=O.NodeType,L=L&&L.documentElement,J=O.nodeName,P=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,G=/^(?:button|input|object|select|textarea)$/i,F=/^a(?:rea)?$/i,N=/:|^on/,M=/\r/g,K={},y={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},v={tabindex:{get:function(b){var c=b.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):G.test(b.nodeName)||F.test(b.nodeName)&&b.href?0:void 0}}},H={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},o={get:function(b,c){return O.prop(b,c)?c.toLowerCase():void 0},set:function(b,e,c){!1===e?O.removeAttr(b,c):(e=H[c]||c,e in b&&(b[e]=!0),b.setAttribute(c,c.toLowerCase()));return c}},x={},B={},u={select:{get:function(b){var g=b.selectedIndex,e=b.options,h;if(0>g){return null}if("select-one"===""+b.type){return O.val(e[g])}b=[];g=0;for(h=e.length;g<h;++g){e[g].selected&&b.push(O.val(e[g]))}return b},set:function(b,e){var c=I.makeArray(e);I.each(b.options,function(d){d.selected=I.inArray(O.val(d),c)});c.length||(b.selectedIndex=-1);return c}}};I.each(["radio","checkbox"],function(b){u[b]={get:function(c){return null===c.getAttribute("value")?"on":c.value},set:function(c,e){if(I.isArray(e)){return c.checked=I.inArray(O.val(c),e),1}}}});v.style={get:function(b){return b.style.cssText}};I.mix(O,{_valHooks:u,_propFix:H,_attrHooks:v,_propHooks:x,_attrNodeHook:B,_attrFix:K,prop:function(b,k,i){var l=O.query(b),h,j;if(I.isPlainObject(k)){I.each(k,function(c,e){O.prop(l,e,c)})}else{if(k=H[k]||k,j=x[k],void 0!==i){for(b=l.length-1;0<=b;b--){h=l[b],j&&j.set?j.set(h,i,k):h[k]=i}}else{if(l.length){return A(l[0],k)}}}},hasProp:function(b,k){var j=O.query(b),l,e=j.length,h;for(l=0;l<e;l++){if(h=j[l],void 0!==A(h,k)){return !0}}return !1},removeProp:function(b,k){var k=H[k]||k,i=O.query(b),l,h;for(l=i.length-1;0<=l;l--){h=i[l];try{h[k]=void 0,delete h[k]}catch(j){}}},attr:function(m,g,l,f){var b=O.query(m),h=b[0];if(I.isPlainObject(g)){var f=l,c;for(c in g){O.attr(b,c,g[c],f)}}else{if(f&&y[g]){return O[g](m,l)}g=g.toLowerCase();if(f&&y[g]){return O[g](m,l)}g=K[g]||g;m=P.test(g)?o:N.test(g)?B:v[g];if(void 0===l){if(h&&h.nodeType===E.ELEMENT_NODE){"form"===J(h)&&(m=B);if(m&&m.get){return m.get(h,g)}l=h.getAttribute(g);return""===l&&(g=h.getAttributeNode(g),!g||!g.specified)?void 0:null===l?void 0:l}}else{for(f=b.length-1;0<=f;f--){if((h=b[f])&&h.nodeType===E.ELEMENT_NODE){"form"===J(h)&&(m=B),m&&m.set?m.set(h,l,g):h.setAttribute(g,""+l)}}}}},removeAttr:function(k,l){var l=l.toLowerCase(),l=K[l]||l,j=O.query(k),i,b,f;for(f=j.length-1;0<=f;f--){if(b=j[f],b.nodeType===E.ELEMENT_NODE&&(b.removeAttribute(l),P.test(l)&&(i=H[l]||l) in b)){b[i]=!1}}},hasAttr:L&&!L.hasAttribute?function(h,b){var b=b.toLowerCase(),g=O.query(h),j,e;for(j=0;j<g.length;j++){if(e=g[j],(e=e.getAttributeNode(b))&&e.specified){return !0}}return !1}:function(h,b){var g=O.query(h),j,e=g.length;for(j=0;j<e;j++){if(g[j].hasAttribute(b)){return !0}}return !1},val:function(b,j){var l,g,k,h,d;if(void 0===j){if(k=O.get(b)){if((l=u[J(k)]||u[k.type])&&"get" in l&&void 0!==(g=l.get(k,"value"))){return g}g=k.value;return"string"===typeof g?g.replace(M,""):null==g?"":g}}else{g=O.query(b);for(h=g.length-1;0<=h;h--){k=g[h];if(1!==k.nodeType){break}d=j;null==d?d="":"number"===typeof d?d+="":I.isArray(d)&&(d=I.map(d,C));l=u[J(k)]||u[k.type];if(!l||!("set" in l)||void 0===l.set(k,d,"value")){k.value=d}}}},text:function(k,b){var l,h,g,j;if(void 0===b){return l=O.get(k),O._getText(l)}h=O.query(k);for(g=h.length-1;0<=g;g--){if(l=h[g],j=l.nodeType,j===E.ELEMENT_NODE){O.cleanData(l.getElementsByTagName("*")),"textContent" in l?l.textContent=b:l.innerText=b}else{if(j===E.TEXT_NODE||j===E.CDATA_SECTION_NODE){l.nodeValue=b}}}},_getText:function(b){return b.textContent}});return O});KISSY.add("dom/base/class",["./api"],function(j,f){function d(g){for(var g=j.trim(g||""),g=g.split(r),l=[],n,m=g.length,h=0;h<m;h++){(n=g[h])&&l.push(n)}return l}function c(b){return function(h,t){var s,n,q,m=h.classList,l=i.call(arguments,2);s=0;for(n=t.length;s<n;s++){(q=t[s])&&m[b].apply(m,[q].concat(l))}}}function p(b){return function(e,l){var h=d(l),g=i.call(arguments,2);o.query(e).each(function(m){m.nodeType===k.ELEMENT_NODE&&o[b].apply(o,[m,h].concat(g))})}}var o=f("./api"),i=[].slice,k=o.NodeType,r=/[\.\s]\s*\.?/;j.mix(o,{_hasClass:function(h,g){var q,n,l,m=h.classList;if(m.length){q=0;for(n=g.length;q<n;q++){if((l=g[q])&&!m.contains(l)){return !1}}return !0}return !1},_addClass:c("add"),_removeClass:c("remove"),_toggleClass:c("toggle"),hasClass:function(g,e){var h=o.get(g);return h&&h.nodeType===k.ELEMENT_NODE&&o._hasClass(h,d(e))},replaceClass:function(g,e,h){o.removeClass(g,e);o.addClass(g,h)},addClass:p("_addClass"),removeClass:p("_removeClass"),toggleClass:p("_toggleClass")});return o});KISSY.add("dom/base/create",["./api"],function(U,P){function O(b){b=b&&b!==S?b.createElement(Y):W;b===W&&(b.innerHTML="");return b}function M(b,e){var f=O(e);f.innerHTML="m<div>"+b+"</div>";return f.lastChild}function aa(b,g){if(g){if(J&&g.canHaveChildren&&"removeNode" in b){if(b.firstChild){b:{try{b.innerHTML="";break b}catch(h){}for(var e;e=b.lastChild;){aa(e,b)}}}b.removeNode(!1)}else{g.removeChild(b)}}}function X(b,g,h){var e=g.nodeType;if(e===R.DOCUMENT_FRAGMENT_NODE){g=g.childNodes;h=h.childNodes;for(e=0;g[e];){h[e]&&X(b,g[e],h[e]),e++}}else{if(e===R.ELEMENT_NODE){g=g.getElementsByTagName("*");h=h.getElementsByTagName("*");for(e=0;g[e];){h[e]&&b(g[e],h[e]),e++}}}}function Q(i,j){var g=U.require("event/dom"),e,h;if(j.nodeType!==R.ELEMENT_NODE||ab.hasData(i)){e=ab.data(i);for(h in e){ab.data(j,h,e[h])}g&&g.clone(i,j)}}function V(b){var g=null,h,e;if(b&&(b.push||b.item)&&b[0]){g=b[0].ownerDocument;g=g.createDocumentFragment();b=U.makeArray(b);h=0;for(e=b.length;h<e;h++){g.appendChild(b[h])}}else{"Unable to convert "+b+" to fragment."}return g}var ab=P("./api"),S=U.Env.host.document,R=ab.NodeType,Z=U.UA.ieMode,Y="div",W=S&&S.createElement(Y),K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,T=/^\s+/,o=/\s+$/,J=!!(Z&&9>Z),N=J,C=/<|&#?\w+;/,A=S&&"outerHTML" in S.documentElement,I=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;U.mix(ab,{create:function(k,i,l,j){var h=null;if(!k){return h}if(k.nodeType){return ab.clone(k)}if("string"!==typeof k){return h}void 0===j&&(j=!0);j&&(k=U.trim(k));var j=ab._creators,n,d,l=l||S,m,g=Y;if(C.test(k)){if(m=I.exec(k)){h=l.createElement(m[1])}else{k=k.replace(K,"<$1></$2>");if((m=G.exec(k))&&(n=m[1])){g=n.toLowerCase()}n=(j[g]||M)(k,l);N&&(d=k.match(T))&&n.insertBefore(l.createTextNode(d[0]),n.firstChild);N&&/\S/.test(k)&&(d=k.match(o))&&n.appendChild(l.createTextNode(d[0]));d=n.childNodes;1===d.length?h=d[0].parentNode.removeChild(d[0]):d.length?h=V(d):k+" : create node error"}}else{h=l.createTextNode(k)}k=h;U.isPlainObject(i)&&(k.nodeType===R.ELEMENT_NODE?ab.attr(k,i,!0):k.nodeType===R.DOCUMENT_FRAGMENT_NODE&&ab.attr(k.childNodes,i,!0));return k},_fixCloneAttributes:function(b,e){"textarea"===ab.nodeName(b)&&(e.defaultValue=b.defaultValue,e.value=b.value)},_creators:{div:M},_defaultCreator:M,html:function(p,q,l){var p=ab.query(p),i=p[0],n=!1,m,k;if(!i){return null}if(void 0===q){return i.nodeType===R.ELEMENT_NODE?i.innerHTML:i.nodeType===R.DOCUMENT_FRAGMENT_NODE?(l=O(i.ownerDocument),l.appendChild(i),l.innerHTML):null}q+="";if(!q.match(/<(?:script|style|link)/i)&&(!N||!q.match(T))&&!v[(q.match(G)||["",""])[1].toLowerCase()]){try{for(m=p.length-1;0<=m;m--){k=p[m],k.nodeType===R.ELEMENT_NODE&&(ab.cleanData(k.getElementsByTagName("*")),k.innerHTML=q)}n=!0}catch(j){}}n||(q=ab.create(q,0,i.ownerDocument,0),ab.empty(p),ab.append(q,p,l))},outerHtml:function(i,j,g){var i=ab.query(i),e=i.length,h=i[0];if(!h){return null}if(void 0===j){if(A&&h.nodeType!==ab.DOCUMENT_FRAGMENT_NODE){return h.outerHTML}j=O(h.ownerDocument);j.appendChild(ab.clone(h,!0));return j.innerHTML}j+="";if(!j.match(/<(?:script|style|link)/i)&&A){for(g=e-1;0<=g;g--){h=i[g],h.nodeType===R.ELEMENT_NODE&&(ab.cleanData(h,1),h.outerHTML=j)}}else{j=ab.create(j,0,h.ownerDocument,0),ab.insertBefore(j,i,g),ab.remove(i)}},remove:function(m,n){var j,k=ab.query(m),l,b=U.require("event/dom"),h;for(h=k.length-1;0<=h;h--){j=k[h],!n&&j.nodeType===R.ELEMENT_NODE&&(l=U.makeArray(j.getElementsByTagName("*")),l.push(j),ab.removeData(l),b&&b.detach(l)),aa(j,j.parentNode)}},clone:function(m,n,k,e){"object"===typeof n&&(e=n.deepWithDataAndEvent,k=n.withDataAndEvent,n=n.deep);var m=ab.get(m),l,h=ab._fixCloneAttributes,j;if(!m){return null}j=m.nodeType;l=m.cloneNode(n);if(j===R.ELEMENT_NODE||j===R.DOCUMENT_FRAGMENT_NODE){h&&j===R.ELEMENT_NODE&&h(m,l),n&&h&&X(h,m,l)}k&&(Q(m,l),n&&e&&X(Q,m,l));return l},empty:function(e){var e=ab.query(e),g,b;for(b=e.length-1;0<=b;b--){g=e[b],ab.remove(g.childNodes)}},_nodeListToFragment:V});ab.outerHTML=ab.outerHtml;var L=ab._creators,E=ab.create,v={area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"},u;for(u in v){(function(b){L[u]=function(d,e){return E("<"+b+">"+d+"</"+b+">",void 0,e)}})(v[u])}v.option=v.optgroup=function(c,b){return E('<select multiple="multiple">'+c+"</select>",void 0,b)};return ab});KISSY.add("dom/base/data",["./api"],function(r,f){var d=f("./api"),c=r.Env.host,u="_ks_data_"+r.now(),t={},i={},s={applet:1,object:1,embed:1},v={hasData:function(b,e){if(b){if(void 0!==e){if(e in b){return !0}}else{if(!r.isEmptyObject(b)){return !0}}}return !1}},p={hasData:function(e,b){return e==c?p.hasData(i,b):v.hasData(e[u],b)},data:function(b,j,g){if(b==c){return p.data(i,j,g)}var h=b[u];if(void 0!==g){h=b[u]=b[u]||{},h[j]=g}else{return void 0!==j?h&&h[j]:h=b[u]=b[u]||{}}},removeData:function(b,j){if(b==c){return p.removeData(i,j)}var g=b[u];if(void 0!==j){delete g[j],r.isEmptyObject(g)&&p.removeData(b)}else{try{delete b[u]}catch(h){b[u]=void 0}}}},o={hasData:function(g,e){var b=g[u];return !b?!1:v.hasData(t[b],e)},data:function(b,h,g){if(!s[b.nodeName.toLowerCase()]){var e=b[u];if(!e){if(void 0!==h&&void 0===g){return}e=b[u]=r.guid()}b=t[e];if(void 0!==g){b=t[e]=t[e]||{},b[h]=g}else{return void 0!==h?b&&b[h]:b=t[e]=t[e]||{}}}},removeData:function(b,l){var k=b[u],h;if(k){if(h=t[k],void 0!==l){delete h[l],r.isEmptyObject(h)&&o.removeData(b)}else{delete t[k];try{delete b[u]}catch(e){b[u]=void 0}b.removeAttribute&&b.removeAttribute(u)}}}};r.mix(d,{__EXPANDO:u,hasData:function(h,l){for(var j=!1,g=d.query(h),k=0;k<g.length&&!(j=g[k],j=j.nodeType?o.hasData(j,l):p.hasData(j,l));k++){}return j},data:function(h,l,j){var h=d.query(h),g=h[0];if(r.isPlainObject(l)){for(var k in l){d.data(h,k,l[k])}}else{if(void 0===j){if(g){return g.nodeType?o.data(g,l):p.data(g,l)}}else{for(k=h.length-1;0<=k;k--){g=h[k],g.nodeType?o.data(g,l,j):p.data(g,l,j)}}}},removeData:function(h,l){var j=d.query(h),g,k;for(k=j.length-1;0<=k;k--){g=j[k],g.nodeType?o.removeData(g,l):p.removeData(g,l)}},cleanData:function(j,w){var n=d.query(j),h,q,k=r.require("event/dom");for(q=n.length-1;0<=q;q--){if(h=n[q],h.nodeType){var m=w&&r.makeArray(h.getElementsByTagName("*"))||[];m.push(h);h=0;for(var l=m.length;h<l;h++){o.removeData(m[h])}k&&k.detach(m)}else{p.removeData(h)}}}});return d});KISSY.add("dom/base/insertion",["./api"],function(s,i){function f(m,k){var n=[],l,g,j;for(l=0;m[l];l++){if(g=m[l],j=x(g),g.nodeType===o.DOCUMENT_FRAGMENT_NODE){n.push.apply(n,f(r(g.childNodes),k))}else{if("script"===j&&(!g.type||v.test(g.type))){g.parentNode&&g.parentNode.removeChild(g),k&&k.push(g)}else{if(g.nodeType===o.ELEMENT_NODE&&!t.test(j)){j=[];var y,c,q=g.getElementsByTagName("script");for(c=0;c<q.length;c++){y=q[c],(!y.type||v.test(y.type))&&j.push(y)}p.apply(m,[l+1,0].concat(j))}n.push(g)}}}return n}function d(b){b.src?s.getScript(b.src):(b=s.trim(b.text||b.textContent||b.innerHTML||""))&&s.globalEval(b)}function w(B,A,q,n){B=u.query(B);n&&(n=[]);B=f(B,n);u._fixInsertionChecked&&u._fixInsertionChecked(B);var A=u.query(A),m,y,l,e,h=A.length;if((B.length||n&&n.length)&&h){B=u._nodeListToFragment(B);1<h&&(e=u.clone(B,!0),A=s.makeArray(A));for(m=0;m<h;m++){y=A[m],B&&(l=0<m?u.clone(e,!0):B,q(l,y)),n&&n.length&&s.each(n,d)}}}var u=i("./api"),o=u.NodeType,t=/^(?:button|input|object|select|textarea)$/i,x=u.nodeName,r=s.makeArray,p=[].splice,v=/\/(java|ecma)script/i;s.mix(u,{_fixInsertionChecked:null,insertBefore:function(b,h,g){w(b,h,function(c,e){e.parentNode&&e.parentNode.insertBefore(c,e)},g)},insertAfter:function(b,h,g){w(b,h,function(c,e){e.parentNode&&e.parentNode.insertBefore(c,e.nextSibling)},g)},appendTo:function(b,h,g){w(b,h,function(c,e){e.appendChild(c)},g)},prependTo:function(b,h,g){w(b,h,function(c,e){e.insertBefore(c,e.firstChild)},g)},wrapAll:function(g,e){e=u.clone(u.get(e),!0);g=u.query(g);g[0].parentNode&&u.insertBefore(e,g[0]);for(var h;(h=e.firstChild)&&1===h.nodeType;){e=h}u.appendTo(g,e)},wrap:function(e,c){e=u.query(e);c=u.get(c);s.each(e,function(b){u.wrapAll(b,c)})},wrapInner:function(e,c){e=u.query(e);c=u.get(c);s.each(e,function(b){var g=b.childNodes;g.length?u.wrapAll(g,c):b.appendChild(c)})},unwrap:function(b){b=u.query(b);s.each(b,function(c){c=c.parentNode;u.replaceWith(c,c.childNodes)})},replaceWith:function(g,e){var h=u.query(g),e=u.query(e);u.remove(e,!0);u.insertBefore(e,h);u.remove(h)}});s.each({prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},function(e,c){u[c]=u[e]});return u});KISSY.add("dom/base/offset",["./api"],function(x,s){function p(e){var d,f=e.ownerDocument.body;if(!e.getBoundingClientRect){return{left:0,top:0}}d=e.getBoundingClientRect();e=d[B];d=d[z];e-=w.clientLeft||f.clientLeft||0;d-=w.clientTop||f.clientTop||0;return{left:e,top:d}}function o(b,n){var q={left:0,top:0},m=v(b),l,k=b,n=n||m;do{if(m==n){var j=k;l=p(j);j=v(j);l.left+=D[i](j);l.top+=D[F](j)}else{l=p(k)}q.left+=l.left;q.top+=l.top}while(m&&m!=n&&(k=m.frameElement)&&(m=m.parent));return q}var D=s("./api"),A=x.Env.host,u=x.UA,y=A.document,E=D.NodeType,w=y&&y.documentElement,v=D.getWindow,C=Math.max,B="left",z="top",i="scrollLeft",F="scrollTop";x.mix(D,{offset:function(H,t,G){if(void 0===t){var H=D.get(H),r;H&&(r=o(H,G));return r}G=D.query(H);for(r=G.length-1;0<=r;r--){var H=G[r],q=t;"static"===D.css(H,"position")&&(H.style.position="relative");var n=o(H),m={},l=void 0,b=void 0;for(b in q){l=parseFloat(D.css(H,b))||0,m[b]=l+q[b]-n[b]}D.css(H,m)}},scrollIntoView:function(J,I,H,G){var k,f,h,d;if(h=D.get(J)){I&&(I=D.get(I));I||(I=h.ownerDocument);I.nodeType===E.DOCUMENT_NODE&&(I=v(I));x.isPlainObject(H)&&(G=H.allowHorizontalScroll,d=H.onlyScrollIfNeeded,H=H.alignWithTop);G=void 0===G?!0:G;f=x.isWindow(I);var J=D.offset(h),b=D.outerHeight(h);k=D.outerWidth(h);var N,K,M,L;f?(f=I,N=D.height(f),K=D.width(f),L={left:D.scrollLeft(f),top:D.scrollTop(f)},f=J[B]-L[B],h=J[z]-L[z],k=J[B]+k-(L[B]+K),J=J[z]+b-(L[z]+N)):(N=D.offset(I),K=I.clientHeight,M=I.clientWidth,L={left:D.scrollLeft(I),top:D.scrollTop(I)},f=J[B]-(N[B]+(parseFloat(D.css(I,"borderLeftWidth"))||0)),h=J[z]-(N[z]+(parseFloat(D.css(I,"borderTopWidth"))||0)),k=J[B]+k-(N[B]+M+(parseFloat(D.css(I,"borderRightWidth"))||0)),J=J[z]+b-(N[z]+K+(parseFloat(D.css(I,"borderBottomWidth"))||0)));if(d){if(0>h||0<J){!0===H?D.scrollTop(I,L.top+h):!1===H?D.scrollTop(I,L.top+J):0>h?D.scrollTop(I,L.top+h):D.scrollTop(I,L.top+J)}}else{(H=void 0===H?!0:!!H)?D.scrollTop(I,L.top+h):D.scrollTop(I,L.top+J)}if(G){if(d){if(0>f||0<k){!0===H?D.scrollLeft(I,L.left+f):!1===H?D.scrollLeft(I,L.left+k):0>f?D.scrollLeft(I,L.left+f):D.scrollLeft(I,L.left+k)}}else{void 0===H||H?D.scrollLeft(I,L.left+f):D.scrollLeft(I,L.left+k)}}}},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0});x.each(["Left","Top"],function(g,e){var b="scroll"+g;D[b]=function(q,k){if("number"===typeof q){return arguments.callee(A,q)}var q=D.get(q),f,d,r,c;q&&q.nodeType===E.ELEMENT_NODE?void 0!==k?q[b]=parseFloat(k):f=q[b]:(c=v(q),void 0!==k?(k=parseFloat(k),d="Left"===g?k:D.scrollLeft(c),r="Top"===g?k:D.scrollTop(c),c.scrollTo(d,r)):(f=c["page"+(e?"Y":"X")+"Offset"],"number"!==typeof f&&(d=c.document,f=d.documentElement[b],"number"!==typeof f&&(f=d.body[b]))));return f}});x.each(["Width","Height"],function(b){D["doc"+b]=function(c){c=D.get(c);c=D.getDocument(c);return C(c.documentElement["scroll"+b],c.body["scroll"+b],D["viewport"+b](c))};D["viewport"+b]=function(j){var j=D.get(j),k=v(j),j=k["inner"+b];if(u.mobile&&j){return j}var j="client"+b,k=k.document,h=k.body,g=k.documentElement[j];return"CSS1Compat"===k.compatMode&&g||h&&h[j]||g}});return D});KISSY.add("dom/base/style",["./api"],function(ac,X){function W(b,c){return c.toUpperCase()}function U(b){return b.replace(R,"ms-").replace(G,W)}function ai(h,k,l){var g={},j=h.style,i;for(i in k){g[i]=j[i],j[i]=k[i]}l.call(h);for(i in k){j[i]=g[i]}}function af(i,m,n){var h,l,k;if(!(3===i.nodeType||8===i.nodeType||!(h=i.style))){if(m=U(m),k=Q[m],m=T[m]||m,void 0!==n){null===n||n===V?n=V:!isNaN(Number(n))&&!C[m]&&(n+=J);k&&k.set&&(n=k.set(i,n));if(void 0!==n){try{h[m]=n}catch(j){"css set error:"+j}n===V&&h.removeAttribute&&h.removeAttribute(m)}h.cssText||i.removeAttribute("style")}else{if(!k||!("get" in k&&void 0!==(l=k.get(i,!1)))){l=h[m]}return void 0===l?"":l}}}function Y(b){var e,f=arguments;0!==b.offsetWidth?e=ad.apply(void 0,f):ai(b,A,function(){e=ad.apply(void 0,f)});return e}function ad(j,k,g){if(ac.isWindow(j)){return k===P?aj.viewportWidth(j):aj.viewportHeight(j)}if(9===j.nodeType){return k===P?aj.docWidth(j):aj.docHeight(j)}var i=k===P?["Left","Right"]:["Top","Bottom"],h=k===P?j.offsetWidth:j.offsetHeight;if(0<h){return"border"!==g&&ac.each(i,function(b){g||(h-=parseFloat(aj.css(j,"padding"+b))||0);h="margin"===g?h+(parseFloat(aj.css(j,g+b))||0):h-(parseFloat(aj.css(j,"border"+b+"Width"))||0)}),h}h=aj._getComputedStyle(j,k);if(null===h||0>Number(h)){h=j.style[k]||0}h=parseFloat(h)||0;g&&ac.each(i,function(b){h+=parseFloat(aj.css(j,"padding"+b))||0;"padding"!==g&&(h+=parseFloat(aj.css(j,"border"+b+"Width"))||0);"margin"===g&&(h+=parseFloat(aj.css(j,g+b))||0)});return h}var aj=X("./api"),aa=ac.Env.host,Z=ac.UA,ah=ac.Features,ag=aj.nodeName,ae=aa.document,S=/^margin/,P="width",ab="display"+ac.now(),C={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},R=/^-ms-/,V="",J="px",I=/\d(?!px)[a-z%]+$/i,Q={},T={"float":"cssFloat"},O={},G=/-([a-z])/ig,E=ae&&ae.documentElement.style||{},N;ac.each(["","Webkit","Moz","O","ms"],function(b){b=b?b+"UserSelect":"userSelect";void 0===N&&b in E&&(N=b)});if(ah.isTransformSupported()){var K;K=T.transform=ah.getTransformProperty();T.transformOrigin=K+"Origin"}ah.isTransitionSupported()&&(T.transition=ah.getTransitionProperty());ac.mix(aj,{_camelCase:U,_cssHooks:Q,_cssProps:T,_getComputedStyle:function(q,r){var j="",p,n,m,l,k;n=q.ownerDocument;r=T[r]||r;if(p=n.defaultView.getComputedStyle(q,null)){j=p.getPropertyValue(r)||p[r]}j===""&&!aj.contains(n,q)&&(j=q.style[r]);if(aj._RE_NUM_NO_PX.test(j)&&S.test(r)){k=q.style;n=k.width;m=k.minWidth;l=k.maxWidth;k.minWidth=k.maxWidth=k.width=j;j=p.width;k.width=n;k.minWidth=m;k.maxWidth=l}return j},style:function(j,k,e){var j=aj.query(j),i,h=j[0];if(ac.isPlainObject(k)){for(i in k){for(h=j.length-1;h>=0;h--){af(j[h],i,k[i])}}}else{if(e===void 0){i="";h&&(i=af(h,k,e));return i}for(h=j.length-1;h>=0;h--){af(j[h],k,e)}}},css:function(j,k,e){var j=aj.query(j),i=j[0],h;if(ac.isPlainObject(k)){for(h in k){for(i=j.length-1;i>=0;i--){af(j[i],h,k[h])}}}else{k=U(k);h=Q[k];if(e===void 0){e="";if(i&&(!h||!("get" in h&&(e=h.get(i,true))!==void 0))){e=aj._getComputedStyle(i,k)}return typeof e==="undefined"?"":e}for(i=j.length-1;i>=0;i--){af(j[i],k,e)}}},show:function(n){var n=aj.query(n),p,f,m;for(m=n.length-1;m>=0;m--){f=n[m];f.style.display=aj.data(f,ab)||V;if(aj.css(f,"display")==="none"){p=f.tagName.toLowerCase();var l=void 0,k=O[p],i=void 0;if(!O[p]){l=ae.body||ae.documentElement;i=ae.createElement(p);aj.prepend(i,l);k=aj.css(i,"display");l.removeChild(i);O[p]=k}p=k;aj.data(f,ab,p);f.style.display=p}}},hide:function(j){var j=aj.query(j),k,g;for(g=j.length-1;g>=0;g--){k=j[g];var i=k.style,h=i.display;if(h!=="none"){h&&aj.data(k,ab,h);i.display="none"}}},toggle:function(f){var f=aj.query(f),g,e;for(e=f.length-1;e>=0;e--){g=f[e];aj.css(g,"display")==="none"?aj.show(g):aj.hide(g)}},addStyleSheet:function(h,i,f){if(typeof h==="string"){f=i;i=h;h=aa}var h=aj.getDocument(h),g;if(f&&(f=f.replace("#",V))){g=aj.get("#"+f,h)}if(!g){g=aj.create("<style>",{id:f},h);aj.get("head",h).appendChild(g);g.styleSheet?g.styleSheet.cssText=i:g.appendChild(h.createTextNode(i))}},unselectable:function(m){var m=aj.query(m),d,l,k=0,j,h;for(l=m.length-1;l>=0;l--){d=m[l];h=d.style;if(N!==void 0){h[N]="none"}else{if(Z.ie){h=d.getElementsByTagName("*");d.setAttribute("unselectable","on");for(j=["iframe","textarea","input","select"];d=h[k++];){ac.inArray(ag(d),j)||d.setAttribute("unselectable","on")}}}}},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0});ac.each([P,"height"],function(b){aj["inner"+ac.ucfirst(b)]=function(d){return(d=aj.get(d))&&Y(d,b,"padding")};aj["outer"+ac.ucfirst(b)]=function(g,d){var f=aj.get(g);return f&&Y(f,b,d?"margin":"border")};aj[b]=function(g,d){var f=aj.css(g,b,d);f&&(f=parseFloat(f));return f};Q[b]={get:function(e,f){var d;f&&(d=Y(e,b)+"px");return d}}});var A={position:"absolute",visibility:"hidden",display:"block"};ac.each(["left","top"],function(b){Q[b]={get:function(k,d){var j,i,f;if(d){f=aj.css(k,"position");if(f==="static"){return"auto"}j=aj._getComputedStyle(k,b);if((i=j==="auto")&&f==="relative"){return"0px"}if(i||I.test(j)){f={top:0,left:0};if(aj.css(k,"position")==="fixed"){i=k.getBoundingClientRect()}else{for(j=k.offsetParent||(k.ownerDocument||ae).body;j&&!o.test(j.nodeName)&&aj.css(j,"position")==="static";){j=j.offsetParent}i=aj.offset(k);f=aj.offset(j);f.top=f.top+(parseFloat(aj.css(j,"borderTopWidth"))||0);f.left=f.left+(parseFloat(aj.css(j,"borderLeftWidth"))||0)}i.top=i.top-(parseFloat(aj.css(k,"marginTop"))||0);i.left=i.left-(parseFloat(aj.css(k,"marginLeft"))||0);j={top:i.top-f.top,left:i.left-f.left}[b]+"px"}}return j}}});var o=/^(?:body|html)$/i;return aj});KISSY.add("dom/base/selector",["./api"],function(U,P){function O(b){var e=this.length,f;for(f=0;f<e&&!1!==b(this[f],f);f++){}}function M(b){b=b.substr(1);if(!b){throw Error("An invalid or illegal string was specified for selector.")}return b}function aa(b){return function(c){var d=Z._getElementById(b,Y);return d&&Z._contains(c,d)?[d]:[]}}function X(b){return function(d){return d.getElementsByClassName(b)}}function Q(b){return function(d){return d.getElementsByTagName(b)}}function V(s,l){var i,h,e="string"===typeof s,g=void 0!==l?V(l):(h=1)&&[Y],b=g.length;if(s){if(e){s=u(s);if(h){if("body"===s){i=[Y.body]}else{if(A.test(s)&&G){i=Y.getElementsByClassName(RegExp.$1)}else{if(E.test(s)){i=(h=Z._getElementById(RegExp.$2,Y))&&h.nodeName.toLowerCase()===RegExp.$1?[h]:[]}else{if(I.test(s)){i=(h=Z._getElementById(s.substr(1),Y))?[h]:[]}else{if(L.test(s)){i=Y.getElementsByTagName(s)}else{if(!s.match(/,|\+|=|~|\[|\]|:|>|\||\$|\^|\*|\(|\)|[\w-]+\.[\w-]+|[\w-]+#[\w-]+/)&&G){i=s.split(/\s+/);var c=g,d,q;h=0;for(e=i.length;h<e;h++){d=i;q=h;var w;w=i[h];var t=w.charAt(0);w="#"===t?aa(M(w)):"."===t?X(M(w)):Q(w);d[q]=w}h=0;for(e=i.length;h<e;h++){w=i[h];var t=[],n;d=0;for(q=c.length;d<q;d++){n=w(c[d]),t.push.apply(t,U.makeArray(n))}c=t;if(!c.length){break}}i=c&&1<c.length?Z.unique(c):c}}}}}}}if(!i){i=[];for(h=0;h<b;h++){C.apply(i,Z._selectInternal(s,g[h]))}1<i.length&&1<b&&Z.unique(i)}}else{if(i=s.nodeType||s.setTimeout?[s]:s.getDOMNodes?s.getDOMNodes():T(s)?s:J(s)?o(s):[s],!h){e=i;d=e.length;i=[];for(h=0;h<d;h++){for(c=0;c<b;c++){if(Z._contains(g[c],e[h])){i.push(e[h]);break}}}}}}else{i=[]}i.each=O;return i}function ab(b,f){var e=b&&S(b,"class");return e&&(e=e.replace(/[\r\t\n]/g,N))&&-1<(N+e+N).indexOf(N+f+N)}function S(b,f){var e=b&&b.getAttributeNode(f);if(e&&e.specified){return e.nodeValue}}function R(b,d){return"*"===d||b.nodeName.toLowerCase()===d.toLowerCase()}var Z=P("./api"),Y=U.Env.host.document,W=Y.documentElement,K=W.matches||W.webkitMatchesSelector||W.mozMatchesSelector||W.oMatchesSelector||W.msMatchesSelector,G="getElementsByClassName" in Y,T=U.isArray,o=U.makeArray,J=Z.isDomNodeList,N=" ",C=Array.prototype.push,A=/^\.([\w-]+)$/,I=/^#([\w-]+)$/,L=/^([\w-])+$/,E=/^([\w-]+)#([\w-]+)$/,v=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,u=U.trim;U.mix(Z,{_compareNodeOrder:function(b,d){return !b.compareDocumentPosition||!d.compareDocumentPosition?b.compareDocumentPosition?-1:1:b.compareDocumentPosition(d)&4?-1:1},_getElementsByTagName:function(b,d){return U.makeArray(d.querySelectorAll(b))},_getElementById:function(b,d){return d.getElementById(b)},_getSimpleAttr:S,_isTag:R,_hasSingleClass:ab,_matchesInternal:function(h,l){for(var k=[],g=0,j,i=l.length;g<i;g++){j=l[g],K.call(j,h)&&k.push(j)}return k},_selectInternal:function(b,d){return o(d.querySelectorAll(b))},query:V,get:function(b,d){return V(b,d)[0]||null},unique:function(){function e(d,g){return d===g?(f=!0,0):Z._compareNodeOrder(d,g)}var f,c=!0;[0,0].sort(function(){c=!1;return 0});return function(g){f=c;g.sort(e);if(f){for(var d=1,b=g.length;d<b;){g[d]===g[d-1]?(g.splice(d,1),--b):d++}}return g}}(),filter:function(p,g,n){var p=V(p,n),k,j,h,c,n=[];if("string"===typeof g&&(g=u(g))&&(h=v.exec(g))){k=h[1],j=h[2],c=h[3],k?k&&!j&&!c&&(g=function(b){return S(b,"id")===k}):g=function(i){var f=!0,e=!0;j&&(f=R(i,j));c&&(e=ab(i,c));return e&&f}}return n="function"===typeof g?U.filter(p,g):Z._matchesInternal(g,p)},test:function(e,f,c){e=V(e,c);return e.length&&Z.filter(e,f,c).length===e.length}});return Z});KISSY.add("dom/base/traversal",["./api"],function(g,d){function k(t,u,o,l,s,r,q){if(!(t=j.get(t))){return null}if(0===u){return t}r||(t=t[o]);if(!t){return null}s=s&&j.get(s)||null;void 0===u&&(u=1);var r=[],h=g.isArray(u),e,p;"number"===typeof u&&(e=0,p=u,u=function(){return ++e===p});for(;t&&t!==s;){if((t.nodeType===f.ELEMENT_NODE||t.nodeType===f.TEXT_NODE&&q)&&i(t,u)&&(!l||l(t))){if(r.push(t),!h){break}}t=t[o]}return h?r:r[0]||null}function i(e,h){if(!h){return !0}if(g.isArray(h)){var m,l=h.length;if(!l){return !0}for(m=0;m<l;m++){if(j.test(e,h[m])){return !0}}}else{if(j.test(e,h)){return !0}}return !1}function c(e,h,m,l){var p=[],o,n;if((o=e=j.get(e))&&m){o=e.parentNode}if(o){m=g.makeArray(o.childNodes);for(o=0;o<m.length;o++){n=m[o],(l||n.nodeType===f.ELEMENT_NODE)&&n!==e&&p.push(n)}h&&(p=j.filter(p,h))}return p}var j=d("./api"),f=j.NodeType;g.mix(j,{_contains:function(e,h){return !!(e.compareDocumentPosition(h)&16)},closest:function(l,m,o,n){return k(l,m,"parentNode",function(b){return b.nodeType!==f.DOCUMENT_FRAGMENT_NODE},o,!0,n)},parent:function(h,l,m){return k(h,l,"parentNode",function(b){return b.nodeType!==f.DOCUMENT_FRAGMENT_NODE},m,void 0)},first:function(e,l,m){e=j.get(e);return k(e&&e.firstChild,l,"nextSibling",void 0,void 0,!0,m)},last:function(e,l,m){e=j.get(e);return k(e&&e.lastChild,l,"previousSibling",void 0,void 0,!0,m)},next:function(h,l,m){return k(h,l,"nextSibling",void 0,void 0,void 0,m)},prev:function(h,l,m){return k(h,l,"previousSibling",void 0,void 0,void 0,m)},siblings:function(m,b,l){return c(m,b,!0,l)},children:function(h,b){return c(h,b,void 0)},contents:function(h,b){return c(h,b,void 0,1)},contains:function(e,h){e=j.get(e);h=j.get(h);return e&&h?j._contains(e,h):!1},index:function(e,h){var m=j.query(e),l,n=0;l=m[0];if(!h){m=l&&l.parentNode;if(!m){return -1}for(;l=l.previousSibling;){l.nodeType===f.ELEMENT_NODE&&n++}return n}n=j.query(h);return"string"===typeof h?g.indexOf(l,n):g.indexOf(n[0],m)},equals:function(e,l){e=j.query(e);l=j.query(l);if(e.length!==l.length){return !1}for(var m=e.length;0<=m;m--){if(e[m]!==l[m]){return !1}}return !0}});return j});KISSY.add("dom/base","./base/api,./base/attr,./base/class,./base/create,./base/data,./base/insertion,./base/offset,./base/style,./base/selector,./base/traversal".split(","),function(c,b){var d=b("./base/api");b("./base/attr");b("./base/class");b("./base/create");b("./base/data");b("./base/insertion");b("./base/offset");b("./base/style");b("./base/selector");b("./base/traversal");c.mix(c,{DOM:d,get:d.get,query:d.query});return d});KISSY.add("event/custom/observer",["event/base"],function(e,f){function b(){b.superclass.constructor.apply(this,arguments)}var d=f("event/base");e.extend(b,d.Observer,{keys:["fn","context","groups"]});return b});KISSY.add("event/custom/object",["event/base"],function(e,f){function b(g){b.superclass.constructor.call(this);e.mix(this,g)}var d=f("event/base");e.extend(b,d.Object);return b});KISSY.add("event/custom/observable",["event/base","./observer","./object"],function(h,m){function b(){b.superclass.constructor.apply(this,arguments);this.defaultFn=null;this.defaultTargetOnly=!1;this.bubbles=!0}var f=m("event/base"),e=m("./observer"),l=m("./object"),d=f.Utils;h.extend(b,f.Observable,{on:function(c){c=new e(c);h.Config.debug&&(c.fn||"lack event handler for "+this.type);-1===this.findObserver(c)&&this.observers.push(c)},fire:function(q){var q=q||{},n=this.bubbles,p=this.currentTarget,o,i=this.type,c=this.defaultFn,g,j=q,r;q.type=i;j instanceof l||(j.target=p,j=new l(j));j.currentTarget=p;q=this.notify(j);!1!==r&&void 0!==q&&(r=q);if(n&&!j.isPropagationStopped()){o=(n=p.getTargets())&&n.length||0;for(g=0;g<o&&!j.isPropagationStopped();g++){q=n[g].fire(i,j),!1!==r&&void 0!==q&&(r=q)}}if(c&&!j.isDefaultPrevented()&&(i=j.target,q=i.getCustomEventObservable(j.type),!this.defaultTargetOnly&&!q.defaultTargetOnly||p===i)){r=c.call(p,j)}return r},notify:function(c){var j=[].concat(this.observers),o,n,i=j.length,g;for(g=0;g<i&&!c.isImmediatePropagationStopped();g++){o=j[g].notify(c,this),!1!==n&&void 0!==o&&(n=o)}return n},detach:function(v){var w,t=v.fn,s=v.context,r=this.currentTarget,k=this.observers,v=v.groups;if(k.length){v&&(w=d.getGroupsRe(v));var n,q,u,p,o=k.length;if(t||w){s=s||r;n=v=0;for(q=[];v<o;++v){if(u=k[v],p=u.context||r,s!==p||t&&t!==u.fn||w&&!u.groups.match(w)){q[n++]=u}}this.observers=q}else{this.reset()}}}});return b});KISSY.add("event/custom/target",["event/base","./observable"],function(f,k){var b=k("event/base"),e=k("./observable"),d=b.Utils,h=d.splitAndRun;return{isTarget:1,getCustomEventObservable:function(g,c){var i,j=this.getCustomEvents();i=j&&j[g];!i&&c&&(i=j[g]=new e({currentTarget:this,type:g}));return i},fire:function(i,g){var j=this,m,l=j.getTargets(),n=l&&l.length,g=g||{};h(i,function(c){var o;d.fillGroupsForEvent(c,g);c=g.type;if((o=j.getCustomEventObservable(c))||n){if(o){if(!o.hasObserver()&&!o.defaultFn&&(o.bubbles&&!n||!o.bubbles)){return}}else{o=new e({currentTarget:j,type:c})}c=o.fire(g);!1!==m&&void 0!==c&&(m=c)}});return m},publish:function(i,g){var l,j=this;h(i,function(c){l=j.getCustomEventObservable(c,!0);f.mix(l,g)});return j},addTarget:function(g){var c=this.getTargets();f.inArray(g,c)||c.push(g);return this},removeTarget:function(g){var c=this.getTargets(),g=f.indexOf(g,c);-1!==g&&c.splice(g,1);return this},getTargets:function(){return this["__~ks_bubble_targets"]||(this["__~ks_bubble_targets"]=[])},getCustomEvents:function(){return this["__~ks_custom_events"]||(this["__~ks_custom_events"]={})},on:function(i,g,l){var j=this;d.batchForType(function(n,m,o){m=d.normalizeParam(n,m,o);n=m.type;if(n=j.getCustomEventObservable(n,!0)){n.on(m)}},0,i,g,l);return j},detach:function(i,g,l){var j=this;d.batchForType(function(n,m,p){var o=d.normalizeParam(n,m,p);(n=o.type)?(n=j.getCustomEventObservable(n,!0))&&n.detach(o):(n=j.getCustomEvents(),f.each(n,function(c){c.detach(o)}))},0,i,g,l);return j}}});KISSY.add("event/custom",["./custom/target"],function(d,e){var b=e("./custom/target");return{Target:b,global:d.mix({},b)}});KISSY.add("event/base/utils",[],function(b){function g(d){if(0>d.indexOf(".")){return[d,""]}var c=d.match(/([^.]+)?(\..+)?$/),d=[c[1]];(c=c[2])?(c=c.split(".").sort(),d.push(c.join("."))):d.push("");return d}var h,i;return{splitAndRun:h=function(d,c){b.isArray(d)?b.each(d,c):(d=b.trim(d),-1===d.indexOf(" ")?c(d):b.each(d.split(/\s+/),c))},normalizeParam:function(f,e,k){var j=e||{},j="function"===typeof e?{fn:e,context:k}:b.merge(j),e=g(f),f=e[0];j.groups=e[1];j.type=f;return j},batchForType:function(f,d){var k=b.makeArray(arguments),j=k[2+d];j&&"object"===typeof j?b.each(j,function(m,l){var c=[].concat(k);c.splice(0,2);c[d]=l;c[d+1]=m;f.apply(null,c)}):h(j,function(l){var c=[].concat(k);c.splice(0,2);c[d]=l;f.apply(null,c)})},fillGroupsForEvent:function(e,c){var k=g(e),j=k[1];j&&(j=i(j),c._ksGroups=j);c.type=k[0]},getGroupsRe:i=function(c){return RegExp(c.split(".").join(".*\\.")+"(?:\\.|$)")}}});KISSY.add("event/base/object",[],function(g,h){function i(){this.timeStamp=g.now();this.currentTarget=this.target=h}var j=function(){return !1},b=function(){return !0};i.prototype={constructor:i,isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){this.isDefaultPrevented=b},stopPropagation:function(){this.isPropagationStopped=b},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=b;this.stopPropagation()},halt:function(c){c?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}};return i});KISSY.add("event/base/observer",[],function(b,c){function g(d){b.mix(this,d)}g.prototype={constructor:g,equals:function(e){var d=this;return !!b.reduce(d.keys,function(f,h){return f&&d[h]===e[h]},1)},simpleNotify:function(f,e){var d;d=this.fn.call(this.context||e.currentTarget,f,this.data);this.once&&e.removeObserver(this);return d},notifyInternal:function(f,e){var d=this.simpleNotify(f,e);!1===d&&f.halt();return d},notify:function(f,e){var d=f._ksGroups;return d&&(!this.groups||!this.groups.match(d))?c:this.notifyInternal(f,e)}};return g});KISSY.add("event/base/observable",[],function(b){function c(e){this.currentTarget=null;b.mix(this,e);this.reset()}c.prototype={constructor:c,hasObserver:function(){return !!this.observers.length},reset:function(){this.observers=[]},removeObserver:function(g){var h,f=this.observers,e=f.length;for(h=0;h<e;h++){if(f[h]===g){f.splice(h,1);break}}this.checkMemory()},checkMemory:function(){},findObserver:function(f){var g=this.observers,e;for(e=g.length-1;0<=e;--e){if(f.equals(g[e])){return e}}return -1}};return c});KISSY.add("event/base",["./base/utils","./base/object","./base/observer","./base/observable"],function(i,j){var k=j("./base/utils"),l=j("./base/object"),h=j("./base/observer"),g=j("./base/observable");return{Utils:k,Object:l,Observer:h,Observable:g}});KISSY.add("promise",[],function(u){function B(c){"undefined"!==typeof console&&console.error&&console.error(c)}function h(g,e,i){if(g instanceof x){d(function(){i.call(g,g[z])})}else{var f=g[z],j=g[w];j?j.push([e,i]):q(f)?h(f,e,i):e&&d(function(){e.call(g,f)})}}function y(c){if(!(this instanceof y)){return new y(c)}this.promise=c||new A;this.promise.defer=this}function q(c){return c&&c instanceof A}function A(c){this[z]=c;void 0===c&&(this[w]=[],this[l]=[])}function x(c){if(c instanceof x){return c}A.apply(this,arguments);this[z] instanceof A&&"assert.not(this.__promise_value instanceof promise) in Reject constructor";return this}function v(g,c,n){function f(e){try{return c?c.call(this,e):e}catch(o){return B(o.stack||o),new x(o)}}function m(o){try{return n?n.call(this,o):new x(o)}catch(e){return B(e.stack||e),new x(e)}}function i(e){j?"already done at fulfilled":e instanceof A?"assert.not(value instanceof Promise) in when":(j=1,k.resolve(f.call(this,e)))}var k=new y,j=0;g instanceof A?h(g,i,function(e){j?"already done at rejected":(j=1,k.resolve(m.call(this,e)))}):i(g);return k.promise}function b(c){return !C(c)&&q(c)&&void 0===c[w]&&(!q(c[z])||b(c[z]))}function C(c){return q(c)&&void 0===c[w]&&c[z] instanceof x}var z="__promise_value",d=u.setImmediate,l="__promise_progress_listeners",w="__promise_pendings";y.prototype={constructor:y,resolve:function(e){var c=this.promise,f;if(!(f=c[w])){return null}c[z]=e;f=[].concat(f);c[w]=void 0;c[l]=void 0;u.each(f,function(g){h(c,g[0],g[1])});return e},reject:function(c){return this.resolve(new x(c))},notify:function(c){u.each(this.promise[l],function(e){d(function(){e(c)})})}};A.prototype={constructor:A,then:function(e,c,f){f&&this.progress(f);return v(this,e,c)},progress:function(c){this[l]&&this[l].push(c);return this},fail:function(c){return v(this,0,c)},fin:function(c){return v(this,function(e){return c(e,!0)},function(e){return c(e,!1)})},done:function(e,c){(e||c?this.then(e,c):this).fail(function(f){f.stack||f;"error";setTimeout(function(){throw f},0)})},isResolved:function(){return b(this)},isRejected:function(){return C(this)}};u.extend(x,A);KISSY.Defer=y;KISSY.Promise=A;A.Defer=y;u.mix(A,{when:v,isPromise:q,isResolved:b,isRejected:C,all:function(f){var e=f.length;if(!e){return null}for(var g=new y,i=0;i<f.length;i++){(function(k,j){v(k,function(m){f[j]=m;0===--e&&g.resolve(f)},function(c){g.reject(c)})})(f[i],i)}return g.promise},async:function(c){return function(){function g(f,e){var n;try{n=i[f](e)}catch(m){return new x(m)}return n.done?n.value:v(n.value,k,j)}function k(e){return g("next",e)}function j(e){return g("throw",e)}var i=c.apply(this,arguments);return k()}}});return A});KISSY.add("event/dom/base/utils",["dom"],function(g,e){var f=e("dom"),j="ksEventTargetId_"+g.now(),h=g.Env.host.document;return{simpleAdd:h&&h.addEventListener?function(k,i,l,m){k.addEventListener&&k.addEventListener(i,l,!!m)}:function(i,c,k){i.attachEvent&&i.attachEvent("on"+c,k)},simpleRemove:h&&h.removeEventListener?function(k,i,l,m){k.removeEventListener&&k.removeEventListener(i,l,!!m)}:function(i,c,k){i.detachEvent&&i.detachEvent("on"+c,k)},data:function(c,i){return f.data(c,j,i)},removeData:function(c){return f.removeData(c,j)}}});KISSY.add("event/dom/base/special",[],function(){return{}});KISSY.add("event/dom/base/observer",["event/base","./special"],function(g,e){function f(c){f.superclass.constructor.call(this,c)}var j=e("event/base"),h=e("./special");g.extend(f,j.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(l,d){var p,n,m=l.type,o;(o=this.originalType)?l.type=o:o=m;(p=h[o])&&p.handle?(p=p.handle(l,this,d))&&0<p.length&&(n=p[0]):n=this.simpleNotify(l,d);!1===n&&l.halt();l.type=m;return n}});return f});KISSY.add("event/dom/base/object",["event/base"],function(l,t){function u(){return v}function q(){return e}function p(k){var c=k.type;p.superclass.constructor.call(this);this.originalEvent=k;var i=q;"defaultPrevented" in k?i=k.defaultPrevented?u:q:"getPreventDefault" in k?i=k.getPreventDefault()?u:q:"returnValue" in k&&(i=k.returnValue===e?u:q);this.isDefaultPrevented=i;var d=[],h,b=j.concat();l.each(n,function(m){c.match(m.reg)&&(b=b.concat(m.props),m.fix&&d.push(m.fix))});for(i=b.length;i;){h=b[--i],this[h]=k[h]}this.target||(this.target=k.srcElement||g);3===this.target.nodeType&&(this.target=this.target.parentNode);for(i=d.length;i;){h=d[--i],h(this,k)}}var f=t("event/base"),g=l.Env.host.document,v=!0,e=!1,j="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),n=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(b,c){null==b.which&&(b.which=null!=c.charCode?c.charCode:c.keyCode);void 0===b.metaKey&&(b.metaKey=b.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(z,m){var s,o,r,k=m.wheelDelta,i=m.axis,y=m.wheelDeltaY,x=m.wheelDeltaX,w=m.detail;k&&(r=k/120);w&&(r=-(0===w%3?w/3:w));void 0!==i&&(i===z.HORIZONTAL_AXIS?(o=0,s=-1*r):i===z.VERTICAL_AXIS&&(s=0,o=r));void 0!==y&&(o=y/120);void 0!==x&&(s=-1*x/120);!s&&!o&&(o=r);void 0!==s&&(z.deltaX=s);void 0!==o&&(z.deltaY=o);void 0!==r&&(z.delta=r)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(b,d){var m,i,k=b.target,c=d.button;null==b.pageX&&null!=d.clientX&&(m=k.ownerDocument||g,i=m.documentElement,m=m.body,b.pageX=d.clientX+(i&&i.scrollLeft||m&&m.scrollLeft||0)-(i&&i.clientLeft||m&&m.clientLeft||0),b.pageY=d.clientY+(i&&i.scrollTop||m&&m.scrollTop||0)-(i&&i.clientTop||m&&m.clientTop||0));!b.which&&void 0!==c&&(b.which=c&1?1:c&2?3:c&4?2:0);!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement===k?b.toElement:b.fromElement);return b}}];l.extend(p,f.Object,{constructor:p,preventDefault:function(){var b=this.originalEvent;b.preventDefault?b.preventDefault():b.returnValue=e;p.superclass.preventDefault.call(this)},stopPropagation:function(){var b=this.originalEvent;b.stopPropagation?b.stopPropagation():b.cancelBubble=v;p.superclass.stopPropagation.call(this)}});return p});KISSY.add("event/dom/base/observable","event/base,dom,./special,./utils,./observer,./object".split(","),function(j,p){function q(b){j.mix(this,b);this.reset()}var n=p("event/base"),l=p("dom"),f=p("./special"),g=p("./utils"),t=p("./observer"),e=p("./object"),h=n.Utils;j.extend(q,n.Observable,{setup:function(){var i=this.type,c=f[i]||{},m=this.currentTarget,k=g.data(m).handle;(!c.setup||c.setup.call(m,i)===false)&&g.simpleAdd(m,i,k)},constructor:q,reset:function(){q.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(F){var E=F.target,D=F.type,C=this.currentTarget,A=this.observers,B=[],y,w,G=this.delegateCount||0,r,z;if(G&&E.nodeType){for(;E!==C;){if(E.disabled!==true||D!=="click"){var d={},x,v,s;r=[];for(w=0;w<G;w++){z=A[w];s=z.filter;v=s+"";x=d[v];x===void 0&&(x=d[v]=l.test(E,s));x&&r.push(z)}r.length&&B.push({currentTarget:E,currentTargetObservers:r})}E=E.parentNode||C}}G<A.length&&B.push({currentTarget:C,currentTargetObservers:A.slice(G)});w=0;for(E=B.length;!F.isPropagationStopped()&&w<E;++w){D=B[w];r=D.currentTargetObservers;D=D.currentTarget;F.currentTarget=D;for(D=0;!F.isImmediatePropagationStopped()&&D<r.length;D++){C=r[D];C=C.notify(F,this);y!==false&&C!==void 0&&(y=C)}}return y},fire:function(w,B){var w=w||{},A=""+this.type,z,x,y=f[A]||{};z=y.bubbles!==false;var v=this.currentTarget;if(!(y.fire&&y.fire.call(v,B)===false)){if(!(w instanceof e)){x=w;w=new e({currentTarget:v,type:A,target:v});j.mix(w,x)}if(!(y.preFire&&y.preFire.call(v,w,B)===false)){x=v;var r=l.getWindow(x),C=r.document,y=[],i,s="on"+A,d=0;do{y.push(x);x=x.parentNode||x.ownerDocument||x===C&&r}while(!B&&x&&z);x=y[d];do{w.currentTarget=x;if(z=q.getDomEventObservable(x,A)){z=z.notify(w);z!==void 0&&i!==false&&(i=z)}x[s]&&x[s].call(x)===false&&w.preventDefault();x=y[++d]}while(!B&&x&&!w.isPropagationStopped());if(!B&&!w.isDefaultPrevented()){try{if(v[A]&&!j.isWindow(v)){q.triggeredEvent=A;v[A]()}}catch(o){"trigger action error: "+o}q.triggeredEvent=""}return i}}},on:function(i){var d=this.observers,k=f[this.type]||{},i=i instanceof t?i:new t(i);j.Config.debug&&(i.fn||"lack event handler for "+this.type);if(this.findObserver(i)===-1){if(i.filter){d.splice(this.delegateCount,0,i);this.delegateCount++}else{if(i.last){d.push(i);this.lastCount++}else{d.splice(d.length-this.lastCount,0,i)}}k.add&&k.add.call(this.currentTarget,i)}},detach:function(E){var D,C=f[this.type]||{},A="filter" in E,y=E.filter,z=E.context,w=E.fn,v=this.currentTarget,B=this.observers,E=E.groups;if(B.length){E&&(D=h.getGroupsRe(E));var s,x,o,u,k=B.length;if(w||A||D){z=z||v;s=E=0;for(x=[];E<k;++E){o=B[E];u=o.context||v;if(z!==u||w&&w!==o.fn||A&&(y&&y!==o.filter||!y&&!o.filter)||D&&!o.groups.match(D)){x[s++]=o}else{o.filter&&this.delegateCount&&this.delegateCount--;o.last&&this.lastCount&&this.lastCount--;C.remove&&C.remove.call(v,o)}}this.observers=x}else{this.reset()}this.checkMemory()}},checkMemory:function(){var i=this.type,d,r,o=f[i]||{},k=this.currentTarget,m=g.data(k);if(m){d=m.observables;if(!this.hasObserver()){r=m.handle;(!o.tearDown||o.tearDown.call(k,i)===false)&&g.simpleRemove(k,i,r);delete d[i]}if(j.isEmptyObject(d)){m.handle=null;g.removeData(k)}}}});q.triggeredEvent="";q.getDomEventObservable=function(i,d){var m=g.data(i),k;if(m){k=m.observables}return k?k[d]:null};q.getDomEventObservablesHolder=function(i,d){var k=g.data(i);!k&&d&&g.data(i,k={});return k};return q});KISSY.add("event/dom/base/dom-event","event/base,./utils,dom,./special,./observable,./object".split(","),function(p,w){function x(h,d){var k=e[d]||{},i;if(!h.originalType&&(i=k.typeFix)){h.originalType=d;d=i}return d}function v(h,o,m){var k,i,n,m=p.merge(m),o=x(m,o);k=l.getDomEventObservablesHolder(h,1);if(!(n=k.handle)){n=k.handle=function(r){var d=r.type,s=n.currentTarget;if(!(l.triggeredEvent===d||typeof KISSY==="undefined")){if(d=l.getDomEventObservable(s,d)){r.currentTarget=s;r=new q(r);return d.notify(r)}}};n.currentTarget=h}if(!(i=k.observables)){i=k.observables={}}k=i[o];if(!k){k=i[o]=new l({type:o,currentTarget:h});k.setup()}k.on(m);h=null}function u(h,m,i){var i=p.merge(i),m=x(i,m),h=l.getDomEventObservablesHolder(h),k=(h||{}).observables;if(h&&k){if(m){(m=k[m])&&m.detach(i)}else{for(m in k){k[m].detach(i)}}}}var f=w("event/base"),j=w("./utils"),z=w("dom"),e=w("./special"),l=w("./observable"),q=w("./object"),g=f.Utils,y={on:function(h,c,i,k){h=z.query(h);g.batchForType(function(n,m,r,o){for(var r=g.normalizeParam(m,r,o),s,m=r.type,o=n.length-1;o>=0;o--){s=n[o];v(s,m,r)}},1,h,c,i,k);return h},detach:function(h,d,k,i){h=z.query(h);g.batchForType(function(n,m,t,r){for(var t=g.normalizeParam(m,t,r),s,o,m=t.type,r=n.length-1;r>=0;r--){s=n[r];u(s,m,t);if(t.deep&&s.getElementsByTagName){o=s.getElementsByTagName("*");for(s=o.length-1;s>=0;s--){u(o[s],m,t)}}}},1,h,d,k,i);return h},delegate:function(k,h,n,m,i){return y.on(k,h,{fn:m,context:i,filter:n})},undelegate:function(k,h,n,m,i){return y.detach(k,h,{fn:m,context:i,filter:n})},fire:function(k,h,n,m){var i,n=n||{};n.synthetic=1;g.splitAndRun(h,function(c){var r,o,d;g.fillGroupsForEvent(c,n);c=n.type;if((o=e[c])&&o.typeFix){c=o.typeFix}k=z.query(k);for(o=k.length-1;o>=0;o--){r=k[o];d=l.getDomEventObservable(r,c);!m&&!d&&(d=new l({type:c,currentTarget:r}));if(d){r=d.fire(n,m);i!==false&&r!==void 0&&(i=r)}}});return i},fireHandler:function(h,d,i){return y.fire(h,d,i,1)},clone:function(i,c){var m;if(m=l.getDomEventObservablesHolder(i)){var k=j.data(i);k&&k===j.data(c)&&j.removeData(c);p.each(m.observables,function(b,h){p.each(b.observers,function(d){v(c,h,d)})})}}};return y});KISSY.add("event/dom/base/key-codes",[],function(e){var c=e.UA,d={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(f){var g=f.keyCode;if(f.altKey&&!f.ctrlKey||f.metaKey||g>=d.F1&&g<=d.F12){return !1}switch(g){case d.ALT:case d.CAPS_LOCK:case d.CONTEXT_MENU:case d.CTRL:case d.DOWN:case d.END:case d.ESC:case d.HOME:case d.INSERT:case d.LEFT:case d.MAC_FF_META:case d.META:case d.NUMLOCK:case d.NUM_CENTER:case d.PAGE_DOWN:case d.PAGE_UP:case d.PAUSE:case d.PRINT_SCREEN:case d.RIGHT:case d.SHIFT:case d.UP:case d.WIN_KEY:case d.WIN_KEY_RIGHT:return !1;default:return !0}},isCharacterKey:function(b){if(b>=d.ZERO&&b<=d.NINE||b>=d.NUM_ZERO&&b<=d.NUM_MULTIPLY||b>=d.A&&b<=d.Z||c.webkit&&0===b){return !0}switch(b){case d.SPACE:case d.QUESTION_MARK:case d.NUM_PLUS:case d.NUM_MINUS:case d.NUM_PERIOD:case d.NUM_DIVISION:case d.SEMICOLON:case d.DASH:case d.EQUALS:case d.COMMA:case d.PERIOD:case d.SLASH:case d.APOSTROPHE:case d.SINGLE_QUOTE:case d.OPEN_SQUARE_BRACKET:case d.BACKSLASH:case d.CLOSE_SQUARE_BRACKET:return !0;default:return !1}}};return d});KISSY.add("event/dom/base/gesture",[],function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",singleTap:"click",doubleTap:"dblclick"}});KISSY.add("event/dom/base/special-events",["./dom-event","./special"],function(f,d){var e=d("./dom-event"),g=d("./special");return f.mix(g,{mousewheel:{typeFix:f.UA.gecko?"DOMMouseScroll":"mousewheel"},load:{bubbles:!1},click:{fire:function(b){if(!b&&"checkbox"===""+this.type&&this.click&&"input"===this.nodeName.toLowerCase()){return this.click(),!1}}},focus:{bubbles:!1,preFire:function(h,i){if(!i){return e.fire(this,"focusin")}},fire:function(b){if(!b&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus){return this.focus(),!1}}},blur:{bubbles:!1,preFire:function(h,i){if(!i){return e.fire(this,"focusout")}},fire:function(b){if(!b&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur){return this.blur(),!1}}}})});KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(f,d){var e=d("dom"),g=d("./special");f.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(c){g[c.name]={typeFix:c.fix,handle:function(h,n,m){var l=h.currentTarget,j=h.relatedTarget;if(!j||j!==l&&!e.contains(l,j)){return[n.simpleNotify(h,m)]}}}})});KISSY.add("event/dom/base/valuechange",["dom","./dom-event","./special"],function(x,E){function F(d){if(v.hasData(d,A)){var c=v.data(d,A);clearTimeout(c);v.removeData(d,A)}}function D(c){F(c.target)}function C(e){var d=e.value,f=v.data(e,z);d!==f&&(y.fireHandler(e,G,{prevVal:f,newVal:d}),v.data(e,z,d))}function p(b){v.hasData(b,A)||v.data(b,A,setTimeout(function c(){C(b);v.data(b,A,setTimeout(c,w))},w))}function u(d){var c=d.target;"focus"===d.type&&v.data(c,z,c.value);p(c)}function H(b){C(b.target)}function l(c){v.removeData(c,z);F(c);y.detach(c,"blur",D);y.detach(c,"webkitspeechchange",H);y.detach(c,"mousedown keyup keydown focus",u)}var v=E("dom"),y=E("./dom-event"),q=E("./special"),G="valuechange",B=v.nodeName,z="event/valuechange/history",A="event/valuechange/poll",w=50;q[G]={setup:function(){var b=B(this);if("input"===b||"textarea"===b){l(this),y.on(this,"blur",D),y.on(this,"webkitspeechchange",H),y.on(this,"mousedown keyup keydown focus",u)}},tearDown:function(){l(this)}};return y});KISSY.add("event/dom/base","./base/dom-event,./base/object,./base/key-codes,./base/gesture,./base/special-events,./base/mouseenter,./base/valuechange".split(","),function(h,f){var g=f("./base/dom-event"),l=f("./base/object"),k=f("./base/key-codes"),j=f("./base/gesture"),e=f("./base/special-events");f("./base/mouseenter");f("./base/valuechange");return h.merge({add:g.on,remove:g.detach,KeyCode:k,Gesture:j,Special:e,Object:l},g)});KISSY.add("event/dom/shake",["event/dom/base"],function(B,t){function w(e){var c=e.accelerationIncludingGravity,e=c.x,h=c.y,c=c.z,g;void 0!==C&&(g=s(z(e-C),z(h-y),z(c-x)),g>r&&v(),g>f&&(A=1));C=e;y=h;x=c}var u=t("event/dom/base"),b=u.Special,r=5,f=20,A=0,C,y,x,s=Math.max,z=Math.abs,D=B.Env.host,v=B.buffer(function(){A&&(u.fireHandler(D,"shake",{accelerationIncludingGravity:{x:C,y:y,z:x}}),C=void 0,A=0)},250);b.shake={setup:function(){this===D&&D.addEventListener("devicemotion",w,!1)},tearDown:function(){this===D&&(v.stop(),C=void 0,A=0,D.removeEventListener("devicemotion",w,!1))}}});KISSY.add("event/dom/focusin",["event/dom/base"],function(i,c){var f=c("event/dom/base"),b=f.Special;i.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(g){function e(h){return f.fire(h.target,g.name)}var d=i.guid("attaches_"+i.now()+"_");b[g.name]={setup:function(){var h=this.ownerDocument||this;d in h||(h[d]=0);h[d]+=1;1===h[d]&&h.addEventListener(g.fix,e,!0)},tearDown:function(){var h=this.ownerDocument||this;h[d]-=1;0===h[d]&&h.removeEventListener(g.fix,e,!0)}}});return f});KISSY.add("node/base",["dom","event/dom"],function(u,r){function t(d,b,c){if(!(this instanceof t)){return new t(d,b,c)}if(d){if("string"===typeof d){if(d=p.create(d,b,c),d.nodeType===m.DOCUMENT_FRAGMENT_NODE){return s.apply(this,v(d.childNodes)),this}}else{if(u.isArray(d)||n(d)){return s.apply(this,v(d)),this}}}else{return this}this[0]=d;this.length=1;return this}var p=r("dom"),o=r("event/dom"),q=Array.prototype,f=q.slice,m=p.NodeType,s=q.push,v=u.makeArray,n=p.isDomNodeList;t.prototype={constructor:t,isNodeList:!0,length:0,item:function(b){return"number"===typeof b?b>=this.length?null:new t(this[b]):new t(b)},add:function(e,d,c){"number"===typeof d&&(c=d,d=void 0);e=t.all(e,d).getDOMNodes();d=new t(this);void 0===c?s.apply(d,e):(c=[c,0],c.push.apply(c,e),q.splice.apply(d,c));return d},slice:function(){return new t(f.apply(this,arguments))},getDOMNodes:function(){return f.call(this)},each:function(b,e){var c=this;u.each(c,function(d,g){d=new t(d);return b.call(e||d,d,g,c)});return c},getDOMNode:function(){return this[0]},end:function(){return this.__parent||this},filter:function(b){return new t(p.filter(this,b))},all:function(b){b=0<this.length?t.all(b,this):new t;b.__parent=this;return b},one:function(b){b=this.all(b);if(b=b.length?b.slice(0,1):null){b.__parent=this}return b}};u.mix(t,{all:function(b,c){return"string"===typeof b&&(b=u.trim(b))&&3<=b.length&&u.startsWith(b,"<")&&u.endsWith(b,">")?(c&&(c.getDOMNode&&(c=c[0]),c=c.ownerDocument||c),new t(b,void 0,c)):new t(p.query(b,c))},one:function(e,g){var c=t.all(e,g);return c.length?c.slice(0,1):null}});t.NodeType=m;t.KeyCode=o.KeyCode;t.Gesture=o.Gesture;t.REPLACE_HISTORY=o.REPLACE_HISTORY;return t});KISSY.add("node/attach",["dom","event/dom","./base"],function(d,p){function q(g,e,c){c.unshift(e);g=n[g].apply(n,c);return void 0===g?e:g}var n=p("dom"),m=p("event/dom"),o=p("./base"),f=o.prototype,j=d.makeArray;o.KeyCode=m.KeyCode;d.each("nodeName,isCustomDomain,getEmptyIframeSrc,equals,contains,index,scrollTop,scrollLeft,height,width,innerHeight,innerWidth,outerHeight,outerWidth,addStyleSheet,appendTo,prependTo,insertBefore,before,after,insertAfter,test,hasClass,addClass,removeClass,replaceClass,toggleClass,removeAttr,hasAttr,hasProp,scrollIntoView,remove,empty,removeData,hasData,unselectable,wrap,wrapAll,replaceWith,wrapInner,unwrap".split(","),function(b){f[b]=function(){var c=j(arguments);return q(b,this,c)}});d.each("getWindow,getDocument,filter,first,last,parent,closest,next,prev,clone,siblings,contents,children".split(","),function(b){f[b]=function(){var c=j(arguments);c.unshift(this);c=n[b].apply(n,c);return c===void 0?this:c===null?null:new o(c)}});d.each({attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,outerHTML:0,outerHtml:0,data:1},function(c,b){f[b]=function(){var e;e=j(arguments);void 0===e[c]&&!d.isObject(e[0])?(e.unshift(this),e=n[b].apply(n,e)):e=q(b,this,e);return e}});d.each(["on","detach","delegate","undelegate"],function(b){f[b]=function(){var c=j(arguments);c.unshift(this);m[b].apply(m,c);return this}});d.each(["fire","fireHandler"],function(b){f[b]=function(){var c=j(arguments);c.unshift(this);return m[b].apply(m,c)}})});KISSY.add("node/override",["dom","./base","./attach"],function(d,j){var k=j("dom"),g=j("./base");j("./attach");var f=g.prototype;d.each(["append","prepend","before","after"],function(c){f[c]=function(b){"string"===typeof b&&(b=k.create(b));if(b){k[c](b,this)}return this}});d.each(["wrap","wrapAll","replaceWith","wrapInner"],function(e){var h=f[e];f[e]=function(c){"string"===typeof c&&(c=g.all(c,this[0].ownerDocument));return h.call(this,c)}})});KISSY.add("node/anim",["./base","dom","anim"],function(d,n){function o(e,i,g){for(var l=[],h={},g=g||0;g<i;g++){l.push.apply(l,f[g])}for(g=0;g<l.length;g++){h[l[g]]=e}return h}var k=n("./base"),j=n("dom"),m=n("anim"),f=[["height","margin-top","margin-bottom","padding-top","padding-bottom"],["width","margin-left","margin-right","padding-left","padding-right"],["opacity"]];d.augment(k,{animate:function(){var b=d.makeArray(arguments);d.each(this,function(h){var c=d.clone(b),g=c[0];g.to?(g.node=h,(new m(g)).run()):m.apply(void 0,[h].concat(c)).run()});return this},stop:function(g,e,b){d.each(this,function(c){m.stop(c,g,e,b)});return this},pause:function(e,b){d.each(this,function(c){m.pause(c,b)});return this},resume:function(e,b){d.each(this,function(c){m.resume(c,b)});return this},isRunning:function(){for(var c=0;c<this.length;c++){if(m.isRunning(this[c])){return !0}}return !1},isPaused:function(){for(var c=0;c<this.length;c++){if(m.isPaused(this[c])){return !0}}return !1}});d.each({show:o("show",3),hide:o("hide",3),toggle:o("toggle",3),fadeIn:o("show",3,2),fadeOut:o("hide",3,2),fadeToggle:o("toggle",3,2),slideDown:o("show",1),slideUp:o("hide",1),slideToggle:o("toggle",1)},function(e,b){k.prototype[b]=function(c,h,g){if(j[b]&&!c){j[b](this)}else{d.each(this,function(i){(new m(i,e,c,g,h)).run()})}return this}})});KISSY.add("node",["node/base","node/attach","node/override","node/anim"],function(d,f){var g=f("node/base");f("node/attach");f("node/override");f("node/anim");d.mix(d,{Node:g,NodeList:g,one:g.one,all:g.all});return g});KISSY.add("anim",["anim/base","anim/timer","anim/transition?"],function(c,o){function d(b,h,i,g,j){if(b.node){j=b}else{"string"===typeof h?(h=c.unparam(""+h,";",":"),c.each(h,function(q,f){var k=c.trim(f);k&&(h[k]=c.trim(q));(!k||k!==f)&&delete h[f]})):h=c.clone(h);if(c.isPlainObject(i)){j=c.clone(i)}else{if(j={complete:j},i&&(j.duration=i),g){j.easing=g}}j.node=b;j.to=h}j=c.merge(e,j,{useTransition:c.config("anim/useTransition")});if(j.useTransition&&n){return"use transition anim",new n(j)}"use js timer anim";return new m(j)}var l=o("anim/base"),m=o("anim/timer"),n=o("anim/transition?"),p=l.Utils,e={duration:1,easing:"linear"};c.each(["pause","resume"],function(f){d[f]=function(b,g){return null===g||"string"===typeof g||!1===g?p.pauseOrResumeQueue(b,g,f):p.pauseOrResumeQueue(b,void 0,f)}});d.isRunning=p.isElRunning;d.isPaused=p.isElPaused;d.stop=p.stopEl;d.Easing=m.Easing;c.Anim=d;d.Q=l.Q;return d});KISSY.add("anim/base/queue",["dom"],function(n,e){function j(g,f,i){var f=f||l,h,d=m.data(g,k);!d&&!i&&m.data(g,k,d={});d&&(h=d[f],!h&&!i&&(h=d[f]=[]));return h}var m=e("dom"),k=n.guid("ks-queue-"+n.now()+"-"),l=n.guid("ks-queue-"+n.now()+"-"),b;return b={queueCollectionKey:k,queue:function(f,h,g){f=j(f,h);f.push(g);return f},remove:function(g,c,h){var f=j(g,c,1);f&&(h=n.indexOf(h,f),-1<h&&f.splice(h,1));f&&!f.length&&b.clearQueue(g,c);return f},clearQueues:function(c){m.removeData(c,k)},clearQueue:function(f,c){var c=c||l,d=m.data(f,k);d&&delete d[c];n.isEmptyObject(d)&&m.removeData(f,k)},dequeue:function(h,f){var g=j(h,f,1);g&&(g.shift(),g.length||b.clearQueue(h,f));return g}}});KISSY.add("anim/base/utils",["./queue","dom"],function(m,b){var e=b("./queue"),l=b("dom"),j=m.guid("ks-anim-unqueued-"+m.now()+"-"),k=m.guid("ks-anim-paused-"+m.now()+"-");return{saveRunningAnim:function(d){var f=d.node,c=l.data(f,j);c||l.data(f,j,c={});c[m.stamp(d)]=d},removeRunningAnim:function(d){var f=d.node,c=l.data(f,j);c&&(delete c[m.stamp(d)],m.isEmptyObject(c)&&l.removeData(f,j))},isAnimPaused:function(c){var d=l.data(c.node,k);return d?!!d[m.stamp(c)]:0},removePausedAnim:function(d){var f=d.node,c=l.data(f,k);c&&(delete c[m.stamp(d)],m.isEmptyObject(c)&&l.removeData(f,k))},savePausedAnim:function(d){var f=d.node,c=l.data(f,k);c||l.data(f,k,c={});c[m.stamp(d)]=d},isAnimRunning:function(c){var d=l.data(c.node,j);return d?!!d[m.stamp(c)]:0},isElPaused:function(c){return(c=l.data(c,k))&&!m.isEmptyObject(c)},isElRunning:function(c){return(c=l.data(c,j))&&!m.isEmptyObject(c)},pauseOrResumeQueue:function(d,f,c){d=l.data(d,"resume"===c?k:j);d=m.merge(d);m.each(d,function(g){if(void 0===f||g.config.queue===f){g[c]()}})},stopEl:function(d,h,c,g){c&&(void 0===g?e.clearQueues(d):!1!==g&&e.clearQueue(d,g));d=l.data(d,j);d=m.merge(d);m.each(d,function(f){(void 0===g||f.config.queue===g)&&f.stop(h)})}}});KISSY.add("anim/base",["dom","./base/utils","./base/queue","promise"],function(r,k){function m(d){m.superclass.constructor.call(this);t.Defer(this);this.config=d;var c=d.node;r.isPlainObject(c)||(c=q.get(d.node));this.node=this.el=c;this._backupProps={};this._propsData={}}var q=k("dom"),n=k("./base/utils"),o=k("./base/queue"),t=k("promise"),p=q.NodeType,s=r.noop,j={toggle:1,hide:1,show:1};r.extend(m,t,{on:function(b,d){"complete"===b?this.then(d):"end"===b?this.fin(d):"step"===b?this.progress(d):"not supported event for anim: "+b;return this},prepareFx:s,runInternal:function(){var z=this,y=z.config,x=z.node,w,v=z._backupProps,g=z._propsData,u=y.to,c=y.delay||0,e=y.duration;n.saveRunningAnim(z);r.each(u,function(b,f){r.isPlainObject(b)||(b={value:b});g[f]=r.mix({delay:c,easing:y.easing,frame:y.frame,duration:e},b)});if(x.nodeType===p.ELEMENT_NODE){if(u.width||u.height){u=x.style,r.mix(v,{overflow:u.overflow,"overflow-x":u.overflowX,"overflow-y":u.overflowY}),u.overflow="hidden","inline"===q.css(x,"display")&&"none"===q.css(x,"float")&&(10>r.UA.ieMode?u.zoom=1:u.display="inline-block")}var d,l;l="none"===q.css(x,"display");r.each(g,function(h,f){w=h.value;if(j[w]){if("hide"===w&&l||"show"===w&&!l){return z.stop(!0),d=!1}v[f]=q.style(x,f);"toggle"===w?w=l?"show":"hide":"hide"===w?(h.value=0,v.display="none"):(h.value=q.css(x,f),q.css(x,f,0),q.show(x))}});if(!1===d){return}}z.startTime=r.now();r.isEmptyObject(g)?(z.__totalTime=1000*e,z.__waitTimeout=setTimeout(function(){z.stop(!0)},z.__totalTime)):(z.prepareFx(),z.doStart())},isRunning:function(){return n.isAnimRunning(this)},isPaused:function(){return n.isAnimPaused(this)},pause:function(){this.isRunning()&&(this._runTime=r.now()-this.startTime,this.__totalTime-=this._runTime,n.removeRunningAnim(this),n.savePausedAnim(this),this.__waitTimeout?clearTimeout(this.__waitTimeout):this.doStop());return this},doStop:s,doStart:s,resume:function(){var b=this;b.isPaused()&&(b.startTime=r.now()-b._runTime,n.removePausedAnim(b),n.saveRunningAnim(b),b.__waitTimeout?b.__waitTimeout=setTimeout(function(){b.stop(!0)},b.__totalTime):(b.beforeResume(),b.doStart()));return b},beforeResume:s,run:function(){var b;b=this.config.queue;!1===b?this.runInternal():(b=o.queue(this.node,b,this),1===b.length&&this.runInternal());return this},stop:function(d){var c=this.node,l=this.config.queue;if(this.isResolved()||this.isRejected()){return this}this.__waitTimeout&&(clearTimeout(this.__waitTimeout),this.__waitTimeout=0);if(!this.isRunning()&&!this.isPaused()){return !1!==l&&o.remove(c,l,this),this}this.doStop(d);n.removeRunningAnim(this);n.removePausedAnim(this);var g=this.defer;if(d){var f,d=this.config.complete;r.isEmptyObject(f=this._backupProps)||q.css(this.node,f);d&&d.call(this);g.resolve([this])}else{g.reject([this])}!1!==l&&(c=o.dequeue(c,l))&&c[0]&&c[0].runInternal();return this}});m.Utils=n;m.Q=o;return m});KISSY.add("anim/timer/easing",[],function(){function n(b){return b}function r(A,z,g,w){var x=3*A-3*g+1,y=3*g-6*A,o=3*A,h=3*z-3*w+1,v=3*w-6*z,m=3*z;return function(f){f:{for(var c=f,l,j,i=0;8>i;i++){j=((x*c+y)*c+o)*c-f;if(e(j)<d){f=c;break f}l=(3*x*c+2*y)*c+o;if(e(l)<d){break}c-=j/l}l=1;i=0;for(c=f;l>i;){j=((x*c+y)*c+o)*c-f;if(e(j)<d){break}0<j?l=c:i=c;c=(l+i)/2}f=c}return((h*f+v)*f+m)*f}}var q=Math.PI,p=Math.pow,u=Math.sin,t=parseFloat,k=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,s={swing:function(b){return -Math.cos(b*q)/2+0.5},easeNone:n,linear:n,easeIn:function(b){return b*b},ease:r(0.25,0.1,0.25,1),"ease-in":r(0.42,0,1,1),"ease-out":r(0,0,0.58,1),"ease-in-out":r(0.42,0,0.58,1),"ease-out-in":r(0,0.42,1,0.58),toFn:function(f){var c;return(c=f.match(k))?r(t(c[1]),t(c[2]),t(c[3]),t(c[4])):s[f]||n},easeOut:function(b){return(2-b)*b},easeBoth:function(b){return 1>(b*=2)?0.5*b*b:0.5*(1- --b*(b-2))},easeInStrong:function(b){return b*b*b*b},easeOutStrong:function(b){return 1- --b*b*b*b},easeBothStrong:function(b){return 1>(b*=2)?0.5*b*b*b*b:0.5*(2-(b-=2)*b*b*b)},elasticIn:function(b){return 0===b||1===b?b:-(p(2,10*(b-=1))*u(2*(b-0.075)*q/0.3))},elasticOut:function(b){return 0===b||1===b?b:p(2,-10*b)*u(2*(b-0.075)*q/0.3)+1},elasticBoth:function(b){return 0===b||2===(b*=2)?b:1>b?-0.5*p(2,10*(b-=1))*u(2*(b-0.1125)*q/0.45):0.5*p(2,-10*(b-=1))*u(2*(b-0.1125)*q/0.45)+1},backIn:function(b){1===b&&(b-=0.001);return b*b*(2.70158*b-1.70158)},backOut:function(b){return(b-=1)*b*(2.70158*b+1.70158)+1},backBoth:function(f){var c,g=(c=2.5949095)+1;return 1>(f*=2)?0.5*f*f*(g*f-c):0.5*((f-=2)*f*(g*f+c)+2)},bounceIn:function(b){return 1-s.bounceOut(1-b)},bounceOut:function(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375},bounceBoth:function(b){return 0.5>b?0.5*s.bounceIn(2*b):0.5*s.bounceOut(2*b-1)+0.5}},d=0.000001,e=Math.abs;return s});KISSY.add("anim/timer/manager",[],function(b){var e=b.stamp,d,c;d=function(f){return setTimeout(f,15)};c=function(f){clearTimeout(f)};return{runnings:{},timer:null,start:function(f){var g=e(f);this.runnings[g]||(this.runnings[g]=f,this.startTimer())},stop:function(f){this.notRun(f)},notRun:function(f){delete this.runnings[e(f)];b.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(f){this.notRun(f)},resume:function(f){this.start(f)},startTimer:function(){var f=this;f.timer||(f.timer=d(function g(){f.runFrames()?f.stopTimer():f.timer=d(g)}))},stopTimer:function(){var f=this.timer;f&&(c(f),this.timer=0)},runFrames:function(){var f,h,g=this.runnings;for(f in g){g[f].frame()}for(f in g){h=0;break}return void 0===h}}});KISSY.add("anim/timer/fx",["dom"],function(b,e){function d(f){b.mix(this,f);this.pos=0;this.unit=this.unit||""}var c=e("dom");d.prototype={isCustomFx:0,constructor:d,load:function(f){b.mix(this,f);this.pos=0;this.unit=this.unit||""},frame:function(j){if(1!==this.pos){var r=this.anim,o=this.prop,q=r.node,p=this.from,i=this.propData,l=this.to;if(void 0===j){var n=b.now(),j=i.duration,n=n-r.startTime-i.delay,j=0>=n?0:n>=j?1:i.easing(n/j)}this.pos=j;p===l||0===j||(this.val=j=this.interpolate(p,l,this.pos),i.frame?i.frame.call(this,r,this):this.isCustomFx||(void 0===j?(this.pos=1,j=l,o+" update directly ! : "+j+" : "+p+" : "+l):j+=this.unit,this.val=j,"attr"===this.type?c.attr(q,o,j,1):c.css(q,o,j)))}},interpolate:function(f,h,g){if("number"===typeof f&&"number"===typeof h){return Math.round(100000*(f+(h-f)*g))/100000}},cur:function(){var g=this.prop,k,i,j=this.anim.node;if(this.isCustomFx){return j[g]||0}if(!(k=this.type)){k=this.type=(!j.style||null==j.style[g])&&null!=c.attr(j,g,void 0,1)?"attr":"css"}g="attr"===k?c.attr(j,g,void 0,1):c.css(j,g);return isNaN(i=parseFloat(g))?!g||"auto"===g?0:g:i}};d.Factories={};d.FxTypes={};d.getFx=function(g){var k=d,h,j;if(h=g.fxType){k=d.FxTypes[h]}else{if(!g.isCustomFx&&(j=d.Factories[g.prop])){k=j}}return new k(g)};return d});KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});KISSY.add("anim/timer/color",["./fx","./short-hand"],function(q,t){function s(c){var c=c+"",f;if(f=c.match(e)){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}if(f=c.match(x)){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])]}if(f=c.match(p)){for(c=1;c<f.length;c++){2>f[c].length&&(f[c]+=f[c])}return[parseInt(f[1],n),parseInt(f[2],n),parseInt(f[3],n)]}if(d[c=c.toLowerCase()]){return d[c]}"only allow rgb or hex color string : "+c;return[255,255,255]}function r(){r.superclass.constructor.apply(this,arguments)}var w=t("./fx"),v=t("./short-hand"),n=16,u=Math.floor,d={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},e=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,x=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,p=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;v.background.push("backgroundColor");v.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];v.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");v.borderBottom.push("borderBottomColor");v.borderLeft.push("borderLeftColor");v.borderRight.push("borderRightColor");v.borderTop.push("borderTopColor");q.extend(r,w,{load:function(){r.superclass.load.apply(this,arguments);this.from&&(this.from=s(this.from));this.to&&(this.to=s(this.to))},interpolate:function(f,c,h){var g=r.superclass.interpolate;if(3===f.length&&3===c.length){return"rgb("+[u(g(f[0],c[0],h)),u(g(f[1],c[1],h)),u(g(f[2],c[2],h))].join(", ")+")"}if(4===f.length||4===c.length){return"rgba("+[u(g(f[0],c[0],h)),u(g(f[1],c[1],h)),u(g(f[2],c[2],h)),u(g(f[3]||1,c[3]||1,h))].join(", ")+")"}"unknown value : "+f}});q.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(b){w.Factories[b]=r});return w.FxTypes.color=r});KISSY.add("anim/timer/transform",["dom","./fx"],function(n,r){function q(b){b=b.split(/,/);return b=n.map(b,function(c){return u(c)})}function p(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function u(b){return Math.round(100000*parseFloat(b))/100000}function t(b){for(var b=b.split(")"),h=n.trim,v=-1,l=b.length-1,m,o,j=p();++v<l;){switch(m=b[v].split("("),o=h(m[0]),m=m[1],o){case"translateX":case"translateY":case"scaleX":case"scaleY":j[o]=u(m);break;case"rotate":case"skewX":case"skewY":var i=u(m);n.endsWith(m,"deg")||(i=180*i/Math.PI);j[o]=i;break;case"translate":case"translate3d":m=m.split(",");j.translateX=u(m[0]);j.translateY=u(m[1]||0);break;case"scale":m=m.split(",");j.scaleX=u(m[0]);j.scaleY=u(m[1]||m[0]);break;case"matrix":return b=m,b=q(b),l=v=h=void 0,o=b[0],j=b[1],m=b[2],i=b[3],o*i-j*m?(h=Math.sqrt(o*o+j*j),l=(o*m+j*i)/(o*i-m*j),v=(o*i-j*m)/h,o*i<j*m&&(l=-l,h=-h)):h=v=l=0,{translateX:u(b[4]),translateY:u(b[5]),rotate:u(180*Math.atan2(j,o)/Math.PI),skewX:u(180*Math.atan(l)/Math.PI),skewY:0,scaleX:u(h),scaleY:u(v)}}}return j}function k(){k.superclass.constructor.apply(this,arguments)}var s=r("dom"),d=r("./fx"),e=n.Features.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";n.extend(k,d,{load:function(){k.superclass.load.apply(this,arguments);this.from=(this.from=s.style(this.anim.node,"transform")||this.from)&&"none"!==this.from?t(this.from):p();this.to=this.to?t(this.to):p()},interpolate:function(g,f,j){var h=k.superclass.interpolate,i={};i.translateX=h(g.translateX,f.translateX,j);i.translateY=h(g.translateY,f.translateY,j);i.rotate=h(g.rotate,f.rotate,j);i.skewX=h(g.skewX,f.skewX,j);i.skewY=h(g.skewY,f.skewY,j);i.scaleX=h(g.scaleX,f.scaleX,j);i.scaleY=h(g.scaleY,f.scaleY,j);return n.substitute(e+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",i)}});return d.Factories.transform=k});KISSY.add("anim/timer","dom,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(","),function(n,r){function q(){var b;q.superclass.constructor.apply(this,arguments);n.each(b=this.to,function(f,h){var g=e(h);if(h!==g){b[g]=b[h];delete b[h]}})}var p=r("dom"),u=r("./base"),t=r("./timer/easing"),k=r("./timer/manager"),s=r("./timer/fx"),d=r("./timer/short-hand");r("./timer/color");r("./timer/transform");var e=p._camelCase,v=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;n.extend(q,u,{prepareFx:function(){var A=this.node,x=this._propsData;n.each(x,function(b){b.duration=b.duration*1000;b.delay=b.delay*1000;if(typeof b.easing==="string"){b.easing=t.toFn(b.easing)}});n.each(d,function(b,m){var l,h=x[m],g;if(h){g=h.value;l={};n.each(b,function(E){l[E]=p.css(A,E)});p.css(A,m,g);n.each(l,function(E,F){F in x||(x[F]=n.merge(h,{value:p.css(A,F)}));p.css(A,F,E)});delete x[m]}});var y,z,w,o,j,i,c,B=0,f;n.isPlainObject(A)&&(B=1);for(y in x){z=x[y];w=z.value;i={isCustomFx:B,prop:y,anim:this,fxType:z.fxType,type:z.type,propData:z};c=s.getFx(i);o=w;j=c.cur();w=w+"";f="";if(w=w.match(v)){o=parseFloat(w[2]);if((f=w[3])&&f!=="px"&&j){var D=0,C=o;do{++C;p.css(A,y,C+f);D=c.cur()}while(D===0);j=C/D*j;p.css(A,y,j+f)}w[1]&&(o=(w[1]==="-="?-1:1)*o+j)}i.from=j;i.to=o;i.unit=f;c.load(i);z.fx=c}},frame:function(){var g,f=1,i,h=this._propsData;for(g in h){i=h[g];i=i.fx;i.frame();if(this.isRejected()||this.isResolved()){return}f=f&i.pos===1}h=n.now();g=this.config.duration*1000;h=Math.max(0,this.startTime+g-h);this.defer.notify([this,1-(h/g||0),h]);f&&this.stop(f)},doStop:function(g){var f,h=this._propsData;k.stop(this);if(g){for(f in h){g=h[f];(g=g.fx)&&g.frame(1)}}},doStart:function(){k.start(this)}});q.Easing=t;q.Fx=s;return q});KISSY.add("anim/transition",["dom","event/dom","./base"],function(y,x){function d(h){var g="";y.each(h,function(j,i){g&&(g+=",");g+=i+" "+j.duration+"s "+j.easing+" "+j.delay+"s"});return g}function u(){u.superclass.constructor.apply(this,arguments)}var w=x("dom"),s=x("event/dom"),c=x("./base"),t=y.Features,f=t.getTransitionPrefix(),b=/([A-Z]|^ms)/g,e=f?f.toLowerCase()+"TransitionEnd":"transitionend",v=t.getTransitionProperty();y.extend(u,c,{doStart:function(){var n=this,g=n.node,m=g.style,i=n._propsData,k=m[v],l,j={};if(l=i.transform){delete i.transform,i[t.getTransformProperty().replace(b,"-$1").toLowerCase()]=l}y.each(i,function(h,p){var q=h.value,o=w.css(g,p);"number"===typeof q&&(o=parseFloat(o));o===q&&setTimeout(function(){n._onTransitionEnd({originalEvent:{propertyName:p}})},0);j[p]=q});-1!==k.indexOf("none")?k="":k&&(k+=",");m[v]=k+d(i);s.on(g,e,n._onTransitionEnd,n);w.css(g,j)},beforeResume:function(){var i=this._propsData,g=y.merge(i),h=this._runTime/1000;y.each(g,function(k,j){var l=h;k.delay>=l?k.delay-=l:(l-=k.delay,k.delay=0,k.duration>=l?k.duration-=l:delete i[j])})},_onTransitionEnd:function(i){var i=i.originalEvent,g=1,h=this._propsData;h[i.propertyName]&&(h[i.propertyName].pos=1,y.each(h,function(j){if(1!==j.pos){return g=0,!1}}),g&&this.stop(!0))},doStop:function(l){var g=this.node,k=g.style,h=this._propsData,i=[],j={};s.detach(g,e,this._onTransitionEnd,this);y.each(h,function(m,n){l||(j[n]=w.css(g,n));i.push(n)});h=y.trim(k[v].replace(RegExp("(^|,)\\s*(?:"+i.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none";k[v]=h;w.css(g,j)}});return u});KISSY.add("base",["attribute"],function(y,c){function x(e,h){return function(i){return function(){h?i.apply(this,arguments):this.callSuper.apply(this,arguments);var o=arguments.callee.__owner__.__extensions__||[];h&&o.reverse();var l=arguments,n;if(n=o&&o.length){for(var k=0;k<n;k++){var j=o[k]&&(!e?o[k]:o[k].prototype[e]);j&&j.apply(this,l||[])}}h?this.callSuper.apply(this,arguments):i.apply(this,arguments)}}}function g(e){var h=this.__hooks__,i=this.prototype;if(this.__extensions__.length&&h){for(var j in h){if(!i.hasOwnProperty(j)||e.hasOwnProperty(j)){e[j]=e[j]||f}}}return b.call(this,e)}function B(e){var h;e.target===this&&(h=this[w+e.type.slice(5).slice(0,-6)],h.call(this,e.newVal,e))}function A(e){var h=e.get("plugins"),i;y.each(h,function(j,k){"function"===typeof j&&(i=j,h[k]=new i)})}function v(e){var h,i=this.get("plugins");if(h=i.length){for(var j=0;j<h;j++){if(i[j][e]){i[j][e](this)}}}}var d=c("attribute"),u=y.ucfirst,w="_onSet",f=y.noop,m=d.extend({constructor:function(){this.callSuper.apply(this,arguments);var e=this.get("listeners"),h;for(h in e){this.on(h,e[h])}this.initializer();A(this);v.call(this,"pluginInitializer");this.bindInternal();this.syncInternal()},initializer:f,__getHook:x,__callPluginsMethod:v,bindInternal:function(){var e=this.getAttrs(),h,i;for(h in e){if(i=w+u(h),this[i]){this.on("after"+u(h)+"Change",B)}}},syncInternal:function(){var h=[],i;i=this.constructor;for(var n=this.getAttrs();i;){h.push(i),i=i.superclass&&i.superclass.constructor}h.reverse();for(i=0;i<h.length;i++){var o=h[i].ATTRS||{},k;for(k in o){if(k in n){var l,j;(j=this[w+u(k)])&&0!==n[k].sync&&void 0!==(l=this.get(k))&&j.call(this,l)}}}},plug:function(e){"function"===typeof e&&(e=new e);e.pluginInitializer&&e.pluginInitializer(this);this.get("plugins").push(e);return this},unplug:function(e){var h=[],i=this,j="string"===typeof e;y.each(i.get("plugins"),function(l){var n=0,k;e&&(j?(k=l.get&&l.get("pluginId")||l.pluginId,k!==e&&(h.push(l),n=1)):l!==e&&(h.push(l),n=1));n||l.pluginDestructor(i)});i.setInternal("plugins",h);return i},getPlugin:function(e){var h=null;y.each(this.get("plugins"),function(i){if((i.get&&i.get("pluginId")||i.pluginId)===e){return h=i,!1}});return h},destructor:y.noop,destroy:function(){this.get("destroyed")||(v.call(this,"pluginDestructor"),this.destructor(),this.set("destroyed",!0),this.fire("destroy"),this.detach())}});y.mix(m,{__hooks__:{initializer:x(),destructor:x("__destructor",!0)},ATTRS:{plugins:{value:[]},destroyed:{value:!1},listeners:{value:[]}},extend:function z(k,l,j){y.isArray(k)||(j=l,l=k,k=[]);j=j||{};l=l||{};l=d.extend.call(this,l,j);l.__extensions__=k;g.call(l,{});if(k.length){var e={},i={};y.each(k.concat(l),function(h){if(h){y.each(h.ATTRS,function(o,q){var p=e[q]=e[q]||{};y.mix(p,o)});var h=h.prototype,n;for(n in h){h.hasOwnProperty(n)&&(i[n]=h[n])}}});l.ATTRS=e;i.constructor=l;y.augment(l,i)}l.extend=j.extend||z;l.addMembers=g;return l}});var b=m.addMembers;return y.Base=m});KISSY.add("attribute",["event/custom"],function(Q,L,h,G){function N(j,g){return"string"===typeof g?j[g]:g}function M(g){return g.__attrVals||(g.__attrVals={})}function J(q,j,r,g,p,o,n,k){n=n||r;return q.fire(j+Q.ucfirst(r)+"Change",Q.mix({attrName:n,subAttrName:o,prevVal:g,newVal:p},k))}function O(k,j,n){var g=k[j];!n&&!g&&(k[j]=g={});return g||{}}function m(k,j){for(var n=0,g=j.length;void 0!==k&&n<g;n++){k=k[j[n]]}return k}function i(j){var g;-1!==j.indexOf(".")&&(g=j.split("."),j=g.shift());return{path:g,name:j}}function f(o,j,p){var g=p;if(j){var o=g=void 0===o?{}:Q.clone(o),n=j.length-1;if(0<=n){for(var k=0;k<n;k++){o=o[j[k]]}void 0!==o&&(o[j[k]]=p)}}return g}function e(r,u,s,t,q){var p,o,n;p=i(u);var g=u,u=p.name;p=p.path;n=r.get(u);var k=u,j=O(r,"__defaultBeforeFns");j[k]||(j[k]=1,k="before"+Q.ucfirst(k)+"Change",r.publish(k,{defaultFn:d}));p&&(o=m(n,p));if(t.force||!(!p&&n===s||p&&o===s)){s=f(n,p,s);s=Q.mix({attrName:u,subAttrName:g,prevVal:n,newVal:s,_opts:t,_attrs:q,target:r},t.data);if(t.silent){if(P===d.call(r,s)){return P}}else{if(P===r.fire("before"+Q.ucfirst(u)+"Change",s)){return P}}return r}}function d(o){if(o.target===this){var j=o.newVal,p=o.prevVal,g=o.attrName,n=o.subAttrName,k=o._attrs,o=o._opts,j=this.setInternal(g,j);if(j===P){return j}o.silent||(j=M(this)[g],J(this,"after",g,p,j,n,null,o.data),k?k.push({prevVal:p,newVal:j,attrName:g,subAttrName:n}):J(this,"","*",[p],[j],[n],[g],o.data))}}function H(n){var j=this.constructor;for(this.userConfig=n;j;){var o=j.ATTRS;if(o){var g=void 0;for(g in o){this.addAttr(g,o[g],!1)}}j=j.superclass?j.superclass.constructor:null}if(n){for(var k in n){this.setInternal(k,n[k])}}}function c(k,j){var n=j.__hooks__||{},g;for(g in n){g in k&&(k[g]=n[g](k[g]))}Q.each(k,function(o,s){if("function"===typeof o){var r=0;if(o.__owner__){var q=o.__owner__;delete o.__owner__;delete o.__name__;var r=o.__wrapped__=1,p=b(o);p.__owner__=q;p.__name__=s;q.prototype[s]=p}else{o.__wrapped__&&(r=1)}r&&(k[s]=o=b(o));o.__owner__=j;o.__name__=s}})}function l(g){c(g,this);Q.mix(this.prototype,g)}function D(n,j){var o=n.getAttrs(),g=O(o,j,1),k=g.valueFn;if(k&&(k=N(n,k))){k=k.call(n),void 0!==k&&(g.value=k),delete g.valueFn,o[j]=g}return g.value}function K(o,j,p,g){var n,k;n=i(j);j=n.name;if(n=n.path){k=o.get(j),p=f(k,n,p)}if((n=O(o.getAttrs(),j).validator)&&(n=N(o,n))){if(o=n.call(o,p,j,g),void 0!==o&&!0!==o){return o}}}L=L("event/custom");G.exports=H;var b=Q.bind,I={},P=!1;H.extend=function R(o,g){var n,g=g||{},o=o||{},k=g.__hooks__;if(n=this.__hooks__){k=g.__hooks__=g.__hooks__||{},Q.mix(k,n,!1)}n=o.hasOwnProperty("constructor")?o.constructor:function(){this.callSuper.apply(this,arguments)};o.constructor=n;n.__hooks__=k;c(o,n);var j=g.inheritedStatics;if(k=this.inheritedStatics){j=g.inheritedStatics=g.inheritedStatics||{},Q.mix(j,k,!1)}Q.extend(n,this,o,g);j&&Q.mix(n,j);n.extend=g.extend||R;n.addMembers=l;return n};Q.augment(H,L.Target,{INVALID:I,callSuper:function(){var j,n,g=arguments;"function"===typeof this&&this.__name__?(j=this,n=g[0],g=Array.prototype.slice.call(g,1)):(j=arguments.callee.caller,j.__wrapped__&&(j=j.caller),n=this);var k=j.__name__;if(k){return j=j.__owner__.superclass[k],!j?void 0:j.apply(n,g||[])}},getAttrs:function(){return this.__attrs||(this.__attrs={})},getAttrVals:function(){var j={},k,g=this.getAttrs();for(k in g){j[k]=this.get(k)}return j},addAttr:function(j,o,g){var n=this.getAttrs(),k,o=Q.clone(o);(k=n[j])?Q.mix(k,o,g):n[j]=o;return this},addAttrs:function(j,k){var g=this;Q.each(j,function(n,o){g.addAttr(o,n)});k&&g.set(k);return g},hasAttr:function(g){return this.getAttrs().hasOwnProperty(g)},removeAttr:function(j){var k=M(this),g=this.getAttrs();this.hasAttr(j)&&(delete g[j],delete k[j]);return this},set:function(u,s,t){var r;if(Q.isPlainObject(u)){var t=s||{},s=Object(u),q=[],p=[];for(u in s){void 0!==(r=K(this,u,s[u],s))&&p.push(r)}if(p.length){return t.error&&t.error(p),P}for(u in s){e(this,u,s[u],t,q)}var o=[],n=[],j=[],g=[];Q.each(q,function(k){n.push(k.prevVal);j.push(k.newVal);o.push(k.attrName);g.push(k.subAttrName)});o.length&&J(this,"","*",n,j,g,o,t.data);return this}t=t||{};r=K(this,u,s);return void 0!==r?(t.error&&t.error(r),P):e(this,u,s,t)},setInternal:function(j,n){var g,k=O(this.getAttrs(),j).setter;if(k&&(k=N(this,k))){g=k.call(this,n,j)}if(g===I){return P}void 0!==g&&(n=g);M(this)[j]=n},get:function(j){var o,g=M(this),n,k;-1!==j.indexOf(".")&&(o=j.split("."),j=o.shift());n=O(this.getAttrs(),j,1).getter;k=j in g?g[j]:D(this,j);if(n&&(n=N(this,n))){k=n.call(this,k,j)}!(j in g)&&void 0!==k&&(g[j]=k);o&&(k=m(k,o));return k},reset:function(j,n){if("string"===typeof j){return this.hasAttr(j)?this.set(j,D(this,j),n):this}var n=j,g=this.getAttrs(),k={};for(j in g){k[j]=D(this,j)}this.set(k,n);return this}})});KISSY.add("overlay/extension/loading",["node"],function(b,f){function i(){}var d=f("node");i.prototype={loading:function(){this._loadingExtEl||(this._loadingExtEl=(new d('<div class="'+this.get("prefixCls")+'ext-loading" style="position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);"/>')).appendTo(this.$el));this._loadingExtEl.show()},unloading:function(){var c=this._loadingExtEl;c&&c.hide()}};return i});KISSY.add("overlay/extension/mask",["node"],function(s,v){function x(d,c){var e=d.view.getBaseCssClasses("mask"),e=n('<div  style="width:'+(u?"expression(KISSY.DOM.docWidth())":"100%")+";left:0;top:0;height:"+(u?"expression(KISSY.DOM.docHeight())":"100%")+";position:"+(u?"absolute":"fixed")+';" class="'+e+" "+c+'">'+(u?'<iframe style="position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");e.unselectable();e.on("mousedown",function(b){b.preventDefault()});return e}function t(){}function y(e,f){var c=e.get("maskNode"),g=e.view.getBaseCssClasses("mask-hidden");f?c.removeClass(g):c.addClass(g)}function z(b,g,l,m){var h=b.effect||p;y(m,l);if(h!==p){var m=b.duration,b=b.easing,j=l?1:0;g.stop(1,1);g.css("display",l?p:"block");g[h+q[h][j]](m,function(){g.css("display","")},b)}}function r(e){var f=this.get("maskNode");if(e=e.newVal){var c=Number(this.$el.css("z-index"));isNaN(c)||f.css("z-index",c)}z(this.get("mask"),f,e,this)}var w=s.UA,k=v("node"),u=6===w.ie,n=k.all;t.ATTRS={mask:{value:!1},maskNode:{}};var p="none",q={fade:["Out","In"],slide:["Up","Down"]};t.prototype={__renderUI:function(){this.get("mask")&&this.set("maskNode",x(this,this.get("visible")?"":this.view.getBaseCssClasses("mask-hidden")))},__bindUI:function(){var b,c;if(c=this.get("mask")){b=this.get("maskNode");if(c.closeOnClick){b.on(k.Gesture.tap,this.close,this)}this.on("afterVisibleChange",r)}},__destructor:function(){var b;(b=this.get("maskNode"))&&b.remove()}};return t});KISSY.add("overlay/close-xtpl",[],function(){return function(l){var p,r=this;p=this.config.utils;var m=p.runBlockCommand,s=p.renderOutput,t=p.getProperty,k=p.runInlineCommand,q=p.getPropertyOrRunCommand;p="";var j={},n=[],t=t(r,l,"closable",0,1);n.push(t);j.params=n;j.fn=function(b){var d;d='\n<a href="javascript:void(\'close\')"\n   id="ks-overlay-close-';var h=q(r,b,{},"id",0,3);d+=s(h,!0);d+='"\n   class="';var h={},c=[];c.push("close");h.params=c;h=k(r,b,h,"getBaseCssClasses",4);d+=s(h,!0);d+="\"\n   role='button'>\n    <span class=\"";h={};c=[];c.push("close-x");h.params=c;b=k(r,b,h,"getBaseCssClasses",6);d+=s(b,!0);return d+'">close</span>\n</a>\n'};p+=m(r,l,j,"if",1);return p+"\n"}});KISSY.add("overlay/overlay-xtpl",["overlay/close-xtpl","component/extension/content-xtpl"],function(b,f,i,d){return function(g){var h,j;h=this.config.utils;"undefined"!==typeof d&&d.kissy&&(j=d);var l=h.renderOutput,n=h.runInlineCommand;h="";var k={},e=[];e.push("overlay/close-xtpl");k.params=e;j&&(f("overlay/close-xtpl"),k.params[0]=j.resolveByName(k.params[0]));k=n(this,g,k,"include",1);h+=l(k,!1);h+="\n";k={};e=[];e.push("component/extension/content-xtpl");k.params=e;j&&(f("component/extension/content-xtpl"),k.params[0]=j.resolveByName(k.params[0]));g=n(this,g,k,"include",2);return h+=l(g,!1)}});KISSY.add("overlay/overlay-render",["component/container","./overlay-xtpl","component/extension/content-render"],function(f,j){var k=j("component/container"),i=j("./overlay-xtpl"),d=j("component/extension/content-render");return k.getDefaultRender().extend([d],{createDom:function(){this.fillChildrenElsBySelectors({closeBtn:"#ks-overlay-close-{id}"})}},{ATTRS:{contentTpl:{value:i}},HTML_PARSER:{closeBtn:function(b){return b.one("."+this.getBaseCssClass("close"))}}})});KISSY.add("overlay/extension/overlay-effect",[],function(i){function k(b){var c=b.$el.clone(!0);c.css({visibility:"visible",overflow:"hidden"}).addClass(b.get("prefixCls")+"overlay-ghost");return b.__afterCreateEffectGhost(c)}function l(t,q,s){t.__effectGhost&&t.__effectGhost.stop(1,1);var p=t.$el,r=i.all,o=t.get("effect"),m=r(o.target),r=o.duration,m=i.mix(m.offset(),{width:m.width(),height:m.height()}),h=i.mix(p.offset(),{width:p.width(),height:p.height()}),e=k(t),o=o.easing;e.insertAfter(p);q?(q=m,m=h):q=h;p.css("visibility","hidden");e.css(q);t.__effectGhost=e;e.animate(m,{duration:r,easing:o,complete:function(){t.__effectGhost=null;e.remove();p.css("visibility","");s()}})}function j(c,r,q){var p=c.$el,o=c.get("effect"),n=o.effect||"none",m=o.target;"none"===n&&!m?q():m?l(c,r,q):(c=o.duration,o=o.easing,m=r?1:0,p.stop(1,1),p.css({visibility:"visible",display:r?"none":"block"}),p[n+f[n][m]](c,function(){p.css({display:"block",visibility:""});q()},o))}function d(){}var f={fade:["Out","In"],slide:["Up","Down"]};d.ATTRS={effect:{value:{effect:"",target:null,duration:0.5,easing:"easeOut"},setter:function(c){var e=c.effect;"string"===typeof e&&!f[e]&&(c.effect="")}}};d.prototype={__afterCreateEffectGhost:function(b){return b},_onSetVisible:function(e){var c=this;j(c,e,function(){c.fire(e?"show":"hide")})}};return d});KISSY.add("overlay/control","component/container,component/extension/shim,component/extension/align,./extension/loading,./extension/mask,./overlay-render,./extension/overlay-effect".split(","),function(l,p){var r=p("component/container"),m=p("component/extension/shim"),s=p("component/extension/align"),t=p("./extension/loading"),k=p("./extension/mask"),q=p("./overlay-render"),j=p("./extension/overlay-effect"),n={hide:"hide",destroy:"destroy"};return r.extend([m,t,s,k,j],{bindUI:function(){var d=this,c=d.get("closeBtn");if(c){c.on("click",function(e){d.close();e.preventDefault()})}},close:function(){this[n[this.get("closeAction")]||"hide"]();return this}},{ATTRS:{contentEl:{},closable:{value:false,view:1},closeBtn:{view:1},closeAction:{value:"hide"},focusable:{value:false},allowTextSelection:{value:true},handleMouseEvents:{value:false},visible:{value:false},xrender:{value:q}},xclass:"overlay"})});KISSY.add("overlay/dialog-xtpl",["overlay/close-xtpl"],function(b,f,i,d){return function(v){var w,u=this,t;w=this.config.utils;"undefined"!==typeof d&&d.kissy&&(t=d);var r=w.runBlockCommand,s=w.renderOutput,g=w.getProperty,o=w.runInlineCommand,q=w.getPropertyOrRunCommand;w="";var p={},e=[];e.push("overlay/close-xtpl");p.params=e;t&&(f("overlay/close-xtpl"),p.params[0]=t.resolveByName(p.params[0]));t=o(u,v,p,"include",1);w+=s(t,!1);w+='\n<div id="ks-content-';t=q(u,v,{},"id",0,2);w+=s(t,!0);w+='"\n     class="';t={};p=[];p.push("content");t.params=p;t=o(u,v,t,"getBaseCssClasses",3);w+=s(t,!0);w+='">\n    <div class="';t={};p=[];p.push("header");t.params=p;t=o(u,v,t,"getBaseCssClasses",4);w+=s(t,!0);w+='"\n         style="\n';t={};p=[];e=g(u,v,"headerStyle",0,6);p.push(e);t.params=p;t.fn=function(h){var c;c=" \n ";var j=q(u,h,{},"xindex",0,7);c=c+s(j,true);c=c+":";h=q(u,h,{},".",0,7);c=c+s(h,true);return c+";\n"};w+=r(u,v,t,"each",6);w+='\n"\n         id="ks-stdmod-header-';t=q(u,v,{},"id",0,10);w+=s(t,!0);w+='">';t=q(u,v,{},"headerContent",0,10);w+=s(t,!1);w+='</div>\n\n    <div class="';t={};p=[];p.push("body");t.params=p;t=o(u,v,t,"getBaseCssClasses",12);w+=s(t,!0);w+='"\n         style="\n';t={};p=[];e=g(u,v,"bodyStyle",0,14);p.push(e);t.params=p;t.fn=function(h){var c;c=" \n ";var j=q(u,h,{},"xindex",0,15);c=c+s(j,true);c=c+":";h=q(u,h,{},".",0,15);c=c+s(h,true);return c+";\n"};w+=r(u,v,t,"each",14);w+='\n"\n         id="ks-stdmod-body-';t=q(u,v,{},"id",0,18);w+=s(t,!0);w+='">';t=q(u,v,{},"bodyContent",0,18);w+=s(t,!1);w+='</div>\n\n    <div class="';t={};p=[];p.push("footer");t.params=p;o=o(u,v,t,"getBaseCssClasses",20);w+=s(o,!0);w+='"\n         style="\n';o={};t=[];g=g(u,v,"footerStyle",0,22);t.push(g);o.params=t;o.fn=function(h){var c;c=" \n ";var j=q(u,h,{},"xindex",0,23);c=c+s(j,true);c=c+":";h=q(u,h,{},".",0,23);c=c+s(h,true);return c+";\n"};w+=r(u,v,o,"each",22);w+='\n"\n         id="ks-stdmod-footer-';r=q(u,v,{},"id",0,26);w+=s(r,!0);w+='">';v=q(u,v,{},"footerContent",0,26);w+=s(v,!1);return w+'</div>\n</div>\n<div tabindex="0"></div>'}});KISSY.add("overlay/dialog-render",["./overlay-render","./dialog-xtpl"],function(b,f){var i=f("./overlay-render"),d=f("./dialog-xtpl");return i.extend({beforeCreateDom:function(c){b.mix(c.elAttrs,{role:"dialog","aria-labelledby":"ks-stdmod-header-"+this.control.get("id")})},createDom:function(){this.fillChildrenElsBySelectors({header:"#ks-stdmod-header-{id}",body:"#ks-stdmod-body-{id}",footer:"#ks-stdmod-footer-{id}"})},getChildrenContainerEl:function(){return this.control.get("body")},_onSetBodyStyle:function(c){this.control.get("body").css(c)},_onSetHeaderStyle:function(c){this.control.get("header").css(c)},_onSetFooterStyle:function(c){this.control.get("footer").css(c)},_onSetBodyContent:function(c){var e;e=this.control.get("body");e.html(c)},_onSetHeaderContent:function(c){var e;e=this.control.get("header");e.html(c)},_onSetFooterContent:function(c){var e;e=this.control.get("footer");e.html(c)}},{ATTRS:{contentTpl:{value:d}},HTML_PARSER:{header:function(c){return c.one("."+this.getBaseCssClass("header"))},body:function(c){return c.one("."+this.getBaseCssClass("body"))},footer:function(c){return c.one("."+this.getBaseCssClass("footer"))},headerContent:function(c){return c.one("."+this.getBaseCssClass("header")).html()},bodyContent:function(c){return c.one("."+this.getBaseCssClass("body")).html()},footerContent:function(c){return(c=c.one("."+this.getBaseCssClass("footer")))&&c.html()}}})});KISSY.add("overlay/dialog",["./control","./dialog-render","node"],function(i,k){var l=k("./control"),j=k("./dialog-render"),d=k("node"),l=l.extend({__afterCreateEffectGhost:function(e){var c=this.get("body");e.all("."+this.get("prefixCls")+"stdmod-body").css({height:c.height(),width:c.width()}).html("");return e},handleKeyDownInternal:function(m){if(this.get("escapeToClose")&&m.keyCode===d.KeyCode.ESC){if("select"!==m.target.nodeName.toLowerCase()||m.target.disabled){this.close(),m.halt()}}else{f:if(m.keyCode===f){var h=this.$el,g=d.all(m.target),b=h.last();if(g.equals(h)&&m.shiftKey){b[0].focus(),m.halt()}else{if(g.equals(b)&&!m.shiftKey){this.focus(),m.halt()}else{if(g.equals(h)||h.contains(g)){break f}}}m.halt()}}},_onSetVisible:function(g,e){var m=this.el;if(g){this.__lastActive=m.ownerDocument.activeElement,this.focus(),m.setAttribute("aria-hidden","false")}else{m.setAttribute("aria-hidden","true");try{this.__lastActive&&this.__lastActive.focus()}catch(h){}}this.callSuper(g,e)}},{ATTRS:{header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{value:{},view:1},footerStyle:{value:{},view:1},headerStyle:{value:{},view:1},headerContent:{value:"",view:1},bodyContent:{value:"",view:1},footerContent:{value:"",view:1},closable:{value:!0},xrender:{value:j},focusable:{value:!0},escapeToClose:{value:!0}},xclass:"dialog"}),f=d.KeyCode.TAB;return l});KISSY.add("overlay/popup",["./control"],function(b,c){return c("./control").extend({initializer:function(){var d=this;d.get("trigger")&&("mouse"===d.get("triggerType")?(d._bindTriggerMouse(),d.on("afterRenderUI",function(){d._bindContainerMouse()})):d._bindTriggerClick())},_bindTriggerMouse:function(){var g=this,f=g.get("trigger"),d;g.__mouseEnterPopup=function(e){g._clearHiddenTimer();d=b.later(function(){g._showing(e);d=void 0},1000*g.get("mouseDelay"))};f.on("mouseenter",g.__mouseEnterPopup);g._mouseLeavePopup=function(){d&&(d.cancel(),d=void 0);g._setHiddenTimer()};f.on("mouseleave",g._mouseLeavePopup)},_bindContainerMouse:function(){this.$el.on("mouseleave",this._setHiddenTimer,this).on("mouseenter",this._clearHiddenTimer,this)},_setHiddenTimer:function(){var d=this;d._hiddenTimer=b.later(function(){d._hiding()},1000*d.get("mouseDelay"))},_clearHiddenTimer:function(){this._hiddenTimer&&(this._hiddenTimer.cancel(),this._hiddenTimer=void 0)},_bindTriggerClick:function(){var d=this;d.__clickPopup=function(f){f.preventDefault();if(d.get("toggle")){d[d.get("visible")?"_hiding":"_showing"](f)}else{d._showing(f)}};d.get("trigger").on("click",d.__clickPopup)},_showing:function(d){this.set("currentTrigger",b.one(d.target));this.show()},_hiding:function(){this.set("currentTrigger",void 0);this.hide()},destructor:function(){var f=this.$el,d=this.get("trigger");d&&(this.__clickPopup&&d.detach("click",this.__clickPopup),this.__mouseEnterPopup&&d.detach("mouseenter",this.__mouseEnterPopup),this._mouseLeavePopup&&d.detach("mouseleave",this._mouseLeavePopup));f.detach("mouseleave",this._setHiddenTimer,this).detach("mouseenter",this._clearHiddenTimer,this)}},{ATTRS:{trigger:{setter:function(d){return b.all(d)}},triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:0.1},toggle:{value:!1}},xclass:"popup"})});KISSY.add("overlay",["overlay/control","overlay/dialog","overlay/popup"],function(f,j){var k=j("overlay/control"),i=j("overlay/dialog"),d=j("overlay/popup");k.Dialog=i;f.Dialog=i;k.Popup=d;return f.Overlay=k});KISSY.add("component/container/render",["component/control","component/manager"],function(c,h){var e=h("component/control"),b=h("component/manager");return e.getDefaultRender().extend([],{decorateDom:function(){var m=this,k=m.getChildrenContainerEl(),i=m.control,g=i.get("defaultChildCfg"),n=g.prefixCls,l=g.xclass,j=[];k.children().each(function(d){var o=m.getComponentConstructorByNode(n,d)||l&&b.getConstructorByXClass(l);o&&j.push(new o(c.merge(g,{srcNode:d})))});i.set("children",j)},getChildrenContainerEl:function(){return this.$el}},{name:"ContainerRender"})});KISSY.add("component/container",["component/control","./container/render"],function(h,m){function l(f){if(f.target===this){var d=f.component,g=this.get("children"),f=f.index;g.splice(f,0,d);g=this.get("children");d=g[f];d.setInternal("parent",this);this.get("rendered")&&this.renderChild(f);this.fire("afterAddChild",{component:d,index:f})}}function e(g){if(g.target===this){var f=g.component,n,j,i=g.destroy,k=this.get("children"),g=g.index;-1!==g&&k.splice(g,1);f.setInternal("parent",null);if(i){f.destroy&&f.destroy()}else{if(f.get&&(j=f.el)){(n=j.parentNode)&&n.removeChild(j)}}this.fire("afterRemoveChild",{component:f,index:g})}}var c=m("component/control"),b=m("./container/render");return c.extend({isContainer:!0,initializer:function(){var f=this.get("prefixCls"),d=this.get("defaultChildCfg");this.publish("beforeAddChild",{defaultFn:l});this.publish("beforeRemoveChild",{defaultFn:e});d.prefixCls=d.prefixCls||f},createDom:function(){this.createChildren()},renderUI:function(){this.renderChildren()},renderChildren:function(){var f,d=this.get("children");for(f=0;f<d.length;f++){this.renderChild(f)}},createChildren:function(){var f,d=this.get("children");for(f=0;f<d.length;f++){this.createChild(f)}},addChild:function(f,d){var g=this.get("children");void 0===d&&(d=g.length);this.fire("beforeAddChild",{component:f,index:d})},renderChild:function(f){var d=this.get("children");this.createChild(f).render();this.fire("afterRenderChild",{component:d[f],index:f})},createChild:function(g){var f,k,i,j;f=this.get("children")[g];j=this.view.getChildrenContainerEl();i=j[0];k=i.children[g]||null;f.get("rendered")?(j=f.el,j.parentNode!==i&&i.insertBefore(j,k)):(k?f.set("elBefore",k):f.set("render",j),f.create());this.fire("afterCreateChild",{component:f,index:g});return f},removeChild:function(f,d){void 0===d&&(d=!0);this.fire("beforeRemoveChild",{component:f,index:h.indexOf(f,this.get("children")),destroy:d})},removeChildren:function(f){var d,g=[].concat(this.get("children"));for(d=0;d<g.length;d++){this.removeChild(g[d],f)}return this},getChildAt:function(d){return this.get("children")[d]||null},destructor:function(){var f,d=this.get("children");for(f=0;f<d.length;f++){d[f].destroy&&d[f].destroy()}}},{ATTRS:{children:{value:[],getter:function(g){var f=null,j,i;for(j=0;j<g.length;j++){i=g[j],i.isControl||(f=f||this.get("defaultChildCfg"),h.mix(i,f,!1),g[j]=this.createComponent(i))}return g},setter:function(f){var d,g;for(d=0;d<f.length;d++){g=f[d],g.isControl&&g.setInternal("parent",this)}}},defaultChildCfg:{value:{}},xrender:{value:b}},name:"container"})});KISSY.add("component/control/process",["base","promise"],function(o,f){function n(c){c.fire("beforeSyncUI");c.syncUI();c.__callPluginsMethod("pluginSyncUI");c.fire("afterSyncUI")}var e=f("base"),i=f("promise").Defer,p=e.prototype.__getHook,q=o.noop,l=e.extend({bindInternal:q,syncInternal:q,initializer:function(){this._renderedDefer=new i},renderUI:q,syncUI:q,bindUI:q,onRendered:function(c){return this._renderedDefer.promise.then(c)},create:function(){this.get("created")||(this.fire("beforeCreateDom"),this.createInternal(),this.__callPluginsMethod("pluginCreateDom"),this.fire("afterCreateDom"),this.setInternal("created",!0));return this},createInternal:function(){this.createDom()},render:function(){this.get("rendered")||(this.create(),this.fire("beforeRenderUI"),this.renderUI(),this.__callPluginsMethod("pluginRenderUI"),this.fire("afterRenderUI"),this.fire("beforeBindUI"),l.superclass.bindInternal.call(this),this.bindUI(),this.__callPluginsMethod("pluginBindUI"),this.fire("afterBindUI"),l.superclass.syncInternal.call(this),n(this),this.setInternal("rendered",!0));return this},sync:function(){n(this)},plug:function(d){var g=this.get("plugins");this.callSuper(d);d=g[g.length-1];this.get("rendered")?(d.pluginCreateDom&&d.pluginCreateDom(this),d.pluginRenderUI&&d.pluginCreateDom(this),d.pluginBindUI&&d.pluginBindUI(this),d.pluginSyncUI&&d.pluginSyncUI(this)):this.get("created")&&d.pluginCreateDom&&d.pluginCreateDom(this);return this}},{__hooks__:{createDom:p("__createDom"),renderUI:p("__renderUI"),bindUI:p("__bindUI"),syncUI:p("__syncUI")},name:"ComponentProcess",ATTRS:{rendered:{value:!1,setter:function(c){c&&this._renderedDefer.resolve(this)}},created:{value:!1}}});return l});KISSY.add("component/control/render-xtpl",[],function(){return function(r){var u,q=this;u=this.config.utils;var e=u.runBlockCommand,n=u.renderOutput,s=u.getProperty,t=u.runInlineCommand,o=u.getPropertyOrRunCommand;u='<div id="';var p=o(q,r,{},"id",0,1);u+=n(p,!0);u+='"\n class="';var p={},f=[];f.push("");p.params=f;t=t(q,r,p,"getBaseCssClasses",2);u+=n(t,!0);u+="\n";t={};p=[];f=s(q,r,"elCls",0,3);p.push(f);t.params=p;t.fn=function(d){var g;g="\n ";d=o(q,d,{},".",0,4);g+=n(d,!0);return g+"  \n"};u+=e(q,r,t,"each",3);u+='\n"\n\n';t={};p=[];f=s(q,r,"elAttrs",0,8);p.push(f);t.params=p;t.fn=function(d){var h;h=" \n ";var g=o(q,d,{},"xindex",0,9);h+=n(g,!0);h+='="';d=o(q,d,{},".",0,9);h+=n(d,!0);return h+'"\n'};u+=e(q,r,t,"each",8);u+='\n\nstyle="\n';t={};p=[];s=s(q,r,"elStyle",0,13);p.push(s);t.params=p;t.fn=function(d){var h;h=" \n ";var g=o(q,d,{},"xindex",0,14);h+=n(g,!0);h+=":";d=o(q,d,{},".",0,14);h+=n(d,!0);return h+";\n"};u+=e(q,r,t,"each",13);return u+'\n">'}});KISSY.add("component/control/render",["node","xtemplate/runtime","./process","./render-xtpl","component/manager"],function(G,K){function F(b){"number"===typeof b&&(b+="px");return b}function A(b){b||(b=[""]);"string"===typeof b&&(b=b.split(/\s+/));return b}function C(k,h,d){for(var l="",j=0,i=d.length,h=k+h;j<i;j++){k=(k=d[j])?"-"+k:k,l+=" "+h+k}return l}function I(c){var b;c.target===this.control&&(b=this[H+c.type.slice(5).slice(0,-6)],b.call(this,c.newVal,c))}function J(c,b){return this.config.view.getBaseCssClasses(b.params[0])}function D(c,b){return this.config.view.getBaseCssClass(b.params[0])}var E=K("node"),B=K("xtemplate/runtime"),z=K("./process"),y=K("./render-xtpl"),L=K("component/manager"),H="_onSet",x=G.trim,v=E.all,u=G.UA,e=G.Env.host.document;return z.extend({isRender:!0,createInternal:function(){var b=this.control.get("srcNode");b?this.decorateDom(b):this.callSuper()},beforeCreateDom:function(n){var r=this.control,q,p,m,l=r.get("elAttrs"),j=r.get("elCls"),o;q=r.getAttrs();o=r.get("elStyle");var h=r.get("elCls");for(p in q){m=q[p],m.view&&(n[p]=r.get(p))}q=n.width;p=n.height;m=n.visible;n=n.zIndex;q&&(o.width=F(q));p&&(o.height=F(p));n&&(o["z-index"]=n);m||h.push(this.getBaseCssClasses("hidden"));if(o=r.get("disabled")){j.push(this.getBaseCssClasses("disabled")),l["aria-disabled"]="true"}r.get("highlighted")&&j.push(this.getBaseCssClasses("hover"));r.get("focusable")&&(9>u.ieMode&&(l.hideFocus="true"),l.tabindex=o?"-1":"0")},createDom:function(){this.beforeCreateDom(this.renderData={},this.childrenElSelectors={},this.renderCommands={getBaseCssClasses:J,getBaseCssClass:D});var c=this.control,b;b=this.renderTpl(y)+this.renderTpl(this.get("contentTpl"))+"</div>";c.setInternal("el",this.$el=v(b));this.el=this.$el[0];this.fillChildrenElsBySelectors()},decorateDom:function(h){var g=this.control;h.attr("id")||h.attr("id",g.get("id"));var k=this.constructor.HTML_PARSER,i,j;for(i in k){j=k[i],"function"===typeof j?(j=j.call(this,h),void 0!==j&&g.setInternal(i,j)):"string"===typeof j?g.setInternal(i,h.one(j)):G.isArray(j)&&j[0]&&g.setInternal(i,h.all(j[0]))}g.setInternal("el",this.$el=h);this.el=h[0]},renderUI:function(){var f=this.control,d=this.$el;if(!f.get("srcNode")){var g=f.get("render");(f=f.get("elBefore"))?d.insertBefore(f,void 0):g?d.appendTo(g,void 0):d.appendTo(e.body,void 0)}},bindUI:function(){var f=this.control,d=f.getAttrs(),m,l;for(m in d){l=d[m];var j=G.ucfirst(m),g=this[H+j];if(l.view&&g){f.on("after"+j+"Change",I,this)}}},destructor:function(){this.$el&&this.$el.remove()},$:function(b){return this.$el.all(b)},fillChildrenElsBySelectors:function(h){var g=this.$el,k=this.control,i,j,h=h||this.childrenElSelectors;for(i in h){j=h[i],"function"===typeof j?k.setInternal(i,j(g)):k.setInternal(i,this.$(G.substitute(j,this.renderData))),delete h[i]}},renderTpl:function(f,d,g){d=d||this.renderData;g=g||this.renderCommands;return(new (this.get("xtemplate"))(f,{control:this.control,view:this,commands:g})).render(d)},getComponentConstructorByNode:function(d,h){var g=h[0].className;return g?(g=g.replace(RegExp("\\b"+d,"ig"),""),L.getConstructorByXClass(g)):null},getComponentCssClasses:function(){if(this.componentCssClasses){return this.componentCssClasses}for(var f=this.control.constructor,d,g=[];f&&!f.prototype.hasOwnProperty("isControl");){(d=f.xclass)&&g.push(d),f=f.superclass&&f.superclass.constructor}return this.componentCssClasses=g},getBaseCssClasses:function(i){for(var i=A(i),h=this.getComponentCssClasses(),m=0,k=this.get("control"),l="",j=h.length,k=k.get("prefixCls");m<j;m++){l+=C(k,h[m],i)}return x(l)},getBaseCssClass:function(b){return x(C(this.control.get("prefixCls"),this.getComponentCssClasses()[0],A(b)))},getKeyEventTarget:function(){return this.$el},_onSetWidth:function(b){this.$el.width(b)},_onSetHeight:function(b){this.$el.height(b)},_onSetContent:function(d){var c=this.$el;c.html(d);this.get("allowTextSelection")||c.unselectable()},_onSetVisible:function(f){var d=this.$el,g=this.getBaseCssClasses("hidden");f?d.removeClass(g):d.addClass(g)},_onSetHighlighted:function(d){var c=this.getBaseCssClasses("hover");this.$el[d?"addClass":"removeClass"](c)},_onSetDisabled:function(f){var d=this.control,g=this.getBaseCssClasses("disabled");this.$el[f?"addClass":"removeClass"](g).attr("aria-disabled",f);d.get("focusable")&&this.getKeyEventTarget().attr("tabindex",f?-1:0)},_onSetActive:function(d){var c=this.getBaseCssClasses("active");this.$el[d?"addClass":"removeClass"](c).attr("aria-pressed",!!d)},_onSetFocused:function(f){var d=this.$el,g=this.getBaseCssClasses("focused");d[f?"addClass":"removeClass"](g)},_onSetZIndex:function(b){this.$el.css("z-index",b)}},{__hooks__:{decorateDom:z.prototype.__getHook("__decorateDom"),beforeCreateDom:z.prototype.__getHook("__beforeCreateDom")},extend:function w(h,g,k){var i,j={};i=z.extend.apply(this,arguments);i.HTML_PARSER=i.HTML_PARSER||{};G.isArray(h)&&(G.each(h.concat(i),function(b){b&&G.each(b.HTML_PARSER,function(d,c){j[c]=d})}),i.HTML_PARSER=j);G.mix(i.HTML_PARSER,this.HTML_PARSER,!1);i.extend=w;return i},ATTRS:{control:{setter:function(b){this.control=b}},xtemplate:{value:B},contentTpl:{value:function(b){return b.get("content")||""}}},HTML_PARSER:{id:function(b){return(b=b[0].id)?b:void 0},content:function(b){return b.html()},disabled:function(b){return b.hasClass(this.getBaseCssClass("disabled"))}},name:"render"})});KISSY.add("component/control",["node","./control/process","component/manager","./control/render"],function(w,A){function v(){var d,c=this;do{d=c.ATTRS,c=c.superclass}while(!d||!d.xrender);return d.xrender.value}var q=A("node"),s=A("./control/process"),y=A("component/manager"),z=A("./control/render"),t=w.UA.ieMode,u=w.Features,r=q.Gesture,p=u.isTouchGestureSupported(),e=u.isTouchEventSupported(),z=s.extend({isControl:!0,createDom:function(){var f=this.get("xrender"),d=this.get("view"),g=this.get("id");d?d.set("control",this):this.set("view",this.view=d=new f({control:this}));d.create();f=d.getKeyEventTarget();this.get("allowTextSelection")||f.unselectable();y.addComponent(g,this)},renderUI:function(){this.view.render()},bindUI:function(){var b=this.view.getKeyEventTarget();if(this.get("focusable")){b.on("focus",this.handleFocus,this).on("blur",this.handleBlur,this).on("keydown",this.handleKeydown,this)}if(this.get("handleMouseEvents")){b=this.$el;if(!e){b.on("mouseenter",this.handleMouseEnter,this).on("mouseleave",this.handleMouseLeave,this).on("contextmenu",this.handleContextMenu,this)}b.on(r.start,this.handleMouseDown,this).on(r.end,this.handleMouseUp,this).on(r.tap,this.handleClick,this);if(r.cancel){b.on(r.cancel,this.handleMouseUp,this)}if(9>t){b.on("dblclick",this.handleDblClick,this)}}},sync:function(){this.fire("beforeSyncUI");this.syncUI();this.view.sync();this.__callPluginsMethod("pluginSyncUI");this.fire("afterSyncUI")},createComponent:function(d,c){return y.createComponent(d,c||this)},_onSetFocused:function(d){var c=this.view.getKeyEventTarget()[0];d?c.focus():c.ownerDocument.activeElement===c&&c.ownerDocument.body.focus()},_onSetX:function(b){this.$el.offset({left:b})},_onSetY:function(b){this.$el.offset({top:b})},_onSetVisible:function(b){this.fire(b?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this},focus:function(){this.get("focusable")&&this.set("focused",!0)},blur:function(){this.get("focusable")&&this.set("focused",!1)},move:function(d,c){this.set({x:d,y:c})},handleDblClick:function(b){this.get("disabled")||this.handleDblClickInternal(b)},handleDblClickInternal:function(b){this.handleClickInternal(b)},handleMouseEnter:function(b){this.get("disabled")||this.handleMouseEnterInternal(b)},handleMouseEnterInternal:function(b){this.set("highlighted",!!b)},handleMouseLeave:function(b){this.get("disabled")||this.handleMouseLeaveInternal(b)},handleMouseLeaveInternal:function(b){this.set("active",!1);this.set("highlighted",!b)},handleMouseDown:function(b){this.get("disabled")||this.handleMouseDownInternal(b)},handleMouseDownInternal:function(d){var c;if(1===d.which||p){this.get("activeable")&&this.set("active",!0),this.get("focusable")&&this.focus(),this.get("allowTextSelection")||(c=(c=d.target.nodeName)&&c.toLowerCase(),"input"!==c&&"textarea"!==c&&d.preventDefault())}},handleMouseUp:function(b){this.get("disabled")||this.handleMouseUpInternal(b)},handleMouseUpInternal:function(b){this.get("active")&&(1===b.which||p)&&this.set("active",!1)},handleContextMenu:function(b){this.get("disabled")||this.handleContextMenuInternal(b)},handleContextMenuInternal:function(){},handleFocus:function(){this.get("disabled")||this.handleFocusInternal()},handleFocusInternal:function(){this.focus();this.fire("focus")},handleBlur:function(){this.get("disabled")||this.handleBlurInternal()},handleBlurInternal:function(){this.blur();this.fire("blur")},handleKeydown:function(b){if(!this.get("disabled")&&this.handleKeyDownInternal(b)){return b.halt(),!0}},handleKeyDownInternal:function(b){if(b.keyCode===q.KeyCode.ENTER){return this.handleClickInternal(b)}},handleClick:function(b){this.get("disabled")||this.handleClickInternal(b)},handleClickInternal:function(){this.get("focusable")&&this.focus()},destructor:function(){y.removeComponent(this.get("id"));this.view?this.view.destroy():this.get("srcNode")&&this.get("srcNode").remove()}},{name:"control",ATTRS:{id:{view:1,valueFn:function(){return w.guid("ks-component")}},content:{view:1,value:""},width:{view:1},height:{view:1},elCls:{view:1,value:[],setter:function(b){"string"===typeof b&&(b=b.split(/\s+/));return b||[]}},elStyle:{view:1,value:{}},elAttrs:{view:1,value:{}},elBefore:{},el:{setter:function(b){this.$el=b;this.el=b[0]}},x:{},y:{},xy:{setter:function(d){var c=w.makeArray(d);c.length&&(void 0!==c[0]&&this.set("x",c[0]),void 0!==c[1]&&this.set("y",c[1]));return d},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},render:{},visible:{sync:0,value:!0,view:1},srcNode:{setter:function(b){return q.all(b)}},handleMouseEvents:{value:!0},focusable:{value:!0,view:1},allowTextSelection:{value:!1},activeable:{value:!0},focused:{view:1},active:{view:1,value:!1},highlighted:{view:1,value:!1},prefixCls:{view:1,value:w.config("component/prefixCls")||"ks-"},prefixXClass:{},parent:{setter:function(d,c){(c=this.get("parent"))&&this.removeTarget(c);d&&this.addTarget(d)}},disabled:{view:1,value:!1},xrender:{value:z},view:{setter:function(b){this.view=b}}}});z.getDefaultRender=v;z.extend=function x(d,m,h){var g=w.makeArray(arguments),k,f=g[g.length-1];if(k=f.xclass){f.name=k}g=s.extend.apply(this,g);k&&y.setConstructorByXClass(k,g);g.extend=x;g.getDefaultRender=v;return g};return z});KISSY.add("component/manager",[],function(){var b=0,f,d={},i={};return f={__instances:i,addComponent:function(e,c){i[e]=c},removeComponent:function(c){delete i[c]},getComponent:function(c){return i[c]},createComponent:function(e,c){var g,h;if(e){if(!e.isControl&&c&&(e.prefixCls||(e.prefixCls=c.get("prefixCls")),!e.xclass&&e.prefixXClass)){e.xclass=e.prefixXClass,e.xtype&&(e.xclass+="-"+e.xtype)}if(!e.isControl&&(h=e.xclass)){(g=f.getConstructorByXClass(h))||"can not find class by xclass desc : "+h,e=new g(e)}e.isControl&&c&&e.setInternal("parent",c)}return e},getConstructorByXClass:function(h){var h=h.split(/\s+/),g=-1,j,l,m,k=null;for(l=0;l<h.length;l++){if((m=d[h[l]])&&(j=m.priority)>g){g=j,k=m.constructor}}return k},setConstructorByXClass:function(e,c){d[e]={constructor:c,priority:b++}}}});KISSY.add("xtemplate/runtime/scope",[],function(c){function b(g,d){this.data=g||{};this.affix=d;this.root=this}b.prototype={isScope:1,setParent:function(d){this.parent=d;this.root=d.root},getParent:function(){return this.parent},getRoot:function(){return this.root},set:function(g,d){this.affix||(this.affix={});this.affix[g]=d},setData:function(d){this.data=d},getData:function(){return this.data},mix:function(d){this.affix||(this.affix={});c.mix(this.affix,d)},has:function(i){var g=this.data,d=this.affix;return d&&i in d?!0:"object"===typeof g&&i in g},get:function(i){var g=this.data,d=this.affix;if(d&&i in d){return d[i]}if("object"===typeof g&&i in g){return g[i]}},resolve:function(p,o){"."===p&&(p="this");var m=p.split("."),q=this,t,s,r,n,j;if("root"===m[0]){m.shift(),q=q.root}else{if(o){for(;q&&o--;){q=q.parent}}}var l=0;for(t=m.length;q;){j=1;r=q;for(s=0;s<t;s++){if(n=m[s],"this"===n){l=1}else{if(r===q){if(!q.has(n)){j=0;break}r=q.get(n)}else{if("object"!==typeof r||!(n in r)){j=0;break}r=r[n]}}}if(j){return r&&r.isScope&&(r=r.data),"function"===typeof r&&(r=r.call(this.data)),[r]}if(l){break}q=q.parent}return !1}};return b});KISSY.add("xtemplate/runtime/commands",["path","./scope"],function(d,b){var j,i=b("path"),c=b("./scope");return j={each:function(q,t){var s=t.params,r=s[0],p=s[2]||"xindex",s=s[1],o="",l,k,h;if(r){if(k=new c,d.isArray(r)){l=r.length;for(var g=0;g<l;g++){k.data=r[g],h=k.affix={xcount:l},h[p]=g,s&&(h[s]=r[g]),k.setParent(q),o+=t.fn(k)}}else{for(l in r){k.data=r[l],h=k.affix={},h[p]=l,s&&(h[s]=r[l]),k.setParent(q),o+=t.fn(k)}}}else{t.inverse&&(o=t.inverse(q))}return o},"with":function(g,f){var e=f.params[0],h="";e?(e=new c(e),e.setParent(g),h=f.fn(e)):f.inverse&&(h=f.inverse(g));return h},"if":function(g,f){var e="";f.params[0]?f.fn&&(e=f.fn(g)):f.inverse&&(e=f.inverse(g));return e},set:function(f,e){f.mix(e.hash);return""},include:function(g,f){var e=f.params;if(!e||1!==e.length){return"include must has one param",""}if(f.hash){var h=new c(f.hash);h.setParent(g);g=h}h=this.config.name;e=e[0];if("."===e.charAt(0)){if("unspecified"===h){return"parent template does not have name for relative sub tpl name: "+e,""}e=i.resolve(h,"../",e)}h=this.config.loader.call(this,e);f=d.merge(this.config);f.name=e;f.commands=this.config.commands;f.macros=this.config.macros;return this.invokeEngine(h,g,f)},macro:function(m,h){var g=h.params,n=g[0],l=g.slice(1),g=this.config.macros;if(h.fn){g[n]||(g[n]={paramNames:l,fn:h.fn})}else{var k={};(n=g[n])||"can not find macro:"+name;d.each(n.paramNames,function(e,f){k[e]=l[f]});g=new c(k);return n.fn.call(this,g)}return""},parse:function(f,e){return j.include.call(this,new c,e)}}});KISSY.add("xtemplate/runtime",["./runtime/commands","./runtime/scope"],function(r,m){function t(b){b}function s(h,f){for(var l=f.split("."),g=h,i=l.length,k=0;k<i&&!(g=g[l[k]],!g);k++){}return g}function q(f,B,A,C,z,y){var p,l=s(f.config.commands,C);if(l){try{p=l.call(f,B,A)}catch(k){k.message+': "'+C+'" at line '+z}return{find:!0,value:p}}y&&"can not find command: "+C+'" at line '+z;return{find:!1}}function u(h,e,g,l,k){var i,h=h.config.silent?t:r.error,e=e.resolve(g,l);!1===e?h('can not find property: "'+g+'" at line '+k,"warn"):i=e[0];return i}function x(c,b){this.tpl=c;b=r.merge(o,b);b.commands=r.merge(b.commands,w);b.utils=n;b.macros=b.macros||{};this.config=b}var w=m("./runtime/commands"),v=m("./runtime/scope"),j=r.escapeHtml,n={runBlockCommand:function(F,E,D,C,B){var A=F.config,y=A.silent?t:r.error,A=A.commands,g=s(A,C);if(!g){if(!D.params&&!D.hash){var z=E.resolve(C);!1===z?(y('can not find property: "'+C+'" at line '+B),z=""):z=z[0];g=A["if"];r.isArray(z)?g=A.each:"object"===typeof z&&(g=A["with"]);D.params=[z]}else{return"can not find command: "+C+'" at line '+B,""}}var e;try{e=g.call(F,E,D)}catch(f){f.message+': "'+C+'" at line '+B}return e},renderOutput:function(d,c){void 0===d&&(d="");return c&&d?j(d):d},getProperty:function(g,d,k,i,h){return u(g,d,k,i,h)},runInlineCommand:function(h,g,p,l,k){var i="",h=q(h,g,p,l,k);h.find&&(i=h.value);return i},getPropertyOrRunCommand:function(h,d,B,A,z,y){var p,l=B.hash||B.params,B=q(h,d,B,A,y,l);B.find?p=B.value:l||(p=u(h,d,A,z,y));return p}},o={silent:!0,name:"unspecified",loader:function(d){var c=r.require(d);c||'template "'+d+'" does not exist, need to be required or used first!';return c}};r.mix(x,{commands:w,utils:n,addCommand:function(b,d){w[b]=d},removeCommand:function(b){delete w[b]}});x.prototype={constructor:x,invokeEngine:function(e,d,f){return(new this.constructor(e,f)).render(d,!0)},removeCommand:function(b){delete this.config.commands[b]},addCommand:function(d,c){this.config.commands[d]=c},render:function(d){var c=d;if(!c||!c.isScope){c=new v(d)}return this.tpl(c,r)}};x.Scope=v;return x});KISSY.add("component/extension/shim",[],function(e){function d(){}var e=6===e.UA.ie,f='<iframe style="position: absolute;border: none;width: '+(e?"expression(this.parentNode.clientWidth)":"100%")+";top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: "+(e?"expression(this.parentNode.clientHeight)":"100%")+';"/>';d.ATTRS={shim:{value:e}};d.prototype.__createDom=function(){this.get("shim")&&this.get("el").prepend(f)};return d});KISSY.add("component/extension/align",["node"],function(i,C){function g(j){var l=j.ownerDocument.body,k=y(j).css("position");if(!("fixed"===k||"absolute"===k)){return"html"===j.nodeName.toLowerCase()?null:j.parentNode}for(j=j.parentNode;j&&j!==l;j=j.parentNode){if(k=y(j).css("position"),"static"!==k){return j}}return null}function f(k){var o,n,j={left:0,right:Infinity,top:0,bottom:Infinity},m;m=k.ownerDocument;n=y(m).getWindow();o=m.body;for(m=m.documentElement;k=g(k);){if((!B.ie||0!==k.clientWidth)&&k!==o&&k!==m&&"visible"!==y(k).css("overflow")){var l=y(k).offset();l.left+=k.clientLeft;l.top+=k.clientTop;j.top=Math.max(j.top,l.top);j.right=Math.min(j.right,l.left+k.clientWidth);j.bottom=Math.min(j.bottom,l.top+k.clientHeight);j.left=Math.max(j.left,l.left)}}m=n.scrollLeft();k=n.scrollTop();j.left=Math.max(j.left,m);j.top=Math.max(j.top,k);o=n.width();n=n.height();j.right=Math.min(j.right,m+o);j.bottom=Math.min(j.bottom,k+n);return 0<=j.top&&0<=j.left&&j.bottom>j.top&&j.right>j.left?j:null}function e(k,o,n,j){var m,l;m=k.left;l=k.top;o=d(o,n[0]);k=d(k,n[1]);k=[k.left-o.left,k.top-o.top];return{left:m-k[0]+ +j[0],top:l-k[1]+ +j[1]}}function c(k,m,l){var j=[];i.each(k,function(n){j.push(n.replace(m,function(o){return l[o]}))});return j}function h(){}function b(j){var l,k;l=j[0];i.isWindow(l)?(j=y(l).getWindow(),l={left:j.scrollLeft(),top:j.scrollTop()},k=j.width(),j=j.height()):(l=j.offset(),k=j.outerWidth(),j=j.outerHeight());l.width=k;l.height=j;return l}function d(k,q){var p=q.charAt(0),j=q.charAt(1),n=k.width,l=k.height,o,m;o=k.left;m=k.top;"c"===p?m+=l/2:"b"===p&&(m+=l);"c"===j?o+=n/2:"r"===j&&(o+=n);return{left:o,top:m}}function A(j){j.target===this&&j.newVal&&this._onSetAlign(this.get("align"))}function E(){this.get("visible")&&this._onSetAlign(this.get("align"))}var D=C("node"),z=i.Env.host,y=D.all,B=i.UA;h.__getOffsetParent=g;h.__getVisibleRectForElement=f;h.ATTRS={align:{value:{}}};h.prototype={__bindUI:function(){this.on("beforeVisibleChange",A,this);this.$el.getWindow().on("resize",E,this)},_onSetAlign:function(j){j&&j.points&&this.align(j.node,j.points,j.offset,j.overflow)},align:function(t,r,q,s){var t=D.one(t||z),q=q&&[].concat(q)||[0,0],s=s||{},o=this.$el,m=0,p=f(o[0]),n=b(o),k=b(t),t=e(n,k,r,q),l=i.merge(n,t);if(p&&(s.adjustX||s.adjustY)){if(t.left<p.left||t.left+n.width>p.right){m=1,r=c(r,/[lr]/ig,{l:"r",r:"l"}),q[0]=-q[0]}if(t.top<p.top||t.top+n.height>p.bottom){m=1,r=c(r,/[tb]/ig,{t:"b",b:"t"}),q[1]=-q[1]}m&&(t=e(n,k,r,q),i.mix(l,t));r=s.adjustX&&(t.left<p.left||t.left+n.width>p.right);s=s.adjustY&&(t.top<p.top||t.top+n.height>p.bottom);if(r||s){t=i.clone(t),l={width:n.width,height:n.height},r&&t.left<p.left&&(t.left=p.left),r&&t.left+l.width>p.right&&(t.left=Math.max(p.right-l.width,p.left)),s&&t.top<p.top&&(t.top=p.top),s&&t.top+l.height>p.bottom&&(t.top=Math.max(p.bottom-l.height,p.top)),l=i.mix(t,l)}}this.set({x:l.left,y:l.top},{force:1});l.width!==n.width&&this.set("width",o.width()+l.width-n.width);l.height!==n.height&&this.set("height",o.height()+l.height-n.height);return this},center:function(j){this.set("align",{node:j,points:["cc","cc"],offset:[0,0]});return this},__destructor:function(){this.$el&&this.$el.getWindow().detach("resize",E,this)}};return h});KISSY.add("component/extension/content-xtpl",[],function(){return function(h){var i;i=this.config.utils;var m=i.renderOutput,l=i.runInlineCommand,k=i.getPropertyOrRunCommand;i='<div id="ks-content-';var n=k(this,h,{},"id",0,1);i+=m(n,!0);i+='"\n           class="';var n={},j=[];j.push("content");n.params=j;l=l(this,h,n,"getBaseCssClasses",2);i+=m(l,!0);i+='">';h=k(this,h,{},"content",0,2);i+=m(h,!1);return i+"</div>"}});KISSY.add("component/extension/content-render",["component/extension/content-xtpl"],function(j,c){function i(e){var d=e.control,f=d.get("contentEl");e.$contentEl=d.$contentEl=f;e.contentEl=d.contentEl=f[0]}function k(){}var b=c("component/extension/content-xtpl");k.prototype={__beforeCreateDom:function(e,d){j.mix(d,{contentEl:"#ks-content-{id}"})},__createDom:function(){i(this)},__decorateDom:function(){i(this)},getChildrenContainerEl:function(){return this.control.get("contentEl")},_onSetContent:function(e){var d=this.control,f=d.$contentEl;f.html(e);d.get("allowTextSelection")||f.unselectable()}};j.mix(k,{ATTRS:{contentTpl:{value:b}},HTML_PARSER:{content:function(d){return d.one("."+this.getBaseCssClass("content")).html()},contentEl:function(d){return d.one("."+this.getBaseCssClass("content"))}}});return k});KISSY.add("dd/ddm",["node","base"],function(W,Z){function T(f){var d,c;if(f.touches&&1<f.touches.length){M._end()}else{if(d=this.__activeToDrag){d._move(f)}else{if(c=this.get("activeDrag")){c._move(f),this.__needDropCheck&&X(this,f,c)}}(d=d||c)&&d.get("preventDefaultOnMove")&&f.preventDefault()}}function X(l,r,q){var j=l.get("validDrops"),h=q.get("mode"),p=0,n=0,k=V(q.get("node")),g=L(k);W.each(j,function(c){if(!c.get("disabled")){var b;if(b=c.getNodeFromTarget(r,q.get("dragNode")[0],q.get("node")[0])){if("point"===h){S(V(b),q.mousePos)&&(b=L(V(b)),p?b<n&&(p=c,n=b):(p=c,n=b))}else{if("intersect"===h){b=L(J(k,V(b))),b>n&&(n=b,p=c)}else{if("strict"===h&&(b=L(J(k,V(b))),b===g)){return p=c,!1}}}}}});if((j=l.get("activeDrop"))&&j!==p){j._handleOut(r),q._handleOut(r)}l.setInternal("activeDrop",p);p&&(j!==p?p._handleEnter(r):p._handleOver(r))}function Y(f){var d=f.get("activeDrag").get("activeHandler"),c="auto";d&&(c=d.css("cursor"));"auto"===c&&(c=f.get("dragCursor"));f._shim.css({cursor:c,display:"block"});F&&E.call(f)}function R(c){var b=c.get("drops");c.setInternal("validDrops",[]);b.length&&W.each(b,function(d){d._active()})}function aa(c){var b=c.get("drops");c.setInternal("validDrops",[]);b.length&&W.each(b,function(d){d._deActive()})}function V(c){var b=c.offset();c.__ddCachedWidth||("no cache in dd!",c[0]);return{left:b.left,right:b.left+(c.__ddCachedWidth||c.outerWidth()),top:b.top,bottom:b.top+(c.__ddCachedHeight||c.outerHeight())}}function S(c,b){return c.left<=b.left&&c.right>=b.left&&c.top<=b.top&&c.bottom>=b.top}function L(b){return b.top>=b.bottom||b.left>=b.right?0:(b.right-b.left)*(b.bottom-b.top)}function J(g,f){var h=Math.max(g.top,f.top),j=Math.min(g.right,f.right),d=Math.min(g.bottom,f.bottom);return{left:Math.max(g.left,f.left),right:j,top:h,bottom:d}}function P(b){b&&(b.__ddCachedWidth=b.outerWidth(),b.__ddCachedHeight=b.outerHeight())}var I=Z("node"),H=Z("base"),ab=W.UA,U=I.all,Q=W.Env.host,O=Q.document,G=U(O),K=U(Q),F=6===ab.ie,I=I.Gesture,D=I.move,C=I.end,H=H.extend({__activeToDrag:0,_regDrop:function(b){this.get("drops").push(b)},_unRegDrop:function(d){var c=this.get("drops"),d=W.indexOf(d,c);-1!==d&&c.splice(d,1)},_regToDrag:function(b){this.__activeToDrag=b;G.on(C,this._end,this);G.on(D,e,this);O.body.setCapture&&O.body.setCapture()},_start:function(){var b=this.__activeToDrag;b&&(this.setInternal("activeDrag",b),this.__activeToDrag=0,b.get("shim")&&N(this),this.__needDropCheck=0,b.get("groups")&&(R(this),this.get("validDrops").length&&(P(b.get("node")),this.__needDropCheck=1)))},_addValidDrop:function(b){this.get("validDrops").push(b)},_end:function(d){var f=this.__activeToDrag,g=this.get("activeDrag"),b=this.get("activeDrop");d&&(f&&f._move(d),g&&g._move(d));G.detach(D,e,this);G.detach(C,this._end,this);O.body.releaseCapture&&O.body.releaseCapture();f&&(f._end(d),this.__activeToDrag=0);this._shim&&this._shim.hide();g&&(g._end(d),aa(this),b&&b._end(d),this.setInternal("activeDrag",null),this.setInternal("activeDrop",null))}},{ATTRS:{dragCursor:{value:"move"},clickPixelThresh:{value:3},bufferTime:{value:1},activeDrag:{},activeDrop:{},drops:{value:[]},validDrops:{value:[]}}}),e=ab.ie?W.throttle(T,30):T,N=function(b){b._shim=U('<div style="background-color:red;position:'+(F?"absolute":"fixed")+";left:0;width:100%;height:100%;top:0;cursor:"+M.get("dragCursor")+';z-index:999999;"></div>').prependTo(O.body||O.documentElement).css("opacity",0);N=Y;if(F){K.on("resize scroll",E,b)}Y(b)},E=W.throttle(function(){var b;(b=this.get("activeDrag"))&&b.get("shim")&&this._shim.css({width:G.width(),height:G.height()})},30),M=new H;M.inRegion=S;M.region=V;M.area=L;M.cacheWH=P;M.PREFIX_CLS="ks-dd-";return M});KISSY.add("dd/draggable",["node","./ddm","base"],function(w,z){function u(){return !1}var x=z("node"),y=z("./ddm"),o=z("base"),A=x.all,v=w.each,p=w.Features,i=w.UA.ie,e=y.PREFIX_CLS,m=w.Env.host.document,C,B=function(d){var c=d.target;this._checkDragStartValid(d)&&this._checkHandler(c)&&this._prepare(d)};return o.extend({initializer:function(){this.addTarget(y);this._allowMove=this.get("move")},_onSetNode:function(b){this.setInternal("dragNode",b);this.bindDragEvent()},bindDragEvent:function(){this.get("node").on(x.Gesture.start,B,this).on("dragstart",this._fixDragStart)},detachDragEvent:function(b){b=this;b.get("node").detach(x.Gesture.start,B,b).detach("dragstart",b._fixDragStart)},_bufferTimer:null,_onSetDisabledChange:function(b){this.get("dragNode")[b?"addClass":"removeClass"](e+"-disabled")},_fixDragStart:function(b){b.preventDefault()},_checkHandler:function(f){var d=this,h=d.get("handlers"),g=0;v(h,function(b){if(b[0]===f||b.contains(f)){return g=1,d.setInternal("activeHandler",b),!1}});return g},_checkDragStartValid:function(b){return this.get("primaryButtonOnly")&&1!==b.which||this.get("disabled")?0:1},_prepare:function(g){if(g){var d=this;i&&(C=m.body.onselectstart,m.body.onselectstart=u);d.get("halt")&&g.stopPropagation();p.isTouchEventSupported()||g.preventDefault();var l=g.pageX,j=g.pageY;d.setInternal("startMousePos",d.mousePos={left:l,top:j});if(d._allowMove){var k=d.get("node").offset();d.setInternal("startNodePos",k);d.setInternal("deltaPos",{left:l-k.left,top:j-k.top})}y._regToDrag(d);if(l=d.get("bufferTime")){d._bufferTimer=setTimeout(function(){d._start(g)},1000*l)}}},_clearBufferTimer:function(){this._bufferTimer&&(clearTimeout(this._bufferTimer),this._bufferTimer=0)},_move:function(g){var f=g.pageX,q=g.pageY;if(!this.get("dragging")){var j=this.get("startMousePos"),l=0,n=this.get("clickPixelThresh");if(Math.abs(f-j.left)>=n||Math.abs(q-j.top)>=n){this._start(g),l=1}if(!l){return}}this.mousePos={left:f,top:q};g={drag:this,left:f,top:q,pageX:f,pageY:q,domEvent:g};if(j=this._allowMove){l=this.get("deltaPos"),f-=l.left,q-=l.top,g.left=f,g.top=q,this.setInternal("actualPos",{left:f,top:q}),this.fire("dragalign",g)}q=1;!1===this.fire("drag",g)&&(q=0);q&&j&&this.get("node").offset(this.get("actualPos"))},stopDrag:function(){y._end()},_end:function(d){var d=d||{},c;this._clearBufferTimer();i&&(m.body.onselectstart=C);this.get("dragging")&&(this.get("node").removeClass(e+"drag-over"),(c=y.get("activeDrop"))?this.fire("dragdrophit",{drag:this,drop:c}):this.fire("dragdropmiss",{drag:this}),this.setInternal("dragging",0),this.fire("dragend",{drag:this,pageX:d.pageX,pageY:d.pageY}))},_handleOut:function(){this.get("node").removeClass(e+"drag-over");this.fire("dragexit",{drag:this,drop:y.get("activeDrop")})},_handleEnter:function(b){this.get("node").addClass(e+"drag-over");this.fire("dragenter",b)},_handleOver:function(b){this.fire("dragover",b)},_start:function(b){this._clearBufferTimer();this.setInternal("dragging",1);this.setInternal("dragStartMousePos",{left:b.pageX,top:b.pageY});y._start();this.fire("dragstart",{drag:this,pageX:b.pageX,pageY:b.pageY})},destructor:function(){this.detachDragEvent();this.detach()}},{name:"Draggable",ATTRS:{node:{setter:function(b){if(!(b instanceof x)){return A(b)}}},clickPixelThresh:{valueFn:function(){return y.get("clickPixelThresh")}},bufferTime:{valueFn:function(){return y.get("bufferTime")}},dragNode:{},shim:{value:!1},handlers:{value:[],getter:function(b){var d=this;b.length||(b[0]=d.get("node"));v(b,function(c,f){"function"===typeof c&&(c=c.call(d));"string"===typeof c&&(c=d.get("node").one(c));c.nodeType&&(c=A(c));b[f]=c});d.setInternal("handlers",b);return b}},activeHandler:{},dragging:{value:!1,setter:function(b){this.get("dragNode")[b?"addClass":"removeClass"](e+"dragging")}},mode:{value:"point"},disabled:{value:!1},move:{value:!1},primaryButtonOnly:{value:!0},halt:{value:!0},groups:{value:!0},startMousePos:{},dragStartMousePos:{},startNodePos:{},deltaPos:{},actualPos:{},preventDefaultOnMove:{value:!0}},inheritedStatics:{DropMode:{POINT:"point",INTERSECT:"intersect",STRICT:"strict"}}})});KISSY.add("dd/draggable-delegate",["node","./ddm","./draggable"],function(n,q){var k=q("node"),o=q("./ddm"),p=q("./draggable"),i=o.PREFIX_CLS,e=k.all,m=function(l){var b,j;if(this._checkDragStartValid(l)){b=this.get("handlers");var g=e(l.target);(b=b.length?this._getHandler(g):g)&&(j=this._getNode(b));j&&(this.setInternal("activeHandler",b),this.setInternal("node",j),this.setInternal("dragNode",j),this._prepare(l))}};return p.extend({_onSetNode:function(){},_onSetContainer:function(){this.bindDragEvent()},_onSetDisabledChange:function(c){this.get("container")[c?"addClass":"removeClass"](i+"-disabled")},bindDragEvent:function(){this.get("container").on(k.Gesture.start,m,this).on("dragstart",this._fixDragStart)},detachDragEvent:function(){this.get("container").detach(k.Gesture.start,m,this).detach("dragstart",this._fixDragStart)},_getHandler:function(f){for(var l=this.get("container"),g=this.get("handlers");f&&f[0]!==l[0];){for(var j=0;j<g.length;j++){if(f.test(g[j])){return f}}f=f.parent()}return null},_getNode:function(c){return c.closest(this.get("selector"),this.get("container"))}},{ATTRS:{container:{setter:function(b){return e(b)}},selector:{},handlers:{value:[],getter:0}}})});KISSY.add("dd/droppable",["node","./ddm","base"],function(h,m){var e=m("node"),i=m("./ddm"),k=m("base"),b=i.PREFIX_CLS;return k.extend({initializer:function(){this.addTarget(i);i._regDrop(this)},getNodeFromTarget:function(g,n,l){var g=this.get("node"),j=g[0];return j===n||j===l?null:g},_active:function(){var f=i.get("activeDrag"),n=this.get("node"),l=this.get("groups"),f=f.get("groups");a:if(!0===f){l=1}else{for(var j in l){if(f[j]){l=1;break a}}l=0}l?(i._addValidDrop(this),n&&(n.addClass(b+"drop-active-valid"),i.cacheWH(n))):n&&n.addClass(b+"drop-active-invalid")},_deActive:function(){var c=this.get("node");c&&c.removeClass(b+"drop-active-valid").removeClass(b+"drop-active-invalid")},__getCustomEvt:function(c){return h.mix({drag:i.get("activeDrag"),drop:this},c)},_handleOut:function(){var c=this.__getCustomEvt();this.get("node").removeClass(b+"drop-over");this.fire("dropexit",c)},_handleEnter:function(c){c=this.__getCustomEvt(c);c.drag._handleEnter(c);this.get("node").addClass(b+"drop-over");this.fire("dropenter",c)},_handleOver:function(c){c=this.__getCustomEvt(c);c.drag._handleOver(c);this.fire("dropover",c)},_end:function(){var c=this.__getCustomEvt();this.get("node").removeClass(b+"drop-over");this.fire("drophit",c)},destructor:function(){i._unRegDrop(this)}},{name:"Droppable",ATTRS:{node:{setter:function(c){if(c){return e.one(c)}}},groups:{value:{}},disabled:{}}})});KISSY.add("dd/droppable-delegate",["node","./ddm","./droppable"],function(h,m){function e(){var d=this.get("container"),j=[],g=this.get("selector");d.all(g).each(function(c){k.cacheWH(c);j.push(c)});this.__allNodes=j}var i=m("node"),k=m("./ddm"),b=m("./droppable").extend({initializer:function(){k.on("dragstart",e,this)},getNodeFromTarget:function(d,r,p){var g={left:d.pageX,top:d.pageY},d=this.__allNodes,o=0,q=Number.MAX_VALUE;d&&h.each(d,function(c){var f=c[0];f===p||f===r||(f=k.region(c),k.inRegion(f,g)&&(f=k.area(f),f<q&&(q=f,o=c)))});o&&(this.setInternal("lastNode",this.get("node")),this.setInternal("node",o));return o},_handleOut:function(){this.callSuper();this.setInternal("node",0);this.setInternal("lastNode",0)},_handleOver:function(l){var r=this.get("node"),q=b.superclass._handleOut,p=this.callSuper,o=b.superclass._handleEnter,n=this.get("lastNode");n[0]!==r[0]?(this.setInternal("node",n),q.apply(this,arguments),this.setInternal("node",r),o.call(this,l)):p.call(this,l)},_end:function(c){this.callSuper(c);this.setInternal("node",0)}},{ATTRS:{lastNode:{},selector:{},container:{setter:function(c){return i.one(c)}}}});return b});KISSY.add("dd",["dd/ddm","dd/draggable","dd/draggable-delegate","dd/droppable-delegate","dd/droppable"],function(k,o){var i=o("dd/ddm"),m=o("dd/draggable"),n=o("dd/draggable-delegate"),h=o("dd/droppable-delegate"),e=o("dd/droppable"),i={Draggable:m,DDM:i,Droppable:e,DroppableDelegate:h,DraggableDelegate:n};return KISSY.DD=i});KISSY.add("event",["event/dom","event/custom"],function(e,g){var f=g("event/dom"),h=g("event/custom"),f=e.Event=e.merge(f,{DomEvent:f,CustomEvent:h});f.global=h.global;e.EventTarget=f.Target=h.Target;return f});KISSY.add("xtemplate",["xtemplate/runtime","xtemplate/compiler"],function(n,m){function c(b,j){j=n.merge(e,j);if("string"===typeof b){var h=b,g=j,i;if(!g.cache||!(i=l[h])){i=f.compileToFn(h,g),g.cache&&(l[h]=i)}b=i}c.superclass.constructor.call(this,b,j)}var d=m("xtemplate/runtime"),f=m("xtemplate/compiler"),l=c.cache={},e={cache:!0};n.extend(c,d,{},{compiler:f,Scope:d.Scope,RunTime:d,addCommand:d.addCommand,removeCommand:d.removeCommand});return c});KISSY.add("xtemplate/compiler/parser",[],function(j,f){var k={},d=KISSY,i=function(b){this.rules=[];d.mix(this,b);this.resetInput(this.input)};i.prototype={constructor:function(b){this.rules=[];d.mix(this,b);this.resetInput(this.input)},resetInput:function(b){d.mix(this,{input:b,matched:"",stateStack:[i.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},genShortId:function(b){b+="__gen";b in this||(this[b]=-1);var b=this[b]+=1,c="";do{c=String.fromCharCode(97+b%26)+c,b=Math.floor(b/26)-1}while(0<=b);return c},getCurrentRules:function(){var b=this.stateStack[this.stateStack.length-1],c=[],b=this.mapState(b);d.each(this.rules,function(g){var e=g.state||g[3];e?d.inArray(b,e)&&c.push(g):b===i.STATIC.INITIAL&&c.push(g)});return c},pushState:function(b){this.stateStack.push(b)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var g=i.STATIC.DEBUG_CONTEXT_LIMIT,l=this.matched,m=this.match,e=this.input,l=l.slice(0,l.length-m.length),l=(l.length>g?"...":"")+l.slice(-g).replace(/\n/," "),m=m+e,m=m.slice(0,g)+(m.length>g?"...":"");return l+m+"\n"+Array(l.length+1).join("-")+"^"},mapSymbol:function(b){var e=this.symbolMap;return !e?b:e[b]||(e[b]=this.genShortId("symbol"))},mapReverseSymbol:function(l){var n=this.symbolMap,m,g=this.reverseSymbolMap;if(!g&&n){for(m in g=this.reverseSymbolMap={},n){g[n[m]]=m}}return g?g[l]:l},mapState:function(b){var e=this.stateMap;return !e?b:e[b]||(e[b]=this.genShortId("state"))},lex:function(){var q=this.input,o,l,b,p=this.getCurrentRules();this.match=this.text="";if(!q){return this.mapSymbol(i.STATIC.END_TAG)}for(o=0;o<p.length;o++){l=p[o];var e=l.token||l[0];b=l.action||l[2]||f;if(l=q.match(l.regexp||l[1])){if(o=l[0].match(/\n.*/g)){this.lineNumber+=o.length}d.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:o?o[o.length-1].length-1:this.lastColumn+l[0].length});o=this.match=l[0];this.matches=l;this.text=o;this.matched+=o;b=b&&b.call(this);b=b===f?e:this.mapSymbol(b);this.input=q=q.slice(o.length);return b?b:this.lex()}}"lex error at line "+this.lineNumber+":\n"+this.showDebugInfo();return f}};i.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var h=new i({rules:[[0,/^[\s\S]*?(?={{)/,function(){var g=this.text,l,e=0;if(l=g.match(/\\+$/)){e=l[0].length}e%2?(this.pushState("et"),g=g.slice(0,-1)):this.pushState("t");this.text=g=g.replace(/\\+$/g,function(b){return Array(b.length/2+1).join("\\")});return"CONTENT"}],["b",/^[\s\S]+/,0],["b",/^[\s\S]{2,}?(?:(?={{)|$)/,function(){this.popState()},["et"]],["c",/^{{(?:#|@|\^)/,0,["t"]],["d",/^{{\//,0,["t"]],["e",/^{{\s*else\s*}}/,function(){this.popState()},["t"]],[0,/^{{![\s\S]*?}}/,function(){this.popState()},["t"]],["b",/^{{%([\s\S]*?)%}}/,function(){this.text=this.matches[1]||"";this.popState()},["t"]],["f",/^{{{?/,0,["t"]],["g",/^\s+/,0,["t"]],["h",/^}}}?/,function(){this.popState()},["t"]],["i",/^\(/,0,["t"]],["j",/^\)/,0,["t"]],["k",/^\|\|/,0,["t"]],["l",/^&&/,0,["t"]],["m",/^===/,0,["t"]],["n",/^!==/,0,["t"]],["o",/^>=/,0,["t"]],["p",/^<=/,0,["t"]],["q",/^>/,0,["t"]],["r",/^</,0,["t"]],["s",/^\+/,0,["t"]],["t",/^-/,0,["t"]],["u",/^\*/,0,["t"]],["v",/^\//,0,["t"]],["w",/^%/,0,["t"]],["x",/^!/,0,["t"]],["y",/^"(\\[\s\S]|[^\\"])*"/,function(){this.text=this.text.slice(1,-1).replace(/\\"/g,'"')},["t"]],["y",/^'(\\[\s\S]|[^\\'])*'/,function(){this.text=this.text.slice(1,-1).replace(/\\'/g,"'")},["t"]],["z",/^true/,0,["t"]],["z",/^false/,0,["t"]],["aa",/^\d+(?:\.\d+)?(?:e-?\d+)?/i,0,["t"]],["ab",/^=/,0,["t"]],["ac",/^\.(?=})/,0,["t"]],["ac",/^\.\./,function(){this.pushState("ws")},["t"]],["ad",/^\//,function(){this.popState()},["ws"]],["ad",/^\./,0,["t"]],["ae",/^\[/,0,["t"]],["af",/^\]/,0,["t"]],["ac",/^[a-zA-Z0-9_$]+/,0,["t"]],["ag",/^./,0,["t"]]]});k.lexer=h;h.symbolMap={$EOF:"a",CONTENT:"b",OPEN_BLOCK:"c",OPEN_CLOSE_BLOCK:"d",INVERSE:"e",OPEN_TPL:"f",SPACE:"g",CLOSE:"h",LPAREN:"i",RPAREN:"j",OR:"k",AND:"l",LOGIC_EQUALS:"m",LOGIC_NOT_EQUALS:"n",GE:"o",LE:"p",GT:"q",LT:"r",PLUS:"s",MINUS:"t",MULTIPLY:"u",DIVIDE:"v",MODULUS:"w",NOT:"x",STRING:"y",BOOLEAN:"z",NUMBER:"aa",EQUALS:"ab",ID:"ac",SEP:"ad",REF_START:"ae",REF_END:"af",INVALID:"ag",$START:"ah",program:"ai",statements:"aj",statement:"ak",openBlock:"al",closeBlock:"am",tpl:"an",inBlockTpl:"ao",path:"ap",inTpl:"aq",Expression:"ar",params:"as",hash:"at",param:"au",ConditionalOrExpression:"av",ConditionalAndExpression:"aw",EqualityExpression:"ax",RelationalExpression:"ay",AdditiveExpression:"az",MultiplicativeExpression:"ba",UnaryExpression:"bb",PrimaryExpression:"bc",hashSegments:"bd",hashSegment:"be",pathSegments:"bf"};k.productions=[["ah",["ai"]],["ai",["aj","e","aj"],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1,this.$3)}],["ai",["aj"],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1)}],["aj",["ak"],function(){return[this.$1]}],["aj",["aj","ak"],function(){this.$1.push(this.$2)}],["ak",["al","ai","am"],function(){return new this.yy.BlockNode(this.lexer.lineNumber,this.$1,this.$2,this.$3)}],["ak",["an"]],["ak",["b"],function(){return new this.yy.ContentNode(this.lexer.lineNumber,this.$1)}],["ao",["ap"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1)}],["ao",["aq"]],["al",["c","ao","h"],function(){"^"===this.$1.charAt(this.$1.length-1)&&(this.$2.isInverted=1);return this.$2}],["am",["d","ap","h"],function(){return this.$2}],["an",["f","aq","h"],function(){3===this.$1.length&&(this.$2.escaped=!1);return this.$2}],["an",["f","ar","h"],function(){var b=new this.yy.TplExpressionNode(this.lexer.lineNumber,this.$2);3===this.$1.length&&(b.escaped=!1);return b}],["aq",["ap","g","as","g","at"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$3,this.$5)}],["aq",["ap","g","as"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$3)}],["aq",["ap","g","at"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,null,this.$3)}],["as",["as","g","au"],function(){this.$1.push(this.$3)}],["as",["au"],function(){return[this.$1]}],["au",["ar"]],["ar",["av"]],["av",["aw"]],["av",["av","k","aw"],function(){return new this.yy.ConditionalOrExpression(this.$1,this.$3)}],["aw",["ax"]],["aw",["aw","l","ax"],function(){return new this.yy.ConditionalAndExpression(this.$1,this.$3)}],["ax",["ay"]],["ax",["ax","m","ay"],function(){return new this.yy.EqualityExpression(this.$1,"===",this.$3)}],["ax",["ax","n","ay"],function(){return new this.yy.EqualityExpression(this.$1,"!==",this.$3)}],["ay",["az"]],["ay",["ay","r","az"],function(){return new this.yy.RelationalExpression(this.$1,"<",this.$3)}],["ay",["ay","q","az"],function(){return new this.yy.RelationalExpression(this.$1,">",this.$3)}],["ay",["ay","p","az"],function(){return new this.yy.RelationalExpression(this.$1,"<=",this.$3)}],["ay",["ay","o","az"],function(){return new this.yy.RelationalExpression(this.$1,">=",this.$3)}],["az",["ba"]],["az",["az","s","ba"],function(){return new this.yy.AdditiveExpression(this.$1,"+",this.$3)}],["az",["az","t","ba"],function(){return new this.yy.AdditiveExpression(this.$1,"-",this.$3)}],["ba",["bb"]],["ba",["ba","u","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"*",this.$3)}],["ba",["ba","v","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"/",this.$3)}],["ba",["ba","w","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"%",this.$3)}],["bb",["x","bb"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bb",["t","bb"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bb",["bc"]],["bc",["y"],function(){return new this.yy.StringNode(this.lexer.lineNumber,this.$1)}],["bc",["aa"],function(){return new this.yy.NumberNode(this.lexer.lineNumber,this.$1)}],["bc",["z"],function(){return new this.yy.BooleanNode(this.lexer.lineNumber,this.$1)}],["bc",["ap"]],["bc",["i","ar","j"],function(){return this.$2}],["at",["bd"],function(){return new this.yy.HashNode(this.lexer.lineNumber,this.$1)}],["bd",["bd","g","be"],function(){this.$1.push(this.$3)}],["bd",["be"],function(){return[this.$1]}],["be",["ac","ab","ar"],function(){return[this.$1,this.$3]}],["ap",["bf"],function(){return new this.yy.IdNode(this.lexer.lineNumber,this.$1)}],["bf",["bf","ad","ac"],function(){this.$1.push(this.$3)}],["bf",["bf","ae","ar","af"],function(){this.$1.push(this.$3)}],["bf",["bf","ad","aa"],function(){this.$1.push(this.$3)}],["bf",["ac"],function(){return[this.$1]}]];k.table={gotos:{"0":{ai:4,aj:5,ak:6,al:7,an:8},2:{ao:10,aq:11,ap:12,bf:13},3:{aq:20,ar:21,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:30,bf:13},5:{ak:32,al:7,an:8},7:{ai:33,aj:5,ak:6,al:7,an:8},14:{ar:38,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},15:{bb:40,bc:29,ap:39,bf:13},16:{bb:41,bc:29,ap:39,bf:13},31:{aj:57,ak:6,al:7,an:8},33:{am:59},35:{as:61,au:62,ar:63,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,at:64,bd:65,be:66,ap:39,bf:13},37:{ar:69,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},44:{aw:71,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},45:{ax:72,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},46:{ay:73,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},47:{ay:74,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},48:{az:75,ba:27,bb:28,bc:29,ap:39,bf:13},49:{az:76,ba:27,bb:28,bc:29,ap:39,bf:13},50:{az:77,ba:27,bb:28,bc:29,ap:39,bf:13},51:{az:78,ba:27,bb:28,bc:29,ap:39,bf:13},52:{ba:79,bb:28,bc:29,ap:39,bf:13},53:{ba:80,bb:28,bc:29,ap:39,bf:13},54:{bb:81,bc:29,ap:39,bf:13},55:{bb:82,bc:29,ap:39,bf:13},56:{bb:83,bc:29,ap:39,bf:13},57:{ak:32,al:7,an:8},58:{ap:84,bf:13},85:{ar:90,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},86:{au:91,ar:63,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,at:92,bd:65,be:66,ap:39,bf:13},87:{be:94}},action:{"0":{b:[1,f,1],c:[1,f,2],f:[1,f,3]},1:{a:[2,7],e:[2,7],c:[2,7],f:[2,7],b:[2,7],d:[2,7]},2:{ac:[1,f,9]},3:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},4:{a:[0]},5:{a:[2,2],d:[2,2],b:[1,f,1],c:[1,f,2],e:[1,f,31],f:[1,f,3]},6:{a:[2,3],e:[2,3],c:[2,3],f:[2,3],b:[2,3],d:[2,3]},7:{b:[1,f,1],c:[1,f,2],f:[1,f,3]},8:{a:[2,6],e:[2,6],c:[2,6],f:[2,6],b:[2,6],d:[2,6]},9:{h:[2,56],g:[2,56],ad:[2,56],ae:[2,56],k:[2,56],l:[2,56],m:[2,56],n:[2,56],o:[2,56],p:[2,56],q:[2,56],r:[2,56],s:[2,56],t:[2,56],u:[2,56],v:[2,56],w:[2,56],j:[2,56],af:[2,56]},10:{h:[1,f,34]},11:{h:[2,9]},12:{h:[2,8],g:[1,f,35]},13:{h:[2,52],g:[2,52],k:[2,52],l:[2,52],m:[2,52],n:[2,52],o:[2,52],p:[2,52],q:[2,52],r:[2,52],s:[2,52],t:[2,52],u:[2,52],v:[2,52],w:[2,52],j:[2,52],af:[2,52],ad:[1,f,36],ae:[1,f,37]},14:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},15:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},16:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},17:{h:[2,43],k:[2,43],l:[2,43],m:[2,43],n:[2,43],o:[2,43],p:[2,43],q:[2,43],r:[2,43],s:[2,43],t:[2,43],u:[2,43],v:[2,43],w:[2,43],j:[2,43],g:[2,43],af:[2,43]},18:{h:[2,45],k:[2,45],l:[2,45],m:[2,45],n:[2,45],o:[2,45],p:[2,45],q:[2,45],r:[2,45],s:[2,45],t:[2,45],u:[2,45],v:[2,45],w:[2,45],j:[2,45],g:[2,45],af:[2,45]},19:{h:[2,44],k:[2,44],l:[2,44],m:[2,44],n:[2,44],o:[2,44],p:[2,44],q:[2,44],r:[2,44],s:[2,44],t:[2,44],u:[2,44],v:[2,44],w:[2,44],j:[2,44],g:[2,44],af:[2,44]},20:{h:[1,f,42]},21:{h:[1,f,43]},22:{h:[2,20],j:[2,20],g:[2,20],af:[2,20],k:[1,f,44]},23:{h:[2,21],k:[2,21],j:[2,21],g:[2,21],af:[2,21],l:[1,f,45]},24:{h:[2,23],k:[2,23],l:[2,23],j:[2,23],g:[2,23],af:[2,23],m:[1,f,46],n:[1,f,47]},25:{h:[2,25],k:[2,25],l:[2,25],m:[2,25],n:[2,25],j:[2,25],g:[2,25],af:[2,25],o:[1,f,48],p:[1,f,49],q:[1,f,50],r:[1,f,51]},26:{h:[2,28],k:[2,28],l:[2,28],m:[2,28],n:[2,28],o:[2,28],p:[2,28],q:[2,28],r:[2,28],j:[2,28],g:[2,28],af:[2,28],s:[1,f,52],t:[1,f,53]},27:{h:[2,33],k:[2,33],l:[2,33],m:[2,33],n:[2,33],o:[2,33],p:[2,33],q:[2,33],r:[2,33],s:[2,33],t:[2,33],j:[2,33],g:[2,33],af:[2,33],u:[1,f,54],v:[1,f,55],w:[1,f,56]},28:{h:[2,36],k:[2,36],l:[2,36],m:[2,36],n:[2,36],o:[2,36],p:[2,36],q:[2,36],r:[2,36],s:[2,36],t:[2,36],u:[2,36],v:[2,36],w:[2,36],j:[2,36],g:[2,36],af:[2,36]},29:{h:[2,42],k:[2,42],l:[2,42],m:[2,42],n:[2,42],o:[2,42],p:[2,42],q:[2,42],r:[2,42],s:[2,42],t:[2,42],u:[2,42],v:[2,42],w:[2,42],j:[2,42],g:[2,42],af:[2,42]},30:{h:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],g:[1,f,35]},31:{b:[1,f,1],c:[1,f,2],f:[1,f,3]},32:{a:[2,4],e:[2,4],c:[2,4],f:[2,4],b:[2,4],d:[2,4]},33:{d:[1,f,58]},34:{c:[2,10],f:[2,10],b:[2,10]},35:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,60]},36:{aa:[1,f,67],ac:[1,f,68]},37:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},38:{j:[1,f,70]},39:{j:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],h:[2,46],g:[2,46],af:[2,46]},40:{h:[2,41],k:[2,41],l:[2,41],m:[2,41],n:[2,41],o:[2,41],p:[2,41],q:[2,41],r:[2,41],s:[2,41],t:[2,41],u:[2,41],v:[2,41],w:[2,41],j:[2,41],g:[2,41],af:[2,41]},41:{h:[2,40],k:[2,40],l:[2,40],m:[2,40],n:[2,40],o:[2,40],p:[2,40],q:[2,40],r:[2,40],s:[2,40],t:[2,40],u:[2,40],v:[2,40],w:[2,40],j:[2,40],g:[2,40],af:[2,40]},42:{a:[2,12],e:[2,12],c:[2,12],f:[2,12],b:[2,12],d:[2,12]},43:{a:[2,13],e:[2,13],c:[2,13],f:[2,13],b:[2,13],d:[2,13]},44:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},45:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},46:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},47:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},48:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},49:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},50:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},51:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},52:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},53:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},54:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},55:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},56:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},57:{a:[2,1],d:[2,1],b:[1,f,1],c:[1,f,2],f:[1,f,3]},58:{ac:[1,f,9]},59:{a:[2,5],e:[2,5],c:[2,5],f:[2,5],b:[2,5],d:[2,5]},60:{h:[2,56],g:[2,56],k:[2,56],l:[2,56],m:[2,56],n:[2,56],o:[2,56],p:[2,56],q:[2,56],r:[2,56],s:[2,56],t:[2,56],u:[2,56],v:[2,56],w:[2,56],ad:[2,56],ae:[2,56],ab:[1,f,85]},61:{h:[2,15],g:[1,f,86]},62:{h:[2,18],g:[2,18]},63:{h:[2,19],g:[2,19]},64:{h:[2,16]},65:{h:[2,48],g:[1,f,87]},66:{h:[2,50],g:[2,50]},67:{h:[2,55],g:[2,55],ad:[2,55],ae:[2,55],k:[2,55],l:[2,55],m:[2,55],n:[2,55],o:[2,55],p:[2,55],q:[2,55],r:[2,55],s:[2,55],t:[2,55],u:[2,55],v:[2,55],w:[2,55],j:[2,55],af:[2,55]},68:{h:[2,53],g:[2,53],ad:[2,53],ae:[2,53],k:[2,53],l:[2,53],m:[2,53],n:[2,53],o:[2,53],p:[2,53],q:[2,53],r:[2,53],s:[2,53],t:[2,53],u:[2,53],v:[2,53],w:[2,53],j:[2,53],af:[2,53]},69:{af:[1,f,88]},70:{h:[2,47],k:[2,47],l:[2,47],m:[2,47],n:[2,47],o:[2,47],p:[2,47],q:[2,47],r:[2,47],s:[2,47],t:[2,47],u:[2,47],v:[2,47],w:[2,47],j:[2,47],g:[2,47],af:[2,47]},71:{h:[2,22],k:[2,22],j:[2,22],g:[2,22],af:[2,22],l:[1,f,45]},72:{h:[2,24],k:[2,24],l:[2,24],j:[2,24],g:[2,24],af:[2,24],m:[1,f,46],n:[1,f,47]},73:{h:[2,26],k:[2,26],l:[2,26],m:[2,26],n:[2,26],j:[2,26],g:[2,26],af:[2,26],o:[1,f,48],p:[1,f,49],q:[1,f,50],r:[1,f,51]},74:{h:[2,27],k:[2,27],l:[2,27],m:[2,27],n:[2,27],j:[2,27],g:[2,27],af:[2,27],o:[1,f,48],p:[1,f,49],q:[1,f,50],r:[1,f,51]},75:{h:[2,32],k:[2,32],l:[2,32],m:[2,32],n:[2,32],o:[2,32],p:[2,32],q:[2,32],r:[2,32],j:[2,32],g:[2,32],af:[2,32],s:[1,f,52],t:[1,f,53]},76:{h:[2,31],k:[2,31],l:[2,31],m:[2,31],n:[2,31],o:[2,31],p:[2,31],q:[2,31],r:[2,31],j:[2,31],g:[2,31],af:[2,31],s:[1,f,52],t:[1,f,53]},77:{h:[2,30],k:[2,30],l:[2,30],m:[2,30],n:[2,30],o:[2,30],p:[2,30],q:[2,30],r:[2,30],j:[2,30],g:[2,30],af:[2,30],s:[1,f,52],t:[1,f,53]},78:{h:[2,29],k:[2,29],l:[2,29],m:[2,29],n:[2,29],o:[2,29],p:[2,29],q:[2,29],r:[2,29],j:[2,29],g:[2,29],af:[2,29],s:[1,f,52],t:[1,f,53]},79:{h:[2,34],k:[2,34],l:[2,34],m:[2,34],n:[2,34],o:[2,34],p:[2,34],q:[2,34],r:[2,34],s:[2,34],t:[2,34],j:[2,34],g:[2,34],af:[2,34],u:[1,f,54],v:[1,f,55],w:[1,f,56]},80:{h:[2,35],k:[2,35],l:[2,35],m:[2,35],n:[2,35],o:[2,35],p:[2,35],q:[2,35],r:[2,35],s:[2,35],t:[2,35],j:[2,35],g:[2,35],af:[2,35],u:[1,f,54],v:[1,f,55],w:[1,f,56]},81:{h:[2,37],k:[2,37],l:[2,37],m:[2,37],n:[2,37],o:[2,37],p:[2,37],q:[2,37],r:[2,37],s:[2,37],t:[2,37],u:[2,37],v:[2,37],w:[2,37],j:[2,37],g:[2,37],af:[2,37]},82:{h:[2,38],k:[2,38],l:[2,38],m:[2,38],n:[2,38],o:[2,38],p:[2,38],q:[2,38],r:[2,38],s:[2,38],t:[2,38],u:[2,38],v:[2,38],w:[2,38],j:[2,38],g:[2,38],af:[2,38]},83:{h:[2,39],k:[2,39],l:[2,39],m:[2,39],n:[2,39],o:[2,39],p:[2,39],q:[2,39],r:[2,39],s:[2,39],t:[2,39],u:[2,39],v:[2,39],w:[2,39],j:[2,39],g:[2,39],af:[2,39]},84:{h:[1,f,89]},85:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},86:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,60]},87:{ac:[1,f,93]},88:{h:[2,54],g:[2,54],ad:[2,54],ae:[2,54],k:[2,54],l:[2,54],m:[2,54],n:[2,54],o:[2,54],p:[2,54],q:[2,54],r:[2,54],s:[2,54],t:[2,54],u:[2,54],v:[2,54],w:[2,54],j:[2,54],af:[2,54]},89:{a:[2,11],e:[2,11],c:[2,11],f:[2,11],b:[2,11],d:[2,11]},90:{h:[2,51],g:[2,51]},91:{h:[2,17],g:[2,17]},92:{h:[2,14]},93:{ab:[1,f,85]},94:{h:[2,49],g:[2,49]}}};k.parse=function(E){var F=this.lexer,C,B,w,z=this.table,v=z.gotos,z=z.action,G=this.productions,u=[null],x=[0];for(F.resetInput(E);;){C=x[x.length-1];B||(B=F.lex());if(!B){return"it is not a valid input: "+E,"error",!1}w=z[C]&&z[C][B];if(!w){E=[];if(z[C]){for(var y in z[C]){E.push(this.lexer.mapReverseSymbol(y))}}F="Syntax error at line "+F.lineNumber+":\n"+F.showDebugInfo()+"\nexpect "+E.join(", ");F;return !1}switch(w[0]){case 1:x.push(B);u.push(F.text);x.push(w[2]);B=null;break;case 2:var D=G[w[1]];C=D.symbol||D[0];w=D.action||D[2];var A=(D.rhs||D[1]).length,m=0,t,D=u[u.length-A];t=f;for(this.$$=D;m<A;m++){this["$"+(A-m)]=u[u.length-1-m]}w&&(t=w.call(this));D=t!==f?t:this.$$;A&&(x=x.slice(0,-2*A),u=u.slice(0,-1*A));x.push(C);u.push(D);x.push(v[x[x.length-2]][x[x.length-1]]);break;case 0:return D}}return f};return k});KISSY.add("xtemplate/compiler/ast",[],function(c){var b={ProgramNode:function(f,d,g){this.lineNumber=f;this.statements=d;this.inverse=g}};b.ProgramNode.prototype.type="program";b.BlockNode=function(f,d,i,h){h=h.parts;c.equals(d.path.parts,h)||(h="Syntax error at line "+f+":\nexpect {{/"+d.path.parts+"}} not {{/"+h+"}}",h);this.lineNumber=f;this.tpl=d;this.program=i};b.BlockNode.prototype.type="block";b.TplNode=function(f,d,i,h){this.lineNumber=f;this.path=d;this.params=i;this.hash=h;this.escaped=!0;this.isInverted=!1};b.TplNode.prototype.type="tpl";b.TplExpressionNode=function(e,d){this.lineNumber=e;this.expression=d;this.escaped=!0};b.TplExpressionNode.prototype.type="tplExpression";b.ContentNode=function(e,d){this.lineNumber=e;this.value=d};b.ContentNode.prototype.type="content";b.UnaryExpression=function(e,d){this.value=d;this.unaryType=e};b.UnaryExpression.prototype.type="unaryExpression";b.MultiplicativeExpression=function(f,d,g){this.op1=f;this.opType=d;this.op2=g};b.MultiplicativeExpression.prototype.type="multiplicativeExpression";b.AdditiveExpression=function(f,d,g){this.op1=f;this.opType=d;this.op2=g};b.AdditiveExpression.prototype.type="additiveExpression";b.RelationalExpression=function(f,d,g){this.op1=f;this.opType=d;this.op2=g};b.RelationalExpression.prototype.type="relationalExpression";b.EqualityExpression=function(f,d,g){this.op1=f;this.opType=d;this.op2=g};b.EqualityExpression.prototype.type="equalityExpression";b.ConditionalAndExpression=function(e,d){this.op1=e;this.op2=d};b.ConditionalAndExpression.prototype.type="conditionalAndExpression";b.ConditionalOrExpression=function(e,d){this.op1=e;this.op2=d};b.ConditionalOrExpression.prototype.type="conditionalOrExpression";b.StringNode=function(e,d){this.lineNumber=e;this.value=d};b.StringNode.prototype.type="string";b.NumberNode=function(e,d){this.lineNumber=e;this.value=d};b.NumberNode.prototype.type="number";b.BooleanNode=function(e,d){this.lineNumber=e;this.value=d};b.BooleanNode.prototype.type="boolean";b.HashNode=function(f,d){var g={};this.lineNumber=f;c.each(d,function(e){g[e[0]]=e[1]});this.value=g};b.HashNode.prototype.type="hash";b.IdNode=function(f,d){var i=[],h=0;this.lineNumber=f;c.each(d,function(e){".."===e?h++:i.push(e)});this.parts=i;this.string=i.join(".");this.depth=h};b.IdNode.prototype.type="id";return b});KISSY.add("xtemplate/compiler",["xtemplate/runtime","./compiler/parser","./compiler/ast"],function(h,z){function x(b,c){b=c?y(b,!1):b.replace(/\\/g,"\\\\").replace(/'/g,"\\'");return b=b.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")}function y(b,c){return b.replace(c?B:k,function(e){e.length%2&&(e="\\"+e);return e})}function w(b,c){j.apply(b,c)}function q(b){return b[b.length-1]}var C=z("xtemplate/runtime"),r=z("./compiler/parser");r.yy=z("./compiler/ast");var B=/\\*"/g,k=/\\*'/g,j=[].push,l=0,A=0,D={genFunction:function(f,g){var m=[];g||m.push("function(scope) {");m.push('var buffer = ""'+(g?",":";"));if(g){m.push("config = this.config,engine = this,moduleWrap, utils = config.utils;");m.push('if (typeof module !== "undefined" && module.kissy) {moduleWrap = module;}');var i="",e,n=C.utils;for(e in n){i+=e+"Util = utils."+e+","}i&&m.push("var "+i.slice(0,i.length-1)+";")}if(f){i=0;for(e=f.length;i<e;i++){w(m,this[f[i].type](f[i]))}}m.push("return buffer;");return !g?(m.push("}"),m):{params:["scope","S","undefined"],source:m}},genIdOrInlineCommand:function(i,m){var s=[],n=i.depth,e,t=i.parts,o="id"+l++;if(0===n){var p=m&&this.genConfig(m);p&&(e=p[0],w(s,p[1]))}t=this.getIdStringFromIdParts(s,t);n||h.startsWith(t,"this.")?s.push("var "+o+' = getPropertyUtil(engine,scope,"'+t+'",'+n+","+i.lineNumber+");"):e?("include"===t&&s.push('if(moduleWrap) {require("'+m.params[0].value+'");'+e+".params[0] = moduleWrap.resolveByName("+e+".params[0]);}"),s.push("var "+o+" = runInlineCommandUtil(engine,scope,"+e+',"'+t+'",'+i.lineNumber+");")):s.push("var "+o+" = getPropertyOrRunCommandUtil(engine,scope,"+(e||"{}")+',"'+t+'",'+n+","+i.lineNumber+");");return[o,s]},genOpExpression:function(g,m){var o=[],e,p,n=this[g.op1.type](g.op1),i=this[g.op2.type](g.op2);e=n[0];p=i[0];if(e&&p){return w(o,n[1]),w(o,i[1]),o.push(e+m+p),["",o]}if(!e&&!p){return w(o,n[1].slice(0,-1)),w(o,i[1].slice(0,-1)),o.push("("+q(n[1])+")"+m+"("+q(i[1])+")"),["",o]}if(e&&!p){return w(o,n[1]),w(o,i[1].slice(0,-1)),o.push(e+m+"("+q(i[1])+")"),["",o]}if(!e&&p){return w(o,n[1].slice(0,-1)),w(o,i[1]),o.push("("+q(n[1])+")"+m+p),["",o]}},genConfig:function(g){var e=[],o,p,n=this;if(g){p=g.params;g=g.hash;if(p||g){o="config"+l++,e.push("var "+o+" = {};")}if(p){var m="params"+l++;e.push("var "+m+" = [];");h.each(p,function(b){b=n[b.type](b);b[0]?(w(e,b[1]),e.push(m+".push("+b[0]+");")):(w(e,b[1].slice(0,-1)),e.push(m+".push("+q(b[1])+");"))});e.push(o+".params="+m+";")}if(g){var i="hash"+l++;e.push("var "+i+" = {};");h.each(g.value,function(c,b){var f=n[c.type](c);f[0]?(w(e,f[1]),e.push(i+'["'+b+'"] = '+f[0]+";")):(w(e,f[1].slice(0,-1)),e.push(i+'["'+b+'"] = '+q(f[1])+";"))});e.push(o+".hash="+i+";")}}return[o,e]},conditionalOrExpression:function(b){return this.genOpExpression(b,"||")},conditionalAndExpression:function(b){return this.genOpExpression(b,"&&")},relationalExpression:function(b){return this.genOpExpression(b,b.opType)},equalityExpression:function(b){return this.genOpExpression(b,b.opType)},additiveExpression:function(b){return this.genOpExpression(b,b.opType)},multiplicativeExpression:function(b){return this.genOpExpression(b,b.opType)},unaryExpression:function(f){var e=[],g,i=f.unaryType,f=this[f.value.type](f.value);j.apply(e,f[1]);(g=f[0])?e.push(g+"="+i+g+";"):e[e.length-1]=""+i+q(e);return[g,e]},string:function(b){return["",["'"+x(b.value,!0)+"'"]]},number:function(b){return["",[b.value]]},"boolean":function(b){return["",[b.value]]},id:function(g){var f=[],m=g.depth,n=g.parts,i="id"+l++,n=this.getIdStringFromIdParts(f,n);f.push("var "+i+' = getPropertyUtil(engine,scope,"'+n+'",'+m+","+g.lineNumber+");");return[i,f]},block:function(i){var e=i.program,p=[],s=i.tpl,o=this.genConfig(s),i=o[0],n=s.path,m=n.string;w(p,o[1]);i||(i=h.guid("config"),p.push("var "+i+" = {};"));p.push(i+".fn="+this.genFunction(e.statements).join("\n")+";");e.inverse&&(e=this.genFunction(e.inverse).join("\n"),p.push(i+".inverse="+e+";"));s.isInverted&&(e="inverse"+l++,p.push("var "+e+"="+i+".fn;"),p.push(i+".fn = "+i+".inverse;"),p.push(i+".inverse = "+e+";"));if(!s.hash&&!s.params){s=n.parts;for(e=0;e<s.length;e++){if("string"!==typeof s[e]){m=this.getIdStringFromIdParts(p,s);break}}}p.push("buffer += runBlockCommandUtil(engine, scope, "+i+', "'+m+'", '+n.lineNumber+");");return p},content:function(b){return["buffer += '"+x(b.value,!1)+"';"]},tpl:function(e){var c=[],f=this.genIdOrInlineCommand(e.path,e);w(c,f[1]);c.push("buffer += renderOutputUtil("+f[0]+","+e.escaped+");");return c},tplExpression:function(f){var e=[],g=f.escaped,i;i=f.expression;f=f.expression.type;i="id"===f?this.genIdOrInlineCommand(i):this[f](i);i[0]?(w(e,i[1]),i=i[0]):(w(e,i[1].slice(0,-1)),i=q(i[1]));e.push("buffer += renderOutputUtil("+i+","+g+");");return e},getIdStringFromIdParts:function(m,e){var t="",p,s,o,n=!0;for(p=0;p<e.length;p++){s=e[p],o=s.type,n||(t+="."),o?(s=this[o](s),s[0]&&(w(m,s[1]),t+='"+'+s[0]+'+"',n=!0)):(t+=s,n=!1)}return t}},d;return d={parse:function(b){return r.parse(b)},compileToStr:function(b){b=this.compile(b);return"function("+b.params.join(",")+"){\n"+b.source.join("\n")+"}"},compile:function(b){b=this.parse(b);l=0;return D.genFunction(b.statements,!0)},compileToFn:function(g,f){var m=d.compile(g),f=f||{},i="sourceURL="+(f.name?f.name:"xtemplate"+A++)+".js";return Function.apply(null,[].concat(m.params).concat(m.source.join("\n")+"\n//@ "+i+"\n//# "+i))}}});
KISSY.add("event/dom/touch/handle-map",[],function(){return{}});KISSY.add("event/dom/touch/single-touch",[],function(e){function a(){}a.prototype={constructor:a,requiredTouchCount:1,onTouchStart:function(a){if(a.touches.length!==this.requiredTouchCount)return!1;a=this.lastTouches=a.touches;this.lastXY={pageX:a[0].pageX,pageY:a[0].pageY}},onTouchMove:e.noop,onTouchEnd:e.noop};return a});
KISSY.add("event/dom/touch/tap",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(d){d.preventDefault()}function h(){h.superclass.constructor.apply(this,arguments)}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./single-touch"),k=i.Object;e.extend(h,f,{onTouchMove:function(d){var a=this.lastXY,d=d.changedTouches[0];if(!d||5<Math.abs(d.pageX-a.pageX)||5<Math.abs(d.pageY-a.pageY))return!1},onTouchEnd:function(d){var a=d.changedTouches[0],b=d.target,n=new k({type:"tap",
target:b,currentTarget:b});e.mix(n,{pageX:a.pageX,pageY:a.pageY,originalEvent:d.originalEvent,which:1,touch:a});i.fire(b,"tap",n);if(n.isDefaultPrevented())i.on(b,"click",{fn:c,once:1})}});g.tap={handle:new h};return h});
KISSY.add("event/dom/touch/swipe",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(b,a,f){var g=a.changedTouches[0],q=g.pageX-b.startX,m=g.pageY-b.startY,j=Math.abs(q),r=Math.abs(m);if(f){if(b.isVertical&&b.isHorizontal){if(5>Math.max(j,r))return;r>j?b.isHorizontal=0:b.isVertical=0}}else if(b.isVertical&&r<l&&(b.isVertical=0),b.isHorizontal&&j<l)b.isHorizontal=0;if(b.isHorizontal)q=0>q?"left":"right";else if(b.isVertical)q=0>m?"up":"down",j=r;else return!1;i.fire(a.target,
f?d:k,{originalEvent:a.originalEvent,pageX:g.pageX,pageY:g.pageY,which:1,touch:g,direction:q,distance:j,duration:(a.timeStamp-b.startTime)/1E3})}function h(){}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./single-touch"),k="swipe",d="swiping",l=50;e.extend(h,f,{onTouchStart:function(b){if(!1===h.superclass.onTouchStart.apply(this,arguments))return!1;var a=b.touches[0];this.startTime=b.timeStamp;this.isVertical=this.isHorizontal=1;this.startX=a.pageX;this.startY=a.pageY;-1!==b.type.indexOf("mouse")&&
b.preventDefault()},onTouchMove:function(b){var a=b.changedTouches[0],d=a.pageY-this.startY,a=Math.abs(a.pageX-this.startX),d=Math.abs(d);if(1E3<b.timeStamp-this.startTime)return!1;this.isVertical&&35<a&&(this.isVertical=0);this.isHorizontal&&35<d&&(this.isHorizontal=0);return c(this,b,1)},onTouchEnd:function(a){return!1===this.onTouchMove(a)?!1:c(this,a,0)}});g[k]=g[d]={handle:new h};return h});
KISSY.add("event/dom/touch/double-tap",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(){}var h=a("./handle-map"),g=a("event/dom/base"),i=a("./single-touch");e.extend(c,i,{onTouchStart:function(a){if(!1===c.superclass.onTouchStart.apply(this,arguments))return!1;this.startTime=a.timeStamp;this.singleTapTimer&&(clearTimeout(this.singleTapTimer),this.singleTapTimer=0)},onTouchMove:function(){return!1},onTouchEnd:function(a){var i=this.lastEndTime,d=a.timeStamp,e=a.target,
b=a.changedTouches[0],c=d-this.startTime;this.lastEndTime=d;if(i&&(c=d-i,300>c)){this.lastEndTime=0;g.fire(e,"doubleTap",{touch:b,duration:c/1E3});return}c=d-this.startTime;300<c?g.fire(e,"singleTap",{touch:b,pageX:b.pageX,which:1,pageY:b.pageY,duration:c/1E3}):this.singleTapTimer=setTimeout(function(){g.fire(e,"singleTap",{touch:b,pageX:b.pageX,which:1,pageY:b.pageY,duration:c/1E3})},300)}});h.singleTap=h.doubleTap={handle:new c};return c});
KISSY.add("event/dom/touch/multi-touch",["dom"],function(e,a){function c(){}var h=a("dom");c.prototype={constructor:c,requiredTouchCount:2,onTouchStart:function(a){var i=this.requiredTouchCount,c=a.touches.length;c===i?this.start():c>i&&this.end(a)},onTouchEnd:function(a){this.end(a)},start:function(){this.isTracking||(this.isTracking=!0,this.isStarted=!1)},fireEnd:e.noop,getCommonTarget:function(a){var c=a.touches,a=c[0].target,c=c[1].target;if(a===c||h.contains(a,c))return a;for(;;){if(h.contains(c,
a))return c;c=c.parentNode}"getCommonTarget error!"},end:function(a){this.isTracking&&(this.isTracking=!1,this.isStarted&&(this.isStarted=!1,this.fireEnd(a)))}};return c});
KISSY.add("event/dom/touch/pinch",["./handle-map","event/dom/base","./multi-touch"],function(e,a){function c(){}function h(a){2===a.touches.length&&a.preventDefault()}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./multi-touch");e.extend(c,f,{onTouchMove:function(a){if(this.isTracking){var d=a.touches;if(0<d[0].pageX&&0<d[0].pageY&&0<d[1].pageX&&0<d[1].pageY){var c,b=d[0],f=d[1];c=b.pageX-f.pageX;b=b.pageY-f.pageY;c=Math.sqrt(c*c+b*b);this.lastTouches=d;this.isStarted?i.fire(this.target,"pinch",
e.mix(a,{distance:c,scale:c/this.startDistance})):(this.isStarted=!0,this.startDistance=c,d=this.target=this.getCommonTarget(a),i.fire(d,"pinchStart",e.mix(a,{distance:c,scale:1})))}}},fireEnd:function(a){i.fire(this.target,"pinchEnd",e.mix(a,{touches:this.lastTouches}))}});f=new c;g.pinchStart=g.pinchEnd={handle:f};g.pinch={handle:f,setup:function(){i.on(this,"touchmove",h)},tearDown:function(){i.detach(this,"touchmove",h)}};return c});
KISSY.add("event/dom/touch/tap-hold",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(){}var h=a("./handle-map"),g=a("event/dom/base"),i=a("./single-touch");e.extend(c,i,{onTouchStart:function(a){if(!1===c.superclass.onTouchStart.call(this,a))return!1;this.timer=setTimeout(function(){var c=a.touches[0];g.fire(a.target,"tapHold",{touch:c,pageX:c.pageX,pageY:c.pageY,which:1,duration:(e.now()-a.timeStamp)/1E3})},1E3)},onTouchMove:function(){clearTimeout(this.timer);return!1},
onTouchEnd:function(){clearTimeout(this.timer)}});h.tapHold={handle:new c};return c});
KISSY.add("event/dom/touch/rotate",["./handle-map","event/dom/base","./multi-touch"],function(e,a){function c(){}function h(a){2===a.touches.length&&a.preventDefault()}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./multi-touch"),k=180/Math.PI;e.extend(c,f,{onTouchMove:function(a){if(this.isTracking){var c=a.touches,b=c[0],f=c[1],g=this.lastAngle,b=Math.atan2(f.pageY-b.pageY,f.pageX-b.pageX)*k;if(void 0!==g){var f=Math.abs(b-g),h=(b+360)%360,q=(b-360)%360;Math.abs(h-g)<f?b=h:Math.abs(q-g)<f&&
(b=q)}this.lastTouches=c;this.lastAngle=b;this.isStarted?i.fire(this.target,"rotate",e.mix(a,{angle:b,rotation:b-this.startAngle})):(this.isStarted=!0,this.startAngle=b,this.target=this.getCommonTarget(a),i.fire(this.target,"rotateStart",e.mix(a,{angle:b,rotation:0})))}},end:function(){this.lastAngle=void 0;c.superclass.end.apply(this,arguments)},fireEnd:function(a){i.fire(this.target,"rotateEnd",e.mix(a,{touches:this.lastTouches}))}});f=new c;g.rotateEnd=g.rotateStart={handle:f};g.rotate={handle:f,
setup:function(){i.on(this,"touchmove",h)},tearDown:function(){i.detach(this,"touchmove",h)}};return c});
KISSY.add("event/dom/touch/handle","dom,./handle-map,event/dom/base,./tap,./swipe,./double-tap,./pinch,./tap-hold,./rotate".split(","),function(e,a){function c(a){return e.startsWith(a,"touch")}function h(a){return e.startsWith(a,"mouse")}function g(a){return e.startsWith(a,"MSPointer")||e.startsWith(a,"pointer")}function i(a){this.doc=a;this.eventHandle={};this.init();this.touches=[];this.inTouch=0}var f=a("dom"),k=a("./handle-map"),d=a("event/dom/base");a("./tap");a("./swipe");a("./double-tap");
a("./pinch");a("./tap-hold");a("./rotate");var l=e.guid("touch-handle"),b=e.Features,n,p,o;if(b.isTouchEventSupported())if(e.UA.ios){o="touchend touchcancel";n="touchstart";p="touchmove"}else{o="touchend touchcancel mouseup";n="touchstart mousedown";p="touchmove mousemove"}else if(b.isPointerSupported()){n="pointerdown";p="pointermove";o="pointerup pointercancel"}else if(b.isMsPointerSupported()){n="MSPointerDown";p="MSPointerMove";o="MSPointerUp MSPointerCancel"}else{n="mousedown";p="mousemove";
o="mouseup"}i.prototype={constructor:i,lastTouches:[],firstTouch:null,init:function(){var a=this.doc;d.on(a,n,this.onTouchStart,this);if(!g(p))d.on(a,p,this.onTouchMove,this);d.on(a,o,this.onTouchEnd,this)},addTouch:function(a){a.identifier=a.pointerId;this.touches.push(a)},removeTouch:function(a){for(var m=0,c=a.pointerId,b=this.touches,d=b.length;m<d;m++){a=b[m];if(a.pointerId===c){b.splice(m,1);break}}},updateTouch:function(a){for(var c=0,j,b=a.pointerId,d=this.touches,e=d.length;c<e;c++){j=d[c];
j.pointerId===b&&(d[c]=a)}},isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(this.firstTouch===null)this.firstTouch=a.identifier},removePrimaryTouch:function(a){if(this.isPrimaryTouch(a))this.firstTouch=null},dupMouse:function(a){var c=this.lastTouches,a=a.changedTouches[0];if(this.isPrimaryTouch(a)){var b={x:a.clientX,y:a.clientY};c.push(b);setTimeout(function(){var a=c.indexOf(b);a>-1&&c.splice(a,1)},2500)}},isEventSimulatedFromTouch:function(a){for(var c=
this.lastTouches,b=a.clientX,a=a.clientY,d=0,e=c.length,f;d<e&&(f=c[d]);d++){var g=Math.abs(b-f.x),h=Math.abs(a-f.y);if(g<=25&&h<=25)return true}return 0},normalize:function(a){var b=a.type,j;if(c(b)){j=b==="touchend"||b==="touchcancel"?a.changedTouches:a.touches;if(j.length===1){a.which=1;a.pageX=j[0].pageX;a.pageY=j[0].pageY}return a}j=this.touches;b=!b.match(/(up|cancel)$/i);a.touches=b?j:[];a.targetTouches=b?j:[];a.changedTouches=j;return a},onTouchStart:function(a){var b,j;j=a.type;var e=this.eventHandle;
if(c(j)){this.setPrimaryTouch(a.changedTouches[0]);this.dupMouse(a)}else if(h(j)){if(this.isEventSimulatedFromTouch(a))return;this.touches=[a.originalEvent]}else if(g(j)){this.addTouch(a.originalEvent);if(this.touches.length===1)d.on(this.doc,p,this.onTouchMove,this)}else throw Error("unrecognized touch event: "+a.type);for(b in e){j=e[b].handle;j.isActive=1}this.callEventHandle("onTouchStart",a)},onTouchMove:function(a){var b=a.type;if(h(b)){if(this.isEventSimulatedFromTouch(b))return;this.touches=
[a.originalEvent]}else if(g(b))this.updateTouch(a.originalEvent);else if(!c(b))throw Error("unrecognized touch event: "+a.type);this.callEventHandle("onTouchMove",a)},onTouchEnd:function(a){var b=this,j=a.type;if(!h(j)||!b.isEventSimulatedFromTouch(a)){b.callEventHandle("onTouchEnd",a);if(c(j)){b.dupMouse(a);e.makeArray(a.changedTouches).forEach(function(a){b.removePrimaryTouch(a)})}else if(h(j))b.touches=[];else if(g(j)){b.removeTouch(a.originalEvent);b.touches.length||d.detach(b.doc,p,b.onTouchMove,
b)}}},callEventHandle:function(a,b){var c=this.eventHandle,d,e,b=this.normalize(b);if(b.changedTouches.length){for(d in c){e=c[d].handle;if(!e.processed){e.processed=1;if(e.isActive&&e[a]&&e[a](b)===false)e.isActive=0}}for(d in c){e=c[d].handle;e.processed=0}}},addEventHandle:function(a){var b=this.eventHandle,c=k[a].handle;b[a]?b[a].count++:b[a]={count:1,handle:c}},removeEventHandle:function(a){var b=this.eventHandle;if(b[a]){b[a].count--;b[a].count||delete b[a]}},destroy:function(){var a=this.doc;
d.detach(a,n,this.onTouchStart,this);d.detach(a,p,this.onTouchMove,this);d.detach(a,o,this.onTouchEnd,this)}};return{addDocumentHandle:function(a,b){var c=f.getDocument(a),d=f.data(c,l);d||f.data(c,l,d=new i(c));b&&d.addEventHandle(b)},removeDocumentHandle:function(a,b){var c=f.getDocument(a),d=f.data(c,l);if(d){b&&d.removeEventHandle(b);if(e.isEmptyObject(d.eventHandle)){d.destroy();f.removeData(c,l)}}}}});
KISSY.add("event/dom/touch",["event/dom/base","./touch/handle-map","./touch/handle"],function(e,a){function c(a){d.addDocumentHandle(this,a);k[a].setup.apply(this,arguments)}function h(a){d.removeDocumentHandle(this,a);k[a].tearDown.apply(this,arguments)}function g(a){d.addDocumentHandle(this,a)}function i(a){d.removeDocumentHandle(this,a)}var f=a("event/dom/base"),k=a("./touch/handle-map"),d=a("./touch/handle"),l=f.Gesture,b=l.start="KSPointerDown",n=l.move="KSPointerMove",p=l.end="KSPointerUp";
l.tap="tap";l.doubleTap="doubleTap";k[b]={handle:{isActive:1,onTouchStart:function(a){f.fire(a.target,b,a)}}};k[n]={handle:{isActive:1,onTouchMove:function(a){f.fire(a.target,n,a)}}};k[p]={handle:{isActive:1,onTouchEnd:function(a){f.fire(a.target,p,a)}}};var l=f.Special,o,q,m;for(q in k)o={},m=k[q],o.setup=m.setup?c:g,o.tearDown=m.tearDown?h:i,m.add&&(o.add=m.add),m.remove&&(o.remove=m.remove),l[q]=o});
KISSY.add("cookie",[],function(b){function f(c){return"string"===typeof c&&""!==c}var h=b.Env.host.document,j=encodeURIComponent,g=b.urlDecode;b.Cookie={get:function(c){var a,d;if(f(c)&&(d=(""+h.cookie).match(RegExp("(?:^| )"+c+"(?:(?:=([^;]*))|;|$)"))))a=d[1]?g(d[1]):"";return a},set:function(c,a,d,b,i,g){var a=""+j(a),e=d;"number"===typeof e&&(e=new Date,e.setTime(e.getTime()+864E5*d));e instanceof Date&&(a+="; expires="+e.toUTCString());f(b)&&(a+="; domain="+b);f(i)&&(a+="; path="+i);g&&(a+="; secure");
h.cookie=c+"="+a},remove:function(c,a,d,b){this.set(c,"",-1,a,d,b)}};return b.Cookie});
KISSY.add("json/quote",[],function(o){var h={"":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},j={},k=/["\b\f\n\r\t\x00-\x1f]/g,m=/\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;o.each(h,function(f,b){j[b]=f});j["\\/"]="/";return{quote:function(f){return'"'+f.replace(k,function(b){var a;if(!(a=h[b]))a="\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4);return a})+'"'},unQuote:function(f){return f.slice(1,f.length-1).replace(m,function(b){var a;if(!(a=j[b]))a=String.fromCharCode(parseInt(b.slice(2),
16));return a})}}});
KISSY.add("json/stringify",["./quote"],function(o,h){function j(f){return 10>f?"0"+f:f}function k(f,b,a,c,e,s,g){var d=b[f];if(d&&"object"===typeof d)if("function"===typeof d.toJSON)d=d.toJSON(f);else if(d instanceof Date)d=isFinite(d.valueOf())?d.getUTCFullYear()+"-"+j(d.getUTCMonth()+1)+"-"+j(d.getUTCDate())+"T"+j(d.getUTCHours())+":"+j(d.getUTCMinutes())+":"+j(d.getUTCSeconds())+"Z":null;else if(d instanceof String||d instanceof Number||d instanceof Boolean)d=d.valueOf();void 0!==a&&(d=a.call(b,
f,d));switch(typeof d){case "number":return isFinite(d)?""+d:"null";case "string":return m.quote(d);case "boolean":return""+d;case "object":if(d)if(o.isArray(d)){for(var f=d,b=g,g=g+e,d=[],h=f.length,p=0;p<h;){var l=k(""+p,f,a,c,e,s,g);d[d.length]=void 0===l?"null":l;++p}d.length?e?(a=d.join("\n,"+g),a="[\n"+g+a+"\n"+b+"]"):a="["+d.join(",")+"]":a="[]"}else{for(var f=d,b=g,g=g+e,i,d=void 0!==c?c:o.keys(f),l=[],p=0,h=d.length;p<h;p++){i=d[p];var t=k(i,f,a,c,e,s,g);void 0!==t&&(i=m.quote(i),i+=":",
e&&(i+=" "),i+=t,l[l.length]=i)}l.length?e?(a=l.join(",\n"+g),a="{\n"+g+a+"\n"+b+"}"):a="{"+l.join(",")+"}":a="{}"}else a="null";return a}}var m=h("./quote");return function(f,b,a){var c="",e,h;b&&("function"===typeof b?h=b:o.isArray(b)&&(e=b));"number"===typeof a?(a=Math.min(10,a),c=Array(a+1).join(" ")):"string"===typeof a&&(c=a.slice(0,10));return k("",{"":f},h,e,c,[],"")}});
KISSY.add("json/parser",[],function(o,h){var j={},k=KISSY,m=function(b){this.rules=[];k.mix(this,b);this.resetInput(this.input)};m.prototype={constructor:function(b){this.rules=[];k.mix(this,b);this.resetInput(this.input)},resetInput:function(b){k.mix(this,{input:b,matched:"",stateStack:[m.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var b=this.stateStack[this.stateStack.length-1],a=[],b=this.mapState(b);k.each(this.rules,
function(c){var e=c.state||c[3];e?k.inArray(b,e)&&a.push(c):b==m.STATIC.INITIAL&&a.push(c)});return a},pushState:function(b){this.stateStack.push(b)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var b=m.STATIC.DEBUG_CONTEXT_LIMIT,a=this.matched,c=this.match,e=this.input,a=a.slice(0,a.length-c.length),a=(a.length>b?"...":"")+a.slice(-b).replace(/\n/," "),c=c+e,c=c.slice(0,b)+(c.length>b?"...":"");return a+c+"\n"+Array(a.length+
1).join("-")+"^"},mapSymbol:function(b){var a=this.symbolMap;return!a?b:a[b]||(a[b]=++this.symbolId)},mapReverseSymbol:function(b){var a=this.symbolMap,c,e=this.reverseSymbolMap;if(!e&&a)for(c in e=this.reverseSymbolMap={},a)e[a[c]]=c;return e?e[b]:b},mapState:function(b){var a=this.stateMap;return!a?b:a[b]||(a[b]=++this.stateId)},lex:function(){var b=this.input,a,c,e,f=this.getCurrentRules();this.match=this.text="";if(!b)return this.mapSymbol(m.STATIC.END_TAG);for(a=0;a<f.length;a++){c=f[a];var g=
c.token||c[0];e=c.action||c[2]||h;if(c=b.match(c.regexp||c[1])){if(a=c[0].match(/\n.*/g))this.lineNumber+=a.length;k.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:a?a[a.length-1].length-1:this.lastColumn+c[0].length});a=this.match=c[0];this.matches=c;this.text=a;this.matched+=a;e=e&&e.call(this);e=e===h?g:this.mapSymbol(e);this.input=b=b.slice(a.length);return e?e:this.lex()}}"lex error at line "+this.lineNumber+":\n"+this.showDebugInfo();return h}};
m.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var f=new m({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});j.lexer=f;f.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,
json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};j.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],
[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var b={};b[this.$1.key]=this.$1.value;return b}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];j.table={gotos:{"0":{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},
action:{"0":{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,
10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,
0],8:[2,14,0]}}};j.parse=function(b){var a=this,c=a.lexer,e,f,g,d=a.table,j=d.gotos,d=d.action,m=a.productions,l=[null],i=[0];for(c.resetInput(b);;){e=i[i.length-1];f||(f=c.lex());if(!f)return"it is not a valid input: "+b,"error",!1;g=d[e]&&d[e][f];if(!g){var o=[];d[e]&&k.each(d[e],function(b,c){o.push(a.lexer.mapReverseSymbol(c))});b="Syntax error at line "+c.lineNumber+":\n"+c.showDebugInfo()+"\nexpect "+o.join(", ");b;return!1}switch(g[0]){case 1:i.push(f);l.push(c.text);i.push(g[2]);f=null;break;
case 2:var n=m[g[1]];e=n.symbol||n[0];g=n.action||n[2];var q=(n.rhs||n[1]).length,r=0,n=l[l.length-q];a.$$=n;for(n=h;r<q;r++)a["$"+(q-r)]=l[l.length-1-r];g&&(n=g.call(a));n=n!==h?n:a.$$;q&&(i=i.slice(0,-2*q),l=l.slice(0,-1*q));i.push(e);l.push(n);i.push(j[i[i.length-2]][i[i.length-1]]);break;case 0:return n}}return h};return j});
KISSY.add("json/parse",["./parser","./quote"],function(o,h){function j(f,b,a){var c=f[b],e,h,g;if("object"===typeof c)if(o.isArray(c)){e=0;h=c.length;for(var d=[];e<h;)g=j(c,""+e,a),void 0!==g&&(d[d.length]=g);c=d}else{d=o.keys(c);e=0;for(h=d.length;e<h;e++){var k=d[e];g=j(c,k,a);void 0===g?delete c[k]:c[k]=g}}return a.call(f,b,c)}var k=h("./parser"),m=h("./quote");k.yy={unQuote:m.unQuote};return function(f,b){var a=k.parse(""+f);return b?j({"":a},"",b):a}});
KISSY.add("json",["./json/stringify","./json/parse"],function(o,h){var j=h("./json/stringify"),k=h("./json/parse");return o.JSON={stringify:j,parse:k}});
KISSY.add("dom/class-list",["dom/base"],function(g,i){var j=i("dom/base"),h=/[\n\t\r]/g;return g.mix(j,{_hasClass:function(f,d){var a=f.className,e,b;if(a){a=(" "+a+" ").replace(h," ");b=0;for(e=d.length;b<e;b++)if(0>a.indexOf(" "+d[b]+" "))return!1;return!0}return!1},_addClass:function(f,d){var a=f.className,e,b=d.length,c;if(a){e=(" "+a+" ").replace(h," ");for(c=0;c<b;c++)0>e.indexOf(" "+d[c]+" ")&&(a+=" "+d[c]);a=g.trim(a)}else a=d.join(" ");f.className=a},_removeClass:function(f,d){var a=f.className,
e=d.length,b,c;if(a&&e){a=(" "+a+" ").replace(h," ");for(b=0;b<e;b++)for(c=" "+d[b]+" ";0<=a.indexOf(c);)a=a.replace(c," ");f.className=g.trim(a)}},_toggleClass:function(f,d,a){var e,b,c,g=[],h=[],i=d.length;for(e=0;e<i;e++)b=d[e],c=(c=this._hasClass(f,[b]))?!0!==a&&"remove":!1!==a&&"add","remove"===c?g.push(b):"add"===c&&h.push(b);h.length&&this._addClass(f,h);g.length&&this._removeClass(f,g)}})});
KISSY.add("dom/selector/parser",[],function(D,x){var v={},s=KISSY,k=function(d){this.rules=[];s.mix(this,d);this.resetInput(this.input)};k.prototype={constructor:function(d){this.rules=[];s.mix(this,d);this.resetInput(this.input)},resetInput:function(d){s.mix(this,{input:d,matched:"",stateStack:[k.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var d=this.stateStack[this.stateStack.length-1],f=[],d=this.mapState(d);s.each(this.rules,
function(e){var g=e.state||e[3];g?s.inArray(d,g)&&f.push(e):d===k.STATIC.INITIAL&&f.push(e)});return f},pushState:function(d){this.stateStack.push(d)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var d=k.STATIC.DEBUG_CONTEXT_LIMIT,f=this.matched,e=this.match,g=this.input,f=f.slice(0,f.length-e.length),f=(f.length>d?"...":"")+f.slice(-d).replace(/\n/," "),e=e+g,e=e.slice(0,d)+(e.length>d?"...":"");return f+e+"\n"+Array(f.length+
1).join("-")+"^"},mapSymbol:function(d){var f=this.symbolMap;return!f?d:f[d]||(f[d]=++this.symbolId)},mapReverseSymbol:function(d){var f=this.symbolMap,e,g=this.reverseSymbolMap;if(!g&&f)for(e in g=this.reverseSymbolMap={},f)g[f[e]]=e;return g?g[d]:d},mapState:function(d){var f=this.stateMap;return!f?d:f[d]||(f[d]=++this.stateId)},lex:function(){var d=this.input,f,e,g,E=this.getCurrentRules();this.match=this.text="";if(!d)return this.mapSymbol(k.STATIC.END_TAG);for(f=0;f<E.length;f++){e=E[f];var n=
e.token||e[0];g=e.action||e[2]||x;if(e=d.match(e.regexp||e[1])){if(f=e[0].match(/\n.*/g))this.lineNumber+=f.length;s.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:f?f[f.length-1].length-1:this.lastColumn+e[0].length});f=this.match=e[0];this.matches=e;this.text=f;this.matched+=f;g=g&&g.call(this);g=g===x?n:this.mapSymbol(g);this.input=d=d.slice(f.length);return g?g:this.lex()}}"lex error at line "+this.lineNumber+":\n"+this.showDebugInfo();return x}};
k.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var o=new k({rules:[[2,/^\[(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[3,/^(?:[\t\r\n\f\x20]*)\]/,function(){this.text=KISSY.trim(this.text)}],[4,/^(?:[\t\r\n\f\x20]*)~=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[5,/^(?:[\t\r\n\f\x20]*)\|=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[6,/^(?:[\t\r\n\f\x20]*)\^=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],
[7,/^(?:[\t\r\n\f\x20]*)\$=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[8,/^(?:[\t\r\n\f\x20]*)\*=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[9,/^(?:[\t\r\n\f\x20]*)\=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[10,/^(?:(?:[\w]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))(?:[\w\d-]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))*)\(/,function(){this.text=KISSY.trim(this.text).slice(0,-1);this.pushState("fn")}],[11,/^[^\)]*/,function(){this.popState()},
["fn"]],[12,/^(?:[\t\r\n\f\x20]*)\)/,function(){this.text=KISSY.trim(this.text)}],[13,/^:not\((?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[14,/^(?:(?:[\w]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))(?:[\w\d-]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))*)/,function(){this.text=this.yy.unEscape(this.text)}],[15,/^"(\\"|[^"])*"/,function(){this.text=this.yy.unEscapeStr(this.text)}],[15,/^'(\\'|[^'])*'/,function(){this.text=this.yy.unEscapeStr(this.text)}],[16,/^#(?:(?:[\w\d-]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))+)/,
function(){this.text=this.yy.unEscape(this.text.slice(1))}],[17,/^\.(?:(?:[\w]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))(?:[\w\d-]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))*)/,function(){this.text=this.yy.unEscape(this.text.slice(1))}],[18,/^(?:[\t\r\n\f\x20]*),(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[19,/^::?/,0],[20,/^(?:[\t\r\n\f\x20]*)\+(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[21,/^(?:[\t\r\n\f\x20]*)>(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],
[22,/^(?:[\t\r\n\f\x20]*)~(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[23,/^\*/,0],[24,/^(?:[\t\r\n\f\x20]+)/,0],[25,/^./,0]]});v.lexer=o;o.symbolMap={$EOF:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,INCLUDES:4,DASH_MATCH:5,PREFIX_MATCH:6,SUFFIX_MATCH:7,SUBSTRING_MATCH:8,ALL_MATCH:9,FUNCTION:10,PARAMETER:11,RIGHT_PARENTHESES:12,NOT:13,IDENT:14,STRING:15,HASH:16,CLASS:17,COMMA:18,COLON:19,PLUS:20,GREATER:21,TILDE:22,UNIVERSAL:23,S:24,INVALID:25,$START:26,selectors_group:27,selector:28,simple_selector_sequence:29,
combinator:30,type_selector:31,id_selector:32,class_selector:33,attrib_match:34,attrib:35,attrib_val:36,pseudo:37,negation:38,negation_arg:39,suffix_selector:40,suffix_selectors:41};v.productions=[[26,[27]],[27,[28],function(){return[this.$1]}],[27,[27,18,28],function(){this.$1.push(this.$3)}],[28,[29]],[28,[28,30,29],function(){this.$1.nextCombinator=this.$3.prevCombinator=this.$2;this.$3.order=(this.$1.order=this.$1.order||0)+1;this.$3.prev=this.$1;return this.$1.next=this.$3}],[30,[20]],[30,[21]],
[30,[22]],[30,[24],function(){return" "}],[31,[14],function(){return{t:"tag",value:this.$1}}],[31,[23],function(){return{t:"tag",value:this.$1}}],[32,[16],function(){return{t:"id",value:this.$1}}],[33,[17],function(){return{t:"cls",value:this.$1}}],[34,[6]],[34,[7]],[34,[8]],[34,[9]],[34,[4]],[34,[5]],[35,[2,14,3],function(){return{t:"attrib",value:{ident:this.$2}}}],[36,[14]],[36,[15]],[35,[2,14,34,36,3],function(){return{t:"attrib",value:{ident:this.$2,match:this.$3,value:this.$4}}}],[37,[19,10,
11,12],function(){return{t:"pseudo",value:{fn:this.$2.toLowerCase(),param:this.$3}}}],[37,[19,14],function(){return{t:"pseudo",value:{ident:this.$2.toLowerCase()}}}],[38,[13,39,12],function(){return{t:"pseudo",value:{fn:"not",param:this.$2}}}],[39,[31]],[39,[32]],[39,[33]],[39,[35]],[39,[37]],[40,[32]],[40,[33]],[40,[35]],[40,[37]],[40,[38]],[41,[40],function(){return[this.$1]}],[41,[41,40],function(){this.$1.push(this.$2)}],[29,[31]],[29,[41],function(){return{suffix:this.$1}}],[29,[31,41],function(){return{t:"tag",
value:this.$1.value,suffix:this.$2}}]];v.table={gotos:{"0":{27:8,28:9,29:10,31:11,32:12,33:13,35:14,37:15,38:16,40:17,41:18},2:{31:20,32:21,33:22,35:23,37:24,39:25},9:{30:33},11:{32:12,33:13,35:14,37:15,38:16,40:17,41:34},18:{32:12,33:13,35:14,37:15,38:16,40:35},19:{34:43},28:{28:46,29:10,31:11,32:12,33:13,35:14,37:15,38:16,40:17,41:18},33:{29:47,31:11,32:12,33:13,35:14,37:15,38:16,40:17,41:18},34:{32:12,33:13,35:14,37:15,38:16,40:35},43:{36:50},46:{30:33}},action:{"0":{2:[1,0,1],13:[1,0,2],14:[1,
0,3],16:[1,0,4],17:[1,0,5],19:[1,0,6],23:[1,0,7]},1:{14:[1,0,19]},2:{2:[1,0,1],14:[1,0,3],16:[1,0,4],17:[1,0,5],19:[1,0,6],23:[1,0,7]},3:{1:[2,9,0],2:[2,9,0],12:[2,9,0],13:[2,9,0],16:[2,9,0],17:[2,9,0],18:[2,9,0],19:[2,9,0],20:[2,9,0],21:[2,9,0],22:[2,9,0],24:[2,9,0]},4:{1:[2,11,0],2:[2,11,0],12:[2,11,0],13:[2,11,0],16:[2,11,0],17:[2,11,0],18:[2,11,0],19:[2,11,0],20:[2,11,0],21:[2,11,0],22:[2,11,0],24:[2,11,0]},5:{1:[2,12,0],2:[2,12,0],12:[2,12,0],13:[2,12,0],16:[2,12,0],17:[2,12,0],18:[2,12,0],19:[2,
12,0],20:[2,12,0],21:[2,12,0],22:[2,12,0],24:[2,12,0]},6:{10:[1,0,26],14:[1,0,27]},7:{1:[2,10,0],2:[2,10,0],12:[2,10,0],13:[2,10,0],16:[2,10,0],17:[2,10,0],18:[2,10,0],19:[2,10,0],20:[2,10,0],21:[2,10,0],22:[2,10,0],24:[2,10,0]},8:{1:[0,0,0],18:[1,0,28]},9:{1:[2,1,0],18:[2,1,0],20:[1,0,29],21:[1,0,30],22:[1,0,31],24:[1,0,32]},10:{1:[2,3,0],18:[2,3,0],20:[2,3,0],21:[2,3,0],22:[2,3,0],24:[2,3,0]},11:{1:[2,38,0],2:[1,0,1],13:[1,0,2],16:[1,0,4],17:[1,0,5],18:[2,38,0],19:[1,0,6],20:[2,38,0],21:[2,38,0],
22:[2,38,0],24:[2,38,0]},12:{1:[2,31,0],2:[2,31,0],13:[2,31,0],16:[2,31,0],17:[2,31,0],18:[2,31,0],19:[2,31,0],20:[2,31,0],21:[2,31,0],22:[2,31,0],24:[2,31,0]},13:{1:[2,32,0],2:[2,32,0],13:[2,32,0],16:[2,32,0],17:[2,32,0],18:[2,32,0],19:[2,32,0],20:[2,32,0],21:[2,32,0],22:[2,32,0],24:[2,32,0]},14:{1:[2,33,0],2:[2,33,0],13:[2,33,0],16:[2,33,0],17:[2,33,0],18:[2,33,0],19:[2,33,0],20:[2,33,0],21:[2,33,0],22:[2,33,0],24:[2,33,0]},15:{1:[2,34,0],2:[2,34,0],13:[2,34,0],16:[2,34,0],17:[2,34,0],18:[2,34,
0],19:[2,34,0],20:[2,34,0],21:[2,34,0],22:[2,34,0],24:[2,34,0]},16:{1:[2,35,0],2:[2,35,0],13:[2,35,0],16:[2,35,0],17:[2,35,0],18:[2,35,0],19:[2,35,0],20:[2,35,0],21:[2,35,0],22:[2,35,0],24:[2,35,0]},17:{1:[2,36,0],2:[2,36,0],13:[2,36,0],16:[2,36,0],17:[2,36,0],18:[2,36,0],19:[2,36,0],20:[2,36,0],21:[2,36,0],22:[2,36,0],24:[2,36,0]},18:{1:[2,39,0],2:[1,0,1],13:[1,0,2],16:[1,0,4],17:[1,0,5],18:[2,39,0],19:[1,0,6],20:[2,39,0],21:[2,39,0],22:[2,39,0],24:[2,39,0]},19:{3:[1,0,36],4:[1,0,37],5:[1,0,38],
6:[1,0,39],7:[1,0,40],8:[1,0,41],9:[1,0,42]},20:{12:[2,26,0]},21:{12:[2,27,0]},22:{12:[2,28,0]},23:{12:[2,29,0]},24:{12:[2,30,0]},25:{12:[1,0,44]},26:{11:[1,0,45]},27:{1:[2,24,0],2:[2,24,0],12:[2,24,0],13:[2,24,0],16:[2,24,0],17:[2,24,0],18:[2,24,0],19:[2,24,0],20:[2,24,0],21:[2,24,0],22:[2,24,0],24:[2,24,0]},28:{2:[1,0,1],13:[1,0,2],14:[1,0,3],16:[1,0,4],17:[1,0,5],19:[1,0,6],23:[1,0,7]},29:{2:[2,5,0],13:[2,5,0],14:[2,5,0],16:[2,5,0],17:[2,5,0],19:[2,5,0],23:[2,5,0]},30:{2:[2,6,0],13:[2,6,0],14:[2,
6,0],16:[2,6,0],17:[2,6,0],19:[2,6,0],23:[2,6,0]},31:{2:[2,7,0],13:[2,7,0],14:[2,7,0],16:[2,7,0],17:[2,7,0],19:[2,7,0],23:[2,7,0]},32:{2:[2,8,0],13:[2,8,0],14:[2,8,0],16:[2,8,0],17:[2,8,0],19:[2,8,0],23:[2,8,0]},33:{2:[1,0,1],13:[1,0,2],14:[1,0,3],16:[1,0,4],17:[1,0,5],19:[1,0,6],23:[1,0,7]},34:{1:[2,40,0],2:[1,0,1],13:[1,0,2],16:[1,0,4],17:[1,0,5],18:[2,40,0],19:[1,0,6],20:[2,40,0],21:[2,40,0],22:[2,40,0],24:[2,40,0]},35:{1:[2,37,0],2:[2,37,0],13:[2,37,0],16:[2,37,0],17:[2,37,0],18:[2,37,0],19:[2,
37,0],20:[2,37,0],21:[2,37,0],22:[2,37,0],24:[2,37,0]},36:{1:[2,19,0],2:[2,19,0],12:[2,19,0],13:[2,19,0],16:[2,19,0],17:[2,19,0],18:[2,19,0],19:[2,19,0],20:[2,19,0],21:[2,19,0],22:[2,19,0],24:[2,19,0]},37:{14:[2,17,0],15:[2,17,0]},38:{14:[2,18,0],15:[2,18,0]},39:{14:[2,13,0],15:[2,13,0]},40:{14:[2,14,0],15:[2,14,0]},41:{14:[2,15,0],15:[2,15,0]},42:{14:[2,16,0],15:[2,16,0]},43:{14:[1,0,48],15:[1,0,49]},44:{1:[2,25,0],2:[2,25,0],13:[2,25,0],16:[2,25,0],17:[2,25,0],18:[2,25,0],19:[2,25,0],20:[2,25,0],
21:[2,25,0],22:[2,25,0],24:[2,25,0]},45:{12:[1,0,51]},46:{1:[2,2,0],18:[2,2,0],20:[1,0,29],21:[1,0,30],22:[1,0,31],24:[1,0,32]},47:{1:[2,4,0],18:[2,4,0],20:[2,4,0],21:[2,4,0],22:[2,4,0],24:[2,4,0]},48:{3:[2,20,0]},49:{3:[2,21,0]},50:{3:[1,0,52]},51:{1:[2,23,0],2:[2,23,0],12:[2,23,0],13:[2,23,0],16:[2,23,0],17:[2,23,0],18:[2,23,0],19:[2,23,0],20:[2,23,0],21:[2,23,0],22:[2,23,0],24:[2,23,0]},52:{1:[2,22,0],2:[2,22,0],12:[2,22,0],13:[2,22,0],16:[2,22,0],17:[2,22,0],18:[2,22,0],19:[2,22,0],20:[2,22,0],
21:[2,22,0],22:[2,22,0],24:[2,22,0]}}};v.parse=function(d){var f=this,e=f.lexer,g,k,n,u=f.table,q=u.gotos,u=u.action,v=f.productions,l=[null],p=[0];for(e.resetInput(d);;){g=p[p.length-1];k||(k=e.lex());if(!k)return"it is not a valid input: "+d,"error",!1;n=u[g]&&u[g][k];if(!n){var y=[];u[g]&&s.each(u[g],function(d,e){y.push(f.lexer.mapReverseSymbol(e))});d="Syntax error at line "+e.lineNumber+":\n"+e.showDebugInfo()+"\nexpect "+y.join(", ");d;return!1}switch(n[0]){case 1:p.push(k);l.push(e.text);
p.push(n[2]);k=null;break;case 2:var j=v[n[1]];g=j.symbol||j[0];n=j.action||j[2];var t=(j.rhs||j[1]).length,w=0,o,j=l[l.length-t];o=x;for(f.$$=j;w<t;w++)f["$"+(t-w)]=l[l.length-1-w];n&&(o=n.call(f));j=o!==x?o:f.$$;t&&(p=p.slice(0,-2*t),l=l.slice(0,-1*t));p.push(g);l.push(j);p.push(q[p[p.length-2]][p[p.length-1]]);break;case 0:return j}}return x};return v});
KISSY.add("dom/selector",["./selector/parser","dom/basic"],function(D,x){function v(a){return a.replace(K,L)}function s(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function k(a){var b=0,c=0;if("number"===typeof a)c=a;else if("odd"===a)b=2,c=1;else if("even"===a)b=2,c=0;else if(a=a.replace(/\s/g,"").match(I))a[1]?(b=parseInt(a[2]),isNaN(b)&&(b="-"===a[2]?-1:1)):b=0,c=parseInt(a[3])||0;return{a:b,b:c}}function o(a,b,c,f){if(0===b){if(a===c)return f}else if(0<=(a-c)/b&&0===(a-c)%b&&f)return 1}function d(a,
b){return q._selectInternal(a,null,b)}function f(a,b){if(!b)return!0;if(!a||9===a.nodeType)return!1;var c=1,f=b.suffix,d,e;"tag"===b.t&&(c&=F.tag(a,b.value));if(c&&f){d=f.length;for(e=0;c&&e<d;e++){var g=f[e],i=g.t;F[i]&&(c&=F[i](a,g.value))}}return c}function e(a,b){var c=1,d=a,e,g=b;do if(c&=f(a,b)){b=b&&b.prev;if(!b)return!0;e=B[b.nextCombinator];a=s(a,e.dir);if(!e.immediate)return{el:a,match:b}}else if(e=B[b.nextCombinator],e.immediate)break;else return{el:a&&s(a,e.dir),match:b};while(a);return{el:s(d,
B[g.nextCombinator].dir),match:g}}function g(a,b){var c;if(y){if(!(c=a.getAttribute(l)))a.setAttribute(l,c=+new Date+"_"+ ++j)}else if(!(c=a[l]))c=a[l]=+new Date+"_"+ ++j;c=c+"_"+(b.order||0);if(c in t)return t[c];t[c]=E(a,b);return t[c]}function E(a,b){var c=e(a,b);if(!0===c)return!0;a=c.el;for(b=c.match;a;){if(g(a,b))return!0;a=s(a,B[b.nextCombinator].dir)}return!1}function n(a,b,c){p[a]||(p[a]=u.parse(a));var a=p[a],e=0,d=a.length,A,k,i=[];c&&(b=b||c[0].ownerDocument);A=b&&b.ownerDocument||G;for(y=
(k=(b=b||A)&&(b.ownerDocument||b).documentElement)?"html"!==k.nodeName.toLowerCase():!1;e<d;e++){t={};k=a[e];var h=k.suffix,r,m,j,n=c;j=null;if(!n){if(h&&!y){r=0;for(m=h.length;r<m;r++){var l=h[r];if("id"===l.t){j=l.value;break}}}if(j)if(r=!b.getElementById,m=q._contains(A,b),h=r?m?A.getElementById(j):null:b.getElementById(j),!h&&r||h&&w(h,"id")!==j){r=q._getElementsByTagName("*",b);m=r.length;for(l=0;l<m;l++)if(h=r[l],w(h,"id")===j){n=[h];break}l===m&&(n=[])}else m&&h&&b!==A&&(h=q._contains(b,h)?
h:null),n=h?[h]:[];else n=q._getElementsByTagName(k.value||"*",b)}j=0;if(h=n.length)for(;j<h;j++){r=n[j];a:{m=r;var l=void 0,o=k;do{if(!f(m,o)){m=null;break a}o=o.prev;if(!o){m=!0;break a}l=B[o.nextCombinator];m=s(m,l.dir)}while(m&&l.immediate);m=!m?null:{el:m,match:o}}!0===m?i.push(r):m&&g(m.el,m.match)&&i.push(r)}}1<d&&(i=q.unique(i));return i}var u=x("./selector/parser"),q=x("dom/basic");"use KISSY css3 selector";var G=D.Env.host.document,l="_ks_data_selector_id_",p={},y,j=0,t={},w=function(a,
b){return y?q._getSimpleAttr(a,b):q.attr(a,b)},J=q._hasSingleClass,H=q._isTag,I=/^(([+-]?(?:\d+)?)?n)?([+-]?\d+)?$/,K=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,L=function(a,b){var c="0x"+b-65536;return isNaN(c)?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,c&1023|56320)};u.lexer.yy={unEscape:v,unEscapeStr:function(a){return this.unEscape(a.slice(1,-1))}};var C={"nth-child":function(a,b){var c=k(b),f=c.a,c=c.b;if(0===f&&0===c)return 0;var e=0,d=a.parentNode;if(d)for(var d=d.childNodes,
g=0,i,h=d.length;g<h;g++)if(i=d[g],1===i.nodeType&&(e++,i=o(e,f,c,i===a),void 0!==i))return i;return 0},"nth-last-child":function(a,b){var c=k(b),f=c.a,c=c.b;if(0===f&&0===c)return 0;var e=0,d=a.parentNode;if(d)for(var d=d.childNodes,g=d.length-1,i;0<=g;g--)if(i=d[g],1===i.nodeType&&(e++,i=o(e,f,c,i===a),void 0!==i))return i;return 0},"nth-of-type":function(a,b){var c=k(b),f=c.a,c=c.b;if(0===f&&0===c)return 0;var d=0,e=a.parentNode;if(e)for(var e=e.childNodes,g=a.tagName,i=0,h,j=e.length;i<j;i++)if(h=
e[i],h.tagName===g&&(d++,h=o(d,f,c,h===a),void 0!==h))return h;return 0},"nth-last-of-type":function(a,b){var c=k(b),e=c.a,c=c.b;if(0===e&&0===c)return 0;var f=0,d=a.parentNode;if(d)for(var d=d.childNodes,g=a.tagName,i=d.length-1,h;0<=i;i--)if(h=d[i],h.tagName===g&&(f++,h=o(f,e,c,h===a),void 0!==h))return h;return 0},lang:function(a,b){var c,b=v(b.toLowerCase());do if(c=y?a.getAttribute("xml:lang")||a.getAttribute("lang"):a.lang)return c=c.toLowerCase(),c===b||0===c.indexOf(b+"-");while((a=a.parentNode)&&
1===a.nodeType);return!1},not:function(a,b){return!F[b.t](a,b.value)}},z={empty:function(a){for(var a=a.childNodes,b=0,c=a.length-1,d;b<c;b++)if(d=a[b],d=d.nodeType,1===d||3===d||4===d||5===d)return 0;return 1},root:function(a){return a.ownerDocument&&a===a.ownerDocument.documentElement},"first-child":function(a){return C["nth-child"](a,1)},"last-child":function(a){return C["nth-last-child"](a,1)},"first-of-type":function(a){return C["nth-of-type"](a,1)},"last-of-type":function(a){return C["nth-last-of-type"](a,
1)},"only-child":function(a){return z["first-child"](a)&&z["last-child"](a)},"only-of-type":function(a){return z["first-of-type"](a)&&z["last-of-type"](a)},focus:function(a){var b=a.ownerDocument;return b&&a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!(a.href||0<=a.tabIndex))},target:function(a){var b=location.hash;return b&&b.slice(1)===w(a,"id")},enabled:function(a){return!a.disabled},disabled:function(a){return a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&a.checked||"option"===b&&a.selected}},M={"~=":function(a,b){return!b||-1<b.indexOf(" ")?0:-1!==(" "+a+" ").indexOf(" "+b+" ")},"|=":function(a,b){return-1!==(" "+a).indexOf(" "+b+"-")},"^=":function(a,b){return b&&D.startsWith(a,b)},"$=":function(a,b){return b&&D.endsWith(a,b)},"*=":function(a,b){return b&&-1!==a.indexOf(b)},"=":function(a,b){return a===b}},F={tag:H,cls:J,id:function(a,b){return w(a,"id")===b},attrib:function(a,b){var c=b.ident;y||(c=c.toLowerCase());var c=w(a,c),d=b.match;if(!d&&
void 0!==c)return 1;if(d){if(void 0===c)return 0;if(d=M[d])return d(c+"",b.value+"")}return 0},pseudo:function(a,b){var c,d;if(d=b.fn){if(!(c=C[d]))throw new SyntaxError("Syntax error: not support pseudo: "+d);return c(a,b.param)}if(c=b.ident){if(!z[c])throw new SyntaxError("Syntax error: not support pseudo: "+c);return z[c](a)}return 0}},B={">":{dir:"parentNode",immediate:1}," ":{dir:"parentNode"},"+":{dir:"previousSibling",immediate:1},"~":{dir:"previousSibling"}};"sourceIndex"in G.documentElement&&
(q._compareNodeOrder=function(a,b){return a.sourceIndex-b.sourceIndex});q._matchesInternal=d;q._selectInternal=n;return{parse:function(a){return u.parse(a)},select:n,matches:d}});
KISSY.add("dom/ie/create",["dom/base"],function(l,k){var e=k("dom/base");e._fixCloneAttributes=function(c,a){a.clearAttributes&&a.clearAttributes();a.mergeAttributes&&a.mergeAttributes(c);var b=a.nodeName.toLowerCase(),d=c.childNodes;if("object"===b&&!a.childNodes.length)for(b=0;b<d.length;b++)a.appendChild(d[b].cloneNode(!0));else if("input"===b&&("checkbox"===c.type||"radio"===c.type)){if(c.checked&&(a.defaultChecked=a.checked=c.checked),a.value!==c.value)a.value=c.value}else if("option"===b)a.selected=
c.defaultSelected;else if("input"===b||"textarea"===b)a.defaultValue=c.defaultValue,a.value=c.value;a.removeAttribute(e.__EXPANDO)};var m=e._creators,g=e._defaultCreator,i=/<tbody/i;8>l.UA.ieMode&&(m.table=function(c,a){var b=g(c,a);if(i.test(c))return b;var d=b.firstChild,h=l.makeArray(d.childNodes);l.each(h,function(a){"tbody"===e.nodeName(a)&&!a.childNodes.length&&d.removeChild(a)});return b})});
KISSY.add("dom/ie/insertion",["dom/base"],function(l,k){var e=k("dom/base");8>l.UA.ieMode&&(e._fixInsertionChecked=function g(i){for(var c=0;c<i.length;c++){var a=i[c];if(a.nodeType===e.NodeType.DOCUMENT_FRAGMENT_NODE)g(a.childNodes);else if("input"===e.nodeName(a)){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}else if(a.nodeType===e.NodeType.ELEMENT_NODE)for(var a=a.getElementsByTagName("input"),b=0;b<a.length;b++)g(a[b])}})});
KISSY.add("dom/ie/style",["dom/base"],function(l,k){var e=k("dom/base"),m=e._cssProps,g=l.UA,i=l.Env.host.document,i=i&&i.documentElement,c=/^(top|right|bottom|left)$/,a=e._cssHooks,b=/opacity\s*=\s*([^)]*)/,d=/alpha\([^)]*\)/i;m["float"]="styleFloat";a.backgroundPosition={get:function(a,d){return d?a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY:a.style.backgroundPosition}};try{null==i.style.opacity&&(a.opacity={get:function(a,d){return b.test((d&&a.currentStyle?a.currentStyle.filter:
a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":d?"1":""},set:function(a,b){var b=parseFloat(b),c=a.style,h=a.currentStyle,j=isNaN(b)?"":"alpha(opacity="+100*b+")",f=l.trim(h&&h.filter||c.filter||"");c.zoom=1;if((1<=b||!j)&&!l.trim(f.replace(d,"")))if(c.removeAttribute("filter"),!j||h&&!h.filter)return;c.filter=d.test(f)?f.replace(d,j):f+(f?", ":"")+j}})}catch(h){"IE filters ActiveX is disabled. ex = "+h}var g=8===g.ie,j={};j.thin=g?"1px":"2px";j.medium=g?"3px":"4px";j.thick=g?"5px":"6px";l.each(["",
"Top","Left","Right","Bottom"],function(d){var b="border"+d+"Width",c="border"+d+"Style";a[b]={get:function(a,d){var h=d?a.currentStyle:0,o=h&&""+h[b]||void 0;o&&0>o.indexOf("px")&&(o=j[o]&&"none"!==h[c]?j[o]:0);return o}}});e._getComputedStyle=function(a,d){var d=m[d]||d,b=a.currentStyle&&a.currentStyle[d];if(e._RE_NUM_NO_PX.test(b)&&!c.test(d)){var h=a.style,j=h.left,f=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;h.left="fontSize"===d?"1em":b||0;b=h.pixelLeft+"px";h.left=j;a.runtimeStyle.left=
f}return""===b?"auto":b}});
KISSY.add("dom/ie/traversal",["dom/base"],function(l,k){var e=k("dom/base");e._contains=function(c,a){c.nodeType===e.NodeType.DOCUMENT_NODE&&(c=c.documentElement);a=a.parentNode;return c===a?!0:a&&a.nodeType===e.NodeType.ELEMENT_NODE?c.contains&&c.contains(a):!1};var m=document.createElement("div");m.appendChild(document.createComment(""));var g;g=m.getElementsByTagName("*").length?function(c,a){var b=a.getElementsByTagName(c),d="*"===c;if(d||"number"!==typeof b.length){for(var h=[],j=0,o;o=b[j++];)(!d||
1===o.nodeType)&&h.push(o);return h}return b}:function(c,a){return a.getElementsByTagName(c)};e._getElementsByTagName=g;var i=e._getSimpleAttr;e._getElementById=function(c,a){var b=a.getElementById(c);if(b&&i(b,"id")!==c)for(var d=g("*",a),h=0,j=d.length;h<j;h++)if(i(d[h],"id")===c)return d[h];return b}});
KISSY.add("dom/ie/transform",["dom/base"],function(l,k){function e(c){return[[c[0],c[2],c[4]],[c[1],c[3],c[5]],[0,0,1]]}function m(c,a){var b;if(2<arguments.length){var d=c;for(b=1;b<arguments.length;b++)d=m(d,arguments[b]);return d}var d=[],h=c.length,j=a.length,o=a[0].length;for(b=0;b<h;b++)for(var e=0;e<o;e++){for(var g=0,i=0;i<j;i++)g+=c[b][i]*a[i][e];var i=d,l=b,f=e;i[l]||(i[l]=[]);i[l][f]=g}return d}function g(c){return-1<c.indexOf("deg")?parseInt(c,10)*(2*Math.PI/360):parseFloat(c)}var i=/progid:DXImageTransform.Microsoft.Matrix\(([^)]*)\)/;
k("dom/base")._cssHooks.transform={get:function(c,a){var b=c[a?"currentStyle":"style"];if(b&&i.test(b.filter)){var b=RegExp.$1.split(","),d=0,h=0,j=b[4]&&b[4].split("="),e=b[5]&&b[5].split("=");j&&"dx"===j[0].toLowerCase()&&(d=parseFloat(j[1]));e&&"dy"===e[0].toLowerCase()&&(h=parseFloat(e[1]));b=[b[0].split("=")[1],b[2].split("=")[1],b[1].split("=")[1],b[3].split("=")[1],d,h]}else return a?"none":"";return"matrix("+b.join(",")+")"},set:function(c,a){var b=c.style,d,h=c.currentStyle,j,o={width:c.clientWidth,
height:c.clientHeight};j=o.width/2;var k=o.height/2,p=c.style.transformOrigin,p=(p||"50% 50%").split(/\s+/);1===p.length&&(p[1]=p[0]);for(var q=0;q<p.length;q++){var r=parseFloat(p[q]);p[q]=l.endsWith(p[q],"%")?r*o[q?"height":"width"]/100:r}o=p;b.zoom=1;if(a){d=a.split(")");for(var p=l.trim,q=-1,r=d.length-1,f,t,s=e([1,0,0,1,0,0]),n;++q<r;){f=d[q].split("(");t=p(f[0]);f=f[1];n=[1,0,0,1,0,0];switch(t){case "translateX":n[4]=parseInt(f,10);break;case "translateY":n[5]=parseInt(f,10);break;case "translate":f=
f.split(",");n[4]=parseInt(f[0],10);n[5]=parseInt(f[1]||0,10);break;case "rotate":f=g(f);n[0]=Math.cos(f);n[1]=Math.sin(f);n[2]=-Math.sin(f);n[3]=Math.cos(f);break;case "scaleX":n[0]=+f;break;case "scaleY":n[3]=+f;break;case "scale":f=f.split(",");n[0]=+f[0];n[3]=1<f.length?+f[1]:+f[0];break;case "skewX":n[2]=Math.tan(g(f));break;case "skewY":n[1]=Math.tan(g(f));break;case "skew":f=f.split(",");n[2]=Math.tan(g(f[0]));1<f.length&&(n[1]=Math.tan(g(f[1])));break;case "matrix":f=f.split(","),n[0]=+f[0],
n[1]=+f[1],n[2]=+f[2],n[3]=+f[3],n[4]=parseInt(f[4],10),n[5]=parseInt(f[5],10)}s=m(s,e(n))}a=s;d=o[0];o=o[1];d=m([[1,0,d],[0,1,o],[0,0,1]],a,[[1,0,-d],[0,1,-o],[0,0,1]],[[j],[k],[1]]);d.x=d[0][0];d.y=d[1][0];j=["progid:DXImageTransform.Microsoft.Matrix(M11="+a[0][0],"M12="+a[0][1],"M21="+a[1][0],"M22="+a[1][1],"Dx="+a[0][2],"Dy="+a[1][2],'SizingMethod="auto expand"'].join()+")"}else j="";k=h&&h.filter||b.filter||"";if(!j&&!l.trim(k.replace(i,""))&&(b.removeAttribute("filter"),!j||h&&!h.filter))return;
b.filter=i.test(k)?k.replace(i,j):k+(k?", ":"")+j;j?(h=c.offsetHeight/2,b.marginLeft=d.x-c.offsetWidth/2+"px",b.marginTop=d.y-h+"px"):b.marginLeft=b.marginTop=0}}});
KISSY.add("dom/ie/input-selection",["dom/base"],function(l,k){function e(a,b){var d=0,h=0,c=a.ownerDocument.selection.createRange(),e=m(a);e.inRange(c)&&(e.setEndPoint("EndToStart",c),d=i(a,e).length,b&&(h=d+i(a,c).length));return[d,h]}function m(a){if("textarea"===a.type){var b=a.document.body.createTextRange();b.moveToElementText(a);return b}return a.createTextRange()}function g(a,b,d){var h=Math.min(b,d),c=Math.max(b,d);return h===c?0:"textarea"===a.type?(a=a.value.substring(h,c).replace(/\r\n/g,
"\n").length,b>d&&(a=-a),a):d-b}function i(a,b){if("textarea"===a.type){var d=b.text,c=b.duplicate();if(0===c.compareEndPoints("StartToEnd",c))return d;c.moveEnd("character",-1);c.text===d&&(d+="\r\n");return d}return b.text}var c=k("dom/base")._propHooks;c.selectionStart={set:function(a,b){var d=a.ownerDocument.selection.createRange();if(m(a).inRange(d)){var c=e(a,1)[1],j=g(a,b,c);d.collapse(!1);d.moveStart("character",-j);b>c&&d.collapse(!0);d.select()}},get:function(a){return e(a)[0]}};c.selectionEnd=
{set:function(a,b){var d=a.ownerDocument.selection.createRange();if(m(a).inRange(d)){var c=e(a)[0],j=g(a,c,b);d.collapse(!0);d.moveEnd("character",j);c>b&&d.collapse(!1);d.select()}},get:function(a){return e(a,1)[1]}}});
KISSY.add("dom/ie/attr",["dom/base"],function(l,k){function e(a){var b="",j=a.nodeType;if(j===m.NodeType.ELEMENT_NODE)for(a=a.firstChild;a;a=a.nextSibling)b+=e(a);else if(j===c.TEXT_NODE||j===c.CDATA_SECTION_NODE)b+=a.nodeValue;return b}var m=k("dom/base"),g=m._attrHooks,i=m._attrNodeHook,c=m.NodeType,a=m._valHooks,b=m._propFix;8>l.UA.ieMode&&(g.style.set=function(a,b){a.style.cssText=b},l.mix(i,{get:function(a,b){var c=a.getAttributeNode(b);return c&&(c.specified||c.nodeValue)?c.nodeValue:void 0},
set:function(a,b,c){var e=a.getAttributeNode(c),g;if(e)e.nodeValue=b;else try{g=a.ownerDocument.createAttribute(c),g.value=b,a.setAttributeNode(g)}catch(i){return a.setAttribute(c,b,0)}}}),l.mix(m._attrFix,b),g.tabIndex=g.tabindex,l.each("href,src,width,height,colSpan,rowSpan".split(","),function(a){g[a]={get:function(b){b=b.getAttribute(a,2);return b===null?void 0:b}}}),a.button=g.value=i,g.placeholder={get:function(a,b){return a[b]||i.get(a,b)}},a.option={get:function(a){var b=a.attributes.value;
return!b||b.specified?a.value:a.text}});(g.href=g.href||{}).set=function(a,b,e){for(var g=a.childNodes,i,k=g.length,l=k>0,k=k-1;k>=0;k--)g[k].nodeType!==c.TEXT_NODE&&(l=0);if(l){i=a.ownerDocument.createElement("b");i.style.display="none";a.appendChild(i)}a.setAttribute(e,""+b);i&&a.removeChild(i)};m._getText=e;return m});
KISSY.add("dom/ie","./ie/create,./ie/insertion,./ie/style,./ie/traversal,./ie/transform,./ie/input-selection,./ie/attr".split(","),function(l,k){k("./ie/create");k("./ie/insertion");k("./ie/style");k("./ie/traversal");k("./ie/transform");k("./ie/input-selection");return k("./ie/attr")});
KISSY.add("event/dom/shake",["event/dom/base"],function(d,m){function j(a){var b=a.accelerationIncludingGravity,a=b.x,d=b.y,b=b.z,f;void 0!==c&&(f=n(g(a-c),g(d-h),g(b-i)),f>o&&k(),f>p&&(e=1));c=a;h=d;i=b}var l=m("event/dom/base"),q=l.Special,o=5,p=20,e=0,c,h,i,n=Math.max,g=Math.abs,a=d.Env.host,k=d.buffer(function(){e&&(l.fireHandler(a,"shake",{accelerationIncludingGravity:{x:c,y:h,z:i}}),c=void 0,e=0)},250);q.shake={setup:function(){this===a&&a.addEventListener("devicemotion",j,!1)},tearDown:function(){this===
a&&(k.stop(),c=void 0,e=0,a.removeEventListener("devicemotion",j,!1))}}});
KISSY.add("event/dom/ie/change",["event/dom/base","dom"],function(i,d){function e(a){a=a.type;return"checkbox"===a||"radio"===a}function g(a){"checked"===a.originalEvent.propertyName&&(this.__changed=1)}function c(b){this.__changed&&(this.__changed=0,a.fire(this,"change",b))}function h(b){b=b.target;j.test(b.nodeName)&&!b.__changeHandler&&(b.__changeHandler=1,a.on(b,"change",{fn:f,last:1}))}function f(b){if(!b.isPropagationStopped()&&!e(this)){var c;(c=this.parentNode)&&a.fire(c,"change",b)}}var a=
d("event/dom/base"),k=d("dom"),j=/^(?:textarea|input|select)$/i;a.Special.change={setup:function(){if(j.test(this.nodeName))if(e(this))a.on(this,"propertychange",g),a.on(this,"click",c);else return!1;else a.on(this,"beforeactivate",h)},tearDown:function(){if(j.test(this.nodeName))if(e(this))a.remove(this,"propertychange",g),a.remove(this,"click",c);else return!1;else a.remove(this,"beforeactivate",h),i.each(k.query("textarea,input,select",this),function(b){b.__changeHandler&&(b.__changeHandler=0,
a.remove(b,"change",{fn:f,last:1}))})}}});
KISSY.add("event/dom/ie/submit",["event/dom/base","dom"],function(i,d){function e(a){var a=a.target,d=f(a);if((a="input"===d||"button"===d?a.form:null)&&!a.__submitFix)a.__submitFix=1,c.on(a,"submit",{fn:g,last:1})}function g(a){this.parentNode&&!a.isPropagationStopped()&&!a.synthetic&&c.fire(this.parentNode,"submit",a)}var c=d("event/dom/base"),h=d("dom"),f=h.nodeName;c.Special.submit={setup:function(){if("form"===f(this))return!1;c.on(this,"click keypress",e)},tearDown:function(){if("form"===f(this))return!1;
c.remove(this,"click keypress",e);i.each(h.query("form",this),function(a){a.__submitFix&&(a.__submitFix=0,c.remove(a,"submit",{fn:g,last:1}))})}}});KISSY.add("event/dom/ie",["./ie/change","./ie/submit"],function(i,d){d("./ie/change");d("./ie/submit")});
KISSY.add("event/dom/hashchange",["event/dom/base","dom"],function(e,n){var c=n("event/dom/base"),h=n("dom"),d=e.UA,r=c.Special,f=e.Env.host,g=f.document,s=d.ieMode,l="__replace_history_"+e.now(),d=s||d.ie;c.REPLACE_HISTORY=l;var t="<html><head><title>"+(g&&g.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",i=function(){return"#"+(new e.Uri(location.href)).getFragment()},b,j,m=function(){var a=i(),c;if(c=e.endsWith(a,l))a=a.slice(0,-l.length),location.hash=a;a!==j&&(j=a,o(a,c));
b=setTimeout(m,50)},o=d&&8>d?function(c,b){var d=e.substitute(t,{hash:e.escapeHtml(c),head:h.isCustomDomain()?'<script>document.domain = "'+g.domain+'";<\/script>':""}),k=a.contentWindow.document;try{b?k.open("text/html","replace"):k.open(),k.write(d),k.close()}catch(f){}}:function(){c.fireHandler(f,"hashchange")},p=function(){b||m()},q=function(){b&&clearTimeout(b);b=0},a;d&&8>d&&(p=function(){if(!a){var b=h.getEmptyIframeSrc();a=h.create("<iframe "+(b?'src="'+b+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');
h.prepend(a,g.documentElement);c.add(a,"load",function(){c.remove(a,"load");o(i());c.add(a,"load",d);m()});g.onpropertychange=function(){try{"title"===event.propertyName&&(a.contentWindow.document.title=g.title+" - "+i())}catch(c){}};var d=function(){var b=e.trim(a.contentWindow.document.body.innerText),d=i();b!==d&&(j=location.hash=b);c.fireHandler(f,"hashchange")}}},q=function(){b&&clearTimeout(b);b=0;c.detach(a);h.remove(a);a=0});r.hashchange={setup:function(){if(this===f){j=i();p()}},tearDown:function(){this===
f&&q()}}});
KISSY.add("event/dom/focusin",["event/dom/base"],function(d,g){var e=g("event/dom/base"),h=e.Special;d.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(c){function f(a){return e.fire(a.target,c.name)}var b=d.guid("attaches_"+d.now()+"_");h[c.name]={setup:function(){var a=this.ownerDocument||this;b in a||(a[b]=0);a[b]+=1;1===a[b]&&a.addEventListener(c.fix,f,!0)},tearDown:function(){var a=this.ownerDocument||this;a[b]-=1;0===a[b]&&a.removeEventListener(c.fix,f,!0)}}});return e});
KISSY.add("event/dom/touch/handle-map",[],function(){return{}});KISSY.add("event/dom/touch/single-touch",[],function(e){function a(){}a.prototype={constructor:a,requiredTouchCount:1,onTouchStart:function(a){if(a.touches.length!==this.requiredTouchCount)return!1;a=this.lastTouches=a.touches;this.lastXY={pageX:a[0].pageX,pageY:a[0].pageY}},onTouchMove:e.noop,onTouchEnd:e.noop};return a});
KISSY.add("event/dom/touch/tap",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(d){d.preventDefault()}function h(){h.superclass.constructor.apply(this,arguments)}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./single-touch"),k=i.Object;e.extend(h,f,{onTouchMove:function(d){var a=this.lastXY,d=d.changedTouches[0];if(!d||5<Math.abs(d.pageX-a.pageX)||5<Math.abs(d.pageY-a.pageY))return!1},onTouchEnd:function(d){var a=d.changedTouches[0],b=d.target,n=new k({type:"tap",
target:b,currentTarget:b});e.mix(n,{pageX:a.pageX,pageY:a.pageY,originalEvent:d.originalEvent,which:1,touch:a});i.fire(b,"tap",n);if(n.isDefaultPrevented())i.on(b,"click",{fn:c,once:1})}});g.tap={handle:new h};return h});
KISSY.add("event/dom/touch/swipe",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(b,a,f){var g=a.changedTouches[0],q=g.pageX-b.startX,m=g.pageY-b.startY,j=Math.abs(q),r=Math.abs(m);if(f){if(b.isVertical&&b.isHorizontal){if(5>Math.max(j,r))return;r>j?b.isHorizontal=0:b.isVertical=0}}else if(b.isVertical&&r<l&&(b.isVertical=0),b.isHorizontal&&j<l)b.isHorizontal=0;if(b.isHorizontal)q=0>q?"left":"right";else if(b.isVertical)q=0>m?"up":"down",j=r;else return!1;i.fire(a.target,
f?d:k,{originalEvent:a.originalEvent,pageX:g.pageX,pageY:g.pageY,which:1,touch:g,direction:q,distance:j,duration:(a.timeStamp-b.startTime)/1E3})}function h(){}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./single-touch"),k="swipe",d="swiping",l=50;e.extend(h,f,{onTouchStart:function(b){if(!1===h.superclass.onTouchStart.apply(this,arguments))return!1;var a=b.touches[0];this.startTime=b.timeStamp;this.isVertical=this.isHorizontal=1;this.startX=a.pageX;this.startY=a.pageY;-1!==b.type.indexOf("mouse")&&
b.preventDefault()},onTouchMove:function(b){var a=b.changedTouches[0],d=a.pageY-this.startY,a=Math.abs(a.pageX-this.startX),d=Math.abs(d);if(1E3<b.timeStamp-this.startTime)return!1;this.isVertical&&35<a&&(this.isVertical=0);this.isHorizontal&&35<d&&(this.isHorizontal=0);return c(this,b,1)},onTouchEnd:function(a){return!1===this.onTouchMove(a)?!1:c(this,a,0)}});g[k]=g[d]={handle:new h};return h});
KISSY.add("event/dom/touch/double-tap",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(){}var h=a("./handle-map"),g=a("event/dom/base"),i=a("./single-touch");e.extend(c,i,{onTouchStart:function(a){if(!1===c.superclass.onTouchStart.apply(this,arguments))return!1;this.startTime=a.timeStamp;this.singleTapTimer&&(clearTimeout(this.singleTapTimer),this.singleTapTimer=0)},onTouchMove:function(){return!1},onTouchEnd:function(a){var i=this.lastEndTime,d=a.timeStamp,e=a.target,
b=a.changedTouches[0],c=d-this.startTime;this.lastEndTime=d;if(i&&(c=d-i,300>c)){this.lastEndTime=0;g.fire(e,"doubleTap",{touch:b,duration:c/1E3});return}c=d-this.startTime;300<c?g.fire(e,"singleTap",{touch:b,pageX:b.pageX,which:1,pageY:b.pageY,duration:c/1E3}):this.singleTapTimer=setTimeout(function(){g.fire(e,"singleTap",{touch:b,pageX:b.pageX,which:1,pageY:b.pageY,duration:c/1E3})},300)}});h.singleTap=h.doubleTap={handle:new c};return c});
KISSY.add("event/dom/touch/multi-touch",["dom"],function(e,a){function c(){}var h=a("dom");c.prototype={constructor:c,requiredTouchCount:2,onTouchStart:function(a){var i=this.requiredTouchCount,c=a.touches.length;c===i?this.start():c>i&&this.end(a)},onTouchEnd:function(a){this.end(a)},start:function(){this.isTracking||(this.isTracking=!0,this.isStarted=!1)},fireEnd:e.noop,getCommonTarget:function(a){var c=a.touches,a=c[0].target,c=c[1].target;if(a===c||h.contains(a,c))return a;for(;;){if(h.contains(c,
a))return c;c=c.parentNode}"getCommonTarget error!"},end:function(a){this.isTracking&&(this.isTracking=!1,this.isStarted&&(this.isStarted=!1,this.fireEnd(a)))}};return c});
KISSY.add("event/dom/touch/pinch",["./handle-map","event/dom/base","./multi-touch"],function(e,a){function c(){}function h(a){2===a.touches.length&&a.preventDefault()}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./multi-touch");e.extend(c,f,{onTouchMove:function(a){if(this.isTracking){var d=a.touches;if(0<d[0].pageX&&0<d[0].pageY&&0<d[1].pageX&&0<d[1].pageY){var c,b=d[0],f=d[1];c=b.pageX-f.pageX;b=b.pageY-f.pageY;c=Math.sqrt(c*c+b*b);this.lastTouches=d;this.isStarted?i.fire(this.target,"pinch",
e.mix(a,{distance:c,scale:c/this.startDistance})):(this.isStarted=!0,this.startDistance=c,d=this.target=this.getCommonTarget(a),i.fire(d,"pinchStart",e.mix(a,{distance:c,scale:1})))}}},fireEnd:function(a){i.fire(this.target,"pinchEnd",e.mix(a,{touches:this.lastTouches}))}});f=new c;g.pinchStart=g.pinchEnd={handle:f};g.pinch={handle:f,setup:function(){i.on(this,"touchmove",h)},tearDown:function(){i.detach(this,"touchmove",h)}};return c});
KISSY.add("event/dom/touch/tap-hold",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(){}var h=a("./handle-map"),g=a("event/dom/base"),i=a("./single-touch");e.extend(c,i,{onTouchStart:function(a){if(!1===c.superclass.onTouchStart.call(this,a))return!1;this.timer=setTimeout(function(){var c=a.touches[0];g.fire(a.target,"tapHold",{touch:c,pageX:c.pageX,pageY:c.pageY,which:1,duration:(e.now()-a.timeStamp)/1E3})},1E3)},onTouchMove:function(){clearTimeout(this.timer);return!1},
onTouchEnd:function(){clearTimeout(this.timer)}});h.tapHold={handle:new c};return c});
KISSY.add("event/dom/touch/rotate",["./handle-map","event/dom/base","./multi-touch"],function(e,a){function c(){}function h(a){2===a.touches.length&&a.preventDefault()}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./multi-touch"),k=180/Math.PI;e.extend(c,f,{onTouchMove:function(a){if(this.isTracking){var c=a.touches,b=c[0],f=c[1],g=this.lastAngle,b=Math.atan2(f.pageY-b.pageY,f.pageX-b.pageX)*k;if(void 0!==g){var f=Math.abs(b-g),h=(b+360)%360,q=(b-360)%360;Math.abs(h-g)<f?b=h:Math.abs(q-g)<f&&
(b=q)}this.lastTouches=c;this.lastAngle=b;this.isStarted?i.fire(this.target,"rotate",e.mix(a,{angle:b,rotation:b-this.startAngle})):(this.isStarted=!0,this.startAngle=b,this.target=this.getCommonTarget(a),i.fire(this.target,"rotateStart",e.mix(a,{angle:b,rotation:0})))}},end:function(){this.lastAngle=void 0;c.superclass.end.apply(this,arguments)},fireEnd:function(a){i.fire(this.target,"rotateEnd",e.mix(a,{touches:this.lastTouches}))}});f=new c;g.rotateEnd=g.rotateStart={handle:f};g.rotate={handle:f,
setup:function(){i.on(this,"touchmove",h)},tearDown:function(){i.detach(this,"touchmove",h)}};return c});
KISSY.add("event/dom/touch/handle","dom,./handle-map,event/dom/base,./tap,./swipe,./double-tap,./pinch,./tap-hold,./rotate".split(","),function(e,a){function c(a){return e.startsWith(a,"touch")}function h(a){return e.startsWith(a,"mouse")}function g(a){return e.startsWith(a,"MSPointer")||e.startsWith(a,"pointer")}function i(a){this.doc=a;this.eventHandle={};this.init();this.touches=[];this.inTouch=0}var f=a("dom"),k=a("./handle-map"),d=a("event/dom/base");a("./tap");a("./swipe");a("./double-tap");
a("./pinch");a("./tap-hold");a("./rotate");var l=e.guid("touch-handle"),b=e.Features,n,p,o;if(b.isTouchEventSupported())if(e.UA.ios){o="touchend touchcancel";n="touchstart";p="touchmove"}else{o="touchend touchcancel mouseup";n="touchstart mousedown";p="touchmove mousemove"}else if(b.isPointerSupported()){n="pointerdown";p="pointermove";o="pointerup pointercancel"}else if(b.isMsPointerSupported()){n="MSPointerDown";p="MSPointerMove";o="MSPointerUp MSPointerCancel"}else{n="mousedown";p="mousemove";
o="mouseup"}i.prototype={constructor:i,lastTouches:[],firstTouch:null,init:function(){var a=this.doc;d.on(a,n,this.onTouchStart,this);if(!g(p))d.on(a,p,this.onTouchMove,this);d.on(a,o,this.onTouchEnd,this)},addTouch:function(a){a.identifier=a.pointerId;this.touches.push(a)},removeTouch:function(a){for(var m=0,c=a.pointerId,b=this.touches,d=b.length;m<d;m++){a=b[m];if(a.pointerId===c){b.splice(m,1);break}}},updateTouch:function(a){for(var c=0,j,b=a.pointerId,d=this.touches,e=d.length;c<e;c++){j=d[c];
j.pointerId===b&&(d[c]=a)}},isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(this.firstTouch===null)this.firstTouch=a.identifier},removePrimaryTouch:function(a){if(this.isPrimaryTouch(a))this.firstTouch=null},dupMouse:function(a){var c=this.lastTouches,a=a.changedTouches[0];if(this.isPrimaryTouch(a)){var b={x:a.clientX,y:a.clientY};c.push(b);setTimeout(function(){var a=c.indexOf(b);a>-1&&c.splice(a,1)},2500)}},isEventSimulatedFromTouch:function(a){for(var c=
this.lastTouches,b=a.clientX,a=a.clientY,d=0,e=c.length,f;d<e&&(f=c[d]);d++){var g=Math.abs(b-f.x),h=Math.abs(a-f.y);if(g<=25&&h<=25)return true}return 0},normalize:function(a){var b=a.type,j;if(c(b)){j=b==="touchend"||b==="touchcancel"?a.changedTouches:a.touches;if(j.length===1){a.which=1;a.pageX=j[0].pageX;a.pageY=j[0].pageY}return a}j=this.touches;b=!b.match(/(up|cancel)$/i);a.touches=b?j:[];a.targetTouches=b?j:[];a.changedTouches=j;return a},onTouchStart:function(a){var b,j;j=a.type;var e=this.eventHandle;
if(c(j)){this.setPrimaryTouch(a.changedTouches[0]);this.dupMouse(a)}else if(h(j)){if(this.isEventSimulatedFromTouch(a))return;this.touches=[a.originalEvent]}else if(g(j)){this.addTouch(a.originalEvent);if(this.touches.length===1)d.on(this.doc,p,this.onTouchMove,this)}else throw Error("unrecognized touch event: "+a.type);for(b in e){j=e[b].handle;j.isActive=1}this.callEventHandle("onTouchStart",a)},onTouchMove:function(a){var b=a.type;if(h(b)){if(this.isEventSimulatedFromTouch(b))return;this.touches=
[a.originalEvent]}else if(g(b))this.updateTouch(a.originalEvent);else if(!c(b))throw Error("unrecognized touch event: "+a.type);this.callEventHandle("onTouchMove",a)},onTouchEnd:function(a){var b=this,j=a.type;if(!h(j)||!b.isEventSimulatedFromTouch(a)){b.callEventHandle("onTouchEnd",a);if(c(j)){b.dupMouse(a);e.makeArray(a.changedTouches).forEach(function(a){b.removePrimaryTouch(a)})}else if(h(j))b.touches=[];else if(g(j)){b.removeTouch(a.originalEvent);b.touches.length||d.detach(b.doc,p,b.onTouchMove,
b)}}},callEventHandle:function(a,b){var c=this.eventHandle,d,e,b=this.normalize(b);if(b.changedTouches.length){for(d in c){e=c[d].handle;if(!e.processed){e.processed=1;if(e.isActive&&e[a]&&e[a](b)===false)e.isActive=0}}for(d in c){e=c[d].handle;e.processed=0}}},addEventHandle:function(a){var b=this.eventHandle,c=k[a].handle;b[a]?b[a].count++:b[a]={count:1,handle:c}},removeEventHandle:function(a){var b=this.eventHandle;if(b[a]){b[a].count--;b[a].count||delete b[a]}},destroy:function(){var a=this.doc;
d.detach(a,n,this.onTouchStart,this);d.detach(a,p,this.onTouchMove,this);d.detach(a,o,this.onTouchEnd,this)}};return{addDocumentHandle:function(a,b){var c=f.getDocument(a),d=f.data(c,l);d||f.data(c,l,d=new i(c));b&&d.addEventHandle(b)},removeDocumentHandle:function(a,b){var c=f.getDocument(a),d=f.data(c,l);if(d){b&&d.removeEventHandle(b);if(e.isEmptyObject(d.eventHandle)){d.destroy();f.removeData(c,l)}}}}});
KISSY.add("event/dom/touch",["event/dom/base","./touch/handle-map","./touch/handle"],function(e,a){function c(a){d.addDocumentHandle(this,a);k[a].setup.apply(this,arguments)}function h(a){d.removeDocumentHandle(this,a);k[a].tearDown.apply(this,arguments)}function g(a){d.addDocumentHandle(this,a)}function i(a){d.removeDocumentHandle(this,a)}var f=a("event/dom/base"),k=a("./touch/handle-map"),d=a("./touch/handle"),l=f.Gesture,b=l.start="KSPointerDown",n=l.move="KSPointerMove",p=l.end="KSPointerUp";
l.tap="tap";l.doubleTap="doubleTap";k[b]={handle:{isActive:1,onTouchStart:function(a){f.fire(a.target,b,a)}}};k[n]={handle:{isActive:1,onTouchMove:function(a){f.fire(a.target,n,a)}}};k[p]={handle:{isActive:1,onTouchEnd:function(a){f.fire(a.target,p,a)}}};var l=f.Special,o,q,m;for(q in k)o={},m=k[q],o.setup=m.setup?c:g,o.tearDown=m.tearDown?h:i,m.add&&(o.add=m.add),m.remove&&(o.remove=m.remove),l[q]=o});
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
;var EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16};var EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2};var EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16};var EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446};var EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6};var EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2};var EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16};var EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773};var EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3};var EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5};var EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5};var EnumDWT_BarcodeFormat={CODE_39:4,CODE_128:16};var EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4};var EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12};var EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6};var EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2};var EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113};var EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54};var EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3};var EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1};var EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7};var EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2};var EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3};var EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1};var EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8};var EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4};var EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1};var EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4};var EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1};var EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6};var EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2};var EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3};var EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6};var EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4};var EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1};var EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1};var EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3};var EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2};
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
;var Dynamsoft=Dynamsoft||{Lib:{}},DynamLib=DynamLib||{},OnWebTwainNotFoundOnWindowsCallback=OnWebTwainNotFoundOnWindowsCallback||false,OnWebTwainNotFoundOnMacCallback=OnWebTwainNotFoundOnMacCallback||false,OnWebTwainOldPluginNotAllowedCallback=OnWebTwainOldPluginNotAllowedCallback||false,OnWebTwainNeedUpgradeCallback=OnWebTwainNeedUpgradeCallback||false,Dynamsoft_ChangeConfig=Dynamsoft_ChangeConfig||false,Dynamsoft_OnLoad=Dynamsoft_OnLoad||false,Dynamsoft_OnNotReady=Dynamsoft_OnNotReady||false,Dynamsoft_OnReady=Dynamsoft_OnReady||false;if(!Dynamsoft.Lib){Dynamsoft.Lib={}}(function(a){a.mix=function(b,d){for(var c in d){b[c]=d[c]}}})(Dynamsoft.Lib);(function(c){var f=window,b={},d=!1,a=Object.prototype,e=a.toString;c.mix(c,{isUndefined:function(g){return(typeof(g)==="undefined")},isNull:function(g){return(g===null)},isNaN:function(g){return isNaN(g)},type:function(g){if(g===null||g===undefined){return String(g)}return b[e.call(g)]||"object"},each:function(g,m,k){var h=(g&&g.length)||0,j=0;for(;j<h;++j){m.call(k||f,g[j],j,g)}}});c.each(["String","Function","Object","Array","Boolean","Number"],function(g,h){b["[object "+g+"]"]=(h=g.toLowerCase());c["is"+g]=function(i){return c.type(i)===h}});c.isArray=Array.isArray||c.isArray})(Dynamsoft.Lib);(function(b){var a={},c={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};a.base64={UTF16ToUTF8:function(k){var h=[],e=k.length;for(var g=0;g<e;g++){var j=k.charCodeAt(g);if(j>0&&j<=127){h.push(k.charAt(g))}else{if(j>=128&&j<=2047){var f=192|((j>>6)&31);var d=128|(j&63);h.push(String.fromCharCode(f),String.fromCharCode(d))}else{if(j>=2048&&j<=65535){var f=224|((j>>12)&15);var d=128|((j>>6)&63);var l=128|(j&63);h.push(String.fromCharCode(f),String.fromCharCode(d),String.fromCharCode(l))}else{if(j>=65536&&j<=2097151){}else{if(j>=2097152&&j<=67108863){}else{}}}}}}return h.join("")},UTF8ToUTF16:function(j){var h=[],g=j.length;var f=0;for(var f=0;f<g;f++){var d=j.charCodeAt(f);if(((d>>7)&255)==0){h.push(j.charAt(f))}else{if(((d>>5)&255)==6){var m=j.charCodeAt(++f);var n=(d&31)<<6;var l=m&63;var e=n|l;h.push(String.fromCharCode(e))}else{if(((d>>4)&255)==14){var m=j.charCodeAt(++f);var k=j.charCodeAt(++f);var n=(d<<4)|((m>>2)&15);var l=((m&3)<<6)|(k&63);var e=((n&255)<<8)|l;h.push(String.fromCharCode(e))}else{if(((d>>3)&255)==30){}else{if(((d>>2)&255)==62){}else{}}}}}}return h.join("")},encode:function(l){var k=this.UTF16ToUTF8(l),f=[],h=0,d=k.length,j,g,e;while(h<d){j=k.charCodeAt(h++)&255;if(h==d){f.push(c.encodeChars.charAt(j>>2));f.push(c.encodeChars.charAt((j&3)<<4));f.push("==");break}g=k.charCodeAt(h++);if(h==d){f.push(c.encodeChars.charAt(j>>2));f.push(c.encodeChars.charAt(((j&3)<<4)|((g&240)>>4)));f.push(c.encodeChars.charAt((g&15)<<2));f.push("=");break}e=k.charCodeAt(h++);f.push(c.encodeChars.charAt(j>>2));f.push(c.encodeChars.charAt(((j&3)<<4)|((g&240)>>4)));f.push(c.encodeChars.charAt(((g&15)<<2)|((e&192)>>6)));f.push(c.encodeChars.charAt(e&63))}return f.join("")},encodeArray:function(k){var f=[],h=0,d=k.length,j,g,e;while(h<d){j=k[h++]&255;if(h==d){f.push(c.encodeChars.charAt(j>>2));f.push(c.encodeChars.charAt((j&3)<<4));f.push("==");break}g=k[h++]&255;if(h==d){f.push(c.encodeChars.charAt(j>>2));f.push(c.encodeChars.charAt(((j&3)<<4)|((g&240)>>4)));f.push(c.encodeChars.charAt((g&15)<<2));f.push("=");break}e=k[h++]&255;f.push(c.encodeChars.charAt(j>>2));f.push(c.encodeChars.charAt(((j&3)<<4)|((g&240)>>4)));f.push(c.encodeChars.charAt(((g&15)<<2)|((e&192)>>6)));f.push(c.encodeChars.charAt(e&63))}return f.join("")},decode:function(m){var k=this,g=[],j=0,l=m.length,h,f,e,d;while(j<l){do{h=c.decodeChars[m.charCodeAt(j++)&255]}while(j<l&&h==-1);if(h==-1){break}do{f=c.decodeChars[m.charCodeAt(j++)&255]}while(j<l&&f==-1);if(f==-1){break}g.push(String.fromCharCode((h<<2)|((f&48)>>4)));do{e=m.charCodeAt(j++)&255;if(e==61){return k.UTF8ToUTF16(g.join(""))}e=c.decodeChars[e]}while(j<l&&e==-1);if(e==-1){break}g.push(String.fromCharCode(((f&15)<<4)|((e&60)>>2)));do{d=m.charCodeAt(j++)&255;if(d==61){return k.UTF8ToUTF16(g.join(""))}d=c.decodeChars[d]}while(j<l&&d==-1);if(d==-1){break}g.push(String.fromCharCode(((e&3)<<6)|d))}return k.UTF8ToUTF16(g.join(""))}};a.utf8={fromUTF16:function(g){var e=[],f=0,d=g.length,h;while(f<d){h=g.charCodeAt(f);if((h>=1)&&(h<=127)){e.push(g.charAt(f))}else{if(h>2047){e.push(String.fromCharCode(224|((h>>12)&15)));e.push(String.fromCharCode(128|((h>>6)&63)));e.push(String.fromCharCode(128|((h>>0)&63)))}else{e.push(String.fromCharCode(192|((h>>6)&31)));e.push(String.fromCharCode(128|((h>>0)&63)))}}f++}return e.join("")},toUTF16:function(j){var e=[],g=0,d=j.length,k,h,f;while(g<d){k=j.charCodeAt(g++);switch(k>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e.push(j.charAt(g-1));break;case 12:case 13:h=j.charCodeAt(g++);e.push(String.fromCharCode(((k&31)<<6)|(h&63)));break;case 14:h=j.charCodeAt(g++);f=j.charCodeAt(g++);e.push(String.fromCharCode(((k&15)<<12)|((h&63)<<6)|((f&63)<<0)));break}}return e.join("")}};b.mix(b,a)})(Dynamsoft.Lib);(function(a){var b=Dynamsoft.WebTwainEnv;Dynamsoft.WebTwainEnv={ServerVersionInfo:"10,2,0,324",ActiveXVersion:"10,2,0,324",Containers:false,ContainerMap:false,ProductKey:"",Trial:true,ResourcesPath:"Resources",Debug:false,AutoLoad:true,OnWebTwainReady:false,UseDefaultInstallUI:true,OnWebTwainNotFound:false,OnWebTwainOldPluginNotAllowed:false,OnWebTwainNeedUpgrade:false,OnWebTwainNeedUpgradeWebJavascript:false};a.mix(Dynamsoft.WebTwainEnv,b);Dynamsoft.WebTwainEnv.RegisterEvent=function(c,d){if((c==="OnWebTwainReady"||!Dynamsoft.WebTwainEnv.UseDefaultInstallUI)&&a.isFunction(d)){Dynamsoft.WebTwainEnv[c]=d}return true};Dynamsoft.WebTwainEnv.GetWebTwain=function(c){var e=c,d=Dynamsoft.WebTwainEnv.Containers;if(!e&&d.length>0){e=d[0].ContainerId}if(Dynamsoft.WebTwainEnv.ContainerMap&&e&&e in Dynamsoft.WebTwainEnv.ContainerMap&&document.getElementById(e)){return Dynamsoft.WebTwainEnv.ContainerMap[e]}return null}})(Dynamsoft.Lib);(function(DL){var TRUE=true,FALSE=false,ua=navigator.userAgent.toLowerCase(),_platform=navigator.platform.toLowerCase(),_protocol=document.location.protocol,_host=location.hostname,_path=location.pathname,_ssl=(_protocol==="https:")?TRUE:FALSE,_bWin=(_platform=="win32")||(_platform=="win64")||(_platform=="windows"),_bMac=(_platform=="mac68k")||(_platform=="macppc")||(_platform=="macintosh")||(_platform=="macintel"),_nMSIE=ua.indexOf("msie"),_nTrident=ua.indexOf("trident"),_nRV=ua.indexOf("rv:"),_indexOfChrome=ua.indexOf("chrome"),_bChrome=_indexOfChrome!=-1,_nFirefox=ua.indexOf("firefox"),_bFirefox=_nFirefox!=-1,_bIE=_bWin&&!_bFirefox&&!_bChrome&&(_nMSIE!=-1||_nTrident!=-1||_nRV!=-1),_strChromeVersion="",_strFirefoxVersion="",_strIEVersion="",_bHTML5Edition=FALSE,_bPluginEdition=FALSE,_bActiveXEdition=FALSE,_bFileSystem=(_protocol!=="https:"&&_protocol!=="http:"),_pathType=0,_ret,_tmp;if(_bMac){_bPluginEdition=TRUE}else{if(_bChrome||_bFirefox){if(_bChrome){_tmp=ua.slice(_indexOfChrome+7);_tmp=_tmp.slice(0,_tmp.indexOf(" "));_strChromeVersion=_tmp;_tmp=_tmp.slice(0,_tmp.indexOf("."));if(_tmp>=27&&_bWin){_bHTML5Edition=TRUE}else{_bPluginEdition=TRUE}}else{_tmp=ua.slice(_nFirefox+8);_tmp=_tmp.slice(0,_tmp.indexOf(" "));_strFirefoxVersion=_tmp;_tmp=_tmp.slice(0,_tmp.indexOf("."));if(_tmp>=27&&_bWin){_bHTML5Edition=TRUE}else{_bPluginEdition=TRUE}}}else{if(_bIE){if(_nMSIE!=-1){_tmp=ua.slice(_nMSIE+4);_tmp=_tmp.slice(0,_tmp.indexOf(";"));_strIEVersion=_tmp}else{if(_nRV!=-1){_tmp=ua.slice(_nRV+3);_tmp=_tmp.slice(0,_tmp.indexOf(";"));_tmp=_tmp.slice(0,_tmp.indexOf(")"));_strIEVersion=_tmp}else{if(_nTrident!=-1){_tmp=ua.slice(_nTrident+7);_tmp=_tmp.slice(0,_tmp.indexOf(";"));_strIEVersion=_tmp}}}if(_strIEVersion===""||_strIEVersion>8){_bPluginEdition=TRUE}else{_bActiveXEdition=TRUE}}}}if(_host===""){if(_bWin&&_path.lastIndexOf("\\")>1){_path=_path.substring(1,_path.lastIndexOf("\\")).replace(/%20/g," ")}else{_pathType=1;_path=_path.substring(1,_path.lastIndexOf("/")).replace(/%20/g," ")}}else{_pathType=1;_path=_path.substring(0,_path.lastIndexOf("/"))}if(!_bFileSystem){var oldPath=Dynamsoft.WebTwainEnv.ResourcesPath;if(typeof(oldPath)=="undefined"){Dynamsoft.WebTwainEnv.ResourcesPath=[_path,"/"].join("")}else{if(oldPath.indexOf("//")<0&&_path!=""){Dynamsoft.WebTwainEnv.ResourcesPath=[_path,"/",oldPath].join("")}}}_ret={product:{name:"Dynamic Web TWAIN",bChromeEdition:_bHTML5Edition,bPluginEdition:_bPluginEdition,bActiveXEdition:_bActiveXEdition,ip:"localhost",wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:function(){return Dynamsoft.WebTwainEnv.ResourcesPath+"/DynamicWebTWAINHTML5Edition.exe"},getPKGPath:function(){return Dynamsoft.WebTwainEnv.ResourcesPath+"/DynamicWebTWAINMacEdition.pkg"},getMSIPath:function(){return Dynamsoft.WebTwainEnv.ResourcesPath+"/DynamicWebTWAINPlugIn.msi"},getActiveXCABx86Path:function(){return Dynamsoft.WebTwainEnv.ResourcesPath+"/DynamicWebTWAIN.cab"},getActiveXCABx64Path:function(){return Dynamsoft.WebTwainEnv.ResourcesPath+"/DynamicWebTWAINx64.cab"},strMIMEType:"Application/DynamicWebTwain-Plugin",strProClassID:"5220cb21-c88d-11cf-b347-00aa00a28331",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",strTrialClassID:"FFC6F181-A5CF-4ec4-A441-093D7134FBF2"},env:{bIE:_bIE,bChrome:_bChrome,bFirefox:_bFirefox,bWin:_bWin,bWin64:(ua.indexOf("win64")!=-1||ua.indexOf("x64")!=-1),bMac:_bMac,iPluginLength:_bIE?0:navigator.plugins.length,strChromeVersion:_bChrome?_strChromeVersion:"",strFirefoxVersion:_bFirefox?_strFirefoxVersion:"",strIEVersion:_bIE?_strIEVersion:"",bFileSystem:_bFileSystem,basePath:_path,pathType:_pathType},config:{debug:FALSE,devMode:FALSE,usingMainMode:FALSE,bDiscardBlankImage:FALSE,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:_ssl,cTwainIndex:0,arySTwains:[],bFirst:TRUE,bOK:FALSE,bNoControlEvent:FALSE,__dialog:FALSE,scriptLoaded:FALSE,detectType:_ssl?1:(_protocol==="http:")?0:-1,tryTimes:0,ports:[{port:18619,ssl:TRUE},{port:5492,ssl:TRUE},{port:6679,ssl:TRUE},{port:8992,ssl:TRUE},{port:18618,ssl:FALSE},{port:5491,ssl:FALSE},{port:6678,ssl:FALSE},{port:8991,ssl:FALSE}],cUrlIndex:0,urls:[],onNoControl:FALSE,OnReady:FALSE,onNotAllowedForChrome:FALSE,OnDetectNext:FALSE,OnCreatWS:FALSE},page:{bUnload:FALSE,OnUnload:FALSE},tmp:{IfAllowLocalCache:TRUE,EmptyFunction:function(){}}};_ret.get=function(id){if(!DL.page.bUnload){return document.getElementById(id)}return FALSE};_ret.log=function(txt){if(Dynamsoft.WebTwainEnv.Debug&&console){console.log(txt)}};_ret.hide=function(id){var o;if(typeof(id)==="string"){o=_ret.get(id)}else{if(id){o=id}}if(o){o.style.display="none"}};_ret.show=function(id){var o;if(typeof(id)==="string"){o=_ret.get(id)}else{if(id){o=id}}if(o){o.style.display=""}};_ret.toggle=function(id){var o;if(typeof(id)==="string"){o=_ret.get(id)}else{if(id){o=id}}if(o){if(o.style.display==="none"){o.style.display=""}else{o.style.display="none"}}};_ret.appendMessage=function(msg){if(typeof(msg)==="string"){_ret.config.msg.push(msg)}else{if(Object.prototype.toString.call(msg)==="[object Array]"){for(var m in msg){_ret.appendMessage(msg[m])}}}};_ret.appendRichMessage=function(msg){_ret.appendMessage([_ret.config.msgPrefix,msg,_ret.config.msgSuffix])};_ret.clearMessage=function(){if(_bIE&&_strIEVersion==8){_ret.config.msg.splice(0,_ret.config.msg.length)}else{_ret.config.msg.splice(0)}return TRUE};_ret.getRealPath=function(f){if(f===undefined){return""}if(_ret.env.pathType==1){return _ret.env.basePath+f}return _ret.env.basePath+f.replace(new RegExp("/","g"),"\\\\")};_ret.getHex=function(_num){var tmp;tmp=Number(_num).toString(16).toUpperCase();if(tmp.length==1){tmp=["0",tmp].join("")}return tmp};_ret.getColor=function(_in){var tmp,b,g,r;b=_in>>16;g=(_in&65280)>>8;r=_in&255;tmp=["#",_ret.getHex(r),_ret.getHex(g),_ret.getHex(b)].join("");return tmp};_ret.replaceAll=function(srcString,str1,str2){return srcString.replace(eval("/"+str1+"/gi"),str2)};DL.mix(DL,_ret)})(Dynamsoft.Lib);(function(b){var d=window.document,a=d.getElementsByTagName("head")[0]||d.documentElement,c=d.createElement("script").readyState?function(f,g){var e=f.onreadystatechange;f.onreadystatechange=function(){var h=f.readyState;if(h==="loaded"||h==="complete"){f.onreadystatechange=null;e&&e();g.call(this)}}}:function(e,f){e.addEventListener("load",f,false)};b.getScript=function(g,e,i){var h=d.createElement("script"),f=[Dynamsoft.WebTwainEnv.ResourcesPath,"/",g].join("");h.src=f;if(e){h.async=true}h.charset="utf-8";if(typeof(i)=="undefined"){i=function(){}}c(h,i);a.insertBefore(h,a.firstChild);return h};b.getCss=function(f){var g=d.createElement("link"),e=[Dynamsoft.WebTwainEnv.ResourcesPath,"/",f].join("");g.href=e;g.rel="stylesheet";a.insertBefore(g,a.firstChild);return g}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
(function(b){var c=window.document,a={addEventListener:c.addEventListener?function(d,f,e){if(d){d.addEventListener(f,e,false)}}:function(d,f,e){if(d){d.attachEvent("on"+f,e)}},removeEventListener:c.removeEventListener?function(d,f,e){if(d){d.removeEventListener(f,e,false)}}:function(d,f,e){if(d){d.detachEvent("on"+f,e)}}};b.mix(b,a)})(Dynamsoft.Lib);(function(a){a.Events={registedClass:[],registedObjs:[]};var b=function(d){var c=true;a.each(a.Events.registedObjs,function(e){a.each(a.Events.registedClass,function(f){if(e instanceof f){if(e.bFocus&&e.handlerKeyDown){c=e.handlerKeyDown(d);if(!c){return false}}}})});return c};a.addEventListener(document.documentElement,"keydown",b)})(Dynamsoft.Lib);(function(a){a.stopPropagation=function(b){var c=b||window.event;if(c.preventDefault){c.preventDefault()}if(c.stopPropagation){c.stopPropagation()}c.returnValue=false;c.cancelBubble=true}})(Dynamsoft.Lib);(function(a){a.Addon_Events=[];a.Addon_Sendback_Events=[]})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
;KISSY.add("kg/bio/1.1/type/base",function(c,b){var d="";function a(f){var e=this;a.superclass.constructor.call(e,f)}c.mix(a,{event:{START:"start",STOP:"stop",SUCCESS:"success",ERROR:"error"}});c.extend(a,b,{upload:function(){},stop:function(){},_processResponse:function(k){var n=this,p,h,f,m=false,o=k,g=n.get("filter");c.log("Server output: "+k);if(c.isUndefined(k)||k===""){p={status:1,json:false,response:""}}else{if(c.isString(k)){try{for(h=0;h<k.length;h++){if(h>10){break}f=k[h];if(f=="{"){m=true;break}else{if(f==" "||f=="\r"||f=="\n"||f=="\t"){}else{break}}}if(m){var l=c.JSON.parse(k);if(l.status==1){p={status:1,response:k,json:l}}else{p={status:0,response:k,json:l}}}}catch(j){m=false;c.log(j)}if(!m){p={status:0,json:false,response:k}}}else{p={status:1,json:false,response:""}}}return p},_fromUnicode:function(f){if(!c.isObject(f)){return f}e(f);function e(g){c.each(g,function(i,h){if(c.isObject(g[h])){e(g[h])}else{g[h]=c.isString(i)&&c.fromUnicode(i)||i}})}return f}},{ATTRS:{action:{value:d},data:{value:{}},filter:{value:d}}});return a},{requires:["base"]});KISSY.add("kg/bio/1.1/type/ajax",function(c,b,f){var d="",a="[bio-AjaxType]:";function e(h){var g=this;e.superclass.constructor.call(g,h);g._setWithCredentials()}c.mix(e,{event:c.merge(b.event,{PROGRESS:"progress"})});c.extend(e,b,{upload:function(i){var h=this;if(!i){c.log(a+"upload(), fileData parameter invalid! ");return h}var g=h.get("blobSize");if(g>0){h._chunkedUpload(i)}else{h._fullUpload(i)}return h},stop:function(){var g=this,h=g.get("ajax");if(!c.isObject(h)){c.log(a+"stop(), the value of io invalid!");return g}h.abort();g.fire(e.event.STOP);return g},_getFormData:function(h){if(c.isArray(h)){return h}if(c.isObject(h)){var g=[];c.each(h,function(j,i){g.push({name:i,value:j})});return g}return h},_setWithCredentials:function(){var g=this;var i=g.get("CORS");var h=g.get("ajaxConfig");c.mix(h,{xhrFields:{withCredentials:false}});return h},_setFormData:function(){var g=this;try{g.set("formData",new FormData());g._processData()}catch(h){c.log(a+"something error when reset FormData.")}},_resetFormData:function(){var g=this;g.set("formData",new FormData())},_processData:function(){var g=this,h=g.get("data"),i=g.get("formData");c.each(h,function(l,j){i.append(j,l)});g.set("formData",i)},_addFileData:function(i){if(!c.isObject(i)){c.log(a+"_addFileData(), file parameter invalid!");return false}var h=this;var j=h.get("formData");var k=i.name,g=i.remoteFilename;if(!g){g="RemoteFile"}j.append(g,i,k);h.set("formData",j);return j},_chunkedUpload:function(l){if(!c.isObject(l)){return false}var h=this;var j=h.get("ajaxConfig");c.mix(j,{url:h.get("action")});var k=l.size;var m=0;var g=h.get("blobSize")||k;var n=l.slice||l.webkitSlice||l.mozSlice;function i(){var o=n.call(l,m,m+g,l.type);var q=o.size;h._setContentDisposition(l.name);h._setContentRange(m,q,k);h._setFormData();h._addFileData(o);c.mix(j,{data:h.get("formData")});var p=f(j);p.then(function(s){var r=s[0];m=h._getUploadedBytes(p)||m+q;h.fire(e.event.PROGRESS,{loaded:m,total:k});if(m<k){i()}else{h.fire(e.event.SUCCESS,{result:r})}},function(s,t,r){h._errorHandler(r,t,l)})}i()},_fullUpload:function(j){var g=this,h=g.get("ajaxConfig"),i=function(n){var m;if(n){if(KISSY.isString(n)){m=n}else{m=n[0]}}else{m=""}m=g._processResponse(m);g.fire(e.event.SUCCESS,{result:m})},l=function(n,o,m){g._errorHandler(m,o,j)};g._setFormData();g._addFileData(j);c.mix(h,{data:g.get("formData"),url:g.get("action"),beforeSend:function(m,o,n){var p=m.getNativeXhr();p.upload.addEventListener("progress",function(q){g.fire(e.event.PROGRESS,q)},false)}});if(!h.async){c.mix(h,{success:i,error:l})}var k=new KISSY.IO(h);if(h.async){k.then(i,l);g.set("ajax",k);return k}else{return false}},_errorHandler:function(j,l,k){var i=this,g={msg:false,status:false,response:false},h=l;if(h=="timeout"){g.msg="timeout!";g.status="timeout"}else{g.msg=h;g.status=h}if(j){g.response=j.responseText}i.fire(e.event.ERROR,{status:h,result:g,file:k})},_getUploadedBytes:function(i){var g=i.getResponseHeader("Range");var j=g&&g.split("-");var h=j&&j.length>1&&parseInt(j[1],10);return h&&h+1},_setContentRange:function(j,m,i){var l="bytes "+j+"-"+(j+m-1)+"/"+i;var g=this;var h=g.get("ajaxConfig");var k=h.headers;k["Content-Range"]=l;return l},_setContentDisposition:function(g){return this._setRequestHeader("Content-Disposition",'attachment; filename="'+encodeURI(g)+'"')},_setRequestHeader:function(i,j){var g=this;var h=g.get("ajaxConfig");h.headers[i]=j;g.set("ajaxConfig",h);return j}},{ATTRS:{formData:{value:d},ajaxConfig:{value:{type:"post",processData:false,cache:false,dataType:"text",async:true,contentType:false,headers:{"X-Requested-With":false}}},ajax:{value:d},fileDataName:{value:d},form:{value:{}},fileInput:{value:d},blobSize:{value:0},CORS:{value:false},isUsePostMessage:{value:false}}});return e},{requires:["./base","io"]});KISSY.add("kg/bio/1.1/queue",function(c,b){var e="",a="[bio-queue]:";function f(g){var h=-1;do{g=g/1024;h++}while(g>99);return Math.max(g,0.1).toFixed(1)+["KB","MB","GB","TB","PB","EB"][h]}function d(h){var g=this;d.superclass.constructor.call(g,h)}c.mix(d,{event:{ADD:"add",ADD_FILES:"addFiles",REMOVE:"remove",CLEAR:"clear",FILE_STATUS:"statusChange",UPDATE_FILE:"updateFile"},status:{WAITING:"waiting",START:"start",PROGRESS:"progress",SUCCESS:"success",CANCEL:"cancel",ERROR:"error",RESTORE:"restore"},FILE_ID_PREFIX:"file-"});c.extend(d,b,{add:function(i,j){var g=this,h={};if(i.length>0){h=[];c.each(i,function(l,k){h.push(g._addFile(l))})}else{h=g._addFile(i)}j&&j.call(g);return h},_addFile:function(k,l){if(!c.isObject(k)){c.log(a+'_addFile() the parameter "file" invalid!');return false}var h=this,j=h._setAddFileData(k),i=h.getFileIndex(j.id),g=h.get("fnAdd");if(Dynamsoft.Lib.isFunction(g)){j=g(i,j)}h.fire(d.event.ADD,{index:i,file:j,bio:h.get("bio")});l&&l.call(h,i,j);return j},remove:function(h,k){var g=this,j=g.get("files"),i;if(c.isString(h)){h=g.getFileIndex(h)}i=j[h];if(!c.isObject(i)){c.log(a+'remove() index "'+h+'" exceeds number of files');return false}j=c.filter(j,function(m,l){return l!==h});g.set("files",j);g.fire(d.event.REMOVE,{index:h,file:i});k&&k.call(g,h,i);return i},clear:function(){var g=this,i;function h(){i=g.get("files");if(!i.length){g.fire(d.event.CLEAR);return false}g.remove(0,function(){h()})}h()},fileStatus:function(k,h,j){if(!c.isNumber(k)){return false}var i=this,m=i.getFile(k),n=i.get("theme"),g,l;if(!m){return false}g=m.status;if(!h){return g}if(g==h){return i}i.updateFile(k,{status:h});i.fire(d.event.FILE_STATUS,{index:k,status:h,args:j,file:m});return i},getFile:function(j){var g=this;var h;var i=g.get("files");if(c.isNumber(j)){h=i[j]}else{c.each(i,function(k){if(k.id===j){h=k;return true}})}return h},getFileIndex:function(g){var h=this,j=h.get("files"),i=-1;c.each(j,function(l,k){if(l.id===g){i=k;return true}});return i},updateFile:function(h,k){if(!c.isNumber(h)){return false}if(!c.isObject(k)){c.log(a+'updateFile() the parameter "data" invalid!');return false}var g=this,j=g.get("files"),i=g.getFile(h);if(!i){return false}c.mix(i,k);j[h]=i;g.set("files",j);g.fire(d.event.UPDATE_FILE,{index:h,file:i});return i},getIndexs:function(i){var h=this,j=h.get("files"),g,k=[];if(!j.length){return k}c.each(j,function(m,l){if(c.isObject(m)){g=m.status;if(g==i){k.push(l)}}});return k},getFiles:function(g){var h=this,j=h.get("files"),i=[];if(!j.length){return[]}c.each(j,function(k){if(k&&k.status===g){i.push(k)}});return i},_setAddFileData:function(h){var g=this,i=g.get("files");if(!c.isObject(h)){c.log(a+'_updateFileData() the parameter "file" invalid!');return false}if(!h.id){h.id=c.guid(d.FILE_ID_PREFIX)}if(h.size){h.textSize=f(h.size)}if(!h.status){h.status="waiting"}i.push(h);return h}},{ATTRS:{fnAdd:{value:e},files:{value:[]},bio:{value:e}}});return d},{requires:["base"]});KISSY.add("kg/bio/1.1/base",["base","json","./type/ajax","./queue"],function(e,d){var c="";var b=d("base"),i=d("json"),a=d("./type/ajax");Queue=d("./queue");var g=e.Env.host,h=Array.prototype.slice,j=g.FormData;var f=b.extend({constructor:function(l){var k=this;f.superclass.constructor.call(k,l);k._init()},addBlob:function(m){var l=this;var k=l.get("queue");if(!m.size){m.size=0}if(!m.name){m.name=m.fileName||c}k.add(m);return l},uploadFiles:function(k){var l=this;if(!e.isString(k)){k=f.status.WAITING}l.set("uploadFilesStatus",k);l._uploaderStatusFile(k);return l},upload:function(m){if(!e.isNumber(m)){return false}var l=this,o=l.get("uploadType"),k=l.get("queue"),n=k.get("files")[m];if(!e.isObject(n)){e.log(LOG_PREFIX+" the file index in queue: "+m+"");return false}if(l.get("curUploadIndex")!=c){e.log("uploading index ..."+l.get("curUploadIndex")+", cannot operate before upload complete!");return false}if(n.status==="error"){return false}if(!l.get("isAllowUpload")){return false}l.set("curUploadIndex",m);l.fire(f.event.START,{index:m,file:n});k.fileStatus(m,f.status.START);o.upload(n)},abort:function(){var l=this,m=l.get("uploadType"),k=l.get("queue");m.stop();return true},isSupportAjax:function(){var k=false;try{if(j){k=true}}catch(l){k=false}return k},_init:function(){var k=this;k._renderQueue();k._renderUploaderCore();return k},_renderQueue:function(){var l=this,k=new Queue();k.set("bio",l);k.on("add",function(m){l.fire(f.event.ADD,m)});k.on("remove",function(m){l.fire(f.event.REMOVE,m)});l.set("queue",k);return k},_renderUploaderCore:function(){var l=this,k=l._getUploadType();if(!k){return false}var o={action:l.get("action"),data:l.get("data"),CORS:l.get("CORS")},n=new k(o),p=k.event;var m=n.get("ajaxConfig");if(m){m.dataType=l.get("dataType");m.async=l.get("async")}n.on(p.SUCCESS,l._uploadCompleteHandler,l);n.on(p.ERROR,l._uploadCompleteHandler,l);if(p.PROGRESS){n.on(p.PROGRESS,l._uploadProgressHandler,l)}n.on(p.STOP,l._uploadStopHanlder,l);l.set("uploadType",n);return n},_uploadProgressHandler:function(o){var l=this,k=l.get("queue"),m=l.get("curUploadIndex"),n=k.getFile(m);e.mix(o,{file:n});k.fileStatus(m,f.status.PROGRESS,o);l.fire(f.event.PROGRESS,o)},_uploadStopHanlder:function(){var l=this,k=l.get("queue"),m=l.get("curUploadIndex");k.fileStatus(m,f.status.CANCEL);l.set("curUploadIndex",c);l.fire(f.event.CANCEL,{index:m})},_getUploadType:function(){var k=this;return k.isSupportAjax()&&a||false},_uploadCompleteHandler:function(r){var o=this,l=r.result,n,q=f.event,k=o.get("queue"),p=o.get("curUploadIndex");if(!e.isObject(l)){return false}k.updateFile(p,{result:l});n=Number(l.status);if(n===1){k.fileStatus(p,f.status.SUCCESS);o.fire(q.SUCCESS,{index:p,file:k.getFile(p),result:l})}else{var m=false;if(r.status==="abort"){m=true}k.fileStatus(p,f.status.ERROR,{canceled:m,result:l});o.fire(q.ERROR,{canceled:m,status:n,result:l,index:p,file:k.getFile(p)})}o.set("curUploadIndex",c);o.fire(q.COMPLETE,{index:p,file:k.getFile(p),result:l});o._continueUpload()},_continueUpload:function(){var k=this,l=k.get("uploadFilesStatus");if(l!=c){k._uploaderStatusFile(l)}},_uploaderStatusFile:function(m){var n=this,l=n.get("queue"),k=l.getIndexs(m);if(!k.length){n.set("uploadFilesStatus",c);n.fire(f.event.UPLOAD_FILES);return false}n.upload(k[0]);return n}},{ATTRS:{action:{value:c},timeout:{value:0},CORS:{value:false},async:{value:true},dataType:{value:"text"},filesStatus:{value:c},curUploadIndex:{value:c},curFile:{value:c},uploadType:{value:{}},data:{value:{}},queue:{value:{}},isAllowUpload:{value:true}}},"bio");e.mix(f,{event:{ADD:"add",START:"start",PROGRESS:"progress",COMPLETE:"complete",SUCCESS:"success",UPLOAD_FILES:"uploadFiles",CANCEL:"cancel",ERROR:"error",REMOVE:"remove"},status:{WAITING:"waiting",START:"start",PROGRESS:"progress",SUCCESS:"success",CANCEL:"cancel",ERROR:"error"}});return f});KISSY.add("kg/bio/1.1/kissy2yui",function(b){var a=b.config("mini")?b.Node.node:b.Node;b.augment(a,{_delegate:function(){var c=this;if(Dynamsoft.Lib.isFunction(arguments[1])){c.delegate(arguments[0],arguments[2],arguments[1])}else{c.delegate.apply(c,arguments)}return c},indexOf:function(e){var c=this;if(b.isUndefined(e)){return null}if(e[0]){e=e[0]}var d=0;c.each(function(g,f){if(g[0]===e){d=f}});return d},size:function(){return this.length},set:function(d,c){if(d==="innerHTML"){this.html(c)}else{this.attr(d,c)}return this},get:function(d){var c=this;var e={innerHTML:function(){return c.html()},region:function(){return{height:c.height(),width:c.width()}}};if(d in e){return e[d]()}},appendChild:function(){this.append.apply(this,arguments);return this},setStyle:function(d,c){this.css.apply(this,arguments);return this},setStyles:function(c){this.css.apply(this,arguments);return this},cloneNode:function(){return this.clone.apply(this,arguments)}});b.Node.create=function(c){return b.Node(c)}},{requires:["node","event"]});KISSY.add("kg/bio/1.1/index",function(b,a){return a},{requires:["./base","./kissy2yui"]});
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
(function(){Dynamsoft.Lib.Errors={Server_Restarted:function(a){a._errorCode=-2208;a._errorString="The connection with the local scanning service (Dynamsoft WebTWAIN Service) encountered a problem and has been reset."},HTML5NotSupport:function(a){a._errorCode=-2209;a._errorString="The HTML5 edition does not support this method or property."},HttpServerCannotEmpty:function(a){a._errorCode=-2300;a._errorString="Http upload error: the HTTP Server cannot empty."},NetworkError:function(a){a._errorCode=-2301;a._errorString="Network error."},InvalidResultFormat:function(a){a._errorCode=-2302;a._errorString="The result format is invalid."},UploadError:function(c,b,a){c._errorCode=-2303;if(b){c._errorString="Upload canceled."}else{c._errorString="Upload error.";if(a){c._errorString+=a}}},HttpDownloadUrlError:function(a){a._errorCode=-2304;a._errorString="Http download error: the url is invalid."},HttpDownloadError:function(b,a){b._errorCode=-2305;if(a){b._errorString="User cancelled the operation."}else{b._errorString="Http download error."}},UploadFileCannotEmpty:function(a){a._errorCode=-2306;a._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(a){a._errorCode=-2307;a._errorString="The width or height you entered is invalid."},Server_Invalid:function(a){if(a._errorCode==0){a._errorCode=-2308;a._errorString="The local scanning service (Dynamsoft WebTWAIN Service) has been stopped."}},InvalidLocalFilename:function(b,a){b._errorCode=-2309;b._errorString="The LocalFile is emtpy in "+a+" Function."},BarCode_InvalidIndex:function(b,a){b._errorCode=-2310;b._errorString="The index out of range."},BarCode_InvalidRemoteFilename:function(a){a._errorCode=-2311;a._errorString="The RemoteFile is emtpy in Barcode Download Function."},ImageFileLengthCannotZero:function(a){a._errorCode=-2312;a._errorString="The file length is emtpy."},UploadExceededMaxSize:function(a){a._errorCode=-2313;a._errorString="The size of the images you are about to upload has exceeded the allowed size."},ParameterCannotEmpty:function(a){a._errorCode=-2314;a._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(b,a){b._errorCode=-2315;b._errorString="The index out of range."},Webcam_InvalidRemoteFilename:function(a){a._errorCode=-2316;a._errorString="The RemoteFile is emtpy in Webcam Download Function."}}})();
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
(function(a){var b={};b.reposition=function(c){var e=document.body.scrollTop||document.documentElement.scrollTop;var d=e+(window.innerHeight-c.offsetHeight)/2;c.style.top=d+"px";c.dialogPolyfillInfo.isTopOverridden=true};b.inNodeList=function(c,e){for(var d=0;d<c.length;++d){if(c[d]==e){return true}}return false};b.isInlinePositionSetByStylesheet=function(f){for(var g=0;g<document.styleSheets.length;++g){var n=document.styleSheets[g];var k=null;try{k=n.cssRules}catch(h){}if(!k){continue}for(var d=0;d<k.length;++d){var m=k[d];var o=null;try{o=document.querySelectorAll(m.selectorText)}catch(h){}if(!o||!b.inNodeList(o,f)){continue}var c=m.style.getPropertyValue("top");var l=m.style.getPropertyValue("bottom");if((c&&c!="auto")||(l&&l!="auto")){return true}}}return false};b.needsCentering=function(d){var c=getComputedStyle(d);if(c.position!="absolute"){return false}if((d.style.top!="auto"&&d.style.top!="")||(d.style.bottom!="auto"&&d.style.bottom!="")){return false}return !b.isInlinePositionSetByStylesheet(d)};b.showDialog=function(d){if(this.open){throw"InvalidStateError: showDialog called on open dialog"}this.open=true;this.setAttribute("open","open");if(d){var c=null;var f=null;var e=function(g){for(var h=0;h<g.children.length;h++){var j=g.children[h];if(c===null&&!j.disabled&&(j.nodeName=="BUTTON"||j.nodeName=="INPUT"||j.nodeName=="KEYGEN"||j.nodeName=="SELECT"||j.nodeName=="TEXTAREA")){c=j}if(j.autofocus){f=j;return}e(j);if(f!==null){return}}};e(this);if(f!==null){f.focus()}else{if(c!==null){c.focus()}}}if(b.needsCentering(this)){b.reposition(this)}if(d){this.dialogPolyfillInfo.modal=true;b.dm.pushDialog(this)}};b.close=function(c){if(!this.open){throw new InvalidStateError}this.open=false;this.removeAttribute("open");if(typeof c!="undefined"){this.returnValue=c}if(this.dialogPolyfillInfo.isTopOverridden){this.style.top="auto"}if(this.dialogPolyfillInfo.modal){b.dm.removeDialog(this)}var d;if(document.createEvent){d=document.createEvent("HTMLEvents");d.initEvent("close",true,true)}else{d=new Event("close")}this.dispatchEvent(d);return this.returnValue};b.registerDialog=function(c){if(c.show){}a.addEventListener(c,"dialog_submit",function(d){c.close(d.detail.target.value);d.preventDefault();d.stopPropagation()});c.show=b.showDialog.bind(c,false);c.showModal=b.showDialog.bind(c,true);c.close=b.close.bind(c);c.dialogPolyfillInfo={}};TOP_LAYER_ZINDEX=100000;MAX_PENDING_DIALOGS=100000;b.DialogManager=function(){this.pendingDialogStack=[];this.overlay=document.createElement("div");this.overlay.style.width="100%";this.overlay.style.height="100%";this.overlay.style.position="fixed";this.overlay.style.left="0";this.overlay.style.top="0";this.overlay.style.backgroundColor="#000000";this.overlay.style.opacity="0.3";a.addEventListener(this.overlay,"click",function(c){var d=document.createEvent("MouseEvents");d.initMouseEvent(c.type,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget);document.body.dispatchEvent(d)});a.addEventListener(window,"load",function(){var c=document.getElementsByTagName("form");a.each(c,function(d){if(d.getAttribute("method")=="dialog"){a.addEventListener(d,"click",function(g){if(g.target.type=="submit"){var f;if(CustomEvent){f=new CustomEvent("dialog_submit",{bubbles:true,detail:{target:g.target}})}else{f=document.createEvent("HTMLEvents");f.initEvent("dialog_submit",true,true);f.detail={target:g.target}}this.dispatchEvent(f);g.preventDefault()}})}})})};b.dm=new b.DialogManager();b.DialogManager.prototype.blockDocument=function(){if(!document.body.contains(this.overlay)){document.body.appendChild(this.overlay)}};b.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay)};b.DialogManager.prototype.updateStacking=function(){if(this.pendingDialogStack.length==0){this.unblockDocument();return}this.blockDocument();var e=TOP_LAYER_ZINDEX;for(var d=0;d<this.pendingDialogStack.length;d++){if(d==this.pendingDialogStack.length-1){this.overlay.style.zIndex=e++}var c=this.pendingDialogStack[d];c.dialogPolyfillInfo.backdrop.style.zIndex=e++;c.style.zIndex=e++}};b.DialogManager.prototype.pushDialog=function(d){if(this.pendingDialogStack.length>=MAX_PENDING_DIALOGS){throw"Too many modal dialogs"}var c=document.createElement("div");c.classList.add("backdrop");a.addEventListener(c,"click",function(f){var g=document.createEvent("MouseEvents");g.initMouseEvent(f.type,f.bubbles,f.cancelable,window,f.detail,f.screenX,f.screenY,f.clientX,f.clientY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,f.relatedTarget);d.dispatchEvent(g)});d.parentNode.insertBefore(c,d.nextSibling);d.dialogPolyfillInfo.backdrop=c;this.pendingDialogStack.push(d);this.updateStacking()};b.DialogManager.prototype.removeDialog=function(e){var d=this.pendingDialogStack.indexOf(e);if(d==-1){return}this.pendingDialogStack.splice(d,1);var c=e.dialogPolyfillInfo.backdrop;c.parentNode.removeChild(c);e.dialogPolyfillInfo.backdrop=null;this.updateStacking()};a.Dialog=b})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
;KISSY.ready(function(a){Dynamsoft.Lib.install={_divInstallBody:"dwt-InstallBody",_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:false,bNeedUpgrade:false};Dynamsoft.Lib.install._strDynamsoftWithClose=['<div style="height:40px;width:350px;position:relative;">','<span><div class="DYNLogo" ','alt="Dynamsoft Corporation" border="0" title="10 Years of Experience in TWAIN SDKs and Version Control Solutions" ></div>',"</span>",'<div style="height:30px;padding-left:205px; position:absolute; top:0; left:120px">','<a href="javascript: void(0)" style="text-decoration:none; padding:15px" class="ClosetblCanNotScan">X</a>',"</div></div>"].join("");Dynamsoft.Lib.install._strNonInstallDIV=['<div style="border:1px solid #CCCCCC;text-align:center;" id="',Dynamsoft.Lib.install._divDWTNonInstallContainerID,'"></div>'].join("")});Dynamsoft.WebTwainEnv.ShowDialog=function(a,d,e,f){var c;if(!Dynamsoft.Lib.get("J_waiting")){var g=document.createElement("div");g.className="ds-dialog-wrap";if(f){c=['<div id="J_waiting" class="ds-dialog" style="width:455px;">','<div class="ks-dialog-header"></div>','<div class="ks-dialog-body">','<div class="ks-dialog-content"><div id="',Dynamsoft.Lib.install._divInstallBody,'"></div></div></div>','<div class="ks-dialog-footer"></div>',"</div>"]}else{c=['<div id="J_waiting" class="ds-dialog">','<div class="ks-dialog-header"></div>','<div class="ks-dialog-body">','<div class="ks-dialog-content"><div id="',Dynamsoft.Lib.install._divInstallBody,'"></div></div></div>','<div class="ks-dialog-footer"></div>',"</div>"]}g.innerHTML=c.join("");document.body.appendChild(g);Dynamsoft.Lib.install._dlgInstall=g;Dynamsoft.Lib.Dialog.registerDialog(Dynamsoft.Lib.install._dlgInstall)}if(e===false){return}if(f){Dynamsoft.Lib.get(Dynamsoft.Lib.install._divInstallBody).innerHTML=['<div class="ds-dialog-body" style="height:'+d+"px;width:"+a+'px">',e,"</div>"].join("")}else{Dynamsoft.Lib.get(Dynamsoft.Lib.install._divInstallBody).innerHTML=['<div class="ds-dialog-body" style="height:'+d+'px">',Dynamsoft.Lib.install._strDynamsoftWithClose,e,"</div>"].join("")}Dynamsoft.Lib.install._dlgInstall.style.width=a;Dynamsoft.Lib.install._dlgInstall.style.height=d;Dynamsoft.Lib.install._dlgInstall.showModal();for(var b=0;b<document.links.length;b++){if(document.links[b].className=="ClosetblCanNotScan"){document.links[b].onclick=Dynamsoft__OnclickCloseInstallEx}}};function Dynamsoft__OnclickCloseInstallEx(a){var e=Dynamsoft.Lib.install._dlgInstall;if(e){e.close();document.body.removeChild(e);Dynamsoft.Lib.install._dlgInstall=false}Dynamsoft.Lib.install.bNeedUpgrade=false;var c=Dynamsoft.Lib.get(Dynamsoft.Lib.install._divDWTNonInstallContainerID);if(c){c.parentNode.removeChild(c)}if(a&&Dynamsoft.Lib.isString(a)){Dynamsoft.Lib.show(a)}else{var b,d=Dynamsoft.WebTwainEnv.Containers;for(b=0;b<d.length;b++){Dynamsoft.Lib.show(d[b].ContainerId)}}if(Dynamsoft.Lib.install._divDWTemessageContainer!=""){Dynamsoft.Lib.show(Dynamsoft.Lib.install._divDWTemessageContainer)}}(function(){Dynamsoft.Lib.mix(Dynamsoft.Lib.detect,{global_dlg:false,__dialog:false});Dynamsoft.Lib.detect.showMask=function(){if(Dynamsoft.Lib.detect.__dialog){return}var c=[Dynamsoft.WebTwainEnv.ResourcesPath,"/reference/loading.gif"].join(""),b=['<div style="margin:0 auto;width:100px;line-height:300px"><img src="',c,'" /></div>'].join("");var a=document.createElement("div");a.className="ds-dialog-wrap";a.innerHTML=b;document.body.appendChild(a);Dynamsoft.Lib.detect.__dialog=a;Dynamsoft.Lib.Dialog.registerDialog(Dynamsoft.Lib.detect.__dialog);Dynamsoft.Lib.detect.__dialog.showModal()};Dynamsoft.Lib.detect.hideMask=function(){var a=Dynamsoft.Lib.detect.__dialog;if(a){a.close();document.body.removeChild(a);Dynamsoft.Lib.detect.__dialog=false}}})();
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
(function(b){var a={getHexColor:function(e){var f=this,c=e.length,d=[];if(c===7){d.push(parseInt("0x"+e.slice(1,3)));d.push(parseInt("0x"+e.slice(3,5)));d.push(parseInt("0x"+e.slice(5,7)));return d}return[128,128,128]},drawBoxBorder:function(n,c,h,m,j,l,r){var q=this,g,f,s,k,v,e,u,t,o,d,w;t=Math.floor(c);o=Math.floor(h);d=Math.floor(m);w=Math.floor(j);v=n.getImageData(t,o,d,w);k=v.data;e=q.getHexColor(l);if(b.isUndefined(r)){u=e}else{u=q.getHexColor(r)}s=0;for(g=0;g<d;g++){k[s]=e[0];k[s+1]=e[1];k[s+2]=e[2];s+=4}g=0;for(f=0;f<w;f++){s=(f*d+g)*4;k[s]=e[0];k[s+1]=e[1];k[s+2]=e[2]}for(f=0;f<w;f++){g=d-1;s=(f*d+g)*4;k[s]=u[0];k[s+1]=u[1];k[s+2]=u[2]}s=(w-1)*d*4;for(g=0;g<d;g++){k[s]=u[0];k[s+1]=u[1];k[s+2]=u[2];s+=4}n.putImageData(v,t,o)},drawImageWithHermite:function(M,l,p,n,o,f){var c=M.width,h=M.height,A=Math.min(o,l.width),q=Math.min(f,l.height),N=M.getContext("2d").getImageData(0,0,c,h),L=l.getContext("2d").getImageData(p,n,A,q),J=N.data,I=L.data,m=c/A,E=h/q,z=Math.ceil(m/2),C=Math.ceil(E/2),G,F;for(F=0;F<q;F++){for(G=0;G<A;G++){var D=gx_g=gx_b=gx_a=0,H=(G+F*A)*4,v=0,K=0,d=0,g=(F+0.5)*E;for(var B=Math.floor(F*E);B<(F+1)*E;B++){var s=Math.abs(g-(B+0.5))/C,k=(G+0.5)*m,u=s*s;for(var e=Math.floor(G*m);e<(G+1)*m;e++){var t=Math.abs(k-(e+0.5))/z,r=Math.sqrt(u+t*t);if(r>=-1&&r<=1){v=2*r*r*r-3*r*r+1;if(v>0){t=4*(e+B*c);gx_a+=v*J[t+3];d+=v;if(J[t+3]<255){v=v*J[t+3]/250}D+=v*J[t];gx_g+=v*J[t+1];gx_b+=v*J[t+2];K+=v}}}}I[H]=D/K;I[H+1]=gx_g/K;I[H+2]=gx_b/K;I[H+3]=gx_a/d}}l.getContext("2d").clearRect(0,0,l.width,l.height);l.getContext("2d").putImageData(L,p,n)}};b.mix(b,a)})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: global
* final js: build\src.common.js
*/
(function(a){a.DOM={one:function(b){return KISSY.one(b)},getOffset:function(k,f){var c=k.target,j=0,i=0,g=0,h=0,b,e,d=false;while(c&&!isNaN(c.offsetLeft)&&!isNaN(c.offsetTop)){e=c.scrollLeft;b=c.scrollTop;if(c.tagName==="BODY"){if(d){e=0;b=0}else{e=e|document.documentElement.scrollLeft;b=b|document.documentElement.scrollTop}}else{if(c.style.position==="fixed"){d=true}}j+=c.offsetLeft-e;i+=c.offsetTop-b;c=c.offsetParent}if(f){g=f.Left;h=f.Top}j=k.clientX-j-g;i=k.clientY-i-h;return{x:j,y:i}}}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: plugin ( ie & noneie )
* final js: build\src.plugin.js
*/
(function(b){if(!b.product.bPluginEdition&&!b.product.bActiveXEdition){return}if(!Object.defineProperty){Object.defineProperty=function(k,h,j){var g=k[h],e=function(){return j.get.apply(k,[g])},i=function(l){return g=j.set.apply(k,[l])};if(k.__defineGetter__){k.__defineGetter__(h,e);k.__defineSetter__(h,i)}else{var f=function(m){if(event.propertyName==h){k.detachEvent("onpropertychange",f);var l=i(k[h]);k[h]=e;k[h].toString=e;k.attachEvent("onpropertychange",f)}};k[h]=e;k[h].toString=e;k.attachEvent("onpropertychange",f)}}}var a=!0,c=!1,d={isFunction:function(e){return e&&typeof(e)==="function"},checkErrorString:function(f){var e=f.getSWebTwain().ErrorCode;if(e==0){return a}return c},wrapperRet:function(h,f,e,i,g){if(d.checkErrorString(h)){if(d.isFunction(e)){if(g){e(h.getSWebTwain().HTTPPostResponseString)}else{e()}}}else{if(d.isFunction(i)){if(g){i(h.getSWebTwain().ErrorCode,h.getSWebTwain().ErrorString,h.getSWebTwain().HTTPPostResponseString)}else{i(h.getSWebTwain().ErrorCode,h.getSWebTwain().ErrorString)}}}return f},getImageType:function(f){var e=f.length;if(e<4){return -1}var g=f.lastIndexOf(".");if(g===-1){return -1}var h=f.slice(g).toLowerCase();if(h===".bmp"||h===".dib"){return 0}if(h===".jpg"||h===".jpe"||h===".jpeg"||h===".jfif"){return 1}if(h===".tif"||h===".tiff"){return 2}if(h===".png"){return 3}if(h===".pdf"){return 4}if(h===".gif"){return 5}return -1},replaceLocalFilename:function(e){var g=e;if(b.env.bFileSystem){g=decodeURI(g)}return g},makeParams:function(){var e=arguments;if(e===undefined||e.length===0){return undefined}else{return e}}};b.wrapperRet=d.wrapperRet;b.DynamicLoadAddonFuns=[];b.attachAddon=function(e){b.each(b.DynamicLoadAddonFuns,function(f){if(b.isFunction(f)){f(e)}})};b.attachProperty=function(e){Object.defineProperty(e,"ErrorCode",{get:function(){return e.getSWebTwain().ErrorCode}});Object.defineProperty(e,"ErrorString",{get:function(){return e.getSWebTwain().ErrorString}});Object.defineProperty(e,"LogLevel",{get:function(){return e.getSWebTwain().LogLevel},set:function(f){f=f*1;e.getSWebTwain().LogLevel=f;return a}});Object.defineProperty(e,"Manufacturer",{get:function(){return e.getSWebTwain().Manufacturer},set:function(f){e.getSWebTwain().Manufacturer=f;return a}});Object.defineProperty(e,"ProductFamily",{get:function(){return e.getSWebTwain().ProductFamily},set:function(f){e.getSWebTwain().ProductFamily=f;return a}});Object.defineProperty(e,"ProductKey",{get:function(){return Dynamsoft.WebTwainEnv.ProductKey},set:function(f){Dynamsoft.WebTwainEnv.ProductKey=f;e.getSWebTwain().ProductKey=f;return a}});Object.defineProperty(e,"ProductName",{get:function(){return e.getSWebTwain().ProductName},set:function(f){e.getSWebTwain().ProductName=f;return a}});Object.defineProperty(e,"VersionInfo",{get:function(){return e.getSWebTwain().VersionInfo},set:function(f){e.getSWebTwain().VersionInfo=f;return a}});Object.defineProperty(e,"BitDepth",{get:function(){return e.getSWebTwain().BitDepth},set:function(f){e.getSWebTwain().BitDepth=f;return a}});Object.defineProperty(e,"Brightness",{get:function(){return e.getSWebTwain().Brightness},set:function(f){e.getSWebTwain().Brightness=f;return a}});Object.defineProperty(e,"Contrast",{get:function(){return e.getSWebTwain().Contrast},set:function(f){e.getSWebTwain().Contrast=f;return a}});Object.defineProperty(e,"CurrentSourceName",{get:function(){return e.getSWebTwain().CurrentSourceName}});Object.defineProperty(e,"DataSourceStatus",{get:function(){return e.getSWebTwain().DataSourceStatus}});Object.defineProperty(e,"DefaultSourceName",{get:function(){return e.getSWebTwain().DefaultSourceName}});Object.defineProperty(e,"Duplex",{get:function(){return e.getSWebTwain().Duplex}});Object.defineProperty(e,"IfAppendImage",{get:function(){return e.getSWebTwain().IfAppendImage},set:function(f){e.getSWebTwain().IfAppendImage=f;return a}});Object.defineProperty(e,"IfAutoBright",{get:function(){return e.getSWebTwain().IfAutoBright},set:function(f){e.getSWebTwain().IfAutoBright=f;return a}});Object.defineProperty(e,"IfAutoDiscardBlankpages",{get:function(){return e.getSWebTwain().IfAutoDiscardBlankpages},set:function(f){e.getSWebTwain().IfAutoDiscardBlankpages=f;return a}});Object.defineProperty(e,"IfAutoFeed",{get:function(){return e.getSWebTwain().IfAutoFeed},set:function(f){e.getSWebTwain().IfAutoFeed=f;return a}});Object.defineProperty(e,"IfAutomaticBorderDetection",{get:function(){return e.getSWebTwain().IfAutomaticBorderDetection},set:function(f){e.getSWebTwain().IfAutomaticBorderDetection=f;return a}});Object.defineProperty(e,"IfAutomaticDeskew",{get:function(){return e.getSWebTwain().IfAutomaticDeskew},set:function(f){e.getSWebTwain().IfAutomaticDeskew=f;return a}});Object.defineProperty(e,"IfAutoScan",{get:function(){return e.getSWebTwain().IfAutoScan},set:function(f){e.getSWebTwain().IfAutoScan=f;return a}});Object.defineProperty(e,"IfDisableSourceAfterAcquire",{get:function(){return e.getSWebTwain().IfDisableSourceAfterAcquire},set:function(f){e.getSWebTwain().IfDisableSourceAfterAcquire=f;return a}});Object.defineProperty(e,"IfDuplexEnabled",{get:function(){return e.getSWebTwain().IfDuplexEnabled},set:function(f){e.getSWebTwain().IfDuplexEnabled=f;return a}});Object.defineProperty(e,"IfFeederEnabled",{get:function(){return e.getSWebTwain().IfFeederEnabled},set:function(f){e.getSWebTwain().IfFeederEnabled=f;return a}});Object.defineProperty(e,"IfFeederLoaded",{get:function(){return e.getSWebTwain().IfFeederLoaded}});Object.defineProperty(e,"IfModalUI",{get:function(){return e.getSWebTwain().IfModalUI},set:function(f){e.getSWebTwain().IfModalUI=f;return a}});Object.defineProperty(e,"IfPaperDetectable",{get:function(){return e.getSWebTwain().IfPaperDetectable}});Object.defineProperty(e,"IfScanInNewThread",{get:function(){return e.getSWebTwain().IfScanInNewThread},set:function(f){e.getSWebTwain().IfScanInNewThread=f;return a}});Object.defineProperty(e,"IfShowCancelDialogWhenImageTransfer",{get:function(){return e.getSWebTwain().IfShowCancelDialogWhenImageTransfer},set:function(f){e.getSWebTwain().IfShowCancelDialogWhenImageTransfer=f;return a}});Object.defineProperty(e,"IfShowUI",{get:function(){return e.getSWebTwain().IfShowUI},set:function(f){e.getSWebTwain().IfShowUI=f;return a}});Object.defineProperty(e,"IfShowIndicator",{get:function(){return e.getSWebTwain().IfShowIndicator},set:function(f){e.getSWebTwain().IfShowIndicator=f;return a}});Object.defineProperty(e,"IfUseTwainDSM",{get:function(){return e.getSWebTwain().IfUseTwainDSM},set:function(f){e.getSWebTwain().IfUseTwainDSM=f;return a}});Object.defineProperty(e,"IfUIControllable",{get:function(){return e.getSWebTwain().IfUIControllable}});Object.defineProperty(e,"ImageBitsPerPixel",{get:function(){return e.getSWebTwain().ImageBitsPerPixel}});Object.defineProperty(e,"ImageCaptureDriverType",{get:function(){return e.getSWebTwain().ImageCaptureDriverType},set:function(f){e.getSWebTwain().ImageCaptureDriverType=f;return a}});Object.defineProperty(e,"ImageLayoutDocumentNumber",{get:function(){return e.getSWebTwain().ImageLayoutDocumentNumber}});Object.defineProperty(e,"ImageLayoutFrameBottom",{get:function(){return e.getSWebTwain().ImageLayoutFrameBottom}});Object.defineProperty(e,"ImageLayoutFrameLeft",{get:function(){return e.getSWebTwain().ImageLayoutFrameLeft}});Object.defineProperty(e,"ImageLayoutFrameNumber",{get:function(){return e.getSWebTwain().ImageLayoutFrameNumber}});Object.defineProperty(e,"ImageLayoutFrameRight",{get:function(){return e.getSWebTwain().ImageLayoutFrameRight}});Object.defineProperty(e,"ImageLayoutFrameTop",{get:function(){return e.getSWebTwain().ImageLayoutFrameTop}});Object.defineProperty(e,"ImageLayoutPageNumber",{get:function(){return e.getSWebTwain().ImageLayoutPageNumber}});Object.defineProperty(e,"ImageLength",{get:function(){return e.getSWebTwain().ImageLength}});Object.defineProperty(e,"ImagePixelType",{get:function(){return e.getSWebTwain().ImagePixelType}});Object.defineProperty(e,"ImageWidth",{get:function(){return e.getSWebTwain().ImageWidth}});Object.defineProperty(e,"ImageXResolution",{get:function(){return e.getSWebTwain().ImageXResolution}});Object.defineProperty(e,"ImageYResolution",{get:function(){return e.getSWebTwain().ImageYResolution}});Object.defineProperty(e,"MagData",{get:function(){return e.getSWebTwain().MagData}});Object.defineProperty(e,"MagType",{get:function(){return e.getSWebTwain().MagType}});Object.defineProperty(e,"PageSize",{get:function(){return e.getSWebTwain().PageSize},set:function(f){f=f*1;e.getSWebTwain().PageSize=f;return a}});Object.defineProperty(e,"PendingXfers",{get:function(){return e.getSWebTwain().PendingXfers}});Object.defineProperty(e,"PixelFlavor",{get:function(){return e.getSWebTwain().PixelFlavor},set:function(f){e.getSWebTwain().PixelFlavor=f;return a}});Object.defineProperty(e,"PixelType",{get:function(){return e.getSWebTwain().PixelType},set:function(f){e.getSWebTwain().PixelType=f;return a}});Object.defineProperty(e,"Resolution",{get:function(){return e.getSWebTwain().Resolution},set:function(f){f=f*1;e.getSWebTwain().Resolution=f;return a}});Object.defineProperty(e,"SourceCount",{get:function(){return e.getSWebTwain().SourceCount}});Object.defineProperty(e,"TransferMode",{get:function(){return e.getSWebTwain().TransferMode},set:function(f){e.getSWebTwain().TransferMode=f;return a}});Object.defineProperty(e,"Unit",{get:function(){return e.getSWebTwain().Unit},set:function(f){e.getSWebTwain().Unit=f;return a}});Object.defineProperty(e,"XferCount",{get:function(){return e.getSWebTwain().XferCount},set:function(f){f=f*1;e.getSWebTwain().XferCount=f;return a}});Object.defineProperty(e,"Capability",{get:function(){return e.getSWebTwain().Capability},set:function(f){e.getSWebTwain().Capability=f;return a}});Object.defineProperty(e,"CapCurrentIndex",{get:function(){return e.getSWebTwain().CapCurrentIndex},set:function(f){e.getSWebTwain().CapCurrentIndex=f;return a}});Object.defineProperty(e,"CapCurrentValue",{get:function(){return e.getSWebTwain().CapCurrentValue},set:function(f){e.getSWebTwain().CapCurrentValue=f;return a}});Object.defineProperty(e,"CapDefaultIndex",{get:function(){return e.getSWebTwain().CapDefaultIndex}});Object.defineProperty(e,"CapDefaultValue",{get:function(){return e.getSWebTwain().CapDefaultValue}});Object.defineProperty(e,"CapDescription",{get:function(){return e.getSWebTwain().CapDescription},set:function(f){e.getSWebTwain().CapDescription=f;return a}});Object.defineProperty(e,"CapMaxValue",{get:function(){return e.getSWebTwain().CapMaxValue},set:function(f){e.getSWebTwain().CapMaxValue=f;return a}});Object.defineProperty(e,"CapMinValue",{get:function(){return e.getSWebTwain().CapMinValue},set:function(f){e.getSWebTwain().CapMinValue=f;return a}});Object.defineProperty(e,"CapNumItems",{get:function(){return e.getSWebTwain().CapNumItems},set:function(f){e.getSWebTwain().CapNumItems=f;return a}});Object.defineProperty(e,"CapStepSize",{get:function(){return e.getSWebTwain().CapStepSize},set:function(f){e.getSWebTwain().CapStepSize=f;return a}});Object.defineProperty(e,"CapType",{get:function(){return e.getSWebTwain().CapType},set:function(f){e.getSWebTwain().CapType=f;return a}});Object.defineProperty(e,"CapValue",{get:function(){return e.getSWebTwain().CapValue},set:function(f){e.getSWebTwain().CapValue=f;return a}});Object.defineProperty(e,"CapValueString",{get:function(){return e.getSWebTwain().CapValueString},set:function(f){e.getSWebTwain().CapValueString=f;return a}});Object.defineProperty(e,"CapValueType",{get:function(){return e.getSWebTwain().CapValueType},set:function(f){e.getSWebTwain().CapValueType=f;return a}});Object.defineProperty(e,"AllowMultiSelect",{get:function(){return e.getSWebTwain().AllowMultiSelect},set:function(f){e.getSWebTwain().AllowMultiSelect=f;return a}});Object.defineProperty(e,"BackgroundColor",{get:function(){return e.getSWebTwain().BackgroundColor},set:function(f){e.getSWebTwain().BackgroundColor=f;return a}});Object.defineProperty(e,"BackgroundFillColor",{get:function(){return e.getSWebTwain().BackgroundFillColor},set:function(f){e.getSWebTwain().BackgroundFillColor=f;return a}});Object.defineProperty(e,"BlankImageCurrentStdDev",{get:function(){return e.getSWebTwain().BlankImageCurrentStdDev},set:function(f){return c}});Object.defineProperty(e,"BlankImageMaxStdDev",{get:function(){return e.getSWebTwain().BlankImageMaxStdDev},set:function(f){e.getSWebTwain().BlankImageMaxStdDev=f;return a}});Object.defineProperty(e,"BlankImageThreshold",{get:function(){return e.getSWebTwain().BlankImageThreshold},set:function(f){e.getSWebTwain().BlankImageThreshold=f;return a}});Object.defineProperty(e,"CurrentImageIndexInBuffer",{get:function(){return e.getSWebTwain().CurrentImageIndexInBuffer},set:function(f){if(f!=e.getSWebTwain().CurrentImageIndexInBuffer){e.getSWebTwain().CurrentImageIndexInBuffer=f}return a}});Object.defineProperty(e,"FitWindowType",{get:function(){return e.getSWebTwain().FitWindowType},set:function(f){e.getSWebTwain().FitWindowType=f;return a}});Object.defineProperty(e,"HowManyImagesInBuffer",{get:function(){return e.getSWebTwain().HowManyImagesInBuffer},set:function(f){e.getSWebTwain().HowManyImagesInBuffer=f;return a}});Object.defineProperty(e,"IfFitWindow",{get:function(){return e.getSWebTwain().IfFitWindow},set:function(f){e.getSWebTwain().IfFitWindow=f;return a}});Object.defineProperty(e,"ImageMargin",{get:function(){return e.getSWebTwain().ImageMargin},set:function(f){e.getSWebTwain().ImageMargin=f;return a}});Object.defineProperty(e,"MaxImagesInBuffer",{get:function(){return e.getSWebTwain().MaxImagesInBuffer},set:function(f){e.getSWebTwain().MaxImagesInBuffer=f;return a}});Object.defineProperty(e,"MouseX",{get:function(){return e.getSWebTwain().MouseX},set:function(f){return c}});Object.defineProperty(e,"MouseY",{get:function(){return e.getSWebTwain().MouseY},set:function(f){return c}});Object.defineProperty(e,"SelectedImagesCount",{get:function(){return e.getSWebTwain().SelectedImagesCount},set:function(f){e.getSWebTwain().SelectedImagesCount=f;return a}});Object.defineProperty(e,"SelectionImageBorderColor",{get:function(){return e.getSWebTwain().SelectionImageBorderColor},set:function(f){e.getSWebTwain().SelectionImageBorderColor=f;return a}});Object.defineProperty(e,"Zoom",{get:function(){return e.getSWebTwain().Zoom},set:function(f){e.getSWebTwain().Zoom=f;return a}});Object.defineProperty(e,"MouseShape",{get:function(){return e.getSWebTwain().MouseShape},set:function(f){e.getSWebTwain().MouseShape=f;return a}});Object.defineProperty(e,"HTTPPostResponseString",{get:function(){return e.getSWebTwain().HTTPPostResponseString}});Object.defineProperty(e,"AsyncMode",{get:function(){return e.getSWebTwain().AsyncMode},set:function(f){e.getSWebTwain().AsyncMode=f;return a}});Object.defineProperty(e,"FTPPassword",{get:function(){return e.getSWebTwain().FTPPassword},set:function(f){e.getSWebTwain().FTPPassword=f;return a}});Object.defineProperty(e,"FTPPort",{get:function(){return e.getSWebTwain().FTPPort},set:function(f){if(f!==""){f=f*1;e.getSWebTwain().FTPPort=f;return a}return c}});Object.defineProperty(e,"FTPUserName",{get:function(){return e.getSWebTwain().FTPUserName},set:function(f){e.getSWebTwain().FTPUserName=f;return a}});Object.defineProperty(e,"HTTPPort",{get:function(){return e.getSWebTwain().HTTPPort},set:function(f){if(f!==""){f=f*1;e.getSWebTwain().HTTPPort=f}else{f=b.detect.ssl?443:80;e.getSWebTwain().HTTPPort=f}return a}});Object.defineProperty(e,"HTTPPassword",{get:function(){return e.getSWebTwain().HTTPPassword},set:function(f){e.getSWebTwain().HTTPPassword=f;return a}});Object.defineProperty(e,"HTTPUserName",{get:function(){return e.getSWebTwain().HTTPUserName},set:function(f){e.getSWebTwain().HTTPUserName=f;return a}});Object.defineProperty(e,"IfPASVMode",{get:function(){return e.getSWebTwain().IfPASVMode},set:function(f){e.getSWebTwain().IfPASVMode=f;return a}});Object.defineProperty(e,"IfShowProgressBar",{get:function(){return e.getSWebTwain().IfShowProgressBar},set:function(f){e.getSWebTwain().IfShowProgressBar=f;return a}});Object.defineProperty(e,"ProxyServer",{get:function(){return e.getSWebTwain().ProxyServer},set:function(f){e.getSWebTwain().ProxyServer=f;return a}});Object.defineProperty(e,"IfShowFileDialog",{get:function(){return e.getSWebTwain().IfShowFileDialog},set:function(f){e.getSWebTwain().IfShowFileDialog=f;return a}});Object.defineProperty(e,"IfTiffMultiPage",{get:function(){return e.getSWebTwain().IfTiffMultiPage},set:function(f){e.getSWebTwain().IfTiffMultiPage=f;return a}});Object.defineProperty(e,"PDFAuthor",{get:function(){return e.getSWebTwain().PDFAuthor},set:function(f){e.getSWebTwain().PDFAuthor=f;return a}});Object.defineProperty(e,"PDFCompressionType",{get:function(){return e.getSWebTwain().PDFCompressionType},set:function(f){e.getSWebTwain().PDFCompressionType=f;return a}});Object.defineProperty(e,"PDFCreationDate",{get:function(){return e.getSWebTwain().PDFCreationDate},set:function(f){e.getSWebTwain().PDFCreationDate=f;return a}});Object.defineProperty(e,"PDFCreator",{get:function(){return e.getSWebTwain().PDFCreator},set:function(f){e.getSWebTwain().PDFCreator=f;return a}});Object.defineProperty(e,"PDFKeywords",{get:function(){return e.getSWebTwain().PDFKeywords},set:function(f){e.getSWebTwain().PDFKeywords=f;return a}});Object.defineProperty(e,"PDFModifiedDate",{get:function(){return e.getSWebTwain().PDFModifiedDate},set:function(f){e.getSWebTwain().PDFModifiedDate=f;return a}});Object.defineProperty(e,"PDFProducer",{get:function(){return e.getSWebTwain().PDFProducer},set:function(f){e.getSWebTwain().PDFProducer=f;return a}});Object.defineProperty(e,"PDFSubject",{get:function(){return e.getSWebTwain().PDFSubject},set:function(f){e.getSWebTwain().PDFSubject=f;return a}});Object.defineProperty(e,"PDFTitle",{get:function(){return e.getSWebTwain().PDFTitle},set:function(f){e.getSWebTwain().PDFTitle=f;return a}});Object.defineProperty(e,"PDFVersion",{get:function(){return e.getSWebTwain().PDFVersion},set:function(f){e.getSWebTwain().PDFVersion=f;return a}});Object.defineProperty(e,"TIFFCompressionType",{get:function(){return e.getSWebTwain().TIFFCompressionType},set:function(f){e.getSWebTwain().TIFFCompressionType=f;return a}});Object.defineProperty(e,"JPEGQuality",{get:function(){return e.getSWebTwain().JPEGQuality},set:function(f){f=f*1;if(f>=100){f=100}e.getSWebTwain().JPEGQuality=f;return a}});Object.defineProperty(e,"SelectionRectAspectRatio",{get:function(){return e.getSWebTwain().SelectionRectAspectRatio},set:function(f){e.getSWebTwain().SelectionRectAspectRatio=f;return a}});Object.defineProperty(e,"IfAllowLocalCache",{get:function(){return e.getSWebTwain().IfAllowLocalCache},set:function(f){e.getSWebTwain().IfAllowLocalCache=f;return a}});Object.defineProperty(e,"BrokerProcessType",{get:function(){return e.getSWebTwain().BrokerProcessType},set:function(f){e.getSWebTwain().BrokerProcessType=f;return a}});Object.defineProperty(e,"BorderStyle",{get:function(){return e.getSWebTwain().BorderStyle},set:function(f){e.getSWebTwain().BorderStyle=f;return a}});Object.defineProperty(e,"IfShowPrintUI",{get:function(){return e.getSWebTwain().IfShowPrintUI},set:function(f){e.getSWebTwain().IfShowPrintUI=f;return a}});Object.defineProperty(e,"VScrollBar",{get:function(){return e.getSWebTwain().VScrollBar},set:function(f){e.getSWebTwain().VScrollBar=f;return a}});Object.defineProperty(e,"EnableInteractiveZoom",{get:function(){return e.getSWebTwain().EnableInteractiveZoom},set:function(f){e.getSWebTwain().EnableInteractiveZoom=f;return a}});Object.defineProperty(e,"ImageEditorIfEnableEnumerator",{get:function(){return e.getSWebTwain().ImageEditorIfEnableEnumerator},set:function(f){e.getSWebTwain().ImageEditorIfEnableEnumerator=f;return a}});Object.defineProperty(e,"ImageEditorIfReadonly",{get:function(){return e.getSWebTwain().ImageEditorIfReadonly},set:function(f){e.getSWebTwain().ImageEditorIfReadonly=f;return a}});Object.defineProperty(e,"ImageEditorIfModal",{get:function(){return e.getSWebTwain().ImageEditorIfModal},set:function(f){e.getSWebTwain().ImageEditorIfModal=f;return a}});Object.defineProperty(e,"ImageEditorWindowTitle",{get:function(){return e.getSWebTwain().ImageEditorWindowTitle},set:function(f){e.getSWebTwain().ImageEditorWindowTitle=f;return a}});Object.defineProperty(e,"IfSSL",{get:function(){return e.getSWebTwain().IfSSL},set:function(f){e.getSWebTwain().IfSSL=f;return a}});Object.defineProperty(e,"AllowPluginAuthentication",{get:function(){return e.getSWebTwain().AllowPluginAuthentication},set:function(f){e.getSWebTwain().AllowPluginAuthentication=f;return a}});Object.defineProperty(e,"HttpFieldNameOfUploadedImage",{get:function(){return e.getSWebTwain().HttpFieldNameOfUploadedImage},set:function(f){e.getSWebTwain().HttpFieldNameOfUploadedImage=f;return a}});Object.defineProperty(e,"MaxInternetTransferThreads",{get:function(){return e.getSWebTwain().MaxInternetTransferThreads},set:function(f){e.getSWebTwain().MaxInternetTransferThreads=f;return a}});Object.defineProperty(e,"MaxUploadImageSize",{get:function(){return e.getSWebTwain().MaxUploadImageSize},set:function(f){e.getSWebTwain().MaxUploadImageSize=f;return a}});Object.defineProperty(e,"IfOpenImageWithGDIPlus",{get:function(){return e.getSWebTwain().IfOpenImageWithGDIPlus},set:function(f){e.getSWebTwain().IfOpenImageWithGDIPlus=f;return a}});Object.defineProperty(e,"BufferMemoryLimit",{get:function(){return e.getSWebTwain().BufferMemoryLimit},set:function(f){e.getSWebTwain().BufferMemoryLimit=f;return a}});Object.defineProperty(e,"Width",{get:function(){return e.getSWebTwain().style.width},set:function(f){var g=this;e._ChangeWidth(f);return a}});Object.defineProperty(e,"Height",{get:function(){return e.getSWebTwain().style.height},set:function(f){var g=this;e._ChangeHeight(f);return a}});Object.defineProperty(e,"IfThrowException",{get:function(){return e.getSWebTwain().IfThrowException},set:function(f){e.getSWebTwain().IfThrowException=f;return a}});Object.defineProperty(e,"ShowPageNumber",{get:function(){return c},set:function(f){return c}})};b.attachMethod=function(e){var f=e;e.RegisterEvent=function(g,j){var h=this,i=["__",g].join("");f[i]=j;f.getSWebTwain().RegisterEvent(g,j);return a};e.onEvent=function(g,h){this.RegisterEvent(g,h);return a};e.on=function(g,h){this.RegisterEvent(g,h);return a};e.CancelAllPendingTransfers=function(){return f.getSWebTwain().CancelAllPendingTransfers()};e.CloseSource=function(){return f.getSWebTwain().CloseSource()};e.CloseSourceManager=function(){return f.getSWebTwain().CloseSourceManager()};e.DisableSource=function(){return f.getSWebTwain().DisableSource()};e.FeedPage=function(){return f.getSWebTwain().FeedPage()};e.GetDeviceType=function(){return f.getSWebTwain().GetDeviceType()};e.GetSourceNameItems=function(g){return f.getSWebTwain().GetSourceNameItems(g)};e.SourceNameItems=function(g){return f.getSWebTwain().GetSourceNameItems(g)};e.GetSourceNames=function(){return[]};e.GetSourceType=function(g){return f.getSWebTwain().GetSourceType(g)};e.OpenSource=function(){return f.getSWebTwain().OpenSource()};e.OpenSourceManager=function(){return f.getSWebTwain().OpenSourceManager()};e.ResetImageLayout=function(){return f.getSWebTwain().ResetImageLayout()};e.RewindPage=function(){return f.getSWebTwain().RewindPage()};e.SelectSource=function(){return f.getSWebTwain().SelectSource()};e.SelectSourceByIndex=function(g){return f.getSWebTwain().SelectSourceByIndex(g)};e.SetFileXferInfo=function(g,i){var h=d.replaceLocalFilename(g);return f.getSWebTwain().SetFileXferInfo(h,i)};e.SetImageLayout=function(j,i,h,g){return f.getSWebTwain().SetImageLayout(j,i,h,g)};e.CapGet=function(){return f.getSWebTwain().CapGet()};e.CapGetCurrent=function(){return f.getSWebTwain().CapGetCurrent()};e.CapGetDefault=function(){return f.getSWebTwain().CapGetDefault()};e.CapGetFrameBottom=function(g){return f.getSWebTwain().CapGetFrameBottom(g)};e.CapGetFrameLeft=function(g){return f.getSWebTwain().CapGetFrameLeft(g)};e.CapGetFrameRight=function(g){return f.getSWebTwain().CapGetFrameRight(g)};e.CapGetFrameTop=function(g){return f.getSWebTwain().CapGetFrameTop(g)};e.CapGetHelp=function(){return f.getSWebTwain().CapGetHelp()};e.CapGetLabel=function(){return f.getSWebTwain().CapGetLabel()};e.CapGetLabels=function(){return f.getSWebTwain().CapGetLabels()};e.CapIfSupported=function(g){return f.getSWebTwain().CapIfSupported(g)};e.CapReset=function(){return f.getSWebTwain().CapReset()};e.CapSet=function(){return f.getSWebTwain().CapSet()};e.CapSetFrame=function(h,k,j,i,g){return f.getSWebTwain().CapSetFrame(h,k,j,i,g)};e.GetCapItems=function(g){return f.getSWebTwain().GetCapItems(g)};e.GetCapItemsString=function(g){return f.getSWebTwain().GetCapItemsString(g)};e.SetCapItems=function(h,g){return f.getSWebTwain().SetCapItems(h,g)};e.SetCapItemsString=function(h,g){return f.getSWebTwain().SetCapItemsString(h,g)};e.AddText=function(l,g,n,m,k,i,j,h){return f.getSWebTwain().AddText(l,g,n,m,k,i,j,h)};e.CreateTextFont=function(i,u,n,m,q,r,j,s,g,p,k,l,t,h){return f.getSWebTwain().CreateTextFont(i,u,n,m,q,r,j,s,g,p,k,l,t,h)};e.CopyToClipboard=function(g){return f.getSWebTwain().CopyToClipboard(g)};e.Erase=function(i,k,j,h,g){return f.getSWebTwain().Erase(i,k,j,h,g)};e.GetImageBitDepth=function(g){return f.getSWebTwain().GetImageBitDepth(g)};e.GetImageWidth=function(g){return f.getSWebTwain().GetImageWidth(g)};e.GetImageHeight=function(g){return f.getSWebTwain().GetImageHeight(g)};e.GetImageSize=function(h,g,i){return f.getSWebTwain().GetImageSize(h,g,i)};e.GetImageSizeWithSpecifiedType=function(g,h){return f.getSWebTwain().GetImageSizeWithSpecifiedType(g,h)};e.GetImageXResolution=function(g){return f.getSWebTwain().GetImageXResolution(g)};e.GetImageYResolution=function(g){return f.getSWebTwain().GetImageYResolution(g)};e.GetSelectedImageIndex=function(g){return f.getSWebTwain().GetSelectedImageIndex(g)};e.SetSelectedImageIndex=function(h,g){return f.getSWebTwain().SetSelectedImageIndex(h,g)};e.GetSelectedImagesSize=function(g){return f.getSWebTwain().GetSelectedImagesSize(g)};e.GetSkewAngle=function(g){return f.getSWebTwain().GetSkewAngle(g)};e.GetSkewAngleEx=function(i,k,j,h,g){return f.getSWebTwain().GetSkewAngleEx(i,k,j,h,g)};e.IsBlankImage=function(g){return f.getSWebTwain().IsBlankImage(g)};e.IsBlankImageEx=function(i,k,j,h,g,l){return f.getSWebTwain().IsBlankImageEx(i,k,j,h,g,l)};e.Mirror=function(g){return f.getSWebTwain().Mirror(g)};e.OverlayRectangle=function(k,m,l,i,h,g,j){return f.getSWebTwain().OverlayRectangle(k,m,l,i,h,g,j)};e.RemoveAllImages=function(){var h=this,g;g=f.getSWebTwain().RemoveAllImages();if(g&&d.checkErrorString(f)){f.__innerRefreshImage()}return g};e.RemoveAllSelectedImages=function(){var h=this,g;g=f.getSWebTwain().RemoveAllSelectedImages();if(g&&d.checkErrorString(f)){f.__innerRefreshImage()}return g};e.RemoveImage=function(g){return f.getSWebTwain().RemoveImage(g)};e.Rotate=function(k,h,j){var i=this,g=parseInt(k),l=f.getSWebTwain().Rotate(g,h,j),m=(l==1);return m};e.RotateEx=function(l,i,k,g){var j=this,h=parseInt(l),m=f.getSWebTwain().RotateEx(h,i,k,g),n=(m==1);return n};e.RotateLeft=function(i){var h=this,g=parseInt(i),j=f.getSWebTwain().RotateLeft(g),k=(j==1);return k};e.RotateRight=function(i){var h=this,g=parseInt(i),j=f.getSWebTwain().RotateRight(g),k=(j==1);return k};e.ChangeImageSize=function(k,n,g,h){var j=this,i=parseInt(k),l=f.getSWebTwain().ChangeImageSize(i,n,g,h),m=(l==1);return m};e.Flip=function(i){var h=this,g=parseInt(i),j=f.getSWebTwain().Flip(g),k=(j==1);return k};e.Crop=function(p,i,m,n,h){var l=this,k=parseInt(p),g=f.getSWebTwain().Crop(k,i,m,n,h),j=(g==1);return j};e.CropToClipboard=function(p,i,m,n,h){var l=this,k=parseInt(p),g=f.getSWebTwain().CropToClipboard(k,i,m,n,h),j=(g==1);return j};e.CutFrameToClipboard=function(p,i,m,n,h){var l=this,k=parseInt(p),g=f.getSWebTwain().CutFrameToClipboard(k,i,m,n,h),j=(g==1);return j};e.CutToClipboard=function(i){var h=this,g=parseInt(i),j=f.getSWebTwain().CutToClipboard(g),k=(j==1);return k};e.SetDPI=function(k,h,j,g,i){return f.getSWebTwain().SetDPI(k,h,j,g,i)};e.SetViewMode=function(h,g){return f.getSWebTwain().SetViewMode(h,g)};e.GetViewModeH=function(){return f.getSWebTwain().GetViewModeH()};e.GetViewModeV=function(){return f.getSWebTwain().GetViewModeV()};e.MoveImage=function(h,g){return f.getSWebTwain().MoveImage(h,g)};e.SwitchImage=function(h,g){return f.getSWebTwain().SwitchImage(h,g)};e.Print=function(){return f.getSWebTwain().Print()};e.checkErrorString=function(){var h=f.ErrorCode;if(h===-2115){return a}if(h===-2003){var g=window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");g.document.writeln(f.HTTPPostResponseString)}return(h===0)};e.FileExists=function(g){var h=d.replaceLocalFilename(g);return f.getSWebTwain().FileExists(h)};e.SaveAllAsMultiPageTIFF=function(g,k,i){var j=d.replaceLocalFilename(g),h;h=f.getSWebTwain().SaveAllAsMultiPageTIFF(j);return d.wrapperRet(f,h,k,i)};e.SaveAllAsPDF=function(g,j,h){var i=d.replaceLocalFilename(g);_ret=f.getSWebTwain().SaveAllAsPDF(i);return d.wrapperRet(f,_ret,j,h)};e.SaveAsBMP=function(g,h){var i=d.replaceLocalFilename(g);return f.getSWebTwain().SaveAsBMP(i,h)};e.SaveAsJPEG=function(g,h){var i=d.replaceLocalFilename(g);return f.getSWebTwain().SaveAsJPEG(i,h)};e.SaveAsPDF=function(g,h){var i=d.replaceLocalFilename(g);return f.getSWebTwain().SaveAsPDF(i,h)};e.SaveAsPNG=function(g,h){var i=d.replaceLocalFilename(g);return f.getSWebTwain().SaveAsPNG(i,h)};e.SaveAsTIFF=function(g,h){var i=d.replaceLocalFilename(g);return f.getSWebTwain().SaveAsTIFF(i,h)};e.SaveSelectedImagesAsMultiPagePDF=function(g,k,i){var j=d.replaceLocalFilename(g),h;h=f.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(j);return d.wrapperRet(f,h,k,i)};e.SaveSelectedImagesAsMultiPageTIFF=function(g,k,i){var j=d.replaceLocalFilename(g),h;h=f.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(j);return d.wrapperRet(f,h,k,i)};e.SaveSelectedImagesToBase64Binary=function(){return f.getSWebTwain().SaveSelectedImagesToBase64Binary()};e.ShowFileDialog=function(h,g,n,j,l,m,i,k){return f.getSWebTwain().ShowFileDialog(h,g,n,j,l,m,i,k)};e.FTPDownload=function(k,j,i,h){var g=f.getSWebTwain().FTPDownload(k,j);return d.wrapperRet(f,g,i,h)};e.FTPDownloadDirectly=function(l,k,g,j,i){var h=f.getSWebTwain().FTPDownloadDirectly(l,k,g);return d.wrapperRet(f,h,j,i)};e.FTPDownloadEx=function(l,k,i,j,h){var g=f.getSWebTwain().FTPDownloadEx(l,k,i);return d.wrapperRet(f,g,j,h)};e.FTPUpload=function(l,i,k,j,h){var g=f.getSWebTwain().FTPUpload(l,i,k);return d.wrapperRet(f,g,j,h)};e.FTPUploadDirectly=function(l,g,k,j,i){var h=f.getSWebTwain().FTPUploadDirectly(l,g,k);return d.wrapperRet(f,h,j,i)};e.FTPUploadEx=function(m,i,l,j,k,h){var g=f.getSWebTwain().FTPUploadEx(m,i,l,j);return d.wrapperRet(f,g,k,h)};e.FTPUploadAllAsMultiPageTIFF=function(k,j,i,h){var g=f.getSWebTwain().FTPUploadAllAsMultiPageTIFF(k,j);return d.wrapperRet(f,g,i,h)};e.FTPUploadAllAsPDF=function(k,j,i,h){var g=f.getSWebTwain().FTPUploadAllAsPDF(k,j);return d.wrapperRet(f,g,i,h)};e.FTPUploadAsMultiPagePDF=function(k,j,i,h){var g=f.getSWebTwain().FTPUploadAsMultiPagePDF(k,j);return d.wrapperRet(f,g,i,h)};e.FTPUploadAsMultiPageTIFF=function(k,j,i,h){var g=f.getSWebTwain().FTPUploadAsMultiPageTIFF(k,j);return d.wrapperRet(f,g,i,h)};e.HTTPDownload=function(j,i,l,h){var g,k=d.getImageType(i);return this.HTTPDownloadEx(j,i,k,l,h)};e.HTTPDownloadDirectly=function(k,j,g,l,i){var h;h=f.getSWebTwain().HTTPDownloadDirectly(k,j,g);return d.wrapperRet(f,h,l,i)};e.HTTPDownloadEx=function(j,i,k,l,h){var g;g=f.getSWebTwain().HTTPDownloadEx(j,i,k);return d.wrapperRet(f,g,l,h)};e.HTTPUploadThroughPostDirectly=function(k,h,g,m,l,j){var i;i=f.getSWebTwain().HTTPUploadThroughPostDirectly(k,h,g,m);return d.wrapperRet(f,i,l,j,true)};e.HTTPUploadThroughPost=function(k,j,g,m,l,i){var h;h=f.getSWebTwain().HTTPUploadThroughPost(k,j,g,m);return d.wrapperRet(f,h,l,i,true)};e.HTTPUploadThroughPostEx=function(k,j,g,n,l,m,i){var h;h=f.getSWebTwain().HTTPUploadThroughPostEx(k,j,g,n,l);return d.wrapperRet(f,h,m,i,true)};e.ClearAllHTTPFormField=function(){return f.getSWebTwain().ClearAllHTTPFormField()};e.SetHTTPFormField=function(h,g){return f.getSWebTwain().SetHTTPFormField(h,g)};e.HTTPUploadAllThroughPostAsMultiPageTIFF=function(j,g,l,k,i){var h;h=f.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(j,g,l);return d.wrapperRet(f,h,k,i,true)};e.HTTPUploadThroughPostAsMultiPageTIFF=function(j,g,l,k,i){var h;h=f.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(j,g,l);return d.wrapperRet(f,h,k,i,true)};e.HTTPUploadAllThroughPostAsPDF=function(j,g,l,k,i){var h;h=f.getSWebTwain().HTTPUploadAllThroughPostAsPDF(j,g,l);return d.wrapperRet(f,h,k,i,true)};e.HTTPUploadThroughPostAsMultiPagePDF=function(j,g,l,k,i){var h;h=f.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(j,g,l);return d.wrapperRet(f,h,k,i,true)};e.HTTPUploadThroughPutDirectly=function(k,h,g,l,j){var i;i=f.getSWebTwain().HTTPUploadThroughPutDirectly(k,h,g);return d.wrapperRet(f,i,l,j)};e.HTTPUploadThroughPut=function(j,i,g,l,h){var k=d.getImageType(g);return this.HTTPUploadThroughPutEx(j,i,g,k,l,h)};e.HTTPUploadThroughPutEx=function(k,j,g,l,m,i){var h;h=f.getSWebTwain().HTTPUploadThroughPutEx(k,j,g,l);return d.wrapperRet(f,h,m,i)};e.HTTPUploadAllThroughPutAsMultiPageTIFF=function(j,g,l,i){var h=-1,k=2;return this.HTTPUploadThroughPutEx(j,h,g,k,l,i)};e.HTTPUploadThroughPutAsMultiPageTIFF=function(j,g,l,i){var h=-2,k=2;return this.HTTPUploadThroughPutEx(j,h,g,k,l,i)};e.HTTPUploadAllThroughPutAsPDF=function(j,g,l,i){var h=-1,k=4;return this.HTTPUploadThroughPutEx(j,h,g,k,l,i)};e.HTTPUploadThroughPutAsMultiPagePDF=function(j,g,l,i){var h=-2,k=4;return this.HTTPUploadThroughPutEx(j,h,g,k,l,i)};e.ShowImageEditor=function(){return f.getSWebTwain().ShowImageEditor()};e.SetCookie=function(g){f.getSWebTwain().SetCookie(g);return a};e.LoadImageFromBase64Binary=function(g,h){return f.getSWebTwain().LoadImageFromBase64Binary(g,h)};e.SaveSelectedImagesToBytes=function(h,g){return f.getSWebTwain().SaveSelectedImagesToBytes(h,g)};e.LoadImageFromBytes=function(i,g,h){return f.getSWebTwain().LoadImageFromBytes(i,g,h)};e.UnregisterEvent=function(g,h){return f.getSWebTwain().UnregisterEvent(g,h)};e.SetImageWidth=function(g,h){return f.getSWebTwain().SetImageWidth(g,h)};e.HttpDownloadThroughPost=function(j,i,k,l,h){var g;g=f.getSWebTwain().HttpDownloadThroughPost(j,i,k);return d.wrapperRet(f,g,l,h)};e.SetCustomDSDataEx=function(g){return f.getSWebTwain().SetCustomDSDataEx(g)};e.SetCustomDSData=function(g){return f.getSWebTwain().SetCustomDSData(g)};e.GetCustomDSDataEx=function(){return f.getSWebTwain().GetCustomDSDataEx()};e.GetCustomDSData=function(g){return f.getSWebTwain().GetCustomDSData(g)};e.ChangeBitDepth=function(h,g,i){return f.getSWebTwain().ChangeBitDepth(h,g,i)};e.ConvertToGrayScale=function(g){return f.getSWebTwain().ConvertToGrayScale(g)};e.ShowImageEditorEx=function(h,k,g,j,i){return f.getSWebTwain().ShowImageEditorEx(h,k,g,j,i)};e.ClearTiffCustomTag=function(){return f.getSWebTwain().ClearTiffCustomTag()};e.SetTiffCustomTag=function(h,g,i){return f.getSWebTwain().SetTiffCustomTag(h,g,i)};e.IsBlankImageExpress=function(g){return f.getSWebTwain().IsBlankImageExpress(g)};e._ChangeWidth=function(h){var g=document.getElementById(e._strDWTInnerContainerID),j;if(b.isString(h)){if(h.length>0){if(h.charAt(h.length-1)==="%"){j=h}}}if(!j){var i=parseInt(h);if(i&&i>2){j=(i-2)+"px"}}if(j){f._strWidth=j;f.getSWebTwain().style.width=j;g.style.width=j}return a};e._ChangeHeight=function(h){var g=document.getElementById(e._strDWTInnerContainerID),j;if(b.isString(h)){if(h.length>0){if(h.charAt(h.length-1)==="%"){j=h}}}if(!j){var i=parseInt(h);if(i){j=i+"px"}}if(j){f._strHeight=j;f.getSWebTwain().style.height=j;g.style.height=j}return a};e.SetSize=function(g,i){var j=this;j._ChangeWidth(g);j._ChangeHeight(i);return a};e.SetSelectedImageArea=function(i,k,j,h,g){return f.getSWebTwain().SetSelectedImageArea(i,k,j,h,g)};e.LoadDibFromClipboard=function(j,i){var h=this,g;g=f.getSWebTwain().LoadDibFromClipboard();return d.wrapperRet(f,g,j,i)};e.LoadImage=function(g,l,j){var i=this,k=d.replaceLocalFilename(g),h;h=f.getSWebTwain().LoadImage(k);return d.wrapperRet(f,h,l,j)};e.LoadImageEx=function(g,l,m,j){var i=this,k=d.replaceLocalFilename(g),h;h=f.getSWebTwain().LoadImageEx(k,l);return d.wrapperRet(f,h,m,j)};e.EnableSource=function(i){var h=this,g;g=this.AcquireImage(i);return g};e.AcquireImage=function(j){var i=this,k=f.getSWebTwain(),g,h;if(j!==undefined&&j!==null){if(typeof(j.SelectSourceByIndex)!="undefined"){k.SelectSourceByIndex(j.SelectSourceByIndex);k.CloseSource();k.OpenSource()}if(typeof(j.IfShowUI)!="undefined"){k.IfShowUI=j.IfShowUI}if(typeof(j.PixelType)!="undefined"){k.PixelType=j.PixelType}if(typeof(j.Resolution)!="undefined"){k.Resolution=j.Resolution}if(typeof(j.IfFeederEnabled)!="undefined"){k.IfFeederEnabled=j.IfFeederEnabled}if(typeof(j.IfDuplexEnabled)!="undefined"){k.IfDuplexEnabled=j.IfDuplexEnabled}if(typeof(j.IfDisableSourceAfterAcquire)!="undefined"){k.IfDisableSourceAfterAcquire=j.IfDisableSourceAfterAcquire}}h=k.AcquireImage();return d.wrapperRet(f,h)};e._innerFun=function(g,i,j){var h=this,l=f.getSWebTwain(),k=l[g];if(typeof(k)==="function"){return k.apply(l,i)}else{return k}};e.ActiveUI=function(h,g){};e.first=function(){var h=this,g=f.HowManyImagesInBuffer,i;if(g>0){f.CurrentImageIndexInBuffer=0;f.__innerRefreshImage()}return a};e.previous=function(){var h=this,g=f.HowManyImagesInBuffer,i;if(g>0){i=f.CurrentImageIndexInBuffer;if(i>0){f.CurrentImageIndexInBuffer=i-1;f.__innerRefreshImage()}}return a};e.next=function(){var h=this,g=f.HowManyImagesInBuffer,i;if(g>0){i=f.CurrentImageIndexInBuffer;if(i>=0&&i<g-1){f.CurrentImageIndexInBuffer=i+1;f.__innerRefreshImage()}}return a};e.last=function(){var h=this,g=f.HowManyImagesInBuffer,i;if(g>0){f.CurrentImageIndexInBuffer=g-1;f.__innerRefreshImage()}return a};e.__innerRefreshImage=function(){var h=this,g=f.HowManyImagesInBuffer,i;if(g>0){i=f.CurrentImageIndexInBuffer;if(f.__OnRefreshUI){f.__OnRefreshUI(i,g)}}};e._attachEvents=function(){var g=this;if(f.__OnPostTransfer!=""){f.getSWebTwain().RegisterEvent("OnPostTransfer",f.__OnPostTransfer)}if(f.__OnPostAllTransfers!=""){f.getSWebTwain().RegisterEvent("OnPostAllTransfers",f.__OnPostAllTransfers)}if(f.__OnMouseClick!=""){f.getSWebTwain().RegisterEvent("OnMouseClick",f.__OnMouseClick)}if(f.__OnPostLoad!=""){f.getSWebTwain().RegisterEvent("OnPostLoad",f.__OnPostLoad)}if(f.__OnImageAreaSelected!=""){f.getSWebTwain().RegisterEvent("OnImageAreaSelected",f.__OnImageAreaSelected)}if(f.__OnMouseDoubleClick!=""){f.getSWebTwain().RegisterEvent("OnMouseDoubleClick",f.__OnMouseDoubleClick)}if(f.__OnMouseRightClick!=""){f.getSWebTwain().RegisterEvent("OnMouseRightClick",f.__OnMouseRightClick)}if(f.__OnTopImageInTheViewChanged!=""){f.getSWebTwain().RegisterEvent("OnTopImageInTheViewChanged",f.__OnTopImageInTheViewChanged)}if(f.__OnImageAreaDeSelected!=""){f.getSWebTwain().RegisterEvent("OnImageAreaDeSelected",f.__OnImageAreaDeSelected)}if(f.__OnGetFilePath!=""){f.getSWebTwain().RegisterEvent("OnGetFilePath",f.__OnGetFilePath)}if(f.__OnAfterOperate!=""){f.getSWebTwain().RegisterEvent("OnAfterOperate",f.__OnAfterOperate)}if(f.__OnBeforeOperate!=""){f.getSWebTwain().RegisterEvent("OnBeforeOperate",f.__OnBeforeOperate)}if(f.__OnOperateStatus!=""){f.getSWebTwain().RegisterEvent("OnOperateStatus",f.__OnOperateStatus)}if(f.__OnBitmapChanged!=""){f.getSWebTwain().RegisterEvent("OnBitmapChanged",f.__OnBitmapChanged)}if(f.__OnMouseMove!=""){f.getSWebTwain().RegisterEvent("OnMouseMove",f.__OnMouseMove)}if(f.__OnPreAllTransfers!=""){f.getSWebTwain().RegisterEvent("OnPreAllTransfers",f.__OnPreAllTransfers)}if(f.__OnPreTransfer!=""){f.getSWebTwain().RegisterEvent("OnPreTransfer",f.__OnPreTransfer)}if(f.__OnSourceUIClose!=""){f.getSWebTwain().RegisterEvent("OnSourceUIClose",f.__OnSourceUIClose)}if(f.__OnTransferCancelled!=""){f.getSWebTwain().RegisterEvent("OnTransferCancelled",f.__OnTransferCancelled)}if(f.__OnTransferError!=""){f.getSWebTwain().RegisterEvent("OnTransferError",f.__OnTransferError)}if(f.__OnInternetTransferPercentage!=""){f.getSWebTwain().RegisterEvent("OnInternetTransferPercentage",f.__OnInternetTransferPercentage)}if(f.__OnInternetTransferPercentageEx!=""){f.getSWebTwain().RegisterEvent("OnInternetTransferPercentageEx",f.__OnInternetTransferPercentageEx)}}}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* Version: 10.2.0.324
*
* Module: plugin ( ie & noneie )
* final js: build\src.plugin.js
*/
(function(b){if(!b.product.bActiveXEdition){return}function a(c){var d=this,e=c||{};d._strDWTControlContainerID=e.containerID||"dwtcontrolContainer";d._strWidth=e.width||270;d._strHeight=e.height||350;if(b.isString(d._strWidth)&&d._strWidth.indexOf("%")>0){}else{d._strWidth=[parseInt(d._strWidth),"px"].join("")}if(b.isString(d._strHeight)&&d._strHeight.indexOf("%")>0){}else{d._strHeight=[parseInt(d._strHeight),"px"].join("")}d._strObjectName=d._strDWTControlContainerID+"_Obj";d.__config=e;d.__OnPluginReady=e.onPluginReady;d.__OnPluginNotReady=e.onPluginNotReady;d.Addon={};d._strDWTInnerContainerID=d._strDWTControlContainerID+"_CID";var f=document.createElement("div");document.body.appendChild(f);d._fakeControl=f;d._createControl()}a.prototype._createControl=function(){var d;var g=this,f=g._strWidth,c=g._strHeight,e;if(b.isString(f)&&f.indexOf("%")>0){f="100%"}if(b.isString(c)&&c.indexOf("%")>0){c="100%"}e=['<div id="',g._strDWTInnerContainerID,'" style="width:',f,";height:",c,'">','<object id="',g._strObjectName,'" style="width:',g._strWidth,";height:",g._strHeight,';border:1px solid #AAAAAA"',' codebase="',(b.env.bWin64)?b.product.getActiveXCABx64Path():b.product.getActiveXCABx86Path(),"#version=",Dynamsoft.WebTwainEnv.ActiveXVersion,'"',' classid="clsid:',Dynamsoft.WebTwainEnv.Trial?b.product.strTrialClassID:b.product.strFullClassID,'" viewastext>','<param name="Manufacturer" value="DynamSoft Corporation" />','<param name="ProductFamily" value="',b.product.name,'" />','<param name="ProductName" value="',b.product.name,'" />','<param name="wmode" value="transparent"/>',"</object>","</div>"];d=document.getElementById(g._strDWTControlContainerID);if(d){d.innerHTML=e.join("")}g._fakeControl._objWebTwain=null;g._fakeControl.getSWebTwain=function(){var h=this;if(h._objWebTwain===null){h._objWebTwain=document.getElementById(g._strObjectName)}return h._objWebTwain}};a.prototype.getInstance=function(){var d=this,c=d._fakeControl.getSWebTwain();if(c){return d._fakeControl}return false};b.detect._controlDetect=function(){var e=b.detect.arySTwains,d=e[0],c=d&&d._fakeControl&&d._fakeControl.getSWebTwain();if(c){if(c.ErrorCode==0){clearInterval(b.detect._varSeed);for(var f=0;f<e.length;f++){var h=e[f],g=h._fakeControl.getSWebTwain();b.__innerInitEvents(h._fakeControl,h.__config);h._fakeControl.__OnRefreshUI=h.__config.onRefreshUI||"";b.attachProperty(h._fakeControl);b.attachMethod(h._fakeControl);h._fakeControl._attachEvents();b.attachAddon(h._fakeControl);g.ProductKey=Dynamsoft.WebTwainEnv.ProductKey;g.BrokerProcessType=b.product._iBrokerProcessType;if(!b.env.bWin){h._objectWebTwain.ImageCaptureDriverType=b.product._iImageCaptureDriverType}if(b.isFunction(h.__OnPluginReady)){h.__OnPluginReady()}}}else{if(b.isFunction(c.__OnPluginNotReady)){c.__OnPluginNotReady()}}}else{clearInterval(b.detect._varSeed)}};b.ie={};b.ie.DynamicWebTwain=function(c){var d=new a(c);b.detect.arySTwains.push(d);return d};b.ie.closeAll=function(){var c=b.detect.arySTwains,d,f,e;for(d=0;d<c.length;d++){f=c[d];if(f&&f._fakeControl){e=f._fakeControl.getSWebTwain();if(e){e.RemoveAllImages()}}}b.detect.arySTwains=[]}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: plugin ( ie & noneie )
* final js: build\src.plugin.js
*/
(function(b){if(!b.product.bPluginEdition){return}var c={noControl:function(d){if(b.isFunction(b.detect.onNoControl)){b.detect.onNoControl(d._strDWTControlContainerID,d._strWidth,d._strHeight)}else{var e=b.detect.arySTwains;for(var f=0;f<e.length;f++){var g=e[f];if(!g._vPluginExist){g._createNonInstallDivPlugin();b.show(g._strDWTNonInstallInnerContainerID);b.hide(g._strDWTInnerContainerID)}}}}};function a(d){var e=this,f=d||{};e._strDWTControlContainerID=f.containerID||"dwtcontrolContainer";e._strWidth=f.width||270;e._strHeight=f.height||350;if(b.isString(e._strWidth)&&e._strWidth.indexOf("%")>0){}else{e._strWidth=[parseInt(e._strWidth),"px"].join("")}if(b.isString(e._strHeight)&&e._strHeight.indexOf("%")>0){}else{e._strHeight=[parseInt(e._strHeight),"px"].join("")}e._strObjectName=e._strDWTControlContainerID+"_Obj";b.__innerInitEvents(e,f);e.__OnPluginReady=f.onPluginReady;e.__OnPluginNotReady=f.onPluginNotReady;e.__OnRefreshUI=f.onRefreshUI||"";e._objectWebTwain=null;e._strDWTInnerContainerID=e._strDWTControlContainerID+"_CID";e._strDWTNonInstallInnerContainerID=e._strDWTControlContainerID+"_NonInstallCID";e._vNotAllowedForChrome=false;e._vPluginExist=false;e.Addon={}}a.prototype.getSWebTwain=function(){var d=this;return d._objectWebTwain};a.prototype.getInstance=function(){var d=this;if(d._objectWebTwain){return d}return false};a.prototype._createControl=function(){var i=this,f,h=i._strWidth,e=i._strHeight,g;if(b.isString(h)&&h.indexOf("%")>0){h="100%"}if(b.isString(e)&&e.indexOf("%")>0){e="100%"}g=['<div id="',i._strDWTInnerContainerID,'" style="width:',h,";height:",e,'">'];if(b.env.bIE){g.push('<object id="',i._strObjectName,'" style="width:',i._strWidth,";height:",i._strHeight,';border:1px solid #AAAAAA"',' codebase="',(b.env.bWin64)?b.product.getActiveXCABx64Path():b.product.getActiveXCABx86Path(),"#version=",Dynamsoft.WebTwainEnv.ActiveXVersion,'"',' classid="clsid:',Dynamsoft.WebTwainEnv.Trial?b.product.strTrialClassID:b.product.strFullClassID,'" viewastext>','<param name="Manufacturer" value="DynamSoft Corporation" />','<param name="ProductFamily" value="',b.product.name,'" />','<param name="ProductName" value="',b.product.name,'" />','<param name="wmode" value="transparent"/>',"</object>")}else{var d=i._strWidth;if(b.isString(d)&&d.indexOf("%")==-1){d=(parseInt(d)-2)+"px"}g.push('<embed id="',i._strObjectName,'" style="display: inline; width:',d,";height:",i._strHeight,'" type="',b.product.strMIMEType,'"',' pluginspage="',(b.env.bWin)?b.product.getMSIPath():b.product.getPKGPath(),'"></embed>')}g.push('</div><div id="',i._strDWTNonInstallInnerContainerID,'" style="width: ',h,'"></div>');f=document.getElementById(i._strDWTControlContainerID);if(f){f.innerHTML=g.join("")}i._objectWebTwain=document.getElementById(i._strObjectName)};a.prototype._notAllowedForChrome=function(){if(!b.env.bIE){ua=(navigator.userAgent.toLowerCase());if(ua.match(/chrome\/([\d.]+)/)){if(this.__OnNotAllowedForChrome){this.__OnNotAllowedForChrome(_this._strDWTInnerContainerID)}else{this._createNonAllowedDivPlugin();document.getElementById(this._strDWTNonInstallInnerContainerID).style.display="inline";document.getElementById(this._strDWTInnerContainerID).style.display="none"}}}};a.prototype._createNonAllowedDivPlugin=function(){var g=this;o=document.getElementById(g._strDWTNonInstallInnerContainerID);if(o.innerHTML!=""){return}var e=g._strHeight;if(b.isString(e)&&e.indexOf("%")==-1){e=(parseInt(e)-10)+"px"}var f=['<div style="display: block; border:1px solid black; width:',g._strWidth,";height:",e,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="',Dynamsoft.WebTwainEnv.ResourcesPath+'/reference/imgs/plug-in-blocked.png"/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join("");o.innerHTML=f;for(var d=0;d<document.links.length;d++){if(document.links[d].className=="DWT_CloseNonAllowedDiv"){document.links[d].onclick=function(){document.getElementById(g._strDWTNonInstallInnerContainerID).style.display="none";document.getElementById(g._strDWTInnerContainerID).style.display="inline"}}}};a.prototype._createNonInstallDivPlugin=function(){var h=this,g=document.getElementById(h._strDWTNonInstallInnerContainerID);if(g.innerHTML!=""){return}var e="";if(b.env.bIE){var f=["<div style='display: block; border:solid black 1px; text-align:center; width:",h._strWidth,";height:",h._strHeight,"'>","<ul style='padding-top:100px;'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join("")}else{var d=("https:"==location.protocol?"https://":"http://");if(b.product.bChromeEdition){e=b.product.getChromeEditionPath()}else{e=(b.env.bWin)?b.product.getMSIPath():b.product.getPKGPath()}var f=["<div style='display: block; border:solid black 1px; text-align:center; width:",h._strWidth,";height:",h._strHeight,"'>","<ul style='padding-top:100px;'>","<li>The Component is not installed</li>","<li>You need to download and install the plug-in to use this sample.</li>","<li>Please click the below link to download it.</li>","<li>After the installation, please RESTART your browser.</li>","<li><a href='",e,"'>Download</a></li>","</ul></div>"].join("")}g.innerHTML=f};b.detect._controlDetect=function(){var h=b.detect.arySTwains,f=h[0],e=f&&f._objectWebTwain;if(e){if(e.ErrorCode==0){clearInterval(b.detect._varSeed);for(var k=0;k<h.length;k++){var l=h[k];b.attachProperty(l);b.attachMethod(l);l._attachEvents();b.attachAddon(l);l._objectWebTwain.ProductKey=Dynamsoft.WebTwainEnv.ProductKey;l._objectWebTwain.BrokerProcessType=b.product._iBrokerProcessType;if(!b.env.bWin){l._objectWebTwain.ImageCaptureDriverType=b.product._iImageCaptureDriverType}if(b.isFunction(l.__OnPluginReady)){l.__OnPluginReady()}}}else{var d=true;if(!b.env.bIE){navigator.plugins.refresh(false);if(b.env.iPluginLength!=navigator.plugins.length){for(var k=0;k<navigator.mimeTypes.length;k++){if(navigator.mimeTypes[k].type.toLowerCase().indexOf(b.product.strMIMEType.toLowerCase())>-1){location.reload()}}}for(var k=0;k<navigator.mimeTypes.length;k++){if(navigator.mimeTypes[k].type.toLowerCase().indexOf(b.product.strMIMEType.toLowerCase())>-1){for(var g=0;g<h.length;g++){var l=h[g];d=false;l._vPluginExist=true;if(l._vNotAllowedForChrome==false){l._notAllowedForChrome();l._vNotAllowedForChrome=true}}}}if(d&&!b.detect.bNoControlEvent){c.noControl(f);b.detect.bNoControlEvent=true}}if(b.isFunction(f.__OnPluginNotReady)){f.__OnPluginNotReady()}}}else{clearInterval(b.detect._varSeed)}};b.plugin={};b.plugin.DynamicWebTwain=function(d){var e=new a(d);e._createControl();b.detect.arySTwains.push(e);return e};b.plugin.closeAll=function(){var d=b.detect.arySTwains,e,g,f;for(e=0;e<d.length;e++){g=d[e];if(g&&g._objectWebTwain){f=g._objectWebTwain;if(f){f.RemoveAllImages()}}}b.detect.arySTwains=[]}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* Version: 10.2.0.324
*
* Module: htm5
* final js: build\src.html5.js
*/
(function(){if(!Dynamsoft.Lib.product.bChromeEdition){return}Dynamsoft.Lib.LS=(function(){var a=(window.localStorage)?true:false,b={isSupportLS:function(){return a},item:function(c,d){var e=null;if(this.isSupportLS()){if(d){localStorage.setItem(c,d);e=d}else{e=localStorage.getItem(c)}if(e===null){return false}return e}else{return false}},removeItem:function(c){if(this.isSupportLS()){localStorage.removeItem(c)}else{return false}return true}};return b})()})();
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: htm5
* final js: build\src.html5.js
*/
(function(a){a.html5=a.html5||{};if(!Dynamsoft.Lib.product.bChromeEdition){return}var b=1,c;c=Dynamsoft.Lib.html5.Funs={notSupportProperty:function(d){},notSupportMethod:function(d){},getRandom:function(){var e=new Date().getTime()%10000,d=[],g;for(var f=0;f<5;f++){g=Math.floor(Math.random()*10);if(f==0&&g==0){f=-1;continue}d.push(g)}if(e<10){d.push("000")}else{if(e<100){d.push("00")}else{if(e<1000){d.push("0")}}}d.push(e);return d.join("")},generateCmdId:function(){b++;return b},sendData:function(f,r,l,p){var q,k,g,h,d,o,j,m;if(!p){try{f.send(r)}catch(n){Dynamsoft.Lib.log(n)}return false}h=new ArrayBuffer(12);k=l&&l.size?l.size:0;m=new Blob([r]);q=m.size;g=q+k;d=new DataView(h);for(j=0;j<8;j++){if(g){d.setUint8(j,g%256);g=parseInt(g/256)}else{break}}for(j=0;j<4;j++){if(q){d.setUint8(8+j,q%256);q=parseInt(q/256)}else{break}}o=new Blob([h,m]);f.send(o);if(k>0){f.send(l)}return true},init:function(h,o){var e,f,m,d,k,j,l,n='<dialog id="dialogProgress" class="ds-dwt-dialogProgress" style="top:30%"><h3 id="finalMessage"></h3><p id="status">0%</p><progress id="progressBar" value="" max="100"></progress><br><button id="btnCancel" value="cancel" autofcus >cancel</button></dialog>',g='<div class="ds-dwt-container-box"></div>';f=KISSY.one("#"+o);f.html("");f.attr("class",h.containerClass);f.append(g);l=f.parent();l[0].style["-moz-user-select"]="none";l[0].onselectstart=function(){return false};j=f.one(".ds-dwt-container-box");if(j){j.style("width",h._width);j.style("height",h._height);j.style("position","relative")}if(!Dynamsoft.Lib.dlgProgress){f.append(n);k=f.one("#dialogProgress");if(k&&k[0]){Dynamsoft.Lib.dlgProgress=k[0];Dynamsoft.Lib.Dialog.registerDialog(Dynamsoft.Lib.dlgProgress)}Dynamsoft.Lib.dlgRef=0;Dynamsoft.Lib.dialogShowStatus=false;Dynamsoft.Lib.cancelFrome=0;var i=f.one("#btnCancel");i[0].onclick=function(){var p=Dynamsoft.Lib.cancelFrome;Dynamsoft.Lib.closeProgress(0);if(Dynamsoft.Lib.bio){Dynamsoft.Lib.bio.abort();Dynamsoft.Lib.bio=false}else{if(p==3||p==4){h.SetCancel()}}}}c.initImageUI(h,j)},initImageUI:function(h,j){var e,d,f=h._width,i=h._height,g=false;e=KISSY.one("#"+h._strDWTControlContainerID);if(Dynamsoft.Lib.isString(f)&&f.indexOf("%")>=0){f=KISSY.DOM.width(e)*parseInt(f)/100;g=true}else{f=parseInt(f)}if(Dynamsoft.Lib.isString(i)&&i.indexOf("%")>=0){i=KISSY.DOM.height(e)*parseInt(i)/100;g=true}else{i=parseInt(i)}d={Container:j,Width:f,Height:i};c.bindUIViewEvents(h,d);h._UIManager=new Dynamsoft.Lib.UI.ImageUIManager(h,d);if(g){c.changeImageUISize(h,h._width,h._height)}},changeImageUISize:function(h,g,i){var e,f,l=-1,n=-1,d=g,m=i,k=false;e=KISSY.one("#"+h._strDWTControlContainerID);if(Dynamsoft.Lib.isString(g)&&g.indexOf("%")>=0){_w=KISSY.DOM.width(e)*parseInt(g)/100;k=true}else{_w=parseInt(g);d=[_w,"px"].join("")}if(Dynamsoft.Lib.isString(i)&&i.indexOf("%")>=0){_h=KISSY.DOM.height(e)*parseInt(i)/100;k=true}else{_h=parseInt(i);m=[_h,"px"].join("")}if(e){f=e.one(".ds-dwt-container-box");if(f){f.style("width",d);f.style("height",m)}}if(k){if(!h.__funResize){h.__funResize=function(){var o=c.__innerGetUIViewRealSize(h._strDWTControlContainerID,h._width,h._height);return h._UIManager.ChangeSize(o.width,o.height)}}Dynamsoft.Lib.removeEventListener(window,"resize",h.__funResize);Dynamsoft.Lib.addEventListener(window,"resize",h.__funResize)}else{if(h.__funResize){Dynamsoft.Lib.removeEventListener(window,"resize",h.__funResize);h.__funResize=false}}var j=c.__innerGetUIViewRealSize(h._strDWTControlContainerID,_w,_h);return h._UIManager.ChangeSize(j.width,j.height)},__innerGetUIViewRealSize:function(f,d,h){var e,g=-1,i=-1;e=KISSY.one("#"+f);if(Dynamsoft.Lib.isString(d)&&d.indexOf("%")>=0){g=KISSY.DOM.width(e)*parseInt(d)/100}if(g<0&&d){g=parseInt(d)}if(Dynamsoft.Lib.isString(h)&&h.indexOf("%")>=0){i=KISSY.DOM.height(e)*parseInt(h)/100}if(i<0&&h){i=parseInt(h)}return{width:g,height:i}},bindUIViewEvents:function(f,d){var g=f,e;d.onSelected=function(h){var j=h.length,i;if(j>0){g.__SelectedImagesCount=j;i=h[j-1];g.__cIndex=i;e=c.__SetSelectedImages(g,g.__cIndex,h);if(e&&Dynamsoft.Lib.isFunction(g.__OnRefreshUI)){g.__OnRefreshUI(i)}}else{g.__SelectedImagesCount=0}};d.onRefreshUI=function(h){c.__innerRefreshFromUIView(g,h)};d.onResetCurrentIndex=function(h){if(h>=0){g._innerFun("CurrentImageIndexInBuffer",c.makeParams(h));g.__cIndex=h}};d.onMouseMove=function(j){var i=j.index;if(j){var h=j.x,k=j.y;g.__MouseX=h;g.__MouseY=k}if(Dynamsoft.Lib.isFunction(g.__OnMouseMove)){g.__OnMouseMove(i)}};d.onMouseClick=function(j){var i=j.index;if(j){var h=j.x,k=j.y;g.__MouseX=h;g.__MouseY=k}if(Dynamsoft.Lib.isFunction(g.__OnMouseClick)){g.__OnMouseClick(i)}};d.onMouseDoubleClick=function(i){var h=i.index;if(Dynamsoft.Lib.isFunction(g.__OnMouseDoubleClick)){g.__OnMouseDoubleClick(h)}};d.onMouseRightClick=function(j){var i=j.index;if(j){var h=j.x,k=j.y;g.__MouseX=h;g.__MouseY=k}if(Dynamsoft.Lib.isFunction(g.__OnMouseRightClick)){return g.__OnMouseRightClick(i)}return true};d.onImageAreaSelected=function(h){if(Dynamsoft.Lib.isFunction(g.__OnImageAreaSelected)){if(!h.fromScroll){g.__OnImageAreaSelected(h.index,h.left,h.top,h.right,h.bottom)}}};d.onImageAreaDeSelected=function(h){if(Dynamsoft.Lib.isFunction(g.__OnImageAreaDeSelected)){g.__OnImageAreaDeSelected(h)}}},__pushElement:function(e,d){if(Dynamsoft.Lib.isString(d)){e.push('"');e.push(d);e.push('"')}else{if(Dynamsoft.Lib.isArray(d)){var f=true;e.push("[");Dynamsoft.Lib.each(d,function(g){if(f){f=false}else{e.push(",")}c.__pushElement(e,g)});e.push("]")}else{if(d===undefined){e.push('""')}else{e.push(d)}}}},makeParams:function(){var e=arguments;if(e===undefined||e.length===0){return undefined}else{var d=[];if(e.length===1){var g=e[0];d.push("[");c.__pushElement(d,g);d.push("]")}else{if(e.length===2){var g=e[0],f=e[1];d.push("[");c.__pushElement(d,g);d.push(",");c.__pushElement(d,f);d.push("]")}else{c.__pushElement(d,Array.prototype.slice.call(e))}}return d.join("")}},getJson:function(g,e,h,d){var f=[];f.push("{");f.push('"id":"');f.push(g.clientId);f.push('"');if(d){f.push(',"cmdId":"');f.push(d);f.push('"')}f.push(',"method":"');f.push(e);f.push('"');if(h!==undefined&&h!==null){f.push(',"parameter":');f.push(h)}f.push("}");return f.join("")},refreshImageAfterInvokeFun:function(d,f,e){return(e==1)},loadHttpBlob:function(g,l,f,h,n,d,k){var e="loadHttpBlob",o,i,j=false;o=function(s,r,q){if(q.state==2&&q.status==0){if(q.statusText==="abort"){var m=true;Dynamsoft.Lib.Errors.HttpDownloadError(g,m)}else{Dynamsoft.Lib.Errors.HttpDownloadUrlError(g)}}else{Dynamsoft.Lib.Errors.HttpDownloadError(g)}if(Dynamsoft.Lib.isFunction(d)){d()}};i={type:l,url:f,async:h,success:n,error:o,complete:function(){Dynamsoft.Lib.bio=false}};if(g.HTTPUserName!=""){i.username=g.HTTPUserName;i.password=g.HTTPPassword}if(h){i.responseType="blob";if(Dynamsoft.Lib.isFunction(k)){i.beforeSend=function(m){var q=m.getNativeXhr();q.addEventListener("progress",function(r){k(r)},false)}}j=true}else{i.contentType="text/plain; charset=x-user-defined";i.mimeType="text/plain; charset=x-user-defined";i.success=function(u,t,s){var v,q,m;v=s.responseText;q=v.length;m=new Uint8Array(q);for(var r=0;r<q;r++){m[r]=v.charCodeAt(r)}g._errorCode=0;g._errorString="";n(m);j=true}}var p=new KISSY.IO(i);if(h){Dynamsoft.Lib.bio=p}return j},getServerImageUrlPrefix:function(g,h){var e=g.httpUrl,d=false,f=[e,"img?id=",g.clientId];return f.join("")},getServerSmallImageUrl:function(h,i,f){var e=h.httpUrl,d=false,g=[e,"img?id=",h.clientId];if(i!==undefined&&i!==null){g.push("&index=");g.push(i)}if(f){g.push("&act=");g.push(f)}else{g.push("&width=");g.push(d?"-1":h._width/2);g.push("&height=");g.push(d?"-1":h._height/2)}return g.join("")},combineUrl:function(g,e,f){var d=[];if(e===undefined||f===undefined){return false}if(e.indexOf("http://")==0||e.indexOf("https://")==0){}else{if(g.IfSSL){d.push("https://")}else{d.push("http://")}}d.push(e);if(e.indexOf(":")<0){if(g.HTTPPort==""){g.HTTPPort=Dynamsoft.Lib.detect.ssl?443:80}if((!Dynamsoft.Lib.detect.ssl&&g.HTTPPort!=80)||(Dynamsoft.Lib.detect.ssl&&g.HTTPPort!=443)){d.push(":");d.push(g.HTTPPort)}}if(f.indexOf("/")!==0){d.push("/")}d.push(f);return d.join("")},httpPostUpload:function(j,i,h,e,g,k){if(!h){Dynamsoft.Lib.Errors.UploadFileCannotEmpty(j);if(Dynamsoft.Lib.isFunction(k)){k()}return}var f=j.MaxUploadImageSize,d=h.size;if(d<=0||(d>f&&f!=-1)){Dynamsoft.Lib.Errors.UploadExceededMaxSize(j);if(Dynamsoft.Lib.isFunction(k)){k()}return}h.remoteFilename=j.__remoteFilename;Dynamsoft.Lib.bio=new KISSY.BIO({action:i,data:j.httpFormFields,async:e});j.__HTTPPostResponseString=false;Dynamsoft.Lib.bio.on(KISSY.BIO.event.SUCCESS,function(l){var m;Dynamsoft.Lib.bio=false;if(l&&l.result&&Dynamsoft.Lib.isString(l.result.response)){j.__HTTPPostResponseString=l.result.response}else{j.__HTTPPostResponseString=""}if(l&&l.result&&l.result.json){m=l.result.json}else{m=j.__HTTPPostResponseString}if(Dynamsoft.Lib.isFunction(g)){g(m)}});Dynamsoft.Lib.bio.on(KISSY.BIO.event.ERROR,function(n){var o,m=(n&&n.canceled),l;Dynamsoft.Lib.bio=false;if(n&&n.result&&Dynamsoft.Lib.isString(n.result.response)){j.__HTTPPostResponseString=n.result.response}else{j.__HTTPPostResponseString=""}if(n&&n.result&&n.result.json){o=n.result.json}else{o=j.__HTTPPostResponseString}if(n&&n.result&&n.result.status){l=n.result.status}Dynamsoft.Lib.Errors.UploadError(j,m,l);if(Dynamsoft.Lib.isFunction(k)){k(o)}});Dynamsoft.Lib.bio.on(KISSY.BIO.event.PROGRESS,function(l){var m=(l.total===0)?100:Math.round(l.loaded*100/l.total),n=[l.loaded," / ",l.total].join("");j._OnPercentDone([0,m,"","http"])});j._OnPercentDone([0,-1,"uploading...","http"]);Dynamsoft.Lib.bio.addBlob(h);Dynamsoft.Lib.bio.uploadFiles(KISSY.BIO.status.WAITING);return true},httpPutImage:function(j,h,g,d,i,k,f){var e={type:"PUT",url:h,hasContent:true,processData:false,async:d,data:g,success:i,error:k,complete:function(){Dynamsoft.Lib.bio=false},beforeSend:function(l){if(Dynamsoft.Lib.isFunction(f)){var m=l.getNativeXhr();m.upload.addEventListener("progress",function(n){f(n)},false)}}};if(j.HTTPUserName!=""){e.username=j.HTTPUserName;e.password=j.HTTPPassword}Dynamsoft.Lib.bio=new KISSY.IO(e);return true},dialog:false,dialogRef:0,showMask:function(e){var d=this;Dynamsoft.Lib.log("showMask:"+e+"--"+d.dialogRef);if(d.dialogRef==0){Dynamsoft.Lib.detect.showMask()}d.dialogRef++},hideMask:function(e){var d=this;Dynamsoft.Lib.log("hideMask:"+e+"--"+d.dialogRef);if(d.dialogRef>1){d.dialogRef--}else{if(d.dialogRef<=1){Dynamsoft.Lib.detect.hideMask();d.dialog=false;d.dialogRef=0}}},setBtnCancelVisibleForProgress:function(f,e){var d=this;if((Dynamsoft.Lib.cancelFrome==0&&f.__IfShowProgressBar==true)||(Dynamsoft.Lib.cancelFrome!=0&&f.__IfShowCancelDialogWhenImageTransfer==true)){var g=Dynamsoft.Lib.get("btnCancel");if(e==false){g.style.display="none"}else{g.style.display=""}}},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnBitmapChanged","OnGetFilePath","OnPercentDone"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleEvent:function(g,e){var i=this,f=e.result[0],d=g._objWS,h=false;Dynamsoft.Lib.each(c.EVENTS,function(m,l){if(e.event===m){var j=["_",m].join("");h=true;if(Dynamsoft.Lib.isFunction(g[j])){g[j](e.result)}return false}});if(h){Dynamsoft.Lib.log("handled event:"+e.event);Dynamsoft.Lib.each(c.SEND_BACK_EVENTS,function(l,j){if(c.isServerInvalid(g)){return false}if(e.event===l){Dynamsoft.Lib.log("sendback event:"+e.event);c.sendData(d,c.getJson(g,e.event,c.makeParams(f),0),false,true);return false}})}else{Dynamsoft.Lib.each(a.Addon_Events,function(m,l){if(e.event===m){var j=["_",m].join("");h=true;if(Dynamsoft.Lib.isFunction(g[j])){g[j](e.result)}return false}});if(h){Dynamsoft.Lib.log("handled addon event:"+e.event);Dynamsoft.Lib.each(a.Addon_Sendback_Events,function(l,j){if(c.isServerInvalid(g)){return false}if(e.event===l){Dynamsoft.Lib.log("sendback addon event:"+e.event);c.sendData(d,c.getJson(g,e.event,c.makeParams(f),0),false,true);return false}})}}return h},getImageType:function(e){if(e===undefined){return -1}var d=e.length;if(d<4){return -1}var f=e.lastIndexOf(".");if(f===-1){return -1}var g=e.slice(f).toLowerCase();if(g===".bmp"||g===".dib"){return 0}if(g===".jpg"||g===".jpe"||g===".jpeg"||g===".jfif"){return 1}if(g===".tif"||g===".tiff"){return 2}if(g===".png"){return 3}if(g===".pdf"){return 4}if(g===".gif"){return 5}return -1},autoDiscardBlankImage:function(g,d){if(Dynamsoft.Lib.config.bDiscardBlankImage){var e=g.__cIndex;if(g.IsBlankImage(e)){g.RemoveImage(e)}var f=["Blank Discard (",d,"): ",g.ErrorString].join("");if(Dynamsoft.Lib.isFunction(g.__OnPrintMsg)){g.__OnPrintMsg(f)}}},replaceLocalFilename:function(d){var e;if(d===undefined){return""}if(Dynamsoft.Lib.env.bWin){e=d.replace(/\\/g,"\\\\")}else{e=d}if(Dynamsoft.Lib.env.bFileSystem){e=decodeURI(e)}return e},__innerRefreshFromUIView:function(e,f,d){var g=e;if(f>=0){if(!d){g.CurrentImageIndexInBuffer=f}g._UIManager.refreshEditor(g._UIManager.GetCurrentImageIndex(),g._UIManager.count())}if(Dynamsoft.Lib.isFunction(g.__OnRefreshUI)){g.__OnRefreshUI(f)}},__SetSelectedImages:function(f,e,d){f.__SelectedImagesCount=d.length;if(e===undefined){e=""}return f._innerFun("SetSelectedImages",c.makeParams(e,d.join(",")))},GetImageInfo:function(d,e){var f=d;return d._innerFun("GetImageInfo",c.makeParams(e))},isServerInvalid:function(e){var f=e,d=!f.bReady||f._objWS===null;if(d){Dynamsoft.Lib.Errors.Server_Invalid(f)}return d||f._errorCode==-2208||f._errorCode==-2308},isHttpServerInvalid:function(e){var f=e,d=!f.bReady||f.httpUrl===null;if(d){Dynamsoft.Lib.Errors.Server_Invalid(f)}return d||f._errorCode==-2208},callbacks:[],pushCallback:function(d,g,e){var f={method:d,callback:g,ticks:e};c.callbacks(f)},refreshUIRef:0}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(a){if(!a.product.bChromeEdition){return}a.html5=a.html5||{};var b=function(c){var d=c;Object.defineProperty(d,"width",{get:function(){return this._parent._width},set:function(e){this.SetSize(e,false)}});Object.defineProperty(d,"height",{get:function(){return this._parent._height},set:function(e){this.SetSize(false,e)}})};a.html5.STwainStyle=function(d){var c=this;c._parent=d;b(c)};a.html5.STwainStyle.prototype.SetSize=function(c,d){this._parent._innerSetSize(c,d)}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(c,a,d){if(!Dynamsoft.Lib.product.bChromeEdition){return}Dynamsoft.Lib.html5.STwain=function(e){var f=this,g=e||{};f.clientId=d.getRandom();f._strDWTControlContainerID=g.containerID||("dwt-container-"+f.clientId);f._width=g.width;f._height=g.height;f.containerClass="ds-dwt-container noPadding";d.init(f,f._strDWTControlContainerID);f.objectName=f._strDWTControlContainerID+"_obj";f.bReady=false;f.httpFormFields={};f._objWS=null;f.__wsRetry=0;f.curCommand=[];f.curCommand_SaveImagesToBytes=[];Dynamsoft.Lib.__innerInitEvents(f,g);f.__OnMouseClick=g.onMouseClick||"";f.__OnMouseDoubleClick=g.onMouseDoubleClick||"";f.__OnMouseRightClick=g.onMouseRightClick||"";f.__OnMouseMove=g.onMouseMove||"";f.__OnImageAreaSelected=g.onImageAreaSelected||"";f.__OnImageAreaDeSelected=g.onImageAreaDeSelected||"";f.__OnInternetTransferPercentage=g.onInternetTransferPercentage||"";f.__OnInternetTransferPercentageEx=g.onInternetTransferPercentageEx||"";f.__OnWSReady=g.onWSReady||null;f.__OnWSReconnect=g.onWSReconnect||null;f.__OnWSClose=g.onWSClose||null;f.__OnWSMessage=g.onWSMessage||null;f.__OnWSError=g.onWSError||null;f.__OnPercentDone=g.onPercentDone||"";f.__OnRefreshUI=g.onRefreshUI||"";f.__OnPrintMsg=g.onPrintMsg||"";f.__OnResult=g.onResult||"";f.HTTPPassword=g.HTTPPassword||"";f.HTTPPort=g.HTTPPort||(Dynamsoft.Lib.detect.ssl?443:80);f.HTTPUserName=g.HTTPUserName||"";f.__HTTPPostResponseString="";f.__IfShowProgressBar=true;f.__IfShowCancelDialogWhenImageTransfer=true;f.__cIndex=-1;f._HowManyImagesInBuffer=0;f._errorCode=0;f._errorString="";f.__bLoadingImage=false;f.__backgroundColor=false;f.__MouseX=0;f.__MouseY=0;f.__style=new Dynamsoft.Lib.html5.STwainStyle(f);f.__addon={};f.__remoteFilename="RemoteFile";f.__sourceName=[];f.__defaultSourceName="";f.__sourceCount=0;f.__SelectedImagesCount=0;f.__serverId="";f.__fSelectionRectAspectRatio=0};var b=Dynamsoft.Lib.html5.STwain.prototype;b.getInstance=function(){return this};b._OnReady=function(i){var h=this,g=Dynamsoft.Lib.detect.urls[Dynamsoft.Lib.detect.cUrlIndex],f=Dynamsoft.Lib.getHttpUrl(g),e=h._objWS;if(e===null){return}Dynamsoft.Lib.detect.starting=false;Dynamsoft.Lib.detect.bOK=true;h.bReady=true;h.__wsRetry=0;e.onopen=null;h.httpUrl=f;e.onmessage=function(m){var k=m.data;if(typeof(k)==="object"){var u=h.curCommand_SaveImagesToBytes.shift()||{};if(u.sFun){u.sFun(k)}return}if(h.__OnWSMessage){h.__OnWSMessage(k)}var l=k.replace(/\0/g,"");if(l.indexOf("Exception:")>=0||l.indexOf("Error")==0){var t=k,p=false,u=h.curCommand.pop()||{};Dynamsoft.Lib.log(t+"@"+u.cmd);if(u.fFun){p=u.fFun(t)}if(!p&&Dynamsoft.Lib.isFunction(h.__OnPrintMsg)){h.__OnPrintMsg(t)}return}try{l=KISSY.JSON.parse(l)}catch(n){Dynamsoft.Lib.log(k)}if(l.event){d.handleEvent(h,l);return}var u;if(l.cmdId){var s=h.curCommand.length,o,j=-1;for(o=s-1;o>=0;o--){if(h.curCommand[o].cmdId==l.cmdId){j=o;u=h.curCommand.splice(j,1)[0];break}}if(j<0){s=h.curCommand_SaveImagesToBytes.length;for(o=s-1;o>=0;o--){if(h.curCommand_SaveImagesToBytes[o].cmdId==l.cmdId){j=o;u=h.curCommand_SaveImagesToBytes.splice(j,1)[0];break}}if(j<0){return}}}else{u=h.curCommand.pop()||{}}if(l.exception!==undefined&&l.description!==undefined){h._errorCode=l.exception;h._errorString=l.description}else{h._errorCode=0;h._errorString=""}if(l.method=="ReadBarcode"){if(u.sFun){u.sFun(l)}return}else{if(l.method=="ActiveUI"||l.method=="VersionInfo"){if(u.sFun&&l.result.length>0){u.sFun(l.result);return}}}if(l.result.length&&l.result[0]=="1"){if(u.sFun){u.sFun()}}else{if(l.exception){var p=false;if(u.fFun){p=u.fFun(h._errorString)}if(!p&&l.exception&&l.exception<0&&l.exception!=-2115){if(Dynamsoft.Lib.isFunction(h.__OnPrintMsg)){h.__OnPrintMsg(h._errorString)}}}else{var q=["result:"];if(u.fFun){u.fFun(d.__pushElement(q,l.result))}}}};e.onclose=function(){h.bReady=false;h.__wsRetry=0;Dynamsoft.Lib.Errors.Server_Invalid(h);Dynamsoft.Lib.detect.bOK=false;if(!Dynamsoft.Lib.detect.starting){for(var j=0;j<Dynamsoft.Lib.detect.arySTwains.length;j++){if(Dynamsoft.Lib.detect.arySTwains[j]==h){Dynamsoft.Lib.detect.cTwainIndex=j;break}}if(!Dynamsoft.Lib.page.bUnload){setTimeout(Dynamsoft.Lib._reconnect,1000);Dynamsoft.Lib.detect.starting=true}}if(h.__OnWSClose){h.__OnWSClose()}d.hideMask(true)};e.onerror=function(k){h.bReady=false;h.__wsRetry=0;Dynamsoft.Lib.Errors.Server_Invalid(h);Dynamsoft.Lib.detect.bOK=false;if(!Dynamsoft.Lib.detect.starting){for(var j=0;j<Dynamsoft.Lib.detect.arySTwains.length;j++){if(Dynamsoft.Lib.detect.arySTwains[j]==h){Dynamsoft.Lib.detect.cTwainIndex=j;break}}if(!Dynamsoft.Lib.page.bUnload){setTimeout(Dynamsoft.Lib._reconnect,1000);Dynamsoft.Lib.detect.starting=true}}if(k){Dynamsoft.Lib.log("websocket error: "+k)}if(h.__OnWSError){h.__OnWSError()}d.hideMask(true)};if(i){h._innerActiveUI(function(l){var m=h.__serverId,j;if(l&&l.length>=2){j=l[1]}else{Dynamsoft.Lib.log("ActiveUI return parameters error.")}h.__serverId=j;Dynamsoft.Lib.closeProgress("Reconnect");if(h.ErrorCode==0&&Dynamsoft.WebTwainEnv.ProductKey!==""&&Dynamsoft.WebTwainEnv.ProductKey!=="******"){h.ProductKey=Dynamsoft.WebTwainEnv.ProductKey}if(m!=j){Dynamsoft.Lib.Errors.Server_Restarted(h);if(Dynamsoft.Lib.isFunction(h.__OnWSReconnect)){var k=Dynamsoft.Lib.getWSUrl(g);h.__OnWSReconnect(k,f)}}else{h._errorCode=0;h._errorString=""}});return}Dynamsoft.Lib.LS.item("D_port",g.port);Dynamsoft.Lib.LS.item("D_ssl",g.ssl?"true":"false");h._UIManager.OnReady();h.SetViewMode(1,1);h._innerActiveUI(function(l){var j;if(l&&l.length>=2){j=l[1]}else{Dynamsoft.Lib.log("ActiveUI return parameters error.")}h.__serverId=j;if(h.ErrorCode==0&&Dynamsoft.WebTwainEnv.ProductKey!==""&&Dynamsoft.WebTwainEnv.ProductKey!=="******"){h.ProductKey=Dynamsoft.WebTwainEnv.ProductKey}if(Dynamsoft.Lib.isFunction(h.__OnWSReady)){var k=Dynamsoft.Lib.getWSUrl(g);h.__OnWSReady(k,f)}if(Dynamsoft.Lib.detect.OnReady){Dynamsoft.Lib.detect.OnReady()}})}})(Dynamsoft.Lib,KISSY,Dynamsoft.Lib.html5.Funs);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(a){if(!a.product.bChromeEdition){return}var b=a.html5.Funs;a.DynamicLoadAddonFuns=[];a.attachAddon=function(c){a.each(a.DynamicLoadAddonFuns,function(d){if(a.isFunction(d)){d(c)}})};Dynamsoft.Lib.attachProperty=function(c){var d=c;Object.defineProperty(d,"ErrorCode",{get:function(){return d._errorCode}});Object.defineProperty(d,"ErrorString",{get:function(){if(d._errorCode!=0){return d._errorString}return"Successful."}});Object.defineProperty(d,"LogLevel",{get:function(){return d._innerFun("LogLevel")},set:function(e){var f=e*1;return d._innerFun("LogLevel",b.makeParams(f))}});Object.defineProperty(d,"Manufacturer",{get:function(){return d._innerFun("Manufacturer")},set:function(e){return d._innerFun("Manufacturer",b.makeParams(e))}});Object.defineProperty(d,"ProductFamily",{get:function(){return d._innerFun("ProductFamily")},set:function(e){return d._innerFun("ProductFamily",b.makeParams(e))}});Object.defineProperty(d,"ProductKey",{get:function(){return Dynamsoft.WebTwainEnv.ProductKey},set:function(e){Dynamsoft.WebTwainEnv.ProductKey=e;return d._innerFun("ProductKey",b.makeParams(e))}});Object.defineProperty(d,"ProductName",{get:function(){return d._innerFun("ProductName")},set:function(e){return d._innerFun("ProductName",b.makeParams(e))}});Object.defineProperty(d,"VersionInfo",{get:function(){return d._innerFun("VersionInfo")}});Object.defineProperty(d,"BitDepth",{get:function(){return d._innerFun("BitDepth")},set:function(e){return d._innerFun("BitDepth",b.makeParams(e))}});Object.defineProperty(d,"Brightness",{get:function(){return d._innerFun("Brightness")},set:function(e){return d._innerFun("Brightness",b.makeParams(e))}});Object.defineProperty(d,"Contrast",{get:function(){return d._innerFun("Contrast")},set:function(e){return d._innerFun("Contrast",b.makeParams(e))}});Object.defineProperty(d,"CurrentSourceName",{get:function(){return d._innerFun("CurrentSourceName")}});Object.defineProperty(d,"DataSourceStatus",{get:function(){return d._innerFun("DataSourceStatus")}});Object.defineProperty(d,"DefaultSourceName",{get:function(){var e;if(d.__defaultSourceName==""||d.__sourceCount==0){e=d.SourceCount}return d.__defaultSourceName}});Object.defineProperty(d,"Duplex",{get:function(){return d._innerFun("Duplex")}});Object.defineProperty(d,"IfAppendImage",{get:function(){return d._innerFun("IfAppendImage")},set:function(e){return d._innerFun("IfAppendImage",b.makeParams(e))}});Object.defineProperty(d,"IfAutoBright",{get:function(){return d._innerFun("IfAutoBright")},set:function(e){return d._innerFun("IfAutoBright",b.makeParams(e))}});Object.defineProperty(d,"IfAutoDiscardBlankpages",{get:function(){return d._innerFun("IfAutoDiscardBlankpages")},set:function(e){return d._innerFun("IfAutoDiscardBlankpages",b.makeParams(e))}});Object.defineProperty(d,"IfAutoFeed",{get:function(){return d._innerFun("IfAutoFeed")},set:function(e){return d._innerFun("IfAutoFeed",b.makeParams(e))}});Object.defineProperty(d,"IfAutomaticBorderDetection",{get:function(){return d._innerFun("IfAutomaticBorderDetection")},set:function(e){return d._innerFun("IfAutomaticBorderDetection",b.makeParams(e))}});Object.defineProperty(d,"IfAutomaticDeskew",{get:function(){return d._innerFun("IfAutomaticDeskew")},set:function(e){return d._innerFun("IfAutomaticDeskew",b.makeParams(e))}});Object.defineProperty(d,"IfAutoScan",{get:function(){return d._innerFun("IfAutoScan")},set:function(e){return d._innerFun("IfAutoScan",b.makeParams(e))}});Object.defineProperty(d,"IfDisableSourceAfterAcquire",{get:function(){return d._innerFun("IfDisableSourceAfterAcquire")},set:function(e){return d._innerFun("IfDisableSourceAfterAcquire",b.makeParams(e))}});Object.defineProperty(d,"IfDuplexEnabled",{get:function(){return d._innerFun("IfDuplexEnabled")},set:function(e){return d._innerFun("IfDuplexEnabled",b.makeParams(e))}});Object.defineProperty(d,"IfFeederEnabled",{get:function(){return d._innerFun("IfFeederEnabled")},set:function(e){return d._innerFun("IfFeederEnabled",b.makeParams(e))}});Object.defineProperty(d,"IfFeederLoaded",{get:function(){return d._innerFun("IfFeederLoaded")}});Object.defineProperty(d,"IfModalUI",{get:function(){return d._innerFun("IfModalUI")},set:function(e){return d._innerFun("IfModalUI",b.makeParams(e))}});Object.defineProperty(d,"IfPaperDetectable",{get:function(){return d._innerFun("IfPaperDetectable")}});Object.defineProperty(d,"IfScanInNewThread",{get:function(){return d._innerFun("IfScanInNewThread")},set:function(e){return d._innerFun("IfScanInNewThread",b.makeParams(e))}});Object.defineProperty(d,"IfShowCancelDialogWhenImageTransfer",{get:function(){return d.__IfShowCancelDialogWhenImageTransfer},set:function(e){return d.__IfShowCancelDialogWhenImageTransfer=e}});Object.defineProperty(d,"IfShowUI",{get:function(){return d._innerFun("IfShowUI")},set:function(e){return d._innerFun("IfShowUI",b.makeParams(e))}});Object.defineProperty(d,"IfShowIndicator",{get:function(){return d._innerFun("IfShowIndicator")},set:function(e){return d._innerFun("IfShowIndicator",b.makeParams(e))}});Object.defineProperty(d,"IfUseTwainDSM",{get:function(){return d._innerFun("IfUseTwainDSM")},set:function(e){return d._innerFun("IfUseTwainDSM",b.makeParams(e))}});Object.defineProperty(d,"IfUIControllable",{get:function(){return d._innerFun("IfUIControllable")}});Object.defineProperty(d,"ImageBitsPerPixel",{get:function(){return d._innerFun("ImageBitsPerPixel")}});Object.defineProperty(d,"ImageCaptureDriverType",{get:function(){return d._innerFun("ImageCaptureDriverType")},set:function(e){return d._innerFun("ImageCaptureDriverType",b.makeParams(e))}});Object.defineProperty(d,"ImageLayoutDocumentNumber",{get:function(){return d._innerFun("ImageLayoutDocumentNumber")}});Object.defineProperty(d,"ImageLayoutFrameBottom",{get:function(){return d._innerFun("ImageLayoutFrameBottom")}});Object.defineProperty(d,"ImageLayoutFrameLeft",{get:function(){return d._innerFun("ImageLayoutFrameLeft")}});Object.defineProperty(d,"ImageLayoutFrameNumber",{get:function(){return d._innerFun("ImageLayoutFrameNumber")}});Object.defineProperty(d,"ImageLayoutFrameRight",{get:function(){return d._innerFun("ImageLayoutFrameRight")}});Object.defineProperty(d,"ImageLayoutFrameTop",{get:function(){return d._innerFun("ImageLayoutFrameTop")}});Object.defineProperty(d,"ImageLayoutPageNumber",{get:function(){return d._innerFun("ImageLayoutPageNumber")}});Object.defineProperty(d,"ImageLength",{get:function(){return d._innerFun("ImageLength")}});Object.defineProperty(d,"ImagePixelType",{get:function(){return d._innerFun("ImagePixelType")}});Object.defineProperty(d,"ImageWidth",{get:function(){return d._innerFun("ImageWidth")}});Object.defineProperty(d,"ImageXResolution",{get:function(){return d._innerFun("ImageXResolution")}});Object.defineProperty(d,"ImageYResolution",{get:function(){return d._innerFun("ImageYResolution")}});Object.defineProperty(d,"MagData",{get:function(){return d._innerFun("MagData")}});Object.defineProperty(d,"MagType",{get:function(){return d._innerFun("MagType")}});Object.defineProperty(d,"PageSize",{get:function(){return d._innerFun("PageSize")},set:function(e){var f=e*1;return d._innerFun("PageSize",b.makeParams(f))}});Object.defineProperty(d,"PendingXfers",{get:function(){return d._innerFun("PendingXfers")}});Object.defineProperty(d,"PixelFlavor",{get:function(){return d._innerFun("PixelFlavor")},set:function(e){return d._innerFun("PixelFlavor",b.makeParams(e))}});Object.defineProperty(d,"PixelType",{get:function(){return d._innerFun("PixelType")},set:function(e){return d._innerFun("PixelType",b.makeParams(e))}});Object.defineProperty(d,"Resolution",{get:function(){return d._innerFun("Resolution")},set:function(e){var f=e*1;return d._innerFun("Resolution",b.makeParams(f))}});Object.defineProperty(d,"SourceCount",{get:function(){var f=d._innerFunRaw("GetSourceNames"),e=f.length-1;if(d._errorCode!=0){return 0}if(e<=0){d.__sourceName=[];d.__defaultSourceName="";d.__sourceCount=0;return 0}else{if(e==1){if(f[0]==""){d.__sourceName=[];d.__defaultSourceName="";d.__sourceCount=0;return 0}}}d.__defaultSourceName=f[f.length-1];f.splice(f.length-1,1);d.__sourceName=f;d.__sourceCount=e;return e}});Object.defineProperty(d,"TransferMode",{get:function(){return d._innerFun("TransferMode")},set:function(e){return d._innerFun("TransferMode",b.makeParams(e))}});Object.defineProperty(d,"Unit",{get:function(){return d._innerFun("Unit")},set:function(e){return d._innerFun("Unit",b.makeParams(e))}});Object.defineProperty(d,"XferCount",{get:function(){return d._innerFun("XferCount")},set:function(e){var f=e*1;return d._innerFun("XferCount",b.makeParams(f))}});Object.defineProperty(d,"Capability",{get:function(){return d._innerFun("Capability")},set:function(e){return d._innerFun("Capability",b.makeParams(e))}});Object.defineProperty(d,"CapCurrentIndex",{get:function(){return d._innerFun("CapCurrentIndex")},set:function(e){return d._innerFun("CapCurrentIndex",b.makeParams(e))}});Object.defineProperty(d,"CapCurrentValue",{get:function(){return d._innerFun("CapCurrentValue")},set:function(e){return d._innerFun("CapCurrentValue",b.makeParams(e))}});Object.defineProperty(d,"CapDefaultIndex",{get:function(){return d._innerFun("CapDefaultIndex")}});Object.defineProperty(d,"CapDefaultValue",{get:function(){return d._innerFun("CapDefaultValue")}});Object.defineProperty(d,"CapDescription",{get:function(){return d._innerFun("CapDescription")},set:function(e){return d._innerFun("CapDescription",b.makeParams(e))}});Object.defineProperty(d,"CapMaxValue",{get:function(){return d._innerFun("CapMaxValue")},set:function(e){return d._innerFun("CapMaxValue",b.makeParams(e))}});Object.defineProperty(d,"CapMinValue",{get:function(){return d._innerFun("CapMinValue")},set:function(e){return d._innerFun("CapMinValue",b.makeParams(e))}});Object.defineProperty(d,"CapNumItems",{get:function(){return d._innerFun("CapNumItems")},set:function(e){return d._innerFun("CapNumItems",b.makeParams(e))}});Object.defineProperty(d,"CapStepSize",{get:function(){return d._innerFun("CapStepSize")},set:function(e){return d._innerFun("CapStepSize",b.makeParams(e))}});Object.defineProperty(d,"CapType",{get:function(){return d._innerFun("CapType")},set:function(e){return d._innerFun("CapType",b.makeParams(e))}});Object.defineProperty(d,"CapValue",{get:function(){return d._innerFun("CapValue")},set:function(e){return d._innerFun("CapValue",b.makeParams(e))}});Object.defineProperty(d,"CapValueString",{get:function(){return d._innerFun("CapValueString")},set:function(e){return d._innerFun("CapValueString",b.makeParams(e))}});Object.defineProperty(d,"CapValueType",{get:function(){return d._innerFun("CapValueType")},set:function(e){return d._innerFun("CapValueType",b.makeParams(e))}});Object.defineProperty(d,"AllowMultiSelect",{get:function(){return d._UIManager.getView().GetAllowMultiSelect()},set:function(e){d._UIManager.getView().SetAllowMultiSelect(e)}});Object.defineProperty(d,"BackgroundColor",{get:function(){return d._UIManager.GetBackgroundColor()},set:function(e){return d._UIManager.SetBackgroundColor(e)}});Object.defineProperty(d,"BackgroundFillColor",{get:function(){return d._innerFun("BackgroundFillColor")},set:function(e){return d._innerFun("BackgroundFillColor",b.makeParams(e))}});Object.defineProperty(d,"BlankImageCurrentStdDev",{get:function(){return d._innerFun("BlankImageCurrentStdDev")},set:function(e){return false}});Object.defineProperty(d,"BlankImageMaxStdDev",{get:function(){return d._innerFun("BlankImageMaxStdDev")},set:function(e){return d._innerFun("BlankImageMaxStdDev",b.makeParams(e))}});Object.defineProperty(d,"BlankImageThreshold",{get:function(){return d._innerFun("BlankImageThreshold")},set:function(e){return d._innerFun("BlankImageThreshold",b.makeParams(e))}});Object.defineProperty(d,"CurrentImageIndexInBuffer",{get:function(){return d.__cIndex},set:function(e){var f=e*1;if(f>=0&&f<d._UIManager.count()){if(f!=d.__cIndex){d._innerSendCmd("CurrentImageIndexInBuffer",b.makeParams(f))}d.__cIndex=f;d._UIManager.getView().Go(d.__cIndex);b.__innerRefreshFromUIView(d,d.__cIndex,true)}return true}});Object.defineProperty(d,"FitWindowType",{get:function(){return d._UIManager.getView().GetFitWindowType()},set:function(e){var f=e*1;return d._UIManager.getView().SetFitWindowType(f)}});Object.defineProperty(d,"HowManyImagesInBuffer",{get:function(){return d._HowManyImagesInBuffer}});Object.defineProperty(d,"IfFitWindow",{get:function(){return d._UIManager.getView().GetIfFitWindow()},set:function(e){if(e){return d._UIManager.getView().SetIfFitWindow(true)}else{return d._UIManager.getView().SetIfFitWindow(false)}}});Object.defineProperty(d,"ImageMargin",{get:function(){return d._UIManager.getView().GetImageMargin()},set:function(e){return d._UIManager.getView().SetImageMargin(e)}});Object.defineProperty(d,"MaxImagesInBuffer",{get:function(){return d._innerFun("MaxImagesInBuffer")},set:function(e){return d._innerFun("MaxImagesInBuffer",b.makeParams(e))}});Object.defineProperty(d,"MouseX",{get:function(){return d.__MouseX}});Object.defineProperty(d,"MouseY",{get:function(){return d.__MouseY}});Object.defineProperty(d,"SelectedImagesCount",{get:function(){if(d._UIManager.count()<=0){return 0}if(d.__SelectedImagesCount==0){return 1}return d.__SelectedImagesCount},set:function(f){var g,e=f*1;if(d._UIManager.count()<=0){e=0}else{if(e<1){e=1}}d.__SelectedImagesCount=e;d._UIManager.getView().SetSelectedImageCount(e);return d._innerFun("SelectedImagesCount",b.makeParams(e))}});Object.defineProperty(d,"SelectionImageBorderColor",{get:function(){return d._UIManager.GetSelectionImageBorderColor()},set:function(e){return d._UIManager.SetSelectionImageBorderColor(e)}});Object.defineProperty(d,"Zoom",{get:function(){return d._UIManager.getView().GetZoom()},set:function(e){return d._UIManager.getView().SetZoom(e)}});Object.defineProperty(d,"MouseShape",{get:function(){return d._UIManager.getView().GetMouseShape()},set:function(e){return d._UIManager.getView().SetMouseShape(e)}});Object.defineProperty(d,"HTTPPostResponseString",{get:function(){if(d.__HTTPPostResponseString){return d.__HTTPPostResponseString}else{return""}}});Object.defineProperty(d,"FTPPassword",{get:function(){return d._innerFun("FTPPassword")},set:function(e){return d._innerFun("FTPPassword",b.makeParams(e))}});Object.defineProperty(d,"FTPPort",{get:function(){return d._innerFun("FTPPort")},set:function(e){if(e!==""){var f=e*1;return d._innerFun("FTPPort",b.makeParams(f))}}});Object.defineProperty(d,"FTPUserName",{get:function(){return d._innerFun("FTPUserName")},set:function(e){return d._innerFun("FTPUserName",b.makeParams(e))}});Object.defineProperty(d,"IfPASVMode",{get:function(){return d._innerFun("IfPASVMode")},set:function(e){return d._innerFun("IfPASVMode",b.makeParams(e))}});Object.defineProperty(d,"IfShowProgressBar",{get:function(){return d.__IfShowProgressBar},set:function(e){return d.__IfShowProgressBar=e}});Object.defineProperty(d,"ProxyServer",{get:function(){return d._innerFun("ProxyServer")},set:function(e){return d._innerFun("ProxyServer",b.makeParams(e))}});Object.defineProperty(d,"IfShowFileDialog",{get:function(){return d._innerFun("IfShowFileDialog")},set:function(e){return d._innerFun("IfShowFileDialog",b.makeParams(e))}});Object.defineProperty(d,"IfTiffMultiPage",{get:function(){return d._innerFun("IfTiffMultiPage")},set:function(e){return d._innerFun("IfTiffMultiPage",b.makeParams(e))}});Object.defineProperty(d,"PDFAuthor",{get:function(){return d._innerFun("PDFAuthor")},set:function(e){return d._innerFun("PDFAuthor",b.makeParams(e))}});Object.defineProperty(d,"PDFCompressionType",{get:function(){return d._innerFun("PDFCompressionType")},set:function(e){return d._innerFun("PDFCompressionType",b.makeParams(e))}});Object.defineProperty(d,"PDFCreationDate",{get:function(){return d._innerFun("PDFCreationDate")},set:function(e){return d._innerFun("PDFCreationDate",b.makeParams(e))}});Object.defineProperty(d,"PDFCreator",{get:function(){return d._innerFun("PDFCreator")},set:function(e){return d._innerFun("PDFCreator",b.makeParams(e))}});Object.defineProperty(d,"PDFKeywords",{get:function(){return d._innerFun("PDFKeywords")},set:function(e){return d._innerFun("PDFKeywords",b.makeParams(e))}});Object.defineProperty(d,"PDFModifiedDate",{get:function(){return d._innerFun("PDFModifiedDate")},set:function(e){return d._innerFun("PDFModifiedDate",b.makeParams(e))}});Object.defineProperty(d,"PDFProducer",{get:function(){return d._innerFun("PDFProducer")},set:function(e){return d._innerFun("PDFProducer",b.makeParams(e))}});Object.defineProperty(d,"PDFSubject",{get:function(){return d._innerFun("PDFSubject")},set:function(e){return d._innerFun("PDFSubject",b.makeParams(e))}});Object.defineProperty(d,"PDFTitle",{get:function(){return d._innerFun("PDFTitle")},set:function(e){return d._innerFun("PDFTitle",b.makeParams(e))}});Object.defineProperty(d,"PDFVersion",{get:function(){return d._innerFun("PDFVersion")},set:function(e){return d._innerFun("PDFVersion",b.makeParams(e))}});Object.defineProperty(d,"TIFFCompressionType",{get:function(){return d._innerFun("TIFFCompressionType")},set:function(e){return d._innerFun("TIFFCompressionType",b.makeParams(e))}});Object.defineProperty(d,"JPEGQuality",{get:function(){return d._innerFun("JPEGQuality")},set:function(e){var f=e*1;if(f>=100){f=100}return d._innerFun("JPEGQuality",b.makeParams(f))}});Object.defineProperty(d,"SelectionRectAspectRatio",{get:function(){return d._UIManager.GetSelectionRectAspectRatio()},set:function(e){var f=parseFloat(e);if(f>=0){d._UIManager.SetSelectionRectAspectRatio(f);return true}return false}});Object.defineProperty(d,"IfAllowLocalCache",{get:function(){return d._innerFun("IfAllowLocalCache")},set:function(e){return d._innerFun("IfAllowLocalCache",b.makeParams(e))}});Object.defineProperty(d,"BrokerProcessType",{get:function(){return 1},set:function(e){return true}});Object.defineProperty(d,"BorderStyle",{get:function(){return 0},set:function(e){return false}});Object.defineProperty(d,"IfSSL",{get:function(){return d._innerFun("IfSSL")},set:function(e){return d._innerFun("IfSSL",b.makeParams(e))}});Object.defineProperty(d,"AllowPluginAuthentication",{get:function(){return d._innerFun("AllowPluginAuthentication")},set:function(e){return d._innerFun("AllowPluginAuthentication",b.makeParams(e))}});Object.defineProperty(d,"HttpFieldNameOfUploadedImage",{get:function(){return d.__remoteFilename},set:function(e){return d.__remoteFilename=e}});Object.defineProperty(d,"MaxInternetTransferThreads",{get:function(){return d._innerFun("MaxInternetTransferThreads")},set:function(e){return d._innerFun("MaxInternetTransferThreads",b.makeParams(e))}});Object.defineProperty(d,"MaxUploadImageSize",{get:function(){return d._innerFun("MaxUploadImageSize")},set:function(e){return d._innerFun("MaxUploadImageSize",b.makeParams(e))}});Object.defineProperty(d,"IfOpenImageWithGDIPlus",{get:function(){return d._innerFun("IfOpenImageWithGDIPlus")},set:function(e){return d._innerFun("IfOpenImageWithGDIPlus",b.makeParams(e))}});Object.defineProperty(d,"style",{get:function(){return d.__style}});Object.defineProperty(d,"Addon",{get:function(){return d.__addon}});Object.defineProperty(d,"BufferMemoryLimit",{get:function(){return d._innerFun("BufferMemoryLimit")},set:function(e){return d._innerFun("BufferMemoryLimit",b.makeParams(e))}});Object.defineProperty(d,"Width",{get:function(){return d._width},set:function(e){var g=false;if(Dynamsoft.Lib.isString(e)){if(e.length>0){if(e.charAt(e.length-1)==="%"){g=e}}}if(!g&&e){var f=parseInt(e);if(f){g=f+"px"}}if(g){d._width=g;return b.changeImageUISize(d,g,false)}return false}});Object.defineProperty(d,"Height",{get:function(){return d._height},set:function(e){var g=false;if(Dynamsoft.Lib.isString(e)){if(e.length>0){if(e.charAt(e.length-1)==="%"){g=e}}}if(!g&&e){var f=parseInt(e);if(f){g=f+"px"}}if(g){d._height=g;return b.changeImageUISize(d,false,g)}return false}});Object.defineProperty(d,"ShowPageNumber",{get:function(){return d._UIManager.getView().GetShowPageNumber()},set:function(e){d._UIManager.getView().SetShowPageNumber(e)}});Object.defineProperty(d,"ImageEditorIfEnableEnumerator",{get:function(){return true},set:function(e){return true}});Object.defineProperty(d,"ImageEditorIfReadonly",{get:function(){return true},set:function(e){return true}});Object.defineProperty(d,"ImageEditorIfModal",{get:function(){return true},set:function(e){return true}});Object.defineProperty(d,"ImageEditorWindowTitle",{get:function(){return true},set:function(e){return true}});Object.defineProperty(d,"EnableInteractiveZoom",{get:function(){return true},set:function(e){return true}});Object.defineProperty(d,"IfShowPrintUI",{get:function(){return true},set:function(e){return true}});Object.defineProperty(d,"VScrollBar",{get:function(){return true},set:function(e){return true}});Object.defineProperty(d,"AsyncMode",{get:function(){return true},set:function(e){return true}});Object.defineProperty(d,"IfThrowException",{get:function(){return true},set:function(e){return true}})}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(c,b,d){if(!Dynamsoft.Lib.product.bChromeEdition){return}var a=b.prototype;a.__innerLoadImage=function(e,i,h,g,f){if(Dynamsoft.Lib.isFunction(g)){return this.__innerAcquireImage(e,i,h,g,f)}else{return this.__innerLoadImageFun(e,i)}};a.__innerLoadImageFun=function(e,h){var i=this;if(d.isServerInvalid(i)){return false}var f=i._innerFun(e,h);var g=i._UIManager.GetCurrentImageIndex();if(g>=0){if(f){i._UIManager.refreshEditor(g,i._UIManager.count())}i.OnRefreshUI(g)}return f};a.__innerAcquireImage=function(f,k,i,h,g){var l=this,e=(f=="LoadImage"||f=="LoadImageEx");var j=function(m){l.__bLoadingImage=false;var n=l.__cIndex;if(n>=0){l.OnRefreshUI(n)}if(Dynamsoft.Lib.isFunction(g)){g(l.ErrorCode,l.ErrorString)}if(e){Dynamsoft.Lib.closeProgress(f)}else{d.hideMask(f)}if(m){Dynamsoft.Lib.log(m)}return false};if(d.isServerInvalid(l)){j();return false}if(e){Dynamsoft.Lib.showProgress(l,f,false)}else{d.showMask(f)}l._innerSend(f,k,true,function(){l.__bLoadingImage=false;if(e){Dynamsoft.Lib.closeProgress(f);var m=l._UIManager.GetCurrentImageIndex();if(m>=0){l._UIManager.refreshEditor(m,l._UIManager.count());l.OnRefreshUI(m)}}else{d.hideMask(f)}if(Dynamsoft.Lib.isFunction(h)){h()}},j);return true};a.__innerSaveImage=function(e,g,f,h){return this.__innerProgressFunction(e,g,false,f,h)};a.__innerFTPDownloadDirectly=function(e,g,f,h){Dynamsoft.Lib.cancelFrome=4;return this.__innerProgressFunction(e,g,true,f,h)};a.__innerFTPDownload=function(e,i,h,k){var j=this;Dynamsoft.Lib.cancelFrome=4;if(Dynamsoft.Lib.isFunction(k)){return this.__innerProgressFunction(e,i,true,function(){var l=j.__cIndex;if(l>=0){j.OnRefreshUI(l)}if(Dynamsoft.Lib.isFunction(h)){h()}},k)}else{var g=this._innerFun(e,i);var f=j.__cIndex;if(f>=0){j.OnRefreshUI(f)}return g}};a.__innerFTPUpload=function(e,g,f,h){Dynamsoft.Lib.cancelFrome=3;return this.__innerProgressFunction(e,g,true,f,h)};a.__innerProgressFunction=function(e,i,f,g,k){var j=this;if(!Dynamsoft.Lib.isFunction(k)){return this._innerFun(e,i)}var h=function(l){if(Dynamsoft.Lib.isFunction(k)){k(j.ErrorCode,j.ErrorString)}Dynamsoft.Lib.closeProgress(e);if(l){Dynamsoft.Lib.log(l)}return true};Dynamsoft.Lib.showProgress(j,e,f);return this._innerSend(e,i,true,function(){Dynamsoft.Lib.closeProgress(e);if(Dynamsoft.Lib.isFunction(g)){g()}},h)};a.__innerGetBarcodeResultAsyncFunction=function(f){var e=Dynamsoft.Lib.NewBarcodeResult();if(f){e._errorCode=f.exception;e._errorString=f.description;e._resultlist=f.result;e._Count=f.result.length}return e};a._innerSendCmd=function(e,f){var g=this;if(d.isHttpServerInvalid(g)){return false}g._innerFunRaw(e,f,true,false)};a._innerFun=function(e,g){var h=this,f;if(d.isHttpServerInvalid(h)){return false}f=h._innerFunRaw(e,g,false,false);if(Dynamsoft.Lib.isArray(f)){return f[0]}return f};a._innerFunRaw=function(g,f,o,h){var l=this,e,q,i="text",k;if(d.isHttpServerInvalid(l)){return false}l._errorCode=0;l._errorString="";e=[l.httpUrl,"f/",g,"?",d.getRandom()].join("");q=d.getJson(l,g,f,0);var n,j=false;if(o){j=true}else{}k={type:"post",url:e,data:q,async:j,success:function(m){if(m!==undefined&&m!==null){if(m.exception!==undefined&&m.description!==undefined){l._errorCode=m.exception;l._errorString=m.description}else{l._errorCode=0;l._errorString=""}n=m.result}else{Dynamsoft.Lib.Errors.InvalidResultFormat(l);n=""}},error:function(){Dynamsoft.Lib.Errors.NetworkError(l);n=""}};if(h){k.contentType="text/plain; charset=x-user-defined";k.mimeType="text/plain; charset=x-user-defined";k.success=function(p,z,s){var w,t,x;w=s.responseText;t=w.length;l._errorCode=0;l._errorString="";if(t>0){var y=false,m;if(w.charAt(0)=="{"){try{m=KISSY.JSON.parse(w);y=true}catch(u){Dynamsoft.Lib.log(w)}}if(y){if(m.exception!==undefined&&m.description!==undefined){l._errorCode=m.exception;l._errorString=m.description;n=false}else{n=true}}else{x=new Uint8Array(t);for(var v=0;v<t;v++){x[v]=w.charCodeAt(v)}n=new Blob([x],{type:"image/octet-stream"})}}else{n=""}}}new KISSY.IO(k);return n};a._innerSend=function(i,f,h,k,o){var l=this,g=l._objWS,q=false,j=false,e=false;if(i!="ActiveUI"){e=d.isServerInvalid(l)}if(e){if(Dynamsoft.Lib.isFunction(o)){o()}return true}if(Dynamsoft.Lib.isFunction(k)){j=k}if(Dynamsoft.Lib.isFunction(o)){q=o}var r=d.generateCmdId(),n;if(i=="SaveSelectedImagesToBytes"){l.curCommand_SaveImagesToBytes.push({cmdId:r,sFun:j,fFun:q,objWS:g,json:d.getJson(l,i,f,r),binary:h});if(l.curCommand_SaveImagesToBytes.length==1){n=d.sendData(g,d.getJson(l,i,f,r),false,h)}else{n=true}}else{l.curCommand.push({cmd:i,cmdId:r,sFun:j,fFun:q});n=d.sendData(g,d.getJson(l,i,f,r),false,h)}return n};a.__SaveSelectedImagesToBytes=function(h,k,i,m,f){var j=this;if(i){return j._innerSend("SaveSelectedImagesToBytes",d.makeParams(h,k),true,m,f)}else{var l=false,g=true,e=j._innerFunRaw("SaveSelectedImagesToBytes",d.makeParams(h,k),l,g);if(j.ErrorCode==0){m(e);return true}else{f();return false}}};a.__SaveLocalFileToBytes=function(g,e,i,l){var k=this;if(e){return k._innerSend("SaveSelectedImagesToBytes",d.makeParams(0,0,g),true,i,l)}else{var j=false,h=true,f=k._innerFunRaw("SaveSelectedImagesToBytes",d.makeParams(0,0,g),j,h);if(k.ErrorCode==0){i(f);return true}else{l();return false}}};a.__LoadImageFromBytes=function(r,j,n,k,q,h){var l=this,i="LoadImageFromBytes",u=j||3,o=r.size||r.length,g=["[",o,",",0,",",u,',"',n,'"]'].join(""),e=d.isServerInvalid(l);var s=function(){Dynamsoft.Lib.closeProgress(i);l.__bLoadingImage=false;if(!e){var f=l.__cIndex;if(f>=0){l.OnRefreshUI(f)}}if(Dynamsoft.Lib.isFunction(h)){h()}};if(e){s();return false}if(o===0){Dynamsoft.Lib.Errors.ImageFileLengthCannotZero(l);s();return false}d.setBtnCancelVisibleForProgress(l,false);return this._innerSendBlob(i,g,r,k,function(){Dynamsoft.Lib.closeProgress(i);l.__bLoadingImage=false;var f=l._UIManager.GetCurrentImageIndex();if(k&&f>=0){l._UIManager.refreshEditor(f,l._UIManager.count());l.OnRefreshUI(f)}if(Dynamsoft.Lib.isFunction(q)){q()}},s)};a._innerSendBlob=function(h,f,s,l,k,r){var o=this,g=o._objWS,j=false,t=false;if(d.isServerInvalid(o)){if(Dynamsoft.Lib.isFunction(r)){r()}return}if(Dynamsoft.Lib.isFunction(k)){j=k}if(Dynamsoft.Lib.isFunction(r)){t=r}if(l){var u=d.generateCmdId();o.curCommand.push({cmd:h,cmdId:u,sFun:j,fFun:t});d.sendData(g,d.getJson(o,h,f,u),s,true)}else{var q,e,v,i="text",n;if(d.isHttpServerInvalid(o)){return false}o._errorCode=0;o._errorString="";e=[o.httpUrl,"f/",h,"?",d.getRandom()].join("");v=d.getJson(o,h,f,0);v+="\r\n\r\n";v+=Dynamsoft.Lib.base64.encodeArray(s);n={type:"post",url:e,processData:false,data:v,async:false,success:function(m){if(m!==undefined&&m!==null){if(m.exception!==undefined&&m.description!==undefined){o._errorCode=m.exception;o._errorString=m.description}else{o._errorCode=0;o._errorString=""}q=m.result}else{Dynamsoft.Lib.Errors.InvalidResultFormat(o);q=""}},error:function(){Dynamsoft.Lib.Errors.NetworkError(o);q=""}};new KISSY.IO(n);if(o._errorCode==0){if(Dynamsoft.Lib.isFunction(j)){j()}}else{if(Dynamsoft.Lib.isFunction(t)){t()}}return q}};a._innerActiveUI=function(f,e){this._innerSend("ActiveUI",d.makeParams(Dynamsoft.Lib.env.WSVersion),false,f,e)};a._innerSetSize=function(e,i){var k=this,g=false,j=false;if(Dynamsoft.Lib.isString(e)){if(e.length>0){if(e.charAt(e.length-1)==="%"){g=e}}}if(!g&&e){var f=parseInt(e);if(f){g=f+"px"}}if(Dynamsoft.Lib.isString(i)){if(i.length>0){if(i.charAt(i.length-1)==="%"){j=i}}}if(!j&&i){var f=parseInt(i);if(f){j=f+"px"}}if(g){k._width=g}if(j){k._height=j}return d.changeImageUISize(k,g,j)}})(Dynamsoft.Lib,Dynamsoft.Lib.html5.STwain,Dynamsoft.Lib.html5.Funs);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(b,c){if(!Dynamsoft.Lib.product.bChromeEdition){return}var a=b.prototype;a.LoadDibFromClipboard=function(e,d){return this.__innerLoadImage("LoadDibFromClipboard",null,true,e,d)};a.LoadImage=function(e,h,d){var g=c.replaceLocalFilename(e);return this.__innerLoadImage("LoadImage",c.makeParams(g),true,h,d)};a.LoadImageEx=function(e,h,i,d){var g=c.replaceLocalFilename(e);return this.__innerLoadImage("LoadImageEx",c.makeParams(g,h),true,i,d)};a.EnableSource=function(d){return this.AcquireImage(d)};a.AcquireImage=function(e){var d;if(e!==undefined&&e!==null){d=["[",KISSY.JSON.stringify(e),"]"].join("")}else{d=null}return this.__innerAcquireImage("AcquireImage",d,false)};a.CancelAllPendingTransfers=function(){return this._innerFun("CancelAllPendingTransfers")};a.CloseSource=function(){return this._innerFun("CloseSource")};a.CloseSourceManager=function(){return this._innerFun("CloseSourceManager")};a.DisableSource=function(){return this._innerFun("DisableSource")};a.FeedPage=function(){return this._innerFun("FeedPage")};a.GetDeviceType=function(){return this._innerFun("GetDeviceType")};a.GetSourceNameItems=function(d){if(d<this.__sourceCount&&d>=0){return this.__sourceName[d]}else{return""}};a.SourceNameItems=function(d){if(d<this.__sourceCount&&d>=0){return this.__sourceName[d]}else{return""}};a.GetSourceNames=function(){var e=this,d=e._innerFunRaw("GetSourceNames");if(e._errorCode!=0){return[]}return d};a.GetSourceType=function(d){return this._innerFun("GetSourceType",c.makeParams(d))};a.OpenSource=function(){return this._innerFun("OpenSource")};a.OpenSourceManager=function(){return this._innerFun("OpenSourceManager")};a.ResetImageLayout=function(){return this._innerFun("ResetImageLayout")};a.RewindPage=function(){return this._innerFun("RewindPage")};a.SelectSource=function(){return this._innerFun("SelectSource")};a.SelectSourceByIndex=function(d){return this._innerFun("SelectSourceByIndex",c.makeParams(d))};a.SetFileXferInfo=function(d,g){var e=c.replaceLocalFilename(d);return this._innerFun("SetFileXferInfo",c.makeParams(e,g))};a.SetImageLayout=function(g,f,e,d){return this._innerFun("SetImageLayout",c.makeParams(g,f,e,d))};a.CapGet=function(){return this._innerFun("CapGet")};a.CapGetCurrent=function(){return this._innerFun("CapGetCurrent")};a.CapGetDefault=function(){return this._innerFun("CapGetDefault")};a.CapGetFrameBottom=function(d){return this._innerFun("CapGetFrameBottom",c.makeParams(d))};a.CapGetFrameLeft=function(d){return this._innerFun("CapGetFrameLeft",c.makeParams(d))};a.CapGetFrameRight=function(d){return this._innerFun("CapGetFrameRight",c.makeParams(d))};a.CapGetFrameTop=function(d){return this._innerFun("CapGetFrameTop",c.makeParams(d))};a.CapGetHelp=function(){return this._innerFun("CapGetHelp")};a.CapGetLabel=function(){return this._innerFun("CapGetLabel")};a.CapGetLabels=function(){return this._innerFun("CapGetLabels")};a.CapIfSupported=function(d){return this._innerFun("CapIfSupported",c.makeParams(d))};a.CapReset=function(){return this._innerFun("CapReset")};a.CapSet=function(){return this._innerFun("CapSet")};a.CapSetFrame=function(e,h,g,f,d){return this._innerFun("CapSetFrame",c.makeParams(e,h,g,f,d))};a.GetCapItems=function(d){return this._innerFun("GetCapItems",c.makeParams(d))};a.GetCapItemsString=function(d){return this._innerFun("GetCapItemsString",c.makeParams(d))};a.SetCapItems=function(e,d){return this._innerFun("SetCapItems",c.makeParams(e,d))};a.SetCapItemsString=function(e,d){return this._innerFun("SetCapItemsString",c.makeParams(e,d))}})(Dynamsoft.Lib.html5.STwain,Dynamsoft.Lib.html5.Funs);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(b,c){if(!Dynamsoft.Lib.product.bChromeEdition){return}var a=b.prototype;a.AddText=function(i,d,k,j,h,f,g,e){return this._innerFun("AddText",c.makeParams(i,d,k,j,h,f,g,e))};a.CreateTextFont=function(f,q,k,j,m,n,g,o,d,l,h,i,p,e){return this._innerFun("CreateTextFont",c.makeParams(f,q,k,j,m,n,g,o,d,l,h,i,p,e))};a.CopyToClipboard=function(d){return this._innerFun("CopyToClipboard",c.makeParams(d))};a.Erase=function(f,h,g,e,d){return this._innerFun("Erase",c.makeParams(f,h,g,e,d))};a.GetImageBitDepth=function(d){return this._innerFun("GetImageBitDepth",c.makeParams(d))};a.GetImageWidth=function(d){return this._innerFun("GetImageWidth",c.makeParams(d))};a.GetImageHeight=function(d){return this._innerFun("GetImageHeight",c.makeParams(d))};a.GetImageSize=function(e,d,f){return this._innerFun("GetImageSize",c.makeParams(e,d,f))};a.GetImageSizeWithSpecifiedType=function(d,e){return this._innerFun("GetImageSizeWithSpecifiedType",c.makeParams(d,e))};a.GetImageXResolution=function(d){return this._innerFun("GetImageXResolution",c.makeParams(d))};a.GetImageYResolution=function(d){return this._innerFun("GetImageYResolution",c.makeParams(d))};a.GetSelectedImageIndex=function(d){var e=this;if(d>=0){return e._UIManager.GetSelectedImageIndex(d)}return -1};a.SetSelectedImageIndex=function(f,e){var g=this,d=g.__SelectedImagesCount;if(f<g.__SelectedImagesCount&&f>=0){g._UIManager.getView().SetSelectedImageIndex(f,e);return this._innerFun("SetSelectedImageIndex",c.makeParams(f,e))}return false};a.GetSkewAngle=function(d){return this._innerFun("GetSkewAngle",c.makeParams(d))};a.GetSkewAngleEx=function(f,h,g,e,d){return this._innerFun("GetSkewAngleEx",c.makeParams(f,h,g,e,d))};a.IsBlankImageEx=function(f,h,g,e,d,i){return this._innerFun("IsBlankImageEx",c.makeParams(f,h,g,e,d,i))};a.Mirror=function(d){return this._innerFun("Mirror",c.makeParams(d))};a.OverlayRectangle=function(h,j,i,f,e,d,g){var k=this;if(c.isServerInvalid(k)){return false}return this._UIManager.getView().OverlayRectangle(h,j,i,f,e,d,g)};a.RemoveAllImages=function(){var e=this,d;d=e._innerFun("RemoveAllImages");if(d){e._HowManyImagesInBuffer=0;e._UIManager.clear()}return d};a.RemoveAllSelectedImages=function(){var e=this,d;d=e._innerFun("RemoveAllSelectedImages");if(d){e._HowManyImagesInBuffer=e._innerFun("HowManyImagesInBuffer");e.__cIndex=e._innerFun("CurrentImageIndexInBuffer");if(e._HowManyImagesInBuffer==0){e._UIManager.clear()}e._UIManager.getView().SetSelectedImageCount(0);e.__SelectedImagesCount=0}return d};a.RemoveImage=function(e){var f=this,d;d=f._innerFun("RemoveImage",c.makeParams(e));if(d){f._HowManyImagesInBuffer=f._innerFun("HowManyImagesInBuffer");f.__cIndex=f._innerFun("CurrentImageIndexInBuffer");if(f._HowManyImagesInBuffer==0){f._UIManager.clear()}}return d};a.Rotate=function(g,e,f){var j=this,d=parseInt(g),h=j._innerFun("Rotate",c.makeParams(d,e,f)),i=(h==1);if(i){c.refreshImageAfterInvokeFun(j,d)}return i};a.RotateEx=function(h,f,g,d){var k=this,e=parseInt(h),i=k._innerFun("RotateEx",c.makeParams(e,f,g,d)),j=(i==1);if(j){c.refreshImageAfterInvokeFun(k,e)}return j};a.RotateLeft=function(e){var h=this,d=parseInt(e),f=h._innerFun("RotateLeft",c.makeParams(d)),g=(f==1);if(g){c.refreshImageAfterInvokeFun(h,d)}return g};a.RotateRight=function(e){var h=this,d=parseInt(e),f=h._innerFun("RotateRight",c.makeParams(d)),g=(f==1);if(g){c.refreshImageAfterInvokeFun(h,d)}return g};a.ChangeImageSize=function(m,e,j,l){var g=this,h=parseInt(m),k=1*e,i=1*j,d,f;if(k<=0||i<=0){Dynamsoft.Lib.Errors.InvalidWidthOrHeight(g);return false}d=g._innerFun("ChangeImageSize",c.makeParams(h,k,i,l));f=(d==1);if(f){c.refreshImageAfterInvokeFun(g,h)}return f};a.Flip=function(e){var h=this,d=parseInt(e),f=h._innerFun("Flip",c.makeParams(d)),g=(f==1);if(g){c.refreshImageAfterInvokeFun(h,d)}return g};a.Crop=function(l,f,j,k,e){var h=this,i=parseInt(l),d=h._innerFun("Crop",c.makeParams(i,f,j,k,e)),g=(d==1);if(g){c.refreshImageAfterInvokeFun(h,i)}return g};a.CropToClipboard=function(l,f,j,k,e){var h=this,i=parseInt(l),d=h._innerFun("CropToClipboard",c.makeParams(i,f,j,k,e)),g=(d==1);if(g){c.refreshImageAfterInvokeFun(h,i)}return g};a.CutFrameToClipboard=function(l,f,j,k,e){var h=this,i=parseInt(l),d=h._innerFun("CutFrameToClipboard",c.makeParams(i,f,j,k,e)),g=(d==1);if(g){c.refreshImageAfterInvokeFun(h,i)}return g};a.CutToClipboard=function(e){var h=this,d=parseInt(e),f=h._innerFun("CutToClipboard",c.makeParams(d)),g=(f==1);if(g){c.refreshImageAfterInvokeFun(h,d)}return g};a.SetDPI=function(h,e,g,d,f){return this._innerFun("SetDPI",c.makeParams(h,e,g,d,f))};a.SetViewMode=function(g,e){var i=this,f,d;f=Math.floor(g);d=Math.floor(e);i._UIManager.SetViewMode(f,d);return true};a.MoveImage=function(f,e){var g=this,d=g._innerFun("MoveImage",c.makeParams(f,e));if(d){d=g._UIManager.MoveImage(f,e)}return d};a.SwitchImage=function(f,e){var g=this,d=g._innerFun("SwitchImage",c.makeParams(f,e));if(d){g._UIManager.SwitchImage(f,e)}return d};a.Print=function(){var d=this;d._UIManager.getView().Print();return true};a.SetSelectedImageArea=function(f,h,g,e,d){var i=this;if(c.isServerInvalid(i)){return false}return i._UIManager.getView().SetSelectedImageArea(f,h,g,e,d)}})(Dynamsoft.Lib.html5.STwain,Dynamsoft.Lib.html5.Funs);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(b,c){if(!Dynamsoft.Lib.product.bChromeEdition){return}var a=b.prototype;a.FileExists=function(d){var e=c.replaceLocalFilename(d);return this._innerFun("FileExists",c.makeParams(e))};a.SaveAllAsMultiPageTIFF=function(d,h,e){var g=c.replaceLocalFilename(d);return this.__innerSaveImage("SaveAllAsMultiPageTIFF",c.makeParams(g),h,e)};a.SaveAllAsPDF=function(d,h,e){var g=c.replaceLocalFilename(d);return this.__innerSaveImage("SaveAllAsPDF",c.makeParams(g),h,e)};a.SaveAsBMP=function(d,e){var g=c.replaceLocalFilename(d);return this._innerFun("SaveAsBMP",c.makeParams(g,e))};a.SaveAsJPEG=function(d,e){var g=c.replaceLocalFilename(d);return this._innerFun("SaveAsJPEG",c.makeParams(g,e))};a.SaveAsPDF=function(d,e){var g=c.replaceLocalFilename(d);return this._innerFun("SaveAsPDF",c.makeParams(g,e))};a.SaveAsPNG=function(d,e){var g=c.replaceLocalFilename(d);return this._innerFun("SaveAsPNG",c.makeParams(g,e))};a.SaveAsTIFF=function(d,e){var g=c.replaceLocalFilename(d);return this._innerFun("SaveAsTIFF",c.makeParams(g,e))};a.SaveSelectedImagesAsMultiPagePDF=function(e,i,g){var j=this,h=c.replaceLocalFilename(e),d;d=c.__SetSelectedImages(j,j._UIManager.GetCurrentImageIndex(),j._UIManager.GetSelectedIndexes());if(d){return j.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",c.makeParams(h),i,g)}return false};a.SaveSelectedImagesAsMultiPageTIFF=function(e,i,g){var j=this,h=c.replaceLocalFilename(e),d;d=c.__SetSelectedImages(j,j._UIManager.GetCurrentImageIndex(),j._UIManager.GetSelectedIndexes());if(d){return j.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",c.makeParams(h),i,g)}return false};a.SaveSelectedImagesToBase64Binary=function(){var e=this,d;d=c.__SetSelectedImages(e,e._UIManager.GetCurrentImageIndex(),e._UIManager.GetSelectedIndexes());if(d){return e._innerFun("SaveSelectedImagesToBase64Binary")}return false};a.ShowFileDialog=function(h,e,l,k,j,d,g,m){var i=c.replaceLocalFilename(j);return this._innerSend("ShowFileDialog",c.makeParams(h,e,l,k,i,d,g,m),true)};a.FTPDownload=function(g,f,e,d){return this.__innerFTPDownload("FTPDownload",c.makeParams(g,f),e,d)};a.FTPDownloadDirectly=function(j,i,d,h,e){var g=c.replaceLocalFilename(d);return this.__innerFTPDownloadDirectly("FTPDownloadDirectly",c.makeParams(j,i,g),h,e)};a.FTPDownloadEx=function(h,g,e,f,d){return this.__innerFTPDownload("FTPDownloadEx",c.makeParams(h,g,e),f,d)};a.FTPUpload=function(h,e,g,f,d){return this.__innerFTPUpload("FTPUpload",c.makeParams(h,e,g),f,d)};a.FTPUploadDirectly=function(j,d,i,h,e){var g=c.replaceLocalFilename(d);return this.__innerFTPUpload("FTPUploadDirectly",c.makeParams(j,g,i),h,e)};a.FTPUploadEx=function(i,e,h,f,g,d){return this.__innerFTPUpload("FTPUploadEx",c.makeParams(i,e,h,f),g,d)};a.FTPUploadAllAsMultiPageTIFF=function(g,f,e,d){return this.__innerFTPUpload("FTPUploadAllAsMultiPageTIFF",c.makeParams(g,f),e,d)};a.FTPUploadAllAsPDF=function(g,f,e,d){return this.__innerFTPUpload("FTPUploadAllAsPDF",c.makeParams(g,f),e,d)};a.FTPUploadAsMultiPagePDF=function(g,f,e,d){return this.__innerFTPUpload("FTPUploadAsMultiPagePDF",c.makeParams(g,f),e,d)};a.FTPUploadAsMultiPageTIFF=function(g,f,e,d){return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",c.makeParams(g,f),e,d)};a.HTTPDownload=function(f,e,h,d){var g=c.getImageType(e);return this.HTTPDownloadThroughGet(f,e,g,h,d)};a.HTTPDownloadDirectly=function(o,d,i,n,g){var k=this,e=c.combineUrl(k,o,d),l,j;if(e===false){Dynamsoft.Lib.Errors.ParameterCannotEmpty(k);return false}Dynamsoft.Lib.cancelFrome=2;if(!i||i==""){Dynamsoft.Lib.Errors.InvalidLocalFilename(k,"HTTPDownloadDirectly");if(Dynamsoft.Lib.isFunction(g)){g(k.ErrorCode,k.ErrorString)}return false}if(c.isServerInvalid(k)){if(Dynamsoft.Lib.isFunction(g)){g(k.ErrorCode,k.ErrorString)}return false}j=c.replaceLocalFilename(i);l="get";Dynamsoft.Lib.showProgress(k,"HTTPDownloadDirectly",true);var m=function(f){var q=(f.total===0)?100:Math.round(f.loaded*100/f.total),r=[f.loaded," / ",f.total].join("");k._OnPercentDone([0,q,"","http"])},h=true;k._OnPercentDone([0,-1,"HTTP Downloading...","http"]);if(!Dynamsoft.Lib.isFunction(n)){h=false}ret=c.loadHttpBlob(k,l,e,h,function(f){k._OnPercentDone([0,-1,"Loading..."]);var p=3;k.__LoadImageFromBytes(f,p,j,h,n,g)},function(){Dynamsoft.Lib.closeProgress("HTTPDownloadDirectly");if(Dynamsoft.Lib.isFunction(g)){g(k.ErrorCode,k.ErrorString)}},m);return ret};a.HTTPUploadThroughPostDirectly=function(p,k,d,i,o,h){var n=this,e="HTTPUploadThroughPostDirectly",g=c.combineUrl(n,p,d),j=true,l;if(g===false){Dynamsoft.Lib.Errors.ParameterCannotEmpty(n);return false}if(!Dynamsoft.Lib.isFunction(o)){j=false}Dynamsoft.Lib.cancelFrome=1;var q=function(){if(Dynamsoft.Lib.isFunction(h)){h(n.ErrorCode,n.ErrorString,n.__HTTPPostResponseString)}Dynamsoft.Lib.needShowTwiceShowDialog=false;Dynamsoft.Lib.closeProgress(e);return true};Dynamsoft.Lib.needShowTwiceShowDialog=true;Dynamsoft.Lib.showProgress(n,e,false);if(p===""){Dynamsoft.Lib.Errors.HttpServerCannotEmpty(n);q();return false}l=c.replaceLocalFilename(k);n.__SaveLocalFileToBytes(l,j,function(f){Dynamsoft.Lib.needShowTwiceShowDialog=false;if(f&&(Dynamsoft.Lib.dlgRef>0||n.__IfShowCancelDialogWhenImageTransfer==false||j==false)){f.name=i;c.setBtnCancelVisibleForProgress(n,true);c.httpPostUpload(n,g,f,j,function(m){Dynamsoft.Lib.closeProgress(e);if(Dynamsoft.Lib.isFunction(o)){o(m)}},q)}else{Dynamsoft.Lib.closeProgress(e)}},q);return true};a.HTTPUploadThroughPost=function(g,f,d,j,i,e){var h=c.getImageType(j);return this.HTTPUploadThroughPostEx(g,f,d,j,h,i,e)};a.HTTPUploadThroughPostEx=function(p,r,d,h,j,o,g){var k=this,e="HTTPUploadThroughPostEx",f=c.combineUrl(k,p,d),i=true,l=false;if(f===false){Dynamsoft.Lib.Errors.ParameterCannotEmpty(k);return false}if(!Dynamsoft.Lib.isFunction(o)){i=false}Dynamsoft.Lib.cancelFrome=1;var q=function(){var m=k.curCommand_SaveImagesToBytes.length;if(Dynamsoft.Lib.isFunction(g)){g(k.ErrorCode,k.ErrorString,k.__HTTPPostResponseString)}Dynamsoft.Lib.needShowTwiceShowDialog=false;Dynamsoft.Lib.closeProgress(e);if(m>0){Dynamsoft.Lib.cancelFrome=1;Dynamsoft.Lib.needShowTwiceShowDialog=true;Dynamsoft.Lib.showProgress(k,e,false);var s=k.curCommand_SaveImagesToBytes[0];c.sendData(s.objWS,s.json,false,s.binary)}return true};Dynamsoft.Lib.needShowTwiceShowDialog=true;Dynamsoft.Lib.showProgress(k,e,false);if(p===""){Dynamsoft.Lib.Errors.HttpServerCannotEmpty(k);q();return false}if(r==-2){var n;n=c.__SetSelectedImages(k,k._UIManager.GetCurrentImageIndex(),k._UIManager.GetSelectedIndexes());if(!n){q(k._errorString);return false}}k.__SaveSelectedImagesToBytes(j,r,i,function(m){Dynamsoft.Lib.needShowTwiceShowDialog=false;if(m&&(Dynamsoft.Lib.dlgRef>0||k.__IfShowCancelDialogWhenImageTransfer==false||i==false)){m.name=h;c.setBtnCancelVisibleForProgress(k,true);c.httpPostUpload(k,f,m,i,function(s){var t=k.curCommand_SaveImagesToBytes.length;Dynamsoft.Lib.closeProgress(e);l=true;if(Dynamsoft.Lib.isFunction(o)){o(s)}if(t>0){Dynamsoft.Lib.cancelFrome=1;Dynamsoft.Lib.needShowTwiceShowDialog=true;Dynamsoft.Lib.showProgress(k,e,false);var u=k.curCommand_SaveImagesToBytes[0];c.sendData(u.objWS,u.json,false,u.binary)}},q)}else{Dynamsoft.Lib.closeProgress(e)}},q);return l};a.ClearAllHTTPFormField=function(){var d=this;d.httpFormFields={};return true};a.SetHTTPFormField=function(g,d){var f=this,e=g;if(!Dynamsoft.Lib.isString(e)){e=""+e}f.httpFormFields[e]=d;return true};a.HTTPUploadAllThroughPostAsMultiPageTIFF=function(g,d,j,i,f){var e=-1,h=2;return this.HTTPUploadThroughPostEx(g,e,d,j,h,i,f)};a.HTTPUploadThroughPostAsMultiPageTIFF=function(g,d,k,i,f){var j=this,e=-2,h=2;return j.HTTPUploadThroughPostEx(g,e,d,k,h,i,f)};a.HTTPUploadAllThroughPostAsPDF=function(g,d,k,i,f){var j=this,e=-1,h=4;return this.HTTPUploadThroughPostEx(g,e,d,k,h,i,f)};a.HTTPUploadThroughPostAsMultiPagePDF=function(g,d,k,i,f){var j=this,e=-2,h=4;return j.HTTPUploadThroughPostEx(g,e,d,k,h,i,f)};a.HTTPUploadThroughPutDirectly=function(g,e,d,h,f){Dynamsoft.Lib.Errors.HTML5NotSupport(this);return false};a.HTTPUploadThroughPut=function(g,f,d,i,e){var h=c.getImageType(d);return this.HTTPUploadThroughPutEx(g,f,d,h,i,e)};a.HTTPUploadThroughPutEx=function(o,q,l,h,n,f){var i=this,d="HTTPUploadThroughPutEx",e=c.combineUrl(i,o,l),g=true,j=false;if(e===false){Dynamsoft.Lib.Errors.ParameterCannotEmpty(i);return false}if(Dynamsoft.Lib.isFunction(n)){g=false}Dynamsoft.Lib.cancelFrome=1;var p=function(m){var r=i.curCommand_SaveImagesToBytes.length;if(Dynamsoft.Lib.isFunction(f)){f(i.ErrorCode,i.ErrorString,i.__HTTPPostResponseString)}Dynamsoft.Lib.needShowTwiceShowDialog=false;Dynamsoft.Lib.closeProgress(d);if(r>0){Dynamsoft.Lib.cancelFrome=1;Dynamsoft.Lib.needShowTwiceShowDialog=true;Dynamsoft.Lib.showProgress(i,d,false);var s=i.curCommand_SaveImagesToBytes[0];c.sendData(s.objWS,s.json,false,s.binary)}return true},k;if(o===""){Dynamsoft.Lib.Errors.HttpServerCannotEmpty(i);p(i._errorString);return false}Dynamsoft.Lib.needShowTwiceShowDialog=true;Dynamsoft.Lib.showProgress(i,d,false);if(q==-2){var j;j=c.__SetSelectedImages(i,i._UIManager.GetCurrentImageIndex(),i._UIManager.GetSelectedIndexes());if(!j){p(i._errorString);return false}}i.__SaveSelectedImagesToBytes(h,q,g,function(m){Dynamsoft.Lib.needShowTwiceShowDialog=false;if(m&&(Dynamsoft.Lib.dlgRef>0||i.__IfShowCancelDialogWhenImageTransfer==false||g==false)){k=function(r){var s=(r.total===0)?100:Math.round(r.loaded*100/r.total),t=[r.loaded," / ",r.total].join("");i._OnPercentDone([0,s,"","http"])};i._OnPercentDone([0,-1,"uploading...","http"]);c.setBtnCancelVisibleForProgress(i,true);c.httpPutImage(i,e,m,g,function(r){var s=i.curCommand_SaveImagesToBytes.length;i.__HTTPPostResponseString=r;Dynamsoft.Lib.closeProgress(d);j=true;if(Dynamsoft.Lib.isFunction(n)){n(i.__HTTPPostResponseString)}if(s>0){Dynamsoft.Lib.cancelFrome=1;Dynamsoft.Lib.needShowTwiceShowDialog=true;Dynamsoft.Lib.showProgress(i,d,false);var t=i.curCommand_SaveImagesToBytes[0];c.sendData(t.objWS,t.json,false,t.binary)}},p,k)}else{Dynamsoft.Lib.closeProgress(d)}},p);return j};a.HTTPUploadAllThroughPutAsMultiPageTIFF=function(g,d,i,f){var e=-1,h=2;return this.HTTPUploadThroughPutEx(g,e,d,h,i,f)};a.HTTPUploadThroughPutAsMultiPageTIFF=function(g,d,i,f){var j=this,e=-2,h=2;return j.HTTPUploadThroughPutEx(g,e,d,h,i,f)};a.HTTPUploadAllThroughPutAsPDF=function(g,d,i,f){var e=-1,h=4;return this.HTTPUploadThroughPutEx(g,e,d,h,i,f)};a.HTTPUploadThroughPutAsMultiPagePDF=function(g,d,i,f){var j=this,e=-2,h=4;return j.HTTPUploadThroughPutEx(g,e,d,h,i,f)};a.GetSelectedImagesSize=function(e){var f=this,d;d=c.__SetSelectedImages(f,f._UIManager.GetCurrentImageIndex(),f._UIManager.GetSelectedIndexes());if(d){return this._innerFun("GetSelectedImagesSize",c.makeParams(e))}return false}})(Dynamsoft.Lib.html5.STwain,Dynamsoft.Lib.html5.Funs);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: htm5
* final js: build\src.html5.js
*/
(function(b,c){if(!Dynamsoft.Lib.product.bChromeEdition){return}var a=b.prototype;a.RegisterEvent=function(d,f){var e;e=["__",d].join("");this[e]=f;return true};a.onEvent=function(d,e){this.RegisterEvent(d,e)};a.on=function(d,e){this.RegisterEvent(d,e)};a.OnRefreshUI=function(f,e,g){var h=this,d="On RefreshUI";if(g){h._UIManager.refresh(f,e,true)}if(Dynamsoft.Lib.isFunction(h.__OnRefreshUI)){h.__OnRefreshUI(h._UIManager.GetCurrentImageIndex(),e)}return true};a._OnBitmapChanged=function(f){var j=this,e=f[1].split(","),i=f[2],g=f[3],h=f[4],d="OnBitmapChanged:";j.__cIndex=g;j._HowManyImagesInBuffer=h;Dynamsoft.Lib.log(d+f);if(i==1||i==2){Dynamsoft.Lib.each(e,function(l){var m=parseInt(l),k="item_"+m;if(isNaN(m)||m<0){return true}j._UIManager.add(m,h)});if(Dynamsoft.Lib.isFunction(j.__OnRefreshUI)){j.__OnRefreshUI(g,h)}}else{if(i==3){if(e.length==1&&e[0]==-1||h==0){j._UIManager.clear()}else{Dynamsoft.Lib.each(e,function(l,k){var m=parseInt(l);if(isNaN(m)||m<0){return true}j._UIManager.remove(m,g)});if(g>=0&&!j.__bLoadingImage&&j._UIManager.count()>0){j._UIManager.refreshEditor(g,h)}}if(Dynamsoft.Lib.isFunction(j.__OnRefreshUI)){j.__OnRefreshUI(g,h)}}else{if(i==4){Dynamsoft.Lib.each(e,function(l,k){var m=parseInt(l);if(isNaN(m)||m<0){return true}if(m>=0&&!j.__bLoadingImage){j.OnRefreshUI(m,h,true)}})}}}if(Dynamsoft.Lib.isFunction(j.__OnBitmapChanged)){j.__OnBitmapChanged(e,i,g,h)}};a._OnPostLoad=function(d){var l=this,g,k,h,j,e;Dynamsoft.Lib.log("OnPostLoad Results:");j=d[1].split(",");k=Dynamsoft.Lib.base64.decode(j[0]);name=Dynamsoft.Lib.base64.decode(j[1]);Dynamsoft.Lib.log(k);Dynamsoft.Lib.log(name);Dynamsoft.Lib.log(j[2]);c.autoDiscardBlankImage(l,"On PostLoad");e=l.__cIndex;if(e>=0){l.OnRefreshUI(e)}if(Dynamsoft.Lib.isFunction(l.__OnPostLoad)){l.__OnPostLoad(k,name,j[2])}};a._OnPostTransfer=function(d){var e=this;Dynamsoft.Lib.log("On PostTransfer Results:"+d);c.autoDiscardBlankImage(e,"On PostTransfer");if(Dynamsoft.Lib.isFunction(e.__OnPostTransfer)){e.__OnPostTransfer()}};a._OnPostAllTransfers=function(d){var g=this,e=g._UIManager.GetCurrentImageIndex(),f=g._UIManager.count();Dynamsoft.Lib.log("On PostAllTransfers Results:"+d);g.__bLoadingImage=false;g._UIManager.refreshEditor(e,f);if(Dynamsoft.Lib.isFunction(g.__OnPostAllTransfers)){g.__OnPostAllTransfers()}};a._OnResult=function(d){var f=this,e=d[1];if(Dynamsoft.Lib.isFunction(f.__OnResult)){f.__OnResult(e)}};a._OnTransferCancelled=function(d){var g=this,e=g._UIManager.GetCurrentImageIndex(),f=g._UIManager.count();g.__bLoadingImage=false;g._UIManager.refreshEditor(e,f);if(Dynamsoft.Lib.isFunction(g.__OnTransferCancelled)){g.__OnTransferCancelled()}};a._OnTransferError=function(d){var e=this;if(Dynamsoft.Lib.isFunction(e.__OnTransferError)){e.__OnTransferError()}};a._OnSourceUIClose=function(d){var e=this;if(Dynamsoft.Lib.isFunction(e.__OnSourceUIClose)){e.__OnSourceUIClose()}};a._OnPreTransfer=function(d){var e=this;if(Dynamsoft.Lib.isFunction(e.__OnPreTransfer)){e.__OnPreTransfer()}};a._OnPreAllTransfers=function(d){var e=this;if(Dynamsoft.Lib.isFunction(e.__OnPreAllTransfers)){e.__OnPreAllTransfers()}};a._OnPercentDone=function(l){var h=this;var n=false;if((Dynamsoft.Lib.cancelFrome==0&&h.__IfShowProgressBar==true)||(Dynamsoft.Lib.cancelFrome!=0&&h.__IfShowCancelDialogWhenImageTransfer==true)){var k=Dynamsoft.Lib.get("progressBar"),g=Dynamsoft.Lib.get("status"),d=Dynamsoft.Lib.get("finalMessage"),i,j;if(Dynamsoft.Lib.cancelFrome==3||Dynamsoft.Lib.cancelFrome==4){var f=l[3];if(f==0){c.setBtnCancelVisibleForProgress(h,false)}else{if(f==1){c.setBtnCancelVisibleForProgress(h,true)}}}if(l[1]==-1){i=0;Dynamsoft.Lib.progressMessage=l[2];j=Dynamsoft.Lib.progressMessage}else{i=l[1];if(l[2]!=""){j=Dynamsoft.Lib.progressMessage+"("+l[2]+")"}else{j=Dynamsoft.Lib.progressMessage}if(Dynamsoft.Lib.cancelFrome==1||Dynamsoft.Lib.cancelFrome==2){if(l[3]=="http"){n=true}}if(Dynamsoft.Lib.cancelFrome==3||Dynamsoft.Lib.cancelFrome==4){if(l[4]=="ftp"){n=true}}}d.innerHTML=j;if(i){g.innerHTML=(i+"%");k.value=i;if(n==true){if(Dynamsoft.Lib.isFunction(h.__OnInternetTransferPercentage)){h.__OnInternetTransferPercentage(i,false)}if(Dynamsoft.Lib.isFunction(h.__OnInternetTransferPercentageEx)){h.__OnInternetTransferPercentageEx(i,false)}}}if(i&&(i>=100||Dynamsoft.Lib.dlgRef<=0)){if(Dynamsoft.Lib.dlgRef<=0){var e="OnPercentDone";Dynamsoft.Lib.closeProgress(e)}}}if(Dynamsoft.Lib.isFunction(h.__OnPercentDone)){h.__OnPercentDone()}};a._OnGetFilePath=function(d){var k=this,e,j,g,h;h=d[1].split(",");Dynamsoft.Lib.log("On GetFilePath Results:"+d);j=Dynamsoft.Lib.base64.decode(h[3]);name=Dynamsoft.Lib.base64.decode(h[4]);if(Dynamsoft.Lib.isFunction(k.__OnGetFilePath)){k.__OnGetFilePath(h[0],h[1],h[2],j,name)}};a.checkErrorString=function(){var f=this,e=f.ErrorCode;if(e===-2115){return true}if(e===-2003){var d=window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");d.document.writeln(f.__HTTPPostResponseString)}return(e===0)}})(Dynamsoft.Lib.html5.STwain,Dynamsoft.Lib.html5.Funs);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(b,c){if(!Dynamsoft.Lib.product.bChromeEdition){return}var a=b.prototype;b.prototype.ShowImageEditor=function(){var d=this;if(c.isServerInvalid(d)){return false}return d.ShowImageEditorEx(-1,-1,-1,-1,0)};b.prototype.SetCookie=function(d){return this._innerFun("SetCookie",c.makeParams(d))};b.prototype.LoadImageFromBase64Binary=function(d,e){return this._innerFun("LoadImageFromBase64Binary",c.makeParams(d,e))};b.prototype.SaveSelectedImagesToBytes=function(e,d){Dynamsoft.Lib.Errors.HTML5NotSupport(this);return false};b.prototype.LoadImageFromBytes=function(f,d,e){Dynamsoft.Lib.Errors.HTML5NotSupport(this);return false};b.prototype.UnregisterEvent=function(d,f){var e=["__",d].join("");this[e]=null;return true};b.prototype.first=function(){var e=this,d=e._UIManager.count();if(d>0){e._UIManager.getView().Go(0);c.__innerRefreshFromUIView(e,e._UIManager.GetCurrentImageIndex())}return true};b.prototype.previous=function(){var e=this,d=e._UIManager.count();if(d>0){e._UIManager.getView().__Previous();c.__innerRefreshFromUIView(e,e._UIManager.GetCurrentImageIndex())}return true};b.prototype.next=function(){var e=this,d=e._UIManager.count();if(d>0){e._UIManager.getView().__Next();c.__innerRefreshFromUIView(e,e._UIManager.GetCurrentImageIndex())}return true};b.prototype.last=function(){var e=this,d=e._UIManager.count();if(d>0){e._UIManager.getView().Go(d-1);c.__innerRefreshFromUIView(e,e._UIManager.GetCurrentImageIndex())}return true};b.prototype.SetCancel=function(e,d){return this._innerSend("SetCancel",null,true,e,d)};b.prototype.SetImageWidth=function(d,e){return this._innerFun("SetImageWidth",c.makeParams(d,e))};b.prototype.HttpDownloadStreamThroughPost=function(e,d){Dynamsoft.Lib.Errors.HTML5NotSupport(this);return false};b.prototype.HttpUploadStreamThroughPost=function(g,f,d,h,e){Dynamsoft.Lib.Errors.HTML5NotSupport(this);return false};b.prototype.HttpDownloadThroughPost=function(n,d,h,m,f){var i=this,e=c.combineUrl(i,n,d),k,j;if(e===false){Dynamsoft.Lib.Errors.ParameterCannotEmpty(i);return false}if(c.isServerInvalid(i)){if(Dynamsoft.Lib.isFunction(f)){f(i.ErrorCode,i.ErrorString)}return false}Dynamsoft.Lib.cancelFrome=2;Dynamsoft.Lib.showProgress(i,"HttpDownloadThroughPost",true);k="post";var l=function(o){var q=(o.total===0)?100:Math.round(o.loaded*100/o.total),r=[o.loaded," / ",o.total].join("");i._OnPercentDone([0,q,"","http"])},g=true;i._OnPercentDone([0,-1,"HTTP Downloading...","http"]);if(!Dynamsoft.Lib.isFunction(m)){g=false}j=c.loadHttpBlob(i,k,e,g,function(o){i._OnPercentDone([0,-1,"Loading..."]);var q="",p=h;if(p<-1||p>5){p=-1}i.__LoadImageFromBytes(o,p,q,g,m,f)},function(){Dynamsoft.Lib.closeProgress("HttpDownloadThroughPost");if(Dynamsoft.Lib.isFunction(f)){f(i.ErrorCode,i.ErrorString)}},l);return j};b.prototype.HTTPDownloadEx=function(f,e,g,h,d){var i=this;return i.HTTPDownloadThroughGet(f,e,g,h,d)};b.prototype.HTTPDownloadThroughGet=function(n,d,h,m,f){var i=this,e=c.combineUrl(i,n,d),k,j;if(e===false){Dynamsoft.Lib.Errors.ParameterCannotEmpty(i);return false}if(c.isServerInvalid(i)){if(Dynamsoft.Lib.isFunction(f)){f(i.ErrorCode,i.ErrorString)}return false}Dynamsoft.Lib.cancelFrome=2;k="get";Dynamsoft.Lib.showProgress(i,"HTTPDownloadThroughGet",true);var l=function(o){var q=(o.total===0)?100:Math.round(o.loaded*100/o.total),r=[o.loaded," / ",o.total].join("");i._OnPercentDone([0,q,"","http"])},g=true;i._OnPercentDone([0,-1,"HTTP Downloading...","http"]);if(!Dynamsoft.Lib.isFunction(m)){g=false}j=c.loadHttpBlob(i,k,e,g,function(o){i._OnPercentDone([0,-1,"Loading..."]);var q="",p=h;if(p<-1||p>5){p=-1}i.__LoadImageFromBytes(o,p,q,g,m,f)},function(){Dynamsoft.Lib.closeProgress("HTTPDownloadThroughGet");if(Dynamsoft.Lib.isFunction(f)){f(i.ErrorCode,i.ErrorString)}},l);return j};b.prototype.SetCustomDSDataEx=function(d){return this._innerFun("SetCustomDSDataEx",c.makeParams(d))};b.prototype.SetCustomDSData=function(d){var e=c.replaceLocalFilename(d);return this._innerFun("SetCustomDSData",c.makeParams(e))};b.prototype.GetCustomDSDataEx=function(){return this._innerFun("GetCustomDSDataEx")};b.prototype.GetCustomDSData=function(d){var e=c.replaceLocalFilename(d);return this._innerFun("GetCustomDSData",c.makeParams(e))};b.prototype.ChangeBitDepth=function(e,d,f){return this._innerFun("ChangeBitDepth",c.makeParams(e,d,f))};b.prototype.ConvertToGrayScale=function(d){return this._innerFun("ConvertToGrayScale",c.makeParams(d))};b.prototype.ShowImageEditorEx=function(e,i,d,h,f){var g=this;return g._UIManager.ShowImageEditorEx(e,i,d,h,f)};b.prototype.ClearTiffCustomTag=function(){return this._innerFun("ClearTiffCustomTag")};b.prototype.SetTiffCustomTag=function(e,d,f){return this._innerFun("SetTiffCustomTag",c.makeParams(e,d,f))};b.prototype.IsBlankImage=function(d){return this._innerFun("IsBlankImage",c.makeParams(d,false))};b.prototype.IsBlankImageExpress=function(d){return this._innerFun("IsBlankImage",c.makeParams(d,true))};b.prototype.GetVersionInfoAsync=function(e,d){return this._innerSend("VersionInfo",null,true,e,d)}})(Dynamsoft.Lib.html5.STwain,Dynamsoft.Lib.html5.Funs);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(b){if(!b.product.bChromeEdition){return}var a=true,d=false,e={output:function(f){}};function c(f){var g=this;g._maxPosition=0;g._currentPosition=0;g._PagePositionSize=1;g._track=1;g.Horizontal=d;g.Width=16;g.Height=-1;g.Left=0;g.Top=0;g.Right=0+g.Width;g.Bottom=0+g.Height;g.bgColor="#D4D0C8";g.boxOuterBorderLightColor="#D4D0C8";g.boxOuterBorderDarkColor="#404040";g.boxInnerBorderLightColor="#FFFFFF";g.boxInnerBorderDarkColor="#808080";g.arrowColor="#D4D0C8";g.arrowHoverColor="#BBBBBB";g.slideColor="#D4D0C8";g.draggingColor="#BBBBBB";g.hoverColor="#D4D0C8";g.arrowSize=g.Width;g.scrollSize=-1;g.scrollZeroPos=g.arrowSize;g.slideSize=-1;g.minslideSize=18;g.dragging=d;g.mousePos_StartDrag={x:-1,y:-1};g.mousePos_Dragging={x:-1,y:-1};g.mousePos={x:-1,y:-1};g.bFocus=d;g.borderWidth=1;g.borderStyle=0;g.canvas=d;g.bFloatValue=a;g.__init(f)}c.prototype.__changeSizeForData=function(g,f){var h=this;h.Width=g;h.Height=f;if(h.Horizontal){h.scrollSize=h.Width-2*h.Height;h.arrowSize=h.Height}else{h.scrollSize=h.Height-2*h.Width;h.arrowSize=h.Width}h.scrollZeroPos=h.arrowSize;if(h.canvas){h.canvas.width=g;h.canvas.height=f}};c.prototype.__init=function(f){var h=this,g=window.document;if(f.MaxValue){h._maxPosition=f.MaxValue}if(f.Value){h.SetPosition(f.Value)}h.Horizontal=f.Horizontal;h.__changeSizeForData(f.Width,f.Height);h.canvas=document.createElement("canvas");h.canvas.width=h.Width;h.canvas.height=h.Height;h.canvas.onselectstart=function(){return d};Dynamsoft.Lib.addEventListener(h.canvas,"mousedown",function(i){h.onMouseDown(i);b.stopPropagation(i)});Dynamsoft.Lib.addEventListener(h.canvas,"mouseenter",function(i){h.bFocus=a});Dynamsoft.Lib.addEventListener(h.canvas,"mouseleave",function(i){h.bFocus=d});h.onValueChanged=f.onValueChanged};c.prototype.InitScroll=function(f,g){var i=this,h=0;if(f>=g&&g>=0){i._PagePositionSize=g;h=(f-g);i.SetMaxPosition(h);return a}return d};c.prototype.GetPagePositionSize=function(){var f=this;return f._PagePositionSize};c.prototype.SetPagePositionSize=function(f){var g=this;g._PagePositionSize=f;return a};c.prototype.__getCurrentPage=function(){var f=this;return f._currentPosition/f._PagePositionSize};c.prototype.GetMaxPage=function(){var f=this;return f._maxPosition/f._PagePositionSize-1};c.prototype.GetCurrentPosition=function(){var f=this;return f._currentPosition};c.prototype.SetPosition=function(f){var h=this,g=f;if(b.isUndefined(f)||b.isNaN(f)){f=0}if(g<0){g=0}else{if(g>h._maxPosition){g=h._maxPosition}}h._currentPosition=g};c.prototype.GetEL=function(){return this.canvas};c.prototype.Refresh=function(){this.__drawScroll();return a};c.prototype.ChangeControlSize=function(g,f){var h=this;h.__changeSizeForData(g,f);h.__drawFrame();h.__drawScroll()};c.prototype.GetControlHeight=function(){return this.Height};c.prototype.GetControlWidth=function(){return this.Width};c.prototype.onMouseDown=function(q){var l=this,h=b.DOM.getOffset(q),i=d,o,j,p,k,m,n;e.output("mouse down"+h.x+" "+h.y);if(l.Horizontal){m=h.x}else{m=h.y}if(m<=l.arrowSize){n=l._currentPosition;l.__click_previous();if(n!=l._currentPosition){l.__fireEvent("onValueChanged",{Value:l._currentPosition,EventName:"onPrevious"})}}else{if(m>=l.scrollSize+l.arrowSize){n=l._currentPosition;l.__click_next();if(n!=l._currentPosition){l.__fireEvent("onValueChanged",{Value:l._currentPosition,EventName:"onNext"})}}else{n=l._currentPosition;o=l.__getPosDirection(h.x,h.y);if(o<0){l.PageUp();if(n!=l._currentPosition){l.__fireEvent("onValueChanged",{Value:l._currentPosition,EventName:"onPageUp"})}}else{if(o>0){l.PageDown();if(n!=l._currentPosition){l.__fireEvent("onValueChanged",{Value:l._currentPosition,EventName:"onPageDown"})}}else{i=a}}}}if(i){l.dragging=a;l.canvas.style.cursor="default";l.mousePos_StartDrag.x=h.x;l.mousePos_StartDrag.y=h.y;l.mousePos_Dragging.x=h.x;l.mousePos_Dragging.y=h.y;var g,f,r=q||event;disX=r.clientX;disY=r.clientY;if(l.canvas.setCapture){g=l.canvas;l.canvas.setCapture()}else{g=document}onMouseMove=function(u){var t=u||event,v={x:0,y:0};v.x=l.mousePos_StartDrag.x+t.clientX-disX;v.y=l.mousePos_StartDrag.y+t.clientY-disY;e.output("onMouseMove: "+v.x+" "+v.y);if(l.dragging){var s=l.__caculateDraggingNewPosition(v.x,v.y);if(s!=l._currentPosition){l.SetPosition(s);l.__fireEvent("onValueChanged",{Value:l._currentPosition,EventName:"onMouseMoving"})}l.__drawScroll("mousemove")}};onMouseUp=function(u){var t=u||event,v={x:0,y:0};v.x=l.mousePos_StartDrag.x+t.clientX-disX;v.y=l.mousePos_StartDrag.y+t.clientY-disY;e.output("onMouseUp: "+v.x+" "+v.y);if(l.canvas.releaseCapture){l.canvas.releaseCapture()}Dynamsoft.Lib.removeEventListener(g,"mouseup",onMouseUp);Dynamsoft.Lib.removeEventListener(g,"mousemove",onMouseMove);if(l.dragging){var s=l.__caculateDraggingNewPosition(v.x,v.y);if(s!=l._currentPosition){l.SetPosition(s);l.__drawScroll();l.__fireEvent("onValueChanged",{Value:l._currentPosition,EventName:"onMouseUp"})}l.dragging=d;l.mousePos_StartDrag.x=-1;l.mousePos_StartDrag.y=-1}};Dynamsoft.Lib.addEventListener(g,"mouseup",onMouseUp);Dynamsoft.Lib.addEventListener(g,"mousemove",onMouseMove);l.__drawScroll("mousedown")}};c.prototype.GetScrollDelta=function(g){var i=this,f,h;f=i.__caculateSlideSize();h=g*f;return h};c.prototype.ManualMoving=function(h){var g=this,f;e.output("ManualMoving: "+[g._currentPosition,h].join(","));if(b.isUndefined(h)||b.isNaN(h)||b.isUndefined(g._currentPosition)||b.isNaN(g._currentPosition)){return}f=g._currentPosition;g.SetPosition(g._currentPosition+h);if(f!=g._currentPosition){g.__fireEvent("onValueChanged",{Value:g._currentPosition,EventName:"onMouseMoving"})}g.__drawScroll("mousemove")};c.prototype.ManualMovingScroll=function(j){var i=this,h=0,f,g;g=i._currentPosition;f=i.__caculateSlideSize();h=i._currentPosition+(i._PagePositionSize*j/f);e.output("ManualMovingScroll: "+[j,f,j/f,i._currentPosition,h].join(","));i.SetPosition(h);if(g!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:i._currentPosition,EventName:"onMouseMoving"})}i.__drawScroll("mousemove")};c.prototype.handlerKeyDown=function(g){var i=this,f=a,h;if(!i.bFocus){return f}h=i._currentPosition;switch(g.keyCode){case 37:if(i.Horizontal){f=d;i.Previous();if(h!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:i._currentPosition,EventName:"onPrevious"})}}break;case 39:if(i.Horizontal){f=d;i.Next();if(h!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:i._currentPosition,EventName:"onNext"})}}break;case 38:if(!i.Horizontal){f=d;i.Previous();if(h!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:i._currentPosition,EventName:"onPrevious"})}}break;case 40:if(!i.Horizontal){f=d;i.Next();if(h!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:i._currentPosition,EventName:"onNext"})}}break;case 33:f=d;i.PageUp();if(h!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:i._currentPosition,EventName:"onPageUp"})}break;case 34:f=d;i.PageDown();if(h!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:i._currentPosition,EventName:"onPageDown"})}break;case 35:f=d;i.GoPosition(i._maxPosition);if(h!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:i._currentPosition,EventName:"onEnd"})}break;case 36:f=d;i.GoPosition(0);if(h!=i._currentPosition){i.__fireEvent("onValueChanged",{Value:0,EventName:"onBegin"})}break;default:break}return f};c.prototype.__click_previous=function(){var g=this,f;e.output("__click_previous from mouse click arrow");g.GoPosition(g._currentPosition-g._track,200);if(g.canvas){f=g.canvas.getContext("2d");g.__redrawUpOrLeftArrow(f,a)}};c.prototype.__click_next=function(){var g=this,f;e.output("__click_next from mouse click arrow");g.GoPosition(g._currentPosition+g._track,200);if(g.canvas){f=g.canvas.getContext("2d");g.__redrawDownOrRightArrow(f,a)}};c.prototype.Previous=function(){var f=this;e.output("previous");f.GoPosition(f._currentPosition-f._track)};c.prototype.Next=function(){var f=this;e.output("next");f.GoPosition(f._currentPosition+f._track)};c.prototype.PageUp=function(){var f=this;e.output("pageUp");f.GoPosition(f._currentPosition-f._PagePositionSize)};c.prototype.PageDown=function(){var f=this;e.output("pageDown");f.GoPosition(f._currentPosition+f._PagePositionSize)};c.prototype.GetMaxPosition=function(){return this._maxPosition};c.prototype.SetMaxPosition=function(f){var g=this;if(b.isUndefined(f)||b.isNaN(f)){g._maxPosition=0;g._currentPosition=0;return}g._maxPosition=f;if(g._maxPosition<0){g._maxPosition=0}if(g._currentPosition<0){g._currentPosition=0}else{if(g._currentPosition>g._maxPosition){g._currentPosition=g._maxPosition}}};c.prototype.GoPage=function(g){var h=this,f;e.output("go page: "+g);f=g*h._PagePositionSize;return h.GoPosition(f)};c.prototype.GoPosition=function(f,h){var i=this,g;e.output("go position: "+f);i.SetPosition(f);if(h&&h>0){setTimeout(function(){i.__drawScroll()},h)}else{i.__drawScroll()}};c.prototype.__drawBoxBorder=function(r,f,l,q,m,o,u){var t=this,k,j,v,n,A,h,z,w,s,g,B;w=Math.floor(f);s=Math.floor(l);g=Math.floor(q);B=Math.floor(m);A=r.getImageData(w,s,g,B);n=A.data;h=t.__getHexColor(o);z=t.__getHexColor(u);v=0;for(k=0;k<g;k++){n[v]=h[0];n[v+1]=h[1];n[v+2]=h[2];v+=4}k=0;for(j=0;j<B;j++){v=(j*g+k)*4;n[v]=h[0];n[v+1]=h[1];n[v+2]=h[2]}for(j=0;j<B;j++){k=g-1;v=(j*g+k)*4;n[v]=z[0];n[v+1]=z[1];n[v+2]=z[2]}v=(B-1)*g*4;for(k=0;k<g;k++){n[v]=z[0];n[v+1]=z[1];n[v+2]=z[2];v+=4}r.putImageData(A,w,s)};c.prototype.__drawUpTriangle=function(z,j,s){var o=this,t,r,m,g,f,q,u=9,n=4,A,v,k,l;A=Math.floor(j);v=Math.floor(s);k=Math.floor(u);l=Math.floor(n);f=z.getImageData(A,v,k,l);g=f.data;for(r=0;r<4;r++){t=4-r;q=t+1+2*r;m=(r*u+t)*4;while(t<q){g[m]=g[m+1]=g[m+2]=0;t++;m+=4}}z.putImageData(f,j,s)};c.prototype.__drawDownTriangle=function(z,j,s){var o=this,t,r,m,g,f,q,u=9,n=4,A,v,k,l;A=Math.floor(j);v=Math.floor(s);k=Math.floor(u);l=Math.floor(n);f=z.getImageData(A,v,k,l);g=f.data;for(r=0;r<4;r++){t=r;q=t+7-2*r;m=(r*u+t)*4;while(t<q){g[m]=g[m+1]=g[m+2]=0;t++;m+=4}}z.putImageData(f,j,s)};c.prototype.__drawLeftTriangle=function(z,j,s){var o=this,t,r,m,g,f,q,u=4,n=7,A,v,k,l;A=Math.floor(j);v=Math.floor(s);k=Math.floor(u);l=Math.floor(n);f=z.getImageData(A,v,k,l);g=f.data;for(r=0;r<n;r++){if(r>3){t=r-3}else{t=3-r}m=(r*u+t)*4;while(t<u){g[m]=g[m+1]=g[m+2]=0;t++;m+=4}}z.putImageData(f,j,s)};c.prototype.__drawRightTriangle=function(v,j,r){var o=this,s,q,m,g,f,t=4,n=7,z,u,k,l;z=Math.floor(j);u=Math.floor(r);k=Math.floor(t);l=Math.floor(n);f=v.getImageData(z,u,k,l);g=f.data;for(q=0;q<n;q++){s=0;if(q>3){max=7-q}else{max=q+1}m=(q*t+s)*4;while(s<max){g[m]=g[m+1]=g[m+2]=0;s++;m+=4}}v.putImageData(f,j,r)};c.prototype.__drawBox=function(s,i,o,f,r,p,n,h,l,q){var m=this,g=0,j,k;j=Math.floor(f);k=Math.floor(r);s.fillStyle=p;s.fillRect(i,o,j,k);s.lineWidth=m.borderWidth;b.drawBoxBorder(s,i+g,o+g,j-g,k-g,n,h);i+=m.borderWidth;o+=m.borderWidth;j-=2*m.borderWidth;k-=2*m.borderWidth;b.drawBoxBorder(s,i+g,o+g,j-g,k-g,l,q)};c.prototype.__drawBackground=function(t,r,m){var n=this,q,o,l,g,f,u,s,j,k;t.fillStyle=n.bgColor;if(n.Width>0&&n.Height>0){t.fillRect(n.borderWidth,n.borderWidth,n.Width-2*n.borderWidth,n.Height-2*n.borderWidth);u=0;s=0;j=Math.floor(r);k=Math.floor(m);f=t.getImageData(u,s,j,k);g=f.data;for(o=0;o<m;o++){q=(o%2);l=(o*r+q)*4;while(q<r){g[l]=g[l+1]=g[l+2]=255;q+=2;l+=8}}t.putImageData(f,0,0)}};c.prototype.__drawUpButton=function(f,g){var i=this,h;if(g){h=i.arrowHoverColor}else{h=i.arrowColor}i.__drawBox(f,0,0,i.arrowSize,i.arrowSize,h,i.boxOuterBorderLightColor,i.boxOuterBorderDarkColor,i.boxInnerBorderLightColor,i.boxInnerBorderDarkColor);i.__drawUpTriangle(f,3,6,i.arrowColor)};c.prototype.__drawDownButton=function(f,g){var i=this,h;if(g){h=i.arrowHoverColor}else{h=i.arrowColor}i.__drawBox(f,0,i.Height-i.arrowSize,i.arrowSize,i.arrowSize,h,i.boxOuterBorderLightColor,i.boxOuterBorderDarkColor,i.boxInnerBorderLightColor,i.boxInnerBorderDarkColor);i.__drawDownTriangle(f,4,i.Height-10,i.arrowColor)};c.prototype.__drawLeftButton=function(f,g){var i=this,h;if(g){h=i.arrowHoverColor}else{h=i.arrowColor}i.__drawBox(f,0,0,i.arrowSize,i.arrowSize,h,i.boxOuterBorderLightColor,i.boxOuterBorderDarkColor,i.boxInnerBorderLightColor,i.boxInnerBorderDarkColor);i.__drawLeftTriangle(f,5,4,i.arrowColor)};c.prototype.__drawRightButton=function(f,g){var i=this,h;if(g){h=i.arrowHoverColor}else{h=i.arrowColor}i.__drawBox(f,i.Width-i.arrowSize,0,i.arrowSize,i.arrowSize,h,i.boxOuterBorderLightColor,i.boxOuterBorderDarkColor,i.boxInnerBorderLightColor,i.boxInnerBorderDarkColor);i.__drawRightTriangle(f,i.Width-10,4,i.arrowColor)};c.prototype.__drawFrame=function(){var h=this,f,g=d;if(h.canvas){f=h.canvas.getContext("2d");f.clearRect(0,0,h.Width,h.Height);h.__drawBackground(f,h.Width,h.Height);h.__redrawUpOrLeftArrow(f,g);h.__redrawDownOrRightArrow(f,g)}};c.prototype.__redrawUpOrLeftArrow=function(f,g){var h=this;if(h.Horizontal){h.__drawLeftButton(f,g)}else{h.__drawUpButton(f,g)}};c.prototype.__redrawDownOrRightArrow=function(f,g){var h=this;if(h.Horizontal){h.__drawRightButton(f,g)}else{h.__drawDownButton(f,g)}};c.prototype.__drawScroll=function(l){var m=this,g=0,f,j,k=l||"",h,i;if(m._maxPosition>0&&m.canvas){m.canvas.style.display="";j=m.__caculateSlideSize();f=Math.ceil(m.scrollZeroPos+m._currentPosition*j/m._PagePositionSize);e.output("__drawScroll: "+[f,m.__getCurrentPage(),j].join(","));h=m.canvas.getContext("2d");m.__drawFrame();if(k=="mousedown"||k=="mousemove"){i=m.bgColor}else{i=m.bgColor}if(m.Horizontal){m.__drawBox(h,f,0,m.slideSize,m.Height,i,m.boxOuterBorderLightColor,m.boxOuterBorderDarkColor,m.boxInnerBorderLightColor,m.boxInnerBorderDarkColor)}else{m.__drawBox(h,0,f,m.Width,m.slideSize,i,m.boxOuterBorderLightColor,m.boxOuterBorderDarkColor,m.boxInnerBorderLightColor,m.boxInnerBorderDarkColor)}}else{if(m.canvas){m.canvas.style.display="none"}}};c.prototype.__caculateDraggingNewPosition=function(f,l){var k=this,g,i=0,j=0,h;g=k.__caculateSlideSize();slidePos=k.__caculateSlidePos();if(k.Horizontal){startPos=f-k.arrowSize;j=f-k.mousePos_Dragging.x;h=f}else{startPos=l-k.arrowSize;j=l-k.mousePos_Dragging.y;h=l}e.output("__caculateDraggingNewPosition: "+[k._currentPosition,k._PagePositionSize,j,g].join(","));i=k._currentPosition+(k._PagePositionSize*j/g);if(i<0){i=0}if(i>k._maxPosition){i=k._maxPosition}k.mousePos_Dragging.x=f;k.mousePos_Dragging.y=l;return i};c.prototype.__getPosDirection=function(g,j){var i=this,f,h;f=i.__caculateSlidePos();if(i.Horizontal){h=g}else{h=j}if(h<f.start){return -1}else{if(h<=f.end){return 0}else{return 1}}};c.prototype.__caculateSlidePos=function(){var i=this,h={start:0,end:0},g,f;g=i.__caculateSlideSize();f=i.scrollSize+i.arrowSize;h.start=i.__getCurrentPage()*g+i.arrowSize;h.end=h.start+i.slideSize;if(h.end>=f){h.end=f;h.start=f-i.slideSize}return h};c.prototype.__caculateSlideSize=function(){var h=this,f,g;g=h.scrollSize;if(h._maxPosition>0&&g>0){h.slideSize=g*(h._PagePositionSize/(h._maxPosition+h._PagePositionSize));if(h.slideSize<h.minslideSize){h.slideSize=h.minslideSize;f=(g-h.slideSize)*h._PagePositionSize/(h._maxPosition)}else{f=h.slideSize}}return f};c.prototype.__fireEvent=function(f,g){var h=this;if(b.isFunction(h[f])){return h[f](g)}return a};c.prototype.SetVisible=function(f){var g=this;if(g.canvas){if(f){g.canvas.style.display="";g.__drawFrame();g.__drawScroll()}else{g._maxPosition=0;g._currentPosition=0;g.canvas.style.display="none"}}};c.prototype.GetVisible=function(){var f=this;if(f.canvas){if(f.canvas.style.display=="none"){return d}else{return a}}return d};c.prototype.Destroy=function(){var f=this;f._maxPosition=0;f._currentPosition=0};c.prototype.SetLocation=function(f,h){var g=this;g.Left=f;g.Top=h;g.Right=f+g.Width;g.Bottom=f+g.Height;if(g.canvas){if(g.canvas.parentNode){g.canvas.parentNode.style.position="relative"}g.canvas.style.position="absolute";g.canvas.style.left=f+"px";g.canvas.style.top=h+"px"}};Dynamsoft.Lib.UI=Dynamsoft.Lib.UI||{};Dynamsoft.Lib.UI.ScrollBar=c})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(a){if(!a.product.bChromeEdition){return}var b={output:function(d){}};function c(d){var e=this;e.__controlWidth=0;e.__controlHeight=0;e.drawWidth=0;e.drawHeight=0;e.Left=0;e.Top=0;e.Right=0;e.Bottom=0;e.imageControl=d;e.__mousedownStatus=0;e.mouse_zero_x=-1;e.mouse_zero_y=-1;e.mouse_x=0;e.mouse_y=0;e.selectedCanvasArea={left:0,top:0,right:0,bottom:0};e.canvas=false;e.lastClick=false}c.prototype.GetEL=function(){var d=this;if(!d.canvas){d.canvas=document.createElement("canvas");d.canvas.style.position="absolute";d.canvas.style.left="0";d.canvas.style.top="0"}return d.canvas};c.prototype.ChangeControlSize=function(e,d){var g=this,f;g.__controlWidth=e;g.__controlHeight=d;if(g.canvas){g.canvas.width=g.__controlWidth;g.canvas.height=g.__controlHeight}};c.prototype.SetDrawImageLocationAndSize=function(g,f,e,d){var h=this;b.output("SetLocationAndSize: "+[g,f,e,d].join(","));h.drawWidth=e;h.drawHeight=d;h.Left=g;h.Top=f;h.Right=h.Left+h.drawWidth;h.Bottom=h.Top+h.drawHeight};c.prototype.__fireEvent=function(d,e){var f=this;if(a.isFunction(f[d])){return f[d](e)}return true};c.prototype.__GetMouseShape=function(){var d=this;return d.imageControl.bMouseHand};c.prototype.__GetSelectionRectAspectRatio=function(){var d=this;return d.imageControl.__fSelectionRectAspectRatio};c.prototype.__restoreCanvas=function(e,d,f){var g=this;e.canvas.width=d;e.canvas.height=f};c.prototype.__draw_dashRect=function(e,j,d,k){var h=this,m=h.canvas.getContext("2d"),i=h.drawWidth,o=h.drawHeight,n=e,l=j,f=d,g=k;if(!h.canvas){return}b.output("__select_rect: "+[e,j,d,k].join(","));if(f<0){}if(f>i){f=i}if(g<0){}if(g>o){g=o}if(n<0){n=0}else{if(n+f>i){f=i-n}}if(l<0){l=0}else{if(l+g>o){g=o-l}}m=h.canvas.getContext("2d");h.__restoreCanvas(m,m.canvas.width,m.canvas.height);if(f>0&&g>0){m.__dashedLineRect(n+h.Left,l+h.Top,f,g)}};c.prototype.SetSelectedArea=function(f,n,o,e,h){var l=this,q=l.canvas.getContext("2d"),s,p,d,k,g,i,m=l.drawWidth,r=l.drawHeight,j=false;b.output("SetSelectedArea: "+[f,n,o,e].join(","));if(!l.canvas){return false}if(f<o){s=f;d=o}else{s=o;d=f}if(n<e){p=n;k=e}else{p=e;k=n}if(s<0){s=0}if(p<0){p=0}g=d-s;i=k-p;if(g>m){g=m;d=s+g}if(i>r){i=r;k=p+i}if(f>m||n>r){j=true}else{if(Math.abs(g)+Math.abs(i)<=5){j=true}}if(j){s=l.selectedCanvasArea.left;p=l.selectedCanvasArea.top;d=l.selectedCanvasArea.right;k=l.selectedCanvasArea.bottom;if(s==0&&p==0&&d==0&&k==0){}else{l.selectedCanvasArea.left=0;l.selectedCanvasArea.top=0;l.selectedCanvasArea.right=0;l.selectedCanvasArea.bottom=0;l.__restoreCanvas(q,q.canvas.width,q.canvas.height);if(h){l.__fireEvent("onImageAreaDeSelected")}}}else{l.selectedCanvasArea.left=s;l.selectedCanvasArea.top=p;l.selectedCanvasArea.right=d;l.selectedCanvasArea.bottom=k;l.__draw_dashRect(s,p,g,i);if(h&&(l.__mousedownStatus==0)){l.__fireEvent("onImageAreaSelected",{left:s,top:p,right:d,bottom:k,fromScroll:false})}}return true};c.prototype.ReFireSelectedEventWhenImageMoved=function(){var h=this,e,f,g,d;e=h.selectedCanvasArea.left;f=h.selectedCanvasArea.top;g=h.selectedCanvasArea.right;d=h.selectedCanvasArea.bottom;if(e!=0&&f!=0&&g!=0&&d!=0){h.__fireEvent("onImageAreaSelected",{left:e,top:f,right:g,bottom:d,fromScroll:true})}};c.prototype.SetMouseShape=function(d){var j=this,e,g,h,i,f;if(j.canvas){e=j.canvas.getContext("2d");if(d){j.canvas.style.cursor="pointer";g=j.selectedCanvasArea.left;h=j.selectedCanvasArea.top;i=j.selectedCanvasArea.right;f=j.selectedCanvasArea.bottom;if(g==0&&h==0&&i==0&&f==0){}else{j.SetSelectedArea(0,0,0,0,true)}}else{j.canvas.style.cursor="crosshair"}}};c.prototype.Destroy=function(){var e=this,d;b.output("Destroy:");if(e.canvas){d=e.canvas.parentNode;if(d){d.removeChild(e.canvas)}}};c.prototype.__movingRect=function(){};c.prototype.BindEvents=function(){var f=this,e;e=f.canvas.getContext("2d");var d=function(n){var p,o,g,j,m,h=true;p=f.mouse_zero_x;o=f.mouse_zero_y;g=f.mouse_x;j=f.mouse_y;m=f.__GetSelectionRectAspectRatio();if(m>0){var k,i,l=1;if(m<1){i=j-o;k=i*m;if(g>p&&j>o||g<p&&j<o){g=p+k;l=-1}else{if(g>p&&j<o||g<p&&j>o){g=p-k}}if(g>f.drawWidth||g<0){if(g>f.drawWidth){g=f.drawWidth}else{if(g<0){g=0}}k=l*(p-g);i=k/m;j=o+i}}else{k=g-p;i=k/m;if(g>p&&j>o||g<p&&j<o){j=o+i;l=-1}else{if(g>p&&j<o||g<p&&j>o){j=o-i}}if(j>f.drawHeight||j<0){if(j>f.drawHeight){j=f.drawHeight}else{if(j<0){j=0}}i=l*(o-j);k=i*m;g=p+k}}}f.SetSelectedArea(p,o,g,j,true)};Dynamsoft.Lib.addEventListener(f.canvas,"mousemove",function(h){var g;g=a.DOM.getOffset(h,f);if(g.x<0){g.x=0}else{if(g.x>f.drawWidth){g.x=f.drawWidth}}if(g.y<0){g.y=0}else{if(g.y>f.drawHeight){g.y=f.drawHeight}}if(f.__mousedownStatus){if(g.x==f.mouse_zero_x&&g.y==f.mouse_zero_y){return}}f.mouse_x=g.x;f.mouse_y=g.y;f.__fireEvent("onMouseMove",{e:h,dragging:(f.__mousedownStatus!=0),x:g.x,y:g.y,origX:f.mouse_zero_x,origY:f.mouse_zero_y});if(!f.__GetMouseShape()){if(f.__mousedownStatus){d()}}});Dynamsoft.Lib.addEventListener(f.canvas,"mousedown",function(j){var i,h=new Date(),g;f.__mousedownStatus=1;if(f.lastClick){g=h.getTime()-f.lastClick.getTime()}f.lastClick=h;i=a.DOM.getOffset(j,f);if(i.x<0){i.x=0}else{if(i.x>f.drawWidth){i.x=f.drawWidth}}if(i.y<0){i.y=0}else{if(i.y>f.drawHeight){i.y=f.drawHeight}}b.output("click on selector canvase: "+[i.x,i.y].join(","));f.SetSelectedArea(0,0,0,0,true);f.mouse_zero_x=parseInt(i.x);f.mouse_zero_y=parseInt(i.y);if(g<500){f.__fireEvent("onMouseDoubleClick",{e:j,x:i.x,y:i.y});f.lastClick=false}else{if(j.which?j.which==3:j.button==2){f.__fireEvent("onMouseRightClick",{e:j,x:i.x,y:i.y})}else{f.__fireEvent("onMouseClick",{e:j,x:i.x,y:i.y})}}a.stopPropagation(j)});Dynamsoft.Lib.addEventListener(window,"mouseup",function(j){var h;if(f.mouse_zero_x<0&&f.mouse_zero_y<0){f.__mousedownStatus=0;f.mouse_zero_x=-1;f.mouse_zero_y=-1;return}h=a.DOM.getOffset(j,f);if(h.x<0){h.x=0}else{if(h.x>f.drawWidth){h.x=f.drawWidth}}if(h.y<0){h.y=0}else{if(h.y>f.drawHeight){h.y=f.drawHeight}}if(f.__mousedownStatus){f.__mousedownStatus=0;if(!f.__GetMouseShape()){var i=h.x-f.mouse_zero_x,g=h.y-f.mouse_zero_y;if(Math.abs(i)<3&&Math.abs(g)<3){}else{d(true)}}}f.mouse_zero_x=-1;f.mouse_zero_y=-1;f.__fireEvent("onMouseUp",{e:j,x:-1,y:-1,out:true})});Dynamsoft.Lib.addEventListener(f.canvas,"mouseup",function(j){var h;if(f.mouse_zero_x<0&&f.mouse_zero_y<0){f.__mousedownStatus=0;f.mouse_zero_x=-1;f.mouse_zero_y=-1;return}h=a.DOM.getOffset(j,f);if(h.x<0){h.x=0}else{if(h.x>f.drawWidth){h.x=f.drawWidth}}if(h.y<0){h.y=0}else{if(h.y>f.drawHeight){h.y=f.drawHeight}}f.mouse_x=h.x;f.mouse_y=h.y;f.__mousedownStatus=0;if(f.__GetMouseShape()){f.__restoreCanvas(e,e.canvas.width,e.canvas.height)}else{var i=h.x-f.mouse_zero_x,g=h.y-f.mouse_zero_y;if(Math.abs(i)<3&&Math.abs(g)<3){}else{d();f.__fireEvent("onMouseUp",{e:j,x:h.x,y:h.y,out:false})}}f.mouse_zero_x=-1;f.mouse_zero_y=-1;a.stopPropagation(j)});Dynamsoft.Lib.addEventListener(f.canvas,"dblclick",function(g){})};c.prototype.__isInSelectedArea=function(i){var h=this,e,f,g,d;e=h.selectedCanvasArea.left;f=h.selectedCanvasArea.top;g=h.selectedCanvasArea.right;d=h.selectedCanvasArea.bottom;b.output("__deselectWhenMouseClick: "+[i.x,i.y,h.selectedCanvasArea.left,h.selectedCanvasArea.top,h.selectedCanvasArea.right,h.selectedCanvasArea.bottom].join(","));if(e==0&&f==0&&g==0&&d==0){return false}if((i.x>=e&&i.x<=g)&&(i.y>=f&&i.y<=d)){return true}return false};Dynamsoft.Lib.UI=Dynamsoft.Lib.UI||{};Dynamsoft.Lib.UI.ImageAreaSelector=c})(Dynamsoft.Lib);(function(a){if(!a.product.bChromeEdition){return}CanvasRenderingContext2D.prototype.__dashedLineRect=function(n,j,c,o,f){if(typeof f==="undefined"){f=3}var l=[n,n,n+c,n];var k=[j,j,j,j+o];var m=[n+c,n,n+c,n+c];var h=[j,j+o,j+o,j+o];for(var d=0;d<4;d++){var s=(m[d]-l[d]);var q=(h[d]-k[d]);var b=Math.floor(Math.sqrt(s*s+q*q));var g=(f<=0)?b:(b/f);var p=(q/b)*f;var r=(s/b)*f;this.beginPath();for(var e=0;e<g;e++){if(e%2){this.lineTo(l[d]+e*r,k[d]+e*p)}else{this.moveTo(l[d]+e*r,k[d]+e*p)}}this.stroke()}}})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(a){if(!a.product.bChromeEdition){return}var c={output:function(d){}};function b(d){var e=this;e.MaxWidth=-1;e.MaxHeight=-1;e.fZoomValue=-1;e.ctx=false;e.left=-1;e.top=-1;if(d){e.MaxWidth=d.MaxWidth;e.MaxHeight=d.MaxHeight;e.fZoomValue=d.fZoomValue;e.ctx=d.ctx;e.left=d.left;e.top=d.top}e.aryOverlayInfo=[]}b.prototype.SetContext=function(d){this.ctx=d};b.prototype.SetLocation=function(d,f){var e=this;e.left=d;e.top=f};b.prototype.SetImageSize=function(d,e){var f=this;f.MaxWidth=d;f.MaxHeight=e};b.prototype.SetZoom=function(d){var e=this;e.fZoomValue=d};b.prototype.Add=function(i,h,l,f,e,g,d){var j=this,k;k={l:i,t:h,r:l,b:f,c:e,o:g};j.aryOverlayInfo.push(k);if(d){j.__drawOne(k)}return true};b.prototype.Clear=function(){var d=this;d.aryOverlayInfo.splice(0)};b.prototype.Destroy=function(){var d=this;d.ctx=false;d.Clear()};b.prototype.Draw=function(){var g=this,f,d,e;if(g.ctx){f=g.aryOverlayInfo.length;for(d=0;d<f;d++){e=g.aryOverlayInfo[d];g.__drawOne(e)}}};b.prototype.__drawOne=function(m){var l=this,j,h,n,f,e,d,g,k,i;if(!l.ctx){return}j=m.l;h=m.t;n=m.r;f=m.b;g=m.c;k=m.o;if(j<0){j=0}if(h<0){h=0}if(n>l.MaxWidth){n=l.MaxWidth}if(f>l.MaxHeight){f=l.MaxHeight}j*=l.fZoomValue;h*=l.fZoomValue;n*=l.fZoomValue;f*=l.fZoomValue;e=n-j;d=f-h;if(Dynamsoft.Lib.isNumber(g)){g=Dynamsoft.Lib.getColor(g)}i=l.ctx.globalAlpha;l.ctx.fillStyle=g;l.ctx.globalAlpha=parseFloat(k);l.ctx.fillRect(l.left+j,l.top+h,e,d);l.ctx.globalAlpha=i};Dynamsoft.Lib.UI=Dynamsoft.Lib.UI||{};Dynamsoft.Lib.UI.ImageOverlay=b})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(c){if(!c.product.bChromeEdition){return}var b=true,d=false,e={isNaNOrUndefined:function(f){return c.isUndefined(f)||c.isNaN(f)},getAdjustedImageSize:function(n,i,o,j){var l={w:n,h:i,zoom:1},f=Math.floor(o+0.5),m=Math.floor(j+0.5);e.output(["image info:",n,",",i,"; max is ",f,",",m].join(""));if(f<=n||m<=i){if(f<=n&&m<=i){var g=f/n,k=m/i;if(g<k){l.w=Math.floor(n*g+0.5);l.h=Math.floor(i*g+0.5);l.zoom=g}else{l.w=Math.floor(n*k+0.5);l.h=Math.floor(i*k+0.5);l.zoom=k}}else{if(f<=n){l.zoom=f/n;l.w=Math.floor(f+0.5);l.h=Math.floor(i*l.zoom+0.5)}else{if(m<=i){l.zoom=m/i;l.w=Math.floor(n*l.zoom+0.5);l.h=Math.floor(m+0.5)}}}}e.output(["change result:",l.w,",",l.h].join(""));return l},getHex:function(g){var f;f=Number(g).toString(16).toUpperCase();if(f.length==1){f=["0",f].join("")}return f},getColor:function(i){var h,f,k,j;f=i>>16;k=(i&65280)>>8;j=i&255;h=["#",e.getHex(j),e.getHex(k),e.getHex(f)].join("");return h},SetPageNumber:function(k,g){var j=g*1,f,h;k.innerHTML=(j+1);if(j>=99&&j<999){f=32;h=24}else{if(j>=999&&j<9999){f=40;h=30}else{if(j>=9999&&j<99999){f=46;h=34}else{if(j>=99999){f=55;h=36}else{f=24;h=20}}}}k.style.width=f+"px";k.style.height=h+"px";if(c.env.bFirefox){}else{k.style.lineHeight=h+"px"}},output:function(f){}};function a(f){var g=this;g._width=0;g._height=0;g.canvasWidth=0;g.canvasHeight=0;g.Left=0;g.Top=0;g.Right=0;g.Bottom=0;g.borderWidth=1;g.borderColor="#EEEEEE";g.selectionBorderColor="#7DA2CE";g.backgroundColor="#DDDDDD";g.bIfFitWindow=true;g.fitWindowType=0;g.imageAreaSelector=false;g.bSelect=false;g.scrollH=false;g.scrollV=false;g.scrollArrowSize=16;g.cIndex=-1;g.objImage=false;g.bMouseHand=false;g.fZoomValue=1;g.fZoomInStep=1.2;g.fZoomOutStep=0.8;g.mousePosition={x:-1,y:-1};g.mousePreviosPositionWhenMoving={x:-1,y:-1};g.drawArea={width:g.canvasWidth,height:g.canvasHeight,x:0,y:0};g.selectedImageArea={left:0,top:0,right:0,bottom:0};g.MoveStep=10;g.__fSelectionRectAspectRatio=0;g.bFocus=d;g.__overlay=d;g.bShowPageNumber=d;g.bVisible=b;g.divOut=d;g.divInner=d;g.divTag=d;g.canvas=d;g.bOrigMode=d;g.bHasOverlay=d;g._origImageWidth=-1;g._origImageHeight=-1;g.__init(f)}a.prototype.ChangeControlSize=function(g,f){var h=this;h._width=g;h._height=f;h.canvasWidth=g;h.canvasHeight=f;h.Right=h.Left+h._width;h.Bottom=h.Top+h._height;h.divInner.style.height=h.canvasHeight+"px";h.__recaculateDrawArea();h.imageAreaSelector.ChangeControlSize(h.canvasWidth,h.canvasHeight);h.Show();return true};a.prototype.SetVisible=function(f){var g=this;g.bVisible=f;if(f){g.divOut.style.display="";g.Show()}else{g.divOut.style.display="none"}return true};a.prototype.SetOrigMode=function(g){var f=this;if(f.bOrigMode&&g==false&&f.objImage){f.objImage.onload=undefined;f.objImage.src="data:,";f.objImage=d}this.bOrigMode=g};a.prototype.__init=function(f){var h=this,g=window.document;if(f.Width){h.canvasWidth=f.Width}if(f.Height){h.canvasHeight=f.Height}if(f.index){h.cIndex=f.index}h.divOut=g.createElement("div");h.divOut.style.position="absolute";h.divOut.onselectstart=function(){return false};h.divInner=g.createElement("div");h.divInner.style.position="relative";h.divInner.style.height=h.canvasHeight+"px";h.divTag=g.createElement("div");h.divTag.className="imgTag";h.divTag.style.position="absolute";h.divTag.style.height="20px";h.canvas=g.createElement("canvas");h.canvas.width=h.canvasWidth;h.canvas.height=h.canvasHeight;h.divOut.appendChild(h.divInner);h.divInner.appendChild(h.divTag);h.divInner.appendChild(h.canvas);h.__createSelector(f);if(c.isFunction(f.onMouseRightClick)){h.onMouseRightClick=f.onMouseRightClick}if(c.isFunction(f.onMouseClick)){h.onMouseClick=f.onMouseClick}h.__overlay=new Dynamsoft.Lib.UI.ImageOverlay()};a.prototype.bindEvents=function(){var g=this,f;f=g.divOut.parentNode;if(f){g.imageAreaSelector.ChangeControlSize(g.canvasWidth,g.canvasHeight);g.imageAreaSelector.BindEvents();g.imageAreaSelector.SetMouseShape(g.bMouseHand)}return true};a.prototype.__createSelector=function(f){var g=this;if(!g.imageAreaSelector){g.imageAreaSelector=new Dynamsoft.Lib.UI.ImageAreaSelector(g);el=g.imageAreaSelector.GetEL();g.divInner.appendChild(el);g.imageAreaSelector.onMouseUp=function(h){g.mousePreviosPositionWhenMoving.x=-1;g.mousePreviosPositionWhenMoving.y=-1};g.imageAreaSelector.onMouseMove=function(n){var l,k,u,t,j,i=n.dragging;j=g.__getOrigImagePos();if(e.isNaNOrUndefined(j.x)||e.isNaNOrUndefined(j.y)){return}l=(n.x+j.x)/g.fZoomValue;k=(n.y+j.y)/g.fZoomValue;g.__fireEvent("onMouseMove",{e:n.e,x:l,y:k,index:g.cIndex});if(g.bMouseHand&&i){var r,q,p,m,h=g.__isShowScrollV(),s=g.__isShowScrollH();r=g.mousePreviosPositionWhenMoving.x;q=g.mousePreviosPositionWhenMoving.y;p=(r-n.x);m=(q-n.y);g.mousePreviosPositionWhenMoving.x=n.x;g.mousePreviosPositionWhenMoving.y=n.y;if(s&&g.scrollH){g.scrollH.ManualMoving(p)}if(h&&g.scrollV){g.scrollV.ManualMoving(m)}}};g.imageAreaSelector.onMouseClick=function(j){var k,i,h;h=g.__getOrigImagePos();if(e.isNaNOrUndefined(h.x)||e.isNaNOrUndefined(h.y)){return}k=(j.x+h.x)/g.fZoomValue;i=(j.y+h.y)/g.fZoomValue;g.mousePreviosPositionWhenMoving.x=j.x;g.mousePreviosPositionWhenMoving.y=j.y;g.__fireEvent("onMouseClick",{e:j.e,x:k,y:i,index:g.cIndex})};g.imageAreaSelector.onMouseDoubleClick=function(j){var k,i,h;h=g.__getOrigImagePos();if(e.isNaNOrUndefined(h.x)||e.isNaNOrUndefined(h.y)){return}k=(j.x+h.x)/g.fZoomValue;i=(j.y+h.y)/g.fZoomValue;g.mousePreviosPositionWhenMoving.x=j.x;g.mousePreviosPositionWhenMoving.y=j.y;g.__fireEvent("onMouseDoubleClick",{e:j.e,x:k,y:i,index:g.cIndex})};g.imageAreaSelector.onMouseRightClick=function(j){var k,i,h;h=g.__getOrigImagePos();if(e.isNaNOrUndefined(h.x)||e.isNaNOrUndefined(h.y)){return}k=(j.x+h.x)/g.fZoomValue;i=(j.y+h.y)/g.fZoomValue;g.__fireEvent("onMouseRightClick",{e:j.e,x:k,y:i,index:g.cIndex})};g.imageAreaSelector.onImageAreaSelected=function(m){var j=m.left,l=m.top,n=m.right,i=m.bottom,h=m.fromScroll,k;e.output("selected Area in Selector: "+[j,l,n,i].join(","));if(g.fZoomValue>0){k=g.__getOrigImagePos();if(e.isNaNOrUndefined(k.x)||e.isNaNOrUndefined(k.y)){return}j=(j+k.x);l=(l+k.y);n=(n+k.x);i=(i+k.y);e.output("selected zoomed Image Area: "+[j,l,n,i].join(","));j=j/g.fZoomValue;l=l/g.fZoomValue;n=n/g.fZoomValue;i=i/g.fZoomValue;e.output("selected orig Image Area: "+[j,l,n,i].join(","));if(j<0){j=0}if(l<0){l=0}if(n>g.objImage.width){n=g.objImage.width}if(i>g.objImage.height){i=g.objImage.height}g.__fireEvent("onImageAreaSelected",{index:g.cIndex,left:j,top:l,right:n,bottom:i,fromScroll:h})}};g.imageAreaSelector.onImageAreaDeSelected=function(){g.__fireEvent("onImageAreaDeSelected",g.cIndex)};if(c.isFunction(f.onMouseMove)){g.onMouseMove=f.onMouseMove}if(c.isFunction(f.onMouseClick)){g.onMouseClick=f.onMouseClick}if(c.isFunction(f.onMouseRightClick)){g.onMouseRightClick=f.onMouseRightClick}if(c.isFunction(f.onMouseDoubleClick)){g.onMouseDoubleClick=f.onMouseDoubleClick}if(c.isFunction(f.onImageAreaSelected)){g.onImageAreaSelected=f.onImageAreaSelected}if(c.isFunction(f.onImageAreaDeSelected)){g.onImageAreaDeSelected=f.onImageAreaDeSelected}if(c.isFunction(f.OnGetImageInfo)){g.OnGetImageInfo=f.OnGetImageInfo}}};a.prototype.__isShowScrollH=function(){var f=this;if(!f.objImage){return false}return(f.canvasHeight<f._height)};a.prototype.__isShowScrollV=function(){var f=this;if(!f.objImage){return false}return(f.canvasWidth<f._width)};a.prototype.ImageMoveLeft=function(){var h=this,f=h.__isShowScrollH(),g;if(f&&h.scrollH){g=-0.2*h.scrollH.GetPagePositionSize();h.scrollH.ManualMoving(g)}return true};a.prototype.ImageMoveRight=function(){var h=this,f=h.__isShowScrollH(),g;if(f&&h.scrollH){g=0.2*h.scrollH.GetPagePositionSize();h.scrollH.ManualMoving(g)}return true};a.prototype.ImageMoveUp=function(){var h=this,f=h.__isShowScrollV(),g;if(f&&h.scrollV){g=-0.2*h.scrollV.GetPagePositionSize();h.scrollV.ManualMoving(g)}return true};a.prototype.ImageMoveDown=function(){var h=this,f=h.__isShowScrollV(),g;if(f&&h.scrollV){g=0.2*h.scrollV.GetPagePositionSize();h.scrollV.ManualMoving(g)}return true};a.prototype.ImageMovePageUp=function(){var h=this,f=h.__isShowScrollV(),g;if(f&&h.scrollV){g=-1*h.scrollV.GetPagePositionSize();h.scrollV.ManualMoving(g)}return true};a.prototype.ImageMovePageDown=function(){var h=this,f=h.__isShowScrollV(),g;if(f&&h.scrollV){g=h.scrollV.GetPagePositionSize();h.scrollV.ManualMoving(g)}return true};a.prototype.ImageMoveHome=function(){var j=this,g=j.__isShowScrollV(),h=j.__isShowScrollH(),i,f;if(g&&j.scrollV){f=j.scrollV.GetMaxPosition();j.scrollV.ManualMoving(-f)}if(h&&j.scrollH){f=j.scrollH.GetMaxPosition();j.scrollH.ManualMoving(-f)}return true};a.prototype.ImageMoveEnd=function(){var j=this,g=j.__isShowScrollV(),h=j.__isShowScrollH(),i,f;if(g&&j.scrollV){f=j.scrollV.GetMaxPosition();j.scrollV.ManualMoving(f)}if(h&&j.scrollH){f=j.scrollH.GetMaxPosition();j.scrollH.ManualMoving(f)}return true};a.prototype.SetLocation=function(f,h){var g=this;g.Left=f;g.Top=h;g.Right=f+g.canvasWidth;g.Bottom=h+g.canvasHeight;e.output("SetLocation:"+f+", "+h);if(g.divOut){if(g.divOut.parentNode){g.divOut.parentNode.style.position="relative"}g.divOut.style.left=f+"px";g.divOut.style.top=h+"px";g.__refreshImageAreaSelectorLocationAndSize();g.__refreshImageOverlayInfo()}return true};a.prototype.SetMouseShape=function(g){var h=this,f=h.bMouseHand;if(g){h.bMouseHand=true}else{h.bMouseHand=false}e.output("SetMouseShape: "+[f,h.bMouseHand].join("->"));if(h.imageAreaSelector){h.imageAreaSelector.SetMouseShape(h.bMouseHand)}return true};a.prototype.SetBackgroundColor=function(f){var g=this;e.output("SetBackgroundColor:"+f);g.backgroundColor=f;if(g.drawArea.width<g.canvasWidth||g.drawArea.height<g.canvasHeight){g.Show()}return true};a.prototype.SetSelectionImageBorderColor=function(f){var g=this;e.output("SetSelectionImageBorderColor:"+f);g.selectionBorderColor=f;g.__refreshBorder();return true};a.prototype.GetEL=function(){e.output("GetEL:");return this.divOut};a.prototype.__getOrigImagePos=function(){var j=this,h=j.drawArea.x,i=j.drawArea.y,f=j.drawArea.width,g=j.drawArea.height;if(f<=j.canvasWidth){h=h+(j.canvasWidth-f)*0.5}if(g<=j.canvasHeight){i=i+(j.canvasHeight-g)*0.5}return{x:h,y:i}};a.prototype.__getImageDrawLocationAndSize=function(j,i){var l=this,h=j,k=i,f,g;if(e.isNaNOrUndefined(h)){h=0}if(e.isNaNOrUndefined(k)){k=0}f=l.drawArea.width;g=l.drawArea.height;if(f<=l.canvasWidth){h=(l.canvasWidth-f)*0.5;f=l.drawArea.width}else{h=h-l.drawArea.x;h=h<0?0:h;f=l.canvasWidth}if(g<=l.canvasHeight){k=(l.canvasHeight-g)*0.5;g=l.drawArea.height}else{k=k-l.drawArea.y;k=k<0?0:k;g=l.canvasHeight}h+=l.borderWidth;k+=l.borderWidth;return{left:h,top:k,width:f,height:g}};a.prototype.__refreshImageOverlayInfo=function(){var h=this,f,g=1;f=h.__getImageDrawLocationAndSize();g=h.objImage.width*h.fZoomValue/h._origImageWidth;h.__overlay.SetLocation(f.left,f.top);h.__overlay.SetImageSize(h._origImageWidth,h._origImageHeight);h.__overlay.SetZoom(g);if(h.canvas){h.__overlay.SetContext(h.canvas.getContext("2d"))}else{h.__overlay.SetContext(false)}};a.prototype.__refreshImageAreaSelectorLocationAndSize=function(){var g=this,f;if(g.imageAreaSelector){f=g.__getImageDrawLocationAndSize();g.imageAreaSelector.SetDrawImageLocationAndSize(f.left,f.top,f.width,f.height);g.imageAreaSelector.ChangeControlSize(g.canvasWidth,g.canvasHeight)}return true};a.prototype.SetBindIndex=function(f){this._bindIndex=f;return true};a.prototype.GetBindIndex=function(){return this._bindIndex;return true};a.prototype.SetCurrentIndex=function(f){var g=this;g.cIndex=f;return true};a.prototype.GetCurrentIndex=function(){var f=this;return f.cIndex};a.prototype.ClearImage=function(){var f=this;if(f.bOrigMode){f.objImage.onload=undefined;f.objImage.src="data:,"}f.objImage=d;f.bHasOverlay=d;f.__overlay.Clear();f._origImageWidth=-1;f._origImageHeight=-1;return true};a.prototype.__getImageOrignalSize=function(g){var h=this;if(h.bOrigMode){h._origImageWidth=h.objImage.width;h._origImageHeight=h.objImage.height}else{if(g){var f=h.__fireEvent("OnGetImageInfo",h.cIndex);h._origImageWidth=f.width;h._origImageHeight=h._origImageWidth*h.objImage.height/h.objImage.width}else{h._origImageWidth=-1;h._origImageHeight=-1}}};a.prototype.AttachImage=function(p,q,n,g,f,j){var m=this;e.output("AttachImage: objImage,"+[q,n,g,j].join(","));if(m.bOrigMode){m.objImage.onload=undefined;m.objImage.src="data:,"}m.objImage=p;m.bOrigMode=j;m.__resetTag();if(f){var k,h,l=f.length;m.__overlay.Clear();if(l){m.bHasOverlay=b}for(k=0;k<l;k++){h=f[k];m.__overlay.Add(h.Left,h.Top,h.Right,h.Bottom,h.ColorRGB,h.Opacity)}}m.__getImageOrignalSize(m.bHasOverlay);m.__recaculateDrawArea();return true};a.prototype.Show=function(i){var h=this,f,g;if(h.bVisible){h.divOut.style.display=""}else{h.divOut.style.display="none";return}e.output("Show:"+[h.canvasWidth,h.canvasHeight].join(","));f=h.canvas.getContext("2d");h.__restoreCanvas(f,h.canvasWidth,h.canvasHeight);if(!i){h.__resetScroll()}h.__resetTag();if(!h.objImage||h.objImage.src=="data:,"||h.objImage.width==0||h.objImage.height==0||h.objImage.src==""){f.fillStyle=h.backgroundColor;f.fillRect(0,0,f.canvas.width,f.canvas.height);f.font="12px Times New Roman";f.textAlign="center";f.strokeText("Loading ...",f.canvas.width*0.5,f.canvas.height*0.5);return false}f.clearRect(0,0,h.canvasWidth,h.canvasHeight);if(h.cIndex==-1){return}e.output("draw info: "+[h.objImage.width,h.objImage.height,h.drawArea.x,h.drawArea.y,h.drawArea.width,h.drawArea.height].join(","));if(h.drawArea.width<h.canvasWidth||h.drawArea.height<h.canvasHeight){f.fillStyle=h.backgroundColor;f.fillRect(0,0,h.canvasWidth,h.canvasHeight)}f.drawImage(h.objImage,Math.floor(-h.drawArea.x),Math.floor(-h.drawArea.y),Math.floor(h.drawArea.width),Math.floor(h.drawArea.height));h.__overlay.Draw();return true};a.prototype.SetSelect=function(f){var g=this;e.output("SetSelect:"+f);g.bSelect=f;g.__resetTag();g.__refreshBorder();return true};a.prototype.GetIndex=function(){return this.cIndex};a.prototype.SetSelectedImageArea=function(n,k,s,h){var q=this,u=n,t=k,f=0,p=0,i,j,l=1;e.output("SetSelectedImageArea:"+[n,k,s,h].join(", "));if(s<n&&h<k){u=parseInt(s);t=parseInt(h);f=parseInt(n);p=parseInt(k)}else{f=parseInt(s);p=parseInt(h);u=parseInt(n);t=parseInt(k)}q.selectedImageArea.left=u;q.selectedImageArea.top=t;q.selectedImageArea.right=f;q.selectedImageArea.bottom=p;i=f-u;j=p-t;if(q.imageAreaSelector&&q.bOrigMode){q.__getImageOrignalSize(true);if(q._origImageWidth>0){l=q.objImage.width*q.fZoomValue/q._origImageWidth}else{return false}var m=u*l,r=t*l,g=i*l,o=j*l;q.imageAreaSelector.SetSelectedArea(m,r,g,o);return true}return false};a.prototype.OverlayRectangle=function(k,j,i,g,f,h){var l=this;e.output("OverlayRectangle:"+[k,j,i,g,f,h].join(", "));l.bHasOverlay=b;l.__getImageOrignalSize(l.bHasOverlay);l.__refreshImageOverlayInfo();l.__overlay.Add(k,j,i,g,f,h,true);return true};a.prototype.GetMousePosition=function(){e.output("GetMousePosition:");return this.mousePosition};a.prototype.__setDrawArea=function(g,j,h,f){var i=this;i.drawArea.x=g;i.drawArea.y=j;i.drawArea.width=h;i.drawArea.height=f;if(i.drawArea.width>i.canvasWidth&&i.drawArea.x>i.drawArea.width-i.canvasWidth){i.drawArea.x=i.drawArea.width-i.canvasWidth}if(i.drawArea.height>i.canvasHeight&&i.drawArea.y>i.drawArea.height-i.canvasHeight){i.drawArea.y=i.drawArea.height-i.canvasHeight}i.__refreshImageAreaSelectorLocationAndSize();i.__refreshImageOverlayInfo()};a.prototype.SetZoom=function(f){var j=this,g,i={},h;e.output("SetZoom:"+[g,f].join("->"));i.x=j.drawArea.x;i.y=j.drawArea.y;i.fOldZoom=j.fZoomValue;i.fNewZoom=f;i.oldIfFitWindow=j.bIfFitWindow;i.oldFitWindowType=j.fitWindowType;i.oldCanvasWidth=j.canvasWidth;i.oldCanvasHeight=j.canvasHeight;j.bIfFitWindow=false;j.fitWindowType=0;j.fZoomValue=f;j.__recaculateDrawArea();h=j.__getScrollInfoWithNewZoom(i);j.__setDrawArea(h.x,h.y,j.drawArea.width,j.drawArea.height);j.__resetScroll();j.Show();return true};a.prototype.SetSelectionRectAspectRatio=function(f){var g=this;e.output("SetSelectionRectAspectRatio:"+f);if(f<0){f=0}g.__fSelectionRectAspectRatio=f;return true};a.prototype.SetIfFitWindow=function(g,f){var h=this;e.output("SetIfFitWindow:"+[g,f].join(","));h.bIfFitWindow=g;if(g){h.fitWindowType=f}else{h.fitWindowType=3}h.__recaculateDrawArea();h.Show();return true};a.prototype.Stretch=function(){var f=this;e.output("Stretch");f.canvasWidth=f._width;f.canvasHeight=f._height;f.__setDrawArea(0,0,f.canvasWidth,f.canvasHeight);f.__refreshImageAreaSelectorLocationAndSize();f.__refreshImageOverlayInfo();return true};a.prototype.Destroy=function(){var f=this;e.output("Destroy:");f.ClearImage();if(f.imageAreaSelector){f.imageAreaSelector.Destroy();f.imageAreaSelector=false}if(f.__overlay){f.__overlay.Destroy()}return true};a.prototype.SetShowPageNumber=function(f){var g=this;g.bShowPageNumber=f;g.__resetTag();return true};a.prototype.__getScrollInfoWithNewZoom=function(w){var u=this,x={x:0,y:0},h,g,q,p,k,j,l=false,n,v,m,r,s,i,f,o;n=u.fZoomValue;if(n<=0||!u.objImage){return x}h=w.x;g=w.y;v=w.oldIfFitWindow;m=w.oldFitWindowType;if(v){if(m==0){l=true}else{if(m==1){l=true}else{if(m==2){l=true}else{if(m==4){l=true}}}}}if(l){h=q=u.objImage.width*0.5;g=p=u.objImage.height*0.5;k=q*n;j=p*n}else{s=w.oldCanvasWidth;i=w.oldCanvasHeight;r=w.fOldZoom;h=h+s*0.5;g=g+i*0.5;q=h/r;p=g/r;k=q*n;j=p*n}f=u.canvasWidth;o=u.canvasHeight;var t=u.__isShowScrollV();var y=u.__isShowScrollH();if(y){x.x=k-f*0.5;if(x.x<0){x.x=0}}else{x.x=(u.drawArea.width-f)*0.5}if(t){x.y=j-o*0.5;if(x.y<0){x.y=0}}else{x.y=(u.drawArea.height-o)*0.5}return x};a.prototype.__recaculateDrawArea=function(){var k=this,g=false,j=false,f,h=false,i=false;k.canvasWidth=k._width;k.canvasHeight=k._height;if(k.objImage){if(k.bIfFitWindow){if(k.fitWindowType==0){f=e.getAdjustedImageSize(k.objImage.width,k.objImage.height,k.canvasWidth,k.canvasHeight);k.fZoomValue=f.zoom}else{if(k.fitWindowType==1){f=e.getAdjustedImageSize(k.objImage.width,k.objImage.height,k.objImage.width,k.canvasHeight);if(f.w>k._width){h=true;k.canvasHeight=k._height-k.scrollArrowSize;f=e.getAdjustedImageSize(k.objImage.width,k.objImage.height,k.objImage.width,k.canvasHeight)}k.fZoomValue=f.zoom}else{if(k.fitWindowType==2){f=e.getAdjustedImageSize(k.objImage.width,k.objImage.height,k.canvasWidth,k.objImage.height);if(f.h>k._height){h=true;k.canvasWidth=k._width-k.scrollArrowSize;f=e.getAdjustedImageSize(k.objImage.width,k.objImage.height,k.canvasWidth,k.objImage.height)}k.fZoomValue=f.zoom}else{if(k.fitWindowType==4){g=true}else{f={w:k.objImage.width,h:k.objImage.height};j=true;k.fZoomValue=1}}}}}else{f={w:k.objImage.width*k.fZoomValue,h:k.objImage.height*k.fZoomValue};j=true}}else{g=true}if(g){k.Stretch()}else{if(j){if(f.h>k._height){h=true;k.canvasWidth=k._width-k.scrollArrowSize}if(f.w>k._width){h=true;k.canvasHeight=k._height-k.scrollArrowSize}}k.drawArea.width=f.w;k.drawArea.height=f.h;if(k.drawArea.width<k.canvasWidth){k.drawArea.x=(k.drawArea.width-k.canvasWidth)*0.5}else{k.drawArea.x=0}if(k.drawArea.height<k.canvasHeight){k.drawArea.y=(k.drawArea.height-k.canvasHeight)*0.5}else{k.drawArea.y=0}e.output("draw Area: "+[k.drawArea.x,k.drawArea.y,k.drawArea.width,k.drawArea.height].join(","));k.__refreshImageAreaSelectorLocationAndSize();k.__refreshImageOverlayInfo()}};a.prototype.__resetScroll=function(){var h=this,j,g,f=h.__isShowScrollV(),k=h.__isShowScrollH(),o,i,n,l,m;if(h.canvas){n=h.canvas.parentNode}if(!n){return}if(f){cPosition=h.drawArea.y;if(!h.scrollV){j={Width:h.scrollArrowSize,Height:h.canvasHeight,Horizontal:false};j.onValueChanged=function(p){h.drawArea.y=p.Value;if(h.drawArea.height>h.canvasHeight&&h.drawArea.y>h.drawArea.height-h.canvasHeight){h.drawArea.y=h.drawArea.height-h.canvasHeight}h.__reselectArea();h.Show(true)};h.scrollV=new Dynamsoft.Lib.UI.ScrollBar(j);h.scrollV.InitScroll(h.drawArea.height,h.canvasHeight);h.scrollV.SetLocation(1,1);g=h.scrollV.GetEL();g.style.position="absolute";n.appendChild(g)}else{g=h.scrollV.GetEL();if(h.scrollV.GetControlHeight()!=h.canvasHeight){h.scrollV.ChangeControlSize(h.scrollArrowSize,h.canvasHeight)}g.style.display="";h.scrollV.InitScroll(h.drawArea.height,h.canvasHeight);h.scrollV.SetPosition(cPosition)}g.style.top=h.borderWidth+"px";g.style.left=h.borderWidth+h._width-h.scrollArrowSize+"px";h.scrollV.Refresh()}else{if(h.scrollV){g=h.scrollV.GetEL();g.style.display="none"}}if(k){cPosition=h.drawArea.x;if(!h.scrollH){j={Width:h.canvasWidth,Height:h.scrollArrowSize,Horizontal:true};j.onValueChanged=function(p){h.drawArea.x=p.Value;if(h.drawArea.width>h.canvasWidth&&h.drawArea.x>h.drawArea.width-h.canvasWidth){h.drawArea.x=h.drawArea.width-h.canvasWidth}h.__reselectArea();h.Show(true)};h.scrollH=new Dynamsoft.Lib.UI.ScrollBar(j);h.scrollH.InitScroll(h.drawArea.width,h.canvasWidth);h.scrollH.SetLocation(1,1);g=h.scrollH.GetEL();g.style.position="absolute";n.appendChild(g)}else{g=h.scrollH.GetEL();if(h.scrollH.GetControlWidth()!=h.canvasWidth){h.scrollH.ChangeControlSize(h.canvasWidth,h.scrollArrowSize)}g.style.display="";h.scrollH.InitScroll(h.drawArea.width,h.canvasWidth);h.scrollH.SetPosition(cPosition)}g.style.top=h.borderWidth+h._height-h.scrollArrowSize+"px";g.style.left=h.borderWidth+"px";h.scrollH.Refresh()}else{if(h.scrollH){g=h.scrollH.GetEL();g.style.display="none"}}};a.prototype.__restoreCanvas=function(g,f,i){var j=this;g.canvas.width=f;g.canvas.height=i};a.prototype.__reselectArea=function(){var f=this;if(f.imageAreaSelector){f.imageAreaSelector.ReFireSelectedEventWhenImageMoved()}};a.prototype.__zoomIn=function(){var f=this;f.SetZoom(1.1*f.fZoomValue)};a.prototype.__zoomOut=function(){var f=this;f.SetZoom(0.9*f.fZoomValue)};a.prototype.__refreshBorder=function(){var f=this;if(f.bSelect){f.divOut.style.border=f.borderWidth+"px solid "+f.selectionBorderColor}else{f.divOut.style.border=f.borderWidth+"px solid "+f.borderColor}};a.prototype.__resetTag=function(){var f=this;if(f.bShowPageNumber){e.SetPageNumber(f.divTag,f.cIndex);if(f.bSelect){f.divTag.className="imgTag imgTag_Selected"}else{f.divTag.className="imgTag imgTag_Normal"}f.divTag.style.display="block"}else{f.divTag.innerHTML="";f.divTag.style.display="none"}};a.prototype.ClearControl=function(){var f=this;f.ClearImage();f.bShowPageNumber=d;f.Show();return true};a.prototype.__fireEvent=function(f,g){var h=this;if(c.isFunction(h[f])){return h[f](g)}return true};c.UI=c.UI||{};c.UI.ImageControl=a})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
;var ___ii=0,Funs2;(function(a){if(!a.product.bChromeEdition){return}Funs2={getImageUrl:function(c,f,b,e){var d=[c];if(f!==undefined&&f!==null){d.push("&index=");d.push(f)}d.push("&width=");d.push(b);d.push("&height=");d.push(e);d.push("&ticks=");d.push(___ii++);return d.join("")},getUrlByAct:function(c,e,b){var d=[c];if(e!==undefined&&e!==null){d.push("&index=");d.push(e)}if(b){d.push("&act=");d.push(b)}d.push("&ticks=");d.push(___ii++);return d.join("")},output:function(c,b){if(Dynamsoft.WebTwainEnv.Debug){console.log(b)}},print:function(f,k,i){var e,d=850,b=1169,h=d/k,l=b/i;if(h<l){b=i*h}else{if(h>l){d=k*l}}var g,c=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",k,",height=",i].join(""),e='<html><body><img id="D_img" src="'+f+'" style="width: '+d+"px;height: "+b+'px" /></body></html>';var j=window.open("about:blank","_blank",c);if(j){j.document.write(e);j.document.close();j.focus();g=j.document.getElementById("D_img");if(g){g.onload=function(){j.print();j.close();Dynamsoft.Lib.log("print image...ok")}}else{Dynamsoft.Lib.log("cannot find image")}}}}})(Dynamsoft.Lib);(function(c){if(!c.product.bChromeEdition){return}var g=document,d=[];function a(){var i=this;i.bIsDirty=false;i.imageToShow;i.imageWidth=0;i.imageHeight=0;i.bOriginalImage=false;i.imageUrl;i.iImageControlWidth;i.iImageControlHeight;i.imageIndex=-1;i.aryOverlayRectangleData=[]}a.prototype.Clear=function(){var i=this;if(i.imageToShow){i.imageToShow.onload=undefined;i.imageToShow.src="data:,"}i.imageToShow=false;i.imageUrl="";i.aryOverlayRectangleData=[]};function h(k,j,q,r,m,i,s,p,l,o){var n=this;n.iControlIndex=k;n.iImageIndex=j;n.View=q;n.imgControl=r;n.modelImageControl=m;n.iWidth=i;n.iHeight=s;n.AttachImagesForControl=p;n.bOnlyFromServer=l;n.BaseUrl=o}function b(n,m,l,j,i,k){var o=this;o.Left=n;o.Top=m;o.Right=l;o.Bottom=j;o.ColorRGB=i;o.Opacity=k}function e(i){var j=this;j.bFocus=false;j.borderWidth=c.isUndefined(i.borderWidth)?1:i.borderWidth;j.canvas=document.createElement("div");j.canvas.style.width=i.Width+"px";j.canvas.style.height=i.Height+"px";if(j.borderWidth>0){j.canvas.style.border=j.borderWidth+"px solid #CCCCCC"}j.canvas.style.display="block";j.BaseUrl=false;i.Container.append(j.canvas);Dynamsoft.Lib.addEventListener(j.canvas,"mouseenter",function(k){j.bFocus=true});Dynamsoft.Lib.addEventListener(j.canvas,"mouseleave",function(k){j.bFocus=false});KISSY.Event.on(j.canvas,"mousewheel",function(k){if(!j.bFocus){return true}var l=k.delta;if(l<0){j.__MousewheelValue--}else{if(l>0){j.__MousewheelValue++}}k.halt;setTimeout(function(){j.__MousewheelChanged(j)},200);return false});j.imageViewWidth=i.Width;j.imageViewHeight=i.Height;j.imagesPerRow=1;j.imagesPerColumn=1;j.MAX_ROWS=128;j.MAX_COLUMNS=128;j.bSingleMode=false;j.bVerticalMode=true;j.bHand=false;j.bIfFitWindow=true;j.enumDWTFitWindowType=0;j.fZoom=1;j.zoomInStep=1.2;j.zoomOutStep=0.8;j.MIN_ZOOM=0.02;j.MAX_ZOOM=65;j.ImageMargin=0;j.iControlWidth;j.iControlHeight;j.iCurrentRow=-1;j.iOldFirstVisibleRow=0;j.iCurrentColumn=-1;j.iOldFirstVisibleColum=0;j.AllowMultiSelect=true;j.aryCurrentSelectedImageIndicesInBuffer=[];j.SelectionImageBorderColor="#7DA2CE";j.BackgroundColor="#FFFFFF";j.cCurrentIndex=-1;j.sHowManyImages=0;j.bScrollBar=true;j.__InitiHorizontalScrollBar(i);j.__InitiVerticalScrollBar(i);j.aryModelImageControl=[];j.aryImageControls=[];j.bShowPageNumber=false;j.ratio=0;j.__InitEvents(i);d.push(j);j.canvas.style.backgroundColor=j.BackgroundColor;j.__MousewheelValue=0}e.prototype.__InitEvents=function(i){var j=this;if(c.isFunction(i.OnTopImageInTheViewChanged)){j.OnTopImageInTheViewChanged=i.OnTopImageInTheViewChanged}if(c.isFunction(i.OnGetImageInfo)){j.OnGetImageInfo=i.OnGetImageInfo}if(c.isFunction(i.onMouseMove)){j.onMouseMove=i.onMouseMove}if(c.isFunction(i.onMouseClick)){j.onMouseClick=i.onMouseClick}if(c.isFunction(i.onMouseRightClick)){j.onMouseRightClick=i.onMouseRightClick}if(c.isFunction(i.onMouseDoubleClick)){j.onMouseDoubleClick=i.onMouseDoubleClick}if(c.isFunction(i.onImageAreaDeSelected)){j.onImageAreaDeSelected=i.onImageAreaDeSelected}if(c.isFunction(i.onImageAreaSelected)){j.onImageAreaSelected=i.onImageAreaSelected}if(c.isFunction(i.onSelected)){j.onSelected=i.onSelected}if(c.isFunction(i.onRefreshUI)){j.onRefreshUI=i.onRefreshUI}if(c.isFunction(i.onResetCurrentIndex)){j.onResetCurrentIndex=i.onResetCurrentIndex}};e.prototype.__InitiHorizontalScrollBar=function(j){var k=this;var i={Width:j.Width,Height:16,Value:0,MaxValue:0,Horizontal:true};i.onValueChanged=function(l){k.__UpdateImageByScrollBar(l.Value)};k.horizontalScrollBar=new Dynamsoft.Lib.UI.ScrollBar(i);k.canvas.appendChild(k.horizontalScrollBar.GetEL());k.__SetHLocation(0,j.Height-k.__GetScrollWidth())};e.prototype.__InitiVerticalScrollBar=function(i){var k=this;var j={Width:16,Height:i.Height,Value:0,MaxValue:0,Horizontal:false};j.onValueChanged=function(l){k.__UpdateImageByScrollBar(l.Value)};k.verticalScrollBar=new Dynamsoft.Lib.UI.ScrollBar(j);k.canvas.appendChild(k.verticalScrollBar.GetEL());k.__SetVLocation(i.Width-k.__GetScrollWidth(),0)};e.prototype.__UpdateImageByScrollBar=function(l){var o=this,i=-1,m=-1,k=-1,j,n;if(o.aryImageControls&&o.aryImageControls.length>0){n=o.aryImageControls[0];if(n){m=n.GetCurrentIndex();i=o.__GetRow(m)}}if(o.bVerticalMode==true){k=parseInt(o.__GetVisibleRow(l)*o.imagesPerColumn);j=o.__GetRow(k);if(i==j){return}}else{k=parseInt(o.__GetVisibleRow(l));if(k==m){return}}Funs2.output(o,"__UpdateImageByScrollBar(value, newIndex): "+[l,k].join(","));o.__GoInner(k,false,true)};e.prototype.UpdateImage=function(k,m,j,i,q,o){var n=this;var r=n.aryModelImageControl[k];r.imageToShow=m;r.imageWidth=j;r.imageHeight=i;r.iImageControlWidth=j;r.iImageControlHeight=i;r.aryOverlayRectangleData=q;r.imageUrl=o;var p=n.GetImageControl(k);if(null!=p){p.SetCurrentIndex(k);if(m.src=="data:,"||m.width==0||m.height==0||m.src==""){var l=n.__GetImageControlIndex(k);if(l>=0){n.__SetArrayControlLoadImage(l,k,p,r,j,i,n.AttachImagesForControl,false)}}else{n.AttachImagesForControl(p,r)}}n.iCurrentRow=-1;n.iCurrentColumn=-1;return true};e.prototype.__AddImage=function(j,k){var l=this;l.__AddControl();var i=l.GetImageControl(j);i.SetCurrentIndex(j);l.AttachImagesForControl(i,k)};e.prototype.UpdateAllImage=function(m,i,k,j){var l=this;return l.UpdateAllImageInner(m,i,false,k,j)};e.prototype.UpdateAllImageInner=function(q,j,n,m,l){var p=this;p.aryModelImageControl=q;p.__OnlySetCurrentIndex(j);p.sHowManyImages=p.aryModelImageControl.length;var o=(p.imagesPerRow*p.imagesPerColumn)>p.sHowManyImages?p.sHowManyImages:p.imagesPerRow*p.imagesPerColumn;var k=0;for(k=p.aryImageControls.length-1;k>=o;k--){p.__RemoveControl(k)}for(k=p.aryImageControls.length;k<o;k++){p.__AddControl()}p.__ConfirmScrollMaxValue();p.__ConfirmScrollVisibity();p.iCurrentRow=-1;p.iCurrentColumn=-1;p.__SetCurrentIndex(p.cCurrentIndex);p.__ReInitChildrenPosition();p.__AttachImages(n,m,l);return true};e.prototype.__AddControl=function(){var k=this,i={};if(c.isFunction(k.onImageAreaDeSelected)){i.onImageAreaDeSelected=k.onImageAreaDeSelected}if(c.isFunction(k.onImageAreaSelected)){i.onImageAreaSelected=k.onImageAreaSelected}i.onMouseClick=function(l){k.__OnMouseClick(l);k.__fireEvent("onMouseClick",l)};i.onMouseRightClick=function(l){k.__fireEvent("onMouseRightClick",l)};i.onMouseMove=function(l){k.__fireEvent("onMouseMove",l)};i.onMouseDoubleClick=function(l){k.__fireEvent("onMouseDoubleClick",l)};i.OnGetImageInfo=function(l){return k.__fireEvent("OnGetImageInfo",l)};var j=new Dynamsoft.Lib.UI.ImageControl(i);k.aryImageControls.push(j);Dynamsoft.Lib.imageControlCount++;k.__InitImageControl(j);k.canvas.appendChild(j.GetEL());j.bindEvents()};e.prototype.__InitImageControl=function(i){var j=this;if(j.imagesPerRow==1&&j.imagesPerColumn==1){i.SetMouseShape(j.bHand);i.SetShowPageNumber(false)}else{i.SetMouseShape(true);i.SetShowPageNumber(j.bShowPageNumber)}i.SetSelectionRectAspectRatio(j.ratio);i.SetBackgroundColor(j.BackgroundColor);i.SetSelectionImageBorderColor(j.SelectionImageBorderColor);if(j.bSingleMode){if(j.bIfFitWindow){i.SetIfFitWindow(true,j.enumDWTFitWindowType)}else{i.SetZoom(j.fZoom)}}else{i.SetIfFitWindow(true,0)}};e.prototype.__OnMouseClick=function(k){var n=this;var o=k.index;var q=n.aryCurrentSelectedImageIndicesInBuffer.indexOf(o),j=k.e.ctrlKey,p=k.e.shiftKey;if(q==-1){if(j||p||n.aryCurrentSelectedImageIndicesInBuffer.length<1){n.aryCurrentSelectedImageIndicesInBuffer.push(o)}else{if(n.aryCurrentSelectedImageIndicesInBuffer.length==1){if(n.aryCurrentSelectedImageIndicesInBuffer[0]==o){return}n.aryCurrentSelectedImageIndicesInBuffer[0]=o}else{n.aryCurrentSelectedImageIndicesInBuffer=[];n.aryCurrentSelectedImageIndicesInBuffer.push(o)}}}else{if(j&&n.aryCurrentSelectedImageIndicesInBuffer.length>1){n.aryCurrentSelectedImageIndicesInBuffer.splice(q,1)}else{if(p){n.aryCurrentSelectedImageIndicesInBuffer.push(o)}else{if(n.aryCurrentSelectedImageIndicesInBuffer.length==1&&n.cCurrentIndex==o){return}n.aryCurrentSelectedImageIndicesInBuffer=[];n.aryCurrentSelectedImageIndicesInBuffer.push(o)}}}if(p){var t=n.aryCurrentSelectedImageIndicesInBuffer[0],m=n.aryCurrentSelectedImageIndicesInBuffer[n.aryCurrentSelectedImageIndicesInBuffer.length-1];n.aryCurrentSelectedImageIndicesInBuffer=[];if(m==t){n.aryCurrentSelectedImageIndicesInBuffer.push(parseInt(t))}else{if(m>t){var r=m-t+1;for(var l=0;l<r;l++){n.aryCurrentSelectedImageIndicesInBuffer.push(parseInt(t+l))}}else{var r=t-m+1;n.aryCurrentSelectedImageIndicesInBuffer.push(parseInt(t));for(var l=0;l<r-1;l++){n.aryCurrentSelectedImageIndicesInBuffer.push(parseInt(m+l))}}}}if(n.aryCurrentSelectedImageIndicesInBuffer.length==1){n.__OnlySetCurrentIndex(o);n.__SetCurrentIndexWithoutSetScroll(n.cCurrentIndex)}n.__SetUnselectAll();var l=0;for(l=0;l<n.aryCurrentSelectedImageIndicesInBuffer.length;l++){var s=n.GetImageControl(n.aryCurrentSelectedImageIndicesInBuffer[l]);if(null!=s){s.SetSelect(true)}}n.__fireEvent("onSelected",n.aryCurrentSelectedImageIndicesInBuffer)};e.prototype.__RemoveControl=function(i){var k=this;if(i<k.aryImageControls.length&&i>=0){var j=k.aryImageControls[i];j.Destroy();k.aryImageControls.splice(i,1);k.canvas.removeChild(j.GetEL());Dynamsoft.Lib.imageControlCount--}};e.prototype.__ConfirmScrollMaxValue=function(){var j=this;if(!j.bSingleMode){if(j.bVerticalMode==true){var i=j.__GetHowManyRows();j.__SetVScrollMaxValue(i,j.imagesPerRow)}else{j.__SetHScrollMaxValue(j.sHowManyImages,j.imagesPerColumn)}}};e.prototype.__GetHowManyRows=function(){var i=this;return parseInt((i.sHowManyImages+i.imagesPerColumn-1)/i.imagesPerColumn)};e.prototype.__ConfirmScrollVisibity=function(){var i=this;if(i.bSingleMode){i.__SetIfHScroll(false);i.__SetIfVScroll(false)}else{if(i.bVerticalMode==false){if(i.bScrollBar&&i.sHowManyImages>i.imagesPerRow*i.imagesPerColumn){i.__SetIfHScroll(true)}else{i.__SetIfHScroll(false)}i.__SetIfVScroll(false)}else{if(i.bScrollBar&&i.sHowManyImages>i.imagesPerRow*i.imagesPerColumn){i.__SetIfVScroll(true)}else{i.__SetIfVScroll(false)}i.__SetIfHScroll(false)}}};e.prototype.__SetCurrentIndex=function(i){var j=this;if(i>=0){j.__SetCurrentIndexInnerInner(i,true,false)}};e.prototype.__SetCurrentIndexInner=function(j,k,i){var l=this;if(!i){l.__SetCurrentIndexInnerInner(j,k,i)}else{l.__SetCurrentIndexInnerInner(j,k,true)}};e.prototype.__SetCurrentIndexWithoutSetScroll=function(i){var j=this;j.__SetCurrentIndexInnerInner(i,true,false,true)};e.prototype.__SetCurrentIndexWithoutRefreshUI=function(i){var j=this;j.__SetCurrentIndexInnerInner(i,true,false)};e.prototype.__SetCurrentIndexInnerInner=function(p,r,u,o){var n=this;if(p<0||p>=n.aryModelImageControl.length){return}if(n.bVerticalMode==true){var s=n.iCurrentRow;n.iCurrentRow=n.__GetRow(p);if(n.iCurrentRow!=s&&(n.iCurrentRow<=n.iOldFirstVisibleRow||((n.iCurrentRow-n.iOldFirstVisibleRow)>=n.imagesPerRow))){if((n.iCurrentRow-n.iOldFirstVisibleRow)==n.imagesPerRow){if(u==false){n.iCurrentRow=n.iOldFirstVisibleRow+1}}if(n.bSingleMode==false){if(!o||o==false){var m=n.iCurrentRow;n.__SetVScrollPotion(m)}}var k=n.__GetFirstVisibleRow();if(n.iOldFirstVisibleRow!=k){n.iOldFirstVisibleRow=k;var q=k*n.imagesPerColumn;n.__fireEvent("OnTopImageInTheViewChanged",q);n.__AttachImages(false)}}}else{var l=n.iCurrentColumn;n.iCurrentColumn=p;if(n.iCurrentColumn!=l&&(n.iCurrentColumn<n.iOldFirstVisibleColum||((n.iCurrentColumn-n.iOldFirstVisibleColum)>=n.imagesPerColumn))){if((n.iCurrentColumn-n.iOldFirstVisibleColum)==n.imagesPerColumn){n.iCurrentColumn=n.iOldFirstVisibleColum+1}if(n.bSingleMode==false){if(!o||o==false){var j=n.iCurrentColumn;n.__SetHScrollPotion(j)}}var i=n.__GetFirstVisibleColumn();if(n.iOldFirstVisibleColum!=i){n.iOldFirstVisibleColum=i;var q=i;n.__fireEvent("OnTopImageInTheViewChanged",q);n.__AttachImages(false)}}}if(r){n.__SetUnselectAll();n.__OnlySetCurrentIndex(p);var t=n.GetImageControl(n.cCurrentIndex);if(null!=t){t.SetSelect(true)}}};e.prototype.__SetScrollByIndex=function(o){var n=this;if(n.bVerticalMode==true){var q=n.iCurrentRow;n.iCurrentRow=n.__GetRow(o);if(n.iCurrentRow!=q&&(n.iCurrentRow<=n.iOldFirstVisibleRow||((n.iCurrentRow-n.iOldFirstVisibleRow)>=n.imagesPerRow))){if((n.iCurrentRow-n.iOldFirstVisibleRow)==n.imagesPerRow){}if(n.bSingleMode==false){var l=n.iCurrentRow;n.__SetVScrollPotion(l)}var k=n.__GetFirstVisibleRow();if(n.iOldFirstVisibleRow!=k){n.iOldFirstVisibleRow=k;var p=k*n.imagesPerColumn;n.__fireEvent("OnTopImageInTheViewChanged",p);n.__AttachImages(false)}}}else{var m=n.iCurrentColumn;n.iCurrentColumn=o;if(n.iCurrentColumn!=m&&(n.iCurrentColumn<n.iOldFirstVisibleColum||((n.iCurrentColumn-n.iOldFirstVisibleColum)>=n.imagesPerColumn))){if((n.iCurrentColumn-n.iOldFirstVisibleColum)==n.imagesPerColumn){n.iCurrentColumn=n.iOldFirstVisibleColum+1}if(n.bSingleMode==false){var j=n.iCurrentColumn;n.__SetHScrollPotion(j)}var i=n.__GetFirstVisibleColumn();if(n.iOldFirstVisibleColum!=i){n.iOldFirstVisibleColum=i;var p=i;n.__fireEvent("OnTopImageInTheViewChanged",p);n.__AttachImages(false)}}}};e.prototype.__GetRow=function(i){var j=this;return parseInt(i/j.imagesPerColumn)};e.prototype.__GetFirstVisibleColumn=function(){var i=this;return parseInt(i.__GetVisibleRow(i.__GetHScrollPosionValue()))};e.prototype.__GetFirstVisibleRow=function(){var i=this;return parseInt(i.__GetVisibleRow(i.__GetVScrollPosionValue()))};e.prototype.__GetVisibleRow=function(k){var j=this;if(j.__GetHowManyRows()==0){return 0}var i=k;if(j.bSingleMode){return j.cCurrentIndex}else{if(j.bVerticalMode==true){if(j.__GetHowManyRows()-i<j.imagesPerRow){i=i-(j.imagesPerRow-(j.__GetHowManyRows()-i))}}else{if(j.sHowManyImages-i<j.imagesPerColumn){i=i-(j.imagesPerColumn-(j.sHowManyImages-i))}}}if(i<0){i=0}return i};e.prototype.__AttachImages=function(k,j,i){var l=this;l.__AttachImagesInner(k,true,j,i)};e.prototype.__AttachImagesInner=function(p,q,j,l){var o=this;if(o.aryImageControls&&o.aryImageControls.length>0){var r=0;if(o.bVerticalMode==true){r=o.__GetFirstVisibleRow()*o.imagesPerColumn}else{r=o.__GetFirstVisibleColumn()}if(r<0){r=0}var m=0;var k=r;var u=r+o.aryImageControls.length-1;if(j&&j>0){k=j}if(l&&l>0){u=l}for(m=0;m<o.aryImageControls.length;m++){var s=o.aryImageControls[m];if(s){var n=r+m;Funs2.output(o,"__AttachImagesInner(baseIndex, index): "+[r,n].join(","));if(n<o.sHowManyImages){if(p){o.__InitImageControl(s)}if(q){var t=o.aryModelImageControl[n];if(n>=k&&n<=u||t.bIsDirty==true||s.GetCurrentIndex()!=n){Funs2.output(o,"__AttachImagesInner() attach Image index -> control index:"+[n,m].join("->"));o.__GetImageAndAttach(s,t,n,false)}}s.SetVisible(true);Funs2.output(o,"__AttachImagesInner() set control index Visible:"+[m].join());if(o.__IfContains(o.aryCurrentSelectedImageIndicesInBuffer,n)){Funs2.output(o,"__AttachImagesInner() set control index selected:"+[m].join());s.SetSelect(true)}else{s.SetSelect(false)}}else{Funs2.output(o,"__AttachImagesInner() set control index InVisible:"+[m].join());s.SetVisible(false)}}}}};e.prototype.__IfContains=function(l,k){var j=0;if(l){for(j=0;j<l.length;j++){if(l[j]==k){return true}}}return false};e.prototype.__ReInitChildrenPosition=function(){var n=this,k=0,m=0,l;n.__InitControlsSize();if(!n.bSingleMode){k=n.ImageMargin;m=n.ImageMargin}for(l=0;l<n.aryImageControls.length;l++){var j=n.aryImageControls[l];j.ChangeControlSize(n.iControlWidth,n.iControlHeight);if(n.bSingleMode){j.SetLocation(0,0)}else{j.SetLocation(k,m);k=j.Right+n.ImageMargin;if(n.bVerticalMode==true){if((l+1)%n.imagesPerColumn==0){k=n.ImageMargin;m=j.Bottom+n.ImageMargin;if(n.bScrollBar==false){if((m+iControlHeight)>n.imageViewHeight){m=n.ImageMargin}}}}}}};e.prototype.__InitControlsSize=function(){var o=this;if(o.bSingleMode==false){var j=o.__GetScrollWidth();if(o.bVerticalMode==true){if(o.__GetHowManyRows()<=o.imagesPerRow||o.bScrollBar==false){j=0}if(o.ImageMargin<=0||(o.ImageMargin>(o.imageViewWidth-j-3*o.imagesPerColumn))||(o.ImageMargin>(o.imageViewHeight-3*o.imagesPerRow))){var m=parseInt(o.imageViewHeight/(o.imagesPerRow*10));var n=parseInt((o.imageViewWidth-j)/(o.imagesPerColumn*10));var l=m<n?m:n;if(o.ImageMargin<=0){o.ImageMargin=parseInt(l)}else{o.ImageMargin=parseInt(o.ImageMargin<l?o.ImageMargin:l)}}}else{if(o.sHowManyImages<=o.imagesPerColumn||o.bScrollBar==false){j=0}if(o.ImageMargin<=0||(o.ImageMargin>(o.imageViewWidth-3*o.imagesPerColumn))||(o.ImageMargin>(o.imageViewHeight-j-3*o.imagesPerRow))){var m=parseInt(o.imageViewHeight-j)/(o.imagesPerRow*10);var n=parseInt((o.imageViewWidth)/(o.imagesPerColumn*10));var l=m<n?m:n;if(o.ImageMargin<=0){o.ImageMargin=parseInt(l)}else{o.ImageMargin=parseInt(o.ImageMargin<l?o.ImageMargin:l)}}}if(o.imagesPerColumn==o.imagesPerRow&&o.imagesPerRow==1){o.ImageMargin=0}var i=0;var k=0;if(o.bVerticalMode==true){i=o.imageViewHeight-o.ImageMargin-2*o.borderWidth;k=o.imageViewWidth-j-o.ImageMargin-2*o.borderWidth}else{i=o.imageViewHeight-j-o.ImageMargin-2*o.borderWidth;k=o.imageViewWidth-o.ImageMargin-2*o.borderWidth}o.iControlWidth=parseInt(k/o.imagesPerColumn-o.ImageMargin);o.iControlHeight=parseInt(i/o.imagesPerRow-o.ImageMargin)}else{o.ImageMargin=0;o.iControlWidth=o.imageViewWidth-2*o.borderWidth;o.iControlHeight=o.imageViewHeight-2*o.borderWidth}};e.prototype.GetDataImageControlList=function(){var i=this;return i.aryModelImageControl};e.prototype.SetDataImageControl=function(j){var l=this;if(j>l.aryModelImageControl.length||l.aryModelImageControl.length<=0){return}var k;if(j==l.aryModelImageControl.length){k=new a();k.imageIndex=j;l.aryModelImageControl.push(k)}else{k=l.aryModelImageControl[j]}if(k!=null){k.bIsDirty=true}var i=l.GetImageControl(j);if(null!=i){l.__GetImageAndAttach(i,k,j,true)}return true};e.prototype.AttachImagesForControl=function(i,j){i.AttachImage(j.imageToShow,j.imageWidth,j.imageHeight,j.imageIndex,j.aryOverlayRectangleData,j.bOriginalImage);i.Show();return true};e.prototype.__SetSelectionWinBorderColor=function(i){var j=this};e.prototype.__SetUnselectAll=function(){var l=this;var k=0;for(k=0;k<l.aryImageControls.length;k++){var j=l.aryImageControls[k];j.SetSelect(false)}};e.prototype.GetImageControl=function(k){var l=this;var j=l.__GetImageControlIndex(k);if(j>=0&&j<l.aryImageControls.length){var i=l.aryImageControls[j];return i}else{return null}};e.prototype.__GetImageControlIndex=function(j){var k=this;var i=-1;if(k.bSingleMode==true){i=0}else{if(k.bVerticalMode==true){i=j-k.__GetFirstVisibleRow()*k.imagesPerColumn}else{i=j-k.__GetFirstVisibleColumn()}}if(i>=0&&i<k.aryImageControls.length){return i}else{return -1}};e.prototype.__SetIfHScroll=function(i){var j=this;Funs2.output(j,"__SetIfHScroll"+i);j.horizontalScrollBar.SetVisible(i)};e.prototype.__GetIfHScroll=function(){var i=this;return i.horizontalScrollBar.GetVisible()==true?true:false};e.prototype.__SetIfVScroll=function(i){var j=this;Funs2.output(j,"__SetIfVScroll"+i);j.verticalScrollBar.SetVisible(i)};e.prototype.__GetIfVScroll=function(){var i=this;return i.verticalScrollBar.GetVisible()==true?true:false};e.prototype.__GetHScrollPosionValue=function(){var j=this;var i=j.horizontalScrollBar.GetCurrentPosition();if(i&&i>=0){return i}else{return 0}};e.prototype.__GetVScrollPosionValue=function(){var j=this;var i=j.verticalScrollBar.GetCurrentPosition();if(i&&i>=0){return i}else{return 0}};e.prototype.__SetHScrollMaxValue=function(j,i){var k=this;Funs2.output(k,"__SetHScrollMaxValue(totalSize,pageSize):"+j+","+i);k.horizontalScrollBar.InitScroll(j,i)};e.prototype.__SetVScrollMaxValue=function(j,i){var k=this;Funs2.output(k,"__SetVScrollMaxValue(totalSize,pageSize):"+j+","+i);k.verticalScrollBar.InitScroll(j,i)};e.prototype.__SetHScrollPotion=function(i){var j=this;j.horizontalScrollBar.GoPosition(i)};e.prototype.__SetVScrollPotion=function(i){var j=this;j.verticalScrollBar.GoPosition(i)};e.prototype.__SetHLocation=function(i,k){var j=this;j.horizontalScrollBar.SetLocation(i,k)};e.prototype.__SetVLocation=function(i,k){var j=this;j.verticalScrollBar.SetLocation(i,k)};e.prototype.__ChangeHControlSize=function(i,j){var k=this;k.horizontalScrollBar.ChangeControlSize(i,j)};e.prototype.__ChangeVControlSize=function(i,j){var k=this;k.verticalScrollBar.ChangeControlSize(i,j)};e.prototype.__GetScrollWidth=function(){return 16};e.prototype.SetSelectedImageArea=function(k,n,m,l,j){var o=this;var i=o.GetImageControl(k);if(null!=i){return i.SetSelectedImageArea(n,m,l,j)}return false};e.prototype.OverlayRectangle=function(r,n,m,q,k,j,l){var o=this;var p=o.GetImageControl(r);if(null!=p){p.OverlayRectangle(n,m,q,k,j,l)}var s=o.aryModelImageControl[r];var i=new b(n,m,q,k,j,l);return s.aryOverlayRectangleData.push(i)};e.prototype.GetMousePosition=function(){var j=this;var i=j.GetImageControl(j.cCurrentIndex);if(null!=i){return i.GetMousePosition()}else{return null}};e.prototype.ChangeImageViewSize=function(i,j){var k=this;if(i>=0){k.imageViewWidth=i;k.__ChangeHControlSize(i,16);k.__SetVLocation(i-k.__GetScrollWidth(),0)}if(j>=0){k.imageViewHeight=j;k.__ChangeVControlSize(16,j);k.__SetHLocation(0,j-k.__GetScrollWidth())}k.canvas.style.width=i+"px";k.canvas.style.height=j+"px";k.UpdateAllImage(k.aryModelImageControl,k.cCurrentIndex);return true};e.prototype.SetViewMode=function(q,k){var n=this;var l=n.imagesPerColumn;var o=n.imagesPerRow;var r=n.bSingleMode;var j=n.bVerticalMode;if(q>0){n.imagesPerColumn=q}if(k>0){n.imagesPerRow=k}if(q==-1&&k==-1){n.imagesPerRow=1;n.imagesPerColumn=1;n.bSingleMode=true}else{n.bSingleMode=false;if(k==-1){n.imagesPerRow=1;n.bVerticalMode=false}else{n.bVerticalMode=true}}n.iOldFirstVisibleRow=0;n.iOldFirstVisibleColum=0;if(n.bSingleMode==false){var m=0;for(m=0;m<n.aryImageControls.length;m++){var p=n.aryImageControls[m];if(p!=null){p.SetOrigMode(false)}}}if((l!=n.imagesPerColumn||o!=n.imagesPerRow)||(r!=n.bSingleMode)||(j!=n.bVerticalMode)){if(n.imagesPerRow==1&&n.imagesPerColumn==1){var m=0;for(m=0;m<n.aryImageControls.length;m++){var p=n.aryImageControls[m];if(p!=null){p.ClearControl()}}}n.UpdateAllImageInner(n.aryModelImageControl,n.cCurrentIndex,true)}return true};e.prototype.Clear=function(){var l=this;var k=l.aryImageControls.length;for(j=k-1;j>=0;j--){l.__RemoveControl(j)}var j=0;for(j=0;j<l.aryModelImageControl.length;j++){l.aryModelImageControl[j].Clear()}l.aryModelImageControl=[];l.__SetVScrollMaxValue(0,0);l.__SetHScrollMaxValue(0,0);l.__SetIfHScroll(false);l.__SetIfVScroll(false);return true};e.prototype.ShowImage=function(j,k){var l=this;l.__OnlySetCurrentIndex(j);if(l.bSingleMode==true){var i=l.GetImageControl(l.cCurrentIndex);if(null!=i){l.__GetImageAndAttach(i,k,j,false)}}return true};e.prototype.__GetImageAndAttach=function(q,n,k,m){var o=this;var j=parseInt(o.imageViewWidth/2);var i=parseInt(o.imageViewHeight/2);if(o.imagesPerRow==1&&o.imagesPerColumn==1){j=-1;i=-1;n.bOriginalImage=true}else{if(j<300){j=300}if(i<300){i=300}n.bOriginalImage=false}var p=false;if(m){p=true}else{if(n.bIsDirty==true||n.iImageControlWidth<j||n.iImageControlHeight<i||(n.iImageControlWidth>0&&j==-1)||(n.iImageControlHeight>0&&i==-1)){p=true}else{p=false}}q.ClearImage();q.SetCurrentIndex(k);var l=o.__GetImageControlIndex(k);if(l>=0){o.__SetArrayControlLoadImage(l,k,q,n,j,i,o.AttachImagesForControl,p)}};e.prototype.__SetArrayControlLoadImage=function(m,l,s,p,k,j,r,n){var q=this;var o=0;for(o=0;o<Dynamsoft.Lib.aryControlLoadImage.length;o++){var t=Dynamsoft.Lib.aryControlLoadImage[o];if(t.iControlIndex==m&&t.View==q){t.iImageIndex=l;t.imgControl=s;t.modelImageControl=p;t.iWidth=k;t.iHeight=j;t.AttachImagesForControl=r;t.bOnlyFromServer=n;return}}Dynamsoft.Lib.aryControlLoadImage.push(new h(m,l,q,s,p,k,j,r,n,q.BaseUrl))};e.prototype.SetIfFitWindowAndType=function(j){var k=this;if(k.bSingleMode==true){k.bIfFitWindow=true;k.enumDWTFitWindowType=j;var i=k.GetImageControl(k.cCurrentIndex);if(null!=i){i.SetIfFitWindow(true,j);i.Show()}}else{k.bIfFitWindow=true}return true};e.prototype.GetAllowMultiSelect=function(){var i=this;return i.AllowMultiSelect};e.prototype.SetAllowMultiSelect=function(i){var j=this;j.AllowMultiSelect=i;return true};e.prototype.GetFitWindowType=function(){var i=this;return i.enumDWTFitWindowType};e.prototype.SetSelectionRectAspectRatio=function(i){var j=this;j.ratio=i;j.__AttachImagesInner(true,false);return true};e.prototype.SetFitWindowType=function(i){var j=this;j.enumDWTFitWindowType=i;if(j.bSingleMode){j.__AttachImagesInner(true,false)}else{j.bIfFitWindow=true;j.enumDWTFitWindowType=0}return true};e.prototype.GetIfFitWindow=function(){var i=this;return i.bIfFitWindow};e.prototype.SetIfFitWindow=function(i){var j=this;j.bIfFitWindow=i;if(j.bSingleMode){j.__AttachImagesInner(true,false)}else{j.bIfFitWindow=true;j.enumDWTFitWindowType=0}return true};e.prototype.GetImageMargin=function(){var i=this;return i.ImageMargin};e.prototype.SetImageMargin=function(i){var j=this;j.ImageMargin=i;j.__ReInitChildrenPosition();j.__AttachImagesInner(false,false);return true};e.prototype.GetSelectionImageBorderColor=function(){var i=this;return i.SelectionImageBorderColor};e.prototype.SetSelectionImageBorderColor=function(i){var j=this;j.SelectionImageBorderColor=i;j.__AttachImagesInner(true,false);return true};e.prototype.GetZoom=function(){var i=this;return i.fZoom};e.prototype.SetZoom=function(k){var j=this;if(k<j.MIN_ZOOM){k=j.MIN_ZOOM}if(k>j.MAX_ZOOM){k=j.MAX_ZOOM}j.fZoom=k;if(j.bSingleMode==true){j.bIfFitWindow=false;j.enumDWTFitWindowType=0;var i=j.GetImageControl(j.cCurrentIndex);if(null!=i){i.SetZoom(j.fZoom)}}else{j.bIfFitWindow=true}return true};e.prototype.ZoomIn=function(){var l=this;if(l.bSingleMode==true){var k=15000;var i=l.aryModelImageControl[l.cCurrentIndex];var j=(Math.floor(l.fZoom*100*l.zoomInStep)+1);if(1<j&&j<2501){if(parseInt(i.imageWidth*l.fZoom)>k||parseInt(i.imageHeight*l.fZoom)>k){Funs2.output(l,"You have reached the limit for zooming in");return false}else{l.SetZoom(j/100)}}else{Funs2.output(l,"You have reached the limit for zooming in");alert("You have reached the limit for zooming in");return false}}return true};e.prototype.ZoomOut=function(){var j=this;if(j.bSingleMode==true){var i=(Math.floor(j.fZoom*100*j.zoomOutStep)-1);if(1<i&&i<6501){j.SetZoom(i/100)}else{Funs2.output(j,"You have reached the limit for zooming out");return false}}return true};e.prototype.GetMouseShape=function(){var i=this;return i.bHand};e.prototype.SetMouseShape=function(i){var j=this;j.bHand=i;j.__AttachImagesInner(true,false);return true};e.prototype.SetMouseShapeByIndex=function(j,k){var l=this;l.__OnlySetCurrentIndex(j);l.bHand=k;var i=l.GetImageControl(j);if(null!=i){i.SetMouseShape(l.bHand);i.Show();return true}return false};e.prototype.GetShowPageNumber=function(){var i=this;return i.bShowPageNumber};e.prototype.SetShowPageNumber=function(i){var j=this;j.bShowPageNumber=i;j.__AttachImagesInner(true,false);return true};e.prototype.SetBackgroundColor=function(i){var j=this;j.BackgroundColor=i;j.canvas.style.backgroundColor=i;j.__AttachImagesInner(true,false);return true};e.prototype.Go=function(i){var j=this;j.__GoInner(i,true,false);return true};e.prototype.SetCurrentIndexOnly=function(i){var j=this;return j.__GoInner(i,true,false)};e.prototype.__GoInner=function(n,q,r){var l=this,p=l.cCurrentIndex;if(n<l.aryModelImageControl.length&&n>=0){if(r==false){l.__OnlySetCurrentIndex(n)}if(q==true){if(r==true){l.__SetCurrentIndex(l.cCurrentIndex)}else{l.__SetCurrentIndexWithoutRefreshUI(l.cCurrentIndex)}}if(r==true){l.__AttachImages(false)}l.iCurrentRow=-1;l.iCurrentColumn=-1;if(q==false){if(l.bVerticalMode==true){var o=l.iCurrentRow;l.iCurrentRow=l.__GetRow(n);if(l.iCurrentRow!=o&&(l.iCurrentRow<=l.iOldFirstVisibleRow||(l.iCurrentRow>l.iOldFirstVisibleRow))){var j=l.__GetFirstVisibleRow();if(l.iOldFirstVisibleRow!=j){l.iOldFirstVisibleRow=j;var m=j*l.imagesPerColumn;l.__fireEvent("OnTopImageInTheViewChanged",m)}}}else{var k=l.iCurrentColumn;l.iCurrentColumn=n;if(l.iCurrentColumn!=k&&(l.iCurrentColumn<l.iOldFirstVisibleColum||(l.iCurrentColumn>l.iOldFirstVisibleColum))){var i=l.__GetFirstVisibleColumn();if(l.iOldFirstVisibleColum!=i){l.iOldFirstVisibleColum=i;var m=i;l.__fireEvent("OnTopImageInTheViewChanged",m)}}}}}return true};e.prototype.Print=function(){var k=this;if(k.cCurrentIndex<0){return}var j=Funs2.getImageUrl(k.BaseUrl,k.cCurrentIndex,-1,-1);var i=k.aryModelImageControl[k.cCurrentIndex];Funs2.print(j,i.imageWidth,i.imageHeight);return true};e.prototype.SetSelectedImageCount=function(i){var j=this;j.aryCurrentSelectedImageIndicesInBuffer.splice(i);j.__SetUnselectAll();j.__SetSelectedImageIndicesInBuffer();return true};e.prototype.SetSelectedImageIndex=function(j,i){var k=this;k.aryCurrentSelectedImageIndicesInBuffer[j]=i;k.__SetUnselectAll();k.__SetSelectedImageIndicesInBuffer();return true};e.prototype.__SetSelectedImageIndicesInBuffer=function(){var m=this;if(m.aryCurrentSelectedImageIndicesInBuffer.length==0){if(m.cCurrentIndex>=0){m.aryCurrentSelectedImageIndicesInBuffer.push(m.cCurrentIndex)}}var k=0;for(k=0;k<m.aryCurrentSelectedImageIndicesInBuffer.length;k++){var l=m.aryCurrentSelectedImageIndicesInBuffer[k];var j=m.GetImageControl(l);if(null!=j){j.SetSelect(true);j.Show()}}};e.prototype.__OnlySetCurrentIndex=function(i){var j=this;j.cCurrentIndex=i;j.__fireEvent("onResetCurrentIndex",i);if(j.aryCurrentSelectedImageIndicesInBuffer[0]!=j.cCurrentIndex){j.aryCurrentSelectedImageIndicesInBuffer=[];j.aryCurrentSelectedImageIndicesInBuffer.push(j.cCurrentIndex)}};e.prototype.__MousewheelChanged=function(i){if(i.__MousewheelValue>0){i.__MousewheelUp(i.__MousewheelValue)}else{if(i.__MousewheelValue<0){i.__MousewheelDown(-i.__MousewheelValue)}}i.__MousewheelValue=0};e.prototype.__MousewheelUp=function(l){var m=this;if(m.bSingleMode==false){if(m.__GetIfHScroll()==true||m.__GetIfVScroll()==true){var j=0,k=0;if(m.bVerticalMode==true){j=m.__GetFirstVisibleRow()*m.imagesPerColumn;k=j-l*m.imagesPerColumn}else{j=m.__GetFirstVisibleColumn();k=j-l}if(k<0){k=0}Funs2.output(m,"__MousewheelUp(baseIndex, index): "+[j,k].join(","));m.__SetScrollByIndex(k)}}else{var i=m.GetImageControl(m.cCurrentIndex);if(null!=i){i.ImageMoveUp()}}};e.prototype.__MousewheelDown=function(l){var m=this;if(m.bSingleMode==false){if(m.__GetIfHScroll()==true||m.__GetIfVScroll()==true){var j=0,k=0;if(m.bVerticalMode==true){j=m.__GetFirstVisibleRow()*m.imagesPerColumn;k=j+l*m.imagesPerColumn}else{j=m.__GetFirstVisibleColumn();k=j+l}if(j+m.imagesPerColumn*m.imagesPerRow<m.aryModelImageControl.length){Funs2.output(m,"__MousewheelDown(baseIndex, index): "+[j,k].join(","));m.__SetScrollByIndex(k,true)}}}else{var i=m.GetImageControl(m.cCurrentIndex);if(null!=i){i.ImageMoveDown()}}};e.prototype.__Previous=function(){var j=this;if(j.bSingleMode==false){j.Go(j.cCurrentIndex-1)}else{var i=j.GetImageControl(j.cCurrentIndex);if(null!=i){i.ImageMoveLeft()}}return true};e.prototype.__Next=function(){var j=this;if(j.bSingleMode==false){j.__SetCurrentIndexInner(j.cCurrentIndex+1,true)}else{var i=j.GetImageControl(j.cCurrentIndex);if(null!=i){i.ImageMoveRight()}}return true};e.prototype.__PreviousUp=function(){var k=this;if(k.bSingleMode==false){var j=k.cCurrentIndex-k.imagesPerColumn;if(j>=0){k.Go(j)}}else{var i=k.GetImageControl(k.cCurrentIndex);if(null!=i){i.ImageMoveUp()}}return true};e.prototype.__NextDown=function(){var k=this;if(k.bSingleMode==false){var j=k.cCurrentIndex+k.imagesPerColumn;if(j<k.aryModelImageControl.length){k.__SetCurrentIndexInner(j,true)}}else{var i=k.GetImageControl(k.cCurrentIndex);if(null!=i){i.ImageMoveDown()}}return true};e.prototype.__PageUp=function(){var l=this;if(l.bSingleMode==false){if(l.bVerticalMode==true){var j=l.__GetFirstVisibleRow()*l.imagesPerColumn;var k=j-l.imagesPerColumn*l.imagesPerRow;if(k>=0){l.__SetCurrentIndexInner(k,false)}else{l.__SetCurrentIndexInner(0,false)}}else{}}else{var i=l.GetImageControl(l.cCurrentIndex);if(null!=i){i.ImageMovePageUp()}}return true};e.prototype.__PageDown=function(){var l=this;if(l.bSingleMode==false){if(l.bVerticalMode==true){var j=l.__GetFirstVisibleRow()*l.imagesPerColumn;var k=j+l.imagesPerColumn*l.imagesPerRow;if(k<l.aryModelImageControl.length){l.__SetCurrentIndexInner(k,false)}else{l.__SetCurrentIndexInner(l.aryModelImageControl.length-1,false,false)}}else{}}else{var i=l.GetImageControl(l.cCurrentIndex);if(null!=i){i.ImageMovePageDown()}}return true};e.prototype.__Home=function(){var j=this;if(j.bSingleMode==false){j.__SetCurrentIndexInner(0,false)}else{var i=j.GetImageControl(j.cCurrentIndex);if(null!=i){i.ImageMoveHome()}}return true};e.prototype.__End=function(){var j=this;if(j.bSingleMode==false){j.__SetCurrentIndexInner(j.aryModelImageControl.length-1,false)}else{var i=j.GetImageControl(j.cCurrentIndex);if(null!=i){i.ImageMoveEnd()}}return true};e.prototype.__fireEvent=function(i,j){var k=this;if(c.isFunction(k[i])){return k[i](j)}return true};e.prototype.handlerKeyDownView=function(j){var k=this,i=true;if(!k.bFocus){return i}k.iCurrentRow=-1;k.iCurrentColumn=-1;switch(j.keyCode){case 37:i=false;k.__Previous();break;case 39:i=false;k.__Next();break;case 38:i=false;k.__PreviousUp();break;case 40:i=false;k.__NextDown();break;case 33:i=false;k.__PageUp();break;case 34:i=false;k.__PageDown();break;case 35:i=false;k.__End();break;case 36:i=false;k.__Home();break;case 82:break;case 107:k.ZoomIn();break;case 109:k.ZoomOut();break}if(i==false){c.stopPropagation(j)}return i};Dynamsoft.Lib.UI=Dynamsoft.Lib.UI||{};Dynamsoft.Lib.UI.ImageUIView=e;Dynamsoft.Lib.UI.ModelImageControl=a;var f=function(j){var i=true;Dynamsoft.Lib.each(d,function(k){if(k instanceof Dynamsoft.Lib.UI.ImageUIView){if(k.bFocus){i=k.handlerKeyDownView(j);if(!i){return false}}}});return i};Dynamsoft.Lib.addEventListener(document.documentElement,"keydown",f)})(Dynamsoft.Lib);Dynamsoft.Lib.aryControlLoadImage=[];Dynamsoft.Lib.imageControlCount=0;Dynamsoft.Lib.AttachAndShowImage=function(){if(Dynamsoft.Lib.aryControlLoadImage.length==0){setTimeout(Dynamsoft.Lib.AttachAndShowImage,500);return}var a=0;var b=Dynamsoft.Lib.aryControlLoadImage[0];Dynamsoft.Lib.aryControlLoadImage.splice(0,1);if(b.iControlIndex>=0&&b.iControlIndex<Dynamsoft.Lib.imageControlCount){if(b.bOnlyFromServer){Dynamsoft.Lib.OnGetImageFromServer(b.imgControl,b.modelImageControl,b.iImageIndex,b.iWidth,b.iHeight,b.BaseUrl,b.AttachImagesForControl)}else{Dynamsoft.Lib.OnGetImageByURL(b.imgControl,b.modelImageControl,b.iImageIndex,b.iWidth,b.iHeight,b.BaseUrl,b.AttachImagesForControl)}}else{setTimeout(Dynamsoft.Lib.AttachAndShowImage,0)}};Dynamsoft.Lib.OnGetImageByURL=function(e,c,f,i,d,g,b){var a,j;if(b){if(c.imageUrl&&c.imageUrl!=""){e.ClearImage();j=new Image();j.crossOrigin="Anonymous";j.src=c.imageUrl;e.SetBindIndex(f);j.onload=function(){e.tmpImage=false;if(e.GetBindIndex()==f){c.imageToShow=j;c.imageWidth=j.width;c.imageHeight=j.height;c.iImageControlWidth=i;c.iImageControlHeight=d;c.bIsDirty=false;b(e,c)}setTimeout(Dynamsoft.Lib.AttachAndShowImage,0)};j.onerror=function(){setTimeout(Dynamsoft.Lib.AttachAndShowImage,0)};if(e.tmpImage){e.tmpImage.src="data:,";e.tmpImage.onload=undefined}e.tmpImage=j}else{Dynamsoft.Lib.OnGetImageFromServer(e,c,f,i,d,g,b)}}else{setTimeout(Dynamsoft.Lib.AttachAndShowImage,0)}return true};Dynamsoft.Lib.OnGetImageFromServer=function(e,c,f,i,d,g,b){var a,j;if(b&&g){e.ClearImage();a=Funs2.getImageUrl(g,f,i,d);j=new Image();j.crossOrigin="Anonymous";j.src=a;e.SetBindIndex(f);j.onload=function(){e.tmpImage=false;if(e.GetBindIndex()==f){c.imageToShow=j;c.imageWidth=j.width;c.imageHeight=j.height;c.imageUrl=a;c.iImageControlWidth=i;c.iImageControlHeight=d;c.bIsDirty=false;b(e,c)}setTimeout(Dynamsoft.Lib.AttachAndShowImage,0)};j.onerror=function(){setTimeout(Dynamsoft.Lib.AttachAndShowImage,0)};if(e.tmpImage){e.tmpImage.src="data:,";e.tmpImage.onload=undefined}e.tmpImage=j}else{setTimeout(Dynamsoft.Lib.AttachAndShowImage,0)}return true};setTimeout(Dynamsoft.Lib.AttachAndShowImage,500);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(c){if(!Dynamsoft.Lib.product.bChromeEdition){return}var f="eng",d=c.DOM,b={btninfo:["previous","next","rotateleft","rotate","rotateright","deskew","crop","changeimagesize","flip","mirror","zoomin","originalsize","zoomout","stretch","fit","fitw","fith","print","hand","rectselect","restore","save"],titlelan:["eng","chi"],titles:[["Previous Image","Next Image","Rotate Left","Rotate","Rotate Right","De Skew","Crop Selected Area","Change Image Size","Flip","Mirror","Zoom In","Original Size","Zoom Out","Stretch Mode","Fit Canvas","Fit Horizontally","Fit Vertically","Print","Hand","Select","Restore","Save Changes"],["Previous Image","Next Image","Rotate Left","Rotate","Rotate Right","De Skew","Crop Selected Area","Change Image Size","Flip","Mirror","Zoom In","Original Size","Zoom Out","Stretch Mode","Fit Canvas","Fit Horizontally","Fit Vertically","Print","Hand","Select","Restore","Save Changes"]]},e={isFunction:function(g){return g&&typeof(g)==="function"},init:function(j,h){var k=j,i=h||{},g=Math.floor(Math.random()*100000+1);k.container=i.Container;k.containerWidth=i.width?i.width:0;k.containerHeight=i.height?i.height:0;k.width=k.containerWidth;k.height=k.containerHeight;k.defaultIndex=0;k.bEdit=i.bEdit||false;k.evt_switch=i.evt_switch||"";k.evt_mouseMove=i.evt_mouseMove||"";k.evt_mouseIn=i.evt_mouseIn||"";k.evt_mouseOut=i.evt_mouseOut||"";k.evt_mouseClick=i.evt_mouseClick||"";k.evt_mouseDblClick=i.evt_mouseDblClick||"";k.selectionImageBorderColor=false;k.backgroundColor="rgb(255, 255, 255)";k.onRefreshUI=i.onRefreshUI||false;k.onMouseRightClick=i.onMouseRightClick||false;k.onMouseClick=i.onMouseClick||false;k.onMouseDoubleClick=i.onMouseDoubleClick||false;k.onMouseMove=i.onMouseMove||false},addClass:function(h,g){d.one(h).addClass(g)},removeClass:function(h,g){d.one(h).removeClass(g)},getToolBar:function(r,g,t){var q;for(var m=0;m<b.titlelan.length;m++){if(b.titlelan[m]==f){q=b.titles[m];break}else{q=b.titles[0]}}var k=document.createElement("ul");var l=b.btninfo.length;var h=g/l>t?t*0.8:g/l*0.8;h=Math.floor(h);var s=document.createElement("li");s.style.padding="0";s.style.margin="0";s.style.width=g+"px";s.style.height=t+"px";for(var p=0;p<l;p++){var n=document.createElement("img");n.src=Dynamsoft.WebTwainEnv.ResourcesPath+"/reference/imgs/"+b.btninfo[p]+".png";n.className="Class_D_DWT_Editor_Buttons_"+b.btninfo[p];n.title=q[p];n.style.width=h+"px";n.style.height=h+"px";n.style.paddingTop=h/8+"px";switch(b.btninfo[p]){case"previous":n.onclick=function(){r.previous_btn()};break;case"next":n.onclick=function(){r.next_btn()};break;case"rotateleft":n.style.marginLeft=h+"px";n.onclick=function(){r.RotateLeft()};break;case"rotate":n.onclick=function(){r.RotateAnyAngle(this)};break;case"rotateright":n.onclick=function(){r.RotateRight()};break;case"deskew":n.onclick=function(){r.Deskew()};break;case"crop":n.onclick=function(){r.Crop_btn()};break;case"changeimagesize":n.onclick=function(){r.ChangeImageSizeGetinput(this)};break;case"flip":n.onclick=function(){r.Flip()};break;case"mirror":n.onclick=function(){r.Mirror()};break;case"zoomin":n.style.marginLeft=h+"px";n.onclick=function(){r.ZoomIn()};break;case"originalsize":n.onclick=function(){r.OriginalSize()};break;case"zoomout":n.onclick=function(){r.ZoomOut()};break;case"stretch":n.onclick=function(){r.StrechMode()};break;case"fit":n.onclick=function(){r.FitsWindowSize()};break;case"fitw":n.onclick=function(){r.FitsWindowWidth()};break;case"fith":n.onclick=function(){r.FitsWindowHeight()};break;case"print":n.onclick=function(){r.print()};break;case"hand":n.style.marginLeft=h+"px";n.onclick=function(){r.setMouseShape(true)};break;case"rectselect":n.style.marginLeft=h+"px";n.onclick=function(){r.setMouseShape(false)};break;case"restore":n.style.display="none";n.style.marginLeft=h+"px";n.onclick=function(){r.RestoreImage()};break;case"save":n.style.display="none";n.onclick=function(){r.SaveImage()};break}s.appendChild(n)}var u=document.createElement("img");u.src=Dynamsoft.WebTwainEnv.ResourcesPath+"/reference/imgs/close.png";u.style.width=h+"px";u.style.height=h+"px";u.style.paddingTop=h/8+"px";u.title="Click to Close Window";u.className="floatRight";u.onclick=function(){r.CloseImageEditor()};s.appendChild(u);k.appendChild(s);return k},output:function(h,g){if(Dynamsoft.WebTwainEnv.Debug){console.log(g)}}};function a(j,h){var l=this,i=h||{},g,k='<div class="D_ImageUIEditor noPaddingnoMarginInside thinborder"></div>';l._UIManager=j;l.aryModelImageControl=l.__NewAryModelImageControl(h.aryModelImageControl);l._UIView;l.iControlWidth=0;l.iControlHeight=0;l._stwain=h.stwain;l.BaseUrl=h.BaseUrl;l.cIndex=h.cIndex;l.totalImagesCount=l.aryModelImageControl.length;l._IfImageChanged=false;e.init(l,i);g=l.container;g.append(k);l.UIEditor=g.one(".D_ImageUIEditor");l.bShow=false;l.zoom=1;l.aspectRatio=1;l.__fitWindowType=0;l.toolbar={self:null,filled:false,width:0,height:0};l.Left=0;l.Top=0;l.Right=0;l.Bottom=0;window.onresize=function(){l.ShowImageEditorEx(-1,-1,-1,-1)}}a.prototype.__NewAryModelImageControl=function(j){var l=this;var k=[];var h=0;for(h=0;h<j.length;h++){var g=new Dynamsoft.Lib.UI.ModelImageControl();g.bIsDirty=true;g.imageToShow=null;g.imageWidth=-1;g.imageHeight=-1;g.iImageControlWidth=-1;g.iImageControlHeight=-1;g.imageIndex=j[h].imageIndex;g.aryOverlayRectangleData=[];k.push(g)}return k};a.prototype.ShowImageEditorEx=function(h,k,g,j){var i=this;g=window.innerWidth;j=window.innerHeight;h=0;k=0;i.width=g-2;i.height=j-2;i.UIEditor.css({display:"",width:i.width+"px",height:i.height+"px",position:"fixed",left:h,top:k,"z-index":"9999"});i.isFitWindow=true;i.UIEditor.show();document.documentElement.scrollLeft=0;document.documentElement.scrollTop=0;document.body.style.overflow="hidden";if(i.toolbar.filled){i.toolbar.filled=false}i.toolbar.width=i.width;i.toolbar.height=Math.floor(i.height/20<20?20:i.height/20);this.updateEditor();return true};a.prototype.updateEditor=function(){var n=this;e.output(n,'Editor is under mode "'+n.mode+'"');if(n.toolbar.self){if(!n.bShow){return}if(n.toolbar.width+n.toolbar.height==0){e.addClass(n.toolbar.self,"notdisplayed")}else{n.toolbar.self.style.width=n.toolbar.width+"px";n.toolbar.self.style.height=n.toolbar.height+"px";if(!n.toolbar.filled){n.toolbar.filled=true;while(n.toolbar.self.firstChild){n.toolbar.self.removeChild(n.toolbar.self.firstChild)}n.toolbar.self.appendChild(e.getToolBar(n,n.toolbar.width,n.toolbar.height));if(n._IfImageChanged){var j=d.one(n.toolbar.self).one(".Class_D_DWT_Editor_Buttons_save"),m=d.one(n.toolbar.self).one(".Class_D_DWT_Editor_Buttons_restore");j[0].style.display="";m[0].style.display=""}}e.removeClass(n.toolbar.self,"notdisplayed");e.removeClass(n.toolbar.self,"overlay")}n.iControlWidth=n.width-2;n.iControlHeight=(n.height-n.toolbar.height-2);console.log("ChangeImageViewSize: "+[n.iControlWidth,n.iControlHeight].join(","));n._UIView.ChangeImageViewSize(n.iControlWidth,n.iControlHeight);n.updateMode()}else{var g=(Math.floor(Math.random()*1000+1)).toString();var k,l,i=["D_ImageUIEditor","noPaddingnoMarginInside","thinborder"];k=document.createElement("div");k.id="ds-dwt-viewerToolbar"+g;k.style.width=n.toolbar.width+"px";k.style.height=n.toolbar.height+"px";k.style.whiteSpace="normal";k.className="ds-dwt-viewerToolbar";l=document.createElement("div");l.id="ds-dwt-imageViewer"+g;l.style.width=n.width+"px";l.style.height=(n.height-n.toolbar.height)+"px";l.style.backgroundColor=n.backgroundColor;l.className="floatLeft ds-dwt-imageViewer";n.UIEditor.css({width:n.width+"px",height:n.height+"px"});n.UIEditor.append(k);n.UIEditor.append(l);n.iControlWidth=n.width-2;n.iControlHeight=(n.height-n.toolbar.height-2);var h={Container:n.container.one(".ds-dwt-imageViewer"),Width:n.iControlWidth,Height:n.iControlHeight,borderWidth:0};h.onImageAreaSelected=function(q){console.log("__onImageAreaSelected: "+[q.left,q.top,q.right,q.bottom].join(","));n.Left=q.left;n.Top=q.top;n.Right=q.right;n.Bottom=q.bottom;var p=d.one(n.toolbar.self).one(".Class_D_DWT_Editor_Buttons_crop");if(p&&p[0]){var o=p[0].src;o=o.replace("crop_grey.","crop.");p[0].src=o;p.style("cursor","pointer")}};h.onImageAreaDeSelected=function(){console.log("__onImageAreaDeSelected: ");n.Left=0;n.Top=0;n.Right=0;n.Bottom=0;if(d.one(n.toolbar.self)){n.__SetCropButtonGrey(false)}};n._UIView=new Dynamsoft.Lib.UI.ImageUIView(h);n._UIView.BaseUrl=n.BaseUrl;n._UIView.aryModelImageControl=n.aryModelImageControl;n._UIView.cCurrentIndex=n.cIndex;n._UIView.__fireEvent("onResetCurrentIndex",n.cIndex);n._UIView.SetViewMode(-1,-1);n.UIEditor.attr("class",i.join(" "));n.toolbar.self=document.getElementById("ds-dwt-viewerToolbar"+g);n.updateEditor()}};a.prototype.updateMode=function(j){var k=this,i;var h=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_next"),g=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_previous");if(k.totalImagesCount>1){if(h&&h[0]){if(k.cIndex==k.totalImagesCount-1){i=h[0].src;i=i.replace("next.","next_grey.");h[0].src=i;h[0].style.cursor="auto"}else{i=h[0].src;i=i.replace("next_grey.","next.");h[0].src=i;h[0].style.cursor="pointer"}if(k.cIndex==0){i=g[0].src;i=i.replace("previous.","previous_grey.");g[0].src=i;g[0].style.cursor="auto"}else{i=g[0].src;i=i.replace("previous_grey.","previous.");g[0].src=i;g[0].style.cursor="pointer"}}}else{if(h&&h[0]){i=h[0].src;i=i.replace("next.","next_grey.");h[0].src=i;h[0].style.cursor="auto";i=g[0].src;i=i.replace("previous.","previous_grey.");g[0].src=i;g[0].style.cursor="auto"}}k.__SetCropButtonGrey(true);k.setMouseShape(false)};a.prototype.CloseImageEditor=function(){var g=this;Dynamsoft.Lib.hide("J_ImgSizeEditor");Dynamsoft.Lib.hide("J_RotateAnyAngle");window.onresize=null;if(g._IfImageChanged){g.ShowDialogForSaveImage(-1,true);return}document.body.style.overflow="";g.__HideImageEditorInner()};a.prototype.__HideImageEditorInner=function(){var g=this;g._UIView.Clear();g.aryModelImageControl=[];g.container.remove()};a.prototype.previous_btn=function(){var i=this,g,h=d.one(i.toolbar.self).one(".Class_D_DWT_Editor_Buttons_previous");if(h&&h[0]){g=h[0].src;if(g.indexOf("grey")!=-1){return}else{i.previous()}}};a.prototype.next_btn=function(){var i=this,g,h=d.one(i.toolbar.self).one(".Class_D_DWT_Editor_Buttons_next");if(h&&h[0]){g=h[0].src;if(g.indexOf("grey")!=-1){return}else{i.next()}}};a.prototype.previous=function(){var g=this;g.go(g.cIndex-1)};a.prototype.next=function(){var g=this;g.go(g.cIndex+1)};a.prototype.go=function(g){var h=this;if(h._IfImageChanged){h.ShowDialogForSaveImage(g,false);return}h.__goInner(g)};a.prototype.__goInner=function(j){var k=this;if(typeof(j)!=="undefined"){if(j<0||j>=k.totalImagesCount){return}k.cIndex=j;k._UIView.ShowImage(j,k.aryModelImageControl[k.cIndex]);k._UIManager.getView().SetCurrentIndexOnly(j)}var h=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_previous"),g=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_next");if(k.cIndex==0){if(h&&h[0]){var i=h[0].src;i=i.replace("previous.","previous_grey.");h[0].src=i;h[0].style.cursor="auto";if(k.totalImagesCount>1){i=g[0].src;i=i.replace("next_grey.","next.");g[0].src=i;g[0].style.cursor="pointer"}}}else{if(k.cIndex==k.totalImagesCount-1){if(g&&g[0]){var i=g[0].src;i=i.replace("next.","next_grey.");g[0].src=i;g[0].style.cursor="auto";if(k.totalImagesCount>1){i=h[0].src;i=i.replace("previous_grey.","previous.");h[0].src=i;h[0].style.cursor="pointer"}}}else{if(k.totalImagesCount>1){if(h&&h[0]){var i=h[0].src;i=i.replace("previous_grey.","previous.");h[0].src=i;h[0].style.cursor="pointer"}if(g&&g[0]){var i=g[0].src;i=i.replace("next_grey.","next.");g[0].src=i;g[0].style.cursor="pointer"}}}}if(k._IfImageChanged){return}};a.prototype.Rotate=function(g,h){var i=this;if(typeof g==="undefined"||typeof h==="undefined"){alert("Not enough paramters")}else{i._IfImageChanged=true;i._stwain.Rotate(i.cIndex,g,h)}};a.prototype.RotateEx=function(g,i,h){var j=this;if(typeof g==="undefined"||typeof i==="undefined"||typeof h==="undefined"){alert("Not enough paramters")}else{j._IfImageChanged=true;j._stwain.RotateEx(j.cIndex,g,i,h)}};a.prototype.RotateLeft=function(){var g=this;g._IfImageChanged=true;g._stwain.RotateLeft(g.cIndex)};a.prototype.RotateAnyAngle=function(k){var m=this;Dynamsoft.Lib.hide("J_ImgSizeEditor");if(!Dynamsoft.Lib.get("J_RotateAnyAngle")){var j=['<div id="J_RotateAnyAngle" class="ds-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="J_Angle"><b>Angle :</b>','<input type="text" id="J_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="J_Angle_InterpolationMethod"><b>Interpolation:</b>&nbsp;','<select size="1" id="J_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="J_KeepSize"><b></b>','<input type="checkbox" id="J_KeepSize"/>Keep size</label></li>',"</ul>","<div>",'<input id="J_btnRotateAnyAngleOK" type="button" value="  OK  "/>','<span><input id= "J_btnCancelRotateAnyAngle" type="button" value="Cancel" /></span>',"</div>","</div>"];d.one("body").append(j.join(""))}var i=Dynamsoft.Lib.get("J_Angle_InterpolationMethod");i.options.length=0;i.options.add(new Option("NearestNeighbor",1));i.options.add(new Option("Bilinear",2));i.options.add(new Option("Bicubic",3));var g=Dynamsoft.Lib.get("J_btnRotateAnyAngleOK");g.onclick=function(){var q=Dynamsoft.Lib.get("J_Angle").value;Dynamsoft.Lib.get("J_Angle").className="";re=/^\d+$/;if(!re.test(q)||q<=0){Dynamsoft.Lib.get("J_Angle").className+=" invalid";Dynamsoft.Lib.get("J_Angle").focus();alert("Error: The angle you entered is invalid.");return}var p=Dynamsoft.Lib.get("J_KeepSize");var o=p.checked;var n=m.RotateEx(q,o,Dynamsoft.Lib.get("J_Angle_InterpolationMethod").selectedIndex+1);if(m._stwain.ErrorCode==0){Dynamsoft.Lib.hide("J_RotateAnyAngle");return}};var h=Dynamsoft.Lib.get("J_btnCancelRotateAnyAngle");h.onclick=function(){Dynamsoft.Lib.hide("J_RotateAnyAngle")};var l=Dynamsoft.Lib.get("J_RotateAnyAngle");Dynamsoft.Lib.toggle("J_RotateAnyAngle");l.style.top=k.y+k.offsetHeight+document.documentElement.scrollTop+"px";l.style.left=k.x+document.documentElement.scrollLeft+"px";Dynamsoft.Lib.get("J_Angle").value="45"};a.prototype.RotateRight=function(){var g=this;g._IfImageChanged=true;g._stwain.RotateRight(g.cIndex)};a.prototype.Deskew=function(){var g=this;g.RotateEx(g._stwain.GetSkewAngle(g.cIndex),true,1)};a.prototype.Flip=function(){var g=this;g._IfImageChanged=true;g._stwain.Flip(g.cIndex)};a.prototype.Mirror=function(){var g=this;g._IfImageChanged=true;g._stwain.Mirror(g.cIndex)};a.prototype.ChangeImageSize=function(h,g,i){var j=this;j._IfImageChanged=true;j._stwain.ChangeImageSize(j.cIndex,h,g,i)};a.prototype.ChangeImageSizeGetinput=function(i){var m=this;Dynamsoft.Lib.hide("J_RotateAnyAngle");if(!Dynamsoft.Lib.get("J_ImgSizeEditor")){var h=['<div id="J_ImgSizeEditor" class="ds-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="J_img_height"><b>New Height :</b>','<input type="text" id="J_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="J_img_width"><b>New Width :</b>&nbsp;','<input type="text" id="J_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>Interpolation method:",'<select size="1" id="J_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="J_btnChangeImageSizeOK" type="button" value="  OK  "/>','<span><input id= "J_btnCancelChange" type="button" value="Cancel" /></span>',"</div>","</div>"];d.one("body").append(h.join(""))}var g=Dynamsoft.Lib.get("J_InterpolationMethod");g.options.length=0;g.options.add(new Option("NearestNeighbor",1));g.options.add(new Option("Bilinear",2));g.options.add(new Option("Bicubic",3));var k=Dynamsoft.Lib.get("J_btnChangeImageSizeOK");k.onclick=function(){var p=Dynamsoft.Lib.get("J_img_width").value,n=Dynamsoft.Lib.get("J_img_height").value;Dynamsoft.Lib.get("J_img_width").className="";Dynamsoft.Lib.get("J_img_height").className="";re=/^\d+$/;if(!re.test(n)||n<=0){Dynamsoft.Lib.get("J_img_height").className+=" invalid";Dynamsoft.Lib.get("J_img_height").focus();alert("Error: The height you entered is invalid.");return}if(!re.test(p)||p<=0){Dynamsoft.Lib.get("J_img_width").className+=" invalid";Dynamsoft.Lib.get("J_img_width").focus();alert("Error: The width you entered is invalid.");return}var o=m.ChangeImageSize(p,n,Dynamsoft.Lib.get("J_InterpolationMethod").selectedIndex+1);if(m._stwain.ErrorCode==0){Dynamsoft.Lib.hide("J_ImgSizeEditor");return}};var l=Dynamsoft.Lib.get("J_btnCancelChange");l.onclick=function(){Dynamsoft.Lib.hide("J_ImgSizeEditor")};var j=Dynamsoft.Lib.get("J_ImgSizeEditor");Dynamsoft.Lib.toggle("J_ImgSizeEditor");j.style.top=i.y+i.offsetHeight+document.documentElement.scrollTop+"px";j.style.left=i.x+document.documentElement.scrollLeft+"px";if(m.aryModelImageControl[m.cIndex].imageToShow){Dynamsoft.Lib.get("J_img_width").value=m.aryModelImageControl[m.cIndex].imageToShow.width;Dynamsoft.Lib.get("J_img_height").value=m.aryModelImageControl[m.cIndex].imageToShow.height}else{Dynamsoft.Lib.get("J_img_width").value=0;Dynamsoft.Lib.get("J_img_height").value=0}return false};a.prototype.Crop_btn=function(){var i=this,g,h=d.one(i.toolbar.self).one(".Class_D_DWT_Editor_Buttons_crop");if(h&&h[0]){g=h[0].src;if(g.indexOf("grey")!=-1){return}else{i.Crop()}}};a.prototype.Crop=function(){var k=this;var j=k.Left;var i=k.Top;var h=k.Right;var g=k.Bottom;if(parseInt(j)-parseInt(h)!=0&&parseInt(i)-parseInt(g)!=0){k._IfImageChanged=true;k._stwain.Crop(k.cIndex,parseInt(j),parseInt(i),parseInt(h),parseInt(g));k.__SetCropButtonGrey(true)}else{e.output(k,"No area selected for cropping");return}};a.prototype.StrechMode=function(){var g=this;g._UIView.SetIfFitWindowAndType(4);g.__SetZoomInButtonEnable(true);g.__SetZoomOutButtonEnable(true);g.__SetCropButtonGrey(true);return};a.prototype.FitsWindowSize=function(){var g=this;g._UIView.SetIfFitWindowAndType(0);g.__SetZoomInButtonEnable(true);g.__SetZoomOutButtonEnable(true);g.__SetCropButtonGrey(true);return};a.prototype.FitsWindowWidth=function(g){var h=this;h._UIView.SetIfFitWindowAndType(2);h.__SetZoomInButtonEnable(true);h.__SetZoomOutButtonEnable(true);h.__SetCropButtonGrey(true);return};a.prototype.FitsWindowHeight=function(g){var h=this;h._UIView.SetIfFitWindowAndType(1);h.__SetZoomInButtonEnable(true);h.__SetZoomOutButtonEnable(true);h.__SetCropButtonGrey(true);return};a.prototype.ZoomIn=function(){var g=this;if(g._UIView.ZoomIn()){g.__SetZoomInButtonEnable(true);g.__SetZoomOutButtonEnable(true)}else{g.__SetZoomInButtonEnable(false);g.__SetZoomOutButtonEnable(true)}g.__SetCropButtonGrey(true)};a.prototype.ZoomOut=function(){var g=this;if(g._UIView.ZoomOut()){g.__SetZoomOutButtonEnable(true);g.__SetZoomInButtonEnable(true)}else{g.__SetZoomOutButtonEnable(false);g.__SetZoomInButtonEnable(true)}g.__SetCropButtonGrey(true)};a.prototype.OriginalSize=function(){var g=this;g._UIView.SetZoom(1);g.__SetZoomInButtonEnable(true);g.__SetZoomOutButtonEnable(true);g.__SetCropButtonGrey(true);return};a.prototype.setMouseShape=function(g){var j=this;if(typeof g=="boolean"){j._UIView.SetMouseShapeByIndex(j.cIndex,g);var i=d.one(j.toolbar.self).one(".Class_D_DWT_Editor_Buttons_hand"),h=d.one(j.toolbar.self).one(".Class_D_DWT_Editor_Buttons_rectselect");if(g){if(i&&i[0]){i[0].style.display="none";h[0].style.display=""}}else{if(i&&i[0]){i[0].style.display="";h[0].style.display="none"}}}else{e.output(j,'You need to use "ture" or "false" to set MouseShape.')}};a.prototype.print=function(){var g=this;g._UIView.Print()};a.prototype.RestoreImage=function(){var g=this;g.__RestoreImageInner(true)};a.prototype.__RestoreImageInner=function(i){var k=this,j;if(k.cIndex==-1){return}var h=function(n,q,o){if(i==true){console.log("__RestoreImageInner: "+[q.imageIndex].join(","));q.bOriginalImage=true;k._UIView.AttachImagesForControl(n,q)}k._IfImageChanged=false;var l=k.aryModelImageControl[o];if(l!=null){l.imageToShow=q.imageToShow;l.imageWidth=q.imageWidth;l.imageHeight=q.imageHeight;l.imageUrl=q.imageUrl}k._UIManager.getView().SetDataImageControl(o);var m=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_save"),p=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_restore");if(m&&m[0]){m[0].style.display="none";p[0].style.display="none"}};if(k._IfImageChanged==true){var g=k._UIView.GetImageControl(k.cIndex);if(null!=g){k.OnGetImageFromServer(g,k.aryModelImageControl[k.cIndex],k.cIndex,1,h);g.SetCurrentIndex(k.cIndex)}}};a.prototype.OnGetImageFromServer=function(g,l,j,k,m){var n=this,i,h;if(m&&n.BaseUrl){i=Funs2.getUrlByAct(n.BaseUrl,j,k);h=new Image();h.src=i;h.onload=function(){l.imageToShow=h;l.imageWidth=h.width;l.imageHeight=h.height;l.imageUrl=i;l.bIsDirty=false;m(g,l,j)}}return true};a.prototype.ChangeSize=function(g,i){var j=this;if(g>=0){j.containerWidth=g}if(i>=0){j.containerHeight=i}j.width=j.containerWidth-2;if(j.width<0){j.width=0}j.height=j.containerHeight-2;if(j.height<0){j.height=0}j.UIEditor.css({width:j.width+"px",height:j.height+"px"})};a.prototype.SaveImage=function(){var g=this;g.__SaveImageInner(true)};a.prototype.__SaveImageInner=function(i){var k=this,j;if(k.cIndex==-1){return}if(!k._IfImageChanged){alert("You have not changed the current image");return}var h=function(n,q,o){if(i==true){console.log("__SaveImageInner: "+[q.imageIndex].join(","));q.bOriginalImage=true;k._UIView.AttachImagesForControl(n,q)}k._IfImageChanged=false;var l=k.aryModelImageControl[o];if(l!=null){l.imageToShow=q.imageToShow;l.imageWidth=q.imageWidth;l.imageHeight=q.imageHeight;l.imageUrl=q.imageUrl}k._UIManager.getView().SetDataImageControl(o);var m=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_save"),p=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_restore");if(m&&m[0]){m[0].style.display="none";p[0].style.display="none"}};if(k._IfImageChanged==true){var g=k._UIView.GetImageControl(k.cIndex);if(null!=g){k.OnGetImageFromServer(g,k.aryModelImageControl[k.cIndex],k.cIndex,2,h);g.SetCurrentIndex(k.cIndex)}}};a.prototype.ShowDialogForSaveImage=function(h,k){var l=this;var i=['<div id="J_waiting">','<P style="white-space:nowrap;">',"You have changed the image, do you want to keep the change(s)?","</P>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input id="J_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="  OK  "/>','<input id= "J_btnCancel" style="width: 100px; height:30px;"  type="button" value="  NO  " />',"</div>","</div>"];Dynamsoft.WebTwainEnv.ShowDialog(422,107,i.join(""),true);var g=Dynamsoft.Lib.get("J_btnSave");g.onclick=function(){l.__SaveImageInner(false);Dynamsoft__OnclickCloseInstallEx();Dynamsoft.Lib.bChangeImage=1;if(h==-1){l.__HideImageEditorInner()}else{l.__goInner(h)}if(k){document.body.style.overflow=""}};var j=Dynamsoft.Lib.get("J_btnCancel");j.onclick=function(){l.__RestoreImageInner(false);Dynamsoft__OnclickCloseInstallEx();Dynamsoft.Lib.bChangeImage=0;if(h==-1){l.__HideImageEditorInner()}else{l.__goInner(h)}if(k){document.body.style.overflow=""}}};a.prototype.__SetCropButtonGrey=function(i){var k=this;k.Left=0;k.Top=0;k.Right=0;k.Bottom=0;var j=d.one(k.toolbar.self).one(".Class_D_DWT_Editor_Buttons_crop");if(j&&j[0]){var h=j[0].src;h=h.replace("crop.","crop_grey.");j[0].src=h;j.style("cursor","auto")}if(i){var g=k._UIView.GetImageControl(k.cIndex);if(null!=g){g.SetSelectedImageArea(0,0,0,0)}}};a.prototype.__SetZoomInButtonEnable=function(g){var j=this;var i=d.one(j.toolbar.self).one(".Class_D_DWT_Editor_Buttons_zoomin");if(i&&i[0]){var h=i[0].src;if(g==true){h=h.replace("zoomin_grey.","zoomin.");i[0].src=h;i.style("cursor","pointer")}else{h=h.replace("zoomin.","zoomin_grey.");i[0].src=h;i.style("cursor","auto")}}};a.prototype.__SetZoomOutButtonEnable=function(g){var j=this;var i=d.one(j.toolbar.self).one(".Class_D_DWT_Editor_Buttons_zoomout");if(i&&i[0]){var h=i[0].src;if(g==true){h=h.replace("zoomout_grey.","zoomout.");i[0].src=h;i.style("cursor","pointer")}else{h=h.replace("zoomout.","zoomout_grey.");i[0].src=h;i.style("cursor","auto")}}};a.prototype.refresh=function(i){var j=this;j.cIndex=i;j._UIView.SetDataImageControl(i);if(j._IfImageChanged){var g=d.one(j.toolbar.self).one(".Class_D_DWT_Editor_Buttons_save"),h=d.one(j.toolbar.self).one(".Class_D_DWT_Editor_Buttons_restore");if(g&&g[0]){g[0].style.display="";h[0].style.display=""}}j.__SetCropButtonGrey(true)};Dynamsoft.Lib.UI=Dynamsoft.Lib.UI||{};Dynamsoft.Lib.UI.ImageUIEditor=a})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: html5
* final js: build\src.html5.js
*/
(function(a){if(!a.product.bChromeEdition){return}var b=a.DOM,c={getServerImageUrlPrefix:function(h){var f=h.httpUrl,e=false,g=[f,"img?id=",h.clientId];return g.join("")},output:function(e){console.log(e)}};function d(e,f){var g=this;g._stwain=e;g.__SelectionImageBorderColor=8233678;g.__BackgroundColor=16777215;g.__BackgroundFillColor=16777215;g.__Ratio=0;f.OnTopImageInTheViewChanged=function(h){if(Dynamsoft.Lib.isFunction(e.__OnTopImageInTheViewChanged)){e.__OnTopImageInTheViewChanged(h)}};f.OnGetImageInfo=function(j){var h=-1,i=-1;h=g._stwain.GetImageWidth(j);return{width:h,height:i}};g._UIView=new Dynamsoft.Lib.UI.ImageUIView(f);g._UIEditor=false}d.prototype.getTwain=function(){var e=this;return e._stwain};d.prototype.getView=function(){var e=this;return e._UIView};d.prototype.OnReady=function(){var f=this,e=f.getView();e.BaseUrl=c.getServerImageUrlPrefix(f._stwain);return true};d.prototype.count=function(){var f=this,e=f.getView();return e.GetDataImageControlList().length};d.prototype.clear=function(){var f=this,e=f.getView();e.Clear();return true};d.prototype.ChangeSize=function(e,f){var h=this,g=h.getView();return g.ChangeImageViewSize(e,f)};d.prototype.GetCurrentImageIndex=function(){var f=this,e=f.getView();return e.cCurrentIndex};d.prototype.GetSelectedImageIndex=function(f){var h=this,g=h.getView(),e=g.aryCurrentSelectedImageIndicesInBuffer;if(f>=0&&f<e.length){return e[f]}return -1};d.prototype.GetSelectedIndexes=function(){var g=this,f=g.getView(),e=f.aryCurrentSelectedImageIndicesInBuffer;return e};d.prototype.add=function(k,f){var j=this,l=k*1,m,h,n,g,e;h=j.getView();n=h.GetDataImageControlList();m=n.length;if(l<0||l>f){return false}g=l;for(;g<m;g++){e=n[g];e.imageIndex=(g+1)}e=new Dynamsoft.Lib.UI.ModelImageControl();e.bIsDirty=true;if(l>=m){e.imageIndex=m;l=m;n.push(e)}else{e.imageIndex=l;n.splice(l,0,e)}h.UpdateAllImage(n,l,l,m);return true};d.prototype.remove=function(g,e){var k=this,l=g*1,n=e*1,m,j,p,o;if(typeof(l)==="undefined"||l<0){return}j=k.getView();p=j.GetDataImageControlList();m=p.length;if(m==1){k.clear();return}if(l>=m){l=m-1}else{var h=l,f;for(;h<p.length;h++){f=p[h];f.imageIndex=(h-1)}}o=p.splice(l,1);if(o&&o[0]){o[0].Clear()}j.UpdateAllImage(p,n,l,m-2);return true};d.prototype.MoveImage=function(f,p){var k=this,n,j,o,h,g,m,l,e;j=k.getView();o=j.GetDataImageControlList();n=o.length;h=f;m=o[f];for(;h<o.length;h++){g=o[h];g.imageIndex=(h-1)}o.splice(f,1);h=p;for(;h<o.length;h++){g=o[h];g.imageIndex=(h+1)}o.splice(p,0,m);m.imageIndex=p;if(f<p){l=f;e=p}else{l=p;e=f}j.UpdateAllImage(o,k.GetCurrentImageIndex(),l,e);return true};d.prototype.SwitchImage=function(g,f){var l=this,e,k,j,i,h;k=l.getView();j=k.GetDataImageControlList();e=j.length;if(g<j.length&&g>=0&&f<j.length&&f>=0){i=j[g];i.imageIndex=f;h=j[f];h.imageIndex=g;j[f]=i;j[g]=h;k.UpdateImage(g,h.imageToShow,h.imageWidth,h.imageHeight,h.aryOverlayRectangleData,h.imageUrl);k.UpdateImage(f,i.imageToShow,i.imageWidth,i.imageHeight,i.aryOverlayRectangleData,i.imageUrl)}return true};d.prototype.SetViewMode=function(f,e){var h=this,g;g=h.getView();g.SetViewMode(f,e);return true};d.prototype.get=function(f){var j=this,g=parseInt(f),e,i,h;i=j.getView();h=i.GetDataImageControlList();e=h.length;if(g<0||g>e){return false}return h[g]};d.prototype.refresh=function(f,g,e){var i=this;if(e){var j=f*1,k,h,l,m;h=i.getView();l=h.GetDataImageControlList();k=l.length;if(j<0||j>k){return false}if(i._UIEditor&&i._UIEditor._UIView){i._UIEditor.refresh(j)}h.SetDataImageControl(j)}return true};d.prototype.ShowImageEditorEx=function(l,k,g,f,i){var j=this,p=j.getView();var h,o,n=document,e,m;e=n.createElement("div");n.body.appendChild(e);m={Container:b.one(e),aryModelImageControl:p.GetDataImageControlList(),BaseUrl:p.BaseUrl,cIndex:p.cCurrentIndex,stwain:j.getTwain()};o=new Dynamsoft.Lib.UI.ImageUIEditor(j,m);j._UIEditor=o;o.bShow=false;o.bShow=true;return o.ShowImageEditorEx(l,k,g,f,0)};d.prototype.refreshEditor=function(e,f){var g=this;if(g._UIEditor){g._UIEditor.refresh(e)}return true};d.prototype.GetSelectionImageBorderColor=function(){return this.__SelectionImageBorderColor};d.prototype.SetSelectionImageBorderColor=function(f){var h=this,g=f,e=h.getView();h.__SelectionImageBorderColor=g;if(Dynamsoft.Lib.isNumber(g)){g=Dynamsoft.Lib.getColor(g)}return e.SetSelectionImageBorderColor(g)};d.prototype.GetBackgroundColor=function(){return this.__BackgroundColor};d.prototype.SetBackgroundColor=function(g){var j=this,h=g,e,i,f=j.getView();j.__BackgroundColor=h;if(Dynamsoft.Lib.isNumber(h)){h=Dynamsoft.Lib.getColor(h)}e=b.one("#"+j._stwain._strDWTControlContainerID);if(e){i=e.one(".ds-dwt-container-box");if(i){i.style("background-color",h)}}return f.SetBackgroundColor(h)};d.prototype.SetSelectionRectAspectRatio=function(g){var j=this,h=g,e,i,f=j.getView();j.__Ratio=h;return f.SetSelectionRectAspectRatio(h)};d.prototype.GetSelectionRectAspectRatio=function(){return this.__Ratio};Dynamsoft.Lib.UI=Dynamsoft.Lib.UI||{};Dynamsoft.Lib.UI.ImageUIManager=d})(Dynamsoft.Lib);
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: htm5
* final js: build\src.html5.js
*/
(function(a){if(!Dynamsoft.Lib.product.bChromeEdition){return}Dynamsoft.Lib.env.WSVersion="10.0.1";Dynamsoft.Lib.getHttpUrl=function(c){var b=Dynamsoft.Lib.product.ip;if(c.ssl){return["https://",b,":",c.port,"/"].join("")}else{return["http://",b,":",c.port,"/"].join("")}};Dynamsoft.Lib.getWSUrl=function(c){var b=Dynamsoft.Lib.product.ip;if(c.ssl){return["wss://",b,":",c.port].join("")}else{return["ws://",b,":",c.port].join("")}};Dynamsoft.Lib.getWS=function(b){var f=this,d,e=Dynamsoft.Lib.getWSUrl(b),c=Dynamsoft.Lib.product.wsProtocol;if(f.detect.OnCreatWS){f.detect.OnCreatWS(e,c)}if(typeof MozWebSocket!="undefined"){d=new MozWebSocket(e,c)}else{d=new WebSocket(e,c)}return d};Dynamsoft.Lib._init=function(){var h=Dynamsoft.Lib,e=h.LS.item("D_port"),f=h.LS.item("D_ssl"),b=null;h.detect.urls.splice(0);h.detect.cUrlIndex=0;if(e&&f){b={port:e,ssl:(f=="true")}}var d=function(i){if(!b){return true}if(i.port!=b.port||i.ssl!=b.ssl){return true}return false};var g;if(h.detect.detectType===1){if(b!==null&&b.ssl){h.detect.urls.push(b)}for(var c in h.detect.ports){g=h.detect.ports[c];if(g.ssl){if(d(g)){h.detect.urls.push(g)}}}}else{if(h.detect.detectType===0){if(b!==null&&!b.ssl){h.detect.urls.push(b)}for(var c in h.detect.ports){g=h.detect.ports[c];if(g.ssl===false){if(d(g)){h.detect.urls.push(g)}}}}else{if(b!==undefined&&b!==null){h.detect.urls.push(b)}for(var c in h.detect.ports){g=h.detect.ports[c];if(d(g)){h.detect.urls.push(g)}}}}g=null};Dynamsoft.Lib._reconnect=function(){var h=Dynamsoft.Lib,d=h.LS.item("D_port"),f=h.LS.item("D_ssl"),c=null;h.detect.urls.splice(0);h.detect.cUrlIndex=0;if(d&&f){c={port:d,ssl:(f=="true")};h.detect.urls.push(c);var g;if(h.detect.cTwainIndex<h.detect.arySTwains.length){g=h.detect.arySTwains[h.detect.cTwainIndex]}if(!g){return}try{var b=h.getWS(c);b.onopen=function(){if(b.readyState==1){g._objWS=b;if(!g.bReady){g._OnReady(true)}Dynamsoft.Lib.detect.hideMask();h.detect.bOK=true}else{if(b.readyState==0){setTimeout(b.onopen,100)}else{}}};b.onclose=function(){b.onopen=null;if(!g.bReady){g.__wsRetry++;if(g.__wsRetry<5){setTimeout(Dynamsoft.Lib._reconnect,1000)}else{Dynamsoft.Lib.closeProgress("Reconnect");Dynamsoft.Lib.Errors.Server_Restarted(g)}}else{Dynamsoft.Lib.closeProgress("Reconnect");Dynamsoft.Lib.detect.hideMask()}}}catch(e){Dynamsoft.Lib.log(e);if(!g.bReady){g.__wsRetry++;if(g.__wsRetry<5){setTimeout(Dynamsoft.Lib._reconnect,1000)}}else{Dynamsoft.Lib.detect.hideMask()}}}};Dynamsoft.Lib.startWS=function(){var i=Dynamsoft.Lib;if(!Dynamsoft.Lib.product.bChromeEdition){Dynamsoft.Lib.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!");return}if(!i.detect.bNoControlEvent){Dynamsoft.Lib.detect.showMask()}if(i.detect.OnDetectNext){i.detect.OnDetectNext()}if(i.detect.tryTimes==0&&i.detect.cUrlIndex>0){if(!i.detect.bNoControlEvent){Dynamsoft.Lib.detect.hideMask();if(Dynamsoft.Lib.isFunction(i.detect.onNoControl)){var g=i.detect.arySTwains[i.detect.cTwainIndex],b,e;b=g._width;e=g._height;if(b<=0){b=270}if(e<=0){e=350}i.detect.onNoControl(g._strDWTControlContainerID,b,e)}i.detect.bNoControlEvent=true}}if(i.detect.cUrlIndex>=i.detect.urls.length){i.detect.cUrlIndex=0;i.detect.tryTimes++}var f;if(i.detect.cTwainIndex<i.detect.arySTwains.length){f=i.detect.arySTwains[i.detect.cTwainIndex]}else{Dynamsoft.Lib.detect.hideMask();i.detect.bOK=true;return}if(f.bReady){i.detect.cTwainIndex++;if(this.detect.cTwainIndex>=this.detect.arySTwains.length){Dynamsoft.Lib.detect.hideMask();i.detect.bOK=true}else{setTimeout(Dynamsoft.Lib.startWS,100)}return}try{var h=i.detect.urls[i.detect.cUrlIndex],c=i.getWS(h);Dynamsoft.Lib.log(["connecting ... [port:",h.port,"]"].join(""));c.onopen=function(){if(c.readyState==1){f._objWS=c;if(!f.bReady){f._OnReady()}Dynamsoft.Lib.attachProperty(f);Dynamsoft.Lib.attachAddon(f);i.detect.cTwainIndex++;if(i.detect.cTwainIndex>=i.detect.arySTwains.length){Dynamsoft.Lib.detect.hideMask();i.detect.bOK=true}else{setTimeout(Dynamsoft.Lib.startWS,100)}}else{if(c.readyState==0){setTimeout(c.onopen,100)}else{}}};c.onclose=function(){c.onopen=null;if(!f.bReady){i.detect.cUrlIndex++;setTimeout(Dynamsoft.Lib.startWS,100)}else{Dynamsoft.Lib.detect.hideMask()}}}catch(d){Dynamsoft.Lib.log(d);if(!f.bReady){i.detect.cUrlIndex++;setTimeout(Dynamsoft.Lib.startWS,100)}else{Dynamsoft.Lib.detect.hideMask()}}};Dynamsoft.Lib.html5.closeAll=function(){var e=this,d,c,b;for(d=0;d<e.detect.arySTwains.length;d++){c=e.detect.arySTwains[d];if(c.bReady){c._UIManager.clear();b=c._objWS;if(b){b.close();c._objWS=null;c.bReady=false}}}Dynamsoft.Lib.dlgProgress=false;e.detect.bOK=false;e.detect.arySTwains.splice(0);e.detect.cTwainIndex=0;e.detect.bFirst=true};Dynamsoft.Lib.bio=false;Dynamsoft.Lib.progressMessage="";Dynamsoft.Lib.dialogShowStatus=false;Dynamsoft.Lib.needShowTwiceShowDialog=false;Dynamsoft.Lib.dlgProgress=false;Dynamsoft.Lib.cancelFrome=0;Dynamsoft.Lib.dlgRef=0;Dynamsoft.Lib.showProgress=function(e,b,d){var i=e;Dynamsoft.Lib.log("showProgress:"+b+",bCancel:"+d);if((Dynamsoft.Lib.cancelFrome==0&&i.__IfShowProgressBar==true)||(Dynamsoft.Lib.cancelFrome!=0&&i.__IfShowCancelDialogWhenImageTransfer==true)){var g=a.one("#btnCancel");if(d==false){g[0].style.display="none"}else{g[0].style.display=""}if(Dynamsoft.Lib.dialogShowStatus==false){Dynamsoft.Lib.dlgProgress.showModal();Dynamsoft.Lib.dialogShowStatus=true;var h=a.one("#finalMessage");var f=a.one("#progressBar");var c=a.one("#status");h.html("");c.html("0%");f[0].value=0}Dynamsoft.Lib.dlgRef++}};Dynamsoft.Lib.closeProgress=function(b){Dynamsoft.Lib.log("closeProgress:"+b);var c=a.one("#btnCancel");if(Dynamsoft.Lib.needShowTwiceShowDialog==true&&Dynamsoft.Lib.cancelFrome==1){c.html("Canceling")}else{c.html("Cancel");if(Dynamsoft.Lib.dialogShowStatus==true){Dynamsoft.Lib.dlgProgress.close();Dynamsoft.Lib.dialogShowStatus=false}Dynamsoft.Lib.needShowTwiceShowDialog=false;Dynamsoft.Lib.cancelFrome=0}Dynamsoft.Lib.dlgRef--;if(Dynamsoft.Lib.dlgRef<=0){Dynamsoft.Lib.dlgRef=0}}})(KISSY);(function(){if(!Dynamsoft.Lib.product.bChromeEdition){return}var a=Dynamsoft.Lib.html5.Funs;Dynamsoft.Lib.html5.DynamicWebTwain=function(b){var d=Dynamsoft.Lib,c=new Dynamsoft.Lib.html5.STwain(b);d.detect.arySTwains.push(c);if(d.detect.bFirst){d._init()}d.detect.bFirst=false;return c}})();
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2015, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
* 
* Version: 10.2.0.324
*
* Module: launch
* final js: build\src.launch.js
*/
(function(){var a=window.document;Dynamsoft.Lib.DynamicWebTwain=false;Dynamsoft.Lib.__dwtEditionMain=function(b){KISSY.use(["json","node","dom"],function(d,f,c,e){if(Dynamsoft.Lib.product.bPluginEdition){Dynamsoft.Lib.DynamicWebTwain=Dynamsoft.Lib.plugin.DynamicWebTwain;Dynamsoft.Lib.closeAll=Dynamsoft.Lib.plugin.closeAll;if(Dynamsoft.Lib.isFunction(b)){b()}}else{if(Dynamsoft.Lib.product.bActiveXEdition){Dynamsoft.Lib.DynamicWebTwain=Dynamsoft.Lib.ie.DynamicWebTwain;Dynamsoft.Lib.closeAll=Dynamsoft.Lib.ie.closeAll;if(Dynamsoft.Lib.isFunction(b)){b()}}else{if(Dynamsoft.Lib.product.bChromeEdition){}}}})};Dynamsoft.Lib.__chromeEditionMain=function(b){Dynamsoft.Lib.log("Run Dynamsoft.Lib.__chromeEditionMain() ...");KISSY.use(["io","json","node","dom","kg/bio/1.1/index"],function(f,d,i,e,g,c){var h,l;KISSY.BIO=c;Dynamsoft.Lib.getCss("reference/html5_editor.css");Dynamsoft.Lib.DynamicWebTwain=Dynamsoft.Lib.html5.DynamicWebTwain;Dynamsoft.Lib.closeAll=Dynamsoft.Lib.html5.closeAll;if(Dynamsoft.Lib.isFunction(b)){b()}})};Dynamsoft.Lib.__innerInitEvents=function(c,d){var b=d||{};c.__OnAfterOperate=b.onAfterOperate||"";c.__OnBeforeOperate=b.onBeforeOperate||"";c.__OnOperateStatus=b.onOperateStatus||"";c.__OnBitmapChanged=b.onBitmapChanged||"";c.__OnGetFilePath=b.onGetFilePath||"";c.__OnImageAreaDeSelected=b.onImageAreaDeSelected||"";c.__OnImageAreaSelected=b.onImageAreaSelected||"";c.__OnMouseClick=b.onMouseClick||"";c.__OnMouseDoubleClick=b.onMouseDoubleClick||"";c.__OnMouseMove=b.onMouseMove||"";c.__OnMouseRightClick=b.onMouseRightClick||"";c.__OnPreAllTransfers=b.onPreAllTransfers||"";c.__OnPreTransfer=b.onPreTransfer||"";c.__OnPostLoad=b.onPostLoad||"";c.__OnPostTransfer=b.onPostTransfer||"";c.__OnPostAllTransfers=b.onPostAllTransfers||"";c.__OnSourceUIClose=b.onSourceUIClose||"";c.__OnTopImageInTheViewChanged=b.onTopImageInTheViewChanged||"";c.__OnTransferCancelled=b.onTransferCancelled||"";c.__OnTransferError=b.onTransferError||"";c.__OnInternetTransferPercentage=b.onInternetTransferPercentage||"";c.__OnInternetTransferPercentageEx=b.onInternetTransferPercentageEx||""}})();window.onbeforeunload=function(){Dynamsoft.WebTwainEnv.Unload()};Dynamsoft.Lib.initGlobalConfig=function(a){var c=Dynamsoft.Lib,b=a||{};if(b.basePath){c.env.basePath=b.basePath}if(b.pathType){c.env.pathType=b.pathType}if(b.resourcesPath){Dynamsoft.WebTwainEnv.ResourcesPath=b.resourcesPath}if(typeof(b.trial)!="undefined"){Dynamsoft.WebTwainEnv.Trial=b.trial}if(typeof(b.debug)!="undefined"){Dynamsoft.WebTwainEnv.Debug=b.debug}if(b.productKey){Dynamsoft.WebTwainEnv.ProductKey=b.productKey}if(b.version){Dynamsoft.WebTwainEnv.ServerVersionInfo=b.version}if(b.IEVersion){Dynamsoft.WebTwainEnv.ActiveXVersion=b.IEVersion}if(typeof(b.bDiscardBlankImage)!="undefined"){c.config.bDiscardBlankImage=b.bDiscardBlankImage}if(b.msgPrefix){c.config.msgPrefix=b.msgPrefix}if(b.msgSuffix){c.config.msgSuffix=b.msgSuffix}if(b.detectType){c.detect.detectType=b.detectType}if(b.tryTimes){c.detect.tryTimes=b.tryTimes}if(b.onReady){c.detect.OnReady=b.onReady}if(b.onDetectNext){c.detect.OnDetectNext=b.onDetectNext}if(b.onNotAllowedForChrome){c.detect.onNotAllowedForChrome=b.onNotAllowedForChrome}if(b.onNoControl){c.detect.onNoControl=b.onNoControl}if(b.onCreatWS){c.detect.OnCreatWS=b.onCreatWS}};Dynamsoft.Lib.replaceControl=function(c,a,b){Dynamsoft.WebTwainEnv.ContainerMap[c]=a};function Dynamsoft__noControlEx(b,a,d){ua=(navigator.userAgent.toLowerCase());if(Dynamsoft.Lib.env.bMac){var c=KISSY.one("#"+b);c.before(Dynamsoft.Lib.install._strNonInstallDIV);var f=Dynamsoft.Lib.get(Dynamsoft.Lib.install._divDWTNonInstallContainerID);if(f){f.style.width=a+"px";f.style.height=d+"px"}Dynamsoft.Lib.show(Dynamsoft.Lib.install._divDWTNonInstallContainerID);Dynamsoft.Lib.hide(b);if(Dynamsoft.Lib.install._divDWTemessageContainer!=""){Dynamsoft.Lib.hide(Dynamsoft.Lib.install._divDWTemessageContainer)}if(Dynamsoft.Lib.isFunction(OnWebTwainNotFoundOnMacCallback)){var e=Dynamsoft.Lib.product.getPKGPath();OnWebTwainNotFoundOnMacCallback(Dynamsoft.Lib.product.name,e)}}else{if(ua.match(/chrome\/([\d.]+)/)||ua.match(/opera.([\d.]+)/)||ua.match(/version\/([\d.]+).*safari/)||ua.match(/firefox\/([\d.]+)/)){var c=KISSY.one("#"+b);c.before(Dynamsoft.Lib.install._strNonInstallDIV);var f=Dynamsoft.Lib.get(Dynamsoft.Lib.install._divDWTNonInstallContainerID);if(f){f.style.width=a+"px";f.style.height=d+"px"}Dynamsoft.Lib.show(Dynamsoft.Lib.install._divDWTNonInstallContainerID);Dynamsoft.Lib.hide(b);if(Dynamsoft.Lib.install._divDWTemessageContainer!=""){Dynamsoft.Lib.hide(Dynamsoft.Lib.install._divDWTemessageContainer)}if(Dynamsoft.Lib.isFunction(OnWebTwainNotFoundOnWindowsCallback)){var e=Dynamsoft.Lib.product.bChromeEdition?Dynamsoft.Lib.product.getChromeEditionPath():Dynamsoft.Lib.product.getMSIPath();OnWebTwainNotFoundOnWindowsCallback(Dynamsoft.Lib.product.name,e)}}}}function Dynamsoft__notAllowedForChromeEx(a){var b=(navigator.userAgent.toLowerCase());if(b.match(/chrome\/([\d.]+)/)){KISSY.one("#"+a).before(Dynamsoft.Lib.install._strNonInstallDIV);Dynamsoft.Lib.show(Dynamsoft.Lib.install._divDWTNonInstallContainerID);Dynamsoft.Lib.hide(a);if(Dynamsoft.Lib.install._divDWTemessageContainer!=""){Dynamsoft.Lib.hide(Dynamsoft.Lib.install._divDWTemessageContainer)}if(Dynamsoft.Lib.isFunction(OnWebTwainOldPluginNotAllowedCallback)){OnWebTwainOldPluginNotAllowedCallback(Dynamsoft.Lib.product.name)}}}function Dynamsoft_OnClickInstallButton(){var a=Dynamsoft.Lib.get("dwt-btn-install");if(a){a.style.display="none"}}Dynamsoft.Lib.detect.isDWTVersionLatest=function(d){var c=d.toLowerCase().replace(Dynamsoft.Lib.product.name.toLowerCase()+" ",""),a=Dynamsoft.WebTwainEnv.ServerVersionInfo;c=c.replace("trial".toLowerCase(),"");c=Dynamsoft.Lib.replaceAll(c,"[.]",",");a=Dynamsoft.Lib.replaceAll(new String(a),"[.]",",");currentArray=c.split(",");latestArray=a.split(",");index=currentArray.length>latestArray.length?currentArray.length:latestArray.length;for(var b=0;b<index;b++){if(currentArray[b]==null){currentArray[b]=0}if(latestArray[b]==null){latestArray[b]=0}if(parseInt(currentArray[b])<parseInt(latestArray[b])){return false}else{if(parseInt(currentArray[b])>parseInt(latestArray[b])){return true}}}return true};Dynamsoft.Lib.detect.__checkUpgrade=function(a){if(Dynamsoft.Lib.install.bNeedUpgrade){a.GetVersionInfoAsync(function(b){if(b&&b.length>=0){var c=b[0];if(Dynamsoft.Lib.detect.isDWTVersionLatest(c)){Dynamsoft__OnclickCloseInstallEx(containerID)}else{setTimeout(function(){Dynamsoft.Lib.detect.__checkUpgrade(a)},500)}}},function(){})}};Dynamsoft.Lib.detect._needUpgradeHtml5Server=function(c){var a=c._strDWTControlContainerID;if(!Dynamsoft.Lib.detect.isDWTVersionLatest(c.VersionInfo)){Dynamsoft.Lib.install.bNeedUpgrade=true;if(!Dynamsoft.WebTwainEnv.UseDefaultInstallUI&&Dynamsoft.Lib.isFunction(Dynamsoft.WebTwainEnv.OnWebTwainNeedUpgrade)){Dynamsoft.WebTwainEnv.OnWebTwainNeedUpgrade();return}KISSY.one("#"+a).before(Dynamsoft.Lib.install._strNonInstallDIV);Dynamsoft.Lib.show(Dynamsoft.Lib.install._divDWTNonInstallContainerID);Dynamsoft.Lib.hide(a);if(Dynamsoft.Lib.install._divDWTemessageContainer!=""){Dynamsoft.Lib.hide(Dynamsoft.Lib.install._divDWTemessageContainer)}if(Dynamsoft.Lib.isFunction(OnWebTwainNeedUpgradeCallback)){var b=Dynamsoft.Lib.product.bChromeEdition?Dynamsoft.Lib.product.getChromeEditionPath():Dynamsoft.Lib.product.getMSIPath();OnWebTwainNeedUpgradeCallback(Dynamsoft.Lib.product.name,b)}setTimeout(function(){Dynamsoft.Lib.detect.__checkUpgrade(c)},5000)}};function Dynamsoft__onReadyEx(){var d=Dynamsoft.WebTwainEnv.Containers,b,a,g,c,f;if(d.length>0){Dynamsoft__OnclickCloseInstallEx();c=d[0].ContainerId;f=Dynamsoft.WebTwainEnv.ContainerMap[c];f.IfAllowLocalCache=true;f.BrokerProcessType=1;f.IfShowFileDialog=true;f.IfDisableSourceAfterAcquire=true;if(Dynamsoft.Lib.product.bChromeEdition){var e=f.LogLevel;if(f.ErrorCode==-2207){if(!Dynamsoft.WebTwainEnv.UseDefaultInstallUI&&Dynamsoft.Lib.isFunction(Dynamsoft.WebTwainEnv.OnWebTwainNeedUpgradeWebJavascript)){Dynamsoft.WebTwainEnv.OnWebTwainNeedUpgradeWebJavascript(f.ErrorString)}else{alert(f.ErrorString+"Please contact the administrator or the developer of the website for more information.")}}Dynamsoft.Lib.detect._needUpgradeHtml5Server(f)}}if(Dynamsoft.Lib.isFunction(Dynamsoft.WebTwainEnv.OnWebTwainReady)){Dynamsoft.WebTwainEnv.OnWebTwainReady()}else{if(Dynamsoft.Lib.isFunction(Dynamsoft_OnReady)){Dynamsoft_OnReady()}}if(Dynamsoft.Lib.product.bChromeEdition){for(a=0;a<d.length;a++){g=d[a].ContainerId;b=Dynamsoft.WebTwainEnv.ContainerMap[g];if(b&&(b.Width<=0||b.Height<=0)){if(b.Width<=0){b.Width=270}if(b.Height<=0){b.Height=350}}}}}(function(){Dynamsoft.Lib.detect.__WebTwainCommonMain=function a(b,d){var c=Dynamsoft.WebTwainEnv.UseDefaultInstallUI;if(Dynamsoft.Lib.isFunction(Dynamsoft_ChangeConfig)){Dynamsoft_ChangeConfig(b)}if(c){b.onNotAllowedForChrome=Dynamsoft__notAllowedForChromeEx;b.onNoControl=Dynamsoft__noControlEx}else{b.onNotAllowedForChrome=Dynamsoft.WebTwainEnv.OnWebTwainOldPluginNotAllowed;b.onNoControl=Dynamsoft.WebTwainEnv.OnWebTwainNotFound}Dynamsoft.Lib.initGlobalConfig(b);if(Dynamsoft.Lib.isFunction(d)){d()}};Dynamsoft.Lib.detect.__WebTwainMain=function(d){var b;if(!d||!d.ContainerId||d.ContainerId==""){Dynamsoft.Lib.log("Error: the containerID cannot be empty.");return}b={containerID:d.ContainerId||"dwtcontrolContainer",width:d.Width,height:d.Height,HTTPPort:(Dynamsoft.Lib.detect.ssl?443:80)};if(Dynamsoft.Lib.detect.arySTwains.length>0){for(j=Dynamsoft.Lib.detect.arySTwains.length-1;j>=0;j--){var c=Dynamsoft.Lib.detect.arySTwains[j];if(c._strDWTControlContainerID===b.containerID){return}}}Dynamsoft.Lib.detect.__WebTwainCommonMain(b,function(){var e;if(Dynamsoft.Lib.product.bChromeEdition){b.onWSReady=function(){Dynamsoft.Lib.replaceControl(b.containerID,e)};b.onWSReconnect=function(){Dynamsoft.Lib.log("re-connected");Dynamsoft.Lib.log(e.ErrorString)}}else{b.onPluginReady=function(){Dynamsoft.Lib.replaceControl(b.containerID,e.getInstance())};b.onPluginNotReady=function(){if(Dynamsoft.Lib.isFunction(Dynamsoft_OnNotReady)){Dynamsoft_OnNotReady()}}}if(Dynamsoft.Lib.DynamicWebTwain){e=new Dynamsoft.Lib.DynamicWebTwain(b);if(Dynamsoft.Lib.isFunction(Dynamsoft_OnLoad)){Dynamsoft_OnLoad()}if(Dynamsoft.Lib.product.bChromeEdition){}else{if(Dynamsoft.Lib.detect.arySTwains.length==Dynamsoft.WebTwainEnv.Containers.length){Dynamsoft.Lib.detect._varSeed=setInterval(Dynamsoft.Lib.detect._controlDetect,200)}}}else{Dynamsoft.Lib.log("Error: the Dynamic Web Twain install failed.")}})};DynamLib=Dynamsoft.Lib;DynamLib.main=function(d,b){var c=function(){if(Dynamsoft.Lib.DynamicWebTwain){DynamLib.WebTwain=Dynamsoft.Lib.DynamicWebTwain;DynamLib.product._strChromeEditionPath=Dynamsoft.Lib.product.getChromeEditionPath();DynamLib.product._strMSIPath=Dynamsoft.Lib.product.getMSIPath();DynamLib.product._strPKGPath=Dynamsoft.Lib.product.getPKGPath();DynamLib.product.version=Dynamsoft.WebTwainEnv.ServerVersionInfo;DynamLib.product.IEVersion=Dynamsoft.WebTwainEnv.ActiveXVersion;if(Dynamsoft.Lib.isFunction(d)){d()}if(Dynamsoft.Lib.product.bChromeEdition){}else{Dynamsoft.Lib.detect._varSeed=setInterval(Dynamsoft.Lib.detect._controlDetect,200)}}else{Dynamsoft.Lib.log("Error: the Dynamic Web Twain install failed.")}},e=function(){if(Dynamsoft.Lib.product.bChromeEdition){Dynamsoft.Lib.__chromeEditionMain(c)}else{Dynamsoft.Lib.__dwtEditionMain(c)}};Dynamsoft.Lib.config.usingMainMode=true;Dynamsoft.WebTwainEnv.UseDefaultInstallUI=false;Dynamsoft.WebTwainEnv.OnWebTwainOldPluginNotAllowed=b.onNotAllowedForChrome;Dynamsoft.WebTwainEnv.OnWebTwainNotFound=b.onNoControl;Dynamsoft.Lib.detect.__WebTwainCommonMain(b,e)}})();Dynamsoft.Lib.detect.checkMultiReady=function(){var c=Dynamsoft.WebTwainEnv.Containers,b,a,d;for(a=0;a<c.length;a++){d=c[a].ContainerId;b=Dynamsoft.WebTwainEnv.ContainerMap[d];if(!b){setTimeout(Dynamsoft.Lib.detect.checkMultiReady,200);return}}Dynamsoft__onReadyEx()};function Dynamsoft_getContainerById(a){if(Dynamsoft.Lib.isString(a)){return Dynamsoft.Lib.get(a)}else{return Dynamsoft.Lib.get(a.ContainerId)}}Dynamsoft.WebTwainEnv.Unload=function(){Dynamsoft.Lib.page.bUnload=true;if(Dynamsoft.Lib.closeAll){Dynamsoft.Lib.closeAll()}if(Dynamsoft.Lib.page.OnUnload){Dynamsoft.Lib.page.OnUnload()}Dynamsoft.WebTwainEnv.ContainerMap=false;var a=Dynamsoft.WebTwainEnv.Containers,b;if(a){for(k=a.length-1;k>=0;k--){b=document.getElementById(a[k].ContainerId);if(b){b.innerHTML=""}}}};Dynamsoft.WebTwainEnv.Load=function(){Dynamsoft.Lib.page.bUnload=false;KISSY.ready(function(b){var d=Dynamsoft.WebTwainEnv.Containers,e=function(){if(d===false||d.length===0){Dynamsoft.Lib.log("Dynamsoft.WebTwainEnv.Containers does not set");return}for(a=0;a<d.length;a++){Dynamsoft.Lib.detect.__WebTwainMain(d[a])}if(Dynamsoft.Lib.product.bChromeEdition){Dynamsoft.Lib.startWS()}setTimeout(Dynamsoft.Lib.detect.checkMultiReady,100)},a;var c=Dynamsoft.Lib.get("J_waiting");if(c){c.parentNode.removeChild(c)}if(d){for(a=d.length-1;a>=0;a--){if(Dynamsoft_getContainerById(d[a].ContainerId)){continue}else{Dynamsoft.Lib.log('The container "'+d[a].ContainerId+'" not found.');d.splice(a,1)}}}Dynamsoft.Lib.log(d);Dynamsoft.WebTwainEnv.ContainerMap={};Dynamsoft.Lib.getCss("reference/hint.css");if(Dynamsoft.Lib.config.usingMainMode){return}Dynamsoft.Lib.getScript("dynamsoft.webtwain.install.js");if(Dynamsoft.Lib.product.bChromeEdition){Dynamsoft.Lib.__chromeEditionMain(e)}else{Dynamsoft.Lib.__dwtEditionMain(e)}})};Dynamsoft.WebTwainEnv.__checkConfigLoaded=function(){if(Dynamsoft.WebTwainEnv.Containers){if(Dynamsoft.WebTwainEnv.AutoLoad){Dynamsoft.WebTwainEnv.Load()}}else{setTimeout(Dynamsoft.WebTwainEnv.__checkConfigLoaded,100)}};KISSY.ready(function(a){Dynamsoft.WebTwainEnv.__checkConfigLoaded()});
