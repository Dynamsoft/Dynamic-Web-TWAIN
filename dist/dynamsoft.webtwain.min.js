// @Wed 07/09/2021 150128
/*
* @name: dwt all-in-one package
* @version: 17.1
* @components:
*   + Dynamsoft Dynamic Web TWAIN version: 17.1
*   + Dynamsoft Barcode Reader Addon for DWT version 17.1 (DBR version 8.2) 20200605 1340
*   + Dynamsoft PDF Rasterizer Addon for DWT version: 17.1
*   + Dynamsoft OCR Basic Addon for DWT version: 17.1
*   + Dynamsoft OCR Pro Addon for DWT version: 17.1
*   + Dynamsoft Webcam Addon for DWT version: 17.1
*   + Dynamsoft Camera Addon for DWT version: 17.1
*   + Dynamsoft File Uploader version: 1.7.1.0525
*/


/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft Support Team
* Version: 17.1
*/

var Dynamsoft=window.Dynamsoft||{Lib:{}};
var self = window;
window.Dynamsoft = Dynamsoft;
(function(b){var a=b.DWT||(b.DWT={});a.initQueue=[];b.initOrder=b.initOrder||[];b.unloadQueue=b.unloadQueue||[];})(Dynamsoft);
Dynamsoft.DWT.IfUseActiveXForIE10Plus=false;var Dynamsoft=Dynamsoft||{};(function(b,c,h){var g=20200521;if(c._preDefine_ver){if(c._preDefine_ver>=g){return}}c._preDefine_ver=g;var j=function(k,m){for(var l in m){if(m.hasOwnProperty(l)){k[l]=m[l]}}return k},f=function(m){if(null==m||"object"!=typeof m){return m}var n,l,k;if(m instanceof Date){n=new Date();n.setTime(m.getTime());return n}else{if(m instanceof Array){n=[];k=m.length;for(l=0;l<k;l++){n[l]=f(m[l])}return n}else{if(m instanceof Object){n={};for(l in m){if(m.hasOwnProperty(l)){n[l]=f(m[l])}}return n}else{return 0}}}};if(!c.Lib){c.Lib={}}j(c.Lib,{win:b,doc:b.document,debug:!1,nil:h,mix:j,clone:f,guid:function(o){var n=[],k="0123456789abcdef",m,l;for(m=0;m<8;m++){n.push(k.substr(Math.floor(Math.random()*16),1))}n.push("-");for(m=0;m<4;m++){n.push(k.substr(Math.floor(Math.random()*16),1))}n.push("-4");for(m=0;m<3;m++){n.push(k.substr(Math.floor(Math.random()*16),1))}n.push("-");l=k.substr(Math.floor(Math.random()*16),1);l=k.substr((l&3)|8,1);n.push(l);for(m=0;m<3;m++){n.push(k.substr(Math.floor(Math.random()*16),1))}n.push("-");for(m=0;m<8;m++){n.push(k.substr(Math.floor(Math.random()*16),1))}n.unshift(o);return n.join("")},now:Date.now||function(){return +new Date()},noop:function(){}});if(Object.keys){c.Lib.keys=Object.keys}else{var a=["propertyIsEnumerable","isPrototypeOf","hasOwnProperty","toLocaleString","toString","valueOf","constructor"],e=({}).hasOwnProperty;for(var d in {toString:1}){a=false}c.Lib.keys=function(n){var k=[];for(var m in n){if(e.call(n,m)){k.push(m)}}if(a&&n){for(var l=0;m=a[l++];){if(e.call(n,m)){k.push(m)}}}return k}}})(typeof window!=="undefined"?window:this,Dynamsoft);(function(d){var b=!({toString:1}.propertyIsEnumerable("toString")),c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function a(f,e){return({}).hasOwnProperty.call(f,e)}d.keys=Object.keys||function(h){var e=[],g,f;for(g in h){if(a(h,g)){e.push(g)}}if(b){for(f=c.length-1;f>=0;f--){g=c[f];if(a(h,g)){e.push(g)}}}return e}})(Dynamsoft.Lib);(function(j,k){var f=20200716;if(j._isXXX_ver){if(j._isXXX_ver>=f){return}}j._isXXX_ver=f;var o=j.mix,l,g,i=!1,e=!0,d=i,c={}.hasOwnProperty,n={},m=(typeof HTMLElement==="object");function h(p){return p===k}function a(p){return p!==k}o(j,{isDef:a,isUndef:h,isUndefined:h,isNull:function(p){return(p===null)},isNaN:function(p){return isNaN(p)},type:function(p){if(p===null||p===k){return String(p)}return n[{}.toString.call(p)]||"object"},isPlainObject:function(s){if(!s||j.type(s)!=="object"||s.nodeType||s.window==s){return i}var p,q;try{if((q=s.constructor)&&!c(s,"constructor")&&!c(q.prototype,"isPrototypeOf")){return i}}catch(r){return i}for(p in s){}return(h(p)||c(s,p))},isDOM:function(p){return m?(p instanceof HTMLElement):p&&typeof p==="object"&&(p.nodeType===1||p.nodeType===9)&&typeof p.nodeName==="string"},isDOMInBody:function(q){var p=q;if(j.isDOM(q)){while(!p&&p!=document.body){p=p.parentNode}}else{p=0}return !!p}});function b(p,q){n["[object "+p+"]"]=(q=p.toLowerCase());j["is"+p]=function(r){return j.type(r)===q}}b("Function");j.each=l=function(t,v,p){if(t){var w,r,x,u=0,q=t.length,s=h(q)||j.isFunction(t);p=p||null;if(s){x=j.keys(t);for(;u<x.length;u++){w=x[u];if(v.call(p,t[w],w,t)===i){break}}}else{for(r=t[0];u<q;r=t[++u]){if(v.call(p,r,u,t)===i){break}}}}return t};g=["String","Object","Boolean","Number"];if(Array.isArray){j.isArray=Array.isArray}else{g.push("Array")}l(g,b)})(Dynamsoft.Lib);(function(c){var a=c.mix,b=c.win,e;var d=20200521;if(c._log_ver){if(c.isNumber(c._log_ver)&&c._log_ver>=d){return}}c._log_ver=d;if(c.isDef(b.console)){e=b.console;if(!c.isFunction(e.log)||!c.isFunction(e.error)){e=false}}a(c,{log:function(f){if(c.debug&&e){e.log(f)}},error:function(f){if(c.debug&&e){e.error(f)}},getLogger:function(){var f=c.log;return{warn:f,log:f,info:f,debug:f}}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._random_ver){if(b._random_ver>=a){return}}b._random_ver=a;b.getRandom=function(){var d=b.now()%10000,c=[],f;for(var e=0;e<5;e++){f=Math.floor(Math.random()*10);if(e==0&&f==0){e=-1;continue}c.push(f)}if(d<10){c.push("000")}else{if(d<100){c.push("00")}else{if(d<1000){c.push("0")}}}c.push(d);return c.join("")}})(Dynamsoft.Lib);(function(b){var a=20201013;if(b._strUtil_ver){if(b.isNumber(b._strUtil_ver)&&b._strUtil_ver>=a){return}}b._strUtil_ver=a;b.mix(b,{startsWith:function(d,c){return d.lastIndexOf(c,0)===0},endsWith:function(e,d){var c=e.length-d.length;return c>=0&&e.indexOf(d,c)===c},replaceAll:function(e,d,c){return e.replace(new RegExp(d,"gi"),c)},upperCaseFirst:function(c){return c.charAt(0).toUpperCase()+c.substr(1)},removeNonPrintableChar:function(c){if(b.isString(c)){return c.replace(/[^\x20-\x7E]/g,"")}else{return c}},makeArray:function(h){if(h==null){return[]}if(b.isArray(h)){return h}var c=typeof h.length,g=typeof h;if(c!=="number"||h.alert||g==="string"||(g==="function"&&!("item" in h&&c==="number"))){return[h]}var e=[];for(var f=0,d=h.length;f<d;f++){e[f]=h[f]}return e}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._extend_ver){if(b.isNumber(b._extend_ver)&&b._extend_ver>=a){return}}b._extend_ver=a;b.extend=function(c,d){var e=function(){c.apply(this,arguments);if(d){d.apply(this,arguments)}};b.each(c.prototype,function(g,f){e.prototype[f]=g});e.prototype.constructor=e;return e}})(Dynamsoft.Lib);(function(c){var a=20200521;if(c._attribute_ver){if(c.isNumber(c._attribute_ver)&&c._attribute_ver>=a){return}}c._attribute_ver=a;function b(e){var d=this,f=d.constructor;d.__attrs={};d.__attrVals={};d.userConfig=e;while(f){d.addAttrs(f.ATTRS);f=f.superclass?f.superclass.constructor:null}c.mix(d.__attrs,e)}c.mix(b.prototype,{get:function(e){var d=this;if(e in d.__attrs){return d.__attrs[e]}return""},set:function(f,e){var d=this;if(f in d.__attrs){d.__attrs[f]=e}},addAttrs:function(d){c.mix(this.__attrs,d)}});b.extend=function(f){var d=this,g,e;f=f||{};if(f.constructor){g=f.constructor}e=c.extend(d,g);c.mix(e,f);return e};c.Attributes=b})(Dynamsoft.Lib);(function(h){var m=20200521;if(h._json_ver){if(h._json_ver>=m){return}}h._json_ver=m;var j=h.win.JSON;if(j&&j.parse&&j.stringify){h.parse=j.parse;h.stringify=j.stringify;return}var l=(function(){var q={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},p={},r=/["\b\f\n\r\t\x00-\x1f]/g,o=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;h.each(q,function(s,t){p[s]=t});p["\\/"]="/";p["\\\\"]="\\";return{quote:function(s){return'"'+s.replace(r,function(t){var u;if(!(u=q[t])){u="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(0-4)}return u})+'"'},unQuote:function(s){return s.slice(1,s.length-1).replace(o,function(t){var u;if(!(u=p[t])){u=String.fromCharCode(parseInt(t.slice(2),16))}return u})}}})(),i;function b(o){return o<10?"0"+o:o}function f(F,z,r,E,D,t){var u=t;t+=E;var v,q,x=0,s;if(r!==undefined){v=r}else{v=h.keys(F)}var C=[];for(q=v.length;x<q;x++){s=v[x];var o=i(s,F,z,r,E,D,t);if(o!==undefined){var w=l.quote(s);w+=":";if(E){w+=" "}w+=o;C[C.length]=w}}var A;if(!C.length){A="{}"}else{if(!E){A="{"+C.join(",")+"}"}else{var y=",\n"+t;var B=C.join(y);A="{\n"+t+B+"\n"+u+"}"}}return A}function n(B,t,p,A,z,q){var r=q;q+=A;var y=[];var v=B.length;var u=0;while(u<v){var o=i(String(u),B,t,p,A,z,q);if(o===undefined){y[y.length]="null"}else{y[y.length]=o}++u}var w;if(!y.length){w="[]"}else{if(!A){w="["+y.join(",")+"]"}else{var s="\n,"+q;var x=y.join(s);w="[\n"+q+x+"\n"+r+"]"}}return w}i=function(r,q,u,s,v,p,o){var t=q[r];if(t&&typeof t==="object"){if(typeof t.toJSON==="function"){t=t.toJSON(r)}else{if(t instanceof Date){t=isFinite(t.valueOf())?t.getUTCFullYear()+"-"+b(t.getUTCMonth()+1)+"-"+b(t.getUTCDate())+"T"+b(t.getUTCHours())+":"+b(t.getUTCMinutes())+":"+b(t.getUTCSeconds())+"Z":null}else{if(t instanceof String||t instanceof Number||t instanceof Boolean){t=t.valueOf()}}}}if(u!==undefined){t=u.call(q,r,t)}switch(typeof t){case"number":return isFinite(t)?String(t):"null";case"string":return l.quote(t);case"boolean":return String(t);case"object":if(!t){return"null"}if(h.isArray(t)){return n(t,u,s,v,p,o)}return f(t,u,s,v,p,o)}return undefined};h.stringify=function(r,o,q){var t="";var p,s;if(o){if(typeof o==="function"){s=o}else{if(h.isArray(o)){p=o}}}if(typeof q==="number"){q=Math.min(10,q);t=new Array(q+1).join(" ")}else{if(typeof q==="string"){t=q.slice(0,10)}}return i("",{"":r},s,p,t,[],"")};var c={},d={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},a;c.yy={unQuote:l.unQuote};a=function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)};a.prototype={constructor:function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)},resetInput:function(o){h.mix(this,{input:o,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var o=this,p=o.stateStack[o.stateStack.length-1],q=[];p=o.mapState(p);h.each(o.rules,function(s){var t=s.state||s[3];if(!t){if(p==a.STATIC.INITIAL){q.push(s)}}else{if(h.inArray(p,t)){q.push(s)}}});return q},pushState:function(o){this.stateStack.push(o)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var q=this,s=a.STATIC.DEBUG_CONTEXT_LIMIT,o=q.matched,r=q.match,p=q.input;o=o.slice(0,o.length-r.length);var u=(o.length>s?"...":"")+o.slice(-s).replace(/\n/," "),t=r+p;t=t.slice(0,s)+(t.length>s?"...":"");return u+t+"\n"+new Array(u.length+1).join("-")+"^"},mapSymbol:function(q){var o=this,p=o.symbolMap;if(!p){return q}return p[q]||(p[q]=(++o.symbolId))},mapReverseSymbol:function(p){var o=this,r=o.symbolMap,q,s=o.reverseSymbolMap;if(!s&&r){s=o.reverseSymbolMap={};h.each(r,function(u,t){s[u]=t})}if(s){return s[p]}else{return p}},mapState:function(q){var o=this,p=o.stateMap;if(!p){return q}return p[q]||(p[q]=(++o.stateId))},lex:function(){var y=this,w=y.input,r,v,o,t,z,x=y.getCurrentRules();y.match=y.text="";if(!w){return y.mapSymbol(a.STATIC.END_TAG)}for(r=0;r<x.length;r++){v=x[r];var u=v.regexp||v[1],p=v.token||v[0],q=v.action||v[2]||undefined;if((o=w.match(u))){z=o[0].match(/\n.*/g);if(z){y.lineNumber+=z.length}h.mix(y,{firstLine:y.lastLine,lastLine:y.lineNumber+1,firstColumn:y.lastColumn,lastColumn:z?z[z.length-1].length-1:y.lastColumn+o[0].length});var s;s=y.match=o[0];y.matches=o;y.text=s;y.matched+=s;t=q&&q.call(y);if(t===undefined){t=p}else{t=y.mapSymbol(t)}w=w.slice(s.length);y.input=w;if(t){return t}else{return y.lex()}}}h.error("lex error at line "+y.lineNumber+":\n"+y.showDebugInfo());return undefined}};a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var e=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});c.lexer=e;e.symbolMap={"$EOF":1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,"$START":13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};c.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return this.$1==="true"}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var o={};o[this.$1.key]=this.$1.value;return o}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];c.table={gotos:{"0":{"14":7,"15":8,"16":9,"17":10},"2":{"15":12,"16":9,"17":10,"18":13},"3":{"19":16,"20":17},"18":{"15":23,"16":9,"17":10},"20":{"15":24,"16":9,"17":10},"21":{"19":25}},action:{"0":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"1":{"1":[2,2,0],"3":[2,2,0],"6":[2,2,0],"8":[2,2,0]},"2":{"2":[1,0,1],"5":[1,0,2],"6":[1,0,11],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"3":{"2":[1,0,14],"8":[1,0,15]},"4":{"1":[2,3,0],"3":[2,3,0],"6":[2,3,0],"8":[2,3,0]},"5":{"1":[2,6,0],"3":[2,6,0],"6":[2,6,0],"8":[2,6,0]},"6":{"1":[2,7,0],"3":[2,7,0],"6":[2,7,0],"8":[2,7,0]},"7":{"1":[0,0,0]},"8":{"1":[2,1,0]},"9":{"1":[2,4,0],"3":[2,4,0],"6":[2,4,0],"8":[2,4,0]},"10":{"1":[2,5,0],"3":[2,5,0],"6":[2,5,0],"8":[2,5,0]},"11":{"1":[2,10,0],"3":[2,10,0],"6":[2,10,0],"8":[2,10,0]},"12":{"3":[2,8,0],"6":[2,8,0]},"13":{"3":[1,0,18],"6":[1,0,19]},"14":{"4":[1,0,20]},"15":{"1":[2,15,0],"3":[2,15,0],"6":[2,15,0],"8":[2,15,0]},"16":{"3":[2,13,0],"8":[2,13,0]},"17":{"3":[1,0,21],"8":[1,0,22]},"18":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"19":{"1":[2,11,0],"3":[2,11,0],"6":[2,11,0],"8":[2,11,0]},"20":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"21":{"2":[1,0,14]},"22":{"1":[2,16,0],"3":[2,16,0],"6":[2,16,0],"8":[2,16,0]},"23":{"3":[2,9,0],"6":[2,9,0]},"24":{"3":[2,12,0],"8":[2,12,0]},"25":{"3":[2,14,0],"8":[2,14,0]}}};c.parse=function g(y){var A=this,o=A.lexer,t,F,E,I=A.table,B=I.gotos,s=I.action,r=A.productions,u=[null],v=[0];o.resetInput(y);while(1){t=v[v.length-1];if(!F){F=o.lex()}if(!F){h.log("it is not a valid input: "+y,"error");return false}E=s[t]&&s[t][F];if(!E){var w=[],D;if(s[t]){h.each(s[t],function(L,M){w.push(A.lexer.mapReverseSymbol(M))})}D="Syntax error at line "+o.lineNumber+":\n"+o.showDebugInfo()+"\nexpect "+w.join(", ");h.log(D);return false}switch(E[d.TYPE_INDEX]){case d.SHIFT_TYPE:v.push(F);u.push(o.text);v.push(E[d.TO_INDEX]);F=null;break;case d.REDUCE_TYPE:var J=r[E[d.PRODUCTION_INDEX]],z=J.symbol||J[0],q=J.action||J[2],C=J.rhs||J[1],H=C.length,G=0,K,x=u[u.length-H];A.$$=x;K=undefined;for(;G<H;G++){A["$"+(H-G)]=u[u.length-1-G]}if(q){K=q.call(A)}if(K!==undefined){x=K}else{x=A.$$}if(H){v=v.slice(0,-1*H*2);u=u.slice(0,-1*H)}v.push(z);u.push(x);var p=B[v[v.length-2]][v[v.length-1]];v.push(p);break;case d.ACCEPT_TYPE:return x}}};function k(w,o,x){var s=w[o],t,v,u;if(typeof s==="object"){if(h.isArray(s)){t=0;v=s.length;var r=[];while(t<v){u=k(s,String(t),x);if(u!==undefined){r[r.length]=u}}s=r}else{var y=h.keys(s);t=0;for(v=y.length;t<v;t++){var q=y[t];u=k(s,q,x);if(u===undefined){delete s[q]}else{s[q]=u}}}}return x.call(w,o,s)}h.parse=function(q,o){var p=c.parse(String(q));if(o){return k({"":p},"",o)}else{return p}}})(Dynamsoft.Lib);(function(f){var e=20210305;if(f._array_ver){if(f._array_ver>=e){return}}f._array_ver=e;var c=Array.prototype,b=c.indexOf,a=c.filter,d=c.forEach;if(!f.isFunction(b)){b=function(i,j){var h;if(this==null){return -1}var l=Object(this);var g=l.length>>>0;if(g===0){return -1}var m=+j||0;if(Math.abs(m)===Infinity){m=0}if(m>=g){return -1}h=Math.max(m>=0?m:g-Math.abs(m),0);while(h<g){if(h in l&&l[h]===i){return h}h++}return -1}}if(!f.isFunction(d)){Array.prototype.forEach=function d(n,h){var j,i;if(this==null||!f.isFunction(n)){return}var m=Object(this);var g=m.length>>>0;if(arguments.length>1){j=h}i=0;while(i<g){var l;if(i in m){l=m[i];n.call(j,l,i,m)}i++}}}f.mix(f,{filter:a?function(g,i,h){return a.call(g,i,h||this)}:function(g,j,i){var h=[];f.each(g,function(m,l,k){if(j.call(i||this,m,l,k)){h.push(m)}});return h},indexOf:function(h,g){return b.call(g,h)},uniq:function(m){var l=[],g=m.length;for(var k=0;k<g;k++){for(var h=k+1;h<g;h++){if(m[k]===m[h]){k++;h=k}}l.push(m[k])}return l}})})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._function_ver){if(d._function_ver>=c){return}}d._function_ver=c;var b=Array.prototype,a=Function.prototype;if(!d.isFunction(a.bind)){a.bind=function(g){var f=this;if(1<arguments.length){var e=b.slice.call(arguments,1);return function(){return f.apply(g,arguments.length?e.concat(b.slice.call(arguments)):e)}}return function(){return arguments.length?f.apply(g,arguments):f.call(g)}}}})(Dynamsoft.Lib);(function(f){var d=20200521;if(f._string_ver){if(f._string_ver>=d){return}}f._string_ver=d;var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,e=String.prototype,c="",a=e.trim;if(!a){a=e.trim=function(){return this.replace(b,c)}}f.trim=function(g){return g==null?c:a.call(g)}})(Dynamsoft.Lib);(function(b){var a=20210305;if(b._navInfobase_ver){if(b.isNumber(b._navInfobase_ver)&&b._navInfobase_ver>=a){return}}b._navInfobase_ver=a;b.getNavInfoByUserAgent=function(P,N){var Q="",ac=!1,G=!0,V=b.win,j=b.doc,ai=j&&j.documentElement,X,U=P.toLowerCase(),E=N.toLowerCase(),Y=(/cros/).test(U),x=(/android/g).test(U),aa=(/iphone/g).test(U)||(/iphone/g).test(E),k=(/macintosh/).test(U),y=(/ipad/g).test(U)||((k||(E=="macintel"))&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1),p=(/ucweb|ucbrowser/g).test(U),L=!p&&(/nexus/g).test(U)&&(/version\/[\d.]+.*safari\//g).test(U),ag=(/playbook/g).test(U),S=(/hp-tablet/g).test(U),D=(/blackberry|bb10/g).test(U),q=(/symbian/g).test(U),F=(/windows phone/g).test(U),H=(/mobile/g).test(U),w=(/aarch64|arm64|mips64/g).test(U);var s=ag||y||S,W=aa||L||D||q||F||x||H,c=!W&&!s&&!Y,R=c&&(/win32|win64|windows/).test(E),n=R&&(/win64|x64/).test(U),J=c&&(/mac68k|macppc|macintosh|macintel/).test(U),af=c&&(/linux/).test(E),o=(E=="win64")||(/wow64|x86_64|win64|x64/).test(U)||w,m=(/wow64/g).test(U),B=U.indexOf("msie "),K=U.indexOf("trident"),I=U.indexOf("rv:"),v=ac,r=(/opera|opr/g).test(U),M=(/360se/g).test(U),T=(/maxthon/g).test(U),z=(/tencenttraveler|qqbrowser/g).test(U),O=(/the world/g).test(U),Z=(/metasr/g).test(U),h=(/avant/g).test(U),C=(/firefox|fxios/g).test(U),t=!C&&(/edge\/|edga\/|edgios\/|edg\//g).test(U),f=!(D||ag||p||r||t)&&(/chrome|crios/g).test(U),e=R&&!C&&!t&&!f&&(B!=-1||K!=-1||I!=-1),l="",d=0,u=(/gecko/g).test(U),g=W||s,ab=Q,A=ac,ae=V.JSON;if((J||aa||y||R||D||ag||L)&&!p&&!r&&!t&&!e&&!C){X=U.match(/version\/([\d.]+).*safari\//);if(X){if(D||ag||L){}else{v=G;f=ac}ab=X[1]}}if(t){var ah=U.indexOf("edge/");if(ah>-1){ah+=5}else{ah=U.indexOf("edg/");if(ah>-1){ah+=4}else{ah=U.indexOf("edga/");if(ah>-1){ah+=5}else{ah=U.indexOf("edgios/");if(ah>-1){ah+=7}}}}if(ah>-1){ab=U.slice(ah);X=ab.indexOf(" ");if(X>-1){ab=ab.slice(0,X)}}g=G}else{if(C){X=U.indexOf("firefox/");g=G;if(X>-1){X=U.slice(X+8);var ad=X.indexOf(" ");if(ad>-1){X=X.slice(0,ad)}ab=X;ad=X.indexOf(".");if(ad>-1){X=ab.slice(0,ad)}if(X<27){g=ac}}else{if(aa||y){X=U.indexOf("fxios/");if(X>-1){X=U.slice(X+6);X=X.slice(0,X.indexOf(" "));ab=X}}}}else{if(e){if(B!=-1){X=U.slice(B+5);X=X.slice(0,X.indexOf(";"));l=X}else{if(I!=-1){X=U.slice(I+3);X=X.slice(0,X.indexOf(";"));X=X.slice(0,X.indexOf(")"));l=X}else{if(K!=-1){X=U.slice(K+7);X=X.slice(0,X.indexOf(";"));l=X}}}if(l===""||l>8){g=G}ab=X}else{if(v){X=ab.indexOf(".");g=G;if(X>-1){X=ab.slice(0,X);if(X<7){g=ac}}}else{if(p){X=U.indexOf("ucweb");if(X>-1){ab=U.slice(X+5)}else{X=U.indexOf("ucbrowser/");if(X>-1){ab=U.slice(X+10);X=ab.indexOf(" ");if(X>-1){ab=ab.slice(0,X)}}}g=G}else{if(r){X=U.indexOf("version/");if(X>-1){ab=U.slice(X+8)}else{X=U.indexOf("opr/");if(X>-1){ab=U.slice(X+4)}}g=G}else{if(q){X=U.indexOf("browserng/");if(X>-1){ab=U.slice(X+10)}g=G}else{if(F){X=U.indexOf("iemobile/");if(X>-1){ab=U.slice(X+9)}g=G}else{if(f){var i=U.indexOf("chrome/");if(i>-1){ab=U.slice(i+7);X=ab.indexOf(" ");if(X>-1){ab=ab.slice(0,X)}}else{i=U.indexOf("crios/");if(i>-1){ab=U.slice(i+6);X=ab.indexOf(" ");if(X>-1){ab=ab.slice(0,X)}}}g=G;X=ab.indexOf(".");if(X>-1){X=ab.slice(0,X);if(X<27){g=ac}}}}}}}}}}}if(t||e){if(j.documentMode){d=j.documentMode}else{d=5;if(j.compatMode){if(j.compatMode=="CSS1Compat"){d=7}}}}if(ai&&ai.querySelector&&(!e||e&&(ab>8))){A=G}if(e&&ab<9){ae=null}return{bWin:R,bMac:J,bLinux:af,bMobile:W,bPad:s,bChromeOS:Y,bEmbed:w,bAndroid:x,biPhone:aa,biPad:y,bWin64:n,bWOW64:m,bOSx64:o,bIE:e,bEdge:t,bChrome:f,bFirefox:C,bSafari:v,bOpera:r,bNexus:L,bUC:p,b360SE:M,bMaxthon:T,bTencentTraveler:z,bTheWorld:O,bMetaSr:Z,bAvant:h,bGecko:u,bHTML5Edition:g,strBrowserVersion:ab,IEMode:d,bQuerySelectorSupported:A,nativeJson:ae,scrollBarWidth:ac}}})(Dynamsoft.Lib);(function(d){var a=20210305;if(d._defineProperty_ver){if(d._defineProperty_ver>=a){return}}d._defineProperty_ver=a;var b=false;if(0){}else{var c=navigator,e;e=d.getNavInfoByUserAgent(c.userAgent,c.platform);Dynamsoft.navInfo=e;if(e.bIE){b=(e.strBrowserVersion==8)}}if(b){Object.defineProperty=function(g,f,h){g[f]=h.value||(h.get&&h.get())}}else{if(!Object.defineProperty){Object.defineProperty=function(l,i,k){var h=l[i],f=function(){return k.get.apply(l,[h])},j=function(m){return(h=k.set.apply(l,[m]))};if(l.__defineGetter__){l.__defineGetter__(i,f);l.__defineSetter__(i,j)}else{var g=function(n){if(event.propertyName==i){l.detachEvent("onpropertychange",g);var m=j(l[i]);l[i]=f;l[i].toString=f;l.attachEvent("onpropertychange",g)}};l[i]=f;l[i].toString=f;l.attachEvent("onpropertychange",g)}}}}if(!Object.create){Object.create=function(h,f){if(typeof h!=="object"&&typeof h!=="function"){return{}}else{if(h===null){return{}}}if(typeof f!="undefined"){return{}}function g(){}g.prototype=h;return new g()}}})(Dynamsoft.Lib);(function(g,c){var t="",j=!1,f=!0,s=g.getLogger(),l=g.isDef,a=g.each,k="&",m="=",p=16,d={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},o={},h,i,b=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;a(d,function(v,u){o[v]=u});function r(v){var u=typeof v;return v==null||(u!=="object"&&u!=="function")}function q(){if(h){return h}var u=t;a(d,function(v){u+=v+"|"});u=u.slice(0,-1);h=new RegExp(u,"g");return h}function n(){if(i){return i}var u=t;a(o,function(v){u+=v+"|"});u+="&#(\\d{1,5});";i=new RegExp(u,"g");return i}function e(u){return encodeURIComponent(String(u))}g.mix(g,{urlEncode:e,urlDecode:function(u){return decodeURIComponent(u.replace(/\+/g," "))},fromUnicode:function(u){return u.replace(/\\u([a-f\d]{4})/ig,function(v,w){return String.fromCharCode(parseInt(w,p))})},escapeHtml:function(u){return(u+"").replace(q(),function(v){return o[v]})},escapeRegExp:function(u){return u.replace(b,"\\$&")},unEscapeHtml:function(u){return u.replace(n(),function(v,w){return d[v]||String.fromCharCode(+w)})},param:function(y,x,v,u){x=x||k;v=v||m;if(g.isUndef(u)){u=f}var w=[];a(y,function(B,z){var A=e(z);if(r(B)){w.push(A);if(l(B)){w.push(v,e(B+t))}w.push(x)}else{if(g.isArray(B)&&B.length){a(B,function(C){if(r(C)){w.push(A,(u?e("[]"):t));if(l(C)){w.push(v,e(C+t))}w.push(x)}})}}});w.pop();return w.join(t)},unparam:function(B,F,E){if(!g.isString(B)||!(B=g.trim(B))){return{}}F=F||k;E=E||m;var A={},C,u=g.urlDecode,v=B.split(F),D,w,x=0,y=v.length;for(;x<y;++x){C=g.indexOf(E,v[x]);if(C===-1){D=u(v[x]);w=c}else{D=u(v[x].substring(0,C));w=v[x].substring(C+1);try{w=u(w)}catch(z){s.error("decodeURIComponent error : "+w);s.error(z)}if(g.endsWith(D,"[]")){D=D.substring(0,D.length-2)}}if(D in A){if(g.isArray(A[D])){A[D].push(w)}else{A[D]=[A[D],w]}}else{A[D]=w}}return A}})})(Dynamsoft.Lib);(function(d){var c=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function b(j,e){var g=[];for(var f=0;f<j.length;f++){var h=j[f];if(!h||h==="."){continue}if(h===".."){if(g.length&&g[g.length-1]!==".."){g.pop()}else{if(e){g.push("..")}}}else{g.push(h)}}return g}var a=d.Path={resolve:function(){var h="",f,g,e=(arguments),j,k=0;for(g=e.length-1;g>=0&&!k;g--){j=e[g];if(d.isString(j)&&!!j){h=j+"/"+h;k=j.charAt(0)==="/"}}f=b(d.filter(h.split("/"),function(i){return !!i}),!k).join("/");return((k?"/":"")+f)||"."},normalize:function(f){var g=f.charAt(0)==="/",e=f.slice(-1)==="/";f=b(d.filter(f.split("/"),function(h){return !!h}),!g).join("/");if(!f&&!g){f="."}if(f&&e){f+="/"}return(g?"/":"")+f},join:function(){var e=d.makeArray(arguments);return a.normalize(d.filter(e,function(f){return f&&(d.isString(f))}).join("/"))},relative:function(l,k){l=a.normalize(l);k=a.normalize(k);var j=d.filter(l.split("/"),function(m){return !!m}),i=[],f,g,e=d.filter(k.split("/"),function(m){return !!m}),h=Math.min(j.length,e.length);for(f=0;f<h;f++){if(j[f]!==e[f]){break}}g=f;while(f<j.length){i.push("..");f++}i=i.concat(e.slice(g));return i.join("/")},basename:function(h,f){var e=h.match(c)||[],g;g=e[3]||"";if(f&&g&&g.slice(-1*f.length)===f){g=g.slice(0,-1*f.length)}return g},dirname:function(h){var e=h.match(c)||[],f=e[1]||"",g=e[2]||"";if(!f&&!g){return"."}if(g){g=g.substring(0,g.length-1)}return f+g},extname:function(e){return(e.match(c)||[])[4]||""}}})(Dynamsoft.Lib);(function(d,c){function b(e){if(!e._queryMap){e._queryMap=d.unparam(e._query)}}function a(e){this._query=e||""}a.prototype={constructor:a,clone:function(){return new a(this.toString())},reset:function(f){var e=this;e._query=f||"";e._queryMap=null;return e},count:function(){var e=this,f=0;b(e);d.each(e._queryMap,function(g){if(d.isArray(g)){f+=g.length}else{f++}});return f},has:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return f in g}else{return !d.isEmptyObject(g)}},get:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return g[f]}else{return g}},keys:function(){var e=this;b(e);return d.keys(e._queryMap)},set:function(f,g){var e=this,h;b(e);h=e._queryMap;if(d.isString(f)){e._queryMap[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(j,i){h[i]=j})}return e},remove:function(f){var e=this;b(e);if(f){delete e._queryMap[f]}else{e._queryMap={}}return e},add:function(f,h){var e=this,i,g;if(d.isString(f)){b(e);i=e._queryMap;g=i[f];if(d.isUndef(g)){g=h}else{g=[].concat(g).concat(h)}i[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(l,j){e.add(j,l)})}return e},toString:function(e){var f=this;b(f);return d.param(f._queryMap,c,c,e)}};d.uriQuery=a})(Dynamsoft.Lib);(function(j){var h=j.uriQuery,l=j.each,f=j.Path,n=j.getLogger(),o=/[#\/\?@]/g,c=/[#\?]/g,k=/[#@]/g,e=/#/g,g={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},b=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function a(p){return p.length===1?"0"+p:p}function i(q,p){return q.toLowerCase()===p.toLowerCase()}function m(q,p){return encodeURI(q).replace(p,function(r){return"%"+a(r.charCodeAt(0).toString(16))})}function d(r){if(r instanceof d){return r.clone()}var q,p=this;j.mix(p,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});q=d.getComponents(r);l(q,function(s,t){s=s||"";if(t==="query"){p.query=new h(s)}else{try{s=j.urlDecode(s)}catch(u){n.error(u+"urlDecode error : "+s)}p[t]=s}});return p}d.prototype={constructor:d,clone:function(){var q=new d(),p=this;l(g,function(r,s){q[s]=p[s]});q.query=q.query.clone();return q},resolve:function(t){if(j.isString(t)){t=new d(t)}var r=this,s=0,q,p=["scheme","userInfo","hostname","port","path","query","fragment"],u=r.clone();l(p,function(w){if(w==="path"){if(s){u[w]=t[w]}else{var v=t.path;if(v){s=1;if(!j.startsWith(v,"/")){if(u.hostname&&!u.path){v="/"+v}else{if(u.path){q=u.path.lastIndexOf("/");if(q!==-1){v=u.path.slice(0,q+1)+v}}}}u.path=f.normalize(v)}}}else{if(w==="query"){if(s||t.query.toString()){u.query=t.query.clone();s=1}}else{if(s||t[w]){u[w]=t[w];s=1}}}});return u},getScheme:function(){return this.scheme},setScheme:function(p){this.scheme=p;return this},getHostname:function(){return this.hostname},setHostname:function(p){this.hostname=p;return this},setUserInfo:function(p){this.userInfo=p;return this},getUserInfo:function(){return this.userInfo},setPort:function(p){this.port=p;return this},getPort:function(){return this.port},setPath:function(p){this.path=p;return this},getPath:function(){return this.path},setQuery:function(p){if(j.isString(p)){if(j.startsWith(p,"?")){p=p.slice(1)}p=new h(m(p,k))}this.query=p;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(q){var p=this;if(j.startsWith(q,"#")){q=q.slice(1)}p.fragment=q;return p},isSameOriginAs:function(p){var q=this;return i(q.hostname,p.hostname)&&i(q.scheme,p.scheme)&&i(q.port,p.port)},toString:function(s){var r=[],x=this,p,v,y,q,t,u,w;if((p=x.scheme)){r.push(m(p,o));r.push(":")}if((v=x.hostname)){r.push("//");if((w=x.userInfo)){r.push(m(w,o));r.push("@")}r.push(encodeURIComponent(v));if((q=x.port)){r.push(":");r.push(q)}}if((y=x.path)){if(v&&!j.startsWith(y,"/")){y="/"+y}y=f.normalize(y);r.push(m(y,c))}if((u=(x.query.toString.call(x.query,s)))){r.push("?");r.push(u)}if((t=x.fragment)){r.push("#");r.push(m(t,e))}return r.join("")}};d.getComponents=function(s){var r="";s=s||r;var p=s.match(b)||[],q={};l(g,function(t,u){q[u]=p[t]});return q};j.Uri=d})(Dynamsoft.Lib);(function(c,b){var e=c.Lib,d=e.win,a=20200622;if(e._promise_ver){if(e.isNumber(e._promise_ver)&&e._promise_ver>=a){return}}e._promise_ver=a;if(e.isFunction(d.__zone_symbol__Promise)){e.nativePromise=d.__zone_symbol__Promise}if(self&&self.Promise){e.Promise=self.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}else{if(d&&d.Promise){e.Promise=d.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}}if(!d.Map){d.Map=function(){this.keys=new Array();this.data=new Object();this.set=function(f,g){if(this.data[f]==null){if(this.keys.indexOf(f)==-1){this.keys.push(f)}}this.data[f]=g};this.get=function(f){return this.data[f]}}}!function(f){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=f()}else{if("function"==typeof define&&define.amd){define([],f)}else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self),g.Promise=f()}}}(function(){var f,h,i;return function g(k,m,q){function j(t,o){if(!m[t]){if(!k[t]){var v="function"==typeof _dereq_&&_dereq_;if(!o&&v){return v(t,!0)}if(p){return p(t,!0)}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=m[t]={exports:{}};k[t][0].call(n.exports,function(s){var u=k[t][1][s];return j(u?u:s)},n,n.exports,g,k,m,q)}return m[t].exports}for(var p="function"==typeof _dereq_&&_dereq_,l=0;l<q.length;l++){j(q[l])}return j}({1:[function(j,k,l){k.exports=function(m){function o(n){var s=new p(n),q=s.promise();return s.setHowMany(1),s.setUnwrap(),s.init(),q}var p=m._SomePromiseArray;m.any=function(n){return o(n)},m.prototype.any=function(){return o(this)}}},{}],2:[function(C,y,q){function j(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new x(16),this._normalQueue=new x(16),this._haveDrainedQueues=!1;var l=this;this.drainQueues=function(){l._drainQueues()},this._schedule=k}function w(l,o,p){this._lateQueue.push(l,o,p),this._queueTick()}function m(l,o,p){this._normalQueue.push(l,o,p),this._queueTick()}function D(l){this._normalQueue._pushOne(l),this._queueTick()}function A(l){for(;l.length()>0;){z(l)}}function z(l){var p=l.shift();if("function"!=typeof p){p._settlePromises()}else{var s=l.shift(),o=l.shift();p.call(s,o)}}var B;try{throw new Error}catch(v){B=v}var k=C("./schedule"),x=C("./queue");j.prototype.setScheduler=function(l){var n=this._schedule;return this._schedule=l,this._customScheduler=!0,n},j.prototype.hasCustomScheduler=function(){return this._customScheduler},j.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},j.prototype.fatalError=function(l,n){n?(process.stderr.write("Fatal "+(l instanceof Error?l.stack:l)+"\n"),process.exit(2)):this.throwLater(l)},j.prototype.throwLater=function(l,o){if(1===arguments.length&&(o=l,l=function(){throw o}),"undefined"!=typeof setTimeout){setTimeout(function(){l(o)},0)}else{try{this._schedule(function(){l(o)})}catch(p){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}}},j.prototype.invokeLater=w,j.prototype.invoke=m,j.prototype.settlePromises=D,j.prototype._drainQueues=function(){A(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,A(this._lateQueue)},j.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},j.prototype._reset=function(){this._isTickUsed=!1},y.exports=j,y.exports.firstLineError=B},{"./queue":26,"./schedule":29}],3:[function(j,k,l){k.exports=function(y,v,q,m){var u=!1,p=function(n,o){this._reject(o)},z=function(n,o){o.promiseRejectionQueued=!0,o.bindingPromise._then(p,p,null,this,n)},x=function(n,o){0===(50397184&this._bitField)&&this._resolveCallback(o.target)},w=function(n,o){o.promiseRejectionQueued||this._reject(n)};y.prototype.bind=function(A){u||(u=!0,y.prototype._propagateFrom=m.propagateFromFunction(),y.prototype._boundValue=m.boundValueFunction());var r=q(A),n=new y(v);n._propagateFrom(this,1);var t=this._target();if(n._setBoundTo(r),r instanceof y){var s={promiseRejectionQueued:!1,promise:n,target:t,bindingPromise:r};t._then(v,z,void 0,n,s),r._then(x,w,void 0,n,s),n._setOnCancel(r)}else{n._resolveCallback(t)}return n},y.prototype._setBoundTo=function(n){void 0!==n?(this._bitField=2097152|this._bitField,this._boundTo=n):this._bitField=-2097153&this._bitField},y.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},y.bind=function(o,r){return y.resolve(r).bind(o)}}},{}],4:[function(k,m,q){function l(){try{Promise===p&&(Promise=j)}catch(n){}return p}var j;"undefined"!=typeof Promise&&(j=Promise);var p=k("./promise")();p.noConflict=l,m.exports=p},{"./promise":22}],5:[function(k,m,q){var l=Object.create;if(l){var j=l(null),p=l(null);j[" size"]=p[" size"]=0}m.exports=function(x){function A(s,C){var B;if(null!=s&&(B=s[C]),"function"!=typeof B){var o="Object "+t.classString(s)+" has no method '"+t.toString(C)+"'";throw new x.TypeError(o)}return B}function w(n){var s=this.pop(),o=A(n,s);return o.apply(n,this)}function u(n){return n[this]}function y(n){var o=+this;return 0>o&&(o=Math.max(0,o+n.length)),n[o]}var v,t=k("./util"),z=t.canEvaluate;t.isIdentifier;x.prototype.call=function(n){var o=[].slice.call(arguments,1);return o.push(n),this._then(w,void 0,void 0,o,void 0)},x.prototype.get=function(o){var B,C="number"==typeof o;if(C){B=y}else{if(z){var s=v(o);B=null!==s?s:u}else{B=u}}return this._then(B,void 0,void 0,o,void 0)}}},{"./util":36}],6:[function(j,k,l){k.exports=function(u,x,t,p){var v=j("./util"),q=v.tryCatch,m=v.errorObj,w=u._async;u.prototype["break"]=u.prototype.cancel=function(){if(!p.cancellation()){return this._warn("cancellation is disabled")}for(var o=this,r=o;o._isCancellable();){if(!o._cancelBy(r)){r._isFollowing()?r._followee().cancel():r._cancelBranched();break}var s=o._cancellationParent;if(null==s||!s._isCancellable()){o._isFollowing()?o._followee().cancel():o._cancelBranched();break}o._isFollowing()&&o._followee().cancel(),o._setWillBeCancelled(),r=o,o=s}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(n){return n===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),w.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(o,y){if(v.isArray(o)){for(var z=0;z<o.length;++z){this._doInvokeOnCancel(o[z],y)}}else{if(void 0!==o){if("function"==typeof o){if(!y){var s=q(o).call(this._boundValue());s===m&&(this._attachExtraTrace(s.e),w.throwLater(s.e))}}else{o._resultCancelled(this)}}}},u.prototype._invokeOnCancel=function(){var n=this._onCancel();this._unsetOnCancel(),w.invoke(this._doInvokeOnCancel,this,n)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(j,k,l){k.exports=function(t){function v(r,s,o){return function(C){var x=o._boundValue();r:for(var n=0;n<r.length;++n){var A=r[n];if(A===Error||null!=A&&A.prototype instanceof Error){if(C instanceof A){return u(s).call(x,C)}}else{if("function"==typeof A){var z=u(A).call(x,C);if(z===p){return z}if(z){return u(s).call(x,C)}}else{if(q.isObject(C)){for(var y=m(A),w=0;w<y.length;++w){var B=y[w];if(A[B]!=C[B]){continue r}}return u(s).call(x,C)}}}}return t}}var q=j("./util"),m=j("./es5").keys,u=q.tryCatch,p=q.errorObj;return v}},{"./es5":13,"./util":36}],8:[function(j,k,l){k.exports=function(p){function s(){this._trace=new s.CapturedTrace(q())}function v(){return m?new s:void 0}function q(){var n=u.length-1;return n>=0?u[n]:void 0}var m=!1,u=[];return p.prototype._promiseCreated=function(){},p.prototype._pushContext=function(){},p.prototype._popContext=function(){return null},p._peekContext=p.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,u.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var n=u.pop(),o=n._promiseCreated;return n._promiseCreated=null,o}return null},s.CapturedTrace=null,s.create=v,s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var y=p.prototype._pushContext,w=p.prototype._popContext,t=p._peekContext,r=p.prototype._peekContext,x=p.prototype._promiseCreated;s.deactivateLongStackTraces=function(){p.prototype._pushContext=y,p.prototype._popContext=w,p._peekContext=t,p.prototype._peekContext=r,p.prototype._promiseCreated=x,m=!1},m=!0,p.prototype._pushContext=s.prototype._pushContext,p.prototype._popContext=s.prototype._popContext,p._peekContext=p.prototype._peekContext=q,p.prototype._promiseCreated=function(){var n=this._peekContext();n&&null==n._promiseCreated&&(n._promiseCreated=this)}},s}},{}],9:[function(j,k,l){k.exports=function(a7,aW,aR,a2){function aV(m,n){return{promise:n}}function aQ(){return !1}function bb(o,q,s){var p=this;try{o(q,s,function(n){if("function"!=typeof n){throw new TypeError("onCancel must be a function, got: "+aB.toString(n))}p._attachCancellationCallback(n)})}catch(m){return m}}function a9(m){if(!this._isCancellable()){return this}var n=this._onCancel();void 0!==n?aB.isArray(n)?n.push(m):this._setOnCancel([n,m]):this._setOnCancel(m)}function aP(){return this._onCancelField}function aY(m){this._onCancelField=m}function aU(){this._cancellationParent=void 0,this._onCancelField=void 0}function a6(m,o){if(0!==(1&o)){this._cancellationParent=m;var p=m._branchesRemainingToCancel;void 0===p&&(p=0),m._branchesRemainingToCancel=p+1}0!==(2&o)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a3(m,n){0!==(2&n)&&m._isBound()&&this._setBoundTo(m._boundTo)}function bc(){var m=this._boundTo;return void 0!==m&&m instanceof a7?m.isFulfilled()?m.value():void 0:m}function a8(){this._trace=new ad(this._peekContext())}function aO(m,p){if(aS(m)){var q=this._trace;if(void 0!==q&&p&&(q=q._parent),void 0!==q){q.attachExtraTrace(m)}else{if(!m.__stackCleaned__){var o=ax(m);aB.notEnumerableProp(m,"stack",o.message+"\n"+o.stack.join("\n")),aB.notEnumerableProp(m,"__stackCleaned__",!0)}}}}function aL(){this._trace=void 0}function a4(F,B,w,m,y){if(void 0===F&&null!==B&&t){if(void 0!==y&&y._returnedNonUndefined()){return}if(0===(65535&m._bitField)){return}w&&(w+=" ");var v="",G="";if(B._trace){for(var D=B._trace.stack.split("\n"),C=aZ(D),E=C.length-1;E>=0;--E){var x=C[E];if(!aj.test(x)){var q=x.match(aw);q&&(v="at "+q[1]+":"+q[2]+":"+q[3]+" ");break}}if(C.length>0){for(var A=C[0],E=0;E<D.length;++E){if(D[E]===A){E>0&&(G="\n"+D[E-1]);break}}}}var z="a promise was created in a "+w+"handler "+v+"but was not returned from it, see http://goo.gl/rRqMUw"+G;m._warn(z,!0,B)}}function aX(m,o){var p=m+" is deprecated and will be removed in a future version.";return o&&(p+=" Use "+o+" instead."),ba(p)}function ba(p,w,u){if(aF.warnings){var m,v=new ae(p);if(w){u._attachExtraTrace(v)}else{if(aF.longStackTraces&&(m=a7._peekContext())){m.attachExtraTrace(v)}else{var q=ax(v);v.stack=q.message+"\n"+q.stack.join("\n")}}aG("warning",v)||aM(v,"",!0)}}function aN(m,o){for(var p=0;p<o.length-1;++p){o[p].push("From previous event:"),o[p]=o[p].join("\n")}return p<o.length&&(o[p]=o[p].join("\n")),m+"\n"+o.join("\n")}function aA(m){for(var n=0;n<m.length;++n){(0===m[n].length||n+1<m.length&&m[n][0]===m[n+1][0])&&(m.splice(n,1),n--)}}function a1(y){for(var v=y[0],q=1;q<y.length;++q){for(var m=y[q],u=v.length-1,p=v[u],z=-1,x=m.length-1;x>=0;--x){if(m[x]===p){z=x;break}}for(var x=z;x>=0;--x){var w=m[x];if(v[u]!==w){break}v.pop(),u--}v=m}}function aZ(p){for(var s=[],v=0;v<p.length;++v){var q=p[v],m="    (No stack trace)"===q||aK.test(q),u=m&&ag(q);m&&!u&&(ac&&" "!==q.charAt(0)&&(q="    "+q),s.push(q))}return s}function ay(m){for(var p=m.stack.replace(/\s+$/g,"").split("\n"),q=0;q<p.length;++q){var o=p[q];if("    (No stack trace)"===o||aK.test(o)){break}}return q>0&&"SyntaxError"!=m.name&&(p=p.slice(q)),p}function ax(m){var o=m.stack,p=m.toString();return o="string"==typeof o&&o.length>0?ay(m):["    (No stack trace)"],{message:p,stack:"SyntaxError"==m.name?o:aZ(o)}}function aM(o,q,s){if("undefined"!=typeof console){var p;if(aB.isObject(o)){var m=o.stack;p=q+ab(m,o)}else{p=q+String(o)}"function"==typeof ar?ar(p,s):("function"==typeof console.log||"object"==typeof console.log)&&console.log(p)}}function af(p,s,v,q){var m=!1;try{"function"==typeof s&&(m=!0,"rejectionHandled"===p?s(q):s(v,q))}catch(u){am.throwLater(u)}"unhandledRejection"===p?aG(p,v,q)||m||aM(v,"Unhandled rejection "):aG(p,q)}function ak(o){var q;if("function"==typeof o){q="[function "+(o.name||"anonymous")+"]"}else{q=o&&"function"==typeof o.toString?o.toString():aB.toString(o);var s=/\[object [a-zA-Z0-9$_]+\]/;if(s.test(q)){try{var p=JSON.stringify(o);q=p}catch(m){}}0===q.length&&(q="(empty array)")}return"(<"+ai(q)+">, no stack trace)"}function ai(m){var n=41;return m.length<n?m:m.substr(0,n-3)+"..."}function ah(){return"function"==typeof aI}function al(m){var n=m.match(aD);return n?{fileName:n[1],line:parseInt(n[2],10)}:void 0}function aC(A,w){if(ah()){for(var q,m,v=(A.stack||"").split("\n"),p=(w.stack||"").split("\n"),B=-1,y=-1,x=0;x<v.length;++x){var z=al(v[x]);if(z){q=z.fileName,B=z.line;break}}for(var x=0;x<p.length;++x){var z=al(p[x]);if(z){m=z.fileName,y=z.line;break}}0>B||0>y||!q||!m||q!==m||B>=y||(ag=function(n){if(aJ.test(n)){return !0}var o=al(n);return o&&o.fileName===q&&B<=o.line&&o.line<=y?!0:!1})}}function ad(m){this._parent=m,this._promisesCreated=0;var n=this._length=1+(void 0===m?0:m._length);aI(this,ad),n>32&&this.uncycle()}var au,az,ar,ao,am=a7._async,ae=j("./errors").Warning,aB=j("./util"),an=j("./es5"),aS=aB.canAttachTrace,aJ=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,aj=/\((?:timers\.js):\d+:\d+\)/,aw=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,aK=null,ab=null,ac=!1,ap=!(0==aB.env("BLUEBIRD_DEBUG")||!aB.env("BLUEBIRD_DEBUG")&&"development"!==aB.env("NODE_ENV")),aq=!(0==aB.env("BLUEBIRD_WARNINGS")||!ap&&!aB.env("BLUEBIRD_WARNINGS")),aa=!(0==aB.env("BLUEBIRD_LONG_STACK_TRACES")||!ap&&!aB.env("BLUEBIRD_LONG_STACK_TRACES")),t=0!=aB.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(aq||!!aB.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function m(){for(var n=0;n<o.length;++n){o[n]._notifyUnhandledRejection()}p()}function p(){o.length=0}var o=[];ao=function(n){o.push(n),setTimeout(m,1)},an.defineProperty(a7,"_unhandledRejectionCheck",{value:m}),an.defineProperty(a7,"_unhandledRejectionClear",{value:p})}(),a7.prototype.suppressUnhandledRejections=function(){var m=this._target();m._bitField=-1048577&m._bitField|524288},a7.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),ao(this))},a7.prototype._notifyUnhandledRejectionIsHandled=function(){af("rejectionHandled",au,void 0,this)},a7.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a7.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},a7.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var m=this._settledValue();this._setUnhandledRejectionIsNotified(),af("unhandledRejection",az,m,this)}},a7.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a7.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a7.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},a7.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a7.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a7.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},a7.prototype._warn=function(m,o,p){return ba(m,o,p||this)},a7.onPossiblyUnhandledRejection=function(m){var o=a7._getContext();az=aB.contextBind(o,m)},a7.onUnhandledRejectionHandled=function(m){var o=a7._getContext();au=aB.contextBind(o,m)};var a5=function(){};a7.longStackTraces=function(){if(am.haveItemsQueued()&&!aF.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!aF.longStackTraces&&ah()){var n=a7.prototype._captureStackTrace,o=a7.prototype._attachExtraTrace,m=a7.prototype._dereferenceTrace;aF.longStackTraces=!0,a5=function(){if(am.haveItemsQueued()&&!aF.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}a7.prototype._captureStackTrace=n,a7.prototype._attachExtraTrace=o,a7.prototype._dereferenceTrace=m,aW.deactivateLongStackTraces(),aF.longStackTraces=!1},a7.prototype._captureStackTrace=a8,a7.prototype._attachExtraTrace=aO,a7.prototype._dereferenceTrace=aL,aW.activateLongStackTraces()}},a7.hasLongStackTraces=function(){return aF.longStackTraces&&ah()};var aT={unhandledrejection:{before:function(){var m=aB.global.onunhandledrejection;return aB.global.onunhandledrejection=null,m},after:function(m){aB.global.onunhandledrejection=m}},rejectionhandled:{before:function(){var m=aB.global.onrejectionhandled;return aB.global.onrejectionhandled=null,m},after:function(m){aB.global.onrejectionhandled=m}}},a0=function(){var m=function(q,r){if(!q){return !aB.global.dispatchEvent(r)}var s;try{return s=q.before(),!aB.global.dispatchEvent(r)}finally{q.after(s)}};try{if("function"==typeof CustomEvent){var o=new CustomEvent("CustomEvent");return aB.global.dispatchEvent(o),function(u,v){u=u.toLowerCase();var s={detail:v,cancelable:!0},q=new CustomEvent(u,s);return an.defineProperty(q,"promise",{value:v.promise}),an.defineProperty(q,"reason",{value:v.reason}),m(aT[u],q)}}if("function"==typeof Event){var o=new Event("CustomEvent");return aB.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=new Event(s,{cancelable:!0});return q.detail=u,an.defineProperty(q,"promise",{value:u.promise}),an.defineProperty(q,"reason",{value:u.reason}),m(aT[s],q)}}var o=document.createEvent("CustomEvent");return o.initCustomEvent("testingtheevent",!1,!0,{}),aB.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=document.createEvent("CustomEvent");return q.initCustomEvent(s,!1,!0,u),m(aT[s],q)}}catch(p){}return function(){return !1}}(),aH=function(){return aB.isNode?function(){return process.emit.apply(process,arguments)}:aB.global?function(m){var o="on"+m.toLowerCase(),p=aB.global[o];return p?(p.apply(aB.global,[].slice.call(arguments,1)),!0):!1}:function(){return !1}}(),aE={promiseCreated:aV,promiseFulfilled:aV,promiseRejected:aV,promiseResolved:aV,promiseCancelled:aV,promiseChained:function(m,o,p){return{promise:o,child:p}},warning:function(m,n){return{warning:n}},unhandledRejection:function(m,o,p){return{reason:o,promise:p}},rejectionHandled:aV},aG=function(m){var p=!1;try{p=aH.apply(null,arguments)}catch(q){am.throwLater(q),p=!0}var o=!1;try{o=a0(m,aE[m].apply(null,arguments))}catch(q){am.throwLater(q),o=!0}return o||p};a7.config=function(m){if(m=Object(m),"longStackTraces" in m&&(m.longStackTraces?a7.longStackTraces():!m.longStackTraces&&a7.hasLongStackTraces()&&a5()),"warnings" in m){var r=m.warnings;aF.warnings=!!r,t=aF.warnings,aB.isObject(r)&&"wForgottenReturn" in r&&(t=!!r.wForgottenReturn)}if("cancellation" in m&&m.cancellation&&!aF.cancellation){if(am.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}a7.prototype._clearCancellationData=aU,a7.prototype._propagateFrom=a6,a7.prototype._onCancel=aP,a7.prototype._setOnCancel=aY,a7.prototype._attachCancellationCallback=a9,a7.prototype._execute=bb,av=a6,aF.cancellation=!0}if("monitoring" in m&&(m.monitoring&&!aF.monitoring?(aF.monitoring=!0,a7.prototype._fireEvent=aG):!m.monitoring&&aF.monitoring&&(aF.monitoring=!1,a7.prototype._fireEvent=aQ)),"asyncHooks" in m&&aB.nodeSupportsAsyncResource){var q=aF.asyncHooks,p=!!m.asyncHooks;q!==p&&(aF.asyncHooks=p,p?aR():a2())}return a7},a7.prototype._fireEvent=aQ,a7.prototype._execute=function(m,p,q){try{m(p,q)}catch(o){return o}},a7.prototype._onCancel=function(){},a7.prototype._setOnCancel=function(m){},a7.prototype._attachCancellationCallback=function(m){},a7.prototype._captureStackTrace=function(){},a7.prototype._attachExtraTrace=function(){},a7.prototype._dereferenceTrace=function(){},a7.prototype._clearCancellationData=function(){},a7.prototype._propagateFrom=function(m,n){};var av=a3,ag=function(){return !1},aD=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;aB.inherits(ad,Error),aW.CapturedTrace=ad,ad.prototype.uncycle=function(){var B=this._length;if(!(2>B)){for(var x=[],q={},m=0,w=this;void 0!==w;++m){x.push(w),w=w._parent}B=this._length=m;for(var m=B-1;m>=0;--m){var p=x[m].stack;void 0===q[p]&&(q[p]=m)}for(var m=0;B>m;++m){var C=x[m].stack,z=q[C];if(void 0!==z&&z!==m){z>0&&(x[z-1]._parent=void 0,x[z-1]._length=1),x[m]._parent=void 0,x[m]._length=1;var y=m>0?x[m-1]:this;B-1>z?(y._parent=x[z+1],y._parent.uncycle(),y._length=y._parent._length+1):(y._parent=void 0,y._length=1);for(var A=y._length+1,v=m-2;v>=0;--v){x[v]._length=A,A++}return}}}},ad.prototype.attachExtraTrace=function(o){if(!o.__stackCleaned__){this.uncycle();for(var q=ax(o),s=q.message,p=[q.stack],m=this;void 0!==m;){p.push(aZ(m.stack.split("\n"))),m=m._parent}a1(p),aA(p),aB.notEnumerableProp(o,"stack",aN(s,p)),aB.notEnumerableProp(o,"__stackCleaned__",!0)}};var aI=function(){var p=/^\s*at\s*/,s=function(n,o){return"string"==typeof n?n:void 0!==o.name&&void 0!==o.message?o.toString():ak(o)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,aK=p,ab=s;var v=Error.captureStackTrace;return ag=function(n){return aJ.test(n)},function(n,o){Error.stackTraceLimit+=6,v(n,o),Error.stackTraceLimit-=6}}var q=new Error;if("string"==typeof q.stack&&q.stack.split("\n")[0].indexOf("stackDetection@")>=0){return aK=/@/,ab=s,ac=!0,function(n){n.stack=(new Error).stack}}var m;try{throw new Error}catch(u){m="stack" in u}return"stack" in q||!m||"number"!=typeof Error.stackTraceLimit?(ab=function(n,o){return"string"==typeof n?n:"object"!=typeof o&&"function"!=typeof o||void 0===o.name||void 0===o.message?ak(o):o.toString()},null):(aK=p,ab=s,function(n){Error.stackTraceLimit+=6;try{throw new Error}catch(o){n.stack=o.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(ar=function(m){console&&console.warn&&console.warn(m)},aB.isNode&&process.stderr.isTTY?ar=function(m,o){var p=o?"[33m":"[31m";console&&console.warn&&console.warn(p+m+"[0m\n")}:aB.isNode||"string"!=typeof(new Error).stack||(ar=function(m,n){console&&console.warn&&console.warn("%c"+m,n?"color: darkorange":"color: red")}));var aF={warnings:aq,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return aa&&a7.longStackTraces(),{asyncHooks:function(){return aF.asyncHooks},longStackTraces:function(){return aF.longStackTraces},warnings:function(){return aF.warnings},cancellation:function(){return aF.cancellation},monitoring:function(){return aF.monitoring},propagateFromFunction:function(){return av},boundValueFunction:function(){return bc},checkForgottenReturns:a4,setBounds:aC,warn:ba,deprecated:aX,CapturedTrace:ad,fireDomEvent:a0,fireGlobalEvent:aH}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(j,k,l){k.exports=function(m){function o(){return this.value}function p(){throw this.reason}m.prototype["return"]=m.prototype.thenReturn=function(q){return q instanceof m&&q.suppressUnhandledRejections(),this._then(o,void 0,void 0,{value:q},void 0)},m.prototype["throw"]=m.prototype.thenThrow=function(n){return this._then(p,void 0,void 0,{reason:n},void 0)},m.prototype.catchThrow=function(n){if(arguments.length<=1){return this._then(void 0,p,void 0,{reason:n},void 0)}var s=arguments[1],q=function(){throw s};return this.caught(n,q)},m.prototype.catchReturn=function(t){if(arguments.length<=1){return t instanceof m&&t.suppressUnhandledRejections(),this._then(void 0,o,void 0,{value:t},void 0)}var s=arguments[1];s instanceof m&&s.suppressUnhandledRejections();var q=function(){return s};return this.caught(t,q)}}},{}],11:[function(j,k,l){k.exports=function(p,s){function v(){return u(this)}function q(o,r){return m(o,r,s,s)}var m=p.reduce,u=p.all;p.prototype.each=function(n){return m(this,n,s,0)._then(v,void 0,void 0,this,void 0)},p.prototype.mapSeries=function(n){return m(this,n,s,s)},p.each=function(n,o){return m(n,o,s,0)._then(v,void 0,void 0,n,void 0)},p.mapSeries=q}},{}],12:[function(w,J,C){function z(l,m){function o(n){return this instanceof o?(A(this,"message","string"==typeof n?n:m),A(this,"name",l),void (Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new o(n)}return E(o,Error),o}function F(l){return this instanceof F?(A(this,"name","OperationalError"),A(this,"message",l),this.cause=l,this.isOperational=!0,void (l instanceof Error?(A(this,"message",l.message),A(this,"stack",l.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new F(l)}var B,x,N=w("./es5"),L=N.freeze,q=w("./util"),E=q.inherits,A=q.notEnumerableProp,I=z("Warning","warning"),G=z("CancellationError","cancellation error"),O=z("TimeoutError","timeout error"),K=z("AggregateError","aggregate error");try{B=TypeError,x=RangeError}catch(k){B=z("TypeError","type error"),x=z("RangeError","range error")}for(var j="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),H=0;H<j.length;++H){"function"==typeof Array.prototype[j[H]]&&(K.prototype[j[H]]=Array.prototype[j[H]])}N.defineProperty(K.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),K.prototype.isOperational=!0;var D=0;K.prototype.toString=function(){var m=Array(4*D+1).join(" "),s="\n"+m+"AggregateError of:\n";D++,m=Array(4*D+1).join(" ");for(var v=0;v<this.length;++v){for(var p=this[v]===this?"[Circular AggregateError]":this[v]+"",l=p.split("\n"),u=0;u<l.length;++u){l[u]=m+l[u]}p=l.join("\n"),s+=p+"\n"}return D--,s},E(F,Error);var M=Error.__BluebirdErrorTypes__;M||(M=L({CancellationError:G,TimeoutError:O,OperationalError:F,RejectionError:F,AggregateError:K}),N.defineProperty(Error,"__BluebirdErrorTypes__",{value:M,writable:!1,enumerable:!1,configurable:!1})),J.exports={Error:Error,TypeError:B,RangeError:x,CancellationError:M.CancellationError,OperationalError:M.OperationalError,TimeoutError:M.TimeoutError,AggregateError:M.AggregateError,Warning:I}},{"./es5":13,"./util":36}],13:[function(C,y,q){var j=function(){return void 0===this}();if(j){y.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:j,propertyIsWritable:function(l,o){var p=Object.getOwnPropertyDescriptor(l,o);return !(p&&!p.writable&&!p.set)}}}else{var w={}.hasOwnProperty,m={}.toString,D={}.constructor.prototype,A=function(l){var o=[];for(var p in l){w.call(l,p)&&o.push(p)}return o},z=function(l,n){return{value:l[n]}},B=function(l,o,p){return l[o]=p.value,l},v=function(l){return l},k=function(l){try{return Object(l).constructor.prototype}catch(n){return D}},x=function(l){try{return"[object Array]"===m.call(l)}catch(n){return !1}};y.exports={isArray:x,keys:A,names:A,defineProperty:B,getDescriptor:z,freeze:v,getPrototypeOf:k,isES5:j,propertyIsWritable:function(){return !0}}}},{}],14:[function(j,k,l){k.exports=function(m,o){var p=m.map;m.prototype.filter=function(n,q){return p(this,n,q,o)},m.filter=function(q,s,n){return p(q,s,n,o)}}},{}],15:[function(j,k,l){k.exports=function(A,v,m){function x(o,p,r){this.promise=o,this.type=p,this.handler=r,this.called=!1,this.cancelPromise=null}function t(n){this.finallyHandler=n}function E(n,o){return null!=n.cancelPromise?(arguments.length>1?n.cancelPromise._reject(o):n.cancelPromise._cancel(),n.cancelPromise=null,!0):!1}function C(){return D.call(this,this.promise._target()._settledValue())}function B(n){return E(this,n)?void 0:(z.e=n,z)}function D(s){var r=this.promise,p=this.handler;if(!this.called){this.called=!0;var n=this.isFinallyHandler()?p.call(r._boundValue()):p.call(r._boundValue(),s);if(n===m){return n}if(void 0!==n){r._setReturnedNonUndefined();var F=v(n,r);if(F instanceof A){if(null!=this.cancelPromise){if(F._isCancelled()){var o=new q("late cancellation observer");return r._attachExtraTrace(o),z.e=o,z}F.isPending()&&F._attachCancellationCallback(new t(this))}return F._then(C,B,void 0,this,void 0)}}}return r.isRejected()?(E(this),z.e=s,z):(E(this),s)}var w=j("./util"),q=A.CancellationError,z=w.errorObj,y=j("./catch_filter")(m);return x.prototype.isFinallyHandler=function(){return 0===this.type},t.prototype._resultCancelled=function(){E(this.finallyHandler)},A.prototype._passThrough=function(o,s,u,p){return"function"!=typeof o?this.then():this._then(u,p,void 0,new x(this,s,o),void 0)},A.prototype.lastly=A.prototype["finally"]=function(n){return this._passThrough(n,0,D,D)},A.prototype.tap=function(n){return this._passThrough(n,1,D)},A.prototype.tapCatch=function(F){var J=arguments.length;if(1===J){return this._passThrough(F,1,void 0,D)}var H,u=new Array(J-1),I=0;for(H=0;J-1>H;++H){var G=arguments[H];if(!w.isObject(G)){return A.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+w.classString(G)))}u[I++]=G}u.length=I;var p=arguments[H];return this._passThrough(y(u,p,this),1,void 0,D)},x}},{"./catch_filter":7,"./util":36}],16:[function(j,k,l){k.exports=function(A,v,m,x,t,F){function C(u,K,H){for(var I=0;I<K.length;++I){H._pushContext();var G=y(K[I])(u);if(H._popContext(),G===z){H._pushContext();var p=A.reject(z.e);return H._popContext(),p}var J=x(G,H);if(J instanceof A){return J}}return null}function B(G,J,s,H){if(F.cancellation()){var p=new A(m),I=this._finallyPromise=new A(m);this._promise=p.lastly(function(){return I}),p._captureStackTrace(),p._setOnCancel(this)}else{var r=this._promise=new A(m);r._captureStackTrace()}this._stack=H,this._generatorFunction=G,this._receiver=J,this._generator=void 0,this._yieldHandlers="function"==typeof s?[s].concat(D):D,this._yieldedPromise=null,this._cancellationPhase=!1}var E=j("./errors"),w=E.TypeError,q=j("./util"),z=q.errorObj,y=q.tryCatch,D=[];q.inherits(B,t),B.prototype._isResolved=function(){return null===this._promise},B.prototype._cleanup=function(){this._promise=this._generator=null,F.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},B.prototype._promiseCancelled=function(){if(!this._isResolved()){var o,s="undefined"!=typeof this._generator["return"];if(s){this._promise._pushContext(),o=y(this._generator["return"]).call(this._generator,void 0),this._promise._popContext()}else{var p=new A.CancellationError("generator .return() sentinel");A.coroutine.returnSentinel=p,this._promise._attachExtraTrace(p),this._promise._pushContext(),o=y(this._generator["throw"]).call(this._generator,p),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(o)}},B.prototype._promiseFulfilled=function(n){this._yieldedPromise=null,this._promise._pushContext();var o=y(this._generator.next).call(this._generator,n);this._promise._popContext(),this._continue(o)},B.prototype._promiseRejected=function(n){this._yieldedPromise=null,this._promise._attachExtraTrace(n),this._promise._pushContext();var o=y(this._generator["throw"]).call(this._generator,n);this._promise._popContext(),this._continue(o)},B.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof A){var n=this._yieldedPromise;this._yieldedPromise=null,n.cancel()}},B.prototype.promise=function(){return this._promise},B.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},B.prototype._continue=function(p){var I=this._promise;if(p===z){return this._cleanup(),this._cancellationPhase?I.cancel():I._rejectCallback(p.e,!1)}var G=p.value;if(p.done===!0){return this._cleanup(),this._cancellationPhase?I.cancel():I._resolveCallback(G)}var H=x(G,this._promise);if(!(H instanceof A)&&(H=C(H,this._yieldHandlers,this._promise),null===H)){return void this._promiseRejected(new w("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(G))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))}H=H._target();var u=H._bitField;0===(50397184&u)?(this._yieldedPromise=H,H._proxy(this,null)):0!==(33554432&u)?A._async.invoke(this._promiseFulfilled,this,H._value()):0!==(16777216&u)?A._async.invoke(this._promiseRejected,this,H._reason()):this._promiseCancelled()},A.coroutine=function(p,u){if("function"!=typeof p){throw new w("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var G=Object(u).yieldHandler,s=B,o=(new Error).stack;return function(){var r=p.apply(this,arguments),H=new s(void 0,void 0,G,o),n=H.promise();return H._generator=r,H._promiseFulfilled(void 0),n}},A.coroutine.addYieldHandler=function(n){if("function"!=typeof n){throw new w("expecting a function but got "+q.classString(n))}D.push(n)},A.spawn=function(o){if(F.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof o){return v("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var p=new B(o,this),n=p.promise();return p._run(A.spawn),n}}},{"./errors":12,"./util":36}],17:[function(j,k,l){k.exports=function(t,v,q,m,u){var p=j("./util");p.canEvaluate,p.tryCatch,p.errorObj;t.join=function(){var o,w=arguments.length-1;if(w>0&&"function"==typeof arguments[w]){o=arguments[w];var s}var n=[].slice.call(arguments);o&&n.pop();var s=new v(n).promise();return void 0!==o?s.spread(o):s}}},{"./util":36}],18:[function(j,k,l){k.exports=function(z,v,m,x,t,D){function B(u,H,F,p){this.constructor$(u),this._promise._captureStackTrace();var E=z._getContext();if(this._callback=C.contextBind(E,H),this._preservedValues=p===t?new Array(this.length()):null,this._limit=F,this._inFlight=0,this._queue=[],y.invoke(this._asyncInit,this,void 0),C.isArray(u)){for(var o=0;o<u.length;++o){var G=u[o];G instanceof z&&G.suppressUnhandledRejections()}}}function A(r,F,p,E){if("function"!=typeof F){return m("expecting a function but got "+C.classString(F))}var u=0;if(void 0!==p){if("object"!=typeof p||null===p){return z.reject(new TypeError("options argument must be an object but it is "+C.classString(p)))}if("number"!=typeof p.concurrency){return z.reject(new TypeError("'concurrency' must be a number but it is "+C.classString(p.concurrency)))}u=p.concurrency}return u="number"==typeof u&&isFinite(u)&&u>=1?u:0,new B(r,F,u,E).promise()}var C=j("./util"),w=C.tryCatch,q=C.errorObj,y=z._async;C.inherits(B,v),B.prototype._asyncInit=function(){this._init$(void 0,-2)},B.prototype._init=function(){},B.prototype._promiseFulfilled=function(P,E){var p=this._values,s=this.length(),L=this._preservedValues,J=this._limit;if(0>E){if(E=-1*E-1,p[E]=P,J>=1&&(this._inFlight--,this._drainQueue(),this._isResolved())){return !0}}else{if(J>=1&&this._inFlight>=J){return p[E]=P,this._queue.push(E),!1}null!==L&&(L[E]=P);var O=this._promise,H=this._callback,F=O._boundValue();O._pushContext();var N=w(H).call(F,P,E,s),I=O._popContext();if(D.checkForgottenReturns(N,I,null!==L?"Promise.filter":"Promise.map",O),N===q){return this._reject(N.e),!0}var M=x(N,this._promise);if(M instanceof z){M=M._target();var K=M._bitField;if(0===(50397184&K)){return J>=1&&this._inFlight++,p[E]=M,M._proxy(this,-1*(E+1)),!1}if(0===(33554432&K)){return 0!==(16777216&K)?(this._reject(M._reason()),!0):(this._cancel(),!0)}N=M._value()}p[E]=N}var G=++this._totalResolved;return G>=s?(null!==L?this._filter(p,L):this._resolve(p),!0):!1},B.prototype._drainQueue=function(){for(var o=this._queue,s=this._limit,u=this._values;o.length>0&&this._inFlight<s;){if(this._isResolved()){return}var p=o.pop();this._promiseFulfilled(u[p],p)}},B.prototype._filter=function(s,E){for(var G=E.length,u=new Array(G),p=0,F=0;G>F;++F){s[F]&&(u[p++]=E[F])}u.length=p,this._resolve(u)},B.prototype.preservedValues=function(){return this._preservedValues},z.prototype.map=function(n,o){return A(this,n,o,null)},z.map=function(o,s,u,p){return A(o,s,u,p)}}},{"./util":36}],19:[function(j,k,l){k.exports=function(u,w,t,p,v){var q=j("./util"),m=q.tryCatch;u.method=function(n){if("function"!=typeof n){throw new u.TypeError("expecting a function but got "+q.classString(n))}return function(){var y=new u(w);y._captureStackTrace(),y._pushContext();var o=m(n).apply(this,arguments),x=y._popContext();return v.checkForgottenReturns(o,x,"Promise.method",y),y._resolveFromSyncValue(o),y}},u.attempt=u["try"]=function(s){if("function"!=typeof s){return p("expecting a function but got "+q.classString(s))}var x=new u(w);x._captureStackTrace(),x._pushContext();var z;if(arguments.length>1){v.deprecated("calling Promise.try with more than 1 argument");var o=arguments[1],n=arguments[2];z=q.isArray(o)?m(s).apply(n,o):m(s).call(n,o)}else{z=m(s)()}var y=x._popContext();return v.checkForgottenReturns(z,y,"Promise.try",x),x._resolveFromSyncValue(z),x},u.prototype._resolveFromSyncValue=function(n){n===q.errorObj?this._rejectCallback(n.e,!1):this._resolveCallback(n,!0)}}},{"./util":36}],20:[function(B,x,q){function j(l){return l instanceof Error&&v.getPrototypeOf(l)===Error.prototype}function w(p){var r;if(j(p)){r=new A(p),r.name=p.name,r.message=p.message,r.stack=p.stack;for(var u=v.keys(p),l=0;l<u.length;++l){var s=u[l];k.test(s)||(r[s]=p[s])}return r}return C.markAsOriginatingFromRejection(p),p}function m(l,n){return function(D,t){if(null!==l){if(D){var u=w(z(D));l._attachExtraTrace(u),l._reject(u)}else{if(n){var p=[].slice.call(arguments,1);l._fulfill(p)}else{l._fulfill(t)}}l=null}}}var C=B("./util"),z=C.maybeWrapAsError,y=B("./errors"),A=y.OperationalError,v=B("./es5"),k=/^(?:name|message|stack|cause)$/;x.exports=m},{"./errors":12,"./es5":13,"./util":36}],21:[function(j,k,l){k.exports=function(u){function x(r,s){var y=this;if(!v.isArray(r)){return t.call(y,r,s)}var o=m(s).apply(y._boundValue(),[null].concat(r));o===w&&q.throwLater(o.e)}function t(s,z){var A=this,y=A._boundValue(),o=void 0===s?m(z).call(y,null):m(z).call(y,null,s);o===w&&q.throwLater(o.e)}function p(s,z){var A=this;if(!s){var y=new Error(s+"");y.cause=s,s=y}var o=m(z).call(A._boundValue(),s);o===w&&q.throwLater(o.e)}var v=j("./util"),q=u._async,m=v.tryCatch,w=v.errorObj;u.prototype.asCallback=u.prototype.nodeify=function(n,r){if("function"==typeof n){var s=t;void 0!==r&&Object(r).spread&&(s=x),this._then(s,p,void 0,this,n)}return this}}},{"./util":36}],22:[function(j,k,l){k.exports=function(){function ak(){}function ah(m,n){if(null==m||m.constructor!==ap){throw new X("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}if("function"!=typeof n){throw new X("expecting a function but got "+at.classString(n))}}function ap(m){m!==ac&&ah(this,m),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(m),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function aj(m){this.promise._resolveCallback(m)}function ag(m){this.promise._rejectCallback(m,!1)}function ax(m){var n=new ap(ac);n._fulfillmentHandler0=m,n._rejectionHandler0=m,n._promise0=m,n._receiver0=m}var av=function(){return new X("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},af=function(){return new ap.PromiseInspection(this._target())},am=function(m){return ap.reject(new X(m))},ai={},at=j("./util");at.setReflectHandler(af);var aq=function(){var m=process.domain;return void 0===m?null:m},ay=function(){return null},au=function(){return{domain:aq(),async:null}},ae=at.isNode&&at.nodeSupportsAsyncResource?j("async_hooks").AsyncResource:null,ab=function(){return{domain:aq(),async:new ae("Bluebird::Promise")}},ar=at.isNode?au:ay;at.notEnumerableProp(ap,"_getContext",ar);var al=function(){ar=ab,at.notEnumerableProp(ap,"_getContext",ab)},aw=function(){ar=au,at.notEnumerableProp(ap,"_getContext",au)},ad=j("./es5"),Z=j("./async"),ao=new Z;ad.defineProperty(ap,"_async",{value:ao});var an=j("./errors"),X=ap.TypeError=an.TypeError;ap.RangeError=an.RangeError;var W=ap.CancellationError=an.CancellationError;ap.TimeoutError=an.TimeoutError,ap.OperationalError=an.OperationalError,ap.RejectionError=an.OperationalError,ap.AggregateError=an.AggregateError;var ac=function(){},t={},G={},B=j("./thenables")(ap,ac),z=j("./promise_array")(ap,ac,B,am,ak),J=j("./context")(ap),aa=J.create,q=j("./debuggability")(ap,J,al,aw),U=(q.CapturedTrace,j("./finally")(ap,B,G)),Y=j("./catch_filter")(G),Q=j("./nodeback"),M=at.errorObj,K=at.tryCatch;return ap.prototype.toString=function(){return"[object Promise]"},ap.prototype.caught=ap.prototype["catch"]=function(p){var u=arguments.length;if(u>1){var w,s=new Array(u-1),m=0;for(w=0;u-1>w;++w){var v=arguments[w];if(!at.isObject(v)){return am("Catch statement predicate: expecting an object but got "+at.classString(v))}s[m++]=v}if(s.length=m,p=arguments[w],"function"!=typeof p){throw new X("The last argument to .catch() must be a function, got "+at.toString(p))}return this.then(void 0,Y(s,p,this))}return this.then(void 0,p)},ap.prototype.reflect=function(){return this._then(af,af,void 0,this,void 0)},ap.prototype.then=function(m,o){if(q.warnings()&&arguments.length>0&&"function"!=typeof m&&"function"!=typeof o){var p=".then() only accepts functions but was passed: "+at.classString(m);arguments.length>1&&(p+=", "+at.classString(o)),this._warn(p)}return this._then(m,o,void 0,void 0,void 0)},ap.prototype.done=function(m,o){var p=this._then(m,o,void 0,void 0,void 0);p._setIsFinal()},ap.prototype.spread=function(m){return"function"!=typeof m?am("expecting a function but got "+at.classString(m)):this.all()._then(m,void 0,void 0,t,void 0)},ap.prototype.toJSON=function(){var m={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(m.fulfillmentValue=this.value(),m.isFulfilled=!0):this.isRejected()&&(m.rejectionReason=this.reason(),m.isRejected=!0),m},ap.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new z(this).promise()},ap.prototype.error=function(m){return this.caught(at.originatesFromRejection,m)},ap.getNewLibraryCopy=k.exports,ap.is=function(m){return m instanceof ap},ap.fromNode=ap.fromCallback=function(m){var p=new ap(ac);p._captureStackTrace();var s=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,o=K(m)(Q(p,s));return o===M&&p._rejectCallback(o.e,!0),p._isFateSealed()||p._setAsyncGuaranteed(),p},ap.all=function(m){return new z(m).promise()},ap.cast=function(m){var n=B(m);return n instanceof ap||(n=new ap(ac),n._captureStackTrace(),n._setFulfilled(),n._rejectionHandler0=m),n},ap.resolve=ap.fulfilled=ap.cast,ap.reject=ap.rejected=function(m){var n=new ap(ac);return n._captureStackTrace(),n._rejectCallback(m,!0),n},ap.setScheduler=function(m){if("function"!=typeof m){throw new X("expecting a function but got "+at.classString(m))}return ao.setScheduler(m)},ap.prototype._then=function(I,C,x,m,w){var L=void 0!==w,E=L?w:new ap(ac),D=this._target(),H=D._bitField;L||(E._propagateFrom(this,3),E._captureStackTrace(),void 0===m&&0!==(2097152&this._bitField)&&(m=0!==(50397184&H)?this._boundValue():D===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,E));var y=ar();if(0!==(50397184&H)){var v,A,F=D._settlePromiseCtx;0!==(33554432&H)?(A=D._rejectionHandler0,v=I):0!==(16777216&H)?(A=D._fulfillmentHandler0,v=C,D._unsetRejectionIsUnhandled()):(F=D._settlePromiseLateCancellationObserver,A=new W("late cancellation observer"),D._attachExtraTrace(A),v=C),ao.invoke(F,D,{handler:at.contextBind(y,v),promise:E,receiver:m,value:A})}else{D._addCallbacks(I,C,E,m,y)}return E},ap.prototype._length=function(){return 65535&this._bitField},ap.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},ap.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},ap.prototype._setLength=function(m){this._bitField=-65536&this._bitField|65535&m},ap.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},ap.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},ap.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},ap.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},ap.prototype._isFinal=function(){return(4194304&this._bitField)>0},ap.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},ap.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},ap.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},ap.prototype._setAsyncGuaranteed=function(){if(!ao.hasCustomScheduler()){var m=this._bitField;this._bitField=m|(536870912&m)>>2^134217728}},ap.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},ap.prototype._receiverAt=function(m){var n=0===m?this._receiver0:this[4*m-4+3];return n===ai?void 0:void 0===n&&this._isBound()?this._boundValue():n},ap.prototype._promiseAt=function(m){return this[4*m-4+2]},ap.prototype._fulfillmentHandlerAt=function(m){return this[4*m-4+0]},ap.prototype._rejectionHandlerAt=function(m){return this[4*m-4+1]},ap.prototype._boundValue=function(){},ap.prototype._migrateCallback0=function(o){var s=(o._bitField,o._fulfillmentHandler0),u=o._rejectionHandler0,p=o._promise0,m=o._receiverAt(0);void 0===m&&(m=ai),this._addCallbacks(s,u,p,m,null)},ap.prototype._migrateCallbackAt=function(p,u){var w=p._fulfillmentHandlerAt(u),s=p._rejectionHandlerAt(u),m=p._promiseAt(u),v=p._receiverAt(u);void 0===v&&(v=ai),this._addCallbacks(w,s,m,v,null)},ap.prototype._addCallbacks=function(p,w,y,v,m){var x=this._length();if(x>=65531&&(x=0,this._setLength(0)),0===x){this._promise0=y,this._receiver0=v,"function"==typeof p&&(this._fulfillmentHandler0=at.contextBind(m,p)),"function"==typeof w&&(this._rejectionHandler0=at.contextBind(m,w))}else{var u=4*x-4;this[u+2]=y,this[u+3]=v,"function"==typeof p&&(this[u+0]=at.contextBind(m,p)),"function"==typeof w&&(this[u+1]=at.contextBind(m,w))}return this._setLength(x+1),x},ap.prototype._proxy=function(m,n){this._addCallbacks(void 0,void 0,n,m,null)},ap.prototype._resolveCallback=function(v,y){if(0===(117506048&this._bitField)){if(v===this){return this._rejectCallback(av(),!1)}var C=B(v,this);if(!(C instanceof ap)){return this._fulfill(v)}y&&this._propagateFrom(C,2);var x=C._target();if(x===this){return void this._reject(av())}var A=x._bitField;if(0===(50397184&A)){var w=this._length();w>0&&x._migrateCallback0(this);for(var m=1;w>m;++m){x._migrateCallbackAt(this,m)}this._setFollowing(),this._setLength(0),this._setFollowee(C)}else{if(0!==(33554432&A)){this._fulfill(x._value())}else{if(0!==(16777216&A)){this._reject(x._reason())}else{var p=new W("late cancellation observer");x._attachExtraTrace(p),this._reject(p)}}}}},ap.prototype._rejectCallback=function(p,u,w){var s=at.ensureErrorObject(p),m=s===p;if(!m&&!w&&q.warnings()){var v="a promise was rejected with a non-error: "+at.classString(p);this._warn(v,!0)}this._attachExtraTrace(s,u?m:!1),this._reject(p)},ap.prototype._resolveFromExecutor=function(m){if(m!==ac){var p=this;this._captureStackTrace(),this._pushContext();var s=!0,o=this._execute(m,function(n){p._resolveCallback(n)},function(n){p._rejectCallback(n,s)});s=!1,this._popContext(),void 0!==o&&p._rejectCallback(o,!0)}},ap.prototype._settlePromiseFromHandler=function(p,w,y,v){var m=v._bitField;if(0===(65536&m)){v._pushContext();var x;w===t?y&&"number"==typeof y.length?x=K(p).apply(this._boundValue(),y):(x=M,x.e=new X("cannot .spread() a non-array: "+at.classString(y))):x=K(p).call(w,y);var u=v._popContext();m=v._bitField,0===(65536&m)&&(x===G?v._reject(y):x===M?v._rejectCallback(x.e,!1):(q.checkForgottenReturns(x,u,"",v,this),v._resolveCallback(x)))}},ap.prototype._target=function(){for(var m=this;m._isFollowing();){m=m._followee()}return m},ap.prototype._followee=function(){return this._rejectionHandler0},ap.prototype._setFollowee=function(m){this._rejectionHandler0=m},ap.prototype._settlePromise=function(n,v,u,w){var p=n instanceof ap,m=this._bitField,x=0!==(134217728&m);0!==(65536&m)?(p&&n._invokeInternalOnCancel(),u instanceof U&&u.isFinallyHandler()?(u.cancelPromise=n,K(v).call(u,w)===M&&n._reject(M.e)):v===af?n._fulfill(af.call(u)):u instanceof ak?u._promiseCancelled(n):p||n instanceof z?n._cancel():u.cancel()):"function"==typeof v?p?(x&&n._setAsyncGuaranteed(),this._settlePromiseFromHandler(v,u,w,n)):v.call(u,w,n):u instanceof ak?u._isResolved()||(0!==(33554432&m)?u._promiseFulfilled(w,n):u._promiseRejected(w,n)):p&&(x&&n._setAsyncGuaranteed(),0!==(33554432&m)?n._fulfill(w):n._reject(w))},ap.prototype._settlePromiseLateCancellationObserver=function(m){var s=m.handler,v=m.promise,p=m.receiver,u=m.value;"function"==typeof s?v instanceof ap?this._settlePromiseFromHandler(s,p,u,v):s.call(p,u,v):v instanceof ap&&v._reject(u)},ap.prototype._settlePromiseCtx=function(m){this._settlePromise(m.promise,m.handler,m.receiver,m.value)},ap.prototype._settlePromise0=function(o,s,u){var p=this._promise0,m=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(p,o,m,s)},ap.prototype._clearCallbackDataAtIndex=function(m){var n=4*m-4;this[n+2]=this[n+3]=this[n+0]=this[n+1]=void 0},ap.prototype._fulfill=function(m){var o=this._bitField;if(!((117506048&o)>>>16)){if(m===this){var p=av();return this._attachExtraTrace(p),this._reject(p)}this._setFulfilled(),this._rejectionHandler0=m,(65535&o)>0&&(0!==(134217728&o)?this._settlePromises():ao.settlePromises(this),this._dereferenceTrace())}},ap.prototype._reject=function(m){var n=this._bitField;if(!((117506048&n)>>>16)){return this._setRejected(),this._fulfillmentHandler0=m,this._isFinal()?ao.fatalError(m,at.isNode):void ((65535&n)>0?ao.settlePromises(this):this._ensurePossibleRejectionHandled())}},ap.prototype._fulfillPromises=function(p,u){for(var w=1;p>w;w++){var s=this._fulfillmentHandlerAt(w),m=this._promiseAt(w),v=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(m,s,v,u)}},ap.prototype._rejectPromises=function(p,u){for(var w=1;p>w;w++){var s=this._rejectionHandlerAt(w),m=this._promiseAt(w),v=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(m,s,v,u)}},ap.prototype._settlePromises=function(){var m=this._bitField,p=65535&m;if(p>0){if(0!==(16842752&m)){var s=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,s,m),this._rejectPromises(p,s)}else{var o=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,o,m),this._fulfillPromises(p,o)}this._setLength(0)}this._clearCancellationData()},ap.prototype._settledValue=function(){var m=this._bitField;return 0!==(33554432&m)?this._rejectionHandler0:0!==(16777216&m)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&ad.defineProperty(ap.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),ap.defer=ap.pending=function(){q.deprecated("Promise.defer","new Promise");var m=new ap(ac);return{promise:m,resolve:aj,reject:ag}},at.notEnumerableProp(ap,"_makeSelfResolutionError",av),j("./method")(ap,ac,B,am,q),j("./bind")(ap,ac,B,q),j("./cancel")(ap,z,am,q),j("./direct_resolve")(ap),j("./synchronous_inspection")(ap),j("./join")(ap,z,B,ac,ao),ap.Promise=ap,ap.version="3.7.2",j("./call_get.js")(ap),j("./generators.js")(ap,am,ac,B,ak,q),j("./map.js")(ap,z,am,B,ac,q),j("./nodeify.js")(ap),j("./promisify.js")(ap,ac),j("./props.js")(ap,z,B,am),j("./race.js")(ap,ac,B,am),j("./reduce.js")(ap,z,am,B,ac,q),j("./settle.js")(ap,z,q),j("./some.js")(ap,z,am),j("./timers.js")(ap,ac,q),j("./using.js")(ap,am,B,aa,ac,q),j("./any.js")(ap),j("./each.js")(ap,ac),j("./filter.js")(ap,ac),at.toFastProperties(ap),at.toFastProperties(ap.prototype),ax({a:1}),ax({b:2}),ax({c:3}),ax(1),ax(function(){}),ax(void 0),ax(!1),ax(new ap(ac)),q.setBounds(Z.firstLineError,at.lastLineError),ap}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(j,k,l){k.exports=function(v,q,m,t,p){function z(n){switch(n){case -2:return[];case -3:return{};case -6:return new Map}}function x(n){var o=this._promise=new v(q);n instanceof v&&(o._propagateFrom(n,3),n.suppressUnhandledRejections()),o._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var w=j("./util");w.isArray;return w.inherits(x,p),x.prototype.length=function(){return this._length},x.prototype.promise=function(){return this._promise},x.prototype._init=function y(u,B){var A=m(this._values,this._promise);if(A instanceof v){A=A._target();var s=A._bitField;if(this._values=A,0===(50397184&s)){return this._promise._setAsyncGuaranteed(),A._then(y,this._reject,void 0,this,B)}if(0===(33554432&s)){return 0!==(16777216&s)?this._reject(A._reason()):this._cancel()}A=A._value()}if(A=w.asArray(A),null===A){var r=t("expecting an array or an iterable object but got "+w.classString(A)).reason();return void this._promise._rejectCallback(r,!1)}return 0===A.length?void (-5===B?this._resolveEmptyArray():this._resolve(z(B))):void this._iterate(A)},x.prototype._iterate=function(A){var E=this.getActualLength(A.length);this._length=E,this._values=this.shouldCopyValues()?new Array(E):this._values;for(var u=this._promise,C=!1,B=null,r=0;E>r;++r){var D=m(A[r],u);D instanceof v?(D=D._target(),B=D._bitField):B=null,C?null!==B&&D.suppressUnhandledRejections():null!==B?0===(50397184&B)?(D._proxy(this,r),this._values[r]=D):C=0!==(33554432&B)?this._promiseFulfilled(D._value(),r):0!==(16777216&B)?this._promiseRejected(D._reason(),r):this._promiseCancelled(r):C=this._promiseFulfilled(D,r)}C||u._setAsyncGuaranteed()},x.prototype._isResolved=function(){return null===this._values},x.prototype._resolve=function(n){this._values=null,this._promise._fulfill(n)},x.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},x.prototype._reject=function(n){this._values=null,this._promise._rejectCallback(n,!1)},x.prototype._promiseFulfilled=function(o,r){this._values[r]=o;var s=++this._totalResolved;return s>=this._length?(this._resolve(this._values),!0):!1},x.prototype._promiseCancelled=function(){return this._cancel(),!0},x.prototype._promiseRejected=function(n){return this._totalResolved++,this._reject(n),!0},x.prototype._resultCancelled=function(){if(!this._isResolved()){var o=this._values;if(this._cancel(),o instanceof v){o.cancel()}else{for(var r=0;r<o.length;++r){o[r] instanceof v&&o[r].cancel()}}}},x.prototype.shouldCopyValues=function(){return !0},x.prototype.getActualLength=function(n){return n},x}},{"./util":36}],24:[function(j,k,l){k.exports=function(R,I){function F(m){return !D.test(m)}function N(m){try{return m.__isPromisified__===!0}catch(n){return !1}}function H(m,p,s){var o=O.getDataPropertyOrDefault(m,p+s,U);return o?N(o):!1}function B(p,w,C){for(var v=0;v<p.length;v+=2){var m=p[v];if(C.test(m)){for(var y=m.replace(C,""),u=0;u<p.length;u+=2){if(p[u]===y){throw new P("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",w))}}}}}function V(Y,y,s,m){for(var E=O.inheritedDataKeys(Y),C=[],X=0;X<E.length;++X){var v=E[X],o=Y[v],w=m===M?!0:M(v,o,Y);"function"!=typeof o||N(o)||H(Y,v,y)||!m(v,o,Y,w)||C.push(v,o)}return B(C,y,s),C}function T(E,m,v,n,X,y){function w(){var r=m;m===Q&&(r=this);var Z=new R(I);Z._captureStackTrace();var u="string"==typeof p&&this!==C?this[p]:E,aa=W(Z,y);try{u.apply(r,S(arguments,aa))}catch(Y){Z._rejectCallback(x(Y),!0,!0)}return Z._isFateSealed()||Z._setAsyncGuaranteed(),Z}var C=function(){return this}(),p=E;return"string"==typeof p&&(E=n),O.notEnumerableProp(w,"__isPromisified__",!0),w}function z(ac,X,y,m,E){for(var w=new RegExp(L(X)+"$"),ad=V(ac,X,w,y),Z=0,ab=ad.length;ab>Z;Z+=2){var C=ad[Z],v=ad[Z+1],aa=C+X;if(m===A){ac[aa]=A(C,Q,C,v,X,E)}else{var Y=m(v,function(){return A(C,Q,C,v,X,E)});O.notEnumerableProp(Y,"__isPromisified__",!0),ac[aa]=Y}}return O.toFastProperties(ac),ac}function K(m,o,p){return A(m,o,void 0,m,null,p)}var G,Q={},O=j("./util"),W=j("./nodeback"),S=O.withAppended,x=O.maybeWrapAsError,q=O.canEvaluate,P=j("./errors").TypeError,J="Async",U={__isPromisified__:!0},t=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],D=new RegExp("^(?:"+t.join("|")+")$"),M=function(m){return O.isIdentifier(m)&&"_"!==m.charAt(0)&&"constructor"!==m},L=function(m){return m.replace(/([$])/,"\\$")},A=q?G:T;R.promisify=function(m,r){if("function"!=typeof m){throw new P("expecting a function but got "+O.classString(m))}if(N(m)){return m}r=Object(r);var v=void 0===r.context?Q:r.context,u=!!r.multiArgs,p=K(m,v,u);return O.copyDescriptors(m,p,F),p},R.promisifyAll=function(E,w){if("function"!=typeof E&&"object"!=typeof E){throw new P("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n")}w=Object(w);var u=!!w.multiArgs,m=w.suffix;"string"!=typeof m&&(m=J);var v=w.filter;"function"!=typeof v&&(v=M);var p=w.promisifier;if("function"!=typeof p&&(p=A),!O.isIdentifier(m)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n")}for(var X=O.inheritedDataKeys(E),C=0;C<X.length;++C){var y=E[X[C]];"constructor"!==X[C]&&O.isClass(y)&&(z(y.prototype,m,v,p,u),z(y,m,v,p,u))}return z(E,m,v,p,u)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(j,k,l){k.exports=function(z,v,m,x){function t(u){var G,I=!1;if(void 0!==B&&u instanceof B){G=q(u),I=!0}else{var F=w.keys(u),p=F.length;G=new Array(2*p);for(var H=0;p>H;++H){var E=F[H];G[H]=u[E],G[H+p]=E}}this.constructor$(G),this._isMap=I,this._init$(void 0,I?-6:-3)}function D(o){var r,p=m(o);return C(p)?(r=p instanceof z?p._then(z.props,void 0,void 0,void 0,void 0):new t(p).promise(),p instanceof z&&r._propagateFrom(p,2),r):x("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var B,A=j("./util"),C=A.isObject,w=j("./es5");"function"==typeof Map&&(B=Map);var q=function(){function o(n,s){this[p]=n,this[p+r]=s,p++}var p=0,r=0;return function(s){r=s.size,p=0;var n=new Array(2*s.size);return s.forEach(o,n),n}}(),y=function(s){for(var E=new B,G=s.length/2|0,u=0;G>u;++u){var p=s[G+u],F=s[u];E.set(p,F)}return E};A.inherits(t,v),t.prototype._init=function(){},t.prototype._promiseFulfilled=function(u,G){this._values[G]=u;var I=++this._totalResolved;if(I>=this._length){var F;if(this._isMap){F=y(this._values)}else{F={};for(var p=this.length(),H=0,E=this.length();E>H;++H){F[this._values[H+p]]=this._values[H]}}return this._resolve(F),!0}return !1},t.prototype.shouldCopyValues=function(){return !1},t.prototype.getActualLength=function(n){return n>>1},z.prototype.props=function(){return D(this)},z.props=function(n){return D(n)}}},{"./es5":13,"./util":36}],26:[function(k,m,o){function l(q,u,w,s,p){for(var v=0;p>v;++v){w[v+s]=q[v+u],q[v+u]=void 0}}function j(n){this._capacity=n,this._length=0,this._front=0}j.prototype._willBeOverCapacity=function(n){return this._capacity<n},j.prototype._pushOne=function(p){var q=this.length();this._checkCapacity(q+1);var r=this._front+q&this._capacity-1;this[r]=p,this._length=q+1},j.prototype.push=function(q,u,w){var s=this.length()+3;if(this._willBeOverCapacity(s)){return this._pushOne(q),this._pushOne(u),void this._pushOne(w)}var p=this._front+s-3;this._checkCapacity(s);var v=this._capacity-1;this[p+0&v]=q,this[p+1&v]=u,this[p+2&v]=w,this._length=s},j.prototype.shift=function(){var n=this._front,p=this[n];return this[n]=void 0,this._front=n+1&this._capacity-1,this._length--,p},j.prototype.length=function(){return this._length},j.prototype._checkCapacity=function(n){this._capacity<n&&this._resizeTo(this._capacity<<1)},j.prototype._resizeTo=function(q){var r=this._capacity;this._capacity=q;var u=this._front,p=this._length,s=u+p&r-1;l(this,0,this,r,s)},m.exports=j},{}],27:[function(j,k,l){k.exports=function(u,w,t,p){function v(C,r){var z=t(C);if(z instanceof u){return m(z)}if(C=q.asArray(C),null===C){return p("expecting an array or an iterable object but got "+q.classString(C))}var B=new u(w);void 0!==r&&B._propagateFrom(r,3);for(var s=B._fulfill,n=B._reject,y=0,x=C.length;x>y;++y){var A=C[y];(void 0!==A||y in C)&&u.cast(A)._then(s,n,void 0,B,null)}return B}var q=j("./util"),m=function(n){return n.then(function(o){return v(o,n)})};u.race=function(n){return v(n,void 0)},u.prototype.race=function(){return v(this,void 0)}}},{"./util":36}],28:[function(j,k,l){k.exports=function(A,v,m,x,t,E){function C(p,G,F,o){this.constructor$(p);var u=A._getContext();this._fn=z.contextBind(u,G),void 0!==F&&(F=A.resolve(F),F._attachCancellationCallback(this)),this._initialValue=F,this._currentCancellable=null,o===t?this._eachValues=Array(this._length):0===o?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function B(n,o){this.isFulfilled()?o._resolve(n):o._reject(n)}function D(r,s,F,p){if("function"!=typeof s){return m("expecting a function but got "+z.classString(s))}var u=new C(r,s,F,p);return u.promise()}function w(o){this.accum=o,this.array._gotAccum(o);var p=x(this.value,this.array._promise);return p instanceof A?(this.array._currentCancellable=p,p._then(q,void 0,void 0,this,void 0)):q.call(this,p)}function q(u){var H=this.array,F=H._promise,s=y(H._fn);F._pushContext();var G;G=void 0!==H._eachValues?s.call(F._boundValue(),u,this.index,this.length):s.call(F._boundValue(),this.accum,u,this.index,this.length),G instanceof A&&(H._currentCancellable=G);var p=F._popContext();return E.checkForgottenReturns(G,p,void 0!==H._eachValues?"Promise.each":"Promise.reduce",F),G}var z=j("./util"),y=z.tryCatch;z.inherits(C,v),C.prototype._gotAccum=function(n){void 0!==this._eachValues&&null!==this._eachValues&&n!==t&&this._eachValues.push(n)},C.prototype._eachComplete=function(n){return null!==this._eachValues&&this._eachValues.push(n),this._eachValues},C.prototype._init=function(){},C.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},C.prototype.shouldCopyValues=function(){return !1},C.prototype._resolve=function(n){this._promise._resolveCallback(n),this._values=null},C.prototype._resultCancelled=function(n){return n===this._initialValue?this._cancel():void (this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof A&&this._currentCancellable.cancel(),this._initialValue instanceof A&&this._initialValue.cancel()))},C.prototype._iterate=function(F){this._values=F;var J,H,u=F.length;void 0!==this._initialValue?(J=this._initialValue,H=0):(J=A.resolve(F[0]),H=1),this._currentCancellable=J;for(var I=H;u>I;++I){var G=F[I];G instanceof A&&G.suppressUnhandledRejections()}if(!J.isRejected()){for(;u>H;++H){var p={accum:null,value:F[H],index:H,length:u,array:this};J=J._then(w,void 0,void 0,p,void 0),0===(127&H)&&J._setNoAsyncGuarantee()}}void 0!==this._eachValues&&(J=J._then(this._eachComplete,void 0,void 0,this,void 0)),J._then(B,B,void 0,J,this)},A.prototype.reduce=function(n,o){return D(this,n,o,null)},A.reduce=function(o,s,u,p){return D(o,s,u,p)}}},{"./util":36}],29:[function(x,p,l){var j,m=x("./util"),k=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},y=m.getNativePromise();if(m.isNode&&"undefined"==typeof MutationObserver){var v=global.setImmediate,q=process.nextTick;j=m.isRecentNode?function(n){v.call(global,n)}:function(n){q.call(process,n)}}else{if("function"==typeof y&&"function"==typeof y.resolve){var w=y.resolve();j=function(n){w.then(n)}}else{j="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList" in document.documentElement?function(){var u=document.createElement("div"),A={attributes:!0},C=!1,z=document.createElement("div"),s=new MutationObserver(function(){u.classList.toggle("foo"),C=!1});s.observe(z,A);var B=function(){C||(C=!0,z.classList.toggle("foo"))};return function(t){var o=new MutationObserver(function(){o.disconnect(),t()});o.observe(u,A),B()}}():"undefined"!=typeof setImmediate?function(n){setImmediate(n)}:"undefined"!=typeof setTimeout?function(n){setTimeout(n,0)}:k}}p.exports=j},{"./util":36}],30:[function(j,k,l){k.exports=function(t,v,q){function m(n){this.constructor$(n)}var u=t.PromiseInspection,p=j("./util");p.inherits(m,v),m.prototype._promiseResolved=function(o,r){this._values[o]=r;var s=++this._totalResolved;return s>=this._length?(this._resolve(this._values),!0):!1},m.prototype._promiseFulfilled=function(o,r){var s=new u;return s._bitField=33554432,s._settledValueField=o,this._promiseResolved(r,s)},m.prototype._promiseRejected=function(o,r){var s=new u;return s._bitField=16777216,s._settledValueField=o,this._promiseResolved(r,s)},t.settle=function(n){return q.deprecated(".settle()",".reflect()"),new m(n).promise()},t.allSettled=function(n){return new m(n).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(j,k,l){k.exports=function(w,q,m){function v(n){this.constructor$(n),this._howMany=0,this._unwrap=!1,this._initialized=!1}function p(r,s){if((0|s)!==s||0>s){return m("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n")}var B=new v(r),u=B.promise();return B.setHowMany(s),B.init(),u}var A=j("./util"),y=j("./errors").RangeError,x=j("./errors").AggregateError,z=A.isArray,t={};A.inherits(v,q),v.prototype._init=function(){if(this._initialized){if(0===this._howMany){return void this._resolve([])}this._init$(void 0,-5);var n=z(this._values);!this._isResolved()&&n&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},v.prototype.init=function(){this._initialized=!0,this._init()},v.prototype.setUnwrap=function(){this._unwrap=!0},v.prototype.howMany=function(){return this._howMany},v.prototype.setHowMany=function(n){this._howMany=n},v.prototype._promiseFulfilled=function(n){return this._addFulfilled(n),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},v.prototype._promiseRejected=function(n){return this._addRejected(n),this._checkOutcome()},v.prototype._promiseCancelled=function(){return this._values instanceof w||null==this._values?this._cancel():(this._addRejected(t),this._checkOutcome())},v.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var n=new x,o=this.length();o<this._values.length;++o){this._values[o]!==t&&n.push(this._values[o])}return n.length>0?this._reject(n):this._cancel(),!0}return !1},v.prototype._fulfilled=function(){return this._totalResolved},v.prototype._rejected=function(){return this._values.length-this.length()},v.prototype._addRejected=function(n){this._values.push(n)},v.prototype._addFulfilled=function(n){this._values[this._totalResolved++]=n},v.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},v.prototype._getRangeError=function(n){var o="Input array must contain at least "+this._howMany+" items but contains only "+n+" items";return new y(o)},v.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},w.some=function(n,o){return p(n,o)},w.prototype.some=function(n){return p(this,n)},w._SomePromiseArray=v}},{"./errors":12,"./util":36}],32:[function(j,k,l){k.exports=function(q){function w(n){void 0!==n?(n=n._target(),this._bitField=n._bitField,this._settledValueField=n._isFateSealed()?n._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}w.prototype._settledValue=function(){return this._settledValueField};var y=w.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},v=w.prototype.error=w.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},p=w.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},x=w.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},u=w.prototype.isPending=function(){return 0===(50397184&this._bitField)},m=w.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};w.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},q.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},q.prototype._isCancelled=function(){return this._target().__isCancelled()},q.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},q.prototype.isPending=function(){return u.call(this._target())},q.prototype.isRejected=function(){return x.call(this._target())},q.prototype.isFulfilled=function(){return p.call(this._target())},q.prototype.isResolved=function(){return m.call(this._target())},q.prototype.value=function(){return y.call(this._target())},q.prototype.reason=function(){var n=this._target();return n._unsetRejectionIsUnhandled(),v.call(n)},q.prototype._value=function(){return this._settledValue()},q.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},q.PromiseInspection=w}},{}],33:[function(j,k,l){k.exports=function(y,v){function m(o,p){if(w(o)){if(o instanceof y){return o}var n=t(o);if(n===B){p&&p._pushContext();var s=y.reject(n.e);return p&&p._popContext(),s}if("function"==typeof n){if(C(o)){var s=new y(v);return o._then(s._fulfill,s._reject,void 0,s,null),s}return A(o,n,p)}}return o}function x(n){return n.then}function t(n){try{return x(n)}catch(o){return B.e=o,B}}function C(n){try{return q.call(n,"_promise0")}catch(o){return !1}}function A(I,n,F){function D(o){H&&(H._resolveCallback(o),H=null)}function J(o){H&&(H._rejectCallback(o,u,!0),H=null)}var H=new y(v),E=H;F&&F._pushContext(),H._captureStackTrace(),F&&F._popContext();var u=!0,G=z.tryCatch(n).call(I,D,J);return u=!1,H&&G===B&&(H._rejectCallback(G.e,!0,!0),H=null),E}var z=j("./util"),B=z.errorObj,w=z.isObject,q={}.hasOwnProperty;return m}},{"./util":36}],34:[function(j,k,l){k.exports=function(y,v,m){function x(n){this.handle=n}function t(n){return clearTimeout(this.handle),n}function C(n){throw clearTimeout(this.handle),n}var A=j("./util"),z=y.TimeoutError;x.prototype._resultCancelled=function(){clearTimeout(this.handle)};var B=function(n){return w(+this).thenReturn(n)},w=y.delay=function(p,u){var r,n;return void 0!==u?(r=y.resolve(u)._then(B,null,null,p,void 0),m.cancellation()&&u instanceof y&&r._setOnCancel(u)):(r=new y(v),n=setTimeout(function(){r._fulfill()},+p),m.cancellation()&&r._setOnCancel(new x(n)),r._captureStackTrace()),r._setAsyncGuaranteed(),r};y.prototype.delay=function(n){return w(n,this)};var q=function(o,s,u){var p;p="string"!=typeof s?s instanceof Error?s:new z("operation timed out"):new z(s),A.markAsOriginatingFromRejection(p),o._attachExtraTrace(p),o._reject(p),null!=u&&u.cancel()};y.prototype.timeout=function(p,r){p=+p;var u,o,s=new x(setTimeout(function(){u.isPending()&&q(u,r,o)},p));return m.cancellation()?(o=this.then(),u=o._then(t,C,void 0,s,void 0),u._setOnCancel(s)):u=this._then(t,C,void 0,s,void 0),u}}},{"./util":36}],35:[function(j,k,l){k.exports=function(J,C,z,F,B,x){function M(m){setTimeout(function(){throw m},0)}function L(m){var n=z(m);return n!==m&&"function"==typeof m._isDisposable&&"function"==typeof m._getDisposer&&m._isDisposable()&&n._setDisposable(m._getDisposer()),n}function w(r,y){function p(){if(v>=o){return m._fulfill()}var s=L(r[v++]);if(s instanceof J&&s._isDisposable()){try{s=z(s._getDisposer().tryDispose(y),r.promise)}catch(n){return M(n)}if(s instanceof J){return s._then(p,M,null,null,null)}}p()}var v=0,o=r.length,m=new J(B);return p(),m}function E(m,o,p){this._data=m,this._promise=o,this._context=p}function A(m,o,p){this.constructor$(m,o,p)}function I(m){return E.isDisposer(m)?(this.resources[this.index]._setDisposable(m),m.promise()):m}function G(m){this.length=m,this.promise=null,this[m-1]=null}var N=j("./util"),K=j("./errors").TypeError,t=j("./util").inherits,q=N.errorObj,H=N.tryCatch,D={};E.prototype.data=function(){return this._data},E.prototype.promise=function(){return this._promise},E.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():D},E.prototype.tryDispose=function(m){var p=this.resource(),s=this._context;void 0!==s&&s._pushContext();var o=p!==D?this.doDispose(p,m):null;return void 0!==s&&s._popContext(),this._promise._unsetDisposable(),this._data=null,o},E.isDisposer=function(m){return null!=m&&"function"==typeof m.resource&&"function"==typeof m.tryDispose},t(A,E),A.prototype.doDispose=function(m,o){var p=this.data();return p.call(m,m,o)},G.prototype._resultCancelled=function(){for(var m=this.length,p=0;m>p;++p){var o=this[p];o instanceof J&&o.cancel()}},J.using=function(){var U=arguments.length;if(2>U){return C("you must pass at least 2 arguments to Promise.using")}var y=arguments[U-1];if("function"!=typeof y){return C("expecting a function but got "+N.classString(y))}var s,R=!0;2===U&&Array.isArray(arguments[0])?(s=arguments[0],U=s.length,R=!1):(s=arguments,U--);for(var P=new G(U),r=0;U>r;++r){var O=s[r];if(E.isDisposer(O)){var T=O;O=O.promise(),O._setDisposable(T)}else{var u=z(O);u instanceof J&&(O=u._then(I,null,null,{resources:P,index:r},void 0))}P[r]=O}for(var Q=new Array(P.length),r=0;r<Q.length;++r){Q[r]=J.resolve(P[r]).reflect()}var S=J.all(Q).then(function(m){for(var v=0;v<m.length;++v){var W=m[v];if(W.isRejected()){return q.e=W.error(),q}if(!W.isFulfilled()){return void S.cancel()}m[v]=W.value()}n._pushContext(),y=H(y);var p=R?y.apply(void 0,m):y(m),V=n._popContext();return x.checkForgottenReturns(p,V,"Promise.using",n),p}),n=S.lastly(function(){var m=new J.PromiseInspection(S);return w(P,m)});return P.promise=n,n._setOnCancel(P),n},J.prototype._setDisposable=function(m){this._bitField=131072|this._bitField,this._disposer=m},J.prototype._isDisposable=function(){return(131072&this._bitField)>0},J.prototype._getDisposer=function(){return this._disposer},J.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},J.prototype.disposer=function(m){if("function"==typeof m){return new A(m,this,F())}throw new K}}},{"./errors":12,"./util":36}],36:[function(an,aC,at){function ap(){try{var j=Q;return Q=null,j.apply(this,arguments)}catch(k){return G.e=k,G}}function ay(j){return Q=j,ap}function ar(j){return null==j||j===!0||j===!1||"string"==typeof j||"number"==typeof j}function ao(j){return"function"==typeof j||"object"==typeof j&&null!==j}function aG(j){return ar(j)?new Error(al(j)):j}function aE(k,m){var o,l=k.length,j=new Array(l+1);for(o=0;l>o;++o){j[o]=k[o]}return j[o]=m,j}function am(j,l,m){if(!ac.isES5){return{}.hasOwnProperty.call(j,l)?j[l]:void 0}var k=Object.getOwnPropertyDescriptor(j,l);return null!=k?null==k.get&&null==k.set?k.value:m:void 0}function av(j,l,m){if(ar(j)){return j}var k={value:m,configurable:!0,enumerable:!1,writable:!0};return ac.defineProperty(j,l,k),j}function aq(j){throw j}function aB(k){try{if("function"==typeof k){var m=ac.names(k.prototype),s=ac.isES5&&m.length>1,l=m.length>0&&!(1===m.length&&"constructor"===m[0]),j=ah.test(k+"")&&ac.names(k).length>0;if(s||l||j){return !0}}return !1}catch(p){return !1}}function az(j){function l(){}function m(){return typeof k.foo}l.prototype=j;var k=new l;return m(),m(),j}function aH(j){return q.test(j)}function aD(k,m,o){for(var l=new Array(k),j=0;k>j;++j){l[j]=m+j+o}return l}function al(j){try{return j+""}catch(k){return"[no string representation]"}}function ai(j){return j instanceof Error||null!==j&&"object"==typeof j&&"string"==typeof j.message&&"string"==typeof j.name}function aA(j){try{av(j,"isOperational",!0)}catch(k){}}function au(j){return null==j?!1:j instanceof Error.__BluebirdErrorTypes__.OperationalError||j.isOperational===!0}function aF(j){return ai(j)&&ac.propertyIsWritable(j,"stack")}function ak(j){return{}.toString.call(j)}function af(k,p,v){for(var m=ac.names(k),j=0;j<m.length;++j){var u=m[j];if(v(u)){try{ac.defineProperty(p,u,ac.getDescriptor(k,u))}catch(l){}}}}function ax(j){return X?process.env[j]:void 0}function aw(){if("function"==typeof Promise){try{var j=new Promise(function(){});if("[object Promise]"===ak(j)){return Promise}}catch(k){}}}function ad(j,l){if(null===j||"function"!=typeof l||l===z){return l}null!==j.domain&&(l=j.domain.bind(l));var m=j.async;if(null!==m){var k=l;l=function(){var n=new Array(2).concat([].slice.call(arguments));return n[0]=k,n[1]=this,m.runInAsyncScope.apply(m,n)}}return l}var ac=an("./es5"),aj="undefined"==typeof navigator,G={e:{}},Q,K="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,J=function(j,l){function m(){this.constructor=j,this.constructor$=l;for(var o in l.prototype){k.call(l.prototype,o)&&"$"!==o.charAt(o.length-1)&&(this[o+"$"]=l.prototype[o])}}var k={}.hasOwnProperty;return m.prototype=l.prototype,j.prototype=new m,j.prototype},W=function(){var j=[Array.prototype,Object.prototype,Function.prototype],l=function(o){for(var p=0;p<j.length;++p){if(j[p]===o){return !0}}return !1};if(ac.isES5){var m=Object.getOwnPropertyNames;return function(w){for(var y=[],v=Object.create(null);null!=w&&!l(w);){var A;try{A=m(w)}catch(x){return y}for(var n=0;n<A.length;++n){var B=A[n];if(!v[B]){v[B]=!0;var p=Object.getOwnPropertyDescriptor(w,B);null!=p&&null==p.get&&null==p.set&&y.push(B)}}w=ac.getPrototypeOf(w)}return y}}var k={}.hasOwnProperty;return function(u){if(l(u)){return[]}var p=[];j:for(var t in u){if(k.call(u,t)){p.push(t)}else{for(var r=0;r<j.length;++r){if(k.call(j[r],t)){continue j}}p.push(t)}}return p}}(),ah=/this\s*\.\s*\S+\s*=/,q=/^[a-z$_][a-z$_0-9]*$/i,ab=function(){return"stack" in new Error?function(j){return aF(j)?j:new Error(al(j))}:function(j){if(aF(j)){return j}try{throw new Error(al(j))}catch(k){return k}}}(),ae=function(j){return ac.isArray(j)?j:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var aa="function"==typeof Array.from?function(j){return Array.from(j)}:function(j){for(var l,m=[],k=j[Symbol.iterator]();!(l=k.next()).done;){m.push(l.value)}return m};ae=function(j){return ac.isArray(j)?j:null!=j&&"function"==typeof j[Symbol.iterator]?aa(j):null}}var Z="undefined"!=typeof process&&"[object process]"===ak(process).toLowerCase(),X="undefined"!=typeof process&&"undefined"!=typeof process.env,z,ag={setReflectHandler:function(j){z=j},isClass:aB,isIdentifier:aH,inheritedDataKeys:W,getDataPropertyOrDefault:am,thrower:aq,isArray:ac.isArray,asArray:ae,notEnumerableProp:av,isPrimitive:ar,isObject:ao,isError:ai,canEvaluate:aj,errorObj:G,tryCatch:ay,inherits:J,withAppended:aE,maybeWrapAsError:aG,toFastProperties:az,filledRange:aD,toString:al,canAttachTrace:aF,ensureErrorObject:ab,originatesFromRejection:au,markAsOriginatingFromRejection:aA,classString:ak,copyDescriptors:af,isNode:Z,hasEnvVariables:X,env:ax,global:K,getNativePromise:aw,contextBind:ad};ag.isRecentNode=ag.isNode&&function(){var j;return process.versions&&process.versions.node?j=process.versions.node.split(".").map(Number):process.version&&(j=process.version.split(".").map(Number)),0===j[0]&&j[1]>10||j[0]>0}(),ag.nodeSupportsAsyncResource=ag.isNode&&function(){var k=!1;try{var l=an("async_hooks").AsyncResource;k="function"==typeof l.prototype.runInAsyncScope}catch(j){k=!1}return k}(),ag.isNode&&ag.toFastProperties(process);try{throw new Error}catch(Y){ag.lastLineError=Y}aC.exports=ag},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);e.Promise=Promise;if(!e.nativePromise){e.nativePromise=e.Promise}})(Dynamsoft);(function(b){var a=20210305;if(b._navInfo_ver){if(b.isNumber(b._navInfo_ver)&&b._navInfo_ver>=a){return}}b._navInfo_ver=a;b.getNavInfoSync=function(){var p=!1,l=!0,o=b.win,r=b.doc,e=o.location.protocol,n=(e==="https:"),k=(e!=="https:"&&e!=="http:"),f=false,h=false,s=true,m=true,g=false,j=0,q=0,d=o.JSON,i;if(Dynamsoft.navInfo){i=Dynamsoft.navInfo}else{b.getNavInfo();var c=navigator;i=b.getNavInfoByUserAgent(c.userAgent,c.platform)}if(0){g=i.bMobile||navigator.userAgentData.mobile}else{var i=Dynamsoft.navInfo;f=i.bIE;h=i.bEdge;m=i.bGecko;g=i.bMobile||i.bPad||i.bChromeOS;if(f){j=i.strBrowserVersion;q=i.IEMode}s=i.bHTML5Edition}return{host:o,bSSL:n,bFileSystem:k,bIE:f,bEdge:h,bGecko:m,bMobile:g,IEVersion:j,IEMode:q,bHTML5Edition:s,nodejs:p}};b.getNavInfoByUAData=function(d){var c=function(m){var f=navigator.userAgentData,h=f.mobile,j,q,g=m.platform.toLowerCase(),o=m.platformVersion,i=m.architecture.toLowerCase(),e=false,n=(g.indexOf("mac")>=0),l=navigator.userAgent.toLowerCase(),k=(/cros/).test(l),r=false;if(!h){if((/mobile/g).test(l)){h=true}}r=(/aarch64|arm64|mips64/g).test(l);if("brands" in f&&b.isArray(f.brands)&&f.brands.length>0){j=f.brands[0].brand.toLowerCase();q=f.brands[0].version}else{if("uaList" in f&&b.isArray(f.uaList)&&f.uaList.length>0){j=f.uaList[0].brand.toLowerCase();q=f.uaList[0].version}}if((/wow64|x86_64|win64|x64/).test(l)){e=true}else{if(n){var p=o.split("_");if(p.length>0&&p[0]>=15){e=true}}else{if(i.indexOf("win64")>=0||i.indexOf("x86_64")>=0||i.indexOf("x64")>=0){e=true}}}return{bWin:(g=="windows"),bMac:n,bLinux:(g=="linux"),bAndroid:false,bMobile:h,bPad:false,bChromeOS:k,bEmbed:r,bOSx64:e,bIE:false,bEdge:false,bChrome:true,bFirefox:false,bSafari:false,bOpera:false,bGecko:true,bHTML5Edition:true,strBrowserVersion:q,IEMode:false,bQuerySelectorSupported:true,nativeJson:true,scrollBarWidth:false}};if(d){return Promise.resolve(function(){return c(d)})}return navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture"]).then(c)};b.asyncGetNavInfo=function(){if(Dynamsoft.navInfo){return Promise.resolve(Dynamsoft.navInfo)}if(0){return b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d;return d})}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Promise.resolve(Dynamsoft.navInfo)}};b.getNavInfo=function(){if(Dynamsoft.navInfo){return Dynamsoft.navInfo}if(0){b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d});return false}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Dynamsoft.navInfo}};Dynamsoft.navInfoSync=b.getNavInfoSync()})(Dynamsoft.Lib);(function(a,h){var g=a.Lib,b=a.navInfoSync,c=20200521;if(g._ls_ver){if(g.isNumber(g._ls_ver)&&g._ls_ver>=c){return}}g._ls_ver=c;var i=false,f=false,j;if((b.bEdge&&b.bFileSystem)||(b.bIE&&b.IEVersion<8)){}else{try{f=window.localStorage;i=f?true:false}catch(d){f=false}}g.LS={isSupportLS:function(){return i},item:function(k,l,e){var m=null;if(this.isSupportLS()){if(l){f.setItem(k,l);m=l}else{m=f.getItem(k)}if(m===null){return e}return m}else{return e}},removeItem:function(e){if(this.isSupportLS()){f.removeItem(e)}else{return false}return true}}})(Dynamsoft);(function(lib,nil){var _utilities_ver=20200708;if(lib._utilities_ver){if(lib._utilities_ver>=_utilities_ver){return}}lib._utilities_ver=_utilities_ver;var AP=Array.prototype,win=lib.win,doc=lib.doc,navInfoSync=Dynamsoft.navInfoSync,EMPTY_STR="",FALSE=!1,TRUE=!0,mix=lib.mix;var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map;var logger=lib.getLogger(),location=win.location,bDomReady=0,callbacks=[],POLL_RETIRES=500,POLL_INTERVAL=40,RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT="DOMContentLoaded",READY_STATE_CHANGE_EVENT="readystatechange",LOAD_EVENT="load",COMPLETE="complete",addEventListener=standardEventModel?function(el,type,fn){el.addEventListener(type,fn,false)}:function(el,type,fn){el.attachEvent("on"+type,fn)},removeEventListener=standardEventModel?function(el,type,fn){el.removeEventListener(type,fn,false)}:function(el,type,fn){el.detachEvent("on"+type,fn)};lib.mix(lib,{isWindow:function(obj){return obj!=null&&obj==obj.window},globalEval:function(data){if(data&&RE_NOT_WHITESPACE.test(data)){if(win.execScript){win.execScript(data)}else{(function(data){win.eval.call(win,data)})(data)}}},domReady:function(fn){if(bDomReady){try{fn(lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}else{callbacks.push(fn)}return this}});lib.ready=lib.domReady;function fireReady(){for(var i=0;i<callbacks.length;i++){try{callbacks[i](lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}}lib.checkDomReady=function(){if(!bDomReady){bDomReady=1;lib.asyncGetNavInfo().then(function(navInfo){if(doc&&!navInfoSync.nodejs){removeEventListener(win,LOAD_EVENT,lib.checkDomReady)}fireReady()})}};function bindReady(){if(!doc||doc.readyState===COMPLETE){lib.checkDomReady();return}addEventListener(win,LOAD_EVENT,lib.checkDomReady);if(standardEventModel){var fnDomReady=function(){removeEventListener(doc,DOM_READY_EVENT,fnDomReady);lib.checkDomReady()};addEventListener(doc,DOM_READY_EVENT,fnDomReady)}else{var stateChange=function(){if(doc.readyState===COMPLETE){removeEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);lib.checkDomReady()}};addEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);var notframe,docElem=doc&&doc.documentElement,doScroll=docElem&&docElem.doScroll;try{notframe=(win.frameElement===null)}catch(e){notframe=false}if(doScroll&&notframe){var readyScroll=function(){try{doScroll("left");setTimeout(lib.checkDomReady,30)}catch(ex){setTimeout(readyScroll,POLL_INTERVAL)}};readyScroll()}}}bindReady();if(Dynamsoft.navInfoSync.bIE){try{doc.execCommand("BackgroundImageCache",false,true)}catch(e){}}})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._domUtil_ver){if(d._domUtil_ver>=c){return}}d._domUtil_ver=c;var b="",a="none";d.mix(d,{get:function(e){return d.doc.getElementById(e)},hide:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=a}},show:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=b}},toggle:function(f){var e=d.isString(f)?d.get(f):f;if(e){if(e.style.display===a){e.style.display=b}else{e.style.display=a}}},empty:function(e){if(!e){return}while(e.firstChild){e.removeChild(e.firstChild)}}})})(Dynamsoft.Lib);(function(a){var c=a.Lib;var b=20200521;if(c._color_ver){if(c.isNumber(c._color_ver)&&c._color_ver>=b){return}}c._color_ver=b;c.colorStrToInt=function(h){var d="0x",f,e;if(/^(rgb|RGB)/.test(h)){var g=h.replace(/[^\d,.]/g,"").split(",");for(e=0;e<3;++e){f=Number(g[e]).toString(16);if(f.length==1){f="0"+f}d+=f}if(g.length==4){f=Math.round(Number(g[e])*255).toString(16);if(f.length==1){f="0"+f}d+=f}else{d+="ff"}}else{if(h=="transparent"){d+="00000000"}else{if(/^#[0-9a-fA-f]{6}$/.test(h)){d+=h.replace(/#/,"")+"ff"}else{if(/^#[0-9a-fA-f]{3}$/.test(h)){for(e=0;e<3;++e){d+=h[e]+h[e]}d+="ff"}else{d="-1"}}}}return Number(d)};c.IntToColorStr=function(d){if(d>4294967295||d<0){return null}var e;if(!Dynamsoft.navInfoSync.bHTML5Edition){if(d%256==0){e="transparent"}else{e=Math.floor(d/256).toString(16);while(e.length!=6){e="0"+e}e="#"+e}}else{e="rgba("+Math.floor(d/16777216)+","+Math.floor(d/65536)%256+","+Math.floor(d/256)%256+","+(d%256)/255+")"}return e}})(Dynamsoft);(function(b,a){var d=b.Lib,c=20210112;if(d._ajax_ver){if(d.isNumber(d._ajax_ver)&&d._ajax_ver>=c){return}}d._ajax_ver=c;d.asyncGetNavInfo().then(function(h){var s=h.bIE&&(parseInt(h.strBrowserVersion)<=9),u=h.bIE&&(parseInt(h.strBrowserVersion)<=10),p=d.win,n=d.each,m=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,A=1,H=2,g=3,K=200,f=204,l=300,w=304,r=404,j=1223,x=500,C="open error: ",z="send error: ",k=new d.Uri(location.href),G=k&&m.test(k.getScheme()),I=false,o=function(){try{return new p.XMLHttpRequest()}catch(M){}},B=function(){try{var M=false;n(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(O){try{return(M=new p.ActiveXObject(O))}catch(P){d.error("new xhr error: "+P.message)}});return M}catch(N){}},v=(!G&&p.XMLHttpRequest)?("withCredentials" in (o()||[])):false,E=p.ActiveXObject?function(M){if(s){return B()}if(!v&&M&&I){return new I()}return !G&&o()||B()}:o,t=function(M){return I&&(M instanceof I)},q=/^(?:GET|HEAD)$/,e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,L={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},D=a,F;if(self&&self.fetch){F=self.fetch}else{F=p.fetch}if(u){D=d.noop}function J(){}d.mix(J.prototype,{url:false,onSuccess:false,onError:false,onComplete:false,method:"GET",async:true,xhrFields:false,mimeType:false,username:false,password:false,data:false,dataType:"text",headers:false,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:false,afterSend:false,timeout:0,cache:true,crossDomain:false,retry:0,setRequestHeader:function(N,O){var M=this;M.headers[N]=O;return M},getAllResponseHeaders:function(){var M=this;return M.state===H?M.responseHeadersString:null},getNativeXhr:function(){var M=this;return M.nativeXhr},getResponseHeader:function(O){var N,M=this,P;O=O.toLowerCase();if(M.state===H){if(!(P=M.responseHeaders)){P=M.responseHeaders={};while((N=e.exec(M.responseHeadersString))){P[N[1].toLowerCase()]=N[2]}}N=P[O]}return N===undefined?null:N},overrideMimeType:function(N){var M=this;if(!M.state){M.mimeType=N}return M},abort:function(N){var M=this;N=N||"abort";M.state=g;M.status=0;M.statusText=N;if(M.nativeXhr){M.nativeXhr.abort()}M._callback();return M},_ioReady:function(N,Q){var O=this,M=false;if(O.state===H||O.state===g){return}if(O.state===A){O.state=H}O.readyState=4;if(N>=K&&N<l||N===w){if(N===w){Q="not modified";M=true}else{Q="success";M=true}}else{if(N<0){N=0}}try{if(N>=K){O.handleResponseData()}}catch(P){d.error(P.stack||P,"error");Q=P.message||"parser error"}if(N<K||!M){if(O.retry>0){O.retry=O.retry-1;setTimeout(function(){O.sendInternal()},200);return}}O.status=N;O.statusText=Q;O._callback(M)},_callback:function(M){var N=this,O=N.timeoutTimer;if(O){clearTimeout(O);N.timeoutTimer=0}n([M?N.onSuccess:N.onError,N.onComplete],function(P){if(d.isFunction(P)){P.apply(N.context,[N.responseData,N.statusText,N])}});N.responseData=null},handleResponseData:function(){var T=this,U,S=T.dataType,R=T.nativeXhr;if(S==="blob"||S==="arraybuffer"){if(s){var Q,O;if("responseBody" in R){Q=R.responseBody;O=dsVbsBinGetLength(Q);U=(new VBArray(dsVbsBinGetBytes(Q,0,O))).toArray()}else{var M;U=[];Q=R.responseText;O=Q.length;for(M=0;M<O;++M){U.push(Q.charCodeAt(M)&255)}}Q=null}else{if(!!p.Blob){U=R.response}else{if("responseBody" in R){U=R.responseBody}else{U=R.responseText}}}}else{if(S=="json"){if(R.responseType&&R.responseType.toLowerCase()=="json"){U=R.response}else{U=R.responseText?(((p.JSON&&p.JSON.parse)?p.JSON.parse:d.parse)(R.responseText)):{}}}else{if(S==="user-defined"){U=R.response!==undefined?R.response:R.responseText}else{T.responseText=U=R.responseText||"";try{var N=R.responseXML;if(N&&N.documentElement){T.responseXML=N}}catch(P){}}}}T.responseData=U},sendInternal:function(M){var T=this,ac,X,N,O,V,Y,W,ab,P,U,ad,R;ac=T._setup(M);N=ac.method;if(d.isString(N)){N=N.toUpperCase()}Y=ac.contentType;O=ac.url;V=ac.dataType;P=ac.mimeType;if(!d.isString(O)){return}T.nativeXhr=W=E(ac.crossDomain);if(!W){return}try{T.state=A;if(ac.username){W.open(N,O,ac.async,ac.username,ac.password)}else{W.open(N,O,ac.async)}if((ac.async||h.bIE)&&V&&V!="user-defined"&&("responseType" in W)){try{W.responseType=V}catch(aa){}}}catch(Z){if(T.state<2){d.error(Z.stack||Z,"error");T._ioReady(-1,C+(d.isNumber(Z.number)?"("+Z.number+")":"")+(Z.message||""))}else{d.error(Z)}return}ab=ac.xhrFields||{};if("withCredentials" in ab){if(!v){delete ab.withCredentials}}n(ab,function(ag,ae){try{W[ae]=ag}catch(af){d.error(af)}});if(P&&W.overrideMimeType){W.overrideMimeType(P)}U=ac.headers||{};var Q=U["X-Requested-With"];if(Q===false){delete U["X-Requested-With"]}if("setRequestHeader" in W){if(Y){W.setRequestHeader("Content-Type",ac.contentType)}W.setRequestHeader("Accept",V&&L[V]?L[V]+(V==="*"?"":", */*; q=0.01"):L["*"]);n(U,function(af,ae){W.setRequestHeader(ae,af)})}if(!ac.cache){W.setRequestHeader("If-Modified-Since","0");W.setRequestHeader("Cache-Control","no-cache")}ad=!q.test(ac.method);R=ad&&ac.data||null;if(ad&&s){R=ac.data}if(ac.async&&ac.timeout>0){if(ac.timeout<300){ac.timeout=300}T.timeoutTimer=setTimeout(function(){T.abort("timeout")},ac.timeout)}try{T.state=A;if(d.isFunction(T.beforeSend)){var S=T.beforeSend(W,T);if(S===false){T.abort("cancel");return}}W.send(R);R=null;ac.data=null;if(d.isFunction(T.afterSend)){T.afterSend(T)}}catch(aa){if(T.state<2){d.error(aa.stack||aa,"error");T._ioReady(-1,z+(aa.message||""))}else{d.error(aa)}}if(!ac.async||W.readyState===4){T._xhrCallback()}else{if(t(W)){W.onload=function(){W.readyState=4;W.status=K;T._xhrCallback()};W.onerror=function(){W.readyState=4;W.status=x;T._xhrCallback()}}else{W.onreadystatechange=function(){T._xhrCallback()}}}},_xhrCallback:function(N,S){var O=this,P=O.nativeXhr;try{if(P.readyState===4||S){if(t(P)){P.onerror=D;P.onload=D}else{P.onreadystatechange=D}if(S){if(P.readyState!==4){P.abort()}}else{if(!t(P)){O.responseHeadersString=P.getAllResponseHeaders()}var M=P.status,R;try{R=P.statusText}catch(Q){d.error("xhr statusText error: ");d.error(Q);R=""}O._ioReady(M,R)}}}catch(Q){d.error(Q.stack||Q,"error");P.onreadystatechange=D;if(!S){O._ioReady(-1,Q.message||"process error")}}},_setup:function(Q){var N=this,M,P,S,O,R;if(Q){N.context=Q.context;delete Q.context;if(Q instanceof J){Q=Q.config}N.config=Q;O=Q.url;if(d.startsWith(O,"http://")||d.startsWith(O,"https://")){R=new d.Uri(O)}else{if(d.startsWith(O,"//")){Q.url=O="http:"+O}R=k.resolve(O)}if(!Q.dataType){M="text"}else{M=Q.dataType.toLowerCase()}Q.dataType=M;if(!Q.method){Q.method="GET"}else{Q.method=Q.method.toUpperCase()}if(!("crossDomain" in Q)){Q.crossDomain=!R.isSameOriginAs(k)}S=Q.headers;for(P in S){if(d.isUndefined(S[P])){delete S[P]}}d.mix(N,Q)}N.state=A;return N}});function i(N){if(!N||!d.isString(N.url)){d.log("the url is error.");return}var M=new J();M.sendInternal(N);return M}d.mix(d,{ajax:i,io:{get:function(N,O,P,M){return i({method:"GET",url:N,onSuccess:O,onError:P,dataType:M})},post:function(N,P,O,Q,M){return i({method:"POST",data:P,url:N,onSuccess:O,onError:Q,dataType:M})},put:function(N,P,O,Q,M){return i({method:"PUT",data:P,url:N,onSuccess:O,onError:Q,dataType:M})}}});if(F){d.fetch=function(P,O){var M="text",R=!1;if(O){if(O.dataType){M=O.dataType}if(O.fetchRaw){R=!0}}var N,Q;N=F(P,O);if(Promise!=d.nativePromise){Q=Promise;Promise=d.nativePromise;N=N.then(function(S){Promise=Q;if(S.ok){return S}else{throw {httpCode:S.status,errorString:S.statusText}}})}else{N=N.then(function(S){if(S.ok){return S}else{throw {httpCode:S.status,errorString:S.statusText}}})}if(R){return N}if(M=="blob"){N=N.then(function(S){return S.blob()})}else{if(M=="json"){N=N.then(function(S){return S.json()})}else{if(M=="arraybuffer"){N=N.then(function(S){return S.arrayBuffer()})}else{N=N.then(function(S){return S.text()})}}}return N}}else{if(s){d.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join(""))}var y;if(Promise!=d.nativePromise){y=Promise;Promise=d.nativePromise}d.fetch=function(N,M){return new Promise(function(S,Q){var P=function(W,U,V){if(y){Promise=y}S(W)},T=function(W,U,V){if(y){Promise=y}Q({httpCode:V.status,errorString:U})},O={url:N,onSuccess:P,onError:T,dataType:"text"},R=false;if(M){if(M.method){O.method=M.method}if(M.body){O.data=M.body}if(M.headers){if(!O.headers){O.headers={}}n(M.headers,function(V,U){if(U.toLowerCase()=="content-type"){R=true}O.headers[U]=V})}if(M.dataType){O.dataType=M.dataType}if(M.contentType){O.contentType=M.contentType}}if(R){O.contentType=false}if(O.dataType=="blob"&&s){O.mimeType="text/plain; charset=x-user-defined"}d.ajax(O)})}}})})(Dynamsoft);(function(c){var b=20200521;if(c._customEvt_ver){if(c.isNumber(c._customEvt_ver)&&c._customEvt_ver>=b){return}}c._customEvt_ver=b;var a={fire:function(f){var d=this,e;d.exec=d.exec||{};f=f.toLowerCase();e=Array.prototype.slice.call(arguments,1);c.each(d.exec[f]||[],function(i){var h=i.f,g=i.c||d;try{h.apply(g,e)}catch(j){c.log(j)}})},on:function(g,f,d){var e=this;e.exec=e.exec||{};g=g.toLowerCase();e.exec[g]=e.exec[g]||[];e.exec[g].push({f:f,c:d})},off:function(j,h,k){var f=this,e=f.exec;if(!e){return}if(!j){f.exec=null;return}j=j.toLowerCase();if(!h){e[j]=null;return}var d=e[j]||[];for(var g=d.length-1;g>=0;g--){if(d[g]===h){d.splice(g,1)}}}};c.obj={customEvent:a}})(Dynamsoft.Lib);(function(b){var g=b.Lib,e=!1,c=!0,f=g.win.document,d;var a=20200521;if(g._evtBase_ver){if(g.isNumber(g._evtBase_ver)&&g._evtBase_ver>=a){return}}g._evtBase_ver=a;d=function(h){return(Dynamsoft.navInfoSync.bGecko&&"mousewheel"===h)?"DOMMouseScroll":h};g.mix(g,{addEventListener:f.addEventListener?function(i,k,j){var h=d(k);if(i){i.addEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.attachEvent("on"+h,j)}},removeEventListener:f.removeEventListener?function(i,k,j){var h=d(k);if(i){i.removeEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.detachEvent("on"+h,j)}},stopPropagation:function(h){var i=h||window.event;if(i.preventDefault){i.preventDefault()}if(i.stopPropagation){i.stopPropagation()}i.returnValue=false;i.cancelBubble=true},fireEvent:function(h,i){var j;if(f.createEvent){j=f.createEvent("HTMLEvents");j.initEvent(h,c,c);if(i.dispatchEvent){i.dispatchEvent(j)}}else{if(f.createEventObject){j=f.createEventObject();j.bubbles=c;j.cancelable=c;i.fireEvent(h,j)}else{j=new Event(h);if(i.dispatchEvent){i.dispatchEvent(j)}}}}})})(Dynamsoft);(function(f,b){var e=20200716;if(f._loadbase64_ver){if(f._loadbase64_ver>=e){return}}f._loadbase64_ver=e;var d={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};f.base64={UTF16ToUTF8:function(n){var l=[],h=n.length,j,g;for(var k=0;k<h;k++){var m=n.charCodeAt(k);if(m>0&&m<=127){l.push(n.charAt(k))}else{if(m>=128&&m<=2047){j=192|((m>>6)&31);g=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g))}else{if(m>=2048&&m<=65535){j=224|((m>>12)&15);g=128|((m>>6)&63);var o=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g),String.fromCharCode(o))}else{if(m>=65536&&m<=2097151){}else{if(m>=2097152&&m<=67108863){}else{}}}}}}return l.join("")},UTF8ToUTF16:function(m){var l=[],k=m.length,j,p,o,g,q,n,h;for(j=0;j<k;j++){g=m.charCodeAt(j);if(((g>>7)&255)==0){l.push(m.charAt(j))}else{if(((g>>5)&255)==6){q=m.charCodeAt(++j);p=(g&31)<<6;o=q&63;h=p|o;l.push(String.fromCharCode(h))}else{if(((g>>4)&255)==14){q=m.charCodeAt(++j);n=m.charCodeAt(++j);p=(g<<4)|((q>>2)&15);o=((q&3)<<6)|(n&63);h=((p&255)<<8)|o;l.push(String.fromCharCode(h))}else{if(((g>>3)&255)==30){}else{if(((g>>2)&255)==62){}else{}}}}}}return l.join("")},encode:function(o){var n=this.UTF16ToUTF8(o),j=[],l=0,g=n.length,m,k,h;while(l<g){m=n.charCodeAt(l++)&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n.charCodeAt(l++);if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n.charCodeAt(l++);j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},encodeArray:function(n){var j=[],l=0,g=n.length,m,k,h;while(l<g){m=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n[l++]&255;j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},decode:function(p){var n=this,k=[],m=0,o=p.length,l,j,h,g;while(m<o){do{l=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&l==-1);if(l==-1){break}do{j=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&j==-1);if(j==-1){break}k.push(String.fromCharCode((l<<2)|((j&48)>>4)));do{h=p.charCodeAt(m++)&255;if(h==61){return n.UTF8ToUTF16(k.join(""))}h=d.decodeChars[h]}while(m<o&&h==-1);if(h==-1){break}k.push(String.fromCharCode(((j&15)<<4)|((h&60)>>2)));do{g=p.charCodeAt(m++)&255;if(g==61){return n.UTF8ToUTF16(k.join(""))}g=d.decodeChars[g]}while(m<o&&g==-1);if(g==-1){break}k.push(String.fromCharCode(((h&3)<<6)|g))}return n.UTF8ToUTF16(k.join(""))}};f.utf8={fromUTF16:function(k){var h=[],j=0,g=k.length,l;while(j<g){l=k.charCodeAt(j);if((l>=1)&&(l<=127)){h.push(k.charAt(j))}else{if(l>2047){h.push(String.fromCharCode(224|((l>>12)&15)));h.push(String.fromCharCode(128|((l>>6)&63)));h.push(String.fromCharCode(128|((l>>0)&63)))}else{h.push(String.fromCharCode(192|((l>>6)&31)));h.push(String.fromCharCode(128|((l>>0)&63)))}}j++}return h.join("")},toUTF16:function(m){var h=[],k=0,g=m.length,n,l,j;while(k<g){n=m.charCodeAt(k++);switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h.push(m.charAt(k-1));break;case 12:case 13:l=m.charCodeAt(k++);h.push(String.fromCharCode(((n&31)<<6)|(l&63)));break;case 14:l=m.charCodeAt(k++);j=m.charCodeAt(k++);h.push(String.fromCharCode(((n&15)<<12)|((l&63)<<6)|((j&63)<<0)));break}}return h.join("")}};var c=typeof exports!="undefined"?exports:typeof self!="undefined"?self:$.global;function a(g){this.message=g}a.prototype=new Error();a.prototype.name="InvalidCharacterError";f.btoa=c.btoa?(function(g){return c.btoa(g)}):(function(j){var m=String(j);for(var l,h,g=0,k=d.encodeChars,i="";m.charAt(g|0)||(k="=",g%1);i+=k.charAt(63&l>>8-g%1*8)){h=m.charCodeAt(g+=3/4);if(h>255){throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}l=l<<8|h}return i});f.atob=c.atob?(function(g){return c.atob(g)}):(function(j){var m=String(j).replace(/[=]+$/,"");if(m.length%4==1){throw new a("'atob' failed: The string to be decoded is not correctly encoded.")}for(var l=0,k,h,g=0,i="";h=m.charAt(g++);~h&&(k=l%4?k*64+h:h,l++%4)?i+=String.fromCharCode(255&k>>(-2*l&6)):0){h=d.encodeChars.indexOf(h)}return i})})(Dynamsoft.Lib);(function(h){var f=20210107;if(h._loadjs_ver){if(h._loadjs_ver>=f){return}}h._loadjs_ver=f;var b="",d=!0,g=h.doc,a=g&&g.documentElement,c=g.getElementsByTagName("head")[0]||a,e=g.createElement("script").readyState?function(j,k){var i=j.onreadystatechange;j.onreadystatechange=function(){var l=j.readyState;if(l==="loaded"||l==="complete"){j.onreadystatechange=null;if(i){i()}k.call(this,true)}else{if(l==="loading"){}else{k.call(this,false)}}}}:function(j,k){var i=!1;j.addEventListener("load",k,i);j.addEventListener("error",k,i)};h.scriptOnload=e;h.getScript=function(j,l,m){var k,i;if(!h.isFunction(m)){m=function(){}}if(!h.isString(j)||j==b){m();return}k=g.createElement("script");i=["",j].join(b);k.src=i;if(l){k.async=d}k.charset="utf-8";e(k,m);c.insertBefore(k,c.firstChild);return k};h.getScripts=function(k,j,m){if(!h.isArray(k)){m();return}var l=k.length,i=function(n){if(n){l--}else{m()}if(l<=0){m("ok")}};if(l<=0){m("ok");return}h.each(k,function(n){h.getScript(n,j,i)})};h.getCss=function(i,l){var j,k=l;if(!h.isFunction(k)){k=!1}if(!h.isString(i)||i==b){if(k){k()}return}j=g.createElement("link");j.href=i;j.rel="stylesheet";j.async=d;if(k){e(j,k)}c.insertBefore(j,c.firstChild);return j};h.getAllCss=function(l,k){if(!h.isArray(l)){k();return}var j=l.length,i=function(m){if(m){j--}else{k()}if(j<=0){k("ok")}};h.each(l,function(m){h.getCss(m,i)})};h.addScript=function(i){var k,j;j=i.body;if(!h.isString(j)||j==b){return}k=g.createElement("script");k.charset="utf-8";if(Dynamsoft.navInfoSync.bIE){k.text=j}else{k.appendChild(g.createTextNode(j))}if(i.language){k.language=i.language}else{k.language="javascript"}if(i.type){k.type=i.type}else{k.type="text/javascript"}c.insertBefore(k,c.firstChild)};h.addJS=function(i){h.addScript({body:i})};h.addVBS=function(i){h.addScript({body:i,language:"vbscript",type:"text/vbscript"})}})(Dynamsoft.Lib);(function(a){var c=a.Lib,b=20210601;if(c._asyncQueue_ver){if(c.isNumber(c._asyncQueue_ver)&&c._asyncQueue_ver>=b){return}}c._asyncQueue_ver=b;var d={queue:[],doNextStarted:false,timer:false,pushToDo:function(g,f,e){d.queue.push({obj:g,method:f,args:e})},doNext:function(){if(!d.doNextStarted){clearTimeout(d.timer);d.timer=false;return}if(d.queue.length==0){d.timer=setTimeout(d.doNext,500);return}var g=d.queue[0],i=g.obj,e=g.method,k=g.args;d.queue.splice(0,1);if(i&&c.isFunction(i[e])){var f=false;if(k.length>2){var m=k[k.length-2],h=k[k.length-1];if(c.isFunction(m)&&c.isFunction(h)){k[k.length-2]=function(){try{m.apply(i,arguments)}catch(n){}d.timer=setTimeout(d.doNext,0)};k[k.length-1]=function(){try{h.apply(i,arguments)}catch(n){}d.timer=setTimeout(d.doNext,0)};f=true}}try{i[e].apply(i,k)}catch(l){}if(!f){d.timer=setTimeout(d.doNext,0)}return}else{if(i===null&&c.isFunction(e)){try{e.apply(null,k)}catch(j){}d.timer=setTimeout(d.doNext,0)}else{c.log("not invoke a function: "+e);d.timer=setTimeout(d.doNext,0)}}},start:function(){if(!d.doNextStarted){d.doNextStarted=true;d.timer=setTimeout(d.doNext,0)}},stop:function(){clearTimeout(d.timer);d.doNextStarted=false;d.queue=[]}};c.asyncQueue=d})(Dynamsoft);(function(f){var d=20200521;if(f._sprintf_ver){if(f._sprintf_ver>=d){return}}f._sprintf_ver=d;var e,i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function g(m,l){if("_".repeat){return m.repeat(l)}var k=0,j=[];for(;k<l;k++){j.push(m)}return j.join("")}function c(s,r){var w=1,u=s.length,x,l="",p,n,q,m,t,v,o,j;for(p=0;p<u;p++){if(typeof s[p]==="string"){l+=s[p]}else{if(typeof s[p]==="object"){q=s[p];if(q.keys){x=r[w];for(n=0;n<q.keys.length;n++){if(x==undefined){throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[n],q.keys[n-1]))}x=x[q.keys[n]]}}else{if(q.param_no){x=r[q.param_no]}else{x=r[w++]}}if(i.not_type.test(q.type)&&i.not_primitive.test(q.type)&&x instanceof Function){x=x()}if(i.numeric_arg.test(q.type)&&(typeof x!=="number"&&isNaN(x))){throw new TypeError(e("[sprintf] expecting number but found %T",x))}if(i.number.test(q.type)){o=x>=0}switch(q.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,q.width?parseInt(q.width):0);break;case"e":x=q.precision?parseFloat(x).toExponential(q.precision):parseFloat(x).toExponential();break;case"f":x=q.precision?parseFloat(x).toFixed(q.precision):parseFloat(x);break;case"g":x=q.precision?String(Number(x.toPrecision(q.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x);x=(q.precision?x.substring(0,q.precision):x);break;case"t":x=String(!!x);x=(q.precision?x.substring(0,q.precision):x);break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase();x=(q.precision?x.substring(0,q.precision):x);break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf();x=(q.precision?x.substring(0,q.precision):x);break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase();break}if(i.json.test(q.type)){l+=x}else{if(i.number.test(q.type)&&(!o||q.sign)){j=o?"+":"-";x=x.toString().replace(i.sign,"")}else{j=""}t=q.pad_char?q.pad_char==="0"?"0":q.pad_char.charAt(1):" ";v=q.width-(j+x).length;m=q.width?(v>0?g(t,v):""):"";l+=q.align?j+x+m:(t==="0"?j+m+x:m+j+x)}}}}return l}var h=Object.create?Object.create(null):{};function a(j){if(h[j]){return h[j]}var m=j,n,p=[],o=0;while(m){if((n=i.text.exec(m))!==null){p.push(n[0])}else{if((n=i.modulo.exec(m))!==null){p.push("%")}else{if((n=i.placeholder.exec(m))!==null){if(n[2]){o|=1;var q=[],l=n[2],k=[];if((k=i.key.exec(l))!==null){q.push(k[1]);while((l=l.substring(k[0].length))!==""){if((k=i.key_access.exec(l))!==null){q.push(k[1])}else{if((k=i.index_access.exec(l))!==null){q.push(k[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=q}else{o|=2}if(o===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}p.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}}}m=m.substring(n[0].length)}h[j]=p;return p}e=function(j){return c(a(j),arguments)};function b(k,j){return e.apply(null,[k].concat(j||[]))}f.sprintf=e;f.vsprintf=b})(Dynamsoft.Lib);(function(f,i){var c=Dynamsoft.managerEnv,k=f.LS,h=Dynamsoft.navInfoSync.host,d,a,g=20200914,j=function(){if(Dynamsoft.dcp){var l=Dynamsoft.dcp.dcpJSVer;if(f.isNumber(l)){return l>=g}}return false};if(!c){Dynamsoft.managerEnv={};c=Dynamsoft.managerEnv}c.resourcesPath=c.resourcesPath||"Resources";c.IfUpdateService=c.IfUpdateService?true:false;if(j()){j=i;g=i;return}a={dcpStatus:0,bConnected:false,connectedResult:"",curPortIndex:0,bConnectNumLimited:true,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}};var b=[],e=0;Dynamsoft.dcp=d={host:"127.0.0.1",ports:[[18625,18626]],win64Port:[18627,18628],ifCheck64bitServiceFirst:false,dcpJSVer:g,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],DWASMVer14:[14,3,1,"0115"],managerVersion:[17,1,0,"0525"],managerVersionMac:[17,1,0,"0525"],managerVersionLinux:[17,1,0,"0525"],serviceVersion:[1,7,0,"0330"],serviceVersionMac:[1,7,0,"0330"],serviceVersionLinux:[1,7,0,"0330"],detect:a,strSID:"",bEnhancedMode:false,b64bit:false,onReadys:[],getManagerVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.managerVersionMac}else{if(l.bLinux){return d.managerVersionLinux}}}return d.managerVersion},getServiceVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.serviceVersionMac}else{if(l.bLinux){return d.serviceVersionLinux}}}return d.serviceVersion},versionInfo:function(p,l){var o=0,n=function(t){if(f.isArray(t)&&t.length>0&&t[0]){a.curPort=d.ports[o%d.ports.length];var w=t[0];if(f.isString(w)&&d._compareVersion(w.split(","),d.oldDWASMVer)){var v=f.isString(t[1])&&t[1].toLowerCase(),u="",s=false,q=false;if(t.length>4){u=f.isString(t[2])?t[2]:"";s=f.isString(t[3])&&(t[3]==="true");q=f.isString(t[4])&&(t[4]==="64")}d.strSID=u;d.bEnhancedMode=s;d.b64bit=q;a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.Connected;d._sendStatusEvent(false,w);if(f.isFunction(p)){setTimeout(function(){p(u,s)},0)}return true}}return false},m=function(r,s,q){++o;a.curPortIndex=o%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&o>=a.IMAXCONNECTCOUNT){setTimeout(function(){p(r,s,q)},0);return true}return false};a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,l,n,m)},_checkOldManagerVersion:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,i,m,l)},_checkManagerVersion:function(l,n,m){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",false,l,n,m)},_checkService:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingServiceVer;this._postBase("DSVersion",false,i,m,l)},_checkUpdateFile:function(m,l){this._postBase("CheckUpdateFile",false,i,m,l)},_updateService:function(m,l){this._postBase("UpdateService",false,i,m,l)},_postBase:function(n,r,o,t,s){var q,l;if(r){q=d.oldDWASMVerStr}else{q="dwasm2_"+d._getModuleVer()}l={id:"1",method:n,version:q,parameter:[]};if(o){if(f.startsWith(o,"http://")||f.startsWith(o,"https://")){if(Dynamsoft.managerEnv.ifCheckRemoteProductKey){var p=this,m=o;f.ajax({method:"GET",url:m,onSuccess:function(u){l.productKey=u;p._postBaseV2(n,r,l,t,s)},onError:s});return true}}else{l.productKey=o}}this._postBaseV2(n,r,l,t,s);return true},_postBaseV2:function(r,w,m,A,z){var x,B,t,u=f.stringify(m);if(!f.isFunction(A)||!f.isFunction(z)){return}if(d.detect.bConnected&&r=="VersionInfo"){A(d.detect.connectedResult);return}B=function(D,E,C){s--;if(s==0){if(z(D,E,C)){return}}};t=function(D,F,C){var E=d._getJSON(D);if(E&&"result" in E){s=-1;if(d.detect.bConnected){return}d.detect.bConnected=true;d.detect.connectedResult=E.result;d.detect.dcpStatus=d.detect.EnumDCP_DetectStatus.Connected;d.detect.curPort=d.ports[C.index];d.ports=[d.detect.curPort];d.detect.curPortIndex=0;if(k.isSupportLS()){k.item("DCP_port",d.detect.curPort[1])}if(A(E.result)){return}}B(D,F,C)};var p,s=d.ports.length;if(s>1&&k.isSupportLS()){var n=k.item("DCP_port");if(f.isString(n)&&n!==""){for(p=1;p<s;p++){var l=d.ports[p],y,v;y=l[0];v=l[1];if(v==n){d.ports[p][0]=d.ports[0][0];d.ports[p][1]=d.ports[0][1];d.ports[0][0]=y;d.ports[0][1]=v}break}}}if(d.detect.bConnected){s=1}b=[];d.detect.bConnected=false;for(p=0;p<s;p++){var o=[d._getPreUrl(p),w?"dcp/":d._getModuleName(),w?d.oldDWASMVerStr:d._getModuleVer(),"/",r,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");b.push({method:"POST",url:o,timeout:200,data:u,onSuccess:t,onError:B})}for(p=0;p<s;p++){var q=f.ajax(b[p]);q.index=p}},loadZip:function(l,q,p,r){var o,n=q,m=p;if(n===100){n=0;m=function(s){if(f.isString(s)){s=s.replace('"result" : [ 0,','"result" : [ 100,')}p(s)}}if(Dynamsoft.managerEnv.IfUpdateService){o=[d._getPreUrl(a.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",n,"&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}else{o=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}f.ajax({method:"POST",url:o,async:true,data:l,onSuccess:m,onError:r})},oldLoadZip:function(l,m,o,p){var n=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");f.ajax({method:"POST",url:n,async:true,data:l,onSuccess:o,onError:p})},_getPreUrl:function(o){var l,m;if(Dynamsoft.navInfoSync.bSSL){m="https://";l=d.ports[o][1]}else{m="http://";l=d.ports[o][0]}return[m,d.host,":",l,"/"].join("")},_getJSON:function(l){return l?f.parse(l):!1},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.getManagerVersion().join("")},_compareVersion:function(m,l){var n=f.isLocalIP(d.host);if(!n){return true}if(f.isArray(m)&&m.length==4&&f.isArray(l)&&l.length>=4){return m[0]>l[0]||m[0]==l[0]&&m[1]>l[1]||m[0]==l[0]&&m[1]==l[1]&&m[2]>l[2]||m[0]==l[0]&&m[1]==l[1]&&m[2]==l[2]&&parseInt(m[3])>=parseInt(l[3])}else{if(f.isArray(m)&&m.length==1&&f.isArray(l)&&l.length>=1){return parseInt(m[0])>=parseInt(l[0])}}return false},_getDSUpdateZipUrl:function(){var m=Dynamsoft.Lib.getNavInfo(),n,l,o="";n="Win";if(m.bMac){n="Mac"}else{if(m.bLinux){n="Linux"}}if(Dynamsoft.navInfoSync.bFileSystem){l=""}else{l="?t="+f.now()}if(m.bWin&&d.b64bit){o="_x64"}return[Dynamsoft.managerEnv.resourcesPath,"/dist/serviceupdate/",n,"DSUpdate_",d.getManagerVersion().join("."),o,".zip",l].join("")},getPorts:function(l,p,o){var n="GetPorts",q="dwasm2_"+d._getModuleVer(),m={id:"1",method:n,version:q,parameter:[l]};this._postBaseV2(n,false,m,p,o)},checkDcpForUpdate:function(q,l,s,t,o,n,D,v){var r=false,F=true,B=3,m=0,y=function(J){if(!(f.isArray(J)&&J.length>0&&J[0])){return false}var K=J[0].split(",");var H=false;if(J.length>4){H=f.isString(J[4])&&(J[4]==="64")}d.b64bit=H;if(!Dynamsoft.managerEnv.IfUpdateService){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{if(d._compareVersion(K,d.oldDWASMVer)){var G=d._getDSUpdateZipUrl();r=true;var M=function(N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadedZip;d._sendStatusEvent();var O=0;d.oldLoadZip(N,O,function(){setTimeout(function(){d._checkManagerVersion(v,u,p)},5000)},L);N=null},L=function(O,P,N){d._funUpdateFailed(o,n,O,N.status);setTimeout(D,0)},I=function(N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(o){o()}var O="The update package can't be downloaded. The error code is "+N.httpCode+".";if(n){n(true,O)}d._sendStatusEvent(true,O);setTimeout(D,0)};if(s){s()}if(t){t()}a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.fetch(G,{mode:"cors",dataType:"arraybuffer"}).then(M,I)}else{if(F){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;if(s){s()}if(q){q()}d._sendStatusEvent();F=false}}}return true},x=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;d._sendStatusEvent()}else{setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},u=function(G){if(!(f.isArray(G)&&G.length>0&&G[0])){return false}var H=G[0].split(",");if(d._compareVersion(H,d.getManagerVersion())){if(Dynamsoft.managerEnv.IfUpdateService){if(r){setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}return true}return false},p=function(I,J,H){var G=1000;if(B<3){G=500}B--;if(B<0){d._funShowUpgradeDialogWhenUpdateFailed(o,n);setTimeout(D,0)}else{setTimeout(function(){d._checkManagerVersion(v,u,p)},G)}return true},E=function(H){if(!(f.isArray(H)&&H.length>0&&H[0])){if(s){s()}return false}var G=H[0].split(",");if(d._compareVersion(G,d.getServiceVersion())){a.bConnected=true;if(o){o()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,H[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}return true},w=function(H,I,G){d._funUpdateFailed(o,n,H,G.status);setTimeout(D,0);return true};var A=false,C=function(I){if(!(f.isArray(I)&&I.length>0&&I[0])){return false}var L=I[0];if(f.isString(L)&&d._compareVersion(L.split(","),d.oldDWASMVer)){var K=f.isString(I[1])&&I[1].toLowerCase(),J="",H=false,G=false;if(I.length>4){A=true;J=f.isString(I[2])?I[2]:"";H=f.isString(I[3])&&(I[3]==="true");G=f.isString(I[4])&&(I[4]==="64")}d.strSID=J;d.bEnhancedMode=H;d.b64bit=G;a.curPort=d.ports[m%d.ports.length];if(!Dynamsoft.managerEnv.IfUpdateService){a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{m=0;a.curPortIndex=0;if(F){if(s){s()}if(q){q()}F=false}setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},z=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(F){if(s){s()}if(q){q(G,H)}F=false}if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){m=0;a.curPortIndex=0;setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}else{setTimeout(function(){d._checkManagerVersion(v,C,z)},1000)}return true};if(l){l()}d._checkManagerVersion(v,C,z)},_checkUpdateZip:function(p,v,o,x,q){var r=function(B,C,A){var D=-1;if(A){D=A.status}if(D==0){setTimeout(function(){d._checkService(u,s)},5000);return true}var z=d._getDSUpdateZipUrl();a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.fetch(z,{mode:"cors",dataType:"arraybuffer"}).then(l,w);return true},w=function(z){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(v){v()}var A="The update package can't be downloaded. The error code is "+z.httpCode+".";if(o){o(true,A)}d._sendStatusEvent(true,A);setTimeout(x,0);return true},t=function(A){if(!(f.isArray(A)&&A.length>1)){return false}if(A[1]==true){a.dcpStatus=a.EnumDCP_DetectStatus.VerifiedZip;d._sendStatusEvent();a.dcpStatus=a.EnumDCP_DetectStatus.UpdatingService;d._sendStatusEvent();setTimeout(function(){d._checkService(u,s)},5000)}else{var z=0;if("exception" in A){z=A.exception}if(z==-2373){d._funUpdateFailed(v,o,A,200);setTimeout(x,0);return true}setTimeout(r,0)}return true},l=function(z){var A=1;Dynamsoft.dcp.loadZip(z,A,function(B){var D,C;try{if(f.isString(B)){C=f.parse(B.replace(/\0/g,""));if("result" in C){D=C.result}}}catch(E){}if(f.isArray(D)&&D.length>2&&D[2]==true){setTimeout(function(){d._checkService(u,s)},5000);return}d._funUpdateFailed(v,o,B,200);setTimeout(x,0)},n);z=null},n=function(A,B,z){var C=-1;if(z){C=z.status}if(C==0){setTimeout(function(){d._checkService(u,s)},5000)}else{d._funUpdateFailed(v,o,A,z.status);setTimeout(x,0)}return true},y=function(z){if(!(f.isArray(z)&&z.length>0)){return false}if(z[0]==true){setTimeout(function(){d._checkService(u,s)},5000)}else{d._funUpdateFailed(v,o,z,200);setTimeout(x,0)}return true},m=3,u=function(A){if(!(f.isArray(A)&&A.length>0&&A[0])){return false}var z=A[0].split(",");if(d._compareVersion(z,d.getServiceVersion())){a.bConnected=true;if(v){v()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,A[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(x,0);return true}return false},s=function(A,B){var z=1000;if(m<3){z=500}m--;if(m<0){d._funShowUpgradeDialogWhenUpdateFailed(v,o);setTimeout(x,0);return true}setTimeout(function(){d._checkService(u,s)},z);return true};if(p){p()}a.dcpStatus=a.EnumDCP_DetectStatus.VerifyingZip;d._sendStatusEvent();d._checkUpdateFile(t,r)},_getStatusString:function(p,o){var m,l,n="";if(p==a.EnumDCP_DetectStatus.Init){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.Connected){if(o){n=o}return"Getting manager version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.DownloadingZip){return"Downloading the update package"}else{if(p==a.EnumDCP_DetectStatus.DownloadedZip){return"Update package downloaded"}else{if(p==a.EnumDCP_DetectStatus.DownloadFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"Update package failed to download"+m+l}else{if(p==a.EnumDCP_DetectStatus.CheckingManagerVer){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.CheckingServiceVer){return"Getting service version"}else{if(p==a.EnumDCP_DetectStatus.NotInstalled){return"Dynamsoft Service Not Installed"}else{if(p==a.EnumDCP_DetectStatus.UpdateSkipped){return"Update skipped"}else{if(p==a.EnumDCP_DetectStatus.CheckedService){if(o){n=o}return"Getting service version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.VerifyingZip){return"Verifying the update package"}else{if(p==a.EnumDCP_DetectStatus.VerifiedZip){return"Update package verified"}else{if(p==a.EnumDCP_DetectStatus.UpdatingService){return"Updating the service"}else{if(p==a.EnumDCP_DetectStatus.UpdateSucceed){return"Update succeeded"}else{if(p==a.EnumDCP_DetectStatus.UpdateFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"The update failed"+m+l}}}}}}}}}}}}}}}return""},_sendStatusEvent:function(m,n){var l=m?true:false;if(f.isFunction(h.OnGetServiceUpdateStatus)){h.OnGetServiceUpdateStatus(l,a.dcpStatus,d._getStatusString(a.dcpStatus,n))}},_getErr:function(m){var n,l="";try{if(f.isString(m)){n=m.replace(/\0/g,"");n=f.parse(n)}else{if(m){n=m}}if("description" in n){l=n.description}}catch(o){}return l},_funShowUpgradeDialogWhenUpdateFailed:function(m,l){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}if(l){l()}d._sendStatusEvent(true);return true},_funUpdateFailed:function(m,l,n,q){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}var o,p;if(q==200){o="The update failed.";p=d._getStatusString(a.dcpStatus,d._getErr(n))}else{o="The update failed. The error code is "+q;p=o}if(l){l(true,o)}d._sendStatusEvent(true,p);return true},getDSPath:function(l,n){var p=Dynamsoft.managerEnv.resourcesPath,o=n;if(Dynamsoft.Lib.isString(p)&&p.length>0){if(p[p.length-1]!="/"){p=p+"/"}}else{p="Resources/"}if(!o){var m=Dynamsoft.Lib.getNavInfo();if(m.bMac){o=".pkg"}else{if(m.bLinux){o=".deb"}else{o=".msi"}}}return[p,"dist/DynamsoftServiceSetup",o].join("")},getLinuxHTML5DebPath:function(){return Dynamsoft.dcp.getDSPath(false,".deb")},getLinuxHTML5RpmPath:function(){return Dynamsoft.dcp.getDSPath(false,".rpm")}};j=i;g=i;c=i;f.domReady(function(){if(d.onReadys.length>0){f.each(d.onReadys,function(l){if(f.isFunction(l)){l()}})}});Dynamsoft.Ready=function(l){return f.asyncGetNavInfo().then(function(){try{l(f)}catch(m){f.log(m.stack||m,"error");throw m}})}})(Dynamsoft.Lib);(function(b){var f=b.Lib,e=f.doc;var d=20200521;if(f._evt_ver){if(f.isNumber(f._evt_ver)&&f._evt_ver>=d){return}}f._evt_ver=d;f.Events={registedClass:[],registedObjs:[]};var c=function(g){var i=g||window.event;var h=true;f.each(f.Events.registedObjs,function(j){f.each(f.Events.registedClass,function(k){if(j instanceof k){if(j.bFocus&&j.handlerKeyDown){h=j.handlerKeyDown(i);if(!h){return false}}}})});return h};f.ready(function(){f.addEventListener(e.documentElement,"keydown",c)});f.mix(f,{getWheelDelta:function(g){g=g||window.event;var j,i=g.wheelDelta,h=g.detail;if(i){j=i/120}if(h){j=-(h%3===0?h/3:h)}return j}});var a={LEFT:0,MIDDLE:1,RIGHT:2};f.EnumMouseButton=a;f.detectButton=function(g){var h=g||window.event;if(h.which==null){return(h.button<2)?a.LEFT:((h.button==4)?a.MIDDLE:a.RIGHT)}else{return(h.which<2)?a.LEFT:((h.which==2)?a.MIDDLE:a.RIGHT)}}})(Dynamsoft);(function(b){var a=20200521;if(b._ui_eventWhich_ver){if(b.isNumber(b._ui_eventWhich_ver)&&b._ui_eventWhich_ver>=a){return}}b._ui_eventWhich_ver=a;b.switchEvent=function(c){c=c||window.event;if(c.which==null){c.which=(c.button<2)?1:((c.button==4)?2:3)}else{c.which=(c.which<2)?1:((c.which==2)?2:3)}return c}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._ui_style_ver){if(b.isNumber(b._ui_style_ver)&&b._ui_style_ver>=a){return}}b._ui_style_ver=a;b.currentStyle=function(f,g){var e=b.win,d=e.doc,c;if(f.currentStyle){return f.currentStyle[g]}else{if(e.getComputedStyle){c=g.replace(/([A-Z])/g,"-$1");c=g.toLowerCase();return d.defaultView.getComputedStyle(f,null)[g]}}return null}})(Dynamsoft.Lib);(function(f,h){var m=Array.prototype,i=!0,t=!1,l=f.Lib,b=f.navInfoSync,o=l.isString,v=l.each,s=m.slice,n=" ",p=(b.bIE&&b.IEMode<10),r=/[\n\t\r\.]/g;var d=20200521;if(l._ui_nodelist_ver){if(l.isNumber(l._ui_nodelist_ver)&&l._ui_nodelist_ver>=d){return}}l._ui_nodelist_ver=d;function w(z,A,y){var x=this;if(!(x instanceof w)){return new w(z,A,y)}if(!z){return x}if(typeof z==="string"){l.error("Err 4001.");return x}if(l.isArray(z)||z.isNodeList){Array.prototype.push.apply(x,l.makeArray(z));return x}x[0]=z;x.length=1;return x}w.prototype={isNodeList:true,length:0,item:function(y){var x=this;if(l.isNumber(y)){if(y>=x.length){return null}else{return new w(x[y])}}else{return new w(y)}},slice:function(){return new w(s.apply(this,arguments))},getDOMNodes:function(){return s.call(this)},each:function(z,y){var x=this;v(x,function(B,A){B=new w(B);return z.call(y||B,B,A,x)});return x},getEL:function(){var x=this;return(x.length>0)?x[0]:h},all:function(x){var z,y=this;if(y.length>0){z=l.all(x,y)}else{z=new w()}return z},one:function(x){var y=this,A=y.all(x),z=A.length?A.slice(0,1):A;return z}};function j(x){return o(x)&&(x=l.trim(x))&&x.length>=3&&l.startsWith(x,"<")&&l.endsWith(x,">")}function g(x){return(n+x+n).replace(r,n)}function u(x){return(x).replace(r,"")}function a(B){var y=B.innerHTML;if(!document.all){return y}var A=/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/ig;var z=/"'([^'"]*)'"/ig;y=y.replace(A,'$1="$2"').replace(z,'"$1"');var x=y.replace(/<(\/?)(\w+)([^>]*)>/g,function(D,C,F,E){if(C){return"</"+F.toLowerCase()+">"}return("<"+F.toLowerCase()+E+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(M,H,N,L,K,J,G,I){if(K){return'="'+K+'"'+J}return M})});return x.replace(/<\/?([^>]+)>/g,function(C){return C})}var q=function(B,D){var A=B.className,x,y=D.length,C,z,E;if(A){x=g(A);C=A;z=0;for(;z<y;z++){E=u(D[z]);if(x.indexOf(n+E+n)<0){C+=n+E}}C=l.trim(C)}else{C=D.join(" ")}B.className=C},k=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;while(A.indexOf(C)>=0){A=A.replace(C,n)}}B.className=l.trim(A)}},c=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;if(A.indexOf(C)<0){return t}}return i}return t};l.mix(w.prototype,{before:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.insertBefore(A,z.childNodes[0])})}},append:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.appendChild(A)})}},html:function(y){var x=this.getEL();if(x){if(l.isUndef(y)){return a(x)}x.innerHTML="";v(l.parseHTML(y),function(z){x.appendChild(z)})}},attr:function(z,x){var y=this.getEL();if(y){if(l.isUndef(x)){if(z==="readonly"){return y.readOnly?"readonly":""}if(z==="style"||!p){y=y.attributes[z];if(y){y=y.value}}else{y=y[z]}return y}if(z=="class"){y.className=x}else{y[z]=x}}},style:function(z,x){var y=this.getEL();if(y){return l.style(y,z,x)}},css:function(x){v(this,function(y){v(x,function(z,A){l.style(y,A,z)})})},addClass:function(x){var y=this.getEL();if(y){q(y,x.split(n))}},removeClass:function(x){var y=this.getEL();if(y){k(y,x.split(n))}},hasClass:function(x){var y=this.getEL();if(y){return c(y,x.split(n))}},parent:function(){var x=this.getEL();if(x){x=x.parentNode}return new w(x)},remove:function(){var x=this.getEL();if(x){x.parentNode.removeChild(x)}},offset:function(){var x=this.getEL();return l.DOM.getElDimensions(x,i)}});function e(x,z){var y=z;if(y&&y.isNodeList){y=y.getEL()}if(o(x)){if(j(x)){l.err("Err 4002.")}return new w(l.sizzle(x,y))}if(x.isNodeList){return x}return new w(x)}l.mix(l,{all:e,one:function(x,y){var z=e(x,y);return z.length?z.slice(0,1):z},isNodeList:function(x){return x instanceof w}});l.ready(function(){l.all=e})})(Dynamsoft);(function(e){var d=e.win,c=e.doc,b=isNaN;var a=20200521;if(e._dom_ver){if(e.isNumber(e._dom_ver)&&e._dom_ver>=a){return}}e._dom_ver=a;e.DOM={getOffset:function(p,j,l){p=p||d.event;var g=l||p.target,o=0,n=0,k=0,m=0,f,i,h=false;while(g&&!b(g.offsetLeft)&&!b(g.offsetTop)){i=g.scrollLeft;f=g.scrollTop;if(g.tagName==="BODY"){if(h){i=0;f=0}else{i=i|c.documentElement.scrollLeft;f=f|c.documentElement.scrollTop}}else{if(g.style.position==="fixed"){h=true}}o+=g.offsetLeft-i;n+=g.offsetTop-f;g=g.offsetParent}if(j){k=j.Left;m=j.Top}o=p.clientX-o-k;n=p.clientY-n-m;return{x:o,y:n}},getElDimensions:function(g,i){var f,h;if(!g){return{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}f=g.style.display;g.style.display="";h=i?{offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,offsetWidth:g.offsetWidth,offsetHeight:g.offsetHeight}:{clientTop:g.clientTop,clientLeft:g.clientLeft,clientWidth:g.clientWidth?g.clientWidth:(parseInt(g.style.width)?parseInt(g.style.width):0),clientHeight:g.clientHeight?g.clientHeight:(parseInt(g.style.height)?parseInt(g.style.height):0)};g.style.display=f;return h}};e.getElDimensions=e.DOM.getElDimensions})(Dynamsoft.Lib);(function(g,h){var i=20210113,k=g.Lib;if(k._dialog_ver){if(k.isNumber(k._dialog_ver)&&k._dialog_ver>=i){return}}k._dialog_ver=i;k.loaderBarClassName="ds-dwt-loaderBar";k.loaderBarWidth="230px";k.loaderBarHeight="240px";k.loaderBarSource="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=";var f=k.win,x=k.doc,j=!0,p=!1,r,d,n=500000,a=1000;function b(y){var B,A,z;B=x.body.scrollTop||x.documentElement.scrollTop;if(f.innerHeight){z=f.innerHeight}else{z=x.documentElement.clientHeight}A=B+(z-y.offsetHeight)/2;y.style.top=A+"px";y._dlgInfo.isTopOverridden=j}function o(y,A){for(var z=0;z<y.length;++z){if(y[z]==A){return j}}return p}function s(B){for(var C=0;C<x.styleSheets.length;++C){var H=x.styleSheets[C],E=p,z=p,G,I;try{E=H.cssRules;z=x.querySelectorAll}catch(D){}if(E&&z){for(var A=0;A<E.length;++A){G=E[A];I=p;try{I=z(G.selectorText)}catch(D){}if(I&&o(I,B)){var y=G.style.getPropertyValue("top"),F=G.style.getPropertyValue("bottom");if((y&&y!="auto")||(F&&F!="auto")){return j}}}}}return p}function t(z){var y=p;if(f.getComputedStyle){y=f.getComputedStyle(z)}else{if(z.currentStyle){y=z.currentStyle}}if(y&&y.position!="absolute"){return p}if((z.style.top!="auto"&&z.style.top!="")||(z.style.bottom!="auto"&&z.style.bottom!="")){return p}return !s(z)}function v(z){var y=x.createEvent("MouseEvents");y.initMouseEvent(z.type,z.bubbles,z.cancelable,f,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.button,z.relatedTarget);return y}function c(y){x.body.dispatchEvent(v(y))}function w(){r=x.createElement("div");d=r.style;d.position="fixed";d.display="block";d.left=d.top=d.margin=d.padding=0;d.backgroundColor="#000";d.filter="alpha(opacity=30)";d.opacity=d.MozOpacity=0.3;d.zIndex=n;d.width=d.height="100%";if(x.createEvent){k.addEventListener(r,"click",c)}}function l(){if(r===h){w()}if(!x.body.contains(r)){x.body.appendChild(r)}}function u(){if(r!==h){k.removeEventListener(r,"click",c);x.body.removeChild(r);r=h}}var e={pendingDialogStack:[],_updateStacking:function(B){var D=this,y,A,z,C;A=D.pendingDialogStack;if(A.length==0){u();return}if(B!=true){l()}C=n;k.each(A,function(E){C++;E._dlgInfo.mask.style.zIndex=C++;E.style.zIndex=C})},pushDialog:function(z,B){var C=this,y,A=z.getBoundingClientRect();if(C.pendingDialogStack.length>=a){k.error("Too many modal dialogs.");return}y=x.createElement("div");y.className="dynamsoft-backdrop";if(B==true){y.style.left=(A.x|A.left)+"px";y.style.top=(A.y|A.top)+"px";y.style.width=A.width+"px";y.style.height=A.height+"px"}if(x.createEvent){k.addEventListener(y,"click",function(D){if(z.dispatchEvent){var E=v(D);z.dispatchEvent(E)}})}z.parentNode.insertBefore(y,z.nextSibling);z._dlgInfo.mask=y;C.pendingDialogStack.push(z);C._updateStacking(B)},removeDialog:function(A){var B=this,z,y;z=k.isArray(B.pendingDialogStack)?k.indexOf(A,B.pendingDialogStack):-1;if(z==-1){return}B.pendingDialogStack.splice(z,1);y=A._dlgInfo.mask;y.parentNode.removeChild(y);A._dlgInfo.mask=null;B._updateStacking()}};function m(A,z){var B=this,y;if(B.open){k.error("showDialog called on open dialog.");return}B.open=j;B.removeAttribute("closed");B.setAttribute("open","open");if(t(B)){b(B)}if(A){B._dlgInfo.modal=j;e.pushDialog(B,z)}}function q(y){var z=this;if(!z.open){k.error("closeDialog called on closed dialog.")}z.open=p;z.removeAttribute("open");z.setAttribute("closed","closed");if(typeof y!="undefined"){z.returnValue=y}if(z._dlgInfo.isTopOverridden){z.style.top="auto"}if(z._dlgInfo.modal){e.removeDialog(z)}return z.returnValue}k.dialog={setup:function(y,z){y.show=m.bind(y,p,z);y.showModal=m.bind(y,j,z);y.close=q.bind(y);y._dlgInfo={}}};k.mask={container:false,bConfined:false,dlgMask:false,preOnresize:false,preOnscroll:false};k.showMask=function(){if(k.mask.dlgMask){return}var A=k.mask.bConfined,z=k.mask.container,y;if(z){y=z.getBoundingClientRect();var D=z.firstChild;while(D){if(k.isFunction(D.getBoundingClientRect)){y=D.getBoundingClientRect();break}D=D.nextSibling}}var B=document.createElement("div");B.className="dynamsoft-dialog-wrap";if(!window.onresize){k.mask.preOnresize=false}else{k.mask.preOnresize=window.onresize}if(!window.onscroll){k.mask.preOnscroll=false}else{k.mask.preOnscroll=window.onscroll}if(A&&y){window.onresize=window.onscroll=function(){y=z.getBoundingClientRect();var E=z.firstChild;while(E){if(k.isFunction(E.getBoundingClientRect)){y=E.getBoundingClientRect();break}E=E.nextSibling}B.style.left=(y.x|y.left)+"px";B.style.top=(y.y|y.top)+"px";B.style.width=y.width+"px";if(y.width<470){k.loaderBarWidth=(y.width-10)+"px"}B.style.height=k.loaderBarHeight=y.height+"px";if(k.mask.dlgMask){k.mask.dlgMask.close();k.mask.dlgMask.showModal()}};window.onscroll()}var C=['<div align="center" ','class="',k.loaderBarClassName,'" ','style="margin:0 auto;width:',k.loaderBarWidth,";height:",k.loaderBarHeight,";line-height:",k.loaderBarHeight,'"><img src="',k.loaderBarSource,'" /></div>'].join("");B.innerHTML=C;document.body.appendChild(B);k.mask.dlgMask=B;k.dialog.setup(k.mask.dlgMask,A);k.mask.dlgMask.showModal()};k.hideMask=function(){var y=k.mask.dlgMask;if(y){y.close();document.body.removeChild(y);k.mask.dlgMask=false}if(!k.mask.preOnresize){window.onresize=null}else{window.onresize=k.mask.preOnresize}k.mask.preOnresize=false;if(!k.mask.preOnscroll){window.onscroll=null}else{window.onscroll=k.mask.preOnscroll}k.mask.preOnscroll=false}})(Dynamsoft);(function(t){var w=20200521;if(t._sizzle_ver){if(t.isNumber(t._sizzle_ver)&&t._sizzle_ver>=w){return}}t._sizzle_ver=w;var aq,g=RegExp,ae,ab,d,k,u,al,Y,U,s,v,o,p,ao=!0,f,M,b,S,am="dws_"+1*new Date(),an=window.document,K=0,y=0,ai,aj,G,z,A=function(i,e){if(i===e){s=true}return 0},I=[],V=I.pop,aa=I.push,ak=I.push,F=I.slice,H=function(ax,aw){var av=0,e=ax.length;for(;av<e;av++){if(ax[av]===aw){return av}}return -1},ag="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Q="[\\x20\\t\\r\\n\\f]",C="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ad=["\\[",Q,"*(",C,")(?:",Q,"*([*^$|!~]?=)",Q,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",C,"))|)",Q,"*\\]"].join(""),E=new g(Q+"+","g"),ah=new g(["^",Q,"+|((?:^|[^\\\\])(?:\\\\.)*)",Q,"+$"].join(""),"g"),m=new g(["^",Q,"*,",Q,"*"].join("")),X=new g(["^",Q,"*([>+~]|",Q,")",Q,"*"].join("")),h=new g("^"+C+"$"),W={ID:new g("^#("+C+")"),CLASS:new g("^\\.("+C+")"),TAG:new g("^("+C+"|[*])"),ATTR:new g("^"+ad),needsContext:new g(["^",Q,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",Q,"*((?:-\\d)?\\d*)",Q,"*\\)|)(?=[^-]|$)"].join(""),"i")},L=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,l=function(i,e){if(e){if(i==="\0"){return"\uFFFD"}return i.slice(0,-1)+"\\"+i.charCodeAt(i.length-1).toString(16)+" "}return"\\"+i},q=function(){v()};function au(){var i=[];function e(av,aw){if(i.push(av+" ")>ab.cacheLength){delete e[i.shift()]}return(e[av+" "]=aw)}return e}function a(ax){var aw=0,av=ax.length,e="";for(;aw<av;aw++){e+=ax[aw].value}return e}ai=au();aj=au();G=au();z=au();try{ak.apply((I=F.call(an.childNodes)),an.childNodes);var r=I[an.childNodes.length].nodeType}catch(at){ak={apply:I.length?function(i,e){aa.apply(i,F.call(e))}:function(ax,aw){var e=ax.length,av=0;while((ax[e++]=aw[av++])){}ax.length=e-1}}}function af(aB,av,aE,aH){var az,aF,ay,e,aG,ax,aC,aw=av&&av.ownerDocument,aD=av?av.nodeType:9;aE=aE||[];if(typeof aB!=="string"||!aB||aD!==1&&aD!==9&&aD!==11){return aE}if(!aH){if((av?av.ownerDocument||av:an)!==o){v(av)}av=av||o;if(aD!==11){if((aG=ac.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){aE.push(ay);return aE}}else{return aE}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){aE.push(ay);return aE}}}else{if(aG[2]){ak.apply(aE,av.getElementsByTagName(aB));return aE}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));return aE}}}}else{if((aG=c.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){av=ay}}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){av=ay}}az="#"+az+" "}else{if((az=aG[2])){ak.apply(aE,av.getElementsByTagName(aB));av=aE[0];az=az+" "}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));av=aE[0];az=az+" "}}}aB=aB.replace(az,"")}}}if(ae.qsa&&!z[aB+" "]&&(!f||!f.test(aB))){if(aD!==1){aw=av;aC=aB}else{if(av.nodeName.toLowerCase()!=="object"){if((e=av.getAttribute("id"))){e=e.replace(R,l)}else{av.setAttribute("id",(e=am))}ax=k(aB);aF=ax.length;while(aF--){ax[aF]="#"+e+" "+a(ax[aF])}aC=ax.join(",");aw=av}}if(aC){try{ak.apply(aE,aw.querySelectorAll(aC));return aE}catch(aA){z(aB,!0)}finally{if(e===am){av.removeAttribute("id")}}}}}return al(aB.replace(ah,"$1"),av,aE,aH)}function ap(e){e[am]=true;return e}function Z(av){var i=o.createElement("fieldset");try{return !!av(i)}catch(aw){return false}finally{if(i.parentNode){i.parentNode.removeChild(i)}i=null}}function B(e,i){}function j(i,e){var aw=e&&i,av=aw&&i.nodeType===1&&e.nodeType===1&&i.sourceIndex-e.sourceIndex;if(av){return av}if(aw){while((aw=aw.nextSibling)){if(aw===e){return -1}}}return i?1:-1}function T(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}ae=af.support={};v=af.setDocument=function(av){var e,i,aw=av?av.ownerDocument||av:an;if(aw===o||aw.nodeType!==9||!aw.documentElement){return o}o=aw;p=o.documentElement;if(an!==o&&(i=o.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",q,false)}else{if(i.attachEvent){i.attachEvent("onunload",q)}}}ae.attributes=Z(function(ax){ax.className="i";return !ax.getAttribute("className")});ae.getElementsByTagName=Z(function(ax){ax.appendChild(o.createComment(""));return !ax.getElementsByTagName("*").length});ae.getElementsByClassName=L.test(o.getElementsByClassName);ae.getById=Z(function(ax){p.appendChild(ax).id=am;return !o.getElementsByName||!o.getElementsByName(am).length});if(ae.getById){ab.filter.ID=function(ay){var ax=ay;return function(az){return az.getAttribute("id")===ax}}}else{ab.filter.ID=function(ay){var ax=new g(["^",ay,"$"].join(""),"g");return function(aA){var az=typeof aA.getAttributeNode!=="undefined"&&aA.getAttributeNode("id");return az&&ax.test(az.value)}}}ab.find.TAG=ae.getElementsByTagName?function(ax,ay){if(typeof ay.getElementsByTagName!=="undefined"){return ay.getElementsByTagName(ax)}else{if(ae.qsa){return ay.querySelectorAll(ax)}}}:function(ax,aB){var aC,aA=[],az=0,ay=aB.getElementsByTagName(ax);if(ax==="*"){while((aC=ay[az++])){if(aC.nodeType===1){aA.push(aC)}}return aA}return ay};ab.find.CLASS=ae.getElementsByClassName&&function(ay,ax){if(typeof ax.getElementsByClassName!=="undefined"){return ax.getElementsByClassName(ay)}};M=[];f=[];if((ae.qsa=L.test(o.querySelectorAll))){Z(function(ax){p.appendChild(ax).innerHTML="<a id='"+am+"'></a><select id='"+am+"-\r\\' msallowcapture=''><option selected=''></option></select>";if(ax.querySelectorAll("[msallowcapture^='']").length){f.push("[*^$]="+Q+"*(?:''|\"\")")}if(!ax.querySelectorAll("[selected]").length){f.push("\\["+Q+"*(?:value|"+ag+")")}if(!ax.querySelectorAll("[id~="+am+"-]").length){f.push("~=")}if(!ax.querySelectorAll(":checked").length){f.push(":checked")}if(!ax.querySelectorAll("a#"+am+"+*").length){f.push(".#.+[+~]")}});Z(function(ay){ay.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ax=o.createElement("input");ax.setAttribute("type","hidden");ay.appendChild(ax).setAttribute("name","D");if(ay.querySelectorAll("[name=d]").length){f.push("name"+Q+"*[*^$|!~]?=")}if(ay.querySelectorAll(":enabled").length!==2){f.push(":enabled",":disabled")}p.appendChild(ay).disabled=true;if(ay.querySelectorAll(":disabled").length!==2){f.push(":enabled",":disabled")}ay.querySelectorAll("*,:x");f.push(",.*:")})}if((ae.matchesSelector=L.test((b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)))){Z(function(ax){ae.disconnectedMatch=b.call(ax,"*");b.call(ax,"[s!='']:x")})}f=f.length&&new g(f.join("|"));M=M.length&&new g(M.join("|"));e=L.test(p.compareDocumentPosition);S=e||L.test(p.contains)?function(ay,ax){var aA=ay.nodeType===9?ay.documentElement:ay,az=ax&&ax.parentNode;return ay===az||!!(az&&az.nodeType===1&&(aA.contains?aA.contains(az):ay.compareDocumentPosition&&ay.compareDocumentPosition(az)&16))}:function(ay,ax){if(ax){while((ax=ax.parentNode)){if(ax===ay){return true}}}return false};A=e?function(ay,ax){if(ay===ax){s=true;return 0}var az=!ay.compareDocumentPosition-!ax.compareDocumentPosition;if(az){return az}az=(ay.ownerDocument||ay)===(ax.ownerDocument||ax)?ay.compareDocumentPosition(ax):1;if(az&1||(!ae.sortDetached&&ax.compareDocumentPosition(ay)===az)){if(ay===o||ay.ownerDocument===an&&S(an,ay)){return -1}if(ax===o||ax.ownerDocument===an&&S(an,ax)){return 1}return U?(H(U,ay)-H(U,ax)):0}return az&4?-1:1}:function(ay,ax){if(ay===ax){s=true;return 0}var aE,aB=0,aD=ay.parentNode,aA=ax.parentNode,az=[ay],aC=[ax];if(!aD||!aA){return ay===o?-1:ax===o?1:aD?-1:aA?1:U?(H(U,ay)-H(U,ax)):0}else{if(aD===aA){return j(ay,ax)}}aE=ay;while((aE=aE.parentNode)){az.unshift(aE)}aE=ax;while((aE=aE.parentNode)){aC.unshift(aE)}while(az[aB]===aC[aB]){aB++}return aB?j(az[aB],aC[aB]):az[aB]===an?-1:aC[aB]===an?1:0};return o};af.matches=function(i,e){return af(i,null,null,e)};af.matchesSelector=function(av,ax){if((av.ownerDocument||av)!==o){v(av)}if(ae.matchesSelector&&!z[ax+" "]&&(!M||!M.test(ax))&&(!f||!f.test(ax))){try{var i=b.call(av,ax);if(i||ae.disconnectedMatch||av.document&&av.document.nodeType!==11){return i}}catch(aw){z(ax,!0)}}return af(ax,o,null,[av]).length>0};af.contains=function(e,i){if((e.ownerDocument||e)!==o){v(e)}return S(e,i)};af.escape=function(e){return(e+"").replace(R,l)};af.error=function(e){throw new Error("Syntax error: "+e)};af.uniqueSort=function(aw){var ax,ay=[],e=0,av=0;s=!ae.detectDuplicates;U=!ae.sortStable&&aw.slice(0);aw.sort(A);if(s){while((ax=aw[av++])){if(ax===aw[av]){e=ay.push(av)}}while(e--){aw.splice(ay[e],1)}}U=null;return aw};d=af.getText=function(ay){var ax,av="",aw=0,e=ay.nodeType;if(!e){while((ax=ay[aw++])){av+=d(ax)}}else{if(e===1||e===9||e===11){if(typeof ay.textContent==="string"){return ay.textContent}else{for(ay=ay.firstChild;ay;ay=ay.nextSibling){av+=d(ay)}}}else{if(e===3||e===4){return ay.nodeValue}}}return av};ab=af.selectors={cacheLength:50,match:W,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[3]=(e[3]||e[4]||e[5]||"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)}},filter:{TAG:function(i){var e=i.toLowerCase();return i==="*"?function(){return true}:function(av){return av.nodeName&&av.nodeName.toLowerCase()===e}},CLASS:function(e){var i=ai[e+" "];return i||(i=new g("(^|"+Q+")"+e+"("+Q+"|$)"))&&ai(e,function(av){return i.test(typeof av.className==="string"&&av.className||typeof av.getAttribute!=="undefined"&&av.getAttribute("class")||"")})},ATTR:function(av,i,e){return function(ax){var aw=af.attr(ax,av);if(aw==null){return i==="!="}if(!i){return true}aw+="";return i==="="?aw===e:i==="!="?aw!==e:i==="^="?e&&aw.indexOf(e)===0:i==="*="?e&&aw.indexOf(e)>-1:i==="$="?e&&aw.slice(-e.length)===e:i==="~="?(" "+aw.replace(E," ")+" ").indexOf(e)>-1:i==="|="?aw===e||aw.slice(0,e.length+1)===e+"-":false}}}};function D(){}D.prototype=ab.filters=ab.pseudos;ab.setFilters=new D();k=af.tokenize=function(ax,aC){var i,ay,aA=[],aB,az,av,e,aw=aj[ax+" "];if(aw){return aC?0:aw.slice(0)}az=ax;av=[];e=ab.preFilter;while(az){if(!i||(ay=m.exec(az))){if(ay){az=az.slice(ay[0].length)||az}av.push((aA=[]))}i=false;if((ay=X.exec(az))){i=ay.shift();aA.push({value:i,type:ay[0].replace(ah," ")});az=az.slice(i.length)}for(aB in ab.filter){if((ay=W[aB].exec(az))&&(!e[aB]||(ay=e[aB](ay)))){i=ay.shift();aA.push({value:i,type:aB,matches:ay});az=az.slice(i.length)}}if(!i){break}}return aC?az.length:az?af.error(ax):aj(ax,av).slice(0)};function O(az,ax,ay){var e=ax.dir,aw=ax.next,av=aw||e,aA=ay&&av==="parentNode",i=y++;return ax.first?function(aD,aC,aB){while((aD=aD[e])){if(aD.nodeType===1||aA){return az(aD,aC,aB)}}return false}:function(aG,aE,aD){var aH,aB,aF,aC=[K,i];if(aD){while((aG=aG[e])){if(aG.nodeType===1||aA){if(az(aG,aE,aD)){return true}}}}else{while((aG=aG[e])){if(aG.nodeType===1||aA){aF=aG[am]||(aG[am]={});aB=aF[aG.uniqueID]||(aF[aG.uniqueID]={});if(aw&&aw===aG.nodeName.toLowerCase()){aG=aG[e]||aG}else{if((aH=aB[av])&&aH[0]===K&&aH[1]===i){return(aC[2]=aH[2])}else{aB[av]=aC;if((aC[2]=az(aG,aE,aD))){return true}}}}}}return false}}function x(e){return e.length>1?function(ay,ax,av){var aw=e.length;while(aw--){if(!e[aw](ay,ax,av)){return false}}return true}:e[0]}function J(av,ay,ax){var aw=0,e=ay.length;for(;aw<e;aw++){af(av,ay[aw],ax)}return ax}function N(e,av,aw,ax,aA){var ay,aD=[],az=0,aB=e.length,aC=av!=null;for(;az<aB;az++){if((ay=e[az])){if(!aw||aw(ay,ax,aA)){aD.push(ay);if(aC){av.push(az)}}}}return aD}function ar(av,i,ax,aw,ay,e){if(aw&&!aw[am]){aw=ar(aw)}if(ay&&!ay[am]){ay=ar(ay,e)}return ap(function(aJ,aG,aB,aI){var aL,aH,aD,aC=[],aK=[],aA=aG.length,az=aJ||J(i||"*",aB.nodeType?[aB]:aB,[]),aE=av&&(aJ||!i)?N(az,aC,av,aB,aI):az,aF=ax?ay||(aJ?av:aA||aw)?[]:aG:aE;if(ax){ax(aE,aF,aB,aI)}if(aw){aL=N(aF,aK);aw(aL,[],aB,aI);aH=aL.length;while(aH--){if((aD=aL[aH])){aF[aK[aH]]=!(aE[aK[aH]]=aD)}}}if(aJ){if(ay||av){if(ay){aL=[];aH=aF.length;while(aH--){if((aD=aF[aH])){aL.push((aE[aH]=aD))}}ay(null,(aF=[]),aL,aI)}aH=aF.length;while(aH--){if((aD=aF[aH])&&(aL=ay?H(aJ,aD):aC[aH])>-1){aJ[aL]=!(aG[aL]=aD)}}}}else{aF=N(aF===aG?aF.splice(aA,aF.length):aF);if(ay){ay(null,aG,aF,aI)}else{ak.apply(aG,aF)}}})}function P(aA){var av,ay,aw,az=aA.length,aD=ab.relative[aA[0].type],aE=aD||ab.relative[" "],ax=aD?1:0,aB=O(function(i){return i===av},aE,true),aC=O(function(i){return H(av,i)>-1},aE,true),e=[function(aH,aG,aF){var i=(!aD&&(aF||aG!==Y))||((av=aG).nodeType?aB(aH,aG,aF):aC(aH,aG,aF));av=null;return i}];for(;ax<az;ax++){if((ay=ab.relative[aA[ax].type])){e=[O(x(e),ay)]}else{ay=ab.filter[aA[ax].type].apply(null,aA[ax].matches);if(ay[am]){aw=++ax;for(;aw<az;aw++){if(ab.relative[aA[aw].type]){break}}return ar(ax>1&&x(e),ax>1&&a(aA.slice(0,ax-1).concat({value:aA[ax-2].type===" "?"*":""})).replace(ah,"$1"),ay,ax<aw&&P(aA.slice(ax,aw)),aw<az&&P((aA=aA.slice(aw))),aw<az&&a(aA))}e.push(ay)}}return x(e)}function n(aw,av){var e=av.length>0,ax=aw.length>0,i=function(aH,aB,aG,aF,aK){var aC,aD,aI,aM=0,aE="0",ay=aH&&[],aN=[],aL=Y,aA=aH||ax&&ab.find.TAG("*",aK),az=(K+=aL==null?1:Math.random()||0.1),aJ=aA.length;if(aK){Y=aB===o||aB||aK}for(;aE!==aJ&&(aC=aA[aE])!=null;aE++){if(ax&&aC){aD=0;if(!aB&&aC.ownerDocument!==o){v(aC);aG=!ao}while((aI=aw[aD++])){if(aI(aC,aB||o,aG)){aF.push(aC);break}}if(aK){K=az}}if(e){if((aC=!aI&&aC)){aM--}if(aH){ay.push(aC)}}}aM+=aE;if(e&&aE!==aM){aD=0;while((aI=av[aD++])){aI(ay,aN,aB,aG)}if(aH){if(aM>0){while(aE--){if(!(ay[aE]||aN[aE])){aN[aE]=V.call(aF)}}}aN=N(aN)}ak.apply(aF,aN);if(aK&&!aH&&aN.length>0&&(aM+av.length)>1){af.uniqueSort(aF)}}if(aK){K=az;Y=aL}return ay};return e?ap(i):i}u=af.compile=function(e,aw){var ax,av=[],az=[],ay=G[e+" "];if(!ay){if(!aw){aw=k(e)}ax=aw.length;while(ax--){ay=P(aw[ax]);if(ay[am]){av.push(ay)}else{az.push(ay)}}ay=G(e,n(az,av));ay.selector=e}return ay};al=af.select=function(e,az,ay,av){var ax,aA=typeof e==="function"&&e,aw=!av&&k((e=aA.selector||e));ay=ay||[];(aA||u(e,aw))(av,az,!ao,ay,!az||az);return ay};ae.sortStable=am.split("").sort(A).join("")===am;ae.detectDuplicates=!!s;v();ae.sortDetached=Z(function(e){return e.compareDocumentPosition(o.createElement("fieldset"))&1});if(!Z(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){B("type|href|height|width",function(i,e){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)})}if(!ae.attributes||!Z(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){B("value",function(i,e){if(i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!Z(function(e){return e.getAttribute("disabled")==null})){B(ag,function(i,e){var av;return i[e]===true?e.toLowerCase():(av=i.getAttributeNode(e))&&av.specified?av.value:null})}t.support=ae;t.sizzle=af})(Dynamsoft.Lib);(function(j){var aa=Array.prototype,t=aa.slice,f=j.doc,U=j.each,d=f.documentElement;var y=20200521;if(j._ui_nodelistExt_ver){if(j.isNumber(j._ui_nodelistExt_ver)&&j._ui_nodelistExt_ver>=y){return}}j._ui_nodelistExt_ver=y;var M=j.support,Q=j.sizzle;var b,S,T,I,r,k,K=f.createElement("div"),Y=f.createElement("div");function p(){var ad,ac;d.appendChild(K);Y.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";b=T=k=false;S=r=true;if(window.getComputedStyle){ac=window.getComputedStyle(Y);b=(ac||{}).top!=="1%";k=(ac||{}).marginLeft==="2px";T=(ac||{width:"4px"}).width==="4px";Y.style.marginRight="50%";S=(ac||{marginRight:"4px"}).marginRight==="4px";ad=Y.appendChild(document.createElement("div"));ad.style.cssText=Y.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";ad.style.marginRight=ad.style.width="0";Y.style.width="1px";r=!parseFloat((window.getComputedStyle(ad)||{}).marginRight);Y.removeChild(ad)}Y.style.display="none";I=Y.getClientRects().length===0;if(I){Y.style.display="";Y.innerHTML="<table><tr><td></td><td>t</td></tr></table>";Y.childNodes[0].style.borderCollapse="separate";ad=Y.getElementsByTagName("td");ad[0].style.cssText="margin:0;border:0;padding:0;display:none";I=ad[0].offsetHeight===0;if(I){ad[0].style.display="";ad[1].style.display="none";I=ad[0].offsetHeight===0}}d.removeChild(K)}if(!Y.style){return}Y.style.cssText="float:left;opacity:.5";M.opacity=Y.style.opacity==="0.5";M.cssFloat=!!Y.style.cssFloat;Y.style.backgroundClip="content-box";Y.cloneNode(true).style.backgroundClip="";M.clearCloneStyle=Y.style.backgroundClip==="content-box";K=document.createElement("div");K.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";Y.innerHTML="";K.appendChild(Y);M.boxSizing=Y.style.boxSizing===""||Y.style.MozBoxSizing===""||Y.style.WebkitBoxSizing==="";j.mix(M,{reliableHiddenOffsets:function(){if(b==null){p()}return I},boxSizingReliable:function(){if(b==null){p()}return T},pixelMarginRight:function(){if(b==null){p()}return S},pixelPosition:function(){if(b==null){p()}return b},reliableMarginRight:function(){if(b==null){p()}return r},reliableMarginLeft:function(){if(b==null){p()}return k}});var i,g,x=(/^margin/),q=/^(top|right|bottom|left)$/,Z=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source,J=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),o=new RegExp("^("+Z+")(.*)$","i");if(window.getComputedStyle){i=function(ae){var ad,ac;ad=j.isFunction(ae.getEL)?ae.getEL():ae;ac=ad.ownerDocument.defaultView;if(!ac||!ac.opener){ac=window}return ac.getComputedStyle(ad)};g=function(aj,ad,ai){var ag,af,ah,ac,ae=aj.style;ai=ai||i(aj);ac=ai?ai.getPropertyValue(ad)||ai[ad]:undefined;if((ac===""||ac===undefined)&&!Q.contains(aj.ownerDocument,aj)){ac=j.style(aj,ad)}if(ai){if(!M.pixelMarginRight()&&J.test(ac)&&x.test(ad)){ag=ae.width;af=ae.minWidth;ah=ae.maxWidth;ae.minWidth=ae.maxWidth=ae.width=ac;ac=ai.width;ae.width=ag;ae.minWidth=af;ae.maxWidth=ah}}return ac===undefined?ac:ac+""}}else{if(d.currentStyle){i=function(ac){return ac.currentStyle};g=function(ai,af,ah){var aj,ad,ac,ae,ag=ai.style;ah=ah||i(ai);ae=ah?ah[af]:undefined;if(ae==null&&ag&&ag[af]){ae=ag[af]}if(J.test(ae)&&!q.test(af)){aj=ag.left;ad=ai.runtimeStyle;ac=ad&&ad.left;if(ac){ad.left=ai.currentStyle.left}ag.left=af==="fontSize"?"1em":ae;ae=ag.pixelLeft+"px";ag.left=aj;if(ac){ad.left=ac}}return ae===undefined?ae:ae+""||"auto"}}}var e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,n=(/<([\w:-]+)/),c=(/^\s+/),u=/<|&#?\w+;/,E=/<tbody/i,G=/^-ms-/,z=/-([\da-z])/gi,A=/^(none|table(?!-c[ea]).+)/,O=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/),L={position:"absolute",visibility:"hidden",display:"block"},D={letterSpacing:"0",fontWeight:"400"},a=["Top","Right","Bottom","Left"];var R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:M.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};var C,X=["Webkit","O","Moz","ms"],H="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";var V=document.createElement("div");if(!V.style){return}C=V.style;M.cssFloat=!!V.style.cssFloat;var B=function(ac,ad){return ad.toUpperCase()};var v={type:j.type,cssHooks:{},htmlPrefilter:function(ac){return ac.replace(e,"<$1></$2>")},nodeName:function(ad,ac){return ad.nodeName&&ad.nodeName.toLowerCase()===ac.toLowerCase()},merge:function(ag,ae){var ac=+ae.length,ad=0,af=ag.length;while(ad<ac){ag[af++]=ae[ad++]}if(ac!==ac){while(ae[ad]!==undefined){ag[af++]=ae[ad++]}}ag.length=af;return ag},camelCase:function(ac){return ac.replace(G,"ms-").replace(z,B)},cssProps:{"float":M.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true}};function N(ac){if(ac in C){return ac}var ae=ac.charAt(0).toUpperCase()+ac.slice(1),ad=X.length;while(ad--){ac=X[ad]+ae;if(ac in C){return ac}}}function m(af,ac){var ad,ag,ae=0,ah=typeof af.getElementsByTagName!=="undefined"?af.getElementsByTagName(ac||"*"):typeof af.querySelectorAll!=="undefined"?af.querySelectorAll(ac||"*"):undefined;if(!ah){ah=[];for(ad=af.childNodes||af;(ag=ad[ae])!=null;ae++){if(!ac||v.nodeName(ag,ac)){ah.push(ag)}else{v.merge(ah,m(ag,ac))}}}return ac===undefined||ac&&v.nodeName(af,ac)?v.merge([af],ah):ah}function W(ae){var ad=H.split("|"),ac=ae.createDocumentFragment();if(ac.createElement){while(ad.length){ac.createElement(ad.pop())}}return ac}function h(ad,af){var ak,ah,aj,am,ao,an,ae,ai=ad.length,ag=W(af),ac=[],al=0;for(;al<ai;al++){ah=ad[al];if(ah||ah===0){if(j.type(ah)==="object"){v.merge(ac,ah.nodeType?[ah]:ah)}else{if(!u.test(ah)){ac.push(af.createTextNode(ah))}else{am=am||ag.appendChild(af.createElement("div"));ao=(n.exec(ah)||["",""])[1].toLowerCase();ae=R[ao]||R._default;am.innerHTML=ae[1]+v.htmlPrefilter(ah)+ae[2];ak=ae[0];while(ak--){am=am.lastChild}if(!M.leadingWhitespace&&c.test(ah)){ac.push(af.createTextNode(c.exec(ah)[0]))}if(!M.tbody){ah=ao==="table"&&!E.test(ah)?am.firstChild:ae[1]==="<table>"&&!E.test(ah)?am:0;ak=ah&&ah.childNodes.length;while(ak--){if(v.nodeName((an=ah.childNodes[ak]),"tbody")&&!an.childNodes.length){ah.removeChild(an)}}}v.merge(ac,am.childNodes);am.textContent="";while(am.firstChild){am.removeChild(am.firstChild)}am=ag.lastChild}}}}if(am){ag.removeChild(am)}al=0;while((ah=ac[al++])){if(ah.tagName!=="SCRIPT"){aj=Q.contains(ah.ownerDocument,ah);ag.appendChild(ah)}}am=null;return ag}var F=function(ah,ag,ai,af){var ae,ad,ac={};U(ag,function(ak,aj){ac[aj]=ah.style[aj];ah.style[aj]=ag[aj]});ae=ai.apply(ah,af||[]);U(ag,function(ak,aj){ah.style[aj]=ac[aj]});return ae};function s(ag,ad,ac,ai,af){var ae=ac===(ai?"border":"content")?4:ad==="width"?1:0,ah=0;for(;ae<4;ae+=2){if(ac==="margin"){ah+=j.css(ag,ac+a[ae],true,af)}if(ai){if(ac==="content"){ah-=j.css(ag,"padding"+a[ae],true,af)}if(ac!=="margin"){ah-=j.css(ag,"border"+a[ae]+"Width",true,af)}}else{ah+=j.css(ag,"padding"+a[ae],true,af);if(ac!=="padding"){ah+=j.css(ag,"border"+a[ae]+"Width",true,af)}}}return ah}function ab(ag,ad,ac){var af=true,ah=ad==="width"?ag.offsetWidth:ag.offsetHeight,ae=i(ag),ai=M.boxSizing&&j.css(ag,"boxSizing",false,ae)==="border-box";if(ah<=0||ah==null){ah=g(ag,ad,ae);if(ah<0||ah==null){ah=ag.style[ad]}if(J.test(ah)){return ah}af=ai&&(M.boxSizingReliable()||ah===ag.style[ad]);ah=parseFloat(ah)||0}return(ah+s(ag,ad,ac||(ai?"border":"content"),af,ae))}function P(ac){var ad=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i");return ad.exec(ac)}function w(ac,ae,af){var ad=o.exec(ae);return ad?Math.max(0,ad[1]-(af||0))+(ad[2]||"px"):ae}function l(ad,ac,ag,al){var am,ae=1,ai=20,ak=al?function(){return al.cur()}:function(){return j.css(ad,ac,"")},ah=ak(),aj=ag&&ag[3]||(v.cssNumber[ac]?"":"px"),af=(v.cssNumber[ac]||aj!=="px"&&+ah)&&P(j.css(ad,ac));if(af&&af[3]!==aj){aj=aj||af[3];ag=ag||[];af=+ah||1;do{ae=ae||".5";af=af/ae;j.style(ad,ac,af+aj)}while(ae!==(ae=ak()/ah)&&ae!==1&&--ai)}if(ag){af=+af||+ah||0;am=ag[1]?af+(ag[1]+1)*ag[2]:+ag[2];if(al){al.unit=aj;al.start=af;al.end=am}}return am}U(["height","width"],function(ac,ad){v.cssHooks[ac]={get:function(ag,af,ae){if(af){return A.test(j.css(ag,"display"))&&ag.offsetWidth===0?F(ag,L,function(){return ab(ag,ac,ae)}):ab(ag,ac,ae)}},set:function(ag,ah,ae){var af=ae&&i(ag);return w(ag,ah,ae?s(ag,ac,ae,M.boxSizing&&j.css(ag,"boxSizing",false,af)==="border-box",af):0)}}});j.style=function(ae,ad,aj,af){if(!ae||ae.nodeType===3||ae.nodeType===8||!ae.style){return}var ah,ai,ak,ag=v.camelCase(ad),ac=ae.style;ad=v.cssProps[ag]||(v.cssProps[ag]=N(ag)||ag);ak=v.cssHooks[ad]||v.cssHooks[ag];if(aj!==undefined){ai=typeof aj;if(ai==="string"&&(ah=P(aj))&&ah[1]){aj=l(ae,ad,ah);ai="number"}if(aj==null||aj!==aj){return}if(ai==="number"){aj+=ah&&ah[3]||(v.cssNumber[ag]?"":"px")}if(!M.clearCloneStyle&&aj===""&&ad.indexOf("background")===0){ac[ad]="inherit"}if(!ak||!("set" in ak)||(aj=ak.set(ae,aj,af))!==undefined){ac[ad]=aj}}else{if(ak&&"get" in ak&&(ah=ak.get(ae,false,af))!==undefined){return ah}return ac[ad]+""}};j.css=function(ai,ag,ad,ah){var af,aj,ac,ae=v.camelCase(ag);ag=v.cssProps[ae]||(v.cssProps[ae]=N(ae)||ae);ac=v.cssHooks[ag]||v.cssHooks[ae];if(ac&&"get" in ac){aj=ac.get(ai,true,ad)}if(aj===undefined){aj=g(ai,ag,ah)}if(aj==="normal"&&ag in D){aj=D[ag]}if(ad===""||ad){af=parseFloat(aj);return ad===true||isFinite(af)?af||0:aj}return aj};j.parseHTML=function(ae,ad){if(!ae||typeof ae!=="string"){return[]}if(typeof ad==="boolean"){ad=false}ad=ad||document;var ac=O.exec(ae);if(ac){return[ad.createElement(ac[1])]}ac=h([ae],ad);return v.merge([],ac.childNodes)}})(Dynamsoft.Lib);(function(){if(Dynamsoft.navInfoSync.bIE && Dynamsoft.navInfoSync.IEVersion <= 9)return; 
/*! Date: 05/19/2021 09:38:38 */
!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=6)}([function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"f",(function(){return o})),i.d(e,"d",(function(){return s})),i.d(e,"e",(function(){return a})),i.d(e,"b",(function(){return u})),i.d(e,"a",(function(){return h}));var n="undefined"!=typeof window,r=(n&&window,!!n&&window.document.documentElement,{CLICK:"click",KEYDOWN:"keydown",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",CHANGE:"change",SCROLL:"scroll",CONTEXTMENU:"contextmenu",RESIZE:"resize"}),o={IMAGE_SELECTED:"imageSelected",PAGE_CLICK:"click",PAGE_MOUSE_DOWN:"mousedown",PAGE_MOUSE_MOVE:"mousemove",PAGE_MOUSE_UP:"mouseup",PAGE_MOUSE_OVER:"mouseover",PAGE_MOUSE_OUT:"mouseout",PAGE_DOUBLE_CLICK:"dblclick",PAGE_RIGHT_CLICK:"rightclick",PAGE_CONTEXTMENU:"contextmenu",DRAG_START:"dragstart",DRAG_MOVE:"dragmove",DRAG_DONE:"dragdone",KEY_DOWN:"keydown",KEY_UP:"keyup",RESIZE:"resize",TOP_PAGE_CHANGED:"topPageChanged",BUFFER_CHANGED:"bufferChanged",THUMBNAIL_STRETCH:"resize",REMOVE_PAGE:"removePage",FILE_KEY_UP:"fileKeyUp",FILE_LIST_CLICK:"fileListClick",FILE_LIST_RIGHT_CLICK:"fileListRightClick",TAG_KEY_UP:"tagKeyUp",TAG_LIST_CLICK:"tagListClick",TAG_LIST_RIGHT_CLICK:"tagListRightClick",PAGE_AREA_SELECTED:"pageAreaSelected",PAGE_AREA_UNSELECTED:"pageAreaUnselected",VIEWER_PAGE_RENDERED:"pageRendered",DOCUMENT_KEY_UP:"onDocumentKeyUp",DOCUMENT_POINTER_UP:"onDocumentPointerUp",DOCUMENT_POINTER_MOVE:"onDocumentPointerMove",DOCUMENT_CLICK:"onDocumentClick",SIDEBAR_CLICK:"onSidebarClick",FILE_DROP:"onDrop"},s={APPEND_SYNC_DROP:"_appendSyncDrop",UPDATE_UI_SETTING:"_updateUISetting",UPDATE_FOCUS:"_updateFocus",CANVAS_VISIBILITY_CHANGED:"_canvasVisibilityChanged",SET_SELECTED_INDEXES:"_SetSelectedIndexes",DOCUMENT_UP:"_documentUp",DOCUMENT_MOVE:"_documentMove",DISPLAYED_IMAGE_CHANGED:"_displayedImageChanged",REORDER_THUMBNAIL:"_onReOrderThumbnail",CHANGE_THUMBNAIL_VIEW_PROP:"_changeThumbnailViewProp",UPDATE_INNER_THUMBNAIL_PAGE:"_updateInnerThumbnailPage",ERROR:"_updateErrorMessage",LOG:"_updateLogMessage",CLEAR_SLT_BOX:"_clearSltBox",DIRECTORY_CHANGED:"_DirectoryChanged",BIND_SLIDE_COMPONENT:"_bindSlideComponent",UNBIND_SLIDE_COMPONENT:"_unbindSlideComponent",BIND_CANVAS:"_bindCanvas",UNBIND_CANVAS:"_unbindCanvas",SET_CANVAS_SIZE:"_setCanvasSize",CANVAS_TOUCH_START:"_canvasTouchstart",CANVAS_TOUCH_MOVE:"_canvasTouchmove",CANVAS_TOUCH_END:"_canvasTouchend",CANVAS_MOUSE_DOWN:"_canvasMousedown",CANVAS_MOUSE_UP:"_canvasMouseup",CANVAS_MOUSE_MOVE:"_canvasMousemove",CANVAS_MOUSE_OVER:"_canvasMouseOver",CANVAS_MOUSE_OUT:"_canvasMouseOut",CANVAS_WHEEL:"_canvasWheel",CANVAS_SCROLL:"_canvasScroll",CANVAS_CLICK:"_canvasClick",CANVAS_DOUBLE_CLICK:"_canvasDoubleClick",CANVAS_RIGHT_CLICK:"_canvasRightClick",CANVAS_KEY_DOWN:"_canvasKeyDown",CANVAS_KEY_UP:"_canvasKeyUp",CANVAS_RESIZE:"_canvasResize",CANVAS_DRAG_START:"_canvasDragStart",CANVAS_DRAG_MOVE:"_canvasDragMove",CANVAS_DRAG_DONE:"_canvasDragDone",CANVAS_DEFAULT_CURSOR:"_canvasDefaultCursor",SHOW_CANVAS_LOADING:"_showCanvasLoading",DB_SAVE_OK:"_addDataToDBSuccess",DB_SAVE_FAILED:"_addDataToDBFailed",AFTER_RENDER:"_afterRender",CURRENT_CHANGED:"_currentChanged"},a={VIEWER_RESIZE:"_viewerResizeUI",VIEWER_CLICK:"_mouseClickUI",VIEWER_RIGHT_CLICK:"_viewerRightClickUI",VIEWER_MOVE:"_mouseMoveUI",SHOW_LATEST_PAGE:"_showLatestPage",UPDATE_PAGES_LAYOUT:"_updatePagesLayout",DOCUMENT_POINTER_MOVE:"_documentPointerMoveUI",DOCUMENT_POINTER_UP:"_documentPointerUpUI",DOCUMENT_KEY_DOWN:"_documentKeyDownUI",DOCUMENT_KEY_UP:"_documentKeyUpUI",DOCUMENT_CLICK:"_documentClickUI",SIDEBAR_CLICK:"_sideBarClickUI",SIDEBAR_STRETCH_START:"_sidebarStretchStartUI",FILE_LIST_CLICK:"_fileListClickUI",FILE_LIST_RIGHT_CLICK:"_fileListRightClickUI",FILE_KEY_UP:"_fileListKeyUpUI",ADD_NEW_FOLDER:"_addNewFolderUI",FILE_REFRESH:"_directoryRefreshUI",FILE_SELECTED:"_fileSelectedUI",TAG_LIST_CLICK:"_tagListClickUI",TAG_LIST_RIGHT_CLICK:"tagListRightClickUI",TAG_KEY_UP:"_tagKeyUpUI",ADD_NEW_TAG:"_addNewTagUI",TAG_REFRESH:"_tagRefreshUI",TAG_SELECTED:"_tagSelectedUI",OPEN_DEFAULT_TAG:"_openDefaultTagUI",IMAGE_SELECTED:"_imageSelectedUI",THUMBNAIL_CHANGED:"_thumbnailChangedUI",UPDATE_THB_ITEM:"_updateThbItem",UPDATE_THUMBNAIL_PROP:"_updateThumbnailPropUI",SCROLL_TO:"_scrollToUI",SET_VIEW_MODE:"_setViewModeUI",MERGE_DISPLAYED_UIDS:"_mergeDisplayedUidsUi",PAGER_BLUR:"_pagerBlurUI",PAGER_CHANGED:"_pagerChangedUI",SET_SCROLLER_SIZE:"_setScrollerSizeUI",CHANGE_CANVAS_CURSOR:"_changeCanvasCursorUI",TAB_CHANGED:"_tabChangedUI",TAB_LIST_CLICK:"_tabListClickUI",CLOSE_SAVE_SETTING_BOX:"_closeSaveSettingBoxUI",CUSTOM_BUTTON_CLICK:"_customButtonClickUI"},u={UPDATE_FOR_VIEWER:"_updateForViewer",LOAD_TO_VIEWER:"_loadToViewer",OPEN_TO_VIEWER:"_openToViewer",LOAD_PAGE:"_loadPage",LOAD_PAGE_OK:"_loadPageOk",SET_CURRENT_INDEX:"_setCurrentIndex",REMOVE_VIEWER_UID:"_removeViewerUid",GOTO_PAGE:"_gotoPage",CHANGE_PAGE:"_changePage",REORDER_PAGE:"_reorderPage",REMOVE_PAGE:"_removePage",OVERLAY_RECTANGLE:"_overlayRectangle",EDIT:"_editPage",UPDATE_THUMBNAIL_PAGE:"_updateThumbnailPage",REMOVE_FROM_TAG:"_removeFromTag",LOAD_TAG:"_loadToTag",OPEN_TAG:"_openTag",REMOVE_PAGE_TAG:"_removePageTag",ADD_PAGE_TAG:"_addPageTag",EMPTY_TAG:"_emptyTag",RENAME_TAG:"_renameTag",TAG_CHANGED:"_tagChanged",APPEND_SYNC:"_appendSync",UPDATE_SYNC:"_updateSync",REMOVE_FROM_FILE:"_removeFromFile",LOAD_FILE:"_loadToFile",APPEND_TO_OPEN_TAG:"_appendToOpenTag",APPEND_TO_OPEN_ALL:"_appendToOpenAll",REMOVE_FROM_ALL:"_removeFromAll"},h={OK:{code:0,message:"ok."},PARAM_TYPE:{code:80001,message:"The parameter type is wrong."},PARAMETER_RANGE:{code:80002,message:"The parameter is out of range."},IMG_NOT_EXIST:{code:80003,message:"The image does not exist."},IMG_LOAD_FAILED:{code:80004,message:"The image load failed."},BACK_TO_TOP:{code:80005,message:"The current folder is root folder."},FILE_NOT_EXIST:{code:80006,message:"The file does not exist."},IMG_HAVE_EXIST:{code:80007,message:"The image has existed."},EMPTY_IN_ARRAY:{code:80008,message:"There is some empty element in array."},TAG_NOT_EXIST:{code:80009,message:"Tag does not exist."},TAG_HAVE_EXIST:{code:80010,message:"The tag already exists."},ELEMENT_NOT_EXIST:{code:80011,message:"Element does not exist."},PAGE_NOT_EXIST:{code:80012,message:"Page does not exist."},PARAMETER_INVALID:{code:80013,message:"The parameter is invalid."},URL_INVALID:{code:80014,message:"The url is invalid."},FOLDER_NOT_EXIST:{code:80015,message:"The folder does not exist."},COLOR_INVALID:{code:80016,message:"The color is invalid."},IMG_STORAGE_FAILED:{code:80017,message:"Failed to save image to database."},IMG_REMOVE_FAILED:{code:80018,message:"Failed to remove image from database by uid."},PATH_ERROR:{code:80019,message:"The path of file or folder does not exist."},BROWSER_NOT_SUPPORT:{code:80020,message:"Your browser does not support full screen."},SIZE_INVALID:{code:80021,message:"The size is invalid."},OPERATION_MODE_ERROR:{code:80022,message:"The operation mode is error."},BORDER_INVALID:{code:80023,message:"The border is invalid."},CAMERA_CLASS_REQUIRE:{code:80025,message:"The camera class is required."},VIEW_UI_REQUIRE:{code:80026,message:"The constructor of view ui is required."},WEBCAM_LICENSE_INVALID:{code:80027,message:"The license of webcam is invalid."},CAMERA_EXIST:{code:80028,message:"The video is shown."},CAMERA_CLASS_INVALID:{code:80029,message:"The camera class is invalid."},META_DATA_NOT_EXIST:{code:80030,message:"The metadata is not exist."},CAMERA_NOT_EXIST:{code:80031,message:"The video is not shown."}}},function(t,e,i){"use strict";function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function r(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++)for(var i=e+1;i<t.length;i++)t[e]===t[i]&&(t.splice(i,1),i--);return t}}function o(t){return"[object Object]"===Object.prototype.toString.call(t)}function s(t){return"function"==typeof t}function a(t){return"string"==typeof t}function u(t){var e=String(t);return!!/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(e)}function h(t){return"number"==typeof t&&!isNaN(t)}function c(t){return"[object Boolean]"===Object.prototype.toString.call(t)}function l(t){var e=document.createElement("span");return e.style.background=t,!!e.style.background}function f(t){var e=document.createElement("span");return e.style.border=t,!(!e.style.border&&""!==t)}function p(){return"ontouchstart"in document.documentElement}function _(){return document.documentMode!==undefined}function d(t){return t instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(t)}function g(t,e){if(a(e))t.style.cssText=e;else for(var i in e)t.style[i]=e[i]}function v(t,e,i,n){if(t)return t.addEventListener(e,i,n),function(){t.removeEventListener(e,i)}}function m(t,e){for(var i in t)e[i]===undefined?e[i]=t[i]:o(t[i])?m(t[i],e[i]):e[i]=t[i]}function y(t,e){for(var i in t){var n=t[i],r=e[i];r===undefined?e[i]=t[i]:c(n)&&o(r)?r.visibility=n:o(n)&&o(r)?y(t[i],e[i]):e[i]=t[i]}}function b(t,e){var i=this,n=0,r=null;return function(){var o=+new Date;o-n<e?(clearTimeout(r),r=setTimeout((function(){n=o,t.apply(i)}),e)):(n=o,t.apply(i))}}function E(t){t&&t.stopPropagation?t.stopPropagation():t&&(t.cancelBubble=!0)}function T(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function C(t){return""===t||t===undefined?null:document.getElementById(t)}function P(){var t=window.document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||!1}function w(t){return t.requestFullscreen?(t.requestFullscreen(),!0):t.mozRequestFullScreen?(t.mozRequestFullScreen(),!0):t.msRequestFullscreen?(t.msRequestFullscreen(),!0):t.oRequestFullscreen?(t.oRequestFullscreen(),!0):t.webkitRequestFullscreen?(t.webkitRequestFullScreen(),!0):(alert("Your browser does not support full screen!"),!1)}function A(){var t=window.document;return t.exitFullScreen?(t.exitFullScreen(),!0):t.mozCancelFullScreen?(t.mozCancelFullScreen(),!0):t.webkitExitFullscreen?(t.webkitExitFullscreen(),!0):t.msExitFullscreen?(t.msExitFullscreen(),!0):void 0}function O(t){for(var e=t.parentNode.children,i=0;i<e.length;i++)if(e[i]===t)return i}function M(t,e){for(var i=t.parentNode,n=i.children,r=0,o=0;o<n.length;o++){var a=n[o];if(s(e)){if(!e(a,i))continue;if(a===t)return r;r++}else if(a===t)return o}return-1}function S(t,e){var i=e.parentNode;i.lastChild==e?i.appendChild(t):R(t,e.nextSibling,i)}function R(t,e,i){e===undefined?i.appendChild(t):i.insertBefore(t,e)}function x(t){var e=Math.random().toString(35).substr(2);return e.length<11&&(e+=Math.random().toString(35).substr(2)),t=Math.max(Math.min(Math.round(t),11),8),e=e.substr(0,t)}function I(t){var e;if(n(t))e=[];else{if(!o(t))return t;e={}}for(var i in t){var r=t[i];n(t)||o(t)?e[i]=I(r):e[i]=r}return e}function D(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame,i=!!e;if(e&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(e.toString())&&(i=!1),i)return e(t);var n={},r=1,o=null,s=+new Date;return function(t,e){var i=r++;return n[i]=t,null===o&&(o=setInterval((function(){var t=+new Date,e=n;for(var i in n={},0,e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i](t),s=t);t-s>2500&&(clearInterval(o),o=null)}),1e3/60)),i}(t)}function k(){var t=window;return t?t.devicePixelRatio?t.devicePixelRatio:t.screen.deviceXDPI&&t.screen.logicalXDPI?t.screen.deviceXDPI/t.screen.logicalXDPI:1:1}function j(t){var e=new Date,i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}function N(t){var e=Object.prototype.toString.call(t),i=window.URL||window.webkitURL;return"[object Blob]"===e?{type:"object",data:i.createObjectURL(t)}:/\[object ArrayBuffer\]|\[object \w+Array\]/.test(e)?{type:"object",data:i.createObjectURL(new Blob([t]))}:(/data:image\/\w+;base64/.test(t),{type:"string",data:t})}function L(t){var e=window.URL||window.webkitURL;if(/^blob:/.test(t))return e.revokeObjectURL(t)}function B(t,e,i,n,r){var o=t+i/2,s=e+n/2,a=U(t,e,o,s,r),u=U(t+i,e,o,s,r),h=U(t+i,e+n,o,s,r),c=U(t,e+n,o,s,r),l=[u.x,a.x,c.x,h.x].sort((function(t,e){return t-e})),f=[u.y,a.y,c.y,h.y].sort((function(t,e){return t-e}));return{x:l[0],y:f[0],width:l[3]-l[0],height:f[3]-f[0]}}function U(t,e,i,n,r){return r=r/180*Math.PI,{x:(t-i)*Math.cos(r)-(e-n)*Math.sin(r)+i,y:(t-i)*Math.sin(r)+(e-n)*Math.cos(r)+n}}i.d(e,"l",(function(){return n})),i.d(e,"J",(function(){return r})),i.d(e,"v",(function(){return o})),i.d(e,"r",(function(){return s})),i.d(e,"x",(function(){return a})),i.d(e,"w",(function(){return u})),i.d(e,"u",(function(){return h})),i.d(e,"m",(function(){return c})),i.d(e,"o",(function(){return l})),i.d(e,"n",(function(){return f})),i.d(e,"t",(function(){return p})),i.d(e,"s",(function(){return _})),i.d(e,"p",(function(){return d})),i.d(e,"F",(function(){return g})),i.d(e,"a",(function(){return v})),i.d(e,"z",(function(){return m})),i.d(e,"A",(function(){return y})),i.d(e,"H",(function(){return b})),i.d(e,"G",(function(){return E})),i.d(e,"B",(function(){return T})),i.d(e,"i",(function(){return C})),i.d(e,"q",(function(){return P})),i.d(e,"y",(function(){return w})),i.d(e,"e",(function(){return A})),i.d(e,"g",(function(){return O})),i.d(e,"h",(function(){return M})),i.d(e,"j",(function(){return S})),i.d(e,"k",(function(){return R})),i.d(e,"I",(function(){return x})),i.d(e,"c",(function(){return I})),i.d(e,"C",(function(){return D})),i.d(e,"d",(function(){return k})),i.d(e,"f",(function(){return j})),i.d(e,"b",(function(){return N})),i.d(e,"D",(function(){return L})),i.d(e,"E",(function(){return B}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},r=function(){function t(){this._events={}}return t.prototype.on=function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},t.prototype.emit=function(t){for(var e,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var o=this._events[t];if(!o||0===o.length)return!1;for(var s=o.length,a=0;a<s;a++)null===(e=o[a])||void 0===e||e.call.apply(e,n([null],i))},t.prototype.off=function(t,e){var i=this._events[t];if(!i)return!1;if(e)for(var n=i.length,r=0;r<n;r++){var o=i[r];o===e&&i.splice(r,1),o=null}else i&&(i.length=0);i=null},t}()},function(t,e,i){"use strict";var n=i(1),r=function(){function t(t){var e=this;this.uid=null,this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.dpr=1,this.uid=Object(n.I)(11),Object.keys(t).forEach((function(i){e[i]=t[i]})),this._initBox()}return t.prototype.getRect=function(){if("free"===this.mode)return null;var t=this._getMaxPoint(),e=t.minX,i=t.maxX,n=t.minY,r=t.maxY;return{x:Math.floor(e),y:Math.floor(n),width:Math.floor(i-e),height:Math.floor(r-n)}},t.prototype._initBox=function(){this.midpoints=this._calcMidpoint(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this._calcSlopeRatio(this.vertexes)},t.prototype._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},t.prototype.checkPointPosition=function(t){var e=this._getMaxPoint(),i=e.minX,n=e.maxX,r=e.minY,o=e.maxY,s=this.probePoints[2*t],a=this.probePoints[2*t+1];return t<4?s===n&&a===o?"se":s===n&&a===r?"ne":s===i&&a===r?"nw":s===i&&a===o?"sw":null:s===n?"e":a===o?"s":s===i?"w":a===r?"n":null},t.prototype.onStartHandler=function(t,e,i){var n=this.isBoxSelected(t,e);i!==undefined&&(n=i),null!==n&&(this._startX=t,this._startY=e,this._lastX=t,this._lastY=e,-1===n?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=n,this.isMoveBox=!1))},t.prototype.onMoveHandler=function(t,e,i){if(this.isPointSelected||this.isMoveBox){var n=this.probePoints.slice();if(this.isPointSelected){var r=this.activeProbePoint;i!==undefined&&(r=i),n="normal"===this.mode?this._movePointNormal(n,r,t,e):this._movePointFree(n,r,t,e),this.probePoints=n.slice(),this._checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){var o=t-this._lastX,s=e-this._lastY;if(0===o&&0===s)return;n=this._moveBox(n,o,s),this.probePoints=n.slice()}var a=this._calcMidpoint(this.probePoints);this.probePoints=this.probePoints.slice(0,8).concat(a),this.midpoints=a,this._lastX=t,this._lastY=e}},t.prototype.onEndHandler=function(){this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var t=this._startX,e=this._startY;this._startX=0,this._startY=0;var i=this._lastX,n=this._lastY;if(this.isPointSelected||this.isMoveBox){this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null;var r=this._checkRectConvexity(this.probePoints);if(t===i&&e===n||!r)return this.probePoints=this.vertexes.slice().concat(this.midpoints),void(this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4));this.vertexes=this.probePoints.slice(0,8),this.midpoints=this.probePoints.slice(8,16)}},t.prototype._checkEdge=function(t,e){return t>=0&&t<=this.width&&e>=0&&e<this.height},t.prototype._movePointNormal=function(t,e,i,n){i=Math.max(0,Math.min(this.width,i)),n=Math.max(0,Math.min(this.height,n));var r=0,o=0;if(this.keepAspectRatio){var s=this._getMaxPoint(),a=s.minX,u=s.maxX,h=s.minY,c=s.maxY,l=this.checkPointPosition(e),f=(u-a)/(c-h);0===f||f===Infinity||f===-Infinity||isNaN(f)?f=this._lastWhr:this._lastWhr=f,r=0,o=0;var p="width";if(e<4){if(r=i-t[2*e],o=n-t[2*e+1],0===r||0===o)return t;p="width"}else{var _=e-4;if("e"===l?(e=(_+1)%4,p="width"):"s"===l?(e=_,p="height"):"w"===l?(e=_,p="width"):"n"===l&&(e=(_+1)%4,p="height"),r=i-t[2*_],o=n-t[2*_+1],0===r||0===o)return t}"height"===p?(r=o*f,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(r=-r)):(o=r/f,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(o=-o));var d=t[2*e]+r,g=t[2*e+1]+o;d<0?(r=0-t[2*e],o=0):d>this.width?(r=this.width-t[2*e],o=0):g<0?(o=0-t[2*e+1],r=0):g>this.height&&(o=this.height-t[2*e+1],r=0),t[2*e]+=r,t[2*e+1]+=o;v=(e+1)%4,m=(e+3)%4;e%2?(t[2*v]+=r,t[2*m+1]+=o):(t[2*v+1]+=o,t[2*m]+=r)}else if(e<4){if(r=i-t[2*e],o=n-t[2*e+1],0===r&&0===o)return t;t[2*e]=i,t[2*e+1]=n;var v=(e+1)%4,m=(e+3)%4;e%2?(t[2*v]=i,t[2*m+1]=n):(t[2*v+1]=n,t[2*m]=i)}else{var y=e-4,b=this.slopeRatio[y%4];0===b?(t[(2*y+3)%8]=n,t[(2*y+1)%8]=n):b!==Infinity&&b!==-Infinity||(t[(2*y+2)%8]=i,t[(2*y+0)%8]=i)}return t},t.prototype._movePointFree=function(t,e,i,n){if(i=Math.max(0,Math.min(this.width,i)),n=Math.max(0,Math.min(this.height,n)),e<4){var r=i-t[2*e],o=n-t[2*e+1];if(0===r&&0===o)return t;t[2*e]=i,t[2*e+1]=n}return t},t.prototype._moveBox=function(t,e,i){if("normal"===this.mode){var n=Math.min(t[0],t[2],t[4],t[6]),r=Math.max(t[0],t[2],t[4],t[6]),o=Math.min(t[1],t[3],t[5],t[7]),s=Math.max(t[1],t[3],t[5],t[7]);n+e<0&&(e=-n),r+e>this.width&&(e=this.width-r),o+i<0&&(i=-o),s+i>this.height&&(i=this.height-s);for(var a=0;a<4;a++)t[2*a]+=e,t[2*a+1]+=i}return t},t.prototype._isPointOnBox=function(t,e){if("normal"===this.mode){var i=this._getMaxPoint(),n=i.minX,r=i.maxX,o=i.minY,s=i.maxY;return t>=n&&t<=r&&e>=o&&e<=s}return!1},t.prototype.isBoxSelected=function(t,e){var i=this._isPointOnBox(t,e),n=this.isCtrlPointSelected(t,e);return null!==n?n:i?-1:null},t.prototype.isCtrlPointSelected=function(t,e){var i=this.sensorRadius/this.zoom,n=this._getMaxPoint(),r=n.minX,o=n.maxX,s=n.minY,a=n.maxY,u=Math.min(Math.max(i,.1*(o-r)),3*i)*this.dpr,h=Math.min(Math.max(i,.1*(a-s)),3*i)*this.dpr,c=8;"free"===this.mode&&(c=4);for(var l=0;l<c;l++){var f=this.probePoints[2*l],p=this.probePoints[2*l+1];if(t<=f+u&&t>=f-u&&e<=p+h&&e>=p-h&&t>=0&&t<=this.width&&e>=0&&e<=this.height)return l}return null},t.prototype._checkRectConvexity=function(t){var e=(t[6]-t[0])*(t[3]-t[1])-(t[7]-t[1])*(t[2]-t[0]),i=(t[0]-t[2])*(t[5]-t[3])-(t[1]-t[3])*(t[4]-t[2]),n=(t[2]-t[4])*(t[7]-t[5])-(t[3]-t[5])*(t[6]-t[4]),r=(t[4]-t[6])*(t[1]-t[7])-(t[5]-t[7])*(t[0]-t[6]);if(e*i*n*r<0)return!1;var o=t.slice().concat(t.slice(0,2));if(this.slopeRatio.length)for(var s=0;s<2;s++){if(this.slopeRatio[s]!==this.slopeRatio[s+2])if(this._calcIntersection(o.slice(2*s,2*s+2),o.slice(2*s+2,2*s+4),o.slice(2*s+4,2*s+6),o.slice(2*s+6,2*s+8)))return!1}return e*i*n*r>0},t.prototype._calcMidpoint=function(t){for(var e=t.slice(0,8).concat(t[0],t[1]),i=[],n=0;n<4;n++){var r=(e[2*n]+e[2*n+2])/2,o=(e[2*n+1]+e[2*n+3])/2;i.push(r,o)}return i},t.prototype._calcSlopeRatio=function(t){for(var e=[],i=null,n=t.slice(0,8).concat(t[0],t[1]),r=0;r<4;r++)i=n[2*r+3]-n[2*r+1]==0&&n[2*r+2]-n[2*r]==0?0:(n[2*r+3]-n[2*r+1])/(n[2*r+2]-n[2*r]),e.push(i);return e},t.prototype._calcIntersection=function(t,e,i,n){if(this._isRectCross(t,e,i,n)&&this._isLineSegmentCross(t,e,i,n)){var r,o=void 0,s=void 0;if(o=(n[0]-i[0])*(t[1]-e[1])-(e[0]-t[0])*(i[1]-n[1]),s=(t[1]-i[1])*(e[0]-t[0])*(n[0]-i[0])+i[0]*(n[1]-i[1])*(e[0]-t[0])-t[0]*(e[1]-t[1])*(n[0]-i[0]),0===o||0===s){var a=this._getLine(t,e),u=this._getLine(i,n),h=a[0],c=a[1],l=u[0],f=u[1];if(c[0]===l[0]&&c[1]===l[1])return c;if(h[0]===f[0]&&h[1]===f[1])return h;if(this._isOnLine(c,u)&&this._isOnLine(l,a))return[l,c];if(this._isOnLine(h,u)&&this._isOnLine(f,a))return[h,f];if(this._isOnLine(h,u)&&this._isOnLine(c,u))return[h,c];if(this._isOnLine(l,u)&&this._isOnLine(f,u))return[l,f]}return r=s/o,o=(t[0]-e[0])*(n[1]-i[1])-(e[1]-t[1])*(i[0]-n[0]),[r,(s=e[1]*(t[0]-e[0])*(n[1]-i[1])+(n[0]-e[0])*(n[1]-i[1])*(t[1]-e[1])-n[1]*(i[0]-n[0])*(e[1]-t[1]))/o]}return!1},t.prototype._getLine=function(t,e){return t[0]===e[0]?t[1]<e[1]?[t,e]:[e,t]:t[0]<e[0]?[t,e]:[e,t]},t.prototype._isOnLine=function(t,e){return e[0][0]===e[1][0]?t[1]>=e[0][1]&&t[1]<=e[1][1]:t[0]>=e[0][0]&&t[0]<=e[1][0]},t.prototype._isRectCross=function(t,e,i,n){var r=Math.min,o=Math.max;return r(t[0],e[0])<=o(i[0],n[0])&&r(i[0],n[0])<=o(t[0],e[0])&&r(t[1],e[1])<=o(i[1],n[1])&&r(i[1],n[1])<=o(t[1],e[1])},t.prototype._isLineSegmentCross=function(t,e,i,n){var r,o;return!(((r=t[0]*(i[1]-e[1])+e[0]*(t[1]-i[1])+i[0]*(e[1]-t[1]))^(o=t[0]*(n[1]-e[1])+e[0]*(t[1]-n[1])+n[0]*(e[1]-t[1])))>=0&&0!==r&&0!==o)&&!(((r=i[0]*(t[1]-n[1])+n[0]*(i[1]-t[1])+t[0]*(n[1]-i[1]))^(o=i[0]*(e[1]-n[1])+n[0]*(i[1]-e[1])+e[0]*(n[1]-i[1])))>=0&&0!==r&&0!==o)},t}();i.d(e,"a",(function(){return o}));var o=function(){function t(t,e){this._activeBoxId=null,this._startX=null,this._startY=null,this._addNewFlag=null,this._drawingFlag=!1,this.cropBoxes=[],this.width=0,this.height=0,this.zoom=1,this.aspectRatio=0,this.keepAspectRatio=!1,this.mouseDown=!1,this.unselectedCallback=null,this.selectedCallback=null,this.width=t,this.height=e}return t.prototype.setKeepAspectRatio=function(t){this.keepAspectRatio=t,this._drawingFlag||this.cropBoxes.forEach((function(e){e.keepAspectRatio=t}))},t.prototype.setAspectRatio=function(t){this.aspectRatio=t},t.prototype.setZoom=function(t){this.zoom=t,this.cropBoxes.forEach((function(e){e.zoom=t}))},t.prototype.setPageSize=function(t,e){this.width=t,this.height=e},t.prototype.getRectArr=function(){var t=[];return this.cropBoxes.forEach((function(e,i){var n=Object.assign({index:i},e.getRect());t.push(n)})),t},t.prototype.clear=function(){var t;this.cropBoxes.length>0&&(null===(t=this.unselectedCallback)||void 0===t||t.call(this)),this.cropBoxes=[]},t.prototype.addFreeBox=function(t){var e=Object(n.d)(),i=new r({vertexes:t.slice(),width:this.width,height:this.height,mode:"free",dpr:e});return this.cropBoxes.push(i),i},t.prototype.addBox=function(t,e){var i=Object(n.d)(),o=new r({vertexes:t.slice(),width:this.width,height:this.height,type:e,mode:"normal",aspectRatio:this.aspectRatio,keepAspectRatio:this.keepAspectRatio,zoom:this.zoom,dpr:i});return this.cropBoxes.push(o),o},t.prototype.removeBox=function(t){return t===undefined&&this.clear(),!(t<0||t>=this.cropBoxes.length)&&(this.cropBoxes.splice(t,1),!0)},t.prototype.getBoxByUid=function(t){for(var e=this.cropBoxes.length,i=0;i<e;i++)if(this.cropBoxes[i].uid===t)return this.cropBoxes[i];return null},t.prototype.onStartHandler=function(t,e,i){this._startX=t,this._startY=e,this.mouseDown=!0;var n=this.checkSelect(t,e);if(null===n)return i||this.clear(),void(this._activeBoxId=null);this._activeBoxId=this.cropBoxes[n].uid,this.getBoxByUid(this._activeBoxId).onStartHandler(t,e)},t.prototype.onMoveHandler=function(t,e,i){if(this.mouseDown){var n=null,r=t-this._startX,o=e-this._startY,s=null,a=2/this.zoom;!this._activeBoxId&&t-this._startX<-a&&e-this._startY<-a?(s=0,this.aspectRatio>0&&(o=r/this.aspectRatio)):!this._activeBoxId&&t-this._startX>a&&e-this._startY<-a?(s=1,this.aspectRatio>0&&(o=-r/this.aspectRatio)):!this._activeBoxId&&t-this._startX>a&&e-this._startY>a?(s=2,this.aspectRatio>0&&(o=r/this.aspectRatio)):!this._activeBoxId&&t-this._startX<-a&&e-this._startY>a&&(s=3,this.aspectRatio>0&&(o=-r/this.aspectRatio));var u=[t,this._startY+o,this._startX,this._startY+o,this._startX,this._startY,t,this._startY],h=[this._startX,this._startY,this._startX,this._startY+o,t,this._startY+o,t,this._startY];if(null!==s){for(var c=[],l=0;l<4;l++)s%2?(c.push(h[2*(s+l)%8]),c.push(h[(2*(s+l)+1)%8])):(c.push(u[2*(s+l)%8]),c.push(u[(2*(s+l)+1)%8]));return n=this.addBox(c,["topLeft","topRight","bottomRight","bottomLeft"][s]),this.aspectRatio>0?n.keepAspectRatio=!0:n.keepAspectRatio=!1,this._drawingFlag=!0,this._addNewFlag=this.keepAspectRatio,this._activeBoxId=n.uid,n.onStartHandler(this._startX,this._startY,s),n.onMoveHandler(t,e,s),void(s=null)}this._activeBoxId&&(n=this.getBoxByUid(this._activeBoxId)),n&&n.onMoveHandler(t,e)}},t.prototype.onEndHandler=function(){var t;if(this.mouseDown&&(this.mouseDown=!1,this._drawingFlag=!1,this._activeBoxId)){var e=this.getBoxByUid(this._activeBoxId);null!==this._addNewFlag&&(e.keepAspectRatio=this._addNewFlag,this._addNewFlag=null),e.onEndHandler(),this.cropBoxes.length>0&&(null===(t=this.selectedCallback)||void 0===t||t.call(this,this.getRectArr())),this._activeBoxId=null}},t.prototype.checkSelect=function(t,e){var i=this.cropBoxes.length;if(0===i)return null;for(var n=i-1;n>=0;n--){if(null!==this.cropBoxes[n].isBoxSelected(t,e))return n}return null},t.prototype.checkSelectForCursor=function(t,e){var i=this.cropBoxes.length;if(0===i)return null;for(var n=i-1;n>=0;n--){var r=this.cropBoxes[n],o=r.isBoxSelected(t,e);if(null!==o){var s="move";return-1!==o&&(s=r.checkPointPosition(o)),{part:o,type:r.type,position:s}}}return null},t}()},function(t,e){!function(i){if("object"==typeof e&&void 0!==t)t.exports=i();else if("function"==typeof define&&define.amd)define([],i);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Promise=i()}}((function(){var t,e,i;return function n(t,e,i){function r(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=e[s]={exports:{}};t[s][0].call(c.exports,(function(e){var i=t[s][1][e];return r(i||e)}),c,c.exports,n,t,e,i)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,i){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function i(t){var i=new e(t),n=i.promise();return i.setHowMany(1),i.setUnwrap(),i.init(),n}t.any=function(t){return i(t)},t.prototype.any=function(){return i(this)}}},{}],2:[function(t,e,i){"use strict";var n;try{throw new Error}catch(h){n=h}var r=t("./schedule"),o=t("./queue");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=r}function a(t){for(;t.length()>0;)u(t)}function u(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var i=t.shift(),n=t.shift();e.call(i,n)}}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(h){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.prototype.invokeLater=function(t,e,i){this._lateQueue.push(t,e,i),this._queueTick()},s.prototype.invoke=function(t,e,i){this._normalQueue.push(t,e,i),this._queueTick()},s.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},s.prototype._drainQueues=function(){a(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,a(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},e.exports=s,e.exports.firstLineError=n},{"./queue":26,"./schedule":29}],3:[function(t,e,i){"use strict";e.exports=function(t,e,i,n){var r=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){r||(r=!0,t.prototype._propagateFrom=n.propagateFromFunction(),t.prototype._boundValue=n.boundValueFunction());var h=i(o),c=new t(e);c._propagateFrom(this,1);var l=this._target();if(c._setBoundTo(h),h instanceof t){var f={promiseRejectionQueued:!1,promise:c,target:l,bindingPromise:h};l._then(e,s,undefined,c,f),h._then(a,u,undefined,c,f),c._setOnCancel(h)}else c._resolveCallback(l);return c},t.prototype._setBoundTo=function(t){t!==undefined?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,i){return t.resolve(i).bind(e)}}},{}],4:[function(t,e,i){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var r=t("./promise")();r.noConflict=function(){try{Promise===r&&(Promise=n)}catch(t){}return r},e.exports=r},{"./promise":22}],5:[function(t,e,i){"use strict";var n=Object.create;if(n){var r=n(null),o=n(null);r[" size"]=o[" size"]=0}e.exports=function(e){var i,n=t("./util"),r=n.canEvaluate;n.isIdentifier;function o(t,i){var r;if(null!=t&&(r=t[i]),"function"!=typeof r){var o="Object "+n.classString(t)+" has no method '"+n.toString(i)+"'";throw new e.TypeError(o)}return r}function s(t){return o(t,this.pop()).apply(t,this)}function a(t){return t[this]}function u(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(s,undefined,undefined,e,undefined)},e.prototype.get=function(t){var e;if("number"==typeof t)e=u;else if(r){var n=i(t);e=null!==n?n:a}else e=a;return this._then(e,undefined,undefined,t,undefined)}}},{"./util":36}],6:[function(t,e,i){"use strict";e.exports=function(e,i,n,r){var o=t("./util"),s=o.tryCatch,a=o.errorObj,u=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var i=t._cancellationParent;if(null==i||!i._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=i}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,undefined))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=undefined},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var i=0;i<t.length;++i)this._doInvokeOnCancel(t[i],e);else if(t!==undefined)if("function"==typeof t){if(!e){var n=s(t).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),u.throwLater(n.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,i){"use strict";e.exports=function(e){var i=t("./util"),n=t("./es5").keys,r=i.tryCatch,o=i.errorObj;return function(t,s,a){return function(u){var h=a._boundValue();t:for(var c=0;c<t.length;++c){var l=t[c];if(l===Error||null!=l&&l.prototype instanceof Error){if(u instanceof l)return r(s).call(h,u)}else if("function"==typeof l){var f=r(l).call(h,u);if(f===o)return f;if(f)return r(s).call(h,u)}else if(i.isObject(u)){for(var p=n(l),_=0;_<p.length;++_){var d=p[_];if(l[d]!=u[d])continue t}return r(s).call(h,u)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,i){"use strict";e.exports=function(t){var e=!1,i=[];function n(){this._trace=new n.CapturedTrace(r())}function r(){var t=i.length-1;return t>=0?i[t]:undefined}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},n.prototype._pushContext=function(){this._trace!==undefined&&(this._trace._promiseCreated=null,i.push(this._trace))},n.prototype._popContext=function(){if(this._trace!==undefined){var t=i.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},n.CapturedTrace=null,n.create=function(){if(e)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var i=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,u=t.prototype._promiseCreated;n.deactivateLongStackTraces=function(){t.prototype._pushContext=i,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=u,e=!1},e=!0,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},n}},{}],9:[function(t,e,i){"use strict";e.exports=function(e,i,n,r){var o,s,a,u,h=e._async,c=t("./errors").Warning,l=t("./util"),f=t("./es5"),p=l.canAttachTrace,_=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,m=null,y=!1,b=!(0==l.env("BLUEBIRD_DEBUG")),E=!(0==l.env("BLUEBIRD_WARNINGS")||!b&&!l.env("BLUEBIRD_WARNINGS")),T=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!b&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),C=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(E||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var t=[];function i(){for(var e=0;e<t.length;++e)t[e]._notifyUnhandledRejection();n()}function n(){t.length=0}u=function(e){t.push(e),setTimeout(i,1)},f.defineProperty(e,"_unhandledRejectionCheck",{value:i}),f.defineProperty(e,"_unhandledRejectionClear",{value:n})}(),e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),u(this))},e.prototype._notifyUnhandledRejectionIsHandled=function(){X("rejectionHandled",o,undefined,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),X("unhandledRejection",s,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,i){return H(t,e,i||this)},e.onPossiblyUnhandledRejection=function(t){var i=e._getContext();s=l.contextBind(i,t)},e.onUnhandledRejectionHandled=function(t){var i=e._getContext();o=l.contextBind(i,t)};var P=function(){};e.longStackTraces=function(){if(h.haveItemsQueued()&&!et.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!et.longStackTraces&&Z()){var t=e.prototype._captureStackTrace,n=e.prototype._attachExtraTrace,r=e.prototype._dereferenceTrace;et.longStackTraces=!0,P=function(){if(h.haveItemsQueued()&&!et.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=n,e.prototype._dereferenceTrace=r,i.deactivateLongStackTraces(),et.longStackTraces=!1},e.prototype._captureStackTrace=V,e.prototype._attachExtraTrace=F,e.prototype._dereferenceTrace=G,i.activateLongStackTraces()}},e.hasLongStackTraces=function(){return et.longStackTraces&&Z()};var w={unhandledrejection:{before:function(){var t=l.global.onunhandledrejection;return l.global.onunhandledrejection=null,t},after:function(t){l.global.onunhandledrejection=t}},rejectionhandled:{before:function(){var t=l.global.onrejectionhandled;return l.global.onrejectionhandled=null,t},after:function(t){l.global.onrejectionhandled=t}}},A=function(){var t=function(t,e){if(!t)return!l.global.dispatchEvent(e);var i;try{return i=t.before(),!l.global.dispatchEvent(e)}finally{t.after(i)}};try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return l.global.dispatchEvent(e),function(e,i){e=e.toLowerCase();var n=new CustomEvent(e,{detail:i,cancelable:!0});return f.defineProperty(n,"promise",{value:i.promise}),f.defineProperty(n,"reason",{value:i.reason}),t(w[e],n)}}if("function"==typeof Event){e=new Event("CustomEvent");return l.global.dispatchEvent(e),function(e,i){e=e.toLowerCase();var n=new Event(e,{cancelable:!0});return n.detail=i,f.defineProperty(n,"promise",{value:i.promise}),f.defineProperty(n,"reason",{value:i.reason}),t(w[e],n)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(e),function(e,i){e=e.toLowerCase();var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!0,i),t(w[e],n)}}catch(i){}return function(){return!1}}(),O=l.isNode?function(){return process.emit.apply(process,arguments)}:l.global?function(t){var e="on"+t.toLowerCase(),i=l.global[e];return!!i&&(i.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function M(t,e){return{promise:e}}var S={promiseCreated:M,promiseFulfilled:M,promiseRejected:M,promiseResolved:M,promiseCancelled:M,promiseChained:function(t,e,i){return{promise:e,child:i}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,i){return{reason:e,promise:i}},rejectionHandled:M},R=function(t){var e=!1;try{e=O.apply(null,arguments)}catch(n){h.throwLater(n),e=!0}var i=!1;try{i=A(t,S[t].apply(null,arguments))}catch(n){h.throwLater(n),i=!0}return i||e};function x(){return!1}function I(t,e,i){var n=this;try{t(e,i,(function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+l.toString(t));n._attachCancellationCallback(t)}))}catch(r){return r}}function D(t){if(!this._isCancellable())return this;var e=this._onCancel();e!==undefined?l.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function k(){return this._onCancelField}function j(t){this._onCancelField=t}function N(){this._cancellationParent=undefined,this._onCancelField=undefined}function L(t,e){if(0!=(1&e)){this._cancellationParent=t;var i=t._branchesRemainingToCancel;i===undefined&&(i=0),t._branchesRemainingToCancel=i+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}e.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&P()),"warnings"in t){var i=t.warnings;et.warnings=!!i,C=et.warnings,l.isObject(i)&&"wForgottenReturn"in i&&(C=!!i.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!et.cancellation){if(h.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=N,e.prototype._propagateFrom=L,e.prototype._onCancel=k,e.prototype._setOnCancel=j,e.prototype._attachCancellationCallback=D,e.prototype._execute=I,B=L,et.cancellation=!0}if("monitoring"in t&&(t.monitoring&&!et.monitoring?(et.monitoring=!0,e.prototype._fireEvent=R):!t.monitoring&&et.monitoring&&(et.monitoring=!1,e.prototype._fireEvent=x)),"asyncHooks"in t&&l.nodeSupportsAsyncResource){var o=et.asyncHooks,s=!!t.asyncHooks;o!==s&&(et.asyncHooks=s,s?n():r())}return e},e.prototype._fireEvent=x,e.prototype._execute=function(t,e,i){try{t(e,i)}catch(n){return n}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._dereferenceTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var B=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function U(){var t=this._boundTo;return t!==undefined&&t instanceof e?t.isFulfilled()?t.value():undefined:t}function V(){this._trace=new J(this._peekContext())}function F(t,e){if(p(t)){var i=this._trace;if(i!==undefined&&e&&(i=i._parent),i!==undefined)i.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=W(t);l.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),l.notEnumerableProp(t,"__stackCleaned__",!0)}}}function G(){this._trace=undefined}function H(t,i,n){if(et.warnings){var r,o=new c(t);if(i)n._attachExtraTrace(o);else if(et.longStackTraces&&(r=e._peekContext()))r.attachExtraTrace(o);else{var s=W(o);o.stack=s.message+"\n"+s.stack.join("\n")}R("warning",o)||Y(o,"",!0)}}function z(t){for(var e=[],i=0;i<t.length;++i){var n=t[i],r="    (No stack trace)"===n||v.test(n),o=r&&q(n);r&&!o&&(y&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function W(t){var e=t.stack,i=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),i=0;i<e.length;++i){var n=e[i];if("    (No stack trace)"===n||v.test(n))break}return i>0&&"SyntaxError"!=t.name&&(e=e.slice(i)),e}(t):["    (No stack trace)"],{message:i,stack:"SyntaxError"==t.name?e:z(e)}}function Y(t,e,i){if("undefined"!=typeof console){var n;if(l.isObject(t)){var r=t.stack;n=e+m(r,t)}else n=e+String(t);"function"==typeof a?a(n,i):"function"==typeof console.log||console.log}}function X(t,e,i,n){var r=!1;try{"function"==typeof e&&(r=!0,"rejectionHandled"===t?e(n):e(i,n))}catch(o){h.throwLater(o)}"unhandledRejection"===t?R(t,i,n)||r||Y(i,"Unhandled rejection "):R(t,n)}function K(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():l.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+function(t){var e=41;if(t.length<e)return t;return t.substr(0,e-3)+"..."}(e)+">, no stack trace)"}function Z(){return"function"==typeof tt}var q=function(){return!1},Q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function $(t){var e=t.match(Q);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function J(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(t===undefined?0:t._length);tt(this,J),e>32&&this.uncycle()}l.inherits(J,Error),i.CapturedTrace=J,J.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],i={},n=0,r=this;r!==undefined;++n)e.push(r),r=r._parent;for(n=(t=this._length=n)-1;n>=0;--n){var o=e[n].stack;i[o]===undefined&&(i[o]=n)}for(n=0;n<t;++n){var s=i[e[n].stack];if(s!==undefined&&s!==n){s>0&&(e[s-1]._parent=undefined,e[s-1]._length=1),e[n]._parent=undefined,e[n]._length=1;var a=n>0?e[n-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=undefined,a._length=1);for(var u=a._length+1,h=n-2;h>=0;--h)e[h]._length=u,u++;return}}}},J.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=W(t),i=e.message,n=[e.stack],r=this;r!==undefined;)n.push(z(r.stack.split("\n"))),r=r._parent;!function(t){for(var e=t[0],i=1;i<t.length;++i){for(var n=t[i],r=e.length-1,o=e[r],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(a=s;a>=0;--a){var u=n[a];if(e[r]!==u)break;e.pop(),r--}e=n}}(n),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(n),l.notEnumerableProp(t,"stack",function(t,e){for(var i=0;i<e.length-1;++i)e[i].push("From previous event:"),e[i]=e[i].join("\n");return i<e.length&&(e[i]=e[i].join("\n")),t+"\n"+e.join("\n")}(i,n)),l.notEnumerableProp(t,"__stackCleaned__",!0)}};var tt=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:e.name!==undefined&&e.message!==undefined?e.toString():K(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=t,m=e;var i=Error.captureStackTrace;return q=function(t){return _.test(t)},function(t,e){Error.stackTraceLimit+=6,i(t,e),Error.stackTraceLimit-=6}}var n,r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,m=e,y=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(o){n="stack"in o}return!("stack"in r)&&n&&"number"==typeof Error.stackTraceLimit?(v=t,m=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(o){t.stack=o.stack}Error.stackTraceLimit-=6}):(m=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||e.name===undefined||e.message===undefined?K(e):e.toString()},null)}();"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(a=function(t){},l.isNode&&process.stderr.isTTY?a=function(t,e){}:l.isNode||"string"!=typeof(new Error).stack||(a=function(t,e){}));var et={warnings:E,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return T&&e.longStackTraces(),{asyncHooks:function(){return et.asyncHooks},longStackTraces:function(){return et.longStackTraces},warnings:function(){return et.warnings},cancellation:function(){return et.cancellation},monitoring:function(){return et.monitoring},propagateFromFunction:function(){return B},boundValueFunction:function(){return U},checkForgottenReturns:function(t,e,i,n,r){if(t===undefined&&null!==e&&C){if(r!==undefined&&r._returnedNonUndefined())return;if(0==(65535&n._bitField))return;i&&(i+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),u=z(a),h=u.length-1;h>=0;--h){var c=u[h];if(!d.test(c)){var l=c.match(g);l&&(o="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(u.length>0){var f=u[0];for(h=0;h<a.length;++h)if(a[h]===f){h>0&&(s="\n"+a[h-1]);break}}}var p="a promise was created in a "+i+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;n._warn(p,!0,e)}},setBounds:function(t,e){if(Z()){for(var i,n,r=(t.stack||"").split("\n"),o=(e.stack||"").split("\n"),s=-1,a=-1,u=0;u<r.length;++u){if(h=$(r[u])){i=h.fileName,s=h.line;break}}for(u=0;u<o.length;++u){var h;if(h=$(o[u])){n=h.fileName,a=h.line;break}}s<0||a<0||!i||!n||i!==n||s>=a||(q=function(t){if(_.test(t))return!0;var e=$(t);return!!(e&&e.fileName===i&&s<=e.line&&e.line<=a)})}},warn:H,deprecated:function(t,e){var i=t+" is deprecated and will be removed in a future version.";return e&&(i+=" Use "+e+" instead."),H(i)},CapturedTrace:J,fireDomEvent:A,fireGlobalEvent:O}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,i){"use strict";e.exports=function(t){function e(){return this.value}function i(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(i){return i instanceof t&&i.suppressUnhandledRejections(),this._then(e,undefined,undefined,{value:i},undefined)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(i,undefined,undefined,{reason:t},undefined)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(undefined,i,undefined,{reason:t},undefined);var e=arguments[1],n=function(){throw e};return this.caught(t,n)},t.prototype.catchReturn=function(i){if(arguments.length<=1)return i instanceof t&&i.suppressUnhandledRejections(),this._then(undefined,e,undefined,{value:i},undefined);var n=arguments[1];n instanceof t&&n.suppressUnhandledRejections();var r=function(){return n};return this.caught(i,r)}}},{}],11:[function(t,e,i){"use strict";e.exports=function(t,e){var i=t.reduce,n=t.all;function r(){return n(this)}t.prototype.each=function(t){return i(this,t,e,0)._then(r,undefined,undefined,this,undefined)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,n){return i(t,n,e,0)._then(r,undefined,undefined,t,undefined)},t.mapSeries=function(t,n){return i(t,n,e,e)}}},{}],12:[function(t,e,i){"use strict";var n,r,o=t("./es5"),s=o.freeze,a=t("./util"),u=a.inherits,h=a.notEnumerableProp;function c(t,e){function i(n){if(!(this instanceof i))return new i(n);h(this,"message","string"==typeof n?n:e),h(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(i,Error),i}var l=c("Warning","warning"),f=c("CancellationError","cancellation error"),p=c("TimeoutError","timeout error"),_=c("AggregateError","aggregate error");try{n=TypeError,r=RangeError}catch(b){n=c("TypeError","type error"),r=c("RangeError","range error")}for(var d="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<d.length;++g)"function"==typeof Array.prototype[d[g]]&&(_.prototype[d[g]]=Array.prototype[d[g]]);o.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var v=0;function m(t){if(!(this instanceof m))return new m(t);h(this,"name","OperationalError"),h(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(h(this,"message",t.message),h(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}_.prototype.toString=function(){var t=Array(4*v+1).join(" "),e="\n"+t+"AggregateError of:\n";v++,t=Array(4*v+1).join(" ");for(var i=0;i<this.length;++i){for(var n=this[i]===this?"[Circular AggregateError]":this[i]+"",r=n.split("\n"),o=0;o<r.length;++o)r[o]=t+r[o];e+=(n=r.join("\n"))+"\n"}return v--,e},u(m,Error);var y=Error.__BluebirdErrorTypes__;y||(y=s({CancellationError:f,TimeoutError:p,OperationalError:m,RejectionError:m,AggregateError:_}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:n,RangeError:r,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:l}},{"./es5":13,"./util":36}],13:[function(t,e,i){var n=function(){"use strict";return this===undefined}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return!(i&&!i.writable&&!i.set)}};else{var r={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var i in t)r.call(t,i)&&e.push(i);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}},keys:a,names:a,defineProperty:function(t,e,i){return t[e]=i.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(e){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,i){"use strict";e.exports=function(t,e){var i=t.map;t.prototype.filter=function(t,n){return i(this,t,n,e)},t.filter=function(t,n,r){return i(t,n,r,e)}}},{}],15:[function(t,e,i){"use strict";e.exports=function(e,i,n){var r=t("./util"),o=e.CancellationError,s=r.errorObj,a=t("./catch_filter")(n);function u(t,e,i){this.promise=t,this.type=e,this.handler=i,this.called=!1,this.cancelPromise=null}function h(t){this.finallyHandler=t}function c(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function l(){return p.call(this,this.promise._target()._settledValue())}function f(t){if(!c(this,t))return s.e=t,s}function p(t){var r=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(r._boundValue()):a.call(r._boundValue(),t);if(u===n)return u;if(u!==undefined){r._setReturnedNonUndefined();var p=i(u,r);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var _=new o("late cancellation observer");return r._attachExtraTrace(_),s.e=_,s}p.isPending()&&p._attachCancellationCallback(new h(this))}return p._then(l,f,undefined,this,undefined)}}}return r.isRejected()?(c(this),s.e=t,s):(c(this),t)}return u.prototype.isFinallyHandler=function(){return 0===this.type},h.prototype._resultCancelled=function(){c(this.finallyHandler)},e.prototype._passThrough=function(t,e,i,n){return"function"!=typeof t?this.then():this._then(i,n,undefined,new u(this,e,t),undefined)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var i=arguments.length;if(1===i)return this._passThrough(t,1,undefined,p);var n,o=new Array(i-1),s=0;for(n=0;n<i-1;++n){var u=arguments[n];if(!r.isObject(u))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+r.classString(u)));o[s++]=u}o.length=s;var h=arguments[n];return this._passThrough(a(o,h,this),1,undefined,p)},u}},{"./catch_filter":7,"./util":36}],16:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o,s){var a=t("./errors").TypeError,u=t("./util"),h=u.errorObj,c=u.tryCatch,l=[];function f(t,i,r,o){if(s.cancellation()){var a=new e(n),u=this._finallyPromise=new e(n);this._promise=a.lastly((function(){return u})),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new e(n))._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=i,this._generator=undefined,this._yieldHandlers="function"==typeof r?[r].concat(l):l,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(f,o),f.prototype._isResolved=function(){return null===this._promise},f.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if("undefined"!=typeof this._generator["return"])this._promise._pushContext(),t=c(this._generator["return"]).call(this._generator,undefined),this._promise._popContext();else{var i=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=i,this._promise._attachExtraTrace(i),this._promise._pushContext(),t=c(this._generator["throw"]).call(this._generator,i),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},f.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=c(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},f.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=c(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},f.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=undefined,this._promiseFulfilled(undefined)},f.prototype._continue=function(t){var i=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?i.cancel():i._rejectCallback(t.e,!1);var n=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?i.cancel():i._resolveCallback(n);var o=r(n,this._promise);if(o instanceof e||null!==(o=function(t,i,n){for(var o=0;o<i.length;++o){n._pushContext();var s=c(i[o])(t);if(n._popContext(),s===h){n._pushContext();var a=e.reject(h.e);return n._popContext(),a}var u=r(s,n);if(u instanceof e)return u}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=Object(e).yieldHandler,n=f,r=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(undefined,undefined,i,r),s=o.promise();return o._generator=e,o._promiseFulfilled(undefined),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("expecting a function but got "+u.classString(t));l.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return i("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new f(t,this),r=n.promise();return n._run(e.spawn),r}}},{"./errors":12,"./util":36}],17:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var n=[].slice.call(arguments);t&&n.pop();var r=new i(n).promise();return t!==undefined?r.spread(t):r}}},{"./util":36}],18:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o,s){var a=t("./util"),u=a.tryCatch,h=a.errorObj,c=e._async;function l(t,i,n,r){this.constructor$(t),this._promise._captureStackTrace();var s=e._getContext();if(this._callback=a.contextBind(s,i),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],c.invoke(this._asyncInit,this,undefined),a.isArray(t))for(var u=0;u<t.length;++u){var h=t[u];h instanceof e&&h.suppressUnhandledRejections()}}function f(t,i,r,o){if("function"!=typeof i)return n("expecting a function but got "+a.classString(i));var s=0;if(r!==undefined){if("object"!=typeof r||null===r)return e.reject(new TypeError("options argument must be an object but it is "+a.classString(r)));if("number"!=typeof r.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(r.concurrency)));s=r.concurrency}return new l(t,i,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}a.inherits(l,i),l.prototype._asyncInit=function(){this._init$(undefined,-2)},l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,i){var n=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(i<0){if(n[i=-1*i-1]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return n[i]=t,this._queue.push(i),!1;null!==a&&(a[i]=t);var l=this._promise,f=this._callback,p=l._boundValue();l._pushContext();var _=u(f).call(p,t,i,o),d=l._popContext();if(s.checkForgottenReturns(_,d,null!==a?"Promise.filter":"Promise.map",l),_===h)return this._reject(_.e),!0;var g=r(_,this._promise);if(g instanceof e){var v=(g=g._target())._bitField;if(0==(50397184&v))return c>=1&&this._inFlight++,n[i]=g,g._proxy(this,-1*(i+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(g._reason()),!0):(this._cancel(),!0);_=g._value()}n[i]=_}return++this._totalResolved>=o&&(null!==a?this._filter(n,a):this._resolve(n),!0)},l.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,i=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(i[n],n)}},l.prototype._filter=function(t,e){for(var i=e.length,n=new Array(i),r=0,o=0;o<i;++o)t[o]&&(n[r++]=e[o]);n.length=r,this._resolve(n)},l.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return f(this,t,e,null)},e.map=function(t,e,i,n){return f(t,e,i,n)}}},{"./util":36}],19:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var n=new e(i);n._captureStackTrace(),n._pushContext();var r=a(t).apply(this,arguments),s=n._popContext();return o.checkForgottenReturns(r,s,"Promise.method",n),n._resolveFromSyncValue(r),n}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return r("expecting a function but got "+s.classString(t));var n,u=new e(i);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var h=arguments[1],c=arguments[2];n=s.isArray(h)?a(t).apply(c,h):a(t).call(c,h)}else n=a(t)();var l=u._popContext();return o.checkForgottenReturns(n,l,"Promise.try",u),u._resolveFromSyncValue(n),u},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,i){"use strict";var n=t("./util"),r=n.maybeWrapAsError,o=t("./errors").OperationalError,s=t("./es5");var a=/^(?:name|message|stack|cause)$/;function u(t){var e;if(function(t){return t instanceof Error&&s.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var i=s.keys(t),r=0;r<i.length;++r){var u=i[r];a.test(u)||(e[u]=t[u])}return e}return n.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(i,n){if(null!==t){if(i){var o=u(r(i));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(n);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,i){"use strict";e.exports=function(e){var i=t("./util"),n=e._async,r=i.tryCatch,o=i.errorObj;function s(t,e){if(!i.isArray(t))return a.call(this,t,e);var s=r(e).apply(this._boundValue(),[null].concat(t));s===o&&n.throwLater(s.e)}function a(t,e){var i=this._boundValue(),s=t===undefined?r(e).call(i,null):r(e).call(i,null,t);s===o&&n.throwLater(s.e)}function u(t,e){if(!t){var i=new Error(t+"");i.cause=t,t=i}var s=r(e).call(this._boundValue(),t);s===o&&n.throwLater(s.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var i=a;e!==undefined&&Object(e).spread&&(i=s),this._then(i,u,undefined,this,t)}return this}}},{"./util":36}],22:[function(t,e,i){"use strict";e.exports=function(){var i=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},n=function(){return new I.PromiseInspection(this._target())},r=function(t){return I.reject(new v(t))};function o(){}var s={},a=t("./util");a.setReflectHandler(n);var u=function(){var t=process.domain;return t===undefined?null:t},h=function(){return{domain:u(),async:null}},c=a.isNode&&a.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null,l=function(){return{domain:u(),async:new c("Bluebird::Promise")}},f=a.isNode?h:function(){return null};a.notEnumerableProp(I,"_getContext",f);var p=t("./es5"),_=t("./async"),d=new _;p.defineProperty(I,"_async",{value:d});var g=t("./errors"),v=I.TypeError=g.TypeError;I.RangeError=g.RangeError;var m=I.CancellationError=g.CancellationError;I.TimeoutError=g.TimeoutError,I.OperationalError=g.OperationalError,I.RejectionError=g.OperationalError,I.AggregateError=g.AggregateError;var y=function(){},b={},E={},T=t("./thenables")(I,y),C=t("./promise_array")(I,y,T,r,o),P=t("./context")(I),w=P.create,A=t("./debuggability")(I,P,(function(){f=l,a.notEnumerableProp(I,"_getContext",l)}),(function(){f=h,a.notEnumerableProp(I,"_getContext",h)})),O=(A.CapturedTrace,t("./finally")(I,T,E)),M=t("./catch_filter")(E),S=t("./nodeback"),R=a.errorObj,x=a.tryCatch;function I(t){t!==y&&function(t,e){if(null==t||t.constructor!==I)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new v("expecting a function but got "+a.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=undefined,this._rejectionHandler0=undefined,this._promise0=undefined,this._receiver0=undefined,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function D(t){this.promise._resolveCallback(t)}function k(t){this.promise._rejectCallback(t,!1)}function j(t){var e=new I(y);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return I.prototype.toString=function(){return"[object Promise]"},I.prototype.caught=I.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var i,n=new Array(e-1),o=0;for(i=0;i<e-1;++i){var s=arguments[i];if(!a.isObject(s))return r("Catch statement predicate: expecting an object but got "+a.classString(s));n[o++]=s}if(n.length=o,"function"!=typeof(t=arguments[i]))throw new v("The last argument to .catch() must be a function, got "+a.toString(t));return this.then(undefined,M(n,t,this))}return this.then(undefined,t)},I.prototype.reflect=function(){return this._then(n,n,undefined,this,undefined)},I.prototype.then=function(t,e){if(A.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var i=".then() only accepts functions but was passed: "+a.classString(t);arguments.length>1&&(i+=", "+a.classString(e)),this._warn(i)}return this._then(t,e,undefined,undefined,undefined)},I.prototype.done=function(t,e){this._then(t,e,undefined,undefined,undefined)._setIsFinal()},I.prototype.spread=function(t){return"function"!=typeof t?r("expecting a function but got "+a.classString(t)):this.all()._then(t,undefined,undefined,b,undefined)},I.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:undefined,rejectionReason:undefined};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},I.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},I.prototype.error=function(t){return this.caught(a.originatesFromRejection,t)},I.getNewLibraryCopy=e.exports,I.is=function(t){return t instanceof I},I.fromNode=I.fromCallback=function(t){var e=new I(y);e._captureStackTrace();var i=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=x(t)(S(e,i));return n===R&&e._rejectCallback(n.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},I.all=function(t){return new C(t).promise()},I.cast=function(t){var e=T(t);return e instanceof I||((e=new I(y))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},I.resolve=I.fulfilled=I.cast,I.reject=I.rejected=function(t){var e=new I(y);return e._captureStackTrace(),e._rejectCallback(t,!0),e},I.setScheduler=function(t){if("function"!=typeof t)throw new v("expecting a function but got "+a.classString(t));return d.setScheduler(t)},I.prototype._then=function(t,e,i,n,r){var o=r!==undefined,s=o?r:new I(y),u=this._target(),h=u._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),n===undefined&&0!=(2097152&this._bitField)&&(n=0!=(50397184&h)?this._boundValue():u===this?undefined:this._boundTo),this._fireEvent("promiseChained",this,s));var c=f();if(0!=(50397184&h)){var l,p,_=u._settlePromiseCtx;0!=(33554432&h)?(p=u._rejectionHandler0,l=t):0!=(16777216&h)?(p=u._fulfillmentHandler0,l=e,u._unsetRejectionIsUnhandled()):(_=u._settlePromiseLateCancellationObserver,p=new m("late cancellation observer"),u._attachExtraTrace(p),l=e),d.invoke(_,u,{handler:a.contextBind(c,l),promise:s,receiver:n,value:p})}else u._addCallbacks(t,e,s,n,c);return s},I.prototype._length=function(){return 65535&this._bitField},I.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},I.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},I.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},I.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},I.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},I.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},I.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},I.prototype._isFinal=function(){return(4194304&this._bitField)>0},I.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},I.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},I.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},I.prototype._setAsyncGuaranteed=function(){if(!d.hasCustomScheduler()){var t=this._bitField;this._bitField=t|(536870912&t)>>2^134217728}},I.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},I.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===s?undefined:e===undefined&&this._isBound()?this._boundValue():e},I.prototype._promiseAt=function(t){return this[4*t-4+2]},I.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},I.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},I.prototype._boundValue=function(){},I.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,i=t._rejectionHandler0,n=t._promise0,r=t._receiverAt(0);r===undefined&&(r=s),this._addCallbacks(e,i,n,r,null)},I.prototype._migrateCallbackAt=function(t,e){var i=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),r=t._promiseAt(e),o=t._receiverAt(e);o===undefined&&(o=s),this._addCallbacks(i,n,r,o,null)},I.prototype._addCallbacks=function(t,e,i,n,r){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=i,this._receiver0=n,"function"==typeof t&&(this._fulfillmentHandler0=a.contextBind(r,t)),"function"==typeof e&&(this._rejectionHandler0=a.contextBind(r,e));else{var s=4*o-4;this[s+2]=i,this[s+3]=n,"function"==typeof t&&(this[s+0]=a.contextBind(r,t)),"function"==typeof e&&(this[s+1]=a.contextBind(r,e))}return this._setLength(o+1),o},I.prototype._proxy=function(t,e){this._addCallbacks(undefined,undefined,e,t,null)},I.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(i(),!1);var n=T(t,this);if(!(n instanceof I))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;a<s;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var u=new m("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}else this._reject(i())}},I.prototype._rejectCallback=function(t,e,i){var n=a.ensureErrorObject(t),r=n===t;if(!r&&!i&&A.warnings()){var o="a promise was rejected with a non-error: "+a.classString(t);this._warn(o,!0)}this._attachExtraTrace(n,!!e&&r),this._reject(t)},I.prototype._resolveFromExecutor=function(t){if(t!==y){var e=this;this._captureStackTrace(),this._pushContext();var i=!0,n=this._execute(t,(function(t){e._resolveCallback(t)}),(function(t){e._rejectCallback(t,i)}));i=!1,this._popContext(),n!==undefined&&e._rejectCallback(n,!0)}},I.prototype._settlePromiseFromHandler=function(t,e,i,n){var r=n._bitField;if(0==(65536&r)){var o;n._pushContext(),e===b?i&&"number"==typeof i.length?o=x(t).apply(this._boundValue(),i):(o=R).e=new v("cannot .spread() a non-array: "+a.classString(i)):o=x(t).call(e,i);var s=n._popContext();0==(65536&(r=n._bitField))&&(o===E?n._reject(i):o===R?n._rejectCallback(o.e,!1):(A.checkForgottenReturns(o,s,"",n,this),n._resolveCallback(o)))}},I.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},I.prototype._followee=function(){return this._rejectionHandler0},I.prototype._setFollowee=function(t){this._rejectionHandler0=t},I.prototype._settlePromise=function(t,e,i,r){var s=t instanceof I,a=this._bitField,u=0!=(134217728&a);0!=(65536&a)?(s&&t._invokeInternalOnCancel(),i instanceof O&&i.isFinallyHandler()?(i.cancelPromise=t,x(e).call(i,r)===R&&t._reject(R.e)):e===n?t._fulfill(n.call(i)):i instanceof o?i._promiseCancelled(t):s||t instanceof C?t._cancel():i.cancel()):"function"==typeof e?s?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,i,r,t)):e.call(i,r,t):i instanceof o?i._isResolved()||(0!=(33554432&a)?i._promiseFulfilled(r,t):i._promiseRejected(r,t)):s&&(u&&t._setAsyncGuaranteed(),0!=(33554432&a)?t._fulfill(r):t._reject(r))},I.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,i=t.promise,n=t.receiver,r=t.value;"function"==typeof e?i instanceof I?this._settlePromiseFromHandler(e,n,r,i):e.call(n,r,i):i instanceof I&&i._reject(r)},I.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},I.prototype._settlePromise0=function(t,e,i){var n=this._promise0,r=this._receiverAt(0);this._promise0=undefined,this._receiver0=undefined,this._settlePromise(n,t,r,e)},I.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=undefined},I.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=i();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():d.settlePromises(this),this._dereferenceTrace())}},I.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return d.fatalError(t,a.isNode);(65535&e)>0?d.settlePromises(this):this._ensurePossibleRejectionHandled()}},I.prototype._fulfillPromises=function(t,e){for(var i=1;i<t;i++){var n=this._fulfillmentHandlerAt(i),r=this._promiseAt(i),o=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(r,n,o,e)}},I.prototype._rejectPromises=function(t,e){for(var i=1;i<t;i++){var n=this._rejectionHandlerAt(i),r=this._promiseAt(i),o=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(r,n,o,e)}},I.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var i=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,i,t),this._rejectPromises(e,i)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,t),this._fulfillPromises(e,n)}this._setLength(0)}this._clearCancellationData()},I.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&p.defineProperty(I.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),I.defer=I.pending=function(){return A.deprecated("Promise.defer","new Promise"),{promise:new I(y),resolve:D,reject:k}},a.notEnumerableProp(I,"_makeSelfResolutionError",i),t("./method")(I,y,T,r,A),t("./bind")(I,y,T,A),t("./cancel")(I,C,r,A),t("./direct_resolve")(I),t("./synchronous_inspection")(I),t("./join")(I,C,T,y,d),I.Promise=I,I.version="3.7.2",t("./call_get.js")(I),t("./generators.js")(I,r,y,T,o,A),t("./map.js")(I,C,r,T,y,A),t("./nodeify.js")(I),t("./promisify.js")(I,y),t("./props.js")(I,C,T,r),t("./race.js")(I,y,T,r),t("./reduce.js")(I,C,r,T,y,A),t("./settle.js")(I,C,A),t("./some.js")(I,C,r),t("./timers.js")(I,y,A),t("./using.js")(I,r,T,w,y,A),t("./any.js")(I),t("./each.js")(I,y),t("./filter.js")(I,y),a.toFastProperties(I),a.toFastProperties(I.prototype),j({a:1}),j({b:2}),j({c:3}),j(1),j((function(){})),j(undefined),j(!1),j(new I(y)),A.setBounds(_.firstLineError,a.lastLineError),I}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:undefined}],23:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o){var s=t("./util");s.isArray;function a(t){var n=this._promise=new e(i);t instanceof e&&(n._propagateFrom(t,3),t.suppressUnhandledRejections()),n._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(undefined,-2)}return s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function u(t,i){var o=n(this._values,this._promise);if(o instanceof e){var a=(o=o._target())._bitField;if(this._values=o,0==(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(u,this._reject,undefined,this,i);if(0==(33554432&a))return 0!=(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(null!==(o=s.asArray(o)))0!==o.length?this._iterate(o):-5===i?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(i));else{var h=r("expecting an array or an iterable object but got "+s.classString(o)).reason();this._promise._rejectCallback(h,!1)}},a.prototype._iterate=function(t){var i=this.getActualLength(t.length);this._length=i,this._values=this.shouldCopyValues()?new Array(i):this._values;for(var r=this._promise,o=!1,s=null,a=0;a<i;++a){var u=n(t[a],r);s=u instanceof e?(u=u._target())._bitField:null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0==(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!=(33554432&s)?this._promiseFulfilled(u._value(),a):0!=(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||r._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var i=0;i<t.length;++i)t[i]instanceof e&&t[i].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,i){"use strict";e.exports=function(e,i){var n={},r=t("./util"),o=t("./nodeback"),s=r.withAppended,a=r.maybeWrapAsError,u=r.canEvaluate,h=t("./errors").TypeError,c={__isPromisified__:!0},l=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),f=function(t){return r.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!l.test(t)}function _(t){try{return!0===t.__isPromisified__}catch(e){return!1}}function d(t,e,i){var n=r.getDataPropertyOrDefault(t,e+i,c);return!!n&&_(n)}function g(t,e,i,n){for(var o=r.inheritedDataKeys(t),s=[],a=0;a<o.length;++a){var u=o[a],c=t[u],l=n===f||f(u);"function"!=typeof c||_(c)||d(t,u,e)||!n(u,c,t,l)||s.push(u,c)}return function(t,e,i){for(var n=0;n<t.length;n+=2){var r=t[n];if(i.test(r))for(var o=r.replace(i,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new h("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(s,e,i),s}var v;var m=u?v:function(t,u,h,c,l,f){var p=function(){return this}(),_=t;function d(){var r=u;u===n&&(r=this);var h=new e(i);h._captureStackTrace();var c="string"==typeof _&&this!==p?this[_]:t,l=o(h,f);try{c.apply(r,s(arguments,l))}catch(d){h._rejectCallback(a(d),!0,!0)}return h._isFateSealed()||h._setAsyncGuaranteed(),h}return"string"==typeof _&&(t=c),r.notEnumerableProp(d,"__isPromisified__",!0),d};function y(t,e,i,o,s){for(var a=new RegExp(e.replace(/([$])/,"\\$")+"$"),u=g(t,e,a,i),h=0,c=u.length;h<c;h+=2){var l=u[h],f=u[h+1],p=l+e;if(o===m)t[p]=m(l,n,l,f,e,s);else{var _=o(f,(function(){return m(l,n,l,f,e,s)}));r.notEnumerableProp(_,"__isPromisified__",!0),t[p]=_}}return r.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new h("expecting a function but got "+r.classString(t));if(_(t))return t;var i=function(t,e,i){return m(t,e,undefined,t,null,i)}(t,(e=Object(e)).context===undefined?n:e.context,!!e.multiArgs);return r.copyDescriptors(t,i,p),i},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new h("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var i=!!(e=Object(e)).multiArgs,n=e.suffix;"string"!=typeof n&&(n="Async");var o=e.filter;"function"!=typeof o&&(o=f);var s=e.promisifier;if("function"!=typeof s&&(s=m),!r.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=r.inheritedDataKeys(t),u=0;u<a.length;++u){var c=t[a[u]];"constructor"!==a[u]&&r.isClass(c)&&(y(c.prototype,n,o,s,i),y(c,n,o,s,i))}return y(t,n,o,s,i)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,i){"use strict";e.exports=function(e,i,n,r){var o,s=t("./util"),a=s.isObject,u=t("./es5");"function"==typeof Map&&(o=Map);var h=function(){var t=0,e=0;function i(i,n){this[t]=i,this[t+e]=n,t++}return function(n){e=n.size,t=0;var r=new Array(2*n.size);return n.forEach(i,r),r}}();function c(t){var e,i=!1;if(o!==undefined&&t instanceof o)e=h(t),i=!0;else{var n=u.keys(t),r=n.length;e=new Array(2*r);for(var s=0;s<r;++s){var a=n[s];e[s]=t[a],e[s+r]=a}}this.constructor$(e),this._isMap=i,this._init$(undefined,i?-6:-3)}function l(t){var i,o=n(t);return a(o)?(i=o instanceof e?o._then(e.props,undefined,undefined,undefined,undefined):new c(o).promise(),o instanceof e&&i._propagateFrom(o,2),i):r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(c,i),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var i;if(this._isMap)i=function(t){for(var e=new o,i=t.length/2|0,n=0;n<i;++n){var r=t[i+n],s=t[n];e.set(r,s)}return e}(this._values);else{i={};for(var n=this.length(),r=0,s=this.length();r<s;++r)i[this._values[r+n]]=this._values[r]}return this._resolve(i),!0}return!1},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return l(this)},e.props=function(t){return l(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,i){"use strict";function n(t){this._capacity=t,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(t){return this._capacity<t},n.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},n.prototype.push=function(t,e,i){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(i);var r=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[r+0&o]=t,this[r+1&o]=e,this[r+2&o]=i,this._length=n},n.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=undefined,this._front=t+1&this._capacity-1,this._length--,e},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,i,n,r){for(var o=0;o<r;++o)i[o+n]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=n},{}],27:[function(t,e,i){"use strict";e.exports=function(e,i,n,r){var o=t("./util");function s(t,a){var u,h=n(t);if(h instanceof e)return(u=h).then((function(t){return s(t,u)}));if(null===(t=o.asArray(t)))return r("expecting an array or an iterable object but got "+o.classString(t));var c=new e(i);a!==undefined&&c._propagateFrom(a,3);for(var l=c._fulfill,f=c._reject,p=0,_=t.length;p<_;++p){var d=t[p];(d!==undefined||p in t)&&e.cast(d)._then(l,f,undefined,c,null)}return c}e.race=function(t){return s(t,undefined)},e.prototype.race=function(){return s(this,undefined)}}},{"./util":36}],28:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o,s){var a=t("./util"),u=a.tryCatch;function h(t,i,n,r){this.constructor$(t);var s=e._getContext();this._fn=a.contextBind(s,i),n!==undefined&&(n=e.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:undefined,this._promise._captureStackTrace(),this._init$(undefined,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,i,r){return"function"!=typeof e?n("expecting a function but got "+a.classString(e)):new h(t,e,i,r).promise()}function f(t){this.accum=t,this.array._gotAccum(t);var i=r(this.value,this.array._promise);return i instanceof e?(this.array._currentCancellable=i,i._then(p,undefined,undefined,this,undefined)):p.call(this,i)}function p(t){var i,n=this.array,r=n._promise,o=u(n._fn);r._pushContext(),(i=n._eachValues!==undefined?o.call(r._boundValue(),t,this.index,this.length):o.call(r._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(n._currentCancellable=i);var a=r._popContext();return s.checkForgottenReturns(i,a,n._eachValues!==undefined?"Promise.each":"Promise.reduce",r),i}a.inherits(h,i),h.prototype._gotAccum=function(t){this._eachValues!==undefined&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},h.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},h.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},h.prototype._iterate=function(t){var i,n;this._values=t;var r=t.length;this._initialValue!==undefined?(i=this._initialValue,n=0):(i=e.resolve(t[0]),n=1),this._currentCancellable=i;for(var o=n;o<r;++o){var s=t[o];s instanceof e&&s.suppressUnhandledRejections()}if(!i.isRejected())for(;n<r;++n){var a={accum:null,value:t[n],index:n,length:r,array:this};i=i._then(f,undefined,undefined,a,undefined),0==(127&n)&&i._setNoAsyncGuarantee()}this._eachValues!==undefined&&(i=i._then(this._eachComplete,undefined,undefined,this,undefined)),i._then(c,c,undefined,i,this)},e.prototype.reduce=function(t,e){return l(this,t,e,null)},e.reduce=function(t,e,i,n){return l(t,e,i,n)}}},{"./util":36}],29:[function(t,e,i){"use strict";var n,r=t("./util"),o=r.getNativePromise();if(r.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,a=process.nextTick;n=r.isRecentNode?function(t){s.call(global,t)}:function(t){a.call(process,t)}}else if("function"==typeof o&&"function"==typeof o.resolve){var u=o.resolve();n=function(t){u.then(t)}}else n="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var t=document.createElement("div"),e={attributes:!0},i=!1,n=document.createElement("div");new MutationObserver((function(){t.classList.toggle("foo"),i=!1})).observe(n,e);return function(r){var o=new MutationObserver((function(){o.disconnect(),r()}));o.observe(t,e),i||(i=!0,n.classList.toggle("foo"))}}();e.exports=n},{"./util":36}],30:[function(t,e,i){"use strict";e.exports=function(e,i,n){var r=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,i),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var i=new r;return i._bitField=33554432,i._settledValueField=t,this._promiseResolved(e,i)},o.prototype._promiseRejected=function(t,e){var i=new r;return i._bitField=16777216,i._settledValueField=t,this._promiseResolved(e,i)},e.settle=function(t){return n.deprecated(".settle()",".reflect()"),new o(t).promise()},e.allSettled=function(t){return new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,i){"use strict";e.exports=function(e,i,n){var r=t("./util"),o=t("./errors").RangeError,s=t("./errors").AggregateError,a=r.isArray,u={};function h(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var i=new h(t),r=i.promise();return i.setHowMany(e),i.init(),r}r.inherits(h,i),h.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(undefined,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},h.prototype.init=function(){this._initialized=!0,this._init()},h.prototype.setUnwrap=function(){this._unwrap=!0},h.prototype.howMany=function(){return this._howMany},h.prototype.setHowMany=function(t){this._howMany=t},h.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},h.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},h.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},h.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},h.prototype._fulfilled=function(){return this._totalResolved},h.prototype._rejected=function(){return this._values.length-this.length()},h.prototype._addRejected=function(t){this._values.push(t)},h.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},h.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},h.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},h.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return c(t,e)},e.prototype.some=function(t){return c(this,t)},e._SomePromiseArray=h}},{"./errors":12,"./util":36}],32:[function(t,e,i){"use strict";e.exports=function(t){function e(t){t!==undefined?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():undefined):(this._bitField=0,this._settledValueField=undefined)}e.prototype._settledValue=function(){return this._settledValueField};var i=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return r.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return i.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,i){"use strict";e.exports=function(e,i){var n=t("./util"),r=n.errorObj,o=n.isObject;var s={}.hasOwnProperty;return function(t,a){if(o(t)){if(t instanceof e)return t;var u=function(t){try{return function(t){return t.then}(t)}catch(e){return r.e=e,r}}(t);if(u===r){a&&a._pushContext();var h=e.reject(u.e);return a&&a._popContext(),h}if("function"==typeof u){if(function(t){try{return s.call(t,"_promise0")}catch(e){return!1}}(t)){h=new e(i);return t._then(h._fulfill,h._reject,undefined,h,null),h}return function(t,o,s){var a=new e(i),u=a;s&&s._pushContext();a._captureStackTrace(),s&&s._popContext();var h=!0,c=n.tryCatch(o).call(t,l,f);h=!1,a&&c===r&&(a._rejectCallback(c.e,!0,!0),a=null);function l(t){a&&(a._resolveCallback(t),a=null)}function f(t){a&&(a._rejectCallback(t,h,!0),a=null)}return u}(t,u,a)}}return t}}},{"./util":36}],34:[function(t,e,i){"use strict";e.exports=function(e,i,n){var r=t("./util"),o=e.TimeoutError;function s(t){this.handle=t}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,r){var o,u;return r!==undefined?(o=e.resolve(r)._then(a,null,null,t,undefined),n.cancellation()&&r instanceof e&&o._setOnCancel(r)):(o=new e(i),u=setTimeout((function(){o._fulfill()}),+t),n.cancellation()&&o._setOnCancel(new s(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};e.prototype.delay=function(t){return u(t,this)};function h(t){return clearTimeout(this.handle),t}function c(t){throw clearTimeout(this.handle),t}e.prototype.timeout=function(t,e){var i,a;t=+t;var u=new s(setTimeout((function(){i.isPending()&&function(t,e,i){var n;n="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),r.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n),null!=i&&i.cancel()}(i,e,a)}),t));return n.cancellation()?(a=this.then(),(i=a._then(h,c,undefined,u,undefined))._setOnCancel(u)):i=this._then(h,c,undefined,u,undefined),i}}},{"./util":36}],35:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o,s){var a=t("./util"),u=t("./errors").TypeError,h=t("./util").inherits,c=a.errorObj,l=a.tryCatch,f={};function p(t){setTimeout((function(){throw t}),0)}function _(t,i){var r=0,s=t.length,a=new e(o);return function u(){if(r>=s)return a._fulfill();var o=function(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[r++]);if(o instanceof e&&o._isDisposable()){try{o=n(o._getDisposer().tryDispose(i),t.promise)}catch(h){return p(h)}if(o instanceof e)return o._then(u,p,null,null,null)}u()}(),a}function d(t,e,i){this._data=t,this._promise=e,this._context=i}function g(t,e,i){this.constructor$(t,e,i)}function v(t){return d.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function m(t){this.length=t,this.promise=null,this[t-1]=null}d.prototype.data=function(){return this._data},d.prototype.promise=function(){return this._promise},d.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():f},d.prototype.tryDispose=function(t){var e=this.resource(),i=this._context;i!==undefined&&i._pushContext();var n=e!==f?this.doDispose(e,t):null;return i!==undefined&&i._popContext(),this._promise._unsetDisposable(),this._data=null,n},d.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},h(g,d),g.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},m.prototype._resultCancelled=function(){for(var t=this.length,i=0;i<t;++i){var n=this[i];n instanceof e&&n.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return i("you must pass at least 2 arguments to Promise.using");var r,o=arguments[t-1];if("function"!=typeof o)return i("expecting a function but got "+a.classString(o));var u=!0;2===t&&Array.isArray(arguments[0])?(t=(r=arguments[0]).length,u=!1):(r=arguments,t--);for(var h=new m(t),f=0;f<t;++f){var p=r[f];if(d.isDisposer(p)){var g=p;(p=p.promise())._setDisposable(g)}else{var y=n(p);y instanceof e&&(p=y._then(v,null,null,{resources:h,index:f},undefined))}h[f]=p}var b=new Array(h.length);for(f=0;f<b.length;++f)b[f]=e.resolve(h[f]).reflect();var E=e.all(b).then((function(t){for(var e=0;e<t.length;++e){var i=t[e];if(i.isRejected())return c.e=i.error(),c;if(!i.isFulfilled())return void E.cancel();t[e]=i.value()}T._pushContext(),o=l(o);var n=u?o.apply(undefined,t):o(t),r=T._popContext();return s.checkForgottenReturns(n,r,"Promise.using",T),n})),T=E.lastly((function(){var t=new e.PromiseInspection(E);return _(h,t)}));return h.promise=T,T._setOnCancel(h),T},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=undefined},e.prototype.disposer=function(t){if("function"==typeof t)return new g(t,this,r());throw new u}}},{"./errors":12,"./util":36}],36:[function(t,e,i){"use strict";var n=t("./es5"),r="undefined"==typeof navigator,o={e:{}},s,a="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this!==undefined?this:null;function u(){try{var t=s;return s=null,t.apply(this,arguments)}catch(e){return o.e=e,o}}function h(t){return s=t,u}var c=function(t,e){var i={}.hasOwnProperty;function n(){for(var n in this.constructor=t,this.constructor$=e,e.prototype)i.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}return n.prototype=e.prototype,t.prototype=new n,t.prototype};function l(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function f(t){return"function"==typeof t||"object"==typeof t&&null!==t}function p(t){return l(t)?new Error(w(t)):t}function _(t,e){var i,n=t.length,r=new Array(n+1);for(i=0;i<n;++i)r[i]=t[i];return r[i]=e,r}function d(t,e,i){if(!n.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:undefined;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:i:void 0}function g(t,e,i){if(l(t))return t;var r={value:i,configurable:!0,enumerable:!1,writable:!0};return n.defineProperty(t,e,r),t}function v(t){throw t}var m=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var i=0;i<t.length;++i)if(t[i]===e)return!0;return!1};if(n.isES5){var i=Object.getOwnPropertyNames;return function(t){for(var r=[],o=Object.create(null);null!=t&&!e(t);){var s;try{s=i(t)}catch(c){return r}for(var a=0;a<s.length;++a){var u=s[a];if(!o[u]){o[u]=!0;var h=Object.getOwnPropertyDescriptor(t,u);null!=h&&null==h.get&&null==h.set&&r.push(u)}}t=n.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(i){if(e(i))return[];var n=[];t:for(var o in i)if(r.call(i,o))n.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;n.push(o)}return n}}(),y=/this\s*\.\s*\S+\s*=/;function b(t){try{if("function"==typeof t){var e=n.names(t.prototype),i=n.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),o=y.test(t+"")&&n.names(t).length>0;if(i||r||o)return!0}return!1}catch(s){return!1}}function E(t){function e(){}e.prototype=t;var i=new e;function n(){return typeof i.foo}return n(),n(),t}var T=/^[a-z$_][a-z$_0-9]*$/i;function C(t){return T.test(t)}function P(t,e,i){for(var n=new Array(t),r=0;r<t;++r)n[r]=e+r+i;return n}function w(t){try{return t+""}catch(e){return"[no string representation]"}}function A(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function O(t){try{g(t,"isOperational",!0)}catch(e){}}function M(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function S(t){return A(t)&&n.propertyIsWritable(t,"stack")}var R="stack"in new Error?function(t){return S(t)?t:new Error(w(t))}:function(t){if(S(t))return t;try{throw new Error(w(t))}catch(e){return e}};function x(t){return{}.toString.call(t)}function I(t,e,i){for(var r=n.names(t),o=0;o<r.length;++o){var s=r[o];if(i(s))try{n.defineProperty(e,s,n.getDescriptor(t,s))}catch(a){}}}var D=function(t){return n.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var k="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,i=[],n=t[Symbol.iterator]();!(e=n.next()).done;)i.push(e.value);return i};D=function(t){return n.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?k(t):null}}var j="undefined"!=typeof process&&"[object process]"===x(process).toLowerCase(),N="undefined"!=typeof process&&"undefined"!=typeof process.env,L;function B(t){return N?process.env[t]:undefined}function U(){if("function"==typeof Promise)try{if("[object Promise]"===x(new Promise((function(){}))))return Promise}catch(t){}}function V(t,e){if(null===t||"function"!=typeof e||e===L)return e;null!==t.domain&&(e=t.domain.bind(e));var i=t.async;if(null!==i){var n=e;e=function(){var t=new Array(2).concat([].slice.call(arguments));return t[0]=n,t[1]=this,i.runInAsyncScope.apply(i,t)}}return e}var F={setReflectHandler:function(t){L=t},isClass:b,isIdentifier:C,inheritedDataKeys:m,getDataPropertyOrDefault:d,thrower:v,isArray:n.isArray,asArray:D,notEnumerableProp:g,isPrimitive:l,isObject:f,isError:A,canEvaluate:r,errorObj:o,tryCatch:h,inherits:c,withAppended:_,maybeWrapAsError:p,toFastProperties:E,filledRange:P,toString:w,canAttachTrace:S,ensureErrorObject:R,originatesFromRejection:M,markAsOriginatingFromRejection:O,classString:x,copyDescriptors:I,isNode:j,hasEnvVariables:N,env:B,global:a,getNativePromise:U,contextBind:V},G;F.isRecentNode=F.isNode&&(process.versions&&process.versions.node?G=process.versions.node.split(".").map(Number):process.version&&(G=process.version.split(".").map(Number)),0===G[0]&&G[1]>10||G[0]>0),F.nodeSupportsAsyncResource=F.isNode&&function(){var e=!1;try{e="function"==typeof t("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(i){e=!1}return e}(),F.isNode&&F.toFastProperties(process);try{throw new Error}catch(H){F.lastLineError=H}e.exports=F},{"./es5":13,async_hooks:undefined}]},{},[4])(4)})),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)},,function(t,e,i){"use strict";function n(){var t,e,i,n;Array.from||(Array.from=(t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},i=Math.pow(2,53)-1,n=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),i)},function(t){var i=this,r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,s=arguments.length>1?arguments[1]:void undefined;if(void 0!==s){if(!e(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var a,u=n(r.length),h=e(i)?Object(new i(u)):new Array(u),c=0;c<u;)a=r[c],h[c]=s?void 0===o?s(a,c):s.call(o,a,c):a,c+=1;return h.length=u,h})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},writable:!0,configurable:!0}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){for(var n=atob(this.toDataURL(e,i).split(",")[1]),r=n.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=n.charCodeAt(s);t(new Blob([o],{type:e||"image/png"}))}})}i.r(e);var r,o=i(2),s=i(1),a=i(0),u=function(){function t(){this.matrix=[],this.all=[],this.result=[],this._flipNum=0,this._flipNumX=0,this._flipNumY=0,this._tAngle=0,this._curMode=null}return t.prototype.calc3x3Matrix=function(t,e){for(var i=[],n=0;n<3;n++)for(var r=0;r<3;r++){var o=t[3*n+0]*e[r]+t[3*n+1]*e[r+3]+t[3*n+2]*e[r+6];i.push(o)}return i},t.prototype.rotateMatrix=function(t,e,i){t=t/180*Math.PI;var n=Math.sin(t),r=Math.cos(t);return[r,-n,(1-r)*e+i*n,n,r,(1-r)*i-e*n,0,0,1]},t.prototype.moveMatrix=function(t,e){return[1,0,t,0,1,e,0,0,1]},t.prototype.scaleMatrix=function(t){return[t,0,0,0,t,0,0,0,1]},t.prototype.flipMatrix=function(t,e){return[1-2*Math.pow(t,2),-2*t*e,0,-2*t*e,1-2*Math.pow(e,2),0,0,0,1]},t.prototype.toCanvasMatrix=function(t){for(var e=[0,3,1,4,2,5],i=0;i<e.length;i++)e[i]=t[e[i]];return e},t.prototype.getLatestResult=function(){return 0!==this.result.length?this.result[this.result.length-1].slice():null},t.prototype.rotatePoint=function(t,e,i,n,r){return r=r/180*Math.PI,{x:(t-i)*Math.cos(r)-(e-n)*Math.sin(r)+i,y:(t-i)*Math.sin(r)+(e-n)*Math.cos(r)+n}},t.prototype.rotateRect=function(t,e,i,n,r){var o=t+i/2,s=e+n/2,a=this.rotatePoint(t,e,o,s,r),u=this.rotatePoint(t+i,e,o,s,r),h=this.rotatePoint(t+i,e+n,o,s,r),c=this.rotatePoint(t,e+n,o,s,r),l=[u.x,a.x,c.x,h.x].sort((function(t,e){return t-e})),f=[u.y,a.y,c.y,h.y].sort((function(t,e){return t-e}));return{x:l[0],y:f[0],width:l[3]-l[0],height:f[3]-f[0]}},t.prototype.calcLineEquation=function(t,e){var i=e.y-t.y,n=t.x-e.x,r=e.x*t.y-t.x*e.y,o=i*i+n*n,s=[];return s.push((n*n-i*i)/o,-2*i*n/o,-2*i*r/o,-2*i*n/o,(i*i-n*n)/o,-2*n*r/o,0,0,1/o),s},t.prototype.setTransform=function(t){var e=this;this.matrix.forEach((function(i){i=e.toCanvasMatrix(i),t.transform.apply(t,i)}))},t.prototype.setPointTransform=function(t,e){for(var i=[],n=0;n<this.matrix.length;n++){var r=t*(i=this.matrix[n])[0]+e*i[3],o=t*i[1]+e*i[4];t=r,e=o}return{x:t,y:e}},t.prototype.crop=function(t,e,i,n){this._clear();var r={type:"crop",left:t,top:e,width:i,height:n};return this.all.push(r),r},t.prototype.erase=function(t,e,i,n,r){this._clear();var o={type:"erase",left:t,top:e,width:i,height:n,color:r};return this.all.push(o),o},t.prototype.changePageSize=function(t,e){this._clear();var i={type:"changeSize",width:t,height:e};return this.all.push(i),i},t.prototype.flip=function(t){this._flipNum+=1;var e=this._tAngle/180*Math.PI,i=Math.cos(e),n=-Math.sin(e),r=-Math.sin(e),o=-Math.cos(e);this._flipNumX%2&&(r=-r,o=-o),this._flipNumY%2&&(i=-i,n=-n);var s={x:i,y:n},a={x:r,y:o},u={x:0,y:0},h=null;if(0===t)this._flipNumX+=1,h=this.calcLineEquation(s,u);else{if(1!==t)return;this._flipNumY+=1,h=this.calcLineEquation(a,u)}var c={type:"flip",matrix:h,direction:t};this.all.push(c),this.matrix.push(h);var l=this.getLatestResult();return l=l?this.calc3x3Matrix(h,l):h,this.result.push(l),c},t.prototype.calcFlipMatrix=function(t,e){return[1-2*t*t,-2*t*e,0,-2*t*e,1-2*e*e,0,0,0,1]},t.prototype.rotate=function(t,e,i,n){var r=!1;null!==this._curMode&&(this._curMode!==n?(this._clear(),r=!1):r=!0),this._curMode=n,this._flipNum%2?(this._tAngle-=t,t=-t):this._tAngle+=t;var o=t,s=this.rotateMatrix(t,e||0,i||0);r&&(o=this._tAngle);var a={type:"rotate",matrix:s,mode:n,angle:t,calcAngle:o};this.all.push(a),this.matrix.push(s);var u=this.getLatestResult();return u=u?this.calc3x3Matrix(s,u):s,this.result.push(u),a},t.prototype.translate=function(t,e){var i=this.moveMatrix(t,e);this.all.push(i),this.matrix.push(i);var n=this.getLatestResult();n=n?this.calc3x3Matrix(i,n):i,this.result.push(n)},t.prototype.calcTranslateDis=function(t,e){var i=this._tAngle/180*Math.PI,n=t*Math.cos(i),r=-t*Math.sin(i),o=e*Math.sin(i),s=e*Math.cos(i);return this._flipNumX%2&&(o=-o,s=-s),this._flipNumY%2&&(n=-n,r=-r),{x:n+o,y:r+s}},t.prototype.reset=function(){this.all=[],this._clear(),this._curMode=null},t.prototype._clear=function(){this.result=[],this.matrix=[],this._tAngle=0,this._flipNumX=0,this._flipNumY=0,this._flipNum=0},t}(),h=function(){function t(t,e){this.uid=null,this.minData=null,this.oriData=null,this.customData={},this.tags=[],this.active=!1,this.activeMin=!1,this.minTask=null,this.load=!1,this.show=[],this.overlays=[],this.img=null,this.edt=null,this.vws=[],this.oriType=null,this.minType=null,this.tempWidth=0,this.tempHeight=0,this.uid=t,this.setTempSize(e.width,e.height),this.edt=new u}return t.prototype.setTempSize=function(t,e){this.tempWidth=t,this.tempHeight=e},t.prototype.addViewer=function(t){-1===this.vws.indexOf(t)&&this.vws.push(t)},t.prototype.rmViewer=function(t){var e=this.vws.indexOf(t);-1!==e&&this.vws.splice(e,1)},t.prototype.setTags=function(t){t.length<1||(this.tags=t.slice())},t.prototype.getTags=function(){return this.tags.slice()},t}(),c=undefined&&undefined.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},l=undefined&&undefined.__generator||function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n["return"]:o[0]?n["throw"]||((r=n["return"])&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},f=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},p=function(){function t(t,e,i){var n=this;this._pub=e,this._db=i,this._on(a.b.APPEND_SYNC,(function(t,e){n.appendSync(t,e)})),this._initEvent()}return t.prototype._initEvent=function(){var t=this;this._on(a.b.UPDATE_SYNC,(function(e,i,n){t.updateSync(e,i,n)})),this._on(a.b.REMOVE_PAGE,(function(e,i){i.forEach((function(e){var i=t._db.getMid(e);i&&(Object(s.D)(i.minData),Object(s.D)(i.oriData)),t._db.removeMid(e),t._db.getDataAsync(e).then((function(t){t.oriData&&Object(s.D)(t.oriData),t.minData&&Object(s.D)(t.oriData)}))["catch"]((function(t){})),t._db.removeDataAsync(e),t._db.removeMetadata(e)}))})),this._on(a.b.RENAME_TAG,(function(e,i,n){n.forEach((function(n){var r=t._db.getMid(n);if(r){var o=r.tags.indexOf(e);-1!==o&&r.tags.splice(o,1,i)}t._db.getDataAsync(n).then((function(r){if(r.tags){var o=r.tags.indexOf(e);-1!==o&&(r.tags.splice(o,1,i),t._db.updateDataAsync(n,r)["catch"]((function(t){})))}}))["catch"]((function(t){}))}))})),this._on(a.b.EMPTY_TAG,(function(e,i,n){i.forEach((function(i){var n=t._db.getMid(i);if(n){var r=n.tags.indexOf(e);-1!==r&&n.tags.splice(r,1)}t._db.getDataAsync(i).then((function(n){if(n.tags){var r=n.tags.indexOf(e);-1!==r&&(n.tags.splice(r,1),t._db.updateDataAsync(i,n)["catch"]((function(t){})))}}))["catch"]((function(t){}))}))})),this._on(a.b.ADD_PAGE_TAG,(function(e,i,n){var r=t._db.getMid(e);r&&(-1===r.tags.indexOf(i)&&r.tags.push(e));t._db.getDataAsync(e).then((function(n){n.tags&&(-1===n.tags.indexOf(i)&&(n.tags.push(e),t._db.updateDataAsync(e,n)["catch"]((function(t){}))))}))["catch"]((function(t){}))})),this._on(a.b.REMOVE_PAGE_TAG,(function(e,i,n){var r=t._db.getMid(e);if(r){var o=r.tags.indexOf(i);-1!==o&&r.tags.splice(o,1)}t._db.getDataAsync(e).then((function(n){if(n.tags){var r=n.tags.indexOf(i);-1!==r&&(n.tags.splice(r,1),t._db.updateDataAsync(e,n)["catch"]((function(t){})))}}))["catch"]((function(t){}))}))},t.prototype.appendSync=function(t,e){if(!this._ckStr(t)||!this._ckArray(e))return[];var i=this._load(t,e);return this._ok(),i},t.prototype.insertSync=function(t,e,i){if(!this._ckStr(t)||!this._ckArray(e))return this._thrEr(a.a.PARAM_TYPE),[];if(i===undefined)return this.appendSync(t,e);var n=this._load(t,e,i);return this._ok(),n},t.prototype.updateSync=function(t,e,i){void 0===i&&(i=!0),this._emit(a.d.LOG,"Invoking DataControl#updateSync.");var n=this._db.getMid(t);if(!n)return!1;this._db.updateMetadata(t,e.metadata),e.customData&&(n.customData=e.customData),e.tags&&n.setTags(e.tags),i&&(this._revokeUrl(n.oriData),this._revokeUrl(n.minData)),n.minData=null,!n.overlays.length&&e.minData&&Object(s.x)(e.minData)&&(n.minData=e.minData),n.oriData=null,n.img=null,n.active=!1,n.activeMin=!1,n.minTask=null,n.setTempSize(e.metadata.width,e.metadata.height),this._db.updateMid(t,n),e.tags||(e.tags=n.getTags()),e.customData||(e.customData=n.customData),this._db.updateDataAsync(t,e),this._emit(a.b.UPDATE_FOR_VIEWER,t,e)},t.prototype._revokeUrl=function(t){var e=window.URL||window.webkitURL;if(/^blob:/.test(t))return e.revokeObjectURL(t)},t.prototype._load=function(t,e,i){for(var n=this,r=[],o=[],u=e.length,c=function(t){var i={uid:Object(s.I)(11),data:e[t]};o.push(i),r.push(i.uid);var u=Object.assign({},i.data.metadata);l._db.addMetadata(i.uid,u),l._db.addDataAsync(i.uid,i.data).then((function(t){n._emit(a.d.DB_SAVE_OK,i.uid,t)}))["catch"]((function(t){n._emit(a.d.DB_SAVE_FAILED,i.uid,t)}));var c=new h(i.uid,u);i.data.minData&&Object(s.x)(i.data.minData)&&(c.minData=i.data.minData),c.customData=i.data.customData||{},c.setTags(i.data.tags||[]),l._db.addMid(i.uid,c),l._emit(a.b.LOAD_TAG,i)},l=this,f=0;f<u;f++)c(f);return this._emit(a.b.LOAD_FILE,t,o,i),r},t.prototype._convertData=function(t){return new Promise((function(e,i){if(Object(s.v)(t))e(t);else{var n=new XMLHttpRequest;n.onload=function(){var t=URL.createObjectURL(n.response);e(t)},n.open("GET",t,!0),n.responseType="blob",n.send()}}))},t.prototype.addData=function(t,e){return c(this,void 0,void 0,(function(){var i=this;return l(this,(function(n){switch(n.label){case 0:return this._ckStr(t)&&Object(s.v)(e)?[4,this._db.addDataAsync(t,e).then((function(t){return i._ok(),t}))["catch"]((function(t){return i._thrEr(a.a.IMG_STORAGE_FAILED),i._err(a.a.IMG_STORAGE_FAILED.message)}))]:(this._thrEr(a.a.PARAM_TYPE),[2,this._err(a.a.PARAM_TYPE.message)]);case 1:return[2,n.sent()]}}))}))},t.prototype.getData=function(t){return c(this,void 0,void 0,(function(){var e=this;return l(this,(function(i){switch(i.label){case 0:return this._ckStr(t)?[4,this._db.getDataAsync(t).then((function(t){return e._ok(),Promise.resolve(t)}))["catch"]((function(t){return e._thrEr(a.a.IMG_NOT_EXIST),e._err(a.a.IMG_NOT_EXIST.message)}))]:(this._thrEr(a.a.PARAM_TYPE),[2,this._err(a.a.PARAM_TYPE.message)]);case 1:return[2,i.sent()]}}))}))},t.prototype.removeData=function(t){return c(this,void 0,void 0,(function(){var e=this;return l(this,(function(i){switch(i.label){case 0:return this._ckStr(t)?[4,this._db.removeDataAsync(t).then((function(t){return e._ok(),t}))["catch"]((function(t){return e._thrEr(a.a.IMG_REMOVE_FAILED),e._err(a.a.IMG_REMOVE_FAILED.message)}))]:(this._thrEr(a.a.PARAM_TYPE),[2,this._err(a.a.PARAM_TYPE.message)]);case 1:return[2,i.sent()]}}))}))},t.prototype.updateData=function(t,e){return c(this,void 0,void 0,(function(){var i=this;return l(this,(function(n){switch(n.label){case 0:return this._ckStr(t)?[4,this._db.updateDataAsync(t,e).then((function(t){return i._ok(),t}))["catch"]((function(t){return i._thrEr(a.a.IMG_NOT_EXIST),i._err(a.a.IMG_NOT_EXIST.message)}))]:(this._thrEr(a.a.PARAM_TYPE),[2,this._err(a.a.PARAM_TYPE.message)]);case 1:return[2,n.sent()]}}))}))},t.prototype._err=function(t){return Promise.reject(new Error(t))},t.prototype._on=function(t,e){this._pub.on(t,e)},t.prototype._emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._pub).emit.apply(e,f([t],i))},t.prototype._ckArray=function(t){return!!Object(s.l)(t)||(this._thrEr(a.a.PARAM_TYPE),!1)},t.prototype._ckStr=function(t){return!!Object(s.x)(t)||(this._thrEr(a.a.PARAM_TYPE),!1)},t.prototype._thrEr=function(t){this._emit(a.d.ERROR,t)},t.prototype._ok=function(){this._emit(a.d.ERROR,a.a.OK)},t}(),_=function(){function t(t){this.cssWidth=0,this.cssHeight=0,this.dpr=1,this.canvas=null,this.ctx=null,this.dpr=t.dpr}return t.prototype.bind=function(t){this.canvas=t,this.ctx=t.getContext("2d"),this.ctx.imageSmoothingEnabled=!1},t.prototype.unbind=function(){this.canvas=null,this.ctx=null},t.prototype.clear=function(t,e,i,n){var r;null===(r=this.canvas)||void 0===r||r.clearRect(t,e,i,n)},t.prototype.size=function(t,e){this.cssWidth=t,this.cssHeight=e,this.innerWidth=t*this.dpr,this.innerHeight=e*this.dpr},t}(),d=undefined&&undefined.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),g=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e}(_),v=undefined&&undefined.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=function(t){function e(e){var i=t.call(this,e)||this;return i.maskColor="rgba(200,200,200,0.5)",i.isMask=!0,i}return v(e,t),e.prototype.setMaskColor=function(t){this.maskColor=t},e.prototype.getMaskColor=function(){return this.maskColor},e}(_),y=undefined&&undefined.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),b=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.setBackGroundColor=function(t){this.canvas.style.background=t},e}(_),E=undefined&&undefined.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),T=function(t){function e(e,i){var n=t.call(this,e)||this;return n.uid=null,n.img=null,n._cvs=null,n._ctx=null,n.saveColor=null,n.saveType="image/jpeg",n._curOpType=null,n.useType=null,n._cvs=document.createElement("canvas"),n._cvs.dvsUid="_tempOffCvs",n._ctx=n._cvs.getContext("2d"),n._ctx.imageSmoothingEnabled=!1,n.useType=i,n}return E(e,t),e.prototype.setCanvasSize=function(t,e){this.canvas.width=t,this.canvas.height=e,this.cssWidth=t,this.cssHeight=e,this.innerWidth=t,this.innerHeight=e},e.prototype._fillRect=function(t,e,i){return"image/png"!==this.saveType&&(t.save(),t.fillStyle=this.saveColor,t.fillRect(0,0,e,i),t.restore(),!0)},e.prototype.rotate=function(t,e,i){var n=this.ctx,r=!1,o=null;0===t.mode&&(o=Object(s.E)(0,0,this._cvs.width,this._cvs.height,t.calcAngle),r=!0),null!==this._curOpType&&this._curOpType!==t.mode&&(this._cvs.width=this.innerWidth,this._cvs.height=this.innerHeight,this._ctx.drawImage(this.canvas,0,0,this.innerWidth,this.innerHeight)),this._curOpType=t.mode,r&&this.setCanvasSize(o.width,o.height),n.clearRect(0,0,this.innerWidth,this.innerHeight),n.save(),this._fillRect(n,this.innerWidth,this.innerHeight),n.translate(this.innerWidth/2,this.innerHeight/2),i.edt.setTransform(n),n.drawImage(this._cvs,-this._cvs.width/2,-this._cvs.height/2,this._cvs.width,this._cvs.height),n.restore(),r&&e.setNaturalSize(o.width,o.height)},e.prototype.flip=function(t,e,i){var n=this.ctx;n.clearRect(0,0,this.innerWidth,this.innerHeight),n.save(),this._fillRect(n,this.innerWidth,this.innerHeight),n.translate(this.innerWidth/2,this.innerHeight/2),i.edt.setTransform(n),n.drawImage(this._cvs,-this._cvs.width/2,-this._cvs.height/2,this._cvs.width,this._cvs.height),n.restore()},e.prototype.crop=function(t,e){var i=this.ctx;this._cvs.width=t.width,this._cvs.height=t.height,this._ctx.drawImage(this.canvas,t.left,t.top,t.width,t.height,0,0,t.width,t.height),this.setCanvasSize(t.width,t.height),i.drawImage(this._cvs,0,0),e.setNaturalSize(t.width,t.height)},e.prototype.erase=function(t,e){var i=this.ctx;this._ctx.save(),this._ctx.fillStyle=t.color||"#ffffff",this._ctx.fillRect(t.left,t.top,t.width,t.height),this._ctx.restore(),i.save(),i.fillStyle=t.color||"#ffffff",i.fillRect(t.left,t.top,t.width,t.height),i.restore()},e.prototype.changePageSize=function(t,e){var i=this.ctx;this._cvs.width=t.width,this._cvs.height=t.height,this._ctx.save(),this._ctx.drawImage(this.canvas,0,0,t.width,t.height),this._ctx.restore(),this.setCanvasSize(t.width,t.height),i.drawImage(this._cvs,0,0),e.setNaturalSize(t.width,t.height)},e.prototype.render=function(t,e,i,n){var r=this;if(t!==this.uid){this.uid=t,this.img=e,this.setCanvasSize(e.naturalWidth,e.naturalHeight),this._cvs.width=e.naturalWidth,this._cvs.height=e.naturalHeight,this._ctx.save(),this._ctx.drawImage(e,0,0,e.naturalWidth,e.naturalHeight),this._ctx.restore();var o=this.ctx;o.save(),o.drawImage(e,0,0,e.naturalWidth,e.naturalHeight),o.restore();var s=n.edt.all;n.edt.reset(),s.forEach((function(t){"rotate"===t.type?(n.edt.rotate(t.angle,0,0,t.mode),r.rotate(t,i,n)):"flip"===t.type?(n.edt.flip(t.direction),r.flip(t,i,n)):"crop"===t.type?(n.edt.crop(t.left,t.top,t.width,t.height),r.crop(t,i)):"erase"===t.type?(n.edt.erase(t.left,t.top,t.width,t.height,t.color),r.erase(t,i)):"changeSize"===t.type&&(n.edt.changePageSize(t.width,t.height),r.changePageSize(t,i))})),o.save(),o.restore()}return this.canvas},e.prototype.reset=function(){this.setCanvasSize(1,1),this._cvs.width=1,this._cvs.height=1,this.uid=null,this._curOpType=null},e}(_),C=function(){function t(){this.saveColor="#ffffff",this._dpr=Object(s.d)(),this.mainCvs=new b({dpr:this._dpr}),this.annoCvs=new g({dpr:this._dpr}),this.cropCvs=new m({dpr:this._dpr}),this.offCvs=new T({dpr:this._dpr},"off"),this.saveCvs=new T({dpr:this._dpr},"save"),this._init(this.offCvs),this._init(this.saveCvs)}return t.prototype.newSaveCvs=function(){var t=new T({dpr:this._dpr},"save");return this._init(t),t.saveColor=this.saveColor,t},t.prototype._init=function(t){var e=document.createElement("canvas");e.dvsUid="_init",t.bind(e)},t.prototype.setSaveBg=function(t){this.saveColor=t,this.offCvs.saveColor=t,this.saveCvs.saveColor=t},t.prototype.setSaveType=function(t){this.saveCvs.saveType=t,this.offCvs.saveType=t},t.prototype.bind=function(t){var e=t.main,i=t.annotation,n=t.cropper;e&&this.mainCvs.bind(e),i&&this.annoCvs.bind(i),n&&this.cropCvs.bind(n)},t.prototype.unbind=function(t){"main"===t&&this.mainCvs.unbind(),"annotation"===t&&this.annoCvs.unbind(),"cropper"===t&&this.cropCvs.unbind()},t.prototype.setCanvasSize=function(t,e){this.mainCvs.size(t,e),this.annoCvs.size(t,e),this.cropCvs.size(t,e)},t}(),P=function(){function t(t){this.wrapper=null,this.isDragging=!1,this.isStart=!1,this.startX=0,this.timer=null,this.startTime=0,this.width=0,this.triggerDist=10,this.minDist=60,this.minTime=300,this.timer1=null,this.pages=null,this.callback=null,this.stateCb=null,this.touchNum=1,this._iPub=null,this.curPageUid=null,this.renderPageUid=null,this.loading=!1,this.isNew=!1,this._iPub=t,this.pages=[{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1}],this._initEvent()}return t.prototype._initEvent=function(){var t=this;this._iPub.on(a.d.AFTER_RENDER,(function(e){t.renderPageUid=e})),this._iPub.on(a.d.CURRENT_CHANGED,(function(e){t.curPageUid=e}))},t.prototype.setSlidePages=function(t){this.wrapper&&(this.pages=t,this.isNew=!0,this.showPages())},t.prototype.showPages=function(){var t=this;if(!this.loading&&this.isNew){this.loading=!0;var e=[];this.pages.forEach((function(i,n){var r=new Promise((function(e,r){var o,s,a=null===(s=null===(o=t.wrapper)||void 0===o?void 0:o.children[n])||void 0===s?void 0:s.children[0];if(a)if(a.style.width=i.width+"px",a.style.height=i.height+"px",a.src!==i.url){if(""===i.url)return a.src=i.url,e(n);a.onload=function(){e(n)},a.onerror=function(){e(n)},a.src=i.url}else e(n)}));e.push(r)})),Promise.all(e).then((function(){t.loading=!1,t.isNew=!1,t.showPages()}))["catch"]((function(t){}))}},t.prototype.startHandler=function(t){this.isDragging||(clearTimeout(this.timer),this.startTime=t.timeStamp,t.touches?(this.touchNum=t.touches.length,this.startX=t.touches[0].pageX):this.startX=t.pageX,this.touchNum>1?this.isStart=!1:this.isStart=!0)},t.prototype.moveHandler=function(t){var e;if(this.isStart&&!(this.touchNum>2)){var i=(t.touches?t.touches[0].pageX:t.pageX)-this.startX;Math.abs(i)>this.triggerDist&&(this.isDragging=!0,null===(e=this.stateCb)||void 0===e||e.call(this,!0),this._visible(!0),i>this.width?i=this.width:i<-this.width&&(i=-this.width)),this._translateX(i)}},t.prototype.endHandler=function(t){var e=this;if(this.isStart){var i=!0;(!t||t.touches&&(this.touchNum>1||1!==t.changedTouches.length))&&(i=!1),this.isStart=!1;var n=(t=t||{}).pageX-this.startX,r=t.timeStamp-this.startTime;this._transition("transform 0.2s linear");var o=this._calcDirection(r,n,i);this._callbackHandler(o),setTimeout((function(){e._adjustSrc(o)}),200),this._hideSlide()}},t.prototype.adj=function(t){if(this.wrapper){var e=this.wrapper.children;"prev"===t?this.wrapper.insertBefore(e[2],e[0]):"next"===t&&this.wrapper.appendChild(e[0]),this._reset()}},t.prototype._adjustSrc=function(t){var e=this;if(this.wrapper){var i=this.wrapper.children,n=i[0].children[0],r=i[2].children[0];"prev"===t?this._copyImg(r,n).then((function(t){e.wrapper.appendChild(i[1]),e._reset()})):"next"===t?this._copyImg(n,r).then((function(t){e.wrapper.insertBefore(i[1],i[0]),e._reset()})):this._reset()}},t.prototype._reset=function(){var t;this.isDragging=!1,null===(t=this.stateCb)||void 0===t||t.call(this,!1),this._transition(""),this._translateX(0)},t.prototype._copyImg=function(t,e){return t.style.width=e.style.width,t.style.height=e.style.height,new Promise((function(i,n){if(""===e.src)return t.src=e.src,i(!0);t.onload=function(){i(!0)},t.onerror=function(){i(!0)},t.src=e.src}))},t.prototype._calcDirection=function(t,e,i){var n,r;return i&&-1!==(null===(n=this.pages[0])||void 0===n?void 0:n.index)&&(e>this.minDist||t<this.minTime&&e>this.triggerDist)?"prev":i&&-1!==(null===(r=this.pages[2])||void 0===r?void 0:r.index)&&(e<-this.minDist||t<this.minTime&&e<-this.triggerDist)?"next":null},t.prototype._hideSlide=function(){var t=this;this.curPageUid!==this.renderPageUid||this.pages[1].uid!==this.curPageUid||this.isDragging?(clearTimeout(this.timer),this.timer=setTimeout((function(){t._hideSlide()}),220)):this._visible(!1)},t.prototype._callbackHandler=function(t){var e=this;t&&setTimeout((function(){var i;null===(i=e.callback)||void 0===i||i.call(e,t)}),210);var i=0;"prev"===t?i=this.width:"next"===t&&(i=-this.width),this._translateX(i)},t.prototype._translateX=function(t){this.wrapper.style.transform="translateX("+t+"px)"},t.prototype._visible=function(t){this.wrapper.style.visibility=t?"visible":"hidden"},t.prototype._transition=function(t){this.wrapper.style.transition=t},t.prototype.bindCb=function(t){this.callback=t},t.prototype.bind=function(t){this.wrapper=t},t.prototype.unbind=function(){this.wrapper=null},t.prototype.setSlideSize=function(t){if(!this.wrapper)return!1;t<120&&(this.minDist=t/2),this.width=t,this.wrapper.style.width=3*t+"px",this.wrapper.style.left=-t+"px";for(var e=0;e<3;e++)this.wrapper.children[e].style.width=t+"px"},t}(),w=function(){function t(t,e){this.useWorker=!0,this.workers_archive=[],this.taskUid=null,this.useWorker=t,this.cores=navigator.hardwareConcurrency||4,this.workerBlobURL=e}return t.prototype.resize=function(t,e,i,n){return this.useWorker?this.resizeWithWorker(t,e,i,n):this.resizeWithoutWorker(t,e,i,n)},t.prototype.resizeWithoutWorker=function(t,e,i,n){var r=t.width,o=t.height;e=Math.round(e);for(var s=o/(i=Math.round(i)),a=t.getContext("2d"),u=[],h=2*Math.ceil(o/this.cores/2),c=[],l=-1,f=0;f<this.cores;f++){var p=l+1;if(!(p>=o)){l=p+h-1,l=Math.min(l,o-1);var _;_=Math.min(h,o-p),u[f]={},u[f].source=a.getImageData(0,p,r,h),u[f].target=!0,u[f].start_y=Math.ceil(p/s),u[f].height=_;var d={width_source:r,height_source:u[f].height,width:e,height:Math.ceil(u[f].height/s),core:f,source:u[f].source.data.buffer||u[f].source.data};c[f]=d}}for(var g=c.length,v=[],m=0;m<g;m++){for(var y=c[m],b=y.core,E=y.width_source,T=y.height_source,C=y.width,P=y.height,w=E/C,A=T/P,O=Math.ceil(w/2),M=Math.ceil(A/2),S=new Uint8ClampedArray(y.source),R=(S.length,C*P*4),x=new ArrayBuffer(R),I=new Uint8ClampedArray(x,0,R),D=0;D<P;D++)for(var k=0;k<C;k++){var j=4*(k+D*C),N=0,L=0,B=0,U=0,V=0,F=0,G=0,H=D*A,z=Math.floor(k*w),W=Math.ceil((k+1)*w),Y=Math.floor(D*A),X=Math.ceil((D+1)*A);W=Math.min(W,E),X=Math.min(X,T);for(var K=Y;K<X;K++)for(var Z=Math.abs(H-K)/M,q=k*w,Q=Z*Z,$=z;$<W;$++){var J=Math.abs(q-$)/O,tt=Math.sqrt(Q+J*J);if(!(tt>=1)){var et=4*($+K*E);G+=(N=2*tt*tt*tt-3*tt*tt+1)*S[et+3],B+=N,S[et+3]<255&&(N=N*S[et+3]/250),U+=N*S[et],V+=N*S[et+1],F+=N*S[et+2],L+=N}}I[j]=U/L,I[j+1]=V/L,I[j+2]=F/L,I[j+3]=G/B}d={core:b,target:I};v.push(d)}for(var it=0;it<g;it++){var nt=v[it],rt=Math.ceil(u[it].height/s);if(u[it].target=a.createImageData(e,rt),u[it].target.data.set)u[it].target.data.set(nt.target);else for(var ot=u[it].target.data.length,st=0;st<ot;st++)u[it].target.data[st]=nt.target[st]}return Promise.resolve(u)},t.prototype.resizeWithWorker=function(t,e,i,n){var r=this,o=((new Date).getTime(),t.width),s=t.height;e=Math.round(e);var a=s/(i=Math.round(i));if(this.workers_archive.length>0)for(var u=0;u<this.cores;u++)this.workers_archive[u]!=undefined&&(this.workers_archive[u].terminate(),delete this.workers_archive[u]);this.workers_archive=new Array(this.cores);for(var h=t.getContext("2d"),c=[],l=2*Math.ceil(s/this.cores/2),f=-1,p=0;p<this.cores;p++){var _=f+1;if(!(_>=s)){f=_+l-1,f=Math.min(f,s-1);var d;d=Math.min(l,s-_),c[p]={},c[p].source=h.getImageData(0,_,o,l),c[p].target=!0,c[p].start_y=Math.ceil(_/a),c[p].height=d}}for(var g=[],v=function(t){if(c[t]==undefined)return"continue";0;var i=new Worker(m.workerBlobURL);m.workers_archive[t]=i;var s=new Promise((function(t,o){i.onmessage=function(i){var s,u;if(n!==r.taskUid){if(r.workers_archive.length>0)for(var l=0;l<r.cores;l++)r.workers_archive[l]!=undefined&&(null===(s=r.workers_archive[l])||void 0===s||s.terminate(),delete r.workers_archive[l]);r.workers_archive=new Array(r.cores),o(!1)}0;var f=i.data.core;null===(u=r.workers_archive[f])||void 0===u||u.terminate(),delete r.workers_archive[f];var p=Math.ceil(c[f].height/a);if(c[f].target=h.createImageData(e,p),c[f].target.data.set)c[f].target.data.set(i.data.target);else for(var _=c[f].target.data.length,d=0;d<_;d++)c[f].target.data[d]=i.data.target[d];t(f)}}));g.push(s);var u={width_source:o,height_source:c[t].height,width:e,height:Math.ceil(c[t].height/a),core:t,source:c[t].source.data.buffer||c[t].source.data};try{i.postMessage(u,[u.source])}catch(l){i.postMessage(u)}},m=this,y=0;y<this.cores;y++)v(y);return Promise.all(g).then((function(t){return Promise.resolve(c)}))["catch"]((function(t){return Promise.reject(t)}))},t}(),A=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},O=function(){function t(t,e,i,n,r,o,a){var u=this;this.uid=null,this.cvsOffW=0,this.cvsOffH=0,this.cvsCltW=0,this.cvsCltH=0,this.cvsInnerW=0,this.cvsInnerH=0,this.maxW=0,this.maxH=0,this.virW=0,this.virH=0,this.dpr=1,this.fitType="window",this.keepZoom=!0,this.clickZoom=!1,this.isFreeCrop=!1,this.zoom=1,this.zoomInDelta=1.2,this.zoomOutDelta=1.2,this.zoomDelta=1.2,this.scrL=0,this.scrT=0,this.disMode="single",this.opMode=0,this.curTab=null,this.curPages=[],this.iMargin=10,this.oMargin=10,this.rows=0,this.columns=0,this._mousedown=!1,this._pageX=0,this._pageY=0,this.rotateMode=1,this.saveBg="#ffffff",this.aspectRatio=0,this.keepAspectRatio=!1,this._startDistance=0,this.useWebWorker=!1,this.renderTaskUid=null,this.workerTimer=null,this.useHermite=!0,this.hermite=null,this.hermiteMin=null,this.workerBlobURL=null,this.scrBarW=0,this.loadingTimer=null,this.allowSlide=!0,this.slide=null,this.isSliding=!1,this.zooming=!0,this.scrollX=!0,this.scrollY=!0,this.animating=!1,this.bouncing=!1,this.paging=!1,this.snapping=!1,this.animationDuration=300,this.locking=!1,this.minZoom=.01,this.maxZoom=8,this.speedDelta=1,this._outerWidth=0,this._outerHeight=0,this._innerWidth=0,this._innerHeight=0,this._outerLeft=0,this._outerTop=0,this._snapWidth=0,this._snapHeight=0,this._pullHeight=0,this._pullActive=!1,this._maxSrL=0,this._maxSrT=0,this._srL=0,this._srT=0,this._zoom=1,this._futureLeft=0,this._futureTop=0,this._futureZoom=0,this._zoomComplete=null,this._isSingleTouch=!0,this._isDecelerating=!1,this._isProcessing=!1,this._isDragging=!1,this._isAnimating=!1,this._interruptedAnimation=!1,this._position=[],this._startTouchLeft=0,this._startTouchTop=0,this._startZoom=1,this._lastTouchLeft=0,this._lastTouchTop=0,this._lastScale=1,this._enableScrollX=!0,this._enableScrollY=!0,this._fps=60,this._running={},this._counter=1,this.cropLineColor="rgba(0,0,0,1)",this.defaultCursor=null,this.uid=n,this.dpr=Object(s.d)(),this._iPub=i,this._db=e,this.fitType=t.fitType,this.maxZoom=t.maxZoom,this.minZoom=t.minZoom,this.opMode=t.opMode,this.iMargin=t.iMargin,this.scrollX=t.scrollX,this.scrollY=t.scrollY,this.zoomInDelta=t.zoomInDelta,this.zoomOutDelta=t.zoomOutDelta,this.zoomDelta=t.zoomDelta,this.zooming=t.zooming,this.useWebWorker=t.useWebWorker,this.useHermite=r,this.scrBarW=a,this.cvsMng=new C,this.cvsMng.setSaveBg(this.saveBg),this._initAnimation(),this._initScroller(),this.slide=new P(i),this.slide.stateCb=function(t){u.isSliding=t},this.useHermite&&(this.workerBlobURL||(this.workerBlobURL=o),this.hermite=new w(this.useWebWorker,this.workerBlobURL),this.hermiteMin=new w(this.useWebWorker,this.workerBlobURL))}return t.prototype.setAllowSlide=function(t){this.allowSlide=t},t.prototype.setSlidePages=function(t){var e;null===(e=this.slide)||void 0===e||e.setSlidePages(t)},t.prototype.checkDisplay=function(t,e){if("single"===e.disMode){var i=e.getCurPage();return!(!i||t!==i.uid)}return!0},t.prototype.initGraphic=function(t){var e=t.uid;this.curPages=t.chs,e!==this.curTab&&(this.curTab=e,this.tabItem=t,this.virH=t.virH||0,this.virW=t.virW||0,this.fitType=t.fitType,this.clickZoom=t.clickZoom,this.isFreeCrop=t.isFreeCrop,this.scrL=t.scrL,this.scrT=t.scrT,this.zoom=t.zoom,this.iMargin=t.iMargin,this.oMargin=t.oMargin,this.direction=t.direction,this.disMode=t.disMode,this.opMode=t.opMode)},t.prototype.renderDefaultLoading=function(t){this.cvsMng.mainCvs.ctx},t.prototype.render=function(t){var e=this;if(this.tabItem){var i=this.tabItem.getCurUid();if(t===i){var n=this._db.getMid(t),r=(null==n?void 0:n.overlays)||[],o=n.img,u=this._getPage(t);if(u){var h=u.page,c=u.index,l=this.cvsMng.offCvs;l.render(t,o,h,n);var f=Math.round(h.style.left-this.scrL+h.style.width/2),p=Math.round(h.style.top-this.scrT+h.style.height/2),_=this.cvsMng.mainCvs.ctx;if(_){_.imageSmoothingEnabled=!1,this.renderTaskUid=Object(s.I)(11),this.hermite&&(this.hermite.taskUid=this.renderTaskUid),_.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),_.save(),_.scale(this.dpr,this.dpr),_.translate(f,p);var d=l.canvas;this.workerTimer&&clearTimeout(this.workerTimer),this.useHermite&&this.zoom<1&&this.hermite&&(this.workerTimer=setTimeout((function(){var i;null===(i=e.hermite)||void 0===i||i.resize(d,h.style.width*e.dpr,h.style.height*e.dpr,e.renderTaskUid).then((function(i){e._db.getMid(t)&&(_.save(),_.clearRect(0,0,e.cvsInnerW,e.cvsInnerH),i.forEach((function(t){_.putImageData(t.target,Math.round(0+(h.style.left-e.scrL)*e.dpr),Math.round(t.start_y+(h.style.top-e.scrT)*e.dpr))})),_.restore(),_.save(),_.scale(e.dpr,e.dpr),_.translate(f,p),r.forEach((function(t){h.style.width-t.width*e.zoom>0&&h.style.height-t.height*e.zoom>0&&(_.save(),_.globalAlpha=t.opacity,_.fillStyle=t.color,_.fillRect(-h.style.width/2+t.left*e.zoom,-h.style.height/2+t.top*e.zoom,Math.min(h.style.width-t.left*e.zoom,t.width*e.zoom),Math.min(h.style.height-t.top*e.zoom,t.height*e.zoom)),_.restore())})),_.restore(),e.emit(a.d.AFTER_RENDER,t))}))["catch"]((function(i){e.emit(a.d.AFTER_RENDER,t)}))}),100)),_.drawImage(d,0,0,d.width,d.height,Math.round(-h.style.width/2),Math.round(-h.style.height/2),h.style.width,h.style.height),r.forEach((function(t){h.style.width-t.width*e.zoom>0&&h.style.height-t.height*e.zoom>0&&(_.save(),_.globalAlpha=t.opacity,_.fillStyle=t.color,_.fillRect(-h.style.width/2+t.left*e.zoom,-h.style.height/2+t.top*e.zoom,Math.min(h.style.width-t.left*e.zoom,t.width*e.zoom),Math.min(h.style.height-t.top*e.zoom,t.height*e.zoom)),_.restore())})),_.restore(),"single"===this.disMode&&(this.useHermite&&this.zoom<1&&this.hermite||this.emit(a.d.AFTER_RENDER,t),this.emit(a.f.VIEWER_PAGE_RENDERED,c))}}}}},t.prototype.drawSltBox=function(t){var e=this,i=this.cvsMng.cropCvs.ctx;i&&(i.imageSmoothingEnabled=!1,i.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),i.save(),i.scale(this.dpr,this.dpr),1===this.opMode&&t.cropMng.cropBoxes.forEach((function(t){for(var n=t.probePoints.slice(0,8),r=t.midpoints.slice(0,8),o=0;o<4;o++){var s=e.toCanvasCoordinate(n[2*o],n[2*o+1]),a=e.toCanvasCoordinate(r[2*o],r[2*o+1]);n[2*o]=s.x,n[2*o+1]=s.y,r[2*o]=a.x,r[2*o+1]=a.y}i.lineWidth=1*t.lineWidth,i.fillStyle=t.pointFillColor,i.save();for(o=0;o<4;o++)i.strokeStyle=e.cropLineColor,i.beginPath(),i.rect(n[2*o]-1*t.sensorRadius,n[2*o+1]-1*t.sensorRadius,2*t.sensorRadius*1,2*t.sensorRadius*1),i.closePath(),i.stroke(),i.fill();for(o=0;o<4;o++)i.strokeStyle=e.cropLineColor,i.beginPath(),i.rect(r[2*o]-1*t.sensorRadius,r[2*o+1]-1*t.sensorRadius,2*t.sensorRadius*1,2*t.sensorRadius*1),i.closePath(),i.stroke(),i.fill();try{i.setLineDash([1*t.dashLine[0],1*t.dashLine[1]])}catch(u){}i.strokeStyle=e.cropLineColor,i.lineWidth=1*t.lineWidth,i.beginPath(),i.moveTo(n[0],n[1]),i.lineTo(n[2],n[3]),i.lineTo(n[4],n[5]),i.lineTo(n[6],n[7]),i.closePath(),i.stroke(),i.restore()})),i.restore())},t.prototype.clearCanvas=function(){var t=this.cvsMng.mainCvs.ctx;t&&t.clearRect(0,0,this.cvsInnerW,this.cvsInnerH)},t.prototype._layoutSingle=function(t,e,i){var n=t.oMargin+t.iMargin+t.pageBorderWidth,r=(this.cvsInnerW,this.cvsInnerH,t.getCurPage());if(r){var o=this._db.getMetadata(r.uid);if(o){var u=this._db.getMid(r.uid);if(u){var h=u.edt.all,c=o.width,l=o.height,f=o.width,p=o.height,_=null,d=null,g=!1;h.forEach((function(t){"rotate"===t.type?(0===t.mode&&(d=Object(s.E)(0,0,f,p,t.calcAngle),g=!0),null!==_&&_!==t.mode&&(f=c,p=l),_=t.mode,g&&(c=d.width,l=d.height)):"crop"!==t.type&&"changeSize"!==t.type||(c=t.width,l=t.height,f=t.width,p=t.height)})),r.naturalWidth=c,r.naturalHeight=l;var v=(null==r?void 0:r.naturalWidth)||0,m=(null==r?void 0:r.naturalHeight)||.1,y=this._calcZoom(t,v,m),b=y.zoom,E=y.canvasWidth,T=y.canvasHeight,C=y.virW,P=y.virH;this.setCanvasSize(E,T),b=b||1,this._zoom=b,r.cropMng.setZoom(b),this.virW=C,this.virH=P,i||this.emit(a.e.SET_SCROLLER_SIZE,{width:this.virW,height:this.virH,x:this.scrL,y:this.scrT});var w=this.virW,A=this.virH,O=(this.cvsCltW-w)/2,M=(this.cvsCltH-A)/2;O<0&&(e&&(this._srL=Math.abs(O)),O=0),M<0&&(e&&(this._srT=Math.abs(M)),M=0),r.setBorder(t.pageBorderWidth),r.setSize(w,A),r.setPosition(O,M),t.virW=w,t.virH=A,this.setVirtualSize(w,A),this._zoomTo(b,!1),i||this.emit(a.e.SET_SCROLLER_SIZE,{width:w,height:A,x:this.scrL,y:this.scrT})}}}},t.prototype._calcZoom=function(t,e,i){return"window"===t.fitType?this._calFitWindow(e,i):"width"===t.fitType?this._calcFitWidth(e,i):"height"===t.fitType?this._calcFitHeight(e,i):this.keepZoom&&"none"===t.fitType?this._calcKeepZoom(e,i):this._calFitWindow(e,i)},t.prototype.calcZoomForSlide=function(t,e){var i=this._calFitWindow(t,e).zoom;return i=Math.min(Math.max(this.minZoom,i),this.maxZoom)},t.prototype._calcKeepZoom=function(t,e){var i=this.zoom,n=this.cvsOffW,r=this.cvsOffH,o=t*i,s=e*i;return o>n&&(r-=this.scrBarW),s>r&&(n-=this.scrBarW),{zoom:i,canvasWidth:n,canvasHeight:r,virW:o,virH:s}},t.prototype._calcFitWidth=function(t,e){var i=1,n=0,r=this.cvsOffW,o=this.cvsOffH;return(n=e*(i=t<=this.cvsOffW?1:this.cvsOffW/t))>o&&(n=e*(i=t<=this.cvsOffW-this.scrBarW?1:(this.cvsOffW-this.scrBarW)/t))>this.cvsOffH&&(r-=this.scrBarW),{zoom:i,canvasWidth:r,canvasHeight:o,virW:t*i,virH:n}},t.prototype._calcFitHeight=function(t,e){var i,n=1,r=0,o=0;return i=this.cvsOffW,o=this.cvsOffH,(r=t*(n=e<=this.cvsOffH?1:this.cvsOffH/e))>i&&(r=t*(n=e<=this.cvsOffH-this.scrBarW?1:(this.cvsOffH-this.scrBarW)/e))>this.cvsOffW&&(o-=this.scrBarW),{zoom:n,canvasWidth:i,canvasHeight:o,virW:r,virH:e*n}},t.prototype._calFitWindow=function(t,e){return t<=this.cvsCltW&&e<=this.cvsCltH||t>this.cvsCltW&&e<=this.cvsCltH?this._calcFitWidth(t,e):t<=this.cvsCltW&&e>this.cvsCltH?this._calcFitHeight(t,e):t/this.cvsCltW>=e/this.cvsCltH?this._calcFitWidth(t,e):this._calcFitHeight(t,e)},t.prototype._getPage=function(t){for(var e=this.curPages.length,i=0;i<e;i++)if(this.curPages[i].uid===t)return{page:this.curPages[i],index:i}},t.prototype.setFitType=function(t){this.fitType=t,this.tabItem&&(this.tabItem.fitType=t)},t.prototype._setValidArea=function(){this.setValidArea(this.cvsCltW,this.cvsCltH,this.virW,this.virH)},t.prototype._setScrollerPosition=function(){var t=this.cvsMng.mainCvs.canvas,e={left:0,top:0,right:0,bottom:0,width:0,height:0};try{e=t.getBoundingClientRect()}catch(i){}this.setPosition(e.left+window.pageXOffset+(null==t?void 0:t.clientLeft)||0,e.top+window.pageYOffset+(null==t?void 0:t.clientTop)||0)},t.prototype.setCanvasOffsetSize=function(t,e){var i,n=!1;return this.cvsOffW===t&&this.cvsOffH===e&&(n=!0),this.cvsOffW=t,this.cvsOffH=e,this.cvsCltW=t,this.cvsCltH=e,this.cvsInnerW=t*this.dpr,this.cvsInnerH=e*this.dpr,this.cvsMng.setCanvasSize(t,e),null===(i=this.slide)||void 0===i||i.setSlideSize(t),this._setScrollerPosition(),n},t.prototype.setCanvasSize=function(t,e){this.cvsCltW=t,this.cvsCltH=e,this.cvsInnerW=t*this.dpr,this.cvsInnerH=e*this.dpr,this.cvsMng.setCanvasSize(t,e)},t.prototype.setVirtualSize=function(t,e){this.virW=t||0,this.virH=e||0,this._setValidArea()},t.prototype.setZoom=function(t){return this.zoom=t,this._zoomTo(t,!1),this.setFitType("none"),this.emit("_onRender"),0===this._maxSrL&&0===this._maxSrT&&this.emit("_getSlidePages"),!0},t.prototype.getZoom=function(){return this.zoom},t.prototype.zoomTo=function(t,e,i,n){return this.zoom=t,this._zoomTo(t,e,i,n),this.setFitType("none"),this.emit("_onRender"),0===this._maxSrL&&0===this._maxSrT&&this.emit("_getSlidePages"),this._zoom},t.prototype.scrollTo=function(t,e,i,n){this._scrollTo(t,e,!1),this.emit("_onRender")},t.prototype.zoomIn=function(){var t=this.zoom;return t*=this.zoomInDelta,this._zoomTo(t,!1),this.setFitType("none"),this.emit("_onRender"),0===this._maxSrL&&0===this._maxSrT&&this.emit("_getSlidePages"),t},t.prototype.zoomOut=function(){var t=this.zoom;return t/=this.zoomInDelta,this._zoomTo(t,!1),this.setFitType("none"),this.emit("_onRender"),0===this._maxSrL&&0===this._maxSrT&&this.emit("_getSlidePages"),t},t.prototype.getMinPageData=function(){var t=document.createElement("canvas");t.dvsUid="_getMinPageDataCvs";var e=t.getContext("2d"),i=this.cvsMng.offCvs,n=i.innerWidth,r=i.innerHeight,o=n/r;return(n>800||r>800)&&(o>=1?r=(n=800)/o:n=(r=800)*o),t.width=n,t.height=r,e.drawImage(i.canvas,0,0,n,r),e.getImageData(0,0,n,r)},t.prototype.setSaveBackgroundColor=function(t){this.saveBg=t,this.cvsMng.setSaveBg(t)},t.prototype.onCanvasTouchstart=function(t){var e;if(t.preventDefault(),!(t.touches[0]&&t.touches[0].target&&t.touches[0].target.tagName.match(/input|textarea|select/i))&&"single"===this.disMode&&"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,!t.target.tagName.match(/input|textarea|select/i))){var i=t.touches[0].pageX,n=t.touches[0].pageY;if(0===this.opMode){if(this._pageX=i,this._pageY=n,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&(null===(e=this.slide)||void 0===e||e.startHandler(t)),this.isSliding)return;t.targetTouches.length>1&&(this._startDistance=this._calDistance(t.targetTouches)),this.startHandler(t.targetTouches,t.timeStamp)}else if(1===this.opMode){if(this.checkMouseOverPage(t)){var r=this.tabItem.getCurPage();if(!r)return;var o=this.getMouseCoordinate(t),s=this.toPageCoordinate(o.x,o.y),u=!1;!0===t.ctrlKey&&(u=!0);var h=this.tabItem.cur;null===r.cropMng.checkSelect(s.x,s.y)&&(u||r.cropMng.cropBoxes.length>0&&this.emit(a.f.PAGE_AREA_UNSELECTED,h)),r.cropMng.onStartHandler(s.x,s.y,u)}}else if(2===this.opMode){this.checkMouseOverPage(t)&&(this.setFitType("none"),this._zoomTo(this._zoom*this.zoomInDelta,!1,i-this._outerLeft,n-this._outerTop),this.emit("_onRender"))}}},t.prototype.onCanvasTouchmove=function(t){var e;if("single"===this.disMode&&(this.tabItem&&this.tabItem.getCurPage()&&this._mousedown)){if(0===this.opMode)if(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL&&1===t.targetTouches.length)null===(e=this.slide)||void 0===e||e.moveHandler(t);else{if(this.isSliding)return;var i=1;if(t.targetTouches.length>1)i=this._calDistance(t.targetTouches)/this._startDistance,this.fitType="none",this.tabItem.fitType="none",t.scale&&(i=t.scale);this.moveHandler(t.targetTouches,t.timeStamp,i),this.emit("_onRender"),0===this._maxSrL&&0===this._maxSrT&&this.emit("_getSlidePages")}this._mousedown=!0}},t.prototype.onCanvasTouchend=function(t){},t.prototype.onDocumentTouchend=function(t){},t.prototype.onCanvasMousedown=function(t){var e;if("single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,t.preventDefault(),!t.target.tagName.match(/input|textarea|select/i)))if(0===this.opMode)this._pageX=t.pageX,this._pageY=t.pageY,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT?null===(e=this.slide)||void 0===e||e.startHandler(t):this.startHandler([{pageX:t.pageX,pageY:t.pageY}],t.timeStamp);else if(1===this.opMode){if(this.checkMouseOverPage(t)){var i=this.tabItem.getCurPage();if(!i)return;var n=this.getMouseCoordinate(t),r=this.toPageCoordinate(n.x,n.y),o=!1;!0===t.ctrlKey&&(o=!0);var s=this.tabItem.cur;null===i.cropMng.checkSelect(r.x,r.y)&&(o||i.cropMng.cropBoxes.length>0&&this.emit(a.f.PAGE_AREA_UNSELECTED,s)),i.cropMng.onStartHandler(r.x,r.y,o)}}else if(2===this.opMode){this.checkMouseOverPage(t)&&(this.setFitType("none"),this._zoomTo(this._zoom*this.zoomInDelta,!1,t.pageX-this._outerLeft,t.pageY-this._outerTop),this.emit("_onRender"),0===this._maxSrL&&0===this._maxSrT&&this.emit("_getSlidePages"))}},t.prototype.onCanvasMousemove=function(t){this._mousedown&&(t.preventDefault(),"single"===this.disMode&&this.tabItem&&this.tabItem.total)},t.prototype.onCanvasMouseup=function(t){},t.prototype.onDocumentMousemove=function(t){var e;if("single"===this.disMode&&this.tabItem){var i=this.tabItem.getCurPage();if(i){var n=this.getMouseCoordinate(t),r=this.toPageCoordinate(n.x,n.y);if(this._mousedown){if(1===this.opMode){if(this.checkMouseOverPage(t)!==undefined){var o=!1;!0===t.ctrlKey&&(o=!0),!0===t.shiftKey?i.cropMng.setKeepAspectRatio(!0):i.cropMng.setKeepAspectRatio(this.keepAspectRatio),i.cropMng.onMoveHandler(r.x,r.y,o),this.emit("_onRenderBoxes")}}else 0===this.opMode&&(t.touches||(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL?null===(e=this.slide)||void 0===e||e.moveHandler(t):0===this._maxSrL&&0===this._maxSrT||(this.moveHandler([{pageX:t.pageX,pageY:t.pageY}],t.timeStamp),this.emit("_onRender"))));this._mousedown=!0}else if(i.cropMng.cropBoxes.length>0){var s=i.cropMng.checkSelectForCursor(r.x,r.y);if(null!==s){var u=null;"move"===s.position?u="move":"nw"!==s.position&&"se"!==s.position&&"ne"!==s.position&&"sw"!==s.position&&"e"!==s.position&&"w"!==s.position&&"n"!==s.position&&"s"!==s.position||(u=s.position+"-resize"),this.emit(a.e.CHANGE_CANVAS_CURSOR,u)}else this.emit(a.e.CHANGE_CANVAS_CURSOR,this.defaultCursor)}}}},t.prototype._calDistance=function(t){return Math.sqrt(Math.pow(t[0].pageX-t[1].pageX,2)+Math.pow(t[0].pageY-t[1].pageY,2))},t.prototype.onDocumentMouseup=function(t){var e;if(this._mousedown){if(1===this.opMode){if(this.tabItem&&"single"===this.tabItem.disMode){var i=this.tabItem.getCurPage();if(i){i.cropMng.onEndHandler();var n=this.tabItem.cur,r=i.cropMng.getRectArr();r.length>0&&this.emit(a.f.PAGE_AREA_SELECTED,n,r),this.emit("_onRenderBoxes")}}}else if(0===this.opMode){if(this.clickZoom&&this._pageX===t.pageX&&this._pageY===t.pageY){var o=this.getPosition();this._zoomTo(this.zoom*this.zoomInDelta,!1,t.pageX-o.left,t.pageY-o.top),this.emit("_onRender")}this.allowSlide&&0===this._maxSrT&&0===this._maxSrL?null===(e=this.slide)||void 0===e||e.endHandler(t):this.endHandler(t.timeStamp)}this._mousedown=!1}},t.prototype.onCanvasWheel=function(t){this.isSliding||this._onWheelHandler(t)},t.prototype.onCanvasScroll=function(t){t&&t.target&&(this._scrollTo(t.target.scrollLeft,t.target.scrollTop,!1),this.emit("_onRender"),this.emit("_onRenderBoxes"))},t.prototype._onWheelHandler=function(t){t.preventDefault();var e=1,i=0;e=t.wheelDelta?t.wheelDelta:-t.deltaY,t.ctrlKey?(i=e>0?1.05:.95,this.fitType="none",this.tabItem.fitType="none",this.zoomHandler(e,t.timeStamp,t.pageX,t.pageY),this.emit("_onRender"),this.emit("_onRenderBoxes"),0===this._maxSrL&&0===this._maxSrT&&this.emit("_getSlidePages")):t.shiftKey?0!==this._maxSrL&&(i=e<0?30:-30,(0!==this._srL&&i<0||this._srL!==this._maxSrL&&i>0)&&(this._scrollTo(this.scrL+i,this.scrT,!1),this.emit("_onRender"),this.emit("_onRenderBoxes"))):0!==this._maxSrT&&(i=e<0?30:-30,(0!==this._srT&&i<0||this._srT!==this._maxSrT&&i>0)&&(this._scrollTo(this.scrL,this.scrT+i,!1),this.emit("_onRender"),this.emit("_onRenderBoxes")))},t.prototype.checkMouseOverPage=function(t){if(!this.tabItem)return!1;var e=this.tabItem.getCurPage();if(!e)return!1;var i=this.getMouseCoordinate(t),n=this.toPageCoordinate(i.x,i.y),r=n.x,o=n.y;return r>=0&&r<=e.naturalWidth&&o>=0&&o<=e.naturalHeight},t.prototype.toCanvasCoordinate=function(t,e){var i=this.tabItem.getCurPage();i.style.left,this.scrL,i.style.width,i.style.top,this.scrT,i.style.height;return{x:t=t*this.zoom+i.style.left-this.scrL,y:e=e*this.zoom+i.style.top-this.scrT}},t.prototype.toPageCoordinate=function(t,e){var i=this.tabItem.getCurPage();return{x:t=(t-i.style.left+this.scrL)/this.zoom,y:e=(e-i.style.top+this.scrT)/this.zoom}},t.prototype.getMouseCoordinate=function(t){var e=this.cvsMng.mainCvs.canvas.getBoundingClientRect(),i=t.clientX!==undefined?t.clientX:t.changedTouches[0].clientX,n=t.clientY!==undefined?t.clientY:t.changedTouches[0].clientY;return{x:i-e.left,y:n-e.top}},t.prototype._initAnimation=function(){this._time=Date.now||function(){return+new Date},this._fps=60,this._running={},this._counter=1},t.prototype._initScroller=function(){this.callback=function(t,e,i){this.scrL=t,this.scrT=e,this.zoom=i,this.tabItem&&(this.tabItem.scrL=t,this.tabItem.scrT=e,this.tabItem.zoom=i)}.bind(this),this._setValidArea(),this._setScrollerPosition()},t.prototype.setValidArea=function(t,e,i,n){t===+t&&(this._outerWidth=t),e===+e&&(this._outerHeight=e),i===+i&&(this._innerWidth=i),n===+n&&(this._innerHeight=n),this.calcMaxScrollValue()},t.prototype.calcMaxScrollValue=function(t){if(t===undefined&&(t=this._zoom),this.tabItem){var e=this.tabItem.getCurPage();if(e){this._db.getMetadata(e.uid);var i=(e.naturalWidth||0)*t,n=(e.naturalHeight||.1)*t;this._maxSrL=Math.round(Math.max(i-this._outerWidth,0)),this._maxSrT=Math.round(Math.max(n-this._outerHeight,0))}}},t.prototype.setPosition=function(t,e){this._outerLeft=t||0,this._outerTop=e||0},t.prototype.getPosition=function(){return{left:this._outerLeft||0,top:this._outerTop||0}},t.prototype.setSnapSize=function(t,e){this._snapWidth=t,this._snapHeight=e},t.prototype.activatePull=function(t,e,i,n){this._pullHeight=t,this._pullStart=n,this._pullActivate=e,this._pullDeactivate=i},t.prototype.emitPull=function(){this.publish(this._srL,-this._pullHeight,this._zoom,!0),this._pullStart&&this._pullStart()},t.prototype.endPull=function(){this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate(),this._scrollTo(this._srL,this._srT,!0)},t.prototype.getCurScrollValues=function(){return{scrollLeft:this._srL,scrollTop:this._srT,zoom:this._zoom}},t.prototype.getMaxScrollValues=function(){return{maxScrollLeft:this._maxSrL,maxScrollTop:this._maxSrT}},t.prototype._zoomTo=function(t,e,i,n,r){if(!this.zooming)return!1;if("continuous"===this.disMode)return!1;r&&(this._zoomComplete=r),this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),i===undefined&&(i=this._outerWidth/2),n===undefined&&(n=this._outerHeight/2);var o=this._zoom;if(t=Math.max(Math.min(t,this.maxZoom),this.minZoom),"single"===this.disMode){this.calcMaxScrollValue(t);var s=(i+this._srL)*t/o-i,a=(n+this._srT)*t/o-n;return s>this._maxSrL?s=this._maxSrL:s<0&&(s=0),a>this._maxSrT?a=this._maxSrT:a<0&&(a=0),this._innerWidth<this._outerWidth&&(s=this._maxSrL/2),this._innerHeight<this._outerHeight&&(a=this._maxSrT/2),this.publish(s,a,t,e),!0}},t.prototype._zoomBy=function(t,e,i,n,r){return this._zoomTo(this._zoom*t,e,i,n,r)},t.prototype._scrollTo=function(t,e,i,n){this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),n!==undefined&&n!==this._zoom?this.zooming&&(t*=n,e*=n,this.calcMaxScrollValue(n)):n=this._zoom,this.scrollX?this.paging?t=Math.round(t/this._outerWidth)*this._outerWidth:this.snapping&&(t=Math.round(t/this._snapWidth)*this._snapWidth):t=this._srL,this.scrollY?this.paging?e=Math.round(e/this._outerHeight)*this._outerHeight:this.snapping&&(e=Math.round(e/this._snapHeight)*this._snapHeight):e=this._srT,t=Math.max(Math.min(this._maxSrL,t),0),e=Math.max(Math.min(this._maxSrT,e),0),t===this._srL&&e===this._srT&&(i=!1),this._isProcessing||this.publish(t,e,n,i)},t.prototype._scrollBy=function(t,e,i){var n=this._isAnimating?this._futureLeft:this._srL,r=this._isAnimating?this._futureTop:this._srT;this._scrollTo(n+(t||0),r+(e||0),i)},t.prototype.startHandler=function(t,e){var i,n;t.length!==undefined&&(e instanceof Date&&(e=e.valueOf()),this._interruptedAnimation=!0,this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),this._isAnimating&&(this._stop(this._animationId),this._isAnimating=!1),this._isSingleTouch=1===t.length,this._isSingleTouch?(i=t[0].pageX,n=t[0].pageY):(i=Math.abs(t[0].pageX+t[1].pageX)/2,n=Math.abs(t[0].pageY+t[1].pageY)/2),this._startTouchLeft=i,this._startTouchTop=n,this._startZoom=this._zoom,this._lastTouchLeft=i,this._lastTouchTop=n,this._lastScale=1,this._lastTouchMove=e,this._enableScrollX=!this._isSingleTouch&&this.scrollX,this._enableScrollY=!this._isSingleTouch&&this.scrollY,this._isProcessing=!0,this._isDecComp=!1,this._isDragging=!this._isSingleTouch,this._position=[])},t.prototype.moveHandler=function(t,e,i){if(t.length!==undefined&&(e instanceof Date&&(e=e.valueOf()),this._isProcessing)){var n,r;1===t.length?(n=t[0].pageX,r=t[0].pageY):(n=Math.abs(t[0].pageX+t[1].pageX)/2,r=Math.abs(t[0].pageY+t[1].pageY)/2);var o=this._position;if(this._isDragging){var s=n-this._lastTouchLeft,a=r-this._lastTouchTop,u=this._srL,h=this._srT,c=this._zoom;if(i!==undefined&&this.zooming){var l=c;if(c=c/this._lastScale*i,l!==(c=Math.max(Math.min(c,this.maxZoom),this.minZoom))){var f=n-this._outerLeft,p=r-this._outerTop;u=(f+u)*c/l-f,h=(p+h)*c/l-p,this.calcMaxScrollValue(c)}}this._enableScrollX&&((u-=s*this.speedDelta)>this._maxSrL||u<0)&&(this.bouncing?u+=s/2*this.speedDelta:u=Math.max(Math.min(this._maxSrL,u),0)),this._enableScrollY&&((h-=a*this.speedDelta)>this._maxSrT||h<0)&&(this.bouncing?(h+=a/2*this.speedDelta,this._enableScrollX||null==this._pullHeight||(!this._pullActive&&h<=-this._pullHeight?(this._pullActive=!0,this._pullActivate&&this._pullActivate()):this._pullActive&&h>-this._pullHeight&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))):h=Math.max(Math.min(this._maxSrT,h),0)),o.length>60&&o.splice(0,30),o.push(u,h,e),this.publish(u,h,c)}else{var _=this.locking?3:0,d=Math.abs(n-this._startTouchLeft),g=Math.abs(r-this._startTouchTop);this._enableScrollX=this.scrollX&&d>=_,this._enableScrollY=this.scrollY&&g>=_,o.push(this._srL,this._srT,e),this._isDragging=(this._enableScrollX||this._enableScrollY)&&(d>=5||g>=5),this._isDragging&&(this._interruptedAnimation=!1)}this._lastTouchLeft=n,this._lastTouchTop=r,this._lastTouchMove=e,this._lastScale=i}},t.prototype.endHandler=function(t){if(t instanceof Date&&(t=t.valueOf()),this._isProcessing){if(this._isProcessing=!1,this._isDragging)if(this._isDragging=!1,this._isSingleTouch&&this.animating&&t-this._lastTouchMove<=100){for(var e=this._position,i=e.length-1,n=i,r=i;r>0&&e[r]>this._lastTouchMove-100;r-=3)n=r;if(n!==i){var o=e[i]-e[n],s=this._srL-e[n-2],a=this._srT-e[n-1];this._decVX=s/o*(1e3/60),this._decVY=a/o*(1e3/60);Math.abs(this._decVX)>1||Math.abs(this._decVY)>1?this._startDeceleration(t):this._scrollComp&&this._scrollComp()}else this._scrollComp&&this._scrollComp()}else t-this._lastTouchMove>100&&this._scrollComp&&this._scrollComp();this._isDecelerating||(this._pullActive&&this._pullStart?(this.publish(this._srL,this._srT,this._zoom),this._pullStart()):((this._interruptedAnimation||this._isDragging)&&this._scrollComp&&this._scrollComp(),this._scrollTo(this._srL,this._srT,!0,this._zoom),this._pullActive&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))),this._position.length=0}},t.prototype.zoomHandler=function(t,e,i,n){var r=t>0?1.05:.95;return this._zoomTo(this._zoom*r,!1,i-this._outerLeft,n-this._outerTop)},t.prototype.publish=function(t,e,i,n){var r=this;if(this._isAnimating&&(this._stop(this._isAnimating),this._isAnimating=!1),n&&this.animating){this._futureLeft=t,this._futureTop=e,this._futureZoom=i;var o=this._srL,s=this._srT,a=this._zoom,u=t-o,h=e-s,c=i-a;this._isAnimating=this._start((function(n,l,f){f&&(r._srL=o+u*n,r._srT=s+h*n,r._zoom=a+c*n,r.callback&&r.callback(t,e,i))}),(function(t){return r._isAnimating===t}),(function(t,e,i){e===r._isAnimating&&(r._isAnimating=!1),(r._isDecComp||i)&&r._scrollComp&&r._scrollComp(),r.zooming&&(r.calcMaxScrollValue(),r._zoomComplete&&(r._zoomComplete(),r._zoomComplete=null))}),this.animationDuration,this._isAnimating?this._easeOut:this._easeInOut)}else this._futureLeft=this._srL=t,this._futureTop=this._srT=e,this._futureZoom=this._zoom=i,this.callback&&this.callback(t,e,i),this.zooming&&(this.calcMaxScrollValue(),this._zoomComplete&&(this._zoomComplete(),this._zoomComplete=null))},t.prototype._easeOut=function(t){return Math.pow(t-1,3)+1},t.prototype._easeInOut=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},t.prototype._startDeceleration=function(t){var e=this;if(this.paging){var i=Math.max(Math.min(this._srL,this._maxSrL),0),n=Math.max(Math.min(this._srT,this._maxSrT),0),r=this._outerWidth,o=this._outerHeight;this._minDecL=Math.floor(i/r)*r,this._minDecT=Math.floor(n/o)*o,this._maxDecL=Math.ceil(i/r)*r,this._maxDecT=Math.ceil(n/o)*o}else this._minDecL=0,this._minDecT=0,this._maxDecL=this._maxSrL,this._maxDecT=this._maxSrT;var s=this.snapping?4:.001;this._isDecelerating=this._start((function(t,i,n){var r=e._srL+e._decVX,o=e._srT+e._decVY;if(!e.bouncing){var s=Math.max(Math.min(e._maxDecL,r),e._minDecL),a=Math.max(Math.min(e._maxDecT,o),e._minDecT);s!==r&&(r=s,e._decVX=0),a!==o&&(o=a,e._decVY=0)}if(n?e.publish(r,o,e._zoom):(e._srL=r,e._srT=o),!e.paging){e._decVX*=.95,e._decVY*=.95}if(e.bouncing){var u=0,h=0,c=e.penetrationAcceleration,l=e.penetrationDeceleration;r<e._minDecL?u=e._minDecL-r:r>e._maxDecL&&(u=e._maxDecL-r),o<e._minDecT?h=e._minDecT-o:o>e._maxDecT&&(h=e._maxDecT-o),0!=u&&(u*e._decVX<=0?e._decVX+=u*l:e._decVX=u*c),0!=h&&(h*e._decVY<=0?e._decVY+=h*l:e._decVY=h*c)}}),(function(){return Math.abs(e._decVX)>=s||Math.abs(e._decVY)>=s||(e._isDecComp=!0,!1)}),(function(t,i,n){e._isDecelerating=!1,e._scrollComp&&e._scrollComp(),e._scrollTo(e._srL,e._srT,e.snapping)}))},t.prototype._stop=function(t){var e=null!=this._running[t];return e&&(this._running[t]=null),e},t.prototype._isRunning=function(t){return null!=this._running[t]},t.prototype._start=function(t,e,i,n,r){var o=this,a=this._time(),u=a,h=0,c=0,l=this._counter++;if(l%16==0){var f={};for(var p in this._running)f[p]=!0;this._running=f}var _=function(f){var p=!0!==f,d=o._time();if(!o._running[l]||e&&!e(l))return o._running[l]=null,void(i&&i(o._fps-c/((d-a)/1e3),l,!1));if(p)for(var g=Math.round((d-u)/(1e3/o._fps))-1,v=0;v<Math.min(g,4);v++)_(!0),c++;n&&(h=(d-a)/n)>1&&(h=1);var m=r?r(h):h;!1!==t(m,d,p)&&1!==h||!p?p&&(u=d,Object(s.C)(_)):(o._running[l]=null,i&&i(o._fps-c/((d-a)/1e3),l,1===h||null==n))};return this._running[l]=!0,Object(s.C)(_),l},t.prototype.on=function(t,e){this._iPub.on(t,e)},t.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._iPub).emit.apply(e,A([t],i))},t.prototype.off=function(t,e){this._iPub.off(t,e)},t}(),M=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},S=function(){function t(t,e){var i=this;this.uid=null,this._mPub=null,this._tbPub=null,this._size=null,this._mouseShape="pointer",this._direction="vertical",this._sequence=-1,this._location="horizontal",this._showThb=!0,this._showPNum=!1,this._showSltBox=!1,this._showRmBtn=!1,this._fullThb=!1,this._dragging=!0,this._resizing=!0,this._keyboard=!1,this._rows=4,this._columns=1,this._bg="rgba(67,66,70,1)",this._border="1px solid rgba(27,27,29,1)",this._pageBg="rgba(0,0,0,0)",this._pageBorder="1px solid rgba(128,128,128,1)",this._sltPBg="rgba(127,133,251,1)",this._sltPBorder="1px solid rgba(255,0,0,1)",this._hvPBg="rgba(196,250,248,1)",this._hvPBorder="1px solid rgba(255,255,0,1)",this._placeholderBg="rgba(255,192,203,1)",this._pageMargin=10,this._autoChangeIdx=!1,this.uid=Object(s.I)(11),this._mPub=e,this._tbPub=new o.a,this.init(t),this._tbPub.on(a.d.CHANGE_THUMBNAIL_VIEW_PROP,(function(t){for(var e in t)i[e]=t[e]}))}return t.prototype.init=function(t,e){var i=this;void 0===e&&(e=[]),Object.keys(t).forEach((function(n){var r=i[n];r!==t[n]&&(i[n]=t[n],r===i[n]&&e.push(n))}))},t.prototype._err=function(t){this._mPub.emit(a.d.ERROR,t)},t.prototype._ok=function(){this._mPub.emit(a.d.ERROR,a.a.OK)},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){Object(s.w)(t)?(this._size=t,this._notifyUi({size:t}),this._ok()):this._err(a.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mouseShape",{get:function(){return this._mouseShape},set:function(t){Object(s.x)(t)?(this._mouseShape=t,this._notifyUi({mouseShape:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollDirection",{get:function(){return this._direction},set:function(t){Object(s.x)(t)?(this._direction=t,this._notifyUi({scrollDirection:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sequence",{get:function(){return this._sequence},set:function(t){Object(s.u)(t)?(this._sequence=t,this._notifyUi({sequence:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(t){Object(s.x)(t)?(this._location=t,this._notifyUi({location:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showThumbnail",{get:function(){return this._showThb},set:function(t){Object(s.m)(t)?(this._showThb=t,this._notifyUi({showThumbnail:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPageNumber",{get:function(){return this._showPNum},set:function(t){Object(s.m)(t)?(this._showPNum=t,this._notifyUi({showPageNumber:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSelectBox",{get:function(){return this._showSltBox},set:function(t){Object(s.m)(t)?(this._showSltBox=t,this._notifyUi({showSelectBox:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRemoveBtn",{get:function(){return this._showRmBtn},set:function(t){Object(s.m)(t)?(this._showRmBtn=t,this._notifyUi({showRemoveBtn:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullThumbnail",{get:function(){return this._fullThb},set:function(t){Object(s.m)(t)?(this._fullThb=t,this._notifyUi({fullThumbnail:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},set:function(t){Object(s.u)(t)?t<=0?this._err(a.a.PARAMETER_RANGE):(this._rows=t,this._notifyUi({rows:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},set:function(t){Object(s.u)(t)?t<=0?this._err(a.a.PARAMETER_RANGE):(this._columns=t,this._notifyUi({columns:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._bg},set:function(t){Object(s.o)(t)?(this._bg=t,this._notifyUi({background:t}),this._ok()):this._err(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._border},set:function(t){Object(s.n)(t)?(this._border=t,this._notifyUi({border:t}),this._ok()):this._err(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageBackground",{get:function(){return this._pageBg},set:function(t){Object(s.o)(t)?(this._pageBg=t,this._notifyUi({pageBackground:t}),this._ok()):this._err(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageBorder",{get:function(){return this._pageBorder},set:function(t){Object(s.n)(t)?(this._pageBorder=t,this._notifyUi({pageBorder:t}),this._ok()):this._err(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedPageBackground",{get:function(){return this._sltPBg},set:function(t){Object(s.o)(t)?(this._sltPBg=t,this._notifyUi({selectedPageBackground:t}),this._ok()):this._err(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedPageBorder",{get:function(){return this._sltPBorder},set:function(t){Object(s.n)(t)?(this._sltPBorder=t,this._notifyUi({selectedPageBorder:t}),this._ok()):this._err(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoverPageBackground",{get:function(){return this._hvPBg},set:function(t){Object(s.o)(t)?(this._hvPBg=t,this._notifyUi({hoverPageBackground:t}),this._ok()):this._err(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoverPageBorder",{get:function(){return this._hvPBorder},set:function(t){Object(s.n)(t)?(this._hvPBorder=t,this._notifyUi({hoverPageBorder:t}),this._ok()):this._err(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderBackground",{get:function(){return this._placeholderBg},set:function(t){Object(s.o)(t)?(this._placeholderBg=t,this._notifyUi({placeholderBackground:t}),this._ok()):this._err(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageMargin",{get:function(){return this._pageMargin},set:function(t){Object(s.w)(t)?(this._pageMargin=t,this._notifyUi({pageMargin:t}),this._ok()):this._err(a.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowPageDragging",{get:function(){return this._dragging},set:function(t){Object(s.m)(t)?(this._dragging=t,this._notifyUi({allowPageDragging:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowResizing",{get:function(){return this._resizing},set:function(t){Object(s.m)(t)?(this._resizing=t,this._notifyUi({allowResizing:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowKeyboardControl",{get:function(){return this._keyboard},set:function(t){Object(s.m)(t)?(this._keyboard=t,this._notifyUi({allowKeyboardControl:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoChangeIndex",{get:function(){return this._autoChangeIdx},set:function(t){Object(s.m)(t)?(this._autoChangeIdx=t,this._notifyUi({autoChangeIndex:t}),this._ok()):this._err(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),t.prototype.scrollTo=function(t){this.emit(a.e.SCROLL_TO,t,!1)},t.prototype.setViewMode=function(t,e){return Object(s.u)(t)&&Object(s.u)(e)?t<0||e<0?(this._err(a.a.PARAMETER_RANGE),!1):(this._rows=e,this._columns=t,this.emit(a.e.SET_VIEW_MODE,t,e),!0):(this._err(a.a.PARAM_TYPE),!1)},t.prototype.getConfig=function(){return{pubsub:this._tbPub,uid:this.uid,size:this.size,mouseShape:this.mouseShape,scrollDirection:this.scrollDirection,sequence:this.sequence,location:this.location,showThumbnail:this.showThumbnail,showPageNumber:this.showPageNumber,showSelectBox:this.showSelectBox,showRemoveBtn:this.showRemoveBtn,fullThumbnail:this.fullThumbnail,allowPageDragging:this.allowPageDragging,allowResizing:this.allowResizing,allowKeyboardControl:this.allowKeyboardControl,autoChangeIndex:this.autoChangeIndex,rows:this.rows,columns:this.columns,background:this.background,border:this.border,pageBackground:this.pageBackground,pageBorder:this.pageBorder,selectedPageBackground:this.selectedPageBackground,selectedPageBorder:this.selectedPageBorder,hoverPageBackground:this.hoverPageBackground,hoverPageBorder:this.hoverPageBorder,placeholderBackground:this.placeholderBackground,pageMargin:this.pageMargin}},t.prototype.on=function(t,e){return Object(s.x)(t)&&Object(s.r)(e)?(this._tbPub.on(t,e),!0):(this._err(a.a.PARAM_TYPE),!1)},t.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return Object(s.x)(t)?((e=this._tbPub).emit.apply(e,M([t],i)),!0):(this._err(a.a.PARAM_TYPE),!1)},t.prototype.off=function(t,e){return Object(s.x)(t)?(this._tbPub.off(t,e),!0):(this._err(a.a.PARAM_TYPE),!1)},t.prototype._notifyUi=function(t){this.emit(a.e.UPDATE_THUMBNAIL_PROP,t)},t}(),R=i(3),x=function(){function t(t,e){this._db=null,this.visible=!1,this.children=[],this.redoStack=[],this.undoStack=[],this.matrixStack=[],this.style={left:0,top:0,width:0,height:0,borderColor:"#ffffff",borderType:"solid",borderWidth:0},this.naturalWidth=0,this.naturalHeight=0,this.wrapLeft=0,this.wrapTop=0,this.wrapWidth=0,this.wrapHeight=0,this.rotateAngle=0,this.flipCount=0,this.flipCountX=0,this.flipCountY=0,this.selectionBoxes=[],this.cropMng=null,this.editor2d=null,this._db=e,this.uid=t.uid,this.naturalWidth=t.naturalW,this.naturalHeight=t.naturalH,this.cropMng=new R.a(this.naturalWidth,this.naturalHeight),this.editor2d=new u}return t.prototype.setBorder=function(t,e,i){this.style.borderWidth=t,e&&(this.style.borderType=e),i&&(this.style.borderColor=i)},t.prototype.setSize=function(t,e){this.style.width=t,this.style.height=e},t.prototype.setPosition=function(t,e){this.style.left=t,this.style.top=e},t.prototype.clearSelectionBoxes=function(){this.selectionBoxes=[]},t.prototype.pushSelectionBox=function(t){this.selectionBoxes.push(t)},t.prototype.setNaturalSize=function(t,e){var i=this._db.getMid(this.uid);i&&(i.tempWidth=t,i.tempHeight=e),this.naturalWidth=t,this.naturalHeight=e,this.cropMng.setPageSize(t,e)},t.prototype.boxCount=function(){return this.cropMng.cropBoxes.length},t}(),I=function(){function t(t){this.uid=t.uid,this.chs=t.chs||[]}return t.prototype.append=function(t){return-1===this._idxOf(t)&&(this.chs.push(t),!0)},t.prototype.insert=function(t,e){return!(e<0||e>=this.chs.length)&&(this.chs.splice(e,0,t),!0)},t.prototype.remove=function(t){var e=this._idxOf(t);return-1!==e&&(this.chs.splice(e,1),!0)},t.prototype.clear=function(){return this.chs=[],!0},t.prototype.move=function(t,e){if(t===e)return!0;var i=this.chs.splice(t,1)[0];return this.chs.splice(e,0,i),!0},t.prototype["switch"]=function(t,e){if(t===e)return!0;var i=this.chs[t];return this.chs[t]=this.chs[e],this.chs[e]=i,!0},t.prototype.reorder=function(t){var e=t.length,i=[],n=0;if(this.chs.length!==e||0===e)return!1;for(var r=0;r<e;r++)t[r]===r&&n++;if(n===e)return!0;for(var o=0;o<e;o++)i[o]=this.chs[t[o]];for(var s=0;s<e;s++)this.chs[s]=i[s];return!0},t.prototype._idxOf=function(t){for(var e=Object(s.x)(t),i=0,n=this.chs.length;i<n;i++){if(e&&this.chs[i]===t)return i;if(!e&&this.chs[i].uid===t.uid)return i}return-1},t}(),D=undefined&&undefined.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),k=function(t){function e(e){var i=t.call(this,e)||this;return i.cur=-1,i.total=0,i.slt=[],i.chs=[],i.thbs=[],i.scrL=0,i.scrT=0,i.virW=0,i.virH=0,i.iMargin=0,i.oMargin=0,i.zoom=1,i.fitType="window",i.clickZoom=!1,i.isFreeCrop=!1,i.disMode="single",i.opMode=0,i.name=e.name,i.type=e.type,i.chs=e.chs,i.zoom=e.zoom,i.fitType=e.fitType,i.disMode=e.disMode,i.opMode=e.opMode,i}return D(e,t),e.prototype.getCurUid=function(){return-1===this.cur?null:this.chs[this.cur].uid},e.prototype.getCurPage=function(){return-1===this.cur?null:this.chs[this.cur]},e.prototype.idxPage=function(t){return this.chs[t]},e.prototype.uidPage=function(t){if(!t)return null;for(var e=0;e<this.total;e++)if(this.chs[e].uid===t)return this.chs[e];return null},e.prototype.uid2Idx=function(t){for(var e=0;e<this.total;e++)if(this.chs[e].uid===t)return e;return-1},e.prototype.setCur=function(t){return!(t<0||t>=this.total)&&(this.cur=t,!0)},e.prototype.append=function(t){return this.chs.push(t),!0},e.prototype.remove=function(t){var e=this.chs.length;if(0===e)return!1;if(1===e)return this.chs[0].uid===t&&(this.cur=-1,this.total=0,this.slt=[],this.chs=[],!0);var i=this.uid2Idx(t);return-1!==i&&((i===this.cur&&i===this.total-1||i<this.cur)&&this.cur--,this.chs.splice(i,1),this.chs[this.cur]?this.slt=[this.chs[this.cur].uid]:this.slt=[],this.total--,!0)},e.prototype.clear=function(){return this.chs=[],this.slt=[],this.cur=-1,this.total=0,!0},e.prototype.getSlt=function(){return this.slt.slice()},e.prototype.setSlt=function(t){var e=t.length;if(0===e)return this.slt=t,this.cur=-1,!0;var i=this.uid2Idx(t[e-1]);return-1!==i&&(this.slt=t,this.cur=i,!0)},e.prototype.move=function(e,i){return t.prototype.move.call(this,e,i),this.setSlt([this.chs[i].uid])},e.prototype["switch"]=function(e,i){return t.prototype["switch"].call(this,e,i),this.cur===e?this.setSlt([this.chs[i].uid]):this.cur===i&&this.setSlt([this.chs[e].uid]),!0},e.prototype.next=function(){return 0===this.total?-1:(this.total-this.cur>1&&this.cur<this.total&&this.cur++,this.slt=[this.chs[this.cur].uid],this.cur)},e.prototype.prev=function(){return 0===this.total?-1:(this.cur>0&&this.cur--,this.cur<0?-1:(this.slt=[this.chs[this.cur].uid],this.cur))},e.prototype.first=function(){return 0===this.total?-1:(this.cur=0,this.slt=[this.chs[0].uid],0)},e.prototype.last=function(){return 0===this.total?-1:(this.cur!==this.total-1&&(this.cur=this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)},e.prototype.goto=function(t){return 0===this.total?-1:(t!==this.cur&&(t=t<this.total?t>=0?t:0:this.total-1,this.cur=t),this.slt=[this.chs[this.cur].uid],this.cur)},e}(I),j=function(){function t(t){this.tabs=[],this.mode="single",this.curTab=null,this.dfConfig=null,this._opStack=[],this.tabs=[],this.dfConfig={zoom:1,fitType:"window",disMode:"single",opMode:0}}return t.prototype.addTab=function(t){var e=this.checkTab(t.uid),i=null;if(-1!==e)i=this.tabs[e];else{var n=Object.assign(this.dfConfig,t);i=new k(n),"single"===this.mode?this.tabs=[i]:this.tabs.push(i)}return i},t.prototype.getTab=function(t){var e=this.checkTab(t);return-1===e?null:this.tabs[e]},t.prototype.checkTab=function(t){for(var e=this.tabs.length,i=0;i<e;i++)if(this.tabs[i].uid===t)return i;return-1},t.prototype.getCurTab=function(){return this.getTab(this.curTab)},t.prototype.setCurTab=function(t){if(~this.checkTab(t))return this.curTab=t,!0},t.prototype._moveToTop=function(t,e){if(e>=0&&e<t.length){var i=t.splice(e,1)[0];t.push(i)}},t.prototype.closeTab=function(t){var e=this.checkTab(t);return-1!==e&&(this._opStack.pop(),this.tabs.splice(e,1),0===this.tabs.length?this.curTab=null:this.curTab=this._opStack[this._opStack.length-1],!0)},t.prototype.setMode=function(t){return("single"===t||"multiple"===t)&&(this.mode=t,!0)},t.prototype.removePage=function(t,e){var i=this.checkTab(t);return-1!=i&&this.tabs[i].remove(e)},t}(),N=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},L=function(){function t(t,e,i,n,r,o,a){var u=this;this.showLatest=!0,this.isMainViewVisible=!0,this.isThumbnailVisible=!0,this.thbViews=[],this.tabMode="single",this.autoOpen=!0,this.keepZoom=!0,this.cors=!0,this.minPicWidth=800,this.minPicHeight=800,this.saveType="image/jpeg",this.saveQuality=1,this.useHermite=!0,this.rows=1,this.columns=1,this.slideTimer=null,this.showTabTimer=null,this.showSlideTimer=null,this.isLoadingOri=!1,this.showPageUid=null,this.isNew=!1,this.updatePageUid=null,this.uid=n,this._mPub=i,this._db=a,this._iPub=e,this._tabMng=new j(t),(Object(s.s)()||Object(s.t)())&&(this.useHermite=!1),this._gpc=new O(t,this._db,this._iPub,n,this.useHermite,r,o),this._initEvent(),this._gpc.slide.bindCb((function(t){"prev"===t?(u.prevPage(),u.setFitType("window"),u.getSlidePages()):"next"===t&&(u.nextPage(),u.setFitType("window"),u.getSlidePages())}))}return t.prototype.drawSltBox=function(){if("single"===this._gpc.disMode){var t=this._tabMng.getCurTab();if(t){var e=t.getCurPage();e&&this._gpc.drawSltBox(e)}}},t.prototype.render=function(t,e){t=t||!1,e=e||!1;var i=this._tabMng.getCurTab();if(i){this._gpc._layoutSingle(i,t,e);var n=i.getCurPage();n?(this._checkDisplay(i),this.showPageUid=n.uid,this.isNew=!0,this._showPage(),this._ok()):this._err(a.a.PAGE_NOT_EXIST)}},t.prototype.tabHandler=function(t,e,i){var n=this;void 0===e&&(e=null);var r=t.chs,o=r.length,s=null,u=0,h=this.getTab(t.uid),c=this.getCurTab();if(c&&!h&&"single"===this.tabMode&&i&&this.emitM(a.b.REMOVE_VIEWER_UID,c.uid,this.uid),!c||!h&&i)(h=this._tabMng.addTab({uid:t.uid,name:t.name,type:t.type,chs:[]})).total=o,h.cur=this.showLatest?o-1:o>0?0:-1,s=h;else{if(!h)return this.emitM(a.b.REMOVE_VIEWER_UID,t.uid,this.uid),null;u=o-h.chs.length,r=t.chs.slice(h.total),h.total=o,(c.uid===h.uid||i)&&(s=h)}if(null!==e&&(r=t.chs.slice(e,e+u)),this.showLatest?(this.clearBox(),h.cur=null!==e?e+u-1:o-1):o>0&&-1===h.cur&&(h.cur=0),r.forEach((function(t,i){var r=n._db.getMetadata(t);if(r){var o=new x({uid:t,naturalW:r.width,naturalH:r.height},n._db);null!==e?h.insert(o,e+i):h.append(o)}})),this.showLatest){var l=h.idxPage(h.cur);l&&h.setSlt([l.uid])}return s},t.prototype.showTab=function(t,e){void 0===e&&(e="add"),null!==this.showTabTimer&&clearTimeout(this.showTabTimer);var i=t.uid;this._tabMng.setCurTab(i),this.emit(a.e.TAB_CHANGED,{tabId:this._tabMng.curTab,tabs:this._tabMng.tabs}),this._showAllThb(t),this._gpc.initGraphic(t),0===t.total&&this._gpc.clearCanvas(),this._gpc._layoutSingle(t,!0),this._checkDisplay(t);var n=t.getCurUid();n&&(this.showPageUid=n,this.isNew=!0,this._showPage()),this.getSlidePages(),this.__slt([t.cur]),this.__buffer(t,e),this.__pager()},t.prototype.onTabChanged=function(){var t={selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs};this.emit(a.e.TAB_CHANGED,t)},t.prototype.updateSync=function(t,e,i){var n=null;if(!(n=e?this.getTab(e):this.getCurTab()))return this._err(a.a.IMG_NOT_EXIST),!1;for(var r=n.chs,o=new x({uid:t,naturalW:i.metadata.width||0,naturalH:i.metadata.height||0},this._db),s=null,u=0;u<r.length;u++)if(r[u].uid===t){s=n.chs[u],n.chs[u]=o,r[u]=o;break}if(this._tabMng.curTab===n.uid){if(n.getCurUid()===t){this._gpc.cvsMng.offCvs.uid=null;var h=!0;s.naturalHeight===o.naturalHeight&&s.naturalWidth===o.naturalWidth&&(h=!1),this._gpc._layoutSingle(n,h),this._gpc.initGraphic(n),this._checkDisplay(n),this.updatePageUid=t,this.showPageUid=t,this.isNew=!0,this._showPage()}this.getSlidePages(),this.__buffer(n,"modify")}},t.prototype.setTabMode=function(t){-1!==["single","multiple"].indexOf(t)&&(this.tabMode=t)},t.prototype.getSlidePages=function(){var t=this,e=this._tabMng.getCurTab();e&&"continuous"!==e.disMode&&(null!==this.slideTimer&&clearTimeout(this.slideTimer),this.slideTimer=setTimeout((function(){var i=e.cur,n=[],r=e.total;0!==r&&(i-1>=0&&n.push(i-1),n.push(i),i+1<r&&n.push(i+1));for(var o=n.length,s=0;s<o;s++){var u=t.idxUid(n[s]);t.emitM(a.b.LOAD_PAGE,u)}}),200))},t.prototype._setSlidePages=function(){var t=this,e=this.getCurTab();if(e&&"single"===e.disMode){var i=e.cur,n=e.total,r=[],o=[],s=null;return o=[null,null,null],0!==n&&(i-1>=0&&(o[0]=i-1),o[1]=i,i+1<n&&(o[2]=i+1)),o.forEach((function(n){s=t._calcSlidePage(n,i,e),r.push(s)})),this._gpc.setSlidePages(r),r}},t.prototype._calcSlidePage=function(t,e,i){if(null===t)return{width:0,height:0,index:-1,uid:"",url:""};var n=this.idxUid(t),r=this._db.getMetadata(n),o=this._db.getMid(n),s=i.idxPage(t);if(!r||!o||!s)return{width:0,height:0,index:-1,uid:"",url:""};var a=this._gpc._zoom;return t!==e&&(a=this._gpc.calcZoomForSlide(r.width||1,r.height||1)),{width:(s.naturalWidth||0)*a,height:(s.naturalHeight||0)*a,index:t,uid:n,url:o.minData||""}},t.prototype._showAllThb=function(t,e){var i=this,n=t.chs||[],r=t.uidPage(e);r&&(n=[r]);var o=[];n.forEach((function(t){var e=i._db.getMid(t.uid),n={uid:t.uid,data:e.minData,tags:e.getTags()};o.push(n)})),this.emit(a.e.THUMBNAIL_CHANGED,o)},t.prototype.showThbItem=function(t){var e=this,i=this.getCurTab();if(i){var n=i.uidPage(t),r=this._db.getMid(t);if(n&&r){var o={uid:t,data:r.minData,tags:r.getTags()};this.emit(a.e.UPDATE_THB_ITEM,o),this.showSlideTimer&&clearTimeout(this.showSlideTimer),this.showSlideTimer=setTimeout((function(){e._setSlidePages()}),200)}}},t.prototype._showPage=function(){var t=this,e=this.showPageUid,i=this._db.getMid(e);!i||i.show.indexOf(this.uid)<0?this.isLoadingOri=!1:i.img?this._gpc.render(e):!this.isLoadingOri&&this.isNew&&(e===this.updatePageUid&&(this.updatePageUid=null),this.isLoadingOri=!0,this._db.getDataAsync(e).then((function(i){var n=Object(s.b)(i.oriData),r=t._db.getMid(e);if(e===t.updatePageUid)return t.updatePageUid=null,t.isLoadingOri=!1,void t._showPage();if(!r||e!==t.showPageUid)return t.isLoadingOri=!1,void t._showPage();r.oriData=n.data,r.oriType=n.type;var o=new Image;t.cors&&(o.crossOrigin="anonymous"),o.src=r.oriData,o.onload=function(){var i=t._db.getMid(e);if(t.isLoadingOri=!1,e===t.updatePageUid)return t.updatePageUid=null,void t._showPage();i&&t.showPageUid===e?(i.img=o,t._gpc.render(e),t.isNew=!1):t._showPage()},o.onerror=function(){if(t.isLoadingOri=!1,t.updatePageUid===e)return t.updatePageUid=null,void t._showPage();t.showPageUid===e?t.isNew=!1:t._showPage()}}))["catch"]((function(i){t.isLoadingOri=!1,t.showPageUid===e?t.isNew=!1:t._showPage()})))},t.prototype._checkDisplay=function(t){var e=this;if("single"===t.disMode){var i=t.getCurUid();t.chs.forEach((function(t){var n=e._db.getMid(t.uid);if(n){var r=n.show.indexOf(e.uid);t.uid===i?r<0&&n.show.push(e.uid):(r>-1&&n.show.splice(r,1),n.show.length<1&&("object"===n.oriType&&Object(s.D)(n.oriData),n.active=!1,n.load=!1,n.img=null,n.oriData=null))}}))}},t.prototype.getTabManager=function(){return this._tabMng},t.prototype.closeTab=function(t){return!!this._tabMng.closeTab(t)&&(this.emit("_onCloseTab",t),!0)},t.prototype.closeCurTab=function(){},t.prototype.emptyTab=function(t){},t.prototype.getCurrentTabId=function(){return this._tabMng.curTab},t.prototype.getTab=function(t){return this._tabMng.getTab(t)},t.prototype.getCurTab=function(){return this._tabMng.getCurTab()},t.prototype.getCurPageCount=function(){var t=this.getCurTab();return t?t.total:0},t.prototype.createThumbnailView=function(t){void 0===t&&(t={});var e=new S(t,this._mPub);return this.thbViews.push(e),e},t.prototype.removeThumbnailView=function(t){if(!t)return this.thbViews=[],!0;for(var e=0;e<this.thbViews.length;e++)if(this.thbViews[e].uid===t)return this.thbViews.splice(e,1),!0;return!1},t.prototype.getThumbnailViewById=function(t){if(!this._chStr(t))return null;for(var e=0;e<this.thbViews.length;e++)if(this.thbViews[e].uid===t)return this._ok(),this.thbViews[e];return null},t.prototype.remove=function(t,e,i){if(void 0===e&&(e=!0),!Object(s.l)(t))return this._err(a.a.PARAM_TYPE),!1;var n=this._tabMng.tabs;t.forEach((function(t){n.forEach((function(e){e.remove(t)}))}));var r=this.getCurTab();return r?(i&&i!==r.uid||(this.showTab(r,"remove"),0===r.chs.length&&(this._gpc.clearCanvas(),this.emit(a.e.SET_SCROLLER_SIZE,{width:1,height:1,x:1,y:1}))),e&&this.emitM(a.b.REMOVE_PAGE,this.uid,r,t),this._ok(),!0):void 0},t.prototype.rmAll=function(t){void 0===t&&(t=!0);var e=[],i=this.getCurTab();return i?(i.chs.forEach((function(t){e.push(t.uid)})),this.remove(e,t,i.uid)):(this._ok(),!0)},t.prototype.setBox=function(t,e){var i=this.getCurTab();if(!i)return!1;var n=i.getCurPage();if(n===undefined)return!1;var r=null;Object(s.l)(t)?r=t:Object(s.v)(t)&&(r=[t]),e||n.boxCount()>0&&(n.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,i.cur));for(var o=r.length,u=0;u<o;u++){var h=r[u];if(!this._chBox(h,n.naturalWidth,n.naturalHeight))return!1;n.cropMng.addBox([h.left,h.top,h.left+h.width,h.top,h.left+h.width,h.top+h.height,h.left,h.top+h.height],"bottomRight")}this.drawSltBox();var c=n.cropMng.getRectArr();return c.length>0&&this.emit(a.f.PAGE_AREA_SELECTED,i.cur,c),this._ok(),!0},t.prototype._chBox=function(t,e,i){return Object(s.u)(t.left)&&Object(s.u)(t.top)&&Object(s.u)(t.width)&&Object(s.u)(t.height)?t.left<0||t.top<0||t.width<0||t.height<0?(this._err(a.a.PARAMETER_RANGE),!1):!(t.left>e||t.top>i||t.left+t.width>e||t.top+t.height>i)||(this._err(a.a.PARAMETER_RANGE),!1):(this._err(a.a.PARAMETER_INVALID),!1)},t.prototype.clearBox=function(t){var e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),!1;var i=e.getCurPage();return i?(i.boxCount()>0&&this.emit(a.f.PAGE_AREA_UNSELECTED,e.cur),i.cropMng.removeBox(t),this.drawSltBox(),this._ok(),!0):(this._err(a.a.PAGE_NOT_EXIST),!1)},t.prototype._clearBox=function(){var t=this.getCurTab();if(!t)return!1;var e=t.getCurPage();return e===undefined?(this._err(a.a.PAGE_NOT_EXIST),!1):(e.boxCount()>0&&this.emit(a.f.PAGE_AREA_UNSELECTED,t.cur),e.cropMng.removeBox(),this.emit(a.d.CLEAR_SLT_BOX,t.cur),!0)},t.prototype.setFreeBox=function(t){var e=this.getCurTab();if(!e)return!1;var i=e.getCurPage();if(i===undefined)return!1;i.cropMng.addFreeBox(t),this.render();var n=i.cropMng.getRectArr();return n.length>0&&this.emit(a.f.PAGE_AREA_SELECTED,e.cur,n),this._ok(),!0},t.prototype.nextPage=function(t){void 0===t&&(t=!0);var e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),-1;var i=!1,n=e.cur,r=e.slt.length,o=e.next();if(-1===o)return this._err(a.a.IMG_NOT_EXIST),-1;if(n!==e.total-1||r>1){var s=e.idxPage(n);s&&s.boxCount()>0&&(s.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,e.cur)),i=!0,this.__pager(),this.render(i),this.getSlidePages(),t&&this.emitM(a.b.CHANGE_PAGE,this.uid,"next"),this.__buffer(e,"shift")}return this.__slt(),this._ok(),o},t.prototype.prevPage=function(t){void 0===t&&(t=!0);var e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),-1;var i=!1,n=e.cur,r=e.slt.length,o=e.prev();if(-1===o)return this._err(a.a.IMG_NOT_EXIST),-1;if(0!==n||r>1){var s=e.idxPage(n);s&&s.boxCount()>0&&(s.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,e.cur)),i=!0,this.__pager(),this.render(i),this.getSlidePages(),t&&this.emitM(a.b.CHANGE_PAGE,this.uid,"prev"),this.__buffer(e,"shift")}return this.__slt(),this._ok(),o},t.prototype.firstPage=function(t){void 0===t&&(t=!0);var e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),-1;var i=!1,n=e.cur,r=e.slt.length,o=e.first();if(-1===o)return this._err(a.a.IMG_NOT_EXIST),-1;if(0!==n||r>1){var s=e.idxPage(n);s&&s.boxCount()>0&&(s.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,e.cur)),i=!0,this.__pager(),this.render(i),this.getSlidePages(),t&&this.emitM(a.b.CHANGE_PAGE,this.uid,"first"),this.__buffer(e,"shift")}return this.__slt(),this._ok(),o},t.prototype.lastPage=function(t){void 0===t&&(t=!0);var e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),-1;var i=!1,n=e.cur,r=e.slt.length,o=e.last();if(-1===o)return this._err(a.a.IMG_NOT_EXIST),-1;if(n!==e.total-1||r>1){var s=e.idxPage(n);s&&s.boxCount()>0&&(s.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,e.cur)),i=!0,this.__pager(),this.render(i),this.getSlidePages(),t&&this.emitM(a.b.CHANGE_PAGE,this.uid,"last"),this.__buffer(e,"shift")}return this.__slt(),this._ok(),o},t.prototype.gotoPage=function(t,e){if(void 0===e&&(e=!0),!this._checkIndex(t))return-1;var i=this.getCurTab();if(!i)return this._err(a.a.IMG_NOT_EXIST),-1;var n=!1,r=i.cur,o=i.slt.length,s=i.goto(t);if(-1===s)return this._err(a.a.IMG_NOT_EXIST),-1;if(r!==t||o>1){var u=i.idxPage(r);u&&u.boxCount()>0&&(u.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,i.cur)),n=!0,this.render(n),this.getSlidePages(),e&&this.emitM(a.b.CHANGE_PAGE,this.uid,"goto",t),this.__buffer(i,"shift")}return this.__pager(),this.__slt(),this._ok(),s},t.prototype.__slt=function(t){t||(t=this.getSltIndexes()),this.emit(a.e.IMAGE_SELECTED,t),this.emit(a.f.IMAGE_SELECTED,t)},t.prototype.updateSltIndex=function(){this.__slt(),this.__pager(),this.render()},t.prototype.__pager=function(){var t=this.getCurTab(),e={cur:-1,total:0};t&&(e={cur:t.cur,total:t.total}),this.emit(a.e.PAGER_CHANGED,e)},t.prototype.changeTag=function(t){this.emit(a.b.TAG_CHANGED,t)},t.prototype.changeDir=function(t){this.emit(a.b.TAG_CHANGED,t)},t.prototype.rmPageTag=function(t,e){var i=this._tabMng.getTab(e);return!!i&&(i.remove(t),i.uid===this._tabMng.curTab?(this.showTab(i,"remove"),0===i.chs.length&&this._gpc.clearCanvas(),!0):void 0)},t.prototype.addPageTag=function(t,e){var i=this._tabMng.getTab(e);if(!i)return!1;var n=this._db.getMetadata(t);if(!n)return!1;var r=new x({uid:t,naturalW:n.width,naturalH:n.height},this._db);i.append(r),this.showLatest&&(i.cur=i.total-1),i.uid===this._tabMng.curTab&&this.showTab(i,"add")},t.prototype.emptyTag=function(t){if(!this._tabMng.getTab(t))return!1},t.prototype.renameTag=function(t,e,i){var n=this._tabMng.getTab(i);if(!n)return!1;n.name=e,this.emit(a.e.TAB_CHANGED,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},t.prototype.switchPage=function(t,e,i,n){void 0===i&&(i=!0);var r=null;return(r=n?this.getTab(n):this.getCurTab())?!(!this._checkIndex(t)||!this._checkIndex(e))&&(r["switch"](t,e),this._tabMng.curTab===r.uid&&(this._showAllThb(r),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(r,"shift")),i&&this.emitM(a.b.REORDER_PAGE,this.uid,r,"switch",t,e),this._ok(),!0):(this._err(a.a.IMG_NOT_EXIST),!1)},t.prototype.movePage=function(t,e,i,n){void 0===i&&(i=!0);var r=null;return(r=n?this.getTab(n):this.getCurTab())?!(!this._checkIndex(t)||!this._checkIndex(e))&&(r.move(t,e),this._tabMng.curTab===r.uid&&(this._showAllThb(r),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(r,"shift")),i&&this.emitM(a.b.REORDER_PAGE,this.uid,r,"move",t,e),this._ok(),!0):(this._err(a.a.IMG_NOT_EXIST),!1)},t.prototype.reorderPage=function(t,e,i,n){void 0===i&&(i=!0);var r=null;if(!(r=n?this.getTab(n):this.getCurTab()))return this._err(a.a.IMG_NOT_EXIST),!1;var o=r.getCurPage();if(r.reorder(t),this._tabMng.curTab===r.uid){this._showAllThb(r),this.setSltPages(e,!1);var s=r.getCurPage();o&&s&&o.uid!==s.uid&&o.boxCount()>0&&(o.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,r.cur))}i&&this.emitM(a.b.REORDER_PAGE,this.uid,r,"reorder",t,e)},t.prototype.uidIdx=function(t){var e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),null;if(!this._chStr(t))return null;for(var i=e.chs.length,n=0;n<i;n++){if(e.chs[n].uid===t)return this._ok(),n}return this._err(a.a.PARAMETER_INVALID),null},t.prototype.idxUid=function(t){if(!this._checkIndex(t))return null;var e=this.getCurTab();return e?(this._ok(),e.chs[t].uid):(this._err(a.a.IMG_NOT_EXIST),null)},t.prototype.getRealTimeMetadataByIndex=function(t){if(t!==undefined&&!this._checkIndex(t))return null;var e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),null;var i=e.getCurPage();if(t!==undefined&&(i=e.idxPage(t)),!i)return this._err(a.a.IMG_NOT_EXIST),null;var n=this._db.getMetadata(i.uid);return n?((n=Object.assign({},n)).width=i.naturalWidth,n.height=i.naturalHeight,this._ok(),n):null},t.prototype.getMetadata=function(t){if(!this._checkIndex(t))return null;var e=this.idxUid(t);if(!e)return null;this._ok();var i=this._db.getMetadata(e);return i?Object.assign({},i):null},t.prototype.setMetadata=function(t,e){if(!this._checkIndex(t))return!1;if(!Object(s.v)(e))return this._err(a.a.PARAM_TYPE),!1;var i=this.idxUid(t);return!!i&&(this._ok(),this._db.updateMetadata(i,e))},t.prototype.getCurIndex=function(){var t=this._tabMng.getCurTab();return t?(this._ok(),t.cur):(this._err(a.a.IMG_NOT_EXIST),-1)},t.prototype.setCurIndex=function(t,e){if(void 0===e&&(e=!0),!this._checkIndex(t))return!1;var i=this._tabMng.getCurTab();if(!i)return this._err(a.a.IMG_NOT_EXIST),!1;var n=i.getCurUid(),r=this.idxUid(t),o=!1;if(r!==n){var s=i.getCurPage();if(s&&s.boxCount()>0&&(s.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,i.cur)),o=!0,i.setSlt([r]),!i.setCur(t))return!1;this.__pager(),this.render(o),this.getSlidePages(),e&&this.emitM(a.b.CHANGE_PAGE,this.uid,"cur",t),this.__buffer(i,"shift")}return this.__slt(),this._ok(),!0},t.prototype.setSltPages=function(t,e){var i=this;if(void 0===e&&(e=!0),!Object(s.l)(t))return this._err(a.a.PARAM_TYPE),!1;var n=t.length;0===n&&this._err(a.a.PARAMETER_INVALID);for(var r=0;r<n;r++){var o=t[r];if(!this._checkIndex(o))return!1}var u=this.getCurTab();if(!u)return this._err(a.a.IMG_NOT_EXIST),!1;var h=u.getCurUid(),c=[];t.forEach((function(t){var e=i.idxUid(t);c.push(e)}));var l=!1;if(h!==c[n-1]){var f=u.getCurPage();f&&f.boxCount()>0&&(f.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,u.cur)),l=!0}return u.setSlt(c),this.__slt(t),this.__pager(),this.render(l),this.getSlidePages(),e&&this.emitM(a.b.CHANGE_PAGE,this.uid,"slt",t),this.__buffer(u,"shift"),this._ok(),!0},t.prototype.getCustomDataByIndex=function(t){if(!this._checkIndex(t))return null;var e=this.idxUid(t);return e?this.getCustomDataByUid(e):(this._err(a.a.IMG_NOT_EXIST),null)},t.prototype.getCustomDataByUid=function(t){var e=this._db.getMid(t);return e?(this._ok(),e.customData):(this._err(a.a.IMG_NOT_EXIST),null)},t.prototype.getSltIndexes=function(){var t=this,e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),null;var i=e.getSlt(),n=[];return i.forEach((function(e){var i=t.uidIdx(e);n.push(i)})),this._ok(),n},t.prototype.selectAll=function(){var t=this.getCurTab();if(!t)return this._err(a.a.IMG_NOT_EXIST),!1;for(var e=[],i=t.chs.length,n=0;n<i;n++)e.push(n);return this.setSltPages(e)},t.prototype.zoomIn=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomIn()},t.prototype.zoomOut=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomOut()},t.prototype.zoomTo=function(t,e,i){return!Object(s.u)(t)||e!==undefined&&!Object(s.u)(e)||i!==undefined&&!Object(s.u)(i)?(this._err(a.a.PARAM_TYPE),-1):("single"===this.tabMode&&(this._tabMng.dfConfig.zoom=t,this._tabMng.dfConfig.fitType="none"),this._ok(),this._gpc.zoomTo(t,!1,e,i))},t.prototype.flip=function(t){var e=this.getCurTab();if(!e)return this._err(a.a.IMG_NOT_EXIST),!1;var i=e.getCurPage();if(!i)return this._err(a.a.IMG_NOT_EXIST),!1;this._clearBox();var n=this._db.getMid(i.uid);if(n){this._releaseMin(n);var r=n.edt.flip(t);this.emitM(a.b.EDIT,"flip",{uid:i.uid,flipObj:r,page:i,interlayerData:n})}return this.getSlidePages(),!0},t.prototype.reset=function(){var t=this,e=this.getCurTab();return e&&e.getCurPage()?(this._clearBox(),e.chs.forEach((function(e){var i=t._db.getMid(e.uid),n=t._db.getMetadata(e.uid);i&&i.edt.all.length>0&&(t._releaseMin(i),e.setNaturalSize(n.width,n.height),i.edt.reset(),t.emitM(a.b.EDIT,"reset",{uid:e.uid}))})),this.getSlidePages(),this._ok(),!0):(this._err(a.a.IMG_NOT_EXIST),!1)},t.prototype.rotate=function(t,e){var i=this,n=this.getCurTab();if(!n)return this._err(a.a.IMG_NOT_EXIST),!1;if(!Object(s.u)(t))return this._err(a.a.PARAM_TYPE),!1;if(e!==undefined){if(!Object(s.u)(e)&&!Object(s.l)(e))return this._err(a.a.PARAM_TYPE),!1;if(Object(s.l)(e))for(var r=e.length,o=0;o<r;o++)if(!this._checkIndex(e[o]))return!1}var u=[],h=n.getCurPage();e===undefined?u=[n.cur]:u=Object(s.u)(e)?[e]:e.slice();this._clearBox();var c=this._gpc.rotateMode;return u.forEach((function(e){h=n.chs[e];var r=i._db.getMid(h.uid);if(r){i._releaseMin(r);var o=r.edt.rotate(t,0,0,c);i.emitM(a.b.EDIT,"rotate",{uid:h.uid,rotateObj:o,page:h,interlayerData:r})}})),this.getSlidePages(),this._ok(),!0},t.prototype.crop=function(t,e,i,n){var r=this.getCurTab();if(!r)return this._err(a.a.IMG_NOT_EXIST),!1;var o=r.getCurPage();if(!o)return this._err(a.a.IMG_NOT_EXIST),!1;if(!(Object(s.u)(t)&&Object(s.u)(e)&&Object(s.u)(i)&&Object(s.u)(n)))return this._err(a.a.PARAM_TYPE),!1;var u=o.naturalWidth,h=o.naturalHeight;if(t<0||t>u||e<0||e>h||i<0||n<0||t+i>u||e+n>h)return this._err(a.a.PARAMETER_RANGE),!1;this._clearBox();var c=this._db.getMid(o.uid);if(c){this._releaseMin(c);var l=c.edt.crop(t,e,i,n);this.emitM(a.b.EDIT,"crop",{uid:o.uid,cropObj:l,page:o})}return this.getSlidePages(),this._ok(),!0},t.prototype.erase=function(t,e,i,n,r){var o=this.getCurTab();if(!o)return this._err(a.a.IMG_NOT_EXIST),!1;var u=o.getCurPage();if(!u)return this._err(a.a.IMG_NOT_EXIST),!1;if(!(Object(s.u)(t)&&Object(s.u)(e)&&Object(s.u)(i)&&Object(s.u)(n)))return this._err(a.a.PARAM_TYPE),!1;var h=u.naturalWidth,c=u.naturalHeight;if(t<0||t>h||e<0||e>c||i<0||n<0||t+i>h||e+n>c)return this._err(a.a.PARAMETER_RANGE),!1;this._clearBox();var l=this._db.getMid(u.uid);if(l){this._releaseMin(l);var f=l.edt.erase(t,e,i,n,r);this.emitM(a.b.EDIT,"erase",{uid:u.uid,eraseObj:f,page:u})}return this.getSlidePages(),this._ok(),!0},t.prototype.overlay=function(t,e,i,n,r,o,u){if(!this._checkIndex(t))return!1;var h=this.getCurTab();if(!h)return this._err(a.a.IMG_NOT_EXIST),!1;var c=h.idxPage(t);if(!c)return this._err(a.a.IMG_NOT_EXIST),!1;if(!(Object(s.u)(e)&&Object(s.u)(i)&&Object(s.u)(n)&&Object(s.u)(r)))return this._err(a.a.PARAM_TYPE),!1;var l=c.naturalWidth,f=c.naturalHeight;if(e<0||e>l||i<0||i>f||n<0||r<0||e+n>l||i+r>f)return this._err(a.a.PARAMETER_RANGE),!1;var p=this._db.getMid(c.uid),_={type:"overlay",left:e,top:i,width:n,height:r,color:o,opacity:u};return p.overlays.push(_),p&&(this._releaseMin(p),this.emitM(a.b.EDIT,"overlay",{uid:c.uid})),this.getSlidePages(),this._clearBox(),this._ok(),!0},t.prototype.changePageSize=function(t,e){if(t<=0||e<=0)return this._err(a.a.PARAMETER_INVALID),!1;var i=this.getCurTab();if(!i)return this._err(a.a.IMG_NOT_EXIST),!1;var n=i.getCurPage();if(!n)return this._err(a.a.IMG_NOT_EXIST),!1;if(!Object(s.u)(t)||!Object(s.u)(e))return this._err(a.a.PARAM_TYPE),!1;this._clearBox();var r=this._db.getMid(n.uid);if(r){this._releaseMin(r);var o=r.edt.changePageSize(t,e);this.emitM(a.b.EDIT,"changePageSize",{uid:n.uid,changeSizeObj:o,page:n})}return this.getSlidePages(),this._ok(),!0},t.prototype.getOffCvs=function(){return this._gpc.cvsMng.offCvs},t.prototype._releaseMin=function(t){Object(s.D)(t.minData),t.minData=null,t.minType=null,t.activeMin=!1},t.prototype.setSaveType=function(t){return-1===["image/png","image/jpeg"].indexOf(t)?(this._err(a.a.PARAMETER_INVALID),!1):(this.saveType=t,this._gpc.cvsMng.setSaveType(t),this._ok(),!0)},t.prototype.getSaveType=function(){return this.saveType},t.prototype.setSaveQuality=function(t){return t<0||t>1?(this._err(a.a.PARAMETER_RANGE),!1):(this.saveQuality=t,this._ok(),!0)},t.prototype.getSaveQuality=function(){return this.saveQuality},t.prototype.setRotateMode=function(t){return Object(s.u)(t)||this._err(a.a.PARAM_TYPE),-1===[0,1,2].indexOf(t)?(this._err(a.a.PARAMETER_INVALID),!1):(this._gpc.rotateMode=t,this._ok(),!0)},t.prototype.getRotateMode=function(){return this._gpc.rotateMode},t.prototype.setSaveBackgroundColor=function(t){return this._ok(),this._gpc.setSaveBackgroundColor(t)},t.prototype.getSaveBackgroundColor=function(){return this._gpc.saveBg},t.prototype.saveTransformation=function(){var t=this,e=this.getCurTab();if(!e)return Promise.reject(a.a.IMG_NOT_EXIST);for(var i=e.getCurUid(),n=e.chs,r=[],o=function(e){var o=n[e],a=u._db.getMid(o.uid);if(a&&a.edt.all.length>0){var h=new Promise((function(e,n){var r=!0;i===o.uid&&(r=!1);var a=t._db.getMid(o.uid);a.img?t._saveToBlob(o.uid,a.img,o,r).then((function(t){e(t)})):a.oriData?t._getImage(o.uid,a.oriData,o,r).then((function(t){e(t)})):t._db.getDataAsync(o.uid).then((function(i){var n=Object(s.b)(i.oriData);t._getImage(o.uid,n,o,r).then((function(t){e(t)}))}))["catch"]((function(t){}))}));r.push(h)}},u=this,h=0;h<n.length;h++)o(h);return Promise.all(r)},t.prototype.__buffer=function(t,e){var i,n,r={action:e,uids:(null===(n=null===(i=t.data)||void 0===i?void 0:i.chs)||void 0===n?void 0:n.slice())||[],currentUid:t.getCurUid(),selectedUids:t.getSlt()};this.emit(a.d.CURRENT_CHANGED,t.getCurUid()),this.emit(a.f.BUFFER_CHANGED,r)},t.prototype._getImage=function(t,e,i,n){var r=this;return new Promise((function(o,a){var u=new Image;r.cors&&(u.crossOrigin="anonymous"),u.src=e.data,u.onload=function(){r._saveToBlob(t,u,i,n).then((function(t){o(t)})),"object"===e.type&&Object(s.D)(e.data),u.onload=null,u.src=""}}))},t.prototype._saveToBlob=function(t,e,i,n){var r=this,o=this._gpc.cvsMng.newSaveCvs(),s=this._db.getMetadata(t),u=this._db.getMid(t),h=u.customData,c=u.tags;return s.width=i.naturalWidth,s.height=i.naturalHeight,u.setTempSize(i.naturalWidth,i.naturalHeight),o.reset(),o.render(t,e,i,u),new Promise((function(e,i){o.canvas.toBlob((function(i){o.reset(),u.edt.reset(),r.emitM(a.b.UPDATE_SYNC,t,{oriData:i,minData:null,metadata:s,customData:h,tags:c},!0),r._db.getDataAsync(t).then((function(t){e(i)}))}),r.saveType,r.saveQuality)}))},t.prototype.getMinPageData=function(){var t=this.getCurTab();return t&&t.getCurPage()?this._gpc.getMinPageData():(this._err(a.a.IMG_NOT_EXIST),null)},t.prototype.setCropLineColor=function(t){this._gpc.cropLineColor=t,this.drawSltBox()},t.prototype.getCropLineColor=function(){return this._gpc.cropLineColor},t.prototype.setKeepZoom=function(t){this._gpc.keepZoom=t},t.prototype.getFitType=function(){return this._gpc.fitType},t.prototype.setFitType=function(t){if(!this._chStr(t))return!1;if(-1===["window","width","height"].indexOf(t))return this._err(a.a.PARAMETER_INVALID),!1;this._gpc.fitType=t;var e=this.getCurTab();return e&&(e.fitType=t),"single"===this.tabMode&&(this._tabMng.dfConfig.fitType=t),this.render(!0),this._ok(),!0},t.prototype.setZoom=function(t){"single"===this.tabMode&&(this._tabMng.dfConfig.zoom=t,this._tabMng.dfConfig.fitType="none");var e=this.getCurTab();return e&&(e.zoom=t),this._gpc.setZoom(t)},t.prototype.getZoom=function(){return this._gpc.getZoom()},t.prototype.setMinZoom=function(t){return this._gpc.minZoom=t,!0},t.prototype.getMinZoom=function(){return this._gpc.minZoom},t.prototype.setMaxZoom=function(t){return this._gpc.maxZoom=t,!0},t.prototype.getMaxZoom=function(){return this._gpc.maxZoom},t.prototype.setOperationMode=function(t){var e=this.getCurTab();if(e){e.opMode=t;var i=e.getCurPage();i&&i.boxCount()>0&&(i.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,e.cur))}this._gpc.opMode=t,"single"===this.tabMode&&(this._tabMng.dfConfig.opMode=t)},t.prototype.getOperationMode=function(){return this._gpc.opMode},t.prototype.setDisplayMode=function(t){var e=this.getCurTab();if(e){e.disMode=t;var i=e.getCurPage();i&&i.boxCount()>0&&(i.cropMng.clear(),this.drawSltBox(),this.emit(a.f.PAGE_AREA_UNSELECTED,e.cur))}this._tabMng.dfConfig.disMode=t,this._gpc.disMode=t,this.render(!0),this.getSlidePages()},t.prototype.setAspectRatio=function(t){this._gpc.aspectRatio=t;var e=this.getCurTab();e&&e.chs.forEach((function(e){e.cropMng.setAspectRatio(t)}))},t.prototype.getAspectRatio=function(){return this._gpc.aspectRatio},t.prototype.setKeepAspectRatio=function(t){this._gpc.keepAspectRatio=t;var e=this.getCurTab();e&&e.chs.forEach((function(e){e.cropMng.setKeepAspectRatio(t)}))},t.prototype.getKeepAspectRatio=function(){return this._gpc.keepAspectRatio},t.prototype.setPageMargin=function(t){return this._gpc.iMargin=t,!0},t.prototype.getPageMargin=function(){return this._gpc.iMargin},t.prototype.setZoomDelta=function(){},t.prototype.getZoomDelta=function(){},t.prototype.setAllowSlide=function(t){this._gpc.setAllowSlide(t)},t.prototype.getAllowSlide=function(){return this._gpc.allowSlide},t.prototype._getOutEvent=function(t){var e=null,i=-1,n=-1,r=-1,o=null==t?void 0:t.clientX,s=null==t?void 0:t.clientY,a=this.getCurTab();if(a&&(e=a.getCurPage()),e&&(i=this.uidIdx(e.uid)),this._gpc.checkMouseOverPage(t)){var u=this._gpc.getMouseCoordinate(t),h=this._gpc.toPageCoordinate(u.x,u.y);n=Math.floor(h.x),r=Math.floor(h.y)}return{index:i,imageX:n,imageY:r,pageX:o,pageY:s}},t.prototype._initEvent=function(){var t=this;this.on(a.b.APPEND_SYNC,(function(e,i){t.emitM(a.b.APPEND_SYNC,e,i)})),this.on(a.d.CANVAS_VISIBILITY_CHANGED,this._onSetCanvasVisibility.bind(this)),this.on(a.d.BIND_SLIDE_COMPONENT,(function(e){var i;null===(i=t._gpc.slide)||void 0===i||i.bind(e)})),this.on(a.d.UNBIND_SLIDE_COMPONENT,(function(){var e;null===(e=t._gpc.slide)||void 0===e||e.unbind()})),this.on(a.d.BIND_CANVAS,(function(e){t._gpc.cvsMng.bind(e)})),this.on(a.d.UNBIND_CANVAS,(function(e){t._gpc.cvsMng.unbind(e)})),this.on(a.d.SET_CANVAS_SIZE,(function(e){var i=e.width,n=e.height,r=(e.isChange,t._gpc.setCanvasOffsetSize(i,n)),o=t.getCurTab();o&&0!==o.total||t.emit(a.e.SET_SCROLLER_SIZE,{width:0,height:0,x:0,y:0}),"single"!==t._gpc.disMode||r||(t.render(!1,!1),t.drawSltBox(),t.getSlidePages())})),this.on(a.d.DISPLAYED_IMAGE_CHANGED,(function(e){e.forEach((function(e){var i=t._db.getMid(e);if(i)if(i.minData){var n={uid:e,data:i.minData,tags:i.getTags()};t.emit(a.e.UPDATE_THB_ITEM,n)}else t.emitM(a.b.LOAD_PAGE,e)}))})),this.on(a.d.CANVAS_MOUSE_DOWN,(function(e,i){var n=t.getCurTab();n&&(n.getCurPage()&&t._gpc.onCanvasMousedown(e));i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_MOUSE_DOWN,i,e)})),this.on(a.d.CANVAS_MOUSE_MOVE,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_MOUSE_MOVE,i,e)})),this.on(a.d.CANVAS_MOUSE_UP,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_MOUSE_UP,i,e)})),this.on(a.d.CANVAS_MOUSE_OVER,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_MOUSE_OVER,i,e)})),this.on(a.d.CANVAS_MOUSE_OUT,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_MOUSE_OUT,i,e)})),this.on(a.d.CANVAS_TOUCH_START,(function(e,i){var n=t.getCurTab();n&&(n.getCurPage()&&t._gpc.onCanvasTouchstart(e));i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_MOUSE_DOWN,i,e)})),this.on(a.d.CANVAS_TOUCH_MOVE,(function(e,i){var n=t.getCurTab();n&&(n.getCurPage()&&t._gpc.onCanvasTouchmove(e));i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_MOUSE_MOVE,i,e)})),this.on(a.d.CANVAS_TOUCH_END,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_MOUSE_UP,i,e)})),this.on(a.d.CANVAS_SCROLL,(function(e,i){var n=t.getCurTab();n&&(n.getCurPage()&&t._gpc.onCanvasScroll(e))})),this.on(a.d.CANVAS_WHEEL,(function(e,i){var n=t.getCurTab();n&&(n.getCurPage()&&t._gpc.onCanvasWheel(e))})),this.on(a.d.CANVAS_CLICK,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_CLICK,i,e),t.emit(a.d.UPDATE_FOCUS,{viewerId:t.uid,thumbnailId:undefined}),Object(s.G)(e)})),this.on(a.d.CANVAS_DOUBLE_CLICK,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_DOUBLE_CLICK,i,e)})),this.on(a.d.CANVAS_RIGHT_CLICK,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_RIGHT_CLICK,i,e)})),this.on(a.d.CANVAS_RIGHT_CLICK,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.PAGE_CONTEXTMENU,i,e)})),this.on(a.d.CANVAS_KEY_DOWN,(function(e){t.emit(a.f.KEY_DOWN,e)})),this.on(a.d.CANVAS_KEY_UP,(function(e){t.emit(a.f.KEY_UP,e)})),this.on(a.d.CANVAS_RESIZE,(function(e,i){t.emit(a.f.RESIZE,e,i)})),this.on(a.d.CANVAS_DRAG_START,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.DRAG_START,i,e)})),this.on(a.d.CANVAS_DRAG_MOVE,(function(e,i){i||(i=t._getOutEvent(e)),t.emit(a.f.DRAG_MOVE,i,e)})),this.on(a.d.CANVAS_DRAG_DONE,(function(e){t.emit(a.f.DRAG_DONE,e)})),this.on(a.d.DOCUMENT_MOVE,(function(e){var i=t.getCurTab();i&&(i.getCurPage()&&t._gpc.onDocumentMousemove(e))})),this.on(a.d.DOCUMENT_UP,(function(e){var i=t.getCurTab();i&&(i.getCurPage()&&t._gpc.onDocumentMouseup(e))})),this.on(a.d.SET_SELECTED_INDEXES,(function(e){t.setSltPages(e,!1),t.emitM(a.b.CHANGE_PAGE,t.uid,"slt",e)})),this.on(a.d.REORDER_THUMBNAIL,(function(e,i){t.getCurTab()&&t.reorderPage(e,i,!0)})),this.on(a.d.CANVAS_DEFAULT_CURSOR,(function(e){void 0===e&&(e="default"),t._gpc.defaultCursor=e})),this.on("_onRender",(function(){t.render()})),this.on("_onRenderBoxes",(function(){t.drawSltBox()})),this.on("_getSlidePages",(function(){t.getSlidePages()}))},t.prototype._onSetCanvasVisibility=function(t){},t.prototype.setScrBarW=function(t){this._gpc.scrBarW=t},t.prototype.on=function(t,e){this._iPub.on(t,e)},t.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._iPub).emit.apply(e,N([t],i))},t.prototype.off=function(t,e){this._iPub.off(t,e)},t.prototype._on=function(t,e){this._mPub.on(t,e)},t.prototype.emitM=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._mPub).emit.apply(e,N([t],i))},t.prototype._off=function(t,e){this._mPub.off(t,e)},t.prototype._err=function(t){this.emitM(a.d.ERROR,t)},t.prototype._ok=function(){this.emitM(a.d.ERROR,a.a.OK)},t.prototype._chStr=function(t){return!!Object(s.x)(t)||(this._err(a.a.PARAM_TYPE),!1)},t.prototype._checkIndex=function(t){return Object(s.u)(t)?!(t<0||t>=this.getCurPageCount())||(this._err(a.a.PARAMETER_RANGE),!1):(this._err(a.a.PARAM_TYPE),!1)},t}(),B=undefined&&undefined.__assign||function(){return(B=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},U=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},V=function(){function t(t,e,i,n,r,u,h,c,l){var f=this;this.ViewUi=null,this.group=null,this._uiConfig={canvasConfig:{}},this._config={},this._dfConfig=null,this._focus={viewerId:undefined,thumbnailId:undefined},this._cameraClass=null,this._areaDetectCallback=null,this._perspectiveCallback=null,this._licenseCallback=null,this._savePhotoCallback=null,this.uid=Object(s.I)(6),this.postfix="-"+this.uid,this._mPub=h,this._iPub=new o.a,this._db=l,this.ViewUi=e,this.group=r,this._dfConfig=u,this._focus=c,this.vm=new L(t,this._iPub,this._mPub,this.uid,i,n,this._db);var p=this.initConfig(t);if(this.bindView(this.container),this.on(a.d.UPDATE_FOCUS,(function(t){var e=t.viewerId,i=t.thumbnailId;f._focus.viewerId=e,f._focus.thumbnailId=i})),this.on(a.e.DOCUMENT_KEY_DOWN,(function(t){var e,i=f._focus,n=i.thumbnailId,r=i.viewerId;f.uid===r&&(null===(e=f.ui)||void 0===e||e.documentKeyDown(t,n))})),this.on(a.e.DOCUMENT_KEY_UP,(function(t){var e,i=f._focus,n=i.thumbnailId,r=i.viewerId;f.uid===r&&(null===(e=f.ui)||void 0===e||e.documentKeyUp(t,n))})),this.on(a.b.GOTO_PAGE,(function(t){f.gotoPage(t)})),p.length){var _="Failed to create the viewer because the parameter "+p[0]+" is incorrect.";this._e({code:80024,message:_})}else this._e(a.a.OK)}return t.prototype.initConfig=function(t){var e=t.uiConfig.canvasConfig,i=[],n=B(B(B({},t),e),t.uiConfig);for(var r in n)"uiConfig"===r||Object(s.v)(n[r])||this._checkInitProp(n,r)||i.push(r);return this._config=t,this._uiConfig=t.uiConfig,i},t.prototype._e=function(t){this._mPub.emit(a.d.ERROR,t)},t.prototype._checkInitProp=function(t,e){var i=this[e],n=t[e];return this[e]=t[e],i===n||i!==this[e]},t.prototype.closeTab=function(t){if(!Object(s.x)(t))return this._e(a.a.PARAM_TYPE),!1;this.vm.closeTab(t)},t.prototype.closeCurrentTab=function(){return this.vm.closeCurTab()},t.prototype.emptyTab=function(t){},t.prototype.getCurrentTabId=function(){return this.vm.getCurrentTabId()},t.prototype.getTab=function(t){return Object(s.x)(t)?this.vm.getTab(t):(this._e(a.a.PARAM_TYPE),null)},t.prototype.getCurrentTab=function(){return this.vm.getCurTab()},t.prototype.getCurrentIndex=function(){return this.vm.getCurIndex()},t.prototype.setCurrentIndex=function(t){return this.vm.setCurIndex(t)},t.prototype.setSelectedIndexes=function(t){return this.vm.setSltPages(t)},t.prototype.getSelectedIndexes=function(){return this.vm.getSltIndexes()},t.prototype.selectAll=function(){return this.vm.selectAll()},t.prototype.removeSync=function(t){if(Object(s.u)(t)&&(t=[t]),!Object(s.l)(t))return this._e(a.a.PARAM_TYPE),!1;if(0===t.length)return this._e(a.a.PARAMETER_INVALID),!1;for(var e=[],i=0;i<t.length;i++){var n=this.getUidByIndex(t[i]);if(!n)return!1;e.push(n)}return this.vm.remove(e)},t.prototype.removeAllSync=function(){return this.vm.rmAll()},t.prototype.switchPage=function(t,e){return this.vm.switchPage(t,e,!0)},t.prototype.movePage=function(t,e){return this.vm.movePage(t,e,!0)},t.prototype.getViewerElement=function(){var t;return this._e(a.a.OK),(null===(t=this.ui)||void 0===t?void 0:t.getViewerElement())||null},t.prototype.bindView=function(t,e,i){var n,r,o,u=this;if(void 0===e&&(e={}),void 0===i&&(i=!0),!this.ViewUi)return this._e(a.a.VIEW_UI_REQUIRE),!1;if(!t)return this._e(a.a.PARAMETER_INVALID),!1;if(Object(s.x)(t)&&(t=document.getElementById(t)),!Object(s.p)(t))return this._e(a.a.PARAMETER_INVALID),!1;this.unbindView(),i?Object(s.A)(e,this._uiConfig):this._uiConfig=e,this.ui=new this.ViewUi(t,this._uiConfig,this.postfix,this._iPub,this._db),null===(n=this.ui)||void 0===n||n.createInnerThumbnail(),this._initWebcamCallbacks(this.ui),null===(r=this.ui)||void 0===r||r.setDisplayMode(this.displayMode),null===(o=this.ui)||void 0===o||o.setOperationMode(this.operationMode),this.vm.thbViews.forEach((function(t){var e;null===(e=u.ui)||void 0===e||e.createThumbnail(t.getConfig())}));var h=this.vm.getCurTab();return!h||(this.vm._showAllThb(h),this.vm.getSlidePages(),this.vm.updateSltIndex(),this.vm.onTabChanged(),this._e(a.a.OK),!0)},t.prototype.unbindView=function(){var t;return this.closeVideo(),null===(t=this.ui)||void 0===t||t.unbindView(),this.ui=null,this._e(a.a.OK),!0},t.prototype.updateUISetting=function(t){var e;if(Object(s.v)(t)){var i=Object(s.c)(this._dfConfig.uiConfig);Object(s.A)(t,i);var n=null===(e=this.ui)||void 0===e?void 0:e.containerBox;return n&&this.bindView(n,i,!1),this._e(a.a.OK),!0}return this._e(a.a.PARAM_TYPE),!1},t.prototype.bindContent=function(t){var e;return Object(s.x)(t)&&(t=document.getElementById(t)),Object(s.p)(t)?(null===(e=this.ui)||void 0===e?void 0:e.bindContent(t))?(this._e(a.a.OK),!0):(this._e(a.a.ELEMENT_NOT_EXIST),!1):(this._e(a.a.PARAMETER_INVALID),!1)},t.prototype.unbindContent=function(){var t;return(null===(t=this.ui)||void 0===t?void 0:t.unbindContent())?(this._e(a.a.OK),!0):(this._e(a.a.ELEMENT_NOT_EXIST),!1)},t.prototype.fullScreen=function(){var t;return(null===(t=this.ui)||void 0===t?void 0:t.fullScreen())?(this._e(a.a.OK),!0):this.ui?(this._e(a.a.BROWSER_NOT_SUPPORT),!1):(this._e(a.a.ELEMENT_NOT_EXIST),!1)},t.prototype.cancelFullScreen=function(){var t;return this._e(a.a.OK),null===(t=this.ui)||void 0===t?void 0:t.cancelFullScreen()},t.prototype.fullWebPage=function(){var t;return(null===(t=this.ui)||void 0===t?void 0:t.fullPage())?(this._e(a.a.OK),!0):(this._e(a.a.ELEMENT_NOT_EXIST),!1)},t.prototype.cancelFullWebPage=function(){var t;return(null===(t=this.ui)||void 0===t?void 0:t.cancelFullPage())?(this._e(a.a.OK),!0):(this._e(a.a.ELEMENT_NOT_EXIST),!1)},t.prototype.setButtonClass=function(t,e){var i;if(!Object(s.x)(t)||!Object(s.x)(e))return this._e(a.a.PARAM_TYPE),!1;var n=this._uiConfig.buttons[t];return n?(n.setClass=e,(null===(i=this.ui)||void 0===i?void 0:i.setButtonClass(t))?(this._e(a.a.OK),!0):(this._e(a.a.ELEMENT_NOT_EXIST),!1)):(this._e(a.a.ELEMENT_NOT_EXIST),!1)},t.prototype.setViewMode=function(t,e){var i;return Object(s.u)(t)&&Object(s.u)(e)?t>0&&e>0?(this._uiConfig.canvasConfig.rows=e,this._uiConfig.canvasConfig.columns=t,this.ui?(this._e(a.a.OK),this.vm.rows=e,this.vm.columns=t,null===(i=this.ui)||void 0===i?void 0:i.setViewMode(t,e)):(this._e(a.a.ELEMENT_NOT_EXIST),!1)):(this._e(a.a.PARAMETER_RANGE),!1):(this._e(a.a.PARAM_TYPE),!1)},t.prototype.createCustomElement=function(t,e,i){var n;void 0===e&&(e=0),void 0===i&&(i=!1);var r=t;return Object(s.x)(t)&&(r=document.getElementById(t)),Object(s.p)(r)?(this._e(a.a.OK),null===(n=this.ui)||void 0===n?void 0:n.createCustomElement(r,e,i)):(this._e(a.a.PARAM_TYPE),!1)},t.prototype.updateVideoContainer=function(t){return this.ui?(Object(s.x)(t)||this._e(a.a.PARAM_TYPE),this.ui.updateVideoContainer(t),this._e(a.a.OK),!0):(this._e(a.a.ELEMENT_NOT_EXIST),!1)},t.prototype.setLoadingImage=function(t){var e;this.uiConfig.canvasConfig.loadingImageUrl=t,null===(e=this.ui)||void 0===e||e.setLoadingImage(t)},t.prototype.nextPage=function(){return this.vm.nextPage()},t.prototype.prevPage=function(){return this.vm.prevPage()},t.prototype.firstPage=function(){return this.vm.firstPage()},t.prototype.lastPage=function(){return this.vm.lastPage()},t.prototype.gotoPage=function(t){return this.vm.gotoPage(t)},t.prototype.createThumbnailView=function(t){var e;if(void 0===t&&(t={}),this._mPub.emit(a.d.LOG,"Invoking viewer#createThumbnailView."),!Object(s.v)(t))return this._e(a.a.PARAM_TYPE),null;var i=[],n=this.vm.createThumbnailView(this._uiConfig.thumbnail);if(null===(e=this.ui)||void 0===e||e.createThumbnail(n.getConfig()),n.init(t,i),i.length){var r="Failed to create the thumbnail viewer because the parameter "+i[0]+" is incorrect.";this._e({code:80024,message:r})}else this._e(a.a.OK);return n},t.prototype.removeThumbnailView=function(t){var e;this._mPub.emit(a.d.LOG,"Invoking viewer#removeThumbnailView.");var i=t;return Object(s.x)(t)||(i=t.uid),this.vm.removeThumbnailView(i)?(null===(e=this.ui)||void 0===e||e.removeThumbnail(i),this._e(a.a.OK),!0):(this._e(a.a.PARAMETER_INVALID),!1)},t.prototype.getThumbnailViewById=function(t){return this.vm.getThumbnailViewById(t)},t.prototype.getThumbnailViewsList=function(){return this.vm.thbViews},t.prototype.getIndexByUid=function(t){return this.vm.uidIdx(t)},t.prototype.getUidByIndex=function(t){return this.vm.idxUid(t)},t.prototype.getRealTimeMetadataByIndex=function(t){return this.vm.getRealTimeMetadataByIndex(t)},t.prototype.getMetadataByIndex=function(t){return this.vm.getMetadata(t)},t.prototype.setMetadataByIndex=function(t,e){return this.vm.setMetadata(t,e)},t.prototype.getCustomDataByIndex=function(t){return this.vm.getCustomDataByIndex(t)},t.prototype.getCustomDataByUid=function(t){return this.vm.getCustomDataByUid(t)},t.prototype.zoomIn=function(){return this.vm.zoomIn()},t.prototype.zoomOut=function(){return this.vm.zoomOut()},t.prototype.zoomTo=function(t,e,i){return this.vm.zoomTo(t,e,i)},t.prototype.reset=function(){return this.vm.reset()},t.prototype.mirror=function(){return this.vm.flip(1)},t.prototype.flip=function(){return this.vm.flip(0)},t.prototype.rotate=function(t,e){return this.vm.rotate(t,e)},t.prototype.crop=function(t,e,i,n){return this.vm.crop(t,e,i,n)},t.prototype.erase=function(t,e,i,n,r){return this.vm.erase(t,e,i,n,r)},t.prototype.overlayRectangle=function(t,e,i,n,r,o,s){return this.vm.overlay(t,e,i,n,r,o,s)},t.prototype.changePageSize=function(t,e){return this.vm.changePageSize(t,e)},t.prototype.saveTransformation=function(){return this.vm.saveTransformation()},t.prototype.getMinPageData=function(){return"single"===this.displayMode?this.vm.getMinPageData():"continuous"===this.displayMode?null:void 0},t.prototype.setFreeSelectedBox=function(t){return this.vm.setFreeBox(t)},t.prototype.setSelectedBoxes=function(t,e){var i;if(1!==this.operationMode)return this._e(a.a.OPERATION_MODE_ERROR),!1;if(t===undefined)return this._e(a.a.PARAM_TYPE),!1;if(e!==undefined&&!Object(s.m)(e))return this._e(a.a.PARAM_TYPE),!1;var n=this.getCurrentTab();if(!n)return this._e(a.a.IMG_NOT_EXIST),!1;var r=n.getCurPage();if(r===undefined)return this._e(a.a.IMG_NOT_EXIST),!1;var o=null;if(Object(s.l)(t)){if(0===(o=t).length)return this._e(a.a.PARAMETER_INVALID),!1}else{if(!Object(s.v)(t))return this._e(a.a.PARAM_TYPE),!1;o=[t]}for(var u=o.length,h=r.naturalWidth,c=r.naturalHeight,l=0;l<u;l++){var f=o[l];if(!(Object(s.u)(f.left)&&Object(s.u)(f.top)&&Object(s.u)(f.width)&&Object(s.u)(f.height)))return this._e(a.a.PARAM_TYPE),!1;f.left<0&&(f.left=0),f.top<0&&(f.top=0),f.width<=0&&(f.width=1),f.height<=0&&(f.height=1),f.width+f.left>h&&(f.width=h-f.left),f.height+f.top>c&&(f.height=c-f.top)}return"single"===this.displayMode?this.vm.setBox(t,e):null===(i=this.ui)||void 0===i||i.setSelectedBoxes(t,e),this._e(a.a.OK),!0},t.prototype.clearSelectedBoxes=function(t){var e;return this.vm.clearBox(t),null===(e=this.ui)||void 0===e||e.clearSelectedBoxes(t),this._e(a.a.OK),!0},t.prototype.render=function(){var t,e;if(null===(t=this.ui)||void 0===t?void 0:t.containerBox){var i=null===(e=this.ui)||void 0===e?void 0:e.containerBox;return this.bindView(i),this._e(a.a.OK),!0}return this._e(a.a.ELEMENT_NOT_EXIST),!1},t.prototype.on=function(t,e){Object(s.x)(t)&&Object(s.r)(e)?(this._iPub.on(t,e),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},t.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];Object(s.x)(t)?((e=this._iPub).emit.apply(e,U([t],i)),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},t.prototype.off=function(t,e){Object(s.x)(t)&&(e===undefined||Object(s.r)(e))?(this._iPub.off(t,e),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},Object.defineProperty(t.prototype,"zoom",{get:function(){return this.vm.getZoom()},set:function(t){Object(s.u)(t)?t<=0?this._e(a.a.PARAMETER_RANGE):(this.vm.setZoom(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minZoom",{get:function(){return this._config.minZoom},set:function(t){Object(s.u)(t)?t<=0?this._e(a.a.PARAMETER_RANGE):(this._config.minZoom=t,this.vm.setMinZoom(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxZoom",{get:function(){return this._config.maxZoom},set:function(t){Object(s.u)(t)?t<=0?this._e(a.a.PARAMETER_RANGE):(this._config.maxZoom=t,this.vm.setMaxZoom(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showViewer",{get:function(){return this._uiConfig.showViewer},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.showViewer=t,null===(e=this.ui)||void 0===e||e.setShowViewer(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this._uiConfig.toolbars.header},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.toolbars.header=t,null===(e=this.ui)||void 0===e||e.setShowHeader(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColor",{get:function(){return this._uiConfig.headerColor},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.headerColor=t,null===(e=this.ui)||void 0===e||e.setHeaderColor(t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTopMenu",{get:function(){return this._uiConfig.toolbars.topMenu},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.toolbars.topMenu=t,null===(e=this.ui)||void 0===e||e.setShowTopMenu(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topMenuColor",{get:function(){return this._uiConfig.topMenuColor},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.topMenuColor=t,null===(e=this.ui)||void 0===e||e.setTopMenuColor(t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topMenuBorder",{get:function(){return this._uiConfig.topMenuBorder},set:function(t){var e;Object(s.n)(t)?(this._uiConfig.topMenuBorder=t,null===(e=this.ui)||void 0===e||e.setTopMenuBorder(t),this._e(a.a.OK)):this._e(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSidebar",{get:function(){return this._uiConfig.showSidebar},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.showSidebar=t,null===(e=this.ui)||void 0===e||e.setShowSidebar(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAside",{get:function(){return this._uiConfig.toolbars.asideMenu},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.toolbars.asideMenu=t,null===(e=this.ui)||void 0===e||e.setShowAside(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMain",{get:function(){return this._uiConfig.showMain},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.showMain=t,null===(e=this.ui)||void 0===e||e.setShowMain(t),this.emit(a.d.CANVAS_VISIBILITY_CHANGED,t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return this._uiConfig.toolbars.bottomMenu},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.toolbars.bottomMenu=t,null===(e=this.ui)||void 0===e||e.setShowFooter(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTab",{get:function(){return this._uiConfig.showTab},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.showTab=t,null===(e=this.ui)||void 0===e||e.setShowTab(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerColor",{get:function(){return this._uiConfig.footerColor},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.footerColor=t,null===(e=this.ui)||void 0===e||e.setFooterColor(t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showVideoContainer",{get:function(){return this._uiConfig.showVideoContainer},set:function(t){var e;Object(s.m)(t)||this._e(a.a.PARAM_TYPE),this._uiConfig.showVideoContainer=t,null===(e=this.ui)||void 0===e||e.setShowVideoContainer(t),this._e(a.a.OK)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fitType",{get:function(){return this._config.fitType},set:function(t){this.vm.setFitType(t)&&(this._config.fitType=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasMouseShape",{get:function(){return this._uiConfig.canvasConfig.canvasMouseShape},set:function(t){var e;Object(s.x)(t)?(this._uiConfig.canvasConfig.canvasMouseShape=t,null===(e=this.ui)||void 0===e||e.setCanvasMouseShape(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasBackground",{get:function(){return this._uiConfig.canvasConfig.canvasBackground},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.canvasConfig.canvasBackground=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("canvasBackground",t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedBoxLineColor",{get:function(){return this.vm.getCropLineColor()},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.canvasConfig.selectedBoxLineColor=t,this.vm.setCropLineColor(t),null===(e=this.ui)||void 0===e||e.setSelectedBoxLineColor(t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"saveBackgroundColor",{get:function(){return this.vm.getSaveBackgroundColor()},set:function(t){this.vm.setSaveBackgroundColor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"saveQuality",{get:function(){return this.vm.getSaveQuality()},set:function(t){this.vm.setSaveQuality(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"saveType",{get:function(){return this.vm.getSaveType()},set:function(t){this.vm.setSaveType(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotateMode",{get:function(){return this.vm.getRotateMode()},set:function(t){this.vm.setRotateMode(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasBorder",{get:function(){return this._uiConfig.canvasConfig.canvasBorder},set:function(t){var e;Object(s.n)(t)?(this._uiConfig.canvasConfig.canvasBorder=t,null===(e=this.ui)||void 0===e||e.setCanvasBorder(t),this._e(a.a.OK)):this._e(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageBackground",{get:function(){return this._uiConfig.canvasConfig.pageBackground},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.canvasConfig.pageBackground=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("pageBackground",t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageBorder",{get:function(){return this._uiConfig.canvasConfig.pageBorder},set:function(t){var e;Object(s.n)(t)?(this._uiConfig.canvasConfig.pageBorder=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("pageBorder",t),this._e(a.a.OK)):this._e(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedPageBackground",{get:function(){return this._uiConfig.canvasConfig.selectedPageBackground},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.canvasConfig.selectedPageBackground=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("selectedPageBackground",t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedPageBorder",{get:function(){return this._uiConfig.canvasConfig.selectedPageBorder},set:function(t){var e;Object(s.n)(t)?(this._uiConfig.canvasConfig.selectedPageBorder=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("selectedPageBorder",t),this._e(a.a.OK)):this._e(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoverPageBorder",{get:function(){return this._uiConfig.canvasConfig.hoverPageBorder},set:function(t){var e;Object(s.n)(t)?(this._uiConfig.canvasConfig.hoverPageBorder=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("hoverPageBorder",t),this._e(a.a.OK)):this._e(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoverPageBackground",{get:function(){return this._uiConfig.canvasConfig.hoverPageBackground},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.canvasConfig.hoverPageBackground=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("hoverPageBackground",t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderBackground",{get:function(){return this._uiConfig.canvasConfig.placeholderBackground},set:function(t){var e;Object(s.o)(t)?(this._uiConfig.canvasConfig.placeholderBackground=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("placeholderBackground",t),this._e(a.a.OK)):this._e(a.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPageNumber",{get:function(){return this._uiConfig.canvasConfig.showPageNumber},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.canvasConfig.showPageNumber=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("showPageNumber",t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowPageDragging",{get:function(){return this._uiConfig.canvasConfig.allowPageDragging},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.canvasConfig.allowPageDragging=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("allowPageDragging",t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowKeyboardControl",{get:function(){return this._uiConfig.canvasConfig.allowKeyboardControl},set:function(t){var e;Object(s.m)(t)?(this._uiConfig.canvasConfig.allowKeyboardControl=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("allowKeyboardControl",t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageMargin",{get:function(){return this._uiConfig.canvasConfig.pageMargin},set:function(t){var e;Object(s.w)(t)?(this._uiConfig.canvasConfig.pageMargin=t,this.vm.setPageMargin(t),null===(e=this.ui)||void 0===e||e.setInnerTbProp("pageMargin",t),this._e(a.a.OK)):this._e(a.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollDirection",{get:function(){return this._uiConfig.canvasConfig.scrollDirection},set:function(t){var e;Object(s.x)(t)?(this._uiConfig.canvasConfig.scrollDirection=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("scrollDirection",t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoChangeIndex",{get:function(){return this._uiConfig.canvasConfig.autoChangeIndex},set:function(t){var e;Object(s.m)(t)?(this.uiConfig.canvasConfig.autoChangeIndex=t,null===(e=this.ui)||void 0===e||e.setInnerTbProp("autoChangeIndex",t)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outerBorder",{get:function(){return this._uiConfig.outerBorder},set:function(t){var e;Object(s.n)(t)?(this._uiConfig.outerBorder=t,null===(e=this.ui)||void 0===e||e.setOuterBorder(t),this._e(a.a.OK)):this._e(a.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sidebarWidth",{get:function(){return this._uiConfig.sidebarWidth},set:function(t){var e;Object(s.w)(t)?(this._uiConfig.sidebarWidth=t,null===(e=this.ui)||void 0===e||e.setSidebarWidth(t),this._e(a.a.OK)):this._e(a.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var t;return(null===(t=this.ui)||void 0===t?void 0:t.getViewerWidth())||this._uiConfig.width},set:function(t){var e;Object(s.w)(t)?(this._uiConfig.width=t,null===(e=this.ui)||void 0===e||e.setViewerWidth(t),this._e(a.a.OK)):this._e(a.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t;return(null===(t=this.ui)||void 0===t?void 0:t.getViewerHeight())||this._uiConfig.height},set:function(t){var e;Object(s.w)(t)?(this._uiConfig.height=t,null===(e=this.ui)||void 0===e||e.setViewerHeight(t),this._e(a.a.OK)):this._e(a.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uiConfig",{get:function(){return this._uiConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operationMode",{get:function(){return this._config.operationMode},set:function(t){var e;Object(s.u)(t)?-1!==[0,1,2].indexOf(t)?(this._config.operationMode=t,this.vm.setOperationMode(t),null===(e=this.ui)||void 0===e||e.setOperationMode(t),this._e(a.a.OK)):this._e(a.a.PARAMETER_INVALID):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowSlide",{get:function(){return this.vm.getAllowSlide()},set:function(t){Object(s.m)(t)?(this.vm.setAllowSlide(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabMode",{get:function(){return this._config.tabMode},set:function(t){"single"===t||"multiple"===t?(this._config.tabMode=t,this.vm.setTabMode(t),this._e(a.a.OK)):this._e(a.a.PARAMETER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionBoxAspectRatio",{get:function(){return this.vm.getAspectRatio()},set:function(t){var e;Object(s.u)(t)?(this.vm.setAspectRatio(t),null===(e=this.ui)||void 0===e||e.setAspectRatio(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keepAspectRatio",{get:function(){return this.vm.getKeepAspectRatio()},set:function(t){Object(s.m)(t)?this.vm.setKeepAspectRatio(t):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displayMode",{get:function(){return this._config.displayMode},set:function(t){var e;Object(s.x)(t)?-1!==["single","continuous"].indexOf(String(t))?(this._config.displayMode=t,null===(e=this.ui)||void 0===e||e.setDisplayMode(t),this.vm.setDisplayMode(t),this._e(a.a.OK)):this._e(a.a.PARAMETER_RANGE):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zooming",{get:function(){return this._config.zooming},set:function(t){s.m?(this._config.zooming=t,this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollX",{get:function(){return this._config.scrollX},set:function(t){s.m?(this._config.scrollX=t,this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollY",{get:function(){return this._config.scrollY},set:function(t){s.m?(this._config.scrollY=t,this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keepZoom",{get:function(){return this._config.keepZoom},set:function(t){Object(s.m)(t)?(this._config.keepZoom=t,this.vm.setKeepZoom(t),this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ifAllowSlide",{get:function(){return this._config.ifAllowSlide},set:function(t){Object(s.m)(t)?(this._config.ifAllowSlide=t,this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoomInDelta",{get:function(){return this._config.zoomInDelta},set:function(t){Object(s.u)(t)?t<=0?this._e(a.a.PARAMETER_RANGE):(this._config.zoomInDelta=t,this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoomOutDelta",{get:function(){return this._config.zoomOutDelta},set:function(t){Object(s.u)(t)?t<=0?this._e(a.a.PARAMETER_RANGE):(this._config.zoomOutDelta=t,this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoomDelta",{get:function(){return this._config.zoomDelta},set:function(t){Object(s.u)(t)?t<=0?this._e(a.a.PARAMETER_RANGE):(this._config.zoomDelta=t,this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPageCount",{get:function(){return this.vm.getCurPageCount()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showLatestPage",{get:function(){return this._config.showLatestPage},set:function(t){Object(s.m)(t)?(this._config.showLatestPage=t,this.vm.showLatest=t,this._e(a.a.OK)):this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._config.container},set:function(t){""===t||Object(s.p)(t)||Object(s.p)(t)?this._config.container=t:this._e(a.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),t.prototype.bindCamera=function(t){if(this._licenseCallback&&0!==this._licenseCallback().errorCode)return this._e(a.a.WEBCAM_LICENSE_INVALID),!1;return Object(s.r)(t)?this._cameraClass?(this._e(a.a.OK),!0):(this._cameraClass=t,this.ui?this._initWebcamCallbacks(this.ui):(this._e(a.a.OK),!0)):(this._e(a.a.PARAM_TYPE),!1)},t.prototype.showVideo=function(t,e,i,n){var r;return void 0===i&&(i="picture"),void 0===n&&(n=!1),this.ui?null===(r=this.ui)||void 0===r?void 0:r.showVideo(t,e,i||"picture",n):Promise.reject(a.a.ELEMENT_NOT_EXIST)},t.prototype.closeVideo=function(){var t;return this.ui?null===(t=this.ui)||void 0===t?void 0:t.closeVideo():(this._e(a.a.ELEMENT_NOT_EXIST),!1)},t.prototype.bindAreaDetectFunction=function(t){return Object(s.r)(t)?(this._areaDetectCallback=t,this.ui?this.ui.bindAreaDetectFunction(t):(this._e(a.a.OK),!0)):(this._e(a.a.PARAM_TYPE),!1)},t.prototype.bindPerspectiveFunction=function(t){return Object(s.r)(t)?(this._perspectiveCallback=t,this.ui?this.ui.bindPerspectiveFunction(t):(this._e(a.a.OK),!0)):(this._e(a.a.PARAM_TYPE),!1)},t.prototype.bindLicenseCallback=function(t){return Object(s.r)(t)?(this._licenseCallback=t,this.ui?this.ui.bindLicenseCallback(t):(this._e(a.a.OK),!0)):(this._e(a.a.PARAM_TYPE),!1)},t.prototype.bindSavePhotoCallback=function(t){return Object(s.r)(t)?(this._savePhotoCallback=t,this.ui?this.ui.bindSavePhotoCallback(t):(this._e(a.a.OK),!0)):(this._e(a.a.PARAM_TYPE),!1)},t.prototype._initWebcamCallbacks=function(t){return!!Object(s.r)(this._cameraClass)&&(t.bindCamera(this._cameraClass),this._areaDetectCallback&&t.bindAreaDetectFunction(this._areaDetectCallback),this._perspectiveCallback&&t.bindPerspectiveFunction(this._perspectiveCallback),this._savePhotoCallback&&t.bindSavePhotoCallback(this._savePhotoCallback),!0)},t}(),F=undefined&&undefined.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),G=function(t){function e(e){var i=t.call(this,e)||this;return i.vws=[],i.name=e.name,i.type=e.type,i.chs=e.chs||[],i}return F(e,t),e.prototype.getCounts=function(){return this.chs.length},e.prototype.addViewer=function(t){return-1==this.vws.indexOf(t)&&(this.vws.push(t),!0)},e.prototype.removeViewer=function(t){var e=this.vws.indexOf(t);return-1!=e&&(this.vws.splice(e,1),!0)},e}(I),H=function(){function t(t){this.tabs=[],this.mode="single",this.tabs=[]}return t.prototype.addTab=function(t,e){var i=this.checkTab(t.uid),n=null;return-1!==i?n=this.tabs[i]:(n=new G(t),this.tabs.push(n)),e&&n.addViewer(e),n},t.prototype.getTab=function(t){var e=this.checkTab(t);return-1===e?null:this.tabs[e]},t.prototype.checkTab=function(t){for(var e=this.tabs.length,i=0;i<e;i++)if(this.tabs[i].uid===t)return i;return-1},t.prototype.setMode=function(t){return("single"===t||"multiple"===t)&&(this.mode=t,!0)},t.prototype.removePage=function(t,e){var i=this.checkTab(t);return-1!=i&&this.tabs[i].remove(e)},t}(),z=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},W=function(){function t(t,e,i){this._defaultConfig={container:"",ifAllowSlide:!0,useWebWorker:!0,zoomInDelta:1.2,zoomOutDelta:1.2,zoomDelta:.05,fitType:"window",tabMode:"single",displayMode:"single",operationMode:"0",zooming:!0,scrollX:!0,scrollY:!0,minZoom:.01,maxZoom:8,keepZoom:!0,showLatestPage:!0,pageMargin:10,uiConfig:{toolbars:{header:!0,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!0,location:"topMenu",sequence:1}},buttons:{},buttonResize:{ifResize:!1,minSize:24,maxSize:26},tipsConfig:{},thumbnail:{size:180,mouseShape:"pointer",scrollDirection:"vertical",sequence:-1,location:"horizontal",showThumbnail:!0,showPageNumber:!1,showSelectBox:!1,showRemoveBtn:!1,fullThumbnail:!1,allowDragDrop:!0,allowResizing:!1,allowKeyboardControl:!1,rows:4,columns:1,background:"rgba(67,66,70,1)",border:"1px solid rgba(27,27,29,1)",pageBackground:"rgba(0,0,0,0)",pageBorder:"1px solid rgba(128,128,128,1)",selectedPageBackground:"rgba(127,133,251,1)",selectedPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgba(196,250,248,1)",hoverPageBorder:"1px solid rgba(255,255,0,1)",placeholderBackground:"rgba(255,192,203,1)",pageMargin:10},canvasConfig:{canvasMouseShape:"default",canvasBackground:"#434246",canvasBorder:"1px solid #1b1b1d",pageBorder:"1px solid rgba(128,128,128,1)",pageMargin:"10",pageBackground:"rgba(0,0,0,0)",selectedPageBorder:"1px solid rgba(255,0,0,1)",selectedPageBackground:"rgba(127,133,251,1)",hoverPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgb(196,250,248)",placeholderBackground:"pink",allowPageDragging:!0,allowKeyboardControl:!1,showPageNumber:!1,selectedBoxLineColor:"rgba(0,0,0,1)",autoChangeIndex:!1,scrollDirection:"vertical"},tree:{visibility:!0,iconClass:"ds-dvs-ui-tree",selectedColor:"#0000ff"},tag:{visibility:!0,iconClass:"ds-dvs-ui-tags",selectedColor:"#0000ff",displayMode:""},headerColor:"#2a292b",topMenuColor:"#3a393b",topMenuBorder:"1px solid #1b1b1d",showSidebar:!1,showMain:!0,footerColor:"#434246",showViewer:!0,showVideoContainer:!1,outerBorder:"1px solid #1b1b1d",sidebarWidth:"180",width:"100%",height:"100%"}},this._ViewUi=null,this._scrBarW=0,this._q=[],this.loader=[!1,!1,!1,!1,!1,!1],this._cors=!0,this._outW=4096,this._outH=4096,this._minW=800,this._minH=800,this._group={},this._resizeCb=null,this._focus={viewerId:undefined,thumbnailId:undefined},this.vws=[],this._oPub=e,this._db=i,this._tabMng=new H,this._mPub=new o.a,this._initTopEvent(),this._initViewerEvent(),Object(s.z)(t,this._defaultConfig),Object(s.s)()||Object(s.t)()||this.initWorkerUlr(),this._getScrBarW(),this.createViewer()}return t.prototype._initTopEvent=function(){var t=this;this._resizeCb=function(){this._getScrBarW()}.bind(this),window.addEventListener("resize",this._resizeCb),this.on(a.b.LOAD_TO_VIEWER,(function(e,i,n,r){t._load(e,i,n,r)})),this.on(a.b.OPEN_TO_VIEWER,(function(e,i,n){t._open(e,i,n)})),this.on(a.b.RENAME_TAG,(function(e,i,n,r){var o=t._tabMng.getTab(r);o&&o.vws.forEach((function(n){var o=t.uidViewer(n);o&&o.vm.renameTag(e,i,r)}))})),this.on(a.b.EMPTY_TAG,(function(e,i,n){var r=t._tabMng.getTab(n);r&&r.vws.forEach((function(e){var i=t.uidViewer(e);i&&i.vm.emptyTag(n)}))})),this.on(a.b.ADD_PAGE_TAG,(function(e,i,n){var r=t._tabMng.getTab(n);r&&r.vws.forEach((function(i){var r=t.uidViewer(i);r&&r.vm.addPageTag(e,n)}))})),this.on(a.b.REMOVE_PAGE_TAG,(function(e,i,n){var r=t._tabMng.getTab(n);r&&r.vws.forEach((function(i){var r=t.uidViewer(i);r&&r.vm.rmPageTag(e,n)}))})),this.on(a.b.TAG_CHANGED,(function(e){t.vws.forEach((function(t){t.vm.changeTag(e)}))})),this.on(a.d.DIRECTORY_CHANGED,(function(e){t.vws.forEach((function(t){t.vm.changeDir(e)}))})),this.on(a.b.UPDATE_FOR_VIEWER,(function(e,i){var n=t._db.getMid(e);n&&(t._tabMng.tabs.forEach((function(n){-1!==n.chs.indexOf(e)&&n.vws.forEach((function(r){var o=t.uidViewer(r);o&&(o.vm.updateSync(e,n.uid,i),o.vm.showThbItem(e))}))})),n.minData||t._loadMinPic(e))}))},t.prototype._initViewerEvent=function(){var t=this;this.onM(a.b.UPDATE_SYNC,(function(e,i,n){t.emit(a.b.UPDATE_SYNC,e,i,n)})),this.onM(a.d.ERROR,(function(e){t._err(e)})),this.onM(a.b.LOAD_PAGE,(function(e){t._loadMinPic(e)})),this.onM(a.b.CHANGE_PAGE,(function(e,i,n){t._getGroup(e).forEach((function(t){if(t.uid!==e)switch(i){case"first":t.vm.firstPage(!1);break;case"last":t.vm.lastPage(!1);break;case"next":t.vm.nextPage(!1);break;case"prev":t.vm.prevPage(!1);break;case"goto":t.vm.gotoPage(n,!1);break;case"cur":t.vm.setCurIndex(n,!1);break;case"slt":t.vm.setSltPages(n,!1)}}))})),this.onM(a.b.REORDER_PAGE,(function(e,i,n,r,o){var s=t._tabMng.getTab(i.uid);if(s){var u=s.uid;s.vws.forEach((function(i){if(e!==i){var s=t.uidViewer(i);if(s)switch(n){case"switch":s.vm.switchPage(r,o,!1,u);break;case"move":s.vm.movePage(r,o,!1,u);break;case"reorder":s.vm.reorderPage(r,o,!1,u)}}})),s[n](r,o),t.emit(a.b.REORDER_PAGE,i,n,r,o)}})),this.onM(a.b.REMOVE_PAGE,(function(e,i,n){t.vws.forEach((function(t){t.uid!==e&&t.vm.remove(n,!1,i.uid)})),n.forEach((function(e){t._tabMng.tabs.forEach((function(t){t.remove(e)}))})),t.emit(a.b.REMOVE_PAGE,i,n)})),this.onM(a.b.EDIT,(function(e,i){var n=i.uid,r=t._db.getMid(n);r&&(t._loadMinPic(n),r.vws.forEach((function(r){var o=t.uidViewer(r);if(o&&o.vm.uidIdx(n)===o.vm.getCurIndex()){var s=o.vm.getOffCvs();switch(e){case"rotate":s.rotate(i.rotateObj,i.page,i.interlayerData);break;case"flip":s.flip(i.flipObj,i.page,i.interlayerData);break;case"crop":s.crop(i.cropObj,i.page);break;case"erase":s.erase(i.eraseObj,i.page);break;case"changePageSize":s.changePageSize(i.changeSizeObj,i.page);break;case"reset":s.uid=null}o.vm.render()}})))})),this.onM(a.b.REMOVE_VIEWER_UID,(function(e,i){var n=t._tabMng.getTab(e);n&&n.removeViewer(i)}))},t.prototype._getGroup=function(t){var e=this,i=[],n=this.uidViewer(t);return n?(this._group[n.group].forEach((function(t){var n=e.uidViewer(t);n&&i.push(n)})),i):i},t.prototype._loadMinPic=function(t){for(var e=this._q,i=-1,n=0;n<this.loader.length;n++)if(!this.loader[n]){i=n;break}-1!==i?(this.loader[i]=!0,this.runLoader(t,i)):-1===e.indexOf(t)&&e.push(t)},t.prototype._convertData=function(t){return new Promise((function(e,i){if(Object(s.v)(t))e(t);else{var n=new XMLHttpRequest;n.onload=function(){var t=URL.createObjectURL(n.response);e(t)},n.open("GET",t,!0),n.responseType="blob",n.send()}}))},t.prototype.runLoader=function(t,e){var i=this,n=this._db.getMid(t);if(n&&n.minData&&n.vws.forEach((function(e){var n=-1;i.vws.some((function(t,i){if(t.uid===e)return n=i,!0})),-1!==n&&i.vws[n].vm.showThbItem(t)})),!n||n.activeMin||n.minData){var r=this._q.shift();r?this.runLoader(r,e):this.loader[e]=!1}else{n.activeMin=!0;var o=Object(s.I)(11);n.minTask=o;var a=new Promise((function(e,r){n.oriData?e(n.oriData):i._db.getDataAsync(t).then((function(t){if(10===document.documentMode)i._convertData(t.oriData).then((function(t){e(t)}));else{var n=Object(s.b)(t.oriData);e(n.data)}}))["catch"]((function(t){r(t)}))})),u=new Promise((function(e,n){a.then((function(r){var s=new Image;i._cors&&(s.crossOrigin="anonymous"),s.src=r,s.onload=function(){var r=i._db.getMid(t);if(!r||r.minTask!==o)return n("task cancel or page does not exist");s.onload=null,s.onerror=null,e(s)},s.onerror=function(t){return s.onload=null,s.onerror=null,n(t)}}))["catch"]((function(t){n(t)}))}));new Promise((function(e,n){u.then((function(r){var a=i._db.getMid(t);if(!a||a.minTask!==o)return n("task cancel or page does not exist");var u=document.createElement("canvas");u.dvsUid="_vwMngCvs1";var h=u.getContext("2d"),c=document.createElement("canvas");c.dvsUid="_vwMngCvs";var l=c.getContext("2d"),f=r.naturalWidth,p=r.naturalHeight,_=f,d=p,g=f/p,v=r,m=1,y=1;if(a.edt.all.length>0){g>=1&&f>i._outW?m=i._outW/f:g<1&&p>i._outH&&(m=i._outH/p),_=f*m,d=p*m;var b=a.edt,E=a.edt.all;if(c.width=_,c.height=d,l.save(),l.drawImage(r,0,0,_,d),l.restore(),E.length>0){u.width=_,u.height=d,h.save(),h.drawImage(r,0,0,_,d),h.restore();var T=null;b.reset(),E.forEach((function(t){if("rotate"===t.type){b.rotate(t.angle,0,0,t.mode);var e=null,n=!1;0===t.mode&&(e=Object(s.E)(0,0,u.width,u.height,t.calcAngle),n=!0),null!==T&&T!==t.mode&&(u.width=_,u.height=d,h.drawImage(c,0,0,_,d)),T=t.mode,n&&(c.width=e.width,c.height=e.height,_=e.width,d=e.height),l.clearRect(0,0,_,d),l.save(),i._fillRect(l,_,d),l.translate(_/2,d/2),b.setTransform(l),l.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),l.restore()}else"flip"===t.type?(b.flip(t.direction),l.clearRect(0,0,_,d),l.save(),i._fillRect(l,_,d),l.translate(_/2,d/2),b.setTransform(l),l.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),l.restore()):"crop"===t.type?(b.crop(t.left,t.top,t.width,t.height),_=t.width*m,d=t.height*m,u.width=_,u.height=d,h.drawImage(c,t.left*m,t.top*m,_,d,0,0,_,d),c.width=_,c.height=d,l.drawImage(u,0,0)):"erase"===t.type?(b.erase(t.left,t.top,t.width,t.height,t.color),h.save(),h.fillStyle="#ffffff",h.fillRect(t.left*m,t.top*m,t.width*m,t.height*m),h.restore(),l.save(),l.fillStyle="#ffffff",l.fillRect(t.left*m,t.top*m,t.width*m,t.height*m),l.restore()):"changeSize"===t.type&&(b.changePageSize(t.width,t.height),_=t.width*m,d=t.height*m,u.width=_,u.height=d,h.save(),h.drawImage(c,0,0,_,d),h.restore(),c.width=_,c.height=d,l.drawImage(u,0,0))}))}v=c}g>=1&&_>i._minW?y=i._minW/_:g<1&&d>i._minH&&(y=i._minH/d);var C=_*y,P=d*y;u.width=C,u.height=P,h.drawImage(v,0,0,C,P),(a.overlays||[]).forEach((function(t){h.save(),h.globalAlpha=t.opacity,h.fillStyle=t.color,h.fillRect(t.left*m*y,t.top*m*y,t.width*m*y,t.height*m*y),h.restore()})),u.toBlob((function(r){var s=i._db.getMid(t);s&&s.minTask===o||n("task cancel or page does not exist"),c.width=1,c.height=1,u.width=1,u.height=1,e(r)}),"image/png")}))["catch"]((function(t){n(t)}))})).then((function(n){var r=Object(s.b)(n),a=i._db.getMid(t);a&&a.minTask===o&&(a.activeMin=!1,a.minData=r.data,a.minType=r.type,a.vws.forEach((function(e){var n=-1;i.vws.some((function(t,i){if(t.uid===e)return n=i,!0})),-1!==n&&i.vws[n].vm.showThbItem(t)})));var u=i._q.shift();u?i.runLoader(u,e):i.loader[e]=!1}))["catch"]((function(n){var r=i._db.getMid(t);r&&r.minTask===o&&(r.activeMin=!1);var s=i._q.shift();s?i.runLoader(s,e):i.loader[e]=!1}))}},t.prototype._fillRect=function(t,e,i){return t.save(),t.fillStyle="#ffffff",t.fillRect(0,0,e,i),t.restore(),!0},t.prototype._open=function(t,e,i){var n=this,r=t.uid,o=t.chs.slice(),u=this._tabMng.getTab(r);u||(u=this._tabMng.addTab({uid:r,name:t.name,type:e,chs:[]},i)),u.chs=o;var h=this.vws,c=null;if(i){if(0===(c=this._getGroup(i).map((function(t){return t.uid}))).length)return void this._err(a.a.PARAMETER_INVALID);h=(c=Object(s.J)(z(c,u.vws))).map((function(t){return n.uidViewer(t)}))}h.forEach((function(t){if(t){u.addViewer(t.uid);var e=t.vm.tabHandler(u,null,!0);e&&t.vm.showTab(e,"filter")}}))},t.prototype._load=function(t,e,i,n){var r=this,o=t.uid,s=t.chs.slice(),a=this._tabMng.getTab(o);a||(a=this._tabMng.addTab({uid:o,name:t.name,type:e,chs:[]})),this.vws.forEach((function(t){a.addViewer(t.uid)})),a.chs=s,a.vws.forEach((function(t){var e,n=r.uidViewer(t);if(n){a.chs.forEach((function(t){var e=r._db.getMid(t);e&&e.addViewer(n.uid)}));var o=null===(e=n.vm)||void 0===e?void 0:e.tabHandler(a,i,!1);o&&n.vm.showTab(o)}}))},t.prototype.bindViewUi=function(t){if(!Object(s.r)(t))return this.emit(a.d.ERROR,a.a.PARAM_TYPE),!1;this._ViewUi=t,this.vws.forEach((function(e){e.ViewUi=t}))},t.prototype.createViewer=function(t,e){var i=this;void 0===t&&(t={});var n=null,r=[],o=null;if(e){if(!(o=this.uidViewer(e)))return this._err(a.a.PARAMETER_INVALID),null;n=o.group,r=this._group[n]}else n=Object(s.I)(11),this._group[n]=r;var u=Object(s.c)(this._defaultConfig);Object(s.z)(t,u);var h=new V(u,this._ViewUi,this._hermiteWorkerUrl,this._scrBarW,n,this._defaultConfig,this._mPub,this._focus,this._db),c=h.uid;if(this.vws.push(h),r.push(c),o){var l=o.vm.getCurTab();if(l){l.chs.forEach((function(t){var e=i._db.getMid(t.uid);e&&e.addViewer(c)}));var f=this._tabMng.getTab(l.uid);f.vws.push(c);var p=h.vm.tabHandler(f,null,!0);p&&(p.setCur(l.cur),p.setSlt(l.slt.slice()),h.vm.showTab(p,"filter"))}}return this.emit(a.d.LOG,"Invoking ViewControl#createViewer."),h},t.prototype.removeViewer=function(t){var e=this;if(!t)return!1;var i=t,n=null,r=null;Object(s.v)(t)&&(i=t.uid,n=t);for(var o=0;o<this.vws.length;o++)if(this.vws[o].uid===i){n=this.vws[o],r=o;break}if(null===r)return!1;var u=this._group[n.group],h=u.indexOf(i);for(var c in u.splice(h,1),0===u.length&&delete this._group[n.group],this._tabMng.tabs.forEach((function(t){t.removeViewer(n.uid)&&t.chs.forEach((function(t){var i=e._db.getMid(t);i&&i.rmViewer(n.uid)}))})),n.unbindView(),n)n[c]=null,delete n[c];return this.vws.splice(r,1),this.emit(a.d.LOG,"Invoking ViewControl#removeViewer."),!0},t.prototype.uidViewer=function(t){if(!t)return this.vws[0]||null;for(var e=0,i=this.vws.length;e<i;e++){var n=this.vws[e];if(n.uid===t)return n}return null},t.prototype.idxViewer=function(t){return t>=this.vws.length||t<0?null:this.vws[t]},t.prototype.dispose=function(){window.removeEventListener("resize",this._resizeCb)},t.prototype._getScrBarW=function(){var t=document.createElement("div"),e=document.createElement("div");t.appendChild(e),t.setAttribute("style","width:180px;height:180px;position:absolute;overflow:auto;"),e.setAttribute("style","width:200px;height:200px;"),document.body.appendChild(t);var i=t.offsetWidth-t.clientWidth;document.body.removeChild(t),this._scrBarW=i,this.vws.forEach((function(t){t.vm.setScrBarW(i)}))},t.prototype.initWorkerUlr=function(){this._hermiteWorkerUrl=window.URL.createObjectURL(new Blob(["(",function(){onmessage=function(t){var e=t.data.core,i=t.data.width_source,n=t.data.height_source,r=t.data.width,o=t.data.height,s=i/r,a=n/o,u=Math.ceil(s/2),h=Math.ceil(a/2),c=null;try{c=new Uint8ClampedArray(t.data.source)}catch(B){c=new Uint8Array(t.data.source)}c.length;var l=r*o*4,f=new ArrayBuffer(l),p=null;try{p=new Uint8ClampedArray(f,0,l)}catch(B){p=new Uint8Array(f,0,l)}for(var _=0;_<o;_++)for(var d=0;d<r;d++){var g=4*(d+_*r),v=0,m=0,y=0,b=0,E=0,T=0,C=0,P=_*a,w=Math.floor(d*s),A=Math.ceil((d+1)*s),O=Math.floor(_*a),M=Math.ceil((_+1)*a);A=Math.min(A,i),M=Math.min(M,n);for(var S=O;S<M;S++)for(var R=Math.abs(P-S)/h,x=d*s,I=R*R,D=w;D<A;D++){var k=Math.abs(x-D)/u,j=Math.sqrt(I+k*k);if(!(j>=1)){var N=4*(D+S*i);C+=(v=2*j*j*j-3*j*j+1)*c[N+3],y+=v,c[N+3]<255&&(v=v*c[N+3]/250),b+=v*c[N],E+=v*c[N+1],T+=v*c[N+2],m+=v}}p[g]=b/m,p[g+1]=E/m,p[g+2]=T/m,p[g+3]=C/y}var L={core:e,target:p};try{postMessage(L,[p.buffer])}catch(B){postMessage(L)}}}.toString(),")()"],{type:"application/javascript"}))},t.prototype.on=function(t,e){this._oPub.on(t,e)},t.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._oPub).emit.apply(e,z([t],i))},t.prototype.onM=function(t,e){this._mPub.on(t,e)},t.prototype.emitM=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._mPub).emit.apply(e,z([t],i))},t.prototype._err=function(t){this.emit(a.d.ERROR,t)},t.prototype._ok=function(){this.emit(a.d.ERROR,a.a.OK)},t}(),Y=function(){function t(t,e,i){this._vwMng=null,this._vwMng=new W(t,e,i)}return t.prototype.createViewer=function(t,e){return void 0===t&&(t={}),this._vwMng.createViewer(t,e)},t.prototype.getViewerByUid=function(t){return this._vwMng.uidViewer(t)},t.prototype.getViewerByIndex=function(t){return this._vwMng.idxViewer(t)},t.prototype.removeViewer=function(t){return this._vwMng.removeViewer(t)},t.prototype.getViewerList=function(){return this._vwMng.vws.slice()},t.prototype.bindViewUiConstructor=function(t){return this._vwMng.bindViewUi(t)},t.prototype.dispose=function(){return this._vwMng.dispose()},t}(),X=undefined&&undefined.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),K=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e.name,i.type=e.type,i.parent=e.parent||null,i}return X(e,t),e.prototype.removeChildren=function(t,e){var i=this.chs.length;if(i){for(var n=0;n<i;n++){var r=this.chs[n];if(r.name===t&&r.type===e)return this.chs.splice(n,1)[0]}return!1}return!1},e.prototype.setName=function(t){this.name=t},e.prototype.reorder=function(e){return("file"===this.type||"all"===this.type)&&t.prototype.reorder.call(this,e)},e}(I),Z=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},q=function(){function t(t){this.all=null,this.open=!0,this.dfNode=null,this._oPub=t,this.root=new K({uid:Object(s.I)(11),name:"root",type:"root",parent:null,chs:[]}),this.dfNode=this.root,this.all=new K({uid:Object(s.I)(11),name:"All",type:"file"}),this.curNode=this.root,this.selectedNodeId=null,this._initEvent()}return t.prototype._initEvent=function(){var t=this;this.on(a.b.LOAD_FILE,(function(e,i,n){var r=n,o=t.findChild(t.dfNode,e);o||(o=t.createFile(e),t.emit(a.d.DIRECTORY_CHANGED,t.dfNode)),i.forEach((function(e){n!==undefined?o.insert(e.uid,r++):o.append(e.uid),t.all.append(e.uid)})),t.emit(a.b.LOAD_TO_VIEWER,o,"file",n,t.open),t.emit(a.b.LOAD_TO_VIEWER,t.all,"all",n,!1)})),this.on(a.b.REORDER_PAGE,(function(e,i,n,r){var o=null;if("file"===e.type){if(!(o=t._find(e.uid,t.root)))return}else{if("all"!==e.type)return;o=t.all}o[{"switch":"switch",move:"move",reorder:"reorder"}[i]](n,r)})),this.on(a.b.REMOVE_PAGE,(function(e,i){i.forEach((function(e){t.all.remove(e),t._rmPage(e,t.root)}))}))},t.prototype._rmPage=function(t,e){var i=this;if(!(e.chs.length<1))return e.chs[0].uid?void e.chs.forEach((function(e){i._rmPage(t,e)})):e.remove(t)},t.prototype.createFile=function(t){var e=this.dfNode;e||(e=this.root);var i=this.findChild(e,t);if(i&&"file"===i.type)return i;i=new K({uid:Object(s.I)(11),name:t,type:"file",parent:e,chs:[]});var n=this._getSpiltIndex(e.chs);return this.curNode.chs.splice(n,0,i),i},t.prototype.openAll=function(t){return this.emit(a.b.OPEN_TO_VIEWER,this.all,"all",null,t),this.all.chs.slice()},t.prototype.openFile=function(t,e){var i=this.findChild(this.dfNode,t);return i&&"file"===i.type&&this.emit(a.b.OPEN_TO_VIEWER,i,"file",null,e),null},t.prototype._getSpiltIndex=function(t){for(var e=t.length,i=0;i<e;i++)if("folder"!==t[i].type)return i;return e},t.prototype.findChild=function(t,e){if(t.chs.length>=0){var i=t.chs.filter((function(t){return t.name===e}));return i.length?i[0]:null}return null},t.prototype._find=function(t,e){for(var i=e.chs,n=i.length,r=0;r<n;r++){if(i[r].uid===t)return i[r];if(i[r].children){var o=this._find(t,i[r]);if(o)return o}}},t.prototype.on=function(t,e){this._oPub.on(t,e)},t.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._oPub).emit.apply(e,Z([t],i))},t.prototype._err=function(t){this.emit(a.d.ERROR,t)},t.prototype._ok=function(){this.emit(a.d.ERROR,a.a.OK)},t}(),Q=function(){function t(t){this.autoOpen=!0,this._tree=new q(t.pubsub)}return t.prototype.setDefaultFolder=function(t){this._tree.dfNode=t},t.prototype.openAll=function(){return this._tree.openAll()},t.prototype.getAllContents=function(){return this._tree.all.chs.slice()},t.prototype.openFile=function(t,e){return this._tree.openFile},t}(),$=undefined&&undefined.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),J=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e.name,i.chs=e.chs||[],i.uid=e.uid||Object(s.I)(11),i}return $(e,t),e}(I),tt=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},et=function(){function t(t){this._oPub=t,this.tags=[],this.dfName=null,this.dfUid=null,this.sltUid=null,this.emptyItem=new J({name:"defaultTag",chs:[]}),this._initEvent()}return t.prototype._initEvent=function(){var t=this;this.on(a.b.LOAD_TAG,(function(e){var i=!1,n=e.data;(n.tags||(n.tags=[]),t.dfName)&&(-1===n.tags.indexOf(t.dfName)&&n.tags.push(t.dfName));n.tags.forEach((function(n){t.addTag(n)&&(i=!0);var r=t.getTag(n);r.append(e.uid),t.emit(a.b.LOAD_TO_VIEWER,r,"tag",null,null,!1)})),i&&t.emit(a.b.TAG_CHANGED,t.getTagList())})),this.on(a.b.REORDER_PAGE,(function(e,i,n,r){if("tag"===e.type){var o=t.uidTag(e.uid);if(o){o[{"switch":"switch",move:"move",reorder:"reorder"}[i]](n,r)}}})),this.on(a.b.REMOVE_PAGE,(function(e,i){t.getTagList().forEach((function(t){i.forEach((function(e){t.remove(e)}))}))}))},t.prototype.openTag=function(t,e){var i=this.getTag(t);return i||(this._err(a.a.TAG_NOT_EXIST),i=this.emptyItem),this.setDefaultTag(t),this.sltUid=i.uid,this.emit(a.b.OPEN_TO_VIEWER,i,"tag",e),this._ok(),i.chs.slice()},t.prototype.getCurTag=function(){return this.uidTag(this.sltUid)},t.prototype.addTag=function(t,e){if(-1!==this.checkTag(t))return!1;var i=new J({name:t,chs:e||[]});return this.tags.push(i),!0},t.prototype.removeTag=function(t){var e=this.checkTag(t);return-1!==e&&(t===this.dfName&&(this.dfName=null,this.sltUid=null),this.tags.splice(e,1),!0)},t.prototype.emptyTag=function(t){var e=this.getTag(t);return!!e&&(e.clear(),!0)},t.prototype.clear=function(){return this.tags=[],!0},t.prototype.getTagContents=function(t){var e=this.getTag(t);return e?e.chs.slice():null},t.prototype.getDefaultTag=function(){return this.dfName},t.prototype.setDefaultTag=function(t){if(!t)return this.dfName=null,this.dfUid=null,!0;var e=this.checkTag(t);if(-1===e)return!1;var i=this.tags[e];return this.dfName=t,this.dfUid=i.uid,!0},t.prototype.renameTag=function(t,e){if(!Object(s.x)(t)||!Object(s.x)(e))return this._err(a.a.PARAM_TYPE),!1;var i=this.getTag(e),n=this.getTag(t);if(!n)return this._err(a.a.TAG_NOT_EXIST),!1;if(i)return this._err(a.a.TAG_HAVE_EXIST),!1;n.name=e;var r=n.chs.slice();return this.emit(a.b.RENAME_TAG,t,e,r,n.uid),this._ok(),!0},t.prototype.checkTag=function(t){for(var e=this.tags.length,i=0;i<e;i++)if(this.tags[i].name===t)return i;return-1},t.prototype.getTagList=function(){return this.tags},t.prototype.getTag=function(t){var e=this.checkTag(t);return-1===e?null:this.tags[e]},t.prototype.uidTag=function(t){for(var e=this.tags.length,i=0;i<e;i++)if(this.tags[i].uid===t)return this.tags[i];return null},t.prototype.on=function(t,e){this._oPub.on(t,e)},t.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._oPub).emit.apply(e,tt([t],i))},t.prototype._err=function(t){this.emit(a.d.ERROR,t)},t.prototype._ok=function(){this.emit(a.d.ERROR,a.a.OK)},t}(),it=undefined&&undefined.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},nt=function(){function t(t){this._mng=new et(t.pubsub)}return t.prototype.getTagList=function(){var t=[];return this._mng.tags.forEach((function(e){var i={name:e.name,uids:e.chs.slice()};t.push(i)})),t},t.prototype.addTag=function(t){return Object(s.x)(t)?!!this._mng.addTag(t)||(this._err(a.a.TAG_HAVE_EXIST),!1):(this._err(a.a.PARAM_TYPE),!1)},t.prototype.removeTag=function(t){var e=this,i=this._mng.getTag(t);return i?(i.chs.forEach((function(i){e.removePageTag(i,t)})),this._ok(),this._mng.removeTag(t)):(this._err(a.a.TAG_NOT_EXIST),!1)},t.prototype.emptyTag=function(t){if(!Object(s.x)(t))return this._err(a.a.PARAM_TYPE),!1;var e=this._mng.uidTag(t);if(!t)return this._err(a.a.TAG_NOT_EXIST),!1;var i=e.chs.slice();return this._emit(a.b.EMPTY_TAG,t,i,e.uid),this._ok(),this._mng.emptyTag(t)},t.prototype.openTag=function(t,e){return this._mng.openTag(t,e)},t.prototype.getCurrentTag=function(){return this._mng.getCurTag()},t.prototype.getTagContents=function(t){return this._mng.getTagContents(t)},t.prototype.getDefaultTag=function(){return this._mng.getDefaultTag()},t.prototype.setDefaultTag=function(t){return this._mng.setDefaultTag(t)},t.prototype.addPageTag=function(t,e){Object(s.x)(t)&&Object(s.x)(e)||this._err(a.a.PARAM_TYPE);var i=this._mng.getTag(e);return i?i.append(t)?(this._emit(a.b.ADD_PAGE_TAG,t,e,i.uid),this._emit(a.b.TAG_CHANGED,this._mng.tags),this._ok(),!0):(this._err(a.a.TAG_HAVE_EXIST),!1):(this._err(a.a.TAG_NOT_EXIST),!1)},t.prototype.removePageTag=function(t,e){var i=this;if(Object(s.x)(t)||this._err(a.a.PARAM_TYPE),e===undefined){this._mng.getTagList().forEach((function(e){e.remove(t);i._emit(a.b.REMOVE_PAGE_TAG,t,e.name,e.uid)}))}else{Object(s.x)(e)||this._err(a.a.PARAM_TYPE);var n=this._mng.getTag(e);if(!n)return this._err(a.a.TAG_NOT_EXIST),!1;if(!n.remove(t))return this._err(a.a.PAGE_NOT_EXIST),!1;this._emit(a.b.REMOVE_PAGE_TAG,t,e,n.uid)}var r=this._mng.getTagList();return this._emit(a.b.TAG_CHANGED,r),!0},t.prototype.renameTag=function(t,e){return this._mng.renameTag(t,e)},t.prototype._emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=this._mng).emit.apply(e,it([t],i))},t.prototype._err=function(t){this._emit(a.d.ERROR,t)},t.prototype._ok=function(){this._emit(a.d.ERROR,a.a.OK)},t}(),rt=function(){function t(){this._d={}}return t.prototype.addDataSync=function(t,e){return!this._check(t)&&(this._d[t]=e,!0)},t.prototype.getDataSync=function(t){return this._d[t]},t.prototype.removeDataSync=function(t){return!!this._check(t)&&(delete this._d[t],!0)},t.prototype.updateDataSync=function(t,e){return!!this._check(t)&&(this._d[t]=e,!0)},t.prototype._check=function(t){return this._d[t]!==undefined},t}(),ot=function(){function t(t,e){this._d={},this.createDatabase(t,e)}return t.prototype.createDatabase=function(t,e){this._d[t]={},this._d[t][e]={}},t.prototype.addDataAsync=function(t,e,i,n){var r=this;return new Promise((function(o,s){return r._checkDB(i)?r._checkTable(i,n)?r._checkId(i,n,t)?s("The "+t+" already exists."):(r._d[i][n][t]=e,void o("Save "+t+" to database successful.")):s(r._erMsg(1,n)):s(r._erMsg(0,i))}))},t.prototype.getDataAsync=function(t,e,i){var n=this;return new Promise((function(r,o){return n._checkDB(e)?n._checkTable(e,i)?n._checkId(e,i,t)?void r(n._d[e][i][t]):o(n._erMsg(2,t)):o(n._erMsg(1,i)):o(n._erMsg(0,e))}))},t.prototype.removeDataAsync=function(t,e,i){var n=this;return new Promise((function(r,o){return n._checkDB(e)?n._checkTable(e,i)?(delete n._d[e][i][t],void r("Remove "+t+" successful.")):o(n._erMsg(1,i)):o(n._erMsg(0,e))}))},t.prototype.updateDataAsync=function(t,e,i,n){var r=this;return new Promise((function(o,s){return r._checkDB(i)?r._checkTable(i,n)?r._checkId(i,n,t)?(r._d[i][n][t]=e,void o("Update "+t+" successful.")):s(r._erMsg(2,t)):s(r._erMsg(1,n)):s(r._erMsg(0,i))}))},t.prototype._checkDB=function(t){return this._d[t]!==undefined},t.prototype._checkTable=function(t,e){return this._d[t][e]!==undefined},t.prototype._checkId=function(t,e,i){return this._d[t][e][i]!==undefined},t.prototype._erMsg=function(t,e){return"The "+["database","table","item"][t]+" "+e+" does not exist."},t}(),st=function(){function t(){this.databaseName="dvsDb",this.documentTableName="dvsDoc",this.imageTableName="dvsImage",this.annotationTableName="dvsAnno",this.middle=new rt,this.metadataMng=new rt,this.DBMng=new ot(this.databaseName,this.documentTableName)}return t.prototype.addDataAsync=function(t,e,i,n){return this.DBMng.addDataAsync(t,e,i||this.databaseName,n||this.documentTableName)},t.prototype.getDataAsync=function(t,e,i){return this.DBMng.getDataAsync(t,e||this.databaseName,i||this.documentTableName)},t.prototype.removeDataAsync=function(t,e,i){return this.DBMng.removeDataAsync(t,e||this.databaseName,i||this.documentTableName)},t.prototype.updateDataAsync=function(t,e,i,n){return this.DBMng.updateDataAsync(t,e,i||this.databaseName,n||this.documentTableName)},t.prototype.addMid=function(t,e){return this.middle.addDataSync(t,e)},t.prototype.getMid=function(t){return this.middle.getDataSync(t)},t.prototype.removeMid=function(t){return this.middle.removeDataSync(t)},t.prototype.updateMid=function(t,e){return this.middle.updateDataSync(t,e)},t.prototype.addMetadata=function(t,e){return this.metadataMng.addDataSync(t,e)},t.prototype.getMetadata=function(t){return this.metadataMng.getDataSync(t)},t.prototype.removeMetadata=function(t){return this.metadataMng.removeDataSync(t)},t.prototype.updateMetadata=function(t,e){return this.metadataMng.updateDataSync(t,e)},t}(),at=function(){function t(t){this.errorMessage="ok",this.errorCode=0,this._oPub=t,this._oPub.on(a.d.ERROR,this.updateErrorMessage.bind(this))}return t.prototype.updateErrorMessage=function(t){80003!==t.code&&(this.errorMessage=t.message,this.errorCode=t.code)},t}(),ut=function(){function t(t){this.logs=[],this.allowLog=!0,this.logs.push(this._formatLog("Initialize DVS object.")),this.logs.push(this._formatLog("Initialize DVS object.")),this._oPub=t,this._oPub.on(a.d.LOG,this.updateLogMessage.bind(this)),this.logs.push(this._formatLog("Complete Log object initialization."))}return t.prototype.updateLogMessage=function(t){this.allowLog&&this.logs.push(this._formatLog(t))},t.prototype._formatLog=function(t){return Object(s.f)("yyyy-MM-dd hh:mm:ss")+" DVS: "+t},t.prototype.clear=function(){this.logs=[]},t}(),ht=function(){function t(t){this.DataControl=null,this.ViewControl=null,this.File=null,this.Tag=null,this.Annotation=null,this.Error=null,this.Log=null,n(),this._oPub=new o.a,this.Log=new ut(this._oPub),this._log("DVS"),this._log("db"),this._db=new st,this._log("db",!1),this._log("Error"),this.Error=new at(this._oPub),this._log("Error",!1),this._log("Tag"),this.Tag=new nt({pubsub:this._oPub}),this._log("Tag",!1),this._log("File"),this.File=new Q({pubsub:this._oPub}),this._log("File",!1),this._log("ViewControl"),this.ViewControl=new Y(t,this._oPub,this._db),this._log("ViewControl",!1),this._log("DataControl"),this.DataControl=new p(t,this._oPub,this._db),this._log("DataControl",!1),this._log("DVS",!1)}return t.prototype._log=function(t,e){void 0===e&&(e=!0),e?this._oPub.emit(a.d.LOG,"Initialize "+t+" object."):this._oPub.emit(a.d.LOG,"Complete "+t+" object initialization.")},t.prototype.dispose=function(){this.ViewControl.dispose()},t}();i.d(e,"DVS",(function(){return ht}));var ct=i(4);window.Promise||(window.Promise=ct),window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.ViewModel=ht}]); 
})(); 
Dynamsoft.Ready(function(h,i){var b="",f="[bio]: ",c=!0,g=!1;var e=h.win,j=e&&e.FormData;function a(l){var k=this;k.__attrs={};h.mix(k.__attrs,{action:b,data:{},bChunkedSendData:c,blockSize:0,ajaxConfig:{value:{},type:"post",processData:g,cache:g,dataType:"text",async:c,contentType:g,retry:0,headers:{"X-Requested-With":g}},ajax:b,formData:b,CORS:g,bOnlyEmptyIsOK:c});h.mix(k.__attrs,l);k._setWithCredentials()}h.mix(a,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"},status:{SUCCESS:"success",ERROR:"error"}});h.mix(a.prototype,h.obj.customEvent);h.mix(a.prototype,{get:function(l){var k=this;if(l in k.__attrs){return k.__attrs[l]}return""},set:function(m,l){var k=this;if(m in k.__attrs){k.__attrs[m]=l}},_setWithCredentials:function(){var k=this;var m=k.get("CORS");var l=k.get("ajaxConfig");h.mix(l,{xhrFields:{withCredentials:false}});return l},uploadToServer:function(n){var k=this,m=k.get("blockSize"),l;if(m>0&&n&&n.size>0){l=k._chunkedUpload(n)}else{l=k._fullUpload(n)}return l},uploadFilesToServer:function(k){return this._fullUploadFiles(k)},_fullUpload:function(o){var k=this,m=k.get("ajaxConfig"),l=true,n=function(s){var r="";if(s){if(s&&h.isArray(s)&&s.length>1){r=s[0]}else{if(h.isString(s)){r=s}}}r=k._processResponse(r);k.fire(a.event.SUCCESS,r)},q=function(v,s,u){var r,t;l=false;if(v&&h.isArray(v)&&v.length>2){r=v[1];t=v[2]}else{r=s;t=u}k._errorHandler(t,r,o)};k._setFormData();if(o&&o.size>0){k._addFileData(o);if(!h.isString(o.name)||o.name==""){k.name=o.fileName}else{k.name=o.name}}h.mix(m,{data:k.get("formData"),url:k.get("action"),beforeSend:function(t,s,r){t.upload.addEventListener("progress",function(u){k.fire(a.event.PROGRESS,{loaded:u.loaded,total:u.total,name:k.name})},false)}});h.mix(m,{method:"POST",onSuccess:n,onError:q});var p=h.ajax(m);k.set("formData",null);if(m.async){k.set("ajax",p);return true}else{k.set("ajax",false);return l}},_fullUploadFiles:function(q){var k=this,m=k.get("ajaxConfig"),l=true,o=[],n=function(t){var s="";o=[];if(t){if(t&&h.isArray(t)&&t.length>1){s=t[0]}else{if(h.isString(t)){s=t}}}s=k._processResponse(s);k.fire(a.event.SUCCESS,s)},r=function(w,t,v){var s,u;l=false;o=[];if(w&&h.isArray(w)&&w.length>2){s=w[1];u=w[2]}else{s=t;u=v}k._errorHandler(u,s,q)};k._setFormData();h.each(q,function(s){if(s&&s.size>0){k._addFileData(s);if(!h.isString(s.name)||s.name==""){o.push(s.fileName)}else{o.push(s.name)}}else{o.push("")}});h.mix(m,{data:k.get("formData"),url:k.get("action"),beforeSend:function(u,t,s){u.upload.addEventListener("progress",function(v){k.fire(a.event.PROGRESS,{loaded:v.loaded,total:v.total,name:""})},false)}});h.mix(m,{method:"POST",onSuccess:n,onError:r});k.name="";var p=h.ajax(m);k.set("formData",null);if(m.async){k.set("ajax",p);return true}else{k.set("ajax",false);return l}},_chunkedUpload:function(m){var s=this;var q=s.get("ajaxConfig"),o=function(v){var u="";if(v){if(v&&h.isArray(v)&&v.length>1){u=v[0]}else{if(h.isString(v)){u=v}}}u=s._processResponse(u);s.fire(a.event.SUCCESS,u)},l=function(y,v,x){var u,w;if(y&&h.isArray(y)&&y.length>2){u=y[1];w=y[2]}else{u=v;w=x}s._errorHandler(w,u,m)};h.mix(q,{url:s.get("action")});var t=m.size;var n=0;var k=s.get("blockSize")||t;var p=m.slice||m.webkitSlice||m.mozSlice;function r(w){var v=p.call(m,n,n+k,m.type);var x=v.size,u=m.name;s._setContentRange(n,x,t);s._setFormData();if(w){s.set("data",[])}if(!h.isString(u)||u==""){u=m.fileName}v.name=u;s.name=u;s._addFileData(v);h.mix(q,{data:s.get("formData")});h.mix(q,{method:"POST",onSuccess:function(A,y,z){n=s._getUploadedBytes(z)||n+x;s.fire(a.event.PROGRESS,{loaded:n,total:t,name:s.name});if(n<t){r(false)}else{o(A)}},onError:l});h.ajax(q);s.set("formData",null)}r(true)},abort:function(){var k=this,l=k.get("ajax");if(!h.isObject(l)){h.log(f+"abort(), the value of io invalid!");return k}l.abort();k.set("ajax",false);return k},_setFormData:function(){var k=this,l=k.get("data"),n;if(!j){h.log(f+"the browser does not support ajax.");return}if(l instanceof j){k.set("formData",l)}else{n=new j();try{h.each(l,function(p,o){n.append(o,p)});k.set("formData",n)}catch(m){h.log(f+"something error when reset FormData.")}}},setRequestHeader:function(m,n){var k=this;var l=k.get("ajaxConfig");l.headers[m]=n;k.set("ajaxConfig",l);return n},_addFileData:function(m){if(!h.isObject(m)){h.log(f+"_addFileData(), file parameter invalid!");return false}var l=this;var n=l.get("formData");var o=m.name,k=m.remoteFilename;if(!k){k="RemoteFile"}n.append(k,m,o);l.set("formData",n);return n},_errorHandler:function(p,o,q){var n=this,m=a.status.ERROR,l=n.name,k={status:m,msg:o,response:false,name:l};if(p){k.httpStatus=p.status;k.response=p.responseText}n.fire(m,k)},_getUploadedBytes:function(m){var k=m.getResponseHeader("Range");var n=k&&k.split("-");var l=n&&n.length>1&&parseInt(n[1],10);return l&&l+1},_setContentRange:function(n,q,m){var p="bytes "+n+"-"+(n+q-1)+"/"+m;var k=this;var l=k.get("ajaxConfig");var o=l.headers;o["Content-Range"]=p;return p},_processResponse:function(p){var t=this,v,l,k,r=false,m=t.name,n=a.status.SUCCESS,s=a.event.ERROR;h.log("Response from server: "+p);if(!t.get("bOnlyEmptyIsOK")){return{status:n,msg:false,json:false,response:p,name:m}}if(h.isUndefined(p)||p===""){v={status:n,msg:false,json:false,response:"",name:m}}else{if(h.isString(p)){try{for(l=0;l<p.length;l++){if(l>10){break}k=p[l];if(k=="{"){r=true;break}else{if(k==" "||k=="\r"||k=="\n"||k=="\t"){}else{break}}}if(r){var q=h.parse(p);if(q.status==1){v={status:n,msg:false,json:q,response:p,name:m}}else{v={status:s,msg:false,json:q,response:p,name:m}}}}catch(o){r=false;h.log(o)}if(!r){var u=String(p);u=u.replace(/( |\t|\r|\n)/g,"");if(u==""){v={status:n,msg:false,json:false,response:p,name:m}}else{v={status:s,msg:false,json:false,response:p,name:m}}}}else{v={status:n,msg:false,json:false,response:"",name:m}}}return v}});function d(l){var k=this;k.__attrs={};h.mix(k.__attrs,{action:b,retry:0,timeout:0,CORS:g,async:c,dataType:"text",fileStatus:b,uploadType:g,data:{},bOnlyEmptyIsOK:c});h.mix(k.__attrs,l);k._init()}h.mix(d,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}});h.mix(d.prototype,h.obj.customEvent);h.mix(d.prototype,{get:function(l){var k=this;if(l in k.__attrs){return k.__attrs[l]}return""},set:function(m,l){var k=this;if(m in k.__attrs){k.__attrs[m]=l}},upload:function(k){var l=this,o=l.get("uploadType");if(k){if(h.isArray(k)){var n=k;return o.uploadFilesToServer(n)}else{if(h.isObject(k)){var m=k;if(!m.size){m.size=0}else{if(!m.id){m.id=h.guid("file-")}if(m.size){m.textSize=l._convertByteSize(m.size)}}return o.uploadToServer(m)}}}return o.uploadToServer(k)},abort:function(){var k=this,l=k.get("uploadType");l.abort();return true},setRequestHeader:function(l,n){var k=this,m=k.get("uploadType");m.setRequestHeader(l,n)},_convertByteSize:function(k){var l=-1;do{k=k/1024;l++}while(k>99&&l<4);return Math.max(k,0.1).toFixed(1)+["KB","MB","GB","TB"][l]},_init:function(){var k=this;var n={action:k.get("action"),data:k.get("data"),CORS:k.get("CORS"),bOnlyEmptyIsOK:k.get("bOnlyEmptyIsOK")},m=new a(n);var l=m.get("ajaxConfig");if(l){l.dataType=k.get("dataType");l.async=k.get("async");l.retry=k.get("retry")}m.on(a.event.SUCCESS,k._uploadCompleteHandler,k);m.on(a.event.ERROR,k._uploadCompleteHandler,k);m.on(a.event.PROGRESS,k._uploadProgressHandler,k);k.set("uploadType",m);return m},_uploadProgressHandler:function(l){var k=this;k.fire(d.event.PROGRESS,l)},_uploadCompleteHandler:function(o){var l=this,k=o.status,n=o.msg,m=l.get("file");h.mix(o,{file:m});if(k==="success"){l.fire(d.event.SUCCESS,o)}else{if(n===false){}else{if(n==="abort"){h.mix(o,{canceled:true})}else{if(n==="timeout"){h.mix(o,{timeout:true})}}}l.fire(d.event.ERROR,o)}}});h.BIO=d});(function(a){a.DWT=a.DWT||{};a.Lib.timestamp="?t=20210428";a.DWT.defaultEnv={JSVersion:"17,1,0,0525",ServerVersionInfo:"17,1,0,0525",ServerLinuxVersionInfo:"17,1,0,0525",ServerMacVersionInfo:"17,1,0,0525",ActiveXVersion:"17,1,0,0525",PluginVersion:"11,1,0,0",PdfVersion:"11.2.0.0330",ProductName:"Dynamic Web TWAIN 17.1",Containers:[],DynamicContainers:[],ContainerMap:{},Trial:false,ResourcesPath:"Resources",Debug:false,IfUpdateService:false,AutoLoad:true,ReConnectToService:true,OnWebTwainReady:false,UseDefaultInstallUI:true,OnWebTwainNotFound:false,OnWebTwainOldPluginNotAllowed:false,OnWebTwainNeedUpgrade:false,OnWebTwainNeedUpgradeWebJavascript:false,OnWebTwainInitMessage:false,IfUseViewer:true,ViewerJSIntegerited:true,ActiveXIntegerited:true,ActiveXInstallWithCAB:false,IfUseActiveXForIE10Plus:false,IfCheck64bitServiceFirst:false,IfDownload64bitService:false,IfInstallDWTModuleWithZIP:false,IfUseEmbeddedDownloadNoticeForActiveX:false,IfCheckDCP:false,IfCheckDWT:true,IfDisableDefaultSettings:false,OnWebTwainWillInit:false,IfAddMD5InUploadHeader:false,IfAlwaysFocusOnPopupWindow:true,IfConfineMaskWithinTheViewer:false,IfUseWSPool:false,UseDefaultViewer:true,fetchOptions:{mode:"cors",credentials:"same-origin"},CustomizableDisplayInfo:{loaderBarClassName:"ds-dwt-loaderBar",loaderBarSource:"data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6opx4srIcsnU1eJiYNMIuwTR4JtIYJt2cNDxAKBSIKJQsmvr9JHiDDeyzSRh4rCquGHC4HgFwmDwQnKxrGSxHftK5LKgTvkSUNdB4TAu8jBNFNJhS6VkrJgQX1NJUYR4bCigKaWjjQZkRFpmsZVJwxIOoaABcUp1CYAHGUAhhNTCSURCkJDAEe2xRoieUATFobmgwaqClR/kghKVayivATygChewowXOKhQp5IISqwK0LhREw9JVBiIXFthAMnHhq4WNPmDQkNRWN4eHqVg4YsBLqugMLlgK4waYV44HC1jQiaVuIOY1DBkgcJfREBrvLgGoPFgDzcvCrhLRYNSPUUmFqHgovEGbRe8SB41Ii5nhxAijniQV4nGlqwSrC00oFZMRVYzkLBgYJIIzKg/dS75LDTr59QgHFCBIMRIxgUWHEguZ0Kq1mNOME5ywEHKyqY6O7pISsREchPIzcBRMdWJSrUXu+p3IIMElAIONGhF/31FFDgQYDW/WfggQgmqOCCDDbo4INRwKDBBBqIBiEdFGjgggLP/kHHgAIBNKDehRFiwBMpD1hIIhUNQJCZGwnstqIUNsV0wXxHoGGCAybAMCKCsvRVjEEPCCAKAwI8gCOD2PVFmEssZNcGAyyouOABJSQGQAZLUmANcNk8KJCWBRlhAi2QIUgBCS+OgoE2EeDk4DxatnGCRkVcNEoJDh4gTJ20GZElKwL0+aeWLOAYJys5NUhnnQRMpZJpXzW4Zp0AkKANBYfWUiAqYyZWphEwRGkIAyBYqeABel4FwZJCHICAAJAgiQCsCqYgpWMpMAXDjrv8eGCQVw05YxQ2tenGjcdOoYGL8ECAT7NTwEDCiYaIgMG01E4R1oYdRgfHOt1mISGF/qqWq+667LYLiF0dVFBBBw7I4S5daWSAwnMAvFCAABEMIKy7HmCAAlIFnJDuvTGgAYFHHADEcBENTHYNBxN8uqIHD/fVgoz3UoABoANDEZZ/qDSAQp0jmGJHCgRcUMIGldanCqYZaIwEBQu8h4jLlsAwaJ0igFzFB5GIUHMjAxinJQMIZOGBbJFsULIVumLaRgRZaOD0HllZUoHWbViQhQnY6iHAwmWMTbbZNf0WiQVXV2GAsoxq8RkpvVpCktataVGjIS7UXUUDVBO99BUHuCCBCAUosILOVFCwgdYtGL6EXePBYsLXVxU2sQdWadkCrgaqADMBKeDJBAygDyNCZwqU29ZpoE04wFdMIrj2INKGfADWBInTMp3mn3S8BwTKNdBpRB3U7kmrbWQQhQcOZFAAv24wIEJU1ZHYmCEPiNTACgucAIILDwwgPSqsLo/6xDnC8EAJSaJM//789+///wAMoACxEAQAIfkECQkAMQAsAAAAAGQAZAAABv7AmHBILBqPyKRyyWw6n9CodEqtWq/YrHbL7S49jUkn5dB4vGhvY6FgAACM1qKRrl8pg8vozQeMLgMUdoNRJih9iAAoJoSNTB4CiYkCZ46WRg57kn0jDpefQwSbiQSgnxQKo4gKgqaOFByqfRytThQNJiZmrlAULbJ8LbVfFSUKBSgcAgEHvE6iwAAWTRQOIZqIKB+VaWC5DcNNDtEAnkwpIqoMAdxdDScKHBwXLu2PkbKUTCaxsi8fXqqhwOYnA50nDvpt4mBOiQcW5Ao042KiwKYSMJ5U05Poj4NwR9CRA+CCiwdokkasAKmkQYQ2bxgoiHDwy4KRAPRpafBrFP4IFVEoaJiQIsUEDSyPwEiAk4OGLQMOjQoxsVEDfBEbYjGk6kJVQjCwRkMxYMtVVQTs2TkAcSSHmlgoRCDYh0GKpGgouMCpU0vYlBu+NnIgFdiICmoyuOHDwEXGUxvobgqhNsuBFSwECLDQoXIjGD1VFdDahcKB0x7wNtIQQhWKu84uwYigkI8IFoxif/JggkSCEiUSREjhWTch0zBgHChuvLnz59CjS59Ovbr169iz9/IAo4F3GKm1b4GRgoCCFyNESDhh4LF4KwNKLEbEoETZ91MoVKgtiYMB1fgZoV86wIhQAYBCUACDBjAg6FwD/KnyFhMutcBBCBvAVd1NOP4toAQFJqTSRwuBWAeDRTgV4J4RB4jFRwmCRVfBfOQclkQmKZEW3Vw4+RFBEiSMgoF1IPT4xjRIBLkJCdZZYKQ0N0rmh47Q8YjTCD8i0aIkAsQI3Yw9MgAQEtWE9gaJDjpzAIEjibDiEe+EIEEIJ2hIHYcjeciEggymaRyEbtkZIJkVsKmKgX4GqF+EiHBw4KBROCCfJPVRCSkTMFRAgAQijPCCBARU8OalGnHnXQPgJUrqqqy26uqrsBqnYC7gxUpNAyQogEIBIhSgAAEmqArpLSfQyAkEDjDHKgUTmLlJAQ8IK54DIgLzwkq2xtBAayMVABusFBTZYwiCZkGBtP5ZNCClLCN8gG4Ss7UgAAZAfbLXkyUoG0VUI3ppiweoOYjKk374m18JiTApxQETPBABCBZEgMEEBgvRAIpPWjrFAZJRBoUHK5SAMR8FlPBBvUeYYGiPBmxxgCQK6JvgtsYi8gc4KY/cI2JawEKKEx5MUJgsHEwAkgY64zTBFgP2UUC5RVTD6CgMheOBBASPAPUUHqTQ2ggQ3Iepi9F4ZYS4RnIg83YehOdEBARnScQA66oyAgnvjrdym29SAIGRCmxtCQIE+/EAJkmrE61uFDBVeALhULDC3puMQADKzoBWOAAtjEoBAonTl1ZzDWBdeOBHUJCCADW/MYICD2Aem24GU5PjFJkwfJABQa8/gLNzMFT7JOpJUACwCSlUYEKq0alANl+yX4rSk6W4OkHd7C7tqi8Eh5C3dCm0LotdsXpwgpEnrP0eDCxgzwkLo7p6wAbi1xVYtkN48AC3KbWAgPqXukUFBMA7Aazgd58IAgAh+QQJCQAwACwAAAAAZABkAIX8jhT8yoz8rlT85sT8njT82qz8vnT89uz80pz8pkT8tmT8xoT8liT87tz84sT8zpz8okT83rz8woT8/vz81qz8qlT8unT8zpT8slz86tT8ojz83rT8wnz8+vT81qT8qkz8umz8miz8khz8ypT8rlz85sz8njz82rT8vnz89vT80qT8pkz8tmz8xoz8liz88uT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHgMnUQslY8lMiG7o5MGBkCvYxrtt17ZINX/ACQNe4RGHS0igHUiLR2FjzANCYp/CYOQhAOJlHQiJZiEEZx/DqB7JZucnlITByUlL3mmTZKjAJZPrRQJDCIiDBoBsbNLh6mAIgGOTRMZCsd1HxHLYh2yUn2cgk8NArYabGATDiwaKwZ4rC8kxyKC10oTLLZ0Ky9fHRLHDCfwTh0RQAiosMafkggM6NEZ8SUCNAAaMhSaYEAhHQgGr8xRlKzQgQoWATC4tKWDCU4WqL2pZVFEKS4dJlEykDEMS4WrusxTxOCB/keQLe91yfAwgdA9E/RZrFCzipkEmxhUIEmoQQicFMRleGCAg4oDoBYoVABWzISmbw5YsFUhA1piWg60uIqMRTq4K1EIWJGggoFweJF2aJAhxdvAiBMrXsy4sePHkCNLnky5smU9E15kKJFh2GUr4zgI0GBCgwAODg5/NoSC7h8RIVCoXM2kGz0BVGknecHiYd2jTM6qhjvBg2+eKt52oAAhBAQPsxkfgBDyVtkk+VKJWJACsoPqdF4mceCaDoEIkEeAB8AwyYQHlB4Mx1QRvIF48BXJf1y/+v2D5QEQAnqPqQdee0mkwIF2HHT32HfgiYedB81pAF1kB8hkUQLX/i0xgTWTTaBCQgoxkJxuSvB23CIsAIfiEbbZgtuLTHRgQIB0xBYdjUd04AAHJGigAQQCSODAjjwikdkrsMyX5JNQRinllGO08sILIFKJRAMPWKCAACRggMIJLk6ZGQcmkPiHCwk8gOQbH3ZgzVn4UICjIgmU4CQWcUTAAgQMMGACBio08OYUHTygJj0abHBoF8sJ4FsCF5RJRXEugKfBJ25MMJctDLSYhQMErGcdGcZYhIGDVXSwkakB7FmGndU1YgUqpl5k6RYveFMdAZxSwUGudDCQVRgnrMiJBI+6Rx2xANAkDgimfpAbN3dWh0GHMGlgagjBRlFCtiEJsOsQ/j6q0EILKhzZRAeLhuQSFeNCC8BUSr4wQpq++ALMCJ4h0YGyqkgIhVX2btsjBd6OYuGbE5S6HrhUdNAwsSkZ8V68lPSE5ASvVpeARFSEvJ4ICA6BaUgmGiSiqSCwKoUoxBJAssoOnFSdCanBqKFFIZxgRUzEogCPjaYasGOiHI+SsVMUNE1PCNdmQO4oLlwrBG8hQaB1FCmgQDAyJxaBALEI7GYyJQkMEJcFY+fo5hE7mcqCEvlIrEgIIHxNxQESSP0HASog+QGxFRTjwAIVhNBLCAlYcILMWnRQAFCUiKCAnkmsQOwK7zZQggMOlNAA5VxMkIIDIGgQwusEQLBAYwmP+pErCY118AJnAS8xbK4cPEmzqQTy+MLF1Wlw7meJxr3Ifk++oAB4GCxPWwbPKgTBzVDGsYKyIqxw15QvLKDBQyJoIIH1PHZQwggKJEAAAQkoMALtWmp8AGENNHCArFsIAgAh+QQJCQAvACwAAAAAZABkAIX8jhT8yoz8rlT85sT8njT8vnT82qz89uz80pz8pkT8tmT8xoT8liT87tz8zpz8okT8woT84sT8/vz81qz8qlT8unT8zpT8slz86tT8ojz8wnz83rz8+vT81qT8qkz8umz8miz8khz8ypT8rlz85sz8njz8vnz82rT89vT80qT8pkz8tmz8xoz8liz88uT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/sCXcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpuLEtcmINq4JOd4MyIA2EOUiHyPbCTsgAAJDXyFQhImgYEFcIZ7DSqKgCqEjnIYf5KCGJZykJqClZ1mEgUhmiaNUhIcHKqjTQ0ZkoNTEiQpASwOERywTnSAeHpSByIZp3YEFS5lEqyvq2oiAW7RTSgaDJojzWG3FSUJLKJ8Eg7JmhW+YBEPgQIHhgeZoATEXhIrkimGGKCBHFzLIgGEJAWGNgAEtIBdFwkEJH1IuNAOC4dcEEk6YahBOk0hUgzM0sCDMAUY5RyoAzADCTEcJnwosGEkqQ0GNTEQYfPX/hYOKXIGCmEChc8yHDaMSBYigQN5R50daLBhA4YDPaNq3cq1q9evYMOKHUu2rBkOLjC4SGmWCocTBSgkeJCAQoETbNsykXBgQomPwkoYwKq3iQQMKwBLCrECQ9bCJRWD9FDO6wESA0hAVYKCZcVAIzZvldCgQAYQqB8UaDCSg6nPikIUyAsLRYqIkgikED1kA27YgUBs2MphgeQ7F4twSARckgnajiRM2LaQwYRXDUo0l5Sh8qiSsCkTiXAcOD5Y0ssPPaEKwXZN/XxyYNGchSr67xUFOMrhQ/MPDgWQn3787QPcCg6lMGAg8f1SXHMLqBLBgnecN0p6sIXA3hCy/lBYgnedNEABbBSUgwJzA84WlQQdtFBRCx1E49uABAynVXHlhdCQERxUoB5I63B1QFCa6GbUEQeYtB0FvK3YgAmnoZbBaj1hoORnIYgXlgskRECCN0scllhFjDlW2F4HGPAXSCVMQNiZTrwVVwIZ1HUXdHAucUBaLjSZ55+ABirooOa4MMECK3zAAl6PBcpBBBfoZAIJjYaBVgMNrFVpMRAIpUkGKeBp6QYQXKBCAiMU0IGfV3CgwI8AtCCCqF408IGndjAwQgSbMrEcrLkKdEYEswAEQqgEpUAdcCW8VEYDvwHEAEdYuDBCfqmQgYJ/sGXAKhQbAKsIA99ugRNw/iGIcEUpC04wxnLbqVCuryMOCMEYLngGGwHOulVsfiuM4cd2wlnBgXYDBhwmBw1EkEIKETTgSiz1wAYCtW5d+Z4Jep4gwEchCHDCvC80oO9n9xhcwYINHmHrsuN+ACIRKKzcXAJg2tLBgCHM/IILKvyoQs5GSKBsc9lagUl+F9C2EnDxKGEtcCD4/AQHIohrR8FHSJA1ujwpEQGuIDmghQuRoltUHxp/piUSEiAA82ImkPxEdhkqQDQRBmgNgIZLvIXMYiCIcOQWDVww97jPJTFffsnpaYEHGRAAQgYqrAaGCyJEstgIHRx+RH/5BdnEZVV92esqDUxQgAAlZCAAWgQRvKGngdutYHchrLTie5woIk1rWefkJ+ygYxNsIaAHpA2cArubFUG0C6VM6CHoYHn89S/Mt3ggDETOvRBvqbA4AyrgNb4RQyogV10K7LZ+Emk0cNXw88MSBAAh+QQJCQAwACwAAAAAZABkAIX8jhT8yoz8rlT85sT8vnT8njT82qz89uz8tmT8pkT80pz8xoT8liT87tz84sT8zpz8smT8woT8okT83rz8/vz8unT8qlT8zpT8slz86tT8wnz8ojz83rT8+vT8umz8qkz81qz8miz8khz8ypT8rlz85sz8vnz8njz82rT89vT8tmz8pkz80qT8xoz8liz88uT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpuRFMp5He1MLqNJh01XpkwhACBkStWnFB0NIAsEBAEoBx1qURcienoiI39QFAcgJI+Qei4qclAdJ5t6J4yUTA0qDKOjIQsHTymrowywp0sZH6y7IhUvThQFrKW3SRQNK7vKIh62TCOakZPFSAcIytgAI6ZKB3h6fM7URBQgs9msIb9NKW8PE+JSxyggGXNcHQLo2C2V91UUWhRwwaCALy4N9mHbEE/MAQysCjTYwkKhshAOzFCAtgvBvysaLO5iAMLMCxLKCmTQokIkKwYPzGTYoIwBCi0eXI4SEbNM/oYEylxw0LJA5yYXJcscgJByYhYQRiEVKKGRxblNJrhZeXHV5YePYygEcLGJgcctHVpGZUHHAIQEG0g8aGiFwoQ8OhnSsZShxAutWTpEiKbQJuBxVw5UIJyNwQWwiLO88MB45NzIXw60wKvshAHImLUca5EgBEEGBS0oOHA4NJcUJUA8UICiRGvXuHPr3s27t+/fdAShMIEhAQYTKBqABl6pgcBdBVo0uM1ciV192QRMoF7diF1h+wpw4I45DXkhJTjvc0GVN4UXDh6YuODgr5IOEF1iWI7YDYRzDGCwXRIodLWPTbtNAN4o4iHRwTVGnYXbC+q1sk4RGUgQVQIr/rlGQUjZaADYXVGFMAFuBySTzQoNGUCWUS4YgFsGomSzQYdEmBMVAzK6NhM6J+A4BIlGmYiiitgk0NBPGwoZGQUmoCOiER0wFSF/xVCIjTpIGGAgOgjqhsKCmxRwExIpoOQSCVhS4wYG0QQ4YBLpiRRCe7u958AIGoxQH3ffKWTmeYiZ94RdFlQGiQgWzNndoQ0sQKZUC0z36BTCEWcccspd6umnoIYq6qiklkqJeYSaCgMFGUzwgAYLsPCnqsY4twFjAihw4R/vZZBBp2DY9YGiAAToVB0lqPDBBhIkgAAIqR5KZDYJHKvRASNUCEAvlm7RgLbKYLArGQ3kp0wC/g5Eex8BIsGkLkAV7GPBuFWUMCk6AtALhgMvZiPCBVkEpJMIJ5JBgVrhtdnEATnp9MC7UiBjkQhOTnGSURFAHEUJNCkkwplbqelSVpW8y/HEIFdxAMIibbNwCRMowAIHJdCFRANAeYwnQEXpVPB9DnhQIykqOKAwDPhZFIIfWKDQr0ISWHtEByPcq0cBjzXBArGjVKBF0hO3gKVg+0SgMAUWhCe1FQ6Au4sFaxeBAteLDsVEhtkUAO0WG9HNiaNHHKCLQh/YTM4AKij6wSevZZs34Ee4aFGMTVjCQgEiZC4CH/Z5QYEDGDxNCgEZABqlSFM60UGrE5TAtEMoRKACYgYQeNCC0U2k5ZIKR59iyQsvpJDqgy5JaCoF8YpUgca9BeD3otPQWqdCd9IqRAcN7+NB75e+MPRC+pZqV87nQk4rBSVAUJkIEJTAPaiBTKDCCSGEcIIni1jPxAHh6+8/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1JiieaAYyAlVnqGh0Z8CoGMABOEiJGHBwKNjQIHkpp4D5aWD5uhXS9xnowhd6KqVw9/poEioKuzRRQYr40QhbR7FL5aLyy4jAqpvFwUDQ4VDwgnJS+7RyUow4EcJcdbyS0gDHIhGCrGRiUc1oAo2dpYFCcKroAMAhlI5uhz2OxXFK2mBg6kCXmxCB+ZYvuUnPj2CpvADhAMktGV8EiDgrg+ZCrSSWKsiolaxHvFQIIRUhJRaaHQoUGGDgIPNRCGbkXMjvhktVNRDYD+iwUbIzlgaM1FByOU8JEIekUCUQAiWsTEQ0GFxAaJSkywpgASlg4k5KVBRCGAxHW1+uAaNNVIg3OA0BqicOFskjelTtlxA3dOPbIVJJJDusFCTzkoLKDpQmEFIANHheYdBrkdEydQpFBpe6XBUwYqOLN5ERZdBNGiMqxQwEGABNRrKCB4+m8ASBgvBkt6UQmXCBORb6/KMNkSBt3CQ0noy0iEAKzJafFZQZuOBujRpR+QkGCygQglxmbXxvJFhgxVYI9fz769+/fw48ufT79+og4HYNrfROGFhAAmfGDCCBtEs98hVZFAmwskeKDegUkcEEF1ZDAQAVMQuuGYKXv+ZchFByK9ElVw9B3gwAYOIOdWcZaEgJ187oBgQAgGCHACahqgowF9HTzgwhwMPEBiER0chgsKQ7pXAosAhCBXEcShE8Jf8bXQSAtJDIUOAw7MV1ogJGRJoSVczncLIxgkEaU1U85nJSNYIlEkOkjOt2QgTl6RozU7ztfjj3K4IGRnTJ7yYnwUFCDAjDUWgBqIIzUy4n4mSpDiFgesECkgInToIRcHaDAmAAxogOGnWnSgggCAVkhCaKju8cIGIxAgIIEGxkoVfvrp6uuvwAYr7LDEFmvseL0em0UDJ1xgQgQXSHCqskL0qECrIoQjQZLGJpPApmMwsIB4CS2RgQr+DwzwAreHvBCRJwuwO0sHJ2xVRgDTGvKmJwxskFAKI1BogYp4oPQKBvmK4s6YIsQryb6mhHACOwdgFAhAkdhizQgPHlKCKRd0jEUKIFgTgbybBOYJcIgcUPIwJ2tjlScWoMzYl69wrI0DpgRgcxcagBsIAxV86MAFESwQ7c9FvCBGIy6YFEkJQgOiwKFJlIBBCK6IYAAGT341giUQJLzHhvzqdEUHHhQaggpMC3HAB+CCQGUkF5mSwM/uFDqGATe60cLTY4QAAdYISmDxHCJggLgRHSweiAJxV3u0rQSarQcFGdA9UrYLNKDeCbhMrAYFKaRQeR58RIABCCBAEMBY40ig7ckKlGp+BAWSEyNyhhTYawoHv2fYmykCUAsDxJbEqWwGVZMhwt3dfmCKBcV76K7QIkBAMLEZWFAdAxbQbuwBFXRX+AoV6F4sSwfEn1/2ytdvv69BAAAh+QQJCQAwACwAAAAAZABkAIX8jhT8yoz8rlT85sT8vnT82qz8njT89uz80pz8tmT8pkT8xoT8liT87tz84sT8zpz8smT8woT83rz8/vz81qz8unT8qlT8zpT8slz86tT8wnz83rT8ojz8+vT81qT8umz8qkz8miz8khz8ypT8rlz85sz8vnz82rT8njz89vT80qT8tmz8pkz8xoz8liz88uT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCYcEgsGo/IpHLJbDqfUGVqcKJ4TqVOdMvtQg8qDCokYrg4GNXBy253Jw6WCECv00Ugx8TN7yM7FAx2g3UMFFp+iXwTFCGEjwAhFHuKlV0lCpCQHCWWnlAdBJqaBIifp0kZLqOQLhmosEcqrJoqTQcUFxERARSvsVwYtJAQSh0lKwYMcyJlISQbKZTATRzDjxxIEw0Ec5oiAnqWKQ4eDw8UJdNKjteDBkfHAtcGJ6aLJyDKzQwcK+pLULgbhOJIhkzuDBRY52UbBG+EGCxYk0TYwDoYjBxgcREACnFtGoCgRSBFEgQd6dgiMkFDSgAWKHrpkGCYiBEMh2QQdJHB/q8hJQy8FFGgzQmIrDj9qdCxJMsFL+kIyPnkwEh3Ee4RwTRQQSciLyxEjfSViwOh7kA00EZh1TBJDIOOZbCSiwqe10L8NAIIryYGHrTCOOF26AIvI5DSYlD2yAQJChTXEcFCAlUKki+a8HIh89/GSMCIWSbiDAk1SQp4dre5S6CBBvYqOVCiypUBJpVI8NtRRAsvJQS6E/DiUwlrUQ3NXOFOxAOqfQ5YfGlgrZcBvDWxsO5pQuKoCaA7mRBhGIOFqBog7+3AzYFuoxg8hzXhwepRHwRzSTFivR08kwDTwQcdCcCdGxOUEIEAyjBgAAYPNCCeJQ085A4LIPnRQQMZ/pRQQgYvTNhdAwQOo0AGIlLTnQocZHcHChOpKCNLLzyQAAchLBMCCgK0gOKMQBKRQgkSnHCCBCUUF+SSTDbp5JNQRinllEBOIA2VKnbgQAsfQPBBCw7oh6UfCWJAxmQhYADQmIp0oNpfh7BJ5gntaBICenK60QBHtGyXZxETvFCChE1MEIA7OP0JwzYrMODoCoTO5l9SueX5wnR0YKBkEi/cN4gIm7I5gQqKiaDChCVcBBqWoTxigphCZHCRbFimIAohpSjRaXOhjjkqb3RNeABCJlYq5wskDEJCr0ZM0AKiKT4ZaAWOMlBBiEzsOYyfigqxjQPYFlpAnZDcGW23/kn0BSes6I5Xgpn/hQDBmu22QU4LFXjZggTG1rvIAez6K/DABBds8MEIJ6zwwgw37LDDYBCAAQQanHDuwh2oYABSIlggQcALH6CBZyEgAPIpgXrYwMlddDCCi3WEIMGSLgvAAQcgLHBgIg2gNQoIFyfSgQkcgyBTIuXRIsIJM3qX2QosQ0EsKxrM+MI8j4SwahsTwEwIBEHzERwkgCnS9TUYhO2GXI/QVcmkpMwoUrntKXIrKyJQMGMHEWRGwtF9OOApAAYADszcgzBmydD3mQrFNiNEJoICI0QaxQEQhOACAyEIQK8iFXrGQFZPwMGnHRiqDcMxFFDgQL+VNEA0bSEhjGC4EgdBAgKtrDpAQIsuKBDByqCYMIoGsD+cgXCQoMC7w4KPIkLdDxPhAC3UVy9ECV4DoLj2Q1w9CnHgD9HBAzDLp/rAB3wgmQgf3K69syjw5GAL6xs8QQYXLBDBAz8qnwAHSMACGrAPQQAAIfkECQkAMAAsAAAAAGQAZACF/I4U/MqM/K5U/ObE/L50/J40/Nqs/Pbs/LZk/KZE/NKk/MaE/JYk/O7c/OLE/M6c/LJk/MKE/KJE/N68/P78/Lp0/KpU/M6U/LJc/OrU/MJ8/KI8/N60/Pr0/Lps/KpM/Nak/Jos/JIc/MqU/K5c/ObM/L58/J48/Nq0/Pb0/LZs/KZM/MaM/JYs/PLk/Nas////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABv5AmHBILBqPyKRyyWw6n9CodEqtQjulyaTUsXq/1k7GU2CYGYVKpgtuu5GNCANAr9MZmsZ7/3Zh7IB0IiQufIZhFYGKABVsh49OFBdzi4AMFxSQmksNH5WKH3qbo0YolJ92DCikrEIdC6iKC45JFB0HDQ4TGQcdma1PBwixgQgHShQuKB6nACICCg2/wEsHJMSAJMdJDhjNdiIWILRvFCUKLAEvhU3C2HbGSBQoJ7EtC9NtHRMJIv7ODBCUyHekQ4R3dWYdofAiBDYRLMhZObBAxKICCiQWMYVQFZISGxCGGAfmlcVKLQxw8vQu1MJhCAGsEOVlwjdFBdjJG3FzEf6DEQSFZIgp6EHQKBQSYDNxdEgHFdg8aIRhgiidBFOflDgZ64NOJC5IcFU06CuRDiusOttW5cHYTwUmMGlgoicABiZoGnFRQC2AEl5gYQuxiokYFWXOFPAwUEmGvmo5eGHxjjCUA1m2sHUM2apcKy/eVjoBGJKLemozeGkgetGHzYYosCTKAPYUqLFEPBh1QS2CrFo7V7Jg21CDFrRfNL2iwC6dEwNIUdBAlJC+FydEM4CQYTmfBgIQnnDgXYoLEysKhAhxAlp5QyXSEguhkk8yBwZQlCg+ylx4VBsoRw01cThEFmPvDRhbAwpYcEIBBZywwgLdKWihEBTgwkuCF/526OGHIIYIAwUkighMMhNcsEAEC4wwgQscmljFeQmEwJUIISRgglkytnHABcIFguMF/PU4hQsePFQBj0ZKcQAEMcWTRAcOoLfBCiYMANyHHWjQ2iciaKCROWIFQkJjPTJkYEwtCFgESJVsUJqMB/yhFgawgYeKAHqFOMGXxIjwGYYVoSICPjIm4hcABBDRgFKxzCRjSIueQIQDzqXigIkdAPoQESi8U1iIByxaB6iimliqqQBcmmkdDGwqIgWsiuCofKi4ZCJqfm1ABAWFgomoiYr6VUERDViwZ58g/umXCLISMQClishppB9+YcAjmUKeGeOJDVkVgptGdDCACf4fbPCBCQ5s6aFBnpIVgbtNJnEAbu+oUGS9TTTgQbyCeMAsv1EcMIKNlYhQwAj7EvwEjSGcwkAIWDLpMBUoPsDCAiw8gAKMF8dWYsgkl2zyySinrPLKLJtoiwswu0Bvy0ZQMEEFBm6gQYU0R6LAmnWsQN67DayxCQdA2/GBahdmgMEG7aHwbRQu/LeImBZm0IwICkz9xARJA3JCw488FUgBKRzyQiwDj9IAtXbMuYcCbCuYAa92DLoHB5mGYPEmHVgNK9lUNICrIo1Y6Kwdw9o3wpchTOC1GxT8fAcLhFdBgQmiYTT5iAcc8PkQFKSgC8iaUDDCB5SEIIDUU5gTgGIKHgSA5sUUZIDCCy+8WAV2dpzwQs9QOBB2CNESr0QHMBUzM82PLpJA28oPkYEEi0jAdPVIHDAbIAL8zT0MLIgG0fhKVG2m+Og3UAED/jAgMPpNuKAF+/Tnr//+/PfvPzVBAAA7Nmo4bnNja3BCRFQ2c1haVTBIaU0xYUlrVjJ3KzRNeUtSci9KZ3h2NnJaMGFKQ2pvVVBKRFJHK2loWEdWRTJ1Mg==",errorMessages:{ERR_MODULE_NOT_INSTALLED:"Error: The Dynamic Web TWAIN module is not installed.",ERR_BROWSER_NOT_SUPPORT:"Error: This browser is currently not supported.",ERR_CreateID_MustNotInContainers:"Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_NotContainer:"Error: The ID of the DIV for creating the new DWT object is invalid.",ERR_CreateID_WasmEnvNotLoaded:"Error: The wasm env not loaded.",ERR_DWT_NOT_DOWNLOADED:"Error: Failed to download the Dynamic Web TWAIN module.",limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Decoding...",decodeTIFF:"Decoding tiff...",decodePDF:"Decoding pdf...",encode:"Encoding...",encodeTIFF:"Encoding tiff...",encodePDF:"Encoding pdf...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Scan Documents",load:"Load Local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",cut:"Cut Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Original Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:true,visibility:{scan:true,load:true,print:true,removeall:true,removeselected:true,rotateleft:true,rotate:true,rotateright:true,deskew:true,crop:true,cut:true,changeimagesize:true,flip:true,mirror:true,zoomin:true,originalsize:true,zoomout:true,stretch:true,fit:true,fitw:true,fith:true,hand:true,rectselect:true,zoom:true,restore:true,save:true,close:true}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation method:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}},handshakeCode:undefined,organizationID:undefined,licenseServer:undefined,sessionPassword:"",ltsDebug:false};a.MSG={Loading:"Decoding...",LoadingTiff:"Decoding tiff...",LoadingPdf:"Decoding pdf...",Encoding:"Encoding...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Wasm_Initializing:"Initializing...",Init_LookingLicense:"Looking for license...",Init_LoadingViewerJs:"Loading the viewer script...",Init_AllJsLoaded:"All scripts loaded.",Init_FireBeforeInitEvt:"OnWebTwainWillInit triggered.",Init_InitActiveX:"Initializing the ActiveX...",Init_InitH5:"Initializing...",Init_InitWasm:"Initializing WebAssembly mode...",Init_DownloadingWasm:"Downloading WebAssembly code...",Init_CompilingWasm:"Compiling WebAssembly code...",Init_InitDynamsoftService:"Initializing the Service mode...",Init_CheckDWT:"Looking for the service module...",Init_CheckDWTVersion:"Checking the service module...",Init_CreatingDWT:"Creating a WebTwain instance...",Init_ConfiguringDWT:"Configuring the WebTwain instance...",Init_SetLicenseForDWT:"Activating the WebTwain instance...",Init_GetLicenseInfoForDWT:"Decoding the license...",Init_CheckingLicense:"Checking the license...",Err_BrowserNotSupportWasm:"It looks like your browser doesn't support the WebAssembly technology which is required to use the library."}})(Dynamsoft);Dynamsoft.OnWebTwainNotFoundOnWindowsCallback=Dynamsoft.OnWebTwainNotFoundOnWindowsCallback||false;Dynamsoft.OnWebTwainNotFoundOnMacCallback=Dynamsoft.OnWebTwainNotFoundOnMacCallback||false;Dynamsoft.OnWebTwainNotFoundOnLinuxCallback=Dynamsoft.OnWebTwainNotFoundOnLinuxCallback||false;Dynamsoft.OnWebTwainOldPluginNotAllowedCallback=Dynamsoft.OnWebTwainOldPluginNotAllowedCallback||false;Dynamsoft.OnWebTwainNeedUpgradeCallback=Dynamsoft.OnWebTwainNeedUpgradeCallback||false;Dynamsoft.OnWebTwainPreExecuteCallback=Dynamsoft.OnWebTwainPreExecuteCallback||false;Dynamsoft.OnWebTwainPostExecuteCallback=Dynamsoft.OnWebTwainPostExecuteCallback||false;Dynamsoft.OnWebTwainShowUpdatingDialog=Dynamsoft.OnWebTwainShowUpdatingDialog||false;Dynamsoft.OnWebTwainCloseUpdatingDialog=Dynamsoft.OnWebTwainCloseUpdatingDialog||false;Dynamsoft.OnRemoteWebTwainNotFoundCallback=Dynamsoft.OnRemoteWebTwainNotFoundCallback||false;Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback=Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback||false;Dynamsoft.OnWebTWAINDllDownloadSuccessful=Dynamsoft.OnWebTWAINDllDownloadSuccessful||false;Dynamsoft.OnWebTWAINDllDownloadFailure=Dynamsoft.OnWebTWAINDllDownloadFailure||false;Dynamsoft.OnWebTWAINModuleDownloadManually=Dynamsoft.OnWebTWAINModuleDownloadManually||false;var Dynamsoft_ChangeConfig=Dynamsoft_ChangeConfig||false,Dynamsoft_OnLoad=Dynamsoft_OnLoad||false,Dynamsoft_OnNotReady=Dynamsoft_OnNotReady||false,Dynamsoft_OnReady=Dynamsoft_OnReady||false;(function(b){var c={},a=Dynamsoft.dcp;Dynamsoft.DWT.RegisterEvent=function(d,e){if((d==="OnWebTwainReady"||!Dynamsoft.DWT.UseDefaultInstallUI)&&b.isFunction(e)){Dynamsoft.DWT[d]=e}else{if((d==="OnWebTwainInitMessage")&&b.isFunction(e)){Dynamsoft.DWT[d]=e}}return true};b.mix(c,Dynamsoft.DWT.defaultEnv);b.mix(c,Dynamsoft.DWT);Dynamsoft.DWT=c;a.onReadys.push(function(){a.ifCheck64bitServiceFirst=Dynamsoft.DWT.IfCheck64bitServiceFirst})})(Dynamsoft.Lib);(function(o){var k=!0,q=!1,u=document.location.protocol,e=location.hostname,a=Dynamsoft.navInfoSync,p=a.bSSL,j=a.bHTML5Edition,c=q,h=q,w=q,t=0,g=location.pathname,f=0,b,l;b={config:{debug:q,devMode:q,usingMainMode:q,bDiscardBlankImage:q,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:p,dcpStatus:0,dcpCallbackType:0,arySTwains:[],arySTwainsByIP:[],aryWSPool:[],bFirst:k,bOK:q,__dialog:q,scriptLoaded:q,wasmScriptLoaded:q,wasmLoad:q,cssLoaded:q,viewerScriptLoaded:q,bNoControlEvent:q,bNeedUpgradeEvent:q,StartWSTimeoutId:q,StartWSByIPTimeoutId:q,bPromptJSOrServerOutdated:q,detectType:p?1:(u==="http:"||e==="")?0:-1,tryTimes:0,ports:[{port:18623,ssl:k},{port:18622,ssl:q}],win64Ports:[{port:18621,ssl:k},{port:18620,ssl:q}],cUrlIndex:0,urls:[],onNoControl:q,needUpgrade:q,onNotAllowedForChrome:q,OnDetectNext:q,OnCreatWS:q,bMaskShow:q},page:{bUnload:q,OnUnload:q},tmp:{IfAllowLocalCache:k,EmptyFunction:function(){}}};b.appendMessage=function(x){if(typeof(x)==="string"){b.config.msg.push(x)}else{if(Object.prototype.toString.call(x)==="[object Array]"){Dynamsoft.Lib.each(x,function(y){b.appendMessage(y)})}}};b.appendRichMessage=function(x){b.appendMessage([b.config.msgPrefix,x,b.config.msgSuffix])};b.clearMessage=function(){var x=Dynamsoft.navInfoSync;if(x.bIE&&x.IEVersion==8){b.config.msg.splice(0,b.config.msg.length)}else{b.config.msg.splice(0)}return k};b.getRealPath=function(x){if(x===undefined){return""}if(b.env.pathType==1){return b.env.basePath+x}return b.env.basePath+x.replace(new RegExp("/","g"),"\\\\")};b.getHex=function(y){var x;x=Number(y).toString(16).toUpperCase();if(x.length==1){x=["0",x].join("")}return x};b.getColor=function(z){var y,x,B,A;A=z>>16;B=(z&65280)>>8;x=z&255;y=["#",b.getHex(A),b.getHex(B),b.getHex(x)].join("");return y};b.RGB2BGR=function(y){var B,x,A,z;z=y>>16;A=(y&65280);x=y&255;B=(x<<16)|A|z;return B};b.BGR2RGB=b.RGB2BGR;b.isLocalIP=function(x){return x&&(x==="127.0.0.1"||x==="localhost"||x==="local.dynamsoft.com")};var n=navigator,i=n.userAgent.toLowerCase(),d=n.platform.toLowerCase(),s=!a.bMobile&&(/win32|win64|windows/).test(d),v=s&&(/win64|x64/).test(i),m="",r="";if(i.indexOf("mac os x")>-1){m=i.match(/mac os x [\d._]*/gi);m=(m+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(i.indexOf("cpu os")>-1){r=i.match(/cpu os [\d._]*/gi);r=(r+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(i.indexOf("cpu iphone os")>-1){r=i.match(/cpu os [\d._]*/gi);r=(r+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(e===""){if(s&&g.lastIndexOf("\\")>1){g=g.substring(1,g.lastIndexOf("\\")).replace(/%20/g," ")}else{f=1;g=g.substring(1,g.lastIndexOf("/")).replace(/%20/g," ")}}else{f=1;g=g.substring(0,g.lastIndexOf("/"))}if(a.bIE){t=a.IEVersion;if(t===""||t>8){if(t>=10&&Dynamsoft.DWT.IfUseActiveXForIE10Plus==false){j=k}else{j=q;w=k}}else{h=k}}else{if(!j){c=k}}b.env={bIE:a.bIE,bEdge:a.bEdge,bWin64:v,osVersion:r,macOSX:m,bFileSystem:a.bFileSystem,bMobile:a.bMobile,strIEVersion:a.IEVersion,basePath:g,pathType:f,isDesktopViewer:function(){return Dynamsoft.navInfo.bWin||Dynamsoft.navInfo.bLinux||Dynamsoft.navInfo.bMac},isPadViewer:function(){return Dynamsoft.navInfo.bPad||Dynamsoft.navInfo.bChromeOS},isMobileViewer:function(){return Dynamsoft.navInfo.bMobile}};b.product={name:"Dynamic Web TWAIN",bHTML5Edition:j,bPluginEdition:c||w,bActiveXEdition:h,host:Dynamsoft.dcp.host,wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:Dynamsoft.dcp.getDSPath,getPKGPath:function(){var x="/dist/mac/DynamicWebTWAINMacEdition.pkg";return Dynamsoft.DWT.ResourcesPath+x},getMSIPath:function(){var x="/dist/win/DynamicWebTWAINPlugIn.msi";return Dynamsoft.DWT.ResourcesPath+x},getActiveXCABx86Path:function(){var x="/dist/win/ActiveX/DynamicWebTWAIN.cab";return Dynamsoft.DWT.ResourcesPath+x},getActiveXCABx64Path:function(){var x="/dist/win/ActiveX/DynamicWebTWAINx64.cab";return Dynamsoft.DWT.ResourcesPath+x},strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},bChromeEdition:j};b.getShadowRoot=function(y){var x=y;if(o.win.ShadowRoot){while(x){if(x instanceof o.win.ShadowRoot){return x}x=x.parentNode}}return false};b.isShadowRoot=function(x){if(o.win.ShadowRoot){if(x instanceof o.win.ShadowRoot){return true}}return false};o.mix(o,b);o.Addon_Events=[];o.Addon_Sendback_Events=[]})(Dynamsoft.Lib);Dynamsoft.Ready(function(m,g){var h=!0,r=!1,d=m.getNavInfo(),a=Dynamsoft.navInfoSync,w=navigator.userAgent.toLowerCase(),v=document.location.protocol,e=location.hostname,p=a.bSSL,s=d.bMac,z=d.bLinux,u=d.bWin,j=d.bOSx64,k=d.bSafari,l=d.bFirefox,n=d.bEdge,q=d.bChrome,t=d.bIE,y=parseFloat(d.strBrowserVersion),o=r,f=0,c,i;if(d.bChromeOS){d.bMobile=true}var b={getServerVersionInfo:function(B){var A=Dynamsoft.DWT.ServerVersionInfo;if(d.bWin||d.bWin64){}else{if(d.bMac){A=Dynamsoft.DWT.ServerMacVersionInfo}else{if(d.bLinux){A=Dynamsoft.DWT.ServerLinuxVersionInfo}else{}}}if(B){return A}return m.replaceAll(A,",","")},getDWTPrefix:function(){var A=Dynamsoft.DWT;if(A.CustomMode===true){return"dwtc_"}return"dwt_"}};m.mix(m.product,b);var x={bChrome:q,bFirefox:l,bSafari:k,bWin:u,bWin64:(w.indexOf("win64")!=-1||w.indexOf("x64")!=-1),bMac:s,bLinux:z,isX64:j,iPluginLength:(d.bIE||d.bEdge)?0:navigator.plugins.length,strChromeVersion:d.bChrome?y:"",strFirefoxVersion:d.bFirefox?y:""};m.mix(m.env,x)});Dynamsoft.Ready(function(f,b){var e=f.getNavInfo(),d=!0,h=!1,a=!1,c={ActiveX:0,Plugin:1,HTML5:2,WinMacLinux:3,Barcode1D:4,Barcode2D:5,BarcodeWriter:6,OCR:7,Webcam:8,PDFRasterizer:9,OCRPro:10,QR:50,PDF417:51,DataMatrix:52},g={WinMacLinux:1,Barcode1D:2,Barcode2D:3,OCR:4,Webcam:6,PDFRasterizer:9};f.License={isLTS:function(){return(f.isString(Dynamsoft.DWT.handshakeCode)||f.isString(Dynamsoft.DWT.organizationID))||Dynamsoft.DWT.isPublicLicense()},_innerCheckProductKey:function(Q,G,N,v){var r,t=Dynamsoft.DWT,D=v,A;r=Q.__licenseInfo;if(r&&r.LTS){if(!r||!f.isArray(r.Detail)||(r.Detail.length==0)){if(Dynamsoft.Lib.License.isLTS()){f.Errors.LicenseNoCore(Q)}else{f.Errors.LicenseEmptyOrInvalid(Q)}f.License.ShowInvalidLicense("",true);return h}D=false}else{if(!f.isString(t.ProductKey)||t.ProductKey==""||t.ProductKey=="******"||!r||!f.isArray(r.Detail)||(r.Detail.length==0)){if(Dynamsoft.Lib.License.isLTS()){f.Errors.LicenseNoCore(Q)}else{f.Errors.LicenseEmptyOrInvalid(Q)}f.License.ShowInvalidLicense("",true);return h}}var O=0,j=0,M=[],k=[],y=h,R=h,B=h,H=h,p=h,s=h,F,L,E,q;if(!this.isBindDomainOK(r.Domain)){f.Errors.LicenseBadDomain(Q);if(D){f.License.promptLicenseErr(Q)}return h}if(r.Detail.length>0){E=r.Detail[0];if(E.Trial=="FALSE"){A=false}else{A=true}}for(L=1;L<r.Detail.length;L++){E=r.Detail[L];if(E.Trial=="FALSE"&&A||E.Trial=="TRUE"&&!A){f.Errors.LicenseTrialFullMixed(Q);if(D){f.License.promptLicenseErr(Q)}return h}}if(G.Core){for(L=0;L<r.Detail.length;L++){E=r.Detail[L];q=this.getEnumLicenseType(E.EnumLicenseType);if(q.Core){var P=this.getLicenseType(E.LicenseType);if(f.product.bHTML5Edition){if(P.ActiveX&&!P.Html5){continue}k.push(E)}else{if(!P.ActiveX&&P.Html5){continue}k.push(E)}}}}else{k=r.Detail}for(L=0;L<k.length;L++){var w=d;E=k[L];q=this.getEnumLicenseType(E.EnumLicenseType);if(G.Core||this.isAllowLicenseType(q,G)){F=E.ExpireDate.replace(/-/g,"/");var S=(E.Trial!="FALSE");if(!this.isExpiredOrFuture(F,S)){if(q.Core&&parseInt(E.Version)>=15||!q.Core){if(G.Wasm){var K=false;if(G.Core&&q.Core){K=true}else{if(G.PDFRasterizer&&q.PDFRasterizer){K=true}else{if(G.Webcam&&q.Webcam){K=true}else{}}}if(K){if(E.OS.toLowerCase().indexOf("wasm")>-1){if(this.isBrowserOK(E.Browser)||N){O++;w=h}else{R=d}}else{if(G.PDFRasterizer){p=d}else{if(G.Webcam){s=d}else{H=d}}}}}else{if(this.isOSOK(E.OS,Q)){if(this.isBrowserOK(E.Browser)||N){O++;w=h}else{R=d}}else{y=d}}}else{B=d}}else{M.push(F)}if(w){j++}}}if(O>0){return d}if(j==0){this.setNoAllowedLicenseTypeError(Q,G);if(D){f.License.promptLicenseErr(Q)}return h}if(M.length>0){var x=0,u=100000000000000000000,J="",m=(new Date()).getTime(),z;F="";for(L=0;L<M.length;L++){z=this.parseDateFromString(M[L]);if(z.getTime()<m&&z.getTime()>x){x=z.getTime();F=M[L]}else{if(z.getTime()>m&&z.getTime()<u){u=z.getTime();J=M[L]}}}if(F!=""){z=this.parseDateFromString(F);F=this.getLicenseDateString(z);f.Errors.LicenseExpired(Q,F);if(!Dynamsoft.Lib.License.isLTS()){f.License.ShowInvalidLicense(F,A)}D=false}else{if(J!=""){z=this.parseDateFromString(J);J=this.getLicenseDateString(z);f.Errors.LicenseIsFuture(Q,J)}else{f.Errors.LicenseExpired(Q,"");D=false;f.License.ShowInvalidLicense()}}if(D){f.License.promptLicenseErr(Q)}return h}if(B){f.Errors.LicenseLower(Q);if(D){f.License.promptLicenseErr(Q)}return h}if(R){if(e.bEdge){f.Errors.LicenseNoEdge(Q)}else{if(e.bChrome){f.Errors.LicenseNoChrome(Q)}else{if(e.bFirefox){f.Errors.LicenseNoFirefox(Q)}else{if(e.bIE){f.Errors.LicenseNoIE(Q)}else{if(e.bSafari){f.Errors.LicenseNoSafari(Q)}else{f.Errors.LicenseNotSupportBorwser(Q)}}}}}if(D){f.License.promptLicenseErr(Q)}return h}if(y){var I=Q,l=false,C=false,n=false;if(I._bRemoteMode){if(I.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){n=true}else{if(I.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){C=true}else{if(I.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){l=true}}}}else{l=e.bMac;C=e.bLinux;n=e.bWin||e.bWin64}if(n){f.Errors.LicenseNotSupportWindows(Q)}else{if(l){f.Errors.LicenseNotSupportMAC(Q)}else{if(C){f.Errors.LicenseNotSupportLinux(Q)}else{f.Errors.LicenseNotSupportOS(Q)}}}if(D){f.License.promptLicenseErr(Q)}return h}if(H){f.Errors.LicenseNotSupportWasm(Q);if(D){f.License.promptLicenseErr(Q)}return h}if(p){f.Errors.LicenseNotSupportPdfRWasm(Q);if(D){f.License.promptLicenseErr(Q)}return h}if(s){f.Errors.LicenseNotSupportWebcamWasm(Q);if(D){f.License.promptLicenseErr(Q)}return h}f.Errors.LicenseEmptyOrInvalid(Q);if(D){this.promptLicenseErr(Q)}return h},checkProductKey:function(m,l,n,j){var i=Dynamsoft.DWT.licenseException,k=true;if(Dynamsoft.Lib.isString(Dynamsoft.DWT.handshakeCode)||Dynamsoft.Lib.isString(Dynamsoft.DWT.organizationID)){if(Dynamsoft.Lib.isString(Dynamsoft.DWT.ProductKey)){Dynamsoft.Lib.Errors.LongKeyShortKeyMixed(m);k=false}}k=k&&Dynamsoft.Lib.License._innerCheckProductKey(m,l,n,j);if(!k){i.code=m._errorCode;i.message=m._errorString;i.fromLTS=false}return k},promptLicenseErr:function(l){var j=false,k;if(f.isNumber(l.ErrorCode)){j=l.ErrorCode;k=l.ErrorString}else{if(f.isNumber(l.code)){j=l.code;k=l.message}else{if(f.isString(l.message)){j=true;k=l.message}}}if(j!==false){var i=['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',k,"</div>",'<div style="padding-top:35px"></div>'];Dynamsoft.DWT.ShowDialog(365,0,i.join(""))}},ShowInvalidLicense:function(p,m){if(f.detect.needUpgrade){return}if(f.License.isLTS()){var n=Dynamsoft.DWT.licenseException,j=n.message;Dynamsoft.OnLTSLicenseError&&Dynamsoft.OnLTSLicenseError(Dynamsoft.Lib.License.getPublicLicenseContent(j));return}var q=[],o="is not valid",k=screen.width,l=k>680?680:(k-10);if(p&&p!=""){if(p.indexOf("on")==-1){o="has expired on "+p}else{o="has expired "+p}}q.push('<div style="padding:15px;border:1px solid #CCCCCC;background:#FFFFFF">');if(f.env.bMobile){q.push("The <strong>ProductKey</strong> is not valid.");if(m){q.push(" Please <br /><ol><li>1. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a trial license</a>.</li>");q.push("<li>2. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key?product=dwt&utm_source=in-product' target='_blank'>Update the ProductKey</a>.</li>")}}else{q.push("You are seeing this dialog because the <strong>ProductKey</strong> ");q.push(o);if(m){q.push(". Please follow the steps below <br />");q.push("<ol><li>Request a <strong>Dynamic Web TWAIN</strong> trial license <strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>here</a></strong></li>");q.push("<li>Refer to this <strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key?product=dwt&utm_source=in-product' target='_blank'>article</a></strong> to update the ProductKey</li>");q.push("<li>Do a <strong>hard refresh</strong> or clear cache in your browser to make sure the new ProductKey is used</li>");q.push("<li>If the issue persists, please contact us at <a class='dynamsoft-major-color' href='mailto:support@dynamsoft.com'>support@dynamsoft.com</a></li>")}else{q.push(".<br />")}}q.push("</div>");f.ShowLicenseDialog(q.join(""),{width:l,height:0,bClose:false});if(f.env.bMobile){var i=f.one(".ds-dwt-ui-dlg-license-wrap");if(i&&i.length>0){i[0].style.fontSize="1.5em";i[0].style.lineHeight="1.5em"}}},isBindDomainOK:function(p){if(f.isUndefined(p)||p==null||p==""||p=="*"||p=="*.*"){return d}var s=location.hostname,j=h;if(s==""){return d}var t=s.toLowerCase().split("."),k=t.length,n=p.toLowerCase().split(";");for(var o=0;o<n.length;o++){var m=n[o];if(m=="*.*"){j=d;break}var r=m.split("."),u=r.length;if(u>0&&u-1<=k){var q=d;for(var l=u-1;l>0;l--){if(r[l].indexOf("*")>-1){j=d;break}if(l+k-u>=0){if(t[l+k-u]!=r[l]){q=h;break}}else{if(r[l]!="*"){q=h;break}}}if(q){if(r[0]=="*"||k>=u&&t[k-u]==r[0]){j=d;break}}}}return j},isExpiredOrFuture:function(j,m){if(j==""){return h}if(!m){var i=j.length;if(i>2&&j[i-2]=="/"&&j[i-1]=="0"){return h}}var l=this.parseDateFromString(j),k=(new Date()).getTime(),n=k+(60*24*3600000);if(l.getTime()<k){return d}else{if(m&&(l.getTime()>n)){return d}}return h},isOSOK:function(n,l){var q=l,k=false,j=false,i=false,m=false,o=false,p=false;if(n==""||n=="0"){return d}if(q._bRemoteMode){if(q.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){i=true}else{if(q.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){j=true}else{if(q.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){k=true}else{if(q.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumEmbed){o=true}else{if(q.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumChromeOS){p=true}}}}}}else{k=e.bMac;j=e.bLinux;i=e.bWin||e.bWin64;m=f.env.bMobile;p=e.bChromeOS;o=e.bEmbed}n=n.toLowerCase();if(n.indexOf("windows")>-1&&i){return d}else{if(n.indexOf("mac")>-1&&k){return d}else{if(n.indexOf("linux")>-1&&j){return d}else{if(n.indexOf("mobile")>-1&&(m||p)){return d}else{if(n.indexOf("embed")>-1&&o){return d}}}}}return h},isBrowserOK:function(k){if(f.isString(k)){if(k==""||k=="0"){return d}k=k.toLowerCase();var i=k.split(";"),j=h;f.each(i,function(l){if(f.trim(l)=="chrome"&&(e.bChrome||e.bSafari)){j=d}else{if(f.trim(l)=="ie"&&(e.bIE||e.bEdge)){j=d}else{if(f.trim(l)=="firefox"&&e.bFirefox){j=d}}}});return j}return h},parseDateFromString:function(j){var k,i=j;i=i.replace(/-/g,"/");k=Date.parse(i);if(isNaN(k)){k=0}k=new Date(k);k.setUTCHours(23,59,59,999);return k},getEnumLicenseType:function(m){var j=h,q=h,o=h,l=h,r=h,p=h,n=h,k=h,i=h;if(f.isString(m)){f.each(m.split(";"),function(t){var s=t*1;if(s==c.HTML5||s==c.WinMacLinux||s==c.ActiveX||s==c.Plugin){j=d}else{if(s==c.Barcode1D){q=d}else{if(s==c.QR){o=d}else{if(s==c.PDF417){l=d}else{if(s==c.DataMatrix){r=d}else{if(s==c.OCR){p=d}else{if(s==c.Webcam){n=d}else{if(s==c.PDFRasterizer){k=d}else{if(s==c.OCRPro){i=d}}}}}}}}}})}return{Core:j,PDFRasterizer:k,Webcam:n,barcode1D:q,QR:o,PDF417:l,DataMatrix:r,OCR:p,OCRPro:i}},getLicenseType:function(m){var n=h,r=h,k=h,p=h,l=h,s=h,q=h,o=h,j=h,i=h;if(m&&m!=""){m=m.toLowerCase();if(m=="html5;activex;oldie"){k=d}else{if(m=="html5"||m=="win=(aph) or mac=(ph) or linux(h)"){n=d}else{if(m=="html5;activex"){n=d;k=d}else{if(m=="1d barcode reader"){r=d}else{if(m=="2d barcode reader(qrcode)"){p=d}else{if(m=="2d barcode reader(pdf417)"){l=d}else{if(m=="2d barcode reader(data matrix)"){s=d}else{if(m=="ocr"){q=d}else{if(m=="webcam"){o=d}else{if(m=="pdf rasterizer"){j=d}else{if(m=="proocr"){i=d}}}}}}}}}}}}return{Html5:n,PDFRasterizer:j,Webcam:o,barcode1D:r,QR:p,PDF417:l,DataMatrix:s,OCR:q,OCRPro:i,ActiveX:k}},isAllowLicenseType:function(i,j){if(j.Core){return i.Core}else{if(j.PDFRasterizer){return i.PDFRasterizer}else{if(j.Webcam){return i.Webcam}else{if(j.barcode1D){return i.barcode1D}else{if(j.QR){return i.QR}else{if(j.PDF417){return i.PDF417}else{if(j.DataMatrix){return i.DataMatrix}else{if(j.OCR){return i.OCR}else{if(j.OCRPro){return i.OCRPro}}}}}}}}}return i.Core},setNoAllowedLicenseTypeError:function(j,i){if(i.Core){if(i.Wasm){f.Errors.LicenseNotSupportWasm(j)}else{f.Errors.LicenseNoCore(j)}}else{if(i.PDFRasterizer){if(i.Wasm){f.Errors.LicenseNotSupportPdfRWasm(j)}else{f.Errors.LicenseNoPDF(j)}}else{if(i.Webcam){if(i.Wasm){f.Errors.LicenseNotSupportWebcamWasm(j)}else{f.Errors.LicenseNoWebcam(j)}}else{if(i.OCR){f.Errors.LicenseNoOCR(j)}else{if(i.OCRPro){f.Errors.LicenseNoOCRPro(j)}else{f.Errors.LicenseEmptyOrInvalid(j)}}}}}},getLicenseDateString:function(i){var k=i.getFullYear(),j,m,l;j=i.getMonth()+1;if(j>=10){m=""+j}else{m="0"+j}if(i.getDate()>=10){l=""+i.getDate()}else{l="0"+i.getDate()}return[m,"/",l,"/",k].join("")},hasPDFRProductKey:function(i){if(i._isMobileMode()){if(!f.License.checkProductKey(i,{PDFRasterizer:true,Wasm:true},true)){i._resetErr();return false}}else{if(!f.License.checkProductKey(i,{PDFRasterizer:true},true)){i._resetErr();return false}}return true},checkPDFProductKeyWhenNeeds:function(k,l){if(l==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF||l==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF){var i=1,j;if(f.product.bHTML5Edition){if(k.__addon&&k.__addon.PDF){j=k.__addon.PDF.GetConvertMode()}}else{if(k.Addon&&k.Addon.PDF){j=k.Addon.PDF.GetConvertMode()}}if(j==i){if(f.isFunction(k._isMobileMode)&&k._isMobileMode()){return this.checkProductKey(k,{PDFRasterizer:true,Wasm:true},true)}else{return this.checkProductKey(k,{PDFRasterizer:true},true)}}}return d},getPublicLicenseContent:function(p){var l=[],o=p;if(!f.isString(o)){if(f.isUndef(o)){return""}if(o instanceof Error||"message" in o){o=o.message}else{o=""+o}}var k=o.indexOf("[");var j=o.indexOf("]",k);var q=o.indexOf("(",j);var n=o.indexOf(")",q);if(-1==k||-1==j||-1==q||-1==n){return o}if(k>0){l.push(o.substring(0,k))}var m=o.substring(k+1,j);var i=o.substring(q+1,n);l.push(['<a href="',i,'" target="_blank" class="dynamsoft-major-color">',m,"</a>"].join(""));l.push(o.substring(n+1));return l.join("")}}});Dynamsoft.Ready(function(c,a){var b=!0,d=!1,e={Errors:{FilePathSyntaxIncorrect:function(f){f._errorCode=-3123;f._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(g,f){if(!c.isString(f)||f.length==0){c.Errors.InvalidFile(g);return d}if(c.startsWith(f,"http://")||c.startsWith(f,"https://")||c.startsWith(f,"ftp://")){c.File.Errors.FilePathSyntaxIncorrect(g);return d}return b}};e.checkFolder=e.checkFilePath;c.File=e;Dynamsoft.DWT.isPublicLicense=function(){if(c.isUndef(Dynamsoft.DWT.ProductKey)){if(c.isUndef(Dynamsoft.DWT.handshakeCode)&&c.isUndef(Dynamsoft.DWT.organizationID)||c.isUndef(Dynamsoft.DWT.handshakeCode)&&(Dynamsoft.DWT.organizationID=="200001")){return true}}return false};c.showProgress=function(){};c.closeProgress=function(){}});(function(a,b){a.install={_divInstallBody:"dwt-InstallBody",_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:false};a.install._strDynamsoftWithClose=['<div class="dynamsoft-dwt-dlg-header">','<div class="dynamsoft-dialog-close"></div>',"</div>"].join("");a.install._strDynamsoftWithoutClose=['<div style="height:40px;"></div>'].join("");a.install._strNonInstallDIV=['<div style="text-align:center;" id="',a.install._divDWTNonInstallContainerID,'"></div>'].join("");b.CloseDialog=function(){var e=a.install._dlgInstall;if(e){var d=a.all(".dynamsoft-dialog-close");a.each(d,function(f,g){a.removeEventListener(f,"click",DCP_DWT_OnClickCloseInstall)});if(e.open){e.close()}if(a.install._dlgFromImageEditor){if(a.one(".D_ImageUIEditor")[0]){var c=a.one(".D_ImageUIEditor")[0].parentNode;c.removeChild(e)}else{document.body.removeChild(e)}}else{document.body.removeChild(e)}a.install._dlgInstall=false}};b.ShowDialog=function(h,k,l,c,i){var f=a.install,o;if(!a.get("dynamsoft_waiting")){var d=document.createElement("div");d.className="dynamsoft-dialog-wrap";d.style.width="100%";o=['<div id="dynamsoft_waiting" style="border:0;position:relative;z-index:9999;background:transparent;margin:0 auto">','<iframe frameborder="0" marginheight="0" marginwidth="0" scrolling="no" src="javascript:\'\'"',' style="width:100%;height:100%;border:0;background:transparent;position:absolute;left:0;top:0;z-index:-1">',"</iframe>",'<div class="dynamsoft-dialog dynamsoft-dialog2" style="border:1px solid #CCCCCC;">','<div id="',f._divInstallBody,'"></div></div></div>'];d.innerHTML=o.join("");if(c){if(a.one(".D_ImageUIEditor")[0]){var e=a.one(".D_ImageUIEditor")[0].parentNode;e.appendChild(d)}else{document.body.appendChild(d)}}else{document.body.appendChild(d)}f._dlgFromImageEditor=c;f._dlgInstall=d;a.dialog.setup(f._dlgInstall)}if(l===false){return}var j=Dynamsoft.Lib.one(".dynamsoft-dialog");if(j&&j.getEL()){j[0].style.width=h+"px";if(k&&k>0){j[0].style.height=k+"px"}}if(c){a.get(f._divInstallBody).innerHTML=['<div class="dynamsoft-dwt-dialog-body">',l,"</div>"].join("")}else{var m=(i?f._strDynamsoftWithoutClose:f._strDynamsoftWithClose);a.get(f._divInstallBody).innerHTML=['<div class="dynamsoft-dwt-dialog-body">',m,l,"</div>"].join("")}var n=a.get("dynamsoft_waiting");n.style.width=h;if(f._dlgInstall.open){f._dlgInstall.close()}f._dlgInstall.showModal();var g=a.all(".dynamsoft-dialog-close");a.each(g,function(p,q){a.addEventListener(p,"click",DCP_DWT_OnClickCloseInstall)})};b.OnWebTwainPreExecute=function(){Dynamsoft.Lib.detect.OnWebTwainPreExecute(Dynamsoft.DWT.IfConfineMaskWithinTheViewer)};b.OnWebTwainPostExecute=function(){Dynamsoft.Lib.detect.OnWebTwainPostExecute()}})(Dynamsoft.Lib,Dynamsoft.DWT);var DCP_DWT_OnClickCloseInstall=function(e){var c=Dynamsoft.Lib,f=c.install._dlgInstall;Dynamsoft.DWT.CloseDialog();var b=c.get(c.install._divDWTNonInstallContainerID);if(b){b.parentNode.removeChild(b)}if(e&&c.isDOM(e)){c.show(e)}if(e&&c.isString(e)){c.show(e)}else{var a,d;d=Dynamsoft.DWT.Containers;if(d){for(a=0;a<d.length;a++){if(d[a].ContainerId){c.show(d[a].ContainerId)}}}d=Dynamsoft.DWT.DynamicContainers;if(d){for(a=0;a<d.length;a++){if(d[a].ContainerId){c.show(d[a].ContainerId)}}}d=null}if(c.install._divDWTemessageContainer!=""){c.show(c.install._divDWTemessageContainer)}};(function(b){var a=b.win;a.DCP_DWT_OnClickCloseInstall=DCP_DWT_OnClickCloseInstall;b.detect.showMask=function(){b.detect.bMaskShow=true;if(!Dynamsoft.DWT.ScanDirectly){if(b.isFunction(Dynamsoft.OnWebTwainPreExecuteCallback)){Dynamsoft.OnWebTwainPreExecuteCallback()}else{b.detect.OnWebTwainPreExecute(Dynamsoft.DWT.IfConfineMaskWithinTheViewer)}}};b.detect.OnWebTwainPreExecute=function(f){var e=f,c,d;if(Dynamsoft.DWT.Containers.length>0){d=Dynamsoft.Lib.get(Dynamsoft.DWT.Containers[0].ContainerId)}if(d){c=d.getBoundingClientRect();if(d.firstChild&&d.firstChild.getBoundingClientRect){c=d.firstChild.getBoundingClientRect()}}if(c==undefined||Dynamsoft.DWT.Containers.length>1||(Dynamsoft.DWT.Containers.length==1&&(c.width==0||c.height==0))){e=false}b.mask.bConfined=e;b.mask.container=d;b.showMask()};b.detect.hideMask=function(){b.detect.bMaskShow=false;if(!Dynamsoft.DWT.ScanDirectly){if(b.isFunction(Dynamsoft.OnWebTwainPostExecuteCallback)){Dynamsoft.OnWebTwainPostExecuteCallback()}else{b.detect.OnWebTwainPostExecute()}}};b.detect.OnWebTwainPostExecute=b.hideMask})(Dynamsoft.Lib);(function(a){a.install._dlgLicense=false;a._gb_xkz_dhk=function(){var c=a.install._dlgLicense;if(c){var b=a.one(".dynamsoft-dialog-close",c);if(b.getEL()){a.removeEventListener(b.getEL(),"click",a._gb_xkz_dhk)}if(c.open){c.close()}document.body.removeChild(c);a.install._dlgLicense=false}};a._zdgb_xkz_dhk=function(){var c=a.install._dlgLicense;if(c){var d=a.one(".dynamsoft-dialog-closeTimer",c);if(d.getEL()){var b=parseInt(d.getEL().style.width);b-=1;if(b<=0){a._gb_xkz_dhk()}else{d.getEL().style.width=b+"%";setTimeout(a._zdgb_xkz_dhk,100)}}}};a.ShowLicenseDialog=function(e,i){var n=a.install,h="dynamsoft-dialog-license",w="ds-dwt-ui-dlg-license-wrap",b=screen.width,l=true,m,s,j=0,t,g,x,u,r=true,c=(a.product.bActiveXEdition||a.product.bPluginEdition);if(i){m=i.width;s=i.height;if(i.seconds){j=i.seconds}if(i.bClose){t=i.bClose}if(i.bAutoClose){g=i.bAutoClose;t=true}if(i.bReadyClosed==false){l=false}}if(!m){m=b>600?600:(b-10)}else{if(m>(b-10)){m=b-10}}if(!s){s="100%"}if(a.one("."+h).length==0){var o=document.createElement("div"),k=document.createElement("div"),d=document.createElement("div");o.className=h;o.style.width="100%";o.style.position="absolute";k.className=w;k.style.margin="auto";k.style.backgroundColor="white";k.style.zIndex="9999";k.style.position="relative";k.style.border="0";if(c){var f=document.createElement("iframe");f.frameborder="0";f.marginheight="0";f.marginwidth="0";f.scrolling="no";f.style.border="0";f.style.backgroundColor="transparent";f.style.position="absolute";f.style.left=0;f.style.top=0;f.style.width="100%";f.style.height="100%";f.style.margin="auto";f.style.zIndex=-1;f.src='javascript:""';k.appendChild(f)}if(g){x=document.createElement("div");x.className="dynamsoft-dialog-close";k.insertBefore(x,k.firstChild);u=document.createElement("div");u.className="dynamsoft-dialog-closeTimer";u.style.width="100%";u.style.height="2px";u.style.marginTop="-2px";u.style.backgroundColor="#fe8e14";k.insertBefore(u,k.firstChild)}k.appendChild(d);d.innerHTML=e;o.appendChild(k);document.body.appendChild(o);n._dlgLicense=o;a.dialog.setup(n._dlgLicense)}else{r=false}var v=a.one("."+w);if(v&&v.getEL()){v[0].style.width=m+"px";if(a.isNumber(s)&&s>0){v[0].style.height=s+"px"}else{v[0].style.height="100%"}if(!r){a.each(v[0].childNodes,function(p){if((p.tagName=="DIV")&&(p.className!="dynamsoft-dialog-close")&&(p.className!="dynamsoft-dialog-closeTimer")){p.innerHTML=e;return false}})}}if(c){var q=a.one(".dynamsoft-dialog2");if(q&&q.getEL()){q.getEL().style.border="1px solid #999"}}if(n._dlgLicense.open){n._dlgLicense.close()}n._dlgLicense.showModal();n._dlgLicense.bReadyClosed=l;if(t){x=a.one(".dynamsoft-dialog-close",n._dlgLicense);if(x.getEL()){a.addEventListener(x.getEL(),"click",a._gb_xkz_dhk);if(g&&j>0){setTimeout(a._zdgb_xkz_dhk,100)}}}};a.openLoadingMsg=function(){if(!a.product.bHTML5Edition){return}var c=Dynamsoft.DWT.UseLocalService;if(a.isUndefined(c)&&!a.env.bMobile||c==true){return}var f,e,g;if(!a.dlgLoading){var h=a.loaderBarClassName+"-noserver",d=a.loaderBarClassName+"-noserver-parent";g=[];g.push('<dialog class="dynamsoft-loadingMsg" closed="closed" style="top:30%">');g.push(['<div class="',d,'">'].join(""));g.push(['<div class="',h,'">'].join(""));g.push(['<img src="',a.loaderBarSource,'" />'].join(""));g.push('</div><h3 class="dynamsoft-loadingMsg-msg"> </h3>');g.push('<p class="dynamsoft-loadingMsg-desc"> </p>');g.push("</div></dialog>");e=a.one(".dynamsoft-loadingMsg");if(e&&e.getEL()){e.remove()}var b=a.parseHTML(g.join(""));if(b&&b.length>0){document.body.appendChild(b[0])}e=a.one(".dynamsoft-loadingMsg");if(e&&e.getEL()){a.dlgLoading=e[0];a.dialog.setup(a.dlgLoading)}}a.dlgLoading.showModal();a.dlgLoadingShowStatus=true};a.showLoadingMsg=function(h,g,f){if(a.dlgLoadingShowStatus==false){return}var b=a.one(".dynamsoft-loadingMsg"),d=a.one(".dynamsoft-loadingMsg-msg"),e=a.one(".dynamsoft-loadingMsg-desc");if(d&&d.getEL()){d.html(g)}if(e&&e.getEL()){if(a.env.bMobile){var c=e.getEL();c.style.fontSize="1.4em"}e.html(f)}};a.closeLoadingMsg=function(b){a.log("closeLoadingMsg:"+b);if(a.dlgLoadingShowStatus==true){if(a.dlgLoading){a.dlgLoading.close()}a.dlgLoadingShowStatus=false}}})(Dynamsoft.Lib);(function(b){b.domReady(function(){var e=document.createElement("style"),d=["dialog{position:absolute;left:0;right:0;top:30%;margin:auto;padding:6px;color:black;width:-moz-fit-content;display:none;-webkit-box-sizing:content-box;box-sizing:content-box}dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-dwt-dialogProgress{width:300px;background:#FFF}.dynamsoft-finalMessage{margin:0 0 15px 0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{position:absolute;left:0;right:0;top:30%;width:240px;height:240px;margin:auto;color:black;display:none;box-sizing:content-box}dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{background:#FFF;height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 35px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");e.type="text/css";try{e.appendChild(document.createTextNode(d))}catch(c){e.styleSheet.cssText=d}document.body.appendChild(e)});var a=true;b._funsAfterConfigLoaded=[];b._safePromptCustomMsg=function(d){if(!b.isUndefined(Dynamsoft.DWT.ProductKey)){if(a){var c={},e=Dynamsoft.DWT.CustomizableDisplayInfo;b.mix(c,Dynamsoft.DWT.defaultEnv.CustomizableDisplayInfo);if(e){if(e.loaderBarClassName){c.loaderBarClassName=e.loaderBarClassName}if(e.loaderBarSource){c.loaderBarSource=e.loaderBarSource}if(e.loaderBarWidth){c.loaderBarWidth=e.loaderBarWidth}if(e.loaderBarHeight){c.loaderBarHeight=e.loaderBarHeight}if(e.errorMessages){b.mix(c.errorMessages,e.errorMessages)}if(e.generalMessages){b.mix(c.generalMessages,e.generalMessages)}if(e.customProgressText){b.mix(c.customProgressText,e.customProgressText)}if(e.buttons){if(e.buttons.titles){b.mix(c.buttons.titles,e.buttons.titles)}if(e.buttons.bShowAllButtons){b.mix(c.buttons.bShowAllButtons,e.buttons.bShowAllButtons)}if(e.buttons.visibility){b.mix(c.buttons.visibility,e.buttons.visibility)}}if(e.dialogText){b.mix(c.dialogText,e.dialogText)}}Dynamsoft.DWT.CustomizableDisplayInfo=c;a=false}if(d){d()}}else{if(d){b._funsAfterConfigLoaded.push(d)}}}})(Dynamsoft.Lib);Dynamsoft.Ready(function(b){a.Orientation={Horizontal:0,Vertical:1};a.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1};a.CreationType={Replace:0,AppendChild:1};a.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24};function a(g,d){var h=this,e=0,f;if(b.isString(g)){f=document.getElementById(g)}else{f=g}h.isLoaded=false;h.displayType=0;h.progress=0;h.progressPosition=0;h.borderWidth={left:0,right:0,top:0,bottom:0};h.orientation=(d.orientation||a.Orientation.Horizontal);h.direction=(d.direction||a.Direction.LeftToRight);h.creationType=(d.creationType||a.CreationType.Replace);h.value=0;h.initialValue=(d.value||0);h.minValue=(d.minValue||0);h.maxValue=(d.maxValue||100);h.showLabel=(typeof d.showLabel=="undefined"?true:d.showLabel);h.labelText=(d.labelText||"");h.width=(d.width||280);h.height=(d.height||20);h.borderRadius=(d.borderRadius||10);if(h.orientation==a.Orientation.Horizontal&&h.borderRadius>h.height/2){h.borderRadius=Math.round(h.height/2)}if(h.orientation==a.Orientation.Vertical&&h.borderRadius>h.width/2){h.borderRadius=Math.round(h.width/2)}h.backColor=(d.backColor||"");h.color=(d.color||"#50a8e1");h.animationStyle=0;h.animationInterval=(d.animationInterval||100);var c=["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"];h.extraClassName={};for(e=0;e<c.length;e++){if(!d.extraClassName){h.extraClassName[c[e]]=""}else{if(typeof d.extraClassName=="string"){h.extraClassName[c[e]]=d.extraClassName}else{h.extraClassName[c[e]]=(d.extraClassName[c[e]]||"")}}}h.onLoad=(d.onLoad||null);h.onValueChanged=(d.onValueChanged||null);h.onAnimate=(d.onAnimate||null);if(h.creationType==a.CreationType.Replace){h.parentElement=f}else{h.parentElement=document.createElement("DIV");f.appendChild(h.parentElement)}h.finishLoading()}a.prototype.finishLoading=function(){var h=this,e="",g;h.wrapperElement=null;h.backgroundElement=null;h.valueElement=null;h.leftElement=null;h.middleElement=null;h.rightElement=null;h.backgroundElement=document.createElement("DIV");h.backgroundElement.className="progressbar_background"+(h.extraClassName.background?" ":"")+h.extraClassName.background;h.backgroundElement.style.cssText=h.backgroundElement.style.cssText+a._createBorderRadiusCss(h.borderRadius);h.parentElement.appendChild(h.backgroundElement);var d=["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"];var f=0,c="";for(f=0;f<d.length;f++){c=a._elementCurrentStyle(h.backgroundElement,d[f]);if(c||typeof c=="string"){break}}if(c!=""&&a._parseInt(c)!=h.borderRadius){h.borderRadius=a._parseInt(c)}if((h.orientation==a.Orientation.Horizontal)||(h.orientation==a.Orientation.Vertical)){h.displayType=0}else{h.displayType=1}h.parentElement.className=(h.parentElement.className!=""?" ":"")+"progressbar_parent dynamsoft-progressBar"+(h.extraClassName.parent?" ":"")+h.extraClassName.parent;if(h.displayType==0){g=h.wrapperElement=document.createElement("DIV");g.style.border="1px solid #A0A0A0";g.style.cssFloat="left";g.style.display="inline-block";g.style.width=h.width+"px";g.style.height=h.height+"px";g.style.left="0px";g.style.top=(-h.height)+"px";g.style.backgroundColor=h.backColor;g.style.backgroundRepeat="no-repeat";g.style.position="relative";g.style.cssText=g.style.cssText+a._createBorderRadiusCss(h.borderRadius);h.parentElement.appendChild(g);h.borderWidth={left:a._parseInt(a._elementCurrentStyle(g,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(g,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(g,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(g,"border-bottom-width"))}}else{if(h.displayType==1){if(h.orientation==a.Orientation.Horizontal){if(h.borderRadius>h.width/2){h.borderRadius=h.width}}else{if(h.orientation==a.Orientation.Vertical){if(h.borderRadius>h.height/2){h.borderRadius=h.height}}}h.valueElement=document.createElement("DIV");h.valueElement.className="";h.leftElement=document.createElement("DIV");h.middleElement=document.createElement("DIV");h.rightElement=document.createElement("DIV");h.leftElement.style.border="1px solid #A0A0A0";h.leftElement.style.cssFloat="left";h.leftElement.style.display="inline-block";h.leftElement.style.backgroundColor=h.backColor;h.leftElement.style.backgroundRepeat="no-repeat";h.leftElement.style.position="relative";h.rightElement.style.border="1px solid #A0A0A0";h.rightElement.style.cssFloat="left";h.rightElement.style.display="inline-block";h.rightElement.style.backgroundColor=h.backColor;h.rightElement.style.backgroundRepeat="no-repeat";h.rightElement.style.position="relative";h.middleElement.style.border="1px solid #A0A0A0";h.middleElement.style.cssFloat="left";h.middleElement.style.display="inline-block";h.middleElement.style.overflow="hidden";h.middleElement.style.position="relative";h.valueElement.style.backgroundColor=h.backColor;h.valueElement.style.position="relative";if(h.orientation==a.Orientation.Horizontal){h.leftElement.style.width=h.borderRadius+"px";h.leftElement.style.height=h.height+"px";h.leftElement.style.top=-h.height+"px";h.leftElement.style.left="0px";h.leftElement.style.borderRight="none";h.leftElement.style.cssText=h.leftElement.style.cssText+a._createBorderRadiusCss(h.borderRadius,0,0,h.borderRadius);h.rightElement.style.width=h.borderRadius+"px";h.rightElement.style.height=h.height+"px";h.rightElement.style.top=-h.height+"px";h.rightElement.style.borderLeft="none";h.rightElement.style.cssText=h.rightElement.style.cssText+a._createBorderRadiusCss(0,h.borderRadius,h.borderRadius,0);h.middleElement.style.width=(h.width-(h.borderRadius*2))+"px";h.middleElement.style.height=h.height+"px";h.middleElement.style.top=-h.height+"px";h.middleElement.style.borderLeft="none";h.middleElement.style.borderRight="none";h.valueElement.style.width="0px";h.valueElement.style.height=h.height+"px"}else{if(h.orientation==a.Orientation.Vertical){h.leftElement.style.width=h.width+"px";h.leftElement.style.height=h.borderRadius+"px";h.leftElement.style.top=(-h.height)+"px";h.leftElement.style.left="0px";h.leftElement.style.borderBottom="none";h.leftElement.style.cssText=h.leftElement.style.cssText+a._createBorderRadiusCss(h.borderRadius,h.borderRadius,0,0);h.rightElement.style.width=h.width+"px";h.rightElement.style.height=h.borderRadius+"px";h.rightElement.style.top=(-h.height)+"px";h.rightElement.style.left="0px";h.rightElement.style.borderTop="none";h.rightElement.style.cssText=h.rightElement.style.cssText+a._createBorderRadiusCss(0,0,h.borderRadius,h.borderRadius);h.middleElement.style.width=h.width+"px";h.middleElement.style.height=h.height-h.borderRadius*2+"px";h.middleElement.style.top=(-h.height)+"px";h.middleElement.style.left="0px";h.middleElement.style.borderTop="none";h.middleElement.style.borderBottom="none";h.valueElement.style.width=h.width+"px";h.valueElement.style.height="0px"}}h.middleElement.appendChild(h.valueElement);h.parentElement.appendChild(h.leftElement);h.parentElement.appendChild(h.middleElement);h.parentElement.appendChild(h.rightElement);if(h.orientation==a.Orientation.Horizontal){h.borderWidth={left:a._parseInt(a._elementCurrentStyle(h.leftElement,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(h.rightElement,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-bottom-width"))}}else{if(h.orientation==a.Orientation.Vertical){h.borderWidth={left:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(h.leftElement,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(h.rightElement,"border-bottom-width"))}}}}}h.parentElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px";h.parentElement.style.height=(h.height+h.borderWidth.top+h.borderWidth.bottom)+"px";h.backgroundElement.style.cssFloat="left";h.backgroundElement.style.display="inline-block";h.backgroundElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px";h.backgroundElement.style.height=h.height+"px";h.backgroundElement.style.backgroundColor="#FFFFFF";h.backgroundElement.style.position="relative";if(h.displayType==0){h.backgroundElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px"}h.backgroundElement.style.top=h.borderWidth.top+"px";h.markerElement=document.createElement("DIV");h.markerElement.style.display="inline-block";h.markerElement.style.zoom="1.0";h.markerElement.style.width=h.width+"px";h.markerElement.style.height=h.height+"px";h.markerElement.style.top=(-h.height*2-h.borderWidth.top)+"px";h.markerElement.style.left=h.borderWidth.left+"px";h.markerElement.style.backgroundColor=h.color;h.markerElement.style.lineHeight=(h.height)+"px";h.markerElement.style.position="relative";h.parentElement.appendChild(h.markerElement);h.isLoaded=true;h.setValue(h.initialValue);if(h.onLoad!=null){h.onLoad()}};a.prototype.setValue=function(e){var i=this;if(e!==null&&e<i.minValue){e=i.minValue}if(e!==null&&e>i.maxValue){e=i.maxValue}if(e===null){}else{i.value=e}if(i.isLoaded){var d=0,h;if(i.orientation==a.Orientation.Horizontal){d=(i.value/i.maxValue)*i.width;i.progressPosition=d;if(i.displayType==0){if(i.direction==a.Direction.LeftToRight){}else{}}else{if(i.displayType==1){if(i.direction==a.Direction.LeftToRight){if(d<=i.borderRadius){i.valueElement.style.width="0px"}else{if(d>=i.width-i.borderRadius){i.valueElement.style.width=i.middleElement.style.width}else{i.valueElement.style.width=(d-i.borderRadius)+"px"}}}else{if(d<=i.borderRadius){i.valueElement.style.width="0px"}else{if(d>=i.width-i.borderRadius){i.valueElement.style.left="0px";i.valueElement.style.width=i.middleElement.style.width}else{i.valueElement.style.left=(i.width-d-i.borderRadius)+"px";i.valueElement.style.width=(d-i.borderRadius)+"px"}}}}}if(d>0){if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.width=d+"px"}else{i.markerElement.style.width=i.width+"px"}i.markerElement.style.visibility="visible"}else{i.markerElement.style.width=i.width+"px";if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.visibility="hidden"}}if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){if(i.direction==a.Direction.LeftToRight){i.markerElement.style.left=i.borderWidth.left+"px"}else{i.markerElement.style.left=(i.width-d+i.borderWidth.left)+"px"}}else{i.markerElement.style.left=i.borderWidth.left+"px"}var l=(-i.height*2-i.height-i.borderWidth.top);var n=(-i.height*2-i.borderWidth.top);if(d==0||i.width==d){i.markerElement.style.top=n+"px";i.markerElement.style.height=i.height+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}else{if(d<i.borderRadius){var m=i.height-2.25*(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-d,2)));var j=n+(i.height/2)-(m/2);var c=l-2*(n-j);i.markerElement.style.top=j+"px";i.markerElement.style.height=m+"px";if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0)}}else{if(i.width-d<i.borderRadius){h=((i.borderRadius-(i.width-d))*2+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.width-d),2))))/3;if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,h,h,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(h,i.borderRadius,i.borderRadius,h)}}else{i.markerElement.style.top=n+"px";i.markerElement.style.height=i.height+"px";if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0)}}}}}else{if(i.orientation==a.Orientation.Vertical){d=(i.value/i.maxValue)*i.height;i.progressPosition=d;if(i.displayType==0){if(i.direction==a.Direction.TopToBottom){}else{}}else{if(i.displayType==1){if(i.direction==a.Direction.TopToBottom){if(d<=i.borderRadius){i.valueElement.style.height="0px"}else{if(d>=i.height-i.borderRadius){i.valueElement.style.height=i.middleElement.style.height}else{i.valueElement.style.height=(d-i.borderRadius)+"px"}}}else{if(d<=i.borderRadius){i.valueElement.style.height="0px"}else{if(d>=i.height-i.borderRadius){i.valueElement.style.top="0px";i.valueElement.style.height=i.middleElement.style.height}else{i.valueElement.style.top=(i.height-d-i.borderRadius)+"px";i.valueElement.style.height=(d+i.borderRadius*2)+"px"}}}}}if(d>0){if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.height=d+"px"}else{i.markerElement.style.height=i.height+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}i.markerElement.style.visibility="visible"}else{i.markerElement.style.height=0+"px";if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.visibility="hidden"}}var g=i.borderWidth.left,k=i.borderWidth.left;if(d==0||i.height==d){i.markerElement.style.left=k+"px";i.markerElement.style.width=i.width+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}else{if(d<i.borderRadius){var f=2.5*d;if(f>i.width){f=i.width}var o=k+(i.width/2)-(f/2);i.markerElement.style.left=o+"px";i.markerElement.style.width=f+"px";if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0)}}else{if(i.height-d<i.borderRadius){h=((i.borderRadius-(i.height-d))*2+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.height-d),2))))/3;if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(h,h,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,h,h)}}else{i.markerElement.style.left=k+"px";i.markerElement.style.width=i.width+"px";if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0)}}}}if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){if(i.direction==a.Direction.TopToBottom){i.markerElement.style.top=(-i.height*2-i.borderWidth.top)+"px"}else{i.markerElement.style.top=(-i.height-d-i.borderWidth.top)+"px"}}else{i.markerElement.style.top=(-i.height*2-i.borderWidth.top)+"px"}}}i.progress=(i.value/i.maxValue)}if(i.onValueChanged!=null){i.onValueChanged()}};a._elementCurrentStyle=function(f,e){if(f.currentStyle){var d=0,c="",g=false;for(d=0;d<e.length;d++){if(e[d].toString()!="-"){c+=(g?e[d].toString().toUpperCase():e[d].toString());g=false}else{g=true}}e=c;return f.currentStyle[e]}else{return getComputedStyle(f,null).getPropertyValue(e)}};a._parseInt=function(d){var c=parseInt(d);if(isNaN(c)){c=0}return c};a._createBorderRadiusCss=function(c,e,d,f){if(c!=null&&e==null&&d==null&&f==null){return"; -moz-border-radius: "+c+"px; -ms-border-radius: "+c+"px; -o-border-radius: "+c+"px; -webkit-border-radius: "+c+"px; -khtml-border-radius: "+c+"px; border-radius: "+c+"px;"}else{c=(c||0);e=(e||0);d=(d||0);f=(f||0);return"; -moz-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -ms-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -o-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -webkit-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -khtml-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; border-radius: "+c+"px "+e+"px "+d+"px "+f+"px;"}};b.ProgressBar=a});(function(c){var d=[Dynamsoft.DWT],b=0;for(;b<1;b++){var a=d[b];a.EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16};a.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2};a.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16};a.EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446};a.EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6};a.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2};a.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16};a.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773};a.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5};a.EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5,IT_MULTIPAGE_PDF:7,IT_MULTIPAGE_TIF:8,IT_J2K:14};a.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX4:2,PDF_LZW:3,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7};a.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4};a.EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12};a.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6};a.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2};a.EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113};a.EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54};a.EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3};a.EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1};a.EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7};a.EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2};a.EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3};a.EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1};a.EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8};a.EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4};a.EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1};a.EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4};a.EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1};a.EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6};a.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2};a.EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3};a.EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6};a.EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4};a.EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1};a.EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1};a.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3};a.EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2};a.EnumDWT_PlatformType={enumUnknown:-1,enumWindow:0,enumMac:1,enumLinux:2,enumEmbed:3,enumChromeOS:4};a.EnumDWT_UploadDataFormat={Binary:0,Base64:1};a.EnumDWT_MouseShape={Default:0,Hand:1,Crosshair:2,Zoom:3,NWResize:4,EResize:5,NResize:6,Resize:7,Move:8};a.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8};a.EnumDWT_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5};a.EnumDWT_Driver={TWAIN:0,ICA:3,SANE:3,TWAIN_AND_ICA:4,TWAIN_AND_TWAIN64:4,TWAIN64:5};a.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14}}})(window);Dynamsoft.DWT.EnumDWT_Error={ModuleNotExists:-2371};(function(){function a(b){if(Dynamsoft.Lib.isString(b)){return b}var c;if("errorMessage" in b){c=b.errorMessage}if("message" in b){c=b.message}if(!Dynamsoft.Lib.isString(c)){c=""}if("errorCode" in b&&c.indexOf("(")==-1){c+="("+b.errorCode+")"}if("code" in b&&c.indexOf("(")==-1){c+="("+b.code+")"}return c}Dynamsoft.Lib.Errors={OutOfRange:function(b){b._errorCode=-1010;b._errorString="Data parameter out of supported range."},InvalidIndex:function(b){b._errorCode=-1033;b._errorString="Invalid index."},InvalidValue:function(b){b._errorCode=-1034;b._errorString="Invalid value."},NoImage:function(b){b._errorCode=-1035;b._errorString="There is no image."},UnrecognizedExt:function(b){b._errorCode=-1110;b._errorString="Unrecognized file extension."},SourceHasNothingToCapture:function(b){b._errorCode=-1029;b._errorString="Source has nothing to capture."},bImageOnlyError_NotPurelyPDF:function(b){return b==-1416},MustUpgradeService:function(b){b._errorCode=-2207;b._errorString="The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website."},Server_Restarted:function(b){b._errorCode=-2208;b._errorString="The connection with the local Dynamsoft Service encountered a problem and has been reset."},HTML5NotSupport:function(b){b._errorCode=-2209;b._errorString="The HTML5 edition does not support this method or property."},CannotCallUIMethodWhenNotBindDefaultViewer:function(b){b._errorCode=-2210;b._errorString="You cannot call this method on this WebTwain instance because it does not use the default viewer."},HttpServerCannotEmpty:function(b){b._errorCode=-2300;b._errorString="Http upload error: the HTTP Server name/ip cannot be empty."},NetworkError:function(b){b._errorCode=-2301;b._errorString="Network error."},InvalidResultFormat:function(b){b._errorCode=-2302;b._errorString="The result format is invalid."},UploadError:function(e,d,c,b){if(d){e._errorCode=-2303;e._errorString="Upload cancelled."}else{e._errorCode=-2003;if(b&&b>0){e._errorString="HTTP process error: "+b+"."}else{e._errorString="HTTP process error."}if(c){e._errorString+=" "+c}}},HttpDownloadUrlError:function(b){b._errorCode=-2304;b._errorString="Http download error: the url is invalid."},HttpDownloadError:function(e,d,c,b){if(d){e._errorCode=-2305;e._errorString="User cancelled the operation."}else{e._errorCode=-2003;if(b&&b>0){e._errorString="HTTP process error: "+b+"."}else{e._errorString="HTTP process error."}if(c){e._errorString+=" "+c}}},UploadFileCannotEmpty:function(b){b._errorCode=-2306;b._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(b){b._errorCode=-2307;b._errorString="The width or height you entered is invalid."},Server_Invalid:function(b){if(b._errorCode==0){b._errorCode=-2308;b._errorString="The local Dynamsoft Service has been stopped."}},InvalidLocalFilename:function(c,b){c._errorCode=-2309;c._errorString="The LocalFile is empty in the name "+b+" Function."},BarCode_InvalidIndex:function(c,b){c._errorCode=-2310;c._errorString="The index is out of range."},BarCode_InvalidRemoteFilename:function(b){b._errorCode=-2311;b._errorString="The RemoteFile field is empty in the Barcode Download Function."},ImageFileLengthCannotZero:function(b){b._errorCode=-2312;b._errorString="The file length is empty."},UploadExceededMaxSize:function(b){b._errorCode=-2313;b._errorString="The size of the images you are about to upload has exceeded the limit."},ParameterCannotEmpty:function(b){b._errorCode=-2314;b._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(c,b){c._errorCode=-2315;c._errorString="The index is out of range."},Webcam_InvalidRemoteFilename:function(b){b._errorCode=-2316;b._errorString="The RemoteFile field is empty in the Webcam Download Function."},Pdf_InvalidRemoteFilename:function(b){b._errorCode=-2317;b._errorString="The RemoteFile field is empty in the Pdf Download Function."},InvalidDestination:function(b){b._errorCode=-2318;b._errorString="Invalid destination file."},InvalidSourceFile:function(b){b._errorCode=-2319;b._errorString="Invalid source file."},InvalidFile:function(b){b._errorCode=-2320;b._errorString="Invalid file."},hasLicenseError:function(b){return(b._errorCode>=-2348&&b._errorCode<=-2325)},OCR_InvalidIndex:function(c,b){c._errorCode=-2321;c._errorString="The index is out of range."},OCR_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2322;b._errorString="The left or top or right or bottom you entered is invalid."},OCR_InvalidOutputFormat:function(b){b._errorCode=-2323;b._errorString="The OCR output format is not supported."},OCR_InvalidPageSetMode:function(b){b._errorCode=-2324;b._errorString="The OCR page set mode is not supported."},LicenseEmptyOrInvalid:function(b){b._errorCode=-2325;if(Dynamsoft.Lib.License.isLTS()){b._errorString="The license is invalid.";Dynamsoft.Lib.Errors.SetLTSException(b)}else{b._errorString="The current product key is empty or invalid."}},LicenseExpired:function(c,b){c._errorCode=-2326;var d="";if(Dynamsoft.Lib.License.isLTS()){Dynamsoft.DWT.lcexp().then(function(){c._errorString=Dynamsoft.DWT.licenseException.message})}else{if(b&&b!=""){if(b.indexOf("on")==-1){d=" on "+b}}c._errorString="The current product key has expired"+d+", please contact the site administrator."}},LicenseNoChrome:function(b){b._errorCode=-2327;b._errorString="The current product key does not support Chrome, please contact the site administrator."},LicenseNoFirefox:function(b){b._errorCode=-2328;b._errorString="The current product key does not support Firefox, please contact the site administrator."},LicenseNoIE:function(b){b._errorCode=-2329;b._errorString="The current product key does not support IE, please contact the site administrator."},LicenseNoEdge:function(b){b._errorCode=-2330;b._errorString="The current product key does not support Edge, please contact the site administrator."},LicenseNoSafari:function(b){b._errorCode=-2392;b._errorString="The current product key does not support Safari, please contact the site administrator."},LicenseNoCore:function(b){b._errorCode=-2333;if(Dynamsoft.Lib.License.isLTS()){b._errorString="The license for the module twain is not found or has expired.";Dynamsoft.Lib.Errors.SetLTSException(b)}else{b._errorString="The current product key is missing the core license, please contact the site administrator."}},LicenseNoWebcam:function(b){b._errorCode=-2338;if(Dynamsoft.Lib.License.isLTS()){b._errorString="The license for the module direct show is not found or has expired.";Dynamsoft.Lib.Errors.SetLTSException(b)}else{b._errorString="The current product key does not support Webcam, please contact the site administrator."}},LicenseNoPDF:function(b){b._errorCode=-2339;if(Dynamsoft.Lib.License.isLTS()){b._errorString="The license for the module pdf rasterizer is not found or has expired.";Dynamsoft.Lib.Errors.SetLTSException(b)}else{b._errorString="The current product key does not support pdf rasterizer, please contact the site administrator."}},LicenseNoOCR:function(b){b._errorCode=-2340;if(Dynamsoft.Lib.License.isLTS()){b._errorString="The license for the module ocr is not found or has expired.";Dynamsoft.Lib.Errors.SetLTSException(b)}else{b._errorString="The current product key does not support OCR, please contact the site administrator."}},LicenseNoOCRPro:function(b){b._errorCode=-2341;if(Dynamsoft.Lib.License.isLTS()){b._errorString="The license for the module ocr pro is not found or has expired.";Dynamsoft.Lib.Errors.SetLTSException(b)}else{b._errorString="The current product key does not support OCR pro, please contact the site administrator."}},LicenseBadDomain:function(b){b._errorCode=-2342;b._errorString="The domain of your current site does not match the domain bound in the current product key, please contact the site administrator."},LicenseNotSupportBorwser:function(b){b._errorCode=-2343;b._errorString="The current product key does not support your browser, please contact the site administrator."},LicenseNotSupportWindows:function(b){b._errorCode=-2344;b._errorString="The current product key does not support Windows OS, please contact the site administrator."},LicenseNotSupportMAC:function(b){b._errorCode=-2345;b._errorString="The current product key does not support MAC OS, please contact the site administrator."},LicenseNotSupportLinux:function(b){b._errorCode=-2346;b._errorString="The current product key does not support Linux OS, please contact the site administrator."},LicenseNotSupportOS:function(b){b._errorCode=-2347;b._errorString="The current product key does not support your OS, please contact the site administrator."},LicenseLower:function(b){b._errorCode=-2348;b._errorString="The current product key is invalid because it's generated with the licenses of a different major version."},BarcodeLicenseEmpty:function(b){b._errorCode=-2349;b._errorString="The current product key does not include a license for reading barcode, please contact the site administrator."},IndicesCannotEmpty:function(b){b._errorCode=-2350;b._errorString="The indices cannot be empty."},UploadIndexMoreThanOne:function(b){b._errorCode=-2351;b._errorString="You cannot upload more than one image when the format is BMP, JPG or PNG"},IndicesOutOfRange:function(b){b._errorCode=-2352;b._errorString="The indices are out of range."},HttpHeaderNotAllowed:function(b){b._errorCode=-2353;b._errorString="The header name being used is a protected keyword and is not allowed."},HttpHeaderIsEmpty:function(b){b._errorCode=-2354;b._errorString="The header name cannot be empty."},HttpHeaderIsNull:function(b){b._errorCode=-2355;b._errorString="The header name cannot be null."},HttpHeaderIsUndefined:function(b){b._errorCode=-2356;b._errorString="The header name cannot be undefined."},HttpHeaderIsInvalid:function(b){b._errorCode=-2357;b._errorString="The header name you entered is invalid."},IndicesNotArray:function(b){b._errorCode=-2358;b._errorString="The type of the parameter indices must be an Array."},IndexOutOfRange:function(b){b._errorCode=-2359;b._errorString="The index is out of range."},IndexNullOrUndefined:function(b){b._errorCode=-2360;b._errorString="The index is null or undefined."},ConvertBase64IndexMoreThanOne:function(b){b._errorCode=-2361;b._errorString="You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."},InvalidImageType:function(b){b._errorCode=-2362;b._errorString="The image type is not supported."},InvalidDataFormat:function(b){b._errorCode=-2363;b._errorString="The data format is not supported."},InvalidUploadInSegments:function(b){b._errorCode=-2364;b._errorString="Please use a Boolean value for the parameter bUploadInSegments."},InvalidUrl:function(b){b._errorCode=-2365;b._errorString="The url is invalid."},ConvertBase64Failed:function(b){b._errorCode=-2366;b._errorString="Converting images to a base64 string failed."},InvalidSegmentUploadThreshold:function(b){b._errorCode=-2367;b._errorString="Invalid value for the parameter segmentUploadThreshold."},InvalidModuleSize:function(b){b._errorCode=-2368;b._errorString="Invalid value for the parameter moduleSize."},LicenseNotSupportWasm:function(b){b._errorCode=-2369;b._errorString="The current product key does not support Wasm, please contact the site administrator."},LicenseNotSupportPdfRWasm:function(b){b._errorCode=-2370;if(Dynamsoft.Lib.License.isLTS()){b._errorString="The license for the module pdf rasterizer is not found or has expired.";Dynamsoft.Lib.Errors.SetLTSException(b)}else{b._errorString="The current product key does not support Pdf Rasterizer Wasm, please contact the site administrator."}},WebTwainModuleNotExist:function(b){b._errorCode=Dynamsoft.DWT.EnumDWT_Error.ModuleNotExists;b._errorString="Dynamic Web TWAIN scanner module is not installed and it is also missing on the server, please contact the site administrator."},ConvertBinaryIndexMoreThanOne:function(b){b._errorCode=-2372;b._errorString="You cannot convert more than one image to binary when the format is BMP, JPG or PNG."},Overlay_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2375;b._errorString="The left or top or right or bottom you entered is invalid."},GenerateURL_InvalidRetFromServer:function(b){b._errorCode=-2376;b._errorString="The generate url failed."},ImageCaptureDriverTypeError:function(b){b._errorCode=-2377;b._errorString="Failed to set Image Capture Driver Type."},InvalidTiffTagError:function(b){b._errorCode=-2378;b._errorString="Invalid value for the tiff tag code."},OCR_InvalidRemoteFilename:function(b){b._errorCode=-2379;b._errorString="The RemoteFile field is empty in the OCR Download Function."},Uploader_ModuleError:function(b){b._errorCode=-2380;b._errorString="Please make sure the Uploader Module has been installed."},ScanUploader_InvalidScanSetup:function(b){b._errorCode=-2381;b._errorString="scanSetup is invalid."},ScanUploader_InvalidTransferMode:function(b){b._errorCode=-2382;b._errorString="Scanner setup error: Invalid Transfer Mode."},ScanUploader_InvalidFileXfer:function(b){b._errorCode=-2383;b._errorString="Scanner setup error: fileXfer is invalid."},ScanUploader_InvalidFileXferFilename:function(b){b._errorCode=-2384;b._errorString="Scanner setup error: Invalid fileName in fileXfer."},ScanUploader_InvalidFileXferFileFormat:function(b){b._errorCode=-2385;b._errorString="Scanner setup error: Invalid fileFormat in fileXfer."},ScanUploader_InvalidHttpParams:function(b){b._errorCode=-2386;b._errorString="Output setup error: Invalid httpParams in outputSetup."},ScanUploader_InvalidHttpType:function(b){b._errorCode=-2387;b._errorString="Output setup error: Invalid type in outputSetup."},ScanUploader_InvalidHttpUrl:function(b){b._errorCode=-2388;b._errorString="Output setup error: Invalid url in outputSetup.httpParams."},ScanUploader_InvalidHttpFilename:function(b){b._errorCode=-2389;b._errorString="Output setup error: Invalid fileName in outputSetup.httpParams."},ScanUploader_InvalidOutputFormat:function(b){b._errorCode=-2390;b._errorString="Output setup error: Invalid format in outputSetup."},InvalidImageID:function(b){b._errorCode=-1034;b._errorString="Invalid image ID."},InvalidEventName:function(b){b._errorCode=-2391;b._errorString="Invalid event name."},ConvertBlobIsEmpty:function(b){b._errorCode=-2393;b._errorString="Failed to convert the data to blob."},InvalidTagName:function(b){b._errorCode=-2394;b._errorString="Invalid tag name."},WebTwainModuleDownloadFailure:function(b){b._errorCode=-2395;b._errorString="The module for Dynamic Web TWAIN has failed to download."},LicenseIsFuture:function(c,b){c._errorCode=-2396;c._errorString="The current product key is invalid, please contact the site administrator."},MobileNotSupport:function(c,b){c._errorCode=-2400;c._errorString=b+" doesn't work under current settings."},LoadImageFailed:function(c,b){c._errorCode=-2401;c._errorString="Failed to load image: "+a(b)},RotateFailed:function(c,b){c._errorCode=-2402;c._errorString="Failed to rotate image: "+a(b)},FlipFailed:function(c,b){c._errorCode=-2403;c._errorString="Failed to flip image: "+a(b)},MirrorFailed:function(c,b){c._errorCode=-2404;c._errorString="Failed to mirror image: "+a(b)},EraseFailed:function(c,b){c._errorCode=-2405;c._errorString="Failed to erase image: "+a(b)},InvertFailed:function(c,b){c._errorCode=-2406;c._errorString="Failed to invert image: "+a(b)},SaveImageFailed:function(c,b){c._errorCode=-2407;c._errorString="Failed to save image: "+a(b)},ChangeImageSizeFailed:function(c,b){c._errorCode=-2408;c._errorString="Failed to change image size: "+a(b)},CropFailed:function(c,b){c._errorCode=-2409;c._errorString="Failed to crop image: "+a(b)},SkewAngleFailed:function(c,b){c._errorCode=-2410;c._errorString="Failed to skew angle: "+a(b)},ConvertToGrayScaleFailed:function(c,b){c._errorCode=-2411;c._errorString="Failed to convert to gray scale: "+a(b)},ConvertToBWScaleFailed:function(c,b){c._errorCode=-2412;c._errorString="Failed to convert to black and white scale: "+a(b)},SetDPIFailed:function(c,b){c._errorCode=-2413;c._errorString="Failed to set dpi: "+a(b)},SetImageWidthFailed:function(c,b){c._errorCode=-2414;c._errorString="Failed to set image width: "+a(b)},GetLicenseInfoFailed:function(c,b){c._errorCode=-2415;c._errorString="Failed to get license info: "+a(b)},InvalidParameter:function(b){b._errorCode=-2416;b._errorString="Invalid parameter type."},MobileServer_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2417;b._errorString="The left or top or right or bottom you entered is invalid."},MobileServer_InvalidWidth:function(b){b._errorCode=-2418;b._errorString="The width you entered is invalid."},MobileServer_InvalidHeight:function(b){b._errorCode=-2419;b._errorString="The height you entered is invalid."},MobileServer_InvalidXResolution:function(b){b._errorCode=-2420;b._errorString="The x resolution you entered is invalid."},MobileServer_InvalidYResolution:function(b){b._errorCode=-2421;b._errorString="The y resolution you entered is invalid."},MobileServer_InvalidImage:function(b){b._errorCode=-2422;b._errorString="The image source is invalid."},MobileServer_InvalidIndex:function(b){b._errorCode=-2423;b._errorString="The index is invalid."},GetMD5Failed:function(c,b){c._errorCode=-2424;c._errorString="Failed to get MD5: "+a(b)},ConvertFromBase64Failed:function(b){b._errorCode=-2425;b._errorString="Converting image from a base64 string failed."},LicenseTrialFullMixed:function(b){b._errorCode=-2426;b._errorString="You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.DWT.ProductKey."},BarcodeReaderError:function(c,b){c._errorCode=-2427;c._errorString=b},TiffTagCountExceedError:function(b){b._errorCode=-2428;b._errorString="Tiff tag count has exceeded the limit."},SelectSourceMustAsync:function(b){b._errorCode=-2429;b._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."},HttpLicenseInvalid:function(b){b._errorCode=-2430;b._errorString="The current product key is invalid."},LicenseNotSupportWebcamWasm:function(b){b._errorCode=-2431;b._errorString="The current product key does not support Webcam Wasm, please contact the site administrator."},InvalidParameterInCallback:function(b){b._errorCode=-2432;b._errorString="Invalid parameter."},ActiveXNotSupport:function(b){b._errorCode=-2433;b._errorString="The ActiveX edition does not support this method or property."},DetectCallbackErr:function(b){b._errorCode=-2434},PerspectiveCallback:function(b){b._errorCode=-2435},webtwain_id_not_string:function(){return'Error: The "WebTwainId" is not a string.'},container_id_not_string:function(){return'Error: The argument you passed to the parameter "conatinerId" is not a string.'},container_id_not_exist:function(b){return'Error: The element specified by the id "'+b+"\" doesn't exist."},StartScanFailed:function(b){b._errorCode=-2436;b._errorString="Operation in progress, please try again when the current operation has finished."},ImageEditorOpenCannotPlayVideo:function(b){b._errorCode=-2437;b._errorString="The video can not be played while the Image Editor is open."},SelectSourceMustAsyncWhenRemote:function(b){b._errorCode=-2438;b._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when the scanning is done on a remote machine."},CannotBindViewerWhenNoViewerJS:function(b){b._errorCode=-2439;b._errorString="You cannot call the method bindViewer() when Dynamsoft.DWT.UseDefaultViewer is set to false."},LongKeyShortKeyMixed:function(b){b._errorCode=-2444;b._errorString="You can only specify the license once and have already specified it with the API ProductKey."},ImageEditorExist:function(b){b._errorCode=-2500;b._errorString="An ImageEditor already exists."},ThumbnailViewerExist:function(b){b._errorCode=-2501;b._errorString="A ThumbnailViewer already exists."},CustomElementExist:function(b){b._errorCode=-2502;b._errorString="A CustomElement already exists."},ImageEditorNotExist:function(b){b._errorCode=-2503;b._errorString="This ImageEditor doesn't exist."},ImageEditorDispose:function(b){b._errorCode=-2504;b._errorString="The ImageEditor object has been disposed."},ThumbnailViewerNotExist:function(b){b._errorCode=-2505;b._errorString="This ThumbnailViewer doesn't exist."},ThumbnailViewerDispose:function(b){b._errorCode=-2506;b._errorString="The ThumbnailViewer object has been disposed."},CustomElementNotExist:function(b){b._errorCode=-2507;b._errorString="This CustomElement doesn't exist."},CustomElementDispose:function(b){b._errorCode=-2508;b._errorString="The CustomElement object has been disposed."},EventNotExist:function(b){b._errorCode=-2509;b._errorString="The specified event doesn't exist."},CallbackNotAFunction:function(b){b._errorCode=-2510;b._errorString="The callback is not a function."},ElementRequired:function(b){b._errorCode=-2511;b._errorString="Parameter 'element' is required."},ElementNotExist:function(b){b._errorCode=-2512;b._errorString="Parameter 'element' doesn't exist."},Destroyed:function(b){b._errorCode=-2513;b._errorString="The WebTwain instance has been destroyed and can not be used anymore."},InvalidPropertyValue:function(b){b._errorCode=-2514;b._errorString="Invalid property value. "},HostNotAvailable:function(c,b){c._errorCode=-2515;c._errorString="The Dynamsoft Service is not configured correctly on "+b+". Please check."},CameraRequired:function(b){b._errorCode=-2516;b._errorString="The camera addon is required."},OldTagNameRequired:function(b){b._errorCode=-2517;b._errorString="Old tag name is required."},NewTagNameRequired:function(b){b._errorCode=-2518;b._errorString="New tag name is required."},CursorInvalidMode:function(b){b._errorCode=-2519;b._errorString="The current mode does not support setting the cursor to zoom-in."},SystemExceptionError:function(b,c){b._errorCode=-2520;b._errorString=c},WebviewerError:function(d,c,b){if(b){d._errorCode=b}else{d._errorCode=-2600}d._errorString=c},ClearErrorInfo:function(b){b._errorCode=0;b._errorString=""},SetLTSException:function(c){var b=Dynamsoft.DWT.licenseException;b.code=c._errorCode;b.message=c._errorString;b.fromLTS=false},__last:false}})();(function(u){u.DWT.LTS=u.DWT.LTS||{};u.DWT.lwscmd=[];u.DWT.licenseException={code:0,message:"",fromLTS:false};u.DWT.bLTSOnline=true;u.DWT.axInstance=undefined;u.DWT.lOnUpdateDWObj=[];u.DWT.globalWS=[];u.DWT.EnumInstance={dwt_desktop:0,dwt_browser:1,dbr:2};function o(D){this.clearData();this.m_enumInstance=D;if(D==u.DWT.EnumInstance.dwt_desktop){this.m_deploymentType="desktop"}else{if(D==u.DWT.EnumInstance.dwt_browser||D==u.DWT.EnumInstance.dbr){this.m_deploymentType="browser"}}}o.prototype.clearData=function(){this.m_iUsingTime=0;this.m_jvUsingTime=u.Lib.nil;this.m_countMap={};this.m_newConsum=false;this.m_mapSavedToDb=false;this.m_minExpiredTime=u.Lib.nil;this.m_maxExpiredTime=u.Lib.nil;this.m_cu=u.Lib.nil;this.m_ar=u.Lib.nil;this.m_ltsInstance=u.Lib.nil};o.prototype.set_cu=function(D){this.m_cu=D};o.prototype.get_cu=function(){return this.m_cu};o.prototype.set_ar=function(D){this.m_ar=D};o.prototype.get_ar=function(){return this.m_ar};o.prototype.get_ltsInstance=function(){if(!this.m_ltsInstance){this.m_ltsInstance=g(this.m_enumInstance)}return this.m_ltsInstance};o.prototype.inited_ltsInstance=function(D){return this.m_ltsInstance?true:false};o.prototype.set_maxExpiredTime=function(D){this.m_maxExpiredTime=D};o.prototype.get_maxExpiredTime=function(){return this.m_maxExpiredTime};o.prototype.set_minExpiredTime=function(D){this.m_minExpiredTime=D};o.prototype.get_minExpiredTime=function(){return this.m_minExpiredTime};o.prototype.get_deploymentType=function(){return this.m_deploymentType};var G=0,r=1,U=2,M=3,ae=4,v=6,Y=14,ab=3001,i=3002,Z=3003,P=3004,c=3005,E=3006,V=3007,ai=5001,ag=4001,f=4002,x=4003;var C="3001",aa="3002",y="3003",t="3004",b="3005",ad="3006",a="3007",O="3011",af="3012",ac="3013",d="3014",k="3015",h="3016",n="5001",j="4001",J="4002",Q="4003";var B=0,ak,I={},e=false,q=false,X,ah,K,N,A,H=false,m=false,L=false;function z(){if(location.origin){return(u.Lib.startsWith(location.origin,"http")?location.origin:"https://localhost")}return(u.Lib.startsWith(location.href,"http")?location.href:"https://localhost")}function S(){var D=u.DWT.handshakeCode;if(!u.Lib.isString(D)){D=""}return D}function W(){var D=u.DWT.organizationID;if(u.Lib.isNumber(D)){D=""+D}else{if(!u.Lib.isString(D)){D=""}}return D}function R(){return u.Lib.replaceAll(u.DWT.JSVersion,",",".")}function w(){var D=u.DWT.JSVersion.split(",");return D[0]}function s(){var al=u.DWT.ResourcesPath,D="";if(!Dynamsoft.Lib.endsWith(al,"/")){D="/"}return[al,D,"src"].join("")}function T(al,D,an){try{}catch(am){}}function F(al){var D=al;if(D===u.Lib.nil){if(u.DWT.UseLocalService===false||(u.Lib.isUndefined(Dynamsoft.DWT.UseLocalService)&&u.Lib.env.bMobile)){D=u.DWT.EnumInstance.dwt_browser}else{D=u.DWT.EnumInstance.dwt_desktop}}if(D==u.DWT.EnumInstance.dwt_browser){if(!K){K=new o(D)}return K}else{if(D==u.DWT.EnumInstance.dbr){if(!A){A=new o(D)}return A}}if(!N){N=new o(D)}return N}u.DWT.lupverfy=function(){var am=F(u.DWT.EnumInstance.dwt_desktop).get_ltsInstance(),D=F(u.DWT.EnumInstance.dwt_browser).get_ltsInstance(),al=F(u.DWT.EnumInstance.dbr).get_ltsInstance()};u.DWT.lsmid=function(D){F(u.DWT.EnumInstance.dwt_desktop).set_cu(D)};u.DWT.laddDWTObj=function(D){var al=false;u.Lib.each(u.DWT.lOnUpdateDWObj,function(am){if(am==D){al=true;return false}});if(!al){u.DWT.lOnUpdateDWObj.push(D)}};u.DWT.lremoveDWTObj=function(D){u.Lib.each(u.DWT.lOnUpdateDWObj,function(al,am){if(al==D){u.DWT.lOnUpdateDWObj.splice(am,1);return false}})};u.DWT.lsendUpdateEvt=function(D){var an=[];u.Lib.each(u.DWT.lOnUpdateDWObj,function(ao){if(D==Dynamsoft.DWT.EnumInstance.dwt_desktop){if(ao.isUsingActiveX()||ao._bLocalService){an.push(ao)}}else{if(D==Dynamsoft.DWT.EnumInstance.dwt_browser){if(ao.isUsingActiveX()||ao._bLocalService){}else{an.push(ao)}}}});if(an.length==0){return u.Lib.Promise.resolve()}var al=an[0],am;if(al.isUsingActiveX()){u.Lib.each(an,function(ao){ao.SetLTSInfo(F(D).get_ar(),F(D).get_cu())});return al.GetLicenseInfo().then(function(ao){if(ao&&(u.Lib.isArray(ao.Detail)&&ao.Detail.length>0)){Dynamsoft.DWT.lsexp(D,ao.Detail[0].ExpireDate)}})}am=al.SetLTSLicenseAsync(F(D).get_ar()).then(function(ao){if(ao&&(u.Lib.isArray(ao.Detail)&&ao.Detail.length>0)){Dynamsoft.DWT.lsexp(D,ao.Detail[0].ExpireDate)}});u.Lib.each(an,function(ao,ap){if(ap==0){return}ao.SetLTSLicenseAsync(F(D).get_ar())});return am};u.DWT.lgcb=function(){var al=u.navInfo,D=[];if(al.bChrome){D.push("Chrome")}else{if(al.bFirefox){D.push("Firefox")}else{if(al.bEdge){D.push("Edge")}else{if(al.bIE){D.push("IE")}else{if(al.bSafari){D.push("Safari")}else{if(al.bOpera){D.push("Opera")}else{if(al.b360SE){D.push("360SE")}else{if(al.bTencentTraveler){D.push("TencentTraveler")}else{if(al.bMaxthon){D.push("Maxthon")}else{if(al.bMetaSr){D.push("MetaSr")}else{if(al.bTheWorld){D.push("TheWorld")}else{if(al.bUC){D.push("UC")}}}}}}}}}}}}D.push(al.strBrowserVersion);if(al.bWin||al.bWin64){D.push("Windows")}else{if(al.bMac){D.push("Mac")}else{if(al.bLinux){D.push("Linux")}else{if(al.bAndroid){D.push("Android")}else{if(al.bMobile||al.biPhone||al.biPad){D.push("Mobile OS")}else{if(al.bEmbed){D.push("Embed OS")}}}}}}return D.join(" ")};function g(D){var al=u.DWT.licenseServer,an,aq;if(al&&al.length>0){for(an=0;an<al.length;an++){aq=al[an];if(!u.Lib.endsWith(aq,"/")){al[an]=aq+"/"}}}var ao={lf:u.Lib.localforage,btoa:u.Lib.btoa,atob:u.Lib.atob,sutlcb:function(){if(u.Lib.isFunction(u.DWT.lonsend)){u.DWT.lonsend()}},fol:u.DWT.OnFirstOffline};ao.dwt=true;ao.product="dwt|dbr";if(D==u.DWT.EnumInstance.dwt_browser){ao.feab=u.DWT.lfeab_wasm}else{if(D==u.DWT.EnumInstance.dbr){ao.feab=u.DWT.lfeab_wasm}else{ao.feab=u.DWT.lfeab_ax}}if(!u.navInfoSync.bIE&&u.DWT.ltsDebug){ao.debugLog=console.log}if(u.LTS&&u.LTS._){return u.LTS._.createLtsInstance(ao)}else{var am={},ap=function(){return Dynamsoft.Lib.Promise.reject({code:p.LtsJsLoadError,message:"The dynamsoft.lts.js load failed."})};am.i=ap;am.s=ap;am.caret=ap;return am}}u.DWT.lglic=function(D){var al=F(D);u.DWT.lclex();if(al.get_ar()&&al.get_cu()){return Promise.resolve({ar:al.get_ar(),cu:al.get_cu()})}var am={engineResourcePath:s(),version:R(),pk:S(),dm:z(),browserInfo:u.DWT.lgcb(),deviceFriendlyName:"",ls:u.DWT.licenseServer,sp:u.DWT.sessionPassword,og:W(),getMinExpireTime:function(){return al.get_maxExpiredTime()},getMaxExpireTime:function(){return al.get_minExpiredTime()},fol:u.DWT.OnFirstOffline};am.dt=al.get_deploymentType();if(D==u.DWT.EnumInstance.dwt_desktop){am.lsu=al.get_cu()}if(D==u.DWT.EnumInstance.dbr){}else{am.dwt=true;am.updateLicense=function(an){al.set_ar(an.ar);if(!al.get_cu()){al.set_cu(an.cu)}u.DWT.lsendUpdateEvt(D)}}return al.get_ltsInstance().i(am).then(function(an){if(!al.get_ar()){al.set_ar()(an.ar)}if(!al.get_cu()){al.set_cu(an.cu)}return an})};function aj(){return Date.now()}u.DWT.lshow=function(){return{t:ak,t2:B,m:JSON.stringify(I)}};function l(am){var D=am?new Date(am):new Date(),al="yyyy-MM-ddTHH:mm:ss.SSSZ";var an={"M+":D.getUTCMonth()+1,"d+":D.getUTCDate(),"H+":D.getUTCHours(),"h+":D.getUTCHours()%12||12,"m+":D.getUTCMinutes(),"s+":D.getUTCSeconds(),"q+":Math.floor((D.getUTCMonth()+3)/3),"S+":D.getUTCMilliseconds()};for(var ao in /(y+)/.test(al)&&(al=al.replace(RegExp.$1,(D.getUTCFullYear()+"").substr(4-RegExp.$1.length))),an){new RegExp("("+ao+")").test(al)&&(al=al.replace(RegExp.$1,1==RegExp.$1.length?an[ao]:("000"+an[ao]).substr(("000"+an[ao]).length-RegExp.$1.length)))}return al}u.DWT.lgct=function(D){switch(D){case G:return O;case r:return af;case U:return d;case M:return ac;case ae:return k;case Y:return h;case ab:return C;case i:return aa;case Z:return y;case P:return t;case c:return b;case E:return ad;case V:return a;case ai:return n;case ag:return j;case f:return J;case x:return Q}return""};u.DWT.lcvrf=function(al){var D;if(al.isUsingActiveX()){D=Dynamsoft.DWT.EnumInstance.dwt_desktop}else{if(!al._bLocalService){D=Dynamsoft.DWT.EnumInstance.dwt_browser}else{D=Dynamsoft.DWT.EnumInstance.dwt_desktop}}setTimeout(function(){u.DWT.lcvrf_(al,D)},1)};u.DWT.lcvrf_=function(ap,ao){var an="",at=u.DWT.lgcb(),ar="",au=F(ao);var ay={handShake:S(),organization:W(),clientUuid:au.get_cu(),clientFriendName:an,cw:ar,os:at,versionMajor:w(),deploymentType:au.get_deploymentType(),edition:"javascript"},al,aq=function(aI,aE){var aG=Dynamsoft.Lib,aK,aF=0,aJ,aH;if(!aG.isString(aI)||aI==""||aI=="{}"||!aE||!aG.isArray(aE)){return}if(aE.length<1){return}aJ=F(aE[0]);aK=aG.parse(aI);u.DWT.lclex();if(B==0){var aD=aj(),aC="";B=aD;ak=l(aD);I={};aF=0;aG.each(aK,function(aM,aL){if(aL<aF||aF==0){aF=aL;aC=aM}});if(aF>0){aJ.get_ltsInstance().s(u.DWT.licenseServer,aC,aF,true).then(function(){},function(aL){})}}aG.each(aK,function(aO,aN){var aL=false,aP=parseInt(aN),aM=180000;if(aP>0&&aP!=aF){if(aP+aM<aj()){aL=true}aJ.get_ltsInstance().s(u.DWT.licenseServer,aO,aN,aL).then(function(){},function(aQ){})}})};ay.product="dwt|dbr";al=JSON.stringify(ay);if(ap.isUsingActiveX()){var aw=ap.GetBuffer(al);aq(aw,[ao,""]);return}var az=Dynamsoft.Lib.html5.Funs,am="GetBuffer",D=az.makeParams(Dynamsoft.Lib.replaceAll(al,'"','\\"')),aB=ap._objWS,av=ap.clientId,aA=az.generateCmdId(),ax=function(){};u.DWT.lwscmd.push({cmd:am,cmdId:aA,sFun:aq,fFun:ax,params:[ao,ap._host]});return az.sendData(aB,u.DWT.lgj(av,am,D,aA),false,true)};u.DWT.lavrf=function(aq,al,D){var ao=1;if(aq==""){return}if(al>1){ao=al}var an=aj(),am=180000;if((B>0)&&(B+am<an)){if(q){I={};u.DWT.lavrf__unload()}else{u.DWT.lavrf__(true,D)}var ap=aj()+1;B=ap;ak=l(ap);I={}}e=true;q=false;if(!I[aq]){I[aq]=ao}else{I[aq]+=ao}if(0==B){u.DWT.lavrf__(true,D)}};u.DWT.lavrf_=function(al,D){if(e){var am=1;if(al){am=al}setTimeout(function(){u.DWT.lavrf__(false,D)},am)}};u.DWT.lavrf__=function(D,az){var am=aj(),ar=false,ap=D?true:false,aB,au,aE=180000,aq=0,ao=az,ay;if(u.Lib.isUndefined(ao)){ao=u.DWT.EnumInstance.dwt_browser}ay=F(ao);e=false;if(0==B){ar=true;B=am;ak=l(am)}aB=B;au=ak;var av={};av.usingTime=au;var an={};Dynamsoft.Lib.each(I,function(aF,aG){an[aG]=aF;if(aF>0){aq++}});av.counts=an;if(ap||(aB+aE<am)){ap=true;var aC=aj()+1;B=aC;ak=l(aC);I={};q=false;if(aq==0){return}}else{if(aq==0){return}q=true}av.concurrentDuration=ar?1:180;var aA="",at="8",al=u.DWT.lgcb(),aw="";var aD={handShake:S(),organization:W(),clientUuid:ay.get_cu(),clientFriendName:aA,cw:aw,os:al,versionMajor:w(),deploymentType:ay.get_deploymentType(),edition:"javascript",records:[av]},ax;aD.product="dwt|dbr";ax=JSON.stringify(aD);if(u.DWT.ltsDebug){T([l(),au,av,aB,ap])}u.DWT.lclex();ay.get_ltsInstance().s(u.DWT.licenseServer,ax,""+aB,ap).then(function(){},function(aF){})};u.DWT.lavrf__unload=function(){var al=aj(),D=true,an,am=false;var aq=F(u.DWT.EnumInstance.dwt_desktop),ar=F(u.DWT.EnumInstance.dwt_browser),ap=F(u.DWT.EnumInstance.dbr);e=false;if(0==B){B=al;ak=l(al)}an=B;var ao=aj()+1;B=ao;ak=l(ao);I={};q=false;an=an+1;u.DWT.lclex();if(aq.inited_ltsInstance()){aq.get_ltsInstance().s(u.DWT.licenseServer,am,""+an,D).then(function(){},function(at){})}if(ar.inited_ltsInstance()){ar.get_ltsInstance().s(u.DWT.licenseServer,am,""+an,D).then(function(){},function(at){})}if(ap.inited_ltsInstance()){ap.get_ltsInstance().s(u.DWT.licenseServer,am,""+an,D).then(function(){},function(at){})}};u.DWT.lclex=function(){var D=u.DWT.licenseException;D.code=0;D.message="";D.httpResponse="";D.fromLTS=false};u.DWT.li=function(al){if(al.axInstance){var D;u.DWT.axInstance=al.axInstance;if(u.DWT.axInstance){D=u.DWT.axInstance.GetUUID();if(u.DWT.ltsDebug){console.log("ActiveX cu: "+D)}F(al.instanceMode).set_cu(D);return D}}return F(al.instanceMode).get_cu()};u.DWT.lfeab_ax=function(D){return new Promise(function(ao,am){var an="";if(u.DWT.axInstance){try{an=u.DWT.axInstance.Encrypt(D,0)}catch(al){}}ao(an);return})};u.DWT.lfeab_wasm=function(D){return new Promise(function(an,am){var al=new Dynamsoft.Imagecore();al.getAesResult(D).then(function(ao){al.terminate();an(ao)},function(ao){al.terminate();am(ao)});return})};u.DWT.lgj=function(aq,al,ap,D){var ao=[];ao.push("{");ao.push('"id":"');ao.push(aq);ao.push('"');if(D){ao.push(',"cmdId":"');ao.push(D);ao.push('"')}ao.push(',"method":"');ao.push(al);ao.push('"');ao.push(',"module":"dwt","version":"');var an=Dynamsoft.Lib,am=[an.product.getDWTPrefix(),an.product.getServerVersionInfo()].join("");ao.push(am);ao.push('"');if(ap!==undefined&&ap!==null){ao.push(',"parameter":');ao.push(ap)}ao.push("}");return ao.join("")};u.DWT.lwsproc=function(ao){var D;if(ao.indexOf("Exception:")>=0||ao.indexOf("Error")==0){var aq=ao;D=Dynamsoft.DWT.lwscmd.pop()||{};if(D.fFun){D.fFun({code:-2520,message:aq})}return}try{ao=Dynamsoft.Lib.parse(ao)}catch(ap){D=u.DWT.lwscmd.pop()||{};if(D.fFun){D.fFun(ap)}return}if(ao.cmdId){var am=Dynamsoft.DWT.lwscmd.length,an,al=-1;for(an=am-1;an>=0;an--){if(Dynamsoft.DWT.lwscmd[an].cmdId==ao.cmdId){al=an;D=Dynamsoft.DWT.lwscmd.splice(al,1)[0];break}}if(al<0){return}}if(ao.method=="GetBuffer"){if(ao.exception!==undefined&&ao.description!==undefined){if(D.fFun){D.fFun({code:ao.exception,message:ao.description})}return}if(D.sFun&&ao.result.length>0){D.sFun(ao.result[0],D.params)}else{D.sFun("",D.params)}}else{if(D.sFun){D.sFun(ao)}}};u.DWT.lsexp=function(al,am){var ao=am,ap;ao=u.Lib.replaceAll(ao,"/","-");ap=ao.split("-");if(ap.length==3){var ar=ap[0],aq=ap[1],D=ap[2];if(aq.length<2){aq="00"+aq;aq=aq.substr(aq.length-2)}if(D.length<2){D="00"+D;D=D.substr(D.length-2)}ao=[ar,aq,D].join("-")}var an=[ao,"T23:59:59.999Z"].join("");F(al).set_minExpiredTime(an);F(al).set_maxExpiredTime(an)};u.DWT.lunload=function(){u.DWT.lavrf__unload();var al=F(u.DWT.EnumInstance.dwt_desktop),am=F(u.DWT.EnumInstance.dwt_browser),D=F(u.DWT.EnumInstance.dbr);al.clearData();am.clearData();D.clearData();B=0;ak=u.Lib.nil;I={};q=false;e=false;H=false;m=false;L=false;u.DWT.lwscmd=[];u.DWT.lclex();u.DWT.bLTSOnline=true;u.DWT.axInstance=u.Lib.nil;u.DWT.lOnUpdateDWObj=[];u.DWT.globalWS=[]};var p={NetworkError:-2440,Timedout:-2441,JsonError:-2442,CorsError:-2443,Expired:-2445,LtsJsLoadError:-2446,UUIDError:-2447};u.DWT.lcexp=function(D){return F(D).get_ltsInstance().caret().then(function(){return false},function(an){var am=Dynamsoft.DWT.licenseException,al="";if(an instanceof Error||"message" in an){al=an.message}else{if(u.Lib.isString(an)){al=an}}u.DWT.lsetException(p.Expired,al,false);if(!m){m=true;if(console&&console.error){console.error(al)}Dynamsoft.OnLTSLicenseError&&Dynamsoft.OnLTSLicenseError(Dynamsoft.Lib.License.getPublicLicenseContent(am.message))}return true})};u.DWT.OnLicenseException=function(){var al=u.DWT.licenseException,ao=al.message;if(u.Lib.isString(ao)){if(ao.indexOf("Error Code")>-1){ao=u.Lib.replaceAll(ao,"Error Code","error code")}else{if(ao.indexOf("Error code")>-1){ao=u.Lib.replaceAll(ao,"Error code","error code")}}}if(ao.indexOf("(https://www.dynamsoft.com/purchase-center/)")>-1){ao=ao.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamic-web-twain/)");al.message=ao}if(ao.indexOf("error code:")>-1){var D=ao.substr(0,ao.indexOf("message")),an=ao.substr(ao.indexOf("message"));if(D.indexOf("{")>-1){D=D.substr(D.indexOf("{")+1)}if(an.indexOf("}")>-1){an=an.substr(0,an.indexOf("}"))}D=u.Lib.replaceAll(D,"error code:","");an=u.Lib.replaceAll(an,"message: ","");u.DWT.lsetException(parseInt(D),an,true);if(console&&console.error){console.error(an)}Dynamsoft.OnLTSLicenseError&&Dynamsoft.OnLTSLicenseError(Dynamsoft.Lib.License.getPublicLicenseContent(ao))}else{if(!al.code){var am=p.NetworkError;if(ao.indexOf("timed out")>-1||ao.indexOf("timeout")>-1){am=p.Timedout}else{if(ao.indexOf("access-control-allow-origin")>-1||ao.indexOf("cors")>-1){am=p.CorsError}}u.DWT.lsetException(am,ao,true)}if(console&&console.error){console.error(al.message)}if(al.code==p.LtsJsLoadError){return}Dynamsoft.OnLTSLicenseError&&Dynamsoft.OnLTSLicenseError(Dynamsoft.Lib.License.getPublicLicenseContent(al.message))}};u.DWT.lol=function(){return u.DWT.bLTSOnline};u.DWT.OnFirstOffline=function(D){u.DWT.bLTSOnline=false};u.DWT.lpubdlg=function(al,D){if(u.Lib.isString(al)&&al!=""){al=u.Lib.atob(al);if(console&&console.warn&&!H){console.warn(al)}if(D==1){if(!H){H=true;Dynamsoft.OnLTSPublicLicenseMessage&&Dynamsoft.OnLTSPublicLicenseMessage(Dynamsoft.Lib.License.getPublicLicenseContent(al))}return true}else{if(D==2){if(!H){H=true}}}}return false};u.DWT.lcheckLic=function(D,an){var ao=false;if(an){if(u.Lib.isArray(an.Detail)){if(an.Detail.length>0){var al=an.Detail[0],am=al.ExpireDate;Dynamsoft.DWT.lsexp(D,am);return Dynamsoft.DWT.lcexp().then(function(aq){var ap=false;if(!aq){if(an.Trial==1||an.Trial==2){ap=u.DWT.lpubdlg(an.Message,an.Trial)}}else{ap=true}if(!ap&&!u.DWT.bLTSOnline&&!L){L=true;Dynamsoft.OnLTSConnectionWarning&&Dynamsoft.OnLTSConnectionWarning()}})}}if(an.Trial==1||an.Trial==2){ao=u.DWT.lpubdlg(an.Message,an.Trial)}}if(!ao&&!u.DWT.bLTSOnline&&!L){L=true;Dynamsoft.OnLTSConnectionWarning&&Dynamsoft.OnLTSConnectionWarning()}};u.DWT.lisValidID=function(al){if(u.Lib.isString(al)&&al!=""){return true}var D=u.DWT.licenseException,am;u.DWT.lsetException(p.UUIDError,"Failed to generate an ID for your device to license it: not enough permission.",true);if(console&&console.error){console.error(D.message)}am=D.message;Dynamsoft.OnLTSUUIDError&&Dynamsoft.OnLTSUUIDError(am);return false};u.DWT.lsetException=function(al,an,am){var D=Dynamsoft.DWT.licenseException;D.code=al;D.message=an;if(!u.Lib.isUndefined(am)){D.fromLTS=am}}})(Dynamsoft);Dynamsoft.Ready(function(a){a.LS={isSupportLS:function(){var c=Dynamsoft.navInfoSync,b=false;if(c.bEdge&&c.bFileSystem){}else{try{b=(window.localStorage)?true:false}catch(d){}}return b},item:function(c,d,b){var e=null;if(this.isSupportLS()){if(d){localStorage.setItem(c,d);e=d}else{e=localStorage.getItem(c)}if(e===null){return b}return e}else{return b}},removeItem:function(b){if(this.isSupportLS()){localStorage.removeItem(b)}else{return false}return true}}});Dynamsoft.Ready(function(o,g){o.html5=o.html5||{};if(!o.product.bHTML5Edition){return}var y=1,d,s=!1,i=!0,f=0,a=1,l=1,x=2,e=Dynamsoft.DWT;d=o.html5.Funs={notSupportProperty:function(B){},notSupportMethod:function(B){},getRandom:function(){var C=new Date().getTime()%10000,B=[],E;for(var D=0;D<5;D++){E=Math.floor(Math.random()*10);if(D==0&&E==0){D=-1;continue}B.push(E)}if(C<10){B.push("000")}else{if(C<100){B.push("00")}else{if(C<1000){B.push("0")}}}B.push(C);return B.join("")},generateCmdId:function(){y++;return y},cformat:function(J,E){if(o.isString(J)){var I=J.indexOf("<%"),H,F,D,C,B;if(I==-1){return J}F=J.substring(0,I);H=J.indexOf(">",F);if(I+2<H){D=J.substring(I+1,H)}else{return J}C=J.substring(H+1);try{B=o.sprintf(D,E)}catch(G){B=""}return[F,B,C].join("")}return""},sendData:function(C,N,H,L){var M,G,D,E,B,K,F,I;if(!L){try{C.send(N)}catch(J){o.log(J)}return s}E=new ArrayBuffer(12);G=H&&H.size?H.size:0;I=new Blob([N]);M=I.size;D=M+G;B=new DataView(E);for(F=0;F<8;F++){if(D){B.setUint8(F,D%256);D=parseInt(D/256)}else{break}}for(F=0;F<4;F++){if(M){B.setUint8(8+F,M%256);M=parseInt(M/256)}else{break}}K=new Blob([E,I]);C.send(K);if(G>0){C.send(H)}E=null;I=null;K=null;B=null;return i},__pushElement:function(C,B){if(o.isString(B)){C.push('"');C.push(B);C.push('"')}else{if(o.isArray(B)){var D=i;C.push("[");o.each(B,function(E){if(D){D=s}else{C.push(",")}d.__pushElement(C,E)});C.push("]")}else{if(B===undefined){C.push('""')}else{C.push(B)}}}},makeParams:function(){var C=arguments;if(C===undefined||C.length===0){return undefined}else{var B=[],E,D;if(C.length===1){E=C[0];B.push("[");d.__pushElement(B,E);B.push("]")}else{if(C.length===2){E=C[0];D=C[1];B.push("[");d.__pushElement(B,E);B.push(",");d.__pushElement(B,D);B.push("]")}else{d.__pushElement(B,Array.prototype.slice.call(C))}}return B.join("")}},getJson:function(G,C,H,B){var F=[];F.push("{");F.push('"id":"');F.push(G.clientId);F.push('"');if(B){F.push(',"cmdId":"');F.push(B);F.push('"')}F.push(',"method":"');F.push(C);F.push('"');F.push(',"module":"dwt","version":"');var E=Dynamsoft.DWT,D=[o.product.getDWTPrefix(),o.product.getServerVersionInfo()].join("");F.push(D);F.push('"');if(H!==undefined&&H!==null){F.push(',"parameter":');F.push(H)}F.push("}");return F.join("")},refreshImageAfterInvokeFun:function(B,D,C){return(C==1)},loadHttpBlob:function(G,N,F,H,O,B,M,C){var E="loadHttpBlob",P,J,L=s;J={method:N,dataType:"blob"};if(C){J.headers=C}if(G.HTTPUserName!=""){J.username=G.HTTPUserName;J.password=G.HTTPPassword}if(H){if((Dynamsoft.navInfo.bChrome||Dynamsoft.navInfo.bFirefox)&&(N=="get")){J.fetchRaw=true;fetch(F,J).then(function(S){var T=S.headers.get("Content-Length"),U=0;var R=S.body.getReader();var V=new ReadableStream({start:function(X){var Y=function(){R.read().then(function(Z){if(Z.done){X.close();return}U+=Z.value.length;M({loaded:U,total:T});X.enqueue(Z.value);setTimeout(Y,0)})};setTimeout(Y,0)}});var W=S.headers.get("Content-Type");if(!W||W==""){W="application/octet-stream"}return new Response(V,{headers:{"Content-Type":W}})}).then(function(R){return R.blob()}).then(function(R){O(R);R=null},function(){o.Errors.HttpDownloadUrlError(G);if(o.isFunction(B)){B()}});return true}else{J.onSuccess=O;if(o.isFunction(M)){J.beforeSend=function(R){R.addEventListener("progress",function(S){delete (S.totalSize);delete (S.position);M(S)},s)}}L=i}}else{if(Dynamsoft.navInfoSync.bIE){J.dataType="arraybuffer";J.onSuccess=function(V,U,T){var W,S,R;W=V||T.responseData;if(W){R=new Uint8Array(W)}G._errorCode=0;G._errorString="";O(R);R=null;L=i}}else{J.dataType="text";J.contentType="text/plain; charset=x-user-defined";J.mimeType="text/plain; charset=x-user-defined";J.onSuccess=function(W,V,U){var X,S,R;X=U.responseText;S=X.length;R=new Uint8Array(S);for(var T=0;T<S;T++){R[T]=X.charCodeAt(T)}G._errorCode=0;G._errorString="";O(R);R=null;L=i}}if(J.headers){o.mix(J.headers,{"X-Requested-With":s})}else{J.headers={"X-Requested-With":s}}}if(N=="post"){var I=G.httpFormFields,D;if(I){try{D=new FormData();o.each(I,function(S,R){if(S instanceof Blob){var T=S.name;D.append(R,S,T)}else{D.append(R,S)}});o.mix(J,{data:D,processData:s,contentType:s})}catch(K){}}}P=function(W,T,V){var S,U;if(W&&o.isArray(W)&&W.length>2){S=W[1];U=W[2]}else{S=T;U=V}if(U.state==2&&U.status==0){if(U.statusText==="abort"){var R=i;o.Errors.HttpDownloadError(G,R)}else{o.Errors.HttpDownloadUrlError(G)}}else{o.Errors.HttpDownloadError(G,s,S,U.status)}if(o.isFunction(B)){B()}};J.url=F;J.async=H;J.onError=P;J.onComplete=function(){o.bio=s};var Q=o.ajax(J);if(H){o.bio=Q}return L},combineUrl:function(F,C,E){var B=[],D=C;if(D===undefined||E===undefined){return s}if(!o.isString(D)){D=String(C)}if(D.indexOf("http://")==0){D=D.replace("http://","");B.push("http://")}else{if(D.indexOf("https://")==0){D=D.replace("https://","");B.push("https://")}else{if(D.indexOf("//")==0){D=D.replace("//","")}if(F.IfSSL){B.push("https://")}else{B.push("http://")}}}B.push(D);if(D.indexOf(":")<0){if(F.HTTPPort==""){F.HTTPPort=o.detect.ssl?443:80}if((!o.detect.ssl&&F.HTTPPort!=80)||(o.detect.ssl&&F.HTTPPort!=443)){B.push(":");B.push(F.HTTPPort)}}if(E.indexOf("/")!==0){B.push("/")}B.push(E);return B.join("")},httpPostUpload:function(Q,F,I,P,M,K,N,H,R,C,S,B){if(!I||I.size<=0){o.Errors.UploadFileCannotEmpty(Q);if(o.isFunction(B)){B()}return s}var E=Q.MaxUploadImageSize,O=I.size,J=I.type,G,T;if(O>E&&E!=-1){o.Errors.UploadExceededMaxSize(Q);if(o.isFunction(B)){B()}return s}if(J===""||J&&J!=Q.HttpContentTypeFieldValue){var L=I.slice||I.webkitSlice||I.mozSlice,D=I.name;if(!o.isString(D)||D==""){D=I.fileName}G=L.call(I,0,O,Q.HttpContentTypeFieldValue);G.name=D}else{G=I}I=null;G.remoteFilename=Q.__remoteFilename;T=this.httpUploadByBIO(Q,F,G,M,P,K,N,H,R,C,S,B);G=null;return T},httpPostUploadFiles:function(T,F,H,S,O,M,P,I,U,V,B){var E=T.MaxUploadImageSize,G=0,Q;if(!H||!o.isArray(H)||H.length<=0){o.Errors.UploadFileCannotEmpty(T);if(o.isFunction(B)){B()}return s}for(Q=0;Q<H.length;Q++){var K=H[Q];if(!K||K.size<=0){o.Errors.UploadFileCannotEmpty(T);if(o.isFunction(B)){B()}return s}var R=K.size,L=K.type,W;G+=R;if(L===""||L&&L!=T.HttpContentTypeFieldValue){var N=K.slice||K.webkitSlice||K.mozSlice,D=K.name,J=N.call(K,0,R,T.HttpContentTypeFieldValue);if(!o.isString(D)||D==""){D=K.fileName}J.name=this.cformat(D,Q+1);H[Q]=J}H[Q].remoteFilename=this.cformat(T.__remoteFilename,Q+1);K=null}if(G>E&&E!=-1){o.Errors.UploadExceededMaxSize(T);if(o.isFunction(B)){B()}return s}var C=false;W=this.httpUploadByBIO(T,F,H,O,S,M,P,I,U,C,V,B);for(Q=0;Q<H.length;Q++){H[Q]=null}H=null;return W},httpPostUploadString:function(H,B,J,G,N,C,I,D,P,K,Q){var O,F,L,M;if(J==""){o.Errors.UploadFileCannotEmpty(H);if(o.isFunction(Q)){Q()}return s}F=H.MaxUploadImageSize;L=J.length;if(L>F&&F!=-1){o.Errors.UploadExceededMaxSize(H);if(o.isFunction(Q)){Q()}return s}O=new Blob([J],{type:"text/plain"});O.name=G;var E=false;M=this.httpUploadByBIO(H,B,O,N,i,C,I,D,P,E,K,Q);O=null;return M},httpUploadByBIO:function(I,C,B,N,M,D,J,E,P,G,L,Q){var R,H,O,F;O=I.httpFormFields;F=new FormData();o.each(O,function(T,S){if(T instanceof Blob){var U=T.name;F.append(S,T,U)}else{F.append(S,T)}});o.bio=new o.BIO({action:C,data:F,async:M,retry:E,bOnlyEmptyIsOK:P});R=o.bio.get("uploadType");if(R){H=R.get("ajaxConfig");if(H&&H.headers&&D){o.mix(H.headers,D)}if(N>=0){R.set("blockSize",N)}if(I.__withCredentials){o.mix(H.xhrFields,{withCredentials:true})}}I.__HTTPPostResponseString=s;o.bio.on(o.BIO.event.SUCCESS,function(V){o.bio=s;if(V&&o.isString(V.response)){I.__HTTPPostResponseString=V.response}else{I.__HTTPPostResponseString=""}if(o.isFunction(I.__OnHttpUploadStatus)){var T=V.name,U=200,S;S={fileName:T,percentage:100,statusCode:U,responseString:I.__HTTPPostResponseString};I.__OnHttpUploadStatus(S)}if(o.isFunction(L)){L(I.__HTTPPostResponseString)}});o.bio.on(o.BIO.event.ERROR,function(Y){var W=(Y&&Y.canceled),Z=(Y&&Y.timeout),U=s,X=0;o.bio=s;if(Y&&o.isString(Y.response)){I.__HTTPPostResponseString=Y.response}else{I.__HTTPPostResponseString=""}if(!W){if(Y&&Y.msg){U=Y.msg}if(Y&&Y.httpStatus){X=Y.httpStatus}}o.Errors.UploadError(I,W,U,X);if(o.isFunction(I.__OnHttpUploadStatus)){var T=Y.name,V=X,S;S={fileName:T,percentage:100,statusCode:V,responseString:I.__HTTPPostResponseString};I.__OnHttpUploadStatus(S)}if(o.isFunction(Q)){Q(I.__HTTPPostResponseString)}});if(J||o.isFunction(I.__OnHttpUploadStatus)){o.bio.on(o.BIO.event.PROGRESS,function(V){delete (V.totalSize);delete (V.position);var W=(V.total===0)?100:Math.round(V.loaded*100/V.total),X=[V.loaded," / ",V.total].join("");if(o.isFunction(I.__OnHttpUploadStatus)){var T=V.name,U=0,S;if(W>99){W=99}S={fileName:T,percentage:W,statusCode:U,responseString:""};I.__OnHttpUploadStatus(S)}if(J){I._OnPercentDone([0,W,"","http",V.name])}});if(J){I._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}if(o.isFunction(I.__OnHttpUploadStatus)){var K="";if(o.isArray(B)&&B.length>0){}else{if(B&&B.name&&B.name!=""){K=B.name}else{if(B&&B.fileName){K=B.fileName}}}I.__OnHttpUploadStatus({fileName:K,percentage:0,statusCode:0,responseString:""})}}if(G&&G.bCancel){G.st=2;if(o.isFunction(Q)){Q(false)}return false}return o.bio.upload(B)},httpPutImage:function(E,B,D,F,J,C,H){var I=i,G={method:"PUT",url:B,hasContent:i,processData:s,async:F,data:D,onSuccess:J,onError:function(){I=s;if(o.isFunction(C)){C()}},onComplete:function(){o.bio=s},beforeSend:function(K){if(o.isFunction(H)){K.upload.addEventListener("progress",function(L){delete (L.totalSize);delete (L.position);H(L)},s)}}};if(E.HTTPUserName!=""){G.username=E.HTTPUserName;G.password=E.HTTPPassword}if(!F){o.mix(G,{headers:{"X-Requested-With":s}})}o.bio=o.ajax(G);return I},dialog:s,dialogRef:0,showMask:function(C){var B=this;o.log("showMask:"+C+"--"+B.dialogRef);if(B.dialogRef==0){o.detect.showMask()}B.dialogRef++},hideMask:function(C){var B=this;o.log("hideMask:"+C+"--"+B.dialogRef);if(B.dialogRef>1){B.dialogRef--}else{if(B.dialogRef<=1){o.detect.hideMask();B.dialog=s;B.dialogRef=0}}},setBtnCancelVisibleForProgress:function(D,C){var B=this;if((o.cancelFrome==0&&D.__IfShowProgressBar==i)||(o.cancelFrome!=0&&D.__IfShowCancelDialogWhenImageTransfer==i)){o.setBtnCancelVisibleForProgress(C)}},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnBitmapChanged","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync","OnRemoteScanStatusAsync","OnConsumed"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleEvent:function(E,C){var G=this,D=C.result[0],B=E._objWS,F=s;o.each(d.EVENTS,function(J,I){if(C.event===J){var H=["_",J].join("");F=i;if(o.isFunction(E[H])){E[H](C.result,C)}return s}});if(F){o.log("handled event:"+C.event);o.each(d.SEND_BACK_EVENTS,function(I,H){if(d.isServerInvalid(E)){return s}if(C.event===I){o.log("sendback event:"+C.event);d.sendData(B,d.getJson(E,C.event,d.makeParams(D),0),s,i);return s}})}else{o.each(o.Addon_Events,function(J,I){if(C.event===J){var H=["_",J].join("");F=i;if(o.isFunction(E[H])){E[H](C.result)}return s}});if(F){o.log("handled addon event:"+C.event);o.each(o.Addon_Sendback_Events,function(I,H){if(d.isServerInvalid(E)){return s}if(C.event===I){o.log("sendback addon event:"+C.event);d.sendData(B,d.getJson(E,C.event,d.makeParams(D),0),s,i);return s}})}}return F},getImageType:function(C){if(C===undefined){return -1}var B=C.length;if(B<4){return -1}var D=C.lastIndexOf(".");if(D===-1){return -1}var E=C.slice(D).toLowerCase();if(E===".bmp"||E===".dib"){return Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP}if(E===".jpg"||E===".jpe"||E===".jpeg"||E===".jfif"){return Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG}if(E===".tif"||E===".tiff"){return Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF}if(E===".png"){return Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG}if(E===".pdf"){return Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF}if(E===".jp2"||E===".j2k"||E===".j2c"){return Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K}return -1},addImageFileExt:function(C,B){var D;var E=C.substring(C.lastIndexOf(".")).toLowerCase();if(E==".bmp"||E==".dib"||E==".jpg"||E==".jpe"||E==".jpeg"||E==".jfif"||E==".tif"||E==".tiff"||E==".png"||E==".pdf"){return C}if(B==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP){D=[C,".bmp"].join("")}else{if(B==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG){D=[C,".jpg"].join("")}else{if(B==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){D=[C,".png"].join("")}else{if(B==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF){D=[C,".tif"].join("")}else{if(B==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){D=[C,".pdf"].join("")}else{if(B==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){D=[C,".jp2"].join("")}}}}}}return D},autoDiscardBlankImage:function(E,B){if(o.config.bDiscardBlankImage){var C=E._ImgManager.getCurrentImageIndex();if(E.IsBlankImage(C)){E.RemoveImage(C)}var D=["Blank Discard (",B,"): ",E.ErrorString].join("");if(o.isFunction(E.__OnPrintMsg)){E.__OnPrintMsg(D)}}},replaceLocalFilename:function(B){var C;if(B===undefined){return""}B=String(B);C=B.replace(/\\/g,"\\\\");if(Dynamsoft.navInfoSync.bFileSystem){C=decodeURI(C)}return C},GetImageInfo:function(C,D){var B=C._ImgManager.convertClientIndexToServerId(D);if(B==-1){o.Errors.IndexOutOfRange(C);return false}return C._innerFun("GetImageInfo",d.makeParams(B))},isServerInvalid:function(C){var E=C,B,D;B=!E.bReady||E._objWS===null;D=E.__bMustUpgradeService;if(B){o.Errors.Server_Invalid(E)}else{if(D){o.Errors.MustUpgradeService(E)}}return B||D||E._errorCode==-2208},isHttpServerInvalid:function(C){var E=C,B,D;B=!E.bReady||E.httpUrl===null;D=E.__bMustUpgradeService;if(B){o.Errors.Server_Invalid(E)}else{if(D){o.Errors.MustUpgradeService(E)}}return B||D||E._errorCode==-2208},getBlobTypeByImageType:function(C){var B="application/octet-stream";switch(C){case 0:B="image/bmp";break;case 1:B="image/jpeg";break;case 2:B="image/tiff";break;case 3:B="image/png";break;case 4:B="application/pdf";break;case 14:B="image/jp2";break}return B},DEF:function(C,B,F,D){var E;if(F!==f&&F!==a){E=F}else{E={};if(F){if(D==l){E.set=function(G){var H=G*1;if(!o.isNumber(H)||isNaN(H)){o.Errors.InvalidValue(C);return s}C._resetErr();if(!C._isValid()){return false}return C._innerFun(B,d.makeParams(H))}}else{if(D==x){E.set=function(G){if(!o.isBoolean(G)){o.Errors.InvalidValue(C);return s}C._resetErr();if(!C._isValid()){return false}return C._innerFun(B,d.makeParams(G))}}else{E.set=function(G){if(!o.isString(G)){o.Errors.InvalidValue(C);return s}C._resetErr();if(!C._isValid()){return false}return C._innerFun(B,d.makeParams(G))}}}}}if(!E.get){E.get=function(){C._resetErr();if(!C._isValid()){return false}if(B=="CurrentSourceName"){var G=C._innerFun(B);if(C.__currentImageCaptureDriverType==Dynamsoft.DWT.EnumDWT_Driver.TWAIN64&&G.length>0){return"Twain64-"+G}else{if(C.__currentImageCaptureDriverType==Dynamsoft.DWT.EnumDWT_Driver.ICA&&C.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac&&G.length>0){return"ICA-"+G}else{return G}}}else{return C._innerFun(B)}}}if(!(B in C)){Object.defineProperty(C,B,E)}},_DEF_NOT_SUPPORT_MOBILE_A:function(B,E,D){var C={get:function(){return B._mobileNotSupport(E)}};if(D===a||o.isUndef(D)){C.set=C.get}if(!(E in B)){Object.defineProperty(B,E,C)}},DEF_NOT_SUPPORT_MOBILE:function(C,B,D){if(o.isArray(B)){o.each(B,function(E){d._DEF_NOT_SUPPORT_MOBILE_A(C,E,D)})}else{d._DEF_NOT_SUPPORT_MOBILE_A(C,B,D)}},callbacks:[],pushCallback:function(B,E,C){var D={method:B,callback:E,ticks:C};d.callbacks(D)},refreshUIRef:0};var k=function(C,B){return C+B&4294967295},b=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(G,D,C,B,F,E){D=k(k(D,G),k(B,E));return k(D<<F|D>>>32-F,C)}function t(C,E){var D=C[0],B=C[1],G=C[2],F=C[3];D+=(B&G|~B&F)+E[0]-680876936|0;D=(D<<7|D>>>25)+B|0;F+=(D&B|~D&G)+E[1]-389564586|0;F=(F<<12|F>>>20)+D|0;G+=(F&D|~F&B)+E[2]+606105819|0;G=(G<<17|G>>>15)+F|0;B+=(G&F|~G&D)+E[3]-1044525330|0;B=(B<<22|B>>>10)+G|0;D+=(B&G|~B&F)+E[4]-176418897|0;D=(D<<7|D>>>25)+B|0;F+=(D&B|~D&G)+E[5]+1200080426|0;F=(F<<12|F>>>20)+D|0;G+=(F&D|~F&B)+E[6]-1473231341|0;G=(G<<17|G>>>15)+F|0;B+=(G&F|~G&D)+E[7]-45705983|0;B=(B<<22|B>>>10)+G|0;D+=(B&G|~B&F)+E[8]+1770035416|0;D=(D<<7|D>>>25)+B|0;F+=(D&B|~D&G)+E[9]-1958414417|0;F=(F<<12|F>>>20)+D|0;G+=(F&D|~F&B)+E[10]-42063|0;G=(G<<17|G>>>15)+F|0;B+=(G&F|~G&D)+E[11]-1990404162|0;B=(B<<22|B>>>10)+G|0;D+=(B&G|~B&F)+E[12]+1804603682|0;D=(D<<7|D>>>25)+B|0;F+=(D&B|~D&G)+E[13]-40341101|0;F=(F<<12|F>>>20)+D|0;G+=(F&D|~F&B)+E[14]-1502002290|0;G=(G<<17|G>>>15)+F|0;B+=(G&F|~G&D)+E[15]+1236535329|0;B=(B<<22|B>>>10)+G|0;D+=(B&F|G&~F)+E[1]-165796510|0;D=(D<<5|D>>>27)+B|0;F+=(D&G|B&~G)+E[6]-1069501632|0;F=(F<<9|F>>>23)+D|0;G+=(F&B|D&~B)+E[11]+643717713|0;G=(G<<14|G>>>18)+F|0;B+=(G&D|F&~D)+E[0]-373897302|0;B=(B<<20|B>>>12)+G|0;D+=(B&F|G&~F)+E[5]-701558691|0;D=(D<<5|D>>>27)+B|0;F+=(D&G|B&~G)+E[10]+38016083|0;F=(F<<9|F>>>23)+D|0;G+=(F&B|D&~B)+E[15]-660478335|0;G=(G<<14|G>>>18)+F|0;B+=(G&D|F&~D)+E[4]-405537848|0;B=(B<<20|B>>>12)+G|0;D+=(B&F|G&~F)+E[9]+568446438|0;D=(D<<5|D>>>27)+B|0;F+=(D&G|B&~G)+E[14]-1019803690|0;F=(F<<9|F>>>23)+D|0;G+=(F&B|D&~B)+E[3]-187363961|0;G=(G<<14|G>>>18)+F|0;B+=(G&D|F&~D)+E[8]+1163531501|0;B=(B<<20|B>>>12)+G|0;D+=(B&F|G&~F)+E[13]-1444681467|0;D=(D<<5|D>>>27)+B|0;F+=(D&G|B&~G)+E[2]-51403784|0;F=(F<<9|F>>>23)+D|0;G+=(F&B|D&~B)+E[7]+1735328473|0;G=(G<<14|G>>>18)+F|0;B+=(G&D|F&~D)+E[12]-1926607734|0;B=(B<<20|B>>>12)+G|0;D+=(B^G^F)+E[5]-378558|0;D=(D<<4|D>>>28)+B|0;F+=(D^B^G)+E[8]-2022574463|0;F=(F<<11|F>>>21)+D|0;G+=(F^D^B)+E[11]+1839030562|0;G=(G<<16|G>>>16)+F|0;B+=(G^F^D)+E[14]-35309556|0;B=(B<<23|B>>>9)+G|0;D+=(B^G^F)+E[1]-1530992060|0;D=(D<<4|D>>>28)+B|0;F+=(D^B^G)+E[4]+1272893353|0;F=(F<<11|F>>>21)+D|0;G+=(F^D^B)+E[7]-155497632|0;G=(G<<16|G>>>16)+F|0;B+=(G^F^D)+E[10]-1094730640|0;B=(B<<23|B>>>9)+G|0;D+=(B^G^F)+E[13]+681279174|0;D=(D<<4|D>>>28)+B|0;F+=(D^B^G)+E[0]-358537222|0;F=(F<<11|F>>>21)+D|0;G+=(F^D^B)+E[3]-722521979|0;G=(G<<16|G>>>16)+F|0;B+=(G^F^D)+E[6]+76029189|0;B=(B<<23|B>>>9)+G|0;D+=(B^G^F)+E[9]-640364487|0;D=(D<<4|D>>>28)+B|0;F+=(D^B^G)+E[12]-421815835|0;F=(F<<11|F>>>21)+D|0;G+=(F^D^B)+E[15]+530742520|0;G=(G<<16|G>>>16)+F|0;B+=(G^F^D)+E[2]-995338651|0;B=(B<<23|B>>>9)+G|0;D+=(G^(B|~F))+E[0]-198630844|0;D=(D<<6|D>>>26)+B|0;F+=(B^(D|~G))+E[7]+1126891415|0;F=(F<<10|F>>>22)+D|0;G+=(D^(F|~B))+E[14]-1416354905|0;G=(G<<15|G>>>17)+F|0;B+=(F^(G|~D))+E[5]-57434055|0;B=(B<<21|B>>>11)+G|0;D+=(G^(B|~F))+E[12]+1700485571|0;D=(D<<6|D>>>26)+B|0;F+=(B^(D|~G))+E[3]-1894986606|0;F=(F<<10|F>>>22)+D|0;G+=(D^(F|~B))+E[10]-1051523|0;G=(G<<15|G>>>17)+F|0;B+=(F^(G|~D))+E[1]-2054922799|0;B=(B<<21|B>>>11)+G|0;D+=(G^(B|~F))+E[8]+1873313359|0;D=(D<<6|D>>>26)+B|0;F+=(B^(D|~G))+E[15]-30611744|0;F=(F<<10|F>>>22)+D|0;G+=(D^(F|~B))+E[6]-1560198380|0;G=(G<<15|G>>>17)+F|0;B+=(F^(G|~D))+E[13]+1309151649|0;B=(B<<21|B>>>11)+G|0;D+=(G^(B|~F))+E[4]-145523070|0;D=(D<<6|D>>>26)+B|0;F+=(B^(D|~G))+E[11]-1120210379|0;F=(F<<10|F>>>22)+D|0;G+=(D^(F|~B))+E[2]+718787259|0;G=(G<<15|G>>>17)+F|0;B+=(F^(G|~D))+E[9]-343485551|0;B=(B<<21|B>>>11)+G|0;C[0]=D+C[0]|0;C[1]=B+C[1]|0;C[2]=G+C[2]|0;C[3]=F+C[3]|0}function r(C){var D=[],B;for(B=0;B<64;B+=4){D[B>>2]=C.charCodeAt(B)+(C.charCodeAt(B+1)<<8)+(C.charCodeAt(B+2)<<16)+(C.charCodeAt(B+3)<<24)}return D}function u(B){var D=[],C;for(C=0;C<64;C+=4){D[C>>2]=B[C]+(B[C+1]<<8)+(B[C+2]<<16)+(B[C+3]<<24)}return D}function p(J){var D=J.length,B=[1732584193,-271733879,-1732584194,271733878],F,C,I,G,H,E;for(F=64;F<=D;F+=64){t(B,r(J.substring(F-64,F)))}J=J.substring(F-64);C=J.length;I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<C;F+=1){I[F>>2]|=J.charCodeAt(F)<<(F%4<<3)}I[F>>2]|=128<<(F%4<<3);if(F>55){t(B,I);for(F=0;F<16;F+=1){I[F]=0}}G=D*8;G=G.toString(16).match(/(.*?)(.{0,8})$/);H=parseInt(G[2],16);E=parseInt(G[1],16)||0;I[14]=H;I[15]=E;t(B,I);return B}function z(J){var D=J.length,B=[1732584193,-271733879,-1732584194,271733878],F,C,I,G,H,E;for(F=64;F<=D;F+=64){t(B,u(J.subarray(F-64,F)))}J=F-64<D?J.subarray(F-64):new Uint8Array(0);C=J.length;I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<C;F+=1){I[F>>2]|=J[F]<<(F%4<<3)}I[F>>2]|=128<<(F%4<<3);if(F>55){t(B,I);for(F=0;F<16;F+=1){I[F]=0}}G=D*8;G=G.toString(16).match(/(.*?)(.{0,8})$/);H=parseInt(G[2],16);E=parseInt(G[1],16)||0;I[14]=H;I[15]=E;t(B,I);return B}function h(D){var C="",B;for(B=0;B<4;B+=1){C+=b[D>>B*8+4&15]+b[D>>B*8&15]}return C}function j(B){var C;for(C=0;C<B.length;C+=1){B[C]=h(B[C])}return B.join("")}if(j(p("hello"))!=="5d41402abc4b2a76b9719d911017c592"){k=function(B,E){var D=(B&65535)+(E&65535),C=(B>>16)+(E>>16)+(D>>16);return C<<16|D&65535}}if(typeof ArrayBuffer!=="undefined"&&!ArrayBuffer.prototype.slice){(function(){function B(D,C){D=D|0||0;if(D<0){return Math.max(D+C,0)}return Math.min(D,C)}ArrayBuffer.prototype.slice=function(J,K){var C=this.byteLength,E=B(J,C),F=C,G,I,D,H;if(K!==undefined){F=B(K,C)}if(E>F){return new ArrayBuffer(0)}G=F-E;I=new ArrayBuffer(G);D=new Uint8Array(I);H=new Uint8Array(this,E,G);D.set(H);return I}})()}function c(B){if(/[\u0080-\uFFFF]/.test(B)){B=unescape(encodeURIComponent(B))}return B}function m(F,E){var D=F.length,G=new ArrayBuffer(D),B=new Uint8Array(G),C;for(C=0;C<D;C+=1){B[C]=F.charCodeAt(C)}return E?B:G}function q(B){return String.fromCharCode.apply(null,new Uint8Array(B))}function v(E,C,D){var B=new Uint8Array(E.byteLength+C.byteLength);B.set(new Uint8Array(E));B.set(new Uint8Array(C),E.byteLength);return D?B:B.buffer}function w(E){var C=[],D=E.length,B;for(B=0;B<D-1;B+=2){C.push(parseInt(E.substr(B,2),16))}return String.fromCharCode.apply(String,C)}function A(){this.reset()}A.prototype.append=function(B){this.appendBinary(c(B));return this};A.prototype.appendBinary=function(D){this._buff+=D;this._length+=D.length;var C=this._buff.length,B;for(B=64;B<=C;B+=64){t(this._hash,r(this._buff.substring(B-64,B)))}this._buff=this._buff.substring(B-64);return this};A.prototype.end=function(D){var G=this._buff,F=G.length,E,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B;for(E=0;E<F;E+=1){C[E>>2]|=G.charCodeAt(E)<<(E%4<<3)}this._finish(C,F);B=j(this._hash);if(D){B=w(B)}this.reset();return B};A.prototype.reset=function(){this._buff="";this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};A.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}};A.prototype.setState=function(B){this._buff=B.buff;this._length=B.length;this._hash=B.hash;return this};A.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length};A.prototype._finish=function(C,G){var E=G,D,F,B;C[E>>2]|=128<<(E%4<<3);if(E>55){t(this._hash,C);for(E=0;E<16;E+=1){C[E]=0}}D=this._length*8;D=D.toString(16).match(/(.*?)(.{0,8})$/);F=parseInt(D[2],16);B=parseInt(D[1],16)||0;C[14]=F;C[15]=B;t(this._hash,C)};A.hash=function(C,B){return A.hashBinary(c(C),B)};A.hashBinary=function(D,C){var E=p(D),B=j(E);return C?w(B):B};A.ArrayBuffer=function(){this.reset()};A.ArrayBuffer.prototype.append=function(B){var E=v(this._buff.buffer,B,true),D=E.length,C;this._length+=B.byteLength;for(C=64;C<=D;C+=64){t(this._hash,u(E.subarray(C-64,C)))}this._buff=C-64<D?new Uint8Array(E.buffer.slice(C-64)):new Uint8Array(0);return this};A.ArrayBuffer.prototype.end=function(D){var G=this._buff,F=G.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E,B;for(E=0;E<F;E+=1){C[E>>2]|=G[E]<<(E%4<<3)}this._finish(C,F);B=j(this._hash);if(D){B=w(B)}this.reset();return B};A.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};A.ArrayBuffer.prototype.getState=function(){var B=A.prototype.getState.call(this);B.buff=q(B.buff);return B};A.ArrayBuffer.prototype.setState=function(B){B.buff=m(B.buff,true);return A.prototype.setState.call(this,B)};A.ArrayBuffer.prototype.destroy=A.prototype.destroy;A.ArrayBuffer.prototype._finish=A.prototype._finish;A.ArrayBuffer.hash=function(B,D){var E=z(new Uint8Array(B)),C=j(E);return D?w(C):C};o.SparkMD5=A});Dynamsoft.Ready(function(e,b){var a=Dynamsoft;if(!e.product.bHTML5Edition){return}var g=e.html5.Funs,d=g.DEF;function f(h){var i=h;d(i,"width",{get:function(){return this._parent._width},set:function(j){this.SetSize(j,false)}});d(i,"height",{get:function(){return this._parent._height},set:function(j){this.SetSize(false,j)}})}function c(j,i,m){var o=j,l=false,n=false,k;if(!o._isBindViewer()){return false}if(e.isString(i)){if(i.length>0){if(i.charAt(i.length-1)==="%"){l=i}}}if(!l&&i){k=parseInt(i);if(k){l=k+"px"}}if(e.isString(m)){if(m.length>0){if(m.charAt(m.length-1)==="%"){n=m}}}if(!n&&m){k=parseInt(m);if(k){n=k+"px"}}if(l){o._width=l}if(n){o._height=n}return g.changeImageUISize(o,l,n)}e.html5.STwainStyle=function(i){var h=this;h._parent=i;f(h)};e.html5.STwainStyle.prototype.SetSize=function(i,j){c(this._parent,i,j)}});Dynamsoft.Ready(function(d,c){if(!d.product.bHTML5Edition){return}function b(){}var a=239514000;b.prototype.convertServerIdToGuid=function(f){var g=this,e;e=1*f+a;return e};b.prototype.convertGuidToServerId=function(f){var g=this,e;e=1*f-a;return e};d.Index=d.Index||{};d.Index.ImageIndexManager=b});Dynamsoft.Ready(function(a,g){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var i=a.html5.Funs,e=Dynamsoft.dcp,f=!1,d=!0;a.html5.STwain=function(j){var k=this,l=j||{},n=l.bNoViewer,m=l.bLocalService;k._destroy=false;k.config=l;k.clientId=i.getRandom();k._id=l.id;if(l.container){k._containerElement=l.container}else{if(l.containerID){k._containerElement=a.get(l.containerID)}}k._bBindViewer=n?f:d;k._customIP=f;k._ssl=a.detect.ssl;if(l.customIP){k._customIP=d;k._host=l.host}else{k._host=a.product.host}if(k._host==""||a.isLocalIP(k._host)){k._bLocalService=m?d:f;k._bRemoteMode=f}else{k._bLocalService=d;k._bRemoteMode=d}if(l.customIP||e.bEnhancedMode){k._port=l.port}k.bReady=f;k.httpFormFields={};k._objWS=null;k.__wsRetry=0;k.curCommand=[];k.__OnInternetTransferPercentage=l.onInternetTransferPercentage||"";k.__OnInternetTransferPercentageEx=l.onInternetTransferPercentageEx||"";k.__OnReady=l.onReady||null;k.__OnWSReconnect=l.onWSReconnect||null;k.__OnWSClose=l.onWSClose||null;k.__OnWSMessage=l.onWSMessage||null;k.__OnWSError=l.onWSError||null;k.__OnPercentDone=l.onPercentDone||"";k.__OnPrintMsg=l.onPrintMsg||"";k.__OnResult=l.onResult||"";k.HTTPPassword=l.HTTPPassword||"";k.HTTPPort=l.HTTPPort||(a.detect.ssl?443:80);k.HTTPUserName=l.HTTPUserName||"";k.__HTTPPostResponseString="";k.__strHttpContentTypeFieldValue="application/octet-stream";k.__IfShowProgressBar=d;k.__IfShowCancelDialogWhenImageTransfer=d;k._errorCode=0;k._errorString="";k.__bLoadingImage=f;k.__bAcquireImageNow=f;k.__bOpenFileNow=f;k.__backgroundColor=f;k.__addon={};k.__remoteFilename="RemoteFile";k.__sourceName=[];k.__defaultSourceName="";k.__sourceCount=0;k.__icaSourceCount=-1;k.__serverId="";k.__bConnecting=f;k.__bTrial=f;k.__licenseInfo=f;k.__httpHeaderMap=f;k.__bForceClose=f;if(k._bLocalService){k.__strProductName=""}else{k.__strProductName=Dynamsoft.DWT.ProductName}k.__versionInfo=Dynamsoft.DWT.JSVersion;k.__bMustUpgradeService=f;k.__withCredentials=f;k._moduleSize=1024*1024;if(Dynamsoft.dcp.b64bit){k._segementUploadThreshold=4*1024*1024*1024}else{k._segementUploadThreshold=500*1024*1024}k._driverType=Dynamsoft.DWT.EnumDWT_Driver.TWAIN;k.__IfAppendImage=d;k.__maxImagesInBuffer=32767;k.__maxUploadImageSize=-1;k.__insertingIndex=-1;k.objImageIndexManager=new a.Index.ImageIndexManager(k.__maxImagesInBuffer);k._bServerPercentDone=d;k._aryBitmapCache=[];k._aryTiffTag=[];k._tiffCompressionType=Dynamsoft.DWT.EnumDWT_TIFFCompressionType.TIFF_AUTO;k._jpgQuality=80;k._pdfConvertMode=3;k._pdfRealConvertMode=3;k._pdfResolution=200;k._pdfPassword="";k._ifSSL=Dynamsoft.navInfoSync.bSSL;k._bRegistedLoad=false;k._logLevel=0;k._scaleDownThreshold=0;k._pdfWriteSetting={};k.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumUnknown;k.bPageFocus=true;k.bServerAlwaysFocusOnPopupWindow=true;if(a.License.isLTS()){k._blts=true}h(k,l)};var c=a.html5.STwain.prototype;c.getInstance=function(){return this};c._isMobileMode=function(){if(this._host==""||a.isLocalIP(this._host)){return !this._bLocalService}return false};c._isPC=function(){var j=Dynamsoft.navInfo;return j.bWin||j.bMac||j.bLinux};c._resetErr=function(){this._errorCode=0;this._errorString=""};c._isValid=function(){if(this._destroy){a.Errors.Destroyed(this);return false}return true};c._isBindViewer=function(){return this._bBindViewer};c._isNoViewer=function(){return !this._bBindViewer};c._mobileNotSupport=function(l,j){var k=this;a.Errors.MobileNotSupport(k,l);if(a.isFunction(j)){j(k.ErrorCode,k.ErrorString)}return false};c._mobileNotSupportAsync=function(k){var j=this;a.Errors.MobileNotSupport(j,k);return a.Promise.reject({code:j.ErrorCode,message:j.ErrorString})};c._nouiNotSupport=function(l,j){var k=this;a.Errors.CannotCallUIMethodWhenNotBindDefaultViewer(k,l);if(a.isFunction(j)){j(k.ErrorCode,k.ErrorString)}return false};c._OnRecieveMsg=function(o){var q=this,j;if(o.event){i.handleEvent(q,o);return}if(o.cmdId){var m=q.curCommand.length,n,l=-1;for(n=m-1;n>=0;n--){if(q.curCommand[n].cmdId==o.cmdId){l=n;j=q.curCommand.splice(l,1)[0];break}}if(l<0){return}}else{j=q.curCommand.pop()||{}}if(o.exception!==undefined&&o.description!==undefined){q._errorCode=o.exception;q._errorString=o.description}else{if(o.method!="StartScan"&&o.method!="GetAddOnVersion"){q._errorCode=0;q._errorString=""}}if(o.method=="ReadBarcode"||o.method=="OCRRecognize"||(o.request&&o.request.method=="OCRProRecognize")){if(j.sFun){j.sFun(o)}return}else{if(o.method=="ActiveUI"||o.method=="VersionInfo"||o.method=="ConvertToBase64"||o.method=="SaveSelectedImagesToBase64Binary"||o.method=="ConvertToBlob"){if(j.sFun&&o.result.length>0){j.sFun(o.result);return}}else{if(o.method=="ShowFileDialog"||o.method=="SplitTiff"||o.method=="SplitPDF"||o.method=="EncodeAsBase64"){if(j.sFun){j.sFun(o.result);return}}else{if(o.method=="SetCapabilities"){if("exception" in o&&o.exception!="0"){if(o.result.errorCode&&o.result.errorString){q._errorCode=o.result.errorCode;q._errorString=o.result.errorString}else{q._errorCode=o.exception;q._errorString=o.description}if(j.fFun){j.fFun(o.result)}o=null;return}else{if(j.sFun){j.sFun(o.result)}o=null;return}}}}}if(o.result&&o.result.length&&o.result[0]=="1"){if(j.sFun){j.sFun()}}else{if(o.exception){var p=false;if(j.fFun){p=j.fFun(q._errorString)}if(!p&&o.exception&&o.exception<0&&o.exception!=-2115){if(a.isFunction(q.__OnPrintMsg)){q.__OnPrintMsg(q._errorString)}}}else{if(o.method=="LoadImage"||o.method=="LoadImageEx"||o.method=="LoadImageFromBytes"||o.method=="LoadImageFromBase64Binary"||o.method=="LoadDibFromClipboard"||o.method=="FTPDownload"||o.method=="FTPDownloadEx"){if(j.sFun){j.sFun(o.result)}o=null;return}var k=["result:"];if(j.fFun){j.fFun(i.__pushElement(k,o.result))}}}};c._OnReady=function(q){var p=this,k;a.detect.starting=false;a.detect.bOK=true;p.bReady=true;p.__wsRetry=0;if(p._bLocalService&&Dynamsoft.DWT.IfUseWSPool){k=p._objWS;if(k===null){return}k.onopen=null;p.httpUrl=a.getHttpUrl({host:p._host,ssl:p._ssl,port:p._port});k.onmessage=function(v){var w=v.data,o,t;if(typeof(w)==="object"){w=null;v=null;return}var s=w.replace(/\0/g,"");try{s=a.parse(s)}catch(u){a.log(w)}if(s.id){a._deliverMsg(k.url,s);return}s=null};k.onclose=k.onerror=function(o){if(!a.page.bUnload&&!a.detect.starting){setTimeout(a._reconnectWSPool,500);a.detect.starting=true}if(o){a.log("websocket error: "+o)}i.hideMask(true);a.detect.bOK=false;Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(r,s){if(r==k){Dynamsoft.DWT.globalWS.splice(s,1);return false}})};if(q){p._innerActiveUI(function(s){var u=p.__serverId,o,v,t;if(s&&s.length>=6){o=s[1];v=s[2];t=s[5];p.__strProductName=v;if(a.isString(t)){if(t=="win"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow}else{if(t=="linux"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux}else{if(t=="mac"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumMac}else{if(t=="embed"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumEmbed}else{if(t=="chromeos"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumChromeOS}}}}}}}else{if(s&&s.length>=3){o=s[1];v=s[2];p.__strProductName=v}else{if(s&&s.length>=2){o=s[1]}else{a.log("ActiveUI return parameters error.")}}}if(v){v=v.toLowerCase()}p.__serverId=o;if(p._blts){Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(r){a.closeProgress("Reconnect");return p.SetLTSLicenseAsync(r.ar)}).then(function(r){Dynamsoft.DWT.laddDWTObj(p);Dynamsoft.DWT.lcheckLic(Dynamsoft.DWT.EnumInstance.dwt_desktop,r)},function(r){if(r){Dynamsoft.DWT.lsetException((r.code||r.ltsErrorCode),r.message);Dynamsoft.DWT.OnLicenseException()}p.__unload();Dynamsoft.DWT.ContainerMap={};a.detect.arySTwains.splice(0);a.detect.arySTwainsByIP.splice(0)})}else{a.closeProgress("Reconnect");p.SetProductKeyAsync(Dynamsoft.DWT.ProductKey)}if(u!=o){a.Errors.Server_Restarted(p);if(p._ImgManager){p._ImgManager.clear();p._ImgManager.OnReady()}}else{if(p._ImgManager){p._innerFunRawV2("HowManyImagesInBuffer").then(function(r){if(r&&r.result&&r.result[0]==0){p._ImgManager.clear()}p._ImgManager.OnReady();p._resetErr()})}}});return}if(a.isLocalIP(p._host)){a.LS.item("DWT_port",p._port);a.LS.item("DWT_ssl",p._ssl?"true":"false")}}else{if(p._bLocalService&&!Dynamsoft.DWT.IfUseWSPool){var j,n;k=p._objWS;if(p._customIP){n={host:p._host,ssl:p._ssl,port:p._port}}else{n=a.detect.urls[a.detect.cUrlIndex];if(n){n.host=a.product.host}else{n={host:a.product.host,ssl:p._ssl,port:p._port}}}j=a.getHttpUrl(n);if(k===null){return}k.onopen=null;p.httpUrl=j;k.onmessage=function(w){var x=w.data,o,t;if(typeof(x)==="object"){x=null;w=null;return}if(p.__OnWSMessage){p.__OnWSMessage(x)}var s=x.replace(/\0/g,"");if(s.indexOf('"method" : "EnableBuffer"')>=0||s.indexOf('"method" : "GetBuffer"')>=0){Dynamsoft.DWT.lwsproc(s);return}if(s.indexOf("Exception:")>=0||s.indexOf("Error")==0){var v=x;o=p.curCommand.pop()||{};t=false;a.log(v+"@"+o.cmd);if(o.fFun){t=o.fFun(v)}if(!t&&a.isFunction(p.__OnPrintMsg)){p.__OnPrintMsg(v)}return}try{s=a.parse(s)}catch(u){a.log(x)}p._OnRecieveMsg(s);s=null};k.onclose=function(){p.bReady=false;p.__wsRetry=0;a.Errors.Server_Invalid(p);if(!p.__bForceClose&&!a.page.bUnload&&!a.detect.starting){setTimeout(function(){a._checkAndReconnect(p._host,p._port)},500);a.detect.starting=true}if(p.__OnWSClose){p.__OnWSClose()}i.hideMask(true);a.detect.bOK=false;p.__bForceClose=false;Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(o,r){if(o==k){Dynamsoft.DWT.globalWS.splice(r,1);return false}})};k.onerror=function(o){p.bReady=false;p.__wsRetry=0;a.Errors.Server_Invalid(p);a.detect.bOK=false;if(!a.page.bUnload&&!a.detect.starting){setTimeout(function(){a._checkAndReconnect(p._host,p._port)},500);a.detect.starting=true}if(o){a.log("websocket error: "+o)}if(p.__OnWSError){p.__OnWSError()}i.hideMask(true)};if(q){p._innerActiveUI(function(t){var v=p.__serverId,o,w,u;if(t&&t.length>=6){o=t[1];w=t[2];u=t[5];p.__strProductName=w;if(a.isString(u)){if(u=="win"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow}else{if(u=="linux"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux}else{if(u=="mac"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumMac}else{if(u=="embed"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumEmbed}else{if(u=="chromeos"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumChromeOS}}}}}}}else{if(t&&t.length>=3){o=t[1];w=t[2];p.__strProductName=w}else{if(t&&t.length>=2){o=t[1]}else{a.log("ActiveUI return parameters error.")}}}if(w){w=w.toLowerCase()}p.__serverId=o;if(p._blts){Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(r){a.closeProgress("Reconnect");return p.SetLTSLicenseAsync(r.ar)}).then(function(r){Dynamsoft.DWT.laddDWTObj(p);Dynamsoft.DWT.lcheckLic(Dynamsoft.DWT.EnumInstance.dwt_desktop,r)},function(r){if(r){Dynamsoft.DWT.lsetException((r.code||r.ltsErrorCode),r.message);Dynamsoft.DWT.OnLicenseException()}p.__unload();Dynamsoft.DWT.ContainerMap={};a.detect.arySTwains.splice(0);a.detect.arySTwainsByIP.splice(0)})}else{a.closeProgress("Reconnect");p.SetProductKeyAsync(Dynamsoft.DWT.ProductKey)}if(v!=o){a.Errors.Server_Restarted(p);if(p._ImgManager){p._ImgManager.clear();p._ImgManager.OnReady()}if(a.isFunction(p.__OnWSReconnect)){var s;s=a.getWSUrl(p._host,p._port,p._ssl);p.__OnWSReconnect(s,j)}}else{if(p._ImgManager){p._innerFunRawV2("HowManyImagesInBuffer").then(function(r){if(r&&r.result&&r.result[0]==0){p._ImgManager.clear()}p._ImgManager.OnReady();p._resetErr()})}}});return}if(a.isLocalIP(p._host)){a.LS.item("DWT_port",n.port);a.LS.item("DWT_ssl",n.ssl?"true":"false")}}}a.attachProperty(p);a.html5.ui.init(p,p.config);a.html5.ui.addMethods(p);a.attachPropertyUI(p);p._ImgManager.OnReady();if(p._bLocalService){p._innerActiveUI(function(u){var s,y,v,x=false;if(u&&u.length>=6){s=u[1];y=u[2];v=u[5];p.__strProductName=y;if(a.isString(v)){if(v=="win"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow}else{if(v=="linux"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux}else{if(v=="mac"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumMac}else{if(v=="embed"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumEmbed}else{if(v=="chromeos"){p.__serverPlatform=Dynamsoft.DWT.EnumDWT_PlatformType.enumChromeOS}}}}}}}else{if(u&&u.length>=3){s=u[1];y=u[2];p.__strProductName=y}else{if(u&&u.length>=2){s=u[1];x=true}else{x=true;a.log("ActiveUI return parameters error.")}}}a.attachAddon(p);if(y){y=y.toLowerCase()}p.__serverId=s;p.__bMustUpgradeService=x;if(!x){a.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_SetLicenseForDWT);var t;if(p._blts){var o=p._bLocalService;if(a.isUndefined(o)&&!a.env.bMobile||o==true){a.detect.showMask()}t=Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(r){a.detect.hideMask();return p.SetLTSLicenseAsync(r.ar)}).then(function(r){Dynamsoft.DWT.laddDWTObj(p);Dynamsoft.DWT.lcheckLic(Dynamsoft.DWT.EnumInstance.dwt_desktop,r)})}else{var w=Dynamsoft.DWT.ProductKey;if(w==""||w=="******"){t=a.Promise.resolve(0)}else{t=p.SetProductKeyAsync(w)}}t=t.then(function(){a.detect.hideMask();a.closeLoadingMsg();var z=false;if(p._blts){var r=Dynamsoft.DWT.licenseException;if(r.code==0){if(a.License.checkProductKey(p,{Core:true},true)||a.License.checkProductKey(p,{Webcam:true},true)){Dynamsoft.DWT.lclex();z=true}else{a.License.checkProductKey(p,{Core:true},true)}}}else{if(a.License.checkProductKey(p,{Core:true})||a.License.checkProductKey(p,{Webcam:true},true)){z=true}else{a.License.checkProductKey(p,{Core:true},false,true)}}if(a.isFunction(p.__OnReady)){p.__OnReady(p)}if(z){return p._setConvertModeAsync(p._pdfConvertMode)["catch"](function(){})}},function(r){a.detect.hideMask();a.closeLoadingMsg();if(p._blts&&r){Dynamsoft.DWT.lsetException((r.code||r.ltsErrorCode),r.message);Dynamsoft.DWT.OnLicenseException();p.__unload();Dynamsoft.DWT.ContainerMap={};a.detect.arySTwains.splice(0);a.detect.arySTwainsByIP.splice(0);return}if(p._blts){a.License.checkProductKey(p,{Core:true},true)}else{if(a.License.checkProductKey(p,{Core:true})||a.License.checkProductKey(p,{Webcam:true},true)){}else{a.License.checkProductKey(p,{Core:true},false,true)}}})}else{if(a.isFunction(p.__OnReady)){p.__OnReady(p)}}})}else{a.attachAddon(p);p.__serverId=1;p.__bMustUpgradeService=false;a.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_SetLicenseForDWT);var l;if(p._blts){Dynamsoft.DWT.li({instanceMode:Dynamsoft.DWT.EnumInstance.dwt_browser});l=Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_browser).then(function(o){return p.SetLTSLicenseAsync(o.ar)}).then(function(o){Dynamsoft.DWT.laddDWTObj(p);Dynamsoft.DWT.lcheckLic(Dynamsoft.DWT.EnumInstance.dwt_browser,o)},function(o){if(o){Dynamsoft.DWT.lsetException((o.code||o.ltsErrorCode),o.message);Dynamsoft.DWT.OnLicenseException()}p.__unload();Dynamsoft.DWT.ContainerMap={};a.detect.arySTwains.splice(0);a.detect.arySTwainsByIP.splice(0)})}else{var m=Dynamsoft.DWT.ProductKey;if(m==""||m=="******"){l=a.Promise.resolve(0)}else{l=p.SetProductKeyAsync(m)}}l.then(function(){a.closeLoadingMsg();if(p.ErrorCode<0){a.License.promptLicenseErr(p);return}var r=false;if(p._blts){var o=Dynamsoft.DWT.licenseException;if(o.code==0){if(a.License.checkProductKey(p,{Core:true},true)||a.License.checkProductKey(p,{Webcam:true},true)){Dynamsoft.DWT.lclex();r=true}else{a.License.checkProductKey(p,{Core:true},true)}}}else{if(a.License.checkProductKey(p,{Core:true})||a.License.checkProductKey(p,{Webcam:true},true)){if(a.License.checkProductKey(p,{Core:true,Wasm:true},true,true)){r=true}}else{a.License.checkProductKey(p,{Core:true},false,true)}}if(r){if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(p._logLevel)}p._setConvertMode(p._pdfConvertMode)}if(a.isFunction(p.__OnReady)){p.__OnReady(p)}},function(r){a.closeLoadingMsg();p.errorCode=r.code;p.errorString=r.message;var o=['<div style="padding:30px;border:1px solid #CCCCCC;background:#FFFFFF">',r.message,"</div>"];a.ShowLicenseDialog(o.join(""),{width:390,height:0,bClose:false,seconds:100})})}};c.__unload=function(){var k=this,j;if(k._destroy){return}if(k._ImgManager){k._ImgManager.clear()}if(k.bReady){j=k._objWS;if(j){k.__bForceClose=true;if(Dynamsoft.DWT.IfUseWSPool){a._removeFromWSPool(k)}else{j.close()}k.curCommand.splice(0);delete k._objWS}k.bReady=false}if(k.__addon){if(k.__addon.Camera&&k.__addon.Camera._viewer&&k.__addon.Camera.getStatus()!=""){k.__addon.Camera.closeSource()["catch"](function(){})}}if(k._isBindViewer()){if(k._ImgManager){k._ImgManager._UIView.UnbindView()}a.html5.ui.unLoad(k)}if(k._ImgManager){k._ImgManager.dispose();k._ImgManager=null;k.Viewer=null}if(k.objImageIndexManager){k.objImageIndexManager=null}Dynamsoft.DWT.lremoveDWTObj(k);k._destroy=true};function h(k,l){var j=l||{};k.__OnAfterOperate=j.onAfterOperate||"";k.__OnBeforeOperate=j.onBeforeOperate||"";k.__OnOperateStatus=j.onOperateStatus||"";k.__OnBitmapChanged=j.onBitmapChanged||"";k.__OnGetFilePath=j.onGetFilePath||"";k.__OnPreAllTransfers=j.onPreAllTransfers||"";k.__OnPreTransfer=j.onPreTransfer||"";k.__OnPostLoad=j.onPostLoad||"";k.__OnPostTransfer=j.onPostTransfer||"";k.__OnPostAllTransfers=j.onPostAllTransfers||"";k.__OnSourceUIClose=j.onSourceUIClose||"";k.__OnTransferCancelled=j.onTransferCancelled||"";k.__OnTransferError=j.onTransferError||"";k.__OnInternetTransferPercentage=j.onInternetTransferPercentage||"";k.__OnInternetTransferPercentageEx=j.onInternetTransferPercentageEx||"";k.__OnRemoteScanStatusAsync=j.onRemoteScanStatusAsync||""}});Dynamsoft.Ready(function(a,F){var x=Dynamsoft;if(!a.product.bHTML5Edition){return}var C=Dynamsoft.DWT,D=Dynamsoft.navInfo,E=a.each,c=a.html5.STwain,J=c.prototype,L=5001,m=3006;var G={Auto:0,G3:1,G4:2,LZW:3,ZIP:4,JPEG:5};a.MobileFuns={makeParams:function(){return arguments},_innerSaveLocal:function(N,O,R){var P=window,Q=Dynamsoft.navInfo,U=P.requestFileSystem||P.webkitRequestFileSystem||P.mozRequestFileSystem;if((Q.biPad||Q.biPhone)&&!U){if(Q.bSafari&&parseFloat(Q.strBrowserVersion)<13||!Q.bSafari){var S=window.open(N,"","",false);setTimeout(function(){S.document.title=O},100);return true}}var V=document.createElementNS("http://www.w3.org/1999/xhtml","a");V.href=N;V.download=O;V.target="_blank";document.body.appendChild(V);if(Q.bEdge){V.click()}else{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",true,false);V.dispatchEvent(T)}document.body.removeChild(V);return true},saveLocal:function(N,P,O){if(a.isString(N)&&(N.indexOf("blob:http://")>-1)){a.MobileFuns._innerSaveLocal(N,P,O)}else{if(N instanceof Blob){a.MobileFuns._innerSaveLocal(URL.createObjectURL(N),P,O)}else{if(N instanceof ArrayBuffer){a.MobileFuns._innerSaveLocal(URL.createObjectURL(new Blob([N])),P,O)}else{a.MobileFuns._innerSaveLocal(N,P,O)}}}},dataURLtoBlob:function(P){var N=P.split(","),R=N[0].match(/:(.*?);/)[1],O,T,Q;try{O=atob(N[1])}catch(S){O="";return false}T=O.length;Q=new Uint8Array(T);while(T--){Q[T]=O.charCodeAt(T)}return new Blob([Q],{type:R})},appendTiffPage:function(P,U,V,N){var S=P,R=U,Q=V.context.bShowPercentProgress,T=S._aryTiffTag.length;if(T>0){V.context.tagIndex=0;if(T>32){T=32}for(var O=0;O<T;O++){R=R.then(function(Y){var W=V.context.tagIndex;var X=S._aryTiffTag[W];return V.addTag(X.tag,X.content,X.isBinary)});R=R.then(function(){var W=V.context.tagIndex;V.context.tagIndex=W+1})}}R=R.then(function(){var W=V.context.aryIndex;var X=V.context.cIndex;V.context.revokeUrl=false;return S._ImgManager.getWebViewer().GetImageData(S._ImgManager.getUidByIndex(W[X]))});if(S._scaleDownThreshold<=0){}else{R=R.then(function(X){var W=X&&X.metadata?X.metadata:{};return Dynamsoft.ImageProcWrapper.resize(X.oriData,W.width,W.height,S._scaleDownThreshold)});R=R.then(function(W){V.context.revokeUrl=W.imageData;return{oriData:W.imageData}})}R=R.then(function(Y){var X=Dynamsoft.DWT.EnumDWT_ImageType.IT_ALL,W=V.context.tiffFormat;return V.appendImage(Y.oriData,X,W,S._jpgQuality)});R=R.then(function(W){if(V.context.revokeUrl){a.MobileFuns.revoke(V.context.revokeUrl)}V.context.revokeUrl=false;return W});if(Q){R=R.then(function(){var X=V.context.aryIndex;var aa=X.length;var Z=V.context.cIndex;var Y=(Z+1);var W=(100*Y)/(1*aa);S._OnPercentDone([0,W,Y+"/"+aa,""])})}R=R.then(function(){var W=V.context.cIndex;V.context.cIndex=(W+1);return(W+1)});return R},isPDF:function(O){var N=O;if(O instanceof ArrayBuffer){N=new Uint8Array(O.slice(0,4))}if(N instanceof Uint8Array){if(N[0]==37&&N[1]==80&&N[2]==68&&N[3]==70){return true}}return false},isTIFF:function(O){var N=O;if(O instanceof ArrayBuffer){N=new Uint8Array(O.slice(0,4))}if(N instanceof Uint8Array){if(N[0]==73&&N[1]==73&&N[2]==42&&N[3]==0||N[0]==77&&N[1]==77&&N[2]==0&&N[3]==42){return true}}return false},isJP2:function(O){var N=O;if(O instanceof ArrayBuffer){N=new Uint8Array(O.slice(0,8))}if(N instanceof Uint8Array){if(N[0]==0&&N[1]==0&&N[2]==0&&N[3]==12&&N[4]==106&&N[5]==80&&N[6]==32&&N[7]==32||N[0]==255&&N[1]==79&&N[2]==255&&N[3]==81){return true}}return false},unloadWasm:function(){if(g){g.terminate();g=null}if(a.detect.wasmScriptLoaded&&Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.wasmLoad=false;return Dynamsoft.WasmEnv.unload()}return a.Promise.resolve()},loadCallback:function(Q){if(Q&&Q.customData){var X=Q.customData,S=Q.fPdfReader,ab=Q.imgCore,N=X.src,W=X.imgType,T=X.index,Y=X.password,P=X.resolution,V=X.convertMode,O=false,U,R=Dynamsoft.DWT.EnumDWT_ImageType;if(W==R.IT_PDF){if(!S){S=n();O=true}U=function(ac){S.close();if(O){S.terminate()}};return S.open(N,Y).then(function(ac){return S.readPage(T,P,V,Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG,false,false)},U).then(function(ac){S.close();if(O){S.terminate()}return ac.imageData},U)}else{if(W==R.IT_TIF){if(!ab){ab=q();O=true}var aa=0;U=function(ac){if(O){ab.terminate()}};return ab.openTiff(N).then(function(ac){return ab.readTiff(T,Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG,false)}).then(function(ac){if(O){ab.terminate()}return ac.imageData},U)}else{if(W==R.IT_PNG||W==R.IT_JPG||W==R.IT_BMP){if(!ab){ab=q()}O=true;var Z=X.quality;U=function(ac){if(O){ab.terminate()}};return ab.readImage(N,Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG,Z,false).then(function(ac){if(O){ab.terminate()}return ac.imageData},U)}}}}else{}return a.Promise.resolve()},convertOutputType:function(N){return N},isBlobUrl:function(N){return a.isString(N)&&(N.indexOf("blob:http://")>-1)},revoke:function(N){if(a.MobileFuns.isBlobUrl(N)){return(window.URL||window.webkitURL).revokeObjectURL(N)}return true}};J._innerSendToMobile=function(S,Q,O,N,P){var R=this;if(S=="GetLicenseInfo"||S=="SetLTSLicense"){a.showMask();return y(R,Q).then(function(T){a.hideMask();if(a.isFunction(N)){N(T)}},function(T){a.hideMask();a.Errors.GetLicenseInfoFailed(R,T);if(P){P(R._errorCode,R._errorString)}})}if(!a.License.checkProductKey(R,{Core:true,Wasm:true},true)){if(P){P(R._errorCode,R._errorString)}return false}if(S=="SaveImage"){j(R,Q).then(function(U){var T=U.blobUrl;if(N){N(T,U.type)}setTimeout(function(){a.MobileFuns.revoke(T)},1000)},function(){if(a.isFunction(P)){P(R._errorCode,R._errorString)}})}else{R._innerSendToMobileV2(S,Q).then(N,function(){if(a.isFunction(P)){P(R._errorCode,R._errorString)}})}return true};J._innerSendToMobileV2=function(P,N){var O=this;if(P=="GetLicenseInfo"||P=="SetLTSLicense"){return y(O,N)}if(!a.License.checkProductKey(O,{Core:true,Wasm:true},true)){return a.Promise.reject(Dynamsoft.DWT.licenseException)}if(P=="LoadImageFromBinary"){return p(O,N)}else{if(P=="RotateEx"){return h(O,N)}else{if(P=="Flip"){return z(O,N)}else{if(P=="Mirror"){return i(O,N)}else{if(P=="Invert"){return I(O,N)}else{if(P=="SaveImage"){return j(O,N)}else{if(P=="Crop"){return H(O,N)}else{if(P=="Erase"){return e(O,N)}else{if(P=="ChangeImageSize"){return o(O,N)}else{if(P=="GetSkewAngleOnly"){return f(O,N)}else{if(P=="GetSkewAngle"){return M(O,N)}else{if(P=="ConvertToGrayScale"){return B(O,N)}else{if(P=="ConvertToBWScale"){return l(O,N)}else{if(P=="SetDPI"){return d(O,N)}else{if(P=="SetImageWidth"){return s(O,N)}else{if(P=="IsTextBasedPDF"){return r(O,N)}else{if(P=="GetMD5"){return K(O,N)}}}}}}}}}}}}}}}}}return a.Promise.reject({code:-1000,message:"invalid method: "+P})};var A=0,g=null;var b=function(){var N=C.ProductKey;if(a.License.isLTS()&&Dynamsoft.WasmEnv){N=Dynamsoft.WasmEnv.productKey}return N},q=function(){return new Dynamsoft.Imagecore(b(),1)},t=function(){return new Dynamsoft.ImageProc(b(),1)},n=function(){return new Dynamsoft.PdfReader(b(),1)},v=function(){return new Dynamsoft.PdfWriter(b(),1)},w=function(){if(!g){g=new Dynamsoft.ImageProc(b(),1)}return g},r=function(T,O){var R=O[0],U,N,P,V,Q=Dynamsoft.DWT.EnumDWT_ImageType;if(R instanceof FileList){U=R[0]}else{if(R instanceof Blob){U=R}else{if(R instanceof ArrayBuffer||R instanceof Uint8Array){U=new Blob([R]);if(a.MobileFuns.isPDF(R)){V=Q.IT_PDF}else{if(a.MobileFuns.isTIFF(R)){V=Q.IT_TIF}else{if(a.MobileFuns.isJP2(R)){V=Q.IT_J2K}else{V=Q.IT_PNG}}}}else{U=R}}}if(a.isUndefined(V)){if(U.type){if(U.type=="application/pdf"){V=Q.IT_PDF}}else{V=a.html5.Funs.getImageType(U.name)}}if(V==Q.IT_PDF){var S=n();a.showMask();return S.open(U,T._pdfPassword).then(function(W){a.hideMask();S.close();S.terminate();return W.isTextBased},function(W){a.hideMask();a.Errors.LoadImageFailed(T,W);S.close();S.terminate();throw {code:T._errorCode,message:T._errorString}})}else{a.Errors.LoadImageFailed(T,"not pdf.");return a.Promise.reject({code:T._errorCode,message:T._errorString})}},p=function(W,Q){var U=Q[0],O=Q[1],X,N,R,ab,aa=false,S=0,T=Dynamsoft.DWT.EnumDWT_ImageType;if(U instanceof FileList){X=U[0]}else{if(U instanceof Blob){X=U}else{if(U instanceof ArrayBuffer||U instanceof Uint8Array){X=new Blob([U]);if(a.MobileFuns.isPDF(U)){ab=T.IT_PDF}else{if(a.MobileFuns.isTIFF(U)){ab=T.IT_TIF}else{if(a.MobileFuns.isJP2(U)){ab=T.IT_J2K}else{ab=T.IT_PNG}}}}else{X=U}}}if(a.isUndefined(X)){a.Errors.InvalidSourceFile(W);return a.Promise.reject({code:W._errorCode,message:W._errorString})}if(a.isUndefined(ab)){if(X.type){if(X.type=="application/pdf"){ab=T.IT_PDF}else{if(X.type=="image/png"){ab=T.IT_PNG}else{if(X.type=="image/jpeg"){ab=T.IT_JPG}else{if(X.type=="image/bmp"){ab=T.IT_BMP}else{if(X.type=="image/tiff"){ab=T.IT_TIF}else{if(X.type=="image/jp2"){ab=T.IT_J2K}else{ab=a.html5.Funs.getImageType(X.name)}}}}}}}else{ab=a.html5.Funs.getImageType(X.name)}}N="";R=X.name;if(ab==T.IT_JPG||ab==T.IT_PNG||ab==T.IT_BMP||ab==T.IT_J2K){var Z=W._jpgQuality;aa=q();a.showMask();return aa.readImage(X,T.IT_JPG,Z,false).then(function(ae){var ah=0;if(O){ah=m}else{if(ae.originalFormat==1){ah=T.IT_BMP}else{if(ae.originalFormat==2){ah=T.IT_JPG}else{if(ae.originalFormat==3){ah=T.IT_PNG}else{if(ae.originalFormat==14){ah=T.IT_J2K}}}}}var ai={src:ae.imageData,imgType:ae.imageType,verify:ah,dataType:"url"};if(ae){var ag={};ag.width=ae.imageWidth;ag.height=ae.imageHeight;ag.bitDepth=ae.imageBitDepth;ag.resolutionX=ae.imageXResolution;ag.resolutionY=ae.imageYResolution;ai.metadata=ag}A++;var af=false;try{W._OnBitmapChanged(["10",""+A,1,W._ImgManager.getCurrentImageIndex(),W._ImgManager.count(),ai])}catch(ad){af=true;a.Errors.SystemExceptionError(W,ad.message)}a.hideMask();if(!af&&a.isFunction(W.__OnPostLoad)){try{W.__OnPostLoad(N,R,ab)}catch(ac){af=true;a.Errors.SystemExceptionError(W,ac.message)}}aa.terminate();Dynamsoft.DWT.lavrf_(1,Dynamsoft.DWT.EnumInstance.dwt_browser);if(af){throw {code:W._errorCode,message:W._errorString}}},function(ac){a.Errors.LoadImageFailed(W,ac);a.hideMask();aa.terminate();throw {code:W._errorCode,message:W._errorString}})}else{if(ab==T.IT_PDF){var V=n();V.context={};a.showProgress(W);W._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingPdf,""]);return V.open(X,W._pdfPassword).then(function(ae){var ad=ae.PdfCount;W._OnPercentDone([0,0,"0/"+ad,""]);var ac=a.Promise.resolve(0);V.context.cIndex=0;V.context.pdfCount=ad;for(S=0;S<ad;S++){ac=ac.then(function(){var af=V.context.cIndex;return V.readPage(af,W._pdfResolution,W._pdfRealConvertMode,Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG,false,false)});ac=ac.then(function(ai){var aj=V.context.cIndex,an=V.context.pdfCount,ak=(aj+1),ah=(100*ak)/(1*an),ag={},ao=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF;if(ai.realReadMode==1){ao=L}W._OnPercentDone([0,ah,ak+"/"+an,""]);if(a.isArray(ai.imageInfos)&&ai.imageInfos.length>0){var al=ai.imageInfos[0];ag.width=al.imageWidth;ag.height=al.imageHeight;ag.bitDepth=al.imageBitDepth;ag.resolutionX=al.imageXResolution;ag.resolutionY=al.imageYResolution}A++;var af={src:ai.imageData,dataType:"url",imgType:Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF,verify:ao,index:ai.pageIndex,metadata:ag,imageId:A};try{W._OnBitmapChanged(["10",""+A,1,W._ImgManager.getCurrentImageIndex(),W._ImgManager.count(),af])}catch(am){a.Errors.SystemExceptionError(W,am.message);throw 0}V.context.cIndex=(aj+1)})}return ac.then(function(){a.closeProgress();V.close();V.terminate();Dynamsoft.DWT.lavrf_(1,Dynamsoft.DWT.EnumInstance.dwt_browser);if(a.isFunction(W.__OnPostLoad)){W.__OnPostLoad(N,R,ab)}},function(af){a.closeProgress();V.close();V.terminate();if(af){a.Errors.LoadImageFailed(W,af)}throw {code:W._errorCode,message:W._errorString}})},function(ac){a.closeProgress();V.close();V.terminate();if(ac){a.Errors.LoadImageFailed(W,ac)}throw {code:W._errorCode,message:W._errorString}})}else{if(ab==T.IT_TIF){var Y=0;aa=q();a.showProgress(W);W._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingTiff,""]);var P=aa.openTiff(X);return P.then(function(ad){var ac=ad.pageCount,ag=ad.imageInfos;var af=a.Promise.resolve(0);W._OnPercentDone([0,0,"0/"+ac,""]);for(var ae=0;ae<ac;ae++){af=af.then(function(ah){return aa.readTiff(ah,Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG,false).then(function(ak){var al=(ah+1);var ai=(100*al)/(1*ac);W._OnPercentDone([0,ai,al+"/"+ac,""]);A++;var am={src:ak.imageData,dataType:"url",imgType:Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF,verify:Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF,index:ah,metadata:ag[ah],imageId:A};try{W._OnBitmapChanged(["10",""+A,1,W._ImgManager.getCurrentImageIndex(),W._ImgManager.count(),am])}catch(aj){a.Errors.SystemExceptionError(W,aj.message);throw 0}return(ah+1)})})}return af.then(function(){a.closeProgress();aa.closeTiff();aa.terminate();Dynamsoft.DWT.lavrf_(1,Dynamsoft.DWT.EnumInstance.dwt_browser);if(a.isFunction(W.__OnPostLoad)){W.__OnPostLoad(N,R,ab)}},function(ah){a.closeProgress();aa.closeTiff();aa.terminate();if(ah){a.Errors.LoadImageFailed(W,ah)}throw {code:W._errorCode,message:W._errorString}})},function(ac){a.closeProgress();aa.closeTiff();aa.terminate();a.Errors.LoadImageFailed(W,ac);throw {code:W._errorCode,message:W._errorString}})}else{a.Errors.LoadImageFailed(W,"invalid image type.");return a.Promise.reject({code:W._errorCode,message:W._errorString})}}}},u=function(V,P){var T=P[0],W,N,Q,aa,Z=false,R=0,S=Dynamsoft.DWT.EnumDWT_ImageType;if(T instanceof FileList){W=T[0]}else{if(T instanceof Blob){W=T}else{if(T instanceof ArrayBuffer||T instanceof Uint8Array){W=new Blob([T]);if(a.MobileFuns.isPDF(T)){aa=S.IT_PDF}else{if(a.MobileFuns.isTIFF(T)){aa=S.IT_TIF}else{if(a.MobileFuns.isJP2(T)){aa=S.IT_J2K}else{aa=S.IT_PNG}}}}else{W=T}}}if(a.isUndefined(W)){a.Errors.InvalidSourceFile(V);return a.Promise.reject({code:V._errorCode,message:V._errorString})}if(a.isUndefined(aa)){if(W.type){if(W.type=="application/pdf"){aa=S.IT_PDF}else{if(W.type=="image/png"){aa=S.IT_PNG}else{if(W.type=="image/jpeg"){aa=S.IT_JPG}else{if(W.type=="image/bmp"){aa=S.IT_BMP}else{if(W.type=="image/tiff"){aa=S.IT_TIF}else{if(W.type=="image/jp2"){aa=S.IT_J2K}else{aa=a.html5.Funs.getImageType(W.name)}}}}}}}else{aa=a.html5.Funs.getImageType(W.name)}}N="";Q=W.name;V._registLoadCallback(a.MobileFuns.loadCallback);if(aa==S.IT_JPG||aa==S.IT_PNG||aa==S.IT_BMP||aa==S.IT_J2K){var Y=V._jpgQuality;Z=q();a.showMask();return Z.readImageInfo(W).then(function(ad){var ae={src:W,srcId:Date.now(),dataType:"bin",imgType:aa,quality:Y,metadata:ad};A++;var ac=false;try{V._OnBitmapChanged(["10",""+A,1,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),ae]);Dynamsoft.DWT.lavrf_(1,Dynamsoft.DWT.EnumInstance.dwt_browser)}catch(ab){ac=true;a.Errors.SystemExceptionError(V,ab.message)}a.hideMask();if(a.isFunction(V.__OnPostLoad)){V.__OnPostLoad(N,Q,aa)}Z.terminate();if(ac){throw {code:V._errorCode,message:V._errorString}}},function(ab){a.Errors.LoadImageFailed(V,ab);a.hideMask();Z.terminate();throw {code:V._errorCode,message:V._errorString}})}else{if(aa==S.IT_PDF){var U=n();U.context={};a.showProgress(V);V._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingPdf,""]);return U.open(W,V._pdfPassword).then(function(ae){var ad=ae.PdfCount;V._OnPercentDone([0,0,"0/"+ad,""]);var ac={index:0,aryUpdateImageData:[],pdfCount:ad},ab=a.Promise.resolve(ac);for(R=0;R<ad;R++){ab=ab.then(function(af){return U.readPage(af.index,V._pdfResolution,V._pdfRealConvertMode,Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG,true,false).then(function(ai){var aj=(af.index+1),ah=af.PdfCount,ag=(100*aj)/(1*ah),al={},ak=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF;V._OnPercentDone([0,ag,aj+"/"+ah,""]);if(ai.realReadMode==1){ak=L}if(a.isArray(ai.imageInfos)&&ai.imageInfos.length>0){var am=ai.imageInfos[0];al.width=am.imageWidth;al.height=am.imageHeight;al.bitDepth=am.imageBitDepth;al.resolutionX=am.imageXResolution;al.resolutionY=am.imageYResolution}A++;af.index=af.index+1;af.aryUpdateImageData.push({src:W,srcId:Date.now(),dataType:"bin",imgType:Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF,verify:ak,index:ai.pageIndex,password:V._pdfPassword,quality:Y,metadata:al,resolution:V._pdfResolution,convertMode:V._pdfRealConvertMode,outPutType:ai.imageType,imageId:A});return af})})}ab=ab.then(function(af){U.close();U.context.closed=true;U.terminate();af.index=0;return af});for(R=0;R<ad;R++){ab=ab.then(function(ah){var ag=ah.aryUpdateImageData[ah.index];try{V._OnBitmapChanged(["10",""+ag.imageId,1,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),ag])}catch(af){a.Errors.SystemExceptionError(V,af.message);throw 0}ah.index=ah.index+1;return ah})}return ab.then(function(){if(a.isFunction(V.__OnPostLoad)){V.__OnPostLoad(N,Q,aa)}a.closeProgress();Dynamsoft.DWT.lavrf_(1,Dynamsoft.DWT.EnumInstance.dwt_browser)},function(af){if(af){a.Errors.LoadImageFailed(V,af)}a.closeProgress();if(!U.context.closed){U.close();U.terminate()}throw {code:V._errorCode,message:V._errorString}})},function(ab){a.Errors.LoadImageFailed(V,ab);a.closeProgress();if(!U.context.closed){U.close();U.terminate()}throw {code:V._errorCode,message:V._errorString}})}else{if(aa==S.IT_TIF){var X=0;Z=q();Z.context={};a.showProgress(V);V._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingTiff,""]);var O=Z.openTiff(W);return O.then(function(ac){var ab=ac.pageCount,ae=ac.imageInfos;var ad=a.Promise.resolve({index:0,aryUpdateImageData:[]});V._OnPercentDone([0,0,"0/"+ab,""]);for(R=0;R<ab;R++){ad=ad.then(function(ag){var ah=(ag.index+1);var af=(100*ah)/(1*ab);V._OnPercentDone([0,af,ah+"/"+ab,""]);A++;ag.aryUpdateImageData.push({src:W,srcId:Date.now(),dataType:"bin",imgType:Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF,index:ag.index,metadata:ae[ag.index],imageId:A});ag.index=ag.index+1;return ag})}ad=ad.then(function(af){Z.closeTiff();Z.context.closed=true;Z.terminate();af.index=0;return af});for(R=0;R<ab;R++){ad=ad.then(function(ah){var ag=ah.aryUpdateImageData[ah.index];try{V._OnBitmapChanged(["10",""+ag.imageId,1,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),ag])}catch(af){a.Errors.SystemExceptionError(V,af.message);throw 0}ah.index=ah.index+1;return ah})}return ad.then(function(){if(a.isFunction(V.__OnPostLoad)){V.__OnPostLoad(N,Q,aa)}a.closeProgress();Dynamsoft.DWT.lavrf_(1,Dynamsoft.DWT.EnumInstance.dwt_browser)},function(af){if(af){a.Errors.LoadImageFailed(V,af)}a.closeProgress();if(!Z.context.closed){Z.closeTiff();Z.context.closed=true;Z.terminate()}throw {code:V._errorCode,message:V._errorString}})},function(ab){a.Errors.LoadImageFailed(V,ab);a.closeProgress();if(!Z.context.closed){Z.closeTiff();Z.context.closed=true;Z.terminate()}throw {code:V._errorCode,message:V._errorString}})}else{a.Errors.LoadImageFailed(V,"invalid image type.");return a.Promise.reject({code:V._errorCode,message:V._errorString})}}}},h=function(T,R){var U=R[0],S=R[1],Q=R[2],V=R[3],N=R[4];if(a.isUndefined(S)){S=0}if(a.isUndefined(Q)){Q=true}if(a.isUndefined(V)||V<1||V>3){V=3}if(a.isUndefined(N)){N="FFFFFF"}while(S<0){S+=360}a.showMask();var P=t(),O=T._ImgManager.convertClientIndexToServerId(U);P.context={};return T._ImgManager.getWebViewer().GetImageData(T._ImgManager.getUidByIndex(U)).then(function(W){P.context.metadata=W&&W.metadata?W.metadata:{};return P.initImage(W.oriData)}).then(function(){return P.rotate(S,N,Q,V)}).then(function(){return P.getImage()}).then(function(X){if("width" in X){X.imageWidth=X.imageWidth}if("height" in X){X.imageHeight=X.imageHeight}var Z={src:X.imageData,imgType:a.MobileFuns.convertOutputType(X.imageType),dataType:"url",metadata:{width:X.imageWidth,height:X.imageHeight}};var Y=false;try{T._OnBitmapChanged(["10",""+O,4,T._ImgManager.getCurrentImageIndex(),T._ImgManager.count(),Z])}catch(W){Y=true;a.Errors.SystemExceptionError(T,W.message)}a.hideMask();P.terminate();if(Y){throw {code:T._errorCode,message:T._errorString}}},function(W){a.Errors.RotateFailed(T,W);a.hideMask();P.terminate();throw {code:T._errorCode,message:T._errorString}})},k=function(R,N,Q){var P=t(),O=R._ImgManager.convertClientIndexToServerId(N);P.context={};a.showMask();return R._ImgManager.getWebViewer().GetImageData(R._ImgManager.getUidByIndex(N)).then(function(S){P.context.metadata=S&&S.metadata?S.metadata:{};return P.initImage(S.oriData)}).then(function(){return P.flip(Q)}).then(function(){return P.getImage()}).then(function(T){var U={src:T.imageData,imgType:a.MobileFuns.convertOutputType(T.imageType),dataType:"url"};try{R._OnBitmapChanged(["10",""+O,4,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),U])}catch(S){a.Errors.SystemExceptionError(R,S.message);throw 0}}).then(function(){a.hideMask();P.terminate()},function(S){a.hideMask();if(S){if(Q==-1){a.Errors.MirrorFailed(R,S)}else{a.Errors.FlipFailed(R,S)}}P.terminate();throw {code:R._errorCode,message:R._errorString}})},i=function(Q,P){var N=P[0];var O=-1;return k(Q,N,O)},z=function(Q,P){var N=P[0];var O=1;return k(Q,N,O)},I=function(R,Q){var N=Q[0];var P=t(),O=R._ImgManager.convertClientIndexToServerId(N);P.context={};a.showMask();return R._ImgManager.getWebViewer().GetImageData(R._ImgManager.getUidByIndex(N)).then(function(S){P.context.metadata=S&&S.metadata?S.metadata:{};return P.initImage(S.oriData)}).then(function(){return P.invert()}).then(function(){return P.getImage()}).then(function(T){var U={src:T.imageData,imgType:a.MobileFuns.convertOutputType(T.imageType),dataType:"url"};try{R._OnBitmapChanged(["10",""+O,4,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),U])}catch(S){a.Errors.SystemExceptionError(R,S.message);throw 0}}).then(function(){a.hideMask();P.terminate()},function(S){a.hideMask();if(S){a.Errors.InvertFailed(R,S)}P.terminate();throw {code:R._errorCode,message:R._errorString}})},H=function(S,R){var T=R[0],P=R[1],U=R[2],V=R[3],N=R[4];if(!a.isNumber(P)||!a.isNumber(U)||!a.isNumber(V)||!a.isNumber(N)){a.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(S);return a.Promise.reject({code:S._errorCode,message:S._errorString})}var Q=t(),O=S._ImgManager.convertClientIndexToServerId(T);Q.context={};a.showMask();return S._ImgManager.getWebViewer().GetImageData(S._ImgManager.getUidByIndex(T)).then(function(W){Q.context.metadata=W&&W.metadata?W.metadata:{};return Q.initImage(W.oriData)}).then(function(){return Q.crop(P,U,V,N)}).then(function(){return Q.getImage()}).then(function(X){var Y={src:X.imageData,imgType:a.MobileFuns.convertOutputType(X.imageType),dataType:"url",metadata:{imageData:X.imageData,width:X.imageWidth,height:X.imageHeight}};try{S._OnBitmapChanged(["10",""+O,4,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),Y])}catch(W){a.Errors.SystemExceptionError(S,W.message);throw 0}}).then(function(){a.hideMask();Q.terminate()},function(W){a.hideMask();if(W){a.Errors.CropFailed(S,W)}Q.terminate();throw {code:S._errorCode,message:S._errorString}})},e=function(T,S){var U=S[0],R=S[1],V=S[2],W=S[3],N=S[4],O=S[5];if(!a.isNumber(R)||!a.isNumber(V)||!a.isNumber(W)||!a.isNumber(N)){a.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(T);return a.Promise.reject({code:T._errorCode,message:T._errorString})}if(a.isUndefined(O)){O="FFFFFF"}var Q=t(),P=T._ImgManager.convertClientIndexToServerId(U);Q.context={};a.showMask();return T._ImgManager.getWebViewer().GetImageData(T._ImgManager.getUidByIndex(U)).then(function(X){Q.context.metadata=X&&X.metadata?X.metadata:{};return Q.initImage(X.oriData)}).then(function(){return Q.erase(R,V,W,N,O)}).then(function(){return Q.getImage()}).then(function(Y){var Z={src:Y.imageData,imgType:a.MobileFuns.convertOutputType(Y.imageType),dataType:"url",metadata:{imageData:Y.imageData,width:Y.imageWidth,height:Y.imageHeight}};try{T._OnBitmapChanged(["10",""+P,4,T._ImgManager.getCurrentImageIndex(),T._ImgManager.count(),Z])}catch(X){a.Errors.SystemExceptionError(T,X.message);throw 0}}).then(function(){a.hideMask();Q.terminate()},function(X){a.hideMask();if(X){a.Errors.EraseFailed(T,X)}Q.terminate();throw {code:T._errorCode,message:T._errorString}})},o=function(U,T){var N=T[0],R=T[1],Q=T[2],S=T[3];if(!a.isNumber(R)){a.Errors.MobileServer_InvalidWidth(U);return a.Promise.reject({code:U._errorCode,message:U._errorString})}if(!a.isNumber(Q)){a.Errors.MobileServer_InvalidHeight(U);return a.Promise.reject({code:U._errorCode,message:U._errorString})}if(a.isUndefined(S)){S=5}var P=t(),O=U._ImgManager.convertClientIndexToServerId(N);P.context={};a.showMask();return U._ImgManager.getWebViewer().GetImageData(U._ImgManager.getUidByIndex(N)).then(function(V){P.context.metadata=V&&V.metadata?V.metadata:{};return P.initImage(V.oriData)}).then(function(){return P.resize(R,Q,S)}).then(function(){return P.getImage()}).then(function(W){var X={src:W.imageData,imgType:a.MobileFuns.convertOutputType(W.imageType),dataType:"url",metadata:{imageData:W.imageData,width:W.imageWidth,height:W.imageHeight}};try{U._OnBitmapChanged(["10",""+O,4,U._ImgManager.getCurrentImageIndex(),U._ImgManager.count(),X])}catch(V){a.Errors.SystemExceptionError(U,V.message);throw 0}}).then(function(){a.hideMask();P.terminate()},function(V){a.hideMask();if(V){a.Errors.ChangeImageSizeFailed(U,V)}P.terminate();throw {code:U._errorCode,message:U._errorString}})},f=function(S,R){var N=R[0];var P=t(),O=S._ImgManager.convertClientIndexToServerId(N);P.context={};a.showMask();var Q=S._ImgManager.getWebViewer().GetMinPageData();if(Q){return P.initImage(Q.data,true,Q.width,Q.height).then(function(){return P.getSkewAngle()}).then(function(T){a.hideMask();delete P.context;P.terminate();return T},function(T){a.hideMask();a.Errors.SkewAngleFailed(S,T);P.terminate();throw {code:S._errorCode,message:S._errorString}})}},M=function(R,Q){var N=Q[0];var P=t(),O=R._ImgManager.convertClientIndexToServerId(N);P.context={};a.showMask();return R._ImgManager.getWebViewer().GetImageData(R._ImgManager.getUidByIndex(N)).then(function(S){P.context.metadata=S&&S.metadata?S.metadata:{};return P.initImage(S.oriData)}).then(function(){return P.getSkewAngle()}).then(function(S){a.hideMask();delete P.context;P.terminate();return S},function(S){a.hideMask();a.Errors.SkewAngleFailed(R,S);P.terminate();throw {code:R._errorCode,message:R._errorString}})},B=function(R,Q){var N=Q[0];var P=t(),O=R._ImgManager.convertClientIndexToServerId(N);P.context={};a.showMask();return R._ImgManager.getWebViewer().GetImageData(R._ImgManager.getUidByIndex(N)).then(function(S){P.context.metadata=S&&S.metadata?S.metadata:{};return P.initImage(S.oriData)}).then(function(){return P.toGrayscale(0,25)}).then(function(){return P.getImage()}).then(function(T){var U={src:T.imageData,imgType:a.MobileFuns.convertOutputType(T.imageType),dataType:"url",metadata:{imageData:T.imageData,width:T.imageWidth,height:T.imageHeight,bitDepth:8}};try{R._OnBitmapChanged(["10",""+O,4,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),U])}catch(S){a.Errors.SystemExceptionError(R,S.message);throw 0}}).then(function(){a.hideMask();P.terminate()},function(S){a.hideMask();if(S){a.Errors.ConvertToGrayScaleFailed(R,S)}P.terminate();throw {code:R._errorCode,message:R._errorString}})},l=function(R,Q){var N=Q[0];var P=t(),O=R._ImgManager.convertClientIndexToServerId(N);P.context={};a.showMask();return R._ImgManager.getWebViewer().GetImageData(R._ImgManager.getUidByIndex(N)).then(function(S){P.context.metadata=S&&S.metadata?S.metadata:{};return P.initImage(S.oriData)}).then(function(){return P.toBinary(28,25,10)}).then(function(){return P.getImage()}).then(function(T){var U={src:T.imageData,imgType:a.MobileFuns.convertOutputType(T.imageType),dataType:"url",metadata:{imageData:T.imageData,width:T.imageWidth,height:T.imageHeight,bitDepth:1}};try{R._OnBitmapChanged(["10",""+O,4,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),U])}catch(S){a.Errors.SystemExceptionError(R,S.message);throw 0}}).then(function(){a.hideMask();P.terminate()},function(S){a.hideMask();if(S){a.Errors.ConvertToBWScaleFailed(R,S)}P.terminate();throw {code:R._errorCode,message:R._errorString}})},d=function(S,R){var T=R[0],U=R[1],Q=R[2],W=R[3],P=R[4];if(!a.isNumber(U)){a.Errors.MobileServer_InvalidXResolution(S);return a.Promise.reject({code:S._errorCode,message:S._errorString})}if(!a.isNumber(Q)){a.Errors.MobileServer_InvalidYResolution(S);return a.Promise.reject({code:S._errorCode,message:S._errorString})}if(a.isUndefined(P)){P=Dynamsoft.DWT.EnumDWT_InterpolationMethod.IM_BICUBIC}var O=t(),N=S._ImgManager.convertClientIndexToServerId(T),X,Y,V;O.context={};X=S._ImgManager._UIView.GetMetaDataByIndex(T);Y=X.resolutionX;V=X.resolutionY;a.showMask();return S._ImgManager.getWebViewer().GetImageData(S._ImgManager.getUidByIndex(T)).then(function(Z){O.context.metadata=Z&&Z.metadata?Z.metadata:{};return O.initImage(Z.oriData)}).then(function(){return O.setDPI(Y,V,U,Q,W,P)}).then(function(){return O.getImage()}).then(function(aa){var ab={src:aa.imageData,imgType:a.MobileFuns.convertOutputType(aa.imageType),dataType:"url",metadata:{imageData:aa.imageData,width:aa.imageWidth,height:aa.imageHeight,resolutionX:U,resolutionY:Q}};try{S._OnBitmapChanged(["10",""+N,4,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),ab])}catch(Z){a.Errors.SystemExceptionError(S,Z.message);throw 0}}).then(function(){a.hideMask();O.terminate()},function(Z){a.hideMask();if(Z){a.Errors.SetDPIFailed(S,Z)}O.terminate();throw {code:S._errorCode,message:S._errorString}})},s=function(S,R){var O=R[0],N=R[1];if(!a.isNumber(N)){a.Errors.MobileServer_InvalidWidth(S);return a.Promise.reject({code:S._errorCode,message:S._errorString})}var Q=t(),P=S._ImgManager.convertClientIndexToServerId(O);Q.context={};a.showMask();return S._ImgManager.getWebViewer().GetImageData(S._ImgManager.getUidByIndex(O)).then(function(T){Q.context.metadata=T&&T.metadata?T.metadata:{};return Q.initImage(T.oriData)}).then(function(){return Q.setImageWidth(N)}).then(function(){return Q.getImage()}).then(function(U){var V={src:U.imageData,imgType:a.MobileFuns.convertOutputType(U.imageType),dataType:"url",metadata:{imageData:U.imageData,width:U.imageWidth,height:U.imageHeight}};try{S._OnBitmapChanged(["10",""+P,4,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),V])}catch(T){a.Errors.SystemExceptionError(S,T.message);throw 0}}).then(function(){a.hideMask();Q.terminate()},function(T){a.hideMask();if(T){a.Errors.SetImageWidthFailed(S,T)}Q.terminate();throw {code:S._errorCode,message:S._errorString}})},j=function(ad,aj){var am=aj[0],P=aj[1],al=aj[2],ai=aj[3],Y=aj[4],S,ab,aa,W=false,ac=false,ae=Dynamsoft.DWT.EnumDWT_ImageType;if(a.isUndefined(am)){a.Errors.MobileServer_InvalidImage(ad);return a.Promise.reject({code:ad._errorCode,message:ad._errorString})}if(!a.isArray(P)){a.Errors.MobileServer_InvalidIndex(ad);return a.Promise.reject({code:ad._errorCode,message:ad._errorString})}if(a.isUndefined(al)){al="jpg"}if(!a.isString(am)||am==""){am="img."+al}if(al=="png"||al=="jpg"||al=="bmp"){var ak=ad._ImgManager.convertClientIndexToServerId(X),U,X=P[0],ah=ad._jpgQuality;if(ai==1){a.showMask()}if(al=="png"){U=ae.IT_PNG}else{if(al=="bmp"){U=ae.IT_BMP}else{U=ae.IT_JPG}}var O=ad._ImgManager.getWebViewer().GetImageData(ad._ImgManager.getUidByIndex(X));ac=q();ac.context={};ac.context.bSaveAsBinary=Y;if(ad._scaleDownThreshold<=0){O=O.then(function(an){var ao=ac.context.bSaveAsBinary;return ac.saveImage(an.oriData,U,ah,false,ao)})}else{O=O.then(function(ao){var an=ao&&ao.metadata?ao.metadata:{};return Dynamsoft.ImageProcWrapper.resize(ao.oriData,an.width,an.height,ad._scaleDownThreshold)});O=O.then(function(an){var ao=ac.context.bSaveAsBinary;ac.context.revokeUrl=an.imageData;return ac.saveImage(an.imageData,U,ah,false,ao)});O=O.then(function(an){a.MobileFuns.revoke(ac.context.revokeUrl);ac.context.revokeUrl=false;return an})}return O.then(function(an){if(ai==1){a.hideMask()}if(ac){ac.terminate()}if(W){W.terminate()}return{blobUrl:an.imageData,type:al}},function(an){if(ai==1){a.hideMask()}a.Errors.SaveImageFailed(ad,an);if(ac){ac.terminate()}if(W){W.terminate()}throw {code:ad._errorCode,message:ad._errorString}})}else{if(al=="pdf"){var V=v(),ag,Z=P.length;V.context={};if(ai){a.showProgress(ad);if(ai==2){ad._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBlob,""])}else{if(ai==3){ad._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBase64,""])}else{if(ai==4){ad._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,""])}else{ad._OnPercentDone([0,-1,Dynamsoft.MSG.SavingPdf,""])}}}}var N=V.initPdfSetting(ad._pdfWriteSetting);if(ad._scaleDownThreshold>0){W=t();W.context={}}V.context.cIndex=0;V.context.aryIndex=P;V.context.bSaveAsBinary=Y;for(ag=0;ag<Z;ag++){N=N.then(function(){var ao=V.context.cIndex,an=V.context.aryIndex;return ad._ImgManager.getWebViewer().GetImageData(ad._ImgManager.getUidByIndex(an[ao]))});if(ad._scaleDownThreshold<=0){N=N.then(function(an){return V.appendPage(an.oriData)})}else{N=N.then(function(ao){var an=ao&&ao.metadata?ao.metadata:{};return Dynamsoft.ImageProcWrapper.resize(ao.oriData,an.width,an.height,ad._scaleDownThreshold)});N=N.then(function(an){V.context.revokeUrl=an.imageData;return V.appendPage(an.imageData)});N=N.then(function(an){if(V.context.revokeUrl){a.MobileFuns.revoke(V.context.revokeUrl)}V.context.revokeUrl=false;return an})}N=N.then(function(){var aq=V.context.cIndex,ao=V.context.aryIndex,ar=ao.length;if(ai){var ap=(aq+1);var an=(100*ap)/(1*ar);ad._OnPercentDone([0,an,ap+"/"+ar,""])}V.context.cIndex=(aq+1)})}return N.then(function(){var an=V.context.bSaveAsBinary;return V.writePdf(an)}).then(function(an){if(ai){a.closeProgress()}V.terminate();if(W){W.terminate()}return{blobUrl:an.pdfData,type:"pdf"}},function(an){if(ai){a.closeProgress()}a.Errors.SaveImageFailed(ad,an);V.terminate();if(W){W.terminate()}throw {code:ad._errorCode,message:ad._errorString}})}else{if(al=="tiff"){var Q,T=P.length;ac=q();ac.context={};ac.context.bSaveAsBinary=Y;if(ad._scaleDownThreshold>0){W=t();W.context={}}if(ai){ac.context.bShowPercentProgress=true;a.showProgress(ad);if(ai==2){ad._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBlob,""])}else{if(ai==3){ad._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBase64,""])}else{if(ai==4){ad._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,""])}else{ad._OnPercentDone([0,-1,Dynamsoft.MSG.SavingTiff,""])}}}}var af=ac.createTiff(),R=Dynamsoft.DWT.EnumDWT_TIFFCompressionType;ac.context.cIndex=0;Q=G.Auto;if(ad._tiffCompressionType==R.TIFF_AUTO){Q=G.Auto}else{if(ad._tiffCompressionType==R.TIFF_FAX3||ad._tiffCompressionType==R.TIFF_T4){Q=G.G3}else{if(ad._tiffCompressionType==R.TIFF_FAX4||ad._tiffCompressionType==R.TIFF_T6){Q=G.G4}else{if(ad._tiffCompressionType==R.TIFF_LZW){Q=G.LZW}else{if(ad._tiffCompressionType==R.TIFF_JPEG){Q=G.JPEG}else{if(ad._tiffCompressionType==R.TIFF_PACKBITS){Q=G.ZIP}}}}}}ac.context.tiffFormat=Q;ac.context.aryIndex=P;for(ag=0;ag<T;ag++){af=a.MobileFuns.appendTiffPage(ad,af,ac,W)}af=af.then(function(){var an=ac.context.bSaveAsBinary;return ac.getTiff(an)});return af.then(function(ao){var an=ac.context.bShowPercentProgress;if(an){a.closeProgress()}ac.closeTiff();ac.terminate();if(W){W.terminate()}return{blobUrl:ao.imageData,type:"tiff"}},function(ao){var an=ac.context.bShowPercentProgress;if(an){a.closeProgress()}a.Errors.SaveImageFailed(ad,ao);ac.closeTiff();ac.terminate();if(W){W.terminate()}throw {code:ad._errorCode,message:ad._errorString}})}else{a.Errors.InvalidImageType(ad);return a.Promise.reject({code:ad._errorCode,message:ad._errorString})}}}},y=function(R,Q){var P,N,O;if(Q.length>0){P=Q[0]}else{P=b()}if(!Dynamsoft.WasmEnv){a.Errors.GetLicenseInfoFailed(R,"wasm not load.");return a.Promise.reject({code:R._errorCode,message:R._errorString})}N=Dynamsoft.WasmEnv.licMode;O=Dynamsoft.WasmEnv.uuid;return Dynamsoft.WasmEnv.getLicenseInfo(P,N,O).then(function(S){if(!S||!S.Detail){a.Errors.LicenseEmptyOrInvalid(R);throw {code:R._errorCode,message:R._errorString}}else{return S}},function(S){a.Errors.GetLicenseInfoFailed(R,S);throw {code:R._errorCode,message:R._errorString}})},K=function(R,P){var O=Q,Q=P[0];if(Q instanceof FileList){O=Q[0]}else{if(Q instanceof ArrayBuffer||Q instanceof Uint8Array){O=new Blob([Q])}else{}}var N=q();return N.getMD5(O).then(function(S){N.terminate();return S},function(S){a.Errors.GetMD5Failed(R,S);N.terminate();throw {code:R._errorCode,message:R._errorString}})};J._areaDetectCallback=function(Q,P,N){var O=w();return O.initImage(Q,true,P,N).then(function(){return O.detectDocument()}).then(function(R){return R.cornerPoints},function(S){a.closeLoadingMsg();var R={_errorString:S};a.Errors.DetectCallbackErr(R);throw {code:R._errorCode,message:R._errorString}})};J._saveImageCallback=function(N){var R=this,O=N,Q;if(O instanceof Blob||O instanceof ArrayBuffer){Q=a.Promise.resolve(O)}else{if(a.isString(N)){var P={mode:"cors",dataType:"blob"};Q=a.fetch(N,P)}else{a.Errors.InvalidSourceFile(R);return a.Promise.reject({code:R._errorCode,message:R._errorString})}}return Q.then(function(S){return new a.Promise(function(X,U){var T=S,V=-1,W=Dynamsoft.DWT.EnumDWT_ImageType;if(R._bLocalService){if(a.isString(T.type)){if(T.type=="application/pdf"){V=W.IT_PDF}else{if(T.type=="image/png"){V=W.IT_PNG}else{if(T.type=="image/jpeg"){V=W.IT_JPG}else{if(T.type=="image/bmp"){V=W.IT_BMP}else{if(T.type=="image/tiff"){V=W.IT_TIF}else{if(T.type=="image/jp2"){V=W.IT_J2K}}}}}}}R.__captureImage(T,V,function(){X(T)},function(Z,Y){U({code:Z,message:Y})})}else{R._innerSendToMobile("LoadImageFromBinary",[T,true],0,function(){X(T)},function(Z,Y){U({code:Z,message:Y})})}})})};J._perspectiveCallback=function(S,Q,P,N){var O=w();if(!a.isArray(Q)||Q.length!=8){var R={};a.Errors.InvalidParameterInCallback(R);return a.Promise.reject({code:R._errorCode,message:R._errorString})}return O.initImage(S,true,P,N).then(function(){return O.perspective(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7])}).then(function(){return O.getImage(85,true,true)}).then(function(T){return T.imageData},function(U){a.closeLoadingMsg();var T={_errorString:U};a.Errors.PerspectiveCallback(T);throw {code:T._errorCode,message:T._errorString}})};J._checkWebcamWasmLicense=function(){var N=this;if(!a.License.checkProductKey(N,{Webcam:true},true)){return Dynamsoft.DWT.licenseException}if(!a.License.checkProductKey(N,{Webcam:true,Wasm:true},true)){return Dynamsoft.DWT.licenseException}return{errorCode:0}}});Dynamsoft.Ready(function(m,h){var f=Dynamsoft;if(!m.product.bHTML5Edition){return}var d=Dynamsoft.navInfo,c=m.html5.Funs,i=!0,p=!1,e=0,a=1,k=1,q=2,n=c.DEF,j=c.DEF_NOT_SUPPORT_MOBILE,s=m.removeNonPrintableChar,b=function(v,t,u){if(u==q){m.each(t,function(x,w){n(v,x,{get:function(){v._resetErr();if(!v._isValid()){return p}return i},set:function(y){v._resetErr();if(!v._isValid()){return p}return i}})})}},r=function(u,t){m.each(t,function(x,w){n(u,x,a,q)})},o=function(u,t){m.each(t,function(x,w){n(u,x,a,k)})},l=function(u,t){m.each(t,function(x,w){n(u,x,e)})},g=function(u,t){m.each(t,function(x,w){n(u,x,a)})};m.DynamicLoadAddonFuns=[];m.attachAddon=function(t){m.each(m.DynamicLoadAddonFuns,function(u){if(m.isFunction(u)){u(t)}})};m.attachProperty=function(t){var z=t;n(z,"ErrorCode",{get:function(){return z._errorCode}});n(z,"ErrorString",{get:function(){if(z._errorCode==-2207){if(z.__bMustUpgradeService){m.Errors.MustUpgradeService(z)}}if(z._errorCode!=0){return z._errorString}return"Successful."}});n(z,"ProductKey",{get:function(){return Dynamsoft.DWT.ProductKey},set:function(A){if(!m.isString(A)){m.Errors.InvalidValue(z);return p}z._resetErr();if(!z._isValid()){return false}return z._setProductKey(A,false)}});n(z,"ProductName",{get:function(){return z.__strProductName},set:function(A){z._resetErr();if(!m.isString(A)){m.Errors.InvalidValue(z);return p}z.__strProductName=A;return i}});n(z,"VersionInfo",{get:function(){return z.__versionInfo}});if(z._isMobileMode()){j(z,"DefaultSourceName",e)}else{n(z,"DefaultSourceName",{get:function(){z._resetErr();if(!z._isValid()){return false}if(m.isUndefined(z.__currentImageCaptureDriverType)){z.__currentImageCaptureDriverType=0}var B="",C=0,D,A=z._innerFun("GetDefaultSourceName",c.makeParams(z._driverType));if(A.length>0){D=JSON.parse(A);C=D.type;B=Dynamsoft.Lib.base64.decode(D.ProductName)}if(z._driverType==4){if(C==Dynamsoft.DWT.EnumDWT_Driver.TWAIN64&&B.length>0){return"Twain64-"+B}else{if(C==Dynamsoft.DWT.EnumDWT_Driver.ICA&&z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac&&B.length>0){return"ICA-"+B}else{return B}}}else{if(z.__currentImageCaptureDriverType==Dynamsoft.DWT.EnumDWT_Driver.TWAIN64){if(B.length>0&&C==Dynamsoft.DWT.EnumDWT_Driver.TWAIN64){return"Twain64-"+B}else{return B}}else{if(z.__currentImageCaptureDriverType==Dynamsoft.DWT.EnumDWT_Driver.ICA){if(B.length>0&&z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){return"ICA-"+B}else{return B}}else{return B}}}}})}if(z._isMobileMode()){j(z,["ImageCaptureDriverType","IfShowCancelDialogWhenImageTransfer"])}else{n(z,"IfShowCancelDialogWhenImageTransfer",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__IfShowCancelDialogWhenImageTransfer},set:function(A){if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}z._resetErr();if(!z._isValid()){return false}return(z.__IfShowCancelDialogWhenImageTransfer=A)}});n(z,"ImageCaptureDriverType",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._driverType},set:function(A){var G=z._driverType,F=false,C=false,E=false;if(z._bRemoteMode){if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){E=true}else{if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){C=true}else{if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){F=true}}}}else{F=d.bMac;C=d.bLinux;E=d.bWin}z._resetErr();if(!z._isValid()){return false}if(A!==""){var D=A*1;if(D<Dynamsoft.DWT.EnumDWT_Driver.TWAIN||D>Dynamsoft.DWT.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}if(E){if(D===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(Dynamsoft.dcp.b64bit){z._driverType=D;z.__icaSourceCount=-1;B=z._innerFun("SetImageCaptureDriverType",c.makeParams(Dynamsoft.DWT.EnumDWT_Driver.TWAIN,z._driverType));return B}}else{if(D!=Dynamsoft.DWT.EnumDWT_Driver.TWAIN&&D!=Dynamsoft.DWT.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}}if(Dynamsoft.dcp.b64bit){z._driverType=D}else{D=Dynamsoft.DWT.EnumDWT_Driver.TWAIN;z._driverType=D}z.__currentImageCaptureDriverType=D}else{if(C){D=Dynamsoft.DWT.EnumDWT_Driver.SANE;z._driverType=D;z.__currentImageCaptureDriverType=D;if(D===Dynamsoft.DWT.EnumDWT_Driver.SANE){return i}else{m.Errors.ImageCaptureDriverTypeError(z);return p}}else{if(F){if(D===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_ICA){z._driverType=D;z.__icaSourceCount=-1;return i}else{if(D!=Dynamsoft.DWT.EnumDWT_Driver.ICA&&D!=Dynamsoft.DWT.EnumDWT_Driver.TWAIN&&D!=Dynamsoft.DWT.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}}z._driverType=D;z.__currentImageCaptureDriverType=D}}}z.__icaSourceCount=0;z.CloseSourceManager();var B=z._innerFun("SetImageCaptureDriverType",c.makeParams(D,z._driverType));z.OpenSourceManager();return B}m.Errors.ImageCaptureDriverTypeError(z);return p}})}if(z._isMobileMode()){j(z,"SourceCount",e)}else{n(z,"SourceCount",{get:function(){var L,K,J,C,H,I,O=[];var E,G,N,F,M="",D=false,B=false,A=false;if(z._bRemoteMode){if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){A=true}else{if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){B=true}else{if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){D=true}}}}else{D=d.bMac;B=d.bLinux;A=d.bWin}z._resetErr();if(!z._isValid()){return false}z._resetSources();z.__icaSourceCount=0;if(D&&(z._driverType===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_ICA)){K=[];E=z._getSourceNamesSyncV2(Dynamsoft.DWT.EnumDWT_Driver.ICA);for(I=0;I<E.length;I++){C=E[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(E[I].IsDefaultSource==true){J=C}if(E[I].DriverType==="ICA"){O.push("ICA-"+C)}else{O.push(C)}K.push(E[I])}}}if(J===undefined&&E.length>0){C=E[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(E[0].DriverType==="ICA"){J="ICA-"+C}else{J=C}}}}N=z._getSourceNamesSyncV2(Dynamsoft.DWT.EnumDWT_Driver.TWAIN);for(I=0;I<N.length;I++){C=N[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(N[I].IsDefaultSource==true){J=C}if(N[I].DriverType==="ICA"){O.push("ICA-"+C)}else{O.push(C)}K.push(N[I])}}}if(J===undefined&&N.length>0){C=N[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(N[0].DriverType==="ICA"){J="ICA-"+C}else{J=C}}}}L=K.length;z.__defaultSourceName=J;z.__icaSourceCount=E.length;z.__sourceCount=L;z.__sourceName=O;z.__sourceDetails=K}else{if(A&&Dynamsoft.dcp.b64bit&&(z._driverType===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64)){K=[];N=z._getSourceNamesSyncV2(Dynamsoft.DWT.EnumDWT_Driver.TWAIN);for(I=0;I<N.length;I++){C=N[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(N[I].IsDefaultSource==true){J=C}O.push(C);K.push(N[I])}}}if(J===undefined&&N.length>0){C=N[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){J=C}}}if(Dynamsoft.dcp.b64bit){G=z._getSourceNamesSyncV2(Dynamsoft.DWT.EnumDWT_Driver.TWAIN64);for(I=0;I<G.length;I++){C=G[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(G[I].IsDefaultSource==true){J=C}if(G[I].DriverType==="TWAIN(64Bit)"){O.push("Twain64-"+C)}else{O.push(C)}K.push(G[I])}}}if(J===undefined&&G.length>0){C=G[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(G[0].DriverType==="TWAIN(64Bit)"){J="Twain64-"+C}else{J=C}}}}}else{G=[]}L=K.length;z.__defaultSourceName=J;z.__icaSourceCount=N.length;z.__sourceCount=L;z.__sourceName=O;z.__sourceDetails=K}else{H=z._getSourceNamesSyncV2();z.__defaultSourceName="";if(H&&H.length>=1){for(I=0;I<H.length;I++){C=H[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(H[I].IsDefaultSource==true){J=C}O.push(C)}}}if(m.isString(J)){z.__defaultSourceName=J}else{C=H[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(H[0].DriverType==="ICA"){z.__defaultSourceName="ICA-"+C}else{z.__defaultSourceName=C}}}}}else{H=[];O=[]}L=H.length;z.__sourceCount=L;if(z._driverType===Dynamsoft.DWT.EnumDWT_Driver.ICA&&D){if(L>0){m.each(O,function(R,Q){if(m.isString(R)){var P=m.trim(R);if(P!==""){O[Q]="ICA-"+P}}});if(z.__defaultSourceName!==""){z.__defaultSourceName="ICA-"+z.__defaultSourceName}}}z.__sourceName=O;z.__sourceDetails=H}}if(L<=0){K=[];O=[];z.__sourceName=[];z.__sourceDetails=[];z.__defaultSourceName="";z.__sourceCount=0;return 0}return L}})}n(z,"HowManyImagesInBuffer",{get:function(){if(!z._isValid()){return 0}return z._ImgManager.count()}});n(z,"HTTPPostResponseString",{get:function(){z._resetErr();if(!z._isValid()){return""}if(z.__HTTPPostResponseString){return z.__HTTPPostResponseString}else{return""}}});if(z._isMobileMode()){j(z,["FTPPort","IfShowProgressBar","IfAppendImage"])}else{n(z,"FTPPort",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._innerFun("FTPPort")},set:function(A){z._resetErr();if(!z._isValid()){return false}if(A!==""){var B=A*1;return z._innerFun("FTPPort",c.makeParams(B))}}});n(z,"IfShowProgressBar",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__IfShowProgressBar},set:function(A){z._resetErr();if(!z._isValid()){return false}if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}return(z.__IfShowProgressBar=A)}});n(z,"IfAppendImage",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__IfAppendImage},set:function(A){z._resetErr();if(!z._isValid()){return false}if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}return(z.__IfAppendImage=A)}})}if(z._isMobileMode()){n(z,"JPEGQuality",{get:function(){z._resetErr();if(!z._isValid()){return false}return z._jpgQuality},set:function(A){var B=A*1;if(B>=100){B=100}else{if(B<0){B=0}}z._resetErr();if(!z._isValid()){return false}z._jpgQuality=B;return true}})}else{n(z,"JPEGQuality",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._innerFun("JPEGQuality")},set:function(A){var B=A*1;if(B>=100){B=100}else{if(B<0){B=0}}z._resetErr();if(!z._isValid()){return false}return z._innerFun("JPEGQuality",c.makeParams(B))}})}if(z._isMobileMode()){n(z,"TIFFCompressionType",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._tiffCompressionType},set:function(A){z._resetErr();if(!z._isValid()){return false}z._tiffCompressionType=A;return true}})}else{n(z,"TIFFCompressionType",a,k)}if(z._isMobileMode()){n(z,"BufferMemoryLimit",{get:function(){z._resetErr();if(!z._isValid()){return 0}return 0},set:function(A){z._resetErr();if(!z._isValid()){return false}return false}})}else{n(z,"BufferMemoryLimit",a,k)}if(z._isMobileMode()){n(z,"LogLevel",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._logLevel},set:function(A){z._resetErr();if(!z._isValid()){return false}var B=A*1;if(B>=14){B=14}else{if(B<0){B=0}}if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(z._logLevel)}z._logLevel=B;return true}})}else{n(z,"LogLevel",a,k)}n(z,"HttpContentTypeFieldValue",{get:function(){z._resetErr();if(!z._isValid()){return""}return z.__strHttpContentTypeFieldValue},set:function(A){z._resetErr();if(!z._isValid()){return false}z.__strHttpContentTypeFieldValue=A;return A}});n(z,"BrokerProcessType",{get:function(){z._resetErr();if(!z._isValid()){return 0}return 1},set:function(A){z._resetErr();if(!z._isValid()){return false}return true}});n(z,"BorderStyle",{get:function(){z._resetErr();if(!z._isValid()){return false}return 0},set:function(A){z._resetErr();if(!z._isValid()){return false}return false}});n(z,"HttpFieldNameOfUploadedImage",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__remoteFilename},set:function(A){z._resetErr();if(!z._isValid()){return false}return(z.__remoteFilename=A)}});n(z,"style",{get:function(){if(!z._isValid()){return""}return z.__style}});n(z,"Addon",{get:function(){return z.__addon}});n(z,"HTTPRequestswithCredentials",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__withCredentials},set:function(A){z._resetErr();if(!z._isValid()){return false}return(z.__withCredentials=A)}});n(z,"ScaleDownThreshold",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._scaleDownThreshold},set:function(A){z._resetErr();if(!z._isValid()){return false}return(z._scaleDownThreshold=A)}});n(z,"CurrentImageIndexInBuffer",{get:function(){if(!z._isValid()){return 0}return z._ImgManager.getCurrentImageIndex()},set:function(A){var B=A*1;z._resetErr();if(!z._isValid()){return false}if(B>=0&&B<z._ImgManager.count()){z._ImgManager.Go(B);if(z._isBindViewer()){c.__innerRefreshFromUIView(z,z._ImgManager.getCurrentImageIndex())}}return true}});n(z,"SelectedImagesIndices",{get:function(){z._resetErr();if(!z._isValid()){return[]}if(z._ImgManager.count()<=0){return[]}return z._ImgManager.getSelectedClientIndexArray()}});n(z,"MaxImagesInBuffer",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z.__maxImagesInBuffer},set:function(B){var A=B*1;z._resetErr();if(!z._isValid()){return false}if(A>0&&A<32768){z.__maxImagesInBuffer=A}else{m.Errors.OutOfRange(z)}return z.__maxImagesInBuffer}});n(z,"MaxUploadImageSize",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__maxUploadImageSize},set:function(B){var A=B*1;z._resetErr();if(!z._isValid()){return false}z.__maxUploadImageSize=A;if(z._isMobileMode()){}else{z._innerFun("MaxUploadImageSize",c.makeParams(A))}return z.__maxUploadImageSize}});if(z._isMobileMode()){n(z,"IfSSL",{get:function(){return z._ifSSL},set:function(A){z._ifSSL=A;return true}})}else{n(z,"IfSSL",a,q)}if(z._isMobileMode()){n(z,"IfAllowLocalCache",{get:function(){return false},set:function(A){return false}})}else{n(z,"IfAllowLocalCache",a,q)}n(z,"UseLocalService",{get:function(){return !z._isMobileMode()}});n(z,"PDFCompressionType",{get:function(){z._resetErr();if(!z._isValid()){return false}if(z._isMobileMode()){return z._mobileNotSupport("PDFCompressionType")}return z._innerFun("PDFCompressionType")},set:function(A){var B=A*1;if(B==Dynamsoft.DWT.EnumDWT_PDFCompressionType.PDF_FAX3){B=Dynamsoft.DWT.EnumDWT_PDFCompressionType.PDF_FAX4}z._resetErr();if(!z._isValid()){return false}if(z._isMobileMode()){return z._mobileNotSupport("PDFCompressionType")}return z._innerFun("PDFCompressionType",c.makeParams(B))}});z._getPdfDllname=function(){var A,D=false,B=false,C=false;if(z._bRemoteMode){if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){C=true}else{if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){B=true}else{if(z.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){D=true}}}}else{D=d.bMac;B=d.bLinux;C=d.bWin}if(D){if(Dynamsoft.dcp.b64bit){A="libDynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dylib"}else{A="libDynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dylib"}}else{if(B){A="libDynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".so"}else{if(Dynamsoft.dcp.b64bit){A="DynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dll"}else{A="DynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dll"}}}return A};z._setConvertModeInner=function(C){if(!m.License.checkProductKey(z,{Core:true})){return false}var E=C*1,B=1,D=2,A=3;z._resetErr();if(!z._isValid()){return false}if(isNaN(E)){m.Errors.ParameterCannotEmpty(z);return false}if(E!=B&&E!=D&&E!=A){m.Errors.InvalidValue(z);return false}z._pdfConvertMode=E;if(E==D||m.License.hasPDFRProductKey(z)){z._pdfRealConvertMode=E}else{z._pdfRealConvertMode=D}return true};z._setConvertMode=function(E){var C=1,F=2,B=3,D=z._setConvertModeInner(E);if(!D){return false}if(!z._isMobileMode()){var A=z._getPdfDllname();z._innerFun("SetPDFConvertMode",c.makeParams(z._pdfRealConvertMode,A))}if((z._pdfRealConvertMode==F)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);return false}return true};z._setConvertModeAsync=function(F){var C=1,G=2,B=3,E=z._setConvertModeInner(F),D=m.Promise.resolve(true);if(!E){return m.Promise.reject({code:z._errorCode,message:z._errorString})}if(!z._isMobileMode()){var A=z._getPdfDllname();return z._innerFunV2("SetPDFConvertMode",c.makeParams(z._pdfRealConvertMode,A)).then(function(){if((z._pdfRealConvertMode==G)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);throw {code:z._errorCode,message:z._errorString}}return true})}if((z._pdfRealConvertMode==G)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);return m.Promise.reject({code:z._errorCode,message:z._errorString})}return m.Promise.resolve(true)};z._setProductKey=function(F,H,B,E){var D=true,C=F,G=Dynamsoft.DWT,A=function(I){if(!I){z.__licenseInfo=false}var J=true;if(!E){J=m.License.checkProductKey(z,{Core:true})}if(m.isFunction(B)){B()}return J};z._resetErr();if(!z._isValid()){return false}if(!m.isString(C)||C=="******"){C=""}G.ProductKey=C;if(C==""){D=false;A()}else{if(z._isMobileMode()){m.showProgressMsg(-1,"",Dynamsoft.MSG.Init_GetLicenseInfoForDWT);z.GetLicenseInfo(function(I){if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(z._logLevel)}z._setConvertMode(z._pdfConvertMode);z._resetErr();A(true)},A);return true}z._innerFunRaw("ProductKey",c.makeParams(C),H,false,false,function(J){var I=false;if(m.isArray(J)){I=J[0]}else{I=J}if(m.isArray(J)){if(J.length>=3&&J[1]==="1"&&m.isFunction(m.ShowLicenseDialog)){m.ShowLicenseDialog(J[2],{width:510,height:272,bClose:true,seconds:10})}}if(!H){D=I}m.showProgressMsg(-1,"",Dynamsoft.MSG.Init_GetLicenseInfoForDWT);z.GetLicenseInfo(function(){z._setConvertMode(z._pdfConvertMode);A(true)},A)},function(){if(!H){D=false}A()})}return D};g(z,["ProxyServer"]);var u=["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"];if(z._isMobileMode()){j(z,u)}else{g(z,u)}l(z,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]);var y=["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"];if(z._isMobileMode()){j(z,y,e)}else{l(z,y)}r(z,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]);var w=["CurrentSourceName","IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfShowFileDialog","IfShowUI","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"];if(z._isMobileMode()){j(z,w)}else{r(z,w)}o(z,["MaxInternetTransferThreads"]);var v=["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"];if(z._isMobileMode()){j(z,v)}else{o(z,v)}b(z,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],q);var x=["IfOpenImageWithGDIPlus"];if(z._isMobileMode()){j(z,x)}else{b(z,x)}};if(!m.attachPropertyUI){m.attachPropertyUI=function(){}}});Dynamsoft.Ready(function(c,b){var a=Dynamsoft;if(!c.product.bHTML5Edition){return}var d=Dynamsoft.navInfoSync,f=c.html5.STwain,e=f.prototype,g=c.html5.Funs;e.__innerLoadImage=function(h,o,n,k,l,j,i){var q=this;if(!c.License.checkProductKey(q,{Core:true})){if(c.isFunction(i)){i(q._errorCode,q._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(q,n)){if(c.isFunction(i)){i(q._errorCode,q._errorString)}return false}if(c.isFunction(j)){return q.__innerAcquireImage(h,o,k,j,i)}else{return q.__innerLoadImageFun(h,o,l)}};e.__innerLoadImageFun=function(k,i,q){var o=this,j,h=true;if(g.isHttpServerInvalid(o)){return false}j=o._innerFunRaw(k,i,false,false,true);o.__bOpenFileNow=false;if(c.isArray(j.result)&&j.result.length>0){var n="",r=[];if(q){var l=j.result[0];if(c.isObject(l)){n=l.ids;r=l.metaData}else{if(l==-1&&(k=="LoadImage"||k=="FTPDownload")){h=false}}}else{n=j.result.join(",")}if(!c.isArray(r)){r=[]}o._OnBitmapChanged(["c2",n,1,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count(),r]);if(h){if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(o)}return true}}if(Dynamsoft.Lib.Errors.bImageOnlyError_NotPurelyPDF(o._errorCode)){Dynamsoft.Lib.Errors.LicenseNoPDF(o)}return false};e.__closeRemoteScanUI=function(h){var j=this;if(j._acquireDivEL){var i=c.one(".ds-img-screen");if(j._acquireDivEL.evtFun){if(i&&i.length>0){c.removeEventListener(i[0],"mouseup",j._acquireDivEL.evtFun)}j._acquireDivEL.evtFun=null}else{if(i&&i.length>0){c.removeEventListener(i[0],"mouseup")}}if(i&&i.length>0){i[0].src=""}if(h){document.body.removeChild(j._acquireDivEL);j._acquireDivEL=null}}};e.__innerAcquireImage=function(j,h,r,k,o){var n=this,i=(j=="LoadImage"||j=="LoadImageEx"||j=="GenerateURLForUploadData"),l=i||(j=="LoadDibFromClipboard");var q=function(m){n.__bLoadingImage=false;n.__bAcquireImageNow=false;n.__bOpenFileNow=false;var p=n._ImgManager.getCurrentImageIndex();if(p>=0){n.OnRefreshUI(p)}if(Dynamsoft.Lib.Errors.bImageOnlyError_NotPurelyPDF(n._errorCode)){Dynamsoft.Lib.Errors.LicenseNoPDF(n)}if(c.isFunction(o)){o(n.ErrorCode,n.ErrorString)}if(i){Dynamsoft.Lib.closeProgress(j)}else{g.hideMask(j)}if(m){Dynamsoft.Lib.log(m)}n.__closeRemoteScanUI(true);return false};if(g.isServerInvalid(n)){q();return false}if(i){Dynamsoft.Lib.showProgress(n,j,false)}else{g.showMask(j)}n._innerSend(j,h,true,function(){n.__bLoadingImage=false;n.__bOpenFileNow=false;if(i){Dynamsoft.Lib.closeProgress(j);if(n._isBindViewer()){var m=n._ImgManager.getCurrentImageIndex();if(m>=0){n.OnRefreshUI(m)}}}else{g.hideMask(j)}if(c.isFunction(k)){k()}n.__closeRemoteScanUI(true);if(l){if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(n)}}},q);return true};e.__innerSaveImage=function(h,j,i,l){var k=this;k._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding]);return k.__innerProgressFunction(h,j,false,i,l)};e.__innerFTPDownloadDirectly=function(h,k,j,i,n){var l=this;if(!c.License.checkProductKey(l,{Core:true})){if(c.isFunction(n)){n(l._errorCode,l._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(l,j)){if(c.isFunction(n)){n(l._errorCode,l._errorString)}return false}c.cancelFrome=4;return l.__innerProgressFunction(h,k,true,i,n)};e.__innerFTPDownload=function(k,i,l,q,h){var n=this,r,o=1;if(!c.License.checkProductKey(n,{Core:true})){if(c.isFunction(h)){h(n._errorCode,n._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(n,l)){if(c.isFunction(h)){h(n._errorCode,n._errorString)}return false}c.cancelFrome=4;if(c.isFunction(h)){return n.__innerProgressFunction(k,i,true,function(){var m=n._ImgManager.getCurrentImageIndex();if(m>=0){n.OnRefreshUI(m)}if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(n)}if(c.isFunction(q)){q()}},h)}else{r=n.__innerLoadImageFun(k,i,o);if(r&&c.License.isLTS()){Dynamsoft.DWT.lcvrf(n)}var j=n._ImgManager.getCurrentImageIndex();if(j>=0){n.OnRefreshUI(j)}return r}};e.__innerFTPUpload=function(h,j,i,k){Dynamsoft.Lib.cancelFrome=3;return this.__innerProgressFunction(h,j,true,i,k)};e.__innerProgressFunction=function(h,l,i,j,o){var n=this;if(!c.isFunction(o)){return this._innerFun(h,l)}var k=function(m){if(c.isFunction(o)){o(n.ErrorCode,n.ErrorString)}Dynamsoft.Lib.closeProgress(h);if(m){Dynamsoft.Lib.log(m)}return true};Dynamsoft.Lib.showProgress(n,h,i);return this._innerSend(h,l,true,function(){Dynamsoft.Lib.closeProgress(h);if(c.isFunction(j)){j()}},k)};e.__innerGetBarcodeResultAsyncFunction=function(i){var h=Dynamsoft.Lib.NewBarcodeResult();if(i){h._errorCode=i.exception;h._errorString=i.description;h._resultlist=i.result;h._Count=i.result.length}return h};e.__innerGetOCRResultAsyncFunction=function(i){var h=Dynamsoft.Lib.NewOCRResult(this);if(i){h._errorCode=i.exception;h._errorString=i.description;h._resultlist=i.result}return h};e._innerSendCmd=function(h,i){var j=this;if(g.isHttpServerInvalid(j)){return false}j._innerFunRaw(h,i,true,false,true)};e._innerFun=function(h,j){var k=this,i;if(g.isHttpServerInvalid(k)){return false}i=k._innerFunRaw(h,j,false,false,false);if(Dynamsoft.Lib.isArray(i)){return i[0]}return i};e._innerFunRawV2=function(h,l,k){var n=this,j,i="fa/";n._resetErr();if(!n._isValid()){return c.Promise.reject({code:n._errorCode,message:n._errorString})}if(g.isHttpServerInvalid(n)){return c.Promise.reject({code:n._errorCode,message:n._errorString})}j={method:"post",body:g.getJson(n,h,l,0),dataType:k};return c.fetch([n.httpUrl,i,h,"?",g.getRandom()].join(""),j).then(function(m){var o=false;try{if(c.isString(m)){o=c.parse(m)}else{o=m}}catch(p){}if(o){if(o instanceof Blob||o instanceof ArrayBuffer){return o}if(o.exception!==undefined&&o.description!==undefined){n._errorCode=o.exception;n._errorString=o.description}else{n._resetErr();return o}}else{Dynamsoft.Lib.Errors.InvalidResultFormat(n)}throw {code:n._errorCode,message:n._errorString}},function(m){Dynamsoft.Lib.Errors.NetworkError(n);if(m){n._errorString=[n._errorString," ",m.errorString," (",m.httpCode,")"].join("")}throw {code:n._errorCode,message:n._errorString}})};e._innerFunV2=function(h,i){var j=this;if(g.isHttpServerInvalid(j)){return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunRawV2(h,i,"text").then(function(k){if(k&&Dynamsoft.Lib.isArray(k.result)&&k.result.length>0){return k.result[0]}return k})};e._innerFunRaw=function(k,j,u,l,v,w,i){var s=this,h,x,r,q="f/",t,o=false;if(g.isHttpServerInvalid(s)){return false}s._resetErr();if(!s._isValid()){return false}if(u){o=true;q="fa/"}h=[s.httpUrl,q,k,"?",g.getRandom()].join("");x=g.getJson(s,k,j,0);r={method:"POST",url:h,data:x,async:o,onSuccess:function(y,p,m){var z=false;try{if(c.isString(y)&&m.getResponseHeader("content-type")==="text/json"){z=c.parse(y)}else{z=y}}catch(A){}if(z){if(z.exception!==undefined&&z.description!==undefined){s._errorCode=z.exception;s._errorString=z.description}else{s._resetErr()}if(v){t=z}else{t=z.result}}else{Dynamsoft.Lib.Errors.InvalidResultFormat(s);t=""}if(c.isFunction(w)){w(t)}},onError:function(){Dynamsoft.Lib.Errors.NetworkError(s);t="";if(c.isFunction(i)){i()}}};if(!o&&l){if(d.bIE){r.dataType="arraybuffer";r.onSuccess=function(F,H,z){var p,B,G=false,D;if(z.responseHeadersString){var y=z.responseHeadersString;if(y.indexOf("text/json")!=-1){G=true}}p=z.responseData;s._resetErr();t=false;if(p){B=new Uint8Array(p);if(G){p=String.fromCharCode.apply(null,B)}else{t=new Blob([B],{type:s.__strHttpContentTypeFieldValue});D=new c.SparkMD5.ArrayBuffer();D.append(B);t.md5=D.end()}}if(!p||G){var E,C,m=false;if(G){E=p}else{E=z.responseText}C=E.length;if(C>0){if(E.charAt(0)=="{"){try{m=c.parse(E);G=true}catch(A){Dynamsoft.Lib.log(E)}}if(G){if(m.exception!==undefined&&m.description!==undefined){s._errorCode=m.exception;s._errorString=m.description;t=false}else{t=true}}else{B=new Uint8Array(E);t=new Blob([B],{type:s.__strHttpContentTypeFieldValue});D=new c.SparkMD5.ArrayBuffer();D.append(B);t.md5=D.end()}}}if(c.isFunction(w)){w(t)}}}else{if(!o){r.dataType="text";r.contentType="text/plain; charset=x-user-defined";r.mimeType="text/plain; charset=x-user-defined"}r.onSuccess=function(E,G,p){var B,y,C;s._resetErr();B=p.responseText;y=B.length;if(y>0){var F=false,m;if(B.charAt(0)=="{"){try{m=c.parse(B);F=true}catch(z){Dynamsoft.Lib.log(B)}}if(F){if(m.exception!==undefined&&m.description!==undefined){s._errorCode=m.exception;s._errorString=m.description;t=false}else{t=true}}else{C=new Uint8Array(y);for(var A=0;A<y;A++){C[A]=B.charCodeAt(A)}t=new Blob([C],{type:s.__strHttpContentTypeFieldValue});var D=new c.SparkMD5.ArrayBuffer();D.append(C);t.md5=D.end()}}else{t=""}if(c.isFunction(w)){w(t)}}}}else{if(o&&l){r={method:"POST",body:x};if(d.bIE){r.dataType="arraybuffer"}else{r.fetchRaw=true}var n=c.fetch(h,r);if(d.bIE){}else{n=n.then(function(m){var p=m.headers.get("content-type");if(p.indexOf("image/")>=0||p.indexOf("application/octet-stream")>=0){return m.arrayBuffer()}return m.json()})}n=n.then(function(y){s._resetErr();if(y instanceof ArrayBuffer){if(c.isFunction(w)){w(y)}y=null;return}else{if(c.isObject(y)){var p=y;if(p.exception!==undefined&&p.description!==undefined){s._errorCode=p.exception;s._errorString=p.description;if(c.isFunction(i)){i()}}else{var m="";if(p.result){m=p.result}if(c.isFunction(w)){w(m)}}}else{Dynamsoft.Lib.Errors.NetworkError(s);if(c.isFunction(i)){i()}}}},function(m){Dynamsoft.Lib.Errors.NetworkError(s);if(c.isFunction(i)){i()}});return true}}if(!o){c.mix(r,{headers:{"X-Requested-With":false}})}if(d.bFileSystem){r.crossDomain=false}c.ajax(r);if(o){return true}return t};e._innerSend=function(l,i,o,r,v){var s=this,j=s._objWS,x=false,q=false,h=false,k=true;if(l=="ActiveUI"){k=false}else{h=g.isServerInvalid(s)}if(h){if(c.isFunction(v)){v()}return true}if(c.isFunction(r)){q=r}if(c.isFunction(v)){x=v}var z=g.generateCmdId(),u;if(l=="SaveSelectedImagesToBytes"||l=="ConvertToBlob"){var y=g.getJson(s,l,i,z),t=true,n=true,w=true;s._innerFunRaw(l,y,t,n,w,q,x);u=true}else{s.curCommand.push({cmd:l,cmdId:z,sFun:q,fFun:x});u=g.sendData(j,g.getJson(s,l,i,z),false,k)}return u};e.__innerConvertToBlob=function(v,j,o,q,t,u,i,r){var s=this;if(s._isMobileMode()){return s.__innerConvertToBlobByMobile(v,j,o,t,u,i,r)}var n=o,m=true,l=",";if(!c.isString(n)||n==""){n="";l=""}var h=["[",v,',"',j.join(","),'"',l,n,"]"].join("");if(q){return s._innerFunRaw("ConvertToBlob",h,true,m,true,function(y){var x=g.getBlobTypeByImageType(v),p=new Blob([y],{type:x});if(Dynamsoft.DWT.IfAddMD5InUploadHeader){var z=new c.SparkMD5.ArrayBuffer();z.append(y);if(c.isFunction(u)){u(p,z.end(),r)}}else{if(c.isFunction(u)){u(p,"",r)}}p=null},i)}else{var k=s._innerFunRaw("ConvertToBlob",h,false,m,false),w="";if(s.ErrorCode==0){if(k&&"md5" in k){w=k.md5}return u(k,w,r)}else{i();return false}}};e.__innerConvertToBlobByMobile=function(t,k,n,r,s,j,o){var p=this,m=function(i,u){var v={mode:"cors",dataType:"arraybuffer"};c.fetch(i,v).then(function(x){var y="image/"+u;if(u=="pdf"){y="application/pdf"}var w=new Blob([x],{type:y});if(c.isFunction(s)){s(w,o)}w=null})["catch"](function(w){if(c.isFunction(j)){j(w)}})},h=[],q,l;if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP){q="bmp";return p._mobileNotSupport("Convert to bmp",j)}else{if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG){q="jpg"}else{if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){q="png"}else{if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF){q="tiff"}else{if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){q="pdf"}else{if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){q="jp2"}else{q="png"}}}}}}for(l=0;l<k.length;l++){h.push(p._ImgManager.convertServerIdToClientIndex(k[l]))}return p._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams("",h,q,r,false),0,m,j)};e.__innerConvertToBase64ByMobile=function(k,r,p,q,j){var n=this,m=function(i,s){var t={mode:"cors",dataType:"arraybuffer"};c.fetch(i,t).then(function(v){var u=new FileReader();u.onload=function(y){var z=y.target.result,x=c.isString(z)?z.split(","):[];if(x.length>=2){z=x[1]}if(c.isFunction(q)){q({result:[z,z.length,this.md5]})}};var w="image/"+s;if(s=="pdf"){w="application/pdf"}n._innerSendToMobile("GetMD5",Dynamsoft.Lib.MobileFuns.makeParams(v),0,function(x){u.md5=x;u.readAsDataURL(new Blob([v],{type:w}))},j)},function(u){if(c.isFunction(j)){j(u)}})},h=[],o,l;if(r==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP){o="bmp";return n._mobileNotSupport("Convert to bmp",j)}else{if(r==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG){o="jpg"}else{if(r==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){o="png"}else{if(r==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF){o="tiff"}else{if(r==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){o="pdf"}else{if(r==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){o="jp2"}else{o="png"}}}}}}for(l=0;l<k.length;l++){h.push(n._ImgManager.convertServerIdToClientIndex(k[l]))}return n._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams("",h,o,p,false),0,m,j)};e.__SaveLocalFileToBytes=function(j,h,m,l,o){var n=this,k=true;if(h){n._innerFunRaw("SaveSelectedImagesToBytes",g.makeParams(0,0,j,m),h,k,true,function(p){if(c.isFunction(l)){var q=new Blob([p]);l(q);q=null}},o);return true}else{var i=n._innerFunRaw("SaveSelectedImagesToBytes",g.makeParams(0,0,j,m),h,k,false);if(n.ErrorCode==0){return l(i)}else{o();return false}}};e.__captureImage=function(h,j,i,k){return this.__LoadImageFromBytesV2(h,j,"",true,i,k,0,0,"true")};e.__LoadImageFromBytes=function(i,m,l,h,k,o,n,j){return this.__LoadImageFromBytesV2(i,m,l,h,k,o,n,j,"false")};e.__LoadImageFromBytesV2=function(D,i,B,C,q,s,n,v,j){var z=this,y="LoadImageFromBytes",u=i||3,w=D.size||D.length,l=D.name||"unknown",x,A=g.isServerInvalid(z),o=true,k=0,r=1;if(!isNaN(n)&&n>=0&&!isNaN(v)&&v>0){r=0}else{n=0;v=0}k=z.__GetLoadEventsNum();x=["[",w,",",0,",",u,',"',B,'",',n,",",v,",",k,",",r,",",j,"]"].join("");var h=function(){Dynamsoft.Lib.closeProgress(y);z.__bLoadingImage=false;if(o){var m=z._ImgManager.getCurrentImageIndex();if(m>=0){z.OnRefreshUI(m)}}if(c.isFunction(s)){s(z._errorCode,z._errorString,l)}return false};if(A){o=false;return h()}if(!c.License.checkProductKey(z,{Core:true})&&!c.License.checkProductKey(z,{Webcam:true},true)){o=false;return h()}if(!c.License.checkPDFProductKeyWhenNeeds(z,i)){o=false;return h()}if(w===0){Dynamsoft.Lib.Errors.ImageFileLengthCannotZero(z);o=false;return h()}g.setBtnCancelVisibleForProgress(z,false);return this._innerSendBlob(y,x,D,C,r,function(){if(n+w==v||v<=0||isNaN(v)){Dynamsoft.Lib.closeProgress(y)}z.__bLoadingImage=false;if(z._isBindViewer()){var p=z._ImgManager.getCurrentImageIndex();if(C&&p>=0){z.OnRefreshUI(p)}}if(c.isFunction(q)){if(C){setTimeout(function(){q(l)},30)}else{try{q(l)}catch(m){Dynamsoft.Lib.log(m.message)}}}if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(z)}return true},h)};e._innerSendBlob=function(u,t,A,x,r,i,z){var w=this,l=w._objWS,h=false;if(g.isServerInvalid(w)){if(c.isFunction(z)){z()}return false}if(c.isFunction(z)){h=z}if(x){var q=g.generateCmdId(),j;j=function(){if(c.isFunction(i)){i()}};w.curCommand.push({cmd:u,cmdId:q,sFun:j,fFun:h});g.sendData(l,g.getJson(w,u,t,q),A,true)}else{var B,v=[],k,s,n,y="f/",o="";if(g.isHttpServerInvalid(w)){return false}w._resetErr();if(!w._isValid()){return false}k=[w.httpUrl,y,u,"?",g.getRandom()].join("");s=g.getJson(w,u,t,0);s+="\r\n\r\n";s+=Dynamsoft.Lib.base64.encodeArray(A);n={method:"post",url:k,processData:false,data:s,async:false,onSuccess:function(D,C,m){var E=false,p=false;try{if(c.isString(D)&&m.getResponseHeader("content-type")==="text/json"){E=c.parse(D)}else{E=D}}catch(G){}if(E!==undefined&&E!==null){if(E.exception!==undefined&&E.description!==undefined){w._errorCode=E.exception;w._errorString=E.description}else{w._resetErr()}B=E.result;if(B&&c.isArray(B)&&B.length>=1){if(r){var F=B[0];if(F&&c.isObject(F)){o=F.ids;if(c.isArray(F.metaData)){v=F.metaData}p=true}}else{o=B.join(",");v=[];p=true}}}if(!p){Dynamsoft.Lib.Errors.InvalidResultFormat(w);B="";v=[]}},onError:function(){Dynamsoft.Lib.Errors.NetworkError(w);B="";v=[]}};c.mix(n,{headers:{"X-Requested-With":false}});if(d.bFileSystem){n.crossDomain=false}c.ajax(n);if(w._errorCode==0){if(o.length>0){w._OnBitmapChanged(["c2",o,1,w._ImgManager.getCurrentImageIndex(),w._ImgManager.count(),v])}if(c.isFunction(i)){i()}}else{if(c.isFunction(h)){h()}}return B}};e._innerActiveUI=function(j,i){if(this._blts){var k=this;var h=Dynamsoft.DWT.li({instanceMode:Dynamsoft.DWT.EnumInstance.dwt_desktop});if(!Dynamsoft.DWT.lisValidID(h)){k=null;return}k._innerSend("ActiveUI",g.makeParams(Dynamsoft.Lib.env.WSVersion,Dynamsoft.Lib.env.WSSession,1,h),false,j,i);k=null}else{this._innerSend("ActiveUI",g.makeParams(Dynamsoft.Lib.env.WSVersion,Dynamsoft.Lib.env.WSSession,1),false,j,i)}return true}});Dynamsoft.Ready(function(a,g){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var f=Dynamsoft.navInfo,k=a.html5.STwain,c=k.prototype,i=a.html5.Funs,j=a.removeNonPrintableChar,h=Dynamsoft.DWT,e=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"];c.LoadDibFromClipboard=function(p,m){var q=this,n=1;q._resetErr();if(!q._isValid()){return false}if(q._isMobileMode()){return q._mobileNotSupport("LoadDibFromClipboard",m)}var o=-1,l=0;l=q.__GetLoadEventsNum();return q.__innerLoadImage("LoadDibFromClipboard",i.makeParams(l,n),o,true,n,p,m)};c.LoadImage=function(q,p,l){var r=this,t=1;r._resetErr();if(!r._isValid()){return false}if(r._isMobileMode()){return r._mobileNotSupport("LoadImage",l)}var s=i.replaceLocalFilename(q),o=a.html5.Funs.getImageType(s),n=0,u,m;if(p&&a.isFunction(p)){u=function(){p()}}if(l&&a.isFunction(l)){m=function(){l(r.ErrorCode,r.ErrorString)}}n=r.__GetLoadEventsNum();if(s==""){r.__bOpenFileNow=true}return r.__innerLoadImage("LoadImage",i.makeParams(s,n,t),o,true,t,u,m)};c.LoadImageEx=function(p,q,o,l){var s=this,v=1;s._resetErr();if(!s._isValid()){return false}if(s._isMobileMode()){var t=a.one(".d-loadImage");if(t.length==0){var x=document.createElement("input");x._stwain=s;x.setAttribute("type","file");x.setAttribute("multiple","multiple");x.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;";x.className="d-loadImage";if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP){x.setAttribute("accept","image/bmp")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG){x.setAttribute("accept","image/jpeg")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF){x.setAttribute("accept","image/tiff")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){x.setAttribute("accept","image/png")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){x.setAttribute("accept",".pdf")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){x.setAttribute("accept",".jp2,.j2k,.j2c")}else{if(a.env.bMobile){x.setAttribute("accept","image/jpeg,image/png,image/tiff")}else{x.setAttribute("accept","image/*,.pdf,.jp2,.j2k,.j2c")}}}}}}}x.ondoubleclick=function(){if(this.files.length>0){this._stwain.LoadImageFromBinary(this.files,o,l)}this.value="";this._stwain=null};x.onchange=function(){if(this.files.length>0){this._stwain.LoadImageFromBinary(this.files,o,l)}this.value="";this._stwain=null};document.body.appendChild(x);x.click()}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP){t[0].setAttribute("accept","image/bmp")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG){t[0].setAttribute("accept","image/jpeg")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF){t[0].setAttribute("accept","image/tiff")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){t[0].setAttribute("accept","image/png")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){t[0].setAttribute("accept",".pdf")}else{if(q==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){t[0].setAttribute("accept",".jp2,.j2k,.j2c")}else{if(a.env.bMobile){t[0].setAttribute("accept","image/jpeg,image/png,image/tiff")}else{t[0].setAttribute("accept","image/*,.pdf,.jp2,.j2k,.j2c")}}}}}}}t[0].value="";t[0]._stwain=s;t[0].click()}return true}var r=i.replaceLocalFilename(p),u=q,n=0,w,m;if(o&&a.isFunction(o)){w=function(){o()}}if(l&&a.isFunction(l)){m=function(){l(s.ErrorCode,s.ErrorString)}}if(u==Dynamsoft.DWT.EnumDWT_ImageType.IT_ALL){u=-1}n=s.__GetLoadEventsNum();if(r==""){s.__bOpenFileNow=true}return s.__innerLoadImage("LoadImageEx",i.makeParams(r,u,n,v),u,true,v,w,m)};c.EnableSource=function(m,n,l){var o=this;o._resetErr();if(!o._isValid()){return false}if(o._isMobileMode()){return o._mobileNotSupport("EnableSource",l)}return o.AcquireImage(m,n,l)};c.AcquireImage=function(w,v,u){var r=this,t=null,m=null,x,s;r._resetErr();if(!r._isValid()){return false}if(a.isUndefined(u)&&(a.isFunction(w)&&a.isFunction(v)||a.isFunction(w)&&a.isUndefined(v)||a.isFunction(w)&&v==null||w==null&&a.isFunction(v))){s={};if(a.isFunction(w)){t=w}if(a.isFunction(v)){m=v}}else{if(a.isUndefined(w)||w==null){s={}}else{s=a.clone(w)}if(a.isFunction(v)){t=function(){v(s)}}if(a.isFunction(u)){m=function(){u(s,r._errorCode,r._errorString)}}}if(!a.License.checkProductKey(r,{Core:true})){if(a.isFunction(m)){m(r.ErrorCode,r.ErrorString)}return false}if(r._isMobileMode()){return r._mobileNotSupport("AcquireImage",m)}if(i.isServerInvalid(r)){if(a.isFunction(m)){m(r.ErrorCode,r.ErrorString)}return false}if(!r._bRemoteMode&&s.RemoteScan){s.RemoteScan=false}if(r._bRemoteMode&&s.RemoteScan){if(!a.isFunction(r.__OnRemoteScanStatusAsync)){r.__OnRemoteScanStatusAsync=function(){}}if(!a.isFunction(r.__OnSourceUIClose)){r.__OnSourceUIClose=function(){}}}var p=0;for(var o=0;o<e.length;o++){var y=["__",e[o]].join("");if(a.isFunction(r[y])){p=p|(1<<o)}}s.EnableEvents=p;r._enableEvents=p;if(r._bRemoteMode&&s.RemoteScan&&(r._isBindViewer()||s.ShowRemoteScanUI)){var l=document.createElement("div");l.style.position="absolute";l.style.zIndex="510000";l.style.left="0";l.style.top="0";var n=document.createElement("img");n.className="ds-img-screen";l.appendChild(n);document.body.appendChild(l);r._acquireDivEL=l}if("SelectSourceByIndex" in s){var q=s.SelectSourceByIndex;delete s.SelectSourceByIndex;return r.SelectSourceByIndexAsync(q).then(function(){x=["[",a.stringify(s),"]"].join("");r.__bAcquireImageNow=true;return r.__innerAcquireImage("AcquireImage",x,false,t,m)},function(z){m(z.code,z.message)})}if(!r._bRemoteMode){if(r.bPageFocus&&h.IfAlwaysFocusOnPopupWindow){if(!r.bServerAlwaysFocusOnPopupWindow){r._OnPageFocus(true)}}else{if(r.bServerAlwaysFocusOnPopupWindow){r._OnPageBlur(true)}}}x=["[",a.stringify(s),"]"].join("");r.__bAcquireImageNow=true;return r.__innerAcquireImage("AcquireImage",x,false,t,m)};c._startScan=function(t,s,r){var o=this,q=null,l=null,u,p;if(a.isUndefined(t)||t==null){p={}}else{p=t}o._resetErr();if(!o._isValid()){return false}if(a.isFunction(s)){q=function(){s(p)}}if(a.isFunction(r)){l=function(x,w){r(x,w,p)}}if(i.isServerInvalid(o)){if(a.isFunction(l)){l(o._errorCode,o._errorString)}return false}if(!a.License.checkProductKey(o,{Core:true})){if(a.isFunction(l)){l(o._errorCode,o._errorString)}return false}var n=0;for(var m=0;m<e.length;m++){var v=["__",e[m]].join("");if(a.isFunction(o[v])){n=n|(1<<m)}}p.EnableEvents=n;u=["[",a.stringify(p),"]"].join("");o.__bAcquireImageNow=true;return o.__innerAcquireImage("StartScan",u,false,q,l)};c.CancelAllPendingTransfers=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CancelAllPendingTransfers")}return this._innerFun("CancelAllPendingTransfers")};c.CloseSource=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CloseSource")}return l._innerFun("CloseSource")};c.CloseSourceManager=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CloseSourceManager")}return l._innerFun("CloseSourceManager")};c.CloseSourceAsync=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("CloseSource")}return l._innerFunV2("CloseSource")};c.CloseSourceManagerAsync=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("CloseSourceManager")}return l._innerFunV2("CloseSourceManager")};c.DisableSource=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("DisableSource")}return l._innerFun("DisableSource")};c.FeedPage=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("FeedPage")}return l._innerFun("FeedPage")};c.GetDeviceType=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("GetDeviceType")}return l._innerFun("GetDeviceType")};c.GetSourceNameItems=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("GetSourceNameItems")}if(m.__sourceCount<0){m.SourceCount=0}if(l<m.__sourceCount&&l>=0){return m.__sourceName[l]}else{return""}};c.SourceNameItems=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("SourceNameItems")}return m.GetSourceNameItems(l)};var d=function(m){var l=JSON.parse(j(m));a.each(l,function(p){if(p.ProductName){var o=p.ProductName;p.ProductName=a.base64.decode(o)}if(p.ProductFamily){var q=p.ProductFamily;p.ProductFamily=a.base64.decode(q)}if(p.Manufacturer){var n=p.Manufacturer;p.Manufacturer=a.base64.decode(n)}if(p.Version&&p.Version.Info){var r=p.Version.Info;p.Version.Info=a.base64.decode(r)}});return l};c._getSourceNamesSyncV2=function(o){var q=this,u=1,r=[],m,t,n=[];m=q._innerFun("GetSourceNames",i.makeParams(u,o));if(q._errorCode!=0&&q._errorCode!=-3032){return[]}if(m!=""){r=d(m);for(var p=0;p<r.length;p++){t=r[p];var l=t.IsCurrentSource=="true"?true:false;var s=t.IsDefaultSource=="true"?true:false;t.IsCurrentSource=l;t.IsDefaultSource=s;n.push(t)}}return n};c._getSourceNamesAsyncV2=function(m){var n=this,l=1;return n._innerFunV2("GetSourceNames",i.makeParams(l,m)).then(function(q){if(n._errorCode!=0&&n._errorCode!=-3032){throw 0}var p=[],s,o=[];if(q!=""){p=d(q);for(var r=0;r<p.length;r++){s=p[r];var u=s.IsCurrentSource=="true"?true:false;var t=s.IsDefaultSource=="true"?true:false;s.IsCurrentSource=u;s.IsDefaultSource=t;o.push(s)}}return o})};c.GetSourceNames=function(l){var n=this,m=n.SourceCount;if(m<=0){m=0}if(l){return n.__sourceDetails}else{return n.__sourceName}};c._resetSources=function(){var l=this;l.__defaultSourceName="";l.__sourceCount=0;l.__icaSourceCount=-1;l.__sourceName=[];l.__sourceDetails=[]};c.getSourceCount=function(){var q=this,n,p=false,m=false,o=false;q._resetErr();if(!q._isValid()){return false}if(q._bRemoteMode){if(q.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){o=true}else{if(q.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){m=true}else{if(q.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){p=true}}}}else{p=f.bMac;m=f.bLinux;o=f.bWin}q._resetErr();if(!q._isValid()){return false}q._resetSources();a.showMask();if(p&&(q._driverType===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_ICA)){n=q._getSourceNamesAsyncV2(Dynamsoft.DWT.EnumDWT_Driver.ICA).then(function(u){var r,t,s;for(s=0;s<u.length;s++){t=u[s];r=t.ProductName;if(a.isString(r)){r=j(a.trim(r));if(r!==""){if(t.DriverType==="ICA"){r="ICA-"+r}if(t.IsDefaultSource==true){q.__defaultSourceName=r}q.__sourceName.push(r);q.__sourceDetails.push(t)}}}q.__icaSourceCount=q.__sourceDetails.length}).then(function(){return q._getSourceNamesAsyncV2(Dynamsoft.DWT.EnumDWT_Driver.TWAIN)}).then(function(u){var r,t,s;for(s=0;s<u.length;s++){t=u[s];r=t.ProductName;if(a.isString(r)){r=j(a.trim(r));if(r!==""){if(t.DriverType==="ICA"){r="ICA-"+r}if(t.IsDefaultSource==true){q.__defaultSourceName=r}q.__sourceName.push(r);q.__sourceDetails.push(t)}}}}).then(function(){var r=q.__sourceDetails.length;q.__sourceCount=r;if(q.__defaultSourceName===""&&q.__sourceName.length>0){q.__defaultSourceName=q.__sourceName[0]}a.hideMask();return r},function(){q._resetSources();q.__icaSourceCount=0;a.hideMask();return 0})}else{if(o&&Dynamsoft.dcp.b64bit&&(q._driverType===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64)){n=q._getSourceNamesAsyncV2(Dynamsoft.DWT.EnumDWT_Driver.TWAIN).then(function(u){var r,t,s;for(s=0;s<u.length;s++){t=u[s];r=t.ProductName;if(a.isString(r)){r=j(a.trim(r));if(r!==""){if(t.IsDefaultSource==true){q.__defaultSourceName=r}q.__sourceName.push(r);q.__sourceDetails.push(t)}}}q.__icaSourceCount=q.__sourceDetails.length});if(Dynamsoft.dcp.b64bit){n=n.then(function(){return q._getSourceNamesAsyncV2(Dynamsoft.DWT.EnumDWT_Driver.TWAIN64)}).then(function(r){var s,u,t;for(t=0;t<r.length;t++){u=r[t];s=u.ProductName;if(a.isString(s)){s=a.trim(s);if(s!==""){if(u.DriverType==="TWAIN(64Bit)"){s="Twain64-"+s}if(u.IsDefaultSource==true){q.__defaultSourceName=s}q.__sourceName.push(s);q.__sourceDetails.push(u)}}}})}n=n.then(function(){var r=q.__sourceDetails.length;q.__sourceCount=r;if(q.__defaultSourceName===""&&q.__sourceName.length>0){q.__defaultSourceName=q.__sourceName[0]}a.hideMask();return r},function(){q._resetSources();q.__icaSourceCount=0;a.hideMask();return 0})}else{var l=1;n=q._getSourceNamesAsyncV2().then(function(u){var r,t,s;for(s=0;s<u.length;s++){t=u[s];r=t.ProductName;if(a.isString(r)){r=j(a.trim(r));if(r!==""){if(t.DriverType==="ICA"){r="ICA-"+r}if(t.IsDefaultSource==true){q.__defaultSourceName=r}q.__sourceName.push(r);q.__sourceDetails.push(t)}}}}).then(function(){var r=q.__sourceDetails.length;q.__sourceCount=r;if(q.__defaultSourceName===""&&q.__sourceName.length>0){q.__defaultSourceName=q.__sourceName[0]}q.__icaSourceCount=0;a.hideMask();return r},function(){q._resetSources();q.__icaSourceCount=0;a.hideMask();return 0})}}return n};c.GetSourceNamesAsync=function(l){var n=this,m;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupportAsync("GetSourceNames")}m=n.getSourceCount();if(l){return m.then(function(o){return n.__sourceDetails})}else{return m.then(function(o){return n.__sourceName})}};c.GetSourceType=function(l){var n=this,m=l*1;n._resetErr();m=n.__SetImageCaptureTypeInner(l);return n._innerFun("GetSourceType",i.makeParams(m))};c.OpenSource=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("OpenSource")}return l._innerFun("OpenSource")};c.OpenSourceManager=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("OpenSourceManager")}return l._innerFun("OpenSourceManager")};c.OpenSourceAsync=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("OpenSource")}return l._innerFunV2("OpenSource")};c.OpenSourceManagerAsync=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("OpenSourceManager")}return l._innerFunV2("OpenSourceManager")};c.ResetImageLayout=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("ResetImageLayout")}return l._innerFun("ResetImageLayout")};c.RewindPage=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("RewindPage")}return l._innerFun("RewindPage")};c.SelectSource=function(l,m){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("SelectSource",m)}if(a.isUndefined(l)){if(n._bRemoteMode&&n.IfShowUI){a.Errors.SelectSourceMustAsyncWhenRemote(n);return false}if(n._driverType==Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){a.Errors.SelectSourceMustAsync(n);return false}return n._innerFun("SelectSource")}else{n.SelectSourceAsync().then(l,function(){if(a.isFunction(m)){m(n.ErrorCode,n.ErrorString)}});return true}};c.SelectSourceAsync=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupportAsync("SelectSource")}if(l){return m._innerFunV2("SelectSource",i.makeParams(l))}return m.getSourceCount().then(function(x){var y=document,t,w;if(x<=0){var r=h.CustomizableDisplayInfo.dialogText.selectSource[3];alert(r);return a.Promise.reject(r)}if(!a.dialog.selectsourcedlg){var p,q=-1;w=y.createElement("dialog");w.className="dynamsoft-dialog-selectsource";w.style.top="20%";if(f.bIE||f.bEdge){w.style.width="300px"}w.setAttribute("closed","closed");p=[];p.push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">');for(t=0;t<m.__sourceCount;t++){var n="";if((m.__defaultSourceName==""&&t==0)||m.__defaultSourceName==m.__sourceName[t]){n=" dynamsoft-dialog-selectsource-sourcelist-li-selected";q=t}p.push('<li class="dynamsoft-dialog-selectsource-item'+n+'" sourceindex='+t+">"+m.__sourceName[t]+"</li>")}p.push("</ul>");p=p.join("");var u=["<p>",h.CustomizableDisplayInfo.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',p,"</div>",'<div><input type="button" value="',h.CustomizableDisplayInfo.dialogText.selectSource[1],'" class="dynamsoft-dialog-selectsource-button-select">','<input type="button" value="',h.CustomizableDisplayInfo.dialogText.selectSource[2],'" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join("");w.innerHTML=u;a.dialog.selectsourcedlg=w;y.body.appendChild(a.dialog.selectsourcedlg);a.each(a.all(".dynamsoft-dialog-selectsource-item"),function(A,z){a.addEventListener(A,"click",function(C){var F=C.target,D=F.attributes.sourceindex.value,B=F.parentElement.children;for(var E=0;E<B.length;E++){B[E].className="dynamsoft-dialog-selectsource-item"}F.className="dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected";a.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",D)})});a.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",q.toString());a.dialog.setup(a.dialog.selectsourcedlg)}else{var s=Dynamsoft.Lib.one(".dynamsoft-dialog-selectsource");if(s&&s.length>0){w=s[0]}}a.dialog.selectsourcedlg.showModal();var o=0;if(y.compatMode=="CSS1Compat"){o=y.documentElement.scrollTop}else{o=y.body.scrollTop}if(o>0&&w){var v=a.DOM.getElDimensions(w,true).offsetTop;v+=o;w.style.top=v+"px"}return new a.Promise(function(A,z){a.removeEventListener(a.one(".dynamsoft-dialog-selectsource-button-select")[0],"click");a.removeEventListener(a.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click");a.addEventListener(a.one(".dynamsoft-dialog-selectsource-button-select")[0],"click",function(){var B=parseInt(Dynamsoft.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);m.SelectSourceByIndexAsync(B).then(function(){a.dialog.selectsourcedlg.close();document.body.removeChild(a.dialog.selectsourcedlg);a.dialog.selectsourcedlg=false;A(B)})});a.addEventListener(a.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click",function(){a.dialog.selectsourcedlg.close();document.body.removeChild(a.dialog.selectsourcedlg);a.dialog.selectsourcedlg=false;z({code:-1032,message:"User cancelled the operation."})})})})};c.SelectSourceByIndex=function(l){var n=this,m=l*1;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("SelectSourceByIndex")}m=n.__SetImageCaptureTypeInner(l);return n._innerFun("SelectSourceByIndex",i.makeParams(m))};c.__SetImageCaptureTypeInner=function(m){var r=this,p=m*1,l=0,q=false,n=false,o=false;if(!r._isValid()){return false}if(r._bRemoteMode){if(r.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){o=true}else{if(r.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){n=true}else{if(r.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){q=true}}}}else{q=f.bMac;n=f.bLinux;o=f.bWin}if(q&&r._driverType===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_ICA){if(r.__icaSourceCount==-1){l=r.SourceCount;if(l<=0){l=0}}if(p>=r.__icaSourceCount){p-=r.__icaSourceCount;r.__currentImageCaptureDriverType=Dynamsoft.DWT.EnumDWT_Driver.TWAIN;r._innerFun("SetImageCaptureDriverType",i.makeParams(Dynamsoft.DWT.EnumDWT_Driver.TWAIN,r._driverType))}else{r.__currentImageCaptureDriverType=Dynamsoft.DWT.EnumDWT_Driver.ICA;r._innerFun("SetImageCaptureDriverType",i.makeParams(Dynamsoft.DWT.EnumDWT_Driver.ICA,r._driverType))}}else{if(o&&Dynamsoft.dcp.b64bit&&r._driverType===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(r.__icaSourceCount==-1){l=r.SourceCount;if(l<=0){l=0}}if(p>=r.__icaSourceCount){p-=r.__icaSourceCount;r.__currentImageCaptureDriverType=Dynamsoft.DWT.EnumDWT_Driver.TWAIN64;r._innerFun("SetImageCaptureDriverType",i.makeParams(Dynamsoft.DWT.EnumDWT_Driver.TWAIN64,r._driverType))}else{r.__currentImageCaptureDriverType=Dynamsoft.DWT.EnumDWT_Driver.TWAIN;r._innerFun("SetImageCaptureDriverType",i.makeParams(Dynamsoft.DWT.EnumDWT_Driver.TWAIN,r._driverType))}}}return p};c._resetImageCaptureDriverType=function(o){var r=this,q,m=o,p=false,l=false,n=false;r._resetErr();if(!r._isValid()){return false}if(r._bRemoteMode){if(r.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){n=true}else{if(r.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){l=true}else{if(r.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){p=true}}}}else{p=f.bMac;l=f.bLinux;n=f.bWin}if(p&&r._driverType===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_ICA){if(r.__icaSourceCount==-1){q=r.getSourceCount()}else{q=a.Promise.resolve(r.__sourceCount)}if(o>=r.__icaSourceCount){m-=r.__icaSourceCount;r.__currentImageCaptureDriverType=Dynamsoft.DWT.EnumDWT_Driver.TWAIN;q=q.then(function(){return r._innerFunV2("SetImageCaptureDriverType",i.makeParams(Dynamsoft.DWT.EnumDWT_Driver.TWAIN,r._driverType))})}else{r.__currentImageCaptureDriverType=Dynamsoft.DWT.EnumDWT_Driver.ICA;q=q.then(function(){return r._innerFunV2("SetImageCaptureDriverType",i.makeParams(Dynamsoft.DWT.EnumDWT_Driver.ICA,r._driverType))})}}else{if(n&&Dynamsoft.dcp.b64bit&&r._driverType===Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(r.__icaSourceCount==-1){q=r.getSourceCount()}else{q=a.Promise.resolve(r.__sourceCount)}if(o>=r.__icaSourceCount){m-=r.__icaSourceCount;r.__currentImageCaptureDriverType=Dynamsoft.DWT.EnumDWT_Driver.TWAIN64;q=q.then(function(){return r._innerFunV2("SetImageCaptureDriverType",i.makeParams(Dynamsoft.DWT.EnumDWT_Driver.TWAIN64,r._driverType))})}else{r.__currentImageCaptureDriverType=Dynamsoft.DWT.EnumDWT_Driver.TWAIN;q=q.then(function(){return r._innerFunV2("SetImageCaptureDriverType",i.makeParams(Dynamsoft.DWT.EnumDWT_Driver.TWAIN,r._driverType))})}}else{q=a.Promise.resolve(0)}}return q.then(function(){return m})};c.GetSourceTypeAsync=function(l){var n=this,m=l*1;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupportAsync("GetSourceType")}return n._resetImageCaptureDriverType(m).then(function(o){return n._innerFunV2("GetSourceType",i.makeParams(o))})};c.SelectSourceByIndexAsync=function(l){var n=this,m=l*1;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupportAsync("SelectSourceByIndex")}return n._resetImageCaptureDriverType(m).then(function(o){return n._innerFunV2("SelectSourceByIndex",i.makeParams(o))})};c.SetFileXferInfo=function(m,o){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isMobileMode()){return p._mobileNotSupport("SetFileXferInfo")}var l,n;if(Dynamsoft.navInfoSync.bFileSystem){l=m.replace(/<%/g,"<%25")}else{l=m}n=i.replaceLocalFilename(l);return p._innerFun("SetFileXferInfo",i.makeParams(n,o))};c.SetImageLayout=function(o,n,m,l){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isMobileMode()){return p._mobileNotSupport("SetImageLayout")}return p._innerFun("SetImageLayout",i.makeParams(o,n,m,l))};c.CapGet=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGet")}return this._innerFun("CapGet")};c.CapGetCurrent=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetCurrent")}return this._innerFun("CapGetCurrent")};c.CapGetDefault=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetDefault")}return this._innerFun("CapGetDefault")};c.CapGetFrameBottom=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapGetFrameBottom")}return this._innerFun("CapGetFrameBottom",i.makeParams(l))};c.CapGetFrameLeft=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapGetFrameLeft")}return this._innerFun("CapGetFrameLeft",i.makeParams(l))};c.CapGetFrameRight=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapGetFrameRight")}return this._innerFun("CapGetFrameRight",i.makeParams(l))};c.CapGetFrameTop=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapGetFrameTop")}return this._innerFun("CapGetFrameTop",i.makeParams(l))};c.CapGetHelp=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetHelp")}return this._innerFun("CapGetHelp")};c.CapGetLabel=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetLabel")}return this._innerFun("CapGetLabel")};c.CapGetLabels=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetLabels")}return this._innerFun("CapGetLabels")};c.CapIfSupported=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapIfSupported")}return this._innerFun("CapIfSupported",i.makeParams(l))};c.CapReset=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapReset")}return this._innerFun("CapReset")};c.CapSet=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapSet")}return this._innerFun("CapSet")};c.CapSetFrame=function(n,p,o,m,l){var q=this;q._resetErr();if(!q._isValid()){return false}if(q._isMobileMode()){return q._mobileNotSupport("CapSetFrame")}return this._innerFun("CapSetFrame",i.makeParams(n,p,o,m,l))};c.GetCapItems=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("GetCapItems")}return this._innerFun("GetCapItems",i.makeParams(l))};c.GetCapItemsString=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("GetCapItemsString")}return this._innerFun("GetCapItemsString",i.makeParams(l))};c.SetCapItems=function(m,l){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("SetCapItems")}return this._innerFun("SetCapItems",i.makeParams(m,l))};c.SetCapItemsString=function(m,l){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("SetCapItemsString")}return this._innerFun("SetCapItemsString",i.makeParams(m,l))};c.GenerateURLForUploadData=function(w,t,v,u,p){var r=this,l=[];if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP||t==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG||t==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){if(!a.isArray(w)){a.Errors.IndicesNotArray(r);if(a.isFunction(u)){u(r.ErrorCode,r.ErrorString,"",w,t)}return""}if(w.length>1){a.Errors.UploadIndexMoreThanOne(r);if(a.isFunction(u)){u(r.ErrorCode,r.ErrorString,"",w,t)}return""}if(!r._checkIndices(w)){u(r.ErrorCode,r.ErrorString,"",w,t);return false}var q=r._ImgManager.convertClientIndexToServerId(w[0]);if(q!=-1){l.push(q)}}else{if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF||t==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){var n,o;if(a.isArray(w)){if(!r._checkIndices(w)){u(r.ErrorCode,r.ErrorString,"",w,t);return false}n=w}else{if(w==-1){n=[];for(o=0;o<r._ImgManager.count();o++){n.push(o)}}else{a.Errors.IndicesNotArray(r);if(a.isFunction(u)){u(r.ErrorCode,r.ErrorString,r.__HTTPPostResponseString,w,t)}return""}}a.each(n,function(y){var x=r._ImgManager.convertClientIndexToServerId(y);if(x!=-1){l.push(x)}})}else{if(!a.isArray(w)){a.Errors.IndicesNotArray(r)}else{a.Errors.InvalidImageType(r)}if(a.isFunction(u)){u(r.ErrorCode,r.ErrorString,r.__HTTPPostResponseString,w,t)}return""}}if(a.isFunction(v)&&a.isFunction(u)){var s=function(y,x){v(y,x,t)},m=function(x){u(r.ErrorCode,r.ErrorString,r.__HTTPPostResponseString,x,t)};r._asyncGenerateURLForUploadData(l,t,p,v,m);return true}else{return this._syncGenerateURLForUploadData(l,t,p)}};c._syncGenerateURLForUploadData=function(n,x,s){var v=this,w,r=false,u=Dynamsoft.dcp.managerVersion.join(""),t=s,o=",";if(!a.isString(t)||t==""){t="";o=""}var m=["[",'"dcp","dwasm_'+u,'",',x,',"',n.join(","),'"',o,t,"]"].join("");w=this._innerFunRaw("GenerateURLForUploadData",m,false,false,true);if(w&&a.isArray(w.result)&&w.result.length>1){var y=w.result[0],l=w.result[1];if(y==true){r=["dcp://dwasm_",u,"/file/",l].join("")}}var q=[];if(a.isArray(n)){a.each(n,function(p){var z=v._ImgManager.convertServerIdToClientIndex(p);if(z>-1){q.push(z)}})}if(r==false){a.Errors.GenerateURL_InvalidRetFromServer(v);return""}return r};c._asyncGenerateURLForUploadData=function(m,u,t,z,y){var v=this,x=u,o=function(){if(a.isFunction(y)){var p=[];if(a.isArray(m)){a.each(m,function(A){var B=v._ImgManager.convertServerIdToClientIndex(A);if(B>-1){p.push(B)}})}y(p)}return""},w,n=",";if(x==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP||x==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG||x==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){if(m.length>1){a.Errors.UploadIndexMoreThanOne(v);o();return""}}else{if(x==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF||x==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){}else{a.Errors.InvalidImageType(v);o();return""}}var q=false,s=Dynamsoft.dcp.managerVersion.join(""),r=t;if(!a.isString(r)||r==""){r="";n=""}var l=["[",'"dcp","dwasm_'+s,'",',x,',"',m.join(","),'"',n,r,"]"].join("");return this._innerFunRaw("GenerateURLForUploadData",l,true,false,true,function(A){if(A&&a.isArray(A.result)&&A.result.length>0){var p=A.result[0];if(p==true&&A.result.length>1){var B=A.result[1];q=["dcp://dwasm_",s,"/file/",B].join("")}else{if(A.exception!==undefined&&A.description!==undefined){v._errorCode=A.exception;v._errorString=A.description}else{a.Errors.GenerateURL_InvalidRetFromServer(v)}}}else{a.Errors.GenerateURL_InvalidRetFromServer(v)}if(q==false){o();return""}if(a.isFunction(z)){var C=[];if(a.isArray(m)){a.each(m,function(D){var E=v._ImgManager.convertServerIdToClientIndex(D);if(E>-1){C.push(E)}})}z(q,C,u)}return q},o)}});Dynamsoft.Ready(function(c,b){var a=Dynamsoft;if(!c.product.bHTML5Edition){return}var e=c.html5.STwain,d=e.prototype,f=c.html5.Funs;d.AddText=function(r,p,o,q,k,s,g,h){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("AddText")}var m=parseInt(r);if(isNaN(m)){c.Errors.InvalidIndex(n);return false}if(m<0||m>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return false}var j=c.RGB2BGR(k),i=c.RGB2BGR(s),l=n._ImgManager.convertClientIndexToServerId(m);if(l==-1){c.Errors.IndexOutOfRange(n);return false}return n._innerFun("AddText",f.makeParams(l,p,o,q,j,i,g,h))};d.CreateTextFont=function(i,u,o,n,q,r,j,s,g,p,k,m,t,h){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CreateTextFont")}return this._innerFun("CreateTextFont",f.makeParams(i,u,o,n,q,r,j,s,g,p,k,m,t,h))};d.CopyToClipboard=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}if(j._isMobileMode()){return j._mobileNotSupport("CopyToClipboard")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return false}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return false}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return false}return j._innerFun("CopyToClipboard",f.makeParams(g))};d.CopyToClipboardAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}if(j._isMobileMode()){return j._mobileNotSupportAsync("CopyToClipboard")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("CopyToClipboard",f.makeParams(g))};d._asyncErase=function(u,k,q,t,h,s,l){var o=this,p=function(){f.refreshImageAfterInvokeFun(o,u);if(c.isFunction(s)){setTimeout(s,30)}},j=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}};var n=parseInt(u),g,m;var i=o.__BackgroundFillColor;if(c.isUndef(i)){i="FFFFFF"}else{if(c.isNumber(i)){i=i.toString(16)}else{if(c.isString(i)){i=i.replace("#","")}}}return o._innerSendToMobile("Erase",Dynamsoft.Lib.MobileFuns.makeParams(n,k,q,t,h,i),0,p,j)};d.Erase=function(s,i,n,q,h,p,o){var m=this;m._resetErr();if(!m._isValid()){return false}var l=parseInt(s),g,k;if(isNaN(l)){c.Errors.InvalidIndex(m);if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}return false}if(l<0||l>=m._ImgManager.count()){c.Errors.IndexOutOfRange(m);if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}return false}if(m._isMobileMode()){m._ImgManager.getView().GetWebViewer().clearSelectedAreas();return m._asyncErase(l,i,n,q,h,p,o)}var j=m._ImgManager.convertClientIndexToServerId(l);if(j==-1){c.Errors.IndexOutOfRange(m);if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}return false}m._ImgManager.getView().GetWebViewer().clearSelectedAreas();g=m._innerFun("Erase",f.makeParams(j,i,n,q,h));k=(g==1);if(k){if(c.isFunction(p)){p()}}else{if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}}return k};d.GetImageBitDepth=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return false}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.bitDepth}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageBitDepth",f.makeParams(h))};d.GetImageWidth=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return -1}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return -1}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.width}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return -1}return k._innerFun("GetImageWidth",f.makeParams(h))};d.GetImageHeight=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return -1}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return -1}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.height}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return -1}return k._innerFun("GetImageHeight",f.makeParams(h))};d.GetImageSize=function(j,i,k){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("GetImageSize")}var h=parseInt(j);if(isNaN(h)){c.Errors.InvalidIndex(l);return -1}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return -1}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return -1}return l._innerFun("GetImageSize",f.makeParams(g,i,k))};d.GetImageSizeWithSpecifiedType=function(i,j){var k=this;k._resetErr();if(!k._isValid()){return false}if(k._isMobileMode()){return k._mobileNotSupport("GetImageSizeWithSpecifiedType")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(k);return -1}if(h<0||h>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return -1}var g=k._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(k);return -1}return k._innerFun("GetImageSizeWithSpecifiedType",f.makeParams(g,j))};d.GetImageXResolution=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return false}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.resolutionX}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageXResolution",f.makeParams(h))};d.GetImageYResolution=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return false}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.resolutionY}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageYResolution",f.makeParams(h))};d.SelectAllImages=function(){var k=this,g=k.HowManyImagesInBuffer,j,h=[];k._resetErr();if(!k._isValid()){return false}for(j=0;j<g;j++){h.push(j)}k._ImgManager.SetSelectedClientIndexArray(h);return h};d.SelectImages=function(g){var h=this;h._resetErr();if(!h._isValid()){return false}return h._ImgManager.SetSelectedClientIndexArray(g)};d._asyncGetSkewAngleOnly=function(o,n,i){var k=this,m=function(p){f.refreshImageAfterInvokeFun(k,o);if(c.isFunction(n)){setTimeout(function(){n(p)},30)}},h=function(){if(c.isFunction(i)){i(k.ErrorCode,k.ErrorString)}};var l=parseInt(o),g,j;return k._innerSendToMobile("GetSkewAngleOnly",Dynamsoft.Lib.MobileFuns.makeParams(l),0,m,h)};d._asyncGetSkewAngle=function(o,n,i){var k=this,m=function(p){f.refreshImageAfterInvokeFun(k,o);if(c.isFunction(n)){setTimeout(function(){n(p)},30)}},h=function(){if(c.isFunction(i)){i(k.ErrorCode,k.ErrorString)}};var l=parseInt(o),g,j;return k._innerSendToMobile("GetSkewAngle",Dynamsoft.Lib.MobileFuns.makeParams(l),0,m,h)};d.GetSkewAngle=function(k,j,i){var n=this,l,m;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k);if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){return n._asyncGetSkewAngle(h,j,i)}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("GetSkewAngle",f.makeParams(g));if(n.ErrorCode==0){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j(l)}else{return l}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return true};d.GetSkewAngleEx=function(k,m,l,j,g){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("GetSkewAngleEx")}var i=parseInt(k);if(isNaN(i)){c.Errors.InvalidIndex(n);return false}if(i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return false}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return false}return n._innerFun("GetSkewAngleEx",f.makeParams(h,m,l,j,g))};d.IsBlankImageEx=function(o,h,m,n,g,i){var k=this,l=parseInt(o);k._resetErr();if(!k._isValid()){return false}if(isNaN(l)){c.Errors.InvalidIndex(k);return false}if(l<0||l>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}var j=k._ImgManager.convertClientIndexToServerId(l);if(j==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("IsBlankImageEx",f.makeParams(j,h,m,n,g,i))};d.MirrorAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._innerSendToMobileV2("Mirror",Dynamsoft.Lib.MobileFuns.makeParams(h)).then(function(){f.refreshImageAfterInvokeFun(j,h);j._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("Mirror",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h);j._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}else{throw {code:j._errorCode,message:j._errorString}}})};d.Mirror=function(k,j,i){var n=this;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k);if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._innerSendToMobileV2("Mirror",Dynamsoft.Lib.MobileFuns.makeParams(h)).then(function(){f.refreshImageAfterInvokeFun(n,h);n._ImgManager._UIView.GetWebViewer().clearSelectedAreas();if(j){j()}},function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}var l=n._innerFun("Mirror",f.makeParams(g)),m;m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);n._ImgManager._UIView.GetWebViewer().clearSelectedAreas();if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RemoveAllImages=function(){var n=this,o=!0,k=n._isMobileMode();n._resetErr();if(!n._isValid()){return false}var q=n._ImgManager.GetCurrentTag();if(q==""||q=="All"){if(k){n._OnBitmapChanged(["10","-1",3,-1,0])}else{o=n._innerFun("RemoveAllImages");if(o||n._errorCode==-1033){n._OnBitmapChanged(["0","-1",3,-1,0])}}}else{var j,p=function(){},g=function(){},h=[],r="0";if(k){r="10"}var m=n.HowManyImagesInBuffer;for(j=m-1;j>=0;j--){var l=n._ImgManager.convertClientIndexToServerId(j);if(l>-1){if(k){h.push(l)}else{o=n._innerFunRaw("RemoveImage",f.makeParams(l),true,false,true,p,g);if(o||n._errorCode==-1033){h.push(l)}}}}n._OnBitmapChanged([r,h.join(","),3,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count()])}return o};d.RemoveImage=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j),h=true;if(isNaN(i)){c.Errors.InvalidIndex(k);return false}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}var g=k._ImgManager.convertClientIndexToServerId(i);if(g==-1){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){k._OnBitmapChanged(["10",""+g,3,k._ImgManager.getCurrentImageIndex(),k._ImgManager.count()])}else{h=k._innerFun("RemoveImage",f.makeParams(g));if(h||k._errorCode==-1033){k._OnBitmapChanged(["0",""+g,3,k._ImgManager.getCurrentImageIndex(),k._ImgManager.count()])}}return h};d.RemoveAllImagesAsync=function(){var l=this,n=!0;l._resetErr();if(!l._isValid()){return false}var o=l._ImgManager.GetCurrentTag();if(o==""||o=="All"){if(l._isMobileMode()){l._OnBitmapChanged(["10","-1",3,-1,0]);return c.Promise.resolve(true)}else{return l._innerFunV2("RemoveAllImages").then(function(i){if(i||l._errorCode==-1033){l._OnBitmapChanged(["0","-1",3,-1,0]);return true}return false})}}else{var h,g=[],p,m=l.HowManyImagesInBuffer;for(h=0;h<m;h++){var j=l._ImgManager.convertClientIndexToServerId(h);if(j>-1){g.push(j)}}if(l._isMobileMode()){p=c.Promise.resolve(g.join(","))}else{var k=[];p=c.Promise.resolve(0);for(h=0;h<g.length;h++){p=p.then(function(i){return l._innerFunRawV2("RemoveImage",f.makeParams(g[i])).then(function(q){if(q||l._errorCode==-1033){k.push(g[i])}return i++})})}p=p.then(function(){return k.join(",")})}return p.then(function(i){var q="0";if(l._isMobileMode()){q="10"}if(i!=""){l._OnBitmapChanged([q,i,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])}})}};d.RemoveImageAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){j._OnBitmapChanged(["10",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);return c.Promise.resolve(true)}else{return j._innerFunV2("RemoveImage",f.makeParams(g)).then(function(k){if(k||j._errorCode==-1033){j._OnBitmapChanged(["0",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);return true}return false})}};d._removeImageById=function(h,i,k){var j=this,g=function(){j._OnBitmapChanged(["0",""+h,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);if(c.isFunction(i)){i()}};return j._innerFunRaw("RemoveImage",f.makeParams(h),true,false,true,g,k)};d._asyncRotateEx=function(k,i,j,g){var m=this,h=parseInt(k),l=m.__BackgroundFillColor;if(c.isUndef(l)){l="FFFFFF"}else{if(c.isNumber(l)){l="0x"+l.toString(16)}else{if(c.isString(l)){l=l.replace("#","")}}}return m._innerSendToMobileV2("RotateEx",Dynamsoft.Lib.MobileFuns.makeParams(h,i,j,g,l)).then(function(){f.refreshImageAfterInvokeFun(m,k);m._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})};d.Rotate=function(p,i,h,o,n){var l=this;l._resetErr();if(!l._isValid()){return false}var m=parseInt(p),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncRotateEx(m,i,h,-1).then(o,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("Rotate",f.makeParams(j,i,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m);l._ImgManager._UIView.GetWebViewer().clearSelectedAreas();if(c.isFunction(o)){o()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return k};d.RotateEx=function(q,i,h,p,o,n){var l=this;l._resetErr();if(!l._isValid()){return false}var m=parseInt(q),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncRotateEx(m,i,h,p).then(o,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("RotateEx",f.makeParams(j,i,h,p));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m);l._ImgManager._UIView.GetWebViewer().clearSelectedAreas();if(c.isFunction(o)){o()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return k};d.RotateLeft=function(k,j,i){var n=this;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k),l,m;if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncRotateEx(h,-90,true,-1).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("RotateLeft",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);n._ImgManager._UIView.GetWebViewer().clearSelectedAreas();if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RotateRight=function(k,j,i){var n=this;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k),l,m;if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncRotateEx(h,90,true,-1).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("RotateRight",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);n._ImgManager._UIView.GetWebViewer().clearSelectedAreas();if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RotateAsync=function(k,i,j){var l=this;l._resetErr();if(!l._isValid()){return false}var h=parseInt(k);if(isNaN(h)){c.Errors.InvalidIndex(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(l._isMobileMode()){return l._asyncRotateEx(h,i,j,-1)}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("Rotate",f.makeParams(g,i,j)).then(function(m){if(m==1){f.refreshImageAfterInvokeFun(l,h);l._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}else{throw {code:l._errorCode,message:l._errorString}}})};d.RotateExAsync=function(l,j,k,g){var m=this;m._resetErr();if(!m._isValid()){return false}var i=parseInt(l);if(isNaN(i)){c.Errors.InvalidIndex(m);return c.Promise.reject({code:m._errorCode,message:m._errorString})}if(i<0||i>=m._ImgManager.count()){c.Errors.IndexOutOfRange(m);return c.Promise.reject({code:m._errorCode,message:m._errorString})}if(m._isMobileMode()){return m._asyncRotateEx(i,j,k,g)}var h=m._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(m);return c.Promise.reject({code:m._errorCode,message:m._errorString})}return m._innerFunV2("RotateEx",f.makeParams(h,j,k,g)).then(function(n){if(n==1){f.refreshImageAfterInvokeFun(m,i);m._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}else{throw {code:m._errorCode,message:m._errorString}}})};d.RotateLeftAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncRotateEx(h,-90,true,-1)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("RotateLeft",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h);j._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}else{throw {code:j._errorCode,message:j._errorString}}})};d.RotateRightAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncRotateEx(h,90,true,-1)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("RotateRight",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h);j._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}else{throw {code:j._errorCode,message:j._errorString}}})};d._asyncChangeImageSize=function(p,i,n,o){var k=this;var l=parseInt(p),h=parseInt(i),m=parseInt(n),g,j;return k._innerSendToMobileV2("ChangeImageSize",Dynamsoft.Lib.MobileFuns.makeParams(l,h,m,o)).then(function(){f.refreshImageAfterInvokeFun(k,p)})};d.ChangeImageSize=function(t,h,o,s,q,n){var l=this,m=parseInt(t),p=1*h,k=1*o,g,j;l._resetErr();if(!l._isValid()){return false}if(isNaN(m)){c.Errors.InvalidIndex(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(p<=0||k<=0){c.Errors.InvalidWidthOrHeight(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncChangeImageSize(m,h,o,s).then(q,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var i=l._ImgManager.convertClientIndexToServerId(m);if(i==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("ChangeImageSize",f.makeParams(i,p,k,s));j=(g==1);if(j){f.refreshImageAfterInvokeFun(l,m);if(c.isFunction(q)){q()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return j};d.ChangeImageSizeAsync=function(o,g,l,n){var i=this,j=parseInt(o),m=1*g,k=1*l;i._resetErr();if(!i._isValid()){return false}if(isNaN(j)){c.Errors.InvalidIndex(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}if(j<0||j>=i._ImgManager.count()){c.Errors.IndexOutOfRange(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}if(m<=0||k<=0){c.Errors.InvalidWidthOrHeight(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}if(i._isMobileMode()){return i._asyncChangeImageSize(j,g,l,n)}var h=i._ImgManager.convertClientIndexToServerId(j);if(h==-1){c.Errors.IndexOutOfRange(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}return i._innerFunV2("ChangeImageSize",f.makeParams(h,m,k,n)).then(function(p){if(p==1){f.refreshImageAfterInvokeFun(i,j)}else{throw {code:i._errorCode,message:i._errorString}}})};d._asyncFlip=function(h){var i=this;var g=parseInt(h);return i._innerSendToMobileV2("Flip",Dynamsoft.Lib.MobileFuns.makeParams(g)).then(function(){f.refreshImageAfterInvokeFun(i,h);i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})};d.Flip=function(k,j,i){var n=this;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k),l,m;if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncFlip(h).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("Flip",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);n._ImgManager._UIView.GetWebViewer().clearSelectedAreas();if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.FlipAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncFlip(h)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("Flip",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h);j._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}else{throw {code:j._errorCode,message:j._errorString}}})};d._asyncCrop=function(j,l,k,i,g){var m=this;var h=parseInt(j);return m._innerSendToMobileV2("Crop",Dynamsoft.Lib.MobileFuns.makeParams(h,l,k,i,g)).then(function(){f.refreshImageAfterInvokeFun(m,j);var o,n;o=m.ErrorCode;n=m.ErrorString;m._ImgManager.getView().GetWebViewer().clearSelectedAreas();m._errorCode=o;m._errorString=n})};d.Crop=function(u,j,p,t,h,s,q){var o=this;o._resetErr();if(!o._isValid()){return false}var n=parseInt(u),g,m;if(isNaN(n)){c.Errors.InvalidIndex(o);if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}return false}if(n<0||n>=o._ImgManager.count()){c.Errors.IndexOutOfRange(o);if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}return false}if(o._isMobileMode()){o._asyncCrop(n,j,p,t,h).then(s,function(){if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}});return true}var l=o._ImgManager.convertClientIndexToServerId(n);if(l==-1){c.Errors.IndexOutOfRange(o);if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}return false}g=o._innerFun("Crop",f.makeParams(l,j,p,t,h));m=(g==1);var k,i;k=o.ErrorCode;i=o.ErrorString;o._ImgManager.getView().GetWebViewer().clearSelectedAreas();o._errorCode=k;o._errorString=i;if(m){f.refreshImageAfterInvokeFun(o,n);if(c.isFunction(s)){s()}}else{if(c.isFunction(q)){q(k,i)}}return m};d.CropAsync=function(k,m,l,j,g){var n=this;n._resetErr();if(!n._isValid()){return false}var i=parseInt(k);if(isNaN(i)){c.Errors.InvalidIndex(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}if(i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}if(n._isMobileMode()){return n._asyncCrop(i,m,l,j,g)}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}return n._innerFunV2("Crop",f.makeParams(h,m,l,j,g)).then(function(q){var p,o;p=n.ErrorCode;o=n.ErrorString;n._ImgManager.getView().GetWebViewer().clearSelectedAreas();n._errorCode=p;n._errorString=o;if(q==1){f.refreshImageAfterInvokeFun(n,i)}else{throw {code:n._errorCode,message:n._errorString}}return true})};d.CropToClipboard=function(p,i,n,o,h){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CropToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return false}l._ImgManager.getView().GetWebViewer().clearSelectedAreas();g=l._innerFun("CropToClipboard",f.makeParams(j,i,n,o,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m)}return k};d.CutFrameToClipboard=function(p,i,n,o,h){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CutFrameToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return false}l._ImgManager.getView().GetWebViewer().clearSelectedAreas();g=l._innerFun("CutFrameToClipboard",f.makeParams(j,i,n,o,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m)}return k};d.CutToClipboard=function(i){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CutToClipboard")}var h=parseInt(i),j,k;if(isNaN(h)){c.Errors.InvalidIndex(l);return false}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return false}j=l._innerFun("CutToClipboard",f.makeParams(g));k=(j==1);if(k){l._OnBitmapChanged(["0",""+g,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])}return k};d.CutFrameToClipboardAsync=function(p,i,n,o,h){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("CutFrameToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("CutFrameToClipboard",f.makeParams(j,i,n,o,h)).then(function(q){var s=(q==1);if(s){f.refreshImageAfterInvokeFun(l,m)}else{throw {code:l._errorCode,message:l._errorString}}return s})};d.CropToClipboardAsync=function(k,m,l,j,g){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupportAsync("CropToClipboard")}var i=parseInt(k);if(isNaN(i)){c.Errors.InvalidIndex(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}if(i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}return n._innerFunV2("CropToClipboard",f.makeParams(h,m,l,j,g)).then(function(o){var p=(o==1);if(p){f.refreshImageAfterInvokeFun(n,i)}else{throw {code:n._errorCode,message:n._errorString}}return p})};d.CutToClipboardAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}if(j._isMobileMode()){return j._mobileNotSupportAsync("CutToClipboard")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("CutToClipboard",f.makeParams(g)).then(function(k){var l=(k==1);if(l){j._OnBitmapChanged(["0",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()])}else{throw {code:j._errorCode,message:j._errorString}}return l})};d._asyncSetDPI=function(u,m,p,j,r,t,s,l){var o=this,q=function(){f.refreshImageAfterInvokeFun(o,u);if(c.isFunction(s)){setTimeout(s,30)}},i=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}};var n=parseInt(u),k=parseInt(p),h=parseInt(j),g=parseInt(t);if(isNaN(k)||k<=0||isNaN(h)||h<=0||isNaN(g)||g<0){c.Errors.InvalidParameter(o);if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false}return o._innerSendToMobile("SetDPI",Dynamsoft.Lib.MobileFuns.makeParams(n,k,h,r,g),0,q,i)};d.SetDPI=function(s,m,h,n,q,p,o){var l=this,g,k;l._resetErr();if(!l._isValid()){return false}var j=parseInt(s);if(isNaN(j)){c.Errors.InvalidIndex(l);if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}return false}if(j<0||j>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}return false}var i=l._ImgManager.convertClientIndexToServerId(j);if(i==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){return l._asyncSetDPI(j,i,m,h,n,q,p,o)}g=l._innerFun("SetDPI",f.makeParams(i,m,h,n,q));k=(g==1);if(k){if(c.isFunction(p)){p()}}else{if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}}return k};d.MoveImage=function(k,j){var l=this;l._resetErr();if(!l._isValid()){return false}var i=parseInt(k),g=parseInt(j),h;if(isNaN(i)||isNaN(g)){c.Errors.InvalidIndex(l);return false}if(i<0||i>=l._ImgManager.count()||g<0||g>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}return l._ImgManager.MoveImage(i,g)};d.SwitchImage=function(k,j){var l=this;l._resetErr();if(!l._isValid()){return false}var i=parseInt(k),g=parseInt(j),h;if(isNaN(i)||isNaN(g)){c.Errors.InvalidIndex(l);return false}if(i<0||i>=l._ImgManager.count()||g<0||g>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}return l._ImgManager.SwitchImage(i,g)};d.CloseWorkingProcess=function(){var g=this;g._resetErr();if(!g._isValid()){return false}if(g._isMobileMode()){return g._mobileNotSupport("CloseWorkerProcess")}return g._innerFun("CloseWorkerProcess")};d.RemoveAllSelectedImages=function(){var m=this,g=m._isMobileMode();m._resetErr();if(!m._isValid()){return false}var h=true,j=m._ImgManager.getCurrentImageIndex(),k=m._ImgManager.getSelectedClientIndexArray(),l=[];if(c.isArray(k)){c.each(k,function(n){var o=m._ImgManager.convertClientIndexToServerId(n);if(o!=-1){l.push(o)}})}if(l.length==0&&j>=0){var i=m._ImgManager.convertClientIndexToServerId(j);l.push(i)}if(!g){h=m._innerFun("RemoveAllSelectedImages",f.makeParams(l.join(",")))}if(h){if(!g){m._HowManyImagesInBuffer=m._innerFun("HowManyImagesInBuffer")}c.each(l,function(n){var o="0";if(m._isMobileMode()){o="10"}m._OnBitmapChanged([o,""+n,3,m._ImgManager.getCurrentImageIndex(),m._ImgManager.count()])})}return h};d.RemoveAllSelectedImagesAsync=function(){var n=this,g=n._isMobileMode();n._resetErr();if(!n._isValid()){return false}var h=true,j=n._ImgManager.getCurrentImageIndex(),l=n._ImgManager.getSelectedClientIndexArray(),m=[],k;if(c.isArray(l)){c.each(l,function(o){var p=n._ImgManager.convertClientIndexToServerId(o);if(p!=-1){m.push(p)}})}if(m.length==0&&j>=0){var i=n._ImgManager.convertClientIndexToServerId(j);m.push(i)}if(g){k=c.Promise.resolve(true)}else{k=n._innerFunV2("RemoveAllSelectedImages",f.makeParams(m.join(","))).then(function(o){return o&&n._innerFunV2("HowManyImagesInBuffer").then(function(p){n._HowManyImagesInBuffer=p;return true})})}k=k.then(function(o){if(o){c.each(m,function(p){var q="0";if(n._isMobileMode()){q="10"}n._OnBitmapChanged([q,""+p,3,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count()])})}});return k};d.TagImages=function(j,i){var k=this;k._resetErr();if(!k._isValid()){return false}var h=!0,g=k._ImgManager.getView().GetWebViewer().GetHowManyImagesInBuffer();if(!c.isArray(j)){c.Errors.IndicesNotArray(k);return false}if(!c.isString(i)||i==""){c.Errors.InvalidTagName(k);return false}c.each(j,function(l){if(isNaN(l)||l<0||l>=g){c.Errors.IndexOutOfRange(k);h=!1;return h}});if(!h){return h}return k._ImgManager.AddImageTag(j,i)};d.ClearImageTags=function(g){var h=this;h._resetErr();if(!h._isValid()){return false}if(g==-1||g>=h.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(h);return false}return h._ImgManager.RemoveImageTag(g)};d.SetDefaultTag=function(g){var h=this;h._resetErr();if(!h._isValid()){return false}return h._ImgManager.SetDefaultTag(g)};d.FilterImagesByTag=function(g,i,h){var j=this;j._resetErr();if(!j._isValid()){return false}return j._ImgManager.ShowImagesByFilter(g,i,h)};d.ClearFilter=function(){var g=this;g._resetErr();if(!g._isValid()){return false}return g._ImgManager.ClearFilter()};d._asyncInvert=function(h){var i=this;var g=parseInt(h);return i._innerSendToMobileV2("Invert",Dynamsoft.Lib.MobileFuns.makeParams(g)).then(function(){f.refreshImageAfterInvokeFun(i,h)})};d.Invert=function(k,j,i){var n=this,h=parseInt(k),l,m;n._resetErr();if(!n._isValid()){return false}if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncInvert(h).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("Invert",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.InvertAsync=function(i){var l=this,h=parseInt(i),j,k;l._resetErr();if(!l._isValid()){return false}if(isNaN(h)){c.Errors.InvalidIndex(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(l._isMobileMode()){return l._asyncInvert(h)}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("Invert",f.makeParams(g)).then(function(m){var n=(m==1);if(n){f.refreshImageAfterInvokeFun(l,h)}else{throw {code:l._errorCode,message:l._errorString}}return n})};d.RenameTag=function(g,i){var h=this;h._resetErr();if(!h._isValid()){return false}if(c.isUndefined(g)){c.Errors.ParameterCannotEmpty(h);return false}if(g.length==0){c.Errors.OldTagNameRequired(h);return false}if(c.isUndefined(i)||i.length==0){c.Errors.NewTagNameRequired(h);return false}return h._ImgManager.RenameTag(g,i)};d.RemoveTag=function(g,h){var i=this;i._resetErr();if(!i._isValid()){return false}if(c.isUndefined(g)||g.length==0){c.Errors.ParameterCannotEmpty(i);return false}if(!c.isUndefined(h)&&!c.isArray(h)){c.Errors.IndicesNotArray(i);return false}return i._ImgManager.RemoveTag(g,h)};d.GetTagList=function(){var g=this;g._resetErr();if(!g._isValid()){return false}return g._ImgManager.GetTagList()};d._registLoadCallback=function(h){var g=this;g._resetErr();if(!g._isValid()){return false}return g._ImgManager.RegistLoadCallback(h)};d.GetImageBitDepthAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.bitDepth)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageBitDepth",f.makeParams(h))};d.GetImageWidthAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.width)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageWidth",f.makeParams(h))};d.GetImageHeightAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.height)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageHeight",f.makeParams(h))};d.GetImageSizeAsync=function(j,i,k){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("GetImageSize")}var h=parseInt(j);if(isNaN(h)){c.Errors.InvalidIndex(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("GetImageSize",f.makeParams(g,i,k))};d.GetImageSizeWithSpecifiedTypeAsync=function(i,j){var k=this;k._resetErr();if(!k._isValid()){return false}if(k._isMobileMode()){return k._mobileNotSupportAsync("GetImageSizeWithSpecifiedType")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(h<0||h>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}var g=k._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageSizeWithSpecifiedType",f.makeParams(g,j))};d.GetImageXResolutionAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.resolutionX)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageXResolution",f.makeParams(h))};d.GetImageYResolutionAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.resolutionY)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageYResolution",f.makeParams(h))}});Dynamsoft.Ready(function(m,h){var g=Dynamsoft,r="";if(!m.product.bHTML5Edition){return}var j=m,o=m.html5.STwain,l=o.prototype,p=!1,i=!0,d=m.html5.Funs,c=function(v,u){if(v._ImgManager.count()==0){m.Errors.NoImage(v);if(m.isFunction(u)){u(v.ErrorCode,v.ErrorString)}return false}return true},a=function(v,w,u){if(!c(v,u)){return false}if(isNaN(w)||!m.isNumber(w)||w<0||w>=v._ImgManager.count()){m.Errors.IndexOutOfRange(v);if(m.isFunction(u)){u(v.ErrorCode,v.ErrorString)}return false}return true},s=function(y,x,u,w){if(y._ImgManager.count()==0){m.Errors.NoImage(y);if(m.isFunction(w)){w(x)}return false}if(m.isNumber(x)){if(isNaN(x)||x<-2||x>=y._ImgManager.count()){m.Errors.IndexOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}else{if(m.isArray(x)){var v;for(v=0;v<x.length;v++){var z=x[v];if(isNaN(z)||!m.isNumber(z)||z<0||z>=y._ImgManager.count()){m.Errors.IndicesOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}}else{m.Errors.IndexOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}if(u==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP||u==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG||u==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG||u==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){if(x==-1&&y._ImgManager.count()>1||m.isArray(x)&&x.length>1){m.Errors.UploadIndexMoreThanOne(y);if(m.isFunction(w)){w(x)}}}else{if(u==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF||u==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(y);if(m.isFunction(w)){w(x)}return false}}return true},f=function(x){var y=[],v,u,w;if(x._ImgManager.count()<=0){return y}u=x._ImgManager.getCurrentImageIndex();if(u>=0){v=x._ImgManager.convertClientIndexToServerId(u)}w=x._ImgManager.getSelectedClientIndexArray();if(m.isArray(w)){m.each(w,function(z){var A=x._ImgManager.convertClientIndexToServerId(z);if(A!=-1){y.push(A)}})}if(v!=-1&&y.length==0){y.push(v)}return y},k=function(w){if(w._ImgManager.count()<=0){return[]}var v=w._ImgManager.getSelectedClientIndexArray();if(m.isArray(v)){if(v.length==0){var u=w._ImgManager.getCurrentImageIndex();if(u>=0){v.push(u)}}return v}return[]},e=function(x,v){var w=x._ImgManager.GetAllServerIdList();for(var u=0;u<w.length;u++){v.push(w[u])}},q=function(z,v,u,y,x){try{z(v,u,y,x)}catch(w){}v=u=y=x=null},t=function(x,w,u){try{x(w.ErrorCode,w.ErrorString,u)}catch(v){}w=u=null},b=function(A,x,v,u,z,y){try{A(x.ErrorCode,x.ErrorString,v,u,z,y)}catch(w){}x=v=u=z=y=null};l._asyncSaveImage=function(x,u,B,F,w){var A=this,C=function(H){var I=x;if(!j.isString(I)||I==""){I="img"+j.getRandom()+"."+B}else{I=j.replaceAll(I,"\\\\","_");I=j.replaceAll(I,":","_")}j.MobileFuns.saveLocal(H,I,B);d.refreshImageAfterInvokeFun(A,u);if(m.isFunction(F)){setTimeout(F,30)}},v=function(){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}};var z=window,y=Dynamsoft.navInfo,D=1,E=true,G=z.requestFileSystem||z.webkitRequestFileSystem||z.mozRequestFileSystem;if((y.biPad||y.biPhone)&&!G){if(y.bSafari&&parseFloat(y.strBrowserVersion)<13||!y.bSafari){E=false}}return A._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams(x,u,B,D,E),0,C,v)};l.SaveAllAsMultiPageTIFF=function(v,A,y){var B=this;B._resetErr();if(!B._isValid()){return false}if(!m.License.checkProductKey(B,{Core:true})&&!m.License.checkProductKey(B,{Webcam:true},true)){if(m.isFunction(y)){y(B.ErrorCode,B.ErrorString)}return false}if(!c(B,y)){return false}var x=[],z=d.replaceLocalFilename(v);if(B._isMobileMode()){if(!z||z==""){m.Errors.InvalidFile(B);if(m.isFunction(y)){t(y,B)}return false}var u=[],w=0;for(;w<B.HowManyImagesInBuffer;w++){u.push(w)}return B._asyncSaveImage(v,u,"tiff",A,y)}e(B,x);return B.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",d.makeParams(z,x.join(",")),A,y)};l.SaveAllAsPDF=function(v,A,y){var B=this;B._resetErr();if(!B._isValid()){return false}if(!m.License.checkProductKey(B,{Core:true})&&!m.License.checkProductKey(B,{Webcam:true},true)){if(m.isFunction(y)){y(B.ErrorCode,B.ErrorString)}return false}if(!c(B,y)){return false}var x=[],z=d.replaceLocalFilename(v);if(B._isMobileMode()){if(!z||z==""){m.Errors.InvalidFile(B);if(m.isFunction(y)){t(y,B)}return false}var u=[],w=0;for(;w<B.HowManyImagesInBuffer;w++){u.push(w)}return B._asyncSaveImage(v,u,"pdf",A,y)}e(B,x);return B.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",d.makeParams(z,x.join(",")),A,y)};l.SaveAsBMP=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(A._isMobileMode()){return A._mobileNotSupport("SaveAsBMP",w)}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v),u;if(!a(A,x,w)){return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsBMP",d.makeParams(y,u),z,w)};l.SaveAsJPEG=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}var y=d.replaceLocalFilename(v),u;if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}return A._asyncSaveImage(v,[x],"jpg",z,w)}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsJPEG",d.makeParams(y,u),z,w)};l.SaveAsPDF=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}var y=d.replaceLocalFilename(v),u;if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}return A._asyncSaveImage(v,[x],"pdf",z,w)}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsPDF",d.makeParams(y,u),z,w)};l.SaveAsPNG=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}var y=d.replaceLocalFilename(v),u;if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}return A._asyncSaveImage(v,[x],"png",z,w)}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsPNG",d.makeParams(y,u),z,w)};l.SaveAsTIFF=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}var y=d.replaceLocalFilename(v),u;if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}return A._asyncSaveImage(v,[x],"tiff",z,w)}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsTIFF",d.makeParams(y,u),z,w)};l.SaveAsGIF=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(A._isMobileMode()){m.Errors.HTML5NotSupport(A);if(m.isFunction(w)){t(w,A)}return p}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v),u;if(!a(A,x,w)){return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsGIF",d.makeParams(y,u),z,w)};l.SaveSelectedImagesAsMultiPagePDF=function(v,z,x){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(x)){x(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v);if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(x)){t(x,A)}return false}var u=k(A);return A._asyncSaveImage(v,u,"pdf",z,x)}var w=f(A);return A.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",d.makeParams(y,w.join(",")),z,x)};l.SaveSelectedImagesAsMultiPageTIFF=function(v,z,x){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(x)){x(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v);if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(x)){t(x,A)}return false}var u=k(A);return A._asyncSaveImage(v,u,"tiff",z,x)}var w=f(A);return A.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",d.makeParams(y,w.join(",")),z,x)};l.SaveSelectedImagesToBase64Binary=function(w,v){var x=this;x._resetErr();if(!x._isValid()){return false}if(!m.License.checkProductKey(x,{Core:true})&&!m.License.checkProductKey(x,{Webcam:true},true)){if(m.isFunction(v)){v(x.ErrorCode,x.ErrorString)}return false}if(x._isMobileMode()){return x._mobileNotSupport("SaveSelectedImagesToBase64Binary",v)}var u=f(x);if(m.isFunction(w)){return x._innerSend("SaveSelectedImagesToBase64Binary",d.makeParams(u.join(",")),true,w,v)}return x._innerFun("SaveSelectedImagesToBase64Binary",d.makeParams(u.join(",")))};l.ShowFileDialog=function(y,v,D,C,B,u,x,E){var A=this;A._resetErr();if(!A._isValid()){return false}if(A._isMobileMode()){return A._mobileNotSupport("ShowFileDialog")}var z=d.replaceLocalFilename(B),w=0;w=A.__GetLoadEventsNum();return A._innerSend("ShowFileDialog",d.makeParams(y,v,D,C,z,u,x,E,w),true)};l.FTPDownload=function(z,x,w,u){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPDownload",u)}var v=m.html5.Funs.getImageType(x);return y.__innerFTPDownload("FTPDownload",d.makeParams(z,x),v,w,u)};l.FTPDownloadEx=function(z,x,v,w,u){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPDownloadEx",u)}return y.__innerFTPDownload("FTPDownloadEx",d.makeParams(z,x,v),v,w,u)};l.FTPUpload=function(A,w,y,x,v){var z=this;z._resetErr();if(!z._isValid()){return false}if(z._isMobileMode()){return z._mobileNotSupport("FTPUpload",v)}var u=z._ImgManager.convertClientIndexToServerId(w);if(!a(z,w,v)){return false}if(u==-1){m.Errors.IndexOutOfRange(z);if(m.isFunction(v)){t(v,z)}return false}return z.__innerFTPUpload("FTPUpload",d.makeParams(A,u,y),x,v)};l.FTPUploadEx=function(B,w,z,x,y,v){var A=this;A._resetErr();if(!A._isValid()){return false}if(A._isMobileMode()){return A._mobileNotSupport("FTPUploadEx",v)}var u;if(!a(A,w,v)){return false}u=A._ImgManager.convertClientIndexToServerId(w);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(v)){t(v,A)}return false}return A.__innerFTPUpload("FTPUploadEx",d.makeParams(B,u,z,x),y,v)};l.FTPUploadAllAsMultiPageTIFF=function(z,x,w,v){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAllAsMultiPageTIFF",v)}var u=[];e(y,u);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAllAsPDF=function(z,x,w,v){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAllAsPDF",v)}var u=[];e(y,u);return y.__innerFTPUpload("FTPUploadAsMultiPagePDF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAsMultiPagePDF=function(z,x,w,v){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAsMultiPagePDF",v)}var u=f(y);return y.__innerFTPUpload("FTPUploadAsMultiPagePDF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAsMultiPageTIFF=function(z,x,w,v){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAsMultiPageTIFF",v)}var u=f(y);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",d.makeParams(z,x,u.join(",")),w,v)};l.HTTPDownload=function(w,v,y,u){var z=this;z._resetErr();if(!z._isValid()){return m.Promise.reject({code:z.ErrorCode,message:z.ErrorString})}var x=d.getImageType(v);return z.HTTPDownloadThroughGet(w,v,x,y,u)};o.prototype.HTTPDownloadEx=function(w,v,x,y,u){var z=this;z._resetErr();if(!z._isValid()){return m.Promise.reject({code:z.ErrorCode,message:z.ErrorString})}if(z._isMobileMode()){return z._mobileNotSupport("HTTPDownloadEx",u)}return z.HTTPDownloadThroughGet(w,v,x,y,u)};l.HTTPDownloadDirectly=function(H,u,A,G,y){var C=this;C._resetErr();if(!C._isValid()){return false}if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(y)){y(C.ErrorCode,C.ErrorString)}return false}if(C._isMobileMode()){return C._mobileNotSupport("HTTPDownloadDirectly",y)}var v=n.GetHttpHeadersAndClear(C),x=d.combineUrl(C,H,u),w,E,B;if(x===false){m.Errors.ParameterCannotEmpty(C);return false}if(!A||A==""){m.Errors.InvalidLocalFilename(C,"HTTPDownloadDirectly");if(m.isFunction(y)){t(y,C)}return false}w=m.html5.Funs.getImageType(A);if(d.isServerInvalid(C)){if(m.isFunction(y)){t(y,C)}return false}if(!m.License.checkPDFProductKeyWhenNeeds(C,w)){if(m.isFunction(y)){y(C._errorCode,C._errorString)}return false}m.cancelFrome=2;B=d.replaceLocalFilename(A);E="get";m.showProgress(C,"HTTPDownloadDirectly",true);var F=function(I){var J=(I.total===0)?100:Math.round(I.loaded*100/I.total),K=[I.loaded," / ",I.total].join("");C._OnPercentDone([0,J,"","http"])},z=true;C._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(G)){z=false}var D=d.loadHttpBlob(C,E,x,z,function(I){C._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var J=3;return C.__LoadImageFromBytes(I,J,B,z,G,y)},function(){m.closeProgress("HTTPDownloadDirectly");if(m.isFunction(y)){t(y,C)}return false},F,v);return D};l.HTTPUploadThroughPostDirectly=function(D,A,u,z,C,y){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostDirectly",y)}var x=d.combineUrl(B,D,u),E=function(){if(m.isFunction(y)){t(y,B,B.__HTTPPostResponseString)}};B.__HTTPPostResponseString="";if(D===""){m.Errors.HttpServerCannotEmpty(B);E();return false}var v=0,w=false;return B._innerUploadDirectly(x,A,z,true,false,v,true,w,C,E)};l._innerUploadDirectly=function(y,E,A,B,D,v,I,x,J,z){var G=this,u=n.GetHttpHeadersAndClear(G),w="HTTPUploadThroughPostDirectly",C=true,F,H;if(y===false||y===""){m.Errors.ParameterCannotEmpty(G);if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false}if(!m.isFunction(J)){C=false}if(!m.License.checkProductKey(G,{Core:true})){if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false}m.cancelFrome=1;var K=function(){m.needShowTwiceShowDialog=false;if(B){m.closeProgress(w)}if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false};m.needShowTwiceShowDialog=true;if(B){m.showProgress(G,w,false)}F=d.replaceLocalFilename(E);if(!F||F==""){m.Errors.InvalidFile(G);K();return false}if(x&&x.bCancel){x.st=2;return K()}H=G.__SaveLocalFileToBytes(F,C,D,function(L){m.needShowTwiceShowDialog=false;if(x&&x.bCancel){x.st=2;return K()}if(L&&(m.dlgRef>0||G.__IfShowCancelDialogWhenImageTransfer==false||C==false||B===false)){if(L instanceof File){L.fileName=A}else{L.name=A}d.setBtnCancelVisibleForProgress(G,true);return d.httpPostUpload(G,y,L,C,0,u,true,v,I,x,function(M){if(B){m.closeProgress(w)}if(m.isFunction(J)){q(J,M)}},K)}else{K();return false}},K);return H};l._innerUploadFilesDirectly=function(B,w,H,G,v,A,K,z,M){var F=this,C=n.GetHttpHeadersAndClear(F),E="HTTPUploadThroughPostDirectly",J=true,x=[],L;if(B===false||B===""){m.Errors.ParameterCannotEmpty(F);if(m.isFunction(M)){M(F.ErrorCode,F.ErrorString,w)}return false}if(!m.isFunction(z)){J=false}if(!m.License.checkProductKey(F,{Core:true})){if(m.isFunction(M)){M(F.ErrorCode,F.ErrorString,w)}return false}m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;if(G){m.closeProgress(E)}if(m.isFunction(M)){M(w)}return false};m.needShowTwiceShowDialog=true;if(G){m.showProgress(F,E,false)}m.each(w,function(N){var O=d.replaceLocalFilename(N);if(!O||O==""){m.Errors.InvalidFile(F);u();return false}x.push(O)});var y=[],I=x.length,D=0;m.each(x,function(N,O){L=F.__SaveLocalFileToBytes(N,J,v,function(Q){m.needShowTwiceShowDialog=false;if(Q&&(m.dlgRef>0||F.__IfShowCancelDialogWhenImageTransfer==false||J==false||G===false)){var P=d.cformat(H,O+1);if(Q instanceof File){Q.fileName=P}else{Q.name=P}y[O]=Q;D++;if(D==I){d.setBtnCancelVisibleForProgress(F,true);return d.httpPostUploadFiles(F,B,y,J,0,C,G,A,K,function(R){if(G){m.closeProgress(E)}if(m.isFunction(z)){q(z,R)}},function(){if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}})}}else{if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}return false}},function(){if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}})});return L};l.HTTPUploadThroughPost=function(E,F,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPost",u)}var D=d.getImageType(y),v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}if(!s(B,F,D,x)){return false}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostEx=function(E,F,w,y,D,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostEx",u)}var v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}if(!s(B,F,D,x)){return false}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.innerHTTPUploadPost=function(x,Q,J,O,A,y,H,B){var E=this,D="HTTPUploadThroughPostEx",z=d.combineUrl(E,x,J),I=true,P=false,F=0,v=[],L=function(R){if(m.isFunction(H)){H(R)}return false},M,G,N=false;E.__HTTPPostResponseString="";if(m.isNumber(Q)){if(Q<-2){m.Errors.IndexOutOfRange(E);return L(Q)}}else{if(m.isArray(Q)){}else{m.Errors.IndexOutOfRange(E);return L(Q)}}if(!m.isString(O)||O==""){m.Errors.UploadFileCannotEmpty(E);return L()}if(m.isUndefined(A)){m.Errors.InvalidImageType(E);return L(Q)}if(A==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP||A==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG||A==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG||A==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){if(Q==-1&&E._ImgManager.count()>1||m.isArray(Q)&&Q.length>1){m.Errors.UploadIndexMoreThanOne(E);return L(Q)}if(m.isArray(Q)){v.push(Q[0])}else{if(Q==-1){v.push(0)}else{v.push(Q)}}}else{if(A==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF||A==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){if(Q==-1){if(E._ImgManager.count()==0){m.Errors.NoImage(E);return L()}for(G=0;G<E._ImgManager.count();G++){v.push(G)}}else{if(Q==-2){v=E._ImgManager.getSelectedClientIndexArray()}else{if(m.isArray(Q)){for(G=0;G<Q.length;G++){v.push(Q[G])}}else{v.push(Q)}}}}else{m.Errors.InvalidImageType(E);return L(Q)}}if(E._isMobileMode()){I=true}else{if(!m.isFunction(y)){I=false}}if(x===""){m.Errors.HttpServerCannotEmpty(E);return L(v)}if(m.isUndefined(z)||z===""){m.Errors.ParameterCannotEmpty(E);return L(v)}else{if(!m.isString(z)){m.Errors.InvalidUrl(E);return L(v)}}if((z.indexOf("http://")!=0)&&(z.indexOf("https://")!=0)){if(m.detect.ssl){z="https://"+z}else{z="http://"+z}}if(!E._isMobileMode()){if(d.isServerInvalid(E)){return L(v)}}if(!E._checkIndices(v)&&v!=-1){return L(v)}var w=[];if(m.isArray(v)){m.each(v,function(S){var R=E._ImgManager.convertClientIndexToServerId(S);if(R!=-1){w.push(R)}})}E._resetErr();if(!E._isValid()){return false}if(I){M={bOnlyUploadForm:p,method:"HTTPUploadThroughPostEx",_this:E,url:z,serverIds:w,enumImageType:A,saveSetup:N,fileName:O,retry:0,bOnlyEmptyIsOK:true,objUploadFileStatus:false,dataFormat:Dynamsoft.DWT.EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:y,asyncFailureFunc:L};m._asyncUploadCmd(M);return true}else{m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(D);L(v);return false};m.needShowTwiceShowDialog=true;m.showProgress(E,D,false);var C=n.GetHttpHeadersAndClear(E);var K=4;E._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);E.__innerConvertToBlob(A,w,N,I,K,function(T,Y,U){m.needShowTwiceShowDialog=false;if(T&&(m.dlgRef>0||E.__IfShowCancelDialogWhenImageTransfer==false||I==false)){var S=E.MaxUploadImageSize,R=T.size,V=Dynamsoft.DWT;if(R>S&&S!=-1){m.Errors.UploadExceededMaxSize(E);return u()}if(V.IfAddMD5InUploadHeader){if(Y&&Y!=""){C["dwt-md5"]=Y}}if(T instanceof File){T.fileName=O}else{T.name=O}d.setBtnCancelVisibleForProgress(E,true);var X=0,W=false;return d.httpPostUpload(E,z,T,I,0,C,true,X,true,W,function(Z){m.closeProgress(D);P=true;return true},u)}else{return u()}},u);return P}};l._checkIndices=function(x){var y=this,u,v;if(!m.isArray(x)){m.Errors.IndicesNotArray(y);return false}if(x.length==0){m.Errors.IndicesCannotEmpty(y);return false}u=y._ImgManager.count();for(v=0;v<x.length;v++){var w=x[v];if(m.isUndefined(w)||w===null){m.Errors.IndexNullOrUndefined(y);return false}w=parseInt(w);if(isNaN(w)){m.Errors.InvalidIndex(y);return false}if(w<0||w>=u){m.Errors.IndicesOutOfRange(y);return false}}return true};l.SetUploadSegment=function(u,v){var w=this;w._resetErr();if(!w._isValid()){return false}if(w._isMobileMode()){return w._mobileNotSupport("SetUploadSegment")}if(!m.isNumber(u)||u<0){m.Errors.InvalidSegmentUploadThreshold(w);return false}if(!m.isNumber(v)||(v<=0)){m.Errors.InvalidModuleSize(w);return false}w._segementUploadThreshold=u*1024*1024;w._moduleSize=v*1024;return true};l.HTTPUpload=function(w,H,F,G,z,A,u){var E=this;E._resetErr();if(!E._isValid()){return false}if(m.isUndefined(w)){m.Errors.InvalidParameter(E);if(m.isFunction(u)){u(E.ErrorCode,E.ErrorString)}return false}var y,I,D,v=arguments;if(arguments.length<=3){if(m.isFunction(H)){I=function(){H(E.__HTTPPostResponseString,w,v)}}else{I=false}D=function(){if(m.isFunction(F)){b(F,E,E.__HTTPPostResponseString,w,v)}};y={bOnlyUploadForm:i,_this:E,url:w,asyncSuccessFunc:I,asyncFailureFunc:D}}else{var C,x=[],B=false;if(m.isFunction(z)){C="RemoteFile";I=function(K,J){z(E.__HTTPPostResponseString,J,v)};D=function(J){if(m.isFunction(A)){b(A,E,E.__HTTPPostResponseString,J,v)}}}else{if(m.isString(z)){C=z}else{C="RemoteFile"}if(m.isFunction(A)){I=function(K,J){q(A,E.__HTTPPostResponseString,J,v)}}else{I=false}D=function(J){if(m.isFunction(u)){b(u,E,E.__HTTPPostResponseString,J,v)}}}if(!E._checkIndices(H)){D(H);return false}if(m.isArray(H)){m.each(H,function(K){var J=E._ImgManager.convertClientIndexToServerId(K);if(J!=-1){x.push(J)}})}if(x.length==0){m.Errors.InvalidIndex(E);D(H);return false}if(m.isUndefined(F)){m.Errors.InvalidImageType(E);D(H);return false}if(F==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP||F==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG||F==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){if(x.length>1){m.Errors.UploadIndexMoreThanOne(E);D(H);return false}}else{if(F==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF||F==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(E);D(H);return false}}if(m.isUndefined(G)||(G!=Dynamsoft.DWT.EnumDWT_UploadDataFormat.Binary&&G!=Dynamsoft.DWT.EnumDWT_UploadDataFormat.Base64)){m.Errors.InvalidDataFormat(E);D(H);return false}y={bOnlyUploadForm:p,method:"HTTPUpload",_this:E,url:w,serverIds:x,enumImageType:F,saveSetup:B,dataFormat:G,fileName:C,retry:0,bOnlyEmptyIsOK:true,objUploadFileStatus:false,asyncSuccessFunc:I,asyncFailureFunc:D}}m._asyncUploadCmd(y);return true};l._innerHTTPUpload=function(z,x,D,V,X,W,B,R,v,A,M){var K=this,E=parseInt(D),O=parseInt(V),w=X,H="HTTPUpload",C=z,N=true,Y=false,J=K._moduleSize,S=K._segementUploadThreshold,L,Q,F,G;K.__HTTPPostResponseString="";if(m.isUndefined(D)){m.Errors.InvalidImageType(K);if(m.isFunction(M)){M()}return false}m.cancelFrome=1;var U,u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(M)){M()}return false};G=function(Z){var aa=(Z.total===0)?100:Math.round(Z.loaded*100/Z.total),ab=[Z.loaded," / ",Z.total].join("");K._OnPercentDone([0,aa,"","http",w])};w=d.addImageFileExt(w,E);m.needShowTwiceShowDialog=true;m.showProgress(K,H,false);if(!K._isMobileMode()){if(d.isServerInvalid(K)){return u()}}if(O==Dynamsoft.DWT.EnumDWT_UploadDataFormat.Binary){var I=0;var P=4;if(v&&v.bCancel){v.st=2;return u()}K._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);Y=K.__innerConvertToBlob(E,x,W,true,P,function(ab,af,ac){U=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(A)){q(A,ab)}return true};if(v&&v.bCancel){v.st=2;return u()}if(!ab||ab.size<=0){m.Errors.UploadFileCannotEmpty(K);return u()}var aa=K.MaxUploadImageSize,Z=ab.size;if(Z>aa&&aa!=-1){m.Errors.UploadExceededMaxSize(K);return u()}if(K._errorCode!=0){return u()}if(S>0&&ab.size>S){var ag=0,ae=n.GetHttpHeadersAndClear(K),ad=Dynamsoft.DWT;if(ad.IfAddMD5InUploadHeader){if(af&&af!=""){ae["dwt-md5"]=af}}K._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",w]);Y=n.UploadBinary(K,C,E,ab,w,ae,ag,J,G,B,R,v,U,u)}else{Y=K.__innnerHTTPUploadBinaryFull(C,af,ab,E,w,B,R,v,U,u)}},u)}else{if(O==Dynamsoft.DWT.EnumDWT_UploadDataFormat.Base64){var T=4,y;Y=K._convertToBase64ByServerIds(x,E,W,T,function(ac){if(!ac||ac.getLength()<=0){m.Errors.UploadFileCannotEmpty(K);return u()}U=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(A)){q(A,ac)}return true};if(S>0&&ac.getLength()>S){var ad=0,ab=n.GetHttpHeadersAndClear(K),aa=Dynamsoft.DWT;y=ac.getMD5();if(aa.IfAddMD5InUploadHeader){ab["dwt-md5"]=y}K._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);n.UploadBase64(K,C,E,ac,w,ab,ad,J,G,U,u)}else{var Z;y=ac.getMD5();Z=ac.getData(0,ac.getLength());if(!Z||Z==""){m.Errors.UploadFileCannotEmpty(K);return u()}K.__innnerHTTPUploadBase64Full(C,y,Z,E,w,B,R,U,u)}},u)}}return Y};l._innerFormFieldHTTPUpload=function(v,B,u){var D=this,x,z="HTTPUpload",A=v,C=true,E=false;D.__HTTPPostResponseString="";x=function(){m.needShowTwiceShowDialog=false;m.closeProgress(z);if(m.isFunction(u)){t(u,D,D.__HTTPPostResponseString)}return false};if(m.isUndefined(A)||A===""){m.Errors.ParameterCannotEmpty(D);return x()}else{if(!m.isString(A)){m.Errors.InvalidUrl(D);return x()}}if((A.indexOf("http://")!=0)&&(A.indexOf("https://")!=0)){if(m.detect.ssl){A="https://"+A}else{A="http://"+A}}D.__HTTPPostResponseString="";m.cancelFrome=1;m.showProgress(D,z,false);m.needShowTwiceShowDialog=true;var w=n.GetHttpHeadersAndClear(D);D._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);var y=false;E=d.httpUploadByBIO(D,A,p,0,true,w,true,0,true,y,function(F){m.needShowTwiceShowDialog=false;m.closeProgress(z);if(m.isFunction(B)){q(B,F)}},x);return E};var n={UploadBinary:function(L,D,E,z,w,F,y,K,H,C,M,v,x,u){var B,A,I="HttpUpload",J=z.size;B=J-y;if(B>0){if(B>=K){B-=K;A=K}else{A=B;B=0}var G=z.slice(y,y+A);if(!G){m.Errors.UploadFileCannotEmpty(L);return u()}if(m.dlgRef>0||L.__IfShowCancelDialogWhenImageTransfer==false){G.name=w;d.setBtnCancelVisibleForProgress(L,true);F["Content-Range"]=["bytes ",y,"-",y+G.size-1,"/",J].join("");H({total:J,loaded:y});d.httpPostUpload(L,D,G,true,0,F,false,C,M,v,function(N){if(B==0){m.needShowTwiceShowDialog=false;H({total:J,loaded:J});if(m.isFunction(x)){q(x,N)}}else{y+=A;setTimeout(function(){m.cancelFrome=1;n.UploadBinary(L,D,E,z,w,F,y,K,H,C,M,v,x,u)},100)}},u);return true}else{m.Errors.UploadError(L,true);return u()}}else{m.needShowTwiceShowDialog=false;m.closeProgress(I);if(m.isFunction(x)){x("")}}return true},UploadBase64:function(C,y,E,K,z,u,A,D,F,B,I){var w=K.getLength(),x="HttpUpload",H,v,J=0;H=w-A;if(H>0){if(H>=D){H-=D;v=D}else{v=H;H=0}var G=K.getData(A,D);if(!G||G==""){m.Errors.UploadFileCannotEmpty(C);return I()}if(m.dlgRef>0||C.__IfShowCancelDialogWhenImageTransfer==false){d.setBtnCancelVisibleForProgress(C,true);u["Content-Range"]=["bytes ",A,"-",A+v-1,"/",w].join("");F({total:w,loaded:A});d.httpPostUploadString(C,y,G,z,0,u,false,0,true,function(L){if(H==0){m.needShowTwiceShowDialog=false;F({total:w,loaded:w});if(m.isFunction(B)){q(B,L)}}else{A+=v;setTimeout(function(){m.cancelFrome=1;n.UploadBase64(C,y,E,K,z,u,A,D,F,B,I)},100)}},I);return true}else{m.Errors.UploadError(C,true);return I()}}else{m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(B)){B("")}}return true},GetHttpHeadersAndClear:function(v){var u=v.__httpHeaderMap;v.__httpHeaderMap={};if(!u){u=v.__httpHeaderMap}return u}};l.__innnerHTTPUploadBinaryFull=function(z,x,C,F,P,D,O,v,A,u){var K=this,H=n.GetHttpHeadersAndClear(K),I="HTTPUpload",w=P,E=z,M=true,Q=false,J=0,L,N,G;var B=0,y=Dynamsoft.DWT;if(y.IfAddMD5InUploadHeader){if(x&&x!=""){H["dwt-md5"]=x}}if(m.dlgRef>0||K.__IfShowCancelDialogWhenImageTransfer==false){if(C instanceof File){C.fileName=w}else{C.name=w}d.setBtnCancelVisibleForProgress(K,true);return d.httpPostUpload(K,E,C,M,J,H,true,D,O,v,function(R){if(m.isFunction(A)){q(A,R)}},u)}else{m.Errors.UploadError(K,true);return u()}return Q};l.__innnerHTTPUploadBase64Full=function(y,w,A,D,N,B,M,z,u){var I=this,F=n.GetHttpHeadersAndClear(I),G="HTTPUpload",v=N,C=y,K=true,O=false,H=0,J,L,E,x=Dynamsoft.DWT;if(m.dlgRef>0||I.__IfShowCancelDialogWhenImageTransfer==false){if(x.IfAddMD5InUploadHeader){if(F&&w&&w!=""){F["dwt-md5"]=w}}d.setBtnCancelVisibleForProgress(I,true);return d.httpPostUploadString(I,C,A,v,0,F,true,B,M,function(P){if(m.isFunction(z)){q(z,P)}},u)}else{m.Errors.UploadError(I,true);return u()}return O};l.ConvertToBase64=function(H,G,A,u){var C=this;C._resetErr();if(!C._isValid()){return false}var w=[],v=arguments,y=parseInt(G),x="ConvertToBase64",D,B=false;if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(u)){u(C.ErrorCode,C.ErrorString)}return false}if(!C._isMobileMode()){if(d.isServerInvalid(C)){if(m.isFunction(u)){b(u,C,H,G,v)}return false}}if(!C._checkIndices(H)){if(m.isFunction(u)){b(u,C,H,G,v)}return false}if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP||y==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG||y==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){if(H.length>1){m.Errors.ConvertBase64IndexMoreThanOne(C);if(m.isFunction(u)){b(u,C,H,G,v)}return false}}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF||y==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(C);if(m.isFunction(u)){b(u,C,H,G,v)}return false}}if(m.isArray(H)){m.each(H,function(J){var I=C._ImgManager.convertClientIndexToServerId(J);if(I!=-1){w.push(I)}})}var E=function(J){var I=[];if(m.isArray(w)){m.each(w,function(K){var L=C._ImgManager.convertServerIdToClientIndex(K);if(L>-1){I.push(L)}})}if(m.isFunction(A)){q(A,J,I,G,v)}return false};var z=function(){var I=[];if(m.isArray(w)){m.each(w,function(J){var K=C._ImgManager.convertServerIdToClientIndex(J);if(K>-1){I.push(K)}})}if(m.isFunction(u)){b(u,C,I,G,v)}return false};var F=3;return C._convertToBase64ByServerIds(w,y,B,F,E,z)};l._convertToBase64ByServerIds=function(w,F,B,E,y,u){var C=this,x="ConvertToBase64",D,A=B;m.showProgress(C,x,false);var G=function(){m.closeProgress(x);if(m.isFunction(u)){u()}return false},z=function(K){var I=0,M="",L="",N=K&&K.result,J=[],H;if(m.isArray(w)){m.each(w,function(O){var P=C._ImgManager.convertServerIdToClientIndex(O);if(P>-1){J.push(P)}})}if(C.ErrorCode!=0){G();return}if(N&&m.isArray(N)&&N.length==3){L=N[0];I=N[1];M=N[2];H=new m.html5.Base64Result(C,I,M,L);m.closeProgress(x);if(m.isFunction(y)){q(y,H)}}else{m.Errors.ConvertBase64Failed(C);G()}};if(C._isMobileMode()){if(F==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP){m.closeProgress(x);return C._mobileNotSupport("Convert to bmp",u)}return C.__innerConvertToBase64ByMobile(w,F,E,z,G)}if(!m.isString(A)||A==""){A="{}"}var v=["[",F,',"',w.join(","),'",',A,",1]"].join("");return C._innerFunRaw(x,v,true,false,true,z,G)};l.ClearAllHTTPFormField=function(){var u=this;u._resetErr();if(!u._isValid()){return false}u.httpFormFields={};return true};l.SetHTTPFormField=function(y,u,w){var x=this;x._resetErr();if(!x._isValid()){return false}var v=y;if(!m.isString(v)){v=""+v}if(u instanceof Blob){u.name=w}x.httpFormFields[v]=u;return true};l.HTTPUploadAllThroughPostAsMultiPageTIFF=function(E,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF",u)}var F=-1,D=2,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostAsMultiPageTIFF=function(F,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF",u)}var D=-2,E=2,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(F,D,w,y,E,C,x,A)};l.HTTPUploadAllThroughPostAsPDF=function(E,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadAllThroughPostAsPDF",u)}var F=-1,D=4,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostAsMultiPagePDF=function(F,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF",u)}var D=-2,E=4,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(F,D,w,y,E,C,x,A)};l.HTTPDownloadThroughPost=function(H,v,y,G,z,B){var C=this,w=n.GetHttpHeadersAndClear(C),u=arguments,x=d.combineUrl(C,H,v),E,D;if(x===p){m.Errors.ParameterCannotEmpty(C);return p}if(d.isServerInvalid(C)){if(m.isFunction(z)){t(z,C,u)}return p}if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(z)){t(z,C,u)}return p}if(!m.License.checkPDFProductKeyWhenNeeds(C,y)){if(m.isFunction(z)){t(z,C,u)}return p}m.cancelFrome=2;m.showProgress(C,"HttpDownloadThroughPost",i);E="post";var F=function(I){var J=(I.total===0)?100:Math.round(I.loaded*100/I.total),K=[I.loaded," / ",I.total].join("");C._OnPercentDone([0,J,"","http"])},A=i;C._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(G)){A=p}D=d.loadHttpBlob(C,E,x,A,function(I){C._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var K="",J=y;if(J!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&J!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&J!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&J!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&J!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&J!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){J=-1}C.__LoadImageFromBytes(I,J,K,A,G,z)},function(){m.closeProgress("HttpDownloadThroughPost");if(m.isFunction(z)){t(z,C,u)}},F,w);return D};l.HTTPDownloadThroughGet=function(F,u,w,E,y){var A=this,v=n.GetHttpHeadersAndClear(A),x=d.combineUrl(A,F,u),C,B;if(x===p){m.Errors.ParameterCannotEmpty(A);if(m.isFunction(y)){t(y,A)}return p}if(!A._isMobileMode()){if(d.isServerInvalid(A)){if(m.isFunction(y)){t(y,A)}return p}if(!m.License.checkProductKey(A,{Core:true})){if(m.isFunction(y)){t(y,A)}return p}if(!m.License.checkPDFProductKeyWhenNeeds(A,w)){if(m.isFunction(y)){t(y,A)}return p}}else{if(!m.License.checkProductKey(A,{Core:true})){if(m.isFunction(y)){t(y,A)}return p}}m.cancelFrome=2;C="get";m.showProgress(A,"HTTPDownloadThroughGet",i);var D=function(G){var H=(G.total===0)?100:Math.round(G.loaded*100/G.total),I=[G.loaded," / ",G.total].join("");A._OnPercentDone([0,H,"","http"])},z=i;A._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(E)){z=p}if(A._isMobileMode()){B=d.loadHttpBlob(A,C,x,z,function(G){A._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);A.LoadImageFromBinary(G,function(){Dynamsoft.Lib.closeProgress("");if(m.isFunction(E)){E()}},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}})},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}},D,v)}else{B=d.loadHttpBlob(A,C,x,z,function(G){A._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var I="",H=w;if(H!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&H!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&H!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&H!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&H!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&H!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){H=-1}A.__LoadImageFromBytes(G,H,I,z,function(){Dynamsoft.Lib.closeProgress("");if(m.isFunction(E)){E()}},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}})},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}},D,v)}return B};l.HTTPUploadThroughPut=function(x,w,u,z,v){var y=d.getImageType(u);return this.HTTPUploadThroughPutEx(x,w,u,y,z,v)};l.HTTPUploadThroughPutEx=function(y,N,v,C,A,M){var G=this,D=n.GetHttpHeadersAndClear(G),F="HTTPUploadThroughPutEx",B=d.combineUrl(G,y,v),I=true,w=[],L=false;if(B===false){m.Errors.ParameterCannotEmpty(G);if(m.isFunction(M)){b(M,G,"",[N],v,C)}return false}if(!m.isFunction(A)){I=false}m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(F);if(m.isFunction(M)){b(M,G,G.__HTTPPostResponseString,w,v,C)}return false},E;m.needShowTwiceShowDialog=true;m.showProgress(G,F,false);switch(N){case -1:for(var H=0;H<G._ImgManager.count();H++){w.push(H)}break;case -2:w=G._ImgManager.getSelectedClientIndexArray();break;default:w.push(N);if(N>=0){}else{m.Errors.IndexOutOfRange(G);return u()}break}if(y===""){m.Errors.HttpServerCannotEmpty(G);return u()}var x=[];if(m.isArray(w)){m.each(w,function(P){var O=G._ImgManager.convertClientIndexToServerId(P);if(O!=-1){x.push(O)}})}var z=Dynamsoft.DWT;var K=false;var J=4;G._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);L=G.__innerConvertToBlob(C,x,K,I,J,function(Q,S,R){if(z.IfAddMD5InUploadHeader){if(S&&S!=""){D["dwt-md5"]=S}}m.needShowTwiceShowDialog=false;if(Q&&(m.dlgRef>0||G.__IfShowCancelDialogWhenImageTransfer==false||I==false)){var P=G.MaxUploadImageSize,O=Q.size;if(O>P&&P!=-1){m.Errors.UploadExceededMaxSize(G);return u()}E=function(T){var U=(T.total===0)?100:Math.round(T.loaded*100/T.total),V=[T.loaded," / ",T.total].join("");G._OnPercentDone([0,U,"","http"])};G._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);d.setBtnCancelVisibleForProgress(G,true);return d.httpPutImage(G,B,Q,I,function(T){G.__HTTPPostResponseString=T;m.closeProgress(F);if(m.isFunction(A)){var U=[];if(m.isArray(x)){m.each(x,function(V){var W=G._ImgManager.convertServerIdToClientIndex(V);if(W>-1){U.push(W)}})}q(A,G.__HTTPPostResponseString,U,v,C)}return true},u,E)}else{m.closeProgress(F);return false}},u);return L};l.HTTPUploadAllThroughPutAsMultiPageTIFF=function(x,u,z,w){var A=this,v=-1,y=2;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadThroughPutAsMultiPageTIFF=function(x,u,z,w){var A=this,v=-2,y=2;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadAllThroughPutAsPDF=function(x,u,z,w){var A=this,v=-1,y=4;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadThroughPutAsMultiPagePDF=function(x,u,z,w){var A=this,v=-2,y=4;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.GetSelectedImagesSize=function(v){var w=this;w._resetErr();if(!w._isValid()){return false}if(w._isMobileMode()){return w._mobileNotSupport("GetSelectedImagesSize")}var u=f(w);return w._innerFun("GetSelectedImagesSize",d.makeParams(v,u.join(",")))};l.SetHTTPHeader=function(x,z){var A=this;A._resetErr();if(!A._isValid()){return false}var u,w,v,y=x;if(!A.__httpHeaderMap){A.__httpHeaderMap={}}if(!y||!m.isString(y)){if(m.isUndefined(y)){m.Errors.HttpHeaderIsUndefined(A)}else{if(y===""){m.Errors.HttpHeaderIsEmpty(A)}else{if(y===null){m.Errors.HttpHeaderIsNull(A)}else{m.Errors.HttpHeaderIsInvalid(A)}}}return false}w=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];y=y.toLowerCase();for(v=0;v<w.length;v++){if(w[v]==y){m.Errors.HttpHeaderNotAllowed(A);return false}}if(m.isUndefined(z)||z===null||z===""){if(x in A.__httpHeaderMap){delete A.__httpHeaderMap[x]}return true}if(m.isNumber(z)){z=""+z}A.__httpHeaderMap[x]=z;return true};m.html5.Base64Result=function(u,x,w,v){var y=this;y._stwain=u;y._md5=w;y._length=x;y._content=v};m.html5.Base64Result.prototype.getLength=function(){return this._length};m.html5.Base64Result.prototype.getMD5=function(){return this._md5};m.html5.Base64Result.prototype.getData=function(x,v){var y=this,u=v,w=-1;if(!m.isNumber(x)||!m.isNumber(v)){return""}if(x<0||v<=0){return""}if(x==0&&u==y._length){return y._content}if(x+u>y._length){u=y._length-x}return y._content.substr(x,u)};l._ConvertToBlob=function(w,E,z,y,u){var B=this,x="ConvertToBlob",A=true,C=false,v=arguments;if(!m.isFunction(y)){A=false}m.cancelFrome=0;m.showProgress(B,x,false);var F=function(){m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(u)){var G=[];if(m.isArray(w)){m.each(w,function(H){var I=B._ImgManager.convertServerIdToClientIndex(H);if(I>-1){G.push(I)}})}b(u,B,G,E,v)}return false};var D=2;B._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding]);C=B.__innerConvertToBlob(E,w,z,A,D,function(K,M,L){if(!K||K.size<=0){m.Errors.ConvertBlobIsEmpty(B);return F()}var H=B.MaxUploadImageSize,G=K.size;if(G>H&&H!=-1){m.Errors.UploadExceededMaxSize(B);return F()}m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(y)){var J=[];if(m.isArray(w)){m.each(w,function(N){var O=B._ImgManager.convertServerIdToClientIndex(N);if(O>-1){J.push(O)}})}try{y(K,J,v)}catch(I){}K=null}if(A){return true}else{return K}},F);return C};l.ConvertToBlob=function(F,y,z,u,B){var C=this;C._resetErr();if(!C._isValid()){return false}var E=parseInt(y),v=arguments,D=function(G,H){if(m.isFunction(z)){q(z,G,H,y,v)}G=H=null;return true},x=function(G){if(m.isFunction(u)){b(u,C,G,y,v)}G=null;return false},A=false;if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(u)){u(C.ErrorCode,C.ErrorString)}return false}if(!C._isMobileMode()){if(d.isServerInvalid(C)){return x(F)}}if(!C._checkIndices(F)){return x(F)}if(E==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP||E==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG||E==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG||E==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){if(F.length>1){m.Errors.ConvertBinaryIndexMoreThanOne(C);return x(F)}}else{if(E==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF||E==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(C);return x(F)}}var w=[];if(m.isArray(F)){m.each(F,function(H){var G=C._ImgManager.convertClientIndexToServerId(H);if(G!=-1){w.push(G)}})}if(!m.isFunction(z)){return C._ConvertToBlob(w,E,A)}C._ConvertToBlob(w,E,A,D,x);return true};m._asyncUploadCmd=function(y){var E=y._this,B=y.bOnlyUploadForm,w=y.url,C=y.asyncSuccessFunc,v=y.asyncFailureFunc;if(B){E._innerFormFieldHTTPUpload(w,function(){if(m.isFunction(C)){try{C()}catch(J){}}},function(){if(m.isFunction(v)){try{v()}catch(J){}}})}else{var x=y.serverIds,F=y.enumImageType,H=y.dataFormat,A=y.fileName,D=y.saveSetup,u=y.retry,G=y.bOnlyEmptyIsOK,z=y.objUploadFileStatus,I=function(){if(m.isFunction(v)){var J=[];if(m.isArray(x)){m.each(x,function(L){var M=E._ImgManager.convertServerIdToClientIndex(L);if(M>-1){J.push(M)}})}try{v(J)}catch(K){}}return false};if(m.isNumber(u)&&u>0){}else{u=0}if(E._errorCode!=0){return I()}return E._innerHTTPUpload(w,x,F,H,A,D,u,G,z,function(K){if(m.isFunction(C)){var J=[];if(m.isArray(x)){m.each(x,function(M){var N=E._ImgManager.convertServerIdToClientIndex(M);if(N>-1){J.push(N)}})}try{q(C,K,J)}catch(L){}}return true},I)}};l._asyncUploadFilesCmd=function(x,w,D,M,T,I,B,S,z,N){var H=this,E=parseInt(D),F="HTTPUpload",C=x,O=true,U=false,J,Q,A=[];H.__HTTPPostResponseString="";m.cancelFrome=1;var u=function(){H._bServerPercentDone=true;m.needShowTwiceShowDialog=false;if(I){m.closeProgress(F)}A=null;if(m.isFunction(N)){var V=[];if(m.isArray(w)){m.each(w,function(X){var Y=H._ImgManager.convertServerIdToClientIndex(X);if(Y>-1){V.push(Y)}})}try{N(V)}catch(W){}}return false};m.needShowTwiceShowDialog=true;if(I){m.showProgress(H,F,false)}if(d.isServerInvalid(H)){return u()}var G=0,y=function(W){H._bServerPercentDone=true;m.needShowTwiceShowDialog=false;if(I){m.closeProgress(F)}A=null;if(m.isFunction(z)){var V=[];if(m.isArray(w)){m.each(w,function(X){var Y=H._ImgManager.convertServerIdToClientIndex(X);if(Y>-1){V.push(Y)}})}q(z,W,V)}};var L=w.length,K=0,v=0,P=4,R="";H._bServerPercentDone=false;H._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);m.each(w,function(W,V){U=H.__innerConvertToBlob(E,[W],T,true,P,function(aa,ah,ab){if(!aa||aa.size<=0){m.Errors.UploadFileCannotEmpty(H);return u()}var ac=H.MaxUploadImageSize,af=aa.size;if(af>ac&&ac!=-1){m.Errors.UploadExceededMaxSize(H);return u()}var ae=d.cformat(M,V+1);v=((K+1)/L)*100;R=[(K+1),"/",L].join("");H._OnPercentDone([0,v,R,"http",ae]);var Z=ab[0],X=ab[1];aa.name=ae;A.push(aa);K++;if(K>=L){var Y=n.GetHttpHeadersAndClear(H),ad=true,ag=0;if(Dynamsoft.DWT.IfAddMD5InUploadHeader){if(ah&&ah!=""){Y["dwt-md5"]=ah}}U=d.httpPostUploadFiles(H,C,A,ad,ag,Y,I,B,S,function(ai){y(ai)},u)}},u,[W,V])});return U}});Dynamsoft.Ready(function(e,f){var a=Dynamsoft;var c=a.navInfo,d=e.html5,j=d.STwain,i=d.Funs,b,h=Dynamsoft.DWT,g={upload:"Uploading...",download:"Downloading...",load:"Decoding...",decode:"Decoding...",decodeTIFF:"Decoding tiff...",decodePDF:"Decoding pdf...",encodeTIFF:"Encoding tiff...",encodePDF:"Encoding pdf...",encode:"Encoding..."};if(!e.product.bHTML5Edition){return}b=j.prototype;b.RegisterEvent=function(k,n){var m=this;m._resetErr();if(!m._isValid()){return false}var l=["__",k].join("");m[l]=n;return true};b.onEvent=function(k,l){this.RegisterEvent(k,l)};b.on=function(k,l){this.RegisterEvent(k,l)};b.OnRefreshUI=function(o,n,p,l){var q=this,k="On RefreshUI";if(p){q._ImgManager.refresh(o,q._ImgManager.count(),true,l)}if(Dynamsoft.Lib.isFunction(q.__OnRefreshUI)){q.__OnRefreshUI(q._ImgManager.getCurrentImageIndex(),q._ImgManager.count())}return true};b._OnRemoteScanStatusAsync=function(v){var t=this,r="OnRemoteScanStatusAsync",y;if(v&&v.length>=2){try{var l=new String(v[1]);y=e.parse(l)}catch(u){e.log(u.message);e.log("parse json failed: "+v[1])}if(!y){y={sequence:0,screen:[]}}}if(y&&y.sequence){if(y.sequence>0&&y.screen&&y.screen.length>0){var n,x,w,q,k,s;n=y.screen;w=y.sequence;k=y.wnds;x=n[0];s=x.img;if(e.isString(s)&&s!=""){q=x.wnd}if(w&&q){var p=e.one(".ds-img-screen");if(p&&t._acquireDivEL){if(t._acquireDivEL.evtFun){e.removeEventListener(p[0],"mouseup",t._acquireDivEL.evtFun);t._acquireDivEL.evtFun=null}p[0].src=s;t._acquireDivEL.evtFun=function(m){if(!k){k="0"}var o=e.stringify({sequence:w,wnds:k,wnd:q+"",type:2,x:m.offsetX,y:m.offsetY});t._innerSendCmd("SendEventToScannerUI",["[",o,"]"].join(""))};e.addEventListener(p[0],"mouseup",t._acquireDivEL.evtFun)}}}else{t.__closeRemoteScanUI(false)}}if(e.isFunction(t.__OnRemoteScanStatusAsync)){t.__OnRemoteScanStatusAsync(y)}return true};b._OnConsumed=function(k){};b._OnBitmapChanged=function(E){var D=this,x=(E[0]=="10"),J=(E[0]=="0"),I=(E[0]=="c2"),t=J||I||x,l=E[1].split(","),z=E[2],n=E[3],K=D.__maxImagesInBuffer,C="OnBitmapChanged:",o=1,y=2,v=3,p=4,w=5,k=-1,G=[];if(x){if(E.length>5){var B=E[5];G.push(B);if(D._blts&&(z==o||z==y)){if(!Dynamsoft.Lib.isUndef(B.verify)){k=Dynamsoft.DWT.lgct(B.verify);if(e.isFunction(D.__OnLtsverify)){D.__OnLtsverify(k,1,Dynamsoft.DWT.EnumInstance.dwt_browser)}Dynamsoft.DWT.lavrf(k,1,Dynamsoft.DWT.EnumInstance.dwt_browser)}}}}else{if(I){if(E.length>5){G=E[5]}if(!e.isArray(G)){G=[]}}else{var u={};if(E.length>5){u.width=E[5]}if(E.length>6){u.height=E[6]}if(E.length>7){u.bitDepth=E[7]}if(E.length>8){u.resolutionX=E[8]}if(E.length>9){u.resolutionY=E[9]}if(E.length>10){k=E[10]}G.push(u);if(k>-1&&D._blts&&(z==o||z==y)){var q=Dynamsoft.DWT.lgct(k);if(e.isFunction(D.__OnLtsverify)){D.__OnLtsverify(q,1)}}}}e.log(C+E);if((z==y)||(z==o&&!D.__IfAppendImage)){e.each(l,function(N,L){var M=parseInt(N),O=D._ImgManager.getCurrentImageIndex(),P;if(L<G.length&&G[L]){P=G[L]}else{P={}}if(isNaN(M)||M<0){return true}if(t){D._aryBitmapCache.push(M)}else{var m=0;for(;m<D._aryBitmapCache.length;m++){if(D._aryBitmapCache[m]==M){D._aryBitmapCache.splice(m,1);return true}}}if(D._ImgManager.exists(M)){return true}if(D.__insertingIndex>-1){O=D.__insertingIndex}if(O==-1){O=0}D._ImgManager.insertBefore(O,K,M,P);if(D.__insertingIndex>-1){D.__insertingIndex=D.__insertingIndex+1}});if(e.isFunction(D.__OnRefreshUI)){D.__OnRefreshUI(D._ImgManager.getCurrentImageIndex(),D._ImgManager.count())}}else{if(z==o&&D.__IfAppendImage){e.each(l,function(O,L){var N=parseInt(O),M;if(isNaN(N)||N<0){return true}if(L<G.length&&G[L]){M=G[L]}else{M={}}if(t){D._aryBitmapCache.push(N)}else{var m=0;for(;m<D._aryBitmapCache.length;m++){if(D._aryBitmapCache[m]==N){D._aryBitmapCache.splice(m,1);return true}}}if(D._ImgManager.exists(N)){return true}D._ImgManager.append(K,N,M)});if(e.isFunction(D.__OnRefreshUI)){D.__OnRefreshUI(D._ImgManager.getCurrentImageIndex(),D._ImgManager.count())}}else{if(z==v&&t){var H=false;if(l.length==1&&l[0]==-1){H=true}else{if(l.length==1&&D._ImgManager.count()<=1){H=D._ImgManager.convertClientIndexToServerId(0)==l[0]}}if(H){D._ImgManager.clear()}else{e.each(l,function(M,m){var L=parseInt(M);if(isNaN(L)||L<0){return true}D._ImgManager.removeByServerId(L)})}if(e.isFunction(D.__OnRefreshUI)){D.__OnRefreshUI(D._ImgManager.getCurrentImageIndex(),D._ImgManager.count())}}else{if(z==p){e.each(l,function(O,m){var M=parseInt(O),L;if(isNaN(M)||M<0){return true}if(m<G.length&&G[m]){L=G[m]}else{L={}}if(M>=0&&!D.__bLoadingImage){if(D._isBindViewer()){if(D._ImgManager.bImageJustChangedInEditor==false){D._ImgManager.bImageChangedInViewer=true}else{D._ImgManager.bImageJustChangedInEditor=false;D._ImgManager.bImageChangedInViewer=false}}var N=D._ImgManager.convertServerIdToClientIndex(M);if(N>-1){D.OnRefreshUI(N,D._ImgManager.count(),true,L)}}})}else{if(z==w){if(n>=0&&!D.__bLoadingImage){var F;if(0<G.length&&G[0]){F=G[0]}else{F={}}if(D.__IfAppendImage==false){D.OnRefreshUI(n,D._ImgManager.count(),true,F)}D._ImgManager.refresh(n,D._ImgManager.count(),false,F)}}}}}}if(e.isFunction(D.__OnBitmapChanged)){if(!x&&t){return true}var s=[];e.each(l,function(L){var m=parseInt(L),M;if(isNaN(m)||m<0){return true}M=D._ImgManager.convertServerIdToClientIndex(m);if(M>-1){s.push(M)}});var A=D._ImgManager.getCurrentImageIndex(),r=z;if(z==o){if(D.__IfAppendImage){r=o}else{r=y}}D.__OnBitmapChanged(s,r,A,D._ImgManager.count())}};b._OnPostLoad=function(r,k){var o=this,n,t,q,l,s,m;if(k!==undefined&&k.exception!==undefined&&k.description!==undefined){o._errorCode=k.exception;o._errorString=k.description}e.log("OnPostLoad Results:");l=r[1].split(",");t=e.base64.decode(l[0]);s=e.base64.decode(l[1]);e.log(t);e.log(s);e.log(l[2]);i.autoDiscardBlankImage(o,"On PostLoad");m=o._ImgManager.getCurrentImageIndex();if(m>=0){o.OnRefreshUI(m)}if(e.isFunction(o.__OnPostLoad)){o.__OnPostLoad(t,s,l[2])}};b._OnPostTransfer=function(k){var l=this;e.log("On PostTransfer Results:"+k);i.autoDiscardBlankImage(l,"On PostTransfer");if(e.isFunction(l.__OnPostTransfer)){l.__OnPostTransfer()}};b._OnPostTransferAsync=function(k){var p=this;e.log("On PostTransfer Async Results:"+k);if(e.isFunction(p.__OnPostTransferAsync)){var n;if(k&&k.length>=2){try{var m=String(k[1]),l=m.replace(/\\/g,"\\\\");n=e.parse(l);if(n.imageId){n.imageId=p.objImageIndexManager.convertServerIdToGuid(n.imageId)}}catch(o){e.log(k)}}if(!n){n={imageId:-1}}p.__OnPostTransferAsync(n)}};b._OnPreAllTransfersAsync=function(l){var n=this;if(e.isFunction(n.__OnPreAllTransfersAsync)){var m={event:"beforeAcquire",result:{}};try{if(e.isArray(l)&&l.length>1){m=e.parse(l[1])}}catch(k){}setTimeout(function(){n.__OnPreAllTransfersAsync(m)},10)}};b._OnPostAllTransfers=function(l){var n=this,k,m;if(l.length>=2&&n._errorCode==0){n._errorCode=l[1];n._errorString=l[2]}e.log("On PostAllTransfers Results:"+l);n.__bLoadingImage=false;n.__bAcquireImageNow=false;n.__closeRemoteScanUI(true);if(e.isFunction(n.__OnPostAllTransfers)){n.__OnPostAllTransfers()}if(e.License.isLTS()){Dynamsoft.DWT.lcvrf(n)}};b._OnResult=function(k){var m=this,l=k[1];if(e.isFunction(m.__OnResult)){m.__OnResult(l)}};b._OnTransferCancelled=function(k){var n=this,l=n._ImgManager.getCurrentImageIndex(),m=n._ImgManager.count();n.__bLoadingImage=false;n.__bAcquireImageNow=false;if(e.isFunction(n.__OnTransferCancelled)){n.__OnTransferCancelled()}};b._OnTransferError=function(k){var l=this;if(e.isFunction(l.__OnTransferError)){l.__OnTransferError()}};b._OnSourceUIClose=function(k){var l=this;l.__closeRemoteScanUI(true);if(e.isFunction(l.__OnSourceUIClose)){l.__OnSourceUIClose()}};b._OnPreTransfer=function(k){var l=this;if(e.isFunction(l.__OnPreTransfer)){l.__OnPreTransfer()}};b._OnPreAllTransfers=function(k){var l=this;if(e.isFunction(l.__OnPreAllTransfers)){l.__OnPreAllTransfers()}};b._OnPercentDone=function(u){var t=this,k=false,q,o=Dynamsoft.Lib,C=false,l,F=0,E,B,A,z;if(o.isArray(u)&&u.length>2){l=u[0];F=u[1];E=u[2];if(u.length>3){B=u[3]}if(u.length>4){A=u[4]}if(u.length>5){z=u[5]}q=F;if(F<0){q=0}else{if(F>100){q=100}}q=Math.floor(q);if(o.cancelFrome==1||o.cancelFrome==2||o.cancelFrome==5){C=A}}if(!t._bServerPercentDone){if(l!=0){return}}if(F>0||F==0){if(o.cancelFrome==1||o.cancelFrome==2){if(B=="http"){k=true}}if(o.cancelFrome==3||o.cancelFrome==4){if(A=="ftp"){k=true}}}if((o.cancelFrome==0&&t.__IfShowProgressBar==true)||(o.cancelFrome!=0&&t.__IfShowCancelDialogWhenImageTransfer==true)){var v=o.one(".dynamsoft-progressBar"),s=o.one(".dynamsoft-status"),y=o.one(".dynamsoft-finalMessage"),w=o.one(".dynamsoft-desc"),x;if(o.cancelFrome==3||o.cancelFrome==4){var n=B;if(n==0){i.setBtnCancelVisibleForProgress(t,false)}else{if(n==1){i.setBtnCancelVisibleForProgress(t,true)}}}if(F<0){o.progressMessage=E;x=o.progressMessage}else{if(E!=""&&E!="1/1"){x=o.progressMessage+"("+E+")"}else{x=o.progressMessage}}if(y&&y.getEL()){var p="",D="";if(x.indexOf(" ...")){x=x.replace(" ...","...")}if(x.indexOf("(")!=-1){p=x.substr(0,x.indexOf("("));D=x.substr(x.indexOf("("))}else{p=x}o.each(g,function(G,m){if(G.indexOf(p)!=-1){x=h.CustomizableDisplayInfo.customProgressText[m]+D}});if(x==""){x="&nbsp;"}y.html(x)}if(C!=false){if(C==""||o.isUndef(C)){C="&nbsp;"}else{if(o.isString(C)&&C.length>30){C=C.substring(0,30)+"..."}}w.html(C)}else{w.html("&nbsp;")}if(q||q===0){if(s&&s.getEL()){s.html(q+"%")}if(v&&v.getEL()){if(c.bIE){if(v[0].objProgressBar){v[0].objProgressBar.setValue(q)}else{v[0].value=q}}else{if(c.bEdge){v[0].style.display="";v[0].value=q}else{v[0].value=q}}}}if(q&&(q>=100||o.dlgRef<=0)){setTimeout(function(){if(v&&v.getEL()){if(c.bIE){if(v[0].objProgressBar){v[0].objProgressBar.setValue(0)}else{v[0].value=0}}else{if(c.bEdge){v[0].style.display="none";v[0].value=0}else{v[0].value=0}}}},1000);if(o.dlgRef<=0){var r="OnPercentDone";o.closeProgress(r)}}}if(k==true){if(o.isFunction(t.__OnInternetTransferPercentage)){t.__OnInternetTransferPercentage(q,false)}if(o.isFunction(t.__OnInternetTransferPercentageEx)){t.__OnInternetTransferPercentageEx(q,false)}}if(o.isFunction(t.__OnPercentDone)){t.__OnPercentDone()}};b._OnGetFilePath=function(l){var r=this,m,o,q,n,k;q=l[1].split(",");e.log("On GetFilePath Results:"+l);n=e.base64.decode(q[3]);k=e.base64.decode(q[4]);if(q[2]=="-1032"){q[2]="-1";n=k=""}if(e.isFunction(r.__OnGetFilePath)){r.__OnGetFilePath(q[0]*1,q[1]*1,q[2]*1,n,k)}r.__bOpenFileNow=false};b.checkErrorString=function(){var m=this,l=m.ErrorCode;if(l===-2115){return true}if(l===-2003){if(!Dynamsoft.DWT.IfHttpPostErrorNoWindow){var k=window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");k.document.writeln(m.__HTTPPostResponseString)}}return(l===0)};b.__GetLoadEventsNum=function(){var l=this,k=0;if(e.isFunction(l.__OnPostLoad)){k=k|1}if(e.isFunction(l.__OnGetFilePath)){k=k|2}return k};b._OnPageFocus=function(k){var m=this;m.bPageFocus=true;if(!m._isMobileMode()&&!m.bReady){return Dynamsoft.Lib.connectToWS(m)}if(!c.bWin||m._isMobileMode()||!h.IfAlwaysFocusOnPopupWindow){return}var l=e.stringify({sequence:0,wnds:0,wnd:"0",type:3,x:0,y:0});if(m.__bAcquireImageNow||k||m.__bOpenFileNow){m.bServerAlwaysFocusOnPopupWindow=true;m._innerSendCmd("SendEventToScannerUI",["[",l,"]"].join(""))}};b._OnPageBlur=function(k){var m=this;if(!c.bWin||m._isMobileMode()){return}if(!m.bReady){return Dynamsoft.Lib.connectToWS(m)}var l=e.stringify({sequence:0,wnds:0,wnd:"0",type:4,x:0,y:0});if(m.bPageFocus!=false||k){m.bPageFocus=false;if(m.__bAcquireImageNow||k||m.__bOpenFileNow){m.bServerAlwaysFocusOnPopupWindow=false;m._innerSendCmd("SendEventToScannerUI",["[",l,"]"].join(""))}}}});Dynamsoft.Ready(function(a,g){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var j=a.html5.STwain,c=j.prototype,f=a,i=a.html5.Funs,h=Dynamsoft.DWT,e=!1,d=!0;c.SetCookie=function(k){this._cookie=k;document.cookie=k;return d};c.LoadImageFromBase64Binary=function(w,y,z,o){var u=this;u._resetErr();if(!u._isValid()){return false}var r=w,n=e,l="LoadImageFromBase64Binary",t=y,v,q=0,x=1;if(r instanceof Dynamsoft.Lib.html5.Base64Result){if(a.isFunction(r.getLength)&&a.isFunction(r.getData)){r=r.getData(0,r.getLength())}}if((a.isUndef(y)||y==5)&&a.isString(r)){if(r.indexOf("data:image/bmp")!=-1){t=0}else{if(r.indexOf("data:image/jpeg")!=-1){t=1}else{if(r.indexOf("data:image/tif")!=-1){t=2}else{if(r.indexOf("data:image/png")!=-1){t=3}else{if(r.indexOf("data:application/pdf")!=-1){t=4}else{if(r.indexOf("data:image/jp2")!=-1){t=14}}}}}}}if(t!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&t!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&t!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&t!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&t!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&t!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){t=-1}if(!a.License.checkProductKey(u,{Core:true})){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString)}return e}if(!a.License.checkPDFProductKeyWhenNeeds(u,t)){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString)}return e}if(u._isMobileMode()){if(a.isUndefined(w)){a.Errors.InvalidParameter(u);if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString)}return false}a.cancelFrome=2;a.showProgress(u,l,d);u.__bLoadingImage=d;var p=r;if(f.isString(r)){if(r.indexOf("blob:")>=0||r.indexOf("data:")>=0){}else{var s;if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){s="data:image/png;base64,"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG){s="data:image/jpeg;base64,"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF){s="data:image/tif;base64,"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){s="data:application/pdf;base64,"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP){s="data:image/bmp;base64,"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){s="data:image/jp2;base64,"}else{s="data:application/octet-stream;base64,"}}}}}}r=[s,r].join("")}if(r.indexOf("data:")>=0){p=f.MobileFuns.dataURLtoBlob(r);if(p==false){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;a.Errors.ConvertFromBase64Failed(u);if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,y)}return false}}}else{if(r instanceof ArrayBuffer){var k="image/png";if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG){k="image/png"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG){k="image/jpeg"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF){k="image/tiff"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){k="application/pdf"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP){k="image/bmp"}else{if(y==Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){k="image/jp2"}}}}}}p=new Blob([r],{type:k})}else{}}v=u._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(p),0,function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(u._isBindViewer()){var m=u._ImgManager.getCurrentImageIndex();if(m>=0){u.OnRefreshUI(m)}}if(z){z(r,y)}return true},function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,y)}});return true}if(a.isFunction(z)){n=d}if(a.isString(r)){if(r.indexOf("base64,")!=-1){r=r.substr(r.indexOf("base64,")+7)}}q=u.__GetLoadEventsNum();if(n){if(i.isServerInvalid(u)){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,y)}return e}a.cancelFrome=2;a.showProgress(u,l,d);u.__bLoadingImage=d;x=0;v=u._innerSend(l,i.makeParams(r,t,q,x),d,function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(u._isBindViewer()){var m=u._ImgManager.getCurrentImageIndex();if(m>=0){u.OnRefreshUI(m)}}if(z){z(r,y)}return true},function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,y)}})}else{v=u.__innerLoadImageFun(l,i.makeParams(r,t,q,x),x)}return v};c.SaveSelectedImagesToBytes=function(l,k){a.Errors.HTML5NotSupport(this);return e};c.LoadImageFromBytes=function(m,k,l){a.Errors.HTML5NotSupport(this);return e};c.UnregisterEvent=function(k,n){var m=this;m._resetErr();if(!m._isValid()){return false}var l=["__",k].join("");m[l]=null;return d};c.SetCancel=function(l,k){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("SetCancel",k)}return this._innerSend("SetCancel",null,d,l,k)};c._asyncSetImageWidth=function(o,p,k,n){var r=this,m=function(){i.refreshImageAfterInvokeFun(r,o);if(a.isFunction(k)){setTimeout(k,30)}},q=function(){if(a.isFunction(n)){n(r.ErrorCode,r.ErrorString)}};var l=parseInt(o);return r._innerSendToMobile("SetImageWidth",f.MobileFuns.makeParams(l,p),0,m,q)};c.SetImageWidth=function(q,l,t,s){var n=this,k,o;n._resetErr();if(!n._isValid()){return false}var p=parseInt(q);if(isNaN(p)){a.Errors.InvalidIndex(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}if(p<0||p>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}if(a.isUndefined(l)){a.Errors.InvalidParameter(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){return n._asyncSetImageWidth(p,l,t,s)}var m=n._ImgManager.convertClientIndexToServerId(p);if(m==-1){a.Errors.IndexOutOfRange(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}k=n._innerFun("SetImageWidth",i.makeParams(m,l));o=(k==1);if(o){if(a.isFunction(t)){t()}}else{if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}}return o};c.HTTPDownloadStreamThroughPost=function(l,k){a.Errors.HTML5NotSupport(this);return e};c.HTTPUploadStreamThroughPost=function(n,m,k,o,l){a.Errors.HTML5NotSupport(this);return e};c.HTTPUploadThroughPutDirectly=function(n,l,k,o,m){a.Errors.HTML5NotSupport(this);return false};c.SetCustomDSDataEx=function(k){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("SetCustomDSDataEx")}return this._innerFun("SetCustomDSDataEx",i.makeParams(k))};c.SetCustomDSData=function(k){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("SetCustomDSData")}var l=i.replaceLocalFilename(k);return this._innerFun("SetCustomDSData",i.makeParams(l))};c.GetCustomDSDataEx=function(){var k=this;k._resetErr();if(!k._isValid()){return false}if(k._isMobileMode()){return k._mobileNotSupport("GetCustomDSDataEx")}return k._innerFun("GetCustomDSDataEx")};c.GetCustomDSData=function(k){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("GetCustomDSData")}var l=i.replaceLocalFilename(k);return m._innerFun("GetCustomDSData",i.makeParams(l))};c._asyncConvertToBW=function(o,k,n){var q=this,m=function(){i.refreshImageAfterInvokeFun(q,o);if(a.isFunction(k)){k()}},p=function(){if(a.isFunction(n)){n(q.ErrorCode,q.ErrorString)}};var l=parseInt(o);return q._innerSendToMobile("ConvertToBWScale",f.MobileFuns.makeParams(l),0,m,p)};c.ConvertToBW=function(o,k,n){var p=this;p._resetErr();if(!p._isValid()){return false}if(!a.License.checkProductKey(p,{Core:true})){if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}return false}var m=parseInt(o);if(isNaN(m)){a.Errors.InvalidIndex(p);if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}return false}if(m<0||m>=p._ImgManager.count()){a.Errors.IndexOutOfRange(p);if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}return false}if(p._isMobileMode()){return p._asyncConvertToBW(m,k,n)}var l=p.ChangeBitDepth(o,1,true);if(l){if(a.isFunction(k)){k()}}else{if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}}return l};c.LoadImageFromBinary=function(u,s,l){var p=this,k;if(!a.License.checkProductKey(p,{Core:true})){if(a.isFunction(l)){l(p.ErrorCode,p.ErrorString)}return false}if(!u||u==""){a.Errors.ParameterCannotEmpty(p);if(a.isFunction(l)){l(p.ErrorCode,p.ErrorString)}return false}if(u instanceof FileList){if(u.length==1){return p.LoadImageFromBinary(u[0],s,l)}else{if(u.length>1){var m;for(m=0;m<u.length;m++){a.asyncQueue.pushToDo(p,"LoadImageFromBinary",[u[m],s,l])}a.asyncQueue.start();return true}else{a.Errors.ParameterCannotEmpty(p);if(a.isFunction(l)){l(p.ErrorCode,p.ErrorString)}return false}}}if(window.ReadableStream&&u instanceof ReadableStream){k=new Response(u)}else{if(window.Response&&u instanceof Response){k=u}}if(p._bLocalService){if(k){k.arrayBuffer().then(function(A){var x=new Blob([A]);var z="",y=-1,w=true;p.__LoadImageFromBytes(x,y,z,w,s,l)})}else{var r=u;if(r instanceof ArrayBuffer||r instanceof Uint8Array){r=new Blob([u])}var q="",v=-1,o=true,n=Dynamsoft.DWT.EnumDWT_ImageType;if(a.isString(r.type)){if(r.type=="application/pdf"){v=n.IT_PDF}else{if(r.type=="image/png"){v=n.IT_PNG}else{if(r.type=="image/jpeg"){v=n.IT_JPG}else{if(r.type=="image/bmp"){v=n.IT_BMP}else{if(r.type=="image/tiff"){v=n.IT_TIF}else{if(r.type=="image/jp2"){v=n.IT_J2K}}}}}}}p.__LoadImageFromBytes(r,v,q,o,s,l)}}else{if(k){k.arrayBuffer().then(function(t){p._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(t),0,s,l)})}else{p._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(u),0,s,l)}}return true};c.EnableSourceUI=function(k,m){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("EnableSourceUI",m)}return l._innerSend("EnableSourceUI",null,true,k,m)};c.getCapabilities=function(k,m){var l=this;if(l._bLocalService){return l._innerFunRaw("GetCapabilities",null,true,false,false,function(n){var q,p;if(n.length>0){p=n[0]}try{if(f.isString(p)){p=f.removeNonPrintableChar(p);p=f.replaceAll(p,"\\\\","\\\\");q=JSON.parse(p)}else{q={}}}catch(o){l._errorCode=-2302;l._errorString=o;if(f.isFunction(m)){m(l.ErrorCode,l.ErrorString)}return}if(q.errorCode==0){if(f.isFunction(k)){k(q.response)}}else{l._errorCode=q.errorCode;l._errorString=q.errorString;if(f.isFunction(m)){m(l.ErrorCode,l.ErrorString)}}},m)}else{return l._mobileNotSupport("GetCapabilities",m)}return true};c.setCapabilities=function(l,n,p){var o=this;if(o._bLocalService){if(a.isObject(l)&&!a.isArray(l)){var k=["[",a.stringify(l),"]"].join(""),m=function(q){if(a.isFunction(n)){n(q)}};return o._innerSend("SetCapabilities",k,0,m,p)}else{a.Errors.InvalidParameter(o);if(a.isFunction(p)){p(o.ErrorCode,o.ErrorString)}return false}}else{return o._mobileNotSupport("SetCapabilities",p)}return true};c.BindViewer=function(k){var n=this,l=false,m=k;if(!Dynamsoft.DWT.UseDefaultViewer){a.Errors.CannotBindViewerWhenNoViewerJS(n);return false}if(a.isString(k)){m=a.get(k)}if(n.config.container!=m){n.config.container=m;n.config.ifBindViewer=true;a.html5.ui.init(n,n.config)}l=n._ImgManager.BindView(k);n._bBindViewer=true;n.config.ifBindViewer=false;return l};c.UnbindViewer=function(){var k=this;k._bBindViewer=false;k.config.container=null;return k._ImgManager.UnbindView()};c.GetIfShowVideoContainer=function(){var k=this;return k._ImgManager.GetIfShowVideoContainer()};c.ShowVideoContainer=function(k){var l=this;return l._ImgManager.ShowVideoContainer(k)};c.UpdateVideoContainer=function(k){var l=this;return l._ImgManager.UpdateVideoContainer(k)};c.ChangeBitDepth=function(n,m,p){var o=this,l;o._resetErr();if(!o._isValid()){return false}if(o._isMobileMode()){return o._mobileNotSupport("ChangeBitDepth")}l=parseInt(n);if(isNaN(l)){a.Errors.InvalidIndex(o);return false}if(l<0||l>=o._ImgManager.count()){a.Errors.IndexOutOfRange(o);return false}var k=o._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(o);return false}return o._innerFun("ChangeBitDepth",i.makeParams(k,m,p))};c._asyncConvertToGrayScale=function(t,s,m){var o=this,q=function(){i.refreshImageAfterInvokeFun(o,t);if(a.isFunction(s)){setTimeout(s,30)}},l=function(){if(a.isFunction(m)){m(o.ErrorCode,o.ErrorString)}};if(!a.License.checkProductKey(o,{Core:true})){l();return false}var p=parseInt(t),k,n;return o._innerSendToMobile("ConvertToGrayScale",f.MobileFuns.makeParams(p),0,q,l)};c.ConvertToGrayScale=function(p,n,m){var s=this,o,q;s._resetErr();if(!s._isValid()){return false}var l=parseInt(p);if(isNaN(l)){a.Errors.InvalidIndex(s);if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}return false}if(l<0||l>=s._ImgManager.count()){a.Errors.IndexOutOfRange(s);if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}return false}if(s._isMobileMode()){return s._asyncConvertToGrayScale(l,n,m)}var k=s._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(s);if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}return false}o=s._innerFun("ConvertToGrayScale",i.makeParams(k));q=(o==1);if(q){i.refreshImageAfterInvokeFun(s,l);if(a.isFunction(n)){n()}}else{if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}}return q};c.ClearTiffCustomTag=function(){var k=this;k._resetErr();if(!k._isValid()){return false}k._aryTiffTag.splice(0,k._aryTiffTag.length);if(k._isMobileMode()){return true}return k._innerFun("ClearTiffCustomTag")};c.SetTiffCustomTag=function(k,m,r){var p=this;p._resetErr();if(!p._isValid()){return false}if(a.isUndef(k)||a.isUndef(m)){a.Errors.InvalidParameter(p);return false}var o,t=k*1;if(a.isString(m)){o=a.replaceAll(m,'"','\\"')}else{o=m}if(t<=0||t>2147483647){a.Errors.InvalidTiffTagError(p);return false}var n=0,s,l=false,q=p._aryTiffTag.length;for(n=0;n<q;n++){s=p._aryTiffTag[n];if(s.tag==t){s.Content=m;s.isBinary=!r;l=true}}if(!l&&q>=32){a.Errors.TiffTagCountExceedError(p);return false}if(p._isMobileMode()){if(l){return true}p._aryTiffTag.push({tag:k,content:m,isBinary:!r});return true}return p._innerFun("SetTiffCustomTag",i.makeParams(t,o,r))};c.IsBlankImage=function(m){var n=this,l=parseInt(m);if(isNaN(l)){a.Errors.InvalidIndex(n);return false}if(l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return false}var k=n._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(n);return false}return n._innerFun("IsBlankImage",i.makeParams(k,e))};c.IsBlankImageExpress=function(m){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("IsBlankImageExpress")}var l=parseInt(m);if(isNaN(l)){a.Errors.InvalidIndex(n);return false}if(l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return false}var k=n._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(n);return false}return n._innerFun("IsBlankImage",i.makeParams(k,d))};c.SetOpenSourceTimeout=function(k){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("SetOpenSourceTimeout")}return l._innerFun("SetOpenSourceTimeout",i.makeParams(k))};c.GetImageURL=function(s,l,k,w,r){var q=this;q._resetErr();if(!q._isValid()){return false}if(q._isMobileMode()){return q._mobileNotSupport("GetImageURL")}var t=s,u=parseInt(l),o=parseInt(k),v,m,n;if(w){v="";m="dwt://"}else{v=q.httpUrl;m="dwt/"}n=[v,m,a.product.getDWTPrefix(),a.product.getServerVersionInfo(),"/img?id=",q.clientId];if(a.isUndefined(t)||t===null){a.Errors.IndexNullOrUndefined(q);return""}if(!r){t=parseInt(t);if(isNaN(t)){a.Errors.InvalidIndex(q);return""}if(t<-1||t>=q._ImgManager.count()){a.Errors.IndexOutOfRange(q);return""}var p=q._ImgManager.convertClientIndexToServerId(t);if(p==-1){return""}n.push("&index=");n.push(p);if(u>0&&o>0){n.push("&width=");n.push(u);n.push("&height=");n.push(o)}}else{n.push("&index=-1&width=-1&height=-1&webcam=");n.push(r)}n.push("&t=");n.push(new Date().getTime());return n.join("")};c.GetImagePartURL=function(l,m,n){var o=this;o._resetErr();if(!o._isValid()){return false}if(o._isMobileMode()){return o._mobileNotSupport("GetImagePartURL")}var k=parseInt(l);if(isNaN(k)){a.Errors.InvalidIndex(o);return""}if(k<0||k>=o._ImgManager.count()){a.Errors.IndexOutOfRange(o);return""}return this.GetImageURL(k,m,n,!0)};c.SetLanguage=function(l){var k=this;k._resetErr();if(!k._isValid()){return false}if(k._isMobileMode()){return k._mobileNotSupport("SetLanguage")}return k._innerFun("SetLanguageForSecurity",i.makeParams(l))};c._wasmGetLicenseInfo=function(m,l){var n=this,k=function(o){if(o){if(!o.exception){n.__licenseInfo=o;if(m){m(n.__licenseInfo)}}else{if(l){l(o.exception)}}}else{if(l){l()}}};return n._innerSendToMobile("GetLicenseInfo",f.MobileFuns.makeParams(),0,k,l)};c.GetLicenseInfo=function(m,l){var n=this,k;if(!n.__licenseInfo){if(n._isMobileMode()){return n._wasmGetLicenseInfo(m,l)}if(i.isHttpServerInvalid(n)){return e}n._innerFunRaw("GetLicenseInfo",null,d,e,d,function(o){if(o){if(!o.exception){n.__licenseInfo=o;if(a.isFunction(m)){m(n.__licenseInfo)}}else{if(a.isFunction(l)){l(o.exception)}}}else{if(a.isFunction(l)){l()}}},l)}else{if(a.isFunction(m)){m(n.__licenseInfo)}}return d};c.IndexToImageID=function(m){var n=this;n._resetErr();if(!n._isValid()){return false}var l=parseInt(m);if(isNaN(l)){a.Errors.InvalidIndex(n);return -1}if(l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return -1}var k=n._ImgManager.convertClientIndexToServerId(l);return n.objImageIndexManager.convertServerIdToGuid(k)};c.ImageIDToIndex=function(m){var n=this,l,k=-1;n._resetErr();if(!n._isValid()){return false}l=n.objImageIndexManager.convertGuidToServerId(m);if(l>0){k=n._ImgManager.convertServerIdToClientIndex(l)}if(k==-1){a.Errors.InvalidImageID(n)}return k};c._setProductKeyV2=function(k){var p=this,o=k;p._resetErr();if(!p._isValid()){return false}if(i.isHttpServerInvalid(p)){return a.Promise.reject({code:p._errorCode,message:p._errorString})}if(!a.isString(o)||o=="******"){a.Errors.LicenseEmptyOrInvalid(p);return a.Promise.reject({code:p._errorCode,message:p._errorString})}var n,l=Dynamsoft.DWT.ProductKey;if(a.startsWith(o,"http://")||a.startsWith(o,"https://")){var m={method:"get"};n=a.fetch(o,m)}else{n=a.Promise.resolve(o)}n=n.then(function(q){return p._innerFunRawV2("ProductKey",i.makeParams(q))},function(r){a.Errors.HttpLicenseInvalid(p);var q;if(r){q=[p._errorString," Http info: ",r.errorString," (",r.httpCode,")"].join("")}else{q=p._errorString}Dynamsoft.DWT.ProductKey=l;throw {code:p._errorCode,message:q}});n=n.then(function(q){if(q){if(q.exception!==undefined&&q.description!==undefined){p._errorCode=q.exception;p._errorString=q.description;Dynamsoft.DWT.ProductKey=l;n.context=null;throw {code:p._errorCode,message:p._errorString}}Dynamsoft.DWT.ProductKey=n.context.productKey;n.context=null;return p._innerFunRawV2("GetLicenseInfo")}else{a.Errors.LicenseEmptyOrInvalid(p);Dynamsoft.DWT.ProductKey=l;n.context=null;throw {code:p._errorCode,message:p._errorString}}});n.context={productKey:o};return n};c.SetProductKeyAsync=function(k){var m=this;m._resetErr();if(!m._isValid()){return false}if(a.isUndefined(k)){a.Errors.LicenseEmptyOrInvalid(m);return a.Promise.reject({code:m._errorCode,message:m._errorString})}var l;if(m._isMobileMode()){l=m._innerSendToMobileV2("GetLicenseInfo",f.MobileFuns.makeParams(k))}else{l=m._setProductKeyV2(k)}return l.then(function(n){var o=n;if(!o||o.message){a.Errors.LicenseEmptyOrInvalid(m);if(o&&o.message){m._errorString=o.message}throw {code:m._errorCode,message:m._errorString}}if(!a.License.isLTS()){Dynamsoft.DWT.ProductKey=k}m.__licenseInfo=o;return o})};c.GetVersionInfoAsync=function(){return this._innerFunV2("VersionInfo")};c.isUsingActiveX=function(){return false};c._setLTSLic=function(l){var m=this,k=l;m._resetErr();if(!m._isValid()){return false}if(i.isHttpServerInvalid(m)){return a.Promise.reject({code:m._errorCode,message:m._errorString})}if(!a.isString(k)){a.Errors.LicenseEmptyOrInvalid(m);return a.Promise.reject({code:m._errorCode,message:m._errorString})}return m._innerFunRawV2("LTSLicense",i.makeParams(k)).then(function(n){if(n){if(n.exception!==undefined&&n.description!==undefined){m._errorCode=n.exception;m._errorString=n.description;throw {code:m._errorCode,message:m._errorString}}return m._innerFunRawV2("GetLicenseInfo")}else{a.Errors.LicenseEmptyOrInvalid(m);throw {code:m._errorCode,message:m._errorString}}})};c.SetLTSLicenseAsync=function(k){var m=this;m._resetErr();if(!m._isValid()){return false}if(!a.isString(k)){a.Errors.LicenseEmptyOrInvalid(m);return a.Promise.reject({code:m._errorCode,message:m._errorString})}var l;if(m._isMobileMode()){l=m._innerSendToMobileV2("GetLicenseInfo",f.MobileFuns.makeParams(k))}else{l=m._setLTSLic(k)}return l.then(function(n){var o=n;if(!o||o.message){a.Errors.LicenseEmptyOrInvalid(m);if(o&&o.message){m._errorString=o.message}throw {code:m._errorCode,message:m._errorString}}m.__licenseInfo=o;if(m.__licenseInfo){m.__licenseInfo.LTS=true}return o})}});Dynamsoft.Ready(function(a,h){var c=Dynamsoft;if(!a.product.bHTML5Edition){return}var g=Dynamsoft.navInfo,b=a.html5.Funs2={getImageUrl:function(n,p,m,q,r){var o=[n];if(a.isNumber(p)&&p<0){return""}if(p!==undefined&&p!==null){o.push("&index=");o.push(p)}o.push("&width=");o.push(m);o.push("&height=");o.push(q);o.push("&ticks=");if(r){o.push(r)}else{o.push(Date.now())}return o.join("")},getUrlByAct:function(n,p,m){var o=[n];if(p!==undefined&&p!==null){o.push("&index=");o.push(p)}if(m){o.push("&act=");o.push(m)}o.push("&ticks=");o.push(Date.now());return o.join("")},output:function(n,m){if(Dynamsoft.DWT.Debug){a.log(m)}},print:function(w){var m,C=850,t=1120,B=0;var r=0,n=0,A="";if(a.product.bHTML5Edition){if(g.bIE){t=1160}if(g.bFirefox){t=1150}}for(B=0;B<w.length;B++){var q=t;var v=w[B];var y=v.Width;var o=v.Height;var s=v.Url;if(y<=0){y=C}if(o<=0){o=q}var x=C/y,u=q/o;if(x<u){q=parseInt(o*x)}else{if(x>u){C=parseInt(y*u)}}r+=y;n+=o;A=A+'<div style="width:850px;height:'+t+'px"><img id="D_img'+B+'" src="'+s+'" style="position:relative;left:0px;top:0px;width: '+C+"px;height: "+q+'px" /></div>'}var E,z=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",r,",height=",n].join(""),D=window.open("about:blank","_blank",z);m='<html><body id="D_img">'+A+"</body></html>";if(D){D.document.write(m);D.document.close();D.focus();E=D.document.getElementById("D_img");if(E){E.onload=function(){D.print();a.log("print image...ok")}}else{a.log("cannot find image")}}}};var k=a.DOM,i=Dynamsoft.DWT,j={getServerImageUrlPrefix:function(p){var n=p.httpUrl,m=false,o=[n,"dwt/",a.product.getDWTPrefix(),a.product.getServerVersionInfo(),"/img?id=",p.clientId];return o.join("")},output:function(m){if(Dynamsoft.DWT.Debug){a.log(m)}}};function d(n,o){var p=this,m=-1;p._stwain=n;p.__BackgroundFillColor=16777215;p.bImageJustChangedInEditor=false;p.bImageChangedInViewer=false;p._Init(n,o)}var e=d.prototype;e._Init=function(m,n){var o=this;if(!m._ifBindViewer){n.mapModelImageControl={}}else{n.mapModelImageControl=o.getView().mapModelImageControl}n.onTopImageInTheViewChanged=function(p){if(Dynamsoft.Lib.isFunction(m.__OnTopImageInTheViewChanged)){m.__OnTopImageInTheViewChanged(p.index,p.bByScrollBar)}};n.onGetImageInfo=function(r){var p=-1,q=-1;p=o.GetImageWidth(r);return{width:p,height:q}};if(!o._UIView){o._UIView=new a.UI.ImageUIView(o,n)}else{o._UIView._Init(n)}};e.getUidByIndex=function(m){var n=this;return n.getWebViewer().GetUidByIndex(m)};e.getIndexByUid=function(m){var n=this;return n.getWebViewer().GetIndexByUid(m)};e.getCurrentImageIndex=function(){var m=this;return m.getWebViewer().GetCurrentIndex()};e.convertServerIdToClientIndex=function(n){var q=this,m=-1,p,o;o=q._UIView.GetDataImageControl(n);if(o){p=o.uuid}if(p){m=q.getWebViewer().GetIndexByUid(p)}if(!a.isNumber(m)){m=-1}return m};e.convertClientIndexToServerId=function(m){var o=this;var n=o.getWebViewer().GetCustomDataByIndex(m);if(n){return n.imageId}else{return -1}};e.getWebViewer=function(){var m=this;return m.getView()._webViewer};e.getTwain=function(){var m=this;return m._stwain};e.getView=function(){var m=this;return m._UIView};e.OnReady=function(){var n=this,m=n.getView();m.BaseUrl=j.getServerImageUrlPrefix(n._stwain);return true};e.count=function(){var n=this,m=n.getView();return m.GetWebViewer().GetHowManyImagesInBuffer()};e.clear=function(){var n=this,m=n.getView();m.RemoveAllImages();return true};e.dispose=function(){var m=this;if(m._UIView){m._UIView.dispose();m._UIView=null}return true};e.unshift=function(p,o,m){var r=this,n=r.getView(),q;q=0;return r._updateUIAfterAdd(q,o,m)};e.append=function(n,p,r){var q=this,v=q.getView(),u,m,t,s;m=v.GetWebViewer().GetHowManyImagesInBuffer();t=v.GetWebViewer().GetCurrentIndex();for(var o=m-1;o>=n;o--){s=q.convertClientIndexToServerId(o);v.RemoveImage(o,s)}if(m<n){u=m;return q._updateUIAfterAdd(u,p,r,true)}else{if(t>=m-1){u=0}else{u=t+1}s=q.convertClientIndexToServerId(u);v.RemoveImage(u,s);if(u==n-1){return q._updateUIAfterAdd(u,p,r,true)}else{return q._updateUIAfterAdd(u,p,r,false)}}};e.exists=function(n){var o=this,m=o.getView();return m.exists(n)};e.insertBefore=function(p,r,o,m){var t=this,n=t.getView(),s=1*p,q;if(s<0||s>r){s=-1}q=n.GetWebViewer().GetHowManyImagesInBuffer();if(s>=q){s=q}return t._updateUIAfterAdd(s,o,m,false)};e.insert=function(p,r,o,m){var t=this,n=t.getView(),s=1*p,q;if(s<0||s>r){s=-1}q=n.GetWebViewer().GetHowManyImagesInBuffer();if(s>=q){s=q}return t._updateUIAfterAdd(s,o,m,false)};e._updateUIAfterAdd=function(r,p,m,q){var s=this,o=s.getView();if(p<0){return false}var n=o.AddImage(r,p,m,q);return n};e.removeByServerId=function(n){var p=this,m=p.getView(),o;return p.remove(n)};e.remove=function(n){var p=this,m=p.getView();var o=p.convertServerIdToClientIndex(n);return m.RemoveImage(o,n)};e.MoveImage=function(o,n){var p=this,m=p.getView();return m.MoveImage(o,n)};e.SwitchImage=function(o,n){var p=this,m=p.getView();return m.SwitchImage(o,n)};e.GetImageHeight=function(n){var q=this,r=n*1,s,u,t,o,p;u=q.getView();s=q.count();if(r<0||r>s){return 0}if(q._stwain._isMobileMode()){var m=u._webViewer.GetMetaDataByIndex(r);if(!m||!m.height){return 0}return m.height}p=q.convertClientIndexToServerId(r);t=u.GetDataImageControl(p);if(t&&t.imageHeight){o=t.imageHeight}else{o=q._stwain.GetImageHeight(r)}return o};e.GetImageWidth=function(o){var q=this,r=o*1,s,u,t,n,p;u=q.getView();s=q.count();if(r<0||r>s){return 0}if(q._stwain._isMobileMode()){var m=u._webViewer.GetMetaDataByIndex(r);if(!m||!m.width){return 0}return m.width}p=q.convertClientIndexToServerId(r);t=u.GetDataImageControl(p);if(t&&t.imageWidth){n=t.imageWidth}else{n=q._stwain.GetImageWidth(r)}return n};e.get=function(p){var r=this,q=parseInt(p),m,n,o;n=r.getView();m=r.count();if(q<0||q>m){return false}o=r.convertClientIndexToServerId(q);return n.GetDataImageControl(o)};e.refresh=function(n,o,m,q){var p=this,s=n*1,r;if(m){var t,v,u;v=p.getView();t=p.count();if(s<0||s>t){return false}r=p.convertClientIndexToServerId(s);v.SetDataImageControl(s,r,q)}return true};e.Go=function(o){var p=this,n=p.getView();var m=n.Go(o);return m};e.__Next=function(){var n=this,m=n.getView();return m.__Next()};e.__Previous=function(){var n=this,m=n.getView();return m.__Previous()};e.SetSelectedClientIndexArray=function(n){var o=this,m=o.getView();return m.SetSelectedindexes(n)};e.getSelectedClientIndexArray=function(){var n=this,m=n.getView();return m.GetSelectedindexes()};e.GetZoom=function(){var n=this,m=n.getView();return m.GetZoom()};e.SetZoom=function(n){var o=this,m=o.getView();return m.SetZoom(n)};e.__GetPrintUrl=function(n,p,r){var q=this,o=0,s=0,u,t=q.getView(),m;u=t.GetDataImageControl(p);if(!u.width||u.width<=0){u.width=q.GetImageWidth(r)}else{o=u.width}if(!u.height||u.height<=0){u.height=q.GetImageHeight(r)}else{s=u.height}m=new a.UI.PrintUrl(n,u.width,u.height);u.width=o;u.height=s;return m};e.__GetPrintUrlforMobile=function(r,t,s){var q=this,o,n,u=q.getView();if(r==t){b.print(s);return true}var p=q.convertClientIndexToServerId(r);if(p!=-1){var m=q.getWebViewer().GetUidByIndex(r);q.getWebViewer().GetImageData(m).then(function(v){if(v.oriData instanceof ArrayBuffer){o=URL.createObjectURL(new Blob([v.oriData]))}else{if(v.oriData instanceof Blob){o=URL.createObjectURL(v.oriData)}else{o=v.oriData}}n=q.__GetPrintUrl(o,p,r);s.push(n);q.__GetPrintUrlforMobile(r+1,t,s)})}};e.Print=function(){var s=this,m=s.getView();if(s.count()<=0){return}var p,o,n,q,r=[];if(s._stwain._isMobileMode()){s.__GetPrintUrlforMobile(0,s.count(),r)}else{for(p=0;p<s.count();p++){n=s.convertClientIndexToServerId(p);if(n!=-1){o=b.getImageUrl(m.BaseUrl,n,-1,-1);q=s.__GetPrintUrl(o,n,p);r.push(q)}}b.print(r)}return true};e.__GetPrintUrlforMobileEx=function(s,r){var t=this,o,q,n=t.getView();var m=a.Promise.resolve(0);var p=0;a.each(s,function(u){m=m.then(function(){var v=t.convertClientIndexToServerId(u);if(v!=-1){var w=t.getWebViewer().GetUidByIndex(u);t.getWebViewer().GetImageData(w).then(function(x){p++;if(x.oriData instanceof ArrayBuffer){o=URL.createObjectURL(new Blob([x.oriData]))}else{if(x.oriData instanceof Blob){o=URL.createObjectURL(x.oriData)}else{o=x.oriData}}q=t.__GetPrintUrl(o,v,u);r.push(q);if(s.length==p){b.print(r)}})}})});return true};e.PrintEx=function(s){var t=this,m=t.getView();if(t.count()<=0){return}var p,o,n,q,r=[];if(t._stwain._isMobileMode()){t.__GetPrintUrlforMobileEx(s,r)}else{a.each(s,function(u){n=t.convertClientIndexToServerId(u);if(n!=-1){o=b.getImageUrl(m.BaseUrl,n,-1,-1);q=t.__GetPrintUrl(o,n,u);r.push(q)}});b.print(r)}return true};e._isNoViewer=function(){var m=this;return !m._stwain._bBindViewer};e.ChangeSize=function(n,o){var p=this,m=p.getView();return m.ChangeImageViewSize(n,o)};e.GetWidth=function(){var n=this,m=n.getView();return m.GetWidth()};e.SetWidth=function(o,q){var r=this,m,p,n;if(r._isNoViewer()){return true}n=r.getView();return n.SetWidth(o)};e.GetHeight=function(){var n=this,m=n.getView();return m.GetHeight()};e.SetHeight=function(o,q){var r=this,m,p,n;if(r._isNoViewer()){return true}n=r.getView();return n.SetHeight(o)};e.SetViewMode=function(o,n){var p=this,m;if(p._isNoViewer()){return p._nouiNotSupport("SetViewMode")}m=p.getView();return m.SetViewMode(o,n)};e.ShowImageEditorEx=function(w,v,r,o,t,E,u,G){var D=this;if(D._isNoViewer()){return D._nouiNotSupport("ShowImageEditorEx")}switch(t){case 0:break;case 1:break;case 2:break;case 3:if(D.getWebViewer().OnCloseImageEditor()){return true}break;case 4:break}var C,H,I=document,p,s,q,z;z=D.getView();if(D.getTwain()._containerElement==u){E=false;j.output("warning: cannot use the same DIV for the main viewer and the editor viewer.")}for(var F=0;F<Dynamsoft.DWT.DynamicContainers.length;F++){if(Dynamsoft.DWT.DynamicContainers[F].ContainerId==u){E=false;j.output("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");break}}if(E&&u){if(a.isDOM(u)){s=u}else{if(a.isShadowRoot(u)){s=document.createElement("div");u.appendChild(s)}else{s=I.getElementById(u);if(s&&s.nodeName!="DIV"){j.output("warning: cannot create the editor viewer in a non-DIV element.");E=false}}}}else{}if(E&&u&&a.isDOM(u)){var A=a.getShadowRoot(u);if(A){var n=Dynamsoft.Lib.timestamp;var B,m;B=I.createElement("link");B.href=[Dynamsoft.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",n].join("");B.rel="stylesheet";B.async=true;m=I.createElement("link");m.href=[Dynamsoft.DWT.ResourcesPath,"/src/dynamsoft.webtwain.css",n].join("");m.rel="stylesheet";m.async=true;a.scriptOnload(B,function(){a.scriptOnload(m,function(){return z.GetWebViewer().ShowImageEditor(s,E,r,o)});A.appendChild(m)});A.appendChild(B);return true}}return z.GetWebViewer().ShowImageEditor(s,E,r,o)};e.SetSelectionRectAspectRatio=function(n){var o=this,m;m=o.getView();return m.SetSelectionRectAspectRatio(n)};e.GetSelectionRectAspectRatio=function(){var n=this,m=n.getView();return m.GetSelectionRectAspectRatio()};e.GetSelectionImageBorderColor=function(){var n=this,m=n.getView();return m.GetSelectionImageBorderColor()};e.SetSelectionImageBorderColor=function(n){var p=this,o=n,m=p.getView();return m.SetSelectionImageBorderColor(o)};e.GetBackgroundColor=function(){var n=this,m=n.getView();return m.GetBackgroundColor()};e.SetBackgroundColor=function(o,q){var r=this,m,p,n;if(r._isNoViewer()){return true}n=r.getView();if(q){return n.SetBackgroundColor(o,true)}else{return n.SetBackgroundColor(o)}};e.GetAllowMultiSelect=function(){var n=this,m=n.getView();if(n._isNoViewer()){return false}return m.GetAllowMultiSelect()};e.SetAllowMultiSelect=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetAllowMultiSelect(n)};e.GetFitWindowType=function(){var n=this,m=n.getView();if(n._isNoViewer()){return 0}return m.GetFitWindowType()};e.SetFitWindowType=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetFitWindowType(n)};e.GetIfFitWindow=function(){var n=this,m=n.getView();if(n._isNoViewer()){return true}return m.GetIfFitWindow()};e.SetIfFitWindow=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetIfFitWindow(n)};e.GetImageMargin=function(){var n=this,m=n.getView();if(n._isNoViewer()){return 0}return m.GetImageMargin()};e.SetImageMargin=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetImageMargin(n)};e.GetMouseShape=function(){var n=this,m=n.getView();if(n._isNoViewer()){return 0}return m.GetMouseShape()};e.SetMouseShape=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetMouseShape(n)};e.GetShowPageNumber=function(){var n=this,m=n.getView();if(n._isNoViewer()){return false}return m.GetShowPageNumber()};e.SetShowPageNumber=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetShowPageNumber(n)};e.GetIfAutoScroll=function(){var n=this,m=n.getView();return m.GetIfAutoScroll()};e.SetIfAutoScroll=function(n){var o=this,m=o.getView();return m.SetIfAutoScroll(n)};e.OverlayRectangle=function(u,n,q,s,m,o,r){var p=this;if(p._isNoViewer()){return true}var t=p.getView();return t.OverlayRectangle(u,n,q,s,m,o,r)};e.SetSelectedImageArea=function(p,r,q,o,n){var s=this,m=s.getView();if(p!=m.GetWebViewer().GetCurrentIndex()){return false}if(s._isNoViewer()){return true}return m.SetSelectedImageArea(r,q,o,n)};e.ShowImagesByFilter=function(n,p,o){var q=this,m=q.getView();return m.FilterImagesByTag(n,p,o)};e.ClearFilter=function(){var n=this,m=n.getView();return m.ClearFilter()};e.GetServerIdListByTag=function(n){var o=this,m=o.getView();return m.GetServerIdListByTag(n)};e.GetAllServerIdList=function(){var o=this,m=o.getView();var n=o.GetCurrentTag();return m.GetServerIdListByTag(n)};e.RemoveImageTag=function(n){var o=this,m=o.getView();return m.RemoveImageTag(n)};e.SetDefaultTag=function(n){var o=this,m=o.getView();return m.SetDefaultTag(n)};e.AddImageTag=function(o,n){var p=this,m=p.getView();return m.AddImageTag(o,n)};e.GetCurrentTag=function(){var n=this,m=n.getView();return m.GetCurrentTag()};e.RenameTag=function(n,p){var o=this,m=o.getView();return m.RenameTag(n,p)};e.RemoveTag=function(n,o){var p=this,m=p.getView();return m.RemoveTag(n,o)};e.GetTagList=function(){var n=this,m=n.getView();return m.GetTagList()};e.BindView=function(n){var p=this,m=p.getView(),o=n;if(a.isString(n)){o=a.get(n)}else{if(a.isDOM(o)){if(!o.id||o.id==""){o.id=["dwt_",a.getRandom()].join("")}}}return m.BindView(o)};e.UnbindView=function(){var n=this,m=n.getView();return m.UnbindView()};e.GetIfShowVideoContainer=function(){var n=this,m=n.getView();return m.GetIfShowVideoContainer()};e.ShowVideoContainer=function(n){var o=this,m=o.getView();return m.ShowVideoContainer(n)};e.UpdateVideoContainer=function(n){var o=this,m=o.getView();return m.UpdateVideoContainer(n)};e.GetImageData=function(o){var p=this,m=p.getView();var n=p.convertServerIdToClientIndex(o);if(n>=0){return m.GetImageData(p.getUidByIndex(n))}return NaN};e.RegistLoadCallback=function(o){var n=this,m=n.getView();return m.RegistLoadCallback(o)};function f(){var m=this;m.bIsDirty=false;m.imageWidth=0;m.imageHeight=0;m.iImageControlWidth=0;m.iImageControlHeight=0;m.imageUrl="";m.minImageUrl="";m.uuid=-1;m.serverId=-1;m.aryOverlayRectangleData=[];m.ticks=Date.now()}f.prototype.Clear=function(){var m=this;m.imageUrl="";m.minImageUrl="";m.serverId=-1;m.aryOverlayRectangleData=[]};function l(n,m,o){var p=this;p.Url=n;p.Width=m;p.Height=o}a.UI=a.UI||{};a.UI.ImageManager=d;a.UI.ModelImageControl=f;a.UI.PrintUrl=l});Dynamsoft.Ready(function(d,b){var a=Dynamsoft;if(!d.product.bHTML5Edition){return}var g=d.html5.STwain,h=d.html5.Funs,e=Dynamsoft.DWT;var f={TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14};var c=function(j,l){if(d.isUndef(j)||d.isUndef(l)||null==j||null==l){return}for(var k in l){if(j.hasOwnProperty(k)){if(typeof(j[k])==="object"){c(j[k],l[k])}}else{j[k]=l[k]}}return j};g.prototype.checkStartScanParams=function(i,j){var k=this;if(!i){d.Errors.ScanUploader_InvalidScanSetup(k);return false}if((!d.isUndefined(j.transferMode))&&i.transferMode!=0&&i.transferMode!=1&&i.transferMode!=2){d.Errors.ScanUploader_InvalidTransferMode(k);return false}if(i.transferMode==Dynamsoft.DWT.EnumDWT_TransferMode.TWSX_FILE){if(!i.fileXfer){d.Errors.ScanUploader_InvalidFileXfer(k);return false}if(!d.isString(i.fileXfer.fileName)||i.fileXfer.fileName==""){d.Errors.ScanUploader_InvalidFileXferFilename(k);return false}if(!d.isNumber(i.fileXfer.fileFormat)||i.fileXfer.fileFormat<0||i.fileXfer.fileFormat>16){d.Errors.ScanUploader_InvalidFileXferFileFormat(k);return false}}if(j){if(!d.isString(j.type)||j.type==""){d.Errors.ScanUploader_InvalidHttpType(k);return false}if(!j.httpParams){d.Errors.ScanUploader_InvalidHttpParams(k);return false}if(i.transferMode!=Dynamsoft.DWT.EnumDWT_TransferMode.TWSX_FILE&&d.isUndefined(j.format)){d.Errors.ScanUploader_InvalidOutputFormat(k);return false}if(!d.isString(j.httpParams.url)||j.httpParams.url==""){d.Errors.ScanUploader_InvalidHttpUrl(k);return false}if(!d.isString(j.httpParams.fileName)||j.httpParams.fileName==""){d.Errors.ScanUploader_InvalidHttpFilename(k);return false}}return true};g.prototype.startScan=function(R){var m=this,N=R;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupportAsync("startScan")}if(m.startScanFlag==true){d.Errors.StartScanFailed(m);return d.Promise.reject({code:m.ErrorCode,message:m.ErrorString})}m.startScanFlag=true;if(!d.isObject(N)){N={}}var J=false,S=false,p=true,A=true,B=true,Y=false,X=N.onFinally,V=[],x=[],l=0,o=1,y=[],U,s,u,q={type:"http",format:Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:false,singlePost:true,showProgressBar:true,removeAfterOutput:true,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},z=d.clone(N),t=N;u=z.funcScanStatus;delete z.funcScanStatus;if(d.isFunction(u)){z.bfuncScanStatus=true}else{z.bfuncScanStatus=false}if(z.outputSetup){var K={pdfSetup:{},tiffSetup:{}};c(z.outputSetup,q);s=z.outputSetup;delete z.outputSetup;if(s.pdfSetup){if(s.format==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||s.format==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF){d.mix(K.pdfSetup,s.pdfSetup)}}if(s.tiffSetup){if(s.format==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||s.format==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF){d.mix(K.tiffSetup,s.tiffSetup)}}if(s.format==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||s.format==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){s.singlePost=true}if(d.isNumber(s.httpParams.threads)){o=s.httpParams.threads}J=d.stringify(K);S=m.checkStartScanParams(z,s)}else{s=q;s.type="";S=m.checkStartScanParams(z,false)}if(!S){return new d.Promise(function(ac,ab){if(p){var aa={code:m.ErrorCode,message:m.ErrorString,response:""};ab(aa);p=false;m.startScanFlag=false}})}if(s.funcHttpUploadStatus){Y=s.funcHttpUploadStatus}var O=m.HttpFieldNameOfUploadedImage,k=m.MaxUploadImageSize,C=m.IfShowProgressBar,j=m.__IfShowCancelDialogWhenImageTransfer,v=m.__OnPostTransferAsync,D=m.__OnPostAllTransfers,E=m.__OnHttpUploadStatus,Z=m.__insertingIndex,P=m.__IfAppendImage,F=m.httpFormFields,I=m._tiffCompressionType,w=false,G=s.showProgressBar,r=function(ab){var aa=true;d.each(y,function(ad,ac){if(ad.st==-1){aa=false}});if(!aa){setTimeout(function(){r(ab)},200);return}W(ab)},W=function(aa){aa.__OnPostTransferAsync=v;aa.__OnPostAllTransfers=D;aa.__OnHttpUploadStatus=E;aa.HttpFieldNameOfUploadedImage=O;aa.__maxUploadImageSize=k;aa.IfShowProgressBar=C;aa.__IfShowCancelDialogWhenImageTransfer=j;aa.__insertingIndex=Z;aa.__IfAppendImage=P;aa.httpFormFields=F;aa._tiffCompressionType=I;aa.__OnCancel=false;if(Dynamsoft.FileUploader){Dynamsoft.FileUploader.nextLoopTime=600}aa.startScanFlag=false},M=function(ac,ab,aa){if(!A){setTimeout(function(){M(ac,ab,aa)},200);return}ab(aa);r(ac)},T=function(ab,aa){w=true;if(p){p=false;if(!A){m._innerSendCmd("CancelAllPendingTransfers")}M(m,ab,aa)}},i=function(af,ag,ad,ae){if(d.isFunction(Y)){var ab=ag,ac=0,aa;if(d.isNumber(ae)&&ae>0){ac=ae}aa={fileName:ab,percentage:ad,statusCode:ac,responseString:af.__HTTPPostResponseString};setTimeout(function(){Y(aa)},10)}};m.__OnCancel=false;m.__HTTPPostResponseString="";m.IfShowProgressBar=G;m.__IfShowCancelDialogWhenImageTransfer=G;if(d.isNumber(z.insertingIndex)&&z.insertingIndex>-1){m.__insertingIndex=z.insertingIndex;m.__IfAppendImage=false}if(d.isFunction(Y)){m.__OnHttpUploadStatus=Y}else{m.__OnHttpUploadStatus=false}if(s.useUploader){if(!Dynamsoft.FileUploader){var L=new d.Promise(function(ac,ab){d.Errors.Uploader_ModuleError(m);var aa={code:m.ErrorCode,message:m.ErrorString,response:""};A=true;T(ab,aa)});return L}}U=s.reTries;if(s.useUploader){var H=s.httpParams.url;if(!d.startsWith(H,"http://")&&!d.startsWith(H,"https://")){var Q=window.location.href,n=Q.lastIndexOf("/");Q=Q.substring(0,n+1);s.httpParams.url=Q+H}}else{d.each(s.httpParams.headers,function(aa,ab){m.SetHTTPHeader(ab,aa)});d.each(s.httpParams.formFields,function(aa,ab){m.SetHTTPFormField(ab,aa)})}if(s.httpParams.remoteName!==""){m.HttpFieldNameOfUploadedImage=s.httpParams.remoteName}var L=new d.Promise(function(ab,aa){if(s.useUploader){Dynamsoft.FileUploader.Init(0,function(ac){ab({uploadManager:ac})},function(ad,ac){m._errorCode=ad;m._errorString=ac;var ae={code:ad,message:ac,response:m.__HTTPPostResponseString};A=true;T(aa,ae)})}else{ab({})}});return L.then(function(aa){return new d.Promise(function(ad,ac){var ae=function(){var af=false;if(z.transferMode==Dynamsoft.DWT.EnumDWT_TransferMode.TWSX_FILE){af=(l==x.length)}else{af=(l==V.length)}if(af){d.closeProgress("Scan Upload");w=true;ad(t);W(m)}else{setTimeout(ae,100)}};if(u&&d.isFunction(u)){m.__OnPreAllTransfersAsync=function(af){u(af)}}m.RegisterEvent("OnPostTransferAsync",function(aA){var an,at=s.httpParams.url,ap=m.objImageIndexManager.convertGuidToServerId(aA.imageId),ar=s.singlePost,av=z.transferMode==Dynamsoft.DWT.EnumDWT_TransferMode.TWSX_FILE,ag=s.removeAfterOutput,af=0,al,aw;if(B){A=false;B=false}if(av){af=x.length;x.push(aA.path)}else{af=V.length;V.push(ap)}if(u&&d.isFunction(u)){var au={event:"postTransfer",bScanCompleted:false,result:{currentPageNum:af+1}};setTimeout(function(){u(au)},10)}if(w){return false}if(s.type=="http"){al=h.cformat(s.httpParams.fileName,af+1);aw=h.cformat(s.httpParams.remoteName,af+1);if(!ar&&s.type=="http"){var am,ax;if(d.isNumber(s.httpParams.maxSizeLimit)){m.__maxUploadImageSize=s.httpParams.maxSizeLimit}if(s.useUploader){if(G){Dynamsoft.FileUploader.nextLoopTime=300;d.showProgress(m,"Scan Upload",true)}am=function(aC,aB){m.__HTTPPostResponseString=aB;i(m,aC._fileName,100,200);m._OnPercentDone([0,100,"","http",aC._fileName]);if(G){d.closeProgress("Scan Upload")}if(!av&&s.removeAfterOutput){setTimeout(function(){var aD=m._ImgManager.convertServerIdToClientIndex(ap);if(aD>-1){m._removeImageById(ap,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};var ao,ak,ah=aa.uploadManager;ao=function(){if(G){var aD=0,aB;if(av){aD=x.length}else{aD=V.length}for(aB=0;aB<aD;aB++){d.closeProgress("Scan Upload")}}if(!av&&s.removeAfterOutput){setTimeout(function(){var aE=m._ImgManager.convertServerIdToClientIndex(ap);if(aE>-1){m._removeImageById(ap)}},100)}ah.CancelAllUpload();var aC={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aC);return false};ax=function(aF,aB,aE,aC){var aD=303;if(aB==f.TRANS_SERVICE_ERROR_404){aD=404}else{if(aB==f.TRANS_SERVICE_ERROR_500){aD=500}else{if(aB==f.TRANS_SERVICE_ERROR_503){aD=503}}}m._errorCode=aB;m._errorString=aE;m.__HTTPPostResponseString=aC;i(m,al,100,aD);ao()};m.__OnCancel=function(){ax(null,-1032,"User cancelled the operation.","")};ak=function(){m.__HTTPPostResponseString="";i(m,al,100,303);ao()};if(av){var aq=ah.CreateJob(),ai=aq.FormField;d.each(s.httpParams.headers,function(aB,aC){aq.HttpHeader[aC]=aB});d.each(s.httpParams.formFields,function(aB,aC){ai.Add(aC,aB)});aq.ServerUrl=at;aq.bDeleteFile=ag;aq.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){aq.maxSizeLimit=s.httpParams.maxSizeLimit}aq._fileName=al;aq.SourceValue.Add(aA.path,al,aw);aq.ImageType=z.fileXfer.fileFormat;aq.ThreadNum=o;aq.OnRunSuccess=am;aq.OnRunFailure=ax;if(G||d.isFunction(Y)){aq.OnUploadTransferPercentage=function(aB,aC){if(aC>0&&aC<=100){if(aC==100){aC=99}if(G){m._OnPercentDone([0,aC,"","http",aB._fileName])}if(d.isFunction(Y)){i(m,aB._fileName,aC,0)}}};d.cancelFrome=5;if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",al])}i(m,al,0,0)}ah.Run(aq)}else{an=s.format;if(an==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF){an=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF}else{if(an==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){an=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF}}if(G){d.cancelFrome=5;m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http",al])}m._asyncGenerateURLForUploadData([ap],an,J,function(aD){var aC=ah.CreateJob(),aB=aC.FormField;d.each(s.httpParams.headers,function(aE,aF){aC.HttpHeader[aF]=aE});d.each(s.httpParams.formFields,function(aE,aF){aB.Add(aF,aE)});aC.ServerUrl=at;aC.bDeleteFile=ag;aC.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){aC.maxSizeLimit=s.httpParams.maxSizeLimit}aC._fileName=al;aC.SourceValue.Add(aD,al,aw);aC.ImageType=an;aC.ThreadNum=o;aC.OnRunSuccess=am;aC.OnRunFailure=ax;if(G||d.isFunction(Y)){aC.OnUploadTransferPercentage=function(aE,aF){if(aF>0&&aF<=100){if(aF==100){aF=99}if(G){m._OnPercentDone([0,aF,"","http",aE._fileName])}if(d.isFunction(Y)){i(m,aE._fileName,aF,0)}}};d.cancelFrome=5;if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",al])}i(m,al,0,0)}ah.Run(aC)},ak)}}else{var aj={id:ap,st:-1,bCancel:false};y.push(aj);if(af==0){d.showProgress(m,"Scan Upload",true)}if(av){am=function(aB){aj.st=0;if(!av&&s.removeAfterOutput){setTimeout(function(){var aC=m._ImgManager.convertServerIdToClientIndex(ap);if(aC>-1){m._removeImageById(ap,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};ax=function(){if(!av&&s.removeAfterOutput){setTimeout(function(){var aC=m._ImgManager.convertServerIdToClientIndex(ap);if(aC>-1){m._removeImageById(ap)}},100)}var aB={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};d.closeProgress("Scan Upload");if(aj.st==2){return false}aj.st=1;d.each(y,function(aD,aC){if(aD.st==-1){aD.bCancel=true}});T(ac,aB);return false};m._innerUploadDirectly(at,aA.path,al,G,ag,U,false,aj,am,ax)}else{am=function(aC,aB){aj.st=0;if(!av&&s.removeAfterOutput){setTimeout(function(){var aD=m._ImgManager.convertServerIdToClientIndex(ap);if(aD>-1){m._removeImageById(ap,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};ax=function(aC){if(!av&&s.removeAfterOutput){setTimeout(function(){var aD=m._ImgManager.convertServerIdToClientIndex(ap);if(aD>-1){m._removeImageById(ap)}},100)}var aB={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};d.closeProgress("Scan Upload");if(aj.st==2){return false}aj.st=1;d.each(y,function(aE,aD){if(aE.st==-1){aE.bCancel=true}});T(ac,aB);return false};an=s.format;if(d.isUndefined(an)){var ay=m._ImgManager.convertServerIdToClientIndex(ap);d.Errors.InvalidImageType(m);ax([ay]);return false}if(an==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF){an=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF}else{if(an==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){an=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF}}var az={bOnlyUploadForm:false,method:"startScan",_this:m,url:at,serverIds:[ap],enumImageType:an,saveSetup:J,fileName:al,dataFormat:Dynamsoft.DWT.EnumDWT_UploadDataFormat.Binary,retry:U,bOnlyEmptyIsOK:false,objUploadFileStatus:aj,asyncSuccessFunc:am,asyncFailureFunc:ax};d._asyncUploadCmd(az)}}}else{if(!ar&&s.type=="ftp"){}}}});m.__OnPostAllTransfers=function(){var aq,aF=Dynamsoft.DWT.EnumDWT_UploadDataFormat.Binary,au=s.httpParams.url,at=s.singlePost,ax=z.transferMode==Dynamsoft.DWT.EnumDWT_TransferMode.TWSX_FILE,ah=s.removeAfterOutput;if(u&&d.isFunction(u)){var ag,aw;if(ax){ag=x.length}else{ag=V.length}aw={event:"postTransfer",bScanCompleted:true,result:{currentPageNum:ag}};setTimeout(function(){u(aw)},10)}if(ag==0){d.Errors.SourceHasNothingToCapture(m);setTimeout(function(){A=true;if(X&&d.isFunction(X)){X()}var aG={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aG)},1000);return}if(ag>0&&m.ErrorCode==-1029){m._errorCode=0}else{if(m.ErrorCode!=0){A=true;if(X&&d.isFunction(X)){X()}var av={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,av);return}}if(s.type=="http"){if(at&&s.type=="http"){var ao,aC,az,af=V,an=[];if(d.isNumber(s.httpParams.maxSizeLimit)){m.__maxUploadImageSize=s.httpParams.maxSizeLimit}if(s.useUploader){var ai=aa.uploadManager,ar=ai.CreateJob(),aj=ar.FormField;if(G){Dynamsoft.FileUploader.nextLoopTime=300;d.showProgress(m,"Scan Upload",true)}ao=function(aI,aG){var aH=aI._fileName;if(!aH){aH=""}m._bServerPercentDone=true;m.__HTTPPostResponseString=aG;i(m,aH,100,200);m._OnPercentDone([0,100,"","http"]);if(G){d.closeProgress("Scan Upload")}if(!ax&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(af,function(aJ){var aK=m._ImgManager.convertServerIdToClientIndex(aJ);if(aK>-1){m._removeImageById(aJ,function(){l++},function(){l++})}else{l++}});setTimeout(ae,100)},100)}else{w=true;ad(t);W(m)}return true};var ap,am;ap=function(){m._OnPercentDone([0,100,"","http"]);if(G){d.closeProgress("Scan Upload")}m._bServerPercentDone=true;var aG={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aG);if(!ax&&s.removeAfterOutput){setTimeout(function(){d.each(af,function(aH){var aI=m._ImgManager.convertServerIdToClientIndex(aH);if(aI>-1){m._removeImageById(aH)}})},100)}return false};aC=function(aK,aG,aJ,aH){var aI=303;if(aG==f.TRANS_SERVICE_ERROR_404){aI=404}else{if(aG==f.TRANS_SERVICE_ERROR_500){aI=500}else{if(aG==f.TRANS_SERVICE_ERROR_503){aI=503}}}m._errorCode=aG;m._errorString=aJ;m.__HTTPPostResponseString=aH;i(m,"",100,aI);ap()};m.__OnCancel=function(){aC(null,-1032,"User cancelled the operation.","")};am=function(){m.__HTTPPostResponseString="";i(m,"",100,303);ap()};if(ax){d.each(s.httpParams.headers,function(aG,aH){ar.HttpHeader[aH]=aG});d.each(s.httpParams.formFields,function(aG,aH){aj.Add(aH,aG)});ar.ServerUrl=au;ar.bDeleteFile=ah;ar.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){ar.maxSizeLimit=s.httpParams.maxSizeLimit}d.each(x,function(aJ,aH){var aG=h.cformat(s.httpParams.fileName,aH+1),aI=h.cformat(s.httpParams.remoteName,aH+1);ar.SourceValue.Add(aJ,aG,aI)});ar.ImageType=z.fileXfer.fileFormat;ar.ThreadNum=o;ar.OnRunSuccess=ao;ar.OnRunFailure=aC;if(G||d.isFunction(Y)){ar.OnUploadTransferPercentage=function(aG,aH){if(aH>0&&aH<=100){if(aH==100){aH=99}if(G){m._OnPercentDone([0,aH,"","http"])}if(d.isFunction(Y)){if(aH>99){aH=99}i(m,"",aH,0)}}};if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}i(m,"",0,0)}ai.Run(ar)}else{aq=s.format;if(aq==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||aq==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){if(aq==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF){aq=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF}else{if(aq==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){aq=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF}}if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"])}m._asyncGenerateURLForUploadData(af,aq,J,function(aI){d.each(s.httpParams.headers,function(aJ,aK){ar.HttpHeader[aK]=aJ});d.each(s.httpParams.formFields,function(aJ,aK){aj.Add(aK,aJ)});ar.ServerUrl=au;ar.bDeleteFile=ah;ar.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){ar.maxSizeLimit=s.httpParams.maxSizeLimit}var aG=h.cformat(s.httpParams.fileName,1),aH=h.cformat(s.httpParams.remoteName,1);ar._fileName=aG;ar.SourceValue.Add(aI,aG,aH);ar.ImageType=aq;ar.ThreadNum=o;ar.OnRunSuccess=ao;ar.OnRunFailure=aC;if(G||d.isFunction(Y)){ar.OnUploadTransferPercentage=function(aJ,aK){if(aK>0&&aK<=100){if(aK==100){aK=99}if(G){m._OnPercentDone([0,aK,"","http",aG])}if(d.isFunction(Y)){i(m,aG,aK,0)}}};d.cancelFrome=5;if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",aG])}}ai.Run(ar)},am)}else{var aB=af.length,aA=0,al=0,aE="";if(G){m._bServerPercentDone=false;m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"])}d.each(af,function(aJ,aH){var aG=h.cformat(s.httpParams.fileName,aH+1),aI=h.cformat(s.httpParams.remoteName,aH+1);m._asyncGenerateURLForUploadData([aJ],aq,J,function(aK){al=((aA+1)/aB)*100;aE=[(aA+1),"/",aB].join("");m._OnPercentDone([0,al,aE,"http"]);ar.SourceValue.Add(aK,aG,aI);aA++;if(aA>=aB){if(G){m._bServerPercentDone=true}d.each(s.httpParams.headers,function(aL,aM){ar.HttpHeader[aM]=aL});d.each(s.httpParams.formFields,function(aL,aM){aj.Add(aM,aL)});ar.ServerUrl=au;ar.bDeleteFile=ah;ar.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){ar.maxSizeLimit=s.httpParams.maxSizeLimit}ar.ImageType=aq;ar.ThreadNum=o;ar.OnRunSuccess=ao;ar.OnRunFailure=aC;if(G||d.isFunction(Y)){ar.OnUploadTransferPercentage=function(aL,aM){if(aM>0&&aM<=100){if(aM==100){aM=99}if(G){m._OnPercentDone([0,aM,"","http"])}if(d.isFunction(Y)){if(aM>99){aM=99}i(m,"",aM,0)}}};if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}}ai.Run(ar)}},am)})}}}else{if(ax){ao=function(aG){m._bServerPercentDone=true;if(!ax&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(af,function(aH){var aI=m._ImgManager.convertServerIdToClientIndex(aH);if(aI>-1){m._removeImageById(aH,function(){l++},function(){l++})}else{l++}});setTimeout(ae,100)},100)}else{w=true;ad(t);W(m)}return true};aC=function(aH){m._bServerPercentDone=true;var aG={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aG);if(!ax&&s.removeAfterOutput){setTimeout(function(){d.each(af,function(aI){var aJ=m._ImgManager.convertServerIdToClientIndex(aI);if(aJ>-1){m._removeImageById(aI)}})},100)}return false};m._innerUploadFilesDirectly(au,x,s.httpParams.fileName,G,ah,U,false,ao,aC)}else{ao=function(aH,aG){m._bServerPercentDone=true;if(!ax&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(af,function(aI){var aJ=m._ImgManager.convertServerIdToClientIndex(aI);if(aJ>-1){m._removeImageById(aI,function(){l++},function(){l++})}else{l++}});setTimeout(ae,100)},100)}else{w=true;ad(t);W(m)}return true};aC=function(aH){m._bServerPercentDone=true;var aG={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aG);if(!ax&&s.removeAfterOutput){setTimeout(function(){d.each(af,function(aI){var aJ=m._ImgManager.convertServerIdToClientIndex(aI);if(aJ>-1){m._removeImageById(aI)}})},100)}return false};aq=s.format;if(aq==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||aq==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){if(aq==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF){aq=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF}else{if(aq==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){aq=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF}}var ak=h.cformat(s.httpParams.fileName,1),ay=h.cformat(s.httpParams.remoteName,1);var aD={bOnlyUploadForm:false,method:"startScan",_this:m,url:au,serverIds:af,enumImageType:aq,saveSetup:J,fileName:ak,dataFormat:aF,retry:U,bOnlyEmptyIsOK:false,objUploadFileStatus:false,asyncSuccessFunc:ao,asyncFailureFunc:aC};d._asyncUploadCmd(aD)}else{m._asyncUploadFilesCmd(au,af,aq,s.httpParams.fileName,J,G,U,false,ao,aC)}}}}if(at&&s.type=="ftp"){}else{}}A=true;if(X&&d.isFunction(X)){X()}};var ab=function(){if(s.type!="http"){w=true;ad(t);W(m)}else{if(!s.singlePost){setTimeout(ae,100)}}};m._startScan(z,ab,function(ai){if(m.ErrorCode==-1029){var af=z.transferMode==Dynamsoft.DWT.EnumDWT_TransferMode.TWSX_FILE,ah=false;if(af){ah=x.length>0}else{ah=V.length>0}if(ah){m._errorCode=0;return ab()}}var ag={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,ag)})})})}});Dynamsoft.Ready(function(d,b){var a=Dynamsoft;if(!d.product.bHTML5Edition){return}var e=a.DWT,h=d,c=a.navInfo,f=h.each;d.env.WSVersion="12.0.0";d.env.WSSession=new Date().getTime();d.getHttpUrl=function(i){if(i.ssl){return["https://",i.host,":",i.port,"/"].join("")}else{return["http://",i.host,":",i.port,"/"].join("")}};d.getWSUrl=function(k,j,i){if(i){return["wss://",k,":",j].join("")}else{return["ws://",k,":",j].join("")}};d.getWS_bywsurl=function(o){var q=this,n,j=d.product.wsProtocol,k=window.MozWebSocket;if(q.detect.OnCreatWS){q.detect.OnCreatWS(o,j)}if(typeof k!="undefined"){if(j){n=new k(o,j)}else{n=new k(o)}}else{var i=WebSocket;if(c.bEdge){var m=window,l=parent;while(m!=l&&l.WebSocket){i=l.WebSocket;m=l.window;l=l.parent}}if(j){n=new i(o,j)}else{n=new i(o)}}Dynamsoft.DWT.globalWS.push(n);return n};d.getWS=function(k,j,i){var l=d.getWSUrl(k,j,i);return d.getWS_bywsurl(l)};d._init=function(r){var q=Dynamsoft.Lib,n=Dynamsoft.dcp,l=q.LS.item("DWT_port"),j=q.LS.item("DWT_ssl"),i;if(n.bEnhancedMode){return true}q.detect.urls.splice(0);q.detect.cUrlIndex=0;if(!r.bLocalService){return true}if(l!==b&&j!==b){i={port:l,ssl:(j=="true")}}var m=function(s){if(!i){return true}if(s){if(s.port!=i.port||s.ssl!=i.ssl){return true}}return false};var k,p;if(q.detect.detectType===1){if(i!==b&&i.ssl){q.detect.urls.push(i)}f(q.detect.ports,function(s){if(s.ssl){if(m(s)){q.detect.urls.push(s)}}})}else{if(q.detect.detectType===0){if(i!==b&&!i.ssl){q.detect.urls.push(i)}f(q.detect.ports,function(s){if(s.ssl===false){if(m(s)){q.detect.urls.push(s)}}})}else{if(i!==b){q.detect.urls.push(i)}f(q.detect.ports,function(s){if(m(s)){q.detect.urls.push(s)}})}}k=b};d._reconnect=function(){var i=e.ContainerMap;if(i){d.each(i,function(l,j){d._reconnectDWT(l)})}};d._reconnectDWT=function(n){var m,k,j;if(!n||n.__bConnecting||n.bReady){return}n.__bConnecting=true;m=n._host;j=n._ssl;k=n._port;var i;try{i=d.getWS(m,k,j);i.onopen=function(){if(i.readyState==1){n._objWS=i;i.clientId=n.clientId;if(!n.bReady){n._OnReady(true)}n.__bConnecting=false;d.detect.hideMask();d.detect.bOK=true}else{if(i.readyState==0){setTimeout(i.onopen,100)}else{n.__bConnecting=false}}};i.onclose=i.onerror=function(){i.onopen=null;n.__bConnecting=false;if(!n.bReady){n.__wsRetry++;if(n.__wsRetry<5){setTimeout(d._reconnect,500)}else{d.closeProgress("Reconnect");d.Errors.Server_Restarted(n)}}else{d.closeProgress("Reconnect");d.detect.hideMask()}Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(o,p){if(o==i){Dynamsoft.DWT.globalWS.splice(p,1);return false}})}}catch(l){d.log(l);if(i){Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(o,p){if(o==i){Dynamsoft.DWT.globalWS.splice(p,1);return false}})}n.__bConnecting=false;if(!n.bReady){n.__wsRetry++;if(n.__wsRetry<5){setTimeout(d._reconnect,500)}}else{d.detect.hideMask()}}};d._checkAndReconnect=function(j,i){Dynamsoft.DWT.CheckConnectToTheService(j,i,function(){setTimeout(d._reconnect,500)},function(){setTimeout(function(){d._checkAndReconnect(j,i)},500)})};d.connectToWS=function(k){if(k.bReady){return}if(k.__bConnecting){return}k.__bConnecting=true;var i;try{i=d.getWS(d.product.host,k._port,k._ssl);d.log(["connecting ... [port:",k._port,"]"].join(""));i.onopen=function(){k.__bConnecting=false;if(i.readyState==1){k._objWS=i;i.clientId=k.clientId;if(!k.bReady){k._OnReady(true)}}else{if(i.readyState==0){setTimeout(i.onopen,100)}else{}}};i.onclose=i.onerror=function(){i.onopen=null;k.__bConnecting=false;if(k.bReady){d.detect.hideMask()}Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(l,m){if(l==i){Dynamsoft.DWT.globalWS.splice(m,1);return false}})}}catch(j){d.log(j);if(i){Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(l,m){if(l==i){Dynamsoft.DWT.globalWS.splice(m,1);return false}})}k.__bConnecting=false;if(k.bReady){d.detect.hideMask()}}};d.startWS=function(){var l=d.detect,n,k=true;if(!d.product.bHTML5Edition){d.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!");return}if(e.UseLocalService===false||(d.isUndefined(e.UseLocalService)&&d.env.bMobile)){k=false}if(k&&l.tryTimes>5){d.log("Failed more than 5 times.");return}if(l.OnDetectNext){l.OnDetectNext()}if(l.tryTimes==0&&l.cUrlIndex>0&&l.arySTwains.length>0){if(!l.bNoControlEvent){l.hideMask();if(d.isFunction(l.onNoControl)){var m,i,j;m=l.arySTwains[0];i=m._width;j=m._height;if(i<=0){i=270}if(j<=0){j=350}l.onNoControl(m._containerElement,i,j,m)}l.bNoControlEvent=true}}if(k&&l.cUrlIndex>=l.urls.length){l.cUrlIndex=0;l.tryTimes++}if(l.arySTwains.length>0){n=l.arySTwains[0]}else{l.hideMask();l.bOK=true;return}if(n._bLocalService==false){n.bReady=true;n._OnReady()}if(n.bReady){l.arySTwains.splice(0,1);if(l.arySTwains.length<=0){l.hideMask();l.bOK=true}else{setTimeout(d.startWS,100)}return}if(!l.bNoControlEvent){l.showMask()}if(n.__bConnecting){return}n.__bConnecting=true;var p=l.urls[l.cUrlIndex];return g(d.product.host,p.port,p.ssl).then(function(o){n.__bConnecting=false;n._objWS=o.ws;o.ws.clientId=n.clientId;n._host=o.host;n._port=o.port;n._ssl=o.ssl;if(Dynamsoft.DWT.IfUseWSPool){d._addToWSPool(n)}if(!n.bReady){n.bReady=true;n._OnReady()}l.arySTwains.splice(0,1);if(l.arySTwains.length<=0){l.hideMask();l.bOK=true}else{setTimeout(d.startWS,100)}},function(o){d.log(o);n.__bConnecting=false;if(!n.bReady){l.cUrlIndex++;setTimeout(d.startWS,100)}else{l.hideMask()}})};d.startWSByIP=function(){var k=d.detect,l;if(!d.product.bHTML5Edition){d.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!");return}if(k.arySTwainsByIP.length>0){l=k.arySTwainsByIP[0]}else{k.hideMask();k.bOK=true;return}if(l._bLocalService==false){l.bReady=true}if(l.bReady){k.arySTwainsByIP.splice(0,1);if(k.arySTwainsByIP.length<=0){k.hideMask();k.bOK=true}else{setTimeout(d.startWSByIP,100)}if(l._bLocalService==false){l._OnReady()}return}if(!k.bNoControlEvent){k.showMask()}if(l.__bConnecting){return}if(l.__wsRetry>0){if(!k.bNoControlEvent){k.hideMask();if(d.isFunction(k.onNoControl)){var i,j;i=l._width;j=l._height;if(i<=0){i=270}if(j<=0){j=350}k.onNoControl(l._containerElement,i,j,l)}k.bNoControlEvent=true}}l.__bConnecting=true;return g(l._host,l._port,l._ssl).then(function(m){l.__bConnecting=false;l._objWS=m.ws;m.ws.clientId=l.clientId;if(Dynamsoft.DWT.IfUseWSPool){d._addToWSPool(l)}if(!l.bReady){l.bReady=true;l._OnReady()}k.arySTwainsByIP.splice(0,1);if(k.arySTwainsByIP.length<=0){k.hideMask();k.bOK=true}else{setTimeout(d.startWSByIP,100)}},function(m){d.log(m);l.__bConnecting=false;if(!l.bReady){l.__wsRetry++;setTimeout(d.startWSByIP,100)}else{k.hideMask()}})};d.html5.closeAll=function(){var r,q,k,l,m,p,n,s,t=false;d.dlgProgress=false;d.detect.bOK=false;d.detect.bFirst=true;for(r=d.detect.arySTwains.length-1;r>=0;r--){k=d.detect.arySTwains[r];if(!k){continue}p=k._id;if(k._containerElement){m=k._containerElement;l=k._containerElement.id}s=false;for(q=0;q<Dynamsoft.DWT.Containers.length;q++){n=Dynamsoft.DWT.Containers[q];if(!n){continue}if((p==n.WebTwainId)||(l&&l==n.ContainerId)||(m==n.Container)){s=true;break}}if(s){k.__unload();d.detect.arySTwains.splice(r,1)}if(k._isMobileMode()){t=true}}};d.bio=false;d.progressMessage="";d.dialogShowStatus=false;d.needShowTwiceShowDialog=false;d.dlgProgress=false;d.cancelFrome=0;d.dlgRef=0;d.initProgress=function(){var l,k,n;if(!d.dlgProgress){n=[];n.push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">');n.push('<h3 class="dynamsoft-finalMessage"> </h3>');n.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>');if(c.bIE){n.push('<div class="dynamsoft-progressBar" value="" max="100"></div>')}else{n.push('<progress class="dynamsoft-progressBar" value="" max="100"></progress>')}n.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>');n.push("</div></dialog>");k=d.one(".dynamsoft-dwt-dialogProgress");if(k&&k.getEL()){k.remove()}var j=d.parseHTML(n.join(""));if(j&&j.length>0){document.body.appendChild(j[0])}if(c.bIE){var m=d.one(".dynamsoft-progressBar"),i=m&&m.getEL();if(i){i.objProgressBar=new d.ProgressBar(i,{width:280,height:20})}}k=d.one(".dynamsoft-dwt-dialogProgress");if(k&&k.getEL()){d.dlgProgress=k[0];d.dialog.setup(d.dlgProgress)}d.dlgRef=0;d.dialogShowStatus=false;d.cancelFrome=0}};d.setBtnCancelVisibleForProgress=function(i){if(d.dlgRef<=0||(d.dialogShowStatus==false)){return}var k=d.one(".dynamsoft-btnCancel"),j=k&&k.getEL();if(j){if(i){j.style.display=""}else{j.style.display="none"}}};d.showProgressMsg=function(i,j,o){if(d.dlgRef<=0||(d.dialogShowStatus==false)){return}var q=d.one(".dynamsoft-progressBar"),n=d.one(".dynamsoft-status"),k=d.one(".dynamsoft-finalMessage"),r=d.one(".dynamsoft-desc"),p=i;if(i<0){p=0}else{if(i>100){p=100}}p=Math.floor(p);if(k&&k.getEL()){k.html(j)}if(r&&r.getEL()){r.html(o)}if(p||p===0){if(n&&n.getEL()){n.html(p+"%")}if(q&&q.getEL()){if(c.bIE){if(q[0].objProgressBar){q[0].objProgressBar.setValue(p)}else{q[0].value=p}}else{if(c.bEdge){q[0].style.display="";q[0].value=p}else{q[0].value=p}}}}if(p&&(p>=100||d.dlgRef<=0)){setTimeout(function(){if(q&&q.getEL()){if(c.bIE){if(q[0].objProgressBar){q[0].objProgressBar.setValue(0)}else{q[0].value=0}}else{if(c.bEdge){q[0].style.display="none";q[0].value=0}else{q[0].value=0}}}},300);if(d.dlgRef<=0){var l="OnPercentDone";d.closeProgress(l)}}};d.showProgress=function(r,n,k){var q=r;d.log("showProgress:"+n+",bCancel:"+k);if((d.cancelFrome==0&&q.__IfShowProgressBar==true)||(d.cancelFrome!=0&&q.__IfShowCancelDialogWhenImageTransfer==true)){var p=d.one(".dynamsoft-btnCancel"),i=p&&p.getEL();if(i){if(k==false){i.style.display="none"}else{i.style.display=""}}if(d.dialogShowStatus==false){if(d.dlgProgress){d.dlgProgress.showModal()}d.dialogShowStatus=true;var j=d.one(".dynamsoft-finalMessage");var s=d.one(".dynamsoft-progressBar"),l=s&&s.getEL();var o=d.one(".dynamsoft-status");if(j&&j.getEL()){j.html("")}if(o&&o.getEL()){o.html("0%")}if(l){if(c.bIE){if(l.objProgressBar){l.objProgressBar.setValue(0)}else{l.value=0}}else{l.value=0}}}d.dlgRef++}};d.closeProgress=function(i){d.log("closeProgress:"+i);var j=d.one(".dynamsoft-btnCancel");d.dlgRef--;if(d.dlgRef<=0){d.dlgRef=0}if(d.needShowTwiceShowDialog==true&&d.cancelFrome==1){if(j&&j.getEL()){j[0].innerHTML="Cancel"}}else{if(j&&j.getEL()){j[0].innerHTML="Cancel"}if(d.dlgRef==0){if(d.dialogShowStatus==true){if(d.dlgProgress){d.dlgProgress.close()}d.dialogShowStatus=false}d.needShowTwiceShowDialog=false;d.cancelFrome=0}}};d.html5.CreateDWTObject=function(j){var m,k,l;for(k=0;k<d.detect.arySTwains.length;k++){l=d.detect.arySTwains[k];if(l._id==j.id){return false}}m=new d.html5.STwain(j);if(j.customIP){d.detect.arySTwainsByIP.push(m);return m}d.detect.arySTwains.push(m);if(d.detect.bFirst){d._init(j)}d.detect.bFirst=false;return m};e.RemoveAllAuthorizations=function(){var j=d.LS.item("DWT_port"),m=d.LS.item("DWT_ssl"),i="http://",l=d.product.host,k;if(m=="true"){i="https://"}k=[i,l,":",j,"/dwt/",d.product.getDWTPrefix(),d.product.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",d.now()].join("");d.ajax({method:"GET",url:k,async:true});return true};function g(l,j,k){var i={host:l,port:j,ssl:k,ws:null};return new Promise(function(p,o){var n=Dynamsoft.DWT;if(!d.product.bHTML5Edition){o("This browser is currently not supported. Please try Chrome or Firefox!");return}try{i.ws=d.getWS(i.host,i.port,i.ssl);d.log(["connecting ... [host ssl port:",i.host,i.ssl,i.port,"]"].join(" "));i.ws.onopen=function(){if(i.ws.readyState==1){p(i)}else{if(i.ws.readyState==0){setTimeout(i.ws.onopen,100)}else{}}};i.ws.onclose=i.ws.onerror=function(){Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(q,r){if(q==i.ws){Dynamsoft.DWT.globalWS.splice(r,1);return false}});i.ws.onopen=null;i.ws.onclose=null;i.ws.onerror=null;i.ws=null;o("WebSocket closed.")}}catch(m){d.log(m);if(i.ws){Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(q,r){if(q==i.ws){Dynamsoft.DWT.globalWS.splice(r,1);return false}});i.ws.onopen=null;i.ws.onclose=null;i.ws.onerror=null;i.ws=null}o(m.message)}})}d._reconnectWSPool=function(){d.each(d.detect.aryWSPool,function(i){if(i&&!i.bOK&&!i.__bConnecting){d._reconnectWSElement(i)}})};d._reconnectWSElement=function(i){var m,k;if(!i||i.bOK||i.__bConnecting){return}m=i.wsurl;i.__bConnecting=true;i.__wsRetry=0;var j=function(){if(k){Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(o,p){if(o==k){Dynamsoft.DWT.globalWS.splice(p,1);return false}});k.onopen=null}i.__wsRetry++;if(i.__wsRetry<5){setTimeout(d._reconnectWSPool,500)}else{i.__bConnecting=false;d.closeProgress("Reconnect");d.each(i.list,function(o,p){d.Errors.Server_Restarted(o)})}};try{k=d.getWS_bywsurl(m);k.onopen=function(){if(k.readyState==1){k.onopen=null;d.each(i.list,function(o,p){o._objWS=k;k.clientId=o.clientId;if(!o.bReady){o._OnReady(true)}});i.__bConnecting=false;i.bOK=true;d.detect.hideMask()}else{if(k.readyState==0){setTimeout(k.onopen,300)}else{i.__bConnecting=false}}};k.onclose=j}catch(l){d.log(l);if(k){Dynamsoft.Lib.each(Dynamsoft.DWT.globalWS,function(o,p){if(o==k){Dynamsoft.DWT.globalWS.splice(p,1);return false}})}setTimeout(j,500)}};d._deliverMsg=function(k,i){var l=i.id,j=[];if(i.indexOf('"method" : "EnableBuffer"')>=0||i.indexOf('"method" : "GetBuffer"')>=0){Dynamsoft.DWT.lwsproc(i);return}d.each(d.detect.aryWSPool,function(m,o){if(m.wsurl==k){j=m.list;return !1}});d.each(j,function(m,o){if(m.clientId==l){if(m._OnRecieveMsg){m._OnRecieveMsg(i)}return !1}})};d._addToWSPool=function(j){var i,k=j._objWS.url;d.each(d.detect.aryWSPool,function(l,m){if(l.wsurl==k){i=l;return !1}});if(i&&d.isArray(i.list)){i.list.push(j)}else{d.detect.aryWSPool.push({wsurl:k,list:[j]})}};d._removeFromWSPool=function(k){var j,l,i;if(k&&k._objWS){l=k._objWS.url}d.each(d.detect.aryWSPool,function(m,o){if(m.wsurl==l){j=m;return !1}});if(j&&d.isArray(j.list)){i=j.list.indexOf(k);if(i>-1){j.list.splice(i,1)}if(j.list.length==0){j.ws.close();j.wsurl="";delete j.ws;i=d.detect.aryWSPool.indexOf(j);if(i>-1){d.detect.aryWSPool.splice(i,1)}}}}});Dynamsoft.Ready(function(a,k){var d=Dynamsoft;if(!a.product.bHTML5Edition){return}var m=document,p=a.DOM,h=window,n=Dynamsoft.DWT,j=n.CustomizableDisplayInfo.buttons,b=n.CustomizableDisplayInfo.dialogText,c=a.html5.Funs2,g="transparent",e,l,o={isFunction:function(q){return q&&typeof(q)==="function"},addClass:function(r,q){var s=a.one(r);if(s&&s.length>0){s.addClass(q)}},removeClass:function(r,q){var s=a.one(r);if(s&&s.length>0){s.removeClass(q)}},output:function(r,q){if(Dynamsoft.DWT.Debug){a.log(q)}},getTop:function(q){var r=q.offsetTop;if(q.offsetParent!=null){r+=o.getTop(q.offsetParent)}return r},getLeft:function(q){var r=q.offsetLeft;if(q.offsetParent!=null){r+=o.getLeft(q.offsetParent)}return r}};a._safePromptCustomMsg(function(){j=n.CustomizableDisplayInfo.buttons;b=n.CustomizableDisplayInfo.dialogText;e={toolbars:{bottomMenu:false,header:false,topMenu:true,asideMenu:false},groups:{viewMenu:{visibility:false},myGroup:{visibility:true,location:"topMenu",sequence:1}},buttonResize:{ifResize:true,maxSize:22,minSize:16},buttons:{loadImage:{visibility:false},readDirection:{visibility:false},panelChange:{visibility:false},previousImage:{visibility:true,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-preImage",sequence:1,onButtonClick:"OnPreviousImage"},nextImage:{visibility:true,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-nextImage",sequence:2,onButtonClick:"OnNextImage"},blank1:{visibility:true,location:"myGroup",sequence:3},acquire:{visibility:j.visibility.scan==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-acquire",sequence:4,onButtonClick:"OnAcquire"},loadImages:{visibility:j.visibility.load==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:5,onButtonClick:"OnLoadImage"},print:{visibility:j.visibility.print==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-printImage",sequence:6,onButtonClick:"OnPrint"},blank2:{visibility:(j.visibility.scan||j.visibility.load||j.visibility.print)?true:false,location:"myGroup",sequence:7},removeAll:{visibility:j.visibility.removeall==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:8,onButtonClick:"OnRemoveAll"},remove:{visibility:j.visibility.removeselected==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:9,onButtonClick:"OnRemove"},blank3:{visibility:(j.visibility.removeall||j.visibility.removeselected)?true:false,location:"myGroup",sequence:10},rotateLeft:{visibility:j.visibility.rotateleft==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:11,onButtonClick:"OnRotateLeft"},rotate:{visibility:j.visibility.rotate==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotate",sequence:12,onButtonClick:"OnRotate"},rotateRight:{visibility:j.visibility.rotateright==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:13,onButtonClick:"OnRotateRight"},deskew:{visibility:j.visibility.deskew==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-deskew",sequence:14,onButtonClick:"OnDeskew"},blank4:{visibility:(j.visibility.rotateleft||j.visibility.rotate||j.visibility.rotateright||j.visibility.deskew)?true:false,location:"myGroup",sequence:15},crop:{visibility:j.visibility.crop==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:16,onButtonClick:"OnCrop"},cut:{visibility:j.visibility.cut==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:17,onButtonClick:"OnErase"},changeImageSize:{visibility:j.visibility.changeimagesize==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-changeImageSize",sequence:18,onButtonClick:"OnChangeImageSize"},flip:{visibility:j.visibility.flip==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:19,onButtonClick:"OnFlip"},mirror:{visibility:j.visibility.mirror==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:20,onButtonClick:"OnMirror"},blank5:{visibility:(j.visibility.crop||j.visibility.cut||j.visibility.changeimagesize||j.visibility.flip||j.visibility.mirror)?true:false,location:"myGroup",sequence:21},zoomin:{visibility:j.visibility.zoomin==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomin",sequence:22,onButtonClick:"OnZoomin"},originalsize:{visibility:j.visibility.originalsize==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-originalsize",sequence:23,onButtonClick:"OnOriginalsize"},zoomout:{visibility:j.visibility.zoomout==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomout",sequence:24,onButtonClick:"OnZoomout"},blank6:{visibility:(j.visibility.zoomin||j.visibility.originalsize||j.visibility.zoomout||j.visibility.stretch)?true:false,location:"myGroup",sequence:26},fitPage:{visibility:j.visibility.fit==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fullWebType",sequence:27,onButtonClick:"OnFitPage"},fitWidth:{visibility:j.visibility.fitw==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitWidthType",sequence:28,onButtonClick:"OnFitWidth"},fitHeight:{visibility:j.visibility.fith==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitHeightType",sequence:29,onButtonClick:"OnFitHeight"},blank7:{visibility:(j.visibility.fit||j.visibility.fitw||j.visibility.fith)?true:false,location:"myGroup",sequence:30},hand:{visibility:j.visibility.hand==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:31,onButtonClick:"OnHand"},select:{visibility:j.visibility.rectselect==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:32,onButtonClick:"OnSelect"},clicktozoomin:{visibility:j.visibility.zoom==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-clicktozoomin",sequence:33,onButtonClick:"OnClicktozoomin"},blank8:{visibility:(j.visibility.hand||j.visibility.rectselect||j.visibility.zoom)?true:false,location:"myGroup",sequence:34},restore:{visibility:j.visibility.restore==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:35,onButtonClick:"OnRestore"},save:{visibility:j.visibility.save==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:36,onButtonClick:"OnSave"},close:{visibility:j.visibility.close==true?true:false,location:"topMenuRight",iconClass:"d-icon-font ds-dwt-ui-icon-close",sequence:1,onButtonClick:"OnClose"}},thumbnail:{visibility:false,showThumbnailControl:false,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)"},tipsConfig:{previousImage:j.titles.previous,nextImage:j.titles.next,acquire:j.titles.scan,loadImages:j.titles.load,print:j.titles.print,removeAll:j.titles.removeall,remove:j.titles.removeselected,rotateLeft:j.titles.rotateleft,rotate:j.titles.rotate,rotateRight:j.titles.rotateright,deskew:j.titles.deskew,crop:j.titles.crop,cut:j.titles.cut,changeImageSize:j.titles.changeimagesize,flip:j.titles.flip,mirror:j.titles.mirror,zoomin:j.titles.zoomin,originalsize:j.titles.originalsize,zoomout:j.titles.zoomout,stretch:j.titles.stretch,fitPage:j.titles.fit,fitWidth:j.titles.fitw,fitHeight:j.titles.fith,hand:j.titles.hand,select:j.titles.rectselect,clicktozoomin:j.titles.zoom,restore:j.titles.restore,save:j.titles.save,close:j.titles.close},canvasConfig:{selectedPageBackground:g,selectedPageBorder:"",hoverPageBackground:g,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""};l={toolbars:{header:true,bottomMenu:true,topMenu:true,asideMenu:false},groups:{viewMenu:{visibility:false},global:{visibility:false},viewChange:{visibility:false},viewerCorner:{visibility:false},pager:{visibility:false},myGroup:{visibility:true,location:"topMenu",sequence:1},myGroup2:{visibility:true,location:"bottomMenu",sequence:1},myGroup3:{visibility:true,location:"header",sequence:1},myGroup4:{visibility:true,location:"bottomMenu",sequence:2}},buttonResize:{ifResize:true,maxSize:32,minSize:26},buttons:{loadImage:{visibility:false},readDirection:{visibility:false},panelChange:{visibility:false},print:{visibility:false},loadImages:{visibility:j.visibility.load==true?true:false,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:1,onButtonClick:"OnLoadImage"},close:{visibility:j.visibility.close==true?true:false,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-close ds-dwt-ui-icon-close-right",sequence:2,onButtonClick:"OnClose"},rotateLeft:{visibility:j.visibility.rotateleft==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:1,onButtonClick:"OnRotateLeft"},rotateRight:{visibility:j.visibility.rotateright==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:2,onButtonClick:"OnRotateRight"},flip:{visibility:j.visibility.flip==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:3,onButtonClick:"OnFlip"},mirror:{visibility:j.visibility.mirror==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:4,onButtonClick:"OnMirror"},crop:{visibility:j.visibility.crop==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:5,onButtonClick:"OnCrop"},cut:{visibility:j.visibility.cut==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:6,onButtonClick:"OnErase"},hand:{visibility:j.visibility.hand==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:7,onButtonClick:"OnHand"},select:{visibility:j.visibility.rectselect==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:8,onButtonClick:"OnSelect"},firstPage:{visibility:true,location:"myGroup2",iconClass:"ds-dvs-ui-pageStart",sequence:1,onButtonClick:"OnFirstImage"},previousPage:{visibility:true,location:"myGroup2",iconClass:"ds-dvs-ui-pagePre",sequence:2,onButtonClick:"OnPreviousImage"},pagination:{visibility:true,location:"myGroup2",sequence:3},nextPage:{visibility:true,location:"myGroup2",iconClass:"ds-dvs-ui-pageNext",sequence:4,onButtonClick:"OnNextImage"},lastPage:{visibility:true,location:"myGroup2",iconClass:"ds-dvs-ui-pageEnd",sequence:5,onButtonClick:"OnLastImage"},removeAll:{visibility:j.visibility.removeall==true?true:false,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:7,onButtonClick:"OnRemoveAll"},remove:{visibility:j.visibility.removeselected==true?true:false,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:8,onButtonClick:"OnRemove"},restore:{visibility:j.visibility.restore==true?true:false,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:10,onButtonClick:"OnRestore"},save:{visibility:j.visibility.save==true?true:false,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:11,onButtonClick:"OnSave"}},thumbnail:{visibility:false,showThumbnailControl:false,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:j.titles.previous,nextImage:j.titles.next,acquire:j.titles.scan,loadImages:j.titles.load,print:j.titles.print,removeAll:j.titles.removeall,remove:j.titles.removeselected,rotateLeft:j.titles.rotateleft,rotate:j.titles.rotate,rotateRight:j.titles.rotateright,deskew:j.titles.deskew,crop:j.titles.crop,cut:j.titles.cut,changeImageSize:j.titles.changeimagesize,flip:j.titles.flip,mirror:j.titles.mirror,zoomin:j.titles.zoomin,originalsize:j.titles.originalsize,zoomout:j.titles.zoomout,stretch:j.titles.stretch,fitPage:j.titles.fit,fitWidth:j.titles.fitw,fitHeight:j.titles.fith,hand:j.titles.hand,select:j.titles.rectselect,clicktozoomin:j.titles.zoom,restore:j.titles.restore,save:j.titles.save,close:j.titles.close},canvasConfig:{selectedPageBackground:g,selectedPageBorder:"",hoverPageBackground:g,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""}});function i(r,q){var s=this;s._imageEditorInner=new a.UI.ImageEditorInner(r,q);s.myImageEditor=s._imageEditorInner.myImageEditor}i.prototype.show=function(){var q=this;return q._imageEditorInner.show()};i.prototype.hide=function(){var q=this;return q._imageEditorInner.hide()};i.prototype.dispose=function(){var q=this;return q._imageEditorInner.OnCloseInner(true)};a.UI=a.UI||{};a.UI.ImageEditor=i;function f(r,q){var u=this;u._webViewer=r;u.mydvs=r.mydvs;u._stwain=r._stwain;u.bShowImageEditForFullScreen=false;u.bCouldBeTimeConsuming=false;u.bShowImageEdit=false;u.promptToSaveChange=true;var t=e;u.bMobile=false;var s=false;if(!u._stwain._isPC()){if(!u.bPadViewer){t=l;s=true}u.bMobile=true}t=u.updateWebviewerConfig(t,q,s);u.myImageEditor=u.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:t,scrollerConfig:{}},u._webViewer.myViewer.uid);if(u._webViewer.mydvs.Error.errorCode!=0){a.Errors.WebviewerError(u._webViewer._stwain,u._webViewer.mydvs.Error.errorMessage,u._webViewer.mydvs.Error.errorCode)}u.bDispose=false;u._BindImageEditorEvents();u._bindView()}f.prototype.updateWebviewerConfig=function(r,q,s){var u=this,t=r;if(q){u.editorSettings=q;if(!a.isUndefined(q.buttons)){if(!a.isUndefined(q.buttons.titles)){if(!a.isUndefined(q.buttons.titles.previous)){t.tipsConfig.previousImage=q.buttons.titles.previous}if(!a.isUndefined(q.buttons.titles.next)){t.tipsConfig.nextImage=q.buttons.titles.next}if(!a.isUndefined(q.buttons.titles.print)){t.tipsConfig.print=q.buttons.titles.print}if(!a.isUndefined(q.buttons.titles.scan)){t.tipsConfig.acquire=q.buttons.titles.scan}if(!a.isUndefined(q.buttons.titles.load)){t.tipsConfig.loadImages=q.buttons.titles.load}if(!a.isUndefined(q.buttons.titles.rotateleft)){t.tipsConfig.rotateLeft=q.buttons.titles.rotateleft}if(!a.isUndefined(q.buttons.titles.rotate)){t.tipsConfig.rotate=q.buttons.titles.rotate}if(!a.isUndefined(q.buttons.titles.rotateright)){t.tipsConfig.rotateRight=q.buttons.titles.rotateright}if(!a.isUndefined(q.buttons.titles.deskew)){t.tipsConfig.deskew=q.buttons.titles.deskew}if(!a.isUndefined(q.buttons.titles.crop)){t.tipsConfig.crop=q.buttons.titles.crop}if(!a.isUndefined(q.buttons.titles.cut)){t.tipsConfig.cut=q.buttons.titles.cut}if(!a.isUndefined(q.buttons.titles.changeimagesize)){t.tipsConfig.changeImageSize=q.buttons.titles.changeimagesize}if(!a.isUndefined(q.buttons.titles.flip)){t.tipsConfig.flip=q.buttons.titles.flip}if(!a.isUndefined(q.buttons.titles.mirror)){t.tipsConfig.mirror=q.buttons.titles.mirror}if(!a.isUndefined(q.buttons.titles.zoomin)){t.tipsConfig.zoomin=q.buttons.titles.zoomin}if(!a.isUndefined(q.buttons.titles.originalsize)){t.tipsConfig.originalsize=q.buttons.titles.originalsize}if(!a.isUndefined(q.buttons.titles.zoomout)){t.tipsConfig.zoomout=q.buttons.titles.zoomout}if(!a.isUndefined(q.buttons.titles.stretch)){t.tipsConfig.stretch=q.buttons.titles.stretch}if(!a.isUndefined(q.buttons.titles.fit)){t.tipsConfig.fitPage=q.buttons.titles.fit}if(!a.isUndefined(q.buttons.titles.fitw)){t.tipsConfig.fitWidth=q.buttons.titles.fitw}if(!a.isUndefined(q.buttons.titles.fith)){t.tipsConfig.fitHeight=q.buttons.titles.fith}if(!a.isUndefined(q.buttons.titles.hand)){t.tipsConfig.hand=q.buttons.titles.hand}if(!a.isUndefined(q.buttons.titles.rectselect)){t.tipsConfig.select=q.buttons.titles.rectselect}if(!a.isUndefined(q.buttons.titles.zoom)){t.tipsConfig.clicktozoomin=q.buttons.titles.zoom}if(!a.isUndefined(q.buttons.titles.restore)){t.tipsConfig.restore=q.buttons.titles.restore}if(!a.isUndefined(q.buttons.titles.save)){t.tipsConfig.save=q.buttons.titles.save}if(!a.isUndefined(q.buttons.titles.close)){t.tipsConfig.close=q.buttons.titles.close}if(!a.isUndefined(q.buttons.titles.removeall)){t.tipsConfig.removeAll=q.buttons.titles.removeall}if(!a.isUndefined(q.buttons.titles.removeselected)){t.tipsConfig.remove=q.buttons.titles.removeselected}}if(!a.isUndefined(q.buttons.visibility)){if(s){if(!a.isUndefined(q.buttons.visibility.load)){t.buttons.loadImages.visibility=q.buttons.visibility.load==true?true:false}else{t.buttons.loadImages.visibility=true}if(!a.isUndefined(q.buttons.visibility.close)){t.buttons.close.visibility=q.buttons.visibility.close==true?true:false}else{t.buttons.close.visibility=true}if(!a.isUndefined(q.buttons.visibility.rotateleft)){t.buttons.rotateLeft.visibility=q.buttons.visibility.rotateleft==true?true:false}else{t.buttons.rotateLeft.visibility=true}if(!a.isUndefined(q.buttons.visibility.rotateright)){t.buttons.rotateRight.visibility=q.buttons.visibility.rotateright==true?true:false}else{t.buttons.rotateRight.visibility=true}if(!a.isUndefined(q.buttons.visibility.flip)){t.buttons.flip.visibility=q.buttons.visibility.flip==true?true:false}else{t.buttons.flip.visibility=true}if(!a.isUndefined(q.buttons.visibility.mirror)){t.buttons.mirror.visibility=q.buttons.visibility.mirror==true?true:false}else{t.buttons.mirror.visibility=true}if(!a.isUndefined(q.buttons.visibility.crop)){t.buttons.crop.visibility=q.buttons.visibility.crop==true?true:false}else{t.buttons.crop.visibility=true}if(!a.isUndefined(q.buttons.visibility.cut)){t.buttons.cut.visibility=q.buttons.visibility.cut==true?true:false}else{t.buttons.cut.visibility=true}if(!a.isUndefined(q.buttons.visibility.hand)){t.buttons.hand.visibility=q.buttons.visibility.hand==true?true:false}else{t.buttons.hand.visibility=true}if(!a.isUndefined(q.buttons.visibility.rectselect)){t.buttons.select.visibility=q.buttons.visibility.rectselect==true?true:false}else{t.buttons.select.visibility=true}if(!a.isUndefined(q.buttons.visibility.removeall)){t.buttons.removeAll.visibility=q.buttons.visibility.removeall==true?true:false}else{t.buttons.removeAll.visibility=true}if(!a.isUndefined(q.buttons.visibility.removeselected)){t.buttons.remove.visibility=q.buttons.visibility.removeselected==true?true:false}else{t.buttons.remove.visibility=true}if(!a.isUndefined(q.buttons.visibility.restore)){t.buttons.restore.visibility=q.buttons.visibility.restore==true?true:false}else{t.buttons.restore.visibility=true}if(!a.isUndefined(q.buttons.visibility.save)){t.buttons.save.visibility=q.buttons.visibility.save==true?true:false}else{t.buttons.save.visibility=true}}else{if(!a.isUndefined(q.buttons.visibility.scan)){t.buttons.acquire.visibility=q.buttons.visibility.scan==true?true:false}else{t.buttons.acquire.visibility=true}if(!a.isUndefined(q.buttons.visibility.load)){t.buttons.loadImages.visibility=q.buttons.visibility.load==true?true:false}else{t.buttons.loadImages.visibility=true}if(!a.isUndefined(q.buttons.visibility.print)){t.buttons.print.visibility=q.buttons.visibility.print==true?true:false}else{t.buttons.print.visibility=true}t.buttons.blank2.visibility=(t.buttons.acquire.visibility||t.buttons.loadImages.visibility||t.buttons.print.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.removeall)){t.buttons.removeAll.visibility=q.buttons.visibility.removeall==true?true:false}else{t.buttons.removeAll.visibility=true}if(!a.isUndefined(q.buttons.visibility.removeselected)){t.buttons.remove.visibility=q.buttons.visibility.removeselected==true?true:false}else{t.buttons.remove.visibility=true}t.buttons.blank3.visibility=(t.buttons.removeAll.visibility||t.buttons.remove.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.rotateleft)){t.buttons.rotateLeft.visibility=q.buttons.visibility.rotateleft==true?true:false}else{t.buttons.rotateLeft.visibility=true}if(!a.isUndefined(q.buttons.visibility.rotate)){t.buttons.rotate.visibility=q.buttons.visibility.rotate==true?true:false}else{t.buttons.rotate.visibility=true}if(!a.isUndefined(q.buttons.visibility.rotateright)){t.buttons.rotateRight.visibility=q.buttons.visibility.rotateright==true?true:false}else{t.buttons.rotateRight.visibility=true}if(!a.isUndefined(q.buttons.visibility.deskew)){t.buttons.deskew.visibility=q.buttons.visibility.deskew==true?true:false}else{t.buttons.deskew.visibility=true}t.buttons.blank4.visibility=(t.buttons.rotateLeft.visibility||t.buttons.rotate.visibility||t.buttons.rotateRight.visibility||t.buttons.deskew.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.crop)){t.buttons.crop.visibility=q.buttons.visibility.crop==true?true:false}else{t.buttons.crop.visibility=true}if(!a.isUndefined(q.buttons.visibility.cut)){t.buttons.cut.visibility=q.buttons.visibility.cut==true?true:false}else{t.buttons.cut.visibility=true}if(!a.isUndefined(q.buttons.visibility.changeimagesize)){t.buttons.changeImageSize.visibility=q.buttons.visibility.changeimagesize==true?true:false}else{t.buttons.changeImageSize.visibility=true}if(!a.isUndefined(q.buttons.visibility.flip)){t.buttons.flip.visibility=q.buttons.visibility.flip==true?true:false}else{t.buttons.flip.visibility=true}if(!a.isUndefined(q.buttons.visibility.mirror)){t.buttons.mirror.visibility=q.buttons.visibility.mirror==true?true:false}else{t.buttons.mirror.visibility=true}t.buttons.blank5.visibility=(t.buttons.crop.visibility||t.buttons.cut.visibility||t.buttons.changeImageSize.visibility||t.buttons.flip.visibility||t.buttons.mirror.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.zoomin)){t.buttons.zoomin.visibility=q.buttons.visibility.zoomin==true?true:false}else{t.buttons.zoomin.visibility=true}if(!a.isUndefined(q.buttons.visibility.originalsize)){t.buttons.originalsize.visibility=q.buttons.visibility.originalsize==true?true:false}else{t.buttons.originalsize.visibility=true}if(!a.isUndefined(q.buttons.visibility.zoomout)){t.buttons.zoomout.visibility=q.buttons.visibility.zoomout==true?true:false}else{t.buttons.zoomout.visibility=true}t.buttons.blank6.visibility=(t.buttons.zoomin.visibility||t.buttons.originalsize.visibility||t.buttons.zoomout.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.fit)){t.buttons.fitPage.visibility=q.buttons.visibility.fit==true?true:false}else{t.buttons.fitPage.visibility=true}if(!a.isUndefined(q.buttons.visibility.fitw)){t.buttons.fitWidth.visibility=q.buttons.visibility.fitw==true?true:false}else{t.buttons.fitWidth.visibility=true}if(!a.isUndefined(q.buttons.visibility.fith)){t.buttons.fitHeight.visibility=q.buttons.visibility.fith==true?true:false}else{t.buttons.fitHeight.visibility=true}t.buttons.blank7.visibility=(t.buttons.fitPage.visibility||t.buttons.fitWidth.visibility||t.buttons.fitHeight.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.hand)){t.buttons.hand.visibility=q.buttons.visibility.hand==true?true:false}else{t.buttons.hand.visibility=true}if(!a.isUndefined(q.buttons.visibility.rectselect)){t.buttons.select.visibility=q.buttons.visibility.rectselect==true?true:false}else{t.buttons.select.visibility=true}if(!a.isUndefined(q.buttons.visibility.zoom)){t.buttons.clicktozoomin.visibility=q.buttons.visibility.zoom==true?true:false}else{t.buttons.clicktozoomin.visibility=true}t.buttons.blank7.visibility=(t.buttons.hand.visibility||t.buttons.select.visibility||t.buttons.clicktozoomin.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.restore)){t.buttons.restore.visibility=q.buttons.visibility.restore==true?true:false}else{t.buttons.restore.visibility=true}if(!a.isUndefined(q.buttons.visibility.save)){t.buttons.save.visibility=q.buttons.visibility.save==true?true:false}else{t.buttons.save.visibility=true}if(!a.isUndefined(q.buttons.visibility.close)){t.buttons.close.visibility=q.buttons.visibility.close==true?true:false}else{t.buttons.close.visibility=true}}}}if(!a.isUndefined(q.dialogText)){b=q.dialogText;n.CustomizableDisplayInfo.dialogText=b}if(!a.isUndefined(q.promptToSaveChange)){u.promptToSaveChange=q.promptToSaveChange}if(!a.isUndefined(q.border)){t.outerBorder=q.border}if(!a.isUndefined(q.topMenuBorder)){t.topMenuBorder=q.topMenuBorder}if(!a.isUndefined(q.innerBorder)){t.canvasConfig.canvasBorder=q.innerBorder}if(!a.isUndefined(q.background)){t.canvasConfig.canvasBackground=q.background}}return t};f.prototype._bindView=function(){var x=this;if(x.bShowImageEdit){return true}if(!x.myImageEditor){if(x.bDispose){a.Errors.ImageEditorDispose(x._stwain)}else{a.Errors.ImageEditorNotExist(x._stwain)}return false}var r=a.one(".dynamsoft-cvs-container");if(r&&r.getEL()){x.cvsContainer=r;x.cvsParentId=r.parent()[0].id;if(x._stwain&&x._stwain.Addon&&x._stwain.Addon.Camera){x.cvsStatus=x._stwain.Addon.Camera.getStatus()}}else{x.cvsContainer="";x.cvsParentId="";x.cvsStatus=""}x.bShowImageEdit=true;if(x.editorSettings&&x.editorSettings.element&&x.editorSettings.width&&x.editorSettings.height){x.UIEditor=x.editorSettings.element;x.bFullScreen=false;x.myImageEditor.width=x.editorSettings.width;x.myImageEditor.height=x.editorSettings.height;x.SetWidthInner(x.editorSettings.width,true);x.SetHeightInner(x.editorSettings.height,true);x.myImageEditor.bindView(x.UIEditor);x.hide();if(x.cvsParentId){var s=document.getElementById(x.cvsParentId);if(s){s.appendChild(x.cvsContainer[0])}}}else{var t=m.createElement("div");m.body.appendChild(t);document.body.insertBefore(t,document.body.firstElementChild);x.UIEditor=t;x.bFullScreen=true;x.UIEditor.className="D_ImageUIEditor";x.UIEditor.style.width="100%";x.UIEditor.style.height="100%";x.UIEditor.style.position="fixed";x.UIEditor.style.left="0px";x.UIEditor.style.top="0px";x.UIEditor.style.zIndex="9999";x.UIEditor.style.display="none";x.SetWidthInner("100%",true);x.SetHeightInner("100%",true);x.myImageEditor.bindView(x.UIEditor);x.hide();x.bShowImageEditForFullScreen=true}x.updateMode();if(x.editorSettings&&x.editorSettings.selectionRectAspectRatio){x.SetSelectionRectAspectRatio(x.editorSettings.selectionRectAspectRatio)}else{x.SetSelectionRectAspectRatio(0)}x.HideEditorButtonForPad();x.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}];if(x._stwain._isMobileMode()){var w,q=a.one(".ds-dwt-ui-icon-acquire");if(q&&q.getEL()){q[0].style.display="none"}x.dwtMobileFileId="dwtmobilefile";if(x.UIEditor&&x.UIEditor.nodeName=="DIV"){w=document.createElement("div");if(x.bMobile){w.innerHTML="<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+x.dwtMobileFileId+"' type='file' style='display:none' />"}else{w.innerHTML="<input multiple accept='image/*,.pdf' id ='"+x.dwtMobileFileId+"' type='file' style='display:none' />"}x.UIEditor.appendChild(w)}else{var v=document.getElementById(x.UIEditor);w=document.createElement("div");if(x.bMobile){w.innerHTML="<input id ='"+x.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />"}else{w.innerHTML="<input id ='"+x.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />"}v.appendChild(w)}var u=a.get(x.dwtMobileFileId);u.onchange=function(){for(var y=0;y<this.files.length;y++){x._stwain.LoadImageFromBinary(this.files[y])}var z=document.getElementById(x.dwtMobileFileId);z.value=""}}x.myImageEditor.off("slideSwitch");x.myImageEditor.on("slideSwitch",function(y){if(y=="left"){x._webViewer.myViewer.previous()}else{if(y=="right"){x._webViewer.myViewer.next()}}});return true};f.prototype.dispose=function(){var r=this,q=false;q=r.mydvs.ViewControl.removeViewer(r.myImageEditor);if(q){if(r.UIEditor.lastChild){r.UIEditor.removeChild(r.UIEditor.lastChild)}r.myImageEditor=undefined;r._webViewer._imageEditor=undefined;r._webViewer._imageEditorInner=undefined;r.mydvs=null;r._stwain=null;r.bDispose=true}return q};f.prototype.show=function(){var q=this;if(q.myImageEditor){if(q.bFullScreen){q.UIEditor.style.display="";document.documentElement.scrollLeft=0;document.documentElement.scrollTop=0;document.body.style.overflow="hidden"}q.myImageEditor.showViewer=true;return true}else{if(q.bDispose){a.Errors.ImageEditorDispose(q._webViewer._stwain)}else{a.Errors.ImageEditorNotExist(q._webViewer._stwain)}return false}};f.prototype.hide=function(){var q=this;if(q.myImageEditor){q.myImageEditor.showViewer=false;if(q.bFullScreen){q.UIEditor.style.display="none"}return true}else{if(q.bDispose){a.Errors.ImageEditorDispose(q._webViewer._stwain)}else{a.Errors.ImageEditorNotExist(q._webViewer._stwain)}return false}return true};f.prototype._BindImageEditorEvents=function(){var q=this;a.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered"],function(r){q.myImageEditor.on(r,function(t,s){q[r](t,s)})})};f.prototype.HideEditorButtonForPad=function(){var v=this,r=v.myImageEditor,t=v.bPadViewer;var u=document.getElementById("rotateBtn"+r.postfix);if(u){if(!t){u.style.display=""}else{u.style.display="none"}}var s=document.getElementById("deskewBtn"+r.postfix);if(s){if(!t){s.style.display=""}else{s.style.display="none"}}var q=document.getElementById("changeImageSizeBtn"+r.postfix);if(q){if(!t){q.style.display=""}else{q.style.display="none"}}};f.prototype.BackImageData=function(){var r=this;if(r._stwain._isMobileMode()&&r.bShowImageEdit){var q=r._webViewer.GetCurrentIndex();if(q>=0){r._webViewer.GetImageData(r._webViewer.GetUidByIndex(q)).then(function(t){r.BackImageBuffer=t.oriData;var s=r._webViewer.GetMetaDataByIndex(q);if(s){r.BackModelImageControl={};r.BackModelImageControl.width=s.width;r.BackModelImageControl.height=s.height;r.BackModelImageControl.bitDepth=s.bitDepth;r.BackModelImageControl.resolutionX=s.resolutionX;r.BackModelImageControl.resolutionY=s.resolutionY}})}}};f.prototype.CloseShowImageEditor=function(){var r=this;if(!r.myImageEditor){if(r.bDispose){a.Errors.ImageEditorDispose(r._stwain)}else{a.Errors.ImageEditorNotExist(r._stwain)}return false}if(r.cvsContainer&&r.cvsContainer!=""&&r.cvsParentId&&r.cvsParentId!=""){var q=document.getElementById(r.cvsParentId);if(q){q.appendChild(r.cvsContainer[0])}if(r.cvsStatus=="playing"){if(r._stwain&&r._stwain.Addon&&r._stwain.Addon.Camera){r._stwain.Addon.Camera.resume()}}}return true};f.prototype.UpdateInfo=function(){var q=this;Dynamsoft.Lib.hideMask()};f.prototype.clearSelectedAreas=function(){var r=this,q=false;if(r._webViewer.GetHowManyImagesInBuffer()<=0){return true}q=r.myImageEditor.clearSelectedBoxes();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.SetSelectionRectAspectRatio=function(q){var r=this;r.myImageEditor.selectionBoxAspectRatio=q;return true};f.prototype.ZoomIn=function(){var r=this,q=false;q=r.myImageEditor.zoomIn();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.ZoomOut=function(){var r=this,q=false;q=r.myImageEditor.zoomOut();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.SetZoom=function(u,q,t){var s=this,r=false;if(q&t){r=s.myImageEditor.zoomTo(u,q,t)}else{r=s.myImageEditor.zoomTo(u)}if(!r){a.Errors.WebviewerError(s._stwain,s.mydvs.Error.errorMessage,s.mydvs.Error.errorCode)}return r};f.prototype.GetZoom=function(){var q=this;return q.myImageEditor.zoom};f.prototype.SetFitType=function(r){var s=this,q="window";if(!a.isUndefined(r)){if(r=="width"||r=="height"){q=r}}s.myImageEditor.fitType=q;return true};f.prototype.SetMouseShape=function(r){var s=this;var q;switch(r){case Dynamsoft.DWT.EnumDWT_MouseShape.Default:q="default";break;case Dynamsoft.DWT.EnumDWT_MouseShape.Hand:q="pointer";break;case Dynamsoft.DWT.EnumDWT_MouseShape.Crosshair:q="crosshair";break;case Dynamsoft.DWT.EnumDWT_MouseShape.Zoom:q="zoom-in";break;default:q="crosshair";break}s.SetCursor(q);return true};f.prototype.SetCursor=function(r){var s=this;if(!s._webViewer._NouiNotSupport("cursor")){return false}var q="default";switch(r){case"default":q="default";s.SetOperationMode(1);break;case"pointer":q="pointer";s.SetOperationMode(0);break;case"crosshair":q="crosshair";s.SetOperationMode(1);break;case"zoom-in":q="zoom-in";s.SetOperationMode(2);break;default:q="crosshair";break}s.myImageEditor.canvasMouseShape=q;return true};f.prototype.SetSelectionImageBorderColor=function(q){var r=this;r.myImageEditor.selectedPageBorderColor=q;return true};f.prototype.SetBackgroundColor=function(q){var r=this;r.myImageEditor.imageBackgroundColor=q;return true};f.prototype.SetWidth=function(q){var r=this;r.myImageEditor.width=q;return true};f.prototype.SetWidthInner=function(r,s){var t=this;if(s){t.myImageEditor.width=r}else{if(a.isString(r)&&r.indexOf("%")>=0){var q=a.one("#"+t._stwain._containerID);t.myImageEditor.width=parseInt(a.css(q,"width")*parseInt(r)/100)}else{t.myImageEditor.width=r}}return true};f.prototype.SetHeight=function(q){var r=this;r.myImageEditor.height=q;return true};f.prototype.SetHeightInner=function(q,s){var t=this;if(s){t.myImageEditor.height=q}else{if(a.isString(q)&&q.indexOf("%")>=0){var r=a.one(t._stwain._containerElement);t.myImageEditor.height=parseInt(a.css(r,"height")*parseInt(q)/100)}else{t.myImageEditor.height=q}}return true};f.prototype.SetIfAutoScroll=function(q){var r=this;r.myImageEditor.showLatestPage=q;return true};f.prototype.ChangeButtonClass=function(q,t){var s=this,r;r=s.myImageEditor.setButtonClass(q,t);return r};f.prototype.SetOperationMode=function(r){var s=this,q;s.myImageEditor.operationMode=r};f.prototype.UnbindContent=function(r){var s=this,q;s.myImageEditor.unbindContent()};f.prototype.SetSelectedPageBackground=function(q){var r=this;r.myImageEditor.selectedPageBackground=q};f.prototype.GetRealTimeMetadataByIndex=function(q){var r=this;if(q<0||q>=r._webViewer.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(r._stwain);return}return r.myImageEditor.getRealTimeMetadataByIndex(q)};f.prototype.DVSRotate=function(r){var s=this,q;s.myImageEditor.rotateMode=0;q=s.myImageEditor.rotate(r);if(!q){a.Errors.WebviewerError(s._stwain,s.mydvs.Error.errorMessage,s.mydvs.Error.errorCode)}return q};f.prototype.DVSFlip=function(){var r=this,q;q=r.myImageEditor.flip();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.DVSMirror=function(){var r=this,q;q=r.myImageEditor.mirror();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.DVSCrop=function(u,t,s,r){var v=this,q;q=v.myImageEditor.crop(u,t,(s-u),(r-t));if(!q){a.Errors.WebviewerError(v._stwain,v.mydvs.Error.errorMessage,v.mydvs.Error.errorCode)}return q};f.prototype.DVSErase=function(u,t,s,r){var v=this,q;q=v.myImageEditor.erase(u,t,(s-u),(r-t),v._webViewer._UIView.BackgroundFillColor);if(!q){a.Errors.WebviewerError(v._stwain,v.mydvs.Error.errorMessage,v.mydvs.Error.errorCode)}return q};f.prototype.DVSSaveTransformResult=function(q){var r=this;r.myImageEditor.saveTransformation().then(function(){q(null,-1,null)},function(s){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)});return true};f.prototype.DVSRotateEx=function(s,r){var t=this,q;t.myImageEditor.rotateMode=r?1:0;q=t.myImageEditor.rotate(s);if(!q){a.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode)}return q};f.prototype.DVSChangeImageSize=function(s,r,t){var u=this,q;q=u.myImageEditor.changePageSize(parseInt(s),parseInt(r),t);if(!q){a.Errors.WebviewerError(u._stwain,u.mydvs.Error.errorMessage,u.mydvs.Error.errorCode)}return q};f.prototype.DVSSkewAngle=function(){var q=this;q._stwain._asyncGetSkewAngleOnly(q._webViewer.GetCurrentIndex(),function(r){q.DVSRotateEx(r,true);q.UpdateInfo();q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()});return true};f.prototype.updateButtons=function(){var q=this;if(q._IfChangedWithinTheEditor==true){q.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage");q.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")}else{q.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage-grey");q.ChangeButtonClass("restore","ds-dwt-ui-icon-restore-grey")}};f.prototype.updateMode=function(q){var u=this,s,r;if(!u.bShowImageEdit){return}r=u._webViewer.GetHowManyImagesInBuffer();if(r>1){if(u._webViewer.GetCurrentIndex()==r-1||u._webViewer.GetHowManyImagesInBuffer()<=1){u.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey")}else{u.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage")}if(u._webViewer.GetCurrentIndex()<=0||u._webViewer.GetHowManyImagesInBuffer()<=1){u.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")}else{u.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")}}else{u.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey");u.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")}u.updateButtons();u.__SetCropButtonGrey(true);u.__SetEraseButtonGrey(true);if(u.bMobile){switch(u.cursorStatus){case"rectselect":u.OnSelect();break;case"zoom":u.OnClicktozoomin();break;default:u.OnHand()}}else{switch(u.cursorStatus){case"hand":u.OnHand();break;case"zoom":u.OnClicktozoomin();break;default:u.OnSelect()}}if(q){var t=u._webViewer.GetCurrentIndex();if(u._IfChangedWithinTheEditor==true&&t!=u.iChangedIndex){u.ShowDialogForSaveImage(u._webViewer.GetCurrentIndex(),false)}}};f.prototype.__SaveImageInner=function(s,v){var w=this,t;if(w.iChangedIndex==-1&&w._IfSaveChangesOutSideOfTheEditor==false){w._IfChangedWithinTheEditor=false;if(v){v()}return false}if(w._IfChangedWithinTheEditor!=true&&w._IfSaveChangesOutSideOfTheEditor==false){alert(n.CustomizableDisplayInfo.errorMessages.imageNotChanged);w._IfChangedWithinTheEditor=false;if(v){v()}return false}if(w._IfSaveChangesOutSideOfTheEditor){w.iChangedIndex=w._webViewer.GetCurrentIndex()}var q=function(A,z,x){if(A){if(s==true){a.log("__SaveImageInner: "+[A.guid].join(","));if(w._webViewer.GetCurrentIndex()==z){if(w._stwain._isMobileMode()){w._webViewer.MobileUpdateImage(A,x)}else{w._webViewer.UpdateImage(A,x)}}}w._IfChangedWithinTheEditor=false;w.iChangedIndex=-1;var y=A.serverId;if(y==-1){if(v){v()}return false}}else{w._IfChangedWithinTheEditor=false;w.iChangedIndex=-1}w.updateButtons();if(v){v()}return true};var u=true;if(w._IfChangedWithinTheEditor==true||w._IfSaveChangesOutSideOfTheEditor==true){var r=w.getImageManager().convertClientIndexToServerId(w.iChangedIndex);if(r==-1){if(v){v()}return false}w.OnGetImageFromServerForEdit(w._webViewer._UIView.mapModelImageControl[r],w.iChangedIndex,2,q);u=false}w._IfSaveChangesOutSideOfTheEditor=false;if(u){w._IfChangedWithinTheEditor=false;if(v){v()}}return true};f.prototype.ShowDialogForSaveImage=function(v,q,t,u){var r=this;var s=function(){r.__SaveImageInner(true,function(){var z=r._stwain._containerID;h.DCP_DWT_OnClickCloseInstall(z);a.bChangeImage=1;if(v==-1){r.OnClose()}else{r._webViewer.__goInner(v)}if(q){document.body.style.overflow=""}if(o.isFunction(t)){t()}})};if(r.promptToSaveChange){var x=['<div class="dynamsoft-dwt-dlg-tips">',"<div>",b.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',b.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',b.saveChangedImage[2],'" /></div>',"</div>"];if(r.bMobile){Dynamsoft.DWT.ShowDialog(300,0,x.join(""),true)}else{Dynamsoft.DWT.ShowDialog(420,0,x.join(""),true)}var y=a.one(".dynamsoft_btnSave").getEL();if(y){y.onclick=function(){s()}}var w=a.one(".dynamsoft_btnCancel").getEL();if(w){w.onclick=function(){r.__RestoreImageInner(v,function(){var z=r._stwain._containerElement;h.DCP_DWT_OnClickCloseInstall(z);a.bChangeImage=0;if(v==-1){r.OnClose()}else{r._webViewer.__goInner(v)}if(q){document.body.style.overflow=""}if(o.isFunction(u)){u()}})}}}else{s()}};f.prototype.__SetCropButtonGrey=function(q){var r=this;r.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey");if(q){r.clearSelectedAreas()}};f.prototype.__SetEraseButtonGrey=function(q){var r=this;r.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey");if(q){r.clearSelectedAreas()}};f.prototype.__SetZoomInButtonEnable=function(q){var r=this;if(q==true){r.ChangeButtonClass("zoomin","ds-dwt-ui-icon-zoomin")}else{r.ChangeButtonClass("zoomin","ds-dwt-ui-icon-zoomin-grey")}};f.prototype.__SetZoomOutButtonEnable=function(q){var r=this;if(q==true){r.ChangeButtonClass("zoomout","ds-dwt-ui-icon-zoomout")}else{r.ChangeButtonClass("zoomout","ds-dwt-ui-icon-zoomout-grey")}};f.prototype.pageChange=function(r){var u=this,t,q=u._webViewer.GetHowManyImagesInBuffer();a.log("OnPagination");if(q<=0){o.output(u,"No image in Buffer");return}else{if(q==1){return}}var s=/^\d+$/;if(!s.test(r)||r<=0){alert(n.CustomizableDisplayInfo.errorMessages.invalidIndex);return}t=parseInt(r)-1;if(t<0){t=0}else{if(t>=q){t=q-1}}if(t!=u._webViewer.GetCurrentIndex()){u.go(t)}};f.prototype.bufferChanged=function(r){var s=this,q=s._webViewer.GetCurrentIndex();s.updateMode();if(r.action=="shift"&&s._IfChangedWithinTheEditor==true){s.ShowDialogForSaveImage(q,false);return false}return true};f.prototype.pageRendered=function(q){var r=this};f.prototype.OnFirstImage=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);q._webViewer.first()};f.prototype.OnLastImage=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);q._webViewer.last()};f.prototype.OnPreviousImage=function(){var r=this,q=a.one(".ds-dwt-ui-icon-preImage-grey");a.Errors.ClearErrorInfo(r._stwain);if(q&&q.getEL()){return}else{r._webViewer.previous()}};f.prototype.OnNextImage=function(){var r=this,q=a.one(".ds-dwt-ui-icon-nextImage-grey");a.Errors.ClearErrorInfo(r._stwain);if(q&&q.getEL()){return}else{r._webViewer.next()}};f.prototype.go=function(q){var r=this;if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return false}if(r._IfChangedWithinTheEditor==true){r.ShowDialogForSaveImage(q,false);return false}if(r.bShowImageEdit){if(typeof(q)!=="undefined"){if(q==-1){return false}r.bCouldBeTimeConsuming=true;r.myImageEditor.gotoPage(q);r.updateMode()}}return true};f.prototype.OnAcquire=function(){var r=this,q=function(){r._stwain.SelectSource(function(){r._stwain.CloseSource();r._stwain.OpenSource();r._stwain.IfShowUI=true;if(Dynamsoft.DWT.IfConfineMaskWithinTheViewer==true){Dynamsoft.DWT.IfConfineMaskWithinTheViewer=false;r._stwain.AcquireImage({},function(){Dynamsoft.DWT.IfConfineMaskWithinTheViewer=true;if(window.onresize==null){window.onresize=function(){r._stwain.ShowImageEditorEx(-1,-1,-1,-1)}}},function(){if(window.onresize==null){window.onresize=function(){r._stwain.ShowImageEditorEx(-1,-1,-1,-1)}}})}else{r._stwain.AcquireImage()}},function(){a.log("User did not select a source")})};a.Errors.ClearErrorInfo(r._stwain);if(r._IfChangedWithinTheEditor){r.ShowDialogForSaveImage(r._webViewer.GetCurrentIndex(),false,q,q)}else{q()}};f.prototype.OnLoadImage=function(){var s=this;var r=null,q=function(){if(s._stwain._isMobileMode()){var u=document.getElementById(s.dwtMobileFileId);u.value="";u.click();return}var y=function(){a.log("Loaded an image successfully.");if(r!=null){s._stwain.Addon.PDF.SetConvertMode(r)}};var w=function(A,z){a.log("Loading failed with the error: "+z);if(r!=null){s._stwain.Addon.PDF.SetConvertMode(r)}};s._stwain.IfShowFileDialog=true;if(s._stwain.Addon&&s._stwain.Addon.PDF){var t=false,v,x;if(s._stwain._isMobileMode()){x=a.License.checkProductKey(s._stwain,{PDFRasterizer:true,Wasm:true},true)}else{x=a.License.checkProductKey(s._stwain,{PDFRasterizer:true},true)}if(x){r=s._stwain.Addon.PDF.GetConvertMode();v=s._stwain._innerFun("GetAddOnVersion",Dynamsoft.Lib.html5.Funs.makeParams("pdf"));if(a.env.bMac&&v==Dynamsoft.PdfMacVersion){t=true}else{if(a.env.bLinux&&v==Dynamsoft.PdfLinuxVersion){t=true}else{if(v==Dynamsoft.PdfVersion){t=true}}}if(t){s._stwain.Addon.PDF.SetConvertMode(1)}}}s._stwain.LoadImageEx("",5,y,w)};a.Errors.ClearErrorInfo(s._stwain);if(s._IfChangedWithinTheEditor){s.ShowDialogForSaveImage(s._webViewer.GetCurrentIndex(),false,q,q)}else{q()}};f.prototype.OnPrint=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetCurrentIndex()<0){o.output(q,"No image in Buffer");return}q._webViewer._UIView.Print()};f.prototype.OnRemoveAll=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q._stwain.RemoveAllImages()};f.prototype.OnRemove=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q._stwain.RemoveAllSelectedImages()};f.prototype.OnRotateLeft=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._webViewer._ImgManager.bImageJustChangedInEditor=true;if(q._stwain._isMobileMode()){q.DVSRotate(270);q.UpdateInfo()}else{q._stwain.RotateLeft(q._webViewer.GetCurrentIndex())}q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSRotate(270);q.UpdateInfo()}else{q._stwain.RotateLeft(q._webViewer.GetCurrentIndex())}}q.updateMode()};f.prototype.RotateEx=function(q,s,r){var t=this;if(t._webViewer.GetHowManyImagesInBuffer()<=0){o.output(t,"No image in Buffer");return}if(typeof q==="undefined"||typeof s==="undefined"||typeof r==="undefined"){alert(n.CustomizableDisplayInfo.errorMessages.insufficientParas)}else{if(t._webViewer._ImgManager.bImageChangedInViewer==true){t._IfSaveChangesOutSideOfTheEditor=true;t._webViewer._ImgManager.bImageChangedInViewer=false;t.__SaveImageInner(false,function(){t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();t._webViewer._ImgManager.bImageJustChangedInEditor=true;if(t._stwain._isMobileMode()){t.DVSRotateEx(q,s,r);t.UpdateInfo()}else{t._stwain.RotateEx(t._webViewer.GetCurrentIndex(),q,s,r)}t._IfChangedWithinTheEditor=true;t.iChangedIndex=t._webViewer.GetCurrentIndex();t.updateButtons()})}else{t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();t._IfSaveChangesOutSideOfTheEditor=false;t._webViewer._ImgManager.bImageJustChangedInEditor=true;t._IfChangedWithinTheEditor=true;t.iChangedIndex=t._webViewer.GetCurrentIndex();if(t._stwain._isMobileMode()){t.DVSRotateEx(q,s,r);t.UpdateInfo()}else{t._stwain.RotateEx(t._webViewer.GetCurrentIndex(),q,s,r)}}}t.updateMode()};f.prototype.OnRotate=function(z){var u=this;a.Errors.ClearErrorInfo(u._stwain);if(u._webViewer.GetHowManyImagesInBuffer()<=0){o.output(u,"No image in Buffer");return}a.hide("dynamsoft_ImgSizeEditor");if(!a.get("dynamsoft_RotateAnyAngle")){var B=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',b.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',b.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',b.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',b.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',b.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"];a.one("body").append(B.join(""))}var C=a.get("dynamsoft_Angle_InterpolationMethod");C.options.length=0;C.options.add(new Option("NearestNeighbor",1));C.options.add(new Option("Bilinear",2));C.options.add(new Option("Bicubic",3));C=null;var v=a.get("dynamsoft_btnRotateAnyAngleOK");v.onclick=function(){var G=a.get("dynamsoft_Angle").value;a.get("dynamsoft_Angle").className="";var E=/^\d+$/;if(!E.test(G)||G<=0){a.get("dynamsoft_Angle").className+=" invalid";a.get("dynamsoft_Angle").focus();alert(n.CustomizableDisplayInfo.errorMessages.invalidAngle);return}var F=a.get("dynamsoft_KeepSize");var D=F.checked;u.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();var x=parseInt(G);var y=u.RotateEx(x,D,a.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1);if(u._stwain.ErrorCode==0){a.hide("dynamsoft_RotateAnyAngle");return}};var t=a.get("dynamsoft_btnCancelRotateAnyAngle");t.onclick=function(){a.hide("dynamsoft_RotateAnyAngle")};var r=a.get("dynamsoft_RotateAnyAngle");a.toggle("dynamsoft_RotateAnyAngle");var s=z.srcElement||z.target;var w=s.y;if(!w){w=s.offsetTop+1}var A=s.x;if(!A){A=s.offsetLeft+1}if(u.UIEditor&&u.UIEditor.nodeName=="DIV"){r.style.top=z.clientY+document.documentElement.scrollTop+"px";r.style.left=z.clientX+document.documentElement.scrollLeft+"px"}else{var q=m.getElementById(u.UIEditor);r.style.top=w+s.offsetHeight+o.getTop(q)+"px";r.style.left=A+o.getLeft(q)+"px"}a.get("dynamsoft_Angle").value="45"};f.prototype.OnRotateRight=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(q._stwain._isMobileMode()){q.DVSRotate(90);q.UpdateInfo()}else{q._stwain.RotateRight(q._webViewer.GetCurrentIndex())}q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSRotate(90);q.UpdateInfo()}else{q._stwain.RotateRight(q._webViewer.GetCurrentIndex())}}q.updateMode()};f.prototype.OnDeskew=function(){var r=this;a.Errors.ClearErrorInfo(r._stwain);if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return}if(r._webViewer._ImgManager.bImageChangedInViewer==true){r._IfSaveChangesOutSideOfTheEditor=true;r._webViewer._ImgManager.bImageChangedInViewer=false;r.__SaveImageInner(false,function(){r.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();r._webViewer._ImgManager.bImageJustChangedInEditor=true;if(r._stwain._isMobileMode()){r.DVSSkewAngle();return}else{var s=r._webViewer.GetCurrentIndex();if(s>=0){r.RotateEx(r._stwain.GetSkewAngle(s),true,1)}}r._IfChangedWithinTheEditor=true;r.iChangedIndex=r._webViewer.GetCurrentIndex();r.updateButtons()})}else{r.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();r._IfSaveChangesOutSideOfTheEditor=false;r._webViewer._ImgManager.bImageJustChangedInEditor=true;r._IfChangedWithinTheEditor=true;r.iChangedIndex=r._webViewer.GetCurrentIndex();if(r._stwain._isMobileMode()){r.DVSSkewAngle()}else{var q=r._webViewer.GetCurrentIndex();if(q>=0){r.RotateEx(r._stwain.GetSkewAngle(q),true,1)}}}};f.prototype.OnCrop=function(){var s=this;a.Errors.ClearErrorInfo(s._stwain);var q,r=a.one(".ds-dwt-ui-icon-cropImage");if(r&&r.getEL()){s.Crop()}};f.prototype.Crop=function(){var w=this;if(w._webViewer.GetHowManyImagesInBuffer()<=0){o.output(w,"No image in Buffer");return}var t=w.actualSelectedCanvasAreas;if(t.length!=2){o.output(w,"No area selected for cropping");return}else{var s=t[1];var v=s.left;var u=s.top;var r=s.right;var q=s.bottom;if(parseInt(v)-parseInt(r)!=0&&parseInt(u)-parseInt(q)!=0){if(w._webViewer._ImgManager.bImageChangedInViewer==true){w._IfSaveChangesOutSideOfTheEditor=true;w._webViewer._ImgManager.bImageChangedInViewer=false;w.__SaveImageInner(false,function(){w.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(w._stwain._isMobileMode()){w.DVSCrop(parseInt(v),parseInt(u),parseInt(r),parseInt(q));w.UpdateInfo()}else{w._stwain.Crop(w._webViewer.GetCurrentIndex(),parseInt(v),parseInt(u),parseInt(r),parseInt(q))}w._webViewer._ImgManager.bImageJustChangedInEditor=true;w.__SetCropButtonGrey(true);w.__SetEraseButtonGrey(true);w._IfChangedWithinTheEditor=true;w.iChangedIndex=w._webViewer.GetCurrentIndex();w.updateButtons()})}else{w.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();w._IfSaveChangesOutSideOfTheEditor=false;w._webViewer._ImgManager.bImageJustChangedInEditor=true;w._IfChangedWithinTheEditor=true;w.iChangedIndex=w._webViewer.GetCurrentIndex();if(w._stwain._isMobileMode()){w.DVSCrop(parseInt(v),parseInt(u),parseInt(r),parseInt(q));w.UpdateInfo()}else{w._stwain.Crop(w._webViewer.GetCurrentIndex(),parseInt(v),parseInt(u),parseInt(r),parseInt(q))}w.__SetCropButtonGrey(true);w.__SetEraseButtonGrey(true)}w.updateMode()}}};f.prototype.OnErase=function(){var s=this,r,q=a.one(".ds-dwt-ui-icon-erase");a.Errors.ClearErrorInfo(s._stwain);if(q&&q.getEL()){s.Erase()}};f.prototype.Erase=function(){var v=this,s=false;if(v._webViewer.GetHowManyImagesInBuffer()<=0){o.output(v,"No image in Buffer");return}var u=v.actualSelectedCanvasAreas;if(u.length==1){o.output(v,"No area selected for erasing");return}if(v._webViewer._ImgManager.bImageChangedInViewer==true){v._IfSaveChangesOutSideOfTheEditor=true;v._webViewer._ImgManager.bImageChangedInViewer=false;v.__SaveImageInner(false,function(){for(var C=1;C<u.length;C++){var B=u[C];var E=B.left;var D=B.top;var A=B.right;var z=B.bottom;if(parseInt(E)-parseInt(A)!=0&&parseInt(D)-parseInt(z)!=0){v.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(v._stwain._isMobileMode()){v.DVSErase(parseInt(E),parseInt(D),parseInt(A),parseInt(z));v.UpdateInfo()}else{v._stwain.CutFrameToClipboard(v._webViewer.GetCurrentIndex(),parseInt(E),parseInt(D),parseInt(A),parseInt(z))}v._webViewer._ImgManager.bImageJustChangedInEditor=true;v._IfChangedWithinTheEditor=true;v.iChangedIndex=v._webViewer.GetCurrentIndex();v.updateButtons();s=true}}v.__SetEraseButtonGrey(s);v.__SetCropButtonGrey(s)})}else{v._IfSaveChangesOutSideOfTheEditor=false;v._IfChangedWithinTheEditor=true;v.iChangedIndex=v._webViewer.GetCurrentIndex();for(var t=1;t<u.length;t++){var x=u[t];var r=x.left;var w=x.top;var y=x.right;var q=x.bottom;if(parseInt(r)-parseInt(y)!=0&&parseInt(w)-parseInt(q)!=0){v.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(v._stwain._isMobileMode()){v.DVSErase(parseInt(r),parseInt(w),parseInt(y),parseInt(q));v.UpdateInfo()}else{v._stwain.CutFrameToClipboard(v._webViewer.GetCurrentIndex(),parseInt(r),parseInt(w),parseInt(y),parseInt(q))}v._webViewer._ImgManager.bImageJustChangedInEditor=true;v._IfChangedWithinTheEditor=true;v.iChangedIndex=v._webViewer.GetCurrentIndex();s=true}}v.__SetEraseButtonGrey(s);v.__SetCropButtonGrey(s)}v.updateMode()};f.prototype.ChangeImageSize=function(r,q,s){var t=this;if(t._webViewer.GetHowManyImagesInBuffer()<=0){o.output(t,"No image in Buffer");return}if(t._webViewer._ImgManager.bImageChangedInViewer==true){t._IfSaveChangesOutSideOfTheEditor=true;t._webViewer._ImgManager.bImageChangedInViewer=false;t.__SaveImageInner(false,function(){t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();t._webViewer._ImgManager.bImageJustChangedInEditor=true;if(t._stwain._isMobileMode()){t.DVSChangeImageSize(r,q,s);t.UpdateInfo()}else{t._stwain.ChangeImageSize(t._webViewer.GetCurrentIndex(),r,q,s)}t._IfChangedWithinTheEditor=true;t.iChangedIndex=t._webViewer.GetCurrentIndex();t.updateButtons()})}else{t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();t._IfSaveChangesOutSideOfTheEditor=false;t._webViewer._ImgManager.bImageJustChangedInEditor=true;t._IfChangedWithinTheEditor=true;t.iChangedIndex=t._webViewer.GetCurrentIndex();if(t._stwain._isMobileMode()){t.DVSChangeImageSize(r,q,s);t.UpdateInfo()}else{t._stwain.ChangeImageSize(t._webViewer.GetCurrentIndex(),r,q,s)}}t.updateMode()};f.prototype.OnChangeImageSize=function(E){var A=this;a.Errors.ClearErrorInfo(A._stwain);if(A._webViewer.GetHowManyImagesInBuffer()<=0){o.output(A,"No image in Buffer");return}a.hide("dynamsoft_RotateAnyAngle");if(!a.get("dynamsoft_ImgSizeEditor")){var G=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',b.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',b.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",b.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',b.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',b.dlgChangeImageSize[4],'"/></span></div>',"</div>"];a.one("body").append(G.join(""))}var H=a.get("dynamsoft_InterpolationMethod");H.options.length=0;H.options.add(new Option("NearestNeighbor",1));H.options.add(new Option("Bilinear",2));H.options.add(new Option("Bicubic",3));H=null;var s=a.get("dynamsoft_btnChangeImageSizeOK");s.onclick=function(){var K=a.get("dynamsoft_img_width").value,x=a.get("dynamsoft_img_height").value;a.get("dynamsoft_img_width").className="";a.get("dynamsoft_img_height").className="";var J=/^\d+$/;if(!J.test(x)||x<=0){a.get("dynamsoft_img_height").className+=" invalid";a.get("dynamsoft_img_height").focus();alert(n.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth);return}if(!J.test(K)||K<=0){a.get("dynamsoft_img_width").className+=" invalid";a.get("dynamsoft_img_width").focus();alert(n.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth);return}var y=A.ChangeImageSize(K,x,a.get("dynamsoft_InterpolationMethod").selectedIndex+1);if(A._stwain.ErrorCode==0){a.hide("dynamsoft_ImgSizeEditor");return}};var C=a.get("dynamsoft_btnCancelChange");C.onclick=function(){a.hide("dynamsoft_ImgSizeEditor")};var t=a.get("dynamsoft_ImgSizeEditor"),I;a.toggle("dynamsoft_ImgSizeEditor");var u=E.srcElement||E.target;var D=u.y;if(!D){D=u.offsetTop+1}var F=u.x;if(!F){F=u.offsetLeft+1}if(A.UIEditor&&A.UIEditor.nodeName=="DIV"){t.style.top=E.clientY+document.documentElement.scrollTop+"px";t.style.left=E.clientX+document.documentElement.scrollLeft+"px"}else{var r=m.getElementById(A.UIEditor);t.style.top=D+u.offsetHeight+o.getTop(r)+"px";t.style.left=F+o.getLeft(r)+"px"}var B=A._webViewer.GetCurrentIndex();var w=A.getImageManager().convertClientIndexToServerId(B);if(w==-1){return false}I=A._webViewer._UIView.mapModelImageControl[w];if(I){if(A._stwain._isMobileMode()){var q,z=0,v=0;q=A.GetRealTimeMetadataByIndex();if(q&&q.width){z=q.width}if(q&&q.height){v=q.height}a.get("dynamsoft_img_width").value=parseInt(z);a.get("dynamsoft_img_height").value=parseInt(v)}else{a.get("dynamsoft_img_width").value=parseInt(A.getImageManager().GetImageWidth(B));a.get("dynamsoft_img_height").value=parseInt(A.getImageManager().GetImageHeight(B))}return true}return false};f.prototype.OnFlip=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(q._stwain._isMobileMode()){q.DVSFlip();q.UpdateInfo()}else{q._stwain.Flip(q._webViewer.GetCurrentIndex())}q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSFlip();q.UpdateInfo()}else{q._stwain.Flip(q._webViewer.GetCurrentIndex())}}q.updateMode()};f.prototype.OnMirror=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(q._stwain._isMobileMode()){q.DVSMirror();q.UpdateInfo()}else{q._stwain.Mirror(q._webViewer.GetCurrentIndex())}q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSMirror();q.UpdateInfo()}else{q._stwain.Mirror(q._webViewer.GetCurrentIndex())}}q.updateMode()};f.prototype.OnZoomin=function(){var s=this;var q=a.one(".ds-dwt-ui-icon-zoomin-grey");if(q&&q.getEL()){return}a.Errors.ClearErrorInfo(s._stwain);if(s._webViewer.GetHowManyImagesInBuffer()<=0){o.output(s,"No image in Buffer");return}var r=(Math.floor(s.GetZoom()*100*s._webViewer._UIView.zoomInStep)+1);if(!r||(1<r&&r<2501)){s.ZoomIn();s.__SetZoomInButtonEnable(true)}else{alert(n.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);s.__SetZoomInButtonEnable(false)}s.__SetZoomOutButtonEnable(true);s.__SetCropButtonGrey(true);s.__SetEraseButtonGrey(true)};f.prototype.OnOriginalsize=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q.SetZoom(1);q.__SetZoomInButtonEnable(true);q.__SetZoomOutButtonEnable(true);q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true);return};f.prototype.OnZoomout=function(){var s=this;var q=a.one(".ds-dwt-ui-icon-zoomout-grey");if(q&&q.getEL()){return}a.Errors.ClearErrorInfo(s._stwain);if(s._webViewer.GetHowManyImagesInBuffer()<=0){o.output(s,"No image in Buffer");return}var r=(Math.floor(s.GetZoom()*100*s._webViewer._UIView.zoomOutStep)-1);if(!r||(1<r&&r<6501)){s.ZoomOut();s.__SetZoomOutButtonEnable(true)}else{alert(n.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);s.__SetZoomOutButtonEnable(false)}s.__SetZoomInButtonEnable(true);s.__SetCropButtonGrey(true);s.__SetEraseButtonGrey(true)};f.prototype.OnFitPage=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q.SetFitType();q.__SetZoomInButtonEnable(true);q.__SetZoomOutButtonEnable(true);q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true)};f.prototype.OnFitWidth=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q.SetFitType("width");q.__SetZoomInButtonEnable(true);q.__SetZoomOutButtonEnable(true);q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true)};f.prototype.OnFitHeight=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q.SetFitType("height");q.__SetZoomInButtonEnable(true);q.__SetZoomOutButtonEnable(true);q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true);return};f.prototype.OnHand=function(){var r=this,q=Dynamsoft.DWT.EnumDWT_MouseShape.Hand;r.clearSelectedAreas();r.SetMouseSelectInner(q)};f.prototype.OnSelect=function(){var r=this,q=Dynamsoft.DWT.EnumDWT_MouseShape.Crosshair;r.SetMouseSelectInner(q)};f.prototype.OnClicktozoomin=function(){var r=this,q=Dynamsoft.DWT.EnumDWT_MouseShape.Zoom;r.clearSelectedAreas();r.SetMouseSelectInner(q)};f.prototype.SetMouseSelectInner=function(q){var r=this;a.Errors.ClearErrorInfo(r._stwain);if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return}r.SetMouseShape(q);r.__EnableMouseShapButtons(q);if(r.bMobile){switch(q){case Dynamsoft.DWT.EnumDWT_MouseShape.Crosshair:r.cursorStatus="rectselect";break;case Dynamsoft.DWT.EnumDWT_MouseShape.Zoom:r.cursorStatus="zoom";break;default:r.cursorStatus="hand"}}else{switch(q){case Dynamsoft.DWT.EnumDWT_MouseShape.Hand:r.cursorStatus="hand";break;case Dynamsoft.DWT.EnumDWT_MouseShape.Zoom:r.cursorStatus="zoom";break;default:r.cursorStatus="rectselect"}}};f.prototype.OnRestore=function(){var r=this;var q=a.one(".ds-dwt-ui-icon-saveImage-grey");if(q&&q.getEL()){return}a.Errors.ClearErrorInfo(r._stwain);if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return}r.__RestoreImageInner(-1)};f.prototype.__RestoreImageInner=function(q,v){var w=this,t;if(w.iChangedIndex==-1){w._IfChangedWithinTheEditor=false;if(v){v()}return}if(w._stwain._isMobileMode()){w.Reset();w._IfChangedWithinTheEditor=false;w.iChangedIndex=-1;w.updateButtons();if(v){v()}}else{var r=function(A,z,x){a.log("__RestoreImageInner: "+[A.guid].join(","));if(w._stwain._isMobileMode()){w._webViewer.MobileUpdateImage(A,x)}else{w._webViewer.UpdateImage(A,x)}w._IfChangedWithinTheEditor=false;w.iChangedIndex=-1;var y=A.serverId;if(y==-1){w.updateButtons();if(v){v()}return false}w.updateButtons();if(q==-1){y=w.getImageManager().convertClientIndexToServerId(w._webViewer.GetCurrentIndex());if(y==-1){a.Errors.IndexOutOfRange(w._stwain);if(v){v()}return false}}if(v){v()}};var u=true;if(w._IfChangedWithinTheEditor==true){var s=w.getImageManager().convertClientIndexToServerId(w.iChangedIndex);if(s!=-1){w.OnGetImageFromServerForEdit(w._webViewer._UIView.mapModelImageControl[s],w.iChangedIndex,1,r)}u=false}if(u){w._IfChangedWithinTheEditor=false;if(v){v()}}}};f.prototype.OnGetImageFromServerForEdit=function(s,v,w,r){var u=this,q,y;if(r&&u._webViewer._UIView.BaseUrl){var t=u.getImageManager().convertClientIndexToServerId(v);if(t==-1){return false}if(u._stwain._isMobileMode()){if(w==1){var x=u._webViewer.GetMetaDataByIndex(v);if(x){x.width=u.BackModelImageControl.width;x.height=u.BackModelImageControl.height;x.bitDepth=u.BackModelImageControl.bitDepth;x.resolutionX=u.BackModelImageControl.resolutionX;x.resolutionY=u.BackModelImageControl.resolutionY}s.ticks=Date.now();s.imageUrl=u.BackImageBuffer;r(s,v,{metaData:x})}else{u.DVSSaveTransformResult(r)}}else{q=c.getUrlByAct(u._webViewer._UIView.BaseUrl,t,w);a.ajax({method:"GET",url:q,onSuccess:function(z){s.ticks=Date.now();s.imageUrl=c.getImageUrl(u._webViewer._UIView.BaseUrl,t,-1,-1,s.ticks);s.minImageUrl=c.getImageUrl(u._webViewer._UIView.BaseUrl,t,parseInt(s.iImageControlWidth),parseInt(s.iImageControlHeight),s.ticks);var B=u._webViewer.GetMetaDataByIndex(v);if(B){var A=u._webViewer._UIView.GetDataImageControl(t);if(A&&A.width){B.width=A.width}else{B.width=u._stwain.GetImageWidth(v)}if(A&&A.height){B.height=A.height}else{B.height=u._stwain.GetImageHeight(v)}}r(s,v,B)},onError:function(){}})}}return true};f.prototype.OnSave=function(){var r=this;var q=a.one(".ds-dwt-ui-icon-saveImage-grey");if(q&&q.getEL()){return}a.Errors.ClearErrorInfo(r._stwain);if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return}r.__SaveImageInner(true,function(){var s=r.getImageManager().convertClientIndexToServerId(r._webViewer.GetCurrentIndex());if(s==-1){a.Errors.IndexOutOfRange(r._stwain);return false}})};f.prototype.OnClose=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._IfChangedWithinTheEditor==true){q.ShowDialogForSaveImage(-1,true);return false}return q.OnCloseInner()};f.prototype.OnCloseInstall=function(){var r=this;if(r._IfChangedWithinTheEditor==false){var q=r._stwain._containerElement;h.DCP_DWT_OnClickCloseInstall(q)}};f.prototype.Reset=function(q){var r=this;return r.myImageEditor.reset()};f.prototype.OnCloseInner=function(q){var t=this;a.Errors.ClearErrorInfo(t._stwain);if(t._IfChangedWithinTheEditor==true){if(q){var r=t._stwain._containerElement;h.DCP_DWT_OnClickCloseInstall(r);a.bChangeImage=0;t.__RestoreImageInner(-1)}else{t.ShowDialogForSaveImage(-1,true);return false}}if(t.UIEditor&&t.bFullScreen==true){if(t.UIEditor.childNodes.length>0){t.UIEditor.parentNode.removeChild(t.UIEditor)}}else{if(t.myImageEditor){t.myImageEditor.unbindView(t.UIEditor)}}t.bShowImageEdit=false;t._webViewer.bShowImageEdit=false;t.bShowImageEditForFullScreen=false;t.CloseShowImageEditor();a.hide("dynamsoft_ImgSizeEditor");a.hide("dynamsoft_RotateAnyAngle");var s;s=a.get("dynamsoft_ImgSizeEditor");if(s){s.parentNode.removeChild(s)}s=a.get("dynamsoft_RotateAnyAngle");if(s){s.parentNode.removeChild(s)}if(Dynamsoft.Lib.dialog.selectsourcedlg){Dynamsoft.Lib.dialog.selectsourcedlg.close()}window.onresize=null;document.body.style.overflow="";if(a.isFunction(t._stwain.__CloseImageEditorUI)){t._stwain.__CloseImageEditorUI()}return t.dispose()};f.prototype.__EnableMouseShapButtons=function(q){var r=this;r.ChangeButtonClass("hand","ds-dwt-ui-icon-hand");r.ChangeButtonClass("select","ds-dwt-ui-icon-select");r.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin");if(q==Dynamsoft.DWT.EnumDWT_MouseShape.Hand){r.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected")}else{if(q==Dynamsoft.DWT.EnumDWT_MouseShape.Crosshair){r.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected")}else{if(q==Dynamsoft.DWT.EnumDWT_MouseShape.Zoom){r.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")}}}};f.prototype.click=function(q){var r=this;a.hide("dynamsoft_ImgSizeEditor");a.hide("dynamsoft_RotateAnyAngle")};f.prototype.imageClick=function(q,r){var s=this;s.UpdateInfo()};f.prototype.pageAreaSelected=function(v,r){var x=this;var s=1;if(r&&r.length>0){var u=r[r.length-1];if(u.index){s=parseInt(u.index)+1}if(s>0&&s<x.actualSelectedCanvasAreas.length){x.actualSelectedCanvasAreas[s]={left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height}}else{if(s==x.actualSelectedCanvasAreas.length){x.actualSelectedCanvasAreas.push({left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}}var w,q,t;if(x.actualSelectedCanvasAreas.length==2&&u.width>0&&u.height>0){x.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage");x.ChangeButtonClass("cut","ds-dwt-ui-icon-erase")}else{x.__SetCropButtonGrey(false);x.__SetEraseButtonGrey(false)}}};f.prototype.pageAreaUnselected=function(q){var r=this;r.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}];r.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey");r.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")};f.prototype.onDrop=function(q){var r=this;r._webViewer.dropEvent(q)};f.prototype.getImageManager=function(){var q=this;return q._webViewer._ImgManager};a.UI=a.UI||{};a.UI.ImageEditorInner=f});Dynamsoft.Ready(function(p,i){var h=Dynamsoft;if(!p.product.bHTML5Edition){return}var A=document,v=p.DOM,g=window,f=Dynamsoft.DWT,r=p.html5.Funs.DEF,q=p.html5.Funs2,j="1px solid rgb(204, 204, 204)",l="rgb(255, 255, 255)",e="transparent",a="1px solid rgb(238, 238, 238)",u="rgb(239, 246, 253)",n="1px solid rgb(238, 238, 238)",b="rgb(251, 236, 136)",c="1px solid rgb(125,162,206)",x="rgb(199, 222, 252)",k="rgb(42, 29, 43)",m=["topPageChanged","click","rightclick","dblclick","mousemove","pageAreaSelected","pageAreaUnselected","dragdone","onDrop","bufferChanged","pageChange"],z={toolbars:{header:false,topMenu:false,asideMenu:false,bottomMenu:false},groups:{},buttons:{},thumbnail:{showThumbnailControl:false,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,allowKeyboardControl:true,allowPageDragging:true,allowResizing:false,showPageNumber:false,border:"",background:l,pageBackground:e,pageBorder:a,hoverPageBackground:u,hoverPageBorder:n,placeholderBackground:b,selectedPageBorder:c,selectedPageBackground:x,autoChangeIndex:false},canvasConfig:{canvasMouseShape:"crosshair",canvasBackground:l,canvasBorder:"",selectedPageBorder:c,pageBorder:a,pageMargin:10,pageBackground:e,selectedPageBackground:x,hoverPageBorder:n,hoverPageBackground:u,placeholderBackground:b,autoChangeIndex:false,allowPageDragging:true,showPageNumber:false,columns:1,rows:1,scrollDirection:"vertical"},showSidebar:false,showMain:true,showViewer:true,sidebarWidth:"180",outerBorder:j,topMenuBorder:"",selectedAreaBorderColor:k,selectionRectAspectRatio:0,ifAutoScroll:true,useOuterDrop:true,allowSlide:true},y={background:"#434246",topMenuBorder:"",innerBorder:"",promptToSaveChange:true,buttons:f.CustomizableDisplayInfo.buttons,dialogText:f.CustomizableDisplayInfo.dialogText},t={showThumbnail:false,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:true,allowPageDragging:true,allowResizing:false,pageBackground:e,pageBorder:a,hoverPageBackground:u,hoverPageBorder:n,placeholderBackground:b,autoChangeIndex:false},d={isFunction:function(B){return B&&typeof(B)==="function"},addClass:function(C,B){var D=p.one(C);if(D&&D.length>0){D.addClass(B)}},removeClass:function(C,B){var D=p.one(C);if(D&&D.length>0){D.removeClass(B)}},output:function(C,B){if(Dynamsoft.DWT.Debug){p.log(B)}},getTop:function(B){var C=B.offsetTop;if(B.offsetParent!=null){C+=d.getTop(B.offsetParent)}return C},getLeft:function(B){var C=B.offsetLeft;if(B.offsetParent!=null){C+=d.getLeft(B.offsetParent)}return C}};p._safePromptCustomMsg(function(){y.buttons=f.CustomizableDisplayInfo.buttons;y.dialogText=f.CustomizableDisplayInfo.dialogText});function o(E,C,B){var D=this;D._ImgManager=E;D._stwain=E._stwain;D._UIView=B;D._currentTag="";D.bShowImageEdit=false;D.acceptDrop=true;D.ifWebviewerInit=false;D._Init(C);if(p.UI.DWTViewer&&Dynamsoft.DWT.UseDefaultViewer){D._stwain.Viewer=new p.UI.DWTViewer(D,E)}}o.prototype.dispose=function(){var B=this;B.containerElement=null;if(B.myViewer){B.myViewer.off("bufferChanged");B.mydvs.ViewControl.removeViewer(B.myViewer);B.myViewer=null}if(B.mydvs){B.mydvs.dispose();B.mydvs=null}B._UIView=null;B._ImgManager=null;if(B._stwain.Viewer){B._stwain.Viewer.dispose();B._stwain.Viewer=null}B._stwain=null};o.prototype._Init=function(B){var F=this;if(B.Container&&(p.isNodeList(B.Container)||(p.isArray(B.Container)&&B.Container.length>0))){var E=B.Container[0];if(E){F.containerElement=E}else{F.containerElement=""}}else{F.containerElement=""}if(F.mydvs){if(F.containerElement!=""){F.BindView(F.containerElement);F.show()}return}F.initWidth=B.Width;F.initHeight=B.Height;var D=z;D.width=F.initWidth;D.height=F.initHeight;if(!F._stwain._isPC()){D.canvasConfig.canvasMouseShape="pointer"}F.mydvs=new Dynamsoft.ViewModel({uiConfig:D,displayMode:"continuous",fitType:"window",scrollerConfig:{}});F._bindViewUi=false;F.myViewer=F.mydvs.ViewControl.getViewerByUid();if(Dynamsoft.DWT.UseDefaultViewer&&F.containerElement){if(F.mydvs.ViewControl){F.mydvs.ViewControl.bindViewUiConstructor(Dynamsoft.ViewUi);F.myViewer.bindView(F.containerElement);F._bindViewUi=true}}if(F.myViewer){if(!F._stwain._isPC()){F.SetOperationMode(0)}else{F.SetOperationMode(1)}}if(F.containerElement){F._InitDVS()}try{if(F.myViewer){if(F.myViewer.bindAreaDetectFunction){F.myViewer.bindAreaDetectFunction(F._stwain._areaDetectCallback)}if(F.myViewer.bindPerspectiveFunction){F.myViewer.bindPerspectiveFunction(F._stwain._perspectiveCallback)}if(F.myViewer.bindLicenseCallback){F.myViewer.bindLicenseCallback(function(){return F._stwain._checkWebcamWasmLicense()})}if(F.myViewer.bindSavePhotoCallback){F.myViewer.bindSavePhotoCallback(function(G){return F._stwain._saveImageCallback(G)})}}}catch(C){}if(F._bindViewUi){F._BindViewerEvents()}else{F.myViewer.on("bufferChanged",function(H,G){if(p.isFunction(F.bufferChanged)){F.bufferChanged(H,G)}})}F._bRegistedLoad=false};o.prototype.BindView=function(C){var E=this,B=false,D;E.OnCloseImageEditor();if(C&&C.nodeName=="DIV"){D=C}else{D=A.getElementById(C)}if(E._bindViewUi==false&&E.mydvs.ViewControl){E.mydvs.ViewControl.bindViewUiConstructor(Dynamsoft.ViewUi);E.myViewer.bindView(E.containerElement);E._bindViewUi=true}if(p.isUndefined(E.myViewer.width)){E.initWidth=100}if(p.isUndefined(E.myViewer.height)){E.initHeight=100}B=E.myViewer.bindView(C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode);return false}E.myViewer.showViewer=false;E.containerElement=D;E._stwain._containerElement=D;E._stwain._bBindViewer=true;E._InitDVS();E.SetAcceptDrop(true);E.SetAllowSlide(true);E.myViewer.off("bufferChanged");E.resetUISettingsInner(false,E.GetWidth(),E.GetHeight());E._BindViewerEvents();E.hide();return B};o.prototype.show=function(){var B=this;if(!B._NouiNotSupport("show")){return false}B.myViewer.showViewer=true;return true};o.prototype.hide=function(){var B=this;if(!B._NouiNotSupport("hide")){return false}B.myViewer.showViewer=false;return true};o.prototype.UnbindView=function(){var C=this,B=false;if(C._stwain&&C._stwain.Addon&&C._stwain.Addon.Camera&&C._stwain.Addon.Camera._viewer){if(C._stwain.Addon.Camera.getStatus()!=""){C._stwain.Addon.Camera.closeSource()}}B=C.myViewer.unbindView();if(B){C._bindViewUi=false;C._UnbindViewerEvents();if(C._imageEditor){C._imageEditor.dispose()}if(C._thumbnailViewer){C._thumbnailViewer.dispose()}if(C._customElement){C._customElement.dispose()}C.containerElement=""}else{p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}C._stwain._bBindViewer=false;return B};o.prototype.SetUIView=function(B){var C=this;C._UIView=B};o.prototype._BindViewerEvents=function(){var B=this;if(!B.myViewer){return}B.myViewer.off("bufferChanged");p.each(m,function(C){B.myViewer.on(C,function(E,D){B[C](E,D)})})};o.prototype._UnbindViewerEvents=function(){var B=this;p.each(m,function(C){if(C!="bufferChanged"){B.myViewer.off(C)}})};o.prototype._InitDVS=function(){var C=this,B=false;C.ifWebviewerInit=true;C.myViewer.showHeader=false;C.myViewer.showTopMenu=false;C.myViewer.showFooter=false;C.myViewer.showMain=true;C.myViewer.bOnlyShowThumbnailsView=false;C.myViewer.showThumbnailControl=false;C.myViewer.showLatestPage=true;C.myViewer.minZoom=C._UIView.MIN_ZOOM;C.myViewer.maxZoom=C._UIView.MAX_ZOOM};o.prototype.ShowImageEditor=function(D,C,B,F){var E=this;if(D&&B&&F){y.element=D;y.width=B;y.height=F}else{y.element=undefined;y.width=undefined;y.height=undefined}y.border=E.GetBorder();y.selectionRectAspectRatio=E.GetSelectionRectAspectRatio();E.createImageEditor(y);if(E._stwain._errorCode!=0){E._imageEditor.dispose();E.createImageEditor(y)}E._imageEditor.show();return true};o.prototype.OnCloseImageEditor=function(){var B=this;if(B.bShowImageEdit){if(B._imageEditor){B._imageEditor.dispose()}B.bShowImageEdit=false;B._imageEditor=undefined;B._imageEditorInner=undefined;return true}return false};o.prototype.GetUidByIndex=function(B){var C=this;if(B<0||B>=C.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(C._stwain);return -1}return C.myViewer.getUidByIndex(B)};o.prototype.GetIndexByUid=function(B){var C=this;if(!B||B==""||B==-1){p.Errors.IndexOutOfRange(C._stwain);return -1}return C.myViewer.getIndexByUid(B)};o.prototype.SetMetaDataByIndex=function(C,B){var D=this;if(C<0||C>=D.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(D._stwain);return}return D.myViewer.setMetadataByIndex(C,B)};o.prototype.GetMetaDataByIndex=function(B){var C=this;if(B<0||B>=C.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(C._stwain);return}return C.myViewer.getMetadataByIndex(B)};o.prototype.GetCustomDataByIndex=function(B){var D=this,C;if(B<0||B>=D.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(D._stwain);return}if(p.isArray(B)){C=B[0]}else{C=B}return D.myViewer.getCustomDataByIndex(C)};o.prototype.GetHowManyImagesInBuffer=function(){var B=this;if(!p.isUndefined(B.myViewer.currentPageCount)){return B.myViewer.currentPageCount}else{return 0}};o.prototype.UpdateInfo=function(D,C,B){var E=this;if(C){Dynamsoft.Lib.hideMask()}if(D&&E.bShowImageEdit){if(E._imageEditorInner){E._imageEditorInner.updateMode(B)}}};o.prototype.AppendImage=function(E,J){var H=this,B=E.imageUrl,K=E.minImageUrl,D=E.serverId,F=E.bAppendImage,I=E.index,G,C={};if(J){if(!p.isUndef(J.width)){C.width=J.width}if(!p.isUndef(J.height)){C.height=J.height}if(!p.isUndef(J.bitDepth)){C.bitDepth=J.bitDepth}if(!p.isUndef(J.resolutionX)){C.resolutionX=J.resolutionX}if(!p.isUndef(J.resolutionY)){C.resolutionY=J.resolutionY}}p.log("AppendImage_oriData:"+B);if(F||(F==false&&H.GetHowManyImagesInBuffer()==0)){G=H.mydvs.DataControl.appendSync("file1",[{oriData:B,minData:K,metadata:C,customData:{imageId:D}}]);E.uuid=G[0];H.UpdateInfo(true);return G[0]}else{G=H.mydvs.DataControl.insertSync("file1",[{oriData:B,minData:K,metadata:C,customData:{imageId:D}}],I);E.uuid=G[0];H.UpdateInfo(true);return G[0]}};o.prototype.MobileAppendImage=function(G,B){var H=this,E=G.bAppendImage,C=G.index,F={},D;B.imageId=G.serverId;if(B&&B.metadata){if(!p.isUndef(B.metadata.width)){F.width=B.metadata.width}if(!p.isUndef(B.metadata.imageWidth)){F.width=B.metadata.imageWidth}if(!p.isUndef(B.metadata.height)){F.height=B.metadata.height}if(!p.isUndef(B.metadata.imageHeight)){F.height=B.metadata.imageHeight}if(!p.isUndef(B.metadata.bitDepth)){F.bitDepth=B.metadata.bitDepth}if(!p.isUndef(B.metadata.imageBitDepth)){F.bitDepth=B.metadata.imageBitDepth}if(!p.isUndef(B.metadata.resolutionX)){F.resolutionX=B.metadata.resolutionX}if(!p.isUndef(B.metadata.imageXResolution)){F.resolutionX=B.metadata.imageXResolution}if(!p.isUndef(B.metadata.resolutionY)){F.resolutionY=B.metadata.resolutionY}if(!p.isUndef(B.metadata.imageYResolution)){F.resolutionY=B.metadata.imageYResolution}delete B.metadata}if(B.dataType=="url"||!("srcId" in B)){if("src" in B){G.imageUrl=B.src;delete B.src}if("imageUrl" in B){G.imageUrl=B.imageUrl;delete B.imageUrl}return H.AppendImage(G,F)}if(E==false&&H.GetHowManyImagesInBuffer()==0){D=H.mydvs.DataControl.appendSync("file1",[{oriData:null,minData:null,metadata:F,customData:B}]);G.uuid=D[0];H.UpdateInfo(true);return D[0]}else{D=H.mydvs.DataControl.insertSync("file1",[{oriData:null,minData:null,metadata:F,customData:B}],C);G.uuid=D[0];H.UpdateInfo(true);return D[0]}};o.prototype.UpdateImage=function(H,B){var I=this,C=H.imageUrl,F=H.minImageUrl,D=H.serverId,E=H.uuid,G={};if(B){if(!p.isUndef(B.width)){G.width=B.width}if(!p.isUndef(B.height)){G.height=B.height}if(!p.isUndef(B.bitDepth)){G.bitDepth=B.bitDepth}if(!p.isUndef(B.resolutionX)){G.resolutionX=B.resolutionX}if(!p.isUndef(B.resolutionY)){G.resolutionY=B.resolutionY}}if(!E||E==""||E==-1){p.Errors.IndexOutOfRange(I._stwain);return false}I._UpdateImageInner(E,{oriData:C,minData:F,customData:{imageId:D},metadata:G});I.UpdateInfo(false,true);return E};o.prototype.MobileUpdateImage=function(H,B){var I=this,D=H.index,E=H.uuid,G={},F={};if(!E||E==""||E==-1){p.Errors.IndexOutOfRange(I._stwain);return false}G=I.GetMetaDataByIndex(D);if(G&&"metadata" in B&&B.metadata){if(!p.isUndef(B.metadata.width)){G.width=B.metadata.width}if(!p.isUndef(B.metadata.imageWidth)){G.width=B.metadata.imageWidth}if(!p.isUndef(B.metadata.height)){G.height=B.metadata.height}if(!p.isUndef(B.metadata.imageHeight)){G.height=B.metadata.imageHeight}if(!p.isUndef(B.metadata.bitDepth)){G.bitDepth=B.metadata.bitDepth}if(!p.isUndef(B.metadata.imageBitDepth)){G.bitDepth=B.metadata.imageBitDepth}if(!p.isUndef(B.metadata.resolutionX)){G.resolutionX=B.metadata.resolutionX}if(!p.isUndef(B.metadata.imageXResolution)){G.resolutionX=B.metadata.imageXResolution}if(!p.isUndef(B.metadata.resolutionY)){G.resolutionY=B.metadata.resolutionY}if(!p.isUndef(B.metadata.imageYResolution)){G.resolutionY=B.metadata.imageYResolution}}if(B.dataType=="url"||!("srcId" in B)){if("src" in B){H.imageUrl=B.src}if("imageUrl" in B){H.imageUrl=B.imageUrl}return I.UpdateImage(H,G)}if(B&&B.src&&B.srcId){F=I.myViewer.getCustomDataByIndex(D);if(F){F.src=B.src;F.srcId=B.srcId;if(!p.isUndef(B.imgType)){F.imgType=B.imgType}var C={};if(F){C.customData=F;C.metadata=G;I._UpdateImageInner(E,C)}}I.UpdateInfo(false,true)}return E};o.prototype._UpdateImageInner=function(C,B){var D=this;D.mydvs.DataControl.updateSync(C,B);return};o.prototype.RemoveByIndex=function(D){var E=this,C;if(D<0||D>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);return false}if(E.bShowImageEdit&&E._imageEditorInner){if(E._imageEditorInner._IfChangedWithinTheEditor==true){if(E._imageEditorInner.iChangedIndex!=D){if(E._imageEditorInner.iChangedIndex>D){E._imageEditorInner.iChangedIndex--}}else{E._imageEditorInner._IfChangedWithinTheEditor=false;E._imageEditorInner.iChangedIndex=-1;E._imageEditorInner.OnCloseInstall()}}}var B=[];B.push(D);C=E.myViewer.removeSync(B);if(C){E.UpdateInfo(true)}else{p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}return C};o.prototype.RemoveAllImages=function(){var C=this,B;if(C.bShowImageEdit&&C._imageEditorInner){if(C._imageEditorInner._IfChangedWithinTheEditor==true){C._imageEditorInner._IfChangedWithinTheEditor=false;C._imageEditorInner.iChangedIndex=-1;C._imageEditorInner.OnCloseInstall()}}B=C.myViewer.removeAllSync();if(B){C.UpdateInfo();if(C.bShowImageEdit&&C._imageEditorInner){C._imageEditorInner.updateMode()}}else{p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.SetCurrentIndex=function(C){var E=this,B=false;if(C<0||C>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);Dynamsoft.Lib.hideMask();return false}var D=/^(\d+)$/;if(!D.test(C)||C<0){p.Errors.MobileServer_InvalidIndex(E._stwain);Dynamsoft.Lib.hideMask();return false}B=E.myViewer.setCurrentIndex(C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}E.UpdateInfo(true,true);return B};o.prototype.OnlySetCurrentIndex=function(C){var D=this,B=false;if(C<0||C>=D.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(D._stwain);return false}B=D.myViewer.setCurrentIndex(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return B};o.prototype.GetCurrentIndex=function(){var C=this,B=-1;if(C.GetHowManyImagesInBuffer()>0){B=C.myViewer.getCurrentIndex();if(p.isUndef(B)||B<0){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}}return B};o.prototype.SetSelectedindexes=function(C){var D=this,B=false;B=D.myViewer.setSelectedIndexes(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return B};o.prototype.GetSelectedindexes=function(){var B=this;return B.myViewer.getSelectedIndexes()};o.prototype.GoToPage=function(C){var E=this,B=false;if(C<0||C>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);Dynamsoft.Lib.hideMask();return -1}var D=/^(\d+)$/;if(!D.test(C)||C<0){p.Errors.MobileServer_InvalidIndex(E._stwain);Dynamsoft.Lib.hideMask();return -1}B=E.myViewer.gotoPage(C);if(B<0){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}E.UpdateInfo(true,true);return B};o.prototype.SetSelectedImageArea=function(H,G,E,C){var I=this,B=false,D=[];if(!I._NouiNotSupport("setSelectedAreas")){return false}var F={};F.left=H;F.top=G;F.width=E-H;F.height=C-G;D.push(F);B=I.myViewer.setSelectedBoxes(D,false);if(!B){p.Errors.WebviewerError(I._stwain,I.mydvs.Error.errorMessage,I.mydvs.Error.errorCode)}return B};o.prototype.SetSelectionRectAspectRatio=function(B){var C=this;if(!C._NouiNotSupport("selectionRectAspectRatio")){return false}C.myViewer.selectionBoxAspectRatio=B;return true};o.prototype.GetSelectionRectAspectRatio=function(){var B=this;if(!B._NouiNotSupport("selectionRectAspectRatio")){return""}return B.myViewer.selectionBoxAspectRatio};o.prototype.ZoomIn=function(){var C=this,B=false;B=C.myViewer.zoomIn();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.ZoomOut=function(){var C=this,B=false;B=C.myViewer.zoomOut();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.SetZoom=function(F,B,E){var D=this,C=false;if(!D._NouiNotSupport("zoom")){return false}if(B&E){C=D.myViewer.zoomTo(F,B,E)}else{C=D.myViewer.zoom=F}if(!C){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return C};o.prototype.GetZoom=function(){var B=this;if(!B._NouiNotSupport("zoom")){return""}return B.myViewer.zoom};o.prototype.SetFitType=function(C){var D=this,B="window";if(!D._NouiNotSupport("fitType")){return false}if(!p.isUndefined(C)){if(C=="width"||C=="height"||C=="window"){B=C}else{p.Errors.InvalidValue(D._stwain);return false}}D.myViewer.fitType=B;return true};o.prototype.GetMouseShape=function(){var D=this,C,B;B=D.GetCursor();switch(B){case"default":C=Dynamsoft.DWT.EnumDWT_MouseShape.Default;break;case"pointer":C=Dynamsoft.DWT.EnumDWT_MouseShape.Hand;break;case"crosshair":C=Dynamsoft.DWT.EnumDWT_MouseShape.Crosshair;break;case"zoom-in":C=Dynamsoft.DWT.EnumDWT_MouseShape.Zoom;break;default:C=Dynamsoft.DWT.EnumDWT_MouseShape.Crosshair}return C};o.prototype.SetMouseShape=function(C){var D=this;var B;switch(C){case Dynamsoft.DWT.EnumDWT_MouseShape.Default:B="default";break;case Dynamsoft.DWT.EnumDWT_MouseShape.Hand:B="pointer";break;case Dynamsoft.DWT.EnumDWT_MouseShape.Crosshair:B="crosshair";break;case Dynamsoft.DWT.EnumDWT_MouseShape.Zoom:B="zoom-in";break;default:B="crosshair"}D.SetCursor(B);return true};o.prototype.SetImageMargin=function(B){var C=this;return C.SetPageMargin(B)};o.prototype.GetImageMargin=function(){var B=this;return B.GetPageMargin()};o.prototype.SetSelectionImageBorderColor=function(C){var E=this,D=C,B;if(Dynamsoft.Lib.isNumber(D)){D=Dynamsoft.Lib.getColor(D)}if(D.indexOf("1px solid")==-1){D="1px solid "+D}return E.SetSelectedPageBorder(D)};o.prototype.GetSelectedPageBorder=function(){var B=this;if(!B._NouiNotSupport("selectedPageBorder")){return""}return B.myViewer.selectedPageBorder};o.prototype.SetSelectedPageBorder=function(B){var C=this;if(!C._NouiNotSupport("selectedPageBorder")){return false}C.myViewer.selectedPageBorder=B;if(C._thumbnailViewer){C.SetThumSelectedPageBorder(B)}return true};o.prototype.GetSelectedPageBackground=function(){var B=this;if(!B._NouiNotSupport("selectedPageBackground")){return""}return B.myViewer.selectedPageBackground};o.prototype.SetSelectedPageBackgroundInner=function(B){var C=this;C.myViewer.selectedPageBackground=B;return true};o.prototype.SetSelectedPageBackground=function(B){var C=this;if(!C._NouiNotSupport("selectedPageBackground")){return false}C.SetSelectedPageBackgroundInner(B);if(C._thumbnailViewer){C.SetThumSelectedPageBackground(B)}return true};o.prototype.GetShowPageNumber=function(){var B=this;if(!B._NouiNotSupport("showPageNumber")){return""}return B.myViewer.showPageNumber};o.prototype.SetShowPageNumberInner=function(B){var C=this;C.myViewer.showPageNumber=B;return true};o.prototype.SetShowPageNumber=function(B){var C=this;if(!C._NouiNotSupport("showPageNumber")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.SetShowPageNumberInner(B);if(C._thumbnailViewer){C.SetThumShowPageNumber(B)}return true};o.prototype.GetAutoChangeIndex=function(){var B=this;if(!B._NouiNotSupport("autoChangeIndex")){return""}return B.myViewer.autoChangeIndex};o.prototype.SetAutoChangeIndex=function(B){var C=this;if(!C._NouiNotSupport("autoChangeIndex")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.myViewer.autoChangeIndex=B;return true};o.prototype.SetHoverPageBackground=function(B){var C=this;C.myViewer.hoverPageBackground=B;return true};o.prototype.SetBackground=function(B){var D=this,C=B;if(!D._NouiNotSupport("background")){return false}if(Dynamsoft.Lib.isNumber(C)){C=Dynamsoft.Lib.getColor(C)}D.myViewer.canvasBackground=C;if(D._thumbnailViewer){D.SetThumBackground(C)}return true};o.prototype.GetBackground=function(){var B=this;if(!B._NouiNotSupport("background")){return""}return B.myViewer.canvasBackground};o.prototype.SetViewerBorder=function(B){var D=this;var C="1px solid"+B;return D.SetBorder(C)};o.prototype.SetWidth=function(C){var D=this;if(!D._NouiNotSupport("width")){return false}var B=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!B.test(C)||C<=0){p.Errors.MobileServer_InvalidWidth(D._stwain);return false}D.myViewer.width=C;return true};o.prototype.GetWidth=function(){var B=this;if(!B._NouiNotSupport("width")){return""}return B.myViewer.width};o.prototype.SetWidthInner=function(C,D){var E=this;if(D){E.myViewer.width=C}else{if(p.isString(C)&&C.indexOf("%")>=0){var B=p.one("#"+E._stwain._containerID);E.myViewer.width=parseInt(p.css(B,"width")*parseInt(C)/100)}else{E.myViewer.width=C}}return true};o.prototype.GetHeight=function(){var B=this;if(!B._NouiNotSupport("height")){return""}return B.myViewer.height};o.prototype.SetHeight=function(B){var D=this;if(!D._NouiNotSupport("height")){return false}var C=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!C.test(B)||B<=0){p.Errors.MobileServer_InvalidHeight(D._stwain);return false}D.myViewer.height=B;return true};o.prototype.GetIdPostfix=function(){var B=this;if(!B._NouiNotSupport("idPostfix")){return""}return B.myViewer.postfix};o.prototype.SetHeightInner=function(B,D){var E=this;if(D){E.myViewer.height=B}else{if(p.isString(B)&&B.indexOf("%")>=0){var C=p.one("#"+E._stwain._containerID);E.myViewer.height=parseInt(p.css(C,"height")*parseInt(B)/100)}else{E.myViewer.height=B}}return true};o.prototype.SwitchImage=function(D,C){var E=this,B=false;if(D<0||D>=E.GetHowManyImagesInBuffer()||C<0||C>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);return false}B=E.myViewer.switchPage(D,C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}return B};o.prototype.MoveImage=function(D,C){var E=this,B=false;if(D<0||D>=E.GetHowManyImagesInBuffer()||C<0||C>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);return false}B=E.myViewer.movePage(D,C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}return B};o.prototype.SetIfSinglePageMode=function(B){var C=this;if(!C._NouiNotSupport("singlePageMode")){return false}if(B){C.myViewer.displayMode="single"}else{C.myViewer.displayMode="continuous"}return true};o.prototype.GetIfSinglePageMode=function(){var B=this;if(!B._NouiNotSupport("singlePageMode")){return false}if(B.myViewer.displayMode=="continuous"){return false}else{return true}};o.prototype.SetAcceptDrop=function(B){var C=this;if(!C._NouiNotSupport("acceptDrop")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.acceptDrop=B;return true};o.prototype.GetAcceptDrop=function(){var B=this;if(!B._NouiNotSupport("acceptDrop")){return""}return B.acceptDrop};o.prototype.SetAllowSlide=function(B){var C=this;if(!C._NouiNotSupport("allowSlide")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.myViewer.allowSlide=B;return true};o.prototype.GetAllowSlide=function(){var B=this;if(!B._NouiNotSupport("allowSlide")){return""}return B.myViewer.allowSlide};o.prototype.SetViewMode=function(D,C){var F=this,B=false,E="vertical";if(!F._NouiNotSupport("setViewMode")){return false}if(!p.isNumber(D)||!p.isNumber(C)){p.Errors.InvalidValue(F._stwain);return false}if(F._thumbnailViewer){F._thumbnailViewer.hide()}F.clearSelectedAreas();if(D==-1&&C==-1){F.SetIfSinglePageMode(true);C=0-C;D=0-D;B=true}else{if(C<0){E="horizontal";C=0-C}if(D<0){D=0-D}F.myViewer.scrollDirection=E;B=F.myViewer.setViewMode(D,C);if(!B){p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode)}F.SetIfSinglePageMode(false);if(F.GetCursor()=="zoom-in"){F.SetCursor("crosshair")}}return B};o.prototype.RemoveImageTag=function(D){var E=this,C,B=false;if(D<0||D>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);return false}C=E.GetUidByIndex(D);if(C&&C!=""&&C!=-1){B=E.mydvs.Tag.removePageTag(C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}return B}else{p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode);return false}};o.prototype.FilterImagesByTag=function(C,E,D){var F=this,B=false;if(!C||C.length==0){F._currentTag="";B=F.mydvs.File.openAll();if(B){F.mydvs.Tag.setDefaultTag("");if(p.isFunction(E)){E()}}else{p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode);if(p.isFunction(D)){D(F.mydvs.Error.errorCode,F.mydvs.Error.errorMessage)}}}else{F._currentTag=C;B=F.mydvs.Tag.openTag(C);if(B){if(p.isFunction(E)){E()}}else{p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode);if(p.isFunction(D)){D(F.mydvs.Error.errorCode,F.mydvs.Error.errorMessage)}}}return true};o.prototype.ClearFilter=function(){var C=this,B=false;C._currentTag="";B=C.mydvs.File.openAll();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return true};o.prototype.GetTagContents=function(C){var F=this,B=false,E=[],D;if(C.length>0){B=F.mydvs.Tag.getTagContents(C)}else{B=F.mydvs.DataControl.getAllContents()}if(!B){p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode)}return B};o.prototype.SetDefaultTag=function(C){var D=this,B=false;D._currentTag=C;D.mydvs.Tag.addTag(C);B=D.mydvs.Tag.setDefaultTag(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return B};o.prototype.AddImageTag=function(F,D){var G=this,B,E;G.mydvs.Tag.addTag(D);G._currentTag=D;for(var C=0;C<F.length;C++){B=F[C];if(B>=0){E=G.GetUidByIndex(B);if(E&&E!=""&&E!=-1){G.mydvs.Tag.addPageTag(E,D)}}}return true};o.prototype.GetCurrentTag=function(){var C=this,B;return C._currentTag};o.prototype.RenameTag=function(C,E){var D=this,B=false;D._currentTag=E;B=D.mydvs.Tag.renameTag(C,E);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}else{D.mydvs.Tag.setDefaultTag(E)}return B};o.prototype.RemoveTag=function(C,F){var H=this,B=false,E=false,D;D=H.mydvs.Tag.getCurrentTag();if(D){E=D.name==C?true:false}if(p.isUndefined(F)){B=H.mydvs.Tag.removeTag(C);if(E){H.ClearFilter()}}else{if(!p.isArray(F)){p.Errors.IndicesNotArray(H);return false}if(!H._stwain._checkIndices(F)){return false}var G=[];p.each(F,function(I){var J=H.GetUidByIndex(I);if(J!=-1){G.push(J)}});p.each(G,function(I){B=H.mydvs.Tag.removePageTag(I,C);if(!B){return false}})}if(!B){p.Errors.WebviewerError(H._stwain,H.mydvs.Error.errorMessage,H.mydvs.Error.errorCode)}return B};o.prototype.GetTagList=function(){var F=this,D=[],B=[],C,E;D=F.mydvs.Tag.getTagList();if(D){p.each(D,function(I){C=[];E={};if(I.uids){for(var G=0;G<I.uids.length;G++){var H=I.uids[G];if(H){E=F.myViewer.getCustomDataByUid(H);if(E){C.push(F._stwain.objImageIndexManager.convertServerIdToGuid(E.imageId))}}}}I.imageIds=C;delete I.uids;B.push(I)})}else{B=[]}return B};o.prototype.OverlayRectangle=function(K,H,G,J,D,C,E){var I=this,B=false,F=C;if(K<0||K>=I.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(I._stwain);return false}if(p.isNumber(F)){F=p.getColor(F)}B=I.myViewer.overlayRectangle(K,H,G,(J-H),(D-G),F,E);if(!B){p.Errors.WebviewerError(I._stwain,I.mydvs.Error.errorMessage,I.mydvs.Error.errorCode)}return B};o.prototype.SetOperationMode=function(C){var D=this,B;D.myViewer.operationMode=C};o.prototype.GetIfShowVideoContainer=function(){var B=this;return B.myViewer.showVideoContainer};o.prototype.ShowVideoContainer=function(C){var D=this,B;if(D.myViewer.showVideoContainer==C){return true}if(D._thumbnailViewer){if(C){D.OldShowThumbnail=D.myThumbnailViewer.showThumbnail;D.myThumbnailViewer.showThumbnail=false}else{D.myThumbnailViewer.showThumbnail=D.OldShowThumbnail}}D.myViewer.showVideoContainer=C;return true};o.prototype.UpdateVideoContainer=function(C){var D=this,B;B=D.myViewer.updateVideoContainer(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return B};o.prototype.GetImageData=function(B){var C=this;return C.mydvs.DataControl.getData(B)};o.prototype.GetMinPageData=function(B){var C=this;if(C._imageEditorInner){return C._imageEditorInner.myImageEditor.getMinPageData()}return NaN};o.prototype.SetLogLevel=function(B){var C=this;C.mydvs.Log.setLogLevel(B)};o.prototype.SetLogFunc=function(B){var C=this;C.mydvs.Log.setLogFunc(B)};o.prototype.SetThumLocation=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.location")){return false}if(C.myThumbnailViewer){switch(B){case"left":C.myThumbnailViewer.location="horizontal";C.myThumbnailViewer.sequence=-1;break;case"right":C.myThumbnailViewer.location="horizontal";C.myThumbnailViewer.sequence=1;break;case"top":C.myThumbnailViewer.location="vertical";C.myThumbnailViewer.sequence=-1;break;case"bottom":C.myThumbnailViewer.location="vertical";C.myThumbnailViewer.sequence=1;break;default:C.myThumbnailViewer.location="horizontal";C.myThumbnailViewer.sequence=-1}return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumLocation=function(){var C=this,B="left";if(!C._NouiNotSupport("ThumbnailViewer.location")){return false}if(C.myThumbnailViewer){if(C.myThumbnailViewer.location=="vertical"){if(C.myThumbnailViewer.sequence>0){B="bottom"}else{B="top"}}else{if(C.myThumbnailViewer.sequence>0){B="right"}else{B="left"}}return B}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return""}};o.prototype.SetThumSize=function(B){var D=this;if(!D._NouiNotSupport("ThumbnailViewer.size")){return false}var C=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!C.test(B)||B<0){p.Errors.InvalidValue(D._stwain);return false}if(D.myThumbnailViewer){D.myThumbnailViewer.size=B;return true}else{if(D.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(D._stwain)}else{p.Errors.ThumbnailViewerNotExist(D._stwain)}return false}};o.prototype.GetThumSize=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.size")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.size}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return 0}};o.prototype.SetThumScrollDirection=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.scrollDirection")){return false}if(B!="horizontal"){B="vertical"}if(C.myThumbnailViewer){C.myThumbnailViewer.scrollDirection=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumScrollDirection=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.scrollDirection")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.scrollDirection}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumShowPageNumber=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.showPageNumber")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}if(C.myThumbnailViewer){C.myThumbnailViewer.showPageNumber=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumShowPageNumber=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.showPageNumber")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.showPageNumber}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return -1}};o.prototype.SetThumMargin=function(B){var D=this;if(!D._NouiNotSupport("ThumbnailViewer.margin")){return false}var C=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!C.test(B)||B<0){p.Errors.InvalidValue(D._stwain);return false}if(D.myThumbnailViewer){D.myThumbnailViewer.pageMargin=B;return true}else{if(D.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(D._stwain)}else{p.Errors.ThumbnailViewerNotExist(D._stwain)}return false}};o.prototype.GetThumMargin=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.margin")){return false}if(B.myThumbnailViewer){if(B.myThumbnailViewer.columns==B.myThumbnailViewer.rows&&B.myThumbnailViewer.rows==1){return 0}else{return B.myThumbnailViewer.pageMargin}}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return 0}};o.prototype.SetThumBorder=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.border")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.border=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumBorder=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.border")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.border}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.background")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.background=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.background")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.background}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumPageBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.pageBackground")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.pageBackground=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumPageBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.pageBackground")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.pageBackground}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumPageBorder=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.pageBorder")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.pageBorder=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumPageBorder=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.pageBorder")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.pageBorder}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumHoverBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.hoverPageBackground")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.hoverPageBackground=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return""}};o.prototype.GetThumHoverBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.hoverPageBackground")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.hoverPageBackground}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumHoverBorder=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.hoverPageBorder")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.hoverPageBorder=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumHoverBorder=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.hoverPageBorder")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.hoverPageBorder}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumPlaceholderBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.placeholderBackground")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.placeholderBackground=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumPlaceholderBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.placeholderBackground")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.placeholderBackground}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumSelectedPageBorder=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.selectedPageBorder")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.selectedPageBorder=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumSelectedPageBorder=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.selectedPageBorder")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.selectedPageBorder}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumSelectedPageBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.selectedPageBackground")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.selectedPageBackground=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumSelectedPageBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.selectedPageBackground")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.selectedPageBackground}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumAllowKeyboardControl=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}if(C.myThumbnailViewer){C.myThumbnailViewer.allowKeyboardControl=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumAllowKeyboardControl=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.allowKeyboardControl}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return false}};o.prototype.SetThumAllowDrag=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.allowDrag")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}if(C.myThumbnailViewer){C.myThumbnailViewer.allowPageDragging=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumAllowDrag=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.allowPageDragging")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.allowPageDragging}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return false}};o.prototype.SetThumAllowResize=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.allowResizing")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}if(C.myThumbnailViewer){C.myThumbnailViewer.allowResizing=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumAllowResize=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.allowResizing")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.allowResizing}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return false}};o.prototype.SetThumAutoChangeIndex=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.autoChangeIndex")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.autoChangeIndex=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumAutoChangeIndex=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.autoChangeIndex")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.autoChangeIndex}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.render=function(){var B=this;if(!B._NouiNotSupport("render")){return false}return B.myViewer.render()};o.prototype.getUISettings=function(){var C=this;if(!C._NouiNotSupport("getUISettings")){return false}var B=Dynamsoft.Lib.clone(C.myViewer.uiConfig);delete B.tag;delete B.tree;delete B.cropStyle;delete B.thumbnail;return B};o.prototype.resetUISettings=function(){var D=this,B,C={};if(D.resetUISettingsInner(true)){C=D.getUISettings()}return C};o.prototype.resetUISettingsInner=function(B,D,H){var I=this,C,F={};if(!I._NouiNotSupport("resetUISetting")){return false}var E=z;if(B){E.width=I.initWidth;E.height=I.initHeight}else{if(!p.isUndefined(D)){E.width=D}else{E.width=I.initWidth}if(!p.isUndefined(H)){E.height=H}else{E.height=I.initHeight}}var G=I.myViewer.showViewer;C=I.myViewer.updateUISetting(E);if(!C){p.Errors.WebviewerError(I._stwain,I.mydvs.Error.errorMessage,I.mydvs.Error.errorCode)}else{if(!G){I.hide()}I.SetFitType("window");I.SetIfSinglePageMode(false);if(!I._stwain._isPC()){I.SetOperationMode(0)}else{I.SetOperationMode(1)}I.OnlySetCurrentIndex(I.GetCurrentIndex())}return C};o.prototype.updateUISettings=function(C){var F=this,B,D={};if(!F._NouiNotSupport("updateUISettings")){return false}var E=F.myViewer.showViewer;B=F.myViewer.updateUISetting(C);if(!B){p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode)}else{if(!E){F.hide()}D=F.getUISettings();if(D.canvasConfig.canvasMouseShape=="crosshair"){F.SetOperationMode(1)}else{F.SetOperationMode(0)}}return D};o.prototype.bindCamera=function(){var C=this,B;if(!Dynamsoft.CameraViewer){p.Errors.CameraRequired(C._stwain);return false}B=C.myViewer.bindCamera(Dynamsoft.CameraViewer);if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.showVideo=function(E,C,F,D){var G=this,B;if(!G._NouiNotSupport("showVideo")){return false}B=G.myViewer.showVideo(E,C,F,D);if(!B){p.Errors.WebviewerError(G._stwain,G.mydvs.Error.errorMessage,G.mydvs.Error.errorCode)}return B};o.prototype.closeVideo=function(){var C=this,B;if(!C._NouiNotSupport("closeVideo")){return false}B=C.myViewer.closeVideo();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.GetBorder=function(){var B=this;if(!B._NouiNotSupport("border")){return""}return B.myViewer.outerBorder};o.prototype.SetBorder=function(B){var C=this;if(!C._NouiNotSupport("border")){return false}C.myViewer.outerBorder=B;return true};o.prototype.GetInnerBorder=function(){var B=this;if(!B._NouiNotSupport("innerBorder")){return""}return B.myViewer.canvasBorder};o.prototype.SetInnerBorder=function(B){var C=this;if(!C._NouiNotSupport("innerBorder")){return false}C.myViewer.canvasBorder=B;return true};o.prototype.GetSelectedAreaBorderColor=function(){var B=this;if(!B._NouiNotSupport("selectedAreaBorderColor")){return""}return B.myViewer.selectedBoxLineColor};o.prototype.SetSelectedAreaBorderColor=function(B){var C=this;if(!C._NouiNotSupport("selectedAreaBorderColor")){return false}C.myViewer.selectedBoxLineColor=B;return true};o.prototype.GetCursor=function(){var B=this;if(!B._NouiNotSupport("cursor")){return""}return B.myViewer.canvasMouseShape};o.prototype.SetCursor=function(C){var D=this;if(!D._NouiNotSupport("cursor")){return false}if(C=="zoom-in"&&!D.GetIfSinglePageMode()){p.Errors.CursorInvalidMode(D._stwain);return false}var B="default";switch(C){case"default":B="default";D.SetOperationMode(0);break;case"pointer":B="pointer";D.SetOperationMode(0);break;case"crosshair":B="crosshair";D.SetOperationMode(1);break;case"zoom-in":B="zoom-in";D.SetOperationMode(2);break;default:B="crosshair";D.SetOperationMode(1)}D.myViewer.canvasMouseShape=B;return true};o.prototype.GetIfAutoScroll=function(){var B=this;if(!B._NouiNotSupport("ifAutoScroll")){return""}return B.myViewer.showLatestPage};o.prototype.SetIfAutoScroll=function(B){var C=this;if(!C._NouiNotSupport("ifAutoScroll")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.myViewer.showLatestPage=B;if(C._imageEditorInner){C._imageEditorInner.SetIfAutoScroll()}return true};o.prototype.GetPageMargin=function(){var B=this;if(!B._NouiNotSupport("pageMargin")){return 0}return B.myViewer.pageMargin};o.prototype.SetPageMargin=function(B){var D=this;if(!D._NouiNotSupport("pageMargin")){return false}var C=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!C.test(B)||B<0){p.Errors.InvalidValue(D._stwain);return false}D.myViewer.pageMargin=B;return true};o.prototype.setButtonClass=function(B,E){var D=this,C;if(!D._NouiNotSupport("setButtonClass")){return false}C=D.myViewer.setButtonClass(B,E);if(!C){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return C};o.prototype.clearSelectedAreas=function(){var C=this,B;if(!C._NouiNotSupport("clearSelectedAreas")){return false}if(C.GetHowManyImagesInBuffer()<=0){return true}B=C.myViewer.clearSelectedBoxes();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.setSelectedAreas=function(C){var G=this,B,E=[],F;if(!G._NouiNotSupport("setSelectedAreas")){return false}if(p.isUndefined(C)||C.length==0){p.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(G._stwain);return false}if(C.length&&C.length>0){for(var D=0;D<C.length;D++){F={};if(!p.isUndefined(C[D])&&!p.isUndefined(C[D].left)&&!p.isUndefined(C[D].top)&&!p.isUndefined(C[D].right)&&!p.isUndefined(C[D].bottom)){if(C[D].left<0||C[D].top<0||C[D].right<0||C[D].bottom<0){continue}F.left=C[D].left;F.top=C[D].top;if((C[D].right-C[D].left)<0||(C[D].bottom-C[D].top)<0){continue}F.width=C[D].right-C[D].left;F.height=C[D].bottom-C[D].top;E.push(F)}}}else{F={};if(!p.isUndefined(C)&&!p.isUndefined(C.left)&&!p.isUndefined(C.top)&&!p.isUndefined(C.right)&&!p.isUndefined(C.bottom)){if(C.left<0||C.top<0||C.right<0||C.bottom<0){p.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(G._stwain);return false}F.left=C.left;F.top=C.top;if((C.right-C.left)<0||(C.bottom-C.top)<0){p.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(G._stwain);return false}F.width=C.right-C.left;F.height=C.bottom-C.top;E.push(F)}}if(E.length==0){p.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(G._stwain);return false}B=G.myViewer.setSelectedBoxes(E,true);if(!B){p.Errors.WebviewerError(G._stwain,G.mydvs.Error.errorMessage,G.mydvs.Error.errorCode)}return B};o.prototype._NouiNotSupport=function(B){var C=this;C._stwain._resetErr();if(!C._stwain._isValid()){return false}if(C._stwain._isNoViewer()){C._stwain._nouiNotSupport(B);return false}return true};o.prototype.pageChange=function(C){var F=this,E,B=F.GetHowManyImagesInBuffer();p.log("OnPagination");if(B<=0){p.Errors.NoImage(F._stwain);d.output(F,"No image in Buffer");return}else{if(B==1){return}}var D=/^\d+$/;if(!D.test(C)||C<=0){alert(f.CustomizableDisplayInfo.errorMessages.invalidIndex);return}E=parseInt(C)-1;if(E<0){E=0}else{if(E>=B){E=B-1}}if(E!=F.GetCurrentIndex()){F.go(E)}};o.prototype.first=function(){var D=this,C,B=D.GetHowManyImagesInBuffer();if(!D._NouiNotSupport("first")){return -1}if(B<=0){p.Errors.NoImage(D._stwain);d.output(D,"No image in Buffer");return -1}else{if(B==1){return 0}}C=0;D.go(C);return C};o.prototype.last=function(){var D=this,C,B=D.GetHowManyImagesInBuffer();if(!D._NouiNotSupport("last")){return -1}if(B<=0){p.Errors.NoImage(D._stwain);d.output(D,"No image in Buffer");return -1}else{if(B==1){return 0}}C=B-1;D.go(C);return C};o.prototype.previous=function(){var D=this,C,B=D.GetHowManyImagesInBuffer();if(!D._NouiNotSupport("previous")){return -1}if(B<=0){p.Errors.NoImage(D._stwain);d.output(D,"No image in Buffer");return -1}else{if(B==1){return 0}}C=D.GetCurrentIndex()-1;if(C<0){C=0}D.go(C);return C};o.prototype.next=function(){var D=this,C,B=D.GetHowManyImagesInBuffer();if(!D._NouiNotSupport("next")){return -1}if(B<=0){p.Errors.NoImage(D._stwain);d.output(D,"No image in Buffer");return -1}else{if(B==1){return 0}}C=D.GetCurrentIndex()+1;if(C>=B){C=B-1}D.go(C);return C};o.prototype.go=function(C){var E=this,B,D=C;if(!E._NouiNotSupport("go")){return -1}if(E.GetHowManyImagesInBuffer()<=0){p.Errors.NoImage(E._stwain);d.output(E,"No image in Buffer");return -1}if(E._imageEditorInner){B=E._imageEditorInner.go(C)}else{D=E.__goInner(C)}return D};o.prototype.__goInner=function(C){var D=this,B;if(typeof(C)!=="undefined"){if(C==-1){p.Errors.IndexOutOfRange(D._stwain);return -1}Dynamsoft.Lib.showMask();B=D.GoToPage(C)}return B};o.prototype.topPageChanged=function(C,B){var D=this;D._UIView.__fireEvent("onTopImageInTheViewChanged",{index:C,bByScrollBar:B})};o.prototype.bufferChanged=function(E){var I=this,N,M=[],K=-1,H=[];for(var F=0;F<I.GetHowManyImagesInBuffer();F++){N=I.GetCustomDataByIndex(F);if(N){M.push(I._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId))}}E.imageIds=M;if(E.currentUid){var J=I.GetIndexByUid(E.currentUid);if(J>=0){N=I.GetCustomDataByIndex(J);if(N){K=I._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId);var G=I._stwain._ImgManager._UIView.GetDataImageControl(N.imageId);if(G.uuid==-1){G.uuid=E.currentUid}}}}E.currentId=K;if(E.selectedUids){for(var D=0;D<E.selectedUids.length;D++){var B=E.selectedUids[D];if(B){var L=I.GetIndexByUid(E.selectedUids[D]);if(L>=0){N=I.GetCustomDataByIndex(L);if(N){H.push(I._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId));var C=I._stwain._ImgManager._UIView.GetDataImageControl(N.imageId);if(C.uuid==-1){C.uuid=E.currentUid}}}}}}E.selectedIds=H;delete E.uids;delete E.currentUid;delete E.selectedUids;I._UIView.__fireEvent("onBufferChanged",E)};o.prototype.click=function(B){var C=this;C.UpdateInfo(true,false,true);C._UIView.__fireEvent("onMouseClick",{e:B,x:B.imageX,y:B.imageY,index:C.GetCurrentIndex()})};o.prototype.rightclick=function(B){var C=this;C._UIView.__fireEvent("onMouseRightClick",{e:B,x:B.imageX,y:B.imageY,index:C.GetCurrentIndex()})};o.prototype.dblclick=function(B){var C=this;C._UIView.__fireEvent("onMouseDoubleClick",{e:B,x:B.imageX,y:B.imageY,index:C.GetCurrentIndex()})};o.prototype.mousemove=function(B){var C=this;C._UIView.__fireEvent("onMouseMove",{e:B,x:B.imageX,y:B.imageY,index:C.GetCurrentIndex()})};o.prototype.pageAreaSelected=function(D,B){var F=this;var C=1;if(B&&B.length>0){var E=B[B.length-1];if(E.index){C=parseInt(E.index)+1}F._UIView.__fireEvent("onImageAreaSelected",{index:D,left:parseInt(E.x),top:parseInt(E.y),right:parseInt(E.x+E.width),bottom:parseInt(E.y+E.height),areaIndex:C})}};o.prototype.pageAreaUnselected=function(B){var C=this;C._UIView.__fireEvent("onImageAreaDeSelected",B)};o.prototype.dragdone=function(B){var C=this;if(p.isFunction(C._stwain.__OnIndexChangeDragDropDone)){C._stwain.__OnIndexChangeDragDropDone(B)}};o.prototype.RegistLoadCallback=function(B){var C=this;if(!C._bRegistedLoad){C._bRegistedLoad=true}return true};o.prototype.onDrop=function(B){var C=this;if(C.acceptDrop){C.dropEvent(B)}};o.prototype.dropEvent=function(E){var K=this,Q,G,I=null;var L=function(R){if(R){p.html5.Funs2.output(null,R+" was loaded successfully!")}if(I!=null){K._stwain.Addon.PDF.SetConvertMode(I)}};var P=function(S,T,R){if(R){p.html5.Funs2.output(null,R+" failed to load. Error code: "+S+"Error String: "+T)}if(I!=null){K._stwain.Addon.PDF.SetConvertMode(I)}};try{var D=E.dataTransfer.files;for(var H=0;H<D.length;H++){Q=D[H];if(Q.type.length==0){var C,N=Q.name.indexOf(".");if(N>0){C=Q.name.substring(N+1)}switch(C){case"bmp":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP;break;case"jpg":case"jpeg":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG;break;case"tif":case"tiff":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF;break;case"png":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG;break;case"pdf":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF;break;case"jp2":case"j2k":case"j2c":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K;break;default:p.html5.Funs2.output(null,Q.name+" failed to load because the file type is not supported!");G=-1;p.Errors.UnrecognizedExt(K._stwain)}}else{switch(Q.type){case"image/bmp":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP;break;case"image/jpeg":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG;break;case"image/tiff":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF;break;case"image/png":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG;break;case"application/pdf":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF;break;case"image/jp2":G=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K;break;default:p.html5.Funs2.output(null,Q.name+" failed to load because the file type is not supported!");G=-1;p.Errors.UnrecognizedExt(K._stwain)}}if(G!=-1){p.showProgress(K._stwain,"DropLoading",true);K._stwain._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);if(K._stwain.Addon&&K._stwain.Addon.PDF){var J=false,B,O;if(K._stwain._isMobileMode()){O=p.License.checkProductKey(K._stwain,{PDFRasterizer:true,Wasm:true},true)}else{O=p.License.checkProductKey(K._stwain,{PDFRasterizer:true},true)}if(O){if(K._stwain._isMobileMode()){J=true}else{I=K._stwain.Addon.PDF.GetConvertMode();B=K._stwain._innerFun("GetAddOnVersion",Dynamsoft.Lib.html5.Funs.makeParams("pdf"));if(p.env.bMac&&B==Dynamsoft.PdfMacVersion){J=true}else{if(p.env.bLinux&&B==Dynamsoft.PdfLinuxVersion){J=true}else{if(B==Dynamsoft.PdfVersion){J=true}}}}if(J){K._stwain.Addon.PDF.SetConvertMode(1)}}}if(K._stwain._isMobileMode()){K._stwain.LoadImageFromBinary(Q,function(){Dynamsoft.Lib.closeProgress()},function(){Dynamsoft.Lib.closeProgress()})}else{var M=new FileReader();M.refFile=D[H];M.readAsDataURL(D[H]);M.onload=function(){var R=M.refFile;K._stwain.__LoadImageFromBytes(R,G,"",true,L,P,0,R.size);M.refFile=null;R=null};M.onerror=function(R){Dynamsoft.Lib.closeProgress();Dynamsoft.Lib.Errors.InvalidFile(K._stwain);K._stwain._errorString=this.error;P({code:K._stwain._errorCode,message:K._stwain._errorString})}}}}}catch(F){p.log(F.stack||F,"error");setTimeout(function(){throw F},0)}};o.prototype.getImageManager=function(){var B=this;return B._ImgManager};o.prototype.on=function(B,D){var C=this;if(B){if(!p.isFunction(D)){p.Errors.CallbackNotAFunction(C._stwain);return}C.myViewer.on(B,D)}};o.prototype.off=function(B,D){var C=this;if(B){if(p.isUndefined(D)){C.myViewer.off(B);if(m.indexOf(B)>=0){C.myViewer.on(B,function(F,E){if(p.isFunction(C[B])){C[B](F,E)}})}}else{if(!p.isFunction(D)){p.Errors.CallbackNotAFunction(C._stwain);return}C.myViewer.off(B,D)}}};o.prototype.initDialogText=function(C,B){var E=this,D=C;if(p.isUndefined(D)){D=B}else{if(p.isUndefined(D.dlgChangeImageSize)){D.dlgChangeImageSize=B.dlgChangeImageSize}else{if(D.dlgChangeImageSize[0].length==0){D.dlgChangeImageSize[0]=B.dlgChangeImageSize[0]}if(D.dlgChangeImageSize[1].length==0){D.dlgChangeImageSize[1]=B.dlgChangeImageSize[1]}if(D.dlgChangeImageSize[2].length==0){D.dlgChangeImageSize[2]=B.dlgChangeImageSize[2]}if(D.dlgChangeImageSize[3].length==0){D.dlgChangeImageSize[3]=B.dlgChangeImageSize[3]}if(D.dlgChangeImageSize[4].length==0){D.dlgChangeImageSize[4]=B.dlgChangeImageSize[4]}}if(p.isUndefined(D.dlgRotateAnyAngle)){D.dlgRotateAnyAngle=B.dlgRotateAnyAngle}else{if(D.dlgRotateAnyAngle[0].length==0){D.dlgRotateAnyAngle[0]=B.dlgRotateAnyAngle[0]}if(D.dlgRotateAnyAngle[1].length==0){D.dlgRotateAnyAngle[1]=B.dlgRotateAnyAngle[1]}if(D.dlgRotateAnyAngle[2].length==0){D.dlgRotateAnyAngle[2]=B.dlgRotateAnyAngle[2]}if(D.dlgRotateAnyAngle[3].length==0){D.dlgRotateAnyAngle[3]=B.dlgRotateAnyAngle[3]}if(D.dlgRotateAnyAngle[4].length==0){D.dlgRotateAnyAngle[4]=B.dlgRotateAnyAngle[4]}}if(p.isUndefined(D.saveChangedImage)){D.saveChangedImage=B.saveChangedImage}else{if(D.saveChangedImage[0].length==0){D.saveChangedImage[0]=B.saveChangedImage[0]}if(D.saveChangedImage[1].length==0){D.saveChangedImage[1]=B.saveChangedImage[1]}if(D.saveChangedImage[2].length==0){D.saveChangedImage[2]=B.saveChangedImage[2]}}if(p.isUndefined(D.selectSource)){D.selectSource=B.selectSource}else{if(D.selectSource[0].length==0){D.selectSource[0]=B.selectSource[0]}if(D.selectSource[1].length==0){D.selectSource[1]=B.selectSource[1]}if(D.selectSource[2].length==0){D.selectSource[2]=B.selectSource[2]}if(D.selectSource[3].length==0){D.selectSource[3]=B.selectSource[3]}}}return D};o.prototype.createImageEditor=function(B){var C=this;if(!C._NouiNotSupport("createImageEditor")){return NaN}if(!C._imageEditor){if(!B){B=y;B.border=C.GetBorder();B.selectionRectAspectRatio=C.GetSelectionRectAspectRatio()}else{if(p.isUndefined(B.border)){B.border=C.GetBorder()}if(p.isUndefined(B.selectionRectAspectRatio)){B.selectionRectAspectRatio=C.GetSelectionRectAspectRatio()}if(p.isUndefined(B.background)){B.background=y.background}if(p.isUndefined(B.topMenuBorder)){B.topMenuBorder=y.topMenuBorder}if(p.isUndefined(B.innerBorder)){B.innerBorder=y.innerBorder}if(p.isUndefined(B.promptToSaveChange)){B.promptToSaveChange=y.promptToSaveChange}if(p.isUndefined(B.buttons)){B.buttons=y.buttons}B.dialogText=C.initDialogText(B.dialogText,y.dialogText)}C._imageEditor=new p.UI.ImageEditor(C,B)}else{p.Errors.ImageEditorExist(C._stwain)}C._imageEditorInner=C._imageEditor._imageEditorInner;C.bShowImageEdit=C._imageEditorInner.bShowImageEdit;return C._imageEditor};o.prototype.createThumbnailViewer=function(B){var C=this;if(!C._NouiNotSupport("createThumbnailViewer")){return NaN}if(!C._thumbnailViewer){C._thumbnailViewer=new p.UI.ThumbnailViewer(C,B)}else{p.Errors.ThumbnailViewerExist(C._stwain)}C.myThumbnailViewer=C._thumbnailViewer.myThumbnailViewer;C.myThumbnailViewer.on("click",function(E,D){C.UpdateInfo(true,false,true)});return C._thumbnailViewer};o.prototype.createCustomElement=function(D,B,E){var G=this,F="right",C=false;if(!G._NouiNotSupport("createCustomElement")){return NaN}if(p.isUndefined(D)){p.Errors.ElementRequired(G._stwain);return NaN}else{if(D){if(!p.isUndefined(B)){F=B}if(!p.isUndefined(E)&&p.isBoolean(E)){C=E}if(!G._customElement){G._customElement=new p.UI.CustomElement(G,D,F,C);if(!G._customElement.myCustomElemet){G._customElement=undefined}}else{p.Errors.CustomElementExist(G._stwain)}return G._customElement}else{p.Errors.ElementNotExist(G._stwain);return NaN}}return NaN};p.UI=p.UI||{};p.UI.WebViewer=o;function s(C,F){var G=this,D;G._webViewer=C;if(!F){F=t}else{if(F.location){switch(F.location){case"left":F.location="horizontal";F.sequence=-1;break;case"right":F.location="horizontal";F.sequence=1;break;case"top":F.location="vertical";F.sequence=-1;break;case"bottom":F.location="vertical";F.sequence=1;break;default:F.location="horizontal";F.sequence=-1}}else{F.location="horizontal";F.sequence=-1}if(p.isUndefined(F.size)){F.size=t.size}if(p.isUndefined(F.columns)){F.columns=t.columns}if(p.isUndefined(F.rows)){F.rows=t.rows}if(p.isUndefined(F.scrollDirection)){F.scrollDirection=t.scrollDirection}else{if(F.scrollDirection!="horizontal"){F.scrollDirection=t.scrollDirection}}if(p.isUndefined(F.pageMargin)){F.pageMargin=t.pageMargin}if(p.isUndefined(F.allowKeyboardControl)){F.allowKeyboardControl=t.allowKeyboardControl}if(p.isUndefined(F.allowPageDragging)){F.allowPageDragging=t.allowPageDragging}if(p.isUndefined(F.allowResizing)){F.allowResizing=t.allowResizing}if(p.isUndefined(F.border)){F.border=t.border}if(p.isUndefined(F.pageBackground)){F.pageBackground=t.pageBackground}if(p.isUndefined(F.pageBorder)){F.pageBorder=t.pageBorder}if(p.isUndefined(F.hoverPageBackground)){F.hoverPageBackground=t.hoverPageBackground}if(p.isUndefined(F.hoverPageBorder)){F.hoverPageBorder=t.hoverPageBorder}if(p.isUndefined(F.placeholderBackground)){F.placeholderBackground=t.placeholderBackground}if(p.isUndefined(F.autoChangeIndex)){F.autoChangeIndex=t.autoChangeIndex}}if(p.isUndefined(F.background)){F.background=G._webViewer.GetBackground()}if(p.isUndefined(F.showPageNumber)){F.showPageNumber=G._webViewer.GetShowPageNumber()}if(p.isUndefined(F.selectedPageBorder)){var B=G._webViewer.GetSelectedPageBorder();if(!p.isUndef(B)){F.selectedPageBorder=B}else{F.selectedPageBorder=t.selectedPageBorder}}if(p.isUndefined(F.selectedPageBackground)){var E=G._webViewer.GetSelectedPageBackground();if(!p.isUndef(E)){F.selectedPageBackground=E}else{F.selectedPageBackground=t.selectedPageBackground}}F.showThumbnail=false;G.myThumbnailViewer=G._webViewer.myViewer.createThumbnailView(F);if(G._webViewer.mydvs.Error.errorCode!=0){p.Errors.WebviewerError(G._webViewer._stwain,G._webViewer.mydvs.Error.errorMessage,G._webViewer.mydvs.Error.errorCode)}p.attachViewerPropertyThumbnailUI(G);G.bDispose=false;G._webViewer.bThumbnailDispose=false}s.prototype.show=function(){var B=this;if(!B._webViewer._NouiNotSupport("show")){return false}if(B.myThumbnailViewer){B._webViewer.myViewer.setViewMode(1,1);B._webViewer.SetIfSinglePageMode(true);B.myThumbnailViewer.showThumbnail=true;return true}else{if(B.bDispose){p.Errors.ThumbnailViewerDispose(B._webViewer._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._webViewer._stwain)}return false}};s.prototype.hide=function(){var B=this;if(!B._webViewer._NouiNotSupport("hide")){return false}if(B.myThumbnailViewer){B.myThumbnailViewer.showThumbnail=false;return true}else{if(B.bDispose){p.Errors.ThumbnailViewerDispose(B._webViewer._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._webViewer._stwain)}return false}};s.prototype.dispose=function(){var C=this,B=false;if(C.bDispose){return true}B=C._webViewer.myViewer.removeThumbnailView(C.myThumbnailViewer);if(B){C.bDispose=true;C._webViewer._thumbnailViewer=undefined;C._webViewer.myThumbnailViewer=undefined;C.myThumbnailViewer=undefined;C._webViewer.bThumbnailDispose=true}return B};s.prototype.updateViewMode=function(B){var C=this;if(C.myThumbnailViewer){if(B&&B.columns&&B.rows){if(B.columns<0||B.rows<0){p.Errors.InvalidPropertyValue(C._webViewer._stwain);return false}C.myThumbnailViewer.showThumbnail=false;C.myThumbnailViewer.setViewMode(B.columns,B.rows);if(B.scrollDirection&&(B.scrollDirection=="horizontal"||B.scrollDirection=="vertical")){C.myThumbnailViewer.scrollDirection=B.scrollDirection}C.myThumbnailViewer.showThumbnail=true}}else{if(C.bDispose){p.Errors.ThumbnailViewerDispose(C._webViewer._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._webViewer._stwain)}return false}};p.attachViewerPropertyThumbnailUI=function(B){r(B,"location",{get:function(){return B._webViewer.GetThumLocation()},set:function(C){return B._webViewer.SetThumLocation(C)}});r(B,"size",{get:function(){return B._webViewer.GetThumSize()},set:function(C){return B._webViewer.SetThumSize(C)}});r(B,"scrollDirection",{get:function(){return B._webViewer.GetThumScrollDirection()},set:function(C){return B._webViewer.SetThumScrollDirection(C)}});r(B,"showPageNumber",{get:function(){return B._webViewer.GetThumShowPageNumber()},set:function(C){return B._webViewer.SetThumShowPageNumber(C)}});r(B,"pageMargin",{get:function(){return B._webViewer.GetThumMargin()},set:function(C){return B._webViewer.SetThumMargin(C)}});r(B,"border",{get:function(){return B._webViewer.GetThumBorder()},set:function(C){return B._webViewer.SetThumBorder(C)}});r(B,"background",{get:function(){return B._webViewer.GetThumBackground()},set:function(C){return B._webViewer.SetThumBackground(C)}});r(B,"pageBackground",{get:function(){return B._webViewer.GetThumPageBackground()},set:function(C){return B._webViewer.SetThumPageBackground(C)}});r(B,"pageBorder",{get:function(){return B._webViewer.GetThumPageBorder()},set:function(C){return B._webViewer.SetThumPageBorder(C)}});r(B,"hoverPageBackground",{get:function(){return B._webViewer.GetThumHoverBackground()},set:function(C){return B._webViewer.SetThumHoverBackground(C)}});r(B,"hoverPageBorder",{get:function(){return B._webViewer.GetThumHoverBorder()},set:function(C){return B._webViewer.SetThumHoverBorder(C)}});r(B,"placeholderBackground",{get:function(){return B._webViewer.GetThumPlaceholderBackground()},set:function(C){return B._webViewer.SetThumPlaceholderBackground(C)}});r(B,"selectedPageBorder",{get:function(){return B._webViewer.GetThumSelectedPageBorder()},set:function(C){return B._webViewer.SetThumSelectedPageBorder(C)}});r(B,"selectedPageBackground",{get:function(){return B._webViewer.GetThumSelectedPageBackground()},set:function(C){return B._webViewer.SetThumSelectedPageBackground(C)}});r(B,"allowKeyboardControl",{get:function(){return B._webViewer.GetThumAllowKeyboardControl()},set:function(C){return B._webViewer.SetThumAllowKeyboardControl(C)}});r(B,"allowPageDragging",{get:function(){return B._webViewer.GetThumAllowDrag()},set:function(C){return B._webViewer.SetThumAllowDrag(C)}});r(B,"allowResizing",{get:function(){return B._webViewer.GetThumAllowResize()},set:function(C){return B._webViewer.SetThumAllowResize(C)}});r(B,"autoChangeIndex",{get:function(){return B._webViewer.GetThumAutoChangeIndex()},set:function(C){return B._webViewer.SetThumAutoChangeIndex(C)}})};s.prototype.on=function(B,D){var C=this;if(B){if(!p.isFunction(D)){p.Errors.CallbackNotAFunction(C._webViewer._stwain);return}C.myThumbnailViewer.on(B,D)}};s.prototype.off=function(B,D){var C=this;if(B){if(p.isUndefined(D)){C.myThumbnailViewer.off(B);if(B=="click"){C.myThumbnailViewer.on("click",function(F,E){C._webViewer.UpdateInfo(true,false,true)})}}else{if(!p.isFunction(D)){p.Errors.CallbackNotAFunction(C._webViewer._stwain);return}C.myThumbnailViewer.off(B,D)}}};p.UI=p.UI||{};p.UI.ThumbnailViewer=s;function w(B,D,C,E){var G=this,F=1;G._webViewer=B;G.myViewer=G._webViewer.myViewer;G.element=D;if(!p.isUndefined(C)){F=C=="left"?-1:1}if(p.isUndefined(E)){E=false}G.myCustomElemet=G.myViewer.createCustomElement(D,F,E);if(G.myCustomElemet){G.hide();G.bDispose=false}}w.prototype.show=function(){var B=this;if(B.myCustomElemet){B.myCustomElemet.show();return true}else{if(B.bDispose){p.Errors.CustomElementDispose(B._webViewer._stwain)}else{p.Errors.CustomElementNotExist(B._webViewer._stwain)}return false}};w.prototype.hide=function(){var B=this;if(B.myCustomElemet){B.myCustomElemet.hide();return true}else{if(B.bDispose){p.Errors.CustomElementDispose(B._webViewer._stwain)}else{p.Errors.CustomElementNotExist(B._webViewer._stwain)}return false}};w.prototype.dispose=function(){var C=this,B=false;if(C.bDispose){return true}if(C.myCustomElemet){B=C.myCustomElemet.dispose();if(B){C.bDispose=true;C._webViewer._customElement=undefined;C.myCustomElemet=undefined;C.myViewer=null;C.element=null}}else{C.bDispose=true;B=true}return B};p.UI=p.UI||{};p.UI.CustomElement=w});Dynamsoft.Ready(function(b,i){var e=Dynamsoft;if(!b.product.bHTML5Edition){return}var k=b.html5.Funs,a=0,h=1,c=1,g=!1,f=!0,j=k.DEF;function d(l,n){var m=this;m._ImgManager=n;m._stwain=n._stwain;m._webViewer=l;m._elements=[];b.attachViewerPropertyUI(m)}d.prototype.dispose=function(){var l=this;l._stwain=null;l._ImgManager=null;if(l._webViewer){l._webViewer=null}l._elements=[]};b.attachViewerPropertyUI=function(l){j(l,"width",{get:function(){return l._webViewer.GetWidth()},set:function(m){return l._webViewer.SetWidth(m)}});j(l,"height",{get:function(){return l._webViewer.GetHeight()},set:function(m){return l._webViewer.SetHeight(m)}});j(l,"idPostfix",{get:function(){return l._webViewer.GetIdPostfix()}});j(l,"background",{get:function(){return l._webViewer.GetBackground()},set:function(m){return l._webViewer.SetBackground(m)}});j(l,"border",{get:function(){return l._webViewer.GetBorder()},set:function(m){return l._webViewer.SetBorder(m)}});j(l,"innerBorder",{get:function(){return l._webViewer.GetInnerBorder()},set:function(m){return l._webViewer.SetInnerBorder(m)}});j(l,"selectedPageBorder",{get:function(){return l._webViewer.GetSelectedPageBorder()},set:function(m){return l._webViewer.SetSelectedPageBorder(m)}});j(l,"selectedPageBackground",{get:function(){return l._webViewer.GetSelectedPageBackground()},set:function(m){return l._webViewer.SetSelectedPageBackground(m)}});j(l,"showPageNumber",{get:function(){return l._webViewer.GetShowPageNumber()},set:function(m){return l._webViewer.SetShowPageNumber(m)}});j(l,"selectedAreaBorderColor",{get:function(){return l._webViewer.GetSelectedAreaBorderColor()},set:function(m){return l._webViewer.SetSelectedAreaBorderColor(m)}});j(l,"selectionRectAspectRatio",{get:function(){return l._webViewer.GetSelectionRectAspectRatio()},set:function(m){return l._webViewer.SetSelectionRectAspectRatio(m)}});j(l,"cursor",{get:function(){return l._webViewer.GetCursor()},set:function(m){return l._webViewer.SetCursor(m)}});j(l,"ifAutoScroll",{get:function(){return l._webViewer.GetIfAutoScroll()},set:function(m){return l._webViewer.SetIfAutoScroll(m)}});j(l,"pageMargin",{get:function(){return l._webViewer.GetPageMargin()},set:function(m){return l._webViewer.SetPageMargin(m)}});j(l,"zoom",{get:function(){return l._webViewer.GetZoom()},set:function(m){return l._webViewer.SetZoom(m)}});j(l,"singlePageMode",{get:function(){return l._webViewer.GetIfSinglePageMode()},set:function(m){return l._webViewer.SetIfSinglePageMode(m)}});j(l,"acceptDrop",{get:function(){return l._webViewer.GetAcceptDrop()},set:function(m){return l._webViewer.SetAcceptDrop(m)}});j(l,"allowSlide",{get:function(){return l._webViewer.GetAllowSlide()},set:function(m){return l._webViewer.SetAllowSlide(m)}});j(l,"autoChangeIndex",{get:function(){return l._webViewer.GetAutoChangeIndex()},set:function(m){return l._webViewer.SetAutoChangeIndex(m)}})};d.prototype.next=function(){var l=this;return l._webViewer.next()};d.prototype.previous=function(){var l=this;return l._webViewer.previous()};d.prototype.first=function(){var l=this;return l._webViewer.first()};d.prototype.last=function(){var l=this;return l._webViewer.last()};d.prototype.gotoPage=function(l){var m=this;return m._webViewer.go(l)};d.prototype.render=function(){var l=this;return l._webViewer.render()};d.prototype.createImageEditor=function(l){var m=this;return m._webViewer.createImageEditor(l)};d.prototype.createThumbnailViewer=function(l){var m=this;return m._webViewer.createThumbnailViewer(l)};d.prototype.getUISettings=function(){var l=this;return l._webViewer.getUISettings()};d.prototype.resetUISettings=function(){var l=this;return l._webViewer.resetUISettings()};d.prototype.updateUISettings=function(l){var m=this;return m._webViewer.updateUISettings(l)};d.prototype.clearSelectedAreas=function(){var l=this;return l._webViewer.clearSelectedAreas()};d.prototype.setSelectedAreas=function(l){var m=this;return m._webViewer.setSelectedAreas(l)};d.prototype.createCustomElement=function(m,l,n){var o=this;return o._webViewer.createCustomElement(m,l,n)};d.prototype.fitWindow=function(l){var m=this;return m._webViewer.SetFitType(l)};d.prototype.setButtonClass=function(l,n){var m=this;return m._webViewer.setButtonClass(l,n)};d.prototype.setViewMode=function(m,l){var n=this;return n._webViewer.SetViewMode(m,l)};d.prototype.bind=function(o){var r=this,n=o;if(b.isShadowRoot(n)){var p=document.createElement("div");n.appendChild(p);r._elements.push(p);n=p}if(b.isDOM(n)){var m=b.getShadowRoot(n);if(m){var q=Dynamsoft.Lib.timestamp,l=document.createElement("style");l.innerHTML=['@import url("',Dynamsoft.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",q,'")'].join("");m.appendChild(l);r._elements.push(l)}else{m=false}if(!n.id||n.id==""){n.id=["dwt_",b.getRandom()].join("")}}return r._webViewer.BindView(n)};d.prototype.show=function(){var l=this;return l._webViewer.show()};d.prototype.hide=function(){var l=this;return l._webViewer.hide()};d.prototype.unbind=function(){var l=this;b.each(l._elements,function(m){if(m.parentNode){m.parentNode.removeChild(m)}});return l._webViewer.UnbindView()};d.prototype.on=function(l,m){var n=this;n._webViewer.on(l,m)};d.prototype.off=function(l,m){var n=this;n._webViewer.off(l,m)};b.UI=b.UI||{};b.UI.DWTViewer=d});Dynamsoft.Ready(function(a,g){var c=Dynamsoft;if(!a.product.bHTML5Edition){return}var f=Dynamsoft.navInfo,h=document,b=a.html5.Funs2,i=Dynamsoft.DWT;function d(o,n,m,k,j,l){var p=this;p.Left=o;p.Top=n;p.Right=m;p.Bottom=k;p.ColorRGB=j;p.Opacity=l}function e(l,j){var k=this;k._ImgManager=l;k._stwain=l._stwain;k.zoomInStep=1.2;k.zoomOutStep=0.8;k.MIN_ZOOM=0.02;k.MAX_ZOOM=65;k.BaseUrl=false;k.MAX_ROWS=128;k.MAX_COLUMNS=128;k.AllowMultiSelect=true;k.__MousewheelValue=0;this._Init(j)}e.prototype._Init=function(j){var k=this;k.borderWidth=a.isUndefined(j.borderWidth)?1:j.borderWidth;if(j.BackgroundColor){k.BackgroundColorByDefault=j.BackgroundColor}else{k.BackgroundColorByDefault="#FFFFFF"}j.BackgroundColor=k.BackgroundColorByDefault;k.BackgroundFillColor=k.BackgroundColorByDefault;if(!k._webViewer){k._webViewer=new a.UI.WebViewer(k._ImgManager,j,k)}else{k._webViewer._Init(j)}k.mapModelImageControl=j.mapModelImageControl;k.__InitEvents(j)};e.prototype.dispose=function(){var j=this;if(j._webViewer){j._webViewer.dispose();j._webViewer=null}};e.prototype.__InitEvents=function(j){var k=this;if(a.isFunction(j.onTopImageInTheViewChanged)){k.onTopImageInTheViewChanged=j.onTopImageInTheViewChanged}if(a.isFunction(j.onGetImageInfo)){k.onGetImageInfo=j.onGetImageInfo}if(a.isFunction(j.onZoomChanged)){k.onZoomChanged=j.onZoomChanged}if(a.isFunction(j.onMouseMove)){k.onMouseMove=j.onMouseMove}if(a.isFunction(j.onMouseClick)){k.onMouseClick=j.onMouseClick}if(a.isFunction(j.onMouseRightClick)){k.onMouseRightClick=j.onMouseRightClick}if(a.isFunction(j.onMouseDoubleClick)){k.onMouseDoubleClick=j.onMouseDoubleClick}if(a.isFunction(j.onImageAreaDeSelected)){k.onImageAreaDeSelected=j.onImageAreaDeSelected}if(a.isFunction(j.onImageAreaSelected)){k.onImageAreaSelected=j.onImageAreaSelected}if(a.isFunction(j.onBufferChanged)){k.onBufferChanged=j.onBufferChanged}if(a.isFunction(j.onSelected)){k.onSelected=j.onSelected}if(a.isFunction(j.onRefreshUI)){k.onRefreshUI=j.onRefreshUI}if(a.isFunction(j.onResetCurrentIndex)){k.onResetCurrentIndex=j.onResetCurrentIndex}};e.prototype.SetMetaDataByIndex=function(l,k){var m=this,j=m.GetWebViewer();return j.SetMetaDataByIndex(l,k)};e.prototype.GetMetaDataByIndex=function(k){var l=this,j=l.GetWebViewer();return j.GetMetaDataByIndex(k)};e.prototype.GetDataImageControl=function(j){var k=this;return k.mapModelImageControl[j]};e.prototype.SetDataImageControl=function(m,l,j){var n=this,k;if(l==-1){return false}k=n.mapModelImageControl[l];if(!k){k=new a.UI.ModelImageControl();k.serverId=l;n.mapModelImageControl[l]=k}if(k!=null){k.bIsDirty=true}n.__GetImageAndAttach(k,l,true,false,false,m,j);return true};e.prototype.AttachImagesForControl=function(l,k){var m=this,j=m.GetWebViewer();if(l.bAddImage){j.AppendImage(l,k)}else{j.UpdateImage(l,k)}if(j._ImageEditorInner&&j._ImageEditorInner.bCouldBeTimeConsuming){j._ImageEditorInner.bCouldBeTimeConsuming=false;Dynamsoft.Lib.hideMask()}return true};e.prototype.MobileAttachImagesForControl=function(m,k){var n=this,j=n.GetWebViewer(),l;if(m.bAddImage){l=j.MobileAppendImage(m,k)}else{l=j.MobileUpdateImage(m,k)}if(j._ImageEditorInner&&j._ImageEditorInner.bCouldBeTimeConsuming){j._ImageEditorInner.bCouldBeTimeConsuming=false;Dynamsoft.Lib.hideMask()}return true};e.prototype.GetWebViewer=function(){var j=this;return j._webViewer};e.prototype.__GetWebViewerUuid=function(j){var k=this;return k.mapModelImageControl[j].uuid};e.prototype.SetSelectedImageArea=function(n,m,l,k){var o=this;var j=o.GetWebViewer();if(null!=j){return j.SetSelectedImageArea(n,m,l,k)}return false};e.prototype.OverlayRectangle=function(r,o,n,q,l,j,m){var p=this;var k=p.GetWebViewer();if(null!=k){return k.OverlayRectangle(r,o,n,q,l,j,m)}return false};e.prototype.ChangeImageViewSize=function(k,m){var n=this,l=false,j=n.GetWebViewer();if(k>=0){if(k>j.GetWidth()){l=true}j.SetWidth(k)}if(m>=0){if(m>j.GetHeight()){l=true}n.GetWebViewer().SetHeight(m)}if(l){}return true};e.prototype.GetWidth=function(){var j=this;return j.GetWebViewer().GetWidth()};e.prototype.SetWidth=function(j){var l=this,k=j;l.GetWebViewer().SetWidth(k);return true};e.prototype.GetHeight=function(){var j=this;return j.GetWebViewer().GetHeight()};e.prototype.SetHeight=function(j){var l=this,k=j;l.GetWebViewer().SetHeight(k);return true};e.prototype.RefreshAllImages=function(r,m){var o=this,n,q,p,j=o.GetWebViewer();if(o._stwain._isMobileMode()){return}if(!o.mapModelImageControl){return}for(var l=0;l<j.GetHowManyImagesInBuffer();l++){n=o.getImageManager().convertClientIndexToServerId(l);var k=o.mapModelImageControl[n];if(k){q=b.getImageUrl(o.BaseUrl,n,r,m,Date.now());k.minImageUrl=q;p=j.GetMetaDataByIndex(l);j.UpdateImage(k,p)}}};e.prototype.SetViewMode=function(k,j){var l=this;return l.GetWebViewer().SetViewMode(k,j)};e.prototype.RemoveAllImages=function(){var o=this,m,k,n,l;n=o._ImgManager.count();var j=Object.keys(o.mapModelImageControl);l=j.length;for(m=0;m<n;m++){k=o.getImageManager().convertClientIndexToServerId(m);if(k!=-1&&o.mapModelImageControl[k]){o.mapModelImageControl[k].Clear();delete o.mapModelImageControl[k]}}if(n==l){o.mapModelImageControl={}}o.GetWebViewer().RemoveAllImages();return true};e.prototype.__GetImageAndAttach=function(o,p,m,t,n,r,s){var q=this;var l=q.GetWebViewer().GetWidth();var k=q.GetWebViewer().GetHeight();var u=false;if(m){u=true}else{if(o.bIsDirty==true){u=true}else{u=false}}var j=q.__GetWebViewerUuid(p);if(j){if(o.iImageControlWidth==l&&o.iImageControlHeight==k&&o.bIsDirty==false){return}}q.__SetArrayControlLoadImage(j,p,o,l,k,q.AttachImagesForControl,u,t,n,r,s)};e.prototype.__SetArrayControlLoadImage=function(k,q,p,m,j,v,n,u,o,t,s){var r=this,l,w;if(r._stwain._isMobileMode()){r.OnGetImageFromMobileServer(q,p,m,j,u,o,t,s)}else{if(n){r.OnGetImageFromServer(q,p,m,j,u,o,t,s)}else{r.OnGetImageByURL(q,p,m,j,u,o,t,s)}}};e.prototype.OnGetImageByURL=function(n,m,k,j,r,l,p,q){var o=this;if(m.imageUrl&&m.imageUrl!=""){m.iImageControlWidth=k;m.iImageControlHeight=j;m.bAddImage=r;m.bAppendImage=l;m.index=p;if(o._stwain._isMobileMode()){o.MobileAttachImagesForControl(m,q)}else{o.AttachImagesForControl(m,q)}}else{return o.OnGetImageFromServer(n,m,k,j,r,l,p,q)}return true};e.prototype.OnGetImageFromMobileServer=function(n,m,k,j,r,l,p,q){var o=this;m.iImageControlWidth=k;m.iImageControlHeight=j;m.bAddImage=r;m.bAppendImage=l;m.index=p;o.MobileAttachImagesForControl(m,q)};e.prototype.OnGetImageFromServer=function(o,n,l,j,t,m,q,r){var p=this,k,u,s=p.BaseUrl;if(s){if(o==-1){return false}if(n.bIsDirty){n.ticks=Date.now()}if(a.isUndefined(l)){l=-1}if(a.isUndefined(j)){j=-1}k=b.getImageUrl(s,o,-1,-1,n.ticks);u=b.getImageUrl(s,o,l,j,n.ticks);n.iImageControlWidth=l;n.iImageControlHeight=j;n.imageUrl=k;n.minImageUrl=u;n.bAddImage=t;n.bAppendImage=m;n.index=q;p.AttachImagesForControl(n,r)}return true};e.prototype.SetIfFitWindowAndType=function(l){var m=this,k;var j=m.GetWebViewer();if(null!=j){switch(l){case 1:k="height";break;case 2:k="width";break;default:k="window"}j.SetFitType(k)}return true};e.prototype.GetAllowMultiSelect=function(){var j=this;return j.AllowMultiSelect};e.prototype.SetAllowMultiSelect=function(j){var k=this;k.AllowMultiSelect=j;return true};e.prototype.GetFitWindowType=function(){var j=this;return 0};e.prototype.SetSelectionRectAspectRatio=function(j){var k=this;k.GetWebViewer().SetSelectionRectAspectRatio(j);return true};e.prototype.GetSelectionRectAspectRatio=function(j){var k=this;return k.GetWebViewer().GetSelectionRectAspectRatio()};e.prototype.SetFitWindowType=function(j){var k=this;k.SetIfFitWindowAndType(j);return true};e.prototype.GetIfFitWindow=function(){var j=this;return true};e.prototype.SetIfFitWindow=function(j){var k=this;if(j){k.GetWebViewer().SetFitType()}else{k.GetWebViewer().SetZoom(1)}return true};e.prototype.GetImageMargin=function(){var j=this;return j.GetWebViewer().GetImageMargin()};e.prototype.SetImageMargin=function(j){var k=this;k.GetWebViewer().SetImageMargin(j);return true};e.prototype.GetSelectionImageBorderColor=function(){var j=this;return j.GetWebViewer().GetSelectedPageBorder()};e.prototype.SetSelectionImageBorderColor=function(j){var l=this,k=j;l.GetWebViewer().SetSelectionImageBorderColor(k);return true};e.prototype.GetZoom=function(){var j=this;return j.GetWebViewer().GetZoom()};e.prototype.SetZoom=function(l){var k=this;if(l<k.MIN_ZOOM){l=k.MIN_ZOOM}if(l>k.MAX_ZOOM){l=k.MAX_ZOOM}var j=k.GetWebViewer();if(null!=j){j.SetZoom(l)}return true};e.prototype.ZoomIn=function(k,p){var o=this;var n=15000;var j=o.mapModelImageControl[o.getImageManager().convertClientIndexToServerId(o._webViewer.GetCurrentIndex())];var l=o.GetWebViewer().GetZoom();var m=(Math.floor(l*100*o.zoomInStep)+1);if(1<m&&m<2501){if(parseInt(j.imageWidth*l)>n||parseInt(j.imageHeight*l)>n){b.output(o,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);return false}else{o.SetZoom(m/100,k,p)}}else{b.output(o,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);return false}return true};e.prototype.ZoomOut=function(){var l=this;var j=l.GetWebViewer().GetZoom();var k=(Math.floor(j*100*l.zoomOutStep)-1);if(1<k&&k<6501){l.SetZoom(k/100)}else{b.output(l,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);return false}return true};e.prototype.GetMouseShape=function(){var j=this;return j.GetWebViewer().GetMouseShape()};e.prototype.SetMouseShape=function(j){var k=this;k.GetWebViewer().SetMouseShape(j);return true};e.prototype.GetShowPageNumber=function(){var j=this;return j.GetWebViewer().GetShowPageNumber()};e.prototype.SetShowPageNumber=function(j){var k=this;k.GetWebViewer().SetShowPageNumber(j);return true};e.prototype.SetBackgroundFillColor=function(j){var l=this,k=j;l.BackgroundFillColor=k;return true};e.prototype.GetBackgroundColor=function(){var j=this;return j.GetWebViewer().GetBackground()};e.prototype.SetBackgroundColor=function(j){var l=this,k=j;l.GetWebViewer().SetBackground(k);return true};e.prototype.Go=function(j){var k=this;return k.GetWebViewer().go(j)};e.prototype.SetSelectedindexes=function(j){var k=this;return k.GetWebViewer().SetSelectedindexes(j)};e.prototype.GetSelectedindexes=function(j){var k=this;return k.GetWebViewer().GetSelectedindexes()};e.prototype.__Previous=function(){var j=this;j.Go(j.GetWebViewer().GetCurrentIndex()-1);return true};e.prototype.__Next=function(){var j=this;j.Go(j.GetWebViewer().GetCurrentIndex()+1);return true};e.prototype.__fireEvent=function(j,k){var l=this;if(a.isFunction(l[j])){return l[j](k)}return true};e.prototype.AddImage=function(m,l,j,n){var q=this,o=m*1,k,p;if(l==-1){return false}p=new a.UI.ModelImageControl();p.bIsDirty=true;p.serverId=l;q.mapModelImageControl[l]=p;if(l>=0){q.__GetImageAndAttach(p,l,false,true,n,o,j)}return true};e.prototype.RemoveImage=function(l,k){var n=this,j,m=parseInt(l);if(isNaN(m)){a.Errors.InvalidIndex(n);return false}if(m<0||m>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return false}j=n._ImgManager.count();if(k!=-1&&n.mapModelImageControl[k]){n.mapModelImageControl[k].Clear();delete n.mapModelImageControl[k]}return n.GetWebViewer().RemoveByIndex(m)};e.prototype.MoveImage=function(k,j,m){var l=this;return l.GetWebViewer().MoveImage(k,j)};e.prototype.SwitchImage=function(k,j){var l=this;return l.GetWebViewer().SwitchImage(k,j)};e.prototype.GetIfAutoScroll=function(){var j=this;return j._webViewer.GetIfAutoScroll()};e.prototype.SetIfAutoScroll=function(j){var k=this;k._webViewer.SetIfAutoScroll(j);return true};e.prototype.Print=function(){var n=this,k=-1;k=n.GetWebViewer().GetCurrentIndex();if(k<0){return}var l,j;j=n.getImageManager().convertClientIndexToServerId(k);if(j==-1){a.Errors.IndexOutOfRange(n);return false}if(n._stwain._isMobileMode()){var m=n.GetWebViewer().GetUidByIndex(k);n.GetWebViewer().GetImageData(m).then(function(o){if(o.oriData instanceof ArrayBuffer){return n.__PrintInner(URL.createObjectURL(new Blob([o.oriData])),j,k)}else{if(o.oriData instanceof Blob){return n.__PrintInner(URL.createObjectURL(o.oriData),j,k)}else{return n.__PrintInner(o.oriData,j,k)}}})}else{l=b.getImageUrl(n.BaseUrl,j,-1,-1);return n.__PrintInner(l,j,k)}return true};e.prototype.__PrintInner=function(m,j,l){var p=this;var k=p.mapModelImageControl[j],o=[];if(k){if(k.width<=0){k.width=p.getImageManager().GetImageWidth(l)}if(k.height<=0){k.height=p.getImageManager().GetImageHeight(l)}var n=new a.UI.PrintUrl(m,k.width,k.height);o.push(n)}else{return false}b.print(o);return true};e.prototype.GetHowManyImagesInBuffer=function(){var j=this;return j.GetWebViewer().GetHowManyImagesInBuffer()};e.prototype.RemoveImageTag=function(j){var k=this;return k.GetWebViewer().RemoveImageTag(j)};e.prototype.FilterImagesByTag=function(j,l,k){var m=this;return m.GetWebViewer().FilterImagesByTag(j,l,k)};e.prototype.ClearFilter=function(){var j=this;return j.GetWebViewer().ClearFilter()};e.prototype.GetServerIdListByTag=function(l){var p=this,o,m=[],k,j,n;if(l.length==0){for(k=0;k<p.GetHowManyImagesInBuffer();k++){n=p.GetWebViewer().GetCustomDataByIndex(k);if(n){m.push(n.imageId)}}}else{o=p.GetWebViewer().GetTagContents(l);for(k=0;k<o.length;k++){j=p.GetWebViewer().GetIndexByUid(o[k]);if(j>=0){n=p.GetWebViewer().GetCustomDataByIndex(j);if(n){m.push(n.imageId)}}}}return m};e.prototype.SetDefaultTag=function(j){var k=this;return k.GetWebViewer().SetDefaultTag(j)};e.prototype.AddImageTag=function(k,j){var l=this;return l.GetWebViewer().AddImageTag(k,j)};e.prototype.GetCurrentTag=function(){var k=this,j;j=k.GetWebViewer().GetCurrentTag();if(j==false){return""}else{return j}};e.prototype.RenameTag=function(j,l){var k=this;return k.GetWebViewer().RenameTag(j,l)};e.prototype.RemoveTag=function(j,k){var l=this;return l.GetWebViewer().RemoveTag(j,k)};e.prototype.GetTagList=function(){var j=this;return j.GetWebViewer().GetTagList()};e.prototype.BindView=function(k){var m=this,l=true,j=m.GetWebViewer();l=j.BindView(k);if(l){j.show()}return l};e.prototype.UnbindView=function(){var j=this;return j.GetWebViewer().UnbindView()};e.prototype.GetIfShowVideoContainer=function(){var j=this;return j.GetWebViewer().GetIfShowVideoContainer()};e.prototype.ShowVideoContainer=function(j){var k=this;return k.GetWebViewer().ShowVideoContainer(j)};e.prototype.UpdateVideoContainer=function(j){var k=this;return k.GetWebViewer().UpdateVideoContainer(j)};e.prototype.__AttachImages=function(){var n=this,l,j,k;j=n.GetWebViewer().GetHowManyImagesInBuffer();for(var m=0;m<j;m++){l=n._ImgManager.convertClientIndexToServerId(m);if(l>=0){k=n.mapModelImageControl[l];n.__GetImageAndAttach(k,l,true,false,false,0)}}};e.prototype.exists=function(j){var k=this;if(a.isUndefined(k.mapModelImageControl[j])){return false}else{return true}};e.prototype.getImageManager=function(){var j=this;return j._ImgManager};e.prototype.GetImageData=function(j){var k=this;k.GetWebViewer().GetImageData(j)};e.prototype.RegistLoadCallback=function(k){var j=this;return j.GetWebViewer().RegistLoadCallback(k)};e.prototype.UpdateData=function(m,k){var n=this,j=n.GetWebViewer();var l=n.GetDataImageControl(m);if(l){j.UpdateImage(l,k)}return true};a.UI=a.UI||{};a.UI.ImageUIView=e});Dynamsoft.Ready(function(b,i){var c=Dynamsoft;if(!b.product.bHTML5Edition){return}var h=b.getNavInfo(),j=b.html5.Funs,g=!1,e=!0,d=function(l){if(!b.dlgProgress){b.initProgress()}var k=b.one(".dynamsoft-btnCancel");if(k&&k.getEL()){var m=function(){var n=b.cancelFrome;b.closeProgress(0);if(n==1||n==2){if(b.bio){b.bio.abort();b.bio=g}}else{if(n==3||n==4){l.SetCancel()}else{if(n==5){if(b.isFunction(l.__OnCancel)){l.__OnCancel()}}}}};b.addEventListener(k[0],"mousedown",m)}};function f(o,q){var l={Stwain:o};if(o._isBindViewer()){var k,m=o._width,p=o._height,n=g,r;k=b.one(o._containerElement);if(b.isString(m)&&m.indexOf("%")>=0){m=b.css(k,"width")*parseInt(m)/100;n=e}else{m=parseInt(m)}if(b.isString(p)&&p.indexOf("%")>=0){p=b.css(k,"height")*parseInt(p)/100;n=e}else{p=parseInt(p)}l={Stwain:o,Container:q,Width:m,Height:p}}j.bindUIViewEvents(o,l);if(!o._ImgManager){o._ImgManager=new b.UI.ImageManager(o,l)}else{if(o._ImgManager&&o._ImgManager._UIView&&o._ImgManager._UIView.BackgroundColor){l.BackgroundColor=o._ImgManager._UIView.BackgroundColor}o._ImgManager._Init(o,l)}if(n){j.changeImageUISize(o,o._width,o._height)}}function a(l,m){var k=m||{};l.__OnImageAreaDeSelected=k.onImageAreaDeSelected||"";l.__OnImageAreaSelected=k.onImageAreaSelected||"";l.__OnMouseClick=k.onMouseClick||"";l.__OnMouseDoubleClick=k.onMouseDoubleClick||"";l.__OnMouseMove=k.onMouseMove||"";l.__OnMouseRightClick=k.onMouseRightClick||"";l.__OnTopImageInTheViewChanged=k.onTopImageInTheViewChanged||"";l.__OnBufferChanged=k.onBufferChanged||""}b.mix(j,{changeImageUISize:function(o,n,p){var l,m,t=-1,w=-1,k=n,v=p,s=g,u,q;l=b.one(o._containerElement);if(b.isString(n)&&n.indexOf("%")>=0){u=b.css(l,"width");if(u==0){l[0].style.width="100%"}u=b.css(l,"width")*parseInt(n)/100;s=e}else{u=parseInt(n);k=[u+2,"px"].join("")}if(b.isString(p)&&p.indexOf("%")>=0){q=b.css(l,"height");if(q==0){l[0].style.height="100%"}q=b.css(l,"height")*parseInt(p)/100;s=e}else{q=parseInt(p);v=[q+2,"px"].join("")}if(l){m=b.one(".dynamsoft-dwt-container-box",l);if(m&&m.getEL()){m.style("width",k);m.style("height",v)}}if(s){if(!o.__funResize){o.__funResize=function(){var x=j.__innerGetUIViewRealSize(o._containerElement,o._width,o._height);if(o._ImgManager){return o._ImgManager.ChangeSize(x.width,x.height)}return e}}b.removeEventListener(window,"resize",o.__funResize);b.addEventListener(window,"resize",o.__funResize)}else{if(o.__funResize){b.removeEventListener(window,"resize",o.__funResize);o.__funResize=g}}var r=j.__innerGetUIViewRealSize(o._containerElement,u,q);if(o._ImgManager){return o._ImgManager.ChangeSize(r.width,r.height)}return e},__innerGetUIViewRealSize:function(m,k,o){var l,n=-1,p=-1;l=b.one(m);if(b.isString(k)&&k.indexOf("%")>=0){n=b.css(l,"width")*parseInt(k)/100}if(n<0&&k){n=parseInt(k)}if(b.isString(o)&&o.indexOf("%")>=0){p=b.css(l,"height")*parseInt(o)/100}if(p<0&&o){p=parseInt(o)}return{width:n,height:p}},bindUIViewEvents:function(m,k){var n=m,l;k.onSelected=function(o){if(n._isNoViewer()){return}var q=o.length,p;if(q>0){n._ImgManager.SetSelectedImageCount(q);p=o[q-1];l=true;if(l&&b.isFunction(n.__OnRefreshUI)){n.__OnRefreshUI(p)}}};k.onRefreshUI=function(o){if(n._isNoViewer()){return}j.__innerRefreshFromUIView(n,o)};k.onResetCurrentIndex=function(p){if(n._isNoViewer()){return}var o=n._ImgManager.getCurrentImageIndex();if(p>=0&&p<n._ImgManager.count()&&o!=p){if(b.isFunction(n.__OnIndexChangeDuringDragDrop)){n.__OnIndexChangeDuringDragDrop(o,p)}}};k.onMouseMove=function(q){if(n._isNoViewer()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseMove)){n.__OnMouseMove(p)}};k.onMouseClick=function(q){if(n._isNoViewer()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseClick)){n.__OnMouseClick(p)}};k.onMouseDoubleClick=function(p){if(n._isNoViewer()){return}var o=p.index;if(b.isFunction(n.__OnMouseDoubleClick)){n.__OnMouseDoubleClick(o)}};k.onMouseRightClick=function(q){if(n._isNoViewer()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseRightClick)){return n.__OnMouseRightClick(p)}return e};k.onImageAreaSelected=function(o){if(n._isNoViewer()){return}if(b.isFunction(n.__OnImageAreaSelected)){n.__OnImageAreaSelected(o.index,o.left,o.top,o.right,o.bottom,o.areaIndex)}};k.onImageAreaDeSelected=function(o){if(n._isNoViewer()){return}if(b.isFunction(n.__OnImageAreaDeSelected)){n.__OnImageAreaDeSelected(o)}};k.onBufferChanged=function(o){if(b.isFunction(n.__OnBufferChanged)){n.__OnBufferChanged(o)}}},__innerRefreshFromUIView:function(k,l){var m=k;if(b.isFunction(m.__OnRefreshUI)){m.__OnRefreshUI(l)}}});b.html5.ui={init:function(l,m){var k;if(l._isBindViewer()){if(m.container){l._containerElement=m.container}else{if(m.containerID){l._containerElement=b.get(m.containerID)}}l._width=m.width;l._height=m.height;d(l);k=b.one(l._containerElement)}else{l._containerElement=null}l._ifBindViewer=m.ifBindViewer;f(l,k);if(!l._ifBindViewer){a(l,l.config);l.__OnMouseClick=m.onMouseClick||"";l.__OnMouseDoubleClick=m.onMouseDoubleClick||"";l.__OnMouseRightClick=m.onMouseRightClick||"";l.__OnMouseMove=m.onMouseMove||"";l.__OnImageAreaSelected=m.onImageAreaSelected||"";l.__OnImageAreaDeSelected=m.onImageAreaDeSelected||"";l.__OnRefreshUI=m.onRefreshUI||"";l.__OnBufferChanged=m.onBufferChanged||"";l.__MouseX=0;l.__MouseY=0;l.__style=new b.html5.STwainStyle(l);l.__fSelectionRectAspectRatio=0}},unLoad:function(l){var k=l._containerElement;if(k){k.innerHTML=""}},addMethods:function(k){b.mix(k,{OverlayRectangle:function(t,n,q,s,l,o,r){var p=this,m;p._resetErr();if(!p._isValid()){return false}if(p._isNoViewer()){return p._nouiNotSupport("OverlayRectangle")}if(n>s||q>l||(n==s&&q==l)){b.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(p);return false}if(b.isNumber(o)){m=b.getColor(o)}else{m=o}return p._ImgManager.OverlayRectangle(t,n,q,s,l,m,r)},SetViewMode:function(o,m){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isNoViewer()){return p._nouiNotSupport("SetViewMode")}if(b.isString(o)||b.isString(m)||(o<-1&&m<-1)){b.Errors.InvalidValue(p);return g}var n=Math.floor(o),l=Math.floor(m);p._ImgManager.SetViewMode(n,l);return true},Print:function(l){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isNoViewer()){return n._nouiNotSupport("Print")}if(!n._isMobileMode()&&l){var m=true;return n._innerSend("PrintEx",j.makeParams(m),true,function(){},function(){})}n._ImgManager.Print();return true},PrintEx:function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(!b.isArray(l)){b.Errors.IndicesNotArray(m);return false}if(m._isNoViewer()){return m._nouiNotSupport("Print")}if(!m._checkIndices(l)){return false}m._ImgManager.PrintEx(l);return true},ShowImageEditor:function(n,m,l,o){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isNoViewer()){return p._nouiNotSupport("ShowImageEditor")}if(p._isMobileMode()){}else{if(j.isServerInvalid(p)){return g}}if(p._ImgManager.getWebViewer().bShowImageEdit){return p.ShowImageEditorEx(-1,-1,-1,-1,3)}if(n&&m&&l){return p.ShowImageEditorEx(-1,-1,m,l,0,true,n,o)}else{return p.ShowImageEditorEx(-1,-1,-1,-1,0,false)}},ShowImageEditorEx:function(t,r,n,m,o,l,q,s){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isNoViewer()){return p._nouiNotSupport("ShowImageEditorEx")}return p._ImgManager.ShowImageEditorEx(t,r,n,m,o,l,q,s)},SetSelectedImageArea:function(o,q,p,n,l){var r=this;r._resetErr();if(!r._isValid()){return false}if(r._isNoViewer()){return r._nouiNotSupport("SetSelectedImageArea")}var m=parseInt(o);if(isNaN(m)||m<0||m>=r._ImgManager.count()){b.Errors.IndexOutOfRange(r);return false}if(!r._isMobileMode()){if(j.isServerInvalid(r)){return false}}return r._ImgManager.SetSelectedImageArea(m,q,p,n,l)},first:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(!m._isValid()){return false}if(m._isNoViewer()){return m._nouiNotSupport("first")}if(l>0){m._ImgManager.Go(0);j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},previous:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(!m._isValid()){return false}if(m._isNoViewer()){return m._nouiNotSupport("previous")}if(l>0){m._ImgManager.__Previous();j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},next:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(!m._isValid()){return false}if(m._isNoViewer()){return m._nouiNotSupport("next")}if(l>0){m._ImgManager.__Next();j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},last:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(!m._isValid()){return false}if(m._isNoViewer()){return m._nouiNotSupport("last")}if(l>0){m._ImgManager.Go(l-1);j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e}})}}});Dynamsoft.Ready(function(b,h){var d=Dynamsoft;if(!b.product.bHTML5Edition){return}var j=b.html5.Funs,a=0,g=1,c=1,f=!1,e=!0,i=j.DEF;b.attachPropertyUI=function(k){i(k,"Width",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("Width");return""}return k._ImgManager.GetWidth()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("Width")}return k._ImgManager.SetWidth(l)}});i(k,"Height",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("Height");return""}return k._ImgManager.GetHeight()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("Height")}return k._ImgManager.SetHeight(l)}});i(k,"AllowMultiSelect",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){return k._nouiNotSupport("AllowMultiSelect")}return k._ImgManager.GetAllowMultiSelect()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("AllowMultiSelect")}k._ImgManager.SetAllowMultiSelect(l)}});i(k,"BackgroundColor",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("BackgroundColor");return""}return k._ImgManager.GetBackgroundColor()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("BackgroundColor")}return k._ImgManager.SetBackgroundColor(l)}});i(k,"BackgroundFillColor",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("BackgroundFillColor");return""}if(k._isMobileMode()){var n=k.__BackgroundFillColor;if(b.isUndefined(n)){n=k._ImgManager._UIView.BackgroundFillColor}if(b.isNumber(n)){return b.getColor(n)}else{var m=parseInt(n.slice(1),16);n=m}return n}var l=k._innerFun("BackgroundFillColor");return b.BGR2RGB(l)},set:function(m){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("BackgroundFillColor")}var n=m*1,l;if(!b.isNumber(n)||isNaN(n)){b.Errors.InvalidValue(k);return f}if(k._isMobileMode()){k._ImgManager._UIView.SetBackgroundFillColor(b.getColor(n));k.__BackgroundFillColor=b.getColor(n);return true}l=b.RGB2BGR(n);return k._innerFun("BackgroundFillColor",j.makeParams(l))}});i(k,"FitWindowType",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){k._nouiNotSupport("FitWindowType");return 0}return k._ImgManager.GetFitWindowType()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("FitWindowType")}var m=l*1;return k._ImgManager.SetFitWindowType(m)}});i(k,"IfFitWindow",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("IfFitWindow")}return k._ImgManager.GetIfFitWindow()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("IfFitWindow")}if(l){return k._ImgManager.SetIfFitWindow(true)}else{return k._ImgManager.SetIfFitWindow(false)}}});i(k,"ImageMargin",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("ImageMargin");return 0}return k._ImgManager.GetImageMargin()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("ImageMargin")}var m=parseInt(l);if(isNaN(m)){return false}return k._ImgManager.SetImageMargin(m)}});i(k,"MouseX",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("MouseX");return 0}return k.__MouseX}});i(k,"MouseY",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("MouseY");return 0}return k.__MouseY}});i(k,"SelectionImageBorderColor",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("SelectionImageBorderColor");return""}return k._ImgManager.GetSelectionImageBorderColor()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("SelectionImageBorderColor")}return k._ImgManager.SetSelectionImageBorderColor(l)}});i(k,"Zoom",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("Zoom");return 0}return k._ImgManager.GetZoom()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("Zoom")}return k._ImgManager.SetZoom(l)}});i(k,"MouseShape",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("MouseShape")}var l=k._ImgManager.GetMouseShape();return(l==Dynamsoft.DWT.EnumDWT_MouseShape.Hand)},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("MouseShape")}var m=Dynamsoft.DWT.EnumDWT_MouseShape.Crosshair;if(l){m=Dynamsoft.DWT.EnumDWT_MouseShape.Hand}return k._ImgManager.SetMouseShape(m)}});i(k,"SelectionRectAspectRatio",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("SelectionRectAspectRatio");return 0}return k._ImgManager.GetSelectionRectAspectRatio()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("SelectionRectAspectRatio")}var m=parseFloat(l);if(m>=0){k._ImgManager.SetSelectionRectAspectRatio(m);return true}return false}});i(k,"ShowPageNumber",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("ShowPageNumber")}return k._ImgManager.GetShowPageNumber()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("ShowPageNumber")}return k._ImgManager.SetShowPageNumber(l)}});i(k,"IfAutoScroll",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("IfAutoScroll")}return k._ImgManager.GetIfAutoScroll()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("IfAutoScroll")}return k._ImgManager.SetIfAutoScroll(l)}})};b.detect.viewerScriptLoaded=e});Dynamsoft.Ready(function(c,j){var e=Dynamsoft;if(!c.product.bPluginEdition&&!c.product.bActiveXEdition){return}var h=Dynamsoft.navInfo;var f=!0,g=!1,l={isFunction:function(m){return m&&typeof(m)==="function"},isReturnSuccess:function(n){if(n._errorCode===-2115){return f}if(n._errorCode===-2003){if(!Dynamsoft.DWT.IfHttpPostErrorNoWindow){var m=window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");m.document.writeln(n.HTTPPostResponseString)}}if(n._errorCode==0){return f}return g},setErrorString:function(m){m._errorCode=m.getSWebTwain().ErrorCode;m._errorString=m.getSWebTwain().ErrorString},checkErrorString:function(m){l.setErrorString(m);return l.isReturnSuccess(m)},wrapperRet:function(q,n,m,r,p,o){if(l.checkErrorString(q)){if(l.isFunction(m)){if(p){m(q.getSWebTwain().HTTPPostResponseString)}else{if(o){m(n);return true}else{m()}}}}else{if(l.isFunction(r)){if(p){r(q._errorCode,q._errorString,q.getSWebTwain().HTTPPostResponseString)}else{r(q._errorCode,q._errorString)}}}return n},wrapperPromise:function(n,m){if(m){return c.Promise.resolve(true)}return c.Promise.reject({errorCode:n._errorCode,errorString:n._errorString})},getImageType:function(n){var m=n.length;if(m<4){return -1}var o=n.lastIndexOf(".");if(o===-1){return -1}var p=n.slice(o).toLowerCase();if(p===".bmp"||p===".dib"){return 0}if(p===".jpg"||p===".jpe"||p===".jpeg"||p===".jfif"){return 1}if(p===".tif"||p===".tiff"){return 2}if(p===".png"){return 3}if(p===".pdf"){return 4}if(p===".gif"){return 5}return -1},replaceLocalFilename:function(m){var n=m;if(Dynamsoft.navInfoSync.bFileSystem){n=decodeURI(n)}return n},makeParams:function(){var m=arguments;if(m===undefined||m.length===0){return undefined}else{return m}}};c.checkErrorString=l.checkErrorString;c.wrapperRet=l.wrapperRet;c.setErrorString=l.setErrorString;c.DynamicLoadAddonFuns=[];c.attachAddon=function(p){if(h.bWin){var q=navigator.userAgent.toLowerCase(),m=!h.bOSx64||(q.indexOf("wow64")>=0),r=p.getSWebTwain(),n;if(m){n="DynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dll"}else{n="DynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dll"}try{r.GetAddOnVersion("pdf",n)}catch(o){}}c.each(c.DynamicLoadAddonFuns,function(s){if(c.isFunction(s)){s(p)}})};var b=0,i=1,a=1,d=2;c.attachProperty=function(m){var o=m;var n=function(s,r,p){var q;if(r!==b&&r!==i){q=r}else{q={};if(r){if(p==a){q.set=function(t){t=t*1;if(!c.isNumber(t)||isNaN(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}else{if(p==d){q.set=function(t){if(!c.isBoolean(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}else{q.set=function(t){if(!c.isString(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}}}}if(!q.get){q.get=function(){var t=o.getSWebTwain()[s];o._errorCode=o.getSWebTwain().ErrorCode;o._errorString=o.getSWebTwain().ErrorString;return t}}if(!(s in o)){Object.defineProperty(o,s,q)}};n("ErrorCode",{get:function(p){return o._errorCode}});n("ErrorString",{get:function(p){return o._errorString}});n("LogLevel",i,a);n("Manufacturer",i);n("ProductFamily",i);n("ProductKey",{get:function(){return Dynamsoft.DWT.ProductKey},set:function(r){var q=f,p=r,s=Dynamsoft.DWT;if(!c.isString(p)||p=="******"){p=""}s.ProductKey=p;o.__licenseInfo=g;if(p==""){q=g;c.License.checkProductKey(o,{Core:f},g,f)}else{o.GetLicenseInfo(p);q=l.checkErrorString(o)}return q}});n("ProductName",i);n("VersionInfo",i);n("BitDepth",i,a);n("Brightness",i,a);n("Contrast",i,a);n("CurrentSourceName",b);n("DataSourceStatus",b);n("DefaultSourceName",b);n("Duplex",b);n("IfAppendImage",i,d);n("IfAutoBright",i,d);n("IfAutoDiscardBlankpages",i,d);n("IfAutoFeed",i,d);n("IfAutomaticBorderDetection",i,d);n("IfAutomaticDeskew",i,d);n("IfAutoScan",i,d);n("IfDisableSourceAfterAcquire",i,d);n("IfDuplexEnabled",i,d);n("IfFeederEnabled",i,d);n("IfModalUI",i,d);n("IfScanInNewThread",i,d);n("IfShowCancelDialogWhenImageTransfer",i,d);n("IfShowUI",i,d);n("IfShowIndicator",i,d);n("IfUseTwainDSM",i,d);n("IfFeederLoaded",b,d);n("IfPaperDetectable",b,d);n("IfUIControllable",b,d);n("ImageBitsPerPixel",b);n("ImageCaptureDriverType",i,a);n("ImageLayoutDocumentNumber",b);n("ImageLayoutFrameBottom",b);n("ImageLayoutFrameLeft",b);n("ImageLayoutFrameNumber",b);n("ImageLayoutFrameRight",b);n("ImageLayoutFrameTop",b);n("ImageLayoutPageNumber",b);n("ImageLength",b);n("ImagePixelType",b);n("ImageWidth",b);n("ImageXResolution",b);n("ImageYResolution",b);n("MagData",b);n("MagType",b);n("PageSize",i,a);n("PendingXfers",b);n("PixelFlavor",i,a);n("PixelType",i,a);n("Resolution",i,a);n("SourceCount",b);n("TransferMode",i,a);n("Unit",i,a);n("XferCount",i,a);n("Capability",i,a);n("CapCurrentIndex",i,a);n("CapCurrentValue",i,a);n("CapDefaultIndex",b);n("CapDefaultValue",b);n("CapDescription",i);n("CapMaxValue",i,a);n("CapMinValue",i,a);n("CapNumItems",i,a);n("CapStepSize",i,a);n("CapType",i,a);n("CapValue",i,a);n("CapValueString",i);n("CapValueType",i,a);n("AllowMultiSelect",i,d);n("BackgroundColor",i,a);n("BackgroundFillColor",i,a);n("BlankImageCurrentStdDev",b);n("BlankImageMaxStdDev",i,a);n("BlankImageThreshold",i,a);n("CurrentImageIndexInBuffer",{set:function(p){if(p!=o.getSWebTwain().CurrentImageIndexInBuffer){o.getSWebTwain().CurrentImageIndexInBuffer=p}return l.checkErrorString(o)}});n("FitWindowType",i,a);n("HowManyImagesInBuffer",b);n("IfFitWindow",i,d);n("ImageMargin",i,a);n("MaxImagesInBuffer",i,a);n("MouseX",b);n("MouseY",b);n("SelectionImageBorderColor",i);n("Zoom",i,a);n("MouseShape",i,a);n("SelectedImagesIndices",{get:function(){var q=[],p=o.getSWebTwain().SelectedImagesCount;for(var r=0;r<p;r++){q.push(o.getSWebTwain().GetSelectedImageIndex(r))}return q}});n("HTTPPostResponseString",b);n("AsyncMode",i,d);n("FTPPassword",i);n("FTPPort",{set:function(p){if(p!==""){p=p*1;o.getSWebTwain().FTPPort=p;return l.checkErrorString(o)}return g}});n("FTPUserName",i);n("HTTPPort",{set:function(p){if(p!==""){p=p*1;o.getSWebTwain().HTTPPort=p;return l.checkErrorString(o)}else{p=c.detect.ssl?443:80;o.getSWebTwain().HTTPPort=p;return l.checkErrorString(o)}return f}});n("HTTPPassword",i);n("HTTPUserName",i);n("IfPASVMode",i,d);n("IfShowProgressBar",i,d);n("ProxyServer",i);n("IfShowFileDialog",i,d);n("IfTiffMultiPage",i,d);n("PDFAuthor",i);n("PDFCompressionType",i,a);n("PDFCreationDate",i);n("PDFCreator",i);n("PDFKeywords",i);n("PDFModifiedDate",i);n("PDFProducer",i);n("PDFSubject",i);n("PDFTitle",i);n("PDFVersion",i);n("TIFFCompressionType",i,a);n("JPEGQuality",{set:function(p){p=p*1;if(p>=100){p=100}else{if(p<0){p=0}}o.getSWebTwain().JPEGQuality=p;return l.checkErrorString(o)}});n("HttpContentTypeFieldValue",i);n("SelectionRectAspectRatio",i,a);n("IfAllowLocalCache",i,d);n("_AutoCropMethod",i,d);n("BrokerProcessType",i,a);n("BorderStyle",i,a);n("IfShowPrintUI",i,d);n("VScrollBar",i,d);n("EnableInteractiveZoom",i,d);n("ImageEditorIfEnableEnumerator",i,d);n("ImageEditorIfReadonly",i,d);n("ImageEditorIfModal",i,d);n("ImageEditorWindowTitle",i);n("IfSSL",i,d);n("AllowPluginAuthentication",i,d);n("HttpFieldNameOfUploadedImage",i);n("MaxInternetTransferThreads",i,a);n("MaxUploadImageSize",i,a);n("IfOpenImageWithGDIPlus",i,d);n("BufferMemoryLimit",i,a);n("Width",{get:function(){return o.getSWebTwain().style.width},set:function(p){o._ChangeWidth(p);return l.checkErrorString(o)}});n("Height",{get:function(){return o.getSWebTwain().style.height},set:function(p){o._ChangeHeight(p);return l.checkErrorString(o)}});n("IfThrowException",i,d);n("IfAutoScroll",i,d);n("ShowPageNumber",{get:function(){return g},set:function(p){return g}});n("UseLocalService",{get:function(){return true}})};c.attachMethod=function(o){var r=o,m=function(s){if(!c.License.checkProductKey(r,{Core:f})){if(c.isFunction(s)){s(r.ErrorCode,r.ErrorString)}return g}return f},n=function(t,s){if(!c.License.checkPDFProductKeyWhenNeeds(r,t)){if(c.isFunction(s)){s(r.ErrorCode,r.ErrorString)}return g}return f},p=function(t,s){if(t.HowManyImagesInBuffer==0){c.Errors.NoImage(t);if(c.isFunction(s)){s(t.ErrorCode,t.ErrorString)}return false}return true},q=function(t,u,s){if(!p(t,s)){return false}if(isNaN(u)||!c.isNumber(u)||u<0||u>=t.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(t);if(c.isFunction(s)){s(t.ErrorCode,t.ErrorString)}return false}return true};o.RegisterEvent=function(s,u){if(!c.isString(s)){c.Errors.InvalidEventName(r);return false}if(s.toLowerCase()==="onwsmessage"){c.Errors.InvalidEventName(r);return false}if(s.toLowerCase()==="onpostalltransfers"){if(c.isFunction(u)){r.__OnPostAllTransfers=u}return true}var t=["__",s].join("");r[t]=u;r.getSWebTwain().RegisterEvent(s,u);return l.checkErrorString(r)};o.onEvent=function(s,t){return r.RegisterEvent(s,t)};o.on=function(s,t){return r.RegisterEvent(s,t)};o._isMobileMode=function(){return false};o.CancelAllPendingTransfers=function(){r.getSWebTwain().CancelAllPendingTransfers();return l.checkErrorString(r)};o.CloseSource=function(){r.getSWebTwain().CloseSource();return l.checkErrorString(r)};o.CloseSourceManager=function(){r.getSWebTwain().CloseSourceManager();return l.checkErrorString(r)};o.DisableSource=function(){r.getSWebTwain().DisableSource();return l.checkErrorString(r)};o.FeedPage=function(){r.getSWebTwain().FeedPage();return l.checkErrorString(r)};o.GetDeviceType=function(){var s=r.getSWebTwain().GetDeviceType();l.setErrorString(r);return s};o.GetSourceNameItems=function(t){var s=r.getSWebTwain().GetSourceNameItems(t);l.setErrorString(r);return s};o.SourceNameItems=function(t){var s=r.getSWebTwain().GetSourceNameItems(t);l.setErrorString(r);return s};o.GetSourceNames=function(){c.Errors.ActiveXNotSupport(r);return[]};o.GetSourceType=function(t){var s=r.getSWebTwain().GetSourceType(t);l.setErrorString(r);return s};o.OpenSource=function(){r.getSWebTwain().OpenSource();return l.checkErrorString(r)};o.OpenSourceManager=function(){r.getSWebTwain().OpenSourceManager();return l.checkErrorString(r)};o.ResetImageLayout=function(){r.getSWebTwain().ResetImageLayout();return l.checkErrorString(r)};o.RewindPage=function(){r.getSWebTwain().RewindPage();return l.checkErrorString(r)};o.SelectSource=function(s,t){if(c.isUndefined(s)){r.getSWebTwain().SelectSource();return l.checkErrorString(r)}else{r.getSWebTwain().SelectSource();var u=l.checkErrorString(r);if(u){s();return true}else{t();return false}}};o.SelectSourceByIndex=function(s){r.getSWebTwain().SelectSourceByIndex(s);return l.checkErrorString(r)};o.CloseSourceAsync=function(){return l.wrapperPromise(r,r.CloseSource())};o.CloseSourceManagerAsync=function(){return l.wrapperPromise(r,r.CloseSourceManager())};o.GetSourceNamesAsync=function(){return l.wrapperPromise(r,r.GetSourceNames())};o.GetSourceTypeAsync=function(s){return l.wrapperPromise(r,r.GetSourceType(s))};o.OpenSourceAsync=function(){return l.wrapperPromise(r,r.OpenSource())};o.OpenSourceManagerAsync=function(){return l.wrapperPromise(r,r.OpenSourceManager())};o.SelectSourceAsync=function(){return l.wrapperPromise(r,r.SelectSource())};o.SelectSourceByIndexAsync=function(s){return l.wrapperPromise(r,r.SelectSourceByIndex(s))};o.SetFileXferInfo=function(s,u){var t=l.replaceLocalFilename(s);r.getSWebTwain().SetFileXferInfo(t,u);return l.checkErrorString(r)};o.SetImageLayout=function(v,u,t,s){r.getSWebTwain().SetImageLayout(v,u,t,s);return l.checkErrorString(r)};o.CapGet=function(){var s=r.getSWebTwain().CapGet();l.setErrorString(r);return s};o.CapGetCurrent=function(){var s=r.getSWebTwain().CapGetCurrent();l.setErrorString(r);return s};o.CapGetDefault=function(){var s=r.getSWebTwain().CapGetDefault();l.setErrorString(r);return s};o.CapGetFrameBottom=function(t){var s=r.getSWebTwain().CapGetFrameBottom(t);l.setErrorString(r);return s};o.CapGetFrameLeft=function(t){var s=r.getSWebTwain().CapGetFrameLeft(t);l.setErrorString(r);return s};o.CapGetFrameRight=function(t){var s=r.getSWebTwain().CapGetFrameRight(t);l.setErrorString(r);return s};o.CapGetFrameTop=function(t){var s=r.getSWebTwain().CapGetFrameTop(t);l.setErrorString(r);return s};o.CapGetHelp=function(){var s=r.getSWebTwain().CapGetHelp();l.setErrorString(r);return s};o.CapGetLabel=function(){var s=r.getSWebTwain().CapGetLabel();l.setErrorString(r);return s};o.CapGetLabels=function(){var s=r.getSWebTwain().CapGetLabels();l.setErrorString(r);return s};o.CapIfSupported=function(t){var s=r.getSWebTwain().CapIfSupported(t);l.setErrorString(r);return s};o.CapReset=function(){r.getSWebTwain().CapReset();return l.checkErrorString(r)};o.CapSet=function(){r.getSWebTwain().CapSet();return l.checkErrorString(r)};o.CapSetFrame=function(t,w,v,u,s){r.getSWebTwain().CapSetFrame(t,w,v,u,s);return l.checkErrorString(r)};o.GetCapItems=function(t){var s=r.getSWebTwain().GetCapItems(t);l.setErrorString(r);return s};o.GetCapItemsString=function(t){var s=r.getSWebTwain().GetCapItemsString(t);l.setErrorString(r);return s};o.SetCapItems=function(t,s){r.getSWebTwain().SetCapItems(t,s);return l.checkErrorString(r)};o.SetCapItemsString=function(t,s){r.getSWebTwain().SetCapItemsString(t,s);return l.checkErrorString(r)};o.AddText=function(C,z,w,B,s,A,t,u){var v=parseInt(C);if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().AddText(v,z,w,B,s,A,t,u);return l.checkErrorString(r)};o.CreateTextFont=function(u,F,z,y,B,C,v,D,s,A,w,x,E,t){r.getSWebTwain().CreateTextFont(u,F,z,y,B,C,v,D,s,A,w,x,E,t);return l.checkErrorString(r)};o.CopyToClipboard=function(t){var s=parseInt(t);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().CopyToClipboard(s);return l.checkErrorString(r)};o.Erase=function(A,u,x,z,t,y,v){var w=parseInt(A),s;if(isNaN(w)||w<0||w>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().Erase(w,u,x,z,t);return l.wrapperRet(r,s,y,v)};o.GetImageBitDepth=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageBitDepth(t);l.setErrorString(r);return s};o.GetImageWidth=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageWidth(t);l.setErrorString(r);return s};o.GetImageHeight=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageHeight(t);l.setErrorString(r);return s};o.GetImageSize=function(v,u,w){var t=parseInt(v);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageSize(t,u,w);l.setErrorString(r);return s};o.GetImageSizeWithSpecifiedType=function(u,v){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageSizeWithSpecifiedType(t,v);l.setErrorString(r);return s};o.GetImageXResolution=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageXResolution(t);l.setErrorString(r);return s};o.GetImageYResolution=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageYResolution(t);l.setErrorString(r);return s};o.CopyToClipboardAsync=function(s){return l.wrapperPromise(r,r.CopyToClipboard(s))};o.EraseAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.Erase(u,w,v,t,s))};o.GetImageBitDepthAsync=function(s){return l.wrapperPromise(r,r.GetImageBitDepth(s))};o.GetImageWidthAsync=function(s){return l.wrapperPromise(r,r.GetImageWidth(s))};o.GetImageHeightAsync=function(s){return l.wrapperPromise(r,r.GetImageHeight(s))};o.GetImageSizeAsync=function(t,s,u){return l.wrapperPromise(r,r.GetImageSize(t,s,u))};o.GetImageSizeWithSpecifiedTypeAsync=function(s,t){return l.wrapperPromise(r,r.GetImageSizeWithSpecifiedType(s,t))};o.GetImageXResolutionAsync=function(s){return l.wrapperPromise(r,r.GetImageXResolution(s))};o.GetImageYResolutionAsync=function(s){return l.wrapperPromise(r,r.GetImageYResolution(s))};o.SelectAllImages=function(){var s=r.getSWebTwain().HowManyImagesInBuffer,u,t=[];r.getSWebTwain().SelectedImagesCount=s;for(u=0;u<s;u++){r.getSWebTwain().SetSelectedImageIndex(u,u);t.push(u)}l.checkErrorString(r);return t};o.SelectImages=function(u){var s=u.length;r.getSWebTwain().SelectedImagesCount=s;for(var t=0;t<s;t++){r.getSWebTwain().SetSelectedImageIndex(t,u[t])}return l.checkErrorString(r)};o.GetSelectedImagesSize=function(t){var s=r.getSWebTwain().GetSelectedImagesSize(t);l.setErrorString(r);return s};o.GetSkewAngle=function(v,s,u){var t=parseInt(v),w;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().GetSkewAngle(t);return l.wrapperRet(r,w,s,u,false,true)};o.GetSkewAngleEx=function(A,u,x,z,t,y,v){var w=parseInt(A),s;if(isNaN(w)||w<0||w>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().GetSkewAngleEx(w,u,x,z,t);return l.wrapperRet(r,s,y,v)};o.IsBlankImage=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().IsBlankImage(t);l.setErrorString(r);return s};o.IsBlankImageEx=function(w,y,x,v,s,z){var u=parseInt(w);if(isNaN(u)||u<0||u>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var t=r.getSWebTwain().IsBlankImageEx(u,y,x,v,s,z);l.setErrorString(r);return t};o.Mirror=function(v,s,u){var t=parseInt(v),w;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().Mirror(t);return l.wrapperRet(r,w,s,u)};o.OverlayRectangle=function(w,y,x,u,t,s,v){r.getSWebTwain().OverlayRectangle(w,y,x,u,t,s,v);return l.checkErrorString(r)};o.RemoveAllImages=function(){var s;r.getSWebTwain().RemoveAllImages();s=l.checkErrorString(r);if(s){r.__innerRefreshImage()}r.Width=parseInt(r.Width)+2;return s};o.RemoveAllSelectedImages=function(){var s;r.getSWebTwain().RemoveAllSelectedImages();s=l.checkErrorString(r);if(s){r.__innerRefreshImage()}return s};o.RemoveImage=function(t){var s=parseInt(t);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().RemoveImage(s);return l.checkErrorString(r)};o.MirrorAsync=function(s){return l.wrapperPromise(r,r.Mirror(s))};o.RemoveAllImagesAsync=function(){return l.wrapperPromise(r,r.RemoveAllImages())};o.RemoveAllSelectedImagesAsync=function(){return l.wrapperPromise(r,r.RemoveAllSelectedImages())};o.RemoveImageAsync=function(s){return l.wrapperPromise(r,r.RemoveImage(s))};o.Rotate=function(x,u,w,s,v){var t=parseInt(x),y,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}y=r.getSWebTwain().Rotate(t,u,w);return l.wrapperRet(r,y,s,v)};o.RotateEx=function(A,u,t,z,y,v){var x=parseInt(A),s,w;if(isNaN(x)||x<0||x>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().RotateEx(x,u,t,z);return l.wrapperRet(r,s,y,v)};o.RotateLeft=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().RotateLeft(t);return l.wrapperRet(r,w,s,u)};o.RotateRight=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().RotateRight(t);return l.wrapperRet(r,w,s,u)};o.ChangeImageSize=function(A,y,w,z,x,t){var v=parseInt(A),s,u;if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(t)){t(r.ErrorCode,r.ErrorString)}return false}if(y<=0||w<=0){c.Errors.InvalidWidthOrHeight(r);if(c.isFunction(t)){t(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().ChangeImageSize(v,y,w,z);return l.wrapperRet(r,s,x,t)};o.Flip=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().Flip(t);return l.wrapperRet(r,w,s,u)};o.Crop=function(B,u,y,A,t,z,v){var x=parseInt(B),s,w;if(isNaN(x)||x<0||x>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().Crop(x,u,y,A,t);return l.wrapperRet(r,s,z,v)};o.CropToClipboard=function(v,y,x,u,s){var t=parseInt(v),w,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}w=r.getSWebTwain().CropToClipboard(t,y,x,u,s);return l.checkErrorString(r)};o.CutFrameToClipboard=function(v,y,x,u,s){var t=parseInt(v),w,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}w=r.getSWebTwain().CutFrameToClipboard(t,y,x,u,s);return l.checkErrorString(r)};o.CutToClipboard=function(t){var s=parseInt(t),u,v;if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}u=r.getSWebTwain().CutToClipboard(s);return l.checkErrorString(r)};o.RotateAsync=function(t,s,u){return l.wrapperPromise(r,r.Rotate(t,s,u))};o.RotateExAsync=function(u,t,v,s){return l.wrapperPromise(r,r.RotateEx(u,t,v,s))};o.RotateLeftAsync=function(s){return l.wrapperPromise(r,r.RotateLeft(s))};o.RotateRightAsync=function(s){return l.wrapperPromise(r,r.RotateRight(s))};o.ChangeImageSizeAsync=function(u,v,s,t){return l.wrapperPromise(r,r.ChangeImageSize(u,v,s,t))};o.FlipAsync=function(s){return l.wrapperPromise(r,r.Flip(s))};o.CropAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.Crop(u,w,v,t,s))};o.CropToClipboardAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.CropToClipboard(u,w,v,t,s))};o.CutFrameToClipboardAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.CutFrameToClipboard(u,w,v,t,s))};o.CutToClipboardAsync=function(s){return l.wrapperPromise(r,r.CutToClipboard(s))};o.InvertAsync=function(s){return l.wrapperPromise(r,r.Invert(s))};o.Invert=function(t){var s=parseInt(t),u,v;if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}c.Errors.ActiveXNotSupport(r);return false};o.SetDPI=function(A,w,t,x,z,y,u){var v=parseInt(A),s;if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().SetDPI(v,w,t,x,z);return l.wrapperRet(r,s,y,u)};o.SetViewMode=function(t,s){r.getSWebTwain().SetViewMode(t,s);return l.checkErrorString(r)};o.GetViewModeH=function(){var s=r.getSWebTwain().GetViewModeH();l.setErrorString(r);return s};o.GetViewModeV=function(){var s=r.getSWebTwain().GetViewModeV();l.setErrorString(r);return s};o.MoveImage=function(v,u){var t=parseInt(v),s=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer||isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().MoveImage(t,s);return l.checkErrorString(r)};o.SwitchImage=function(v,u){var t=parseInt(v),s=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer||isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().SwitchImage(t,s);return l.checkErrorString(r)};o.Print=function(){r.getSWebTwain().Print();return l.checkErrorString(r)};o.checkErrorString=function(){return l.isReturnSuccess(r)};o.FileExists=function(t){var u=l.replaceLocalFilename(t);var s=r.getSWebTwain().FileExists(u);l.setErrorString(r);return s};o.SaveAllAsMultiPageTIFF=function(s,w,u){if(!p(r,u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAllAsMultiPageTIFF(v);return l.wrapperRet(r,t,w,u)};o.SaveAllAsPDF=function(s,w,u){if(!p(r,u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAllAsPDF(v);return l.wrapperRet(r,t,w,u)};o.SaveAsBMP=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsBMP(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsJPEG=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsJPEG(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsPDF=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsPDF(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsPNG=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsPNG(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsTIFF=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsTIFF(w,v);return l.wrapperRet(r,t,x,u)};o.SaveSelectedImagesAsMultiPagePDF=function(s,w,u){var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(v);return l.wrapperRet(r,t,w,u)};o.SaveSelectedImagesAsMultiPageTIFF=function(s,w,u){var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(v);return l.wrapperRet(r,t,w,u)};o.SaveSelectedImagesToBase64Binary=function(u,t){var s=r.getSWebTwain().SaveSelectedImagesToBase64Binary();return l.wrapperRet(r,s,u,t)};o.ShowFileDialog=function(t,s,z,v,x,y,u,w){r.getSWebTwain().ShowFileDialog(t,s,z,v,x,y,u,w);return l.checkErrorString(r)};o.FTPDownload=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPDownload(w,v);if(s&&c.License.isLTS()){Dynamsoft.DWT.lcvrf(r)}return l.wrapperRet(r,s,u,t)};o.FTPDownloadDirectly=function(x,w,s,v,u){if(!m(u)){return false}var t=r.getSWebTwain().FTPDownloadDirectly(x,w,s);return l.wrapperRet(r,t,v,u)};o.FTPDownloadEx=function(x,w,u,v,t){if(!m(t)){return false}if(u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().FTPDownloadEx(x,w,u);return l.wrapperRet(r,s,v,t)};o.FTPUpload=function(x,u,w,v,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUpload(x,u,w);return l.wrapperRet(r,s,v,t)};o.FTPUploadDirectly=function(x,s,w,v,u){if(!m(u)){return false}var t=r.getSWebTwain().FTPUploadDirectly(x,s,w);return l.wrapperRet(r,t,v,u)};o.FTPUploadEx=function(y,u,x,v,w,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadEx(y,u,x,v);return l.wrapperRet(r,s,w,t)};o.FTPUploadAllAsMultiPageTIFF=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadAllAsMultiPageTIFF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAllAsPDF=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadAllAsPDF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAsMultiPagePDF=function(w,v,u,t){var s=r.getSWebTwain().FTPUploadAsMultiPagePDF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAsMultiPageTIFF=function(w,v,u,t){var s=r.getSWebTwain().FTPUploadAsMultiPageTIFF(w,v);return l.wrapperRet(r,s,u,t)};o.HTTPDownloadDirectly=function(w,v,s,x,u){if(!m(u)){return false}var t=r.getSWebTwain().HTTPDownloadDirectly(w,v,s);return l.wrapperRet(r,t,x,u)};o.HTTPDownload=function(v,u,x,t){var s,w=l.getImageType(u);return r.HTTPDownloadEx(v,u,w,x,t)};o.HTTPDownloadEx=function(w,v,u,x,t){if(!m(t)){return g}if(u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().HTTPDownloadEx(w,v,u);if(s&&c.License.isLTS()){Dynamsoft.DWT.lcvrf(r)}return l.wrapperRet(r,s,x,t)};o.HTTPDownloadThroughGet=o.HTTPDownloadEx;o.HTTPUploadThroughPostDirectly=function(w,t,s,y,x,v){if(!m(v)){return false}var u=r.getSWebTwain().HTTPUploadThroughPostDirectly(w,t,s,y);return l.wrapperRet(r,u,x,v,true)};o.HTTPUploadThroughPost=function(w,v,s,y,x,u){if(!c.isNumber(v)||isNaN(v)||v<-2){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}var t=r.getSWebTwain().HTTPUploadThroughPost(w,v,s,y);return l.wrapperRet(r,t,x,u,true)};o.HTTPUploadThroughPostEx=function(w,v,s,z,x,y,u){if(!c.isNumber(v)||isNaN(v)||v<-2){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}var t=r.getSWebTwain().HTTPUploadThroughPostEx(w,v,s,z,x);return l.wrapperRet(r,t,y,u,true)};o.ClearAllHTTPFormField=function(){r.getSWebTwain().ClearAllHTTPFormField();return l.checkErrorString(r)};o.SetHTTPFormField=function(t,s){r.getSWebTwain().SetHTTPFormField(t,s);return l.checkErrorString(r)};o.HTTPUploadAllThroughPostAsMultiPageTIFF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPostAsMultiPageTIFF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadAllThroughPostAsPDF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadAllThroughPostAsPDF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPostAsMultiPagePDF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPutDirectly=function(w,t,s,x,v){var u;u=r.getSWebTwain().HTTPUploadThroughPutDirectly(w,t,s);return l.wrapperRet(r,u,x,v)};o.HTTPUploadThroughPut=function(v,u,s,x,t){var w=l.getImageType(s);return r.HTTPUploadThroughPutEx(v,u,s,w,x,t)};o.HTTPUploadThroughPutEx=function(w,v,s,x,y,u){var t;t=r.getSWebTwain().HTTPUploadThroughPutEx(w,v,s,x);return l.wrapperRet(r,t,y,u)};o.HTTPUploadAllThroughPutAsMultiPageTIFF=function(v,s,x,u){var t=-1,w=2;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadThroughPutAsMultiPageTIFF=function(v,s,x,u){var t=-2,w=2;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadAllThroughPutAsPDF=function(v,s,x,u){var t=-1,w=4;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadThroughPutAsMultiPagePDF=function(v,s,x,u){var t=-2,w=4;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.ShowImageEditor=function(){r.getSWebTwain().ShowImageEditor();return l.checkErrorString(r)};o.SetCookie=function(s){r.getSWebTwain().SetCookie(s);return l.checkErrorString(r)};o.LoadImageFromBase64Binary=function(s,u){if(!m()){return g}if(u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u)){return g}var t=r.getSWebTwain().LoadImageFromBase64Binary(s,u);l.setErrorString(r);return t};o.SaveSelectedImagesToBytes=function(u,s){var t=r.getSWebTwain().SaveSelectedImagesToBytes(u,s);l.setErrorString(r);return t};o.LoadImageFromBytes=function(v,s,u){if(!m()){return g}if(u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u)){return g}var t=r.getSWebTwain().LoadImageFromBytes(v,s,u);l.setErrorString(r);return t};o.UnregisterEvent=function(s,t){r.getSWebTwain().UnregisterEvent(s,t);return l.checkErrorString(r)};o.SetImageWidth=function(w,x,s,u){var t=parseInt(w),v;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}v=r.getSWebTwain().SetImageWidth(t,x);return l.wrapperRet(r,v,s,u)};o.HTTPDownloadThroughPost=function(w,v,u,x,t){if(!m(t)){return false}if(u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().HTTPDownloadThroughPost(w,v,u);return l.wrapperRet(r,s,x,t)};o.SetCustomDSDataEx=function(s){r.getSWebTwain().SetCustomDSDataEx(s);return l.checkErrorString(r)};o.SetCustomDSData=function(s){r.getSWebTwain().SetCustomDSData(s);return l.checkErrorString(r)};o.GetCustomDSDataEx=function(){var s=r.getSWebTwain().GetCustomDSDataEx();l.setErrorString(r);return s};o.GetCustomDSData=function(s){var t=r.getSWebTwain().GetCustomDSData(s);l.setErrorString(r);return t};o.ChangeBitDepth=function(u,t,v){var s=parseInt(u);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().ChangeBitDepth(s,t,v);return l.checkErrorString(r)};o.ConvertToGrayScale=function(w,s,u){var t=parseInt(w),v;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}v=r.getSWebTwain().ConvertToGrayScale(w);return l.wrapperRet(r,v,s,u)};o.ShowImageEditorEx=function(t,w,s,v,u){r.getSWebTwain().ShowImageEditorEx(t,w,s,v,u);return l.checkErrorString(r)};o.ClearTiffCustomTag=function(){r.getSWebTwain().ClearTiffCustomTag();return l.checkErrorString(r)};o.SetTiffCustomTag=function(u,t,v){var s=u*1;if(Dynamsoft.Lib.isUndef(u)||Dynamsoft.Lib.isUndef(t)){Dynamsoft.Lib.Errors.InvalidParameter(r);return false}if(s<=0||s>2147483647){Dynamsoft.Lib.Errors.InvalidTiffTagError(r);return false}r.getSWebTwain().SetTiffCustomTag(u,t,v);return l.checkErrorString(r)};o.IsBlankImageExpress=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().IsBlankImageExpress(t);l.setErrorString(r);return s};o._ChangeWidth=function(t){var s=document.getElementById(r._strDWTInnerContainerID),w;if(c.isString(t)){if(t.length>0){if(t.charAt(t.length-1)==="%"){w=t}}}if(!w){var u=parseInt(t);if(u&&u>2){w=(u-2)+"px"}}if(w){r._strWidth=w;r.getSWebTwain().style.width=w;if(s){s.style.width=w}}return f};o._ChangeHeight=function(t){var s=document.getElementById(r._strDWTInnerContainerID),w;if(c.isString(t)){if(t.length>0){if(t.charAt(t.length-1)==="%"){w=t}}}if(!w){var u=parseInt(t);if(u){w=u+"px"}}if(w){r._strHeight=w;r.getSWebTwain().style.height=w;if(s){s.style.height=w}}return f};o.SetSize=function(s,t){var u=this;u._ChangeWidth(s);u._ChangeHeight(t);return f};o.SetSelectedImageArea=function(u,w,v,t,s){r.getSWebTwain().SetSelectedImageArea(u,w,v,t,s);return l.checkErrorString(r)};o.SetVideoRotateMode=function(s){r.getSWebTwain().SetVideoRotateMode(s);return l.checkErrorString(r)};o.SetOpenSourceTimeout=function(s){r.getSWebTwain().SetOpenSourceTimeout(s);return l.checkErrorString(r)};o.SetHTTPHeader=function(s,t){return false};o.GetImageURL=function(s,t,u){return""};o.GetImagePartURL=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return""}var s=r.getSWebTwain().GetDIB(t);l.setErrorString(r);return s};o.GetLicenseInfo=function(s){try{var u=false;if(c.License.isLTS()){u=true}else{r.getSWebTwain().ProductKey=s}var v=r.getSWebTwain().GetLicenseInfo();if(l.checkErrorString(r)){var x=c.parse(v);if(x&&x.message){c.Errors.LicenseEmptyOrInvalid(r);r._errorString=x.message;x=undefined}else{if(u){if(x&&c.isArray(x.Detail)&&x.Detail.length>0){var w=x.Detail[0].ExpireDate;Dynamsoft.DWT.lsexp(Dynamsoft.DWT.EnumInstance.dwt_desktop,w)}x.LTS=true}}r.__licenseInfo=x}else{r.__licenseInfo=undefined}}catch(t){r.__licenseInfo=undefined}return Promise.resolve(r.__licenseInfo)};o.LoadDibFromClipboard=function(u,t){var s=r.getSWebTwain().LoadDibFromClipboard();if(s&&c.License.isLTS()){Dynamsoft.DWT.lcvrf(r)}return l.wrapperRet(r,s,u,t)};o.LoadImage=function(s,w,u){if(!m(u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().LoadImage(v);if(t&&c.License.isLTS()){Dynamsoft.DWT.lcvrf(r)}return l.wrapperRet(r,t,w,u)};o.LoadImageEx=function(t,w,y,v){if(!m(v)){return g}if(w!=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP&&w!=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG&&w!=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF&&w!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG&&w!=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&w!=Dynamsoft.DWT.EnumDWT_ImageType.IT_J2K){w=-1}if(!n(w,v)){return g}var x=l.replaceLocalFilename(t),s=w,u;if(s==Dynamsoft.DWT.EnumDWT_ImageType.IT_ALL){s=-1}u=r.getSWebTwain().LoadImageEx(x,s);if(u&&c.License.isLTS()){Dynamsoft.DWT.lcvrf(r)}return l.wrapperRet(r,u,y,v)};o.EnableSource=function(t,u,s){r.AcquireImage(t,u,s);return l.checkErrorString(r)};o.AcquireImage=function(A,z,x){var s=r.getSWebTwain(),y,v=null,w=null,u=null;if(c.isUndefined(x)&&(c.isFunction(A)&&c.isFunction(z)||c.isFunction(A)&&c.isUndefined(z)||c.isFunction(A)&&z==null||A==null&&c.isFunction(z))){v=null;if(c.isFunction(A)){w=A}if(c.isFunction(z)){u=z}}else{if(!c.isUndefined(A)){v=A}if(c.isFunction(z)){w=z}if(c.isFunction(x)){u=x}}if(!m(u)){return false}if(v!==undefined&&v!==null){var t;t=v.SelectSourceByIndex;if(t!=null&&typeof(t)!="undefined"){s.SelectSourceByIndex(t);s.CloseSource();s.OpenSource()}t=v.IfShowUI;if(t!=null&&typeof(t)!="undefined"){s.IfShowUI=t}t=v.PixelType;if(t!=null&&typeof(t)!="undefined"){s.PixelType=t}t=v.Resolution;if(t!=null&&typeof(t)!="undefined"){s.Resolution=t}t=v.IfFeederEnabled;if(t!=null&&typeof(t)!="undefined"){s.IfFeederEnabled=t}t=v.IfDuplexEnabled;if(t!=null&&typeof(t)!="undefined"){s.IfDuplexEnabled=t}t=v.IfDisableSourceAfterAcquire;if(t!=null&&typeof(t)!="undefined"){s.IfDisableSourceAfterAcquire=t}}r.getSWebTwain().RegisterEvent("OnPostAllTransfers",function(){var B=l.checkErrorString(r);if(B){if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(r)}if(c.isFunction(w)){w()}}else{if(c.isFunction(u)){u(r._errorCode,r._errorString)}}if(c.isFunction(r.__OnPostAllTransfers)){r.__OnPostAllTransfers()}});y=s.AcquireImage();return l.checkErrorString(r)};o.GenerateURLForUploadData=function(v,w,u){var s=v,t;if(s==Dynamsoft.DWT.EnumDWT_ImageType.IT_ALL){s=-1}t=true;return l.wrapperRet(r,t,w,u)};o._innerFun=function(s,t,u){var w=r.getSWebTwain(),v=w[s];if(typeof(v)==="function"){return v.apply(w,t)}else{return v}};o.ActiveUI=function(t,s){};o.startScan=function(){return new Promise(function(t,s){})};o.IndexToImageID=function(s){return s};o.ImageIDToIndex=function(s){return s};o.first=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){r.CurrentImageIndexInBuffer=0;r.__innerRefreshImage()}return f};o.previous=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(t>0){r.CurrentImageIndexInBuffer=t-1;r.__innerRefreshImage()}}return f};o.next=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(t>=0&&t<s-1){r.CurrentImageIndexInBuffer=t+1;r.__innerRefreshImage()}}return f};o.last=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){r.CurrentImageIndexInBuffer=s-1;r.__innerRefreshImage()}return f};o.isUsingActiveX=function(){return true};o.show=function(){return o.ShowImageEditor()};o.SetLTSInfo=function(t,s){return r.getSWebTwain().SetLTSInfo(t,s)};o.EnableBuffer=function(s){return r.getSWebTwain().Encrypt(s,0)};o.GetBuffer=function(s){return r.getSWebTwain().GetBuffer(s)};o.GetUUID=function(){return r.getSWebTwain().GetUUID()};o.__innerRefreshImage=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(r.__OnRefreshUI){r.__OnRefreshUI(t,s)}}};o.__OnBitmapChangedEx=function(w,v,u,s,D){var t=v,C=u,y=s,x=D,B=1,z=2;if(x>-1&&o._blts&&(t==B||t==z)){var A=Dynamsoft.DWT.lgct(x);if(c.isFunction(r.__OnLtsverify)){r.__OnLtsverify(A,1)}}};o._attachEvents=function(){var s=r.getSWebTwain(),t;t=Dynamsoft.Lib.detect.getVersionArray(String(r.VersionInfo));if(t.length<=2||t[0]<9||t[0]==9&&t[1]<=2){return}if(r.__OnPostTransfer!=""){s.RegisterEvent("OnPostTransfer",r.__OnPostTransfer)}if(r.__OnPostAllTransfers!=""){s.RegisterEvent("OnPostAllTransfers",r.__OnPostAllTransfers)}if(r.__OnMouseClick!=""){s.RegisterEvent("OnMouseClick",r.__OnMouseClick)}if(r.__OnPostLoad!=""){s.RegisterEvent("OnPostLoad",r.__OnPostLoad)}if(r.__OnImageAreaSelected!=""){s.RegisterEvent("OnImageAreaSelected",r.__OnImageAreaSelected)}if(r.__OnMouseDoubleClick!=""){s.RegisterEvent("OnMouseDoubleClick",r.__OnMouseDoubleClick)}if(r.__OnMouseRightClick!=""){s.RegisterEvent("OnMouseRightClick",r.__OnMouseRightClick)}if(r.__OnTopImageInTheViewChanged!=""){s.RegisterEvent("OnTopImageInTheViewChanged",r.__OnTopImageInTheViewChanged)}if(r.__OnImageAreaDeSelected!=""){s.RegisterEvent("OnImageAreaDeSelected",r.__OnImageAreaDeSelected)}if(r.__OnGetFilePath!=""){s.RegisterEvent("OnGetFilePath",r.__OnGetFilePath)}if(r.__OnAfterOperate!=""){s.RegisterEvent("OnAfterOperate",r.__OnAfterOperate)}if(r.__OnBeforeOperate!=""){s.RegisterEvent("OnBeforeOperate",r.__OnBeforeOperate)}if(r.__OnOperateStatus!=""){s.RegisterEvent("OnOperateStatus",r.__OnOperateStatus)}if(r.__OnBitmapChanged!=""){s.RegisterEvent("OnBitmapChanged",r.__OnBitmapChanged)}if(r.__OnBitmapChangedEx!=""){s.RegisterEvent("OnBitmapChangedEx",r.__OnBitmapChangedEx)}if(r.__OnMouseMove!=""){s.RegisterEvent("OnMouseMove",r.__OnMouseMove)}if(r.__OnPreAllTransfers!=""){s.RegisterEvent("OnPreAllTransfers",r.__OnPreAllTransfers)}if(r.__OnPreTransfer!=""){s.RegisterEvent("OnPreTransfer",r.__OnPreTransfer)}if(r.__OnSourceUIClose!=""){s.RegisterEvent("OnSourceUIClose",r.__OnSourceUIClose)}if(r.__OnTransferCancelled!=""){s.RegisterEvent("OnTransferCancelled",r.__OnTransferCancelled)}if(r.__OnTransferError!=""){s.RegisterEvent("OnTransferError",r.__OnTransferError)}if(r.__OnInternetTransferPercentage!=""){s.RegisterEvent("OnInternetTransferPercentage",r.__OnInternetTransferPercentage)}if(r.__OnInternetTransferPercentageEx!=""){s.RegisterEvent("OnInternetTransferPercentageEx",r.__OnInternetTransferPercentageEx)}}};function k(p){var s=p,r=c.get(s._strDWTNonInstallInnerContainerID),n="",q;if(r.innerHTML!=""){return}if(Dynamsoft.DWT.ActiveXInstallWithCAB&&h.bIE){q=["<div style='display: block; border:solid black 1px; text-align:center; width:",s._strWidth,";height:",s._strHeight,"'>","<ul style='padding-top:100px;'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join("")}else{var m=("https:"==location.protocol?"https://":"http://");if(c.product.bHTML5Edition){n=Dynamsoft.dcp.getDSPath()}else{if(h.bIE){n=Dynamsoft.dcp.getDSPath()}else{n=(h.bWin)?c.product.getMSIPath():c.product.getPKGPath()}}q=["<div style='display: block; border:solid black 1px; text-align:center; width:",s._strWidth,";height:",s._strHeight,"'>","<ul style='padding-top:100px;'>","<li>The Component is not installed</li>","<li>You need to download and install to use this sample.</li>","<li>Please click the below link to download it.</li>","<li><a href='",n,"'>Download</a></li>","</ul></div>"].join("")}r.innerHTML=q}c.noControl=function(m){if(Dynamsoft.DWT.IfUseEmbeddedDownloadNoticeForActiveX){if(c.isFunction(c.detect.onNoControl)){c.detect.onNoControl(c.get(m._containerID),m._strWidth,m._strHeight)}else{var n=c.detect.arySTwains;for(var p=0;p<n.length;p++){var t=n[p];if(!t._vPluginExist){k(t);c.show(t._strDWTNonInstallInnerContainerID);c.hide(t._strDWTInnerContainerID)}}}}else{var s=window,q=c.product,r="";if(c.isFunction(Dynamsoft.OnWebTwainNotFoundOnWindowsCallback)){if(h.bIE){r=Dynamsoft.dcp.getDSPath()}else{if(q.bHTML5Edition){r=Dynamsoft.dcp.getDSPath()}else{r=q.getMSIPath()}}Dynamsoft.OnWebTwainNotFoundOnWindowsCallback(q.name,r,q.bHTML5Edition,h.bIE,h.bSafari,c.detect.ssl,c.env.strIEVersion)}}}});Dynamsoft.Ready(function(e,c){var b=Dynamsoft,a=(Dynamsoft.navInfoSync.IEVersion<=8);if(!e.product.bPluginEdition&&!e.product.bActiveXEdition){return}function d(g){var h=this;if(a){var f=document.createElement("div");document.body.appendChild(f);f._stwain=g._fakeControl;h.fackControl=f;e.attachAxViewerPropertyUI(h.fackControl);e.attachAxViewerFunctions(h.fackControl)}else{h._stwain=g;e.attachAxViewerPropertyUI(h);e.attachAxViewerFunctions(h)}}e.attachAxViewerPropertyUI=function(g){var f=function(i,h){if(!(i in g)){Object.defineProperty(g,i,h)}};f("width",{get:function(){return g._stwain.Width},set:function(h){g._stwain.Width=h;return e.checkErrorString(g._stwain)}});f("height",{get:function(){return g._stwain.Height},set:function(h){g._stwain.Height=h;return e.checkErrorString(g._stwain)}});f("background",{get:function(){return g._stwain.BackgroundColor},set:function(h){g._stwain.BackgroundColor=h;return h}});f("cursor",{get:function(){return g._stwain.MouseShape},set:function(h){g._stwain.MouseShape=h;return h}});f("showPageNumber",{get:function(){return false},set:function(h){return false}});f("ifAutoScroll",{get:function(){return g._stwain.IfAutoScroll},set:function(h){g._stwain.IfAutoScroll=h;return h}});f("pageMargin",{get:function(){return g._stwain.ImageMargin},set:function(h){g._stwain.ImageMargin=h;return h}});f("zoom",{get:function(){return g._stwain.Zoom},set:function(h){g._stwain.Zoom=h;return h}})};e.attachAxViewerFunctions=function(f){f.next=function(){var g=this;return g._stwain.next()};f.previous=function(){var g=this;return g._stwain.previous()};f.first=function(){var g=this;return g._stwain.first()};f.last=function(){var g=this;return g._stwain.last()};f.gotoPage=function(g){var i=this,h=g*1;if(e.isNaN(h)||!e.isNumber(h)){e.Errors.InvalidIndex(i._stwain);return false}if(h<0||h>=i._stwain.HowManyImagesInBuffer){e.Errors.IndexOutOfRange(i._stwain);return false}i._stwain.CurrentImageIndexInBuffer=h;return h};f.setSelectedAreas=function(g){var h=this;return h._stwain.SetSelectedImageArea(h._stwain.CurrentImageIndexInBuffer,g.left,g.top,g.right,g.bottom)};f.fitWindow=function(g){var h=this;if(g=="height"){h._stwain.IfFitWindow=true;h._stwain.FitWindowType=Dynamsoft.EnumDWT_FitWindowType.enumFitWindowHeight}else{if(g=="width"){h._stwain.IfFitWindow=true;h._stwain.FitWindowType=Dynamsoft.EnumDWT_FitWindowType.enumFitWindowWidth}else{h._stwain.IfFitWindow=true;h._stwain.FitWindowType=Dynamsoft.EnumDWT_FitWindowType.enumFitWindow}}return true};f.setViewMode=function(h,g){var i=this;return i._stwain.SetViewMode(h,g)};f.createImageEditor=function(){var g=this;return g._stwain};f.on=function(h,i){var j=this,g;g=j._convertEvtName(h);if(g!=""){if(g=="OnImageAreaSelected"){j.OnImageAreaSelected=function(l,o,n,m,k){i(l,[{x:o,y:n,width:m-o,height:k-n}])};return j._stwain.RegisterEvent(g,j.OnImageAreaSelected)}return j._stwain.RegisterEvent(g,i)}return false};f.off=function(h,i){var j=this,g;g=j._convertEvtName(h);if(g!=""){if(g=="OnImageAreaSelected"){if(j.OnImageAreaSelected){return j._stwain.UnregisterEvent(g,j.OnImageAreaSelected)}else{return j._stwain.UnregisterEvent(g)}}return j._stwain.UnregisterEvent(g,i)}return false};f._convertEvtName=function(h){if(!e.isString(h)){return""}var g=e.trim(h).toLowerCase();if(g=="toppagechanged"){return"OnTopImageInTheViewChanged"}else{if(g=="click"){return"OnMouseClick"}else{if(g=="dblclick"){return"OnMouseDoubleClick"}else{if(g=="mousemove"){return"OnMouseMove"}else{if(g=="rightclick"){return"OnMouseRightClick"}else{if(g=="pageareaselected"){return"OnImageAreaSelected"}else{if(g=="pageareaunselected"){return"OnImageAreaDeSelected"}}}}}}}return e.trim(h)}};d.prototype.getInstance=function(){if(a){return this.fackControl}return this};e.UI=e.UI||{};e.UI.DWTAxViewer=d});Dynamsoft.Ready(function(d,b){if(!d.product.bActiveXEdition){return}var c=Dynamsoft.navInfo;function a(e){var f=this,g=e||{};f._containerID=g.containerID||"dwtcontrolContainer";f._strWidth=g.width||270;f._strHeight=g.height||350;f._errorCode=0;f._errorString="";f.__licenseInfo=false;if(d.isString(f._strWidth)&&f._strWidth.indexOf("%")>0){}else{f._strWidth=[parseInt(f._strWidth),"px"].join("")}if(d.isString(f._strHeight)&&f._strHeight.indexOf("%")>0){}else{f._strHeight=[parseInt(f._strHeight),"px"].join("")}f._strObjectName=f._containerID+"_Obj";f.__config=g;f.__OnPluginReady=g.onPluginReady;f.__OnPluginNotReady=g.onPluginNotReady;f.Addon={};f._strDWTInnerContainerID=f._containerID+"_CID";f._strDWTNonInstallInnerContainerID=f._containerID+"_NonInstallCID";var i=document.createElement("div");document.body.appendChild(i);f._fakeControl=i;if(d.UI.DWTAxViewer){var h=new d.UI.DWTAxViewer(f);i.Viewer=h.getInstance()}f._createControl()}a.prototype._createControl=function(){var f;var i=this,h=i._strWidth,e=i._strHeight,g;if(d.isString(h)){if(h.indexOf("%")>0){h="100%"}else{h=parseInt(h)+2+"px"}}if(d.isString(e)){if(e.indexOf("%")>0){e="100%"}else{e=parseInt(e)+2+"px"}}if(!Dynamsoft.DWT.ActiveXInstallWithCAB){g=['<div id="',i._strDWTInnerContainerID,'" style="width:',h,";height:",e,'">','<object id="',i._strObjectName,'" style="width:',i._strWidth,";height:",i._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',d.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]}else{g=['<div id="',i._strDWTInnerContainerID,'" style="width:',h,";height:",e,'">','<object id="',i._strObjectName,'" style="width:',i._strWidth,";height:",i._strHeight,';border:1px solid #AAAAAA"',' codebase="',(c.bWin64)?d.product.getActiveXCABx64Path():d.product.getActiveXCABx86Path(),"#version=",Dynamsoft.DWT.ActiveXVersion,'"',' classid="clsid:',d.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]}g.push('<div id="',i._strDWTNonInstallInnerContainerID,'" style="width: ',h,';display:none"></div>');f=document.getElementById(i._containerID);if(f){f.innerHTML=g.join("")}i._fakeControl._objWebTwain=null;i._fakeControl.getSWebTwain=function(){var j=this;if(j._objWebTwain===null){j._objWebTwain=document.getElementById(i._strObjectName)}return j._objWebTwain}};a.prototype.getInstance=function(){var f=this,e=f._fakeControl.getSWebTwain();if(e){return f._fakeControl}return false};a.prototype._isMobileMode=function(){return false};d.detect._controlDetect=function(){var o=d.detect.arySTwains,i=o[0],l=i&&i._fakeControl&&i._fakeControl.getSWebTwain();if(l){var m=Dynamsoft.DWT,k=m.ProductKey;var g=false;if(c.bIE){var f=navigator.userAgent.toLowerCase(),j=!c.bOSx64||(f.indexOf("wow64")>=0),n;if(j){n="DynamicPdfCore_"+m.PdfVersion+".dll"}else{n="DynamicPdfCorex64_"+m.PdfVersion+".dll"}if(l.ErrorCode==0&&""!=l.GetAddOnVersion("pdf",n)){g=true}}else{if(l.ErrorCode==0){g=true}}if(g){clearInterval(d.detect._varSeed);var h=function(p,t,q){var r,u,s;for(r=0;r<o.length;r++){u=o[r];s=u._fakeControl.getSWebTwain();d.__innerInitEvents(u._fakeControl,u.__config);u._fakeControl.__OnRefreshUI=u.__config.onRefreshUI||"";d.attachProperty(u._fakeControl);d.attachMethod(u._fakeControl);u._fakeControl._attachEvents();if(p==0){u._fakeControl.GetLicenseInfo(t)}else{u._fakeControl._blts=true;if(t!=""&&q!=""){u._fakeControl.SetLTSInfo(t,q);u._fakeControl.GetLicenseInfo().then(function(v){Dynamsoft.DWT.lcheckLic(Dynamsoft.DWT.EnumInstance.dwt_desktop,v)})}else{u._fakeControl.__licenseInfo={LTS:true,Detail:[]}}Dynamsoft.DWT.laddDWTObj(u._fakeControl)}d.attachAddon(u._fakeControl);if(d.isFunction(u.__OnPluginReady)){u.__OnPluginReady()}}};if(d.License.isLTS()){var e=Dynamsoft.DWT.li({instanceMode:Dynamsoft.DWT.EnumInstance.dwt_desktop,axInstance:l});if(!Dynamsoft.DWT.lisValidID(e)){h(1,"","");return}Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(p){h(1,p.ar,p.cu)},function(p){if(p){Dynamsoft.DWT.lsetException((p.code||p.ltsErrorCode),p.message);Dynamsoft.DWT.OnLicenseException()}h(1,"","")})}else{h(0,m.ProductKey,"")}}else{if(!d.detect.bNoControlEvent){d.noControl(i);d.detect.bNoControlEvent=true}if(d.isFunction(l.__OnPluginNotReady)){l.__OnPluginNotReady()}}}else{clearInterval(d.detect._varSeed)}};d.ie={};d.ie.DynamicWebTwain=function(e){var f=new a(e);d.detect.arySTwains.push(f);return f};d.ie.closeAll=function(){var e=d.detect.arySTwains,f,h,g;for(f=0;f<e.length;f++){h=e[f];if(h&&h._fakeControl){g=h._fakeControl.getSWebTwain();if(g&&g.ErrorCode==0){g.RemoveAllImages()}}}d.detect.arySTwains=[]};Dynamsoft.DWT.RemoveAllAuthorizations=function(){return false}});Dynamsoft.Ready(function(e,c){var b=Dynamsoft;if(!e.product.bPluginEdition){return}var d=Dynamsoft.navInfo,f=document,h=navigator,g;function a(i){var j=this,k=i||{};j._containerID=k.containerID||"dwtcontrolContainer";j._strWidth=k.width||270;j._strHeight=k.height||350;if(e.isString(j._strWidth)&&j._strWidth.indexOf("%")>0){}else{j._strWidth=[parseInt(j._strWidth),"px"].join("")}if(e.isString(j._strHeight)&&j._strHeight.indexOf("%")>0){}else{j._strHeight=[parseInt(j._strHeight),"px"].join("")}j._strObjectName=j._containerID+"_Obj";e.__innerInitEvents(j,k);j.__OnPluginReady=k.onPluginReady;j.__OnPluginNotReady=k.onPluginNotReady;j.__OnRefreshUI=k.onRefreshUI||"";j._objectWebTwain=null;j._strDWTInnerContainerID=j._containerID+"_CID";j._strDWTNonInstallInnerContainerID=j._containerID+"_NonInstallCID";j._vNotAllowedForChrome=false;j._vPluginExist=false;j.Addon={};if(e.UI.DWTAxViewer){j.Viewer=new e.UI.DWTAxViewer(j)}}g=a.prototype;g.getSWebTwain=function(){var i=this;return i._objectWebTwain};g._isMobileMode=function(){return false};g.getInstance=function(){var i=this;if(i._objectWebTwain){return i}return false};g._createControl=function(){var n=this,k,m=n._strWidth,j=n._strHeight,l;if(e.isString(m)){if(m.indexOf("%")>0){m="100%"}else{m=parseInt(m)+2+"px"}}if(e.isString(j)){if(j.indexOf("%")>0){j="100%"}else{j=parseInt(j)+2+"px"}}l=['<div id="',n._strDWTInnerContainerID,'" style="width:',m,";height:",j,'">'];if(d.bIE){if(!Dynamsoft.DWT.ActiveXInstallWithCAB){l.push('<object id="',n._strObjectName,'" style="width:',n._strWidth,";height:",n._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>")}else{l.push('<object id="',n._strObjectName,'" style="width:',n._strWidth,";height:",n._strHeight,';border:1px solid #AAAAAA"',' codebase="',(d.bWin64)?e.product.getActiveXCABx64Path():e.product.getActiveXCABx86Path(),"#version=",Dynamsoft.DWT.ActiveXVersion,'"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>")}}else{var i=n._strWidth;if(e.isString(i)&&i.indexOf("%")==-1){i=(parseInt(i)-2)+"px"}l.push('<embed id="',n._strObjectName,'" style="display: inline; width:',i,";height:",n._strHeight,'" type="',e.product.strMIMEType,'"',' pluginspage="',(d.bWin)?e.product.getMSIPath():e.product.getPKGPath(),'"></embed>')}l.push('</div><div id="',n._strDWTNonInstallInnerContainerID,'" style="width: ',m,';display:none"></div>');k=e.get(n._containerID);if(k){k.innerHTML=l.join("")}n._objectWebTwain=e.get(n._strObjectName)};g._notAllowedForChrome=function(){if(!d.bIE){var i=(h.userAgent.toLowerCase()),j=this;if(i.match(/chrome\/([\d.]+)/)){if(j.__OnNotAllowedForChrome){j.__OnNotAllowedForChrome(j._strDWTInnerContainerID)}else{j._createNonAllowedDivPlugin();e.get(j._strDWTNonInstallInnerContainerID).style.display="inline";e.get(j._strDWTInnerContainerID).style.display="none"}}}};g._createNonAllowedDivPlugin=function(){var p=this,n=e.get(p._strDWTNonInstallInnerContainerID);if(n.innerHTML!=""){return}var k=p._strHeight;if(e.isString(k)&&k.indexOf("%")==-1){k=(parseInt(k)-10)+"px"}var l=['<div style="display: block; border:1px solid black; width:',p._strWidth,";height:",k,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPvZRNSxthEMeX0mNpKS09tP04tdBqobT9WCGJ5kU9pIk5xB4KaoJGmoiNMS+IUiqNB08mjUoUN2vU3WyS9d+ZIbvEZREP0j8Mk5ln5sfs7jxRcM/6f8BKpYKZmRlEIhGUSiUYhjE8uV2eQIal0xmobQ3aeQc/CwWUy+Xh6e3yBM7OzuJMbcPs9cUYzNPeRQLc29tDKpVCOBx2LJ3JQDe66Jo9fI3HEY1GnTOurdVqAnBLgFxwcNBAp3N5w0yTJiTTtA5UVXPy9XpDerwkwOnpaZydtWma/p3s8OgYcZraSwIMhULoXFx6NntZvf4XyWRSAG45QO38wrO51x/Asq7F27nbJMBEIoFm8wiLS0uYm0s6j88QfXUF6ucJXNMe2lAWx+qXD3I+KgHu7OwgEAjI/q2vr2N5eUUaebIWwRovFLTG38AaQtlzLPlP4wKyJcB8Pi83IpfLoVqtYmFh0ZnQ0nU0qHn/uSJ+0G7fiPl8VAL0+/20cyZdsTLm57+hdXIqQAdKE+1T869nCnZfK+I5dsNYAgwGg7i8MhwIG8cbG0Wafo1+X6FPk5VfPUDxqSK+r6oCcEuAU1NT0GhhDQLZVtwsIZvNShFPuDX+FqtPFORfPhS/9X5M8m4JkO/pyakKo0uwof3e/SMF3FQg2PfHCgoEMWlS9nbshgqQt755eIwr3RTYOV+vRlMK1j5OIPlIwY93YxgM39mAIBxzns9HJcDt7W3EYjH5OD6fD5OTk7KbrDo99go12TBbDOV8Peuxh5Zl0Z8ATUdFOjWy55jztt1VArw/Af8A9+n0bhYJ0I4AAAAASUVORK5CYII="/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join("");n.innerHTML=l;function m(){e.get(p._strDWTNonInstallInnerContainerID).style.display="none";e.get(p._strDWTInnerContainerID).style.display="inline"}for(var j=0;j<f.links.length;j++){if(f.links[j].className=="DWT_CloseNonAllowedDiv"){f.links[j].onclick=m}}};e.detect._controlDetect=function(){var y=e.detect.arySTwains,t=y[0],v=t&&t._objectWebTwain;if(v){var x=Dynamsoft.DWT;var p=false;if(d.bIE){var m=navigator.userAgent.toLowerCase(),u=!Dynamsoft.navInfo.bOSx64||(m.indexOf("wow64")>=0),z;if(u){z="DynamicPdfCore_"+x.PdfVersion+".dll"}else{z="DynamicPdfCorex64_"+x.PdfVersion+".dll"}if(v.ErrorCode==0&&""!=v.GetAddOnVersion("pdf",z)){p=true}}else{if(v.ErrorCode==0){p=true}}if(p){clearInterval(e.detect._varSeed);var s=function(j,C,A){var B,D;for(B=0;B<y.length;B++){D=y[B];e.attachProperty(D);e.attachMethod(D);D._attachEvents();if(j==0){D.GetLicenseInfo(C)}else{D._blts=true;if(C!=""&&A!=""){D.SetLTSInfo(C,A);D.GetLicenseInfo().then(function(i){Dynamsoft.DWT.lcheckLic(Dynamsoft.DWT.EnumInstance.dwt_desktop,i)})}else{D.__licenseInfo={LTS:true,Detail:[]}}Dynamsoft.DWT.laddDWTObj(D)}e.attachAddon(D);D._objectWebTwain.BrokerProcessType=e.product._iBrokerProcessType;if(!d.bWin){D._objectWebTwain.ImageCaptureDriverType=e.product._iImageCaptureDriverType}if(e.isFunction(D.__OnPluginReady)){D.__OnPluginReady()}}};if(e.License.isLTS()){var k=Dynamsoft.DWT.li({instanceMode:Dynamsoft.DWT.EnumInstance.dwt_desktop,axInstance:v});if(!Dynamsoft.DWT.lisValidID(k)){s(1,"","");return}Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(i){s(1,i.ar,i.cu)},function(i){if(i){Dynamsoft.DWT.lsetException((i.code||i.ltsErrorCode),i.message);Dynamsoft.DWT.OnLicenseException()}s(1,"","")})}else{s(0,x.ProductKey,"")}}else{var r,n,q,w=h.mimeTypes;if(!d.bIE){var l=true;h.plugins.refresh(false);if(e.env.iPluginLength!=h.plugins.length){for(r=0;r<w.length;r++){if(w[r].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1){location.reload()}}}for(r=0;r<w.length;r++){if(w[r].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1){for(q=0;q<y.length;q++){n=y[q];l=false;n._vPluginExist=true;if(n._vNotAllowedForChrome==false){n._notAllowedForChrome();n._vNotAllowedForChrome=true}}}}if(l&&!e.detect.bNoControlEvent){e.noControl(t);e.detect.bNoControlEvent=true}}else{if(!e.detect.bNoControlEvent){e.noControl(t);e.detect.bNoControlEvent=true}}if(e.isFunction(t.__OnPluginNotReady)){t.__OnPluginNotReady()}}}else{clearInterval(e.detect._varSeed)}};e.plugin={};e.plugin.DynamicWebTwain=function(i){var j=new a(i);j._createControl();e.detect.arySTwains.push(j);return j};e.plugin.closeAll=function(){var j=e.detect.arySTwains,k,m,l;for(k=0;k<j.length;k++){m=j[k];if(m&&m._objectWebTwain){l=m._objectWebTwain;if(l&&l.ErrorCode==0){l.RemoveAllImages()}}}e.detect.arySTwains=[]};Dynamsoft.DWT.RemoveAllAuthorizations=function(){return false}});(function(b,M,T){window.onbeforeunload=function(){Dynamsoft.DWT.Unload();b.each(Dynamsoft.DWT.globalWS,function(ae){try{ae.close()}catch(af){}})};var P=Dynamsoft.navInfoSync,p=b,Y=Dynamsoft.dcp,O=p.win,G=!0,V=!1,d={OK:0,BadVersion:1,Error:2},q=Dynamsoft.Lib.timestamp,F=false;var A={bConnected:false,versionInfo:function(ak,af,aj){var ai=0,ag=function(aq,an){var am=[A._getPreUrl(ak,af),"fa/VersionInfo?ts=",b.now()].join(""),al,ap;al=[b.product.getDWTPrefix(),b.product.getServerVersionInfo()].join("");ap=b.stringify({id:"1",method:"VersionInfo",version:al,parameter:[]});if(M.OnWebTwainInitMessage){var ao=M.CustomizableDisplayInfo.generalMessages.checkingDWTVersion;M.OnWebTwainInitMessage(ao,Dynamsoft.DWT.EnumDWT_InitMsg.Info)}b.ajax({method:"POST",url:am,data:ap,onSuccess:aq,onError:an})},ah=function(){A.bConnected=false;if(M.OnWebTwainInitMessage){M.OnWebTwainInitMessage(M.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED,Dynamsoft.DWT.EnumDWT_InitMsg.NotInstalledError)}if(aj){X(aj,d.Error,M.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)}},ae=function(am){var al=Y._getJSON(am);if(al&&"result" in al){al=al.result;if(b.isArray(al)&&al.length>0){if(aj){setTimeout(function(){var ao=al[0],ap=al.length>1?al[1]:"",an=al.length>2?al[2]:0,aq=al.length>3?al[3]:"";if(ap!==""){if(M.OnWebTwainInitMessage){M.OnWebTwainInitMessage(ap,Dynamsoft.DWT.EnumDWT_InitMsg.Error)}if(aj){X(aj,d.Error,M.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)}}else{var ar="The WebTwain version is: "+ao;if(M.OnWebTwainInitMessage){M.OnWebTwainInitMessage(ar,Dynamsoft.DWT.EnumDWT_InitMsg.Info)}if(an=="64"){Dynamsoft.dcp.b64bit=true}if(aq!=""){Dynamsoft.DWT.lsmid(aq)}aj(d.OK,ak,af,ao)}},0)}return}}setTimeout(ah,1000)};ag(ae,ah)},_getPreUrl:function(ag,ae){var af;if(P.bSSL){af="https://"}else{af="http://"}return[af,ag,":",ae,"/"].join("")}};b.DynamicWebTwain=V;var m=O.document,i,n,R=b.each,e="dwt",h=0,I=1,z=2,C=3,X=function(ae,ah,ag,af){if(b.isFunction(ae)){setTimeout(function(){ae(ah,ag,af)},10)}};function K(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"){var ae=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(ae instanceof WebAssembly.Module){return new WebAssembly.Instance(ae) instanceof WebAssembly.Instance}}}catch(af){}return false}b.__innerInitEvents=function(af,ae){if(ae){R(["onAfterOperate","onBeforeOperate","onOperateStatus","onBitmapChanged","onGetFilePath","onImageAreaDeSelected","onImageAreaSelected","onMouseClick","onMouseDoubleClick","onMouseMove","onMouseRightClick","onPreAllTransfers","onPreTransfer","onPostLoad","onPostTransfer","onPostTransferAsync","onPreAllTransfersAsync","onPostAllTransfers","onSourceUIClose","onTopImageInTheViewChanged","onTransferCancelled","onTransferError","onInternetTransferPercentage","onInternetTransferPercentageEx","onRemoteScanStatusAsync"],function(ag){af["__O"+ag.substring(1)]=ae[ag]||""})}};b.replaceControl=function(af,ae){M.ContainerMap[af]=ae};i=function(af,ag,am,ae){var ao=b.product,al=p.getNavInfo(),ak,ai;if(ae&&ae._customIP&&(!b.isLocalIP(ae._host))){if(b.isFunction(Dynamsoft.OnRemoteWebTwainNotFoundCallback)){var ah=ae._port;Dynamsoft.OnRemoteWebTwainNotFoundCallback(ao.name,ae._host,ah,ae._ssl,b.env.bMobile)}return}if(al.bMac){if(af){b.one(af).before(b.install._strNonInstallDIV);ak=b.get(b.install._divDWTNonInstallContainerID);if(ak){ak.style.width=ag;ak.style.height=am}b.show(b.install._divDWTNonInstallContainerID);b.hide(af)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(Dynamsoft.OnWebTwainNotFoundOnMacCallback)){ai=ao.bHTML5Edition?Dynamsoft.dcp.getDSPath():b.product.getPKGPath();Dynamsoft.OnWebTwainNotFoundOnMacCallback(ao.name,ai,ao.bHTML5Edition,al.bIE,al.bSafari,b.detect.ssl,b.env.strIEVersion)}}else{if(al.bChromeOS||al.bLinux){if(af){b.one(af).before(b.install._strNonInstallDIV);ak=b.get(b.install._divDWTNonInstallContainerID);if(ak){ak.style.width=ag;ak.style.height=am}b.show(b.install._divDWTNonInstallContainerID);b.hide(af)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(Dynamsoft.OnWebTwainNotFoundOnLinuxCallback)){var aj,an;aj=Dynamsoft.dcp.getLinuxHTML5DebPath();an=Dynamsoft.dcp.getLinuxHTML5RpmPath();Dynamsoft.OnWebTwainNotFoundOnLinuxCallback(ao.name,aj,an,ao.bHTML5Edition,al.bIE,al.bSafari,b.detect.ssl,b.env.strIEVersion)}}else{if(al.bChrome||al.bSafari||al.bFirefox||al.bOpera||M.IfUseActiveXForIE10Plus==V||(!M.ActiveXInstallWithCAB&&al.bIE)){if(af){b.one(af).before(b.install._strNonInstallDIV);ak=b.get(b.install._divDWTNonInstallContainerID);if(ak){ak.style.width=ag;ak.style.height=am}b.show(b.install._divDWTNonInstallContainerID);b.hide(af)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(Dynamsoft.OnWebTwainNotFoundOnWindowsCallback)){ai="";if(al.bIE){ai=Dynamsoft.dcp.getDSPath()}else{if(ao.bHTML5Edition){ai=Dynamsoft.dcp.getDSPath()}else{ai=ao.getMSIPath()}}Dynamsoft.OnWebTwainNotFoundOnWindowsCallback(ao.name,ai,ao.bHTML5Edition,al.bIE,al.bSafari,b.detect.ssl,b.env.strIEVersion)}}}}};n=function(ae){var af=p.getNavInfo();if(af.bChrome){b.one(ae).before(b.install._strNonInstallDIV);b.show(b.install._divDWTNonInstallContainerID);b.hide(ae);if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(Dynamsoft.OnWebTwainOldPluginNotAllowedCallback)){Dynamsoft.OnWebTwainOldPluginNotAllowedCallback(b.product.name)}}};b.detect.getVersionArray=function(ae){var af=ae.toLowerCase().replace(b.product.name.toLowerCase()+" ","");af=b.replaceAll(af,"[.]",",");return af.split(",")};b.detect.isDWTVersionLatest=function(af){var ai=p.getNavInfo();if(b.isUndefined(af)){return V}var ak=af.toString().toLowerCase();var aj=b.detect.getVersionArray(ak),ae,al;if(ai.bIE&&(b.product.bPluginEdition||b.product.bActiveXEdition)){ae=M.ActiveXVersion}else{if(b.product.bPluginEdition){ae=M.PluginVersion}else{ae=b.product.getServerVersionInfo(true)}}ae=b.replaceAll(String(ae),"[.]",",");al=ae.split(",");var ag=aj.length>al.length?aj.length:al.length;for(var ah=0;ah<ag;ah++){if(aj[ah]==null){aj[ah]=0}if(al[ah]==null){al[ah]=0}if(parseInt(aj[ah])<parseInt(al[ah])){return V}else{if(parseInt(aj[ah])>parseInt(al[ah])){return G}}}return G};var S=function(ai,an){var aj=p.getNavInfo();if(b.isFunction(Dynamsoft.OnWebTwainNeedUpgradeCallback)){var ah={},af,ag;if(aj.bWin){if(aj.bIE){ag=Dynamsoft.dcp.getDSPath()}else{var al=b.product;if(al.bHTML5Edition){ag=Dynamsoft.dcp.getDSPath()}else{ag=al.getMSIPath()}}af=Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow}else{if(aj.bLinux){var ae,ak;ae=Dynamsoft.dcp.getLinuxHTML5DebPath();ak=Dynamsoft.dcp.getLinuxHTML5RpmPath();ag=ae;ah.deb=ae;ah.rpm=ak;af=Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux}else{if(b.product.bHTML5Edition){ag=Dynamsoft.dcp.getDSPath()}else{ag=b.product.getPKGPath()}af=Dynamsoft.DWT.EnumDWT_PlatformType.enumMac}}ah["default"]=ag;var am=b.one(".dynamsoft-dialog-license");if(am&&am.getEL()){am.getEL().style.display="none"}b.detect.needUpgrade=G;Dynamsoft.OnWebTwainNeedUpgradeCallback(b.product.name,ah,b.product.bHTML5Edition,af,aj.bIE,aj.bSafari,b.detect.ssl,b.env.strIEVersion,b.detect.bPromptJSOrServerOutdated,ai,an)}},k=function(ag){if(!b.detect.bNeedUpgradeEvent&&!b.detect.isDWTVersionLatest(ag.VersionInfo)){b.detect.bNeedUpgradeEvent=G;if(!M.UseDefaultInstallUI&&b.isFunction(M.OnWebTwainNeedUpgrade)){M.OnWebTwainNeedUpgrade();return}if(ag&&ag._customIP&&(!b.isLocalIP(ag._host))){if(b.isFunction(Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback)){var ae=ag._port;Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback(b.product.name,ag._host,ae,ag._ssl)}return}if(b.product.bHTML5Edition&&ag._isBindViewer()||!b.product.bHTML5Edition){var af=ag._containerElement;if(b.isString(af)){af=b.get(af)}if(af){b.one(af).before(b.install._strNonInstallDIV);b.show(b.install._divDWTNonInstallContainerID);b.hide(af)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}S()}}};var s=function(ae){var af=ae||{};if(af.basePath){b.env.basePath=af.basePath}if(af.pathType){b.env.pathType=af.pathType}if(!b.isUndefined(af.bDiscardBlankImage)){b.config.bDiscardBlankImage=af.bDiscardBlankImage}if(af.msgPrefix){b.config.msgPrefix=af.msgPrefix}if(af.msgSuffix){b.config.msgSuffix=af.msgSuffix}if(af.detectType){b.detect.detectType=af.detectType}if(af.tryTimes){b.detect.tryTimes=af.tryTimes}if(af.onReady){M.OnWebTwainReady=af.onReady}if(af.onNotAllowedForChrome){b.detect.onNotAllowedForChrome=af.onNotAllowedForChrome}if(af.onNoControl){b.detect.onNoControl=af.onNoControl}},J=function(ak){var ae=M.Containers,ao=p.getNavInfo(),al,aj,an,ah,ap,am,ar=b.Promise.resolve(0),af=Dynamsoft.DWT.licenseException;if(ae.length>0){if(af.code==0){O.DCP_DWT_OnClickCloseInstall()}else{if(console&&console.error){console.error(af.message)}}if(!b.isUndefined(ak)){ap=ak._containerElement;am=ak}else{for(aj=0;aj<ae.length;aj++){if(b.product.bHTML5Edition){an=ae[aj].WebTwainId;if(ac(an)){am=M.ContainerMap[an];if(am){break}}}else{if(ae[aj].Container){ah=ae[aj].Container}else{if(ae[aj].ContainerId){ah=b.get(ae[aj].ContainerId)}}if(!y(ah)||!ah.id){continue}am=M.ContainerMap[ah.id];if(am){break}an=ae[aj].WebTwainId;am=M.ContainerMap[an];if(am){break}}}}if(am){if(b.product.bHTML5Edition){if(am._bLocalService){ar=am._innerFunRawV2("LogLevel").then(function(){k(am)},function(){if(am.ErrorCode==-2207){if(!M.UseDefaultInstallUI&&b.isFunction(M.OnWebTwainNeedUpgradeWebJavascript)){M.OnWebTwainNeedUpgradeWebJavascript(am.ErrorString)}else{if(!b.detect.bPromptJSOrServerOutdated){b.detect.bPromptJSOrServerOutdated=G}}}k(am)})}}else{k(am)}}}var aq=[],ai=false;if(b.License.isLTS()){if(b.isNumber(af.code)&&af.code!==0&&af.fromLTS===true){ai=true}}for(aj=0;aj<ae.length;aj++){if(b.product.bHTML5Edition){an=ae[aj].WebTwainId}else{an=ae[aj].ContainerId;al=M.ContainerMap[an];if(!al){an=ae[aj].WebTwainId}}al=M.ContainerMap[an];if(al){if(ai){if(b.product.bHTML5Edition){b.hide(al._containerElement)}else{b.hide(al._containerID)}}else{if(b.product.bHTML5Edition){if(al._isBindViewer()){if(al.Width<=0||al.Height<=0){if(al.Width<=0){al.Width=270}if(al.Height<=0){al.Height=350}}}if(al._bLocalService){aq.push(g(al))}else{b.License.checkProductKey(al,{Core:true})}}else{al.IfAllowLocalCache=true;al.IfShowFileDialog=true;al.IfDisableSourceAfterAcquire=true;al.BrokerProcessType=b.product._iBrokerProcessType;if(aj==0){if(b.License.checkProductKey(al,{Core:true})||b.License.checkProductKey(al,{Webcam:true},true)){}else{b.License.checkProductKey(al,{Core:true},false,true)}}if(!ao.bWin){al.ImageCaptureDriverType=b.product._iImageCaptureDriverType}}}}al=null;if(aq.length>0){ar=ar.then(function(){return Dynamsoft.Lib.Promise.all(aq)})}}ae=null;var ag=Dynamsoft.initOrder;if(ag[0]==e){ag.splice(0,1)}if(ai){Dynamsoft.DWT.ContainerMap={};b.detect.arySTwains.splice(0);b.detect.arySTwainsByIP.splice(0)}else{ar=ar.then(function(){if(b.isFunction(M.OnWebTwainReady)){M.OnWebTwainReady()}else{if(b.isFunction(O.Dynamsoft_OnReady)){O.Dynamsoft_OnReady()}}},function(at){if(console&&console.error){console.error(at)}})}},g=function(ae){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_ConfiguringDWT);return ae._innerFunV2("IfDisableSourceAfterAcquire","[1]").then(function(){var ah=p.getNavInfo(),af=Dynamsoft.DWT.EnumDWT_Driver.TWAIN,ak=ae,aj=false,ag=false,ai=false;if(ak._bRemoteMode){if(ak.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow){ai=true}else{if(ak.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux){ag=true}else{if(ak.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac){aj=true}}}}else{aj=ah.bMac;ag=ah.bLinux;ai=ah.bWin}if(aj){af=Dynamsoft.DWT.EnumDWT_Driver.TWAIN_AND_ICA}else{if(ag){af=Dynamsoft.DWT.EnumDWT_Driver.SANE}}ae._driverType=af}).then(function(){b.License.checkProductKey(ae,{Core:true})})},ac=function(ae){if(ae==""||!p.isString(ae)&&!p.isNumber(ae)){return V}return G},y=function(ae){if(ae&&!b.isString(ae)){return G}return V},w=function(ae){var ag;if(ae.Container){ag=ae.Container.id}else{if(ae.ContainerId){ag=ae.ContainerId}}if(y(b.get(ag))){var af;if(b.isString(ae.WebTwainId)){af=M.ContainerMap[ae.WebTwainId]}else{af=M.ContainerMap[ag]}if(af){return V}return G}return V},c=function(){if(!b.detect.StartWSTimeoutId&&b.detect.arySTwains.length==0){b.detect.StartWSTimeoutId=setTimeout(function(){b.detect.StartWSTimeoutId=V;b.startWS()},100)}},u=function(){if(!b.detect.StartWSByIPTimeoutId&&b.detect.arySTwainsByIP.length==0){b.detect.StartWSByIPTimeoutId=setTimeout(function(){b.detect.StartWSByIPTimeoutId=V;b.startWSByIP()},100)}};b.detect.__WebTwainMain=function(aj,af,ao){var al={id:aj.WebTwainId,width:aj.Width,height:aj.Height};if(aj.Container){al.container=aj.Container;al.containerID=aj.Container.id}else{if(aj.ContainerId){al.container=b.get(aj.ContainerId);al.containerID=aj.ContainerId}}if(!ac(al.id)){if(y(b.get(al.containerID))){al.id=al.containerID}else{al.id=al.containerID="dwtcontrolContainer"}}if(M.UseDefaultInstallUI){al.onNotAllowedForChrome=n;al.onNoControl=i}else{al.tAllowedForChrome=M.OnWebTwainOldPluginNotAllowed;al.onNoControl=M.OnWebTwainNotFound}s(al);if(b.product.bHTML5Edition){p.mix(al,aj.bLocalService?{port:aj.port,HTTPPort:(b.detect.ssl?443:80),bLocalService:true}:{bLocalService:false});al.onReady=function(ar){b.replaceControl(al.id,ar);if(b.isFunction(af)){var aq={stwain:ar};if(ao){b.mix(aq,ao)}af(aq)}};var ap,ak,an;for(ak=0;ak<b.detect.arySTwains.length;ak++){an=b.detect.arySTwains[ak];if(al.id==an._id){al.id=al.id+"_"+p.getRandom()}if(an._containerElement&&(al.container==an._containerElement||al.containerID==an._containerElement.id)){al.containerID=""}}if(y(b.get(al.containerID))){al.bNoViewer=false}else{al.bNoViewer=true}ap=new b.html5.STwain(al);b.detect.arySTwains.push(ap);if(b.detect.bFirst){b._init(al)}b.detect.bFirst=false;return ap}else{var ai,ah,ag,ae;al.onPluginReady=function(){b.replaceControl(al.id,ai.getInstance())};al.onPluginNotReady=function(){if(b.isFunction(O.Dynamsoft_OnNotReady)){O.Dynamsoft_OnNotReady()}};ai=new b.DynamicWebTwain(al);ag=0;ae=M.Containers;for(ah=ae.length-1;ah>=0;ah--){var am=ae[ah];if(am.Container){if(y(am.Container)){ag++}}else{if(am.ContainerId){if(y(b.get(am.ContainerId))){ag++}}}}if(b.detect.arySTwains.length==ag){b.detect._varSeed=setInterval(b.detect._controlDetect,200)}return ai}};M.Unload=function(){var ae,ah,aj,af,al,ai,ag=[M.Containers,M.DynamicContainers];Dynamsoft.DWT.lunload();if(b.closeAll){b.closeAll()}ai=M.ContainerMap;for(ah=0;ah<2;ah++){ae=ag[ah];if(ae){if(b.product.bHTML5Edition){for(aj=0;aj<ae.length;aj++){al=ae[aj].WebTwainId;if(al&&(al in ai)){af=ai[al];if(af){af.__unload();delete ai[al]}}}}else{for(aj=ae.length-1;aj>=0;aj--){if(ae[aj].Container){af=ae[aj].Container;al=af.id}else{al=ae[aj].ContainerId;if(al){af=b.get(al)}}if(af){if((al in ai)&&ai[al]){delete ai[al]}af.innerHTML=""}}}}}b.page.bUnload=G;if(b.page.OnUnload){b.page.OnUnload()}M.initQueue.splice(0);for(aj=0;aj<Dynamsoft.unloadQueue.length;aj++){var ak=Dynamsoft.unloadQueue[aj];if(b.isFunction(ak)){ak()}}Dynamsoft.unloadQueue.splice(0);M.DynamicContainers.splice(0);b.detect.arySTwains.splice(0);b.detect.arySTwainsByIP.splice(0);try{b.closeLoadingMsg();b._gb_xkz_dhk();b._zdgb_xkz_dhk();b.closeProgress("");b.hideMask()}catch(am){}if(b.MobileFuns){return b.MobileFuns.unloadWasm()}else{return b.Promise.resolve()}};var N=function(){var ah=M.Containers,ag,af,ai;for(af=0;af<ah.length;af++){var ae;if(y(b.get(ah[af].ContainerId))){ae=ah[af].ContainerId;if(ac(ah[af].WebTwainId)){ae=ah[af].WebTwainId}}if(ae){ag=M.ContainerMap[ae];if(!ag){setTimeout(N,200);return}}}b.closeLoadingMsg();ah=null;J()},B=function(ah){if(ah&&"readyObj" in ah){var af=ah.readyObj;if(af){var ag=ah.stwain,ae=af.totalCount;af.readyCount=af.readyCount+1;if(af.readyCount>=ae){J(ag)}return}}J(ah)},ab=function(ak,ae,ai){var aj=M.Containers,ag,af;if(b.config.usingMainMode){b.closeLoadingMsg();b.detect.hideMask();return}if(!aj||aj.length===0){b.closeLoadingMsg();b.detect.hideMask();b.log("DEnv.Containers was not set.");return}if(Y.bEnhancedMode){b.product.host=ak;b.detect.urls.splice(0);b.detect.urls.push({port:ae,ssl:P.bSSL});b.detect.cUrlIndex=0}c();var ah={totalCount:aj.length,readyCount:0};for(ag=0;ag<aj.length;ag++){af=aj[ag];if(!y(b.get(af.ContainerId))){af.bNoViewer=true}if(ai){af.bLocalService=false;af.ip="";af.port=0}else{af.bLocalService=true;if(Y.bEnhancedMode){af.port=ae}}b.detect.__WebTwainMain(af,B,{readyObj:ah})}},D=function(){if(b.config.usingMainMode){b.closeLoadingMsg();return}var af,ag=M.Containers;if(ag===V||ag.length===0){b.log("DEnv.Containers was not set.");b.closeLoadingMsg();return}for(af=0;af<ag.length;af++){var ae=ag[af];if(w(ae)){b.detect.__WebTwainMain(ae)}}setTimeout(N,100)},E=function(aj){var am,ai=aj.bNoViewer,ah=aj.id,ag=aj.container,aq=aj.containerID,ao=aj.host,ar=aj.port,ap=(ao&&ar&&ar>0)?{host:ao,port:ar}:V,al=aj.asyncSuccessFunc,af=aj.asyncFailureFunc;if(!b.detect.onNoControl){b.detect.onNoControl=i}if(!aj.bNoViewer&&(!b.isString(aq)||aq==""||!ag&&!b.get(aq))){ai=true;aq=0}else{if(M.Containers&&!ai){var ak,ae=M.Containers;for(ak=0;ak<ae.length;ak++){if(ae[ak].ContainerId==aq){b.detect.hideMask();if(b.isFunction(af)){b._safePromptCustomMsg(function(){af(M.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers)})}return V}}}if(!ag){ag=b.get(aq)}}am=M.ContainerMap[ah];if(am){b.detect.hideMask();if(b.isFunction(al)){al(am)}return am}if(!aj.bLocalService){if(!Dynamsoft.WasmEnv){b.detect.hideMask();b._safePromptCustomMsg(function(){af(M.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WasmEnvNotLoaded)});return V}}if(ap){u()}else{c()}var an={id:ah,container:ag,customIP:false,width:ai?0:300,height:ai?0:300,bNoViewer:ai,bLocalService:aj.bLocalService};if(!ai){if(ag.style.width){an.width=ag.style.width}if(ag.style.height){an.height=ag.style.height}}if(ap){an.customIP=true;an.host=ap.host;an.port=ap.port}an.onReady=function(at){O.DCP_DWT_OnClickCloseInstall();if(!at){b.closeLoadingMsg();b.detect.hideMask();if(b.isFunction(af)){af(M.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer)}return false}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_ConfiguringDWT);var au={};au.WebTwainId=at._id;if(at._containerElement&&at._containerElement.id){au.ContainerId=at._containerElement.id}M.DynamicContainers.push(au);M.ContainerMap[at._id]=at;if(!M.IfDisableDefaultSettings&&at._bLocalService){g(at).then(function(){b.detect.hideMask();if(b.isFunction(al)){al(at)}k(at)},function(){b.detect.hideMask();if(at.ErrorCode==-2207){if(!b.detect.bPromptJSOrServerOutdated){b.detect.bPromptJSOrServerOutdated=G}}k(at)})}else{b.detect.hideMask();if(b.isFunction(al)){al(at)}}return true};return new b.html5.CreateDWTObject(an)};function v(){if(Dynamsoft.WasmEnv&&Dynamsoft.DWT.WasmConfig){if(Dynamsoft.DWT.WasmConfig.fetchOptions){Dynamsoft.WasmEnv.fetchOptions=Dynamsoft.DWT.WasmConfig.fetchOptions}if(Dynamsoft.DWT.WasmConfig.maxHeapSize){Dynamsoft.WasmEnv.maxHeapSize=Dynamsoft.DWT.WasmConfig.maxHeapSize}}}M.Load=function(){Z();b.waitForScripts().then(function(){return M.Unload()}).then(function(){if(b.detect.wasmScriptLoaded&&Dynamsoft.WasmEnv&&!Dynamsoft.WasmEnv.wasmLoad){v();if(b.License.isLTS()){Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_browser).then(function(ag){try{Dynamsoft.WasmEnv.load(ag.ar,true,ag.cu);Dynamsoft.WasmEnv.wasmLoad=true}catch(af){if(af){console.log(af.message)}}X(W)},function(af){if(af){Dynamsoft.DWT.lsetException((af.code||af.ltsErrorCode),af.message);b.closeLoadingMsg();Dynamsoft.DWT.OnLicenseException()}});return}else{try{Dynamsoft.WasmEnv.load(M.ProductKey);Dynamsoft.WasmEnv.wasmLoad=true}catch(ae){if(ae){console.log(ae.message)}}}}X(W)})};M.CheckConnectToTheService=function(ak,af,ah,ae){if(b.detect.scriptLoaded){if(b.product.bHTML5Edition){var ag=0,aj=ak,am=af,al=ah,ai=ae;if(b.isFunction(aj)&&b.isFunction(am)){al=aj;ai=am;aj=null;am=null}if(!aj){aj=Dynamsoft.dcp.host}if(!am){for(ag=0;ag<Dynamsoft.Lib.detect.ports.length;ag++){if(Dynamsoft.navInfoSync.bSSL&&Dynamsoft.Lib.detect.ports[ag].ssl||!Dynamsoft.navInfoSync.bSSL&&!Dynamsoft.Lib.detect.ports[ag].ssl){am=Dynamsoft.Lib.detect.ports[ag].port;break}}}A.versionInfo(aj,am,function(ao,aq,ap,an){if(ao===d.OK){if(an&&an.length>0){if(U(an,b.product.getServerVersionInfo(true))){if(b.isFunction(al)){al(aq,ap)}return}}}if(b.isFunction(ai)){ai()}},ai)}else{if(b.isFunction(ae)){ae()}}}else{setTimeout(function(){M.CheckConnectToTheService(ak,af,ah,ae)},500)}};M.ConnectToTheService=M.Load;M.CreateDWTObject=function(al,aq,af,aj,ai,ae){var ak=ai,ap=ae,am;Z();if(arguments.length<=3){ak=aq;ap=af;am={WebTwainId:al}}else{am={WebTwainId:al,Host:aq,Port:af,PortSSL:aj}}if(!b.product.bHTML5Edition){if(b.isFunction(ap)){b._safePromptCustomMsg(function(){ap(M.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)})}return V}var ah=al;if(b.isShadowRoot(ah)){var an=document.createElement("div");ah.appendChild(an);ah=an}if(b.isDOM(ah)){var ao=b.getShadowRoot(ah);if(ao){var ag=document.createElement("style");ag.innerHTML=['@import url("',Dynamsoft.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",q,'")'].join("");ao.appendChild(ag)}am.Container=ah;if(!ah.id||ah.id==""){ah.id=["dwt_",b.getRandom()].join("")}am.WebTwainId=ah.id}else{if(!b.isString(al)){if(b.isFunction(ap)){ap(b.Errors.container_id_not_string())}return V}if(!b.get(al)){if(b.isFunction(ap)){ap(b.Errors.container_id_not_exist(al))}return V}}if(b.isUndefined(am.UseLocalService)){if(b.isUndefined(M.UseLocalService)){if(b.env.bMobile){am.UseLocalService=false}else{am.UseLocalService=true}}else{am.UseLocalService=M.UseLocalService}}return o(am,ak,ap)};M.CreateDWTObjectEx=function(af,aj,ak){var ah=af.Container;Z();if(b.isShadowRoot(ah)){var ai=document.createElement("div");ah.appendChild(ai);ah=ai}if(b.isDOM(ah)){var ag=b.getShadowRoot(ah);if(ag){var ae=document.createElement("style");ae.innerHTML=['@import url("',Dynamsoft.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",q,'")'].join("");ag.appendChild(ae)}if(ag==ah){ah=document.createElement("div");ag.appendChild(ah);af.Container=ah}if(!ah.id||ah.id==""){ah.id=["dwt_",b.getRandom()].join("")}if(!b.isString(af.WebTwainId)){af.WebTwainId=ah.id}}else{if(!b.isString(af.WebTwainId)){ak(b.Errors.webtwain_id_not_string());return V}}if(b.isUndefined(af.UseLocalService)){if(b.isUndefined(M.UseLocalService)){if(b.env.bMobile){af.UseLocalService=false}else{af.UseLocalService=true}}else{af.UseLocalService=M.UseLocalService}}return o(af,aj,ak)};function a(){var ae=['<div style="padding: 0 25px;">',Dynamsoft.MSG.Err_BrowserNotSupportWasm,"</div>",'<div style="padding-top:60px"></div>'];M.ShowDialog(365,0,ae.join(""))}function l(af){var ae=['<div class="dynamsoft-dialog dynamsoft-dialog2">','<div class="dynamsoft-dwt-ltsdlg-header"><i class="dynamsoft-dwt-error"></i></div>','<div class="dynamsoft-dwt-ltsdlg-body">',af,"</div></div>"];Dynamsoft.Lib.ShowLicenseDialog(ae.join(""),{width:500,height:0,bClose:false})}function o(an,aj,ae){if(!b.product.bHTML5Edition){b._safePromptCustomMsg(function(){ae(M.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)});return V}if(an.UseLocalService===false){if(!K()){b.closeLoadingMsg();a();ae(Dynamsoft.MSG.Err_BrowserNotSupportWasm);return V}}r();var ag={},af=an.WebTwainId,ao=an.Host,ah=an.Port,ak=an.PortSSL;if(!M._srcUseLocalService&&an.UseLocalService){b.detect.dcpStatus=h;M._srcUseLocalService=true}if(an.Container){var al;ag.container=an.Container;ag.bNoViewer=false;al=ag.container.id;if(al===T||al===null||al===""){ag.container.id=["dwt_",p.getRandom()].join("")}ag.containerID=ag.container.id;if(af===T||af===null||af===""){ag.id=ag.container.id}}else{if(af===T||af===null||af===""){ag.id=["dwt_",p.getRandom()].join("");ag.bNoViewer=true}else{if(!p.get(af)){ag.id=af;ag.bNoViewer=true}else{ag.id=af;ag.containerID=af;ag.bNoViewer=false}}}ag.UseLocalService=an.UseLocalService;if(!b.isString(ao)||ao==""){ao=Dynamsoft.dcp.host}ag.host=ao;if(P.bSSL){if(!ak){if(Dynamsoft.DWT.SSLPort){ak=Dynamsoft.DWT.SSLPort}else{ak=18623}}ag.port=ak}else{if(!ah){if(Dynamsoft.DWT.Port){ah=Dynamsoft.DWT.Port}else{ah=18622}}ag.port=ah}if(aj){ag.asyncSuccessFunc=aj}if(ae){ag.asyncFailureFunc=ae}var am;if(b.detect.wasmScriptLoaded&&Dynamsoft.WasmEnv&&!Dynamsoft.WasmEnv.wasmLoad){v();if(b.License.isLTS()){am=Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_browser).then(function(aq){try{Dynamsoft.WasmEnv.load(aq.ar,true,aq.cu);Dynamsoft.WasmEnv.wasmLoad=true}catch(ap){if(ap){console.log(ap.message)}}},function(ap){if(ap){Dynamsoft.DWT.lsetException((ap.code||ap.ltsErrorCode),ap.message);b.closeLoadingMsg();Dynamsoft.DWT.OnLicenseException()}})}else{try{Dynamsoft.WasmEnv.load(M.ProductKey);Dynamsoft.WasmEnv.wasmLoad=true}catch(ai){if(ai){console.log(ai.message)}}am=Promise.resolve()}}else{am=Promise.resolve()}am.then(function(){return b.waitForScripts()}).then(function(){return new b.Promise(Q)}).then(function(){H({callback:function(){ag.bLocalService=true;E(ag)},docViewCallback:function(){ag.bLocalService=false;E(ag)},host:ag.host,port:ag.port,UseLocalService:ag.UseLocalService,dcpFailedCallback:ag.asyncFailureFunc})},function(){});return G}var r=function(){var ae=Dynamsoft.initOrder,ag=V;for(var af=0;af<ae.length;af++){if(ae[af]==e){ag=G;break}}if(!ag){ae.push(e)}},U=function(ah,ag){var af=ah.split(","),ae=ag.split(",");return(af.length>3&&b.trim(af[0])==ae[0]&&(b.trim(af[1])>ae[1]||b.trim(af[1])==ae[1]&&b.trim(af[2])>ae[2]||b.trim(af[1])==ae[1]&&b.trim(af[2])==ae[2]&&parseInt(b.trim(af[3]))>=parseInt(ae[3])))},f=function(af,ae){if(b.isLocalIP(af)){b.LS.item("DWT_port",ae);b.LS.item("DWT_ssl",P.bSSL?"true":"false")}},j=function(aj){var ai,ag="",af=aj,ah="",ae=p.getNavInfo();if(ae.bMac){ai="mac/MacDWT_"}else{if(ae.bLinux){ai="linux/LinuxDWT_"}else{ai="win/WinDWT_"}}if(!P.bFileSystem){ag="?t="+b.getRandom()}if(af.length>0&&af[af.length-1]!="/"){af=af+"/"}if(ae.bWin&&Y.b64bit){ah="_x64"}return[af,"dist/",ai,b.product.getServerVersionInfo(),ah,".zip",ag].join("")},aa=function(ae,ai,ah){var ag=j(M.ResourcesPath),af=function(al){var am=0;Y.loadZip(al,am,function(){var an=p.getNavInfo();b.detect.hideMask();if(b.isFunction(Dynamsoft.OnWebTWAINDllDownloadSuccessful)){Dynamsoft.OnWebTWAINDllDownloadSuccessful()}if(M.OnWebTwainInitMessage){var ao;if(P.bSSL&&an.bFirefox){ao=M.CustomizableDisplayInfo.generalMessages.refreshNeeded;M.OnWebTwainInitMessage(ao,Dynamsoft.DWT.EnumDWT_InitMsg.DownloadNotRestartError);return}ao=M.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded;M.OnWebTwainInitMessage(ao,Dynamsoft.DWT.EnumDWT_InitMsg.Info)}setTimeout(ai,3000)},ak)},ak=function(al){b.detect.hideMask();var ao=G;if(M.OnWebTwainInitMessage){var ap=M.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED;M.OnWebTwainInitMessage(ap,Dynamsoft.DWT.EnumDWT_InitMsg.DownloadError)}if(b.isFunction(Dynamsoft.OnWebTWAINDllDownloadFailure)){var an={},am;if(al.httpCode==404){b.Errors.WebTwainModuleNotExist(an);am=G}else{b.Errors.WebTwainModuleDownloadFailure(an);am=V}ao=Dynamsoft.OnWebTWAINDllDownloadFailure(b.product.name,an._errorCode,an._errorString);if(am){ao=V}}b.detect.dcpStatus=C;if(b.isFunction(ae.dwtFailedCallback)){ae.dwtFailedCallback()}};if(M.OnWebTwainInitMessage){var aj=M.CustomizableDisplayInfo.generalMessages.downloadingDWTModule;M.OnWebTwainInitMessage(aj,Dynamsoft.DWT.EnumDWT_InitMsg.Info)}b.fetch(ag,{mode:"cors",dataType:"arraybuffer"}).then(af,ak)},t=function(ak,ag,ae){var am=V,al=V,ah=b.detect,aj=ak.host,ai=ak.port,af=1;if(ak.UseLocalService===false){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CreatingDWT);b.detect.dcpStatus=z;b.product.host="";f("",0);X(ak.docViewCallback);return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CheckDWT);af=ae>0?(ae+1):1;if(!ai){b.each(b.detect.ports,function(an){if(P.bSSL){if(an.ssl){ai=an.port}}else{if(!an.ssl){ai=an.port}}})}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CheckDWTVersion);A.versionInfo(aj,ai,function(ap,aq,ao,an){if(ap===d.OK){if(an&&an.length>0){if(U(an,b.product.getServerVersionInfo(true))){b.detect.dcpStatus=z;b.product.host=aq;f(aq,ao);b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CreatingDWT);if(b.isFunction(ak.callback)){ak.callback(aq,ao)}return}else{}}}if(ag){if(af>3){b.closeLoadingMsg();b.detect.dcpStatus=C;if(b.isFunction(ak.dwtFailedCallback)){ak.dwtFailedCallback({code:ap,message:aq})}return}else{setTimeout(function(){t(ak,G,af)},1000)}}else{if(M.IfInstallDWTModuleWithZIP){aa(ak,function(){t(ak,G,af)},function(){t(ak,V,af)})}else{b.closeLoadingMsg();b.detect.dcpStatus=C;if(b.isFunction(ak.dwtFailedCallback)){ak.dwtFailedCallback({code:ap,message:aq})}return}}})},H=function(aj){var ah=Dynamsoft.initOrder,al=false;if(ah.length>0&&ah[0]===e){var an=function(ap){if(M.OnWebTwainInitMessage){var aq=M.CustomizableDisplayInfo.generalMessages.downloadNeeded;M.OnWebTwainInitMessage(aq,Dynamsoft.DWT.EnumDWT_InitMsg.Info)}if(!b.isLocalIP(aj.host)){if(b.isFunction(Dynamsoft.OnRemoteWebTwainNotFoundCallback)){var ao=P.bSSL;Dynamsoft.OnRemoteWebTwainNotFoundCallback(b.product.name,aj.host,aj.port,ao,b.env.bMobile)}}else{i()}if(b.isFunction(aj.dcpFailedCallback)){aj.dcpFailedCallback(ap);Dynamsoft.DWT.ConnectToTheService=function(){H(aj)}}};if(!M.IfCheckDCP){if(!aj.dwtFailedCallback){aj.dwtFailedCallback=an}t(aj,V,0);return}var af=function(){b.detect.showMask()},ag=function(){b.detect.hideMask()},ai=function(){var ap=false;if(b.isFunction(O.OnWebTwainShowUpdatingDialog)){ap=O.OnWebTwainShowUpdatingDialog()}if(!ap){var ao=['<div class="dynamsoft-dwt-dlg-tips dynamsoft-dwt-dlg-center">',M.CustomizableDisplayInfo.generalMessages.updatingDService,"</div>",'<div style="padding-top:35px"></div>'];M.ShowDialog(365,0,ao.join(""),0,1)}return true},ae=function(){var ao=false;if(b.isFunction(O.OnWebTwainCloseUpdatingDialog)){ao=O.OnWebTwainCloseUpdatingDialog()}if(!ao){M.CloseDialog()}return true},ak=function(ao,ap){al=true;S(ao,ap)},am=function(av){var ar=1,aq=p.getNavInfo();if(aq.bWin){ar=av>0?(av+1):1;if(ar>3){am=null;b.detect.hideMask();b.detect.dcpStatus=C;if(b.isFunction(aj.dwtFailedCallback)){aj.dwtFailedCallback()}return}}if(!al){if(!aj.dwtFailedCallback){aj.dwtFailedCallback=function(){var ay=p.getNavInfo();b.detect.hideMask();if(b.isFunction(Dynamsoft.OnWebTWAINModuleDownloadManually)){var ax,az;if(ay.bLinux){ax=Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux;az={"default":Dynamsoft.dcp.getLinuxHTML5DebPath(),deb:Dynamsoft.dcp.getLinuxHTML5DebPath(),rpm:Dynamsoft.dcp.getLinuxHTML5RpmPath()}}else{if(ay.bMac){ax=Dynamsoft.DWT.EnumDWT_PlatformType.enumMac;az={"default":Dynamsoft.dcp.getDSPath()}}else{ax=Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow;az={"default":Dynamsoft.dcp.getDSPath()}}}Dynamsoft.OnWebTWAINModuleDownloadManually(az,ax,ay.bIE,ay.bSafari,b.detect.ssl,b.env.strIEVersion)}}}if(Y.bEnhancedMode){var aw=0,ap=function(aA){if(b.isArray(aA)&&aA.length>1){b.detect.hideMask();var az=aA[1],ay,ax;if(az){Y.currentUserPorts=az;if(az.dwt){ay=az.dwt.port;ax=az.dwt.sslPort;if(ay==0||ax==0){aw++;if(aw>5){am(ar);return false}setTimeout(function(){Y.getPorts(Y.strSID,ap,ao)},300);return true}aj.port=(P.bSSL?ax:ay);t(aj,V,0);return true}}}if(M.IfInstallDWTModuleWithZIP){aa(aj,function(){am(ar)},function(){am(ar)})}else{b.detect.dcpStatus=C;if(b.isFunction(aj.dwtFailedCallback)){aj.dwtFailedCallback()}return}return true},ao=function(){b.detect.hideMask();if(M.IfInstallDWTModuleWithZIP){aa(aj,function(){am(ar)},function(){am(ar)})}else{b.detect.dcpStatus=C;if(b.isFunction(aj.dwtFailedCallback)){aj.dwtFailedCallback()}return}return true};Y.getPorts(Y.strSID,ap,ao);return true}am=null;t(aj,V,0);return true}var at=b.install._dlgInstall,au=500;if(!at||!at.open){al=false;au=0}setTimeout(am,au)};Dynamsoft.managerEnv.IfUpdateService=Dynamsoft.DWT.IfUpdateService;Dynamsoft.managerEnv.IfDownload64bitService=Dynamsoft.DWT.IfDownload64bitService;Y.host=aj.host;Y.checkDcpForUpdate(an,af,ag,ai,ae,ak,am,M.ProductKey)}else{if(!b.env.stopCheckingForService){setTimeout(function(){H(aj)},1000)}}},W=function(){b.page.bUnload=V;if(b.License.isLTS()){if(b.isString(Dynamsoft.DWT.ProductKey)){var an={},ag=Dynamsoft.DWT.licenseException;b.Errors.LongKeyShortKeyMixed(an);ag.code=an._errorCode;ag.message=an._errorString;ag.fromLTS=false;b.closeLoadingMsg();l(an._errorString);return}}var ae=M.Containers,ah,am,ak,al=[],aj;for(ah=0;ah<ae.length;ah++){ak=ae[ah];if(b.product.bHTML5Edition){aj=ak.Container;if(b.isShadowRoot(aj)){var ai=document.createElement("div");aj.appendChild(ai);aj=ai}if(b.isDOM(aj)){var ao=b.getShadowRoot(aj);if(ao){var af=document.createElement("style");af.innerHTML=['@import url("',Dynamsoft.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",q,'")'].join("");ao.appendChild(af)}if(!aj.id||aj.id==""){aj.id=["dwt_",b.getRandom()].join("")}ak.ContainerId=aj.id}if(!b.isString(ak.WebTwainId)&&!b.isNumber(ak.WebTwainId)||ak.WebTwainId==""){if(!b.isString(ak.ContainerId)||ak.ContainerId==""){ak.WebTwainId=["dwt_",b.getRandom()].join("")}else{ak.WebTwainId=ak.ContainerId}}for(am=0;am<al.length;am++){if(ak.WebTwainId==al[am]){ak.WebTwainId=ak.WebTwainId+"_"+p.getRandom();break}}al.push(ak.WebTwainId)}else{if(p.isString(ak.WebTwainId)&&(!p.isString(ak.ContainerId)||ak.ContainerId=="")){ak.ContainerId=ak.WebTwainId}}}if(b.product.bHTML5Edition){if(M.UseLocalService===false||(b.isUndefined(M.UseLocalService)&&b.env.bMobile)){if(!K()){b.closeLoadingMsg();a();return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitWasm)}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitH5)}r();b.waitForScripts().then(function(){return new b.Promise(Q)}).then(function(){var ap=true;if(b.isString(M.Host)){Y.host=M.Host}if(M.UseLocalService===false||(b.isUndefined(M.UseLocalService)&&b.env.bMobile)){ap=false}H({callback:ab,docViewCallback:function(){ab("",0,true)},host:Y.host,UseLocalService:ap})},function(){})}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitActiveX);D()}},Q=function(ah,ag){var af=[Dynamsoft.DWT.ResourcesPath,"/src/dynamsoft.imageio.js",q].join("");if(M.UseLocalService===false||(b.isUndefined(M.UseLocalService)&&b.env.bMobile)){if(!b.detect.wasmScriptLoaded){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_DownloadingWasm);var ai=function(ak){b.detect.wasmScriptLoaded=true;v();b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CompilingWasm);if(b.License.isLTS()){Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_browser).then(function(am){try{Dynamsoft.WasmEnv.load(am.ar,true,am.cu);Dynamsoft.WasmEnv.wasmLoad=true}catch(al){if(al){console.log(al.message)}}ah()},function(al){if(al){Dynamsoft.DWT.lsetException((al.code||al.ltsErrorCode),al.message);b.closeLoadingMsg();Dynamsoft.DWT.OnLicenseException()}ag(al)})}else{try{Dynamsoft.WasmEnv.load(M.ProductKey);Dynamsoft.WasmEnv.wasmLoad=true}catch(aj){if(aj){console.log(aj.message)}}ah()}};if(Dynamsoft.DWT.bNpm){ai(true)}else{b.getScript(af,true,ai)}return}}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitDynamsoftService);if(!b.detect.wasmScriptLoaded&&!Dynamsoft.navInfoSync.bFileSystem&&Dynamsoft.DWT.UseCameraAddonWasm){var ae=function(ak){b.detect.wasmScriptLoaded=true;v();if(b.License.isLTS()){Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_browser).then(function(am){try{Dynamsoft.WasmEnv.load(am.ar,true,am.cu);Dynamsoft.WasmEnv.wasmLoad=true}catch(al){if(al){console.log(al.message)}}ah()},function(al){if(al){Dynamsoft.DWT.lsetException((al.code||al.ltsErrorCode),al.message);b.closeLoadingMsg();Dynamsoft.DWT.OnLicenseException()}ag(al)})}else{try{Dynamsoft.WasmEnv.load(M.ProductKey);Dynamsoft.WasmEnv.wasmLoad=true}catch(aj){if(aj){console.log(aj.message)}}ah()}};if(Dynamsoft.DWT.bNpm){ae(true)}else{b.getScript(af,true,ae)}return}}ah()};M.DeleteDWTObject=function(ah){var ag=M.ContainerMap,ae;if(!b.product.bHTML5Edition){return V}if(ag&&ah in ag){var af=ag[ah];if(af){delete ag[ah];af.__unload()}}for(ae=0;ae<M.DynamicContainers.length;ae++){if(M.DynamicContainers[ae].WebTwainId==ah){M.DynamicContainers.splice(ae,1);break}}b.detect.hideMask();return G};M.GetWebTwain=function(ag){var aj,ah,ai,ak,af,ae=ag;aj=M.Containers;if(b.isString(ae)){ae=b.get(ae)}else{if(b.isDOM(ae)){}else{if(!ae&&aj&&aj.length>0){for(ai=0;ai<aj.length;ai++){if(aj[ai].Container){ae=aj[ai].Container;break}else{if(aj[ai].ContainerId){if(y(b.get(aj[ai].ContainerId))){ae=b.get(aj[ai].ContainerId);break}}}}}}}ak=M.ContainerMap;if(ae&&ak&&aj&&aj.length>0){for(ai=0;ai<aj.length;ai++){af=!1;ah=aj[ai];if(ah.Container){if(ah.Container==ae){if(ac(ah.WebTwainId)){af=ah.WebTwainId}else{af=ah.Container.id}if(af&&(af in ak)){return ak[af]}}}else{if(ah.ContainerId){if(ah.ContainerId==ae.id){if(ac(ah.WebTwainId)){af=ah.WebTwainId}else{af=ah.ContainerId}if(af&&(af in ak)){return ak[af]}}}}}}return M.GetWebTwainEx(ag)};M.GetWebTwainEx=function(ai){var af=ai,ah,ag,ae;ah=M.DynamicContainers;if(b.isDOM(af)){af=af.id}else{if(!af&&ah&&ah.length>0){for(ag=0;ag<ah.length;ag++){if(ac(ah[ag])){af=ah[ag];break}}}}ah=null;if(af){var aj=M.ContainerMap;if(aj&&(af in aj)){return aj[af]}}return null};var L=function(){var ae,af=Dynamsoft.DWT.CustomizableDisplayInfo;if(b.isString(af.loaderBarSource)&&af.loaderBarSource!=""){b.loaderBarSource=af.loaderBarSource}else{ae=Dynamsoft.DWT.defaultEnv.CustomizableDisplayInfo;b.loaderBarSource=ae.loaderBarSource}if(b.isString(af.loaderBarClassName)&&af.loaderBarClassName!=""){b.loaderBarClassName=af.loaderBarClassName}else{ae=Dynamsoft.DWT.defaultEnv.CustomizableDisplayInfo;b.loaderBarClassName=ae.loaderBarClassName}},x=function(){if(b.isArray(Dynamsoft.DWT.licenseServer)){if(Dynamsoft.DWT.licenseServer.length>0){var ae=Dynamsoft.DWT.licenseServer[0];if(ae==""||ae.indexOf("https://mlts.dynamsoft.com")==0){Dynamsoft.DWT.licenseServer=undefined}}}else{Dynamsoft.DWT.licenseServer=undefined}if(!b.isString(Dynamsoft.DWT.organizationID)||Dynamsoft.DWT.organizationID==""||Dynamsoft.DWT.organizationID=="undefined"){if(b.isNumber(Dynamsoft.DWT.organizationID)){Dynamsoft.DWT.organizationID=""+Dynamsoft.DWT.organizationID}else{Dynamsoft.DWT.organizationID=undefined}}if(!b.isString(Dynamsoft.DWT.handshakeCode)||Dynamsoft.DWT.handshakeCode==""||Dynamsoft.DWT.handshakeCode=="undefined"){if(b.isNumber(Dynamsoft.DWT.handshakeCode)){Dynamsoft.DWT.handshakeCode=""+Dynamsoft.DWT.handshakeCode}else{Dynamsoft.DWT.handshakeCode=undefined}}if(!b.isString(Dynamsoft.DWT.ProductKey)){Dynamsoft.DWT.ProductKey=undefined}},ad=function(){var ae=Dynamsoft.DWT.Containers;if(b.isArray(ae)&&ae.length>0){Z()}else{if(!F){setTimeout(ad,100)}}},Z=function(){if(F){return}if(Dynamsoft.DWT.Port>0||Dynamsoft.DWT.SSLPort>0){var ae=[];if(Dynamsoft.DWT.Port>0){ae.push({port:Dynamsoft.DWT.Port,ssl:false})}else{ae.push({port:18622,ssl:false})}if(Dynamsoft.DWT.SSLPort>0){ae.push({port:Dynamsoft.DWT.SSLPort,ssl:true})}else{ae.push({port:18623,ssl:true})}b.detect.ports=ae;b.LS.removeItem("DWT_port");b.LS.removeItem("DWT_ssl")}x();L();b._safePromptCustomMsg();b.each(b._funsAfterConfigLoaded,function(ag){try{if(b.isFunction(ag)){ag()}}catch(ah){}});b.openLoadingMsg();b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_LookingLicense);var af=b.get("dynamsoft_waiting");if(af){af.parentNode.removeChild(af)}Dynamsoft.Ready(function(){var am=p.getNavInfo(),al=P.bFileSystem,an=b.env.basePath,ai=Dynamsoft.DWT.ResourcesPath;if(!al){var ag=ai;if(typeof(ag)=="undefined"||ag==""){ai=an}else{if(ag.length>0&&ag.charAt(0)!="/"&&ag.indexOf("//")<0&&an!=""){ai=[an,"/",ag].join("")}}if(ai.length>0&&ai.charAt(ai.length-1)=="/"){ai=ai.substr(0,ai.length-1)}Dynamsoft.DWT.ResourcesPath=ai}Dynamsoft.managerEnv.resourcesPath=ai;var ak=G,aj=[];var ah=[[ai,"/src/dynamsoft.webtwain.css",q].join("")],ap=function(){b.detect.cssLoaded=G};if(b.product.bHTML5Edition&&Dynamsoft.DWT.UseDefaultViewer){ah.push([ai,"/src/dynamsoft.viewer.css",q].join(""))}if(am.bSafari){b.getAllCss(ah,ap);ap()}else{b.getAllCss(ah,ap)}if(am.bSafari){ak=V}aj.push([ai,"/dynamsoft.webtwain.install.js",q].join(""));if(Dynamsoft.DWT.bNpm){aj=[]}if(b.product.bHTML5Edition&&Dynamsoft.DWT.UseDefaultViewer){aj.push([ai,"/src/dynamsoft.viewer.js",q].join(""))}var ao=false;if(Dynamsoft.navInfo.bIE){ao=(Dynamsoft.navInfo.strBrowserVersion<=7)}if(!ao&&b.License.isLTS()){aj.push([ai,"/src/dynamsoft.lts.js",q].join(""))}if(aj.length>0){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_LoadingViewerJs)}b.getScripts(aj,ak,function(aq){if(!aq){b.log("error: load js failed.");return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_AllJsLoaded);b.detect.scriptLoaded=G;if(b.isString(M.Host)){Dynamsoft.dcp.host=M.Host}if(b.product.bHTML5Edition){b.closeAll=b.html5.closeAll}else{if(b.product.bPluginEdition){b.DynamicWebTwain=b.plugin.DynamicWebTwain;b.closeAll=b.plugin.closeAll}else{if(b.product.bActiveXEdition){b.DynamicWebTwain=b.ie.DynamicWebTwain;b.closeAll=b.ie.closeAll}}}if(b.isUndefined(M.UseLocalService)){if(b.env.bMobile){M.UseLocalService=false}else{M.UseLocalService=true}}M._srcUseLocalService=M.UseLocalService;if(b.isArray(Dynamsoft.aryAddonReadyFun)){var ar=0;for(;ar<Dynamsoft.aryAddonReadyFun.length;ar++){var at=Dynamsoft.aryAddonReadyFun[ar];if(b.isFunction(at)){try{at(b)}catch(au){b.log(au.stack||au,"error");setTimeout(function(){throw au},0)}}}Dynamsoft.aryAddonReadyFun=[]}F=true;if(M.AutoLoad){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_FireBeforeInitEvt);if(M.OnWebTwainWillInit){M.OnWebTwainWillInit()}X(W)}else{b.closeLoadingMsg()}})})};M.IsLocalServiceConnected=function(){return new b.Promise(function(ah,ag){var af=Y.host,ae;b.each(b.detect.ports,function(ai){if(P.bSSL){if(ai.ssl){ae=ai.port}}else{if(!ai.ssl){ae=ai.port}}});M.CheckConnectToTheService(af,ae,function(ak,aj,ai){ah(!0)},function(){ag(!1)})})};b.domReady(function(){ad();if(P.bIE){if(O.addEventListener){O.addEventListener("unload",M.Unload,false)}}});b.waitForScripts=function(){if(!b.waitForScripts._promise){b.waitForScripts._promise=new Promise(function(ae){b.waitForScripts._resolve=ae;setTimeout(b.waitForScripts,60)})}else{if(b.waitForScripts._resolve&&b.detect.scriptLoaded){b.waitForScripts._resolve()}else{setTimeout(b.waitForScripts,60)}}return b.waitForScripts._promise};if(!O.Dynamsoft_OnClickInstallButton){O.Dynamsoft_OnClickInstallButton=function(){b.hide("dwt-btn-install");b.hide("dwt-install-url-div")}}if(O){b.addEventListener(O,"focus",function(){var ae=M.ContainerMap;if(ae){b.each(ae,function(ag,af){if(ag&&ag._OnPageFocus){ag._OnPageFocus()}})}});b.addEventListener(O,"blur",function(){var ae=p.getNavInfo();if(ae.bWin){var af=M.ContainerMap;if(af){b.each(af,function(ah,ag){if(ah&&ah._OnPageBlur){ah._OnPageBlur()}})}}});b.addEventListener(m,"visibilitychange",function(){var ae=p.getNavInfo();if(ae.bWin){if(m.visibilityState=="hidden"){var af=M.ContainerMap;if(af){b.each(af,function(ah,ag){if(ah&&ah._OnPageBlur){ah._OnPageBlur()}})}}}})}})(Dynamsoft.Lib,Dynamsoft.DWT); 
Dynamsoft.DWT.bNpm=true;Dynamsoft.DWT.dbrCanvasMaxWH=4096; 
 
Dynamsoft.aryAddonReadyFun=[];Dynamsoft.AddonReady=function(fn){Dynamsoft.aryAddonReadyFun.push(fn);}; 
Dynamsoft.Lib.mix(Dynamsoft,{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}); 
 
Dynamsoft.AddonReady(function(DL,nil){var Dynamsoft=window.Dynamsoft; 
 
/*
 Dynamsoft JavaScript Library
 Product: Dynamsoft Web Twain
 Web Site: http://www.dynamsoft.com

 Copyright 2021, Dynamsoft Corporation 
 Author: Dynamsoft Support Team
 Module: image io js
 Version: 1.7.1
 @20210511140932.708000+480
 Dynamsoft.WasmEnv.busy() && */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.polyfill=function(a,b,d,e){if(b){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var c=a[e];c in d||(d[c]={});d=d[c]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function d(a){return a instanceof c?a:new c(function(c,b){c(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})}this.batch_.push(a)};var e=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){e(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var b=a[c];a[c]=null;try{b()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(h){c.reject(h)}};c.prototype.createResolveAndReject_=function(){function a(a){return function(f){b||(b=!0,a.call(c,f))}}var c=this,b=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(h){this.reject_(h);return}"function"==typeof c?
this.settleSameAsThenable_(c,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var f=new b;c.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(l){b.reject(l)}};c.prototype.then=function(a,b){function f(a,c){return"function"==typeof a?function(c){try{d(a(c))}catch(q){e(q)}}:c}var d,e,k=new c(function(a,c){d=a;e=c});this.callWhenSettled_(f(a,d),f(b,e));return k};
c.prototype.catch=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function b(){switch(d.state_){case 1:a(d.result_);break;case 2:c(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(b):this.onSettledCallbacks_.push(b)};c.resolve=d;c.reject=function(a){return new c(function(c,b){b(a)})};c.race=function(a){return new c(function(c,b){for(var f=$jscomp.makeIterator(a),e=f.next();!e.done;e=f.next())d(e.value).callWhenSettled_(c,
b)})};c.all=function(a){var b=$jscomp.makeIterator(a),f=b.next();return f.done?d([]):new c(function(a,c){function e(c){return function(b){k[c]=b;g--;0==g&&a(k)}}var k=[],g=0;do k.push(void 0),g++,d(f.value).callWhenSettled_(e(k.length-1),c),f=b.next();while(!f.done)})};return c},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(d){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+b++,d)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(d){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var d=a.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(d.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,d){try{var e=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var c=e.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function d(b){return a.throw(b)}return new Promise(function(e,c){function f(a){a.done?e(a.value):Promise.resolve(a.value).then(b,d).then(f,c)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,e={next:function(){if(d<a.length){var c=d++;return{value:b(c,a[c]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,d){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var c=b.length,f=a.length;d=Math.max(0,Math.min(d|0,b.length));for(var k=0;k<f&&d<c;)if(b[d++]!=a[k++])return!1;return k>=f}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,d){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===d&&(d=b.length);d=Math.max(0,Math.min(d|0,b.length));for(var c=a.length;0<c&&0<d;)if(b[--d]!=a[--c])return!1;return 0>=c}},"es6","es3");var Dynamsoft="undefined"!=typeof Dynamsoft?Dynamsoft:("undefined"!=typeof Dynamsoft?window.Dynamsoft:void 0)||{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""};Dynamsoft.error=Dynamsoft.error||{};
Dynamsoft.error.code=Dynamsoft.error.code||{};Dynamsoft.error.code.wasmBase=-4E3;Dynamsoft.error.code.wasmException=Dynamsoft.error.code.wasmBase-1;Dynamsoft.error.code.wasmNoModule=Dynamsoft.error.code.wasmBase-1;Dynamsoft.error.code.wasmJsBase=-4100;Dynamsoft.error.code.wasmJsObjectNotInit=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsObjectTerminated=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsObjectInitFailed=Dynamsoft.error.code.wasmJsBase-1;
Dynamsoft.error.code.wasmJsNotLoaded=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsInvalidJson=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsWorkerRunException=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsWorkerRunFailed=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsReadFileFailed=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsCoreTaskException=Dynamsoft.error.code.wasmJsBase-1;
Dynamsoft.error.code.wasmJsProcTaskException=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsSavePdfFailed=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsSaveTiffFailed=Dynamsoft.error.code.wasmJsBase-1;
Dynamsoft.conststring={version:"1.7.1",logInfo:"logInfo",logDebug:"logDebug",logAll:"logAll",initPending:"pending",initReady:"ready",initFailed:"failed",imgIO:"imgIO",core:"imgCore",imgProc:"imgProc",pdfR:"pdfReader",pdfW:"pdfWriter",crypto:"crypto",binaryBlobType:"application/octet-stream",wasmExtension:".wasm"};
Dynamsoft.WasmEnv={moduleNames:[Dynamsoft.conststring.imgIO,Dynamsoft.conststring.crypto,Dynamsoft.conststring.core,Dynamsoft.conststring.imgProc,Dynamsoft.conststring.pdfR,Dynamsoft.conststring.pdfW],imgIO:{name:Dynamsoft.conststring.imgIO,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.imageio-",wasmModule:null},imgCore:{name:Dynamsoft.conststring.core,autoLoad:!0,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.imagecore-",wasmModule:null},imgProc:{name:Dynamsoft.conststring.imgProc,
autoLoad:!0,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.imageProc-",wasmModule:null},pdfReader:{name:Dynamsoft.conststring.pdfR,autoLoad:!0,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.pdfReader-",wasmModule:null},pdfWriter:{name:Dynamsoft.conststring.pdfW,autoLoad:!0,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.pdfWriter-",wasmModule:null},crypto:{name:Dynamsoft.conststring.crypto,autoLoad:!0,ver:Dynamsoft.conststring.version,status:"",
prefixName:"dynamsoft.crypto-",wasmModule:null}};Dynamsoft.Enum_ImageType={IT_DIB:-1,IT_RGBA:-2,IT_BMP:0,IT_JPG:1,IT_PNG:3,IT_ALL:5};Dynamsoft.Enum_ReturnType={RT_AUTO:-1,RT_BINARY:1,RT_BASE64:2};Dynamsoft.Enum_ErrorMessage={PARAMETER_TYPE_ERROR:"Parameter Type not Supported: ",TIMEOUT:"Timeout no Response: ",FILE_STREAM_ERROR:"File Stream Error: ",WASM_EXCEPTION_ERROR:"An WASM exception occurred."};var Dynmasoft=Dynamsoft||{};Dynamsoft.Lib=Dynamsoft.Lib||{};Dynamsoft.Lib.env=Dynamsoft.Lib.env||{};
Dynamsoft.b64ToUint6=function(a){return 64<a&&91>a?a-65:96<a&&123>a?a-71:47<a&&58>a?a+4:43===a?62:47===a?63:0};Dynamsoft.base64DecToArr=function(a,b){a=a.replace(/[^A-Za-z0-9\+\/]/g,"");var d=a.length;b=b?Math.ceil((3*d+1>>>2)/b)*b:3*d+1>>>2;for(var e=new Uint8Array(b),c,f=0,k=0,g=0;g<d;g++)if(c=g&3,f|=Dynamsoft.b64ToUint6(a.charCodeAt(g))<<18-6*c,3===c||1===d-g){for(c=0;3>c&&k<b;c++,k++)e[k]=f>>>(16>>>c&24)&255;f=0}return e};
Dynamsoft.isWasmSupport=function(){try{if("object"===typeof WebAssembly&&"function"===typeof WebAssembly.instantiate){var a=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(a instanceof WebAssembly.Module)return new WebAssembly.Instance(a)instanceof WebAssembly.Instance}}catch(b){}return!1};Dynamsoft.random=function(){return(Date.now()%10086).toString(36).slice(2)+Math.random().toString(36).slice(2)};
Dynamsoft.readFile=function(a){return new Promise(function(b,d){var e=Object.prototype.toString.call(a);if("[object String]"===e)0===a.indexOf("blob:")||0<a.indexOf(".jpg")||0<a.indexOf(".jpeg")||0<a.indexOf(".png")||0<a.indexOf(".bmp")||0<a.indexOf(".dib")||0<a.indexOf(".pdf")||0<a.indexOf(".tiff")||0<a.indexOf(".tif")?fetch(a,{mode:"cors"}).then(function(a){return a.arrayBuffer()}).then(function(a){return b(a)}).catch(function(a){return Promise.reject(a)}):d("Error url: Can not read the file URL");
else if("[object Blob]"===e){var c=new FileReader;c.readAsArrayBuffer(a);c.onload=function(){var a=c.result;c=null;b(a)}}else"[object FileList]"===e||"[object File]"===e?(d=a[0]?a[0]:a,c=new FileReader,c.readAsArrayBuffer(d),c.onload=function(){var a=c.result;c=null;b(a)}):"[object ArrayBuffer]"===e||"[object Uint8ClampedArray]"===e?b(a):d("Not support source type: "+e)})};
Dynamsoft.base64Decode=function(a){function b(a){var c=[],b=a.length,d;for(d=0;d<b;d++){var e=a.charCodeAt(d);if(0==(e>>7&255))c.push(a.charAt(d));else if(6==(e>>5&255)){var h=a.charCodeAt(++d);e=(e&31)<<6;h&=63;e|=h;c.push(String.fromCharCode(e))}else if(14==(e>>4&255)){h=a.charCodeAt(++d);var l=a.charCodeAt(++d);e=e<<4|h>>2&15;h=(h&3)<<6|l&63;e=(e&255)<<8|h;c.push(String.fromCharCode(e))}}return c.join("")}var d=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];return function(a){for(var c=[],f=0,e=a.length,g,h;f<e;){do g=d[a.charCodeAt(f++)&255];while(f<e&&-1==g);if(-1==g)break;do h=d[a.charCodeAt(f++)&255];while(f<e&&-1==h);if(-1==h)break;c.push(String.fromCharCode(g<<
2|(h&48)>>4));do{g=a.charCodeAt(f++)&255;if(61==g)return b(c.join(""));g=d[g]}while(f<e&&-1==g);if(-1==g)break;c.push(String.fromCharCode((h&15)<<4|(g&60)>>2));do{h=a.charCodeAt(f++)&255;if(61==h)return b(c.join(""));h=d[h]}while(f<e&&-1==h);if(-1==h)break;c.push(String.fromCharCode((g&3)<<6|h))}return b(c.join(""))}(a)};Dynamsoft.WasmEnv=Dynamsoft.WasmEnv||{};Dynamsoft.WasmEnv.lastInstanceId=0;Dynamsoft.WasmEnv.worker={maxWorkers:1,liveTime:60};
Dynamsoft.WasmEnv.resourceDir=Dynamsoft.DWT.ResourcesPath+"/src/";Dynamsoft.WasmEnv.wasmJS="dynamsoft.imageio_wasm-"+Dynamsoft.conststring.version+".js";Dynamsoft.WasmEnv.logLevel=Dynamsoft.DWT.Debug?Dynamsoft.conststring.logDebug:0;Dynamsoft.WasmEnv.logFunc=null;Dynamsoft.WasmEnv.productKey="";Dynamsoft.WasmEnv.licMode=0;Dynamsoft.WasmEnv.uuid="";Dynamsoft.WasmEnv.fetchOptions={mode:"cors",credentials:"same-origin"};Dynamsoft.WasmEnv.maxHeapSize=200;
Dynamsoft.WasmEnv.log=function(a,b){var d=Dynamsoft.WasmEnv;d.logLevel===b&&("function"===typeof d.logFunc?d.logFunc(a):console.log(a))};Dynamsoft.WasmEnv.clear=function(){for(var a=$jscomp.makeIterator(Dynamsoft.WasmEnv.moduleNames),b=a.next();!b.done;b=a.next())b=b.value,Dynamsoft.WasmEnv[b].status="",delete Dynamsoft.WasmEnv[b].error};Dynamsoft.WasmEnv.setLoglevel=function(a,b){Dynamsoft.WasmEnv.logLevel=1===a?Dynamsoft.conststring.logDebug:0;Dynamsoft.WasmEnv.logFunc=b};
Dynamsoft.WorkerHandler=function(a,b){function d(a){e.terminated=!0;e.terminating&&e.terminationHandler&&e.terminationHandler(e);e.terminating=!1;e.cancelAllTasks()}var e=this;this.options=b||{};this.script=a;this.worker=function(a){if("function"!==typeof Worker&&("object"!==typeof Worker||"function"!==typeof Worker.prototype.constructor))throw Error("Web Workers not supported");a=new Worker(a);a.on=function(a,c){this.addEventListener(a,function(a){c(a.data)})};a.send=function(a){if(void 0!=a&&void 0!=
a.params&&void 0!=a.params.input){var c=Object.prototype.toString.call(a.params.input);if("[object Array]"===Object.prototype.toString.call(a.params.input)){if(c=Object.prototype.toString.call(a.params.input[0]),"[object ArrayBuffer]"===c||"[object Uint8ClampedArray]"===c){this.postMessage(a,[void 0!=a.params.input[0].buffer?a.params.input[0].buffer:a.params.input[0]]);return}}else if("[object ArrayBuffer]"===c||"[object Uint8ClampedArray]"===c){this.postMessage(a,[void 0!=a.params.input.buffer?a.params.input.buffer:
a.params.input]);return}}this.postMessage(a)};return a}(this.script);this.requestQueue=[];this.terminated=this.terminating=!1;e.tasks=Object.create(null);this.objectToError=function(a){for(var c=Error(""),b=Object.keys(a),d=0;d<b.length;d++)c[b[d]]=a[b[d]];return c};this.dispatchQueuedRequests=function(){e.requestQueue.forEach(e.worker.send.bind(e.worker));e.requestQueue=[]};this.dispatchRequest=function(a){a.forEach(e.worker.send.bind(e.worker))};this.worker.on("message",function(a){"function"===
typeof e.options.log&&e.options.log(a.log?a.log:a,e.context);if("string"===typeof a&&"ready"===a)e.worker.ready=!0,e.dispatchQueuedRequests();else if(!a.log){if("object"===typeof a){var c=a.result;"object"===typeof c?(void 0!=c.errorCode&&(c.code=c.errorCode,delete c.errorCode),void 0!=c.errorMessage&&(c.message=c.errorMessage,delete c.errorMessage)):"string"===typeof c&&(c=c.replace('"errorCode"','"code"'),c=c.replace("'errorCode'","'code'"),c=c.replace('"errorMessage"','"message"'),c=c.replace("'errorMessage'",
"'message'"),a.result=c);void 0!=a.memSize&&(e.memSize=a.memSize)}c=a.id;var b=e.tasks[c];void 0!==b?(delete e.tasks[c],!0===e.terminating&&e.terminate(),"loadWasm"===a.func&&void 0!=a.result&&(e.worker.wasmReady=!0,e.dispatchQueuedRequests()),a.error?b.resolver.reject(e.objectToError(a.error)):a.result&&b.resolver.resolve(a.result)):"loadWasm"===a.func&&void 0!=a.result&&Dynamsoft.WasmEnv._handleWasmLoad(a.result,e)}});this.worker.on("error",d);this.worker.on("exit",function(a,b){a="Worker terminated Unexpectedly\n exitCode: `"+
(a+"`\n signalCode: `")+(b+"`\n script: `")+(e.script+"`\n");d(Error(a))});this.terminated=this.terminating=!1;this.terminationHandler=null;this.lastTaskId=0};
Dynamsoft.WorkerHandler.prototype.exec=function(a,b,d){d||(d={},d.promise=new Promise(function(a,b){d.resolve=a;d.reject=b}));var e=++this.lastTaskId;this.tasks[e]={id:e,resolver:d};b={id:e,func:a,params:b};this.terminated?d.reject(Error("Worker is terminated")):this.terminating?d.reject(Error("Worker is terminating")):this.worker.wasmReady||this.worker.ready&&"loadWasm"===a?this.worker.send(b):this.requestQueue.push(b);return d.promise};
Dynamsoft.WorkerHandler.prototype.busy=function(){return 0<this.howManyTasks()};Dynamsoft.WorkerHandler.prototype.howManyTasks=function(){return Object.keys(this.tasks).length};Dynamsoft.WorkerHandler.prototype.cancelAllTasks=function(a){for(var b in this.tasks)void 0!==this.tasks[b]&&this.tasks[b].resolver.reject(Error(a));this.tasks=Object.create(null)};Dynamsoft.WorkerHandler.prototype.alive=function(){return this.terminating||this.terminated?!1:!0};
Dynamsoft.WorkerHandler.prototype.terminate=function(a,b){a&&this.cancelAllTasks("Worker has been terminated");"function"===typeof b&&(this.terminationHandler=b);if(this.busy())this.terminating=!0;else{if(this.worker){if("function"===typeof this.worker.terminate)this.worker.terminate();else throw Error("Failed to terminate worker");this.worker=null}this.terminating=!1;this.terminated=!0;this.terminationHandler&&this.terminationHandler(this)}};
Dynamsoft.WorkerHandler.prototype.setLogCallback=function(a,b){this.options.log=a;this.context=b};
Dynamsoft.WorkerPool=function(a,b){var d=this;this.workers=[];this.options=a;this.maxWorkers=1;this.script=this.options.resourceDir+this.options.wasmJS;this.ready=!1;this.pdfReaderInstance=null;this.terminated=!1;this.wasmLoaderPromise=Object.create(null);this._getMaxWorkers=function(){var a=2;"hardwareConcurrency"in self.navigator&&(a=self.navigator.hardwareConcurrency);return Math.max(Math.min(d.options.worker.maxWorkers,Math.max(d.options.worker.maxWorkers,a/2)),1)};this._logAll=function(a){Dynamsoft.WasmEnv.log(a,
Dynamsoft.conststring.logAll)};this._log=function(a,c){Dynamsoft.WasmEnv.log(a,Dynamsoft.conststring.logDebug)};this._createWorker=function(){d.ready&&(d.maxWorkers=d._getMaxWorkers());var a=d.workers;if(a.length<d.maxWorkers){var c=new Dynamsoft.WorkerHandler(d.script);a.push(c);c.id=a.length;c.module={};c.module.modulesInfo=[];c.instances=Object.create(null);c.setLogCallback(this._log,d);d._logAll(a);d.log("get new worker "+c.id+" succeed!");return c}return null};this._getContainedModuleWorkers=
function(a){d._removeTerminatedWorker();var c=d.workers;d._logAll(c);for(var b=[],e=0;e<c.length;e++){var g=c[e];!g.module.modulesInfo[a.name]||g.busy()&&c.length<d.maxWorkers||b.push(g)}d._logAll("get workers for module "+a.name);d._logAll(b);return b};this._getIdleWorker=function(){d._removeTerminatedWorker();for(var a=d.workers,c=0;c<a.length;c++){var b=a[c];if(!1===b.busy())return b}return d._createWorker()};this._busy=function(){d._removeTerminatedWorker();for(var a=d.workers,c=0;c<a.length;c++)if(a[c].busy())return!0;
return!1};this._removeTerminatedWorker=function(){d.workers=d.workers.filter(function(a){return!a.terminated})};this._getWorkerByIntanceId=function(a,c){d._logAll("_getWorkerByIntanceId");d._logAll(a);for(var b=9007199254740991,e=null,g=0;g<a.length;g++){var h=a[g];if(void 0!=h.instances[c]){e=h;break}else{var l=h.howManyTasks();l<b&&(e=h,b=l)}}if(e)return e.instances[c]="",d._logAll(a),d.log("get worker "+c+" in "+e.id+" succeed!"),e;d._logAll("_getWorkerByIntanceId: no suitable worker");return null};
this._initWorkerInner=function(a,c,b){try{c.params&&(c.params.resourceDir=this.resourceDir,c.params.fetchOptions=Dynamsoft.WasmEnv.fetchOptions);for(var e=$jscomp.makeIterator(c.params.module.modulesInfo),f=e.next();!f.done;f=e.next())Dynamsoft.WasmEnv[f.value.name].status=Dynamsoft.conststring.initPending;a.exec(c.func,c.params).then(function(c){void 0===c.code||c.modules?Dynamsoft.WasmEnv._handleWasmLoad(c,a):d.log(c);b()}).catch(function(a){d.log(a);b()})}catch(h){d.log(h),b()}};this._removeInstanceInWorker=
function(a,c){var b=d.workers;d._logAll("removeInstanceInWorker");d._logAll(b);for(var e=0;e<b.length;e++){var g=b[e];if(g===a){void 0!=g.instances[c]?(delete g.instances[c],d._logAll(b),d.log("removeInstanceInWorker "+c+" in "+g.id+" succeed!")):d.log("not found instance "+c);break}}};this._hasInstanceInWorker=function(){for(var a=d.workers,c=0;c<a.length;c++)if(0!=Object.keys(a[c].instances).length)return!0;return null!=d.pdfReaderInstance};this._getWorker=function(a,c){if(Dynamsoft.WasmEnv[a.name].status==
Dynamsoft.conststring.initPending)return null;var b=d._getContainedModuleWorkers(a);if(0!=b.length)return d._getWorkerByIntanceId(b,c);if(c=d._getIdleWorker()){if(c.module.modulesInfo[a.name])return c;a={id:0,func:"loadWasm",params:{priority:0,key:d.options.productKey,module:{modulesInfo:[]}}};b=$jscomp.makeIterator(Dynamsoft.WasmEnv.moduleNames);for(var e=b.next();!e.done;e=b.next())e=e.value,a.params.module.modulesInfo.push({name:e,ver:Dynamsoft.WasmEnv[e].ver,wasmModule:Dynamsoft.WasmEnv[e].wasmModule});
d._initWorkerInner(c,a,function(){})}return null};this._init=function(a){var c=d._createWorker();c&&(c.setLogCallback(function(a,c){c.log(a)},d),a.params.callback=null,d._initWorkerInner(c,a,function(a){d.maxWorkers=d._getMaxWorkers();d.ready=!0}))};this._initAsync=function(a){var c=this,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=b=c,e.yield(fetch(b.script).then(function(a){return a.blob()}).then(function(a){return URL.createObjectURL(a)}),2);d.script=
e.yieldResult;b._init(a);e.jumpToEnd()})};this._getPath=function(){this.script.startsWith("http://")||this.script.startsWith("https://")?this.resourceDir=this.options.resourceDir:this.options.resourceDir.startsWith("/")?null!=location.origin&&(this.resourceDir=location.origin+this.options.resourceDir):null!=location.href&&(this.resourceDir=location.href.substring(0,location.href.lastIndexOf("/")+1)+this.options.resourceDir);this.resourceDir.endsWith("/")||(this.resourceDir+="/")};this._getPath();
if(b&&0<b.params.module.modulesInfo.length){a=!1;if(this.script.startsWith("http://")||this.script.startsWith("https://"))this.script.startsWith(location.origin)||(a=!0);a?this._initAsync(b):this._init(b)}else d.maxWorkers=d._getMaxWorkers(),d.ready=!0};
Dynamsoft.WorkerPool.prototype.getWorker=function(a,b){if(!this.ready)return null;var d=a.name===Dynamsoft.WasmEnv.pdfReader.name;if(d&&this.pdfReaderInstance)return null;if((a=this._getWorker(a,b))&&d){if(this.pdfReaderInstance)return this._removeInstanceInWorker(a,b),null;this.pdfReaderInstance=b}return a};
Dynamsoft.WorkerPool.prototype.removeInstanceInWorker=function(a,b,d,e){this._removeInstanceInWorker(b,d);a.name===Dynamsoft.WasmEnv.pdfReader.name&&this.pdfReaderInstance&&(this.pdfReaderInstance=null);e&&b&&void 0!=b.memSize&&(a=1048576*Dynamsoft.WasmEnv.maxHeapSize,Dynamsoft.WasmEnv.log("current memSize="+b.memSize+", max="+a,Dynamsoft.conststring.logDebug),b.memSize>a&&0!=a&&!this._hasInstanceInWorker()&&(Dynamsoft.WasmEnv.log("reload wasm auto",Dynamsoft.conststring.logDebug),Dynamsoft.WasmEnv.load()))};
Dynamsoft.WorkerPool.prototype.log=function(a){Dynamsoft.WasmEnv.log(a,Dynamsoft.conststring.logDebug)};Dynamsoft.WorkerPool.prototype.terminate=function(a){this.terminated=!0;var b=[],d=this.workers.slice();this.workers=[];d.forEach(function(d){var c={};c.promise=new Promise(function(a,b){c.resolve=a;c.reject=b});b.push(c.promise);d.terminate(a,function(a){c.resolve(a)})});return Promise.all(b)};
Dynamsoft.WorkerPool.prototype.getMemoryUsed=function(){for(var a=this.workers,b=[],d=0;d<a.length;d++){var e=a[d];e&&void 0!=e.memSize&&(b[d]=e.memSize)}return b};
Dynamsoft.WasmEnv.load=function(a,b,d){Dynamsoft.WasmEnv.unload();Dynamsoft.WasmEnv.productKey=void 0!=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.WasmEnv.licMode=void 0!=b?b?1:0:Dynamsoft.WasmEnv.licMode;Dynamsoft.WasmEnv.uuid=void 0!=d?d:Dynamsoft.WasmEnv.uuid;Dynamsoft.WasmEnv.licensePromise={};Dynamsoft.WasmEnv.licensePromise.promise=new Promise(function(a,b){Dynamsoft.WasmEnv.licensePromise.resolve=a;Dynamsoft.WasmEnv.licensePromise.reject=b});var e=Dynamsoft.WasmEnv;e.clear();a={id:0,func:"loadWasm",
params:{priority:0,key:a,licMode:Dynamsoft.WasmEnv.licMode,uuid:Dynamsoft.WasmEnv.uuid,module:{modulesInfo:[]},callback:function(a){e.logLevel===Dynamsoft.conststring.logDebug&&("function"===typeof e.logFunc?e.logFunc(a):console.log(a))}}};a.params.module.modulesInfo.push({name:e.imgIO.name,ver:e.imgIO.ver,wasmModule:e.imgIO.wasmModule});1===Dynamsoft.WasmEnv.licMode&&a.params.module.modulesInfo.push({name:e.crypto.name,ver:e.crypto.ver,wasmModule:e.crypto.wasmModule});(e.imgCore.autoLoad||e.imgCore.wasmModule)&&
a.params.module.modulesInfo.push({name:e.imgCore.name,ver:e.imgCore.ver,wasmModule:e.imgCore.wasmModule});(e.imgProc.autoLoad||e.imgProc.wasmModule)&&a.params.module.modulesInfo.push({name:e.imgProc.name,ver:e.imgProc.ver,wasmModule:e.imgProc.wasmModule});(e.pdfReader.autoLoad||e.pdfReader.wasmModule)&&a.params.module.modulesInfo.push({name:e.pdfReader.name,ver:e.pdfReader.ver,wasmModule:e.pdfReader.wasmModule});(e.pdfWriter.autoLoad||e.pdfWriter.wasmModule)&&a.params.module.modulesInfo.push({name:e.pdfWriter.name,
ver:e.pdfWriter.ver,wasmModule:e.pdfWriter.wasmModule});Dynamsoft.WorkerPool.Instance=null;Dynamsoft.WorkerPool.Instance=new Dynamsoft.WorkerPool(e,a)};Dynamsoft.WasmEnv.unload=function(){var a=Dynamsoft.WorkerPool.Instance;return void 0!=a?a.terminate(!0):Promise.resolve()};Dynamsoft.WasmEnv.getWorkerPool=function(){var a=Dynamsoft.WorkerPool.Instance;return a&&a.terminated?null:a};Dynamsoft.WasmEnv.busy=function(){var a=Dynamsoft.WorkerPool.Instance;return a?a._busy():!1};
Dynamsoft.WasmEnv._handleWasmLoad=function(a,b){Dynamsoft.WasmEnv.log("handleWasmLoad:",Dynamsoft.conststring.logDebug);Dynamsoft.WasmEnv.log(a,Dynamsoft.conststring.logDebug);if("object"!=typeof a||void 0==a.modules)"object"===typeof a&&Dynamsoft.WasmEnv.licensePromise.reject({code:a.code,message:a.message});else{for(var d=$jscomp.makeIterator(a.modules),e=d.next();!e.done;e=d.next())e=e.value,a.code?(Dynamsoft.WasmEnv[e.name].error={code:a.code,message:a.message},b.module.modulesInfo[e.name]=!1):
(delete Dynamsoft.WasmEnv[e.name].error,Dynamsoft.WasmEnv[e.name].status=Dynamsoft.conststring.initReady,Dynamsoft.WasmEnv[e.name].wasmModule=e.wasmModule,b.module.modulesInfo[e.name]=!0);a.licenseInfo&&(a=a.licenseInfo,"string"===typeof a&&(a=JSON.parse(a)),Dynamsoft.WasmEnv.licensePromise.resolve(a));void 0!=Dynamsoft.WasmEnv.imgIO.error&&Dynamsoft.WasmEnv.licensePromise.reject(Dynamsoft.WasmEnv.imgIO.error)}};
Dynamsoft.ImageIoBase=function(a,b,d,e){var c=this;this.moduleInfo=b;this.name=this.moduleInfo.name;this.outputType=Dynamsoft.Enum_ImageType.IT_JPG;this.inputType=Dynamsoft.Enum_ImageType.IT_ALL;this.tiffFormat=0;this.jpegQuality=80;this.tasksQueue=[];this.worker=null;this.lastTaskId=0;this.logFunc=d;this.context=e;this.instanceId=++Dynamsoft.WasmEnv.lastInstanceId;this.timer=null;this.nv=JSON.parse(JSON.stringify(Dynamsoft.navInfo));this.mb=Dynamsoft.Lib.env.bMobile;this.dm=location.origin;this.initStatus=
"";this.terminated=!1;this.license=a?a:Dynamsoft.license;this.license||(this.license="");this.licMode=Dynamsoft.WasmEnv.licMode;this.uuid=Dynamsoft.WasmEnv.uuid;this._getWorker=function(){c.timer&&clearTimeout(c.timer);if(c.worker&&c.worker.alive())return c.worker;var a=Dynamsoft.WasmEnv.getWorkerPool();if(a){c.worker=a.getWorker(c.moduleInfo,c.instanceId);if(c.worker&&c.worker.alive())0<c.tasksQueue.length&&c._dispatchQueuedTasks();else{if(Dynamsoft.WasmEnv[c.name].error)return c._cancelAllTasks(Dynamsoft.error.code.wasmJsNotLoaded,
Dynamsoft.WasmEnv[c.name].error),c.worker;0<c.tasksQueue.length&&(c.timer=setTimeout(c._getWorker,50))}return c.worker}c._cancelAllTasks(Dynamsoft.error.code.wasmJsNotLoaded,"wasm env not loaded")};this._dispatchQueuedTasks=function(){c._logAll(c.tasksQueue,c);if(c.worker&&c.worker.alive()){if(0<c.tasksQueue.length){var a=c.tasksQueue[0];if(c.initStatus===Dynamsoft.conststring.initReady||"init"===a.func)delete c.tasksQueue[0],c.tasksQueue.splice(0,1),c._exec(a)}}else c.worker&&!c.worker.alive()&&
0<c.tasksQueue.length&&"init"!=c.tasksQueue[0].func?(c.worker=null,c._init()):0<c.tasksQueue.length&&c._getWorker()};this._log=function(a,c){"function"===typeof c.logFunc?c.logFunc(a,c.context):Dynamsoft.WasmEnv.log(a,Dynamsoft.conststring.logDebug)};this._logAll=function(a,c){Dynamsoft.WasmEnv.logLevel===Dynamsoft.conststring.logAll&&this._log(a,c)};this._handleReject=function(a,c,b){var d=c;"object"!=typeof d&&(d={},d.code=b,d.message=c);return this.terminated?a.resolve(d):a.reject(d)};this._handleBasicResult=
function(a,c){delete a.code;delete a.message;return a};this._handleBooleanResult=function(a,c){return!0};this._handleImageData=function(a,c){if("object"===typeof a.imageData)if(void 0!=a.imageCount&&1<a.imageCount)for(c=0;c<a.imageCount;c++)a.imageData[c]=URL.createObjectURL(a.imageData[c]);else a.imageData=URL.createObjectURL(a.imageData);"object"===typeof a.pdfData&&(a.pdfData=URL.createObjectURL(a.pdfData));return a};this._handleResult=function(a,b){a=b.context._getResult(a);void 0===a.code||!a.code&&
"Successful."===a.message?(a=b.handleResult(a,b),c._dispatchQueuedTasks(),b=b.resolve,b(a)):(a={code:a.code,message:a.code===Dynamsoft.error.code.wasmException?Dynamsoft.Enum_ErrorMessage.WASM_EXCEPTION_ERROR:a.message},this.terminated?b.resolve(a):b.reject(a))};this._getResult=function(a){try{return"string"===typeof a?JSON.parse(a):a}catch(k){return a}};this._exec=function(a){var b=c.worker;b.setLogCallback(c._log,c);c._logAll(a,c);try{b.exec(a.func,a.params).then(function(b){c._log(b,c);c._handleResult(c._getResult(b),
a)}).catch(function(b){c._log(b,c);c._dispatchQueuedTasks();var d=b;"object"===typeof b&&(void 0!=b.message?d=b.message:void 0!=b.message&&(d=b.message));b={code:Dynamsoft.error.code.wasmJsWorkerRunFailed,message:d};c.terminated?a.resolve(b):a.reject(b)})}catch(g){c._dispatchQueuedTasks(),c._log(g,c),b={code:Dynamsoft.error.code.wasmJsWorkerRunException,message:g.message,stack:g.stack},c.terminated?a.resolve(b):(b,a.reject(b))}};this._cancelAllTasks=function(a,b){for(var d=0;d<c.tasksQueue.length;d++)if(void 0!==
c.tasksQueue[d]){var e={code:a,message:b};c.terminated?c.tasksQueue[d].resolve(e):c.tasksQueue[d].reject(e)}c.tasksQueue=[]};this._createTask=function(a,b,c){var d={id:++this.lastTaskId};d.promise=new Promise(function(a,b){d.resolve=a;d.reject=b});d.func=a;d.params={moduleName:this.name,insId:this.instanceId,fetchOptions:Dynamsoft.WasmEnv.fetchOptions};d.context=this;d.handleResult="undefined"!==typeof c&&c?c:this._handleBasicResult;d.params.input="undefined"!==typeof b&&b?b:"";d.params.returnType=
"";return d};this._addTask=function(a,b){""===this.initStatus?a.reject({code:Dynamsoft.error.code.wasmJsObjectNotInit,message:this.terminated?"object has been disposed":"object not init"}):this.initStatus===Dynamsoft.conststring.initFailed?a.reject({code:Dynamsoft.error.code.wasmJsObjectInitFailed,message:c.initError}):(b?c.tasksQueue.unshift(a):c.tasksQueue.push(a),c._dispatchQueuedTasks());return a.promise};this._init=function(){var a=this._createTask("init");a.params.key=this.license;a.params.uuid=
this.uuid;a.params.licMode=this.licMode;a.params.val={nv:this.nv,mb:this.mb,dm:this.dm};a.handleResult=function(a,b){b.context.initStatus=Dynamsoft.conststring.initReady;return a};this.initStatus=Dynamsoft.conststring.initPending;this._addTask(a,!0);a.promise.then(function(a){c._log(c.name+" init return: ",c);c._log(a,c)}).catch(function(a){c.initStatus=Dynamsoft.conststring.initFailed;c.initError=a.message;c._log(c.name+" init failed",c);c._log(a,c);c._cancelAllTasks(Dynamsoft.error.code.wasmJsObjectInitFailed,
a.message)})};this._destroy=function(){var a=this._createTask("destroy");this._addTask(a);return a.promise};this._terminate=function(a){var b=this._destroy();this.terminated=!0;var d=Dynamsoft.WasmEnv.getWorkerPool();d&&d.removeInstanceInWorker(c.moduleInfo,c.worker,c.instanceId,a);b.then(function(a){c.worker=null;c._log(c.name+" destroy return: ",c);c._log(a,c)}).catch(function(a){c.worker=null;c._log(c.name+" destroy failed",c);c._log(a,c)});this.initStatus=""};this._readFile=function(a,b){return new Promise(function(d,
e){Dynamsoft.readFile(a).then(function(a){d(a)},function(a){c._handleReject(b,a,Dynamsoft.error.code.wasmJsReadFileFailed)}).catch(function(a){c._handleReject(b,a,Dynamsoft.error.code.wasmJsReadFileFailed)})})};this._init()};Dynamsoft.ImageIoBase.prototype.terminate=function(a){this._terminate(void 0!=a?a:!0)};
Dynamsoft.ImageIoBase.prototype.downloadData=function(a,b,d,e){a=a?a:Date.now()+"";return(new Promise(function(c,f){if(b){if("base64"===d){var k=Dynamsoft.base64DecToArr(b).buffer;k=new Blob([k],{type:"pdf"==e?"application/pdf":"jpg"==e?"image/jpeg":"image/"+e});k=URL.createObjectURL(k)}else"blob"===d?k=b:f(Dynamsoft.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!");a=a+"."+e;window.navigator.msSaveBlob&&fetch(k).then(function(a){return a.arrayBuffer()}).then(function(b){b=
new Blob([b]);window.navigator.msSaveOrOpenBlob(b,a);c(a)});f=document.createElement("a");f.href=k;f.download=a;f.click();c(a)}else f(Dynamsoft.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!")})).catch(function(a){return Promise.reject(a)})};
Dynamsoft.Imagecore=function(a,b,d){a=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.ImageIoBase.call(this,a,Dynamsoft.WasmEnv.imgCore,b,d);this.saveImageInner=function(a,b,d,k,g,h,l,p,n,m){var c=this;b=void 0!=b?b:this.inputType;d=void 0!=d?d:0;k=void 0!=k?k:0;g=void 0!=g?g:24;h=void 0!=h?h:96;l=void 0!=l?l:96;n=void 0!=n?n:this.jpegQuality;m=void 0!=m?m:Dynamsoft.Enum_ReturnType.RT_AUTO;c=this;var e=c._createTask("SaveImage");c._readFile(a,e).then(function(a){e.params.input=[a,b,d,k,g,h,l,p,n,m==Dynamsoft.Enum_ReturnType.RT_BASE64];
e.params.returnType=m;e.handleResult=c._handleImageData;c._addTask(e)});return e.promise}};Dynamsoft.Imagecore.prototype=Object.create(Dynamsoft.ImageIoBase.prototype);Dynamsoft.Imagecore.prototype.constructor=Dynamsoft.Imagecore;Dynamsoft.Imagecore.prototype.getImageFormat=function(a){var b=this,d=b._createTask("GetImageFormat");b._readFile(a,d).then(function(a){d.params.input=a;b._addTask(d)});return d.promise};
Dynamsoft.Imagecore.prototype.readImageInfo=function(a){var b=this,d=b._createTask("ReadImageInfo");b._readFile(a,d).then(function(a){d.params.input=a;b._addTask(d)});return d.promise};Dynamsoft.Imagecore.prototype.getMD5=function(a){var b=this,d=b._createTask("GetMD5");b._readFile(a,d).then(function(a){d.params.input=a;d.handleResult=function(a,b){return a.MD5};b._addTask(d)});return d.promise};Dynamsoft.Imagecore.prototype.getLicenseInfo=function(){return this._addTask(this._createTask("GetLicenseInfo"))};
Dynamsoft.Imagecore.prototype.getAesResult=function(a){return this._addTask(this._createTask("GetAesResult",[void 0!=a?a:""]))};Dynamsoft.Imagecore.prototype.saveImage=function(a,b,d,e){return this.saveImageInner(a,null,null,null,null,null,null,b,d,e?Dynamsoft.Enum_ReturnType.RT_BINARY:Dynamsoft.Enum_ReturnType.RT_AUTO)};
Dynamsoft.Imagecore.prototype.readImage=function(a,b,d,e){b=void 0!=b?b:this.outputType;d=void 0!=d?d:this.jpegQuality;e=void 0!=e?e:!1;var c=this,f=c._createTask("ReadImage");c._readFile(a,f).then(function(a){f.params.input=[a,b,d,e];f.handleResult=c._handleImageData;c._addTask(f)});return f.promise};Dynamsoft.Imagecore.prototype.openTiff=function(a){var b=this,d=b._createTask("LoadTiff");b._readFile(a,d).then(function(a){d.params.input=a;b._addTask(d)});return d.promise};
Dynamsoft.Imagecore.prototype.readTiff=function(a,b,d){b=void 0!=b?b:this.outputType;d=void 0!=d?d:this.returnImageAsBase64;return this._addTask(this._createTask("ReadTiffPage",[void 0!=a?a:0,b,d],this._handleImageData))};Dynamsoft.Imagecore.prototype.closeTiff=function(){return this._addTask(this._createTask("EndReadTiff",null,this._handleBooleanResult))};Dynamsoft.Imagecore.prototype.createTiff=function(){return this._addTask(this._createTask("NewTiff",null,this._handleBooleanResult))};
Dynamsoft.Imagecore.prototype.appendImage=function(a,b,d,e){b=void 0!=b?b:this.inputType;d=void 0!=d?d:this.tiffFormat;e=void 0!=e?e:this.jpegQuality;var c=this,f=c._createTask("AppendImageToTiff");c._readFile(a,f).then(function(a){f.params.input=[a,b,d,e];f.handleResult=c._handleBooleanResult;c._addTask(f)});return f.promise};Dynamsoft.Imagecore.prototype.addTag=function(a,b,d){return this._addTask(this._createTask("AddTagToNextPage",[a,b,void 0!=d?d:!0],this._handleBooleanResult))};
Dynamsoft.Imagecore.prototype.getTiff=function(a){var b=this._createTask("GetTiffStream");b.handleResult=this._handleImageData;b.params.returnType=a?Dynamsoft.Enum_ReturnType.RT_BINARY:Dynamsoft.Enum_ReturnType.RT_AUTO;return this._addTask(b)};Dynamsoft.Imagecore.prototype.getMemoryUsed=function(){return this._addTask(this._createTask("getMemoryUsed",null,function(a,b){return a.memoryUsed}))};
Dynamsoft.ImageProc=function(a,b,d){a=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.ImageIoBase.call(this,a,Dynamsoft.WasmEnv.imgProc,b,d)};Dynamsoft.ImageProc.prototype=Object.create(Dynamsoft.ImageIoBase.prototype);Dynamsoft.ImageProc.prototype.constructor=Dynamsoft.ImageProc;
Dynamsoft.ImageProc.prototype.initImage=function(a,b,d,e){b=void 0!=b?b:!1;d=void 0!=d?d:0;e=void 0!=e?e:0;var c=this,f=c._createTask("InitImageObject");f.handleResult=this._handleBooleanResult;f.params.input=[a,d,e];b?(f.params.input.push(Dynamsoft.Enum_ImageType.IT_RGBA),c._addTask(f)):c._readFile(a,f).then(function(a){f.params.input[0]=a;f.params.input.push(Dynamsoft.Enum_ImageType.IT_ALL);c._addTask(f)});return f.promise};
Dynamsoft.ImageProc.prototype.rotate=function(a,b,d,e){return this._addTask(this._createTask("RotateEx",[a,void 0!=d?d:!1,void 0!=e?e:3,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.flip=function(a){a=void 0!=a?a:1;var b=this._createTask("");b.handleResult=this._handleBooleanResult;1===a?b.func="Flip":-1===a&&(b.func="Mirror");this._addTask(b);return b.promise};
Dynamsoft.ImageProc.prototype.erase=function(a,b,d,e,c){c=void 0!=c?c:"FFFFFF";var f=this._createTask("Erase");f.handleResult=this._handleBooleanResult;f.params.input=[a,b,d,e,c];this._addTask(f);return f.promise};Dynamsoft.ImageProc.prototype.crop=function(a,b,d,e){return this._addTask(this._createTask("Crop",[a,b,d,e],this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.resize=function(a,b,d){return this._addTask(this._createTask("ChangeImageSize",[a,b,void 0!=d?d:5],this._handleBooleanResult))};
Dynamsoft.ImageProc.prototype.toGrayscale=function(a,b){return this._addTask(this._createTask("ConvertToGrayScale","",this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.toBinary=function(a,b,d){return this._addTask(this._createTask("ConvertToBWScale","",this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.invert=function(){return this._addTask(this._createTask("Invert",null,this._handleBooleanResult))};
Dynamsoft.ImageProc.prototype.setImageWidth=function(a,b){return this._addTask(this._createTask("SetImageWidth",[a,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.setImageHeight=function(a,b){return this._addTask(this._createTask("SetImageHeight",[a,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.setDPI=function(a,b,d,e,c,f){return this._addTask(this._createTask("SetDPI",[a,b,d,e,void 0!=c?c:!1,f],this._handleBooleanResult))};
Dynamsoft.ImageProc.prototype.getImage=function(a,b,d,e,c,f){a=void 0!=a?a:this.jpegQuality;return this._addTask(this._createTask("GetCurrentImage",[void 0!=d&&d?Dynamsoft.Enum_ImageType.IT_JPG:Dynamsoft.Enum_ImageType.IT_ALL,void 0!=e?e:24,void 0!=c?c:96,void 0!=f?f:96,!1,a,void 0!=b?b:!0],this._handleImageData))};Dynamsoft.ImageProc.prototype.getSkewAngle=function(a){return this._addTask(this._createTask("GetSkewAngle",[void 0!=a?a:""],function(a,d){return a.skewAngle}))};
Dynamsoft.ImageProc.prototype.freeReservedData=function(){return this._addTask(this._createTask("FreeReservedData",null,this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.detectDocument=function(a){return this._addTask(this._createTask("DocumentDetect",[void 0!=a?a:2]))};Dynamsoft.ImageProc.prototype.perspective=function(a,b,d,e,c,f,k,g){return this._addTask(this._createTask("Perspective",[a,b,d,e,c,f,k,g],this._handleBooleanResult))};Dynamsoft.ImageProcWrapper={};
Dynamsoft.ImageProcWrapper.resize=function(a,b,d,e,c){var f=new Dynamsoft.ImageProc(Dynamsoft.WasmEnv.productKey);return f.initImage(a).then(function(){var a=void 0==c?5:c;var g=b>d?b/e:d/e;return f.resize(b/g,d/g,a)}).then(function(){return f.getImage()}).then(function(a){f.terminate();return a},function(a){f.terminate();return a})};
Dynamsoft.PdfReader=function(a,b,d){a=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.ImageIoBase.call(this,a,Dynamsoft.WasmEnv.pdfReader,b,d);this.resolution=200;this.readMode=3;this.outputType=Dynamsoft.Enum_ImageType.IT_ALL};Dynamsoft.PdfReader.prototype=Object.create(Dynamsoft.ImageIoBase.prototype);Dynamsoft.PdfReader.prototype.constructor=Dynamsoft.PdfReader;
Dynamsoft.PdfReader.prototype.open=function(a,b){b=void 0!=b?b:"";var d=this,e=d._createTask("LoadPdf");d._readFile(a,e).then(function(a){e.params.input=[a,b];e.handleResult=function(a,b){var c=Dynamsoft.base64Decode(a.infoBase64);try{try{c.replace(/\\/gi,"\\\\");var d=JSON.parse(c)}catch(l){d=c}return{PdfCount:a.pageCount,PdfInfo:d,isTextBased:a.isTextBased}}catch(l){b.reject({code:Dynamsoft.error.code.wasmJsInvalidJson,message:l.message,stack:l.stack})}};d._addTask(e)});return e.promise};
Dynamsoft.PdfReader.prototype.readPage=function(a,b,d,e,c,f){b=void 0!=b?b:this.resolution;d=void 0!=d?d:this.readMode;e=void 0!=e?e:this.outputType;f=void 0!=f?f:this.returnImageAsBase64;return this._addTask(this._createTask("ReadPdfPage",[void 0!=a?a:0,b,d,e,void 0!=c?c:!1,f],this._handleImageData))};Dynamsoft.PdfReader.prototype.close=function(){return this._addTask(this._createTask("UnloadPdf",null,this._handleBooleanResult))};
Dynamsoft.PdfWriter=function(a,b,d){a=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.ImageIoBase.call(this,a,Dynamsoft.WasmEnv.pdfWriter,b,d);this._setPdfSettings=function(a){var b={};if(void 0!=a&&"object"===typeof a)for(var d in a)b[d]=a[d];return b}};Dynamsoft.PdfWriter.prototype=Object.create(Dynamsoft.ImageIoBase.prototype);Dynamsoft.PdfWriter.prototype.constructor=Dynamsoft.PdfWriter;
Dynamsoft.PdfWriter.prototype.initPdfSetting=function(a){var b=this._createTask("InitPdfWriter");b.params.input=JSON.stringify(this._setPdfSettings(a));b.handleResult=this._handleBooleanResult;return this._addTask(b)};Dynamsoft.PdfWriter.prototype.appendPage=function(a){var b=this,d=b._createTask("AddPageFromImageFileStream");b._readFile(a,d).then(function(a){d.params.input=a;d.handleResult=b._handleBooleanResult;b._addTask(d)});return d.promise};
Dynamsoft.PdfWriter.prototype.writePdf=function(a){var b=this._createTask("GetPdfContent");b.params.returnType=a?Dynamsoft.Enum_ReturnType.RT_BINARY:Dynamsoft.Enum_ReturnType.RT_AUTO;b.handleResult=this._handleImageData;return this._addTask(b)};Dynamsoft.pdf=Dynamsoft.pdf||{};Dynamsoft.pdf.IsModuleInstalled=function(){return Dynamsoft.isWasmSupport()?Dynamsoft.WasmEnv.pdfReader.status==Dynamsoft.conststring.initReady&&Dynamsoft.WasmEnv.pdfWriter.status==Dynamsoft.conststring.initReady:!1};
Dynamsoft.WasmEnv.getLicenseInfo=function(a,b,d){Dynamsoft.WasmEnv.productKey!=a&&(Dynamsoft.WasmEnv.productKey=a,Dynamsoft.WasmEnv.licMode=void 0!=b?b?1:0:0,Dynamsoft.WasmEnv.uuid=void 0!=d?d:"",Dynamsoft.WasmEnv.licensePromise={},Dynamsoft.WasmEnv.licensePromise.promise=new Promise(function(a,b){Dynamsoft.WasmEnv.licensePromise.resolve=a;Dynamsoft.WasmEnv.licensePromise.reject=b;var c=new Dynamsoft.Imagecore(Dynamsoft.WasmEnv.productKey);c.getLicenseInfo().then(function(b){c.terminate();a(b)},function(a){c.terminate();
b(a)})}));return Dynamsoft.WasmEnv.licensePromise.promise};Dynamsoft.WasmEnv.getMemoryUsed=function(){var a=Dynamsoft.WorkerPool.Instance;return a&&!a.terminated?a.getMemoryUsed():{}};Dynamsoft.WasmEnv.getWasmNames=function(){for(var a=[],b=$jscomp.makeIterator(Dynamsoft.WasmEnv.moduleNames),d=b.next();!d.done;d=b.next())d=d.value,a.push(Dynamsoft.WasmEnv[d].prefixName+Dynamsoft.WasmEnv[d].ver+Dynamsoft.conststring.wasmExtension);return a};
 
}); 
 
/*! 20210427
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 17.1
* 
* Module: addon/barcodereader
* final js: build\addon\dynamsoft.webtwain.addon.barcodereader.js
*/
;var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.DBR=Dynamsoft.DBR||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};(function(){Dynamsoft.BarcodeReaderAddon=Dynamsoft.BarcodeReaderAddon||{};var a=Dynamsoft.BarcodeReaderAddon;a.Version="8.2.0.0525";a._decoding=false;a._decodeQueue=[];a._decodeNext=function(){if(a._decodeQueue.length==0){a._decoding=false;return}var c=a._decodeQueue[0],d=c.method,b=c.args;a._decodeQueue.splice(0,1);d.apply(null,b)};a._defaultRuntimeSettingsStr="";a._defaultTemplateStr="";a._wasmInstance=false;a._activeXInstance=false;a.BarcodeReaderException=(function(){var b=function(){var d;var c=arguments[0],f=arguments[1],e=Dynamsoft.DBR.EnumErrorCode.DBR_UNKNOWN;if(typeof c=="number"){e=c;d=new Error(f)}else{d=new Error(c)}d.code=e;return d};return b})();a.RemoveNonPrintableChar=function(b){if(Dynamsoft.Lib.isString(b)){return b.replace(/[^\x20-\x7E]|(\\")/g,"")}else{return b}};a.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty."};a._activeXMaxIEVersion=9;a.logLevel=3;Dynamsoft.DBR.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0};Dynamsoft.DBR.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0};Dynamsoft.DBR.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0};Dynamsoft.DBR.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0};Dynamsoft.DBR.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2};Dynamsoft.DBR.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0};Dynamsoft.DBR.EnumClarityCalculationMethod={ECCM_CONTRAST:1};Dynamsoft.DBR.EnumClarityFilterMode={CFM_GENERAL:1};Dynamsoft.DBR.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0};Dynamsoft.DBR.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0};Dynamsoft.DBR.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2};Dynamsoft.DBR.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0};Dynamsoft.DBR.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0};Dynamsoft.DBR.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-10000,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061,DMERR_FAILED_TO_REACH_LTS:-20200};Dynamsoft.DBR.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0};Dynamsoft.DBR.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12};Dynamsoft.DBR.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0};Dynamsoft.DBR.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32};Dynamsoft.DBR.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4};Dynamsoft.DBR.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192};Dynamsoft.DBR.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64};Dynamsoft.DBR.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4};Dynamsoft.DBR.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3};Dynamsoft.DBR.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0};Dynamsoft.DBR.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2};Dynamsoft.DBR.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3};Dynamsoft.DBR.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0};Dynamsoft.DBR.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32};Dynamsoft.DBR.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0};Dynamsoft.DBR.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0};Dynamsoft.DBR.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0};Dynamsoft.DBR.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}})();Dynamsoft.AddonReady(function(e,c){var b,f=Dynamsoft.BarcodeReaderAddon;function a(h){return h&&h instanceof ArrayBuffer}f.Class=(function(){var h=Dynamsoft.Lib;var p=function(){this._runtimeSettings=null;this._initSettingsContent=null;this._tplContentArr=[];this.bWasm=false};p.prototype._decodeBlob=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof Blob)){throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeArrayBuffer=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof ArrayBuffer)){throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeUint8Array=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof Uint8Array)&&!(self.Uint8ClampedArray&&s instanceof Uint8ClampedArray)){throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeImage=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof HTMLImageElement)){throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.")}if(s.crossOrigin&&"anonymous"!=s.crossOrigin){throw"cors"}r=r||"";t()}).then(function(){if(s.src.substring(0,11)=="data:image/"){return q._decodeBase64(s.src,r)}else{return q._decodeUrl(s.src,r)["catch"](function(u){if(f.logLevel>=3){if(console&&console.warn){console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead.");console.warn(u)}}if(!self.HTMLCanvasElement){return Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."))}var v=document.createElement("canvas");v.width=s.naturalWidth;v.height=s.naturalHeight;var t=v.getContext("2d");t.drawImage(s,0,0);return q._decodeCanvas(v,r)})}})};p.prototype._decodeCanvas=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof HTMLCanvasElement)){throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.")}if(s.crossOrigin&&"anonymous"!=s.crossOrigin){throw"cors"}r=r||"";if(s.toBlob){s.toBlob(function(u){t(u)})}else{if(s.msToBlob){s.msToBlob(function(u){t(u)})}else{t(s.toDataURL())}}}).then(function(t){if(s.toBlob||s.msToBlob){return q._decodeBlob(t,r)}else{return q._decodeBase64(t,r)}})};p.prototype._decodeVideo=function(t){var r=this;var s;var q=arguments;return new Promise(function(B){if(!(t instanceof HTMLVideoElement)){throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.")}if(t.crossOrigin&&"anonymous"!=t.crossOrigin){throw"cors"}var A,z,u,w,y,v;if(q.length<=2){A=z=0;u=y=t.videoWidth;w=v=t.videoHeight}else{if(q.length<=4){A=z=0;u=t.videoWidth;w=t.videoHeight;y=q[1];v=q[2]}else{A=q[1];z=q[2];u=q[3];w=q[4];y=q[5];v=q[6]}}s=(typeof q[q.length-1]=="string")?q[q.length-1]:"";var x=document.createElement("canvas");x.width=y;x.height=v;var C=x.getContext("2d");C.drawImage(t,A,z,u,w,0,0,y,v);B(x)}).then(function(u){return r._decodeCanvas(u,s)})};p.prototype._decodeBase64=p.prototype.decodeBase64String=function(s,r){var q=this;return new Promise(function(t){if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.")}if(s.substring(0,11)=="data:image/"){s=s.substring(s.indexOf(",")+1)}t()}).then(function(){return q._innerDecode(1,s,r)})};p.prototype._decodeUrl=function(s,r){var q=this;if(s&&s.indexOf&&(s.indexOf("dwt://")==0||s.indexOf("dcs://")==0)){return q._decodeDynamsoftServiceInnerUrl(s,r)}if(f._wasmInstance){return f._wasmInstance.decode(s)}return new Promise(function(v,u){var t;if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.")}r=r||"";if(f._activeXInstance){t=new ActiveXObject("MSXML2.XMLHTTP");t.open("GET",s,true);if(t.overrideMimeType){t.overrideMimeType("text/plain; charset=x-user-defined")}else{t.setRequestHeader("Accept-Charset","x-user-defined")}t.onreadystatechange=function(){if(t.readyState==4){v(new VBArray(t.responseBody).toArray())}};t.send("")}else{t=new XMLHttpRequest();t.open("GET",s,true);t.responseType="arraybuffer";t.send();t.onloadend=function(){v(this.response)};t.onerror=function(){u(Error(t.error))}}}).then(function(t){if(f._activeXInstance){return q._activeXDecodeArray(t,r)}else{return q._decodeArrayBuffer(t,r)}})};p.prototype._decodeDynamsoftServiceInnerUrl=function(s,r){var q=this;return new Promise(function(t){if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.")}if(!(s.indexOf("dwt://")==0||s.indexOf("dcs://")==0)){throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.")}t()}).then(function(){return q._innerDecode(4000,s,r)})};p.prototype._activeXDecodeArray=function(s,r){var q=this;return new Promise(function(v,u){if(!(s instanceof Array)){throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.")}r=r||"";try{v(Dynamsoft.Lib.btoa(String.fromCharCode.apply(String,s)))}catch(t){u(t)}}).then(function(t){return q._decodeBase64(t,r)})};p.prototype._activeXDecodeHandle=function(s,r){var q=this;return new Promise(function(t){r=r||"";t()}).then(function(){return q._innerDecode(4001,s,r)})};p.prototype._decode=p.prototype.decode=function(r,q){if(f._activeXInstance){if((typeof r=="string"||r instanceof String)){return this._activeXDecodeHandle(r,q)}else{return Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'."))}}else{if(f._wasmInstance){return f._wasmInstance.decode(r)}else{if(self.Blob&&r instanceof Blob){return this._decodeBlob(r,q)}else{if(self.ArrayBuffer&&r instanceof ArrayBuffer){return this._decodeArrayBuffer(r,q)}else{if((self.Uint8Array&&r instanceof Uint8Array)||(self.Uint8ClampedArray&&r instanceof Uint8ClampedArray)){return this._decodeUint8Array(r,q)}else{if(r instanceof Array){return this._activeXDecodeArray(r,q)}else{if(self.HTMLImageElement&&r instanceof HTMLImageElement){return this._decodeImage(r,q)}else{if(self.HTMLCanvasElement&&r instanceof HTMLCanvasElement){return this._decodeCanvas(r,q)}else{if(self.HTMLVideoElement&&r instanceof HTMLVideoElement){return this._decodeVideo(r,q)}else{if(!isNaN(r)){return this._activeXDecodeHandle(r,q)}else{if(typeof r=="string"||r instanceof String){if(r.substring(0,11)=="data:image/"){return this._decodeBase64(r,q)}else{return this._decodeUrl(r,q)}}else{return Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}}}}}}}}}}}};var k=function(q){return typeof q==="number"&&q%1===0};var m=function(r){if(typeof r!="object"||r.length!=8){return false}for(var q=0;q<r.length;++q){if(!k(r[q])){return false}}return true};p.prototype._innerServiceCmd=function(r,q){return new Promise(function(u,t){var s={method:"ReadBarcode",parameter:[Dynamsoft.DWT.ProductKey,4002,"",""],updateSettings:r,initSettingsContent:q};if(f._activeXInstance){u(f._activeXInstance.Process(h.stringify(s),location.protocol+"//"+location.host))}else{var v;if(h.License.isLTS()){v=Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(w){s.parameter.push(w.ar);s.parameter.push(w.cu);s.parameter.push(0);s.parameter.push("");return h.stringify(s)})}else{v=Promise.resolve(h.stringify(s))}v.then(function(w){return h.fetch(f._urlRoot+"ReadBarcode",{mode:"cors",method:"post",body:w,dataType:"arrayBuffer"})}).then(function(w){if(a(w)){u(String.fromCharCode.apply(null,new Uint8Array(w)))}else{u(w)}},function(x){var w="Init template & runtimeSettings failed.";if(x){w=[w," Http info: ",x.errorString," (",x.httpCode,")"].join("")}t(w)})}})};p.prototype._innerDecode=function(t,u,s,r){var q=this;if(q._runtimeSettings){if(q._runtimeSettings.expectedBarcodesCount==0){q._runtimeSettings.expectedBarcodesCount=512}}return new Promise(function(z,y){var x={method:"ReadBarcode",parameter:[Dynamsoft.DWT.ProductKey,t,t!=0?u:null,s||""],updateSettings:q._runtimeSettings,conflictMode:1==q.conflictMode?"ignore":"overwrite",initSettingsContent:q._initSettingsContent,tplContent:(function(){if(s){for(var B=0;B<q._tplContentArr.length;++B){if(s==q._tplContentArr[B].ImageParameter.Name){return h.stringify(q._tplContentArr[B])}}}return null})()};var w=function(D,K,J){try{var H=i(D);if(!H||!H.textResults){y(new f.BarcodeReaderException(H.exception,H.description))}if(h.product.bHTML5Edition&&J&&J.config.data){var F=h.parse(J.config.data),E;if(h.isArray(F.parameter)&&F.parameter.length>2){if(F.parameter[1]==4000){if(F.parameter.length>4&&F.parameter[4]){H.textResults.imageid=F.parameter[4]}else{var G,C;G=F.parameter[2];C=G.indexOf("&index=");if(C>=0){H.textResults.imageid=G.substring(C+7,G.indexOf("&t="))}}}}}for(E=0;E<H.textResults.length;E++){var B=H.textResults[E];B.BarcodeText=B.barcodeText;if(H.exception!=Dynamsoft.DBR.EnumErrorCode.DBR_SUCCESS){B.exception=H.exception}}if(H.exception!=Dynamsoft.DBR.EnumErrorCode.DBR_SUCCESS){H.textResults.exception=H.exception;H.textResults.description=H.description}if(f._activeXInstance&&H.records){Dynamsoft.Lib.each(H.records,function(L,M){Dynamsoft.DWT.lavrf(M,L,Dynamsoft.DWT.EnumInstance.dwt_desktop)});Dynamsoft.DWT.lavrf_(1,Dynamsoft.DWT.EnumInstance.dwt_desktop)}z(H.textResults)}catch(I){y(I)}};if(f._activeXInstance){if(h.License.isLTS()){Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(B){x.parameter.push(B.ar);x.parameter.push(B.cu);x.parameter.push(0);x.parameter.push("");w(f._activeXInstance.Process(h.stringify(x),location.protocol+"//"+location.host))})}else{w(f._activeXInstance.Process(h.stringify(x),location.protocol+"//"+location.host))}}else{var v=f._urlRoot+"ReadBarcode";if(0==t){v+="/LoadZipFromBytes?cmd="+encodeURIComponent(h.stringify(x))}var A;if(t==0){A=Promise.resolve(u)}else{if(h.License.isLTS()){A=Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(B){x.parameter.push(B.ar);x.parameter.push(B.cu);x.parameter.push(0);x.parameter.push([h.product.getDWTPrefix(),h.product.getServerVersionInfo(),"/verify?id=",r,"&t=",h.getRandom()].join(""));return h.stringify(x)})}else{A=Promise.resolve(h.stringify(x))}}A.then(function(B){return h.fetch(v,{mode:"cors",method:"post",body:B,dataType:"arrayBuffer"})}).then(function(D,C,B){if(a(D)){w(String.fromCharCode.apply(null,new Uint8Array(D)),C,B)}else{w(D,C,B)}},function(C){var B="ReadBarcode request fail.";if(C){B=[B," Http info: ",C.errorString," (",C.httpCode,")"].join("")}y(Error(B))})}})};var i=f._handleRetJsonString=function(s){var r;if(typeof s=="string"||typeof s=="object"&&s instanceof String){try{r=h.parse(s)}catch(q){r=h.parse(f.RemoveNonPrintableChar(s))}}else{r=s}if(!r){throw f.BarcodeReaderException(Dynamsoft.DBR.EnumErrorCode.DBR_UNKNOWN,f.errors.decodeResultEmpty)}if("textResults" in r&&h.isArray(r.textResults)){}else{if(r.exception!=Dynamsoft.DBR.EnumErrorCode.DBR_SUCCESS){throw f.BarcodeReaderException(r.exception,r.description)}}return r};p.prototype.getAllParameterTemplateNames=function(){var q=[];for(var r=0;r<this._tplContentArr.length;++r){q.push(this._tplContentArr[r].ImageParameter.Name)}return q};p.prototype.getRuntimeSettings=function(){var q=this;if(q.bWasm){return f._wasmInstance.getRuntimeSettings()}if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return Promise.resolve(q._runtimeSettings)};var o='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',j='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',n='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',l='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}';p.prototype.updateRuntimeSettings=function(u){var r=this,t;if(typeof u=="string"||typeof u=="object"&&u instanceof String){if("speed"==u||"balance"==u||"coverage"==u||"default"==u){var q;if("speed"==u){q=o}else{if("balance"==u){q=j}else{if("coverage"==u){q=n}else{q=l}}}return r.initRuntimeSettingsWithString(q)}else{t=u}}else{if(typeof u=="object"){t=h.stringify(u)}else{throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.")}}var s=h.parse(t);if(r.bWasm){return f._wasmInstance.updateRuntimeSettings(s).then(function(){return f._wasmInstance.getRuntimeSettings()})}r._runtimeSettings=s;r._initSettingsContent=null;return r._innerServiceCmd(r._runtimeSettings,null).then(function(v){var w=f._handleRetJsonString(v);r._runtimeSettings=w.settings;if(!r._runtimeSettings){r._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return w.settings})};p.prototype.resetRuntimeSettings=function(){var q=this;if(q.bWasm){return f._wasmInstance.resetRuntimeSettings().then(function(){return f._wasmInstance.getRuntimeSettings()})}q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr);q._initSettingsContent=null;return q._innerServiceCmd(q._runtimeSettings,null).then(function(r){var s=f._handleRetJsonString(r);q._runtimeSettings=s.settings;if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return s.settings})};p.prototype.outputSettingsToString=function(q){if(q){for(var r=0;r<this._tplContentArr.length;++r){if(q==this._tplContentArr[r].ImageParameter.Name){return h.stringify(this._tplContentArr[r])}}}else{return f._defaultTemplateStr}};p.prototype.initRuntimeSettingsWithString=function(r){var q=this;if(!h.isString(r)){throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.")}if(q.bWasm){return f._wasmInstance.initRuntimeSettingsWithString(r).then(function(){return f._wasmInstance.getRuntimeSettings()})}q._runtimeSettings=null;q._initSettingsContent=h.parse(r);return q._innerServiceCmd(null,q._initSettingsContent).then(function(s){var t=f._handleRetJsonString(s);q._runtimeSettings=t.settings;if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return t.settings})};return p})();f._dbr=false;f._initH5=function(i,h){return new Promise(function(k,j){f._urlRoot=Dynamsoft.dcp._getPreUrl(Dynamsoft.dcp.detect.curPortIndex)+"dcp/dbr_"+f.Version.replace(/\./g,"")+"/";e.ajax({method:"POST",url:f._urlRoot+"VersionInfo?t="+e.getRandom(),data:'{"method":"VersionInfo"}',onSuccess:function(){k()},onError:function(){return j("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.")},dataType:"json",async:true,timeout:800})}).then(function(){f._dbr=new f.Class();return f._dbr._innerServiceCmd(null,null)}).then(function(j){try{var l=f._handleRetJsonString(j);f._dbr._runtimeSettings=l.settings;f._defaultRuntimeSettingsStr=e.stringify(l.settings);f._defaultTemplateStr=e.stringify(l.outputSettings);i(f._dbr)}catch(k){h(Error("Init template & runtimeSettings failed: "+k.message)||k)}},function(j){h(j)})};function g(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"){var h=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(h instanceof WebAssembly.Module){return new WebAssembly.Instance(h) instanceof WebAssembly.Instance}}}catch(i){}return false}f.dbrInitPromiseFun=function(n,p){var j=Dynamsoft.BarcodeReaderAddon,m=function(){if(Dynamsoft.DBR&&Dynamsoft.DBR.BarcodeReader&&Dynamsoft.DBR.BarcodeReader.createInstance){Dynamsoft.DBR.BarcodeReader.createInstance().then(function(q){if(Dynamsoft.DBR.EnumErrorCode.DMERR_FAILED_TO_REACH_LTS==Dynamsoft.DBR.BarcodeReader.lastErrorCode){Dynamsoft.DWT.licenseException.code=Dynamsoft.DBR.BarcodeReader.lastErrorCode;Dynamsoft.DWT.licenseException.message=Dynamsoft.DBR.BarcodeReader.lastErrorString}Dynamsoft.DBR.BarcodeReader._bNeverShowDialog=true;if(Dynamsoft.DWT.dbrCanvasMaxWH){q._canvasMaxWH=Dynamsoft.DWT.dbrCanvasMaxWH}j._wasmInstance=q;return q.getRuntimeSettings()}).then(function(q){j._dbr._runtimeSettings=q;j._defaultRuntimeSettingsStr=e.stringify(q);n(j._dbr)},p)}};if(j._dbr){if(j._dbr.bWasm&&!j._wasmInstance){m()}else{n(j._dbr)}return}var k=Dynamsoft.Lib.timestamp,h=Dynamsoft.DWT.ResourcesPath,l=!Dynamsoft.navInfo.bWin||e.product.bHTML5Edition&&(!Dynamsoft.DWT.UseLocalService||e.env.bMobile||Dynamsoft.DWT.UseBarcodeAddonWasm);var o=function(){if(l){if(Dynamsoft.DBR&&Dynamsoft.DBR.BarcodeReader||Dynamsoft.BarcodeReader||window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader){}else{return}if(Dynamsoft.DBR){}else{if(Dynamsoft.BarcodeReader){Dynamsoft.DBR={BarcodeReader:Dynamsoft.BarcodeReader}}else{if(window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader){Dynamsoft.DBR={BarcodeReader:window.DSBarcodeReader.BarcodeReader}}}}Dynamsoft.DBR.BarcodeReader.engineResourcePath=Dynamsoft.DWT.ResourcesPath+"/addon/dbrjs/";if(e.isString(Dynamsoft.DWT.sessionPassword)){Dynamsoft.DBR.BarcodeReader.sessionPassword=Dynamsoft.DWT.sessionPassword}if(e.isArray(Dynamsoft.DWT.licenseServer)){Dynamsoft.DBR.BarcodeReader.licenseServer=Dynamsoft.DWT.licenseServer}if(e.isString(Dynamsoft.DWT.handshakeCode)){Dynamsoft.DBR.BarcodeReader.handshakeCode=Dynamsoft.DWT.handshakeCode}else{if(e.isString(Dynamsoft.DWT.organizationID)){Dynamsoft.DBR.BarcodeReader.organizationID=Dynamsoft.DWT.organizationID}else{if(e.isString(Dynamsoft.DWT.ProductKey)){Dynamsoft.DBR.BarcodeReader.productKeys=Dynamsoft.DWT.ProductKey}}}e.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CompilingWasm);Dynamsoft.DBR.BarcodeReader._bUseFullFeature=true;Dynamsoft.DBR.BarcodeReader._bNeverShowDialog=true;j._dbr=new j.Class();j._dbr.bWasm=true;m();return}if(e.product.bHTML5Edition){j._initH5(n,p)}else{var u=Dynamsoft.navInfoSync,q={method:"ReadBarcode",parameter:[Dynamsoft.DWT.ProductKey,4002,"",""]};if(u.bIE){try{j._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var v=j._activeXInstance.Process(e.stringify(q),location.protocol+"//"+location.host);var t=e.parse(v);if(!t){return p(Error("The DBR init error."))}if("settings" in t){j._dbr=new j.Class();j._dbr._runtimeSettings=t.settings;j._defaultRuntimeSettingsStr=e.stringify(t.settings);if("outputSettings" in t){j._defaultTemplateStr=e.stringify(t.outputSettings)}n(j._dbr)}else{var r=t.description||"The DBR init error.";return p(Error(r))}}catch(s){return p(Error("The DBR .dll is missing or not accessible: "+(s.message||s)))}}else{return p(Error("The DBR init error."))}}};if(l){if(!e.detect.dbrwasmScriptLoaded){if(!g()){p(Error(Dynamsoft.MSG.Err_BrowserNotSupportWasm));return}var i=e.getScript([h,"/addon/dbrjs/dbr.js",k].join(""),true,function(q){e.detect.dbrwasmScriptLoaded=true;o()});if(e.isString(Dynamsoft.DWT.handshakeCode)){i.setAttribute("data-productKeys",Dynamsoft.DWT.handshakeCode)}else{if(e.isString(Dynamsoft.DWT.organizationID)){i.setAttribute("data-organizationID",Dynamsoft.DWT.organizationID)}else{if(e.isString(Dynamsoft.DWT.ProductKey)){i.setAttribute("data-productKeys",Dynamsoft.DWT.ProductKey)}}}}else{o()}}else{o()}};var d=function(i){var j=e.html5.Funs,h;if(Dynamsoft.dcp.b64bit){b="dbrx64_"+Dynamsoft.BarcodeReaderAddon.Version+".dll"}else{b="dbr_"+Dynamsoft.BarcodeReaderAddon.Version+".dll"}if(e.product.bHTML5Edition&&!i._isMobileMode()){i._innerSend("GetAddOnVersion",j.makeParams("barcodereader",b),true,false,false)}h={BarcodeReader:{decode:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}if(!e.isNumber(k)||k<0||k>=i.HowManyImagesInBuffer){e.Errors.IndexOutOfRange(i);return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}var l=new Promise(function(m){if(f._decoding){f._decodeQueue.push({method:m,args:[k]})}else{f._decoding=true;m(k)}});return l.then(function(n){var m;if(e.product.bHTML5Edition){m=i._ImgManager.convertClientIndexToServerId(n);if(m==-1){e.Errors.IndexOutOfRange(i);setTimeout(f._decodeNext,0);throw f.BarcodeReaderException(i._errorCode,i._errorString)}}else{m=n}return new Promise(function(p,o){f.dbrInitPromiseFun(function(s){if(s.bWasm){var q=s.getRuntimeSettings();q=q.then(function(v){if(v.expectedBarcodesCount==0){v.expectedBarcodesCount=512;return s.updateRuntimeSettings(v)}});if(i._isMobileMode()){q=q.then(function(){var v=i._ImgManager.convertServerIdToClientIndex(m);return i._ImgManager.getWebViewer().GetImageData(i._ImgManager.getUidByIndex(v))});q=q.then(function(v){if(v.oriData){return v.oriData}return v.originalData})}else{q=q.then(function(){var v=i._ImgManager.convertServerIdToClientIndex(m);return i.GetImageURL(v,-1,-1)})}q=q.then(function(v){if(v instanceof Blob||v instanceof ArrayBuffer){return f._wasmInstance.decode(v)}return e.fetch(v,{mode:"cors",dataType:"blob"}).then(function(w){return f._wasmInstance.decode(w)})});q.then(function(v){v.imageid=i.objImageIndexManager.convertServerIdToGuid(m);setTimeout(f._decodeNext,0);p(v)},function(w){var v="decode failed.";if(w){v=[v," ",w.errorString," (",w.httpCode,")"].join("")}setTimeout(f._decodeNext,0);o(Error(v))})}else{var t;if(!e.product.bHTML5Edition){t=m;var u=i.GetImagePartURL(t,-1,-1);return s._innerDecode(4001,u,"").then(function(v){v.imageid=i.IndexToImageID(t);setTimeout(f._decodeNext,0);p(v)},function(v){setTimeout(f._decodeNext,0);o(v)})}if(!s.bWasm){t=i._ImgManager.convertServerIdToClientIndex(m);var r=i.GetImagePartURL(t,-1,-1);return s._innerDecode(4000,r,"",i.clientId).then(function(v){v.imageid=i.IndexToImageID(t);setTimeout(f._decodeNext,0);p(v);if(e.License.isLTS()){Dynamsoft.DWT.lcvrf(i)}},function(v){setTimeout(f._decodeNext,0);o(v)})}}},function(q){setTimeout(f._decodeNext,0);o(q)})})})},resetRuntimeSettings:function(){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}return new Promise(f.dbrInitPromiseFun).then(function(k){return k.resetRuntimeSettings()})},getRuntimeSettings:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}if(e.isString(k)&&("speed"==k||"balance"==k||"coverage"==k||"default"==k)){return this.updateRuntimeSettings(k)}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.getRuntimeSettings()})},updateRuntimeSettings:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.updateRuntimeSettings(k)})},initRuntimeSettingsWithString:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.initRuntimeSettingsWithString(k)})}}};if(e.product.bHTML5Edition){i.__addon=i.__addon||{};e.mix(i.__addon,h)}else{i.Addon=i.Addon||{};e.mix(i.Addon,h)}};if(e.DynamicLoadAddonFuns){e.DynamicLoadAddonFuns.push(d)}Dynamsoft.unloadQueue.push(function(){if(f._wasmInstance){f._wasmInstance.destroy();f._wasmInstance=false}})}); 
/*! 20210427
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 17.1
*
* Module: addon/pdf
* final js: build\addon\dynamsoft.webtwain.addon.pdf.js
*/
;var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};(function(c){var d=[Dynamsoft.DWT],b=0;for(;b<1;b++){var a=d[b];a.EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3};a.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBig2:7}}})(typeof window!=="undefined"?window:this);Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a;var d=function(f){var g=c.html5.Funs,e;if(c.env.bMac){if(Dynamsoft.dcp.b64bit){a="libDynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dylib"}else{a="libDynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dylib"}}else{if(c.env.bLinux){a="libDynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".so"}else{if(Dynamsoft.dcp.b64bit){a="DynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dll"}else{a="DynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dll"}}}if(!f._isMobileMode()){f._innerSend("GetAddOnVersion",g.makeParams("pdf",a),true,false,false)}e={PDF:{IsModuleInstalled:function(){var i=f;i._resetErr();if(i._isMobileMode()){if(Dynamsoft.pdf){return Dynamsoft.pdf.IsModuleInstalled()}return false}var h=i._innerFun("GetAddOnVersion",g.makeParams("pdf",a));return(h!="")},IsModuleInstalledAsync:function(){var h=f;h._resetErr();if(h._isMobileMode()){if(Dynamsoft.pdf){return c.Promise.resolve(Dynamsoft.pdf.IsModuleInstalled())}return c.Promise.resolve(false)}return h._innerFunV2("GetAddOnVersion",g.makeParams("pdf",a)).then(function(i){return(i!="")})},ConvertToImage:function(k,i,p,j){var o=g.replaceLocalFilename(k);var h="ConvertPDFToImage";var l=function(m){g.hideMask(h);if(p){p()}return true},q=function(m){g.hideMask(h);if(j){j()}return false};var n=f;n._resetErr();if(n._isMobileMode()){return true}g.showMask(h);n._innerSend(h,g.makeParams(o,i),true,l,q);return true},SetPassword:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfPassword=h;return true}return i._innerFun("SetPDFPassword",g.makeParams(h))},SetConvertMode:function(h){var i=f;return i._setConvertMode(h)},SetConvertModeAsync:function(h){var i=f;return i._setConvertModeAsync(h)},GetConvertMode:function(){var h=f;h._resetErr();return h._pdfConvertMode},SetResolution:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfResolution=1*h;return true}return f._innerFun("SetPDFResolution",g.makeParams(h))},SetResolutionAsync:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfResolution=1*h;return c.Promise.resolve(true)}return f._innerFunV2("SetPDFResolution",g.makeParams(h))},IsTextBasedPDF:function(l,j,i){var m=f;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("IsTextBasedPDF",i)}var k=g.replaceLocalFilename(l);var h=f._innerFun("IsTextBasedPDF",g.makeParams(k));if(m.ErrorCode==0){if(c.isFunction(j)){j(h)}}else{if(c.isFunction(i)){i(m.ErrorCode,m.ErrorString)}}return h},Write:{Setup:function(h){var j=h;if(!j){j={version:15}}if(!c.isNumber(j.version)){j.version=15}else{if(j.version>=1&&j.version<2){j.version=parseInt(10*j.version)}}if(c.isNumber(j.compression)&&(j.compression==Dynamsoft.DWT.EnumDWT_PDFCompressionType.PDF_FAX3)){j.compression=Dynamsoft.DWT.EnumDWT_PDFCompressionType.PDF_FAX4}var k=f;k._resetErr();if(k._isMobileMode()){k._pdfWriteSetting=j;return true}var i=c.stringify(j);i=c.replaceAll(i,'"','\\"');return k._innerFun("SetPDFSettings",['["',i,'"]'].join(""))}}}};f.__addon=f.__addon||{};c.mix(f.__addon,e)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(d)}});Dynamsoft.AddonReady(function(b,a){if(!b.product.bPluginEdition&&!b.product.bActiveXEdition){return}var c=function(h){var f,i,e;if(h.getSWebTwain()&&h.getSWebTwain().Addon){}else{return false}if(Dynamsoft.navInfo.bWin){var g=navigator.userAgent.toLowerCase(),d=!Dynamsoft.navInfo.bOSx64||(g.indexOf("wow64")>=0);if(d){e="DynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dll"}else{e="DynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dll"}}else{}i=h.getSWebTwain();f={PDF:{IsModuleInstalled:function(){var j=i.GetAddOnVersion("pdf",e);b.setErrorString(h);return(j!="")},IsModuleInstalledAsync:function(){var j=i.GetAddOnVersion("pdf",e);b.setErrorString(h);return b.Promise.resolve(j!="")},ConvertToImage:function(k,n,j,m){var l=i.ConvertPDFToImage(k,n);return b.wrapperRet(h,l,j,m)},SetPassword:function(j){var k=i.SetPDFPassword(j);return b.wrapperRet(h,k)},SetConvertMode:function(k){var l=k*1;if(isNaN(l)){b.Errors.ParameterCannotEmpty(h);return false}if(l==0){l=Dynamsoft.DWT.EnumDWT_ConvertMode.CM_IMAGEONLY}if(l==Dynamsoft.DWT.EnumDWT_ConvertMode.CM_RENDERALL){if(!b.License.checkProductKey(h,{PDFRasterizer:true},true)){return false}}var j=i.SetPDFConvertMode(l);return b.wrapperRet(h,j)},SetConvertModeAsync:function(j){return Promise.resolve(f.PDF.SetConvertMode(j))},GetConvertMode:function(){var j=i.GetPDFConvertMode();return b.wrapperRet(h,j)},SetResolution:function(k){var j=i.SetPDFResolution(k);return b.wrapperRet(h,j)},SetResolutionAsync:function(k){var j=i.SetPDFResolution(k);return b.Promise.resolve(b.wrapperRet(h,j))},IsTextBasedPDF:function(j){var k=i.IsTextBasedPDF(j);return b.wrapperRet(h,k)}}};h.Addon=h.Addon||{};b.mix(h.Addon,f)};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(c)}}); 
/*! 20210427
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 17.1
* 
* Module: addon/ocr
* final js: build\addon\dynamsoft.webtwain.addon.OCR.js
*/
;var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.DWT.OCRVerInName="10.0.0.0618";(function(c){var d=[Dynamsoft.DWT],b=0;for(;b<1;b++){var a=d[b];a.EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"};a.EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10};a.EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4};a.EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1}}})(typeof window!=="undefined"?window:this);Dynamsoft.DWT.OCRLanguageData_eng="4113088";Dynamsoft.DWT.OCRLanguageData_ara="1432056";Dynamsoft.DWT.OCRLanguageData_chi_sim="2469156";Dynamsoft.DWT.OCRLanguageData_chi_tra="2366642";Dynamsoft.DWT.OCRLanguageData_hin="1122751";Dynamsoft.DWT.OCRLanguageData_urd="1398718";Dynamsoft.DWT.OCRLanguageData_spa="2294433";Dynamsoft.DWT.OCRLanguageData_fra="1130365";Dynamsoft.DWT.OCRLanguageData_msa="1747801";Dynamsoft.DWT.OCRLanguageData_ind="1122661";Dynamsoft.DWT.OCRLanguageData_rus="3861738";Dynamsoft.DWT.OCRLanguageData_ben="855841";Dynamsoft.DWT.OCRLanguageData_por="1982756";Dynamsoft.DWT.OCRLanguageData_pan="497721";Dynamsoft.DWT.OCRLanguageData_deu="1525436";Dynamsoft.DWT.OCRLanguageData_jpn="2471260";Dynamsoft.DWT.OCRLanguageData_fas="431500";Dynamsoft.DWT.OCRLanguageData_swa="2167651";Dynamsoft.DWT.OCRLanguageData_jav="2982741";Dynamsoft.DWT.OCRLanguageData_tel="2769654";Dynamsoft.DWT.OCRLanguageData_tur="4550554";Dynamsoft.DWT.OCRLanguageData_kor="1677415";Dynamsoft.DWT.OCRLanguageData_mar="2118233";Dynamsoft.DWT.OCRLanguageData_tam="3237963";Dynamsoft.DWT.OCRLanguageData_vie="531275";Dynamsoft.DWT.OCRLanguageData_ita="2701314";Dynamsoft.DWT.OCRLanguageData_tha="1072600";Dynamsoft.DWT.OCRLanguageData={};Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_ENG]=Dynamsoft.DWT.OCRLanguageData_eng;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_ARA]=Dynamsoft.DWT.OCRLanguageData_ara;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_CHI_TRA]=Dynamsoft.DWT.OCRLanguageData_chi_tra;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_CHI_SIM]=Dynamsoft.DWT.OCRLanguageData_chi_sim;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_HIN]=Dynamsoft.DWT.OCRLanguageData_hin;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_URD]=Dynamsoft.DWT.OCRLanguageData_urd;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_SPA]=Dynamsoft.DWT.OCRLanguageData_spa;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_FRA]=Dynamsoft.DWT.OCRLanguageData_fra;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_MSA]=Dynamsoft.DWT.OCRLanguageData_msa;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_IND]=Dynamsoft.DWT.OCRLanguageData_ind;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_RUS]=Dynamsoft.DWT.OCRLanguageData_rus;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_BEN]=Dynamsoft.DWT.OCRLanguageData_ben;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_POR]=Dynamsoft.DWT.OCRLanguageData_por;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_PAN]=Dynamsoft.DWT.OCRLanguageData_pan;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_DEU]=Dynamsoft.DWT.OCRLanguageData_deu;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_JPN]=Dynamsoft.DWT.OCRLanguageData_jpn;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_FAS]=Dynamsoft.DWT.OCRLanguageData_fas;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_SWA]=Dynamsoft.DWT.OCRLanguageData_swa;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_JAV]=Dynamsoft.DWT.OCRLanguageData_jav;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_TEL]=Dynamsoft.DWT.OCRLanguageData_tel;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_TUR]=Dynamsoft.DWT.OCRLanguageData_tur;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_KOR]=Dynamsoft.DWT.OCRLanguageData_kor;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_MAR]=Dynamsoft.DWT.OCRLanguageData_mar;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_TAM]=Dynamsoft.DWT.OCRLanguageData_tam;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_VIE]=Dynamsoft.DWT.OCRLanguageData_vie;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_ITA]=Dynamsoft.DWT.OCRLanguageData_ita;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_THA]=Dynamsoft.DWT.OCRLanguageData_tha;(function(a){function b(){var c=this;c._text="";c._fontName="";c._fontSize="";c._left=0;c._top=0;c._right=0;c._bottom=0}b.prototype.GetText=function(){var c=this;return c._text};b.prototype.GetFontName=function(){var c=this;return c._fontName};b.prototype.GetFontSize=function(){var c=this;return c._fontSize};b.prototype.GetWordRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};a.NewWordBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._count=0;c._left=0;c._top=0;c._right=0;c._bottom=0;c._wordlist=[]}b.prototype.GetWordCount=function(){var c=this;return c._count};b.prototype.GetLineRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.prototype.GetWordContent=function(d){var f=this,c=f._wordlist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetWordContent");return""}var e=Dynamsoft.Lib.NewWordBasicResult();e._text=f._wordlist[d].text;e._fontName=f._wordlist[d].fontname;e._fontSize=f._wordlist[d].fontsize;e._left=f._wordlist[d].rect[0];e._top=f._wordlist[d].rect[1];e._right=f._wordlist[d].rect[2];e._bottom=f._wordlist[d].rect[3];return e};a.NewLineBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._linelist=[]}a.prototype.GetLineCount=function(){var c=this;return c._count};a.prototype.GetLineContent=function(e){var f=this,d=f._linelist.length;if(f._errorCode<0){return""}if(e==null||e>=d||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLineContent");return""}var c=Dynamsoft.Lib.NewLineBasicResult();c._count=f._linelist[e].words.length;c._left=f._linelist[e].rect[0];c._top=f._linelist[e].rect[1];c._right=f._linelist[e].rect[2];c._bottom=f._linelist[e].rect[3];c._wordlist=f._linelist[e].words;return c};b.NewPageBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._pagelist=[]}a.prototype.GetPageCount=function(){var c=this;return c._count};a.prototype.GetPageContent=function(d){var f=this,c=f._pagelist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageBasicResult();e._count=f._pagelist[d].lines.length;e._linelist=f._pagelist[d].lines;return e};b.NewPageSetBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(d){var c=this;c._errorCode=0;c._errorString="";c._resultlist=[];c._stwain=d}a.prototype.GetErrorCode=function(){var c=this;return c._errorCode};a.prototype.GetErrorString=function(){var c=this;return c._errorString};a.prototype.GetFormat=function(){var c=this;return c._resultlist[0].format};a.prototype.GetInput=function(){var e=this,d=e._resultlist[0].input;if(d){var c=Number(d);if(!isNaN(c)){return e._stwain._ImgManager.convertServerIdToClientIndex(c)}}return d};a.prototype.GetPageSetCount=function(){var c=this;return c._resultlist[0].pagesets.length};a.prototype.GetPageSetContent=function(e){var f=this,c=f._resultlist[0].pagesets.length;if(f._errorCode<0){return""}if(e==null||e>=c||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageSetContent");return""}var d=Dynamsoft.Lib.NewPageSetBasicResult();d._count=f._resultlist[0].pagesets[e].pages.length;d._pagelist=f._resultlist[0].pagesets[e].pages;return d};a.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};a.prototype.Save=function(c){var e=this,d=b.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",b.html5.Funs.makeParams(d))};b.NewOCRBasicResult=function(c){return new a(c)}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c.UnicodeFontName="";c.UseDetectedFont=true;c.MinFontSizeforMoreAccurateResult=0;c.OCRLanguage=Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_ENG;c.PageSetMode=Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO;c.OutputFormat=Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}a.prototype.GetUnicodeFontName=function(){var c=this;return c.UnicodeFontName};a.prototype.SetUnicodeFontName=function(c){var d=this;d.UnicodeFontName=c;return true};a.prototype.GetUseDetectedFont=function(){var c=this;return c.UseDetectedFont};a.prototype.SetUseDetectedFont=function(c){var d=this;d.UseDetectedFont=c;return true};a.prototype.GetMinFontSizeforMoreAccurateResult=function(){var c=this;return c.MinFontSizeforMoreAccurateResult};a.prototype.SetMinFontSizeforMoreAccurateResult=function(c){var d=this;d.MinFontSizeforMoreAccurateResult=c;return true};a.prototype.GetOCRLanguage=function(){var c=this;return c.OCRLanguage};a.prototype.SetOCRLanguage=function(c){var d=this;d.OCRLanguage=c;return true};a.prototype.GetPageSetMode=function(){var c=this;return c.PageSetMode};a.prototype.SetPageSetMode=function(c){var d=this;d.PageSetMode=c;return true};a.prototype.GetOutputFormat=function(){var c=this;return c.OutputFormat};a.prototype.SetOutputFormat=function(c){var d=this;d.OutputFormat=c;return true};b.NewOptions=function(){return new a()}})(Dynamsoft.Lib);Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a;function e(g){var h=c.html5.Funs;if(c.env.bMac){a="DynamicOCR_"+Dynamsoft.DWT.OCRVerInName+".dylib"}else{if(c.env.bLinux){a="DynamicOCR_"+Dynamsoft.DWT.OCRVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){a="DynamicOCRx64_"+Dynamsoft.DWT.OCRVerInName+".dll"}else{a="DynamicOCR_"+Dynamsoft.DWT.OCRVerInName+".dll"}}}if(!g._isMobileMode()){g._innerSend("GetAddOnVersion",h.makeParams("ocr",a),true,false,false)}g.__innerOCRBasicReadFunction=function(n,s,o,t,l,u,v,i,j,r,k){var q=this;if(!c.isFunction(r)){return q.__innerOCRSyncReadFunction(n,j)}else{return q.__innerOCRBasicAsyncReadFunction(n,s,o,t,l,u,v,i,j,r,k)}};g.__innerGetOCRBasicResultAsyncFunction=function(j){var i=Dynamsoft.Lib.NewOCRBasicResult(this);if(j){i._errorCode=j.exception;i._errorString=j.description;i._resultlist=j.result}return i};g.__innerOCRBasicAsyncReadFunction=function(n,t,o,u,l,v,x,i,j,s,k){var r=this;var q=function(p){if(p.exception==0){if(c.isFunction(s)){if(t!=-1){var m=r.objImageIndexManager.convertServerIdToGuid(t);if(u==1){s(m,l,v,x,i,r.__innerGetOCRBasicResultAsyncFunction(p))}else{s(m,r.__innerGetOCRBasicResultAsyncFunction(p))}}else{if(o!=""){s(o,r.__innerGetOCRBasicResultAsyncFunction(p))}else{s(r.__innerGetOCRBasicResultAsyncFunction(p))}}}if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(g)}}else{if(c.isFunction(k)){k(p.exception,p.description)}}h.hideMask(n)},w=function(m){h.hideMask(n)};h.showMask(n);r._innerSend(n,j,true,q,w);return true};g.__innerOCRSyncReadFunction=function(j,l){var n=this,k,i;k=n._innerFunRaw(j,l,false,false);i=c.NewOCRBasicResult();i._errorCode=n._errorCode;i._errorString=n._errorString;if(k&&c.isArray(k)){i._resultlist=k;i._Count=k.length;if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(g)}}return i};g.__IsOCRBasicModuleInstalled=function(){var k=g;var i=k._innerFun("GetAddOnVersion",h.makeParams("ocr",a));var j=i.split("|");if(j[0]!=""){return true}else{return false}};g.__innerBasicDownload=function(q,t,k,v,l){var o=g,s;c.cancelFrome=2;q=q.toString();var n=function(){if(c.isFunction(v)){v()}return true},w=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false};if(!c.License.checkProductKey(o,{Core:true})){return w()}if(!c.License.checkProductKey(o,{OCR:true},true)){return w()}if(t!=Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){o._innerFun("SetOCRLanguage",h.makeParams(k))}var i=o._innerFun("GetAddOnVersion",h.makeParams("ocr",a));var j=i.split("|");if(t==Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){if(j[0]!=""){n();return true}}else{var r=Dynamsoft.DWT.OCRLanguageData[k];if(r&&j[1]==r){n();return true}}if(!q||q==""){c.Errors.OCR_InvalidRemoteFilename(o);w();return false}if(h.isServerInvalid(o)){w();return false}s="get";c.showProgress(o,"Download",true);var u=function(x){var y=(x.total===0)?100:Math.round(x.loaded*100/x.total),z=[x.loaded," / ",x.total].join("");o._OnPercentDone([0,y,"","http"])},m=true;if(t==Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){o._OnPercentDone([0,-1,"Downloading OCR Module...","http"])}else{o._OnPercentDone([0,-1,"Downloading OCR Language Data...","http"])}if(!c.isFunction(v)){m=false}h.loadHttpBlob(o,s,q,m,function(p){o._OnPercentDone([0,-1,"Loading..."]);var x=100;if(t==Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE){x=101}o.__LoadImageFromBytes(p,x,"",m,n,w)},function(){c.closeProgress("Download");w()},u)}}var f=function(j){var k=[],h,g,i;if(j._ImgManager.count()<=0){return k}g=j._ImgManager.getCurrentImageIndex();h=j._ImgManager.convertClientIndexToServerId(g);i=j._ImgManager.getSelectedClientIndexArray();if(c.isArray(i)){c.each(i,function(l){var m=j._ImgManager.convertClientIndexToServerId(l);k.push(m)})}return k},d=function(i){var j=c.html5.Funs,g;var h=c.NewOptions();e(i);g={OCR:{SetUnicodeFontName:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetUnicodeFontName")}return h.SetUnicodeFontName(k)},GetUnicodeFontName:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetUnicodeFontName")}return h.GetUnicodeFontName()},SetIfUseDetectedFont:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont")}return h.SetUseDetectedFont(k)},GetIfUseDetectedFont:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont")}return h.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult")}return h.SetMinFontSizeforMoreAccurateResult(k)},GetMinFontSizeforMoreAccurateResult:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult")}return h.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetLanguage")}return h.SetOCRLanguage(k)},IsModuleInstalled:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.IsModuleInstalled")}return k.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(l){var m=i;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.OCR.SetPageSetMode")}var k=l*1;if(k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR){return h.SetPageSetMode(k)}Dynamsoft.Lib.Errors.OCR_InvalidPageSetMode(m);return false},SetOutputFormat:function(l){var m=i;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.OCR.SetOutputFormat")}var k=l*1;if(k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_TEXT||k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX){return h.SetOutputFormat(k)}Dynamsoft.Lib.Errors.OCR_InvalidOutputFormat(m);return false},Recognize:function(n,k,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.Recognize")}if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}var l=o._ImgManager.convertClientIndexToServerId(n);return o.__innerOCRBasicReadFunction("OCRRecognize",l,"",0,0,0,0,0,j.makeParams(0,l,"",0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),k,m)},RecognizeRect:function(s,l,p,r,k,q,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeRect")}if((!l&&l!=0)||(!p&&p!=0)||(!r&&r!=0)||(!k&&k!=0)){var t=Dynamsoft.Lib.NewOCRBasicResult(o);Dynamsoft.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(t,"RecognizeRect");m(t.GetErrorCode(),t.GetErrorString());return}if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}var n=o._ImgManager.convertClientIndexToServerId(s);return o.__innerOCRBasicReadFunction("OCRRecognize",n,"",1,l,p,r,k,j.makeParams(0,n,"",l,p,r,k,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),q,m)},RecognizeFile:function(l,k,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeFile")}var n=j.replaceLocalFilename(l);if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}return o.__innerOCRBasicReadFunction("OCRRecognize",-1,n,0,0,0,0,0,j.makeParams(1,-1,n,0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),k,m)},RecognizeSelectedImages:function(k,n){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeSelectedImages")}var l;if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(n)){n(o._errorCode,o._errorString)}return false}var m=f(o);l=o.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,j.makeParams(2,-1,"",0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),m.join(",")),k,n);return l},Download:function(m,k,l){var n=i;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.OCR.Download")}return n.__innerBasicDownload(m,Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll,h.GetOCRLanguage(),k,l)},DownloadLangData:function(m,k,l){var n=i;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.OCR.DownloadLangData")}return n.__innerBasicDownload(m,Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,h.GetOCRLanguage(),k,l)}}};i.__addon=i.__addon||{};c.mix(i.__addon,g)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(d)}}); 
/*! 20210427
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 17.1
* 
* Module: addon/ocrpro
* final js: build\addon\dynamsoft.webtwain.addon.ocrpro.js
*/
;var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.ProOCRVerInName="1.2.0.0806";(function(b){function a(){var c=this;c._text="";c._left=0;c._top=0;c._right=0;c._bottom=0}a.prototype.GetText=function(){var c=this;return c._text};a.prototype.GetLetterRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.NewLetterResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._letterlist=[];c._zoneCount=0;c._zoneWords=[]}a.prototype.GetLettersCount=function(){var c=this;return c._count};a.prototype.GetZoneCount=function(){var c=this;return c._zoneCount};a.prototype.GetLetterContent=function(d){var f=this,c=f._count;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLetterContent");return""}var e=Dynamsoft.Lib.NewLetterResult();e._text=f._letterlist[d].letter;e._left=f._letterlist[d].boundary[0];e._top=f._letterlist[d].boundary[1];e._right=f._letterlist[d].boundary[2];e._bottom=f._letterlist[d].boundary[3];return e};a.prototype.GetZoneContent=function(d){var e=this,c=e._zoneCount;if(e._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(e,"GetZoneContent");return""}return e._zoneWords[d]};b.NewPageResult=function(){return new a()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._input=0;c._message="";c._page=-1}b.prototype.GetInput=function(){var c=this;return c._input};b.prototype.GetMessage=function(){var c=this;return c._message};b.prototype.GetPage=function(){var c=this;return c._page};a.NewErrorInfo=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._errorCode=0;d._errorString="";d._errorlist=[];d._request="";d._ocrTotalCount=0;d._alreadyOCRCount=0;d._resultlist=[];d._resultZoneDetail=[];d._stwain=c}b.prototype.GetErrorCode=function(){var c=this;return c._errorCode};b.prototype.GetErrorString=function(){var c=this;return c._errorString};b.prototype.GetInput=function(){var e=this;if(e._request&&e._request.input){var d=e._request.input;if(d){var c=Number(d);if(!isNaN(c)){return e._stwain._ImgManager.convertServerIdToClientIndex(c)}}return d}else{return""}};b.prototype.GetErrorDetailList=function(){var g=this,c=0;if(g._errorlist){c=g._errorlist.length}var e=[];for(var d=0;d<c;d++){var f=Dynamsoft.Lib.NewErrorInfo();f._input=g._errorlist[d].input;f._message=g._errorlist[d].message;f._page=g._errorlist[d].page;e.push(f)}return e};b.prototype.GetOCRTotalCount=function(){var c=this;if(c._ocrTotalCount){return c._ocrTotalCount}else{return 0}};b.prototype.GetAlreadyOCRCount=function(){var c=this;if(c._alreadyOCRCount){return c._alreadyOCRCount}else{return 0}};b.prototype.GetPageCount=function(){var c=this;if(c._resultlist&&c._resultlist.length){return c._resultlist.length}else{return 0}};b.prototype.GetPageContent=function(d){var f=this,c=0;if(f._resultlist){c=f._resultlist.length}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageResult();if(f._resultlist){e._count=f._resultlist[d].length;e._letterlist=f._resultlist[d]}else{e._count=0}if(f._resultZoneDetail){e._zoneCount=f._resultZoneDetail[d].length;e._zoneWords=f._resultZoneDetail[d]}else{e._zoneCount=0}return e};b.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};b.prototype.Save=function(c){var e=this,d=a.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",a.html5.Funs.makeParams(d))};a.NewOCRProResult=function(c){return new b(c)}})(Dynamsoft.Lib);(function(c){var d=[Dynamsoft.DWT],b=0;for(;b<1;b++){var a=d[b];a.EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"};a.EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"};a.EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"};a.EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"};a.EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1};a.EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4};a.EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2}}})(typeof window!=="undefined"?window:this);(function(a){function b(){var c=this;c.FindText="";c.FindTextFlags=Dynamsoft.DWT.EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD;c.FindTextAction=Dynamsoft.DWT.EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}a.NewRedaction=function(){return new b()}})(Dynamsoft.Lib);Dynamsoft.WebTwain={Addon:{OCRPro:{}}};(function(a){function b(){var c=this;c.RecognitionModule="";c.Languages="eng";c.OutputFormat="";c.PDFVersion="";c.PDFAVersion="";c.LicenseChecker="";c.Redaction=Dynamsoft.Lib.NewRedaction()}a.NewSettings=function(){return new b()}})(Dynamsoft.WebTwain.Addon.OCRPro);(function(){function a(f,e,c,b){var d=this;d.left=f;d.top=e;d.right=c;d.bottom=b}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRZone=function(e,d,c,b){return new a(e,d,c,b)}})();Dynamsoft.AddonReady(function(m,h){if(!m.product.bHTML5Edition){return}var n=1000,q=function(){return n++};function o(y){var z=m.html5.Funs;y.__innerGetOCRProResultAsyncFunction=function(B){var A=Dynamsoft.Lib.NewOCRProResult(this);if(B){A._errorCode=B.code;A._errorString=B.message;A._request=B.request;A._errorlist=B.errorList;A._ocrTotalCount=B.ocrTotalCount;A._alreadyOCRCount=B.alreadyOCRCount;A._resultlist=B.resultDetail;A._resultZoneDetail=B.resultZoneDetail}return A};y.__innerIsOCRTrial=function(A,B){var D=this,C=function(){var F=false;if(D.__licenseInfo.Detail){for(var E=0;E<D.__licenseInfo.Detail.length;E++){if(D.__licenseInfo.Detail[E].EnumLicenseType=="10"){if(D.__licenseInfo.Detail[E].Trial=="TRUE"){F=true}}}}return A(F)};if(D.__licenseInfo&&D.__licenseInfo.Detail){return C()}else{return D.GetLicenseInfo(C,B)}};y.__innerOCRReadFunction=function(D,I,E,H,A,B,G,C){var F=this;return F.__innerOCRAsyncReadFunction(D,I,E,H,A,B,G,C)};y.__innerOCRAsyncReadFunction=function(D,K,E,I,A,B,H,C){var G=this;var F=function(L){if(L.code==0){if(m.isFunction(H)){if(K!=-1){if(I==1){H(K,A,G.__innerGetOCRProResultAsyncFunction(L))}else{H(K,G.__innerGetOCRProResultAsyncFunction(L))}}else{if(E!=""){H(E,G.__innerGetOCRProResultAsyncFunction(L))}else{H(G.__innerGetOCRProResultAsyncFunction(L))}}}if(m.License.isLTS()){Dynamsoft.DWT.lcvrf(y)}}else{if(m.isFunction(C)){C(L.code,L.message,G.__innerGetOCRProResultAsyncFunction(L))}}z.hideMask(D)},J=function(L){z.hideMask(D)};z.showMask(D);G._innerSend(D,B,true,F,J);return true};y.__innerGetRequestJson=function(G,I,A,K,B){var F=y,C;var E="[{";E+='"id":"'+y.clientId+'",';E+='"method":"OCRProRecognize",';E+='"dllName":"'+B+'",';E+='"productkey":"'+Dynamsoft.DWT.ProductKey+'",';if(G==Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_File){E+='"inputType":"file",'}else{E+='"inputType":"index",'}E+='"input":[';for(C=0;C<I.length;C++){if(G==Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_File){E+='"'+I[C]+'"'}else{E+=I[C]}if(C+1<I.length){E+="|"}}E+="],";E+='"settings":{';E+='"recognitionMethod": "Page"';if(A){if(A.RecognitionModule&&A.RecognitionModule.length>0){E+=',"recognitionModule":"'+A.RecognitionModule+'"'}if(A.Languages&&A.Languages.length>0){E+=',"languages":"'+A.Languages+'"'}if(A.OutputFormat&&A.OutputFormat.length>0){E+=',"outputFormat":"'+A.OutputFormat+'"'}if(A.PDFVersion&&A.PDFVersion.length>0){E+=',"pdfVersion":"'+A.PDFVersion+'"'}if(A.PDFAVersion&&A.PDFAVersion.length>0){E+=',"pdfAVersion":"'+A.PDFAVersion+'"'}if(A.Redaction&&A.Redaction.FindText&&A.Redaction.FindText.length>0){var J=parseInt(A.Redaction.FindTextFlags),H=parseInt(A.Redaction.FindTextAction);if(!isNaN(J)&&!isNaN(H)){E+=',"redaction":{';var D=A.Redaction.FindText;D=D.replace(/\"/g,'\\"');E+='"findText":"'+D+'"';E+=',"findTextFlags":'+J;E+=',"findTextAction":'+H;E+="}"}}}E+="},";E+='"zones":[';for(C=0;C<K.length;C++){E+="["+K[C].left+","+K[C].top+","+K[C].right+","+K[C].bottom+"]";if(C+1<K.length){E+=","}}E+="],";E+='"outputFile":""';E+="}]";return E};y.__LoadImageFromBytesForDownloadInner=function(E,K,O,J,L,B,H,M,D){var I=y;var A,C,G;if(E>=J){A=B*J;G=K.slice(A,L)}else{A=E*B;C=(E+1)*B;G=K.slice(A,C)}var N=function(){if(Dynamsoft.Lib.isFunction(D)){D()}};var F=function(){if(E>=J){if(Dynamsoft.Lib.isFunction(M)){M()}return}E=E+1;I.__LoadImageFromBytesForDownloadInner(E,K,O,J,L,B,H,M,D)};I.__LoadImageFromBytes(G,O,"",H,F,N,A,L)};y.__LoadImageFromBytesForDownload=function(H,B,G,D,C,J){var F=y;var A=2*1000*1000;var I=H.size||H.length;var E=parseInt(I/A);var K=I%A;if(K==0){E=E-1}F.__LoadImageFromBytesForDownloadInner(0,H,B,E,I,A,D,C,J)}}var e=function(B){var C=[],z,y,A;if(B._ImgManager.count()<=0){return C}y=B._ImgManager.getCurrentImageIndex();z=B._ImgManager.convertClientIndexToServerId(y);A=B._ImgManager.getSelectedClientIndexArray();if(m.isArray(A)){m.each(A,function(D){var E=B._ImgManager.convertClientIndexToServerId(D);C.push(E)})}return C},v=function(C,A,z,B){var y=m.NewOCRProResult(C);y._errorCode=A;y._errorString=z;var D=m.NewErrorInfo();D.input=B;D.message=y._errorString;D.page=0;y._errorlist=[D];return y},g=function(A){var B=m.html5.Funs,z,y;if(m.env.bMac){y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".dylib"}else{if(m.env.bLinux){y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){y="DynamicOCRProx64_"+Dynamsoft.ProOCRVerInName+".dll"}else{y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".dll"}}}o(A);z={OCRPro:{Settings:false,Recognize:function(N,K,D){var J=[],H,O,L,I;var G=A;G._resetErr();if(G._isMobileMode()){return G._mobileNotSupport("Addon.OCRPro.Recognize")}H=parseInt(N);if(m.isNaN(H)||!m.isNumber(H)){O=v(A,-2201,"Invalid parameter type.",N);if(m.isFunction(D)){D(O._errorCode,O._errorString,O)}else{m.Errors.WebviewerError(A,O._errorString,O._errorCode)}return false}var F=A._ImgManager.convertClientIndexToServerId(H);if(F==-1){if(m.isFunction(D)){m.Errors.IndexOutOfRange(A);O=v(A,A._errorCode,A._errorString,N);D(O._errorCode,O._errorString,O)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(D)){O=v(A,A._errorCode,A._errorString,N);D(O._errorCode,O._errorString,O)}return false}J.push(F);var M=[],C=this.Settings;var E=A.__innerGetRequestJson(Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_Index,J,C,M,y);return A.__innerIsOCRTrial(function(P){if(P||m.License.isLTS()){return A.__innerOCRReadFunction("OCRProRecognize",N,"",0,M,E,K,D)}else{return w(C.LicenseChecker,A,"OCRProRecognize",N,"",0,M,E,K,D)}},D)},RecognizeRect:function(X,P,R,G){var N=[],K,M,F,L;var S=A;S._resetErr();if(S._isMobileMode()){return S._mobileNotSupport("Addon.OCRPro.RecognizeRect")}K=parseInt(X);if(m.isNaN(K)||!m.isNumber(K)){M=v(A,-2201,"Invalid parameter type.",X);if(m.isFunction(G)){G(M._errorCode,M._errorString,M)}else{m.Errors.WebviewerError(A,M._errorString,M._errorCode)}return false}var Q=A._ImgManager.convertClientIndexToServerId(K),T=A._ImgManager.GetImageWidth(K),J=A.GetImageHeight(K);if(Q==-1){if(m.isFunction(G)){m.Errors.IndexOutOfRange(A);M=v(A,A._errorCode,A._errorString,X);G(M._errorCode,M._errorString,M)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(G)){M=v(A,A._errorCode,A._errorString,X);G(M._errorCode,M._errorString,M)}return false}if(T>0&&J>0){var V,E,U,W,I,D;for(var O=0;O<P.length;O++){V=P[O];E=V.left;U=V.top;W=V.right;I=V.bottom;if(E<0){E=0}if(U<0){U=0}if(W<0){W=0}if(I<0){I=0}if(E>W){D=E;E=W;W=D}if(U>I){D=U;U=I;I=D}if(W>T){W=T}if(I>J){I=J}V.left=E;V.top=U;V.right=W;V.bottom=I}}N.push(Q);var C=this.Settings;var H=A.__innerGetRequestJson(Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_Index,N,C,P,y);return A.__innerIsOCRTrial(function(Y){if(Y||m.License.isLTS()){return A.__innerOCRReadFunction("OCRProRecognize",X,"",1,P,H,R,G)}else{return w(C.LicenseChecker,A,"OCRProRecognize",X,"",1,P,H,R,G)}},G)},RecognizeFile:function(D,M,G){var I=A;I._resetErr();if(I._isMobileMode()){return I._mobileNotSupport("Addon.OCRPro.RecognizeFile")}var P,N,K;if(D.length==0){if(m.isFunction(G)){P=Dynamsoft.Lib.NewOCRProResult(A);P._errorCode=-2201;P._errorString="File name cannot be empty.";K=[];N=Dynamsoft.Lib.NewErrorInfo();N.input=D;N.message=P._errorString;N.page=0;K.push(N);P._errorlist=K;G(P._errorCode,P._errorString,P)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(G)){P=Dynamsoft.Lib.NewOCRProResult(A);P._errorCode=A._errorCode;P._errorString=A._errorString;K=[];N=Dynamsoft.Lib.NewErrorInfo();N.input=D;N.message=P._errorString;N.page=0;K.push(N);P._errorlist=K;G(P._errorCode,P._errorString,P)}return false}var J=B.replaceLocalFilename(D);var C=[];if(J.indexOf("|")>0){C=J.split("|")}else{if(J.indexOf(";")>0){C=J.split(";")}else{if(J.indexOf(",")>0){C=J.split(",")}}}var L=[];if(C.length>0){for(var F=0;F<C.length;F++){L.push(C[F])}}else{L.push(J)}var O=[],E=this.Settings;var H=A.__innerGetRequestJson(Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_File,L,E,O,y);A.__innerIsOCRTrial(function(Q){if(Q||m.License.isLTS()){return A.__innerOCRReadFunction("OCRProRecognize",-1,D,0,O,H,M,G)}else{return w(E.LicenseChecker,A,"OCRProRecognize",-1,D,0,O,H,M,G)}},G)},RecognizeSelectedImages:function(J,D){var G,H,K;var F=A;F._resetErr();if(F._isMobileMode()){return F._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages")}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(D)){var M=Dynamsoft.Lib.NewOCRProResult(A);M._errorCode=A._errorCode;M._errorString=A._errorString;H=[];K=Dynamsoft.Lib.NewErrorInfo();K.input="";K.message=M._errorString;K.page=0;H.push(K);M._errorlist=H;D(M._errorCode,M._errorString,M)}return false}var L=[],C=this.Settings,I=e(A),E=A.__innerGetRequestJson(Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_Index,I,C,L,y);A.__innerIsOCRTrial(function(N){if(N||m.License.isLTS()){G=A.__innerOCRReadFunction("OCRProRecognize",-1,"",0,L,E,J,D)}else{G=w(C.LicenseChecker,A,"OCRProRecognize",-1,"",0,L,E,J,D)}},D);return G},IsModuleInstalled:function(){var D=A;D._resetErr();if(D._isMobileMode()){return D._mobileNotSupport("Addon.OCRPro.IsModuleInstalled")}var C=D._innerFun("GetAddOnVersion",B.makeParams("proocr",y));return(C!="")},Download:function(G,J,C){var F=A,H;F._resetErr();if(F._isMobileMode()){return F._mobileNotSupport("Addon.OCRPro.Download")}var E=function(){if(m.isFunction(J)){J()}return true},K=function(){if(m.isFunction(C)){C(F.ErrorCode,F.ErrorString)}return false};if(!m.License.checkProductKey(F,{Core:true})){return K()}if(!m.License.checkProductKey(F,{OCRPro:true},true)){return K()}if(this.IsModuleInstalled()){E();return true}if(!G||G==""||!m.isString(G)){m.Errors.OCR_InvalidRemoteFilename(F);K();return false}if(B.isServerInvalid(F)){K();return false}H="get";m.cancelFrome=2;m.showProgress(F,"Download",true);var I=function(L){var M=(L.total===0)?100:Math.round(L.loaded*100/L.total),N=[L.loaded," / ",L.total].join("");F._OnPercentDone([0,M,"","http"])},D=true;F._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]);if(!m.isFunction(J)){D=false}return B.loadHttpBlob(F,H,G,D,function(L){F._OnPercentDone([0,-1,"Loading..."]);var M=102;F.__LoadImageFromBytesForDownload(L,M,"",D,E,K)},function(){m.closeProgress("Download");K()},I)}}};A.__addon=A.__addon||{};m.mix(A.__addon,z)};if(m.DynamicLoadAddonFuns){m.DynamicLoadAddonFuns.push(g)}function p(E,H,z,I,B,G,y,C,F,A){var D=this;D.STWAIN=H;D.AjaxFunctionUrl=E;D.FunctionName=z;D.ImageIndex=I;D.FileNames=B;D.Type=G;D.AryZone=y;D.JsonString=C;D.OnSuccess=F;D.OnFailure=A}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRReadPara=function(D,G,z,H,B,F,y,C,E,A){return new p(D,G,z,H,B,F,y,C,E,A)};function s(C,B){var D="";var E=C.responseText;if(E.length==0){var A=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError();Dynamsoft.Lib.Errors.OCR_LicenseCheckerError(A,B.AjaxFunctionUrl);E=A.responseText}D=f(E);var z=D.split(";");if(z.length==1){B.OnFailure(-1,E,Dynamsoft.Lib.NewOCRProResult())}else{if(z[0]=="true"){var y=function(G,F,H){if(Dynamsoft.Lib.isUndefined(H)){if(Dynamsoft.Lib.isUndefined(F)){B.OnSuccess(G);x(B.AjaxFunctionUrl,G.GetPageCount())}else{B.OnSuccess(G,F);x(B.AjaxFunctionUrl,F.GetPageCount())}}else{B.OnSuccess(G,F,H);x(B.AjaxFunctionUrl,H.GetPageCount())}};B.STWAIN.__innerOCRReadFunction(B.FunctionName,B.ImageIndex,B.FileNames,B.Type,B.AryZone,B.JsonString,y,B.OnFailure)}else{B.OnFailure(z[1],z[2],Dynamsoft.Lib.NewOCRProResult())}}}function w(G,J,z,K,D,I,y,E,H,A){var B=G;var F="DTW_AjaxMethod=CheckLicense&Productkey="+j(Dynamsoft.DWT.ProductKey);var C=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRReadPara(G,J,z,K,D,I,y,E,H,A);return d(B,F,s,C)}function x(A,B){var z=A;var y="DTW_AjaxMethod=WriteOCRCount&OCRCount="+j(B+"");d(z,y,b,null)}function b(z,y){}function a(){var y=this;y.responseText="";y.errorString=""}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError=function(){return new a()};Dynamsoft.Lib.mix(Dynamsoft.Lib.Errors,{OCR_LicenseCheckerEmpty:function(z){var A=-2601;var y="LicenseChecker cannot be empty.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_LicenseCheckerNotConnect:function(z){var A=-2602;var y="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_AccessDenied:function(z){var A=-2603;var y="Access denied.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_LicenseCheckerError:function(z,B){var A=-2604;var y="Error occured in '"+B+"'.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_HTTPError:function(z,A){var B=-2605;var y="HTTP Error "+A+".";z.errorString=y;z.responseText=j("false;"+B+";"+y+";")},OCR_LicenseCheckerUnauthorized:function(z,B){var A=-2606;var y="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+B+"'.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},__last:false});function i(){var y=null,A=window;try{y=new A.ActiveXObject("Msxml2.XMLHTTP")}catch(z){try{y=new A.ActiveXObject("Microsoft.XMLHTTP")}catch(z){y=new XMLHttpRequest()}}return y}function d(z,y,D,C){var A=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError();if(z==""){Dynamsoft.Lib.Errors.OCR_LicenseCheckerEmpty(A);alert(A.errorString);D(A,C);return false}var B=i();B.open("POST",z,true);B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");B.onreadystatechange=function(){if(B.readyState==4){if(B.status==200){if(D!=null&&typeof(D)=="function"){D(B,C)}}else{if(B.status==401){Dynamsoft.Lib.Errors.OCR_LicenseCheckerUnauthorized(A,C.AjaxFunctionUrl);D(A,C);return false}else{if(B.status==404){Dynamsoft.Lib.Errors.OCR_LicenseCheckerNotConnect(A);alert(A.errorString);D(A,C);return false}else{if(B.status==403){Dynamsoft.Lib.Errors.OCR_AccessDenied(A);D(A,C);return false}else{Dynamsoft.Lib.Errors.OCR_HTTPError(A,B.status);D(A,C);return false}}}}}};if(B&&y){B.send(y)}return true}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var r=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function k(E){var A,C,y;var D,B,z;y=E.length;C=0;A="";while(C<y){D=E.charCodeAt(C++)&255;if(C==y){A+=c.charAt(D>>2);A+=c.charAt((D&3)<<4);A+="==";break}B=E.charCodeAt(C++);if(C==y){A+=c.charAt(D>>2);A+=c.charAt(((D&3)<<4)|((B&240)>>4));A+=c.charAt((B&15)<<2);A+="=";break}z=E.charCodeAt(C++);A+=c.charAt(D>>2);A+=c.charAt(((D&3)<<4)|((B&240)>>4));A+=c.charAt(((B&15)<<2)|((z&192)>>6));A+=c.charAt(z&63)}return A}function t(F){var E,D,B,z;var C,y,A;y=F.length;C=0;A="";while(C<y){do{E=r[F.charCodeAt(C++)&255]}while(C<y&&E==-1);if(E==-1){break}do{D=r[F.charCodeAt(C++)&255]}while(C<y&&D==-1);if(D==-1){break}A+=String.fromCharCode((E<<2)|((D&48)>>4));do{B=F.charCodeAt(C++)&255;if(B==61){return A}B=r[B]}while(C<y&&B==-1);if(B==-1){break}A+=String.fromCharCode(((D&15)<<4)|((B&60)>>2));do{z=F.charCodeAt(C++)&255;if(z==61){return A}z=r[z]}while(C<y&&z==-1);if(z==-1){break}A+=String.fromCharCode(((B&3)<<6)|z)}return A}function u(B){var z,A,y,C;z="";y=B.length;for(A=0;A<y;A++){C=B.charCodeAt(A);if((C>=1)&&(C<=127)){z+=B.charAt(A)}else{if(C>2047){z+=String.fromCharCode(224|((C>>12)&15));z+=String.fromCharCode(128|((C>>6)&63));z+=String.fromCharCode(128|((C>>0)&63))}else{z+=String.fromCharCode(192|((C>>6)&31));z+=String.fromCharCode(128|((C>>0)&63))}}}return z}function l(D){var z,B,y,E;var C,A;z="";y=D.length;B=0;while(B<y){E=D.charCodeAt(B++);switch(E>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:z+=D.charAt(B-1);break;case 12:case 13:C=D.charCodeAt(B++);z+=String.fromCharCode(((E&31)<<6)|(C&63));break;case 14:C=D.charCodeAt(B++);A=D.charCodeAt(B++);z+=String.fromCharCode(((E&15)<<12)|((C&63)<<6)|((A&63)<<0));break}}return z}function j(y){return k(u(y))}function f(y){return l(t(y))}}); 
/*! 20210427
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 17.1
*
* Module: addon/webcam
* final js: build\addon\dynamsoft.webtwain.addon.webcam.js
*/
;var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.WebcamVerForActiveX="15.0.0.0625";Dynamsoft.WebcamVerInName="15.0.0.0625";(function(c){var d=[Dynamsoft.DWT],b=0;for(;b<1;b++){var a=d[b];a.EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5};a.EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9};a.EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6}}})(typeof window!=="undefined"?window:this);(function(a){a.WebcamErrors={InvalidParameter:function(b){b._errorCode=-10001;b._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(b){b._errorCode=-10002;b._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(b){b._errorCode=-10003;b._errorString="To get the url for the current frame, the video must be playing."},Success:function(b){b._errorCode=0;b._errorString="Successful."}}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetCount=function(){var c=this;a.WebcamErrors.Success(c._stwain);return c._Count-1};b.prototype.Get=function(d){var e=this,c=e._resultlist.length;if(d>=c-1||d<0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,"Get");return""}a.WebcamErrors.Success(e._stwain);return e._resultlist[d]};b.prototype.GetCurrent=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"GetCurrent");return""}a.WebcamErrors.Success(d._stwain);return d._resultlist[c-1]};a.NewWebcamValue=function(c){return new b(c)}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}a.WebcamErrors.Success(d._stwain);return d._resultlist[0].current};b.prototype.GetIfAuto=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return false}a.WebcamErrors.Success(d._stwain);return d._resultlist[0].auto=="true"?true:false};a.NewWebcamSetting=function(c){return new b(c)}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetMinValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}return d._resultlist[0].min};b.prototype.GetMaxValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}return d._resultlist[0].max};b.prototype.GetSteppingDelta=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return 0}return d._resultlist[0].step};b.prototype.GetDefaultValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return 0}return d._resultlist[0].defaultValue};b.prototype.GetIfAuto=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return false}return d._resultlist[0].auto=="true"?true:false};a.NewWebcamMoreSetting=function(c){return new b(c)}})(Dynamsoft.Lib);Dynamsoft.AddonReady(function(b,a){var c=function(d){var e=b.html5.Funs;d._innerSetWebcamValue=function(g){var h=d,f;f=b.NewWebcamValue(d);if(g&&b.isArray(g)){f._resultlist=g;f._Count=g.length}return f};d._innerSetWebcamSetting=function(g){var h=d,f;f=b.NewWebcamSetting(d);if(g&&b.isArray(g)){f._resultlist=g;f._Count=g.length}return f};d._innerSetWebcamMoreSetting=function(g){var h=d,f;f=b.NewWebcamMoreSetting(d);if(g&&b.isArray(g)){f._resultlist=g;f._Count=g.length}return f}};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(c)}b.Addon_Events.push("OnFrameCaptured");b.Addon_Events.push("OnCaptureSuccess");b.Addon_Events.push("OnCaptureError")});Dynamsoft.AddonReady(function(b,a){if(!b.product.bHTML5Edition){return}function c(f){var g=b.html5.Funs;f._innerWebcamValueFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamValue(i)};f._innerWebcamSettingFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamSetting(i)};f._innerWebcamMoreSettingFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamMoreSetting(i)};f._OnCaptureSuccess=function(h){var i=this;if(Dynamsoft.Lib.isFunction(i.__OnCaptureSuccess)){i.__OnCaptureSuccess()}};f._OnCaptureError=function(i){var k=this,h=i[1],j=i[2];if(Dynamsoft.Lib.isFunction(k.__OnCaptureError)){k.__OnCaptureError(h,j)}};f._OnFrameCaptured=function(h){var k=this,j=Dynamsoft.Lib;if(!k.__videoPause){var i=k.__videoQuality;if(!i){i=60}if(k.__videoDest){k.__videoDest.UpdateVideoContainer(k.GetImageURL(-1,-1,-1,0,i))}}if(j.isFunction(k.__OnFrameCaptured)){k.__OnFrameCaptured(h)}}}function d(g,h){var f=h.length-1;while(f>=0&&h[f].p1>=g.p1){if(h[f].p1==g.p1&&h[f].p2<g.p2){break}h[f+1]=h[f];f--}h[f+1]=g}var e=function(h){var i=b.html5.Funs,g,f;if(b.env.bMac){f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".dylib"}else{if(b.env.bLinux){f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){f="DynamicWebcamx64_"+Dynamsoft.WebcamVerInName+".dll"}else{f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".dll"}}}if(!h._isMobileMode()){h._innerSend("GetAddOnVersion",i.makeParams("webcam",f),true,false,false)}c(h);g={Webcam:{IsModuleInstalled:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.IsModuleInstalled")}var j=k._innerFun("GetAddOnVersion",i.makeParams("webcam",f));return(j!="")},Download:function(n,q,j){var m=h,o;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.Webcam.Download")}Dynamsoft.Lib.cancelFrome=2;var l=function(){if(Dynamsoft.Lib.isFunction(q)){q()}return true},r=function(){if(Dynamsoft.Lib.isFunction(j)){j(h.ErrorCode,h.ErrorString)}return false};if(!b.License.checkProductKey(h,{Webcam:true},true)){return r()}if(this.IsModuleInstalled()){return l()}if(!n||n==""){Dynamsoft.Lib.Errors.Webcam_InvalidRemoteFilename(m);return r()}if(i.isServerInvalid(m)){r();return false}o="get";Dynamsoft.Lib.showProgress(m,"Download",true);var p=function(s){var t=(s.total===0)?100:Math.round(s.loaded*100/s.total),u=[s.loaded," / ",s.total].join("");m._OnPercentDone([0,t,"","http"])},k=true;m._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]);if(!Dynamsoft.Lib.isFunction(q)){k=false}return i.loadHttpBlob(m,o,n,k,function(s){m._OnPercentDone([0,-1,"Loading..."]);var u=100;m.__LoadImageFromBytes(s,u,"",k,l,r)},function(){Dynamsoft.Lib.closeProgress("Download");r()},p)},GetSourceList:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetSourceList")}if(!b.License.checkProductKey(k,{Webcam:true},true)){return[]}var j=k._innerFunRaw("GetWebcamSourceList");if(k.ErrorCode==0){j.splice(j.length-1,1)}return j},SelectSource:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SelectSource")}if(!b.License.checkProductKey(k,{Webcam:true},true)){return false}return k._innerFun("SelectWebcam",i.makeParams(j))},CloseSource:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.CloseSource")}this._clear();return j._innerFun("StopCapture")},GetFramePartURL:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFramePartURL")}if(!this._isPlaying()){b.WebcamErrors.VideoNotPlayingWhenGetURL(j);return""}return j.GetImageURL(-1,-1,-1,!0,j.__videoQuality)},GetFrameURL:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFrameURL")}if(!this._isPlaying()){b.WebcamErrors.VideoNotPlayingWhenGetURL(j);return""}return j.GetImageURL(-1,-1,-1,0,j.__videoQuality)},PlayVideo:function(r,u,l,s,m){var n=h;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.Webcam.PlayVideo")}var k,p=Dynamsoft.Lib,q=60,j=false,o=this,t=function(){o._clear();if(Dynamsoft.Lib.isFunction(m)){m(h.ErrorCode,h.ErrorString)}return false};if(!r){Dynamsoft.Lib.Errors.ParameterCannotEmpty(h);return t()}if(!b.License.checkProductKey(h,{Webcam:true},true)){return t()}n.__videoDest=r;n.__videoDest.ShowVideoContainer(true);if(p.isFunction(l)){h.__OnFrameCaptured=l}if(h.__videoPause){h.__videoPause=false;if(b.isFunction(s)){s()}return true}h.__videoPause=false;if(u){q=1*u;if(q<1){q=60}h.__videoQuality=q;if(j){if(b.isFunction(s)){s()}return true}}else{h.__videoQuality=q}return h._innerSend("PlayVideo",i.makeParams(true),true,s,t)},PauseVideo:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.PauseVideo")}if(this._isPlaying()){j.__videoPause=true}return true},_clear:function(){var k=h;var j=Dynamsoft.Lib;k.__videoPause=false;k.__OnFrameCaptured=false;k.__videoQuality=60;if(k.__videoDest){k.__videoDest.ShowVideoContainer(false)}k.__videoDest=false},_isPlaying:function(){var j=h;return j.GetIfShowVideoContainer()},StopVideo:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.StopVideo")}this._clear();var j=k._innerFun("PlayVideo",i.makeParams(false,0));k._innerFun("StopCapture");return j},CaptureImage:function(n,k){var p=h;p._resetErr();if(p._isMobileMode()){p._mobileNotSupport("Addon.Webcam.CaptureImage");if(b.isFunction(k)){k(p._errorCode,p._errorString)}return false}if(!b.License.checkProductKey(p,{Webcam:true},true)){if(b.isFunction(k)){k(p._errorCode,p._errorString)}return false}var j="CaptureImage",o=function(){i.hideMask(j);if(b.isFunction(n)){setTimeout(n,0)}if(b.License.isLTS()){Dynamsoft.DWT.lcvrf(h)}},l=function(){i.hideMask(j);if(b.isFunction(k)){k(p._errorCode,p._errorString)}};i.showMask(j);p.__OnCaptureError=l;return p._innerSend(j,i.makeParams(false),true,function(){i.hideMask();if(p.ErrorCode==0){o()}else{l(p.ErrorCode,p.ErrorString)}},l)},GetMediaType:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetMediaType")}return j._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetMediaType")}if(!b.isString(j)){b.Errors.InvalidValue(k);return false}return k._innerFun("SetMediaType",i.makeParams(j))},GetResolution:function(){var m=h;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.Webcam.GetResolution")}var n=m._innerWebcamValueFunction("GetResolution");if(n&&n._resultlist){var l,j,r=n._resultlist,k=[],s=[],p;if(r.length>0){p=r[r.length-1]}if(p==""&&r.length>0){p=r[0]}for(l=0;l<r.length-1;l++){j=r[l];var q=j.toLowerCase().split("x");d({value:j,p1:parseInt(q[0]),p2:parseInt(q[1])},k)}for(l=0;l<k.length;l++){j=k[l].value;s.push(j)}if(p){s.push(p)}n._resultlist=s;k=null;s=null}return n},SetResolution:function(k){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetResolution")}if(!b.isNumber(k)&&!b.isString(k)){b.Errors.InvalidValue(l);return false}var j=l._innerFun("SetResolution",i.makeParams(k));return j},GetFrameRate:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFrameRate")}return j._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetFrameRate")}if(!b.isNumber(j)){b.Errors.InvalidValue(k);return false}return h._innerFun("SetFrameRate",i.makeParams(j))},GetVideoPropertySetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting")}return k._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",i.makeParams(j))},GetVideoPropertyMoreSetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting")}return k._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",i.makeParams(j))},SetVideoPropertySetting:function(k,j,m){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting")}return l._innerFun("SetWebcamVideoPropertySetting",i.makeParams(k,j,m))},SetVideoRotateMode:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetVideoRotateMode")}return k._innerFun("SetVideoRotateMode",i.makeParams(j))},GetCameraControlPropertySetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting")}return k._innerWebcamSettingFunction("GetWebcamCameraControlSetting",i.makeParams(j))},GetCameraControlPropertyMoreSetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting")}return k._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",i.makeParams(j))},SetCameraControlPropertySetting:function(k,j,m){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting")}return l._innerFun("SetWebcamCameraControlPropertySetting",i.makeParams(k,j,m))}}};h.__addon=h.__addon||{};b.mix(h.__addon,g)};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(e)}});Dynamsoft.AddonReady(function(c,b){if(!c.product.bPluginEdition&&!c.product.bActiveXEdition){return}var a;function d(g){g._innerRead=function(i){var k=this,h;try{h=Dynamsoft.Lib.parse(i)}catch(j){}return h.result};g._innerWebcamValueFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamValue(h)};g._innerWebcamSettingFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamSetting(h)};g._innerWebcamMoreSettingFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamMoreSetting(h)}}function e(h,i){var g=i.length-1;while(g>=0&&i[g].p1>=h.p1){if(i[g].p1==h.p1&&i[g].p2<h.p2){break}i[g+1]=i[g];g--}i[g+1]=h}var f=function(k){var l,j;if(k.getSWebTwain()&&k.getSWebTwain().Addon){}else{return false}if(Dynamsoft.navInfo.bWin){var i=navigator.userAgent.toLowerCase(),g=!Dynamsoft.navInfo.bOSx64||(i.indexOf("wow64")>=0);if(g){a="DynamicWebcam_"+Dynamsoft.WebcamVerForActiveX+".dll"}else{a="DynamicWebcamx64_"+Dynamsoft.WebcamVerForActiveX+".dll"}}else{}l=k.getSWebTwain();try{l.GetAddOnVersion("webcam",a)}catch(h){}d(k);j={Webcam:{IsModuleInstalled:function(){var m=l.GetAddOnVersion("webcam",a);c.setErrorString(k);return(m!="")},Download:function(r,m,p){var n=function(){if(Dynamsoft.Lib.isFunction(m)){m()}return true},q=function(){if(Dynamsoft.Lib.isFunction(p)){p(k.ErrorCode,k.ErrorString)}return false};if(!c.License.checkProductKey(k,{Webcam:true},true)){return q()}if(this.IsModuleInstalled()){return n()}if(!r||r==""){Dynamsoft.Lib.Errors.Webcam_InvalidRemoteFilename(k);return q()}var o=l.DownloadAddon(r);return c.wrapperRet(k,o,n,q)},GetSourceList:function(){if(!c.License.checkProductKey(k,{Webcam:true},true)){return[]}var n=l.GetWebcamSourceList(),m=[];c.setErrorString(k);if(k.ErrorCode==0){m=k._innerRead(n);if(m&&m.length>1){m.splice(m.length-1,1)}}return m},SelectSource:function(m){if(!c.License.checkProductKey(k,{Webcam:true},true)){return false}var n=l.SelectWebcam(m);c.setErrorString(k);return n},CloseSource:function(){k._playVideoDWT=null;var m=l.StopCapture();c.setErrorString(k);return m},GetFramePartURL:function(){if(!this._isPlaying()){c.WebcamErrors.VideoNotPlayingWhenGetURL(k);return""}var m=l.GetDIB(-1);c.setErrorString(k);return m},GetFrameURL:function(){return""},PlayVideo:function(s,r,p,m,n){var o=function(){k._playVideoDWT=null;if(Dynamsoft.Lib.isFunction(n)){n(k.ErrorCode,k.ErrorString)}return false};if(!s||!s.getSWebTwain()){Dynamsoft.Lib.WebcamErrors.InvalidParameter(k);return o()}if(!c.License.checkProductKey(k,{Webcam:true},true)){return o()}var q=s.getSWebTwain().CurrentHWND;if(!q){c.WebcamErrors.InvalidParameter(k);return o()}k._playVideoDWT=s;setTimeout(function(){var t=l.RunWebcamCmd("PlayVideo",q,null,null,p);c.wrapperRet(k,t,m,o)},0);return true},PauseVideo:function(){return true},StopVideo:function(){k._playVideoDWT=null;var m=l.RunWebcamCmd("StopVideo",0,null,null,null);c.setErrorString(k);l.StopCapture();return m},CaptureImage:function(p,n){var q=function(){if(c.isFunction(p)){setTimeout(p,0)}if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(k)}},o=function(){if(Dynamsoft.Lib.isFunction(n)){n(k.ErrorCode,k.ErrorString)}return false};if(!c.License.checkProductKey(k,{Webcam:true},true)){return o()}var m=l.RunWebcamCmd("Capture",0,q,o,null);c.setErrorString(k);return m},GetMediaType:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetMediaType());c.setErrorString(k);return m},SetMediaType:function(n){if(!c.isString(n)){c.Errors.InvalidValue(k);return false}var m=l.SetMediaType(n);c.setErrorString(k);return m},GetResolution:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetResolution());c.setErrorString(k);if(m&&m._resultlist){var n,t,s=m._resultlist,r=[],u=[],q;if(s.length>0){q=s[s.length-1]}for(n=0;n<s.length-1;n++){t=s[n];var p=t.toLowerCase().split("x");e({value:t,p1:parseInt(p[0]),p2:parseInt(p[1])},r)}for(n=0;n<r.length;n++){t=r[n].value;u.push(t)}if(q){u.push(q)}m._resultlist=u;r=null;u=null}return m},SetResolution:function(n){if(!c.isNumber(n)&&!c.isString(n)){c.Errors.InvalidValue(k);return false}var m=l.SetResolution(n);c.setErrorString(k);return m},GetFrameRate:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetFrameRate());c.setErrorString(k);return m},SetFrameRate:function(n){if(!c.isNumber(n)){c.Errors.InvalidValue(k);return false}var m=l.SetFrameRate(n);c.setErrorString(k);return m},GetVideoPropertySetting:function(n){var m=l.GetWebcamVideoPropertySetting(n);c.setErrorString(k);return k._innerWebcamSettingFunctionPlugin(m)},GetVideoPropertyMoreSetting:function(n){var m=l.GetWebcamVideoPropertyMoreSetting(n);c.setErrorString(k);return k._innerWebcamMoreSettingFunctionPlugin(m)},SetVideoPropertySetting:function(o,n,p){var m=l.SetWebcamVideoPropertySetting(o,n,p);c.setErrorString(k);return m},SetVideoRotateMode:function(n){var m=l.SetVideoRotateMode(n);c.setErrorString(k);return m},GetCameraControlPropertySetting:function(n){var m=l.GetWebcamCameraControlSetting(n);c.setErrorString(k);return k._innerWebcamSettingFunctionPlugin(m)},GetCameraControlPropertyMoreSetting:function(n){var m=l.GetWebcamCameraControlMoreSetting(n);c.setErrorString(k);return k._innerWebcamMoreSettingFunctionPlugin(m)},SetCameraControlPropertySetting:function(o,n,p){var m=l.SetWebcamCameraControlPropertySetting(o,n,p);c.setErrorString(k);return m},_isPlaying:function(){if(k._playVideoDWT){return true}return false}}};k.Addon=k.Addon||{};c.mix(k.Addon,j)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(f)}}); 
/*! 20210427
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 17.1
*
* Module: addon/camera
* final js: build\addon\dynamsoft.webtwain.addon.camera.js
*/
var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(fn){Dynamsoft.aryAddonReadyFun.push(fn);}; // jshint ignore: line
Dynamsoft.CameraVerInName = '17.1.0.0525';
Dynamsoft.AddonReady(function(DL, nil){if(!DL.product.bHTML5Edition)return; 
/*! Date: 03/05/2021 13:31:11 */!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={ErrorMessage:{OK:{code:0,message:"Successful"},HTTPS_REQUIRED:{code:-4201,message:"HTTPS is required for accessing cameras."},MEDIADEVICES_NOT_IMPL:{code:-4202,message:"The current browser has not implemented the MediaDevices interface."},GETUSERMEDIA_NOT_IMPL:{code:-4203,message:"The current browser has not implemented the getUserMedia interface."},NO_MEMORY:{code:-4204,message:"Not enough memory for this operation."},NO_CAMERA_SELECTED:{code:-4205,message:"No camera is selected."},VIDEO_ELEMENT_REQUIRED:{code:-4206,message:"A Video element is required for this operation."},CAMERA_PLUG_OUT:{code:-4207,message:"The camera is not plugged in."},CAMERA_NOT_OPEN:{code:-4208,message:"The camera is not open."},CAMERA_SETTINGS_NOT_SUPPORT:{code:-4209,message:"The current browser does not support camera settings."},FAILED_GET_USERMEDIA:{code:-4210,message:"Failed to get camera input."},SOURCE_NOT_FOUND:{code:-4211,message:"The camera source can not be found."},VIDEO_NOT_PLAY:{code:-4214,message:"The video must be playing for the capture operation to work."},VIDEO_NOT_STOP:{code:-4215,message:"The video is already playing. Please stop the video before attempting to play it again to a different container."},NO_CAMERA:{code:-4216,message:"No camera is found."}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraViewer=void 0;var r=i(2);Object.defineProperty(t,"CameraViewer",{enumerable:!0,get:function(){return r.CameraViewer}}),i(11),window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.CameraViewer=r.CameraViewer},function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r["return"]:o[0]?r["throw"]||((n=r["return"])&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,n++)r[n]=o[a];return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraViewer=void 0;var c=i(3),l=i(4),u=i(6),h=i(7),d=s(i(8)),f=s(i(0))["default"].ErrorMessage,p=s(i(9)),v=i(10),m=function(){function e(e,t,i){this._renderManager=null,this._isDrawing=!1,this._iResolution=null,this._camera=null,this._tempCanvas=document.createElement("canvas"),this.errorCode=0,this.errorMessage="Successful.",this._cropArea=[],this._logs="",this._videoContainer=null,this._video=null,this._resultImg=null,this._controlBox=null,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._btnClose=null,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this.areaFillStyle="rgba(254,180,32,0.3)",this.lineStrokeStyle="rgba(254,180,32,0.9)",this._selectedBoxColor="#fff",this._selectedPoints=[],this.lineWidth=1,this.displayMode="contain",this._polyfill(),this._pub=new h.PublishSubscribe,this._renderManager=new p["default"],this._iResolution={deviceId:t,resolution:i},e&&this.bindUI(document.getElementById(e),!1),this._cameraManageInit(),this._bindEvents()}return e.prototype._bindEvents=function(){var e=this;[["onLog",this._onLog],["onResolutionChanged",this.show],["onCameraChanged",this._cameraChangedHandler],["onCameraSelChanged",this._onCameraSelChanged],["onPlayed",this.webcamResize],["onThrowError",this._throwError],["onParaTypeError",this._throwParaTypeError],["onParaValueError",this._throwParaValueError]].forEach((function(t){e.on(t[0],t[1])})),window.addEventListener("resize",(function(){e.webcamResize()}))},e.prototype._cameraChangedHandler=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this._camera&&c.CameraManager.cameraExist(this._camera._cameraInfo,e)?(this.emit("onLog","camera plug out."),[4,this.closeSource()]):[3,2];case 1:t.sent(),this._pub.emit("video-error",f.CAMERA_PLUG_OUT),t.label=2;case 2:return[2]}}))}))},e.prototype._onLog=function(e){this._logs+=e+"\n"},e.prototype._cameraManageInit=function(){this._cameraManager=new c.CameraManager(this._pub)},e.prototype.destroy=function(){this.off("onLog"),this.unbindUI(),this._closeCamera(),this._cameraManager.destroy(),this.unbindRealTimeRender()},e.prototype.getVideoElement=function(){return this._video},e.prototype._throwError=function(e){if(e.code&&e.message)throw this.errorCode=e.code,this.errorMessage=e.message,u.CameraException.cameraException(e)},e.prototype._throwParaTypeError=function(e,t){throw this.errorCode=-4212,this.errorMessage="Argument of type '"+e+"' is not assignable to parameter of type '"+t+"'.",u.CameraException.cameraException({code:this.errorCode,message:this.errorMessage})},e.prototype._throwParaValueError=function(e,t){throw this.errorCode=-4213,this.errorMessage="The argument '"+e+"' is not valid for the parameter '"+t+"'",u.CameraException.cameraException({code:this.errorCode,message:this.errorMessage})},e.prototype.show=function(){this._checkCamera(),this._videoContainer&&"none"==this._videoContainer.style.display&&(this._videoContainer.style.display=""),this.webcamResize()},e.prototype.hidden=function(){return!!this._videoContainer&&"none"==this._videoContainer.style.display},e.prototype.hide=function(){this._videoContainer&&(this._videoContainer.style.display="none")},e.prototype.playDirectly=function(e,t,i,r){return n(this,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:return n={},this._camera?this._camera.playing()?[3,2]:[4,this._camera.play(t,i)]:[3,4];case 1:return n=o.sent(),[3,3];case 2:n=this._camera._curResolution,o.label=3;case 3:return[3,9];case 4:return(a=this._cameraManager._allCamerasInfo).length?[3,6]:[4,this._cameraManager.getAllCamerasInfo()];case 5:a=o.sent(),this._cameraManager._allCamerasInfo=a,o.label=6;case 6:return[4,this._cameraManager.requestCamera()];case 7:return o.sent(),this._camera=new l.Camera(null,this._video,a,e,this._pub),[4,this._camera.play(t,i)];case 8:n=o.sent(),o.label=9;case 9:return this.setDisplayMode(r),[2,n]}}))}))},e.prototype.playing=function(){return!!this._camera&&this._camera.playing()},e.prototype.paused=function(){return!!this._camera&&this._camera.paused()},e.prototype._closeCamera=function(){this._camera&&(this._camera.destroy(),this._camera=null)},e.prototype._checkCamera=function(){return!!this._camera&&void 0},e.prototype.bindResolutionsSelector=function(e){return!!this._camera&&this._camera.bindResolutionsSelector(e)},e.prototype.unbindResolutionsSelector=function(){return!!this._camera&&this._camera.unbindResolutionsSelector()},e.prototype._polyfill=function(){if(!HTMLCanvasElement.prototype.toBlob)try{Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var r=atob(this.toDataURL(t,i).split(",")[1]),n=r.length,o=new Uint8Array(n),a=0;a<n;a++)o[a]=r.charCodeAt(a);e(new Blob([o],{type:t||"image/png"}))}})}catch(e){}},e.prototype.webcamResize=function(){if(this._video&&this._cvsDrawArea){var e=this._cvsDrawArea;this.calPixelRatio()&&(e.width=e.clientWidth,e.height=e.clientHeight,this.emit("webcamResize"))}},e.prototype.calPixelRatio=function(){if(this._video&&this._cvsDrawArea){var e=this._video,t=e.videoWidth,i=e.videoHeight,r=e.clientWidth,n=e.clientHeight;if(0===r||0===n)return 0;var o=0;return"cover"===this.displayMode?o=Math.max(r/t,n/i):"contain"===this.displayMode&&(o=Math.min(r/t,n/i)),o===Infinity&&(o=0),this.pixelRatio=o,o}},e.prototype._clearCanvasRect=function(){this._cvsDrawArea&&this._cvsDrawArea.getContext("2d").clearRect(0,0,this._cvsDrawArea.width,this._cvsDrawArea.height)},e.prototype._clearRegionsults=function(){this._cvsDrawArea&&(this._cvsDrawArea.width=this._cvsDrawArea.height=0)},e.prototype.bindCameraSelector=function(e){return this._cameraManager.bindCameraSelector(e)},e.prototype.unbindCameraSelector=function(){return this._cameraManager.unbindCameraSelector()},e.prototype._onCameraSelChanged=function(e){var t=this;this.setCurrentCamera(e).then((function(e){t.hide(),e.getResolutions()}))},e.prototype.setCurrentCamera=function(e,t){return n(this,void 0,void 0,(function(){var i;return o(this,(function(r){switch(r.label){case 0:return this._closeCamera(),(i=this._cameraManager._allCamerasInfo)?[3,2]:[4,this._cameraManager.getAllCamerasInfo()];case 1:i=r.sent(),r.label=2;case 2:return[4,this._cameraManager.requestCamera()];case 3:return r.sent(),this._camera=new l.Camera(e,this._video,i,t,this._pub),[2,this._camera]}}))}))},e.prototype.getCurrentCamera=function(){return this._camera},e.prototype.on=function(e,t){this._pub.on(e,t.bind(this))},e.prototype.emit=function(e){for(var t,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(t=this._pub).emit.apply(t,a([e],i))},e.prototype.off=function(e,t){this._pub.off(e,t)},e.prototype.bindUI=function(e,t,i){var r=this;if((void 0===t&&(t=!0),this.unbindUI(),this._licenseCallback)&&0!==this._licenseCallback().errorCode)return!1;if(i!==undefined&&(this.displayMode=i),e){if(""===e.style.position&&(e.style.position="relative"),this._videoContainer=document.createElement("div"),this._videoContainer.setAttribute("class","dynamsoft-cvs-container"),e.appendChild(this._videoContainer),this._video=document.createElement("video"),this._video.setAttribute("class","dynamsoft-video"),this._video.setAttribute("playsinline","true"),this._video.style["object-fit"]=this.displayMode,this._videoContainer.appendChild(this._video),this._camera&&(this._camera._videoEle=this._video),this._cvsDrawArea=document.createElement("canvas"),this._cvsDrawArea.setAttribute("class","dynamsoft-cvs-drawarea"),this._videoContainer.appendChild(this._cvsDrawArea),this._resultImg=document.createElement("img"),this._resultImg.setAttribute("class","dynamsoft-resultImg"),this._videoContainer.appendChild(this._resultImg),t){var n=document.createElement("div");n.setAttribute("class","dynamsoft-cvs-exit dcs-ui-icon dcs-ui-exitMutiple"),this._videoContainer.appendChild(n),n&&n.addEventListener("click",(function(){r.emit("onExitCamera")}))}return this.bindControlBox(),!0}},e.prototype.unbindUI=function(){if(this._clearRegionsults(),this._videoContainer){var e=this._videoContainer.parentNode;e&&e.removeChild(this._videoContainer)}this._videoContainer=null,this._video=null,this._cvsDrawArea=null,this._divScanLight=null,this._divScanLight=null,this._btnClose=null},e.prototype.getImageData=function(){var e=document.createElement("canvas");return this._drawRealCameraArea(e),e.getContext("2d").getImageData(0,0,e.width,e.height)},e.prototype.getBlobData=function(e){if(e=e||this._tempCanvas,this._video)return new Promise((function(t){e.toBlob((function(e){t(e)}))}))},e.prototype.setDisplayMode=function(e){e!==this.displayMode&&(this.displayMode=e,this._video.style.objectFit=e,this.webcamResize())},e.prototype._drawRealCameraArea=function(e){var t=this._video;if(t){var i=e.getContext("2d");if("contain"===this.displayMode)e.width=t.videoWidth,e.height=t.videoHeight,i.drawImage(this._video,0,0);else{var r=this.pixelRatio,n=t.clientWidth/r,o=t.clientHeight/r;e.width=n,e.height=o;var a=Math.max((this._video.videoWidth-n)/2,0),s=Math.max((this._video.videoHeight-o)/2,0);i.drawImage(this._video,a,s,n,o,0,0,n,o)}}},e.prototype.emptyTempCanvas=function(){var e=this._tempCanvas;e.width=0,e.height=0},e.prototype.bindRealTimeRender=function(e){var t=this;if(this.unbindRealTimeRender(),!this._areaDetectFn)return!1;var i=1e3/e;this._isDrawing=!0;return function r(e){t.freeCropTimer=setTimeout((function(){return n(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this._isDrawing?[4,this.drawDetectArea()]:[3,2];case 1:t.sent(),r(e),t.label=2;case 2:return[2]}}))}))}),e)}(i),!0},e.prototype.unbindRealTimeRender=function(){clearTimeout(this.freeCropTimer),this._isDrawing=!1,this.webcamResize()},e.prototype.bindAreaDetectFunction=function(e){return!!d["default"].isFunction(e)&&(this._areaDetectFn=e,!0)},e.prototype.bindPerspectiveFunction=function(e){return!!d["default"].isFunction(e)&&(this._perspectiveCallback=e,!0)},e.prototype.bindLicenseCallback=function(e){return!!d["default"].isFunction(e)&&(this._licenseCallback=e,!0)},e.prototype.detectArea=function(){return n(this,void 0,void 0,(function(){var e,t;return o(this,(function(i){switch(i.label){case 0:return e=this.getImageData(),t=[],this._areaDetectFn?[4,this._areaDetectFn(e.data,e.width,e.height)]:[3,2];case 1:t=i.sent(),e=null,i.label=2;case 2:return[2,t.slice(0)]}}))}))},e.prototype.perspective=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(i){return Array.isArray(e)?(t=this.getImageData(),this._perspectiveCallback?[2,this._perspectiveCallback.call(this,t.data,e,t.width,t.height)]:[2]):[2,!1]}))}))},e.prototype.drawDetectArea=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,this.detectArea()];case 1:return e=t.sent(),Array.isArray(e)&&e.length&&this._isDrawing?(this._drawArea(e),[2,!0]):[2,!1]}}))}))},e.prototype.drawSelectedArea=function(e){if(this._selectedPoints=e.slice(),this._cvsDrawArea){var t=this._cvsDrawArea.getContext("2d");this._clearCanvasRect(),this._processPoints(e);for(var i=0;i<8;i+=2){var r=e[i],n=e[i+1],o=e[(i+2)%8],a=e[(i+3)%8];this._drawLine([r,n],[o,a],t),this._drawPoint([r,n],t)}}},e.prototype.setSelectedBoxColor=function(e,t){this._selectedBoxColor=e,t&&this.drawSelectedArea(this._selectedPoints)},e.prototype._drawPoint=function(e,t){var i=e[0],r=e[1];t.save(),t.strokeStyle=this._selectedBoxColor,t.strokeRect(i-4,r-4,8,8),t.restore()},e.prototype._drawLine=function(e,t,i){var r=e[0],n=e[1],o=t[0],a=t[1];i.save(),i.strokeStyle=this._selectedBoxColor,i.beginPath(),i.moveTo(r,n),i.lineTo(o,a),i.stroke(),i.restore()},e.prototype._drawArea=function(e){var t=this._cvsDrawArea;if(t){var i=t.getContext("2d");this._clearCanvasRect(),this._processPoints(e),i.strokeStyle=this.areaFillStyle,i.fillStyle=this.areaFillStyle,i.lineWidth=5,i.clearRect(0,0,t.width,t.height),i.save(),i.beginPath(),i.moveTo(e[0],e[1]);for(var r=2;r<9;r+=2){var n=e[r%8],o=e[(r+1)%8];i.lineTo(n,o)}return i.stroke(),i.closePath(),i.restore(),!0}},e.prototype._processPoints=function(e){for(var t,i=0;i+1<e.length;i+=2){var r=e[i],n=e[i+1];t=this.getDrawPosition(r,n),e[i]=t[0],e[i+1]=t[1]}return e},e.prototype.getDrawPosition=function(e,t){var i=this._cvsDrawArea,r=this.pixelRatio,n=0,o=0;return"contain"===this.displayMode?(n=(i.width-this._video.videoWidth*r)/2,o=(i.height-this._video.videoHeight*r)/2):(n=(i.width-this._video.clientWidth)/2,o=(i.height-this._video.clientHeight)/2),[e=n+e*r,t=o+t*r]},e.prototype.getRealPosition=function(e,t){var i=this.pixelRatio,r=this._cvsDrawArea,n=0,o=0;return"contain"===this.displayMode?(n=(this._video.videoWidth*i-r.width)/2,o=(this._video.videoHeight*i-r.height)/2):(n=(this._video.clientWidth-r.width)/2,o=(this._video.clientHeight-r.height)/2),[e=(n+e)/i,t=(o+t)/i]},e.prototype.bindControlBox=function(e,t){void 0===t&&(t={});var i={blank1:{className:"camera-empty"},captureBtn:{className:"camera-main",iconClass:"dcs-ui-capture",onButtonClick:"onCapture"},detectBtn:{className:"camera-right",iconClass:"dcs-ui-detect",onButtonClick:"onDetect"}};v.mergeJSON(t,i),this.bindCustomBox(e,i)},e.prototype.bindConfirmBox=function(e){this.bindCustomBox(e,{remakeBtn:{className:"camera-left",iconClass:"dcs-ui-previous",onButtonClick:"onRemake"},blank1:{className:"camera-editEmpty"},perspectiveBtn:{className:"camera-right",iconClass:"dcs-ui-next",onButtonClick:"onPerspective"}})},e.prototype.bindSaveBox=function(e,t){void 0===t&&(t={});var i={backBtn:{className:"camera-around",iconClass:"dcs-ui-previous",onButtonClick:"onBack"},blank1:{className:"camera-saveEmpty"},remakeBtn:{className:"camera-around",iconClass:"dcs-ui-delete",onButtonClick:"onRemake"},confirmBtn:{className:"camera-around",iconClass:"dcs-ui-save",onButtonClick:"onConfirm"}};v.mergeJSON(t,i),this.bindCustomBox(e,i)},e.prototype.bindCustomBox=function(e,t,i){var r,n=this;if(!(r=v.isString(e)?document.getElementById(e):e||this._controlBox))return!1;t=t||{};var o={};d["default"].mergeJSON(t,o);var a="<div id='controlwrapper' class='controlwrapper "+d["default"].rValue(i)+"'>";for(var s in o){var c=o[s];c=c||{},a+="<div id='"+s+"' class='"+s+"  "+(d["default"].rValue(c.className)?d["default"].rValue(c.className):"camera-empty")+"'>",a+="<div class='dcs-ui-icon "+d["default"].rValue(c.iconClass)+"'></div>",a+="<text>"+d["default"].rValue(c.text)+"</text>",a+="</div>"}a+="</div>",r.innerHTML=a;var l=function(e){var t=o[e];t=t||{};var i=d["default"].rValue(t.onButtonClick),r=document.getElementById(e);if(!r||!i)return"continue";r.addEventListener("click",(function(){n.emit(i)})),r.addEventListener("touchstart",(function(e){}))};for(var s in o)l(s);document.body.addEventListener("touchstart",(function(){}))},e.prototype.showResultImage=function(e){this._resultImg&&(this._resultImg.style.display="block",this._resultImg.src=e,this._video.style.display="none")},e.prototype.hideResultImage=function(){this._resultImg&&(this._resultImg.style.display="none",this._resultImg.src="",this._video.style.display="")},e.prototype.getSourceList=function(){return this._cameraManager.getAllCamerasInfo()},e.prototype.selectSource=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return d["default"].isString(e)||this._throwParaTypeError(r(e),"string"),this._cameraManager._allCamerasInfo&&0!==this._cameraManager._allCamerasInfo.length?[3,2]:[4,this._cameraManager.getAllCamerasInfo()];case 1:i.sent(),i.label=2;case 2:return[4,this._cameraManager.requestCamera()];case 3:return i.sent(),(t=this._cameraManager.selectCamera(e))||this.emit("onThrowError",f.SOURCE_NOT_FOUND),[4,this.setCurrentCamera(t)];case 4:return i.sent(),[2,t]}}))}))},e.prototype.getCurrentSource=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){return this._camera?[2,this._camera._cameraInfo]:[2,null]}))}))},e.prototype.closeSource=function(){var e=this;return new Promise((function(t,i){if(e._camera){var r=e._camera._cameraInfo;e._camera.destroy(),e._camera=null,t(r)}else e.emit("onThrowError",f.NO_CAMERA_SELECTED)}))},e.prototype.play=function(e,t,i,a){return n(this,void 0,void 0,(function(){var n;return o(this,(function(o){return n=a===undefined?this.displayMode:a?"cover":"contain",e!==undefined&&(d["default"].isElement(e)?this._videoContainer&&e===this._videoContainer.parentNode||(this.playing()&&this.emit("onThrowError",f.VIDEO_NOT_STOP),this.bindUI(e,!1,n)):this._throwParaTypeError(r(e),"HTMLElement")),[2,this.playDirectly(null,t,i,n)]}))}))},e.prototype.capture=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){return this._camera||this.emit("onThrowError",f.NO_CAMERA_SELECTED),this._video?(this.playing()||this._throwError(f.VIDEO_NOT_PLAY),e=document.createElement("canvas"),this._drawRealCameraArea(e),this.calPixelRatio(),[2,new Promise((function(t,i){e.toBlob((function(i){e.width=0,e.height=0,t(i)}))}))]):(this.emit("onThrowError",f.VIDEO_ELEMENT_REQUIRED),[2])}))}))},e.prototype.pause=function(){this._camera&&this._camera.pause()},e.prototype.stop=function(){this._camera&&(this._clearCanvasRect(),this._camera.stop())},e.prototype.resume=function(){this._camera&&this._camera.resume()},e.prototype.getStatus=function(){return this._camera?this.playing()?this.paused()?"paused":"playing":"stopped":""},e.prototype.getResolution=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this._camera?[4,this._camera.getResolutions()]:[3,2];case 1:return[2,e.sent()];case 2:this.emit("onThrowError",f.NO_CAMERA_SELECTED),e.label=3;case 3:return[2]}}))}))},e.prototype.setResolution=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){return this._camera?(d["default"].isObject(e)||this._throwParaTypeError(r(e),"Object"),e.width>0&&e.height>0||this._throwParaValueError(JSON.stringify(e),"resolution"),this.playing()?[2,this._camera.setResolution(e.width,e.height)]:(this._camera._curResolution=e,[2,e])):(this.emit("onThrowError",f.NO_CAMERA_SELECTED),[2])}))}))},e.prototype.getCurrentResolution=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){return this._camera?[2,this._camera._curResolution]:(this.emit("onThrowError",f.NO_CAMERA_SELECTED),[2])}))}))},e}();t.CameraViewer=m},function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r["return"]:o[0]?r["throw"]||((n=r["return"])&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraManager=void 0;var s=a(i(0))["default"].ErrorMessage,c=function(){function e(e){var t=this;this._cameraPermission=!1,this._allCamerasInfo=[],this._selCameraInfo=null,this._cameraSelector=null,this._onCameraSelChange=function(){var e=!0;t._selCameraInfo&&t._cameraSelector.options.length>0&&t._selCameraInfo.deviceId==t._cameraSelector.value&&(e=!1);var i={},r=t._cameraSelector.selectedOptions;e&&(r&&r.length>0?(i.deviceId=r[0].value,i.label=r[0].innerText):i=t._allCamerasInfo[0]),i.deviceId?t._selCameraInfo=i:i=null,e&&t._fireCameraSelChanged(i)},this._pub=e,this._trackCameraDeviceChanged(),this._bindEvents()}return e.prototype.requestCamera=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this._checkNavigator(),0===this._allCamerasInfo.length&&this._pub.emit("onThrowError",s.NO_CAMERA),[4,this._checkAllowCamera()];case 1:return e.sent(),[2]}}))}))},e.prototype._checkNavigator=function(){navigator.mediaDevices===undefined&&(location.origin.startsWith("https://")?this._pub.emit("onThrowError",s.MEDIADEVICES_NOT_IMPL):this._pub.emit("onThrowError",s.HTTPS_REQUIRED)),navigator.mediaDevices.getUserMedia===undefined&&this._pub.emit("onThrowError",s.GETUSERMEDIA_NOT_IMPL)},e.prototype._checkAllowCamera=function(){return n(this,void 0,void 0,(function(){var e,t;return o(this,(function(i){switch(i.label){case 0:if(this._cameraPermission)return[2,!1];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}})];case 2:return(e=i.sent())&&(e.getTracks().forEach((function(e){e.stop()})),this._cameraPermission=!0),[3,4];case 3:return t=i.sent(),this._pub.emit("onThrowError",t),[3,4];case 4:return[2]}}))}))},e.prototype._bindEvents=function(){this._pub.on("onCameraSelChange",this._onCameraSelChange.bind(this))},e.prototype._trackCameraDeviceChanged=function(){var e=this;if(navigator.mediaDevices==undefined)return!1;navigator.mediaDevices.ondevicechange=function(t){e._fireCameraChanged(e._allCamerasInfo)}},e.prototype.getAllCamerasInfo=function(){return n(this,void 0,void 0,(function(){var e,t,i,r,n,a,s,c,l;return o(this,(function(o){switch(o.label){case 0:return this._checkNavigator(),[4,this._getVideoDevices()];case 1:if(e=o.sent(),t=!0,e.length==this._allCamerasInfo.length){for(i=0,r=0,n=e;r<n.length;r++)for(a=n[r],s=0,c=this._allCamerasInfo;s<c.length;s++)if((l=c[s]).deviceId==a.deviceId&&l.label==a.label){i++;break}t=i!=e.length}return t&&(this._allCamerasInfo=e,this._renderSelCameraInfo()),[2,Promise.resolve(this._allCamerasInfo)]}}))}))},e.prototype._getVideoDevices=function(){return n(this,void 0,void 0,(function(){var e,t,i,r,n,a,s,c,l;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._checkAllowCamera()];case 1:return o.sent(),[3,3];case 2:return o.sent(),[3,3];case 3:return[4,navigator.mediaDevices.enumerateDevices()];case 4:for(e=o.sent(),t=[],i=0,r=0;r<e.length;r++)if("videoinput"==(n=e[r]).kind){for(a=!1,s=0,c=t;s<c.length;s++)if(c[s].deviceId===n.deviceId){a=!0;break}a||((l={}).deviceId=n.deviceId,l.label=!n.label||/^camera\s[0-9]+$/.test(n.label)?"camera "+i++:n.label,t.push(l))}return[2,t]}}))}))},e.prototype._fireCameraChanged=function(e){this._pub.emit("onCameraChanged",e)},e.prototype.destroy=function(){this.unbindCameraSelector(),this._pub.off("onCameraChanged"),this._selCameraInfo=null},e.prototype._fireCameraSelChanged=function(e){this._pub.emit("onCameraSelChanged",e)},e.prototype._renderSelCameraInfo=function(){var e={},t=null;if(this._cameraSelector){for(var i in e.deviceId=this._cameraSelector.value,e.label=this._cameraSelector.innerText,this._cameraSelector.innerHTML="",this._allCamerasInfo){var r=this._allCamerasInfo[i],n=document.createElement("option");n.value=r.deviceId,n.innerText=r.label,this._cameraSelector.append(n),e.deviceId==r.deviceId&&(t=n)}var o=this._cameraSelector.options;if(!t&&this._selCameraInfo&&o.length)for(var a=0;a<o.length;a++)if(this._selCameraInfo.deviceId==o.item(a).value){t=o.item(a);break}t&&(this._cameraSelector.value=t.value),(e.deviceId||0!=this._allCamerasInfo.length)&&this._onCameraSelChange()}},e.prototype.bindCameraSelector=function(e){var t=this;this.unbindCameraSelector(),this._cameraSelector=e||document.createElement("select"),this._cameraSelector&&(this._cameraSelector.addEventListener("change",(function(){t._pub.emit("onCameraSelChange")})),this._renderSelCameraInfo())},e.prototype.unbindCameraSelector=function(){this._cameraSelector&&(this._cameraSelector.removeEventListener("change",this._onCameraSelChange),this._cameraSelector.innerHTML="",this._cameraSelector=null)},e.cameraExist=function(e,t){for(var i=0,r=t;i<r.length;i++){var n=r[i];if(n.deviceId==e.deviceId&&n.label==e.label)return!0}return!1},e.prototype.selectCamera=function(e){if(!e)return null;var t={};if(this._cameraSelector){var i=void 0,n=void 0;if("object"===r(e)){var o=e;o&&(i=o.deviceId,n=o.label)}"string"==typeof e&&(n=i=e);for(var a=this._cameraSelector.options,s=0;s<a.length;s++){if(i==(c=a[s]).value)return t.deviceId=c.value,t.label=c.innerText,this._cameraSelector.value=c.value,t}for(s=0;s<a.length;s++){var c;if(n==(c=a.item(s)).innerText)return t.deviceId=c.value,t.label=c.innerText,this._cameraSelector.value=c.value,t}}if(this._allCamerasInfo)for(var l={deviceId:"",label:""},u=0;u<this._allCamerasInfo.length;u++){var h=this._allCamerasInfo[u];if(e===h.deviceId)return l.deviceId=h.deviceId,l.label=h.label,l}return null},e}();t.CameraManager=c},function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r["return"]:o[0]?r["throw"]||((n=r["return"])&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;var a=o(i(0)),s=i(5),c=a["default"].ErrorMessage,l=function(){function e(e,t,i,r,n){var o=this;this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this._browserInfo={chrome:!1,firefox:!1,safari:!1,mobile:!1},this._isPlugOut=!1,this._resolutionSelector=null,this._cameraInfo=null,this._allCameras=null,this._videoTrack=null,this._allResolutions=[],this._curResolution=null,this._videoEle=null,this._onResolutionSelChange=function(){var e=!0;if(o._curResolution&&o._resolutionSelector.options.length>0&&JSON.stringify(o._curResolution)==o._resolutionSelector.value&&(e=!1),o._resolutionSelector.options.length>0){var t={};if(o._resolutionSelector&&-1!=o._resolutionSelector.selectedIndex){var i=o._resolutionSelector.options[o._resolutionSelector.selectedIndex];t=JSON.parse(i.value)}o.play(t.width,t.height).then((function(){e&&o._fireResolutionChanged(t.width,t.height,t.type)}))["catch"]((function(e){o._fireLog("Play video failed: "+(e.message||e))}))}},this._pub=n,this._initBrowserInfo(r),e?this._cameraInfo=e:(this._cameraInfo={},this._cameraInfo.deviceId="",this._cameraInfo.label=""),t&&(this._videoEle=t),this._allCameras=i,this._pub.on("onResolutionSelChange",this._onResolutionSelChange.bind(this))}return e.prototype.setPlugout=function(){this._isPlugOut=!0},e.prototype._checkPlugout=function(){this._isPlugOut&&this._pub.emit("video-error",c.CAMERA_PLUG_OUT)},e.prototype._initBrowserInfo=function(e){this._browserInfo=e||this._getBrowser()},e.prototype._getBrowser=function(){var e=new s.BrowserDetect;return{safari:"Safari"==e.browser,chrome:"Chrome"==e.browser,firefox:"Firefox"==e.browser,mobile:e.detectmobilebrowser()}},e.prototype._fireResolutionChanged=function(e,t,i){var r={};r.width=e,r.height=t,r.type=i,this._pub.emit("onResolutionChanged",r)},e.prototype._renderSelResolution=function(){var e={},t=null;if(this._resolutionSelector){var i=this._resolutionSelector.options[this._resolutionSelector.selectedIndex];i&&(e=JSON.parse(i.value),this._resolutionSelector.innerHTML="")}if(this._resolutionSelector){for(var r=0,n=this._allResolutions;r<n.length;r++){var o=n[r],a=document.createElement("option");a.value=JSON.stringify(o),a.innerText=o.width+" x "+o.height,this._resolutionSelector.append(a),e.width==o.width&&e.height==o.height&&(t=a)}var s=this._resolutionSelector.options;if(!t&&this._curResolution&&s.length)for(var c=JSON.stringify(this._curResolution),l=0;l<s.length;l++)if(c==s.item(l).value){t=s.item(l);break}t&&(this._resolutionSelector.value=t.value),(e.width||0!=this._allResolutions.length)&&this._onResolutionSelChange()}},e.prototype.bindResolutionsSelector=function(e){var t=this;this.unbindResolutionsSelector(),this._checkPlugout(),this._resolutionSelector=e||document.createElement("select"),this._resolutionSelector&&(this._resolutionSelector.addEventListener("change",(function(){t._pub.emit("onResolutionSelChange")})),this._renderSelResolution())},e.prototype.unbindResolutionsSelector=function(){this._resolutionSelector&&this._resolutionSelector.removeEventListener("change",this._onResolutionSelChange),this._resolutionSelector=null},e.prototype._getResolution=function(e,t,i,o){return r(this,void 0,void 0,(function(){var r,a,s,l,u,h,d,f;return n(this,(function(n){switch(n.label){case 0:this._checkPlugout(),r={},a=null,s=null,n.label=1;case 1:return n.trys.push([1,5,,6]),this._fireLog("request constraints: width="+t+", height="+i),[4,this._getMediaStream(this._getMediaTrackConstraints(e,t,i,o,!1))];case 2:return(a=n.sent())?(document&&document.createElement?s=document.createElement("video"):this._videoEle?s=this._videoEle:this._pub.emit("onThrowError",c.VIDEO_ELEMENT_REQUIRED),l="exact"==o,!this._browserInfo.firefox&&l?[3,4]:(s.srcObject=a,[4,s.play()])):[2,r];case 3:n.sent(),n.label=4;case 4:return r.type=o,l?(u=a.getVideoTracks()[0],(h=u.getConstraints())&&h.width?(r.height=h.height.exact?h.height.exact:h.height,r.width=h.width.exact?h.width.exact:h.width,this._fireLog("Result constraints: "+JSON.stringify(h))):(d=u.getSettings(),r.height=d.height.exact?d.height.exact:d.height,r.width=d.width.exact?d.width.exact:d.width,this._fireLog("Result constraints(getSettings): "+JSON.stringify(d)))):(r.height=s.videoHeight,r.width=s.videoWidth),[3,6];case 5:return f=n.sent(),this._fireLog("_getResolution exception:"+(f.message||f)),[3,6];case 6:return a?(this._browserInfo.firefox&&(s.srcObject=null),[4,a.getTracks().forEach((function(e){e.stop()}))]):[3,8];case 7:n.sent(),a=null,s=null,n.label=8;case 8:return[2,r]}}))}))},e.prototype.getResolutions=function(){return r(this,void 0,void 0,(function(){var e,t,i,r,o,a,s,c,l,u,h,d,f;return n(this,(function(n){switch(n.label){case 0:if(this._allResolutions.length>0)return[2,this._allResolutions];e=[],t=[{width:320,height:240,type:"exact"},{width:640,height:480,type:"exact"},{width:640,height:360,type:"exact"},{width:800,height:600,type:"exact"},{width:1280,height:720,type:"exact"},{width:1920,height:1080,type:"exact"},{width:2560,height:1440,type:"exact"},{width:3840,height:2160,type:"exact"}],i=null,this._allResolutions=[],r=0,o=t,n.label=1;case 1:return r<o.length?(a=o[r],s=a.height,c=a.width,l=a.type,this._cameraInfo?[4,this._getResolution(this._cameraInfo.deviceId,c,s,l)]:[2,null]):[3,6];case 2:return(i=n.sent())&&i.height&&(!i||!i.height||i.height==s&&i.width==c||i.height==c&&i.width==s)?[3,4]:(this._fireLog("getResolutions try to get ideal resolution: "+c+" x "+s),this._cameraInfo?[4,this._getResolution(this._cameraInfo.deviceId,c,s,"ideal")]:[2,null]);case 3:i=n.sent(),n.label=4;case 4:if(i&&i.height){for(u=!1,h=0,d=e;h<d.length;h++)if((f=d[h]).height==i.height&&f.width==i.width){u=!0;break}if(!u){if(this._fireLog("got resolution: "+JSON.stringify(i)),delete i.type,e.push(i),null===this._allResolutions)return[2,null];this._allResolutions.push(i)}}n.label=5;case 5:return r++,[3,1];case 6:return this._renderSelResolution(),[2,e]}}))}))},e.prototype.setResolution=function(e,t){return r(this,void 0,void 0,(function(){return n(this,(function(i){switch(i.label){case 0:return this._checkPlugout(),[4,this.play(e,t)];case 1:return[2,i.sent()]}}))}))},e.prototype.getVideoSettings=function(){return JSON.parse(JSON.stringify(this.videoSettings))},e.prototype.updateVideoSettings=function(e){return this.videoSettings=JSON.parse(JSON.stringify(e)),this.play()},e.prototype.destroy=function(){this.unbindResolutionsSelector(),this.stop(),this._cameraInfo=null,this._allCameras=null,this._allResolutions=null,this._videoEle=null},e.prototype.stop=function(){this._videoEle&&this._videoEle.srcObject&&(this._fireLog("======stop video========"),this._videoEle.srcObject.getTracks().forEach((function(e){e.stop()})),this._videoEle.srcObject=null,this._videoTrack=null)},e.prototype.pause=function(){this._videoEle&&this._videoEle.pause()},e.prototype.resume=function(){this._videoEle&&this.paused()&&this.playing()&&this._videoEle.play()},e.prototype.paused=function(){return!!this._videoEle&&this._videoEle.paused},e.prototype.playing=function(){if(this._isPlugOut)return!1;if(this._videoEle&&this._videoEle.srcObject)try{var e=this._videoEle.srcObject;if(e){var t=e.getVideoTracks();if(t&&0!=t.length)return!0}}catch(i){this._fireLog("get video status: "+(i.message||i))}return!1},e.prototype._getMediaTrackConstraints=function(e,t,i,r,n){var o=JSON.parse(JSON.stringify(this.videoSettings));"boolean"==typeof o.video&&(o.video={});var a="exact"==r;if(t&&(o.video.width=a?{exact:t}:{ideal:t}),i&&(o.video.height=a?{exact:i}:{ideal:i}),n&&(t&&(o.video.width={ideal:t}),i&&(o.video.height={ideal:i})),this._browserInfo.mobile&&this._browserInfo.safari&&n&&(o.video.width=o.video.height,delete o.video.height),e)delete o.video.facingMode,o.video.deviceId={exact:e};else if(o.video.facingMode){var s=o.video.facingMode;if(s instanceof Array&&s.length&&(s=s[0]),"environment"===(s=s.exact||s.ideal||s)&&this._allCameras){for(var c=0,l=this._allCameras;c<l.length;c++){var u=l[c],h=u.label.toLowerCase();if(h&&-1!=h.indexOf("facing back")&&/camera[0-9]?\s0,/.test(h)){delete o.video.facingMode,o.video.deviceId={ideal:u.deviceId};break}}o.bFmEnvironment=!!o.video.facingMode}}return o},e.prototype._getMediaStream=function(e,t){return r(this,void 0,void 0,(function(){var i;return n(this,(function(r){switch(r.label){case 0:this._fireLog("======try getUserMedia========"),"boolean"==typeof e.video&&(e.video={}),this._fireLog("ask "+JSON.stringify(e.video.width)+"x"+JSON.stringify(e.video.height)),r.label=1;case 1:return r.trys.push([1,3,,4]),this._fireLog(e),[4,navigator.mediaDevices.getUserMedia(e)];case 2:return[2,r.sent()];case 3:if(i=r.sent(),this._fireLog(i),i.name&&"OverconstrainedError"==i.name){if(t)throw i;return[2,null]}return this._fireLog("======try getUserMedia again========"),this._browserInfo.mobile&&this._browserInfo.safari?(delete e.video.width,delete e.video.height):e.bFmEnvironment?(delete e.video.facingMode,this._allCameras&&this._allCameras.length&&(e.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):e.video=!0,this._fireLog(e),[2,navigator.mediaDevices.getUserMedia(e)];case 4:return[2]}}))}))},e.prototype._supportedResolution=function(e,t){for(var i=0,r=this._allResolutions;i<r.length;i++){var n=r[i];if(n.height==t&&n.width==e)return n.type}return"ideal"},e.prototype.play=function(e,t){return r(this,void 0,void 0,(function(){var i,r,o,a,s,l,u,h,d;return n(this,(function(n){switch(n.label){case 0:this._videoEle||this._pub.emit("onThrowError",c.VIDEO_ELEMENT_REQUIRED),"number"==typeof e&&e>0&&"number"==typeof t&&t>0||(e=this._curResolution?this._curResolution.width:1280,t=this._curResolution?this._curResolution.height:720),i=this._supportedResolution(e,t),this._checkPlugout(),this.stop(),this._fireLog("======before video========"),this.videoSettings=this._getMediaTrackConstraints(this._cameraInfo.deviceId,e,t,i,!0),r=this.videoSettings,o=null,a={},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._getMediaStream(r,!0)];case 2:return(o=n.sent())&&(s=o.getVideoTracks()).length&&(this._videoTrack=s[0],a=this._videoTrack.getSettings(),l={deviceId:a.deviceId,label:this._videoTrack.label},this._cameraInfo=l),[3,4];case 3:return u=n.sent(),this._fireLog("======get user media exception========"+(u.message||u)),"NotAllowedError"===u.name||"Permission denied"===u.message?this._pub.emit("onThrowError",c.CAMERA_NOT_OPEN):this._pub.emit("onThrowError",c.FAILED_GET_USERMEDIA),[3,4];case 4:this._videoEle.srcObject=o,this._fireLog("======play video========"),n.label=5;case 5:return n.trys.push([5,7,,10]),[4,this._videoEle.play()];case 6:return n.sent(),[3,10];case 7:return h=n.sent(),this._fireLog("======play video exception========"+(h.message||h)),[4,new Promise((function(e){setTimeout(e,1e3)}))];case 8:return n.sent(),[4,this._videoEle.play()];case 9:return n.sent(),[3,10];case 10:return this._fireLog("======after played video========"),d={width:this._videoEle.videoWidth,height:this._videoEle.videoHeight},a.width&&a.height&&(a.width===e&&a.height===t||a.width===t&&a.height===e)&&(d.width=e,d.height=t),this._curResolution=d,this._pub.emit("onPlayed"),[2,d]}}))}))},e.prototype.getCapabilities=function(){return this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}},e.prototype.getCameraSettings=function(){return this._videoTrack.getSettings()},e.prototype.getConstraints=function(){return this._videoTrack.getConstraints()},e.prototype._throwNotSupportException=function(){this._pub.emit("onThrowError",c.CAMERA_SETTINGS_NOT_SUPPORT)},e.prototype._fireLog=function(e){this._pub.emit("onLog",e)},e.prototype.applyConstraints=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this._videoTrack.applyConstraints||this._throwNotSupportException(),[4,this._videoTrack.applyConstraints(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.turnOnTorch=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return this.getCapabilities().torch?[4,this._videoTrack.applyConstraints({advanced:[{torch:!0}]})]:[3,2];case 1:return[2,e.sent()];case 2:this._throwNotSupportException(),e.label=3;case 3:return[2]}}))}))},e.prototype.turnOffTorch=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return this.getCapabilities().torch?[4,this._videoTrack.applyConstraints({advanced:[{torch:!1}]})]:[3,2];case 1:return[2,e.sent()];case 2:this._throwNotSupportException(),e.label=3;case 3:return[2]}}))}))},e.prototype.setColorTemperature=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(i){switch(i.label){case 0:return(t=this.getCapabilities().colorTemperature)||this._throwNotSupportException(),e<t.min?e=t.min:e>t.max&&(e=t.max),[4,this._videoTrack.applyConstraints({advanced:[{colorTemperature:e}]})];case 1:return[2,i.sent()]}}))}))},e.prototype.setExposureCompensation=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(i){switch(i.label){case 0:return(t=this.getCapabilities().exposureCompensation)||this._throwNotSupportException(),e<t.min?e=t.min:e>t.max&&(e=t.max),[4,this._videoTrack.applyConstraints({advanced:[{exposureCompensation:e}]})];case 1:return[2,i.sent()]}}))}))},e.prototype.setZoom=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(i){switch(i.label){case 0:return(t=this.getCapabilities().zoom)||this._throwNotSupportException(),e<t.min?e=t.min:e>t.max&&(e=t.max),[4,this._videoTrack.applyConstraints({advanced:[{zoom:e}]})];case 1:return[2,i.sent()]}}))}))},e.prototype.setFrameRate=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(i){switch(i.label){case 0:return(t=this.getCapabilities().frameRate)||this._throwNotSupportException(),e<t.min?e=t.min:e>t.max&&(e=t.max),[4,this._videoTrack.applyConstraints({width:{ideal:Math.max(this._videoEle.videoWidth,this._videoEle.videoHeight)},frameRate:e})];case 1:return[2,i.sent()]}}))}))},e}();t.Camera=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserDetect=void 0;var r=function(){function e(){this.dataBrowser=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],this.dataOS=[{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],this.init()}return e.prototype.init=function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS"},e.prototype.searchString=function(e){for(var t=0;t<e.length;t++){var i=e[t].string,r=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}},e.prototype.searchVersion=function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},e.prototype.detectmobilebrowser=function(){var e=window,t=navigator.userAgent||navigator.vendor||e.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|android|playbook|silk|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))return!0;if(null!==t.match(/Macintosh/i)){var i=document.createElement("canvas");if(null!==i){var r=i.getContext("webgl")||i.getContext("experimental-webgl");if(r){var n=r.getExtension("WEBGL_debug_renderer_info");if(n)if(-1!==r.getParameter(n.UNMASKED_RENDERER_WEBGL).indexOf("Apple"))return!0}}}return!1},e}();t.BrowserDetect=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraException=void 0;var r=function(){function e(){}return e.cameraException=function(e,t){var i={};return(i=new Error(t||e.message)).code=e.code,i},e}();t.CameraException=r},function(e,t,i){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,n++)r[n]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishSubscribe=void 0;var n=function(){function e(){this._events=[]}return e.prototype.on=function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},e.prototype.emit=function(e){for(var t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=this._events[e];if(!o||0===o.length)return!1;for(var a=o.length,s=0;s<a;s++)(t=o[s]).call.apply(t,r([null],i))},e.prototype.off=function(e,t){var i=this._events[e];if(!i)return!1;if(t)for(var r=i.length,n=0;n<r;n++){i[n]===t&&i.splice(n,1)}else i&&(i.length=0)},e}();t.PublishSubscribe=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isBoolean:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},isElement:function(e){return e instanceof HTMLElement},mergeJSON:function(e,t){for(var i in e)t[i]===undefined?t[i]=e[i]:this.isObject(e[i])?this.mergeJSON(e[i],t[i]):t[i]=e[i]},rValue:function(e){return e===undefined?"":e}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this._canvasEl=null,this._video=null};t["default"]=r},function(e,t,i){"use strict";function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e){return"function"==typeof e}function a(e){return"string"==typeof e}function s(e){return"[object Boolean]"===Object.prototype.toString.call(e)}function c(e){return e instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(e)}function l(e,t,i){t===undefined?i.appendChild(e):i.insertBefore(e,t)}function u(e,t,i,r,n){return n=n/180*Math.PI,{x:(e-i)*Math.cos(n)-(t-r)*Math.sin(n)+i,y:(e-i)*Math.sin(n)+(t-r)*Math.cos(n)+r}}Object.defineProperty(t,"__esModule",{value:!0}),t.rotatePoint=t.rotateRect=t.revokeURL=t.createURL=t.pointToPoint=t.formatTime=t.devicePixelRatio=t.requestAnimationFrame=t.checkFocus=t.deepClone=t.uid=t.insertBefore=t.insertAfter=t.getIndexByCallback=t.getIndex=t.exitFullscreen=t.launchFullscreen=t.isFullscreen=t.id=t.preventDefault=t.stopBubble=t.query=t.throttleStable=t.stable=t.throttle=t.mergeUiConfig=t.mergeJSON=t.addEvent=t.addClass=t.setElStyle=t.isElement=t.isIE=t.isMobile=t.isBorder=t.isColor=t.isBoolean=t.isNumber=t.isSize=t.isString=t.isFunction=t.isObject=t.uniqueArray=t.isArray=void 0,t.isArray=r,t.uniqueArray=function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)for(var i=t+1;i<e.length;i++)e[t]===e[i]&&(e.splice(i,1),i--);return e}},t.isObject=n,t.isFunction=o,t.isString=a,t.isSize=function(e){var t=String(e);return!!/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(t)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isBoolean=s,t.isColor=function(e){var t=document.createElement("span");return t.style.background=e,!!t.style.background},t.isBorder=function(e){var t=document.createElement("span");return t.style.border=e,!(!t.style.border&&""!==e)},t.isMobile=function(){return"ontouchstart"in document.documentElement},t.isIE=function(){return document.documentMode!==undefined},t.isElement=c,t.setElStyle=function(e,t){if(a(t))e.style.cssText=t;else for(var i in t)e.style[i]=t[i]},t.addClass=function(e,t){if(!c)return!1;for(var i=0;i<t.length;i++){var r=t[i];if(a(r)&&r)try{e.classList.add(r)}catch(n){0}}return!0},t.addEvent=function(e,t,i,r){if(e)return e.addEventListener(t,i,r),function(){e.removeEventListener(t,i)}},t.mergeJSON=function h(e,t){for(var i in e)t[i]===undefined?t[i]=e[i]:n(e[i])?h(e[i],t[i]):t[i]=e[i]},t.mergeUiConfig=function d(e,t){for(var i in e){var r=e[i],o=t[i];o===undefined?t[i]=e[i]:s(r)&&n(o)?o.visibility=r:n(r)&&n(o)?d(e[i],t[i]):t[i]=e[i]}},t.throttle=function(e,t,i){var r=!0;return function(){var n=this;r&&(r=!1,setTimeout((function(){e.apply(n,i),r=!0}),t))}},t.stable=function(e,t,i){var r,n=this;return void 0===i&&(i=!1),function(){i?e.apply(n):(r&&clearTimeout(r),r=setTimeout((function(){e.apply(n)}),t))}},t.throttleStable=function(e,t){var i=this,r=0,n=null;return function(){var o=+new Date;o-r<t?(clearTimeout(n),n=setTimeout((function(){r=o,e.apply(i)}),t)):(r=o,e.apply(i))}},t.query=function(e){return document.querySelector(e)},t.stopBubble=function(e){e&&e.stopPropagation?e.stopPropagation():e&&(e.cancelBubble=!0)},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.id=function(e){return""===e||e===undefined?null:document.getElementById(e)},t.isFullscreen=function(){var e=window.document;return e.fullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||!1},t.launchFullscreen=function(e){return e.requestFullscreen?(e.requestFullscreen(),!0):e.mozRequestFullScreen?(e.mozRequestFullScreen(),!0):e.msRequestFullscreen?(e.msRequestFullscreen(),!0):e.oRequestFullscreen?(e.oRequestFullscreen(),!0):e.webkitRequestFullscreen?(e.webkitRequestFullScreen(),!0):(alert("Your browser does not support full screen!"),!1)},t.exitFullscreen=function(){var e=window.document;return e.exitFullScreen?(e.exitFullScreen(),!0):e.mozCancelFullScreen?(e.mozCancelFullScreen(),!0):e.webkitExitFullscreen?(e.webkitExitFullscreen(),!0):e.msExitFullscreen?(e.msExitFullscreen(),!0):void 0},t.getIndex=function(e){for(var t=e.parentNode.children,i=0;i<t.length;i++)if(t[i]===e)return i},t.getIndexByCallback=function(e,t){for(var i=e.parentNode,r=i.children,n=0,a=0;a<r.length;a++){var s=r[a];if(o(t)){if(!t(s,i))continue;if(s===e)return n;n++}else if(s===e)return a}return-1},t.insertAfter=function(e,t){var i=t.parentNode;i.lastChild==t?i.appendChild(e):l(e,t.nextSibling,i)},t.insertBefore=l,t.uid=function(e){var t=Math.random().toString(35).substr(2);return t.length<11&&(t+=Math.random().toString(35).substr(2)),e=Math.max(Math.min(Math.round(e),11),8),t=t.substr(0,e)},t.deepClone=function f(e){var t;if(r(e))t=[];else{if(!n(e))return e;t={}}for(var i in e){var o=e[i];r(e)||n(e)?t[i]=f(o):t[i]=o}return t},t.checkFocus=function(){var e=document.activeElement;return"INPUT"===e.tagName&&"text"===e.type},t.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame,i=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(i=!1),i)return t(e);var r={},n=1,o=null,a=+new Date;return function(e,t){var i=n++;return r[i]=e,null===o&&(o=setInterval((function(){var e=+new Date,t=r;for(var i in r={},0,t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i](e),a=e);e-a>2500&&(clearInterval(o),o=null)}),1e3/60)),i}(e)},t.devicePixelRatio=function(){var e=window;return e?e.devicePixelRatio?e.devicePixelRatio:e.screen.deviceXDPI&&e.screen.logicalXDPI?e.screen.deviceXDPI/e.screen.logicalXDPI:1:1},t.formatTime=function(e){var t=new Date,i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return e},t.pointToPoint=function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))},t.createURL=function(e){var t=Object.prototype.toString.call(e),i=window.URL||window.webkitURL;return"[object Blob]"===t?{type:"object",data:i.createObjectURL(e)}:/\[object ArrayBuffer\]|\[object \w+Array\]/.test(t)?{type:"object",data:i.createObjectURL(new Blob([e]))}:(/data:image\/\w+;base64/.test(e),{type:"string",data:e})},t.revokeURL=function(e){var t=window.URL||window.webkitURL;if(/^blob:/.test(e))return t.revokeObjectURL(e)},t.rotateRect=function(e,t,i,r,n){var o=e+i/2,a=t+r/2,s=u(e,t,o,a,n),c=u(e+i,t,o,a,n),l=u(e+i,t+r,o,a,n),h=u(e,t+r,o,a,n),d=[c.x,s.x,h.x,l.x].sort((function(e,t){return e-t})),f=[c.y,s.y,h.y,l.y].sort((function(e,t){return e-t}));return{x:d[0],y:f[0],width:d[3]-d[0],height:f[3]-f[0]}},t.rotatePoint=u},function(e,t,i){}]); 
}); 
Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a=function(e){var g=c.html5.Funs,d;var f=function(){this._stwain=e;this._viewer=null};f.prototype._getCameraViewer=function(){if(this._viewer==null){this._viewer=new Dynamsoft.CameraViewer();this._stwain._ImgManager.getWebViewer().bindCamera()}return this._viewer};f.prototype._checkLic=function(){var h=true;if(!c.License.checkProductKey(this._stwain,{Webcam:true},true)){h=false}if(h&&!c.License.checkProductKey(this._stwain,{Webcam:true,Wasm:true},true)){h=false}if(h){return false}else{return{code:this._stwain._errorCode,message:this._stwain._errorString}}};f.prototype.getSourceList=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._getCameraViewer().getSourceList()};f.prototype.selectSource=function(h){var i=this._checkLic();if(i){return c.Promise.reject(i)}this._getCameraViewer().hide();return this._getCameraViewer().selectSource(h)};f.prototype.closeSource=function(){var i=this._checkLic();if(i){return c.Promise.reject(i)}this._getCameraViewer().hide();var h=this._getCameraViewer().closeSource();this._stwain._ImgManager.getWebViewer().render();return h};f.prototype.play=function(j,l,p){var k=this._checkLic(),h,o;if(k){return c.Promise.reject(k)}if(this._stwain._ImgManager.getWebViewer()._imageEditorInner&&this._stwain._ImgManager.getWebViewer()._imageEditorInner.bShowImageEditForFullScreen){c.Errors.ImageEditorOpenCannotPlayVideo(this._stwain);return c.Promise.reject({code:this._stwain._errorCode,message:this._stwain._errorString})}var m=j;if(!m){if(this._stwain._ImgManager.getWebViewer().myViewer.bOnlyShowThumbnailsView||!this._stwain._ImgManager.getWebViewer().myViewer.showMain){var n=c.one(["#showImageArea",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join(""));if(n&&n.length>0){if(n[0].className.indexOf("DVS_disabled")<0){m=n[0]}}}else{var i=c.one(["#container",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join(""));if(i&&i.length>0){if(i[0].className.indexOf("DVS_disabled")<0){m=i[0]}}}}if(!m){this._getCameraViewer().unbindUI();this._getCameraViewer().closeSource().then(function(){},function(){})}else{if(typeof l=="object"){h=l.width;o=l.height}this._getCameraViewer().show()}return this._getCameraViewer().play(m,h,o,p)};f.prototype.pause=function(){return this._getCameraViewer().pause()};f.prototype.resume=function(){return this._getCameraViewer().resume()};f.prototype.getStatus=function(){return this._getCameraViewer().getStatus()};f.prototype.capture=function(){var i=this._checkLic(),h=this._stwain;if(i){return c.Promise.reject(i)}return this._getCameraViewer().capture().then(function(j){return new c.Promise(function(o,n){var k=j,l=-1,m=Dynamsoft.DWT.EnumDWT_ImageType;if(h._bLocalService){if(c.isString(k.type)){if(k.type=="application/pdf"){l=m.IT_PDF}else{if(k.type=="image/png"){l=m.IT_PNG}else{if(k.type=="image/jpeg"){l=m.IT_JPG}else{if(k.type=="image/bmp"){l=m.IT_BMP}else{if(k.type=="image/tiff"){l=m.IT_TIF}else{if(k.type=="image/jp2"){l=m.IT_J2K}}}}}}}h.__captureImage(k,l,function(){o(k)},function(q,p){n({code:q,message:p})})}else{h._innerSendToMobile("LoadImageFromBinary",[k,true],0,function(){o(k)},function(q,p){n({code:q,message:p})})}})})};f.prototype.stop=function(){this._getCameraViewer().hide();var h=this._getCameraViewer().stop();this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth());return h};f.prototype.show=function(){return this._getCameraViewer().show()};f.prototype.hide=function(){return this._getCameraViewer().hide()};f.prototype.getCurrentResolution=function(){return this._getCameraViewer().getCurrentResolution()};f.prototype.getCurrentSource=function(){return this._getCameraViewer().getCurrentSource()};f.prototype.getResolution=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._getCameraViewer().getResolution()};f.prototype.setResolution=function(h){var i=this._checkLic();if(i){return c.Promise.reject(i)}return this._getCameraViewer().setResolution(h)};f.prototype.setResolution=function(h){var i=this._checkLic();if(i){return c.Promise.reject(i)}return this._getCameraViewer().setResolution(h)};f.prototype.showVideo=function(j,h,l,i){var k=this._checkLic();if(k){return c.Promise.reject(k)}this._getCameraViewer();return this._stwain._ImgManager.getWebViewer().showVideo(j,h,l,i)};f.prototype.closeVideo=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._stwain._ImgManager.getWebViewer().closeVideo()};f.prototype.on=function(h,i){var j=this;if(h!="video-closed"&&h!="video-error"){c.Errors.EventNotExist(this._stwain);return}if(!c.isFunction(i)){c.Errors.CallbackNotAFunction(j._stwain);return}this._stwain._ImgManager.getWebViewer().on(h,i)};f.prototype.off=function(h,i){if(h!="video-closed"||h!="video-error"){c.Errors.EventNotExist(this._stwain);return}if(c.isUndefined(i)){this._stwain._ImgManager.getWebViewer().off(h)}else{if(!c.isFunction(i)){c.Errors.CallbackNotAFunction(this._stwain);return}this._stwain._ImgManager.getWebViewer().off(h,i)}};e.__addon=e.__addon||{};e.__addon.Camera=new f()};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(a)}}); 
// @20210324 172126 
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Upload
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft Support Team
* Version: 1.7.0.0330
*/
;var Dynamsoft=window.Dynamsoft||{Lib:{}};(function(c){var d=c.DWT||(c.DWT={});d.initQueue=[];d.inited=!1;c.initOrder=c.initOrder||[]})(Dynamsoft);var Dynamsoft=Dynamsoft||{};(function(e,b,a){var c=20200521;if(b._preDefine_ver){if(b._preDefine_ver>=c){return}}b._preDefine_ver=c;var d=function(g,j){for(var h in j){if(j.hasOwnProperty(h)){g[h]=j[h]}}return g},f=function(j){if(null==j||"object"!=typeof j){return j}var k,h,g;if(j instanceof Date){k=new Date();k.setTime(j.getTime());return k}else{if(j instanceof Array){k=[];g=j.length;for(h=0;h<g;h++){k[h]=f(j[h])}return k}else{if(j instanceof Object){k={};for(h in j){if(j.hasOwnProperty(h)){k[h]=f(j[h])}}return k}else{return 0}}}};if(!b.Lib){b.Lib={}}d(b.Lib,{win:e,doc:e.document,debug:!1,nil:a,mix:d,clone:f,keys:Object.keys,guid:function(l){var k=[],g="0123456789abcdef",j,h;for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<4;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-4");for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");h=g.substr(Math.floor(Math.random()*16),1);h=g.substr((h&3)|8,1);k.push(h);for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.unshift(l);return k.join("")},now:Date.now||function(){return +new Date()},noop:function(){}})})(typeof window!=="undefined"?window:this,Dynamsoft);(function(d){var b=!({toString:1}.propertyIsEnumerable("toString")),c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function a(f,e){return({}).hasOwnProperty.call(f,e)}d.keys=Object.keys||function(h){var e=[],g,f;for(g in h){if(a(h,g)){e.push(g)}}if(b){for(f=c.length-1;f>=0;f--){g=c[f];if(a(h,g)){e.push(g)}}}return e}})(Dynamsoft.Lib);(function(j,k){var f=20200716;if(j._isXXX_ver){if(j._isXXX_ver>=f){return}}j._isXXX_ver=f;var o=j.mix,l,g,i=!1,e=!0,d=i,c={}.hasOwnProperty,n={},m=(typeof HTMLElement==="object");function h(p){return p===k}function a(p){return p!==k}o(j,{isDef:a,isUndef:h,isUndefined:h,isNull:function(p){return(p===null)},isNaN:function(p){return isNaN(p)},type:function(p){if(p===null||p===k){return String(p)}return n[{}.toString.call(p)]||"object"},isPlainObject:function(s){if(!s||j.type(s)!=="object"||s.nodeType||s.window==s){return i}var p,q;try{if((q=s.constructor)&&!c(s,"constructor")&&!c(q.prototype,"isPrototypeOf")){return i}}catch(r){return i}for(p in s){}return(h(p)||c(s,p))},isDOM:function(p){return m?(p instanceof HTMLElement):p&&typeof p==="object"&&(p.nodeType===1||p.nodeType===9)&&typeof p.nodeName==="string"},isDOMInBody:function(q){var p=q;if(j.isDOM(q)){while(!p&&p!=document.body){p=p.parentNode}}else{p=0}return !!p}});function b(p,q){n["[object "+p+"]"]=(q=p.toLowerCase());j["is"+p]=function(r){return j.type(r)===q}}b("Function");j.each=l=function(t,v,p){if(t){var w,r,x,u=0,q=t.length,s=h(q)||j.isFunction(t);p=p||null;if(s){x=j.keys(t);for(;u<x.length;u++){w=x[u];if(v.call(p,t[w],w,t)===i){break}}}else{for(r=t[0];u<q;r=t[++u]){if(v.call(p,r,u,t)===i){break}}}}return t};g=["String","Object","Boolean","Number"];if(Array.isArray){j.isArray=Array.isArray}else{g.push("Array")}l(g,b)})(Dynamsoft.Lib);(function(c){var a=c.mix,b=c.win,e;var d=20200521;if(c._log_ver){if(c.isNumber(c._log_ver)&&c._log_ver>=d){return}}c._log_ver=d;if(c.isDef(b.console)){e=b.console;if(!c.isFunction(e.log)||!c.isFunction(e.error)){e=false}}a(c,{log:function(f){if(c.debug&&e){e.log(f)}},error:function(f){if(c.debug&&e){e.error(f)}},getLogger:function(){var f=c.log;return{warn:f,log:f,info:f,debug:f}}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._random_ver){if(b._random_ver>=a){return}}b._random_ver=a;b.getRandom=function(){var d=b.now()%10000,c=[],f;for(var e=0;e<5;e++){f=Math.floor(Math.random()*10);if(e==0&&f==0){e=-1;continue}c.push(f)}if(d<10){c.push("000")}else{if(d<100){c.push("00")}else{if(d<1000){c.push("0")}}}c.push(d);return c.join("")}})(Dynamsoft.Lib);(function(b){var a=20201013;if(b._strUtil_ver){if(b.isNumber(b._strUtil_ver)&&b._strUtil_ver>=a){return}}b._strUtil_ver=a;b.mix(b,{startsWith:function(d,c){return d.lastIndexOf(c,0)===0},endsWith:function(e,d){var c=e.length-d.length;return c>=0&&e.indexOf(d,c)===c},replaceAll:function(e,d,c){return e.replace(new RegExp(d,"gi"),c)},upperCaseFirst:function(c){return c.charAt(0).toUpperCase()+c.substr(1)},removeNonPrintableChar:function(c){if(b.isString(c)){return c.replace(/[^\x20-\x7E]/g,"")}else{return c}},makeArray:function(h){if(h==null){return[]}if(b.isArray(h)){return h}var c=typeof h.length,g=typeof h;if(c!=="number"||h.alert||g==="string"||(g==="function"&&!("item" in h&&c==="number"))){return[h]}var e=[];for(var f=0,d=h.length;f<d;f++){e[f]=h[f]}return e}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._extend_ver){if(b.isNumber(b._extend_ver)&&b._extend_ver>=a){return}}b._extend_ver=a;b.extend=function(c,d){var e=function(){c.apply(this,arguments);if(d){d.apply(this,arguments)}};b.each(c.prototype,function(g,f){e.prototype[f]=g});e.prototype.constructor=e;return e}})(Dynamsoft.Lib);(function(c){var a=20200521;if(c._attribute_ver){if(c.isNumber(c._attribute_ver)&&c._attribute_ver>=a){return}}c._attribute_ver=a;function b(e){var d=this,f=d.constructor;d.__attrs={};d.__attrVals={};d.userConfig=e;while(f){d.addAttrs(f.ATTRS);f=f.superclass?f.superclass.constructor:null}c.mix(d.__attrs,e)}c.mix(b.prototype,{get:function(e){var d=this;if(e in d.__attrs){return d.__attrs[e]}return""},set:function(f,e){var d=this;if(f in d.__attrs){d.__attrs[f]=e}},addAttrs:function(d){c.mix(this.__attrs,d)}});b.extend=function(f){var d=this,g,e;f=f||{};if(f.constructor){g=f.constructor}e=c.extend(d,g);c.mix(e,f);return e};c.Attributes=b})(Dynamsoft.Lib);(function(h){var m=20200521;if(h._json_ver){if(h._json_ver>=m){return}}h._json_ver=m;var j=h.win.JSON;if(j&&j.parse&&j.stringify){h.parse=j.parse;h.stringify=j.stringify;return}var l=(function(){var q={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},p={},r=/["\b\f\n\r\t\x00-\x1f]/g,o=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;h.each(q,function(s,t){p[s]=t});p["\\/"]="/";p["\\\\"]="\\";return{quote:function(s){return'"'+s.replace(r,function(t){var u;if(!(u=q[t])){u="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(0-4)}return u})+'"'},unQuote:function(s){return s.slice(1,s.length-1).replace(o,function(t){var u;if(!(u=p[t])){u=String.fromCharCode(parseInt(t.slice(2),16))}return u})}}})(),i;function b(o){return o<10?"0"+o:o}function f(F,z,r,E,D,t){var u=t;t+=E;var v,q,x=0,s;if(r!==undefined){v=r}else{v=h.keys(F)}var C=[];for(q=v.length;x<q;x++){s=v[x];var o=i(s,F,z,r,E,D,t);if(o!==undefined){var w=l.quote(s);w+=":";if(E){w+=" "}w+=o;C[C.length]=w}}var A;if(!C.length){A="{}"}else{if(!E){A="{"+C.join(",")+"}"}else{var y=",\n"+t;var B=C.join(y);A="{\n"+t+B+"\n"+u+"}"}}return A}function n(B,t,p,A,z,q){var r=q;q+=A;var y=[];var v=B.length;var u=0;while(u<v){var o=i(String(u),B,t,p,A,z,q);if(o===undefined){y[y.length]="null"}else{y[y.length]=o}++u}var w;if(!y.length){w="[]"}else{if(!A){w="["+y.join(",")+"]"}else{var s="\n,"+q;var x=y.join(s);w="[\n"+q+x+"\n"+r+"]"}}return w}i=function(r,q,u,s,v,p,o){var t=q[r];if(t&&typeof t==="object"){if(typeof t.toJSON==="function"){t=t.toJSON(r)}else{if(t instanceof Date){t=isFinite(t.valueOf())?t.getUTCFullYear()+"-"+b(t.getUTCMonth()+1)+"-"+b(t.getUTCDate())+"T"+b(t.getUTCHours())+":"+b(t.getUTCMinutes())+":"+b(t.getUTCSeconds())+"Z":null}else{if(t instanceof String||t instanceof Number||t instanceof Boolean){t=t.valueOf()}}}}if(u!==undefined){t=u.call(q,r,t)}switch(typeof t){case"number":return isFinite(t)?String(t):"null";case"string":return l.quote(t);case"boolean":return String(t);case"object":if(!t){return"null"}if(h.isArray(t)){return n(t,u,s,v,p,o)}return f(t,u,s,v,p,o)}return undefined};h.stringify=function(r,o,q){var t="";var p,s;if(o){if(typeof o==="function"){s=o}else{if(h.isArray(o)){p=o}}}if(typeof q==="number"){q=Math.min(10,q);t=new Array(q+1).join(" ")}else{if(typeof q==="string"){t=q.slice(0,10)}}return i("",{"":r},s,p,t,[],"")};var c={},d={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},a;c.yy={unQuote:l.unQuote};a=function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)};a.prototype={constructor:function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)},resetInput:function(o){h.mix(this,{input:o,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var o=this,p=o.stateStack[o.stateStack.length-1],q=[];p=o.mapState(p);h.each(o.rules,function(s){var t=s.state||s[3];if(!t){if(p==a.STATIC.INITIAL){q.push(s)}}else{if(h.inArray(p,t)){q.push(s)}}});return q},pushState:function(o){this.stateStack.push(o)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var q=this,s=a.STATIC.DEBUG_CONTEXT_LIMIT,o=q.matched,r=q.match,p=q.input;o=o.slice(0,o.length-r.length);var u=(o.length>s?"...":"")+o.slice(-s).replace(/\n/," "),t=r+p;t=t.slice(0,s)+(t.length>s?"...":"");return u+t+"\n"+new Array(u.length+1).join("-")+"^"},mapSymbol:function(q){var o=this,p=o.symbolMap;if(!p){return q}return p[q]||(p[q]=(++o.symbolId))},mapReverseSymbol:function(p){var o=this,r=o.symbolMap,q,s=o.reverseSymbolMap;if(!s&&r){s=o.reverseSymbolMap={};h.each(r,function(u,t){s[u]=t})}if(s){return s[p]}else{return p}},mapState:function(q){var o=this,p=o.stateMap;if(!p){return q}return p[q]||(p[q]=(++o.stateId))},lex:function(){var y=this,w=y.input,r,v,o,t,z,x=y.getCurrentRules();y.match=y.text="";if(!w){return y.mapSymbol(a.STATIC.END_TAG)}for(r=0;r<x.length;r++){v=x[r];var u=v.regexp||v[1],p=v.token||v[0],q=v.action||v[2]||undefined;if((o=w.match(u))){z=o[0].match(/\n.*/g);if(z){y.lineNumber+=z.length}h.mix(y,{firstLine:y.lastLine,lastLine:y.lineNumber+1,firstColumn:y.lastColumn,lastColumn:z?z[z.length-1].length-1:y.lastColumn+o[0].length});var s;s=y.match=o[0];y.matches=o;y.text=s;y.matched+=s;t=q&&q.call(y);if(t===undefined){t=p}else{t=y.mapSymbol(t)}w=w.slice(s.length);y.input=w;if(t){return t}else{return y.lex()}}}h.error("lex error at line "+y.lineNumber+":\n"+y.showDebugInfo());return undefined}};a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var e=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});c.lexer=e;e.symbolMap={"$EOF":1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,"$START":13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};c.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return this.$1==="true"}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var o={};o[this.$1.key]=this.$1.value;return o}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];c.table={gotos:{"0":{"14":7,"15":8,"16":9,"17":10},"2":{"15":12,"16":9,"17":10,"18":13},"3":{"19":16,"20":17},"18":{"15":23,"16":9,"17":10},"20":{"15":24,"16":9,"17":10},"21":{"19":25}},action:{"0":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"1":{"1":[2,2,0],"3":[2,2,0],"6":[2,2,0],"8":[2,2,0]},"2":{"2":[1,0,1],"5":[1,0,2],"6":[1,0,11],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"3":{"2":[1,0,14],"8":[1,0,15]},"4":{"1":[2,3,0],"3":[2,3,0],"6":[2,3,0],"8":[2,3,0]},"5":{"1":[2,6,0],"3":[2,6,0],"6":[2,6,0],"8":[2,6,0]},"6":{"1":[2,7,0],"3":[2,7,0],"6":[2,7,0],"8":[2,7,0]},"7":{"1":[0,0,0]},"8":{"1":[2,1,0]},"9":{"1":[2,4,0],"3":[2,4,0],"6":[2,4,0],"8":[2,4,0]},"10":{"1":[2,5,0],"3":[2,5,0],"6":[2,5,0],"8":[2,5,0]},"11":{"1":[2,10,0],"3":[2,10,0],"6":[2,10,0],"8":[2,10,0]},"12":{"3":[2,8,0],"6":[2,8,0]},"13":{"3":[1,0,18],"6":[1,0,19]},"14":{"4":[1,0,20]},"15":{"1":[2,15,0],"3":[2,15,0],"6":[2,15,0],"8":[2,15,0]},"16":{"3":[2,13,0],"8":[2,13,0]},"17":{"3":[1,0,21],"8":[1,0,22]},"18":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"19":{"1":[2,11,0],"3":[2,11,0],"6":[2,11,0],"8":[2,11,0]},"20":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"21":{"2":[1,0,14]},"22":{"1":[2,16,0],"3":[2,16,0],"6":[2,16,0],"8":[2,16,0]},"23":{"3":[2,9,0],"6":[2,9,0]},"24":{"3":[2,12,0],"8":[2,12,0]},"25":{"3":[2,14,0],"8":[2,14,0]}}};c.parse=function g(y){var A=this,o=A.lexer,t,F,E,I=A.table,B=I.gotos,s=I.action,r=A.productions,u=[null],v=[0];o.resetInput(y);while(1){t=v[v.length-1];if(!F){F=o.lex()}if(!F){h.log("it is not a valid input: "+y,"error");return false}E=s[t]&&s[t][F];if(!E){var w=[],D;if(s[t]){h.each(s[t],function(L,M){w.push(A.lexer.mapReverseSymbol(M))})}D="Syntax error at line "+o.lineNumber+":\n"+o.showDebugInfo()+"\nexpect "+w.join(", ");h.log(D);return false}switch(E[d.TYPE_INDEX]){case d.SHIFT_TYPE:v.push(F);u.push(o.text);v.push(E[d.TO_INDEX]);F=null;break;case d.REDUCE_TYPE:var J=r[E[d.PRODUCTION_INDEX]],z=J.symbol||J[0],q=J.action||J[2],C=J.rhs||J[1],H=C.length,G=0,K,x=u[u.length-H];A.$$=x;K=undefined;for(;G<H;G++){A["$"+(H-G)]=u[u.length-1-G]}if(q){K=q.call(A)}if(K!==undefined){x=K}else{x=A.$$}if(H){v=v.slice(0,-1*H*2);u=u.slice(0,-1*H)}v.push(z);u.push(x);var p=B[v[v.length-2]][v[v.length-1]];v.push(p);break;case d.ACCEPT_TYPE:return x}}};function k(w,o,x){var s=w[o],t,v,u;if(typeof s==="object"){if(h.isArray(s)){t=0;v=s.length;var r=[];while(t<v){u=k(s,String(t),x);if(u!==undefined){r[r.length]=u}}s=r}else{var y=h.keys(s);t=0;for(v=y.length;t<v;t++){var q=y[t];u=k(s,q,x);if(u===undefined){delete s[q]}else{s[q]=u}}}}return x.call(w,o,s)}h.parse=function(q,o){var p=c.parse(String(q));if(o){return k({"":p},"",o)}else{return p}}})(Dynamsoft.Lib);(function(f){var e=20210305;if(f._array_ver){if(f._array_ver>=e){return}}f._array_ver=e;var c=Array.prototype,b=c.indexOf,a=c.filter,d=c.forEach;if(!f.isFunction(b)){b=function(i,j){var h;if(this==null){return -1}var l=Object(this);var g=l.length>>>0;if(g===0){return -1}var m=+j||0;if(Math.abs(m)===Infinity){m=0}if(m>=g){return -1}h=Math.max(m>=0?m:g-Math.abs(m),0);while(h<g){if(h in l&&l[h]===i){return h}h++}return -1}}if(!f.isFunction(d)){Array.prototype.forEach=function d(n,h){var j,i;if(this==null||!f.isFunction(n)){return}var m=Object(this);var g=m.length>>>0;if(arguments.length>1){j=h}i=0;while(i<g){var l;if(i in m){l=m[i];n.call(j,l,i,m)}i++}}}f.mix(f,{filter:a?function(g,i,h){return a.call(g,i,h||this)}:function(g,j,i){var h=[];f.each(g,function(m,l,k){if(j.call(i||this,m,l,k)){h.push(m)}});return h},indexOf:function(h,g){return b.call(g,h)},uniq:function(m){var l=[],g=m.length;for(var k=0;k<g;k++){for(var h=k+1;h<g;h++){if(m[k]===m[h]){k++;h=k}}l.push(m[k])}return l}})})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._function_ver){if(d._function_ver>=c){return}}d._function_ver=c;var b=Array.prototype,a=Function.prototype;if(!d.isFunction(a.bind)){a.bind=function(g){var f=this;if(1<arguments.length){var e=b.slice.call(arguments,1);return function(){return f.apply(g,arguments.length?e.concat(b.slice.call(arguments)):e)}}return function(){return arguments.length?f.apply(g,arguments):f.call(g)}}}})(Dynamsoft.Lib);(function(f){var d=20200521;if(f._string_ver){if(f._string_ver>=d){return}}f._string_ver=d;var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,e=String.prototype,c="",a=e.trim;if(!a){a=e.trim=function(){return this.replace(b,c)}}f.trim=function(g){return g==null?c:a.call(g)}})(Dynamsoft.Lib);(function(b){var a=20210305;if(b._navInfobase_ver){if(b.isNumber(b._navInfobase_ver)&&b._navInfobase_ver>=a){return}}b._navInfobase_ver=a;b.getNavInfoByUserAgent=function(P,N){var Q="",ac=!1,G=!0,V=b.win,j=b.doc,ai=j&&j.documentElement,X,U=P.toLowerCase(),E=N.toLowerCase(),Y=(/cros/).test(U),x=(/android/g).test(U),aa=(/iphone/g).test(U)||(/iphone/g).test(E),k=(/macintosh/).test(U),y=(/ipad/g).test(U)||((k||(E=="macintel"))&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1),p=(/ucweb|ucbrowser/g).test(U),L=!p&&(/nexus/g).test(U)&&(/version\/[\d.]+.*safari\//g).test(U),ag=(/playbook/g).test(U),S=(/hp-tablet/g).test(U),D=(/blackberry|bb10/g).test(U),q=(/symbian/g).test(U),F=(/windows phone/g).test(U),H=(/mobile/g).test(U),w=(/aarch64|arm64|mips64/g).test(U);var s=ag||y||S,W=aa||L||D||q||F||x||H,c=!W&&!s&&!Y,R=c&&(/win32|win64|windows/).test(E),n=R&&(/win64|x64/).test(U),J=c&&(/mac68k|macppc|macintosh|macintel/).test(U),af=c&&(/linux/).test(E),o=(E=="win64")||(/wow64|x86_64|win64|x64/).test(U)||w,m=(/wow64/g).test(U),B=U.indexOf("msie "),K=U.indexOf("trident"),I=U.indexOf("rv:"),v=ac,r=(/opera|opr/g).test(U),M=(/360se/g).test(U),T=(/maxthon/g).test(U),z=(/tencenttraveler|qqbrowser/g).test(U),O=(/the world/g).test(U),Z=(/metasr/g).test(U),h=(/avant/g).test(U),C=(/firefox|fxios/g).test(U),t=!C&&(/edge\/|edga\/|edgios\/|edg\//g).test(U),f=!(D||ag||p||r||t)&&(/chrome|crios/g).test(U),e=R&&!C&&!t&&!f&&(B!=-1||K!=-1||I!=-1),l="",d=0,u=(/gecko/g).test(U),g=W||s,ab=Q,A=ac,ae=V.JSON;if((J||aa||y||R||D||ag||L)&&!p&&!r&&!t&&!e&&!C){X=U.match(/version\/([\d.]+).*safari\//);if(X){if(D||ag||L){}else{v=G;f=ac}ab=X[1]}}if(t){var ah=U.indexOf("edge/");if(ah>-1){ah+=5}else{ah=U.indexOf("edg/");if(ah>-1){ah+=4}else{ah=U.indexOf("edga/");if(ah>-1){ah+=5}else{ah=U.indexOf("edgios/");if(ah>-1){ah+=7}}}}if(ah>-1){ab=U.slice(ah);X=ab.indexOf(" ");if(X>-1){ab=ab.slice(0,X)}}g=G}else{if(C){X=U.indexOf("firefox/");g=G;if(X>-1){X=U.slice(X+8);var ad=X.indexOf(" ");if(ad>-1){X=X.slice(0,ad)}ab=X;ad=X.indexOf(".");if(ad>-1){X=ab.slice(0,ad)}if(X<27){g=ac}}else{if(aa||y){X=U.indexOf("fxios/");if(X>-1){X=U.slice(X+6);X=X.slice(0,X.indexOf(" "));ab=X}}}}else{if(e){if(B!=-1){X=U.slice(B+5);X=X.slice(0,X.indexOf(";"));l=X}else{if(I!=-1){X=U.slice(I+3);X=X.slice(0,X.indexOf(";"));X=X.slice(0,X.indexOf(")"));l=X}else{if(K!=-1){X=U.slice(K+7);X=X.slice(0,X.indexOf(";"));l=X}}}if(l===""||l>8){g=G}ab=X}else{if(v){X=ab.indexOf(".");g=G;if(X>-1){X=ab.slice(0,X);if(X<7){g=ac}}}else{if(p){X=U.indexOf("ucweb");if(X>-1){ab=U.slice(X+5)}else{X=U.indexOf("ucbrowser/");if(X>-1){ab=U.slice(X+10);X=ab.indexOf(" ");if(X>-1){ab=ab.slice(0,X)}}}g=G}else{if(r){X=U.indexOf("version/");if(X>-1){ab=U.slice(X+8)}else{X=U.indexOf("opr/");if(X>-1){ab=U.slice(X+4)}}g=G}else{if(q){X=U.indexOf("browserng/");if(X>-1){ab=U.slice(X+10)}g=G}else{if(F){X=U.indexOf("iemobile/");if(X>-1){ab=U.slice(X+9)}g=G}else{if(f){var i=U.indexOf("chrome/");if(i>-1){ab=U.slice(i+7);X=ab.indexOf(" ");if(X>-1){ab=ab.slice(0,X)}}else{i=U.indexOf("crios/");if(i>-1){ab=U.slice(i+6);X=ab.indexOf(" ");if(X>-1){ab=ab.slice(0,X)}}}g=G;X=ab.indexOf(".");if(X>-1){X=ab.slice(0,X);if(X<27){g=ac}}}}}}}}}}}if(t||e){if(j.documentMode){d=j.documentMode}else{d=5;if(j.compatMode){if(j.compatMode=="CSS1Compat"){d=7}}}}if(ai&&ai.querySelector&&(!e||e&&(ab>8))){A=G}if(e&&ab<9){ae=null}return{bWin:R,bMac:J,bLinux:af,bMobile:W,bPad:s,bChromeOS:Y,bEmbed:w,bAndroid:x,biPhone:aa,biPad:y,bWin64:n,bWOW64:m,bOSx64:o,bIE:e,bEdge:t,bChrome:f,bFirefox:C,bSafari:v,bOpera:r,bNexus:L,bUC:p,b360SE:M,bMaxthon:T,bTencentTraveler:z,bTheWorld:O,bMetaSr:Z,bAvant:h,bGecko:u,bHTML5Edition:g,strBrowserVersion:ab,IEMode:d,bQuerySelectorSupported:A,nativeJson:ae,scrollBarWidth:ac}}})(Dynamsoft.Lib);(function(d){var a=20210305;if(d._defineProperty_ver){if(d._defineProperty_ver>=a){return}}d._defineProperty_ver=a;var b=false;if(0){}else{var c=navigator,e;e=d.getNavInfoByUserAgent(c.userAgent,c.platform);Dynamsoft.navInfo=e;if(e.bIE){b=(e.strBrowserVersion==8)}}if(b){Object.defineProperty=function(g,f,h){g[f]=h.value||(h.get&&h.get())}}else{if(!Object.defineProperty){Object.defineProperty=function(l,i,k){var h=l[i],f=function(){return k.get.apply(l,[h])},j=function(m){return(h=k.set.apply(l,[m]))};if(l.__defineGetter__){l.__defineGetter__(i,f);l.__defineSetter__(i,j)}else{var g=function(n){if(event.propertyName==i){l.detachEvent("onpropertychange",g);var m=j(l[i]);l[i]=f;l[i].toString=f;l.attachEvent("onpropertychange",g)}};l[i]=f;l[i].toString=f;l.attachEvent("onpropertychange",g)}}}}if(!Object.create){Object.create=function(h,f){if(typeof h!=="object"&&typeof h!=="function"){return{}}else{if(h===null){return{}}}if(typeof f!="undefined"){return{}}function g(){}g.prototype=h;return new g()}}})(Dynamsoft.Lib);(function(g,c){var t="",j=!1,f=!0,s=g.getLogger(),l=g.isDef,a=g.each,k="&",m="=",p=16,d={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},o={},h,i,b=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;a(d,function(v,u){o[v]=u});function r(v){var u=typeof v;return v==null||(u!=="object"&&u!=="function")}function q(){if(h){return h}var u=t;a(d,function(v){u+=v+"|"});u=u.slice(0,-1);h=new RegExp(u,"g");return h}function n(){if(i){return i}var u=t;a(o,function(v){u+=v+"|"});u+="&#(\\d{1,5});";i=new RegExp(u,"g");return i}function e(u){return encodeURIComponent(String(u))}g.mix(g,{urlEncode:e,urlDecode:function(u){return decodeURIComponent(u.replace(/\+/g," "))},fromUnicode:function(u){return u.replace(/\\u([a-f\d]{4})/ig,function(v,w){return String.fromCharCode(parseInt(w,p))})},escapeHtml:function(u){return(u+"").replace(q(),function(v){return o[v]})},escapeRegExp:function(u){return u.replace(b,"\\$&")},unEscapeHtml:function(u){return u.replace(n(),function(v,w){return d[v]||String.fromCharCode(+w)})},param:function(y,x,v,u){x=x||k;v=v||m;if(g.isUndef(u)){u=f}var w=[];a(y,function(B,z){var A=e(z);if(r(B)){w.push(A);if(l(B)){w.push(v,e(B+t))}w.push(x)}else{if(g.isArray(B)&&B.length){a(B,function(C){if(r(C)){w.push(A,(u?e("[]"):t));if(l(C)){w.push(v,e(C+t))}w.push(x)}})}}});w.pop();return w.join(t)},unparam:function(B,F,E){if(!g.isString(B)||!(B=g.trim(B))){return{}}F=F||k;E=E||m;var A={},C,u=g.urlDecode,v=B.split(F),D,w,x=0,y=v.length;for(;x<y;++x){C=g.indexOf(E,v[x]);if(C===-1){D=u(v[x]);w=c}else{D=u(v[x].substring(0,C));w=v[x].substring(C+1);try{w=u(w)}catch(z){s.error("decodeURIComponent error : "+w);s.error(z)}if(g.endsWith(D,"[]")){D=D.substring(0,D.length-2)}}if(D in A){if(g.isArray(A[D])){A[D].push(w)}else{A[D]=[A[D],w]}}else{A[D]=w}}return A}})})(Dynamsoft.Lib);(function(d){var c=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function b(j,e){var g=[];for(var f=0;f<j.length;f++){var h=j[f];if(!h||h==="."){continue}if(h===".."){if(g.length&&g[g.length-1]!==".."){g.pop()}else{if(e){g.push("..")}}}else{g.push(h)}}return g}var a=d.Path={resolve:function(){var h="",f,g,e=(arguments),j,k=0;for(g=e.length-1;g>=0&&!k;g--){j=e[g];if(d.isString(j)&&!!j){h=j+"/"+h;k=j.charAt(0)==="/"}}f=b(d.filter(h.split("/"),function(i){return !!i}),!k).join("/");return((k?"/":"")+f)||"."},normalize:function(f){var g=f.charAt(0)==="/",e=f.slice(-1)==="/";f=b(d.filter(f.split("/"),function(h){return !!h}),!g).join("/");if(!f&&!g){f="."}if(f&&e){f+="/"}return(g?"/":"")+f},join:function(){var e=d.makeArray(arguments);return a.normalize(d.filter(e,function(f){return f&&(d.isString(f))}).join("/"))},relative:function(l,k){l=a.normalize(l);k=a.normalize(k);var j=d.filter(l.split("/"),function(m){return !!m}),i=[],f,g,e=d.filter(k.split("/"),function(m){return !!m}),h=Math.min(j.length,e.length);for(f=0;f<h;f++){if(j[f]!==e[f]){break}}g=f;while(f<j.length){i.push("..");f++}i=i.concat(e.slice(g));return i.join("/")},basename:function(h,f){var e=h.match(c)||[],g;g=e[3]||"";if(f&&g&&g.slice(-1*f.length)===f){g=g.slice(0,-1*f.length)}return g},dirname:function(h){var e=h.match(c)||[],f=e[1]||"",g=e[2]||"";if(!f&&!g){return"."}if(g){g=g.substring(0,g.length-1)}return f+g},extname:function(e){return(e.match(c)||[])[4]||""}}})(Dynamsoft.Lib);(function(d,c){function b(e){if(!e._queryMap){e._queryMap=d.unparam(e._query)}}function a(e){this._query=e||""}a.prototype={constructor:a,clone:function(){return new a(this.toString())},reset:function(f){var e=this;e._query=f||"";e._queryMap=null;return e},count:function(){var e=this,f=0;b(e);d.each(e._queryMap,function(g){if(d.isArray(g)){f+=g.length}else{f++}});return f},has:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return f in g}else{return !d.isEmptyObject(g)}},get:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return g[f]}else{return g}},keys:function(){var e=this;b(e);return d.keys(e._queryMap)},set:function(f,g){var e=this,h;b(e);h=e._queryMap;if(d.isString(f)){e._queryMap[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(j,i){h[i]=j})}return e},remove:function(f){var e=this;b(e);if(f){delete e._queryMap[f]}else{e._queryMap={}}return e},add:function(f,h){var e=this,i,g;if(d.isString(f)){b(e);i=e._queryMap;g=i[f];if(d.isUndef(g)){g=h}else{g=[].concat(g).concat(h)}i[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(l,j){e.add(j,l)})}return e},toString:function(e){var f=this;b(f);return d.param(f._queryMap,c,c,e)}};d.uriQuery=a})(Dynamsoft.Lib);(function(j){var h=j.uriQuery,l=j.each,f=j.Path,n=j.getLogger(),o=/[#\/\?@]/g,c=/[#\?]/g,k=/[#@]/g,e=/#/g,g={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},b=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function a(p){return p.length===1?"0"+p:p}function i(q,p){return q.toLowerCase()===p.toLowerCase()}function m(q,p){return encodeURI(q).replace(p,function(r){return"%"+a(r.charCodeAt(0).toString(16))})}function d(r){if(r instanceof d){return r.clone()}var q,p=this;j.mix(p,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});q=d.getComponents(r);l(q,function(s,t){s=s||"";if(t==="query"){p.query=new h(s)}else{try{s=j.urlDecode(s)}catch(u){n.error(u+"urlDecode error : "+s)}p[t]=s}});return p}d.prototype={constructor:d,clone:function(){var q=new d(),p=this;l(g,function(r,s){q[s]=p[s]});q.query=q.query.clone();return q},resolve:function(t){if(j.isString(t)){t=new d(t)}var r=this,s=0,q,p=["scheme","userInfo","hostname","port","path","query","fragment"],u=r.clone();l(p,function(w){if(w==="path"){if(s){u[w]=t[w]}else{var v=t.path;if(v){s=1;if(!j.startsWith(v,"/")){if(u.hostname&&!u.path){v="/"+v}else{if(u.path){q=u.path.lastIndexOf("/");if(q!==-1){v=u.path.slice(0,q+1)+v}}}}u.path=f.normalize(v)}}}else{if(w==="query"){if(s||t.query.toString()){u.query=t.query.clone();s=1}}else{if(s||t[w]){u[w]=t[w];s=1}}}});return u},getScheme:function(){return this.scheme},setScheme:function(p){this.scheme=p;return this},getHostname:function(){return this.hostname},setHostname:function(p){this.hostname=p;return this},setUserInfo:function(p){this.userInfo=p;return this},getUserInfo:function(){return this.userInfo},setPort:function(p){this.port=p;return this},getPort:function(){return this.port},setPath:function(p){this.path=p;return this},getPath:function(){return this.path},setQuery:function(p){if(j.isString(p)){if(j.startsWith(p,"?")){p=p.slice(1)}p=new h(m(p,k))}this.query=p;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(q){var p=this;if(j.startsWith(q,"#")){q=q.slice(1)}p.fragment=q;return p},isSameOriginAs:function(p){var q=this;return i(q.hostname,p.hostname)&&i(q.scheme,p.scheme)&&i(q.port,p.port)},toString:function(s){var r=[],x=this,p,v,y,q,t,u,w;if((p=x.scheme)){r.push(m(p,o));r.push(":")}if((v=x.hostname)){r.push("//");if((w=x.userInfo)){r.push(m(w,o));r.push("@")}r.push(encodeURIComponent(v));if((q=x.port)){r.push(":");r.push(q)}}if((y=x.path)){if(v&&!j.startsWith(y,"/")){y="/"+y}y=f.normalize(y);r.push(m(y,c))}if((u=(x.query.toString.call(x.query,s)))){r.push("?");r.push(u)}if((t=x.fragment)){r.push("#");r.push(m(t,e))}return r.join("")}};d.getComponents=function(s){var r="";s=s||r;var p=s.match(b)||[],q={};l(g,function(t,u){q[u]=p[t]});return q};j.Uri=d})(Dynamsoft.Lib);(function(c,b){var e=c.Lib,d=e.win,a=20200622;if(e._promise_ver){if(e.isNumber(e._promise_ver)&&e._promise_ver>=a){return}}e._promise_ver=a;if(e.isFunction(d.__zone_symbol__Promise)){e.nativePromise=d.__zone_symbol__Promise}if(self&&self.Promise){e.Promise=self.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}else{if(d&&d.Promise){e.Promise=d.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}}if(!d.Map){d.Map=function(){this.keys=new Array();this.data=new Object();this.set=function(f,g){if(this.data[f]==null){if(this.keys.indexOf(f)==-1){this.keys.push(f)}}this.data[f]=g};this.get=function(f){return this.data[f]}}}!function(f){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=f()}else{if("function"==typeof define&&define.amd){define([],f)}else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self),g.Promise=f()}}}(function(){var f,h,i;return function g(k,m,q){function j(t,o){if(!m[t]){if(!k[t]){var v="function"==typeof _dereq_&&_dereq_;if(!o&&v){return v(t,!0)}if(p){return p(t,!0)}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=m[t]={exports:{}};k[t][0].call(n.exports,function(s){var u=k[t][1][s];return j(u?u:s)},n,n.exports,g,k,m,q)}return m[t].exports}for(var p="function"==typeof _dereq_&&_dereq_,l=0;l<q.length;l++){j(q[l])}return j}({1:[function(j,k,l){k.exports=function(m){function o(n){var s=new p(n),q=s.promise();return s.setHowMany(1),s.setUnwrap(),s.init(),q}var p=m._SomePromiseArray;m.any=function(n){return o(n)},m.prototype.any=function(){return o(this)}}},{}],2:[function(C,y,q){function j(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new x(16),this._normalQueue=new x(16),this._haveDrainedQueues=!1;var l=this;this.drainQueues=function(){l._drainQueues()},this._schedule=k}function w(l,o,p){this._lateQueue.push(l,o,p),this._queueTick()}function m(l,o,p){this._normalQueue.push(l,o,p),this._queueTick()}function D(l){this._normalQueue._pushOne(l),this._queueTick()}function A(l){for(;l.length()>0;){z(l)}}function z(l){var p=l.shift();if("function"!=typeof p){p._settlePromises()}else{var s=l.shift(),o=l.shift();p.call(s,o)}}var B;try{throw new Error}catch(v){B=v}var k=C("./schedule"),x=C("./queue");j.prototype.setScheduler=function(l){var n=this._schedule;return this._schedule=l,this._customScheduler=!0,n},j.prototype.hasCustomScheduler=function(){return this._customScheduler},j.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},j.prototype.fatalError=function(l,n){n?(process.stderr.write("Fatal "+(l instanceof Error?l.stack:l)+"\n"),process.exit(2)):this.throwLater(l)},j.prototype.throwLater=function(l,o){if(1===arguments.length&&(o=l,l=function(){throw o}),"undefined"!=typeof setTimeout){setTimeout(function(){l(o)},0)}else{try{this._schedule(function(){l(o)})}catch(p){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}}},j.prototype.invokeLater=w,j.prototype.invoke=m,j.prototype.settlePromises=D,j.prototype._drainQueues=function(){A(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,A(this._lateQueue)},j.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},j.prototype._reset=function(){this._isTickUsed=!1},y.exports=j,y.exports.firstLineError=B},{"./queue":26,"./schedule":29}],3:[function(j,k,l){k.exports=function(y,v,q,m){var u=!1,p=function(n,o){this._reject(o)},z=function(n,o){o.promiseRejectionQueued=!0,o.bindingPromise._then(p,p,null,this,n)},x=function(n,o){0===(50397184&this._bitField)&&this._resolveCallback(o.target)},w=function(n,o){o.promiseRejectionQueued||this._reject(n)};y.prototype.bind=function(A){u||(u=!0,y.prototype._propagateFrom=m.propagateFromFunction(),y.prototype._boundValue=m.boundValueFunction());var r=q(A),n=new y(v);n._propagateFrom(this,1);var t=this._target();if(n._setBoundTo(r),r instanceof y){var s={promiseRejectionQueued:!1,promise:n,target:t,bindingPromise:r};t._then(v,z,void 0,n,s),r._then(x,w,void 0,n,s),n._setOnCancel(r)}else{n._resolveCallback(t)}return n},y.prototype._setBoundTo=function(n){void 0!==n?(this._bitField=2097152|this._bitField,this._boundTo=n):this._bitField=-2097153&this._bitField},y.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},y.bind=function(o,r){return y.resolve(r).bind(o)}}},{}],4:[function(k,m,q){function l(){try{Promise===p&&(Promise=j)}catch(n){}return p}var j;"undefined"!=typeof Promise&&(j=Promise);var p=k("./promise")();p.noConflict=l,m.exports=p},{"./promise":22}],5:[function(k,m,q){var l=Object.create;if(l){var j=l(null),p=l(null);j[" size"]=p[" size"]=0}m.exports=function(x){function A(s,C){var B;if(null!=s&&(B=s[C]),"function"!=typeof B){var o="Object "+t.classString(s)+" has no method '"+t.toString(C)+"'";throw new x.TypeError(o)}return B}function w(n){var s=this.pop(),o=A(n,s);return o.apply(n,this)}function u(n){return n[this]}function y(n){var o=+this;return 0>o&&(o=Math.max(0,o+n.length)),n[o]}var v,t=k("./util"),z=t.canEvaluate;t.isIdentifier;x.prototype.call=function(n){var o=[].slice.call(arguments,1);return o.push(n),this._then(w,void 0,void 0,o,void 0)},x.prototype.get=function(o){var B,C="number"==typeof o;if(C){B=y}else{if(z){var s=v(o);B=null!==s?s:u}else{B=u}}return this._then(B,void 0,void 0,o,void 0)}}},{"./util":36}],6:[function(j,k,l){k.exports=function(u,x,t,p){var v=j("./util"),q=v.tryCatch,m=v.errorObj,w=u._async;u.prototype["break"]=u.prototype.cancel=function(){if(!p.cancellation()){return this._warn("cancellation is disabled")}for(var o=this,r=o;o._isCancellable();){if(!o._cancelBy(r)){r._isFollowing()?r._followee().cancel():r._cancelBranched();break}var s=o._cancellationParent;if(null==s||!s._isCancellable()){o._isFollowing()?o._followee().cancel():o._cancelBranched();break}o._isFollowing()&&o._followee().cancel(),o._setWillBeCancelled(),r=o,o=s}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(n){return n===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),w.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(o,y){if(v.isArray(o)){for(var z=0;z<o.length;++z){this._doInvokeOnCancel(o[z],y)}}else{if(void 0!==o){if("function"==typeof o){if(!y){var s=q(o).call(this._boundValue());s===m&&(this._attachExtraTrace(s.e),w.throwLater(s.e))}}else{o._resultCancelled(this)}}}},u.prototype._invokeOnCancel=function(){var n=this._onCancel();this._unsetOnCancel(),w.invoke(this._doInvokeOnCancel,this,n)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(j,k,l){k.exports=function(t){function v(r,s,o){return function(C){var x=o._boundValue();r:for(var n=0;n<r.length;++n){var A=r[n];if(A===Error||null!=A&&A.prototype instanceof Error){if(C instanceof A){return u(s).call(x,C)}}else{if("function"==typeof A){var z=u(A).call(x,C);if(z===p){return z}if(z){return u(s).call(x,C)}}else{if(q.isObject(C)){for(var y=m(A),w=0;w<y.length;++w){var B=y[w];if(A[B]!=C[B]){continue r}}return u(s).call(x,C)}}}}return t}}var q=j("./util"),m=j("./es5").keys,u=q.tryCatch,p=q.errorObj;return v}},{"./es5":13,"./util":36}],8:[function(j,k,l){k.exports=function(p){function s(){this._trace=new s.CapturedTrace(q())}function v(){return m?new s:void 0}function q(){var n=u.length-1;return n>=0?u[n]:void 0}var m=!1,u=[];return p.prototype._promiseCreated=function(){},p.prototype._pushContext=function(){},p.prototype._popContext=function(){return null},p._peekContext=p.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,u.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var n=u.pop(),o=n._promiseCreated;return n._promiseCreated=null,o}return null},s.CapturedTrace=null,s.create=v,s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var y=p.prototype._pushContext,w=p.prototype._popContext,t=p._peekContext,r=p.prototype._peekContext,x=p.prototype._promiseCreated;s.deactivateLongStackTraces=function(){p.prototype._pushContext=y,p.prototype._popContext=w,p._peekContext=t,p.prototype._peekContext=r,p.prototype._promiseCreated=x,m=!1},m=!0,p.prototype._pushContext=s.prototype._pushContext,p.prototype._popContext=s.prototype._popContext,p._peekContext=p.prototype._peekContext=q,p.prototype._promiseCreated=function(){var n=this._peekContext();n&&null==n._promiseCreated&&(n._promiseCreated=this)}},s}},{}],9:[function(j,k,l){k.exports=function(a7,aW,aR,a2){function aV(m,n){return{promise:n}}function aQ(){return !1}function bb(o,q,s){var p=this;try{o(q,s,function(n){if("function"!=typeof n){throw new TypeError("onCancel must be a function, got: "+aB.toString(n))}p._attachCancellationCallback(n)})}catch(m){return m}}function a9(m){if(!this._isCancellable()){return this}var n=this._onCancel();void 0!==n?aB.isArray(n)?n.push(m):this._setOnCancel([n,m]):this._setOnCancel(m)}function aP(){return this._onCancelField}function aY(m){this._onCancelField=m}function aU(){this._cancellationParent=void 0,this._onCancelField=void 0}function a6(m,o){if(0!==(1&o)){this._cancellationParent=m;var p=m._branchesRemainingToCancel;void 0===p&&(p=0),m._branchesRemainingToCancel=p+1}0!==(2&o)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a3(m,n){0!==(2&n)&&m._isBound()&&this._setBoundTo(m._boundTo)}function bc(){var m=this._boundTo;return void 0!==m&&m instanceof a7?m.isFulfilled()?m.value():void 0:m}function a8(){this._trace=new ad(this._peekContext())}function aO(m,p){if(aS(m)){var q=this._trace;if(void 0!==q&&p&&(q=q._parent),void 0!==q){q.attachExtraTrace(m)}else{if(!m.__stackCleaned__){var o=ax(m);aB.notEnumerableProp(m,"stack",o.message+"\n"+o.stack.join("\n")),aB.notEnumerableProp(m,"__stackCleaned__",!0)}}}}function aL(){this._trace=void 0}function a4(F,B,w,m,y){if(void 0===F&&null!==B&&t){if(void 0!==y&&y._returnedNonUndefined()){return}if(0===(65535&m._bitField)){return}w&&(w+=" ");var v="",G="";if(B._trace){for(var D=B._trace.stack.split("\n"),C=aZ(D),E=C.length-1;E>=0;--E){var x=C[E];if(!aj.test(x)){var q=x.match(aw);q&&(v="at "+q[1]+":"+q[2]+":"+q[3]+" ");break}}if(C.length>0){for(var A=C[0],E=0;E<D.length;++E){if(D[E]===A){E>0&&(G="\n"+D[E-1]);break}}}}var z="a promise was created in a "+w+"handler "+v+"but was not returned from it, see http://goo.gl/rRqMUw"+G;m._warn(z,!0,B)}}function aX(m,o){var p=m+" is deprecated and will be removed in a future version.";return o&&(p+=" Use "+o+" instead."),ba(p)}function ba(p,w,u){if(aF.warnings){var m,v=new ae(p);if(w){u._attachExtraTrace(v)}else{if(aF.longStackTraces&&(m=a7._peekContext())){m.attachExtraTrace(v)}else{var q=ax(v);v.stack=q.message+"\n"+q.stack.join("\n")}}aG("warning",v)||aM(v,"",!0)}}function aN(m,o){for(var p=0;p<o.length-1;++p){o[p].push("From previous event:"),o[p]=o[p].join("\n")}return p<o.length&&(o[p]=o[p].join("\n")),m+"\n"+o.join("\n")}function aA(m){for(var n=0;n<m.length;++n){(0===m[n].length||n+1<m.length&&m[n][0]===m[n+1][0])&&(m.splice(n,1),n--)}}function a1(y){for(var v=y[0],q=1;q<y.length;++q){for(var m=y[q],u=v.length-1,p=v[u],z=-1,x=m.length-1;x>=0;--x){if(m[x]===p){z=x;break}}for(var x=z;x>=0;--x){var w=m[x];if(v[u]!==w){break}v.pop(),u--}v=m}}function aZ(p){for(var s=[],v=0;v<p.length;++v){var q=p[v],m="    (No stack trace)"===q||aK.test(q),u=m&&ag(q);m&&!u&&(ac&&" "!==q.charAt(0)&&(q="    "+q),s.push(q))}return s}function ay(m){for(var p=m.stack.replace(/\s+$/g,"").split("\n"),q=0;q<p.length;++q){var o=p[q];if("    (No stack trace)"===o||aK.test(o)){break}}return q>0&&"SyntaxError"!=m.name&&(p=p.slice(q)),p}function ax(m){var o=m.stack,p=m.toString();return o="string"==typeof o&&o.length>0?ay(m):["    (No stack trace)"],{message:p,stack:"SyntaxError"==m.name?o:aZ(o)}}function aM(o,q,s){if("undefined"!=typeof console){var p;if(aB.isObject(o)){var m=o.stack;p=q+ab(m,o)}else{p=q+String(o)}"function"==typeof ar?ar(p,s):("function"==typeof console.log||"object"==typeof console.log)&&console.log(p)}}function af(p,s,v,q){var m=!1;try{"function"==typeof s&&(m=!0,"rejectionHandled"===p?s(q):s(v,q))}catch(u){am.throwLater(u)}"unhandledRejection"===p?aG(p,v,q)||m||aM(v,"Unhandled rejection "):aG(p,q)}function ak(o){var q;if("function"==typeof o){q="[function "+(o.name||"anonymous")+"]"}else{q=o&&"function"==typeof o.toString?o.toString():aB.toString(o);var s=/\[object [a-zA-Z0-9$_]+\]/;if(s.test(q)){try{var p=JSON.stringify(o);q=p}catch(m){}}0===q.length&&(q="(empty array)")}return"(<"+ai(q)+">, no stack trace)"}function ai(m){var n=41;return m.length<n?m:m.substr(0,n-3)+"..."}function ah(){return"function"==typeof aI}function al(m){var n=m.match(aD);return n?{fileName:n[1],line:parseInt(n[2],10)}:void 0}function aC(A,w){if(ah()){for(var q,m,v=(A.stack||"").split("\n"),p=(w.stack||"").split("\n"),B=-1,y=-1,x=0;x<v.length;++x){var z=al(v[x]);if(z){q=z.fileName,B=z.line;break}}for(var x=0;x<p.length;++x){var z=al(p[x]);if(z){m=z.fileName,y=z.line;break}}0>B||0>y||!q||!m||q!==m||B>=y||(ag=function(n){if(aJ.test(n)){return !0}var o=al(n);return o&&o.fileName===q&&B<=o.line&&o.line<=y?!0:!1})}}function ad(m){this._parent=m,this._promisesCreated=0;var n=this._length=1+(void 0===m?0:m._length);aI(this,ad),n>32&&this.uncycle()}var au,az,ar,ao,am=a7._async,ae=j("./errors").Warning,aB=j("./util"),an=j("./es5"),aS=aB.canAttachTrace,aJ=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,aj=/\((?:timers\.js):\d+:\d+\)/,aw=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,aK=null,ab=null,ac=!1,ap=!(0==aB.env("BLUEBIRD_DEBUG")||!aB.env("BLUEBIRD_DEBUG")&&"development"!==aB.env("NODE_ENV")),aq=!(0==aB.env("BLUEBIRD_WARNINGS")||!ap&&!aB.env("BLUEBIRD_WARNINGS")),aa=!(0==aB.env("BLUEBIRD_LONG_STACK_TRACES")||!ap&&!aB.env("BLUEBIRD_LONG_STACK_TRACES")),t=0!=aB.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(aq||!!aB.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function m(){for(var n=0;n<o.length;++n){o[n]._notifyUnhandledRejection()}p()}function p(){o.length=0}var o=[];ao=function(n){o.push(n),setTimeout(m,1)},an.defineProperty(a7,"_unhandledRejectionCheck",{value:m}),an.defineProperty(a7,"_unhandledRejectionClear",{value:p})}(),a7.prototype.suppressUnhandledRejections=function(){var m=this._target();m._bitField=-1048577&m._bitField|524288},a7.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),ao(this))},a7.prototype._notifyUnhandledRejectionIsHandled=function(){af("rejectionHandled",au,void 0,this)},a7.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a7.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},a7.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var m=this._settledValue();this._setUnhandledRejectionIsNotified(),af("unhandledRejection",az,m,this)}},a7.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a7.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a7.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},a7.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a7.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a7.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},a7.prototype._warn=function(m,o,p){return ba(m,o,p||this)},a7.onPossiblyUnhandledRejection=function(m){var o=a7._getContext();az=aB.contextBind(o,m)},a7.onUnhandledRejectionHandled=function(m){var o=a7._getContext();au=aB.contextBind(o,m)};var a5=function(){};a7.longStackTraces=function(){if(am.haveItemsQueued()&&!aF.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!aF.longStackTraces&&ah()){var n=a7.prototype._captureStackTrace,o=a7.prototype._attachExtraTrace,m=a7.prototype._dereferenceTrace;aF.longStackTraces=!0,a5=function(){if(am.haveItemsQueued()&&!aF.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}a7.prototype._captureStackTrace=n,a7.prototype._attachExtraTrace=o,a7.prototype._dereferenceTrace=m,aW.deactivateLongStackTraces(),aF.longStackTraces=!1},a7.prototype._captureStackTrace=a8,a7.prototype._attachExtraTrace=aO,a7.prototype._dereferenceTrace=aL,aW.activateLongStackTraces()}},a7.hasLongStackTraces=function(){return aF.longStackTraces&&ah()};var aT={unhandledrejection:{before:function(){var m=aB.global.onunhandledrejection;return aB.global.onunhandledrejection=null,m},after:function(m){aB.global.onunhandledrejection=m}},rejectionhandled:{before:function(){var m=aB.global.onrejectionhandled;return aB.global.onrejectionhandled=null,m},after:function(m){aB.global.onrejectionhandled=m}}},a0=function(){var m=function(q,r){if(!q){return !aB.global.dispatchEvent(r)}var s;try{return s=q.before(),!aB.global.dispatchEvent(r)}finally{q.after(s)}};try{if("function"==typeof CustomEvent){var o=new CustomEvent("CustomEvent");return aB.global.dispatchEvent(o),function(u,v){u=u.toLowerCase();var s={detail:v,cancelable:!0},q=new CustomEvent(u,s);return an.defineProperty(q,"promise",{value:v.promise}),an.defineProperty(q,"reason",{value:v.reason}),m(aT[u],q)}}if("function"==typeof Event){var o=new Event("CustomEvent");return aB.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=new Event(s,{cancelable:!0});return q.detail=u,an.defineProperty(q,"promise",{value:u.promise}),an.defineProperty(q,"reason",{value:u.reason}),m(aT[s],q)}}var o=document.createEvent("CustomEvent");return o.initCustomEvent("testingtheevent",!1,!0,{}),aB.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=document.createEvent("CustomEvent");return q.initCustomEvent(s,!1,!0,u),m(aT[s],q)}}catch(p){}return function(){return !1}}(),aH=function(){return aB.isNode?function(){return process.emit.apply(process,arguments)}:aB.global?function(m){var o="on"+m.toLowerCase(),p=aB.global[o];return p?(p.apply(aB.global,[].slice.call(arguments,1)),!0):!1}:function(){return !1}}(),aE={promiseCreated:aV,promiseFulfilled:aV,promiseRejected:aV,promiseResolved:aV,promiseCancelled:aV,promiseChained:function(m,o,p){return{promise:o,child:p}},warning:function(m,n){return{warning:n}},unhandledRejection:function(m,o,p){return{reason:o,promise:p}},rejectionHandled:aV},aG=function(m){var p=!1;try{p=aH.apply(null,arguments)}catch(q){am.throwLater(q),p=!0}var o=!1;try{o=a0(m,aE[m].apply(null,arguments))}catch(q){am.throwLater(q),o=!0}return o||p};a7.config=function(m){if(m=Object(m),"longStackTraces" in m&&(m.longStackTraces?a7.longStackTraces():!m.longStackTraces&&a7.hasLongStackTraces()&&a5()),"warnings" in m){var r=m.warnings;aF.warnings=!!r,t=aF.warnings,aB.isObject(r)&&"wForgottenReturn" in r&&(t=!!r.wForgottenReturn)}if("cancellation" in m&&m.cancellation&&!aF.cancellation){if(am.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}a7.prototype._clearCancellationData=aU,a7.prototype._propagateFrom=a6,a7.prototype._onCancel=aP,a7.prototype._setOnCancel=aY,a7.prototype._attachCancellationCallback=a9,a7.prototype._execute=bb,av=a6,aF.cancellation=!0}if("monitoring" in m&&(m.monitoring&&!aF.monitoring?(aF.monitoring=!0,a7.prototype._fireEvent=aG):!m.monitoring&&aF.monitoring&&(aF.monitoring=!1,a7.prototype._fireEvent=aQ)),"asyncHooks" in m&&aB.nodeSupportsAsyncResource){var q=aF.asyncHooks,p=!!m.asyncHooks;q!==p&&(aF.asyncHooks=p,p?aR():a2())}return a7},a7.prototype._fireEvent=aQ,a7.prototype._execute=function(m,p,q){try{m(p,q)}catch(o){return o}},a7.prototype._onCancel=function(){},a7.prototype._setOnCancel=function(m){},a7.prototype._attachCancellationCallback=function(m){},a7.prototype._captureStackTrace=function(){},a7.prototype._attachExtraTrace=function(){},a7.prototype._dereferenceTrace=function(){},a7.prototype._clearCancellationData=function(){},a7.prototype._propagateFrom=function(m,n){};var av=a3,ag=function(){return !1},aD=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;aB.inherits(ad,Error),aW.CapturedTrace=ad,ad.prototype.uncycle=function(){var B=this._length;if(!(2>B)){for(var x=[],q={},m=0,w=this;void 0!==w;++m){x.push(w),w=w._parent}B=this._length=m;for(var m=B-1;m>=0;--m){var p=x[m].stack;void 0===q[p]&&(q[p]=m)}for(var m=0;B>m;++m){var C=x[m].stack,z=q[C];if(void 0!==z&&z!==m){z>0&&(x[z-1]._parent=void 0,x[z-1]._length=1),x[m]._parent=void 0,x[m]._length=1;var y=m>0?x[m-1]:this;B-1>z?(y._parent=x[z+1],y._parent.uncycle(),y._length=y._parent._length+1):(y._parent=void 0,y._length=1);for(var A=y._length+1,v=m-2;v>=0;--v){x[v]._length=A,A++}return}}}},ad.prototype.attachExtraTrace=function(o){if(!o.__stackCleaned__){this.uncycle();for(var q=ax(o),s=q.message,p=[q.stack],m=this;void 0!==m;){p.push(aZ(m.stack.split("\n"))),m=m._parent}a1(p),aA(p),aB.notEnumerableProp(o,"stack",aN(s,p)),aB.notEnumerableProp(o,"__stackCleaned__",!0)}};var aI=function(){var p=/^\s*at\s*/,s=function(n,o){return"string"==typeof n?n:void 0!==o.name&&void 0!==o.message?o.toString():ak(o)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,aK=p,ab=s;var v=Error.captureStackTrace;return ag=function(n){return aJ.test(n)},function(n,o){Error.stackTraceLimit+=6,v(n,o),Error.stackTraceLimit-=6}}var q=new Error;if("string"==typeof q.stack&&q.stack.split("\n")[0].indexOf("stackDetection@")>=0){return aK=/@/,ab=s,ac=!0,function(n){n.stack=(new Error).stack}}var m;try{throw new Error}catch(u){m="stack" in u}return"stack" in q||!m||"number"!=typeof Error.stackTraceLimit?(ab=function(n,o){return"string"==typeof n?n:"object"!=typeof o&&"function"!=typeof o||void 0===o.name||void 0===o.message?ak(o):o.toString()},null):(aK=p,ab=s,function(n){Error.stackTraceLimit+=6;try{throw new Error}catch(o){n.stack=o.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(ar=function(m){console.warn(m)},aB.isNode&&process.stderr.isTTY?ar=function(m,o){var p=o?"[33m":"[31m";console.warn(p+m+"[0m\n")}:aB.isNode||"string"!=typeof(new Error).stack||(ar=function(m,n){console.warn("%c"+m,n?"color: darkorange":"color: red")}));var aF={warnings:aq,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return aa&&a7.longStackTraces(),{asyncHooks:function(){return aF.asyncHooks},longStackTraces:function(){return aF.longStackTraces},warnings:function(){return aF.warnings},cancellation:function(){return aF.cancellation},monitoring:function(){return aF.monitoring},propagateFromFunction:function(){return av},boundValueFunction:function(){return bc},checkForgottenReturns:a4,setBounds:aC,warn:ba,deprecated:aX,CapturedTrace:ad,fireDomEvent:a0,fireGlobalEvent:aH}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(j,k,l){k.exports=function(m){function o(){return this.value}function p(){throw this.reason}m.prototype["return"]=m.prototype.thenReturn=function(q){return q instanceof m&&q.suppressUnhandledRejections(),this._then(o,void 0,void 0,{value:q},void 0)},m.prototype["throw"]=m.prototype.thenThrow=function(n){return this._then(p,void 0,void 0,{reason:n},void 0)},m.prototype.catchThrow=function(n){if(arguments.length<=1){return this._then(void 0,p,void 0,{reason:n},void 0)}var s=arguments[1],q=function(){throw s};return this.caught(n,q)},m.prototype.catchReturn=function(t){if(arguments.length<=1){return t instanceof m&&t.suppressUnhandledRejections(),this._then(void 0,o,void 0,{value:t},void 0)}var s=arguments[1];s instanceof m&&s.suppressUnhandledRejections();var q=function(){return s};return this.caught(t,q)}}},{}],11:[function(j,k,l){k.exports=function(p,s){function v(){return u(this)}function q(o,r){return m(o,r,s,s)}var m=p.reduce,u=p.all;p.prototype.each=function(n){return m(this,n,s,0)._then(v,void 0,void 0,this,void 0)},p.prototype.mapSeries=function(n){return m(this,n,s,s)},p.each=function(n,o){return m(n,o,s,0)._then(v,void 0,void 0,n,void 0)},p.mapSeries=q}},{}],12:[function(w,J,C){function z(l,m){function o(n){return this instanceof o?(A(this,"message","string"==typeof n?n:m),A(this,"name",l),void (Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new o(n)}return E(o,Error),o}function F(l){return this instanceof F?(A(this,"name","OperationalError"),A(this,"message",l),this.cause=l,this.isOperational=!0,void (l instanceof Error?(A(this,"message",l.message),A(this,"stack",l.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new F(l)}var B,x,N=w("./es5"),L=N.freeze,q=w("./util"),E=q.inherits,A=q.notEnumerableProp,I=z("Warning","warning"),G=z("CancellationError","cancellation error"),O=z("TimeoutError","timeout error"),K=z("AggregateError","aggregate error");try{B=TypeError,x=RangeError}catch(k){B=z("TypeError","type error"),x=z("RangeError","range error")}for(var j="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),H=0;H<j.length;++H){"function"==typeof Array.prototype[j[H]]&&(K.prototype[j[H]]=Array.prototype[j[H]])}N.defineProperty(K.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),K.prototype.isOperational=!0;var D=0;K.prototype.toString=function(){var m=Array(4*D+1).join(" "),s="\n"+m+"AggregateError of:\n";D++,m=Array(4*D+1).join(" ");for(var v=0;v<this.length;++v){for(var p=this[v]===this?"[Circular AggregateError]":this[v]+"",l=p.split("\n"),u=0;u<l.length;++u){l[u]=m+l[u]}p=l.join("\n"),s+=p+"\n"}return D--,s},E(F,Error);var M=Error.__BluebirdErrorTypes__;M||(M=L({CancellationError:G,TimeoutError:O,OperationalError:F,RejectionError:F,AggregateError:K}),N.defineProperty(Error,"__BluebirdErrorTypes__",{value:M,writable:!1,enumerable:!1,configurable:!1})),J.exports={Error:Error,TypeError:B,RangeError:x,CancellationError:M.CancellationError,OperationalError:M.OperationalError,TimeoutError:M.TimeoutError,AggregateError:M.AggregateError,Warning:I}},{"./es5":13,"./util":36}],13:[function(C,y,q){var j=function(){return void 0===this}();if(j){y.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:j,propertyIsWritable:function(l,o){var p=Object.getOwnPropertyDescriptor(l,o);return !(p&&!p.writable&&!p.set)}}}else{var w={}.hasOwnProperty,m={}.toString,D={}.constructor.prototype,A=function(l){var o=[];for(var p in l){w.call(l,p)&&o.push(p)}return o},z=function(l,n){return{value:l[n]}},B=function(l,o,p){return l[o]=p.value,l},v=function(l){return l},k=function(l){try{return Object(l).constructor.prototype}catch(n){return D}},x=function(l){try{return"[object Array]"===m.call(l)}catch(n){return !1}};y.exports={isArray:x,keys:A,names:A,defineProperty:B,getDescriptor:z,freeze:v,getPrototypeOf:k,isES5:j,propertyIsWritable:function(){return !0}}}},{}],14:[function(j,k,l){k.exports=function(m,o){var p=m.map;m.prototype.filter=function(n,q){return p(this,n,q,o)},m.filter=function(q,s,n){return p(q,s,n,o)}}},{}],15:[function(j,k,l){k.exports=function(A,v,m){function x(o,p,r){this.promise=o,this.type=p,this.handler=r,this.called=!1,this.cancelPromise=null}function t(n){this.finallyHandler=n}function E(n,o){return null!=n.cancelPromise?(arguments.length>1?n.cancelPromise._reject(o):n.cancelPromise._cancel(),n.cancelPromise=null,!0):!1}function C(){return D.call(this,this.promise._target()._settledValue())}function B(n){return E(this,n)?void 0:(z.e=n,z)}function D(s){var r=this.promise,p=this.handler;if(!this.called){this.called=!0;var n=this.isFinallyHandler()?p.call(r._boundValue()):p.call(r._boundValue(),s);if(n===m){return n}if(void 0!==n){r._setReturnedNonUndefined();var F=v(n,r);if(F instanceof A){if(null!=this.cancelPromise){if(F._isCancelled()){var o=new q("late cancellation observer");return r._attachExtraTrace(o),z.e=o,z}F.isPending()&&F._attachCancellationCallback(new t(this))}return F._then(C,B,void 0,this,void 0)}}}return r.isRejected()?(E(this),z.e=s,z):(E(this),s)}var w=j("./util"),q=A.CancellationError,z=w.errorObj,y=j("./catch_filter")(m);return x.prototype.isFinallyHandler=function(){return 0===this.type},t.prototype._resultCancelled=function(){E(this.finallyHandler)},A.prototype._passThrough=function(o,s,u,p){return"function"!=typeof o?this.then():this._then(u,p,void 0,new x(this,s,o),void 0)},A.prototype.lastly=A.prototype["finally"]=function(n){return this._passThrough(n,0,D,D)},A.prototype.tap=function(n){return this._passThrough(n,1,D)},A.prototype.tapCatch=function(F){var J=arguments.length;if(1===J){return this._passThrough(F,1,void 0,D)}var H,u=new Array(J-1),I=0;for(H=0;J-1>H;++H){var G=arguments[H];if(!w.isObject(G)){return A.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+w.classString(G)))}u[I++]=G}u.length=I;var p=arguments[H];return this._passThrough(y(u,p,this),1,void 0,D)},x}},{"./catch_filter":7,"./util":36}],16:[function(j,k,l){k.exports=function(A,v,m,x,t,F){function C(u,K,H){for(var I=0;I<K.length;++I){H._pushContext();var G=y(K[I])(u);if(H._popContext(),G===z){H._pushContext();var p=A.reject(z.e);return H._popContext(),p}var J=x(G,H);if(J instanceof A){return J}}return null}function B(G,J,s,H){if(F.cancellation()){var p=new A(m),I=this._finallyPromise=new A(m);this._promise=p.lastly(function(){return I}),p._captureStackTrace(),p._setOnCancel(this)}else{var r=this._promise=new A(m);r._captureStackTrace()}this._stack=H,this._generatorFunction=G,this._receiver=J,this._generator=void 0,this._yieldHandlers="function"==typeof s?[s].concat(D):D,this._yieldedPromise=null,this._cancellationPhase=!1}var E=j("./errors"),w=E.TypeError,q=j("./util"),z=q.errorObj,y=q.tryCatch,D=[];q.inherits(B,t),B.prototype._isResolved=function(){return null===this._promise},B.prototype._cleanup=function(){this._promise=this._generator=null,F.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},B.prototype._promiseCancelled=function(){if(!this._isResolved()){var o,s="undefined"!=typeof this._generator["return"];if(s){this._promise._pushContext(),o=y(this._generator["return"]).call(this._generator,void 0),this._promise._popContext()}else{var p=new A.CancellationError("generator .return() sentinel");A.coroutine.returnSentinel=p,this._promise._attachExtraTrace(p),this._promise._pushContext(),o=y(this._generator["throw"]).call(this._generator,p),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(o)}},B.prototype._promiseFulfilled=function(n){this._yieldedPromise=null,this._promise._pushContext();var o=y(this._generator.next).call(this._generator,n);this._promise._popContext(),this._continue(o)},B.prototype._promiseRejected=function(n){this._yieldedPromise=null,this._promise._attachExtraTrace(n),this._promise._pushContext();var o=y(this._generator["throw"]).call(this._generator,n);this._promise._popContext(),this._continue(o)},B.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof A){var n=this._yieldedPromise;this._yieldedPromise=null,n.cancel()}},B.prototype.promise=function(){return this._promise},B.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},B.prototype._continue=function(p){var I=this._promise;if(p===z){return this._cleanup(),this._cancellationPhase?I.cancel():I._rejectCallback(p.e,!1)}var G=p.value;if(p.done===!0){return this._cleanup(),this._cancellationPhase?I.cancel():I._resolveCallback(G)}var H=x(G,this._promise);if(!(H instanceof A)&&(H=C(H,this._yieldHandlers,this._promise),null===H)){return void this._promiseRejected(new w("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(G))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))}H=H._target();var u=H._bitField;0===(50397184&u)?(this._yieldedPromise=H,H._proxy(this,null)):0!==(33554432&u)?A._async.invoke(this._promiseFulfilled,this,H._value()):0!==(16777216&u)?A._async.invoke(this._promiseRejected,this,H._reason()):this._promiseCancelled()},A.coroutine=function(p,u){if("function"!=typeof p){throw new w("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var G=Object(u).yieldHandler,s=B,o=(new Error).stack;return function(){var r=p.apply(this,arguments),H=new s(void 0,void 0,G,o),n=H.promise();return H._generator=r,H._promiseFulfilled(void 0),n}},A.coroutine.addYieldHandler=function(n){if("function"!=typeof n){throw new w("expecting a function but got "+q.classString(n))}D.push(n)},A.spawn=function(o){if(F.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof o){return v("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var p=new B(o,this),n=p.promise();return p._run(A.spawn),n}}},{"./errors":12,"./util":36}],17:[function(j,k,l){k.exports=function(t,v,q,m,u){var p=j("./util");p.canEvaluate,p.tryCatch,p.errorObj;t.join=function(){var o,w=arguments.length-1;if(w>0&&"function"==typeof arguments[w]){o=arguments[w];var s}var n=[].slice.call(arguments);o&&n.pop();var s=new v(n).promise();return void 0!==o?s.spread(o):s}}},{"./util":36}],18:[function(j,k,l){k.exports=function(z,v,m,x,t,D){function B(u,H,F,p){this.constructor$(u),this._promise._captureStackTrace();var E=z._getContext();if(this._callback=C.contextBind(E,H),this._preservedValues=p===t?new Array(this.length()):null,this._limit=F,this._inFlight=0,this._queue=[],y.invoke(this._asyncInit,this,void 0),C.isArray(u)){for(var o=0;o<u.length;++o){var G=u[o];G instanceof z&&G.suppressUnhandledRejections()}}}function A(r,F,p,E){if("function"!=typeof F){return m("expecting a function but got "+C.classString(F))}var u=0;if(void 0!==p){if("object"!=typeof p||null===p){return z.reject(new TypeError("options argument must be an object but it is "+C.classString(p)))}if("number"!=typeof p.concurrency){return z.reject(new TypeError("'concurrency' must be a number but it is "+C.classString(p.concurrency)))}u=p.concurrency}return u="number"==typeof u&&isFinite(u)&&u>=1?u:0,new B(r,F,u,E).promise()}var C=j("./util"),w=C.tryCatch,q=C.errorObj,y=z._async;C.inherits(B,v),B.prototype._asyncInit=function(){this._init$(void 0,-2)},B.prototype._init=function(){},B.prototype._promiseFulfilled=function(P,E){var p=this._values,s=this.length(),L=this._preservedValues,J=this._limit;if(0>E){if(E=-1*E-1,p[E]=P,J>=1&&(this._inFlight--,this._drainQueue(),this._isResolved())){return !0}}else{if(J>=1&&this._inFlight>=J){return p[E]=P,this._queue.push(E),!1}null!==L&&(L[E]=P);var O=this._promise,H=this._callback,F=O._boundValue();O._pushContext();var N=w(H).call(F,P,E,s),I=O._popContext();if(D.checkForgottenReturns(N,I,null!==L?"Promise.filter":"Promise.map",O),N===q){return this._reject(N.e),!0}var M=x(N,this._promise);if(M instanceof z){M=M._target();var K=M._bitField;if(0===(50397184&K)){return J>=1&&this._inFlight++,p[E]=M,M._proxy(this,-1*(E+1)),!1}if(0===(33554432&K)){return 0!==(16777216&K)?(this._reject(M._reason()),!0):(this._cancel(),!0)}N=M._value()}p[E]=N}var G=++this._totalResolved;return G>=s?(null!==L?this._filter(p,L):this._resolve(p),!0):!1},B.prototype._drainQueue=function(){for(var o=this._queue,s=this._limit,u=this._values;o.length>0&&this._inFlight<s;){if(this._isResolved()){return}var p=o.pop();this._promiseFulfilled(u[p],p)}},B.prototype._filter=function(s,E){for(var G=E.length,u=new Array(G),p=0,F=0;G>F;++F){s[F]&&(u[p++]=E[F])}u.length=p,this._resolve(u)},B.prototype.preservedValues=function(){return this._preservedValues},z.prototype.map=function(n,o){return A(this,n,o,null)},z.map=function(o,s,u,p){return A(o,s,u,p)}}},{"./util":36}],19:[function(j,k,l){k.exports=function(u,w,t,p,v){var q=j("./util"),m=q.tryCatch;u.method=function(n){if("function"!=typeof n){throw new u.TypeError("expecting a function but got "+q.classString(n))}return function(){var y=new u(w);y._captureStackTrace(),y._pushContext();var o=m(n).apply(this,arguments),x=y._popContext();return v.checkForgottenReturns(o,x,"Promise.method",y),y._resolveFromSyncValue(o),y}},u.attempt=u["try"]=function(s){if("function"!=typeof s){return p("expecting a function but got "+q.classString(s))}var x=new u(w);x._captureStackTrace(),x._pushContext();var z;if(arguments.length>1){v.deprecated("calling Promise.try with more than 1 argument");var o=arguments[1],n=arguments[2];z=q.isArray(o)?m(s).apply(n,o):m(s).call(n,o)}else{z=m(s)()}var y=x._popContext();return v.checkForgottenReturns(z,y,"Promise.try",x),x._resolveFromSyncValue(z),x},u.prototype._resolveFromSyncValue=function(n){n===q.errorObj?this._rejectCallback(n.e,!1):this._resolveCallback(n,!0)}}},{"./util":36}],20:[function(B,x,q){function j(l){return l instanceof Error&&v.getPrototypeOf(l)===Error.prototype}function w(p){var r;if(j(p)){r=new A(p),r.name=p.name,r.message=p.message,r.stack=p.stack;for(var u=v.keys(p),l=0;l<u.length;++l){var s=u[l];k.test(s)||(r[s]=p[s])}return r}return C.markAsOriginatingFromRejection(p),p}function m(l,n){return function(D,t){if(null!==l){if(D){var u=w(z(D));l._attachExtraTrace(u),l._reject(u)}else{if(n){var p=[].slice.call(arguments,1);l._fulfill(p)}else{l._fulfill(t)}}l=null}}}var C=B("./util"),z=C.maybeWrapAsError,y=B("./errors"),A=y.OperationalError,v=B("./es5"),k=/^(?:name|message|stack|cause)$/;x.exports=m},{"./errors":12,"./es5":13,"./util":36}],21:[function(j,k,l){k.exports=function(u){function x(r,s){var y=this;if(!v.isArray(r)){return t.call(y,r,s)}var o=m(s).apply(y._boundValue(),[null].concat(r));o===w&&q.throwLater(o.e)}function t(s,z){var A=this,y=A._boundValue(),o=void 0===s?m(z).call(y,null):m(z).call(y,null,s);o===w&&q.throwLater(o.e)}function p(s,z){var A=this;if(!s){var y=new Error(s+"");y.cause=s,s=y}var o=m(z).call(A._boundValue(),s);o===w&&q.throwLater(o.e)}var v=j("./util"),q=u._async,m=v.tryCatch,w=v.errorObj;u.prototype.asCallback=u.prototype.nodeify=function(n,r){if("function"==typeof n){var s=t;void 0!==r&&Object(r).spread&&(s=x),this._then(s,p,void 0,this,n)}return this}}},{"./util":36}],22:[function(j,k,l){k.exports=function(){function ak(){}function ah(m,n){if(null==m||m.constructor!==ap){throw new X("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}if("function"!=typeof n){throw new X("expecting a function but got "+at.classString(n))}}function ap(m){m!==ac&&ah(this,m),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(m),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function aj(m){this.promise._resolveCallback(m)}function ag(m){this.promise._rejectCallback(m,!1)}function ax(m){var n=new ap(ac);n._fulfillmentHandler0=m,n._rejectionHandler0=m,n._promise0=m,n._receiver0=m}var av=function(){return new X("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},af=function(){return new ap.PromiseInspection(this._target())},am=function(m){return ap.reject(new X(m))},ai={},at=j("./util");at.setReflectHandler(af);var aq=function(){var m=process.domain;return void 0===m?null:m},ay=function(){return null},au=function(){return{domain:aq(),async:null}},ae=at.isNode&&at.nodeSupportsAsyncResource?j("async_hooks").AsyncResource:null,ab=function(){return{domain:aq(),async:new ae("Bluebird::Promise")}},ar=at.isNode?au:ay;at.notEnumerableProp(ap,"_getContext",ar);var al=function(){ar=ab,at.notEnumerableProp(ap,"_getContext",ab)},aw=function(){ar=au,at.notEnumerableProp(ap,"_getContext",au)},ad=j("./es5"),Z=j("./async"),ao=new Z;ad.defineProperty(ap,"_async",{value:ao});var an=j("./errors"),X=ap.TypeError=an.TypeError;ap.RangeError=an.RangeError;var W=ap.CancellationError=an.CancellationError;ap.TimeoutError=an.TimeoutError,ap.OperationalError=an.OperationalError,ap.RejectionError=an.OperationalError,ap.AggregateError=an.AggregateError;var ac=function(){},t={},G={},B=j("./thenables")(ap,ac),z=j("./promise_array")(ap,ac,B,am,ak),J=j("./context")(ap),aa=J.create,q=j("./debuggability")(ap,J,al,aw),U=(q.CapturedTrace,j("./finally")(ap,B,G)),Y=j("./catch_filter")(G),Q=j("./nodeback"),M=at.errorObj,K=at.tryCatch;return ap.prototype.toString=function(){return"[object Promise]"},ap.prototype.caught=ap.prototype["catch"]=function(p){var u=arguments.length;if(u>1){var w,s=new Array(u-1),m=0;for(w=0;u-1>w;++w){var v=arguments[w];if(!at.isObject(v)){return am("Catch statement predicate: expecting an object but got "+at.classString(v))}s[m++]=v}if(s.length=m,p=arguments[w],"function"!=typeof p){throw new X("The last argument to .catch() must be a function, got "+at.toString(p))}return this.then(void 0,Y(s,p,this))}return this.then(void 0,p)},ap.prototype.reflect=function(){return this._then(af,af,void 0,this,void 0)},ap.prototype.then=function(m,o){if(q.warnings()&&arguments.length>0&&"function"!=typeof m&&"function"!=typeof o){var p=".then() only accepts functions but was passed: "+at.classString(m);arguments.length>1&&(p+=", "+at.classString(o)),this._warn(p)}return this._then(m,o,void 0,void 0,void 0)},ap.prototype.done=function(m,o){var p=this._then(m,o,void 0,void 0,void 0);p._setIsFinal()},ap.prototype.spread=function(m){return"function"!=typeof m?am("expecting a function but got "+at.classString(m)):this.all()._then(m,void 0,void 0,t,void 0)},ap.prototype.toJSON=function(){var m={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(m.fulfillmentValue=this.value(),m.isFulfilled=!0):this.isRejected()&&(m.rejectionReason=this.reason(),m.isRejected=!0),m},ap.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new z(this).promise()},ap.prototype.error=function(m){return this.caught(at.originatesFromRejection,m)},ap.getNewLibraryCopy=k.exports,ap.is=function(m){return m instanceof ap},ap.fromNode=ap.fromCallback=function(m){var p=new ap(ac);p._captureStackTrace();var s=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,o=K(m)(Q(p,s));return o===M&&p._rejectCallback(o.e,!0),p._isFateSealed()||p._setAsyncGuaranteed(),p},ap.all=function(m){return new z(m).promise()},ap.cast=function(m){var n=B(m);return n instanceof ap||(n=new ap(ac),n._captureStackTrace(),n._setFulfilled(),n._rejectionHandler0=m),n},ap.resolve=ap.fulfilled=ap.cast,ap.reject=ap.rejected=function(m){var n=new ap(ac);return n._captureStackTrace(),n._rejectCallback(m,!0),n},ap.setScheduler=function(m){if("function"!=typeof m){throw new X("expecting a function but got "+at.classString(m))}return ao.setScheduler(m)},ap.prototype._then=function(I,C,x,m,w){var L=void 0!==w,E=L?w:new ap(ac),D=this._target(),H=D._bitField;L||(E._propagateFrom(this,3),E._captureStackTrace(),void 0===m&&0!==(2097152&this._bitField)&&(m=0!==(50397184&H)?this._boundValue():D===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,E));var y=ar();if(0!==(50397184&H)){var v,A,F=D._settlePromiseCtx;0!==(33554432&H)?(A=D._rejectionHandler0,v=I):0!==(16777216&H)?(A=D._fulfillmentHandler0,v=C,D._unsetRejectionIsUnhandled()):(F=D._settlePromiseLateCancellationObserver,A=new W("late cancellation observer"),D._attachExtraTrace(A),v=C),ao.invoke(F,D,{handler:at.contextBind(y,v),promise:E,receiver:m,value:A})}else{D._addCallbacks(I,C,E,m,y)}return E},ap.prototype._length=function(){return 65535&this._bitField},ap.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},ap.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},ap.prototype._setLength=function(m){this._bitField=-65536&this._bitField|65535&m},ap.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},ap.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},ap.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},ap.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},ap.prototype._isFinal=function(){return(4194304&this._bitField)>0},ap.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},ap.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},ap.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},ap.prototype._setAsyncGuaranteed=function(){if(!ao.hasCustomScheduler()){var m=this._bitField;this._bitField=m|(536870912&m)>>2^134217728}},ap.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},ap.prototype._receiverAt=function(m){var n=0===m?this._receiver0:this[4*m-4+3];return n===ai?void 0:void 0===n&&this._isBound()?this._boundValue():n},ap.prototype._promiseAt=function(m){return this[4*m-4+2]},ap.prototype._fulfillmentHandlerAt=function(m){return this[4*m-4+0]},ap.prototype._rejectionHandlerAt=function(m){return this[4*m-4+1]},ap.prototype._boundValue=function(){},ap.prototype._migrateCallback0=function(o){var s=(o._bitField,o._fulfillmentHandler0),u=o._rejectionHandler0,p=o._promise0,m=o._receiverAt(0);void 0===m&&(m=ai),this._addCallbacks(s,u,p,m,null)},ap.prototype._migrateCallbackAt=function(p,u){var w=p._fulfillmentHandlerAt(u),s=p._rejectionHandlerAt(u),m=p._promiseAt(u),v=p._receiverAt(u);void 0===v&&(v=ai),this._addCallbacks(w,s,m,v,null)},ap.prototype._addCallbacks=function(p,w,y,v,m){var x=this._length();if(x>=65531&&(x=0,this._setLength(0)),0===x){this._promise0=y,this._receiver0=v,"function"==typeof p&&(this._fulfillmentHandler0=at.contextBind(m,p)),"function"==typeof w&&(this._rejectionHandler0=at.contextBind(m,w))}else{var u=4*x-4;this[u+2]=y,this[u+3]=v,"function"==typeof p&&(this[u+0]=at.contextBind(m,p)),"function"==typeof w&&(this[u+1]=at.contextBind(m,w))}return this._setLength(x+1),x},ap.prototype._proxy=function(m,n){this._addCallbacks(void 0,void 0,n,m,null)},ap.prototype._resolveCallback=function(v,y){if(0===(117506048&this._bitField)){if(v===this){return this._rejectCallback(av(),!1)}var C=B(v,this);if(!(C instanceof ap)){return this._fulfill(v)}y&&this._propagateFrom(C,2);var x=C._target();if(x===this){return void this._reject(av())}var A=x._bitField;if(0===(50397184&A)){var w=this._length();w>0&&x._migrateCallback0(this);for(var m=1;w>m;++m){x._migrateCallbackAt(this,m)}this._setFollowing(),this._setLength(0),this._setFollowee(C)}else{if(0!==(33554432&A)){this._fulfill(x._value())}else{if(0!==(16777216&A)){this._reject(x._reason())}else{var p=new W("late cancellation observer");x._attachExtraTrace(p),this._reject(p)}}}}},ap.prototype._rejectCallback=function(p,u,w){var s=at.ensureErrorObject(p),m=s===p;if(!m&&!w&&q.warnings()){var v="a promise was rejected with a non-error: "+at.classString(p);this._warn(v,!0)}this._attachExtraTrace(s,u?m:!1),this._reject(p)},ap.prototype._resolveFromExecutor=function(m){if(m!==ac){var p=this;this._captureStackTrace(),this._pushContext();var s=!0,o=this._execute(m,function(n){p._resolveCallback(n)},function(n){p._rejectCallback(n,s)});s=!1,this._popContext(),void 0!==o&&p._rejectCallback(o,!0)}},ap.prototype._settlePromiseFromHandler=function(p,w,y,v){var m=v._bitField;if(0===(65536&m)){v._pushContext();var x;w===t?y&&"number"==typeof y.length?x=K(p).apply(this._boundValue(),y):(x=M,x.e=new X("cannot .spread() a non-array: "+at.classString(y))):x=K(p).call(w,y);var u=v._popContext();m=v._bitField,0===(65536&m)&&(x===G?v._reject(y):x===M?v._rejectCallback(x.e,!1):(q.checkForgottenReturns(x,u,"",v,this),v._resolveCallback(x)))}},ap.prototype._target=function(){for(var m=this;m._isFollowing();){m=m._followee()}return m},ap.prototype._followee=function(){return this._rejectionHandler0},ap.prototype._setFollowee=function(m){this._rejectionHandler0=m},ap.prototype._settlePromise=function(n,v,u,w){var p=n instanceof ap,m=this._bitField,x=0!==(134217728&m);0!==(65536&m)?(p&&n._invokeInternalOnCancel(),u instanceof U&&u.isFinallyHandler()?(u.cancelPromise=n,K(v).call(u,w)===M&&n._reject(M.e)):v===af?n._fulfill(af.call(u)):u instanceof ak?u._promiseCancelled(n):p||n instanceof z?n._cancel():u.cancel()):"function"==typeof v?p?(x&&n._setAsyncGuaranteed(),this._settlePromiseFromHandler(v,u,w,n)):v.call(u,w,n):u instanceof ak?u._isResolved()||(0!==(33554432&m)?u._promiseFulfilled(w,n):u._promiseRejected(w,n)):p&&(x&&n._setAsyncGuaranteed(),0!==(33554432&m)?n._fulfill(w):n._reject(w))},ap.prototype._settlePromiseLateCancellationObserver=function(m){var s=m.handler,v=m.promise,p=m.receiver,u=m.value;"function"==typeof s?v instanceof ap?this._settlePromiseFromHandler(s,p,u,v):s.call(p,u,v):v instanceof ap&&v._reject(u)},ap.prototype._settlePromiseCtx=function(m){this._settlePromise(m.promise,m.handler,m.receiver,m.value)},ap.prototype._settlePromise0=function(o,s,u){var p=this._promise0,m=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(p,o,m,s)},ap.prototype._clearCallbackDataAtIndex=function(m){var n=4*m-4;this[n+2]=this[n+3]=this[n+0]=this[n+1]=void 0},ap.prototype._fulfill=function(m){var o=this._bitField;if(!((117506048&o)>>>16)){if(m===this){var p=av();return this._attachExtraTrace(p),this._reject(p)}this._setFulfilled(),this._rejectionHandler0=m,(65535&o)>0&&(0!==(134217728&o)?this._settlePromises():ao.settlePromises(this),this._dereferenceTrace())}},ap.prototype._reject=function(m){var n=this._bitField;if(!((117506048&n)>>>16)){return this._setRejected(),this._fulfillmentHandler0=m,this._isFinal()?ao.fatalError(m,at.isNode):void ((65535&n)>0?ao.settlePromises(this):this._ensurePossibleRejectionHandled())}},ap.prototype._fulfillPromises=function(p,u){for(var w=1;p>w;w++){var s=this._fulfillmentHandlerAt(w),m=this._promiseAt(w),v=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(m,s,v,u)}},ap.prototype._rejectPromises=function(p,u){for(var w=1;p>w;w++){var s=this._rejectionHandlerAt(w),m=this._promiseAt(w),v=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(m,s,v,u)}},ap.prototype._settlePromises=function(){var m=this._bitField,p=65535&m;if(p>0){if(0!==(16842752&m)){var s=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,s,m),this._rejectPromises(p,s)}else{var o=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,o,m),this._fulfillPromises(p,o)}this._setLength(0)}this._clearCancellationData()},ap.prototype._settledValue=function(){var m=this._bitField;return 0!==(33554432&m)?this._rejectionHandler0:0!==(16777216&m)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&ad.defineProperty(ap.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),ap.defer=ap.pending=function(){q.deprecated("Promise.defer","new Promise");var m=new ap(ac);return{promise:m,resolve:aj,reject:ag}},at.notEnumerableProp(ap,"_makeSelfResolutionError",av),j("./method")(ap,ac,B,am,q),j("./bind")(ap,ac,B,q),j("./cancel")(ap,z,am,q),j("./direct_resolve")(ap),j("./synchronous_inspection")(ap),j("./join")(ap,z,B,ac,ao),ap.Promise=ap,ap.version="3.7.2",j("./call_get.js")(ap),j("./generators.js")(ap,am,ac,B,ak,q),j("./map.js")(ap,z,am,B,ac,q),j("./nodeify.js")(ap),j("./promisify.js")(ap,ac),j("./props.js")(ap,z,B,am),j("./race.js")(ap,ac,B,am),j("./reduce.js")(ap,z,am,B,ac,q),j("./settle.js")(ap,z,q),j("./some.js")(ap,z,am),j("./timers.js")(ap,ac,q),j("./using.js")(ap,am,B,aa,ac,q),j("./any.js")(ap),j("./each.js")(ap,ac),j("./filter.js")(ap,ac),at.toFastProperties(ap),at.toFastProperties(ap.prototype),ax({a:1}),ax({b:2}),ax({c:3}),ax(1),ax(function(){}),ax(void 0),ax(!1),ax(new ap(ac)),q.setBounds(Z.firstLineError,at.lastLineError),ap}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(j,k,l){k.exports=function(v,q,m,t,p){function z(n){switch(n){case -2:return[];case -3:return{};case -6:return new Map}}function x(n){var o=this._promise=new v(q);n instanceof v&&(o._propagateFrom(n,3),n.suppressUnhandledRejections()),o._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var w=j("./util");w.isArray;return w.inherits(x,p),x.prototype.length=function(){return this._length},x.prototype.promise=function(){return this._promise},x.prototype._init=function y(u,B){var A=m(this._values,this._promise);if(A instanceof v){A=A._target();var s=A._bitField;if(this._values=A,0===(50397184&s)){return this._promise._setAsyncGuaranteed(),A._then(y,this._reject,void 0,this,B)}if(0===(33554432&s)){return 0!==(16777216&s)?this._reject(A._reason()):this._cancel()}A=A._value()}if(A=w.asArray(A),null===A){var r=t("expecting an array or an iterable object but got "+w.classString(A)).reason();return void this._promise._rejectCallback(r,!1)}return 0===A.length?void (-5===B?this._resolveEmptyArray():this._resolve(z(B))):void this._iterate(A)},x.prototype._iterate=function(A){var E=this.getActualLength(A.length);this._length=E,this._values=this.shouldCopyValues()?new Array(E):this._values;for(var u=this._promise,C=!1,B=null,r=0;E>r;++r){var D=m(A[r],u);D instanceof v?(D=D._target(),B=D._bitField):B=null,C?null!==B&&D.suppressUnhandledRejections():null!==B?0===(50397184&B)?(D._proxy(this,r),this._values[r]=D):C=0!==(33554432&B)?this._promiseFulfilled(D._value(),r):0!==(16777216&B)?this._promiseRejected(D._reason(),r):this._promiseCancelled(r):C=this._promiseFulfilled(D,r)}C||u._setAsyncGuaranteed()},x.prototype._isResolved=function(){return null===this._values},x.prototype._resolve=function(n){this._values=null,this._promise._fulfill(n)},x.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},x.prototype._reject=function(n){this._values=null,this._promise._rejectCallback(n,!1)},x.prototype._promiseFulfilled=function(o,r){this._values[r]=o;var s=++this._totalResolved;return s>=this._length?(this._resolve(this._values),!0):!1},x.prototype._promiseCancelled=function(){return this._cancel(),!0},x.prototype._promiseRejected=function(n){return this._totalResolved++,this._reject(n),!0},x.prototype._resultCancelled=function(){if(!this._isResolved()){var o=this._values;if(this._cancel(),o instanceof v){o.cancel()}else{for(var r=0;r<o.length;++r){o[r] instanceof v&&o[r].cancel()}}}},x.prototype.shouldCopyValues=function(){return !0},x.prototype.getActualLength=function(n){return n},x}},{"./util":36}],24:[function(j,k,l){k.exports=function(R,I){function F(m){return !D.test(m)}function N(m){try{return m.__isPromisified__===!0}catch(n){return !1}}function H(m,p,s){var o=O.getDataPropertyOrDefault(m,p+s,U);return o?N(o):!1}function B(p,w,C){for(var v=0;v<p.length;v+=2){var m=p[v];if(C.test(m)){for(var y=m.replace(C,""),u=0;u<p.length;u+=2){if(p[u]===y){throw new P("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",w))}}}}}function V(Y,y,s,m){for(var E=O.inheritedDataKeys(Y),C=[],X=0;X<E.length;++X){var v=E[X],o=Y[v],w=m===M?!0:M(v,o,Y);"function"!=typeof o||N(o)||H(Y,v,y)||!m(v,o,Y,w)||C.push(v,o)}return B(C,y,s),C}function T(E,m,v,n,X,y){function w(){var r=m;m===Q&&(r=this);var Z=new R(I);Z._captureStackTrace();var u="string"==typeof p&&this!==C?this[p]:E,aa=W(Z,y);try{u.apply(r,S(arguments,aa))}catch(Y){Z._rejectCallback(x(Y),!0,!0)}return Z._isFateSealed()||Z._setAsyncGuaranteed(),Z}var C=function(){return this}(),p=E;return"string"==typeof p&&(E=n),O.notEnumerableProp(w,"__isPromisified__",!0),w}function z(ac,X,y,m,E){for(var w=new RegExp(L(X)+"$"),ad=V(ac,X,w,y),Z=0,ab=ad.length;ab>Z;Z+=2){var C=ad[Z],v=ad[Z+1],aa=C+X;if(m===A){ac[aa]=A(C,Q,C,v,X,E)}else{var Y=m(v,function(){return A(C,Q,C,v,X,E)});O.notEnumerableProp(Y,"__isPromisified__",!0),ac[aa]=Y}}return O.toFastProperties(ac),ac}function K(m,o,p){return A(m,o,void 0,m,null,p)}var G,Q={},O=j("./util"),W=j("./nodeback"),S=O.withAppended,x=O.maybeWrapAsError,q=O.canEvaluate,P=j("./errors").TypeError,J="Async",U={__isPromisified__:!0},t=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],D=new RegExp("^(?:"+t.join("|")+")$"),M=function(m){return O.isIdentifier(m)&&"_"!==m.charAt(0)&&"constructor"!==m},L=function(m){return m.replace(/([$])/,"\\$")},A=q?G:T;R.promisify=function(m,r){if("function"!=typeof m){throw new P("expecting a function but got "+O.classString(m))}if(N(m)){return m}r=Object(r);var v=void 0===r.context?Q:r.context,u=!!r.multiArgs,p=K(m,v,u);return O.copyDescriptors(m,p,F),p},R.promisifyAll=function(E,w){if("function"!=typeof E&&"object"!=typeof E){throw new P("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n")}w=Object(w);var u=!!w.multiArgs,m=w.suffix;"string"!=typeof m&&(m=J);var v=w.filter;"function"!=typeof v&&(v=M);var p=w.promisifier;if("function"!=typeof p&&(p=A),!O.isIdentifier(m)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n")}for(var X=O.inheritedDataKeys(E),C=0;C<X.length;++C){var y=E[X[C]];"constructor"!==X[C]&&O.isClass(y)&&(z(y.prototype,m,v,p,u),z(y,m,v,p,u))}return z(E,m,v,p,u)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(j,k,l){k.exports=function(z,v,m,x){function t(u){var G,I=!1;if(void 0!==B&&u instanceof B){G=q(u),I=!0}else{var F=w.keys(u),p=F.length;G=new Array(2*p);for(var H=0;p>H;++H){var E=F[H];G[H]=u[E],G[H+p]=E}}this.constructor$(G),this._isMap=I,this._init$(void 0,I?-6:-3)}function D(o){var r,p=m(o);return C(p)?(r=p instanceof z?p._then(z.props,void 0,void 0,void 0,void 0):new t(p).promise(),p instanceof z&&r._propagateFrom(p,2),r):x("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var B,A=j("./util"),C=A.isObject,w=j("./es5");"function"==typeof Map&&(B=Map);var q=function(){function o(n,s){this[p]=n,this[p+r]=s,p++}var p=0,r=0;return function(s){r=s.size,p=0;var n=new Array(2*s.size);return s.forEach(o,n),n}}(),y=function(s){for(var E=new B,G=s.length/2|0,u=0;G>u;++u){var p=s[G+u],F=s[u];E.set(p,F)}return E};A.inherits(t,v),t.prototype._init=function(){},t.prototype._promiseFulfilled=function(u,G){this._values[G]=u;var I=++this._totalResolved;if(I>=this._length){var F;if(this._isMap){F=y(this._values)}else{F={};for(var p=this.length(),H=0,E=this.length();E>H;++H){F[this._values[H+p]]=this._values[H]}}return this._resolve(F),!0}return !1},t.prototype.shouldCopyValues=function(){return !1},t.prototype.getActualLength=function(n){return n>>1},z.prototype.props=function(){return D(this)},z.props=function(n){return D(n)}}},{"./es5":13,"./util":36}],26:[function(k,m,o){function l(q,u,w,s,p){for(var v=0;p>v;++v){w[v+s]=q[v+u],q[v+u]=void 0}}function j(n){this._capacity=n,this._length=0,this._front=0}j.prototype._willBeOverCapacity=function(n){return this._capacity<n},j.prototype._pushOne=function(p){var q=this.length();this._checkCapacity(q+1);var r=this._front+q&this._capacity-1;this[r]=p,this._length=q+1},j.prototype.push=function(q,u,w){var s=this.length()+3;if(this._willBeOverCapacity(s)){return this._pushOne(q),this._pushOne(u),void this._pushOne(w)}var p=this._front+s-3;this._checkCapacity(s);var v=this._capacity-1;this[p+0&v]=q,this[p+1&v]=u,this[p+2&v]=w,this._length=s},j.prototype.shift=function(){var n=this._front,p=this[n];return this[n]=void 0,this._front=n+1&this._capacity-1,this._length--,p},j.prototype.length=function(){return this._length},j.prototype._checkCapacity=function(n){this._capacity<n&&this._resizeTo(this._capacity<<1)},j.prototype._resizeTo=function(q){var r=this._capacity;this._capacity=q;var u=this._front,p=this._length,s=u+p&r-1;l(this,0,this,r,s)},m.exports=j},{}],27:[function(j,k,l){k.exports=function(u,w,t,p){function v(C,r){var z=t(C);if(z instanceof u){return m(z)}if(C=q.asArray(C),null===C){return p("expecting an array or an iterable object but got "+q.classString(C))}var B=new u(w);void 0!==r&&B._propagateFrom(r,3);for(var s=B._fulfill,n=B._reject,y=0,x=C.length;x>y;++y){var A=C[y];(void 0!==A||y in C)&&u.cast(A)._then(s,n,void 0,B,null)}return B}var q=j("./util"),m=function(n){return n.then(function(o){return v(o,n)})};u.race=function(n){return v(n,void 0)},u.prototype.race=function(){return v(this,void 0)}}},{"./util":36}],28:[function(j,k,l){k.exports=function(A,v,m,x,t,E){function C(p,G,F,o){this.constructor$(p);var u=A._getContext();this._fn=z.contextBind(u,G),void 0!==F&&(F=A.resolve(F),F._attachCancellationCallback(this)),this._initialValue=F,this._currentCancellable=null,o===t?this._eachValues=Array(this._length):0===o?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function B(n,o){this.isFulfilled()?o._resolve(n):o._reject(n)}function D(r,s,F,p){if("function"!=typeof s){return m("expecting a function but got "+z.classString(s))}var u=new C(r,s,F,p);return u.promise()}function w(o){this.accum=o,this.array._gotAccum(o);var p=x(this.value,this.array._promise);return p instanceof A?(this.array._currentCancellable=p,p._then(q,void 0,void 0,this,void 0)):q.call(this,p)}function q(u){var H=this.array,F=H._promise,s=y(H._fn);F._pushContext();var G;G=void 0!==H._eachValues?s.call(F._boundValue(),u,this.index,this.length):s.call(F._boundValue(),this.accum,u,this.index,this.length),G instanceof A&&(H._currentCancellable=G);var p=F._popContext();return E.checkForgottenReturns(G,p,void 0!==H._eachValues?"Promise.each":"Promise.reduce",F),G}var z=j("./util"),y=z.tryCatch;z.inherits(C,v),C.prototype._gotAccum=function(n){void 0!==this._eachValues&&null!==this._eachValues&&n!==t&&this._eachValues.push(n)},C.prototype._eachComplete=function(n){return null!==this._eachValues&&this._eachValues.push(n),this._eachValues},C.prototype._init=function(){},C.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},C.prototype.shouldCopyValues=function(){return !1},C.prototype._resolve=function(n){this._promise._resolveCallback(n),this._values=null},C.prototype._resultCancelled=function(n){return n===this._initialValue?this._cancel():void (this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof A&&this._currentCancellable.cancel(),this._initialValue instanceof A&&this._initialValue.cancel()))},C.prototype._iterate=function(F){this._values=F;var J,H,u=F.length;void 0!==this._initialValue?(J=this._initialValue,H=0):(J=A.resolve(F[0]),H=1),this._currentCancellable=J;for(var I=H;u>I;++I){var G=F[I];G instanceof A&&G.suppressUnhandledRejections()}if(!J.isRejected()){for(;u>H;++H){var p={accum:null,value:F[H],index:H,length:u,array:this};J=J._then(w,void 0,void 0,p,void 0),0===(127&H)&&J._setNoAsyncGuarantee()}}void 0!==this._eachValues&&(J=J._then(this._eachComplete,void 0,void 0,this,void 0)),J._then(B,B,void 0,J,this)},A.prototype.reduce=function(n,o){return D(this,n,o,null)},A.reduce=function(o,s,u,p){return D(o,s,u,p)}}},{"./util":36}],29:[function(x,p,l){var j,m=x("./util"),k=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},y=m.getNativePromise();if(m.isNode&&"undefined"==typeof MutationObserver){var v=global.setImmediate,q=process.nextTick;j=m.isRecentNode?function(n){v.call(global,n)}:function(n){q.call(process,n)}}else{if("function"==typeof y&&"function"==typeof y.resolve){var w=y.resolve();j=function(n){w.then(n)}}else{j="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList" in document.documentElement?function(){var u=document.createElement("div"),A={attributes:!0},C=!1,z=document.createElement("div"),s=new MutationObserver(function(){u.classList.toggle("foo"),C=!1});s.observe(z,A);var B=function(){C||(C=!0,z.classList.toggle("foo"))};return function(t){var o=new MutationObserver(function(){o.disconnect(),t()});o.observe(u,A),B()}}():"undefined"!=typeof setImmediate?function(n){setImmediate(n)}:"undefined"!=typeof setTimeout?function(n){setTimeout(n,0)}:k}}p.exports=j},{"./util":36}],30:[function(j,k,l){k.exports=function(t,v,q){function m(n){this.constructor$(n)}var u=t.PromiseInspection,p=j("./util");p.inherits(m,v),m.prototype._promiseResolved=function(o,r){this._values[o]=r;var s=++this._totalResolved;return s>=this._length?(this._resolve(this._values),!0):!1},m.prototype._promiseFulfilled=function(o,r){var s=new u;return s._bitField=33554432,s._settledValueField=o,this._promiseResolved(r,s)},m.prototype._promiseRejected=function(o,r){var s=new u;return s._bitField=16777216,s._settledValueField=o,this._promiseResolved(r,s)},t.settle=function(n){return q.deprecated(".settle()",".reflect()"),new m(n).promise()},t.allSettled=function(n){return new m(n).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(j,k,l){k.exports=function(w,q,m){function v(n){this.constructor$(n),this._howMany=0,this._unwrap=!1,this._initialized=!1}function p(r,s){if((0|s)!==s||0>s){return m("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n")}var B=new v(r),u=B.promise();return B.setHowMany(s),B.init(),u}var A=j("./util"),y=j("./errors").RangeError,x=j("./errors").AggregateError,z=A.isArray,t={};A.inherits(v,q),v.prototype._init=function(){if(this._initialized){if(0===this._howMany){return void this._resolve([])}this._init$(void 0,-5);var n=z(this._values);!this._isResolved()&&n&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},v.prototype.init=function(){this._initialized=!0,this._init()},v.prototype.setUnwrap=function(){this._unwrap=!0},v.prototype.howMany=function(){return this._howMany},v.prototype.setHowMany=function(n){this._howMany=n},v.prototype._promiseFulfilled=function(n){return this._addFulfilled(n),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},v.prototype._promiseRejected=function(n){return this._addRejected(n),this._checkOutcome()},v.prototype._promiseCancelled=function(){return this._values instanceof w||null==this._values?this._cancel():(this._addRejected(t),this._checkOutcome())},v.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var n=new x,o=this.length();o<this._values.length;++o){this._values[o]!==t&&n.push(this._values[o])}return n.length>0?this._reject(n):this._cancel(),!0}return !1},v.prototype._fulfilled=function(){return this._totalResolved},v.prototype._rejected=function(){return this._values.length-this.length()},v.prototype._addRejected=function(n){this._values.push(n)},v.prototype._addFulfilled=function(n){this._values[this._totalResolved++]=n},v.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},v.prototype._getRangeError=function(n){var o="Input array must contain at least "+this._howMany+" items but contains only "+n+" items";return new y(o)},v.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},w.some=function(n,o){return p(n,o)},w.prototype.some=function(n){return p(this,n)},w._SomePromiseArray=v}},{"./errors":12,"./util":36}],32:[function(j,k,l){k.exports=function(q){function w(n){void 0!==n?(n=n._target(),this._bitField=n._bitField,this._settledValueField=n._isFateSealed()?n._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}w.prototype._settledValue=function(){return this._settledValueField};var y=w.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},v=w.prototype.error=w.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},p=w.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},x=w.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},u=w.prototype.isPending=function(){return 0===(50397184&this._bitField)},m=w.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};w.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},q.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},q.prototype._isCancelled=function(){return this._target().__isCancelled()},q.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},q.prototype.isPending=function(){return u.call(this._target())},q.prototype.isRejected=function(){return x.call(this._target())},q.prototype.isFulfilled=function(){return p.call(this._target())},q.prototype.isResolved=function(){return m.call(this._target())},q.prototype.value=function(){return y.call(this._target())},q.prototype.reason=function(){var n=this._target();return n._unsetRejectionIsUnhandled(),v.call(n)},q.prototype._value=function(){return this._settledValue()},q.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},q.PromiseInspection=w}},{}],33:[function(j,k,l){k.exports=function(y,v){function m(o,p){if(w(o)){if(o instanceof y){return o}var n=t(o);if(n===B){p&&p._pushContext();var s=y.reject(n.e);return p&&p._popContext(),s}if("function"==typeof n){if(C(o)){var s=new y(v);return o._then(s._fulfill,s._reject,void 0,s,null),s}return A(o,n,p)}}return o}function x(n){return n.then}function t(n){try{return x(n)}catch(o){return B.e=o,B}}function C(n){try{return q.call(n,"_promise0")}catch(o){return !1}}function A(I,n,F){function D(o){H&&(H._resolveCallback(o),H=null)}function J(o){H&&(H._rejectCallback(o,u,!0),H=null)}var H=new y(v),E=H;F&&F._pushContext(),H._captureStackTrace(),F&&F._popContext();var u=!0,G=z.tryCatch(n).call(I,D,J);return u=!1,H&&G===B&&(H._rejectCallback(G.e,!0,!0),H=null),E}var z=j("./util"),B=z.errorObj,w=z.isObject,q={}.hasOwnProperty;return m}},{"./util":36}],34:[function(j,k,l){k.exports=function(y,v,m){function x(n){this.handle=n}function t(n){return clearTimeout(this.handle),n}function C(n){throw clearTimeout(this.handle),n}var A=j("./util"),z=y.TimeoutError;x.prototype._resultCancelled=function(){clearTimeout(this.handle)};var B=function(n){return w(+this).thenReturn(n)},w=y.delay=function(p,u){var r,n;return void 0!==u?(r=y.resolve(u)._then(B,null,null,p,void 0),m.cancellation()&&u instanceof y&&r._setOnCancel(u)):(r=new y(v),n=setTimeout(function(){r._fulfill()},+p),m.cancellation()&&r._setOnCancel(new x(n)),r._captureStackTrace()),r._setAsyncGuaranteed(),r};y.prototype.delay=function(n){return w(n,this)};var q=function(o,s,u){var p;p="string"!=typeof s?s instanceof Error?s:new z("operation timed out"):new z(s),A.markAsOriginatingFromRejection(p),o._attachExtraTrace(p),o._reject(p),null!=u&&u.cancel()};y.prototype.timeout=function(p,r){p=+p;var u,o,s=new x(setTimeout(function(){u.isPending()&&q(u,r,o)},p));return m.cancellation()?(o=this.then(),u=o._then(t,C,void 0,s,void 0),u._setOnCancel(s)):u=this._then(t,C,void 0,s,void 0),u}}},{"./util":36}],35:[function(j,k,l){k.exports=function(J,C,z,F,B,x){function M(m){setTimeout(function(){throw m},0)}function L(m){var n=z(m);return n!==m&&"function"==typeof m._isDisposable&&"function"==typeof m._getDisposer&&m._isDisposable()&&n._setDisposable(m._getDisposer()),n}function w(r,y){function p(){if(v>=o){return m._fulfill()}var s=L(r[v++]);if(s instanceof J&&s._isDisposable()){try{s=z(s._getDisposer().tryDispose(y),r.promise)}catch(n){return M(n)}if(s instanceof J){return s._then(p,M,null,null,null)}}p()}var v=0,o=r.length,m=new J(B);return p(),m}function E(m,o,p){this._data=m,this._promise=o,this._context=p}function A(m,o,p){this.constructor$(m,o,p)}function I(m){return E.isDisposer(m)?(this.resources[this.index]._setDisposable(m),m.promise()):m}function G(m){this.length=m,this.promise=null,this[m-1]=null}var N=j("./util"),K=j("./errors").TypeError,t=j("./util").inherits,q=N.errorObj,H=N.tryCatch,D={};E.prototype.data=function(){return this._data},E.prototype.promise=function(){return this._promise},E.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():D},E.prototype.tryDispose=function(m){var p=this.resource(),s=this._context;void 0!==s&&s._pushContext();var o=p!==D?this.doDispose(p,m):null;return void 0!==s&&s._popContext(),this._promise._unsetDisposable(),this._data=null,o},E.isDisposer=function(m){return null!=m&&"function"==typeof m.resource&&"function"==typeof m.tryDispose},t(A,E),A.prototype.doDispose=function(m,o){var p=this.data();return p.call(m,m,o)},G.prototype._resultCancelled=function(){for(var m=this.length,p=0;m>p;++p){var o=this[p];o instanceof J&&o.cancel()}},J.using=function(){var U=arguments.length;if(2>U){return C("you must pass at least 2 arguments to Promise.using")}var y=arguments[U-1];if("function"!=typeof y){return C("expecting a function but got "+N.classString(y))}var s,R=!0;2===U&&Array.isArray(arguments[0])?(s=arguments[0],U=s.length,R=!1):(s=arguments,U--);for(var P=new G(U),r=0;U>r;++r){var O=s[r];if(E.isDisposer(O)){var T=O;O=O.promise(),O._setDisposable(T)}else{var u=z(O);u instanceof J&&(O=u._then(I,null,null,{resources:P,index:r},void 0))}P[r]=O}for(var Q=new Array(P.length),r=0;r<Q.length;++r){Q[r]=J.resolve(P[r]).reflect()}var S=J.all(Q).then(function(m){for(var v=0;v<m.length;++v){var W=m[v];if(W.isRejected()){return q.e=W.error(),q}if(!W.isFulfilled()){return void S.cancel()}m[v]=W.value()}n._pushContext(),y=H(y);var p=R?y.apply(void 0,m):y(m),V=n._popContext();return x.checkForgottenReturns(p,V,"Promise.using",n),p}),n=S.lastly(function(){var m=new J.PromiseInspection(S);return w(P,m)});return P.promise=n,n._setOnCancel(P),n},J.prototype._setDisposable=function(m){this._bitField=131072|this._bitField,this._disposer=m},J.prototype._isDisposable=function(){return(131072&this._bitField)>0},J.prototype._getDisposer=function(){return this._disposer},J.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},J.prototype.disposer=function(m){if("function"==typeof m){return new A(m,this,F())}throw new K}}},{"./errors":12,"./util":36}],36:[function(an,aC,at){function ap(){try{var j=Q;return Q=null,j.apply(this,arguments)}catch(k){return G.e=k,G}}function ay(j){return Q=j,ap}function ar(j){return null==j||j===!0||j===!1||"string"==typeof j||"number"==typeof j}function ao(j){return"function"==typeof j||"object"==typeof j&&null!==j}function aG(j){return ar(j)?new Error(al(j)):j}function aE(k,m){var o,l=k.length,j=new Array(l+1);for(o=0;l>o;++o){j[o]=k[o]}return j[o]=m,j}function am(j,l,m){if(!ac.isES5){return{}.hasOwnProperty.call(j,l)?j[l]:void 0}var k=Object.getOwnPropertyDescriptor(j,l);return null!=k?null==k.get&&null==k.set?k.value:m:void 0}function av(j,l,m){if(ar(j)){return j}var k={value:m,configurable:!0,enumerable:!1,writable:!0};return ac.defineProperty(j,l,k),j}function aq(j){throw j}function aB(k){try{if("function"==typeof k){var m=ac.names(k.prototype),s=ac.isES5&&m.length>1,l=m.length>0&&!(1===m.length&&"constructor"===m[0]),j=ah.test(k+"")&&ac.names(k).length>0;if(s||l||j){return !0}}return !1}catch(p){return !1}}function az(j){function l(){}function m(){return typeof k.foo}l.prototype=j;var k=new l;return m(),m(),j}function aH(j){return q.test(j)}function aD(k,m,o){for(var l=new Array(k),j=0;k>j;++j){l[j]=m+j+o}return l}function al(j){try{return j+""}catch(k){return"[no string representation]"}}function ai(j){return j instanceof Error||null!==j&&"object"==typeof j&&"string"==typeof j.message&&"string"==typeof j.name}function aA(j){try{av(j,"isOperational",!0)}catch(k){}}function au(j){return null==j?!1:j instanceof Error.__BluebirdErrorTypes__.OperationalError||j.isOperational===!0}function aF(j){return ai(j)&&ac.propertyIsWritable(j,"stack")}function ak(j){return{}.toString.call(j)}function af(k,p,v){for(var m=ac.names(k),j=0;j<m.length;++j){var u=m[j];if(v(u)){try{ac.defineProperty(p,u,ac.getDescriptor(k,u))}catch(l){}}}}function ax(j){return X?process.env[j]:void 0}function aw(){if("function"==typeof Promise){try{var j=new Promise(function(){});if("[object Promise]"===ak(j)){return Promise}}catch(k){}}}function ad(j,l){if(null===j||"function"!=typeof l||l===z){return l}null!==j.domain&&(l=j.domain.bind(l));var m=j.async;if(null!==m){var k=l;l=function(){var n=new Array(2).concat([].slice.call(arguments));return n[0]=k,n[1]=this,m.runInAsyncScope.apply(m,n)}}return l}var ac=an("./es5"),aj="undefined"==typeof navigator,G={e:{}},Q,K="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,J=function(j,l){function m(){this.constructor=j,this.constructor$=l;for(var o in l.prototype){k.call(l.prototype,o)&&"$"!==o.charAt(o.length-1)&&(this[o+"$"]=l.prototype[o])}}var k={}.hasOwnProperty;return m.prototype=l.prototype,j.prototype=new m,j.prototype},W=function(){var j=[Array.prototype,Object.prototype,Function.prototype],l=function(o){for(var p=0;p<j.length;++p){if(j[p]===o){return !0}}return !1};if(ac.isES5){var m=Object.getOwnPropertyNames;return function(w){for(var y=[],v=Object.create(null);null!=w&&!l(w);){var A;try{A=m(w)}catch(x){return y}for(var n=0;n<A.length;++n){var B=A[n];if(!v[B]){v[B]=!0;var p=Object.getOwnPropertyDescriptor(w,B);null!=p&&null==p.get&&null==p.set&&y.push(B)}}w=ac.getPrototypeOf(w)}return y}}var k={}.hasOwnProperty;return function(u){if(l(u)){return[]}var p=[];j:for(var t in u){if(k.call(u,t)){p.push(t)}else{for(var r=0;r<j.length;++r){if(k.call(j[r],t)){continue j}}p.push(t)}}return p}}(),ah=/this\s*\.\s*\S+\s*=/,q=/^[a-z$_][a-z$_0-9]*$/i,ab=function(){return"stack" in new Error?function(j){return aF(j)?j:new Error(al(j))}:function(j){if(aF(j)){return j}try{throw new Error(al(j))}catch(k){return k}}}(),ae=function(j){return ac.isArray(j)?j:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var aa="function"==typeof Array.from?function(j){return Array.from(j)}:function(j){for(var l,m=[],k=j[Symbol.iterator]();!(l=k.next()).done;){m.push(l.value)}return m};ae=function(j){return ac.isArray(j)?j:null!=j&&"function"==typeof j[Symbol.iterator]?aa(j):null}}var Z="undefined"!=typeof process&&"[object process]"===ak(process).toLowerCase(),X="undefined"!=typeof process&&"undefined"!=typeof process.env,z,ag={setReflectHandler:function(j){z=j},isClass:aB,isIdentifier:aH,inheritedDataKeys:W,getDataPropertyOrDefault:am,thrower:aq,isArray:ac.isArray,asArray:ae,notEnumerableProp:av,isPrimitive:ar,isObject:ao,isError:ai,canEvaluate:aj,errorObj:G,tryCatch:ay,inherits:J,withAppended:aE,maybeWrapAsError:aG,toFastProperties:az,filledRange:aD,toString:al,canAttachTrace:aF,ensureErrorObject:ab,originatesFromRejection:au,markAsOriginatingFromRejection:aA,classString:ak,copyDescriptors:af,isNode:Z,hasEnvVariables:X,env:ax,global:K,getNativePromise:aw,contextBind:ad};ag.isRecentNode=ag.isNode&&function(){var j;return process.versions&&process.versions.node?j=process.versions.node.split(".").map(Number):process.version&&(j=process.version.split(".").map(Number)),0===j[0]&&j[1]>10||j[0]>0}(),ag.nodeSupportsAsyncResource=ag.isNode&&function(){var k=!1;try{var l=an("async_hooks").AsyncResource;k="function"==typeof l.prototype.runInAsyncScope}catch(j){k=!1}return k}(),ag.isNode&&ag.toFastProperties(process);try{throw new Error}catch(Y){ag.lastLineError=Y}aC.exports=ag},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);e.Promise=Promise;if(!e.nativePromise){e.nativePromise=e.Promise}})(Dynamsoft);(function(b){var a=20210305;if(b._navInfo_ver){if(b.isNumber(b._navInfo_ver)&&b._navInfo_ver>=a){return}}b._navInfo_ver=a;b.getNavInfoSync=function(){var p=!1,l=!0,o=b.win,r=b.doc,e=o.location.protocol,n=(e==="https:"),k=(e!=="https:"&&e!=="http:"),f=false,h=false,s=true,m=true,g=false,j=0,q=0,d=o.JSON,i;if(Dynamsoft.navInfo){i=Dynamsoft.navInfo}else{b.getNavInfo();var c=navigator;i=b.getNavInfoByUserAgent(c.userAgent,c.platform)}if(0){g=i.bMobile||navigator.userAgentData.mobile}else{var i=Dynamsoft.navInfo;f=i.bIE;h=i.bEdge;m=i.bGecko;g=i.bMobile||i.bPad||i.bChromeOS;if(f){j=i.strBrowserVersion;q=i.IEMode}s=i.bHTML5Edition}return{host:o,bSSL:n,bFileSystem:k,bIE:f,bEdge:h,bGecko:m,bMobile:g,IEVersion:j,IEMode:q,bHTML5Edition:s,nodejs:p}};b.getNavInfoByUAData=function(d){var c=function(l){var f=navigator.userAgentData,h=f.mobile,j,p,g=l.platform.toLowerCase(),n=l.platformVersion,i=l.architecture.toLowerCase(),e=false,m=(g.indexOf("mac")>=0),k=navigator.userAgent.toLowerCase();if(!h){if((/mobile/g).test(k)){h=true}}if("brands" in f&&b.isArray(f.brands)&&f.brands.length>0){j=f.brands[0].brand.toLowerCase();p=f.brands[0].version}else{if("uaList" in f&&b.isArray(f.uaList)&&f.uaList.length>0){j=f.uaList[0].brand.toLowerCase();p=f.uaList[0].version}}if((/wow64|x86_64|win64|x64/).test(k)){e=true}else{if(m){var o=n.split("_");if(o.length>0&&o[0]>=15){e=true}}else{if(i.indexOf("win64")>=0||i.indexOf("x86_64")>=0||i.indexOf("x64")>=0){e=true}}}return{bWin:(g=="windows"),bMac:m,bLinux:(g=="linux"),bAndroid:false,bMobile:h,bPad:false,bChromeOS:false,bOSx64:e,bIE:false,bEdge:false,bChrome:true,bFirefox:false,bSafari:false,bOpera:false,bGecko:true,bHTML5Edition:true,strBrowserVersion:p,IEMode:false,bQuerySelectorSupported:true,nativeJson:true,scrollBarWidth:false}};if(d){return Promise.resolve(function(){return c(d)})}return navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture"]).then(c)};b.asyncGetNavInfo=function(){if(Dynamsoft.navInfo){return Promise.resolve(Dynamsoft.navInfo)}if(0){return b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d;return d})}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Promise.resolve(Dynamsoft.navInfo)}};b.getNavInfo=function(){if(Dynamsoft.navInfo){return Dynamsoft.navInfo}if(0){b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d});return false}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Dynamsoft.navInfo}};Dynamsoft.navInfoSync=b.getNavInfoSync()})(Dynamsoft.Lib);(function(a,h){var g=a.Lib,b=a.navInfoSync,c=20200521;if(g._ls_ver){if(g.isNumber(g._ls_ver)&&g._ls_ver>=c){return}}g._ls_ver=c;var i=false,f=false,j;if((b.bEdge&&b.bFileSystem)||(b.bIE&&b.IEVersion<8)){}else{try{f=window.localStorage;i=f?true:false}catch(d){f=false}}g.LS={isSupportLS:function(){return i},item:function(k,l,e){var m=null;if(this.isSupportLS()){if(l){f.setItem(k,l);m=l}else{m=f.getItem(k)}if(m===null){return e}return m}else{return e}},removeItem:function(e){if(this.isSupportLS()){f.removeItem(e)}else{return false}return true}}})(Dynamsoft);(function(lib,nil){var _utilities_ver=20200708;if(lib._utilities_ver){if(lib._utilities_ver>=_utilities_ver){return}}lib._utilities_ver=_utilities_ver;var AP=Array.prototype,win=lib.win,doc=lib.doc,navInfoSync=Dynamsoft.navInfoSync,EMPTY_STR="",FALSE=!1,TRUE=!0,mix=lib.mix;var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map;var logger=lib.getLogger(),location=win.location,bDomReady=0,callbacks=[],POLL_RETIRES=500,POLL_INTERVAL=40,RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT="DOMContentLoaded",READY_STATE_CHANGE_EVENT="readystatechange",LOAD_EVENT="load",COMPLETE="complete",addEventListener=standardEventModel?function(el,type,fn){el.addEventListener(type,fn,false)}:function(el,type,fn){el.attachEvent("on"+type,fn)},removeEventListener=standardEventModel?function(el,type,fn){el.removeEventListener(type,fn,false)}:function(el,type,fn){el.detachEvent("on"+type,fn)};lib.mix(lib,{isWindow:function(obj){return obj!=null&&obj==obj.window},globalEval:function(data){if(data&&RE_NOT_WHITESPACE.test(data)){if(win.execScript){win.execScript(data)}else{(function(data){win.eval.call(win,data)})(data)}}},domReady:function(fn){if(bDomReady){try{fn(lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}else{callbacks.push(fn)}return this}});lib.ready=lib.domReady;function fireReady(){for(var i=0;i<callbacks.length;i++){try{callbacks[i](lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}}lib.checkDomReady=function(){if(!bDomReady){bDomReady=1;lib.asyncGetNavInfo().then(function(navInfo){if(doc&&!navInfoSync.nodejs){removeEventListener(win,LOAD_EVENT,lib.checkDomReady)}fireReady()})}};function bindReady(){if(!doc||doc.readyState===COMPLETE){lib.checkDomReady();return}addEventListener(win,LOAD_EVENT,lib.checkDomReady);if(standardEventModel){var fnDomReady=function(){removeEventListener(doc,DOM_READY_EVENT,fnDomReady);lib.checkDomReady()};addEventListener(doc,DOM_READY_EVENT,fnDomReady)}else{var stateChange=function(){if(doc.readyState===COMPLETE){removeEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);lib.checkDomReady()}};addEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);var notframe,docElem=doc&&doc.documentElement,doScroll=docElem&&docElem.doScroll;try{notframe=(win.frameElement===null)}catch(e){notframe=false}if(doScroll&&notframe){var readyScroll=function(){try{doScroll("left");setTimeout(lib.checkDomReady,30)}catch(ex){setTimeout(readyScroll,POLL_INTERVAL)}};readyScroll()}}}bindReady();if(Dynamsoft.navInfoSync.bIE){try{doc.execCommand("BackgroundImageCache",false,true)}catch(e){}}})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._domUtil_ver){if(d._domUtil_ver>=c){return}}d._domUtil_ver=c;var b="",a="none";d.mix(d,{get:function(e){return d.doc.getElementById(e)},hide:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=a}},show:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=b}},toggle:function(f){var e=d.isString(f)?d.get(f):f;if(e){if(e.style.display===a){e.style.display=b}else{e.style.display=a}}},empty:function(e){if(!e){return}while(e.firstChild){e.removeChild(e.firstChild)}}})})(Dynamsoft.Lib);(function(a){var c=a.Lib;var b=20200521;if(c._color_ver){if(c.isNumber(c._color_ver)&&c._color_ver>=b){return}}c._color_ver=b;c.colorStrToInt=function(h){var d="0x",f,e;if(/^(rgb|RGB)/.test(h)){var g=h.replace(/[^\d,.]/g,"").split(",");for(e=0;e<3;++e){f=Number(g[e]).toString(16);if(f.length==1){f="0"+f}d+=f}if(g.length==4){f=Math.round(Number(g[e])*255).toString(16);if(f.length==1){f="0"+f}d+=f}else{d+="ff"}}else{if(h=="transparent"){d+="00000000"}else{if(/^#[0-9a-fA-f]{6}$/.test(h)){d+=h.replace(/#/,"")+"ff"}else{if(/^#[0-9a-fA-f]{3}$/.test(h)){for(e=0;e<3;++e){d+=h[e]+h[e]}d+="ff"}else{d="-1"}}}}return Number(d)};c.IntToColorStr=function(d){if(d>4294967295||d<0){return null}var e;if(!Dynamsoft.navInfoSync.bHTML5Edition){if(d%256==0){e="transparent"}else{e=Math.floor(d/256).toString(16);while(e.length!=6){e="0"+e}e="#"+e}}else{e="rgba("+Math.floor(d/16777216)+","+Math.floor(d/65536)%256+","+Math.floor(d/256)%256+","+(d%256)/255+")"}return e}})(Dynamsoft);(function(b,a){var d=b.Lib,c=20210112;if(d._ajax_ver){if(d.isNumber(d._ajax_ver)&&d._ajax_ver>=c){return}}d._ajax_ver=c;d.asyncGetNavInfo().then(function(h){var s=h.bIE&&(parseInt(h.strBrowserVersion)<=9),u=h.bIE&&(parseInt(h.strBrowserVersion)<=10),p=d.win,n=d.each,m=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,A=1,H=2,g=3,K=200,f=204,l=300,w=304,r=404,j=1223,x=500,C="open error: ",z="send error: ",k=new d.Uri(location.href),G=k&&m.test(k.getScheme()),I=false,o=function(){try{return new p.XMLHttpRequest()}catch(M){}},B=function(){try{var M=false;n(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(O){try{return(M=new p.ActiveXObject(O))}catch(P){d.error("new xhr error: "+P.message)}});return M}catch(N){}},v=(!G&&p.XMLHttpRequest)?("withCredentials" in (o()||[])):false,E=p.ActiveXObject?function(M){if(s){return B()}if(!v&&M&&I){return new I()}return !G&&o()||B()}:o,t=function(M){return I&&(M instanceof I)},q=/^(?:GET|HEAD)$/,e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,L={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},D=a,F;if(self&&self.fetch){F=self.fetch}else{F=p.fetch}if(u){D=d.noop}function J(){}d.mix(J.prototype,{url:false,onSuccess:false,onError:false,onComplete:false,method:"GET",async:true,xhrFields:false,mimeType:false,username:false,password:false,data:false,dataType:"text",headers:false,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:false,afterSend:false,timeout:0,cache:true,crossDomain:false,retry:0,setRequestHeader:function(N,O){var M=this;M.headers[N]=O;return M},getAllResponseHeaders:function(){var M=this;return M.state===H?M.responseHeadersString:null},getNativeXhr:function(){var M=this;return M.nativeXhr},getResponseHeader:function(O){var N,M=this,P;O=O.toLowerCase();if(M.state===H){if(!(P=M.responseHeaders)){P=M.responseHeaders={};while((N=e.exec(M.responseHeadersString))){P[N[1].toLowerCase()]=N[2]}}N=P[O]}return N===undefined?null:N},overrideMimeType:function(N){var M=this;if(!M.state){M.mimeType=N}return M},abort:function(N){var M=this;N=N||"abort";M.state=g;M.status=0;M.statusText=N;if(M.nativeXhr){M.nativeXhr.abort()}M._callback();return M},_ioReady:function(N,Q){var O=this,M=false;if(O.state===H||O.state===g){return}if(O.state===A){O.state=H}O.readyState=4;if(N>=K&&N<l||N===w){if(N===w){Q="not modified";M=true}else{Q="success";M=true}}else{if(N<0){N=0}}try{if(N>=K){O.handleResponseData()}}catch(P){d.error(P.stack||P,"error");Q=P.message||"parser error"}if(N<K||!M){if(O.retry>0){O.retry=O.retry-1;setTimeout(function(){O.sendInternal()},200);return}}O.status=N;O.statusText=Q;O._callback(M)},_callback:function(M){var N=this,O=N.timeoutTimer;if(O){clearTimeout(O);N.timeoutTimer=0}n([M?N.onSuccess:N.onError,N.onComplete],function(P){if(d.isFunction(P)){P.apply(N.context,[N.responseData,N.statusText,N])}});N.responseData=null},handleResponseData:function(){var T=this,U,S=T.dataType,R=T.nativeXhr;if(S==="blob"||S==="arraybuffer"){if(s){var Q,O;if("responseBody" in R){Q=R.responseBody;O=dsVbsBinGetLength(Q);U=(new VBArray(dsVbsBinGetBytes(Q,0,O))).toArray()}else{var M;U=[];Q=R.responseText;O=Q.length;for(M=0;M<O;++M){U.push(Q.charCodeAt(M)&255)}}Q=null}else{if(!!p.Blob){U=R.response}else{if("responseBody" in R){U=R.responseBody}else{U=R.responseText}}}}else{if(S=="json"){if(R.responseType&&R.responseType.toLowerCase()=="json"){U=R.response}else{U=R.responseText?(((p.JSON&&p.JSON.parse)?p.JSON.parse:d.parse)(R.responseText)):{}}}else{if(S==="user-defined"){U=R.response!==undefined?R.response:R.responseText}else{T.responseText=U=R.responseText||"";try{var N=R.responseXML;if(N&&N.documentElement){T.responseXML=N}}catch(P){}}}}T.responseData=U},sendInternal:function(M){var T=this,ac,X,N,O,V,Y,W,ab,P,U,ad,R;ac=T._setup(M);N=ac.method;if(d.isString(N)){N=N.toUpperCase()}if(N=="POST"){Y=ac.contentType}else{Y=false}O=ac.url;V=ac.dataType;P=ac.mimeType;if(!d.isString(O)){return}T.nativeXhr=W=E(ac.crossDomain);if(!W){return}try{T.state=A;if(ac.username){W.open(N,O,ac.async,ac.username,ac.password)}else{W.open(N,O,ac.async)}if((ac.async||h.bIE)&&V&&V!="user-defined"&&("responseType" in W)){try{W.responseType=V}catch(aa){}}}catch(Z){if(T.state<2){d.error(Z.stack||Z,"error");T._ioReady(-1,C+(d.isNumber(Z.number)?"("+Z.number+")":"")+(Z.message||""))}else{d.error(Z)}return}ab=ac.xhrFields||{};if("withCredentials" in ab){if(!v){delete ab.withCredentials}}n(ab,function(ag,ae){try{W[ae]=ag}catch(af){d.error(af)}});if(P&&W.overrideMimeType){W.overrideMimeType(P)}U=ac.headers||{};var Q=U["X-Requested-With"];if(Q===false){delete U["X-Requested-With"]}if("setRequestHeader" in W){if(Y){W.setRequestHeader("Content-Type",ac.contentType)}W.setRequestHeader("Accept",V&&L[V]?L[V]+(V==="*"?"":", */*; q=0.01"):L["*"]);n(U,function(af,ae){W.setRequestHeader(ae,af)})}if(!ac.cache){W.setRequestHeader("If-Modified-Since","0");W.setRequestHeader("Cache-Control","no-cache")}ad=!q.test(ac.method);R=ad&&ac.data||null;if(ad&&s){R=ac.data}if(ac.async&&ac.timeout>0){if(ac.timeout<300){ac.timeout=300}T.timeoutTimer=setTimeout(function(){T.abort("timeout")},ac.timeout)}try{T.state=A;if(d.isFunction(T.beforeSend)){var S=T.beforeSend(W,T);if(S===false){T.abort("cancel");return}}W.send(R);R=null;ac.data=null;if(d.isFunction(T.afterSend)){T.afterSend(T)}}catch(aa){if(T.state<2){d.error(aa.stack||aa,"error");T._ioReady(-1,z+(aa.message||""))}else{d.error(aa)}}if(!ac.async||W.readyState===4){T._xhrCallback()}else{if(t(W)){W.onload=function(){W.readyState=4;W.status=K;T._xhrCallback()};W.onerror=function(){W.readyState=4;W.status=x;T._xhrCallback()}}else{W.onreadystatechange=function(){T._xhrCallback()}}}},_xhrCallback:function(N,S){var O=this,P=O.nativeXhr;try{if(P.readyState===4||S){if(t(P)){P.onerror=D;P.onload=D}else{P.onreadystatechange=D}if(S){if(P.readyState!==4){P.abort()}}else{if(!t(P)){O.responseHeadersString=P.getAllResponseHeaders()}var M=P.status,R;try{R=P.statusText}catch(Q){d.error("xhr statusText error: ");d.error(Q);R=""}O._ioReady(M,R)}}}catch(Q){d.error(Q.stack||Q,"error");P.onreadystatechange=D;if(!S){O._ioReady(-1,Q.message||"process error")}}},_setup:function(Q){var N=this,M,P,S,O,R;if(Q){N.context=Q.context;delete Q.context;if(Q instanceof J){Q=Q.config}N.config=Q;O=Q.url;if(d.startsWith(O,"http://")||d.startsWith(O,"https://")){R=new d.Uri(O)}else{if(d.startsWith(O,"//")){Q.url=O="http:"+O}R=k.resolve(O)}if(!Q.dataType){M="text"}else{M=Q.dataType.toLowerCase()}Q.dataType=M;if(!Q.method){Q.method="GET"}else{Q.method=Q.method.toUpperCase()}if(!("crossDomain" in Q)){Q.crossDomain=!R.isSameOriginAs(k)}S=Q.headers;for(P in S){if(d.isUndefined(S[P])){delete S[P]}}d.mix(N,Q)}N.state=A;return N}});function i(N){if(!N||!d.isString(N.url)){d.log("the url is error.");return}var M=new J();M.sendInternal(N);return M}d.mix(d,{ajax:i,io:{get:function(N,O,P,M){return i({method:"GET",url:N,onSuccess:O,onError:P,dataType:M})},post:function(N,P,O,Q,M){return i({method:"POST",data:P,url:N,onSuccess:O,onError:Q,dataType:M})},put:function(N,P,O,Q,M){return i({method:"PUT",data:P,url:N,onSuccess:O,onError:Q,dataType:M})}}});if(F){d.fetch=function(P,O){var M="text",R=!1;if(O){if(O.dataType){M=O.dataType}if(O.fetchRaw){R=!0}}var N,Q;N=F(P,O);if(Promise!=d.nativePromise){Q=Promise;Promise=d.nativePromise;N=N.then(function(S){Promise=Q;if(S.ok){return S}else{throw {httpCode:S.status,errorString:S.statusText}}})}else{N=N.then(function(S){if(S.ok){return S}else{throw {httpCode:S.status,errorString:S.statusText}}})}if(R){return N}if(M=="blob"){N=N.then(function(S){return S.blob()})}else{if(M=="json"){N=N.then(function(S){return S.json()})}else{if(M=="arraybuffer"){N=N.then(function(S){return S.arrayBuffer()})}else{N=N.then(function(S){return S.text()})}}}return N}}else{if(s){d.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join(""))}var y;if(Promise!=d.nativePromise){y=Promise;Promise=d.nativePromise}d.fetch=function(N,M){return new Promise(function(S,Q){var P=function(W,U,V){if(y){Promise=y}S(W)},T=function(W,U,V){if(y){Promise=y}Q({httpCode:V.status,errorString:U})},O={url:N,onSuccess:P,onError:T,dataType:"text"},R=false;if(M){if(M.method){O.method=M.method}if(M.body){O.data=M.body}if(M.headers){if(!O.headers){O.headers={}}n(M.headers,function(V,U){if(U.toLowerCase()=="content-type"){R=true}O.headers[U]=V})}if(M.dataType){O.dataType=M.dataType}}if(R){O.contentType=false}if(O.dataType=="blob"&&s){O.mimeType="text/plain; charset=x-user-defined"}d.ajax(O)})}}})})(Dynamsoft);(function(c){var b=20200521;if(c._customEvt_ver){if(c.isNumber(c._customEvt_ver)&&c._customEvt_ver>=b){return}}c._customEvt_ver=b;var a={fire:function(f){var d=this,e;d.exec=d.exec||{};f=f.toLowerCase();e=Array.prototype.slice.call(arguments,1);c.each(d.exec[f]||[],function(i){var h=i.f,g=i.c||d;try{h.apply(g,e)}catch(j){c.log(j)}})},on:function(g,f,d){var e=this;e.exec=e.exec||{};g=g.toLowerCase();e.exec[g]=e.exec[g]||[];e.exec[g].push({f:f,c:d})},off:function(j,h,k){var f=this,e=f.exec;if(!e){return}if(!j){f.exec=null;return}j=j.toLowerCase();if(!h){e[j]=null;return}var d=e[j]||[];for(var g=d.length-1;g>=0;g--){if(d[g]===h){d.splice(g,1)}}}};c.obj={customEvent:a}})(Dynamsoft.Lib);(function(b){var g=b.Lib,e=!1,c=!0,f=g.win.document,d;var a=20200521;if(g._evtBase_ver){if(g.isNumber(g._evtBase_ver)&&g._evtBase_ver>=a){return}}g._evtBase_ver=a;d=function(h){return(Dynamsoft.navInfoSync.bGecko&&"mousewheel"===h)?"DOMMouseScroll":h};g.mix(g,{addEventListener:f.addEventListener?function(i,k,j){var h=d(k);if(i){i.addEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.attachEvent("on"+h,j)}},removeEventListener:f.removeEventListener?function(i,k,j){var h=d(k);if(i){i.removeEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.detachEvent("on"+h,j)}},stopPropagation:function(h){var i=h||window.event;if(i.preventDefault){i.preventDefault()}if(i.stopPropagation){i.stopPropagation()}i.returnValue=false;i.cancelBubble=true},fireEvent:function(h,i){var j;if(f.createEvent){j=f.createEvent("HTMLEvents");j.initEvent(h,c,c);if(i.dispatchEvent){i.dispatchEvent(j)}}else{if(f.createEventObject){j=f.createEventObject();j.bubbles=c;j.cancelable=c;i.fireEvent(h,j)}else{j=new Event(h);if(i.dispatchEvent){i.dispatchEvent(j)}}}}})})(Dynamsoft);(function(f,b){var e=20200716;if(f._loadbase64_ver){if(f._loadbase64_ver>=e){return}}f._loadbase64_ver=e;var d={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};f.base64={UTF16ToUTF8:function(n){var l=[],h=n.length,j,g;for(var k=0;k<h;k++){var m=n.charCodeAt(k);if(m>0&&m<=127){l.push(n.charAt(k))}else{if(m>=128&&m<=2047){j=192|((m>>6)&31);g=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g))}else{if(m>=2048&&m<=65535){j=224|((m>>12)&15);g=128|((m>>6)&63);var o=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g),String.fromCharCode(o))}else{if(m>=65536&&m<=2097151){}else{if(m>=2097152&&m<=67108863){}else{}}}}}}return l.join("")},UTF8ToUTF16:function(m){var l=[],k=m.length,j,p,o,g,q,n,h;for(j=0;j<k;j++){g=m.charCodeAt(j);if(((g>>7)&255)==0){l.push(m.charAt(j))}else{if(((g>>5)&255)==6){q=m.charCodeAt(++j);p=(g&31)<<6;o=q&63;h=p|o;l.push(String.fromCharCode(h))}else{if(((g>>4)&255)==14){q=m.charCodeAt(++j);n=m.charCodeAt(++j);p=(g<<4)|((q>>2)&15);o=((q&3)<<6)|(n&63);h=((p&255)<<8)|o;l.push(String.fromCharCode(h))}else{if(((g>>3)&255)==30){}else{if(((g>>2)&255)==62){}else{}}}}}}return l.join("")},encode:function(o){var n=this.UTF16ToUTF8(o),j=[],l=0,g=n.length,m,k,h;while(l<g){m=n.charCodeAt(l++)&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n.charCodeAt(l++);if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n.charCodeAt(l++);j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},encodeArray:function(n){var j=[],l=0,g=n.length,m,k,h;while(l<g){m=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n[l++]&255;j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},decode:function(p){var n=this,k=[],m=0,o=p.length,l,j,h,g;while(m<o){do{l=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&l==-1);if(l==-1){break}do{j=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&j==-1);if(j==-1){break}k.push(String.fromCharCode((l<<2)|((j&48)>>4)));do{h=p.charCodeAt(m++)&255;if(h==61){return n.UTF8ToUTF16(k.join(""))}h=d.decodeChars[h]}while(m<o&&h==-1);if(h==-1){break}k.push(String.fromCharCode(((j&15)<<4)|((h&60)>>2)));do{g=p.charCodeAt(m++)&255;if(g==61){return n.UTF8ToUTF16(k.join(""))}g=d.decodeChars[g]}while(m<o&&g==-1);if(g==-1){break}k.push(String.fromCharCode(((h&3)<<6)|g))}return n.UTF8ToUTF16(k.join(""))}};f.utf8={fromUTF16:function(k){var h=[],j=0,g=k.length,l;while(j<g){l=k.charCodeAt(j);if((l>=1)&&(l<=127)){h.push(k.charAt(j))}else{if(l>2047){h.push(String.fromCharCode(224|((l>>12)&15)));h.push(String.fromCharCode(128|((l>>6)&63)));h.push(String.fromCharCode(128|((l>>0)&63)))}else{h.push(String.fromCharCode(192|((l>>6)&31)));h.push(String.fromCharCode(128|((l>>0)&63)))}}j++}return h.join("")},toUTF16:function(m){var h=[],k=0,g=m.length,n,l,j;while(k<g){n=m.charCodeAt(k++);switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h.push(m.charAt(k-1));break;case 12:case 13:l=m.charCodeAt(k++);h.push(String.fromCharCode(((n&31)<<6)|(l&63)));break;case 14:l=m.charCodeAt(k++);j=m.charCodeAt(k++);h.push(String.fromCharCode(((n&15)<<12)|((l&63)<<6)|((j&63)<<0)));break}}return h.join("")}};var c=typeof exports!="undefined"?exports:typeof self!="undefined"?self:$.global;function a(g){this.message=g}a.prototype=new Error();a.prototype.name="InvalidCharacterError";f.btoa=c.btoa?(function(g){return c.btoa(g)}):(function(j){var m=String(j);for(var l,h,g=0,k=d.encodeChars,i="";m.charAt(g|0)||(k="=",g%1);i+=k.charAt(63&l>>8-g%1*8)){h=m.charCodeAt(g+=3/4);if(h>255){throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}l=l<<8|h}return i});f.atob=c.atob?(function(g){return c.atob(g)}):(function(j){var m=String(j).replace(/[=]+$/,"");if(m.length%4==1){throw new a("'atob' failed: The string to be decoded is not correctly encoded.")}for(var l=0,k,h,g=0,i="";h=m.charAt(g++);~h&&(k=l%4?k*64+h:h,l++%4)?i+=String.fromCharCode(255&k>>(-2*l&6)):0){h=d.encodeChars.indexOf(h)}return i})})(Dynamsoft.Lib);(function(h){var f=20210107;if(h._loadjs_ver){if(h._loadjs_ver>=f){return}}h._loadjs_ver=f;var b="",d=!0,g=h.doc,a=g&&g.documentElement,c=g.getElementsByTagName("head")[0]||a,e=g.createElement("script").readyState?function(j,k){var i=j.onreadystatechange;j.onreadystatechange=function(){var l=j.readyState;if(l==="loaded"||l==="complete"){j.onreadystatechange=null;if(i){i()}k.call(this,true)}else{if(l==="loading"){}else{k.call(this,false)}}}}:function(j,k){var i=!1;j.addEventListener("load",k,i);j.addEventListener("error",k,i)};h.scriptOnload=e;h.getScript=function(j,l,m){var k,i;if(!h.isFunction(m)){m=function(){}}if(!h.isString(j)||j==b){m();return}k=g.createElement("script");i=["",j].join(b);k.src=i;if(l){k.async=d}k.charset="utf-8";e(k,m);c.insertBefore(k,c.firstChild);return k};h.getScripts=function(k,j,m){if(!h.isArray(k)){m();return}var l=k.length,i=function(n){if(n){l--}else{m()}if(l<=0){m("ok")}};if(l<=0){m("ok");return}h.each(k,function(n){h.getScript(n,j,i)})};h.getCss=function(i,l){var j,k=l;if(!h.isFunction(k)){k=!1}if(!h.isString(i)||i==b){if(k){k()}return}j=g.createElement("link");j.href=i;j.rel="stylesheet";j.async=d;if(k){e(j,k)}c.insertBefore(j,c.firstChild);return j};h.getAllCss=function(l,k){if(!h.isArray(l)){k();return}var j=l.length,i=function(m){if(m){j--}else{k()}if(j<=0){k("ok")}};h.each(l,function(m){h.getCss(m,i)})};h.addScript=function(i){var k,j;j=i.body;if(!h.isString(j)||j==b){return}k=g.createElement("script");k.charset="utf-8";if(Dynamsoft.navInfoSync.bIE){k.text=j}else{k.appendChild(g.createTextNode(j))}if(i.language){k.language=i.language}else{k.language="javascript"}if(i.type){k.type=i.type}else{k.type="text/javascript"}c.insertBefore(k,c.firstChild)};h.addJS=function(i){h.addScript({body:i})};h.addVBS=function(i){h.addScript({body:i,language:"vbscript",type:"text/vbscript"})}})(Dynamsoft.Lib);(function(a){var c=a.Lib,b=20200521;if(c._asyncQueue_ver){if(c.isNumber(c._asyncQueue_ver)&&c._asyncQueue_ver>=b){return}}c._asyncQueue_ver=b;var d={queue:[],doNextStarted:false,timer:false,pushToDo:function(g,f,e){d.queue.push({obj:g,method:f,args:e})},doNext:function(){if(!d.doNextStarted){clearTimeout(d.timer);d.timer=false;return}if(d.queue.length==0){d.timer=setTimeout(d.doNext,500);return}var h=d.queue[0],j=h.obj,k=h.method,f=h.args;d.queue.splice(0,1);if(c.isFunction(j[k])){if(f.length>2){var g=f[f.length-2],e=f[f.length-1];f[f.length-2]=function(){try{g.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)};f[f.length-1]=function(){try{e.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)}}try{j[k].apply(j,f)}catch(i){}return}else{c.log("not invoke a function: "+k);d.timer=setTimeout(d.doNext,0)}},start:function(){if(!d.doNextStarted){d.doNextStarted=true;d.timer=setTimeout(d.doNext,0)}},stop:function(){clearTimeout(d.timer);d.doNextStarted=false;d.queue=[]}};c.asyncQueue=d})(Dynamsoft);(function(f){var d=20200521;if(f._sprintf_ver){if(f._sprintf_ver>=d){return}}f._sprintf_ver=d;var e,i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function g(m,l){if("_".repeat){return m.repeat(l)}var k=0,j=[];for(;k<l;k++){j.push(m)}return j.join("")}function c(s,r){var w=1,u=s.length,x,l="",p,n,q,m,t,v,o,j;for(p=0;p<u;p++){if(typeof s[p]==="string"){l+=s[p]}else{if(typeof s[p]==="object"){q=s[p];if(q.keys){x=r[w];for(n=0;n<q.keys.length;n++){if(x==undefined){throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[n],q.keys[n-1]))}x=x[q.keys[n]]}}else{if(q.param_no){x=r[q.param_no]}else{x=r[w++]}}if(i.not_type.test(q.type)&&i.not_primitive.test(q.type)&&x instanceof Function){x=x()}if(i.numeric_arg.test(q.type)&&(typeof x!=="number"&&isNaN(x))){throw new TypeError(e("[sprintf] expecting number but found %T",x))}if(i.number.test(q.type)){o=x>=0}switch(q.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,q.width?parseInt(q.width):0);break;case"e":x=q.precision?parseFloat(x).toExponential(q.precision):parseFloat(x).toExponential();break;case"f":x=q.precision?parseFloat(x).toFixed(q.precision):parseFloat(x);break;case"g":x=q.precision?String(Number(x.toPrecision(q.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x);x=(q.precision?x.substring(0,q.precision):x);break;case"t":x=String(!!x);x=(q.precision?x.substring(0,q.precision):x);break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase();x=(q.precision?x.substring(0,q.precision):x);break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf();x=(q.precision?x.substring(0,q.precision):x);break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase();break}if(i.json.test(q.type)){l+=x}else{if(i.number.test(q.type)&&(!o||q.sign)){j=o?"+":"-";x=x.toString().replace(i.sign,"")}else{j=""}t=q.pad_char?q.pad_char==="0"?"0":q.pad_char.charAt(1):" ";v=q.width-(j+x).length;m=q.width?(v>0?g(t,v):""):"";l+=q.align?j+x+m:(t==="0"?j+m+x:m+j+x)}}}}return l}var h=Object.create?Object.create(null):{};function a(j){if(h[j]){return h[j]}var m=j,n,p=[],o=0;while(m){if((n=i.text.exec(m))!==null){p.push(n[0])}else{if((n=i.modulo.exec(m))!==null){p.push("%")}else{if((n=i.placeholder.exec(m))!==null){if(n[2]){o|=1;var q=[],l=n[2],k=[];if((k=i.key.exec(l))!==null){q.push(k[1]);while((l=l.substring(k[0].length))!==""){if((k=i.key_access.exec(l))!==null){q.push(k[1])}else{if((k=i.index_access.exec(l))!==null){q.push(k[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=q}else{o|=2}if(o===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}p.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}}}m=m.substring(n[0].length)}h[j]=p;return p}e=function(j){return c(a(j),arguments)};function b(k,j){return e.apply(null,[k].concat(j||[]))}f.sprintf=e;f.vsprintf=b})(Dynamsoft.Lib);(function(b){var f=b.Lib,e=f.doc;var d=20200521;if(f._evt_ver){if(f.isNumber(f._evt_ver)&&f._evt_ver>=d){return}}f._evt_ver=d;f.Events={registedClass:[],registedObjs:[]};var c=function(g){var i=g||window.event;var h=true;f.each(f.Events.registedObjs,function(j){f.each(f.Events.registedClass,function(k){if(j instanceof k){if(j.bFocus&&j.handlerKeyDown){h=j.handlerKeyDown(i);if(!h){return false}}}})});return h};f.ready(function(){f.addEventListener(e.documentElement,"keydown",c)});f.mix(f,{getWheelDelta:function(g){g=g||window.event;var j,i=g.wheelDelta,h=g.detail;if(i){j=i/120}if(h){j=-(h%3===0?h/3:h)}return j}});var a={LEFT:0,MIDDLE:1,RIGHT:2};f.EnumMouseButton=a;f.detectButton=function(g){var h=g||window.event;if(h.which==null){return(h.button<2)?a.LEFT:((h.button==4)?a.MIDDLE:a.RIGHT)}else{return(h.which<2)?a.LEFT:((h.which==2)?a.MIDDLE:a.RIGHT)}}})(Dynamsoft);(function(b){var a=20200521;if(b._ui_eventWhich_ver){if(b.isNumber(b._ui_eventWhich_ver)&&b._ui_eventWhich_ver>=a){return}}b._ui_eventWhich_ver=a;b.switchEvent=function(c){c=c||window.event;if(c.which==null){c.which=(c.button<2)?1:((c.button==4)?2:3)}else{c.which=(c.which<2)?1:((c.which==2)?2:3)}return c}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._ui_style_ver){if(b.isNumber(b._ui_style_ver)&&b._ui_style_ver>=a){return}}b._ui_style_ver=a;b.currentStyle=function(f,g){var e=b.win,d=e.doc,c;if(f.currentStyle){return f.currentStyle[g]}else{if(e.getComputedStyle){c=g.replace(/([A-Z])/g,"-$1");c=g.toLowerCase();return d.defaultView.getComputedStyle(f,null)[g]}}return null}})(Dynamsoft.Lib);(function(f,h){var m=Array.prototype,i=!0,t=!1,l=f.Lib,b=f.navInfoSync,o=l.isString,v=l.each,s=m.slice,n=" ",p=(b.bIE&&b.IEMode<10),r=/[\n\t\r\.]/g;var d=20200521;if(l._ui_nodelist_ver){if(l.isNumber(l._ui_nodelist_ver)&&l._ui_nodelist_ver>=d){return}}l._ui_nodelist_ver=d;function w(z,A,y){var x=this;if(!(x instanceof w)){return new w(z,A,y)}if(!z){return x}if(typeof z==="string"){l.error("Err 4001.");return x}if(l.isArray(z)||z.isNodeList){Array.prototype.push.apply(x,l.makeArray(z));return x}x[0]=z;x.length=1;return x}w.prototype={isNodeList:true,length:0,item:function(y){var x=this;if(l.isNumber(y)){if(y>=x.length){return null}else{return new w(x[y])}}else{return new w(y)}},slice:function(){return new w(s.apply(this,arguments))},getDOMNodes:function(){return s.call(this)},each:function(z,y){var x=this;v(x,function(B,A){B=new w(B);return z.call(y||B,B,A,x)});return x},getEL:function(){var x=this;return(x.length>0)?x[0]:h},all:function(x){var z,y=this;if(y.length>0){z=l.all(x,y)}else{z=new w()}return z},one:function(x){var y=this,A=y.all(x),z=A.length?A.slice(0,1):A;return z}};function j(x){return o(x)&&(x=l.trim(x))&&x.length>=3&&l.startsWith(x,"<")&&l.endsWith(x,">")}function g(x){return(n+x+n).replace(r,n)}function u(x){return(x).replace(r,"")}function a(B){var y=B.innerHTML;if(!document.all){return y}var A=/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/ig;var z=/"'([^'"]*)'"/ig;y=y.replace(A,'$1="$2"').replace(z,'"$1"');var x=y.replace(/<(\/?)(\w+)([^>]*)>/g,function(D,C,F,E){if(C){return"</"+F.toLowerCase()+">"}return("<"+F.toLowerCase()+E+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(M,H,N,L,K,J,G,I){if(K){return'="'+K+'"'+J}return M})});return x.replace(/<\/?([^>]+)>/g,function(C){return C})}var q=function(B,D){var A=B.className,x,y=D.length,C,z,E;if(A){x=g(A);C=A;z=0;for(;z<y;z++){E=u(D[z]);if(x.indexOf(n+E+n)<0){C+=n+E}}C=l.trim(C)}else{C=D.join(" ")}B.className=C},k=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;while(A.indexOf(C)>=0){A=A.replace(C,n)}}B.className=l.trim(A)}},c=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;if(A.indexOf(C)<0){return t}}return i}return t};l.mix(w.prototype,{before:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.insertBefore(A,z.childNodes[0])})}},append:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.appendChild(A)})}},html:function(y){var x=this.getEL();if(x){if(l.isUndef(y)){return a(x)}x.innerHTML="";v(l.parseHTML(y),function(z){x.appendChild(z)})}},attr:function(z,x){var y=this.getEL();if(y){if(l.isUndef(x)){if(z==="readonly"){return y.readOnly?"readonly":""}if(z==="style"||!p){y=y.attributes[z];if(y){y=y.value}}else{y=y[z]}return y}if(z=="class"){y.className=x}else{y[z]=x}}},style:function(z,x){var y=this.getEL();if(y){return l.style(y,z,x)}},css:function(x){v(this,function(y){v(x,function(z,A){l.style(y,A,z)})})},addClass:function(x){var y=this.getEL();if(y){q(y,x.split(n))}},removeClass:function(x){var y=this.getEL();if(y){k(y,x.split(n))}},hasClass:function(x){var y=this.getEL();if(y){return c(y,x.split(n))}},parent:function(){var x=this.getEL();if(x){x=x.parentNode}return new w(x)},remove:function(){var x=this.getEL();if(x){x.parentNode.removeChild(x)}},offset:function(){var x=this.getEL();return l.DOM.getElDimensions(x,i)}});function e(x,z){var y=z;if(y&&y.isNodeList){y=y.getEL()}if(o(x)){if(j(x)){l.err("Err 4002.")}return new w(l.sizzle(x,y))}if(x.isNodeList){return x}return new w(x)}l.mix(l,{all:e,one:function(x,y){var z=e(x,y);return z.length?z.slice(0,1):z},isNodeList:function(x){return x instanceof w}});l.ready(function(){l.all=e})})(Dynamsoft);(function(e){var d=e.win,c=e.doc,b=isNaN;var a=20200521;if(e._dom_ver){if(e.isNumber(e._dom_ver)&&e._dom_ver>=a){return}}e._dom_ver=a;e.DOM={getOffset:function(p,j,l){p=p||d.event;var g=l||p.target,o=0,n=0,k=0,m=0,f,i,h=false;while(g&&!b(g.offsetLeft)&&!b(g.offsetTop)){i=g.scrollLeft;f=g.scrollTop;if(g.tagName==="BODY"){if(h){i=0;f=0}else{i=i|c.documentElement.scrollLeft;f=f|c.documentElement.scrollTop}}else{if(g.style.position==="fixed"){h=true}}o+=g.offsetLeft-i;n+=g.offsetTop-f;g=g.offsetParent}if(j){k=j.Left;m=j.Top}o=p.clientX-o-k;n=p.clientY-n-m;return{x:o,y:n}},getElDimensions:function(g,i){var f,h;if(!g){return{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}f=g.style.display;g.style.display="";h=i?{offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,offsetWidth:g.offsetWidth,offsetHeight:g.offsetHeight}:{clientTop:g.clientTop,clientLeft:g.clientLeft,clientWidth:g.clientWidth?g.clientWidth:(parseInt(g.style.width)?parseInt(g.style.width):0),clientHeight:g.clientHeight?g.clientHeight:(parseInt(g.style.height)?parseInt(g.style.height):0)};g.style.display=f;return h}};e.getElDimensions=e.DOM.getElDimensions})(Dynamsoft.Lib);(function(g,h){var i=20210113,k=g.Lib;if(k._dialog_ver){if(k.isNumber(k._dialog_ver)&&k._dialog_ver>=i){return}}k._dialog_ver=i;k.loaderBarClassName="ds-dwt-loaderBar";k.loaderBarWidth="230px";k.loaderBarHeight="240px";k.loaderBarSource="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=";var f=k.win,x=k.doc,j=!0,p=!1,r,d,n=500000,a=1000;function b(y){var B,A,z;B=x.body.scrollTop||x.documentElement.scrollTop;if(f.innerHeight){z=f.innerHeight}else{z=x.documentElement.clientHeight}A=B+(z-y.offsetHeight)/2;y.style.top=A+"px";y._dlgInfo.isTopOverridden=j}function o(y,A){for(var z=0;z<y.length;++z){if(y[z]==A){return j}}return p}function s(B){for(var C=0;C<x.styleSheets.length;++C){var H=x.styleSheets[C],E=p,z=p,G,I;try{E=H.cssRules;z=x.querySelectorAll}catch(D){}if(E&&z){for(var A=0;A<E.length;++A){G=E[A];I=p;try{I=z(G.selectorText)}catch(D){}if(I&&o(I,B)){var y=G.style.getPropertyValue("top"),F=G.style.getPropertyValue("bottom");if((y&&y!="auto")||(F&&F!="auto")){return j}}}}}return p}function t(z){var y=p;if(f.getComputedStyle){y=f.getComputedStyle(z)}else{if(z.currentStyle){y=z.currentStyle}}if(y&&y.position!="absolute"){return p}if((z.style.top!="auto"&&z.style.top!="")||(z.style.bottom!="auto"&&z.style.bottom!="")){return p}return !s(z)}function v(z){var y=x.createEvent("MouseEvents");y.initMouseEvent(z.type,z.bubbles,z.cancelable,f,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.button,z.relatedTarget);return y}function c(y){x.body.dispatchEvent(v(y))}function w(){r=x.createElement("div");d=r.style;d.position="fixed";d.display="block";d.left=d.top=d.margin=d.padding=0;d.backgroundColor="#000";d.filter="alpha(opacity=30)";d.opacity=d.MozOpacity=0.3;d.zIndex=n;d.width=d.height="100%";if(x.createEvent){k.addEventListener(r,"click",c)}}function l(){if(r===h){w()}if(!x.body.contains(r)){x.body.appendChild(r)}}function u(){if(r!==h){k.removeEventListener(r,"click",c);x.body.removeChild(r);r=h}}var e={pendingDialogStack:[],_updateStacking:function(B){var D=this,y,A,z,C;A=D.pendingDialogStack;if(A.length==0){u();return}if(B!=true){l()}C=n;k.each(A,function(E){C++;E._dlgInfo.mask.style.zIndex=C++;E.style.zIndex=C})},pushDialog:function(z,B){var C=this,y,A=z.getBoundingClientRect();if(C.pendingDialogStack.length>=a){k.error("Too many modal dialogs.");return}y=x.createElement("div");y.className="dynamsoft-backdrop";if(B==true){y.style.left=(A.x|A.left)+"px";y.style.top=(A.y|A.top)+"px";y.style.width=A.width+"px";y.style.height=A.height+"px"}if(x.createEvent){k.addEventListener(y,"click",function(D){if(z.dispatchEvent){var E=v(D);z.dispatchEvent(E)}})}z.parentNode.insertBefore(y,z.nextSibling);z._dlgInfo.mask=y;C.pendingDialogStack.push(z);C._updateStacking(B)},removeDialog:function(A){var B=this,z,y;z=k.isArray(B.pendingDialogStack)?k.indexOf(A,B.pendingDialogStack):-1;if(z==-1){return}B.pendingDialogStack.splice(z,1);y=A._dlgInfo.mask;y.parentNode.removeChild(y);A._dlgInfo.mask=null;B._updateStacking()}};function m(A,z){var B=this,y;if(B.open){k.error("showDialog called on open dialog.");return}B.open=j;B.removeAttribute("closed");B.setAttribute("open","open");if(t(B)){b(B)}if(A){B._dlgInfo.modal=j;e.pushDialog(B,z)}}function q(y){var z=this;if(!z.open){k.error("closeDialog called on closed dialog.")}z.open=p;z.removeAttribute("open");z.setAttribute("closed","closed");if(typeof y!="undefined"){z.returnValue=y}if(z._dlgInfo.isTopOverridden){z.style.top="auto"}if(z._dlgInfo.modal){e.removeDialog(z)}return z.returnValue}k.dialog={setup:function(y,z){y.show=m.bind(y,p,z);y.showModal=m.bind(y,j,z);y.close=q.bind(y);y._dlgInfo={}}};k.mask={container:false,bConfined:false,dlgMask:false,preOnresize:false,preOnscroll:false};k.showMask=function(){if(k.mask.dlgMask){return}var A=k.mask.bConfined,z=k.mask.container,y;if(z){y=z.getBoundingClientRect();var D=z.firstChild;while(D){if(k.isFunction(D.getBoundingClientRect)){y=D.getBoundingClientRect();break}D=D.nextSibling}}var B=document.createElement("div");B.className="dynamsoft-dialog-wrap";if(!window.onresize){k.mask.preOnresize=false}else{k.mask.preOnresize=window.onresize}if(!window.onscroll){k.mask.preOnscroll=false}else{k.mask.preOnscroll=window.onscroll}if(A&&y){window.onresize=window.onscroll=function(){y=z.getBoundingClientRect();var E=z.firstChild;while(E){if(k.isFunction(E.getBoundingClientRect)){y=E.getBoundingClientRect();break}E=E.nextSibling}B.style.left=(y.x|y.left)+"px";B.style.top=(y.y|y.top)+"px";B.style.width=y.width+"px";if(y.width<470){k.loaderBarWidth=(y.width-10)+"px"}B.style.height=k.loaderBarHeight=y.height+"px";if(k.mask.dlgMask){k.mask.dlgMask.close();k.mask.dlgMask.showModal()}};window.onscroll()}var C=['<div align="center" ','class="',k.loaderBarClassName,'" ','style="margin:0 auto;width:',k.loaderBarWidth,";height:",k.loaderBarHeight,";line-height:",k.loaderBarHeight,'"><img src="',k.loaderBarSource,'" /></div>'].join("");B.innerHTML=C;document.body.appendChild(B);k.mask.dlgMask=B;k.dialog.setup(k.mask.dlgMask,A);k.mask.dlgMask.showModal()};k.hideMask=function(){var y=k.mask.dlgMask;if(y){y.close();document.body.removeChild(y);k.mask.dlgMask=false}if(!k.mask.preOnresize){window.onresize=null}else{window.onresize=k.mask.preOnresize}k.mask.preOnresize=false;if(!k.mask.preOnscroll){window.onscroll=null}else{window.onscroll=k.mask.preOnscroll}k.mask.preOnscroll=false}})(Dynamsoft);(function(t){var w=20200521;if(t._sizzle_ver){if(t.isNumber(t._sizzle_ver)&&t._sizzle_ver>=w){return}}t._sizzle_ver=w;var aq,g=RegExp,ae,ab,d,k,u,al,Y,U,s,v,o,p,ao=!0,f,M,b,S,am="dws_"+1*new Date(),an=window.document,K=0,y=0,ai,aj,G,z,A=function(i,e){if(i===e){s=true}return 0},I=[],V=I.pop,aa=I.push,ak=I.push,F=I.slice,H=function(ax,aw){var av=0,e=ax.length;for(;av<e;av++){if(ax[av]===aw){return av}}return -1},ag="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Q="[\\x20\\t\\r\\n\\f]",C="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ad=["\\[",Q,"*(",C,")(?:",Q,"*([*^$|!~]?=)",Q,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",C,"))|)",Q,"*\\]"].join(""),E=new g(Q+"+","g"),ah=new g(["^",Q,"+|((?:^|[^\\\\])(?:\\\\.)*)",Q,"+$"].join(""),"g"),m=new g(["^",Q,"*,",Q,"*"].join("")),X=new g(["^",Q,"*([>+~]|",Q,")",Q,"*"].join("")),h=new g("^"+C+"$"),W={ID:new g("^#("+C+")"),CLASS:new g("^\\.("+C+")"),TAG:new g("^("+C+"|[*])"),ATTR:new g("^"+ad),needsContext:new g(["^",Q,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",Q,"*((?:-\\d)?\\d*)",Q,"*\\)|)(?=[^-]|$)"].join(""),"i")},L=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,l=function(i,e){if(e){if(i==="\0"){return"\uFFFD"}return i.slice(0,-1)+"\\"+i.charCodeAt(i.length-1).toString(16)+" "}return"\\"+i},q=function(){v()};function au(){var i=[];function e(av,aw){if(i.push(av+" ")>ab.cacheLength){delete e[i.shift()]}return(e[av+" "]=aw)}return e}function a(ax){var aw=0,av=ax.length,e="";for(;aw<av;aw++){e+=ax[aw].value}return e}ai=au();aj=au();G=au();z=au();try{ak.apply((I=F.call(an.childNodes)),an.childNodes);var r=I[an.childNodes.length].nodeType}catch(at){ak={apply:I.length?function(i,e){aa.apply(i,F.call(e))}:function(ax,aw){var e=ax.length,av=0;while((ax[e++]=aw[av++])){}ax.length=e-1}}}function af(aB,av,aE,aH){var az,aF,ay,e,aG,ax,aC,aw=av&&av.ownerDocument,aD=av?av.nodeType:9;aE=aE||[];if(typeof aB!=="string"||!aB||aD!==1&&aD!==9&&aD!==11){return aE}if(!aH){if((av?av.ownerDocument||av:an)!==o){v(av)}av=av||o;if(aD!==11){if((aG=ac.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){aE.push(ay);return aE}}else{return aE}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){aE.push(ay);return aE}}}else{if(aG[2]){ak.apply(aE,av.getElementsByTagName(aB));return aE}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));return aE}}}}else{if((aG=c.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){av=ay}}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){av=ay}}az="#"+az+" "}else{if((az=aG[2])){ak.apply(aE,av.getElementsByTagName(aB));av=aE[0];az=az+" "}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));av=aE[0];az=az+" "}}}aB=aB.replace(az,"")}}}if(ae.qsa&&!z[aB+" "]&&(!f||!f.test(aB))){if(aD!==1){aw=av;aC=aB}else{if(av.nodeName.toLowerCase()!=="object"){if((e=av.getAttribute("id"))){e=e.replace(R,l)}else{av.setAttribute("id",(e=am))}ax=k(aB);aF=ax.length;while(aF--){ax[aF]="#"+e+" "+a(ax[aF])}aC=ax.join(",");aw=av}}if(aC){try{ak.apply(aE,aw.querySelectorAll(aC));return aE}catch(aA){z(aB,!0)}finally{if(e===am){av.removeAttribute("id")}}}}}return al(aB.replace(ah,"$1"),av,aE,aH)}function ap(e){e[am]=true;return e}function Z(av){var i=o.createElement("fieldset");try{return !!av(i)}catch(aw){return false}finally{if(i.parentNode){i.parentNode.removeChild(i)}i=null}}function B(e,i){}function j(i,e){var aw=e&&i,av=aw&&i.nodeType===1&&e.nodeType===1&&i.sourceIndex-e.sourceIndex;if(av){return av}if(aw){while((aw=aw.nextSibling)){if(aw===e){return -1}}}return i?1:-1}function T(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}ae=af.support={};v=af.setDocument=function(av){var e,i,aw=av?av.ownerDocument||av:an;if(aw===o||aw.nodeType!==9||!aw.documentElement){return o}o=aw;p=o.documentElement;if(an!==o&&(i=o.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",q,false)}else{if(i.attachEvent){i.attachEvent("onunload",q)}}}ae.attributes=Z(function(ax){ax.className="i";return !ax.getAttribute("className")});ae.getElementsByTagName=Z(function(ax){ax.appendChild(o.createComment(""));return !ax.getElementsByTagName("*").length});ae.getElementsByClassName=L.test(o.getElementsByClassName);ae.getById=Z(function(ax){p.appendChild(ax).id=am;return !o.getElementsByName||!o.getElementsByName(am).length});if(ae.getById){ab.filter.ID=function(ay){var ax=ay;return function(az){return az.getAttribute("id")===ax}}}else{ab.filter.ID=function(ay){var ax=new g(["^",ay,"$"].join(""),"g");return function(aA){var az=typeof aA.getAttributeNode!=="undefined"&&aA.getAttributeNode("id");return az&&ax.test(az.value)}}}ab.find.TAG=ae.getElementsByTagName?function(ax,ay){if(typeof ay.getElementsByTagName!=="undefined"){return ay.getElementsByTagName(ax)}else{if(ae.qsa){return ay.querySelectorAll(ax)}}}:function(ax,aB){var aC,aA=[],az=0,ay=aB.getElementsByTagName(ax);if(ax==="*"){while((aC=ay[az++])){if(aC.nodeType===1){aA.push(aC)}}return aA}return ay};ab.find.CLASS=ae.getElementsByClassName&&function(ay,ax){if(typeof ax.getElementsByClassName!=="undefined"){return ax.getElementsByClassName(ay)}};M=[];f=[];if((ae.qsa=L.test(o.querySelectorAll))){Z(function(ax){p.appendChild(ax).innerHTML="<a id='"+am+"'></a><select id='"+am+"-\r\\' msallowcapture=''><option selected=''></option></select>";if(ax.querySelectorAll("[msallowcapture^='']").length){f.push("[*^$]="+Q+"*(?:''|\"\")")}if(!ax.querySelectorAll("[selected]").length){f.push("\\["+Q+"*(?:value|"+ag+")")}if(!ax.querySelectorAll("[id~="+am+"-]").length){f.push("~=")}if(!ax.querySelectorAll(":checked").length){f.push(":checked")}if(!ax.querySelectorAll("a#"+am+"+*").length){f.push(".#.+[+~]")}});Z(function(ay){ay.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ax=o.createElement("input");ax.setAttribute("type","hidden");ay.appendChild(ax).setAttribute("name","D");if(ay.querySelectorAll("[name=d]").length){f.push("name"+Q+"*[*^$|!~]?=")}if(ay.querySelectorAll(":enabled").length!==2){f.push(":enabled",":disabled")}p.appendChild(ay).disabled=true;if(ay.querySelectorAll(":disabled").length!==2){f.push(":enabled",":disabled")}ay.querySelectorAll("*,:x");f.push(",.*:")})}if((ae.matchesSelector=L.test((b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)))){Z(function(ax){ae.disconnectedMatch=b.call(ax,"*");b.call(ax,"[s!='']:x")})}f=f.length&&new g(f.join("|"));M=M.length&&new g(M.join("|"));e=L.test(p.compareDocumentPosition);S=e||L.test(p.contains)?function(ay,ax){var aA=ay.nodeType===9?ay.documentElement:ay,az=ax&&ax.parentNode;return ay===az||!!(az&&az.nodeType===1&&(aA.contains?aA.contains(az):ay.compareDocumentPosition&&ay.compareDocumentPosition(az)&16))}:function(ay,ax){if(ax){while((ax=ax.parentNode)){if(ax===ay){return true}}}return false};A=e?function(ay,ax){if(ay===ax){s=true;return 0}var az=!ay.compareDocumentPosition-!ax.compareDocumentPosition;if(az){return az}az=(ay.ownerDocument||ay)===(ax.ownerDocument||ax)?ay.compareDocumentPosition(ax):1;if(az&1||(!ae.sortDetached&&ax.compareDocumentPosition(ay)===az)){if(ay===o||ay.ownerDocument===an&&S(an,ay)){return -1}if(ax===o||ax.ownerDocument===an&&S(an,ax)){return 1}return U?(H(U,ay)-H(U,ax)):0}return az&4?-1:1}:function(ay,ax){if(ay===ax){s=true;return 0}var aE,aB=0,aD=ay.parentNode,aA=ax.parentNode,az=[ay],aC=[ax];if(!aD||!aA){return ay===o?-1:ax===o?1:aD?-1:aA?1:U?(H(U,ay)-H(U,ax)):0}else{if(aD===aA){return j(ay,ax)}}aE=ay;while((aE=aE.parentNode)){az.unshift(aE)}aE=ax;while((aE=aE.parentNode)){aC.unshift(aE)}while(az[aB]===aC[aB]){aB++}return aB?j(az[aB],aC[aB]):az[aB]===an?-1:aC[aB]===an?1:0};return o};af.matches=function(i,e){return af(i,null,null,e)};af.matchesSelector=function(av,ax){if((av.ownerDocument||av)!==o){v(av)}if(ae.matchesSelector&&!z[ax+" "]&&(!M||!M.test(ax))&&(!f||!f.test(ax))){try{var i=b.call(av,ax);if(i||ae.disconnectedMatch||av.document&&av.document.nodeType!==11){return i}}catch(aw){z(ax,!0)}}return af(ax,o,null,[av]).length>0};af.contains=function(e,i){if((e.ownerDocument||e)!==o){v(e)}return S(e,i)};af.escape=function(e){return(e+"").replace(R,l)};af.error=function(e){throw new Error("Syntax error: "+e)};af.uniqueSort=function(aw){var ax,ay=[],e=0,av=0;s=!ae.detectDuplicates;U=!ae.sortStable&&aw.slice(0);aw.sort(A);if(s){while((ax=aw[av++])){if(ax===aw[av]){e=ay.push(av)}}while(e--){aw.splice(ay[e],1)}}U=null;return aw};d=af.getText=function(ay){var ax,av="",aw=0,e=ay.nodeType;if(!e){while((ax=ay[aw++])){av+=d(ax)}}else{if(e===1||e===9||e===11){if(typeof ay.textContent==="string"){return ay.textContent}else{for(ay=ay.firstChild;ay;ay=ay.nextSibling){av+=d(ay)}}}else{if(e===3||e===4){return ay.nodeValue}}}return av};ab=af.selectors={cacheLength:50,match:W,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[3]=(e[3]||e[4]||e[5]||"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)}},filter:{TAG:function(i){var e=i.toLowerCase();return i==="*"?function(){return true}:function(av){return av.nodeName&&av.nodeName.toLowerCase()===e}},CLASS:function(e){var i=ai[e+" "];return i||(i=new g("(^|"+Q+")"+e+"("+Q+"|$)"))&&ai(e,function(av){return i.test(typeof av.className==="string"&&av.className||typeof av.getAttribute!=="undefined"&&av.getAttribute("class")||"")})},ATTR:function(av,i,e){return function(ax){var aw=af.attr(ax,av);if(aw==null){return i==="!="}if(!i){return true}aw+="";return i==="="?aw===e:i==="!="?aw!==e:i==="^="?e&&aw.indexOf(e)===0:i==="*="?e&&aw.indexOf(e)>-1:i==="$="?e&&aw.slice(-e.length)===e:i==="~="?(" "+aw.replace(E," ")+" ").indexOf(e)>-1:i==="|="?aw===e||aw.slice(0,e.length+1)===e+"-":false}}}};function D(){}D.prototype=ab.filters=ab.pseudos;ab.setFilters=new D();k=af.tokenize=function(ax,aC){var i,ay,aA=[],aB,az,av,e,aw=aj[ax+" "];if(aw){return aC?0:aw.slice(0)}az=ax;av=[];e=ab.preFilter;while(az){if(!i||(ay=m.exec(az))){if(ay){az=az.slice(ay[0].length)||az}av.push((aA=[]))}i=false;if((ay=X.exec(az))){i=ay.shift();aA.push({value:i,type:ay[0].replace(ah," ")});az=az.slice(i.length)}for(aB in ab.filter){if((ay=W[aB].exec(az))&&(!e[aB]||(ay=e[aB](ay)))){i=ay.shift();aA.push({value:i,type:aB,matches:ay});az=az.slice(i.length)}}if(!i){break}}return aC?az.length:az?af.error(ax):aj(ax,av).slice(0)};function O(az,ax,ay){var e=ax.dir,aw=ax.next,av=aw||e,aA=ay&&av==="parentNode",i=y++;return ax.first?function(aD,aC,aB){while((aD=aD[e])){if(aD.nodeType===1||aA){return az(aD,aC,aB)}}return false}:function(aG,aE,aD){var aH,aB,aF,aC=[K,i];if(aD){while((aG=aG[e])){if(aG.nodeType===1||aA){if(az(aG,aE,aD)){return true}}}}else{while((aG=aG[e])){if(aG.nodeType===1||aA){aF=aG[am]||(aG[am]={});aB=aF[aG.uniqueID]||(aF[aG.uniqueID]={});if(aw&&aw===aG.nodeName.toLowerCase()){aG=aG[e]||aG}else{if((aH=aB[av])&&aH[0]===K&&aH[1]===i){return(aC[2]=aH[2])}else{aB[av]=aC;if((aC[2]=az(aG,aE,aD))){return true}}}}}}return false}}function x(e){return e.length>1?function(ay,ax,av){var aw=e.length;while(aw--){if(!e[aw](ay,ax,av)){return false}}return true}:e[0]}function J(av,ay,ax){var aw=0,e=ay.length;for(;aw<e;aw++){af(av,ay[aw],ax)}return ax}function N(e,av,aw,ax,aA){var ay,aD=[],az=0,aB=e.length,aC=av!=null;for(;az<aB;az++){if((ay=e[az])){if(!aw||aw(ay,ax,aA)){aD.push(ay);if(aC){av.push(az)}}}}return aD}function ar(av,i,ax,aw,ay,e){if(aw&&!aw[am]){aw=ar(aw)}if(ay&&!ay[am]){ay=ar(ay,e)}return ap(function(aJ,aG,aB,aI){var aL,aH,aD,aC=[],aK=[],aA=aG.length,az=aJ||J(i||"*",aB.nodeType?[aB]:aB,[]),aE=av&&(aJ||!i)?N(az,aC,av,aB,aI):az,aF=ax?ay||(aJ?av:aA||aw)?[]:aG:aE;if(ax){ax(aE,aF,aB,aI)}if(aw){aL=N(aF,aK);aw(aL,[],aB,aI);aH=aL.length;while(aH--){if((aD=aL[aH])){aF[aK[aH]]=!(aE[aK[aH]]=aD)}}}if(aJ){if(ay||av){if(ay){aL=[];aH=aF.length;while(aH--){if((aD=aF[aH])){aL.push((aE[aH]=aD))}}ay(null,(aF=[]),aL,aI)}aH=aF.length;while(aH--){if((aD=aF[aH])&&(aL=ay?H(aJ,aD):aC[aH])>-1){aJ[aL]=!(aG[aL]=aD)}}}}else{aF=N(aF===aG?aF.splice(aA,aF.length):aF);if(ay){ay(null,aG,aF,aI)}else{ak.apply(aG,aF)}}})}function P(aA){var av,ay,aw,az=aA.length,aD=ab.relative[aA[0].type],aE=aD||ab.relative[" "],ax=aD?1:0,aB=O(function(i){return i===av},aE,true),aC=O(function(i){return H(av,i)>-1},aE,true),e=[function(aH,aG,aF){var i=(!aD&&(aF||aG!==Y))||((av=aG).nodeType?aB(aH,aG,aF):aC(aH,aG,aF));av=null;return i}];for(;ax<az;ax++){if((ay=ab.relative[aA[ax].type])){e=[O(x(e),ay)]}else{ay=ab.filter[aA[ax].type].apply(null,aA[ax].matches);if(ay[am]){aw=++ax;for(;aw<az;aw++){if(ab.relative[aA[aw].type]){break}}return ar(ax>1&&x(e),ax>1&&a(aA.slice(0,ax-1).concat({value:aA[ax-2].type===" "?"*":""})).replace(ah,"$1"),ay,ax<aw&&P(aA.slice(ax,aw)),aw<az&&P((aA=aA.slice(aw))),aw<az&&a(aA))}e.push(ay)}}return x(e)}function n(aw,av){var e=av.length>0,ax=aw.length>0,i=function(aH,aB,aG,aF,aK){var aC,aD,aI,aM=0,aE="0",ay=aH&&[],aN=[],aL=Y,aA=aH||ax&&ab.find.TAG("*",aK),az=(K+=aL==null?1:Math.random()||0.1),aJ=aA.length;if(aK){Y=aB===o||aB||aK}for(;aE!==aJ&&(aC=aA[aE])!=null;aE++){if(ax&&aC){aD=0;if(!aB&&aC.ownerDocument!==o){v(aC);aG=!ao}while((aI=aw[aD++])){if(aI(aC,aB||o,aG)){aF.push(aC);break}}if(aK){K=az}}if(e){if((aC=!aI&&aC)){aM--}if(aH){ay.push(aC)}}}aM+=aE;if(e&&aE!==aM){aD=0;while((aI=av[aD++])){aI(ay,aN,aB,aG)}if(aH){if(aM>0){while(aE--){if(!(ay[aE]||aN[aE])){aN[aE]=V.call(aF)}}}aN=N(aN)}ak.apply(aF,aN);if(aK&&!aH&&aN.length>0&&(aM+av.length)>1){af.uniqueSort(aF)}}if(aK){K=az;Y=aL}return ay};return e?ap(i):i}u=af.compile=function(e,aw){var ax,av=[],az=[],ay=G[e+" "];if(!ay){if(!aw){aw=k(e)}ax=aw.length;while(ax--){ay=P(aw[ax]);if(ay[am]){av.push(ay)}else{az.push(ay)}}ay=G(e,n(az,av));ay.selector=e}return ay};al=af.select=function(e,az,ay,av){var ax,aA=typeof e==="function"&&e,aw=!av&&k((e=aA.selector||e));ay=ay||[];(aA||u(e,aw))(av,az,!ao,ay,!az||az);return ay};ae.sortStable=am.split("").sort(A).join("")===am;ae.detectDuplicates=!!s;v();ae.sortDetached=Z(function(e){return e.compareDocumentPosition(o.createElement("fieldset"))&1});if(!Z(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){B("type|href|height|width",function(i,e){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)})}if(!ae.attributes||!Z(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){B("value",function(i,e){if(i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!Z(function(e){return e.getAttribute("disabled")==null})){B(ag,function(i,e){var av;return i[e]===true?e.toLowerCase():(av=i.getAttributeNode(e))&&av.specified?av.value:null})}t.support=ae;t.sizzle=af})(Dynamsoft.Lib);(function(j){var aa=Array.prototype,t=aa.slice,f=j.doc,U=j.each,d=f.documentElement;var y=20200521;if(j._ui_nodelistExt_ver){if(j.isNumber(j._ui_nodelistExt_ver)&&j._ui_nodelistExt_ver>=y){return}}j._ui_nodelistExt_ver=y;var M=j.support,Q=j.sizzle;var b,S,T,I,r,k,K=f.createElement("div"),Y=f.createElement("div");function p(){var ad,ac;d.appendChild(K);Y.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";b=T=k=false;S=r=true;if(window.getComputedStyle){ac=window.getComputedStyle(Y);b=(ac||{}).top!=="1%";k=(ac||{}).marginLeft==="2px";T=(ac||{width:"4px"}).width==="4px";Y.style.marginRight="50%";S=(ac||{marginRight:"4px"}).marginRight==="4px";ad=Y.appendChild(document.createElement("div"));ad.style.cssText=Y.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";ad.style.marginRight=ad.style.width="0";Y.style.width="1px";r=!parseFloat((window.getComputedStyle(ad)||{}).marginRight);Y.removeChild(ad)}Y.style.display="none";I=Y.getClientRects().length===0;if(I){Y.style.display="";Y.innerHTML="<table><tr><td></td><td>t</td></tr></table>";Y.childNodes[0].style.borderCollapse="separate";ad=Y.getElementsByTagName("td");ad[0].style.cssText="margin:0;border:0;padding:0;display:none";I=ad[0].offsetHeight===0;if(I){ad[0].style.display="";ad[1].style.display="none";I=ad[0].offsetHeight===0}}d.removeChild(K)}if(!Y.style){return}Y.style.cssText="float:left;opacity:.5";M.opacity=Y.style.opacity==="0.5";M.cssFloat=!!Y.style.cssFloat;Y.style.backgroundClip="content-box";Y.cloneNode(true).style.backgroundClip="";M.clearCloneStyle=Y.style.backgroundClip==="content-box";K=document.createElement("div");K.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";Y.innerHTML="";K.appendChild(Y);M.boxSizing=Y.style.boxSizing===""||Y.style.MozBoxSizing===""||Y.style.WebkitBoxSizing==="";j.mix(M,{reliableHiddenOffsets:function(){if(b==null){p()}return I},boxSizingReliable:function(){if(b==null){p()}return T},pixelMarginRight:function(){if(b==null){p()}return S},pixelPosition:function(){if(b==null){p()}return b},reliableMarginRight:function(){if(b==null){p()}return r},reliableMarginLeft:function(){if(b==null){p()}return k}});var i,g,x=(/^margin/),q=/^(top|right|bottom|left)$/,Z=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source,J=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),o=new RegExp("^("+Z+")(.*)$","i");if(window.getComputedStyle){i=function(ae){var ad,ac;ad=j.isFunction(ae.getEL)?ae.getEL():ae;ac=ad.ownerDocument.defaultView;if(!ac||!ac.opener){ac=window}return ac.getComputedStyle(ad)};g=function(aj,ad,ai){var ag,af,ah,ac,ae=aj.style;ai=ai||i(aj);ac=ai?ai.getPropertyValue(ad)||ai[ad]:undefined;if((ac===""||ac===undefined)&&!Q.contains(aj.ownerDocument,aj)){ac=j.style(aj,ad)}if(ai){if(!M.pixelMarginRight()&&J.test(ac)&&x.test(ad)){ag=ae.width;af=ae.minWidth;ah=ae.maxWidth;ae.minWidth=ae.maxWidth=ae.width=ac;ac=ai.width;ae.width=ag;ae.minWidth=af;ae.maxWidth=ah}}return ac===undefined?ac:ac+""}}else{if(d.currentStyle){i=function(ac){return ac.currentStyle};g=function(ai,af,ah){var aj,ad,ac,ae,ag=ai.style;ah=ah||i(ai);ae=ah?ah[af]:undefined;if(ae==null&&ag&&ag[af]){ae=ag[af]}if(J.test(ae)&&!q.test(af)){aj=ag.left;ad=ai.runtimeStyle;ac=ad&&ad.left;if(ac){ad.left=ai.currentStyle.left}ag.left=af==="fontSize"?"1em":ae;ae=ag.pixelLeft+"px";ag.left=aj;if(ac){ad.left=ac}}return ae===undefined?ae:ae+""||"auto"}}}var e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,n=(/<([\w:-]+)/),c=(/^\s+/),u=/<|&#?\w+;/,E=/<tbody/i,G=/^-ms-/,z=/-([\da-z])/gi,A=/^(none|table(?!-c[ea]).+)/,O=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/),L={position:"absolute",visibility:"hidden",display:"block"},D={letterSpacing:"0",fontWeight:"400"},a=["Top","Right","Bottom","Left"];var R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:M.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};var C,X=["Webkit","O","Moz","ms"],H="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";var V=document.createElement("div");if(!V.style){return}C=V.style;M.cssFloat=!!V.style.cssFloat;var B=function(ac,ad){return ad.toUpperCase()};var v={type:j.type,cssHooks:{},htmlPrefilter:function(ac){return ac.replace(e,"<$1></$2>")},nodeName:function(ad,ac){return ad.nodeName&&ad.nodeName.toLowerCase()===ac.toLowerCase()},merge:function(ag,ae){var ac=+ae.length,ad=0,af=ag.length;while(ad<ac){ag[af++]=ae[ad++]}if(ac!==ac){while(ae[ad]!==undefined){ag[af++]=ae[ad++]}}ag.length=af;return ag},camelCase:function(ac){return ac.replace(G,"ms-").replace(z,B)},cssProps:{"float":M.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true}};function N(ac){if(ac in C){return ac}var ae=ac.charAt(0).toUpperCase()+ac.slice(1),ad=X.length;while(ad--){ac=X[ad]+ae;if(ac in C){return ac}}}function m(af,ac){var ad,ag,ae=0,ah=typeof af.getElementsByTagName!=="undefined"?af.getElementsByTagName(ac||"*"):typeof af.querySelectorAll!=="undefined"?af.querySelectorAll(ac||"*"):undefined;if(!ah){ah=[];for(ad=af.childNodes||af;(ag=ad[ae])!=null;ae++){if(!ac||v.nodeName(ag,ac)){ah.push(ag)}else{v.merge(ah,m(ag,ac))}}}return ac===undefined||ac&&v.nodeName(af,ac)?v.merge([af],ah):ah}function W(ae){var ad=H.split("|"),ac=ae.createDocumentFragment();if(ac.createElement){while(ad.length){ac.createElement(ad.pop())}}return ac}function h(ad,af){var ak,ah,aj,am,ao,an,ae,ai=ad.length,ag=W(af),ac=[],al=0;for(;al<ai;al++){ah=ad[al];if(ah||ah===0){if(j.type(ah)==="object"){v.merge(ac,ah.nodeType?[ah]:ah)}else{if(!u.test(ah)){ac.push(af.createTextNode(ah))}else{am=am||ag.appendChild(af.createElement("div"));ao=(n.exec(ah)||["",""])[1].toLowerCase();ae=R[ao]||R._default;am.innerHTML=ae[1]+v.htmlPrefilter(ah)+ae[2];ak=ae[0];while(ak--){am=am.lastChild}if(!M.leadingWhitespace&&c.test(ah)){ac.push(af.createTextNode(c.exec(ah)[0]))}if(!M.tbody){ah=ao==="table"&&!E.test(ah)?am.firstChild:ae[1]==="<table>"&&!E.test(ah)?am:0;ak=ah&&ah.childNodes.length;while(ak--){if(v.nodeName((an=ah.childNodes[ak]),"tbody")&&!an.childNodes.length){ah.removeChild(an)}}}v.merge(ac,am.childNodes);am.textContent="";while(am.firstChild){am.removeChild(am.firstChild)}am=ag.lastChild}}}}if(am){ag.removeChild(am)}al=0;while((ah=ac[al++])){if(ah.tagName!=="SCRIPT"){aj=Q.contains(ah.ownerDocument,ah);ag.appendChild(ah)}}am=null;return ag}var F=function(ah,ag,ai,af){var ae,ad,ac={};U(ag,function(ak,aj){ac[aj]=ah.style[aj];ah.style[aj]=ag[aj]});ae=ai.apply(ah,af||[]);U(ag,function(ak,aj){ah.style[aj]=ac[aj]});return ae};function s(ag,ad,ac,ai,af){var ae=ac===(ai?"border":"content")?4:ad==="width"?1:0,ah=0;for(;ae<4;ae+=2){if(ac==="margin"){ah+=j.css(ag,ac+a[ae],true,af)}if(ai){if(ac==="content"){ah-=j.css(ag,"padding"+a[ae],true,af)}if(ac!=="margin"){ah-=j.css(ag,"border"+a[ae]+"Width",true,af)}}else{ah+=j.css(ag,"padding"+a[ae],true,af);if(ac!=="padding"){ah+=j.css(ag,"border"+a[ae]+"Width",true,af)}}}return ah}function ab(ag,ad,ac){var af=true,ah=ad==="width"?ag.offsetWidth:ag.offsetHeight,ae=i(ag),ai=M.boxSizing&&j.css(ag,"boxSizing",false,ae)==="border-box";if(ah<=0||ah==null){ah=g(ag,ad,ae);if(ah<0||ah==null){ah=ag.style[ad]}if(J.test(ah)){return ah}af=ai&&(M.boxSizingReliable()||ah===ag.style[ad]);ah=parseFloat(ah)||0}return(ah+s(ag,ad,ac||(ai?"border":"content"),af,ae))}function P(ac){var ad=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i");return ad.exec(ac)}function w(ac,ae,af){var ad=o.exec(ae);return ad?Math.max(0,ad[1]-(af||0))+(ad[2]||"px"):ae}function l(ad,ac,ag,al){var am,ae=1,ai=20,ak=al?function(){return al.cur()}:function(){return j.css(ad,ac,"")},ah=ak(),aj=ag&&ag[3]||(v.cssNumber[ac]?"":"px"),af=(v.cssNumber[ac]||aj!=="px"&&+ah)&&P(j.css(ad,ac));if(af&&af[3]!==aj){aj=aj||af[3];ag=ag||[];af=+ah||1;do{ae=ae||".5";af=af/ae;j.style(ad,ac,af+aj)}while(ae!==(ae=ak()/ah)&&ae!==1&&--ai)}if(ag){af=+af||+ah||0;am=ag[1]?af+(ag[1]+1)*ag[2]:+ag[2];if(al){al.unit=aj;al.start=af;al.end=am}}return am}U(["height","width"],function(ac,ad){v.cssHooks[ac]={get:function(ag,af,ae){if(af){return A.test(j.css(ag,"display"))&&ag.offsetWidth===0?F(ag,L,function(){return ab(ag,ac,ae)}):ab(ag,ac,ae)}},set:function(ag,ah,ae){var af=ae&&i(ag);return w(ag,ah,ae?s(ag,ac,ae,M.boxSizing&&j.css(ag,"boxSizing",false,af)==="border-box",af):0)}}});j.style=function(ae,ad,aj,af){if(!ae||ae.nodeType===3||ae.nodeType===8||!ae.style){return}var ah,ai,ak,ag=v.camelCase(ad),ac=ae.style;ad=v.cssProps[ag]||(v.cssProps[ag]=N(ag)||ag);ak=v.cssHooks[ad]||v.cssHooks[ag];if(aj!==undefined){ai=typeof aj;if(ai==="string"&&(ah=P(aj))&&ah[1]){aj=l(ae,ad,ah);ai="number"}if(aj==null||aj!==aj){return}if(ai==="number"){aj+=ah&&ah[3]||(v.cssNumber[ag]?"":"px")}if(!M.clearCloneStyle&&aj===""&&ad.indexOf("background")===0){ac[ad]="inherit"}if(!ak||!("set" in ak)||(aj=ak.set(ae,aj,af))!==undefined){ac[ad]=aj}}else{if(ak&&"get" in ak&&(ah=ak.get(ae,false,af))!==undefined){return ah}return ac[ad]+""}};j.css=function(ai,ag,ad,ah){var af,aj,ac,ae=v.camelCase(ag);ag=v.cssProps[ae]||(v.cssProps[ae]=N(ae)||ae);ac=v.cssHooks[ag]||v.cssHooks[ae];if(ac&&"get" in ac){aj=ac.get(ai,true,ad)}if(aj===undefined){aj=g(ai,ag,ah)}if(aj==="normal"&&ag in D){aj=D[ag]}if(ad===""||ad){af=parseFloat(aj);return ad===true||isFinite(af)?af||0:aj}return aj};j.parseHTML=function(ae,ad){if(!ae||typeof ae!=="string"){return[]}if(typeof ad==="boolean"){ad=false}ad=ad||document;var ac=O.exec(ae);if(ac){return[ad.createElement(ac[1])]}ac=h([ae],ad);return v.merge([],ac.childNodes)}})(Dynamsoft.Lib);(function(f,i){var c=Dynamsoft.managerEnv,k=f.LS,h=Dynamsoft.navInfoSync.host,d,a,g=20200914,j=function(){if(Dynamsoft.dcp){var l=Dynamsoft.dcp.dcpJSVer;if(f.isNumber(l)){return l>=g}}return false};if(!c){Dynamsoft.managerEnv={};c=Dynamsoft.managerEnv}c.resourcesPath=c.resourcesPath||"Resources";c.IfUpdateService=c.IfUpdateService?true:false;if(j()){j=i;g=i;return}a={dcpStatus:0,bConnected:false,connectedResult:"",curPortIndex:0,bConnectNumLimited:true,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}};var b=[],e=0;Dynamsoft.dcp=d={host:"127.0.0.1",ports:[[18625,18626]],win64Port:[18627,18628],ifCheck64bitServiceFirst:false,dcpJSVer:g,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],DWASMVer14:[14,3,1,"0115"],managerVersion:[16,0,0,"0428"],managerVersionMac:[16,0,0,"0428"],managerVersionLinux:[16,0,0,"0428"],serviceVersion:[1,5,3,"0107"],serviceVersionMac:[1,5,3,"0107"],serviceVersionLinux:[1,5,3,"0107"],detect:a,strSID:"",bEnhancedMode:false,b64bit:false,onReadys:[],getManagerVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.managerVersionMac}else{if(l.bLinux){return d.managerVersionLinux}}}return d.managerVersion},getServiceVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.serviceVersionMac}else{if(l.bLinux){return d.serviceVersionLinux}}}return d.serviceVersion},versionInfo:function(p,l){var o=0,n=function(t){if(f.isArray(t)&&t.length>0&&t[0]){a.curPort=d.ports[o%d.ports.length];var w=t[0];if(f.isString(w)&&d._compareVersion(w.split(","),d.oldDWASMVer)){var v=f.isString(t[1])&&t[1].toLowerCase(),u="",s=false,q=false;if(t.length>4){u=f.isString(t[2])?t[2]:"";s=f.isString(t[3])&&(t[3]==="true");q=f.isString(t[4])&&(t[4]==="64")}d.strSID=u;d.bEnhancedMode=s;d.b64bit=q;a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.Connected;d._sendStatusEvent(false,w);if(f.isFunction(p)){setTimeout(function(){p(u,s)},0)}return true}}return false},m=function(r,s,q){++o;a.curPortIndex=o%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&o>=a.IMAXCONNECTCOUNT){setTimeout(function(){p(r,s,q)},0);return true}return false};a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,l,n,m)},_checkOldManagerVersion:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,i,m,l)},_checkManagerVersion:function(l,n,m){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",false,l,n,m)},_checkService:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingServiceVer;this._postBase("DSVersion",false,i,m,l)},_checkUpdateFile:function(m,l){this._postBase("CheckUpdateFile",false,i,m,l)},_updateService:function(m,l){this._postBase("UpdateService",false,i,m,l)},_postBase:function(n,r,o,t,s){var q,l;if(r){q=d.oldDWASMVerStr}else{q="dwasm2_"+d._getModuleVer()}l={id:"1",method:n,version:q,parameter:[]};if(o){if(f.startsWith(o,"http://")||f.startsWith(o,"https://")){if(Dynamsoft.managerEnv.ifCheckRemoteProductKey){var p=this,m=o;f.ajax({method:"GET",url:m,onSuccess:function(u){l.productKey=u;p._postBaseV2(n,r,l,t,s)},onError:s});return true}}else{l.productKey=o}}this._postBaseV2(n,r,l,t,s);return true},_postBaseV2:function(r,w,m,A,z){var x,B,t,u=f.stringify(m);if(!f.isFunction(A)||!f.isFunction(z)){return}if(d.detect.bConnected&&r=="VersionInfo"){A(d.detect.connectedResult);return}B=function(D,E,C){s--;if(s==0){if(z(D,E,C)){return}}};t=function(D,F,C){var E=d._getJSON(D);if(E&&"result" in E){s=-1;if(d.detect.bConnected){return}d.detect.bConnected=true;d.detect.connectedResult=E.result;d.detect.dcpStatus=d.detect.EnumDCP_DetectStatus.Connected;d.detect.curPort=d.ports[C.index];d.ports=[d.detect.curPort];d.detect.curPortIndex=0;if(k.isSupportLS()){k.item("DCP_port",d.detect.curPort[1])}if(A(E.result)){return}}B(D,F,C)};var p,s=d.ports.length;if(s>1&&k.isSupportLS()){var n=k.item("DCP_port");if(f.isString(n)&&n!==""){for(p=1;p<s;p++){var l=d.ports[p],y,v;y=l[0];v=l[1];if(v==n){d.ports[p][0]=d.ports[0][0];d.ports[p][1]=d.ports[0][1];d.ports[0][0]=y;d.ports[0][1]=v}break}}}if(d.detect.bConnected){s=1}b=[];d.detect.bConnected=false;for(p=0;p<s;p++){var o=[d._getPreUrl(p),w?"dcp/":d._getModuleName(),w?d.oldDWASMVerStr:d._getModuleVer(),"/",r,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");b.push({method:"POST",url:o,timeout:200,data:u,onSuccess:t,onError:B})}for(p=0;p<s;p++){var q=f.ajax(b[p]);q.index=p}},loadZip:function(m,q,p,r){var o,n=q,l=p;if(n===100){n=0;l=function(s){if(f.isString(s)){s=s.replace('"result" : [ 0,','"result" : [ 100,')}p(s)}}if(Dynamsoft.managerEnv.IfUpdateService){o=[d._getPreUrl(a.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",n,"&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}else{o=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}f.ajax({method:"POST",url:o,async:true,data:m,onSuccess:l,onError:r})},oldLoadZip:function(m,l,o,p){var n=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");f.ajax({method:"POST",url:n,async:true,data:m,onSuccess:o,onError:p})},_getPreUrl:function(o){var l,m;if(Dynamsoft.navInfoSync.bSSL){m="https://";l=d.ports[o][1]}else{m="http://";l=d.ports[o][0]}return[m,d.host,":",l,"/"].join("")},_getJSON:function(l){return l?f.parse(l):!1},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.getManagerVersion().join("")},_compareVersion:function(m,l){var n=f.isLocalIP(d.host);if(!n){return true}if(f.isArray(m)&&m.length==4&&f.isArray(l)&&l.length>=4){return m[0]>l[0]||m[0]==l[0]&&m[1]>l[1]||m[0]==l[0]&&m[1]==l[1]&&m[2]>l[2]||m[0]==l[0]&&m[1]==l[1]&&m[2]==l[2]&&parseInt(m[3])>=parseInt(l[3])}else{if(f.isArray(m)&&m.length==1&&f.isArray(l)&&l.length>=1){return parseInt(m[0])>=parseInt(l[0])}}return false},_getDSUpdateZipUrl:function(){var m=Dynamsoft.Lib.getNavInfo(),n,l,o="";n="Win";if(m.bMac){n="Mac"}else{if(m.bLinux){n="Linux"}}if(Dynamsoft.navInfoSync.bFileSystem){l=""}else{l="?t="+f.now()}if(m.bWin&&d.b64bit){o="_x64"}return[Dynamsoft.managerEnv.resourcesPath,"/dist/serviceupdate/",n,"DSUpdate_",d.getManagerVersion().join("."),o,".zip",l].join("")},getPorts:function(l,p,o){var n="GetPorts",q="dwasm2_"+d._getModuleVer(),m={id:"1",method:n,version:q,parameter:[l]};this._postBaseV2(n,false,m,p,o)},checkDcpForUpdate:function(q,l,s,t,o,n,D,v){var r=false,F=true,B=3,m=0,y=function(J){if(!(f.isArray(J)&&J.length>0&&J[0])){return false}var K=J[0].split(",");var I=false;if(J.length>4){I=f.isString(J[4])&&(J[4]==="64")}d.b64bit=I;if(!Dynamsoft.managerEnv.IfUpdateService){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{if(d._compareVersion(K,d.oldDWASMVer)){var H=d._getDSUpdateZipUrl();r=true;var M=function(N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadedZip;d._sendStatusEvent();var O=0;d.oldLoadZip(N,O,function(){setTimeout(function(){d._checkManagerVersion(v,u,p)},5000)},L)},L=function(O,P,N){d._funUpdateFailed(o,n,O,N.status);setTimeout(D,0)},G=function(O,Q,N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(o){o()}var R=N.status,P;if(R==200){P=O}else{P="The update package can't be downloaded. The error code is "+R+"."}if(n){n(true,P)}d._sendStatusEvent(true,P);setTimeout(D,0)};if(s){s()}if(t){t()}a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.ajax({method:"GET",url:H,async:true,dataType:"blob",onSuccess:M,onError:G})}else{if(F){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;if(s){s()}if(q){q()}d._sendStatusEvent();F=false}}}return true},x=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;d._sendStatusEvent()}else{setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},u=function(G){if(!(f.isArray(G)&&G.length>0&&G[0])){return false}var H=G[0].split(",");if(d._compareVersion(H,d.getManagerVersion())){if(Dynamsoft.managerEnv.IfUpdateService){if(r){setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}return true}return false},p=function(I,J,H){var G=1000;if(B<3){G=500}B--;if(B<0){d._funShowUpgradeDialogWhenUpdateFailed(o,n);setTimeout(D,0)}else{setTimeout(function(){d._checkManagerVersion(v,u,p)},G)}return true},E=function(H){if(!(f.isArray(H)&&H.length>0&&H[0])){if(s){s()}return false}var G=H[0].split(",");if(d._compareVersion(G,d.getServiceVersion())){a.bConnected=true;if(o){o()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,H[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}return true},w=function(H,I,G){d._funUpdateFailed(o,n,H,G.status);setTimeout(D,0);return true};var A=false,C=function(I){if(!(f.isArray(I)&&I.length>0&&I[0])){return false}var L=I[0];if(f.isString(L)&&d._compareVersion(L.split(","),d.oldDWASMVer)){var K=f.isString(I[1])&&I[1].toLowerCase(),J="",H=false,G=false;if(I.length>4){A=true;J=f.isString(I[2])?I[2]:"";H=f.isString(I[3])&&(I[3]==="true");G=f.isString(I[4])&&(I[4]==="64")}d.strSID=J;d.bEnhancedMode=H;d.b64bit=G;a.curPort=d.ports[m%d.ports.length];if(!Dynamsoft.managerEnv.IfUpdateService){a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{m=0;a.curPortIndex=0;if(F){if(s){s()}if(q){q()}F=false}setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},z=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(F){if(s){s()}if(q){q(G,H)}F=false}if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){m=0;a.curPortIndex=0;setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}else{setTimeout(function(){d._checkManagerVersion(v,C,z)},1000)}return true};if(l){l()}d._checkManagerVersion(v,C,z)},_checkUpdateZip:function(p,w,o,x,q){var r=function(B,C,A){var D=-1;if(A){D=A.status}if(D==0){setTimeout(function(){d._checkService(v,s)},5000);return true}var z=d._getDSUpdateZipUrl();a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.ajax({method:"GET",url:z,async:true,dataType:"blob",onSuccess:l,onError:u});return true},u=function(A,C,z){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(w){w()}var D=z.status,B;if(D==200){B=A}else{B="The update package can't be downloaded. The error code is "+D+"."}if(o){o(true,B)}d._sendStatusEvent(true,B);setTimeout(x,0);return true},t=function(A){if(!(f.isArray(A)&&A.length>1)){return false}if(A[1]==true){a.dcpStatus=a.EnumDCP_DetectStatus.VerifiedZip;d._sendStatusEvent();a.dcpStatus=a.EnumDCP_DetectStatus.UpdatingService;d._sendStatusEvent();setTimeout(function(){d._checkService(v,s)},5000)}else{var z=0;if("exception" in A){z=A.exception}if(z==-2373){d._funUpdateFailed(w,o,A,200);setTimeout(x,0);return true}setTimeout(r,0)}return true},l=function(z){var A=1;Dynamsoft.dcp.loadZip(z,A,function(B){var D,C;try{if(f.isString(B)){C=f.parse(B.replace(/\0/g,""));if("result" in C){D=C.result}}}catch(E){}if(f.isArray(D)&&D.length>2&&D[2]==true){setTimeout(function(){d._checkService(v,s)},5000);return}d._funUpdateFailed(w,o,B,200);setTimeout(x,0)},n)},n=function(A,B,z){var C=-1;if(z){C=z.status}if(C==0){setTimeout(function(){d._checkService(v,s)},5000)}else{d._funUpdateFailed(w,o,A,z.status);setTimeout(x,0)}return true},y=function(z){if(!(f.isArray(z)&&z.length>0)){return false}if(z[0]==true){setTimeout(function(){d._checkService(v,s)},5000)}else{d._funUpdateFailed(w,o,z,200);setTimeout(x,0)}return true},m=3,v=function(A){if(!(f.isArray(A)&&A.length>0&&A[0])){return false}var z=A[0].split(",");if(d._compareVersion(z,d.getServiceVersion())){a.bConnected=true;if(w){w()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,A[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(x,0);return true}return false},s=function(A,B){var z=1000;if(m<3){z=500}m--;if(m<0){d._funShowUpgradeDialogWhenUpdateFailed(w,o);setTimeout(x,0);return true}setTimeout(function(){d._checkService(v,s)},z);return true};if(p){p()}a.dcpStatus=a.EnumDCP_DetectStatus.VerifyingZip;d._sendStatusEvent();d._checkUpdateFile(t,r)},_getStatusString:function(p,o){var m,l,n="";if(p==a.EnumDCP_DetectStatus.Init){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.Connected){if(o){n=o}return"Getting manager version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.DownloadingZip){return"Downloading the update package"}else{if(p==a.EnumDCP_DetectStatus.DownloadedZip){return"Update package downloaded"}else{if(p==a.EnumDCP_DetectStatus.DownloadFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"Update package failed to download"+m+l}else{if(p==a.EnumDCP_DetectStatus.CheckingManagerVer){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.CheckingServiceVer){return"Getting service version"}else{if(p==a.EnumDCP_DetectStatus.NotInstalled){return"Dynamsoft Service Not Installed"}else{if(p==a.EnumDCP_DetectStatus.UpdateSkipped){return"Update skipped"}else{if(p==a.EnumDCP_DetectStatus.CheckedService){if(o){n=o}return"Getting service version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.VerifyingZip){return"Verifying the update package"}else{if(p==a.EnumDCP_DetectStatus.VerifiedZip){return"Update package verified"}else{if(p==a.EnumDCP_DetectStatus.UpdatingService){return"Updating the service"}else{if(p==a.EnumDCP_DetectStatus.UpdateSucceed){return"Update succeeded"}else{if(p==a.EnumDCP_DetectStatus.UpdateFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"The update failed"+m+l}}}}}}}}}}}}}}}return""},_sendStatusEvent:function(m,n){var l=m?true:false;if(f.isFunction(h.OnGetServiceUpdateStatus)){h.OnGetServiceUpdateStatus(l,a.dcpStatus,d._getStatusString(a.dcpStatus,n))}},_getErr:function(m){var n,l="";try{if(f.isString(m)){n=m.replace(/\0/g,"");n=f.parse(n)}else{if(m){n=m}}if("description" in n){l=n.description}}catch(o){}return l},_funShowUpgradeDialogWhenUpdateFailed:function(m,l){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}if(l){l()}d._sendStatusEvent(true);return true},_funUpdateFailed:function(m,l,n,q){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}var o,p;if(q==200){o="The update failed.";p=d._getStatusString(a.dcpStatus,d._getErr(n))}else{o="The update failed. The error code is "+q;p=o}if(l){l(true,o)}d._sendStatusEvent(true,p);return true},getDSPath:function(l,n){var p=Dynamsoft.managerEnv.resourcesPath,o=n;if(Dynamsoft.Lib.isString(p)&&p.length>0){if(p[p.length-1]!="/"){p=p+"/"}}else{p="Resources/"}if(!o){var m=Dynamsoft.Lib.getNavInfo();if(m.bMac){o=".pkg"}else{if(m.bLinux){o=".deb"}else{o=".msi"}}}return[p,"dist/DynamsoftServiceSetup",o].join("")},getLinuxHTML5DebPath:function(){return Dynamsoft.dcp.getDSPath(false,".deb")},getLinuxHTML5RpmPath:function(){return Dynamsoft.dcp.getDSPath(false,".rpm")}};j=i;g=i;c=i;f.domReady(function(){if(d.onReadys.length>0){f.each(d.onReadys,function(l){if(f.isFunction(l)){l()}})}});Dynamsoft.Ready=function(l){return f.asyncGetNavInfo().then(function(){try{l(f)}catch(m){f.log(m.stack||m,"error");throw m}})}})(Dynamsoft.Lib);var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.AddonReady(function(i,e){Dynamsoft.DWT.EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};var j=Dynamsoft,k=1,g=!0,m=!1,l=Dynamsoft.dcp,u=l.detect,a="upload",n=[1,7,0,"0330"],s="upload_"+n.join(""),r={getFullUrl:function(x){return[j.FileUploader.protocol,j.FileUploader.ip,":",j.FileUploader.port,"/dcp/",s,"/",x,"?type=1&dsver=",n.join(""),"&ts=",i.now()].join("")},runUploadFile:function(){return r.getFullUrl("RunUploadFile")},versionInfo:function(){return r.getFullUrl("VersionInfo")},cancelAllUploadFile:function(){return r.getFullUrl("CancelAllUploadFile")},getUploadStatus:function(){return r.getFullUrl("GetUploadStatus")},deleteUploadTask:function(){return r.getFullUrl("DeleteUploadTask")}},f={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:false,VERIFYHOST:false,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(y,x){},OnRunSuccess:function(x){},OnRunFailure:function(z,y,x){}};var h=0,w="",t={Upload_InvalidRemoteFilename:function(){h=-1;w="The zip file that contains the upload library (.dll) is invalid."},ServerUrlError:function(){h=-2;w="Upload failed because the url to upload to is invalid."},HttpUploadError:function(x,y,z){h=-3;if(x){w="Upload cancelled."}else{if(y&&y!=""){w="Upload failed with error: "+y}else{w="Upload failed."}if(y&&y!=""){w=w+"("+z+")"}}},HttpContentError:function(){h=-4;w="Upload failed because the file to upload has invalid content."},InvalidJobId:function(){h=-5;w="Invalid upload job id."},HttpRunError:function(){h=-6;w="Cannot create an upload job."},HttpFilenameError:function(){h=-7;w="The file name is incorrect in the upload job."},CancelAllWhenJobWatingError:function(){h=-8;w="Can not cancel all jobs when at least one job is still being created."},DownloadError:function(){h=-9;w="The zip file that contains the upload library (.dll) download failed."},MissingDll:function(){h=-10;w=["Error: the file UploadModule_",n.join("."),".dll is missing or invalid in the Dynamsoft Service Directory."].join("")},MobileNotSupport:function(){h=-2400;w="File uploader addon doesn't work under current settings."},_resetErr:function(){h=0;w=""}},o=function(){var x=false;if(Dynamsoft.DWT){x=(Dynamsoft.DWT.UseLocalService===false)}return x||Dynamsoft.navInfoSync.bMobile};function b(){}b.prototype={runWaiting:0,CreateJob:function(){var x={HttpHeader:{},documents:[],formFields:[],bEvent:false};i.mix(x,f);x.SourceValue=new d(x);x.FormField=new v(x);return x},Run:function(x){var E=this,B,A='""',z=x.ServerUrl,C="";if(x.ar&&x.cu){}else{if(j.DWT){if(j.DWT.ProductKey){A='"'+j.DWT.ProductKey+'"'}if(j.DWT.handshakeCode||j.DWT.organizationID){Dynamsoft.DWT.lglic().then(function(J){x.ar=J.ar;x.cu=J.cu;E.Run(x)});return true}}}if(!i.isString(z)||z==""){x.id=-1;t.ServerUrlError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}if(!x.documents||!i.isArray(x.documents)||x.documents.length<=0){x.id=-1;t.HttpContentError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}x.Url=z;delete x.ServerUrl;for(B=0;B<x.documents;B++){var G=x.documents[B];if(!i.isString(G.files)||G.files==""){x.id=-1;t.HttpFilenameError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}if(!i.isString(G.remoteName)||G.remoteName==""){G.remoteName="RemoteFile"}}var H=x.SourceValue;delete x.SourceValue;var I=x.FormField;delete x.FormField;var F=i.stringify(x);F=i.replaceAll(F,'"',"'");x.ServerUrl=z;delete x.Url;x.SourceValue=H;x.FormField=I;var D,y;y=['{"id":"',k,'","method":"RunUploadFile","version":"',s,'","parameter":[',A,',"',F,'"'];if(x.ar&&x.cu){var C=[',"',x.ar,'","',x.cu,'",0]}'].join("");delete x.ar;delete x.cu;y.push(C)}else{y.push("]}")}D=y.join("");E.runWaiting++;i.ajax({url:r.runUploadFile(),method:"post",processData:false,data:D,dataType:"json",onSuccess:function(M){E.runWaiting--;if(M){var L=M.UploadId;if(L&&L>0){x.id=L;j.FileUploader.map[x.id]=x;j.FileUploader.ids.push(M.UploadId);if(x.OnUploadTransferPercentage){x.OnUploadTransferPercentage(x,0)}}else{var J=M.errorcode,K=M.errorstring;if(J&&K){h=J;w=K}else{t.HttpRunError()}if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}}}},onError:function(J,K,L){E.runWaiting--;j.FileUploader.parseHttpErrors(J,K,L);if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}}});return true},Cancel:function(y){if(!y.id||y.id<0){t.InvalidJobId();if(!y.bEvent&&i.isFunction(y.OnRunFailure)){y.bEvent=true;y.OnRunFailure(y,h,w);y.bEvent=false}return false}var x='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+y.id+'"]}';i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:x,onSuccess:function(z){j.FileUploader.deleteJobById(y.id)},onError:function(z,A,B){j.FileUploader.parseHttpErrors(z,A,B);if(!y.bEvent&&i.isFunction(y.OnRunFailure)){y.bEvent=true;y.OnRunFailure(y,h,w);y.bEvent=false}}});return true},CancelAllUpload:function(){var z=this,y=j.FileUploader.ids,x='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+y.join(",")+'"]}';if(z.runWaiting>0){t.CancelAllWhenJobWatingError();return false}else{if(z.runWaiting<0){z.runWaiting=0}}if(y.length<=0){return true}i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:x,onSuccess:function(B){for(var A=0;A<y.length;A++){j.FileUploader.deleteJobById(y[A])}j.FileUploader.ids=[];j.FileUploader.map=[]},onError:function(A,B,C){j.FileUploader.parseHttpErrors(A,B,C)}});return true},OnUploadTransferPercentage:function(y,x){},OnRunSuccess:function(x){},OnRunFailure:function(z,y,x){}};function d(x){this.job=x}j.SourceValue=d;d.prototype.Add=function(x,C,B){var A=this.job,z=B,y=x;if(!i.isString(y)||y==""){t.HttpFilenameError();if(!A.bEvent&&i.isFunction(A.OnRunFailure)){A.bEvent=true;A.OnRunFailure(A,h,w);A.bEvent=false}return}if(!z){z="RemoteFile"}y=Dynamsoft.Lib.replaceAll(y,"\\\\","\\\\");A.documents.push({files:[y],fileName:C,remoteName:z})};function v(x){this.job=x}j.FormField=v;v.prototype.Add=function(z,y){var A,C,B=y,x=z;if(B==null){B=""}if(!i.isString(x)||x==""||!i.isString(B)){return false}B=encodeURI(B);x=encodeURI(x);if(x.indexOf("'")>-1||B.indexOf("'")>-1){return false}for(A=0;A<this.job.formFields.length;A++){C=this.job.formFields[A];if(C.name==x){C.value=B;return true}}this.job.formFields.push({name:x,value:B});return true};j.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",nextLoopTime:600,deleteJobById:function(A){t._resetErr();if(o()){t.MobileNotSupport();return false}var x;if(!A){return}for(x=0;x<j.FileUploader.ids.length;x++){if(A==j.FileUploader.ids[x]){j.FileUploader.ids.splice(x,1);break}}var z=j.FileUploader.map[A];z.SourceValue.job=null;delete z.SourceValue;z.FormField.job=null;delete z.FormField;delete j.FileUploader.map[A];for(x=z.documents.length-1;x>=0;x--){z.documents.splice(x,1)}for(x=z.formFields.length-1;x>=0;x--){z.formFields.splice(x,1)}var y='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+A+'"]}';i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:y})},parseHttpErrors:function(C,z,B){var y,A;if(C&&i.isArray(C)&&C.length>2){y=C[1];A=C[2]}else{y=z;A=B}if(A.state==2&&A.status==0){if(A.statusText==="abort"){var x=g;t.HttpUploadError(x)}else{t.ServerUrlError()}}else{t.HttpUploadError(m,y,A.status)}},loadHttpBlob:function(D,z,A,E,x,C,y){var F=function(I,G,H){j.FileUploader.parseHttpErrors(I,G,H);if(i.isFunction(x)){x()}},B={method:D,url:z,dataType:"blob",async:A,onSuccess:E,onError:F};if(i.isFunction(C)){B.beforeSend=function(G){G.addEventListener("progress",function(H){delete (H.totalSize);delete (H.position);C(H)},m)}}i.ajax(B)},_OnPercentDone:function(){},_GetPort:function(z){if(l.bEnhancedMode){i.showMask();var y=function(D){i.hideMask();if(i.isArray(D)&&D.length>1){var C=D[1];if(C){l.currentUserPorts=C;if(C.dcp){var B=C.dcp.port,A=C.dcp.sslPort;if(B==0||A==0){setTimeout(function(){l.getPorts(l.strSID,y,x)},0);return true}if(Dynamsoft.navInfoSync.bSSL){j.FileUploader.port=A}else{j.FileUploader.port=B}}}}z();return true},x=function(){i.hideMask();z();return true};l.getPorts(l.strSID,y,x);return true}z();return true},Init:function(D,x,A){t._resetErr();if(o()){t.MobileNotSupport();if(i.isFunction(A)){A(h,w)}return false}var y,C,E=l.detect.curPortIndex;if(Dynamsoft.navInfoSync.bSSL){C="https://";y=l.ports[E][1]}else{C="http://";y=l.ports[E][0]}j.FileUploader.port=y;j.FileUploader.protocol=C;j.FileUploader.ip=l.host;var z=function(){j.FileUploader._GetPort(function(){x(new b());setTimeout(j.FileUploader.StatusLoop,500)})};var B=function(){if(!i.isString(D)){t.MissingDll();if(i.isFunction(A)){A(h,w)}return false}var G=D;if(!G||G==""){G=Dynamsoft.managerEnv.resourcesPath+"/dist/win/UploadModule_"+n.join(".")+".zip"}var F=function(){t.DownloadError();if(i.isFunction(A)){A(h,w)}return false};var H=m;return j.FileUploader.loadHttpBlob("get",G,true,function(I){var J=100;l.loadZip(I,J,z,F)},F,H)};return j.FileUploader.VersionInfo(function(G){if(G&&G.result&&i.isArray(G.result)&&G.result.length>1){var F=G.result[0].split(",");if(l._compareVersion(F,n)){z();return true}}B()},B)},VersionInfo:function(x,y){t._resetErr();if(o()){t.MobileNotSupport();if(i.isFunction(y)){y(h,w)}return false}var z='{"id":"'+k+'","method":"VersionInfo","version":"'+s+'","parameter":[]}';i.ajax({url:r.versionInfo(),method:"post",dataType:"json",processData:false,data:z,onSuccess:function(A){x(A)},onError:function(A,B,C){j.FileUploader.parseHttpErrors(A,B,C);if(i.isFunction(y)){y(h,w)}}});return true},StatusLoop:function(){t._resetErr();if(o()){t.MobileNotSupport();return false}j.FileUploader.GetUploadStatus();setTimeout(j.FileUploader.StatusLoop,j.FileUploader.nextLoopTime);return true},GetUploadStatus:function(){t._resetErr();if(j.FileUploader.ids.length<=0){return true}if(o()){t.MobileNotSupport();return false}var x='{"id":"'+k+'","method":"GetUploadStatus","version":"'+s+'","parameter":["'+j.FileUploader.ids.join(",")+'"]}';i.ajax({url:r.getUploadStatus(),method:"post",dataType:"json",processData:false,data:x,onSuccess:function(z){if(i.isArray(z)){var C=0,F;for(;C<z.length;C++){F=z[C];var E=F.id,A=j.FileUploader.map[E],G=F.percentage,D=F.errorcode,B=F.response,y=F.errorstring;if(!A){continue}if(D==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_FINISHED){A.OnUploadTransferPercentage(A,100,q(B));if(!A.bEvent&&i.isFunction(A.OnRunSuccess)){A.bEvent=true;A.OnRunSuccess(A,q(B));A.bEvent=false}j.FileUploader.deleteJobById(E)}else{if(D==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_OK||D==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_NOT_SEND||D==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_WAITFOR_SEND||D==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_SENDING||D==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_PAUSE||D==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||D==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_TASK_INIT){A.OnUploadTransferPercentage(A,G,q(B))}else{if(!A.bEvent&&i.isFunction(A.OnRunFailure)){A.bEvent=true;A.OnRunFailure(A,D,y,q(B));A.bEvent=false}j.FileUploader.deleteJobById(E)}}}}},onError:function(y,z,A){}});return true}};var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var p=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function q(E){var D,C,A,y;var B,x,z;x=E.length;B=0;z="";while(B<x){do{D=p[E.charCodeAt(B++)&255]}while(B<x&&D==-1);if(D==-1){break}do{C=p[E.charCodeAt(B++)&255]}while(B<x&&C==-1);if(C==-1){break}z+=String.fromCharCode((D<<2)|((C&48)>>4));do{A=E.charCodeAt(B++)&255;if(A==61){return z}A=p[A]}while(B<x&&A==-1);if(A==-1){break}z+=String.fromCharCode(((C&15)<<4)|((A&60)>>2));do{y=E.charCodeAt(B++)&255;if(y==61){return z}y=p[y]}while(B<x&&y==-1);if(y==-1){break}z+=String.fromCharCode(((A&3)<<6)|y)}return z}}); 
(function(){
	"use strict";
  var screenW = screen.width,
  promptDlgWidth = screenW > 550 ? 550 : (screenW - 10),
  promptDlgWidth2 = screenW > 680 ? 680 : (screenW - 10),
  reconnectTime = 0,
	imagesInBase64 = {
		icn_download: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII=',
		icn_install: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg==',
		icn_scan: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII='
	},
  ua = navigator.userAgent.toLowerCase(),
  arm64 = (/arm64|aarch64/g).test(ua),
  mips64 = (/mips64/g).test(ua);

function getDebPath (strSuffix) {
  var _path = Dynamsoft.DWT.ResourcesPath;
  if(Dynamsoft.Lib.isString(_path) && _path.length > 0) {
    if (_path[_path.length - 1] != '/') {
      _path = _path + '/';
    }                
  } else {
    _path = 'Resources/';
  }

  return  [
    _path, 
    'dist/DynamsoftServiceSetup-',
    strSuffix,
    '.deb'
  ].join('');
}

Dynamsoft.OnWebTwainNotFoundOnWindowsCallback = function (ProductName, InstallerUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft, objUrl = { 'default': InstallerUrl };
    _this._show_install_dialog(ProductName, objUrl, bHTML5, Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow, bIE, bSafari, bSSL, strIEVersion);
};

Dynamsoft.OnWebTwainNotFoundOnLinuxCallback = function (ProductName, strDebUrl, strRpmUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft, objUrl = { 'default': strDebUrl, 'deb': strDebUrl, 'rpm': strRpmUrl };
    _this._show_install_dialog(ProductName, objUrl, bHTML5, Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux, bIE, bSafari, bSSL, strIEVersion);
};

Dynamsoft.OnWebTwainNotFoundOnMacCallback = function (ProductName, InstallerUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft, objUrl = { 'default': InstallerUrl };
    _this._show_install_dialog(ProductName, objUrl, bHTML5, Dynamsoft.DWT.EnumDWT_PlatformType.enumMac, bIE, bSafari, bSSL, strIEVersion);
};

Dynamsoft.dwt_change_install_url = function (url) {
	var install = document.getElementById('dwt-btn-install');
	if (install)
		install.href = url;
};

Dynamsoft.DWT_Reconnect = function () {
    var _this = Dynamsoft;
    if (((new Date() - reconnectTime) / 1000) > 30) {
		// change prompt
		var el = document.getElementById('dwt-btn-install');
		if (el) {
		    el.innerHTML = 'Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()">click here to connect again</a>.';
		}
		return;
	}
	if (_this.DWT) {
	    _this.DWT.CheckConnectToTheService(function () {
	        _this.DWT.ConnectToTheService();
		}, function () {
		    setTimeout(Dynamsoft.DWT_Reconnect, 500);
		});
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.DCP_DWT_onclickInstallButton = function () {
  var btnInstall = document.getElementById('dwt-btn-install');
	if (btnInstall) {
		setTimeout(function () {
			var install = document.getElementById('dwt-install-url-div');
			if (install)
				install.style.display = 'none';
			var el = document.getElementById('dwt-btn-install');
			if (el && el.getAttribute("html5") == "1") {
				var pel = el.parentNode,
					newDiv = document.createElement('div');
				newDiv.id = 'dwt-btn-install';
				newDiv.style.textAlign = "center";
				newDiv.style.paddingBottom = '15px';
				newDiv.innerHTML = 'Connecting to the service...';
				newDiv.setAttribute("html5", "1");
				pel.removeChild(el);
				pel.appendChild(newDiv);
				reconnectTime = new Date();
				setTimeout(Dynamsoft.DWT_Reconnect, 10);
			} else {
				var pel = el.parentNode;
				pel.removeChild(el);
			}
		}, 10);
	}
	return true;
};

Dynamsoft._show_install_dialog = function (ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft, ObjString, title, browserActionNeeded;
    if(Dynamsoft.navInfoSync.bFileSystem) {
      Dynamsoft._show_online_download_dialog(objInstallerUrl, bHTML5, iPlatform);
      return;
    }

	title = 'Please complete one-time setup';
	ObjString = [
		'<div class="dynamsoft-dwt-dlg-title">',
		title,
		'</div>'];
	if (_this.DWT) {
	    if (iPlatform == Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux || navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
			browserActionNeeded = 'RESTART';
		}
		else {
			browserActionNeeded = 'REFRESH';
		}
		ObjString.push('<div class="dynamsoft-dwt-installdlg-iconholder"> ');
		ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>');
		ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>');
		ObjString.push('<img style="margin: 0px 134px 0px 0px" src=' + imagesInBase64.icn_download + ' alt="download">');
		ObjString.push('<img style="margin: 2px 132px 2px 0px" src=' + imagesInBase64.icn_install + ' alt="install">');
		ObjString.push('<img src=' + imagesInBase64.icn_scan + ' alt="scan">');
		ObjString.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>');
		ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>');
		ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>');
		ObjString.push('</div>');
		ObjString.push('</div>');
    
		if (bHTML5 && iPlatform == Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux) {
      ObjString.push('<div style="margin:10px 0 0 60px;">');
      ObjString.push('<div id="dwt-install-url-div">');
      if(arm64 || mips64) {
        if(arm64)
          objInstallerUrl['default'] = getDebPath('arm64');
        else if(mips64)
          objInstallerUrl['default'] = getDebPath('mips64el');
      } else {
        ObjString.push('<div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\'' + objInstallerUrl.deb + '\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian/ChromeOS)</label></div>');
        ObjString.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\'' + objInstallerUrl.rpm + '\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div>');
      }
      ObjString.push('</div></div>');
		}

		ObjString.push('<div><a id="dwt-btn-install" target="_blank" href="');
		ObjString.push(objInstallerUrl['default']);
		ObjString.push('"');
		if (bHTML5) {
			ObjString.push(' html5="1"');
		} else {
			ObjString.push(' html5="0"');
		}

		ObjString.push(' onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>');
		if (bHTML5) {
			if (bIE) {
				ObjString.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">');
				ObjString.push('If you still see the dialog after installing the scan service, please<br />');
				ObjString.push('1. Add the website to the zone of trusted sites.<br />');
				ObjString.push('IE | Tools | Internet Options | Security | Trusted Sites.<br />');
				ObjString.push('2. Refresh your browser.');
				ObjString.push('</div>');

			} else {
				
				if (iPlatform == Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux) {
					ObjString.push('<div class="dynamsoft-dwt-dlg-tail">');
					ObjString.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>' + browserActionNeeded + '</strong>  your browser.</div>');
					ObjString.push('</div>');
				}
			
			}

		} else {
			ObjString.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">');
			if (bIE) {
				ObjString.push('After the installation, please<br />');
				ObjString.push('1. Restart the browser<br />');
				ObjString.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.');
			} else {
				ObjString.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>');
			}
			ObjString.push('</div>');
		}
		_this.DWT.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTwainOldPluginNotAllowedCallback = function (ProductName) {
    var _this = Dynamsoft;
    var ObjString = [
		'<div class="dynamsoft-dwt-dlg-title">',
		ProductName,
		' plugin is not allowed to run on this site.',
		'</div>',
		'<div class="dynamsoft-dwt-dlg-tail" style="margin-top:40px">',
		'Please click "<strong>Always run on this site</strong>" for the prompt that says <br />"<strong>',
		ProductName,
		' Plugin needs your permission to run</strong>"<br /><div class="dynamsoft-dwt-dlg-red">After that, you need to refresh or restart the browser.',
		'</div></div>'];

    if (_this.DWT) {
        _this.DWT.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTwainNeedUpgradeCallback = function (ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion, bForceUpgrade, bError, strErrorString) {
  Dynamsoft._show_install_dialog(ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion);
};

Dynamsoft.OnWebTwainPreExecuteCallback = function () {
    var _this = Dynamsoft;
    if (_this.DWT) {
        _this.DWT.OnWebTwainPreExecute();
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTwainPostExecuteCallback = function () {
    var _this = Dynamsoft;
    if (_this.DWT) {
        _this.DWT.OnWebTwainPostExecute();
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnRemoteWebTwainNotFoundCallback = function (ProductName, ip, port, bSSL, bMobile) {
    var _this = Dynamsoft;
    var ObjString;
	
	if(bMobile) {
		ObjString = [
			'<div class="dynamsoft-dwt-dlg-tips" style="font-size:1.5em">',
			'The Dynamsoft Service is not configured correctly on ',
			'"', ip, '". Please check.',
			'</div>'
		];
	} else {
		ObjString = [
			'<div class="dynamsoft-dwt-dlg-tips">',
			'Dynamsoft Service is missing a certificate for the following IP/domain <br />',
			'or isn\'t installed on the PC with the following IP/domain <br />',
			'"', ip, '".<br />',
			'Please make sure you have put the correct certificate <br />',
			'in the {Dynamsoft Service Directory}<br />',
			'or that Dynamsoft Service is installed on that specified PC.',
			'</div>',
			'<div class="dynamsoft-dwt-dlg-tail">',
			'<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
		];
	}
	if (_this.DWT) {
	    _this.DWT.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback = function (ProductName, ip, port, bSSL) {
    var _this = Dynamsoft;
    var ObjString = [
		'<div class="dynamsoft-dwt-dlg-tips">',
		'Dynamsoft Service is outdated on the PC with IP/domain <br />',
		'"', ip, '".<br />',
		'Please open the page on that PC to download and install it.',
		'</div>',
		'<div class="dynamsoft-dwt-dlg-tail">',
		'<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
	];
    if (_this.DWT) {
        _this.DWT.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTWAINDllDownloadSuccessful = function () {
	console.log('The Web TWAIN Module was downloaded successfully!');
};

Dynamsoft.OnWebTWAINDllDownloadFailure = function (ProductName, errorCode, errorString) {
    var _this = Dynamsoft;
    if (_this.DWT) {
		if (errorCode == -2371/* EnumDWT_Error.ModuleNotExists*/) {
			var ObjString = [
				'<div class="dynamsoft-dwt-dlg-tips">',
				errorString,
				'</div>',
				'<div class="dynamsoft-dwt-dlg-tail">',
				'<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'
			];

			_this.DWT.ShowDialog(promptDlgWidth, 0, ObjString.join(''));

		}
		return true;
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnGetServiceUpdateStatus = function (bError, statusCode, statusString) {
	if (statusString != "Update skipped")
		console.log(statusString);
};

Dynamsoft.OnWebTWAINModuleDownloadManually = function (objInstallerUrl, iPlatform, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft;
    return _this._show_install_dialog('', objInstallerUrl, true, iPlatform, bIE, bSafari, bSSL, strIEVersion);
};

Dynamsoft._show_online_download_dialog = function (objInstallerUrl, bHTML5, iPlatform) {
  var ObjString, 
    vers = Dynamsoft.DWT.JSVersion.split(','),
    strV = vers[0] + '.' + vers[1],
    page_path = location.pathname,
    online_url, local_file_path, ext;
  page_path = page_path.substring(0, page_path.lastIndexOf('/')+1);

  if (iPlatform == Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux) {
    if(arm64 || mips64) {
      if(arm64)
        objInstallerUrl['default'] = getDebPath('arm64');
      else if(mips64)
        objInstallerUrl['default'] = getDebPath('mips64el');
    } else {
    }
  }
  ext = objInstallerUrl['default'].substr(objInstallerUrl['default'].length-3);

  online_url = ['https://www.dynamsoft.com/web-twain/install-dynamsoft-service/?productId=1000001',
      '&downloadLink=https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup_', 
      strV, '.',  
      ext].join('');

  local_file_path = Dynamsoft.Lib.Path.normalize([
    page_path,
    objInstallerUrl['default']
  ].join(''));

  if (iPlatform == Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow) {
    if(local_file_path.indexOf('/') == 0) {
      local_file_path = local_file_path.substr(1);
    }
  }

  ObjString = [
    '<div class="dynamsoft-dwt-ltsdlg-body" style="padding:0 20px 20px 20px">',
    '<div>To support document scanning, please complete one-time installation of the DynamsoftServiceSetup.', ext, ' on this machine.</div>',
    '<div>You can download the file via this trust site:</div>',
    '<div><a id="dwt-btn-install" target="_blank" href="',
    online_url,
    '"><div class="dynamsoft-dwt-dlg-button">Open Site</div></a></div>',
    '<div style="word-break: break-word;">Or, go to <br />',
    local_file_path,
    ' if the file exists.<br /></div>',
    '</div>'
  ];

  Dynamsoft.DWT.ShowDialog(promptDlgWidth, 0, ObjString.join(''));

};


Dynamsoft.OnLTSLicenseError = function (message) {
  
  var addMessage = '', ObjString, lexp = Dynamsoft.DWT.licenseException, code = 0;
  if(lexp)
    code = lexp.code;

  if(code == -2440 ||  // NetworkError
    code == -2441 ||  // Timedout
    code == -2443 ||  // CorsError
    code == -2446 ||  // LtsJsLoadError
    message.indexOf('Internet connection')>-1 || 
    message.indexOf('Storage')>-1) {

    var purchaseUrl = 'https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&deploymenttype=js';
    addMessage = '<div>You can register for a free 30-day trial <a href="' + purchaseUrl + '" target="_blank" class="dynamsoft-major-color">here</a>. Make sure to select the product Dynamic Web TWAIN.</div>';
  }

  ObjString = [
    '<div class="dynamsoft-dialog dynamsoft-dialog2">',
    '<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:30px;margin-left:10px">Error</span><div class="dynamsoft-dialog-close">x</div></div>',
    '<div class="dynamsoft-dwt-ltsdlg-body">',
    message,
    addMessage,
    '</div></div>'
  ];

  Dynamsoft.Lib.ShowLicenseDialog(ObjString.join(''), {
    width: promptDlgWidth2,
    height: 0,
    bClose: true
  });
};

Dynamsoft.OnLTSConnectionFailure = Dynamsoft.OnLTSLicenseError;
Dynamsoft.OnLTSReturnedAnError = Dynamsoft.OnLTSLicenseError;
Dynamsoft.OnLTSUUIDError = Dynamsoft.OnLTSLicenseError;

Dynamsoft.OnLTSConnectionWarning = function () {
  
  var ObjString = [
    '<div class="dynamsoft-dialog dynamsoft-dialog2">',
    '<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:30px;margin-left:10px">Warning</span><div class="dynamsoft-dialog-close">x</div></div>',
    '<div class="dynamsoft-dwt-ltsdlg-body">',
    'Warning: You are seeing this dialog because Dynamic Web TWAIN has failed to connect to the License Tracking Server. ',
    'A cached authorization is being used, and you can continue to use the software as usual. ',
    'Please get connected to the network as soon as possible. ',
    Dynamsoft.DWT.isPublicLicense() ? '<a class="dynamsoft-major-color" href="https://www.dynamsoft.com/company/contact/">Contact Dynamsoft</a> ' :  'Contact the site administrator ',
	  'for more information.',
    '</div></div>'
  ].join('');
  
  Dynamsoft.Lib.ShowLicenseDialog(ObjString, {
    width: promptDlgWidth2,
    height: 0,
    bClose: true
  });
};

Dynamsoft.OnLTSPublicLicenseMessage = function (message) {
  
  var ObjString = [
    '<div class="dynamsoft-dialog dynamsoft-dialog2">',
    '<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:30px;margin-left:10px">Warning</span><div class="dynamsoft-dialog-close">x</div></div>',
    '<div class="dynamsoft-dwt-ltsdlg-body">',
    message,
    '</div></div>'
  ].join('');

  Dynamsoft.Lib.ShowLicenseDialog(ObjString, {
    width: promptDlgWidth2,
    height: 0,
    bClose: true
  });
};

})();
 
/**
 * Basic Configuration (config.js with differences)
 */
Dynamsoft.DWT.AutoLoad = false;
Dynamsoft.DWT.IfAddMD5InUploadHeader = false;
Dynamsoft.DWT.IfConfineMaskWithinTheViewer = false;
