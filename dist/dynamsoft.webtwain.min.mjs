// @20220627 192534 
/*
* @name: dwt all-in-one package
* @version: 17.3
* @components:
*   + Dynamsoft Dynamic Web TWAIN version: 17.3
*   + Dynamsoft Barcode Reader Addon for DWT version 17.3 (DBR version 8.8.7)
*   + Dynamsoft PDF Rasterizer Addon for DWT version: 17.3
*   + Dynamsoft OCR Basic Addon for DWT version: 17.3
*   + Dynamsoft OCR Pro Addon for DWT version: 17.3
*   + Dynamsoft Webcam Addon for DWT version: 17.3
*   + Dynamsoft Camera Addon for DWT version: 17.3
*   + Dynamsoft File Uploader version: 17.3
*/

 
/*! 20220627191623 - 20220627 19090
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
* Version: 17.3
*/
/// Dynamsoft JavaScript Core, version 6.0.29 20220623182832


/**
* dynamsoft-javascript-barcode is the package for Dynamsoft WASM-based Barcode Reader.
* It's used as part of the barcode add-on when required.
*/
import DSBarcodeReader from "dynamsoft-javascript-barcode";

var Dynamsoft=window.Dynamsoft||{Lib:{}};var self=window;window.Dynamsoft=Dynamsoft;!function(){Dynamsoft.Lib||(Dynamsoft.Lib={});var e,r,t=Dynamsoft.Lib,a=navigator,s=!0,n=!1,o=!1,i=!1,b=!1,g=!1,f=!1,d=!1,u=!1,w=!1,y=!1,m=[];"userAgentData"in a?(y=!0,(e=a.userAgentData).platform&&""!=e.platform&&("brands"in e&&Array.isArray(e.brands)&&0<e.brands.length?m=e.brands:"uaList"in e&&Array.isArray(e.uaList)&&0<e.uaList.length&&(m=e.uaList),0<m.length&&(s=!1))):(e=a.platform.toLowerCase(),a=a.userAgent.toLowerCase(),n=/win32|win64|windows/.test(e),b=/ucweb|ucbrowser/g.test(a),g=/playbook/g.test(a),f=/blackberry|bb10/g.test(a),d=/huaweibrowser/g.test(a),u=/opera|opr/g.test(a),o=!((w=/firefox|fxios/g.test(a))||d)&&/edge\/|edga\/|edgios\/|edg\//g.test(a),y=!(f||g||b||u||o||d)&&/chrome|crios/g.test(a),!n||o||w||y||(e=a.indexOf("msie "),r=a.indexOf("trident"),a=a.indexOf("rv:"),i=-1!=e||-1!=r||-1!=a)),t.preNavInfo={bUseUserAgent:s,uaBrands:m,bIE:i,bEdge:o,bWin:n,bUC:b,bPlaybook:g,bBlackBerry:f,bHuaWeiBrowser:d,bOpera:u,bFirefox:w,bChrome:y}}();if(Dynamsoft.Lib.preNavInfo.bIE){
/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2018 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
/**
 * bluebird build version 3.7.2
 * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,n;return function r(t,e,n){function i(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,r,t,e,n)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._haveDrainedQueues=!1;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=p}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}function a(t){for(;t.length()>0;)c(t)}function c(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}var u;try{throw new Error}catch(l){u=l}var p=t("./schedule"),f=t("./queue");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s,r.prototype._drainQueues=function(){a(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,a(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=u},{"./queue":26,"./schedule":29}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var u=n(o),l=new t(e);l._propagateFrom(this,1);var p=this._target();if(l._setBoundTo(u),u instanceof t){var f={promiseRejectionQueued:!1,promise:l,target:p,bindingPromise:u};p._then(e,s,void 0,l,f),u._then(a,c,void 0,l,f),l._setOnCancel(u)}else l._resolveCallback(p);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),c=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(c){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,c=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,a){return function(c){var u=a._boundValue();t:for(var l=0;l<t.length;++l){var p=t[l];if(p===Error||null!=p&&p.prototype instanceof Error){if(c instanceof p)return o(n).call(u,c)}else if("function"==typeof p){var f=o(p).call(u,c);if(f===s)return f;if(f)return o(n).call(u,c)}else if(r.isObject(c)){for(var h=i(p),_=0;_<h.length;++_){var d=h[_];if(p[d]!=c[d])continue t}return o(n).call(u,c)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,e){return{promise:e}}function s(){return!1}function a(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+B.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function c(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?B.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function u(){return this._onCancelField}function l(t){this._onCancelField=t}function p(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function _(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function d(){this._trace=new V(this._peekContext())}function v(t,e){if(q(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=F(t);B.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),B.notEnumerableProp(t,"__stackCleaned__",!0)}}}function y(){this._trace=void 0}function g(t,e,n,r,i){if(void 0===t&&null!==e&&Z){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),c=k(a),u=c.length-1;u>=0;--u){var l=c[u];if(!Q.test(l)){var p=l.match(G);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(c.length>0)for(var f=c[0],u=0;u<a.length;++u)if(a[u]===f){u>0&&(s="\n"+a[u-1]);break}}var h="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(h,!0,e)}}function m(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),b(n)}function b(t,n,r){if(lt.warnings){var i,o=new U(t);if(n)r._attachExtraTrace(o);else if(lt.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var s=F(o);o.stack=s.message+"\n"+s.stack.join("\n")}ot("warning",o)||x(o,"",!0)}}function w(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function C(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function j(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var c=r[a];if(e[i]!==c)break;e.pop(),i--}e=r}}function k(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||z.test(r),o=i&&at(r);i&&!o&&(W&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function E(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||z.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}function F(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?E(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:k(e)}}function x(t,e,n){if("undefined"!=typeof console){var r;if(B.isObject(t)){var i=t.stack;r=e+X(i,t)}else r=e+String(t);"function"==typeof I?I(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function T(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){N.throwLater(o)}"unhandledRejection"===t?ot(t,n,r)||i||x(n,"Unhandled rejection "):ot(t,r)}function P(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():B.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+R(e)+">, no stack trace)"}function R(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function S(){return"function"==typeof ut}function O(t){var e=t.match(ct);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function A(t,e){if(S()){for(var n,r,i=(t.stack||"").split("\n"),o=(e.stack||"").split("\n"),s=-1,a=-1,c=0;c<i.length;++c){var u=O(i[c]);if(u){n=u.fileName,s=u.line;break}}for(var c=0;c<o.length;++c){var u=O(o[c]);if(u){r=u.fileName,a=u.line;break}}0>s||0>a||!n||!r||n!==r||s>=a||(at=function(t){if($.test(t))return!0;var e=O(t);return e&&e.fileName===n&&s<=e.line&&e.line<=a?!0:!1})}}function V(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);ut(this,V),e>32&&this.uncycle()}var H,D,I,L,N=e._async,U=t("./errors").Warning,B=t("./util"),M=t("./es5"),q=B.canAttachTrace,$=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Q=/\((?:timers\.js):\d+:\d+\)/,G=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,z=null,X=null,W=!1,K=!(0==B.env("BLUEBIRD_DEBUG")||!B.env("BLUEBIRD_DEBUG")&&"development"!==B.env("NODE_ENV")),J=!(0==B.env("BLUEBIRD_WARNINGS")||!K&&!B.env("BLUEBIRD_WARNINGS")),Y=!(0==B.env("BLUEBIRD_LONG_STACK_TRACES")||!K&&!B.env("BLUEBIRD_LONG_STACK_TRACES")),Z=0!=B.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(J||!!B.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function t(){for(var t=0;t<r.length;++t)r[t]._notifyUnhandledRejection();n()}function n(){r.length=0}var r=[];L=function(e){r.push(e),setTimeout(t,1)},M.defineProperty(e,"_unhandledRejectionCheck",{value:t}),M.defineProperty(e,"_unhandledRejectionClear",{value:n})}(),e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L(this))},e.prototype._notifyUnhandledRejectionIsHandled=function(){T("rejectionHandled",H,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),T("unhandledRejection",D,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return b(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var n=e._getContext();D=B.contextBind(n,t)},e.onUnhandledRejectionHandled=function(t){var n=e._getContext();H=B.contextBind(n,t)};var tt=function(){};e.longStackTraces=function(){if(N.haveItemsQueued()&&!lt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!lt.longStackTraces&&S()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace,i=e.prototype._dereferenceTrace;lt.longStackTraces=!0,tt=function(){if(N.haveItemsQueued()&&!lt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,e.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),lt.longStackTraces=!1},e.prototype._captureStackTrace=d,e.prototype._attachExtraTrace=v,e.prototype._dereferenceTrace=y,n.activateLongStackTraces()}},e.hasLongStackTraces=function(){return lt.longStackTraces&&S()};var et={unhandledrejection:{before:function(){var t=B.global.onunhandledrejection;return B.global.onunhandledrejection=null,t},after:function(t){B.global.onunhandledrejection=t}},rejectionhandled:{before:function(){var t=B.global.onrejectionhandled;return B.global.onrejectionhandled=null,t},after:function(t){B.global.onrejectionhandled=t}}},nt=function(){var t=function(t,e){if(!t)return!B.global.dispatchEvent(e);var n;try{return n=t.before(),!B.global.dispatchEvent(e)}finally{t.after(n)}};try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return B.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r={detail:n,cancelable:!0},i=new CustomEvent(e,r);return M.defineProperty(i,"promise",{value:n.promise}),M.defineProperty(i,"reason",{value:n.reason}),t(et[e],i)}}if("function"==typeof Event){var e=new Event("CustomEvent");return B.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r=new Event(e,{cancelable:!0});return r.detail=n,M.defineProperty(r,"promise",{value:n.promise}),M.defineProperty(r,"reason",{value:n.reason}),t(et[e],r)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),B.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!0,n),t(et[e],r)}}catch(n){}return function(){return!1}}(),rt=function(){return B.isNode?function(){return process.emit.apply(process,arguments)}:B.global?function(t){var e="on"+t.toLowerCase(),n=B.global[e];return n?(n.apply(B.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),it={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:o},ot=function(t){var e=!1;try{e=rt.apply(null,arguments)}catch(n){N.throwLater(n),e=!0}var r=!1;try{r=nt(t,it[t].apply(null,arguments))}catch(n){N.throwLater(n),r=!0}return r||e};e.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&tt()),"warnings"in t){var n=t.warnings;lt.warnings=!!n,Z=lt.warnings,B.isObject(n)&&"wForgottenReturn"in n&&(Z=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!lt.cancellation){if(N.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=p,e.prototype._propagateFrom=f,e.prototype._onCancel=u,e.prototype._setOnCancel=l,e.prototype._attachCancellationCallback=c,e.prototype._execute=a,st=f,lt.cancellation=!0}if("monitoring"in t&&(t.monitoring&&!lt.monitoring?(lt.monitoring=!0,e.prototype._fireEvent=ot):!t.monitoring&&lt.monitoring&&(lt.monitoring=!1,e.prototype._fireEvent=s)),"asyncHooks"in t&&B.nodeSupportsAsyncResource){var o=lt.asyncHooks,h=!!t.asyncHooks;o!==h&&(lt.asyncHooks=h,h?r():i())}return e},e.prototype._fireEvent=s,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._dereferenceTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var st=h,at=function(){return!1},ct=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;B.inherits(V,Error),n.CapturedTrace=V,V.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;t-1>a?(c._parent=e[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var u=c._length+1,l=r-2;l>=0;--l)e[l]._length=u,u++;return}}}},V.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=F(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(k(i.stack.split("\n"))),i=i._parent;j(r),C(r),B.notEnumerableProp(t,"stack",w(n,r)),B.notEnumerableProp(t,"__stackCleaned__",!0)}};var ut=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():P(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,z=t,X=e;var n=Error.captureStackTrace;return at=function(t){return $.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return z=/@/,X=e,W=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(X=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?P(e):e.toString()},null):(z=t,X=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(I=function(t){console.warn(t)},B.isNode&&process.stderr.isTTY?I=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:B.isNode||"string"!=typeof(new Error).stack||(I=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var lt={warnings:J,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return Y&&e.longStackTraces(),{asyncHooks:function(){return lt.asyncHooks},longStackTraces:function(){return lt.longStackTraces},warnings:function(){return lt.warnings},cancellation:function(){return lt.cancellation},monitoring:function(){return lt.monitoring},propagateFromFunction:function(){return st},boundValueFunction:function(){return _},checkForgottenReturns:g,setBounds:A,warn:b,deprecated:m,CapturedTrace:V,fireDomEvent:nt,fireGlobalEvent:rt}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(p(this,"message","string"==typeof r?r:e),p(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(t){return this instanceof i?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5"),c=a.freeze,u=t("./util"),l=u.inherits,p=u.notEnumerableProp,f=r("Warning","warning"),h=r("CancellationError","cancellation error"),_=r("TimeoutError","timeout error"),d=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(v){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<y.length;++g)"function"==typeof Array.prototype[y[g]]&&(d.prototype[y[g]]=Array.prototype[y[g]]);a.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var m=0;d.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:h,TimeoutError:_,OperationalError:i,RejectionError:i,AggregateError:d}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},c=function(t,e){return{value:t[e]}},u=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},f=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:f,keys:a,names:a,defineProperty:u,getDescriptor:c,freeze:l,getPrototypeOf:p,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function o(t){this.finallyHandler=t}function s(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function a(){return u.call(this,this.promise._target()._settledValue())}function c(t){return s(this,t)?void 0:(f.e=t,f)}function u(t){var i=this.promise,u=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?u.call(i._boundValue()):u.call(i._boundValue(),t);if(l===r)return l;if(void 0!==l){i._setReturnedNonUndefined();var h=n(l,i);if(h instanceof e){if(null!=this.cancelPromise){if(h._isCancelled()){var _=new p("late cancellation observer");return i._attachExtraTrace(_),f.e=_,f}h.isPending()&&h._attachCancellationCallback(new o(this))}return h._then(a,c,void 0,this,void 0)}}}return i.isRejected()?(s(this),f.e=t,f):(s(this),t)}var l=t("./util"),p=e.CancellationError,f=l.errorObj,h=t("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){s(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new i(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,u,u)},e.prototype.tap=function(t){return this._passThrough(t,1,u)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,u);var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var s=arguments[r];if(!l.isObject(s))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+l.classString(s)));i[o++]=s}i.length=o;var a=arguments[r];return this._passThrough(h(i,a,this),1,void 0,u)},i}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=h(n[o])(t);if(r._popContext(),s===f){r._pushContext();var a=e.reject(f.e);return r._popContext(),a}var c=i(s,r);if(c instanceof e)return c}return null}function c(t,n,i,o){if(s.cancellation()){var a=new e(r),c=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{var u=this._promise=new e(r);u._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(_):_,this._yieldedPromise=null,this._cancellationPhase=!1}var u=t("./errors"),l=u.TypeError,p=t("./util"),f=p.errorObj,h=p.tryCatch,_=[];p.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=h(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=h(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},c.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(t){var n=this._promise;if(t===f)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);
var o=i(r,this._promise);if(!(o instanceof e)&&(o=a(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+p.classString(t));_.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new c(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t),this._promise._captureStackTrace();var s=e._getContext();if(this._callback=u.contextBind(s,n),this._preservedValues=i===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0),u.isArray(t))for(var a=0;a<t.length;++a){var c=t[a];c instanceof e&&c.suppressUnhandledRejections()}}function c(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+u.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));s=i.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(t,n,s,o).promise()}var u=t("./util"),l=u.tryCatch,p=u.errorObj,f=e._async;u.inherits(a,n),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var u=this._promise,f=this._callback,h=u._boundValue();u._pushContext();var _=l(f).call(h,t,n,o),d=u._popContext();if(s.checkForgottenReturns(_,d,null!==a?"Promise.filter":"Promise.map",u),_===p)return this._reject(_.e),!0;var v=i(_,this._promise);if(v instanceof e){v=v._target();var y=v._bitField;if(0===(50397184&y))return c>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0);_=v._value()}r[n]=_}var g=++this._totalResolved;return g>=o?(null!==a?this._filter(r,a):this._resolve(r),!0):!1},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return c(this,t,e,null)},e.map=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];c=s.isArray(u)?a(t).apply(l,u):a(t).call(l,u)}else c=a(t)();var p=r._popContext();return o.checkForgottenReturns(c,p,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new u(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=l.keys(t),i=0;i<n.length;++i){var o=n[i];p.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,c=t("./errors"),u=c.OperationalError,l=t("./es5"),p=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===c&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===c&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=a(e).call(n._boundValue(),t);i===c&&s.throwLater(i.e)}var o=t("./util"),s=e._async,a=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){function n(){}function r(t,e){if(null==t||t.constructor!==i)throw new E("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new E("expecting a function but got "+f.classString(e))}function i(t){t!==x&&r(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new i(x);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c=function(){return new E("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new i.PromiseInspection(this._target())},l=function(t){return i.reject(new E(t))},p={},f=t("./util");f.setReflectHandler(u);var h=function(){var t=process.domain;return void 0===t?null:t},_=function(){return null},d=function(){return{domain:h(),async:null}},v=f.isNode&&f.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null,y=function(){return{domain:h(),async:new v("Bluebird::Promise")}},g=f.isNode?d:_;f.notEnumerableProp(i,"_getContext",g);var m=function(){g=y,f.notEnumerableProp(i,"_getContext",y)},b=function(){g=d,f.notEnumerableProp(i,"_getContext",d)},w=t("./es5"),C=t("./async"),j=new C;w.defineProperty(i,"_async",{value:j});var k=t("./errors"),E=i.TypeError=k.TypeError;i.RangeError=k.RangeError;var F=i.CancellationError=k.CancellationError;i.TimeoutError=k.TimeoutError,i.OperationalError=k.OperationalError,i.RejectionError=k.OperationalError,i.AggregateError=k.AggregateError;var x=function(){},T={},P={},R=t("./thenables")(i,x),S=t("./promise_array")(i,x,R,l,n),O=t("./context")(i),A=O.create,V=t("./debuggability")(i,O,m,b),H=(V.CapturedTrace,t("./finally")(i,R,P)),D=t("./catch_filter")(P),I=t("./nodeback"),L=f.errorObj,N=f.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!f.isObject(o))return l("Catch statement predicate: expecting an object but got "+f.classString(o));r[i++]=o}if(r.length=i,t=arguments[n],"function"!=typeof t)throw new E("The last argument to .catch() must be a function, got "+f.toString(t));return this.then(void 0,D(r,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},i.prototype.then=function(t,e){if(V.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+f.classString(t);arguments.length>1&&(n+=", "+f.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?l("expecting a function but got "+f.classString(t)):this.all()._then(t,void 0,void 0,T,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new S(this).promise()},i.prototype.error=function(t){return this.caught(f.originatesFromRejection,t)},i.getNewLibraryCopy=e.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(x);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=N(t)(I(e,n));return r===L&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new S(t).promise()},i.cast=function(t){var e=R(t);return e instanceof i||(e=new i(x),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(x);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new E("expecting a function but got "+f.classString(t));return j.setScheduler(t)},i.prototype._then=function(t,e,n,r,o){var s=void 0!==o,a=s?o:new i(x),c=this._target(),u=c._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var l=g();if(0!==(50397184&u)){var p,h,_=c._settlePromiseCtx;0!==(33554432&u)?(h=c._rejectionHandler0,p=t):0!==(16777216&u)?(h=c._fulfillmentHandler0,p=e,c._unsetRejectionIsUnhandled()):(_=c._settlePromiseLateCancellationObserver,h=new F("late cancellation observer"),c._attachExtraTrace(h),p=e),j.invoke(_,c,{handler:f.contextBind(l,p),promise:a,receiver:r,value:h})}else c._addCallbacks(t,e,a,r,l);return a},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){if(!j.hasCustomScheduler()){var t=this._bitField;this._bitField=t|(536870912&t)>>2^134217728}},i.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===p?void 0:void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=p),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=f.contextBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=f.contextBind(i,e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=f.contextBind(i,t)),"function"==typeof e&&(this[s+1]=f.contextBind(i,e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(c(),!1);var n=R(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(c());var o=r._bitField;if(0===(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;s>a;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var u=new F("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}},i.prototype._rejectCallback=function(t,e,n){var r=f.ensureErrorObject(t),i=r===t;if(!i&&!n&&V.warnings()){var o="a promise was rejected with a non-error: "+f.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},i.prototype._resolveFromExecutor=function(t){if(t!==x){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===T?n&&"number"==typeof n.length?o=N(t).apply(this._boundValue(),n):(o=L,o.e=new E("cannot .spread() a non-array: "+f.classString(n))):o=N(t).call(e,n);var s=r._popContext();i=r._bitField,0===(65536&i)&&(o===P?r._reject(n):o===L?r._rejectCallback(o.e,!1):(V.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var s=t instanceof i,a=this._bitField,c=0!==(134217728&a);0!==(65536&a)?(s&&t._invokeInternalOnCancel(),r instanceof H&&r.isFinallyHandler()?(r.cancelPromise=t,N(e).call(r,o)===L&&t._reject(L.e)):e===u?t._fulfill(u.call(r)):r instanceof n?r._promiseCancelled(t):s||t instanceof S?t._cancel():r.cancel()):"function"==typeof e?s?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&a)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):s&&(c&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():j.settlePromises(this),this._dereferenceTrace())}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?j.fatalError(t,f.isNode):void((65535&e)>0?j.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&w.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),i.defer=i.pending=function(){V.deprecated("Promise.defer","new Promise");var t=new i(x);return{promise:t,resolve:o,reject:s}},f.notEnumerableProp(i,"_makeSelfResolutionError",c),t("./method")(i,x,R,l,V),t("./bind")(i,x,R,V),t("./cancel")(i,S,l,V),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,S,R,x,j),i.Promise=i,i.version="3.7.2",t("./call_get.js")(i),t("./generators.js")(i,l,x,R,n,V),t("./map.js")(i,S,l,R,x,V),t("./nodeify.js")(i),t("./promisify.js")(i,x),t("./props.js")(i,S,R,l),t("./race.js")(i,x,R,l),t("./reduce.js")(i,S,l,R,x,V),t("./settle.js")(i,S,V),t("./some.js")(i,S,l),t("./timers.js")(i,x,V),t("./using.js")(i,l,R,A,x,V),t("./any.js")(i),t("./each.js")(i,x),t("./filter.js")(i,x),f.toFastProperties(i),f.toFastProperties(i.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new i(x)),V.setBounds(C.firstLineError,f.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function a(t){var r=this._promise=new e(n);t instanceof e&&(r._propagateFrom(t,3),t.suppressUnhandledRejections()),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function u(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(u,this._reject,void 0,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=c.asArray(o),null===o){var l=i("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(l,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;n>a;++a){var c=r(t[a],i);c instanceof e?(c=c._target(),s=c._bitField):s=null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0===(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!==(33554432&s)?this._promiseFulfilled(c._value(),a):0!==(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!C.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=h.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,n,r){for(var a=h.inheritedDataKeys(t),c=[],u=0;u<a.length;++u){var l=a[u],p=t[l],f=r===j?!0:j(l,p,t);"function"!=typeof p||i(p)||o(t,l,e)||!r(l,p,t,f)||c.push(l,p)}return s(c,e,n),c}function c(t,r,i,o,s,a){function c(){var i=r;r===f&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof l&&this!==u?this[l]:t,c=_(o,a);try{s.apply(i,d(arguments,c))}catch(p){o._rejectCallback(v(p),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var u=function(){return this}(),l=t;return"string"==typeof l&&(t=o),h.notEnumerableProp(c,"__isPromisified__",!0),c}function u(t,e,n,r,i){for(var o=new RegExp(k(e)+"$"),s=a(t,e,o,n),c=0,u=s.length;u>c;c+=2){var l=s[c],p=s[c+1],_=l+e;if(r===E)t[_]=E(l,f,l,p,e,i);else{var d=r(p,function(){return E(l,f,l,p,e,i)});h.notEnumerableProp(d,"__isPromisified__",!0),t[_]=d}}return h.toFastProperties(t),t}function l(t,e,n){return E(t,e,void 0,t,null,n)}var p,f={},h=t("./util"),_=t("./nodeback"),d=h.withAppended,v=h.maybeWrapAsError,y=h.canEvaluate,g=t("./errors").TypeError,m="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],C=new RegExp("^(?:"+w.join("|")+")$"),j=function(t){return h.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},k=function(t){return t.replace(/([$])/,"\\$")},E=y?p:c;e.promisify=function(t,e){if("function"!=typeof t)throw new g("expecting a function but got "+h.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?f:e.context,o=!!e.multiArgs,s=l(t,n,o);return h.copyDescriptors(t,s,r),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=m);var i=e.filter;"function"!=typeof i&&(i=j);var o=e.promisifier;if("function"!=typeof o&&(o=E),!h.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=h.inheritedDataKeys(t),a=0;a<s.length;++a){var c=t[s[a]];"constructor"!==s[a]&&h.isClass(c)&&(u(c.prototype,r,i,o,n),u(c,r,i,o,n))}return u(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==a&&t instanceof a)e=p(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function s(t){var n,s=r(t);return u(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,c=t("./util"),u=c.isObject,l=t("./es5");"function"==typeof Map&&(a=Map);var p=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),f=function(t){for(var e=new a,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=f(this._values);else{r={};for(var i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var c=r(t);if(c instanceof e)return a(c);if(t=s.asArray(t),null===t)return i("expecting an array or an iterable object but got "+s.classString(t));var u=new e(n);void 0!==o&&u._propagateFrom(o,3);for(var l=u._fulfill,p=u._reject,f=0,h=t.length;h>f;++f){var _=t[f];(void 0!==_||f in t)&&e.cast(_)._then(l,p,void 0,u,null)}return u}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t);var s=e._getContext();this._fn=f.contextBind(s,n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function u(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+f.classString(e));var o=new a(t,e,n,i);return o.promise()}function l(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(t){var n=this.array,r=n._promise,i=h(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var f=t("./util"),h=f.tryCatch;f.inherits(a,n),a.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n;for(var o=r;i>o;++o){var s=t[o];s instanceof e&&s.suppressUnhandledRejections()}if(!n.isRejected())for(;i>r;++r){var a={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,a,void 0),0===(127&r)&&n._setNoAsyncGuarantee()}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,c=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){c.call(process,t)}}else if("function"==typeof s&&"function"==typeof s.resolve){
var u=s.resolve();r=function(t){u.then(t)}}else r="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}():"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o;e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,s=t("./util");s.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.allSettled=function(t){return new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,c=t("./errors").AggregateError,u=s.isArray,l={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=u(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===u){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(s(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return u.e=e,u}}function s(t){try{return p.call(t,"_promise0")}catch(e){return!1}}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,p,!0),a=null)}var a=new e(n),l=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var p=!0,f=c.tryCatch(r).call(t,o,s);return p=!1,a&&f===u&&(a._rejectCallback(f.e,!0,!0),a=null),l}var c=t("./util"),u=c.errorObj,l=c.isObject,p={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var s,a;return void 0!==o?(s=e.resolve(o)._then(u,null,null,t,void 0),r.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(n),a=setTimeout(function(){s._fulfill()},+t),r.cancellation()&&s._setOnCancel(new i(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return l(t,this)};var p=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),a.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,a,c=new i(setTimeout(function(){n.isPending()&&p(n,e,a)},t));return r.cancellation()?(a=this.then(),n=a._then(o,s,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,s,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,n){function i(){if(s>=u)return l._fulfill();var o=c(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(p){return a(p)}if(o instanceof e)return o._then(i,a,null,null,null)}i()}var s=0,u=t.length,l=new e(o);return i(),l}function l(t,e,n){this._data=t,this._promise=e,this._context=n}function p(t,e,n){this.constructor$(t,e,n)}function f(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function h(t){this.length=t,this.promise=null,this[t-1]=null}var _=t("./util"),d=t("./errors").TypeError,v=t("./util").inherits,y=_.errorObj,g=_.tryCatch,m={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():m},l.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==m?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(p,l),p.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},h.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+_.classString(i));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var c=new h(t),p=0;t>p;++p){var d=o[p];if(l.isDisposer(d)){var v=d;d=d.promise(),d._setDisposable(v)}else{var m=r(d);m instanceof e&&(d=m._then(f,null,null,{resources:c,index:p},void 0))}c[p]=d}for(var b=new Array(c.length),p=0;p<b.length;++p)b[p]=e.resolve(c[p]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}C._pushContext(),i=g(i);var r=a?i.apply(void 0,t):i(t),o=C._popContext();return s.checkForgottenReturns(r,o,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return u(c,t)});return c.promise=C,C._setOnCancel(c),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new p(t,this,i());throw new d}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";function r(){try{var t=P;return P=null,t.apply(this,arguments)}catch(e){return T.e=e,T}}function i(t){return P=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return o(t)?new Error(v(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function u(t,e,n){if(!F.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function l(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return F.defineProperty(t,e,r),t}function p(t){throw t}function f(t){try{if("function"==typeof t){var e=F.names(t.prototype),n=F.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=A.test(t+"")&&F.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function h(t){function e(){}function n(){return typeof r.foo}e.prototype=t;var r=new e;return n(),n(),t}function _(t){return V.test(t)}function d(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function g(t){try{l(t,"isOperational",!0)}catch(e){}}function m(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return y(t)&&F.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function C(t,e,n){for(var r=F.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{F.defineProperty(e,o,F.getDescriptor(t,o))}catch(s){}}}function j(t){return N?process.env[t]:void 0}function k(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"===w(t))return Promise}catch(e){}}function E(t,e){if(null===t||"function"!=typeof e||e===U)return e;null!==t.domain&&(e=t.domain.bind(e));var n=t.async;if(null!==n){var r=e;e=function(){var t=new Array(2).concat([].slice.call(arguments));return t[0]=r,t[1]=this,n.runInAsyncScope.apply(n,t)}}return e}var F=t("./es5"),x="undefined"==typeof navigator,T={e:{}},P,R="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,S=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},O=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(F.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(t,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}t=F.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),A=/this\s*\.\s*\S+\s*=/,V=/^[a-z$_][a-z$_0-9]*$/i,H=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(v(t))}:function(t){if(b(t))return t;try{throw new Error(v(t))}catch(e){return e}}}(),D=function(t){return F.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var I="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};D=function(t){return F.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?I(t):null}}var L="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),N="undefined"!=typeof process&&"undefined"!=typeof process.env,U,B={setReflectHandler:function(t){U=t},isClass:f,isIdentifier:_,inheritedDataKeys:O,getDataPropertyOrDefault:u,thrower:p,isArray:F.isArray,asArray:D,notEnumerableProp:l,isPrimitive:o,isObject:s,isError:y,canEvaluate:x,errorObj:T,tryCatch:i,inherits:S,withAppended:c,maybeWrapAsError:a,toFastProperties:h,filledRange:d,toString:v,canAttachTrace:b,ensureErrorObject:H,originatesFromRejection:m,markAsOriginatingFromRejection:g,classString:w,copyDescriptors:C,isNode:L,hasEnvVariables:N,env:j,global:R,getNativePromise:k,contextBind:E};B.isRecentNode=B.isNode&&function(){var t;return process.versions&&process.versions.node?t=process.versions.node.split(".").map(Number):process.version&&(t=process.version.split(".").map(Number)),0===t[0]&&t[1]>10||t[0]>0}(),B.nodeSupportsAsyncResource=B.isNode&&function(){var e=!1;try{var n=t("async_hooks").AsyncResource;e="function"==typeof n.prototype.runInAsyncScope}catch(r){e=!1}return e}(),B.isNode&&B.toFastProperties(process);try{throw new Error}catch(M){B.lastLineError=M}e.exports=B},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);
}
var e,t;e=self,t=function(){var r={d:function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}},D=(r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},{});function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e){var t,c,n,u=e.Lib,e=u.mix,o={}.hasOwnProperty,r={},i="object"===("undefined"==typeof HTMLElement?"undefined":f(HTMLElement));function l(e){return e===t}function s(e){return n.apply(this,arguments)}function a(e,t){r["[object "+e+"]"]=t=e.toLowerCase(),u["is"+e]=function(e){return u.type(e)===t}}e(u,{isDef:function(e){return e!==t},isUndef:l,isUndefined:l,isNull:function(e){return null===e},isNaN:(n=function(e){return isNaN(e)},s.toString=function(){return n.toString()},s),type:function(e){return null===e||e===t?String(e):r[{}.toString.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==u.type(e)||e.nodeType||e.window==e)return!1;var t,n;try{if((n=e.constructor)&&!o(e,"constructor")&&!o(n.prototype,"isPrototypeOf"))return!1}catch(r){return!1}for(t in e);return l(t)||o(e,t)},isDOM:function(e){return i?e instanceof HTMLElement:e&&"object"===f(e)&&(1===e.nodeType||9===e.nodeType)&&"string"==typeof e.nodeName},isDOMInBody:function(e){var t=e;if(u.isDOM(e))for(;!t&&t!=document.body;)t=t.parentNode;else t=0;return!!t}}),a("Function"),u.each=c=function c(e,t,n){if(e){var r,o,i,s=0,a=e.length;if(n=n||null,l(a)||u.isFunction(e))for(i=u.keys(e);s<i.length&&(r=i[s],!1!==t.call(n,e[r],r,e));s++);else for(o=e[0];s<a&&!1!==t.call(n,o,s,e);o=e[++s]);}return e},e=["String","Object","Boolean","Number"],Array.isArray?u.isArray=Array.isArray:e.push("Array"),c(e,a)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e){var s,l=e.Lib,f=e.navInfoSync,d=f.bIE&&parseInt(f.IEVersion)<=9,e=f.bIE&&parseInt(f.IEVersion)<=10,u=l.win,h=l.each,a=new l.Uri(location.href),t=a&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(a.getScheme()),n=function n(){try{return new u.XMLHttpRequest}catch(e){}},r=function r(){try{var n=!1;return h(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(e){try{return n=new u.ActiveXObject(e)}catch(t){l.error("new xhr error: "+t.message)}}),n}catch(e){}},A=!(t||!u.XMLHttpRequest)&&"withCredentials"in(n()||[]),p=u.ActiveXObject?function(e){return!d&&!t&&n()||r()}:n,y=function y(e){return!1},g=/^(?:GET|HEAD)$/,o=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,m={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},c=s,i=(self&&self.fetch?self:u).fetch,b=(e&&(c=l.noop),O(function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function")}));function w(e){var t;{if(e&&l.isString(e.url))return(t=new b).sendInternal(e),t;l.log("the url is error.")}}l.mix(b.prototype,{url:!1,onSuccess:!1,onError:!1,onComplete:!1,method:"GET",async:!0,xhrFields:!1,mimeType:!1,username:!1,password:!1,data:!1,dataType:"text",headers:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:!1,afterSend:!1,timeout:0,cache:!0,crossDomain:!1,retry:0,setRequestHeader:function(e,t){return this.headers[e]=t,this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getNativeXhr:function(){return this.nativeXhr},getResponseHeader:function(e){var t,n;if(e=e.toLowerCase(),2===this.state){if(!(n=this.responseHeaders))for(n=this.responseHeaders={};t=o.exec(this.responseHeadersString);)n[t[1].toLowerCase()]=t[2];t=n[e]}return t===undefined?null:t},overrideMimeType:function(e){return this.state||(this.mimeType=e),this},abort:function(e){var t=this;return e=e||"abort",t.state=3,t.status=0,t.statusText=e,t.nativeXhr&&t.nativeXhr.abort(),t._callback(),t},_ioReady:function(e,t){var n=this,r=!1;if(2!==n.state&&3!==n.state){1===n.state&&(n.state=2),n.readyState=4,200<=e&&e<300||304===e?r=(t=304===e?"not modified":"success",!0):e<0&&(e=0);try{200<=e&&n.handleResponseData()}catch(o){l.error(o.stack||o,"error"),t=o.message||"parser error"}if((e<200||!r)&&0<n.retry)return n.retry=n.retry-1,void setTimeout(function(){n.sendInternal()},200);n.status=e,n.statusText=t,n._callback(r)}},_callback:function(e){var t=this,n=t.timeoutTimer;n&&(clearTimeout(n),t.timeoutTimer=0),h([e?t.onSuccess:t.onError,t.onComplete],function(e){l.isFunction(e)&&e.apply(t.context,[t.responseData,t.statusText,t])}),t.responseData=null},handleResponseData:function(){var e=this,t=e.dataType,n=e.nativeXhr;if("blob"===t||"arraybuffer"===t)if(d){if("responseBody"in n)r=n.responseBody,i=u.dsVbsBinGetLength(r),o=new VBArray(u.dsVbsBinGetBytes(r,0,i)).toArray();else for(var r,o=[],i=(r=n.responseText).length,s=0;s<i;++s)o.push(255&r.charCodeAt(s));r=null}else o=u.Blob?n.response:"responseBody"in n?n.responseBody:n.responseText;else if("json"==t)o=n.responseType&&"json"==n.responseType.toLowerCase()?n.response:n.responseText?l.parse(n.responseText):{};else if("user-defined"===t)o=n.response!==undefined?n.response:n.responseText;else{e.responseText=o=n.responseText||"";try{var a=n.responseXML;a&&a.documentElement&&(e.responseXML=a)}catch(c){}}e.responseData=o},sendInternal:function(e){var t,n,r,o,i,s=this,e=s._setup(e),a=e.method;if(l.isString(a)&&(a=a.toUpperCase()),n=e.contentType,i=e.url,t=e.dataType,o=e.mimeType,l.isString(i)&&(s.nativeXhr=r=p(e.crossDomain),r)){try{if(s.state=1,e.username?r.open(a,i,e.async,e.username,e.password):r.open(a,i,e.async),(e.async||f.bIE)&&t&&"user-defined"!=t&&"responseType"in r)try{r.responseType=t}catch(c){}}catch(u){return void(s.state<2?(l.error(u.stack||u,"error"),s._ioReady(-1,"open error: "+(l.isNumber(u.number)?"("+u.number+")":"")+(u.message||""))):l.error(u))}"withCredentials"in(a=e.xhrFields||{})&&(A||delete a.withCredentials),h(a,function(e,t){try{r[t]=e}catch(c){l.error(c)}}),o&&r.overrideMimeType&&r.overrideMimeType(o),!1===(i=e.headers||{})["X-Requested-With"]&&delete i["X-Requested-With"],"setRequestHeader"in r&&(n&&r.setRequestHeader("Content-Type",e.contentType),r.setRequestHeader("Accept",t&&m[t]?m[t]+("*"===t?"":", */*; q=0.01"):m["*"]),h(i,function(e,t){r.setRequestHeader(t,e)})),e.cache||(r.setRequestHeader("If-Modified-Since","0"),r.setRequestHeader("Cache-Control","no-cache")),o=(a=!g.test(e.method))&&e.data||null,a&&d&&(o=e.data),e.async&&0<e.timeout&&(e.timeout<300&&(e.timeout=300),s.timeoutTimer=setTimeout(function(){s.abort("timeout")},e.timeout));try{if(s.state=1,l.isFunction(s.beforeSend))if(!1===s.beforeSend(r,s))return void s.abort("cancel");r.send(o),o=null,e.data=null,l.isFunction(s.afterSend)&&s.afterSend(s)}catch(c){s.state<2?(l.error(c.stack||c,"error"),s._ioReady(-1,"send error: "+(c.message||""))):l.error(c)}e.async&&4!==r.readyState?y(r)?(r.onload=function(){r.readyState=4,r.status=200,s._xhrCallback()},r.onerror=function(){r.readyState=4,r.status=500,s._xhrCallback()}):r.onreadystatechange=function(){s._xhrCallback()}:s._xhrCallback()}},_xhrCallback:function(e,t){var n=this.nativeXhr;try{if(4===n.readyState||t)if(y(n)?(n.onerror=c,n.onload=c):n.onreadystatechange=c,t)4!==n.readyState&&n.abort();else{y(n)||(this.responseHeadersString=n.getAllResponseHeaders());var r,o=n.status;try{r=n.statusText}catch(i){l.error("xhr statusText error: "),l.error(i),r=""}this._ioReady(o,r)}}catch(i){l.error(i.stack||i,"error"),n.onreadystatechange=c,t||this._ioReady(-1,i.message||"process error")}},_setup:function(e){var t,n,r,o,i=this;if(e){for(n in i.context=e.context,delete e.context,e instanceof b&&(e=e.config),o=(i.config=e).url,o=l.startsWith(o,"http://")||l.startsWith(o,"https://")?new l.Uri(o):(l.startsWith(o,"//")&&(e.url=o="http:"+o),a.resolve(o)),t=e.dataType?e.dataType.toLowerCase():"text",e.dataType=t,e.method?e.method=e.method.toUpperCase():e.method="GET","crossDomain"in e||(e.crossDomain=!o.isSameOriginAs(a)),r=e.headers)l.isUndefined(r[n])&&delete r[n];l.mix(i,e)}return i.state=1,i}}),l.mix(l,{ajax:w,io:{get:function(e,t,n,r){return w({method:"GET",url:e,onSuccess:t,onError:n,dataType:r})},post:function(e,t,n,r,o){return w({method:"POST",data:t,url:e,onSuccess:n,onError:r,dataType:o})},put:function(e,t,n,r,o){return w({method:"PUT",data:t,url:e,onSuccess:n,onError:r,dataType:o})}}}),i?l.fetch=function(e,t){var n="text",r=!1,e=(t&&(t.dataType&&(n=t.dataType),t.fetchRaw&&(r=!0)),i(e,t).then(function(e){if(e.ok)return e;throw{httpCode:e.status,errorString:["HTTP process error: ",e.statusText," (",e.status,")."].join("")}}));return r?e:"blob"==n?e.then(function(e){return e.blob()}):"json"==n?e.then(function(e){return e.json()}):"arraybuffer"==n?e.then(function(e){return e.arrayBuffer()}):e.then(function(e){return e.text()})}:(d&&l.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join("")),l.fetch=function(e,t){return new(l.nativePromise||window.Promise)(function(r,o){var n={url:e,onSuccess:function(e,t,n){r(e)},onError:function(e,t,n){o({httpCode:n.status,errorString:t})},dataType:"text",method:s,data:s,headers:s,contentType:s,mimeType:s},i=!1;t&&(t.method&&(n.method=t.method),t.body&&(n.data=t.body),t.headers&&(n.headers||(n.headers={}),h(t.headers,function(e,t){"content-type"==t.toLowerCase()&&(i=!0),n.headers[t]=e})),t.dataType&&(n.dataType=t.dataType),t.contentType&&(n.contentType=t.contentType)),i&&(n.contentType=!1),"blob"==n.dataType&&d&&(n.mimeType="text/plain; charset=x-user-defined"),l.ajax(n)})})}function N(e){var i=e.Lib;i.obj={customEvent:{fire:function(e){var r,o=this;o.exec=o.exec||{},e=e.toLowerCase(),r=Array.prototype.slice.call(arguments,1),i.each(o.exec[e]||[],function(e){var t=e.f,e=e.c||o;try{t.apply(e,r)}catch(n){i.log(n)}})},on:function(e,t,n){var r=this;r.exec=r.exec||{},e=e.toLowerCase(),r.exec[e]=r.exec[e]||[],r.exec[e].push({f:t,c:n})},off:function(e,t,n){var r=this.exec;if(r)if(e)if(e=e.toLowerCase(),t)for(var o=r[e]||[],i=o.length-1;0<=i;i--)o[i]===t&&o.splice(i,1);else r[e]=null;else this.exec=null}}}}function U(e){var t,n,r=e.Lib,o=r.win,i=r.doc,s=e.navInfoSync,a=0,c=[],u=/\S/,l=!(!i||!i.addEventListener),f="DOMContentLoaded",d="readystatechange",h="complete",A=l?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},p=l?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)};function y(){for(var e=0;e<c.length;e++)try{c[e](r)}catch(t){r.log(t.stack||t,"error"),setTimeout(function(){throw t},0)}}if(r.mix(r,{isWindow:function(e){return null!=e&&e==e.window},globalEval:function(e){e&&u.test(e)&&(o.execScript?o.execScript(e):o.eval.call(o,e))},domReady:function U(e){if(a)try{e(r)}catch(t){r.log(t.stack||t,"error"),setTimeout(function(){throw t},0)}else c.push(e);return this}}),r.ready=r.domReady,r.checkDomReady=function(){a||(a=1,r.asyncGetNavInfo().then(function(e){i&&!s.nodejs&&p(o,"load",r.checkDomReady),y()}))},i&&i.readyState!==h)if(A(o,"load",r.checkDomReady),l)A(i,f,t=function t(){p(i,f,t),r.checkDomReady()});else{A(i,d,n=function n(){i.readyState===h&&(p(i,d,n),r.checkDomReady())});var g,m,l=i&&i.documentElement,b=l&&l.doScroll;try{g=null===o.frameElement}catch(w){g=!1}b&&g&&(m=function m(){try{b("left"),setTimeout(r.checkDomReady,30)}catch(e){setTimeout(m,40)}})()}else r.checkDomReady();if(e.navInfoSync.bIE)try{i.execCommand("BackgroundImageCache",!1,!0)}catch(C){}}function H(e){var n,r=e.Lib,e=r.mix,t=r.win;r.isDef(t.console)&&(n=t.console,r.isFunction(n.log)&&r.isFunction(n.error)||(n=!1)),r.getFormatedNow=function(e){var t,e=e?new Date(e):new Date,n="yyyy-MM-dd HH:mm:ss.SSSZ",r={"M+":e.getUTCMonth()+1,"d+":e.getUTCDate(),"H+":e.getUTCHours(),"h+":e.getUTCHours()%12||12,"m+":e.getUTCMinutes(),"s+":e.getUTCSeconds(),"q+":Math.floor((e.getUTCMonth()+3)/3),"S+":e.getUTCMilliseconds()};for(t in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getUTCFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?r[t]:("000"+r[t]).substr(("000"+r[t]).length-RegExp.$1.length)));return n},e(r,{log:function H(e){var t;r.debug&&n&&r.isFunction(n.log)&&(t=r.getFormatedNow((new Date).getTime()),n.log(["[",t,"] ",e].join("")))},error:function(e){var t;r.debug&&n&&r.isFunction(n.error)&&(t=r.getFormatedNow((new Date).getTime()),n.error(["[",t,"] ",e].join("")))},warn:function(e){var t;r.debug&&n&&r.isFunction(n.warn)&&(t=r.getFormatedNow((new Date).getTime()),n.warn(["[",t,"] ",e].join("")))},info:function(e){var t;r.debug&&n&&r.isFunction(n.info)&&(t=r.getFormatedNow((new Date).getTime()),n.info(["[",t,"] ",e].join("")))},getLogger:function(){return n},setLogger:function(e){n=e}})}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(D,{default:function(){return Ne}});var a,G,n,c=undefined,u=function u(e){return"function"==typeof e},Y=function Y(e){return Array.isArray?Array.isArray(e):e instanceof Array},W=function W(e){return!(!e||!t(e).match(/function|object/))},q=function q(e){return!1===e||e===c||null===e},e="undefined",Z=("undefined"==typeof TypeError?"undefined":t(TypeError))===e?Error:TypeError;function V(e){a(function(){throw e})}function X(e){return this.then(e,c)}function _(e){return this.then(c,e)}function $(t,e){return this.then(function(e){return u(t)?t.apply(null,Y(e)?e:[e]):i.onlyFuncs?e:t},e||c)}function ee(e){function t(){e()}return this.then(t,t),this}function te(t){return this.then(function(e){return u(t)?t.apply(null,Y(e)?e.splice(0,0,undefined)&&e:[undefined,e]):i.onlyFuncs?e:t},function(e){return t(e)})}function ne(t){return this.then(c,t?function(e){throw t(e),e}:V)}a=("undefined"==typeof process?"undefined":t(process))!==e&&process.nextTick?process.nextTick:("undefined"==typeof MessageChannel?"undefined":t(MessageChannel))!==e?(G=new MessageChannel,n=[],G.port1.onmessage=function(){n.length&&n.shift()()},function a(e){n.push(e),G.port2.postMessage(0)}):function a(e){setTimeout(e,0)};var i=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");o(this,"alwaysAsyncFn",null),o(this,"status",0),o(this,"pendings",[]),o(this,"promise",{then:function(n,r){var o=new i;return this.pendings.push([function(e){try{q(n)?o.resolve(e):o.resolve(u(n)?n(e):i.onlyFuncs?e:n)}catch(t){o.reject(t)}},function(e){if((q(r)||!u(r)&&i.onlyFuncs)&&o.reject(e),r)try{o.resolve(u(r)?r(e):r)}catch(t){o.reject(t)}}]),0!==this.status&&this.alwaysAsyncFn(this.execCallbacks),o.promise},success:X,error:_,otherwise:_,apply:$,spread:$,ensure:ee,nodify:te,rethrow:ne,isPending:function(){return 0===this.status},getStatus:function(){return this.status}}),this.alwaysAsyncFn=(c!==e?e:i.alwaysAsync)?a:function(e){e()},this.promise.toSource=this.promise.toString=this.promise.valueOf=function(){return this.value===undefined?this:this.value}}var e,t,n;return e=i,(t=[{key:"resolve",value:function(e){var n=!1;function t(t){return function(e){return n?undefined:(n=!0,t(e))}}if(this.status)return this;try{var r=W(e)&&e.then;if(u(r)){if(e===this.promise)throw new Z("Promise can't resolve itself");return r.call(e,t(this.resolve),t(this.reject)),this}}catch(o){return t(this.reject)(o),this}return this.alwaysAsyncFn(function(){this.value=e,this.status=1,this.execCallbacks()}),this}},{key:"reject",value:function(t){return this.status||this.alwaysAsyncFn(function(){try{throw t}catch(e){this.value=e}this.status=-1,this.execCallbacks()}),this}},{key:"execCallbacks",value:function(){if(0!==this.status){var e,t=this.pendings,n=0,r=t.length,o=~this.status?0:1;for(this.pendings=[];n<r;n++)(e=t[n][o])&&e(this.value)}}}])&&K(e.prototype,t),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e){var h,e=e.Lib,A={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(e,t){for(var n,r,o,i,s,a,c,u=1,l=e.length,f="",d=0;d<l;d++)if("string"==typeof e[d])f+=e[d];else if("object"===re(e[d])){if((o=e[d]).keys)for(n=t[u],r=0;r<o.keys.length;r++){if(n==undefined)throw new Error(h('[sprintf] Cannot access property "%s" of undefined value "%s"',o.keys[r],o.keys[r-1]));n=n[o.keys[r]]}else n=o.param_no?t[o.param_no]:t[u++];if(A.not_type.test(o.type)&&A.not_primitive.test(o.type)&&n instanceof Function&&(n=n()),A.numeric_arg.test(o.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(h("[sprintf] expecting number but found %T",n));switch(A.number.test(o.type)&&(a=0<=n),o.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,o.width?parseInt(o.width):0);break;case"e":n=o.precision?parseFloat(n).toExponential(o.precision):parseFloat(n).toExponential();break;case"f":n=o.precision?parseFloat(n).toFixed(o.precision):parseFloat(n);break;case"g":n=o.precision?String(Number(n.toPrecision(o.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=o.precision?n.substring(0,o.precision):n;break;case"t":n=String(!!n),n=o.precision?n.substring(0,o.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=o.precision?n.substring(0,o.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=o.precision?n.substring(0,o.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}A.json.test(o.type)?f+=n:(!A.number.test(o.type)||a&&!o.sign?c="":(c=a?"+":"-",n=n.toString().replace(A.sign,"")),i=o.pad_char?"0"===o.pad_char?"0":o.pad_char.charAt(1):" ",s=o.width-(c+n).length,s=o.width&&0<s?function(e,t){if("_".repeat)return e.repeat(t);for(var n=0,r=[];n<t;n++)r.push(e);return r.join("")}(i,s):"",f+=o.align?c+n+s:"0"===i?c+s+n:s+c+n)}return f}var c=Object.create?Object.create(null):{};h=function h(e){return t(function(e){if(c[e])return c[e];for(var t,n=e,r=[],o=0;n;){if(null!==(t=A.text.exec(n)))r.push(t[0]);else if(null!==(t=A.modulo.exec(n)))r.push("%");else{if(null===(t=A.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var i=[],s=t[2],a=[];if(null===(a=A.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=A.key_access.exec(s)))i.push(a[1]);else{if(null===(a=A.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(a[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return c[e]=r}(e),arguments)},e.sprintf=h,e.vsprintf=function(e,t){return h.apply(null,[e].concat(t||[]))}}function ie(a){var n=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function i(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o&&"."!==o&&(".."===o?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(o))}return n}var c=a.Path={resolve:function(){for(var e,t="",n=arguments,r=!1,o=n.length-1;0<=o&&!r;o--)a.isString(e=n[o])&&e&&(t=e+"/"+t,r="/"===e.charAt(0));return(r?"/":"")+i(a.filter(t.split("/"),function(e){return!!e}),!r).join("/")||"."},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.slice(-1);return(e=(e=i(a.filter(e.split("/"),function(e){return!!e}),!t).join("/"))||t?e:".")&&n&&(e+="/"),(t?"/":"")+e},join:function(){var e=a.makeArray(arguments);return c.normalize(a.filter(e,function(e){return e&&a.isString(e)}).join("/"))},relative:function(e,t){e=c.normalize(e),t=c.normalize(t);for(var n=a.filter(e.split("/"),function(e){return!!e}),r=[],o=a.filter(t.split("/"),function(e){return!!e}),i=Math.min(n.length,o.length),s=0;s<i&&n[s]===o[s];s++);for(e=s;s<n.length;)r.push(".."),s++;return(r=r.concat(o.slice(e))).join("/")},basename:function r(e,t){var r,e=e.match(n)||[];return r=e[3]||"",r=t&&r&&r.slice(-1*t.length)===t?r.slice(0,-1*t.length):r},dirname:function(e){var e=e.match(n)||[],t=e[1]||"",e=e[2]||"";return t||e?t+(e=e&&e.substring(0,e.length-1)):"."},extname:function(e){return(e.match(n)||[])[4]||""}}}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(s){var o=s.uriQuery,a=s.each,c=s.Path,i=s.getLogger(),u=/[#\/\?@]/g,l=/[#\?]/g,f=/[#@]/g,d=/#/g,h={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},A=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function p(e,t){return e.toLowerCase()===t.toLowerCase()}function y(e,t){return encodeURI(e).replace(t,function(e){return"%"+(1===(e=e.charCodeAt(0).toString(16)).length?"0"+e:e)})}var e=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");if(e instanceof t)return s.clone(e);var r=this;return s.mix(r,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""}),e=t.getComponents(e),a(e,function(e,t){if(e=e||"","query"===t)r.query=new o(e);else{try{e=s.urlDecode(e)}catch(n){i.error(n+"urlDecode error : "+e)}r[t]=e}}),r}var e,n,r;return e=t,r=[{key:"getComponents",value:function(e){var n=(e=e||"").match(A)||[],r={};return a(h,function(e,t){r[t]=n[e]}),r}}],(n=[{key:"clone",value:function L(){var n=new t,r=this;return a(h,function(e,t){n[t]=r[t]}),n.query=n.query.clone(),n}},{key:"resolve",value:function(n){s.isString(n)&&(n=new t(n));var r,o=0,i=this.clone();return a(["scheme","userInfo","hostname","port","path","query","fragment"],function(e){var t;"path"===e?o?i[e]=n[e]:(t=n.path)&&(o=1,s.startsWith(t,"/")||(i.hostname&&!i.path?t="/"+t:i.path&&-1!==(r=i.path.lastIndexOf("/"))&&(t=i.path.slice(0,r+1)+t)),i.path=c.normalize(t)):"query"===e?(o||n.query.toString())&&(i.query=n.query.clone(),o=1):(o||n[e])&&(i[e]=n[e],o=1)}),i}},{key:"getScheme",value:function(){return this.scheme}},{key:"setScheme",value:function(e){return this.scheme=e,this}},{key:"getHostname",value:function(){return this.hostname}},{key:"setHostname",value:function(e){return this.hostname=e,this}},{key:"setUserInfo",value:function(e){return this.userInfo=e,this}},{key:"getUserInfo",value:function(){return this.userInfo}},{key:"setPort",value:function(e){return this.port=e,this}},{key:"getPort",value:function(){return this.port}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"getPath",value:function(){return this.path}},{key:"setQuery",value:function(e){return s.isString(e)&&(s.startsWith(e,"?")&&(e=e.slice(1)),e=new o(y(e,f))),this.query=e,this}},{key:"getQuery",value:function(){return this.query}},{key:"getFragment",value:function(){return this.fragment}},{key:"setFragment",value:function(e){return s.startsWith(e,"#")&&(e=e.slice(1)),this.fragment=e,this}},{key:"isSameOriginAs",value:function(e){return p(this.hostname,e.hostname)&&p(this.scheme,e.scheme)&&p(this.port,e.port)}},{key:"toString",value:function(e){var t,n,r=[],o=this;return(t=o.scheme)&&(r.push(y(t,u)),r.push(":")),(t=o.hostname)&&(r.push("//"),(n=o.userInfo)&&(r.push(y(n,u)),r.push("@")),r.push(encodeURIComponent(t)),(n=o.port)&&(r.push(":"),r.push(n))),(n=o.path)&&(t&&!s.startsWith(n,"/")&&(n="/"+n),n=c.normalize(n),r.push(y(n,l))),(t=o.query.toString.call(o.query,e))&&(r.push("?"),r.push(t)),(n=o.fragment)&&(r.push("#"),r.push(y(n,d))),r.join("")}}])&&se(e.prototype,n),r&&se(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();s.Uri=e}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(s){function a(e){e._queryMap||(e._queryMap=s.unparam(e._query))}var e=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._query=e||""}var e,t,n;return e=i,(t=[{key:"clone",value:function L(){return new i(this.toString())}},{key:"reset",value:function(e){return this._query=e||"",this._queryMap=null,this}},{key:"count",value:function r(){var r=0;return a(this),s.each(this._queryMap,function(e){s.isArray(e)?r+=e.length:r++}),r}},{key:"has",value:function(e){var t;return a(this),t=this._queryMap,e?e in t:!s.isEmptyObject(t)}},{key:"get",value:function(e){var t;return a(this),t=this._queryMap,e?t[e]:t}},{key:"keys",value:function(){return a(this),s.keys(this._queryMap)}},{key:"set",value:function(e,t){var n;return a(this),n=this._queryMap,s.isString(e)?this._queryMap[e]=t:(e instanceof i&&(e=e.get()),s.each(e,function(e,t){n[t]=e})),this}},{key:"remove",value:function(e){return a(this),e?delete this._queryMap[e]:this._queryMap={},this}},{key:"add",value:function(e,t){var n,r,o=this;return s.isString(e)?(a(o),r=(n=o._queryMap)[e],r=s.isUndef(r)?t:[].concat(r).concat(t),n[e]=r):(e instanceof i&&(e=e.get()),s.each(e,function(e,t){o.add(t,e)})),o}},{key:"toString",value:function(e){return a(this),s.param(this._queryMap,void 0,void 0,e)}}])&&ce(e.prototype,t),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();s.uriQuery=e}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(d){var n,r,h=d.getLogger(),a=d.isDef,c=d.each,o={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},i={},t=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;function u(e){var t=le(e);return null==e||"object"!==t&&"function"!==t}function l(e){return encodeURIComponent(String(e))}c(o,function(e,t){i[e]=t}),d.mix(d,{urlEncode:l,urlDecode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},fromUnicode:function(e){return e.replace(/\\u([a-f\d]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})},escapeHtml:function(e){return(e+"").replace(function(){if(n)return n;var t="";return c(o,function(e){t+=e+"|"}),t=t.slice(0,-1),n=new RegExp(t,"g")}(),function(e){return i[e]})},escapeRegExp:function(e){return e.replace(t,"\\$&")},unEscapeHtml:function(e){return e.replace(function(){if(r)return r;var t="";return c(i,function(e){t+=e+"|"}),t+="&#(\\d{1,5});",r=new RegExp(t,"g")}(),function(e,t){return o[e]||String.fromCharCode(+t)})},param:function(e,r,o,i){r=r||"&",o=o||"=",d.isUndef(i)&&(i=!0);var s=[];return c(e,function(e,t){var n=l(t);u(e)?(s.push(n),a(e)&&s.push(o,l(e+"")),s.push(r)):d.isArray(e)&&e.length&&c(e,function(e){u(e)&&(s.push(n,i?l("[]"):""),a(e)&&s.push(o,l(e+"")),s.push(r))})}),s.pop(),s.join("")},unparam:function(e,t,n){if(!d.isString(e)||!(e=d.trim(e)))return{};n=n||"=";for(var r,o,i,s={},a=d.urlDecode,c=e.split(t=t||"&"),u=0,l=c.length;u<l;++u){if(-1===(r=d.indexOf(n,c[u])))o=a(c[u]),i=void 0;else{o=a(c[u].substring(0,r)),i=c[u].substring(r+1);try{i=a(i)}catch(f){h.error("decodeURIComponent error : "+i),h.error(f)}d.endsWith(o,"[]")&&(o=o.substring(0,o.length-2))}o in s?d.isArray(s[o])?s[o].push(i):s[o]=[s[o],i]:s[o]=i}return s}})}function de(o){o.currentStyle=function(e,t){var n=o.win,r=n.doc;return e.currentStyle?e.currentStyle[t]:n.getComputedStyle?(t.replace(/([A-Z])/g,"-$1"),t.toLowerCase(),r.defaultView.getComputedStyle(e,null)[t]):null}}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function pe(e){var t=Array.prototype,c=e.Lib,e=e.navInfoSync,n=c.isString,s=c.each,r=t.slice,u=" ",o=e.bIE&&e.IEMode<10,i=/[\n\t\r\.]/g,a=function(){function i(e,t,n){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");Ae(this,"isNodeList",!0),Ae(this,"length",0);var r=this;return r instanceof i?(e&&("string"==typeof e?c.error("Err 4001."):c.isArray(e)||e.isNodeList?Array.prototype.push.apply(r,c.makeArray(e)):(r[0]=e,r.length=1)),r):new i(e,t,n)}var e,t,n;return e=i,(t=[{key:"item",value:function(e){return c.isNumber(e)?e>=this.length?null:new i(this[e]):new i(e)}},{key:"slice",value:function(){return new i(r.apply(this,arguments))}},{key:"getDOMNodes",value:function(){return r.call(this)}},{key:"each",value:function(n,r){var o=this;return s(o,function(e,t){return e=new i(e),n.call(r||e,e,t,o)}),o}},{key:"getEL",value:function(){return 0<this.length?this[0]:void 0}},{key:"all",value:function(e){e=0<this.length?c.all(e,this):new i;return e}},{key:"one",value:function(e){e=this.all(e);return e.length?e.slice(0,1):e}}])&&he(e.prototype,t),n&&he(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function l(e){return n(e)&&(e=c.trim(e))&&3<=e.length&&c.startsWith(e,"<")&&c.endsWith(e,">")}function f(e){return(u+e+u).replace(i,u)}function d(e){return e.replace(i,"")}var h=function h(e,t){var n,r,o,i,s=e.className,a=t.length;if(s){for(n=f(s),r=s,o=0;o<a;o++)i=d(t[o]),n.indexOf(u+i+u)<0&&(r+=u+i);r=c.trim(r)}else r=t.join(" ");e.className=r},A=function A(e,t){var n,r,o,i=e.className,s=t.length;if(i&&s){for(n=f(i),r=0;r<s;r++)for(o=u+d(t[r])+u;0<=n.indexOf(o);)n=n.replace(o,u);e.className=c.trim(n)}},p=function p(e,t){var n,r,o,e=e.className,i=t.length;if(e&&i){for(n=f(e),r=0;r<i;r++)if(o=u+d(t[r])+u,n.indexOf(o)<0)return!1;return!0}return!1};function y(e,t){return t&&t.isNodeList&&(t=t.getEL()),n(e)?(l(e)&&c.err("Err 4002."),new a(c.sizzle(e,t))):e.isNodeList?e:new a(e)}c.mix(a.prototype,{before:function(e){var t=this.getEL(),n=[e];t&&(l(e)&&(n=c.parseHTML(e)),s(n,function(e){t.insertBefore(e,t.childNodes[0])}))},append:function(e){var t=this.getEL(),n=[e];t&&(l(e)&&(n=c.parseHTML(e)),s(n,function(e){t.appendChild(e)}))},html:function(e){var t,n=this.getEL();if(n){if(c.isUndef(e))return t=(t=n).innerHTML,document.all?(t=t.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi,'$1="$2"').replace(/"'([^'"]*)'"/gi,'"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g,function(e,t,n,r){return t?"</"+n.toLowerCase()+">":("<"+n.toLowerCase()+r+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(e,t,n,r,o,i,s,a){return o?'="'+o+'"'+i:e})}).replace(/<\/?([^>]+)>/g,function(e){return e}):t;n.innerHTML="",s(c.parseHTML(e),function(e){n.appendChild(e)})}},attr:function(e,t){var n=this.getEL();if(n){if(c.isUndef(t))return"readonly"===e?n.readOnly?"readonly":"":"style"!==e&&o?n[e]:(n=n.attributes[e])&&n.value;"class"==e?n.className=t:n[e]=t}},style:function de(e,t){var n=this.getEL();if(n)return c.style(n,e,t)},css:function(e){s(this,function(n){s(e,function(e,t){c.style(n,t,e)})})},addClass:function(e){var t=this.getEL();t&&h(t,e.split(u))},removeClass:function(e){var t=this.getEL();t&&A(t,e.split(u))},hasClass:function(e){var t=this.getEL();if(t)return p(t,e.split(u))},parent:function(){var e=(e=this.getEL())&&e.parentNode;return new a(e)},remove:function(){var e=this.getEL();e&&e.parentNode&&e.parentNode.removeChild(e)},offset:function(){var e=this.getEL();return c.DOM.getElDimensions(e,!0)}}),c.mix(c,{all:y,one:function(e,t){e=y(e,t);return e.length?e.slice(0,1):e},isNodeList:function(e){return e instanceof a}}),c.ready(function(){c.all=y})}function ye(l){var r,o,e,f=l.Lib,u=(f.loaderBarClassName="ds-dwt-loaderBar",f.loaderBarSource="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==",f.loaderBarSourceIE="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=",f.createShowMaskContent=function(e){var t,n="",r="230px",o="240px";return e&&(e.background&&(n=";background:"+e.background),e.width&&(r=e.width),e.height&&(o=e.height),e.imageSource&&(t=e.imageSource)),t=t||f.loaderBarSource,['<div align="center" ','class="',f.loaderBarClassName,'" ','style="margin:0 auto;max-width:',r,";max-height:",o,";line-height:",o,n,'"><img style="user-select: none;max-width:230px; max-height:240px; width:50%" src="',t,'" draggable="false" /></div>'].join("")},f.win),d=f.doc,h=!0,A=!1,i=5e5;function p(e){for(var t=0;t<d.styleSheets.length;++t){var n=d.styleSheets[t],r=[],o=void 0,i=void 0,s=void 0;try{r=n.cssRules,o=d.querySelectorAll}catch(l){}if(r&&o)for(var a=0;a<r.length;++a){i=r[a],s=A;try{s=o(i.selectorText)}catch(l){}if(s&&function(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return h;return A}(s,e)){var c=i.style.getPropertyValue("top"),u=i.style.getPropertyValue("bottom");if(c&&"auto"!=c||u&&"auto"!=u)return h}}}return A}function s(e){var t=d.createEvent("MouseEvents");return t.initMouseEvent(e.type,e.bubbles,e.cancelable,u,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t}function a(e){d.body.dispatchEvent(s(e))}function c(){o===r&&(o=d.createElement("div"),(e=o.style).position="fixed",e.display="block",e.left=e.top=e.margin=e.padding=0,e.backgroundColor="rgba(128, 128, 128, 0.1)",e.filter="alpha(opacity=10)",e.opacity=e.MozOpacity=.1,e.zIndex=i,e.width=e.height="100%",l.navInfoSync.bIE&&(o.innerHTML='<iframe src="javascript:\'\'" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>'),d.createEvent&&f.addEventListener(o,"click",a)),d.body.contains(o)||d.body.appendChild(o)}var y={pendingDialogStack:[],_updateStacking:function(e){var t,n=this.pendingDialogStack;0==n.length?o!==r&&(f.removeEventListener(o,"click",a),d&&d.body&&d.body.removeChild(o),o=r):(1!=e&&c(),t=i,f.each(n,function(e){t++,e._dlgInfo.mask&&(e._dlgInfo.mask.style.zIndex=t++),e.style.zIndex=t}))},pushDialog:function(t,e){var n;t.getBoundingClientRect();1e3<=this.pendingDialogStack.length?f.error("Too many modal dialogs."):((n=d.createElement("div")).className="dynamsoft-backdrop",1==e?(n.style.left=0,n.style.top=0,n.style.position="absolute"):(n.style.left=0,n.style.top=0,n.style.width="100%",n.style.height="100%",n.style.position="fixed"),d.createEvent&&f.addEventListener(n,"click",function(e){t.dispatchEvent&&(e=s(e),t.dispatchEvent(e))}),t.parentNode.insertBefore(n,t.nextSibling),t._dlgInfo.mask=n,this.pendingDialogStack.push(t),this._updateStacking(e))},removeDialog:function(e){var t=f.isArray(this.pendingDialogStack)?f.indexOf(e,this.pendingDialogStack):-1;-1!=t&&(this.pendingDialogStack.splice(t,1),(t=e._dlgInfo.mask).parentNode&&t.parentNode.removeChild(t),e._dlgInfo.mask=null,this._updateStacking())}};function n(e,t){var n,r,o,i=this,s=t?"absolute":"fixed",a="50%",c="50%";i._dlgInfo&&i._dlgInfo.styleConfig&&(n=i._dlgInfo.styleConfig,f.isString(n.style)?r=n.style:(f.isString(n.position)&&(s=n.position),(f.isString(n.left)||f.isNumber(n.left))&&(c=n.left),(f.isString(n.top)||f.isNumber(n.top))&&(a=n.top))),i.open?f.error("showDialog called on open dialog."):(i.open=h,i.removeAttribute("closed"),i.setAttribute("open","open"),r?i.setAttribute("style",r):(n=["display:block;position:",s,";left:",c,";top:",a,";transform:translate(-50%, -50%)"],"DIALOG"==i.tagName?n.push(";margin:0;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);-webkit-box-sizing:border-box;box-sizing:border-box;"):n.push(";border:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;"),i.setAttribute("style",n.join(""))),r=i,u.getComputedStyle?o=u.getComputedStyle(r):r.currentStyle&&(o=r.currentStyle),(o&&"absolute"!=o.position||"auto"!=r.style.top&&""!=r.style.top||"auto"!=r.style.bottom&&""!=r.style.bottom?A:!p(r))&&(s=i,c=d.body.scrollTop||d.documentElement.scrollTop,a=u.innerHeight||d.documentElement.clientHeight,c+=(a-s.offsetHeight)/2,s.style.top=c+"px",s._dlgInfo.isTopOverridden=h),e&&(i._dlgInfo.modal=h,y.pushDialog(i,t)))}f.dialog={setup:function(e,t){e.show=n.bind(e,A,t),e.showModal=n.bind(e,h,t),e.close=function(e){var t=this;return t.open||f.error("closeDialog called on closed dialog."),t.open=A,t.removeAttribute("open"),t.setAttribute("closed","closed"),t.style.display="none",void 0!==e&&(t.returnValue=e),t._dlgInfo.isTopOverridden&&(t.style.top="auto"),t._dlgInfo.modal&&y.removeDialog(t),t.returnValue}.bind(e),e._dlgInfo={}}},f.mask={dlgMask:!1,preOnresize:!1,preOnscroll:!1},f.showMask=function(e){var t,n,r,o,i,s,a,c,u;f.mask.dlgMask||f.dlgLoadingShowStatus||(o=!1,e&&(a={},e.style?a.style=e.style:((f.isString(e.top)||f.isNumber(e.top))&&(a.top=e.top),(f.isString(e.left)||f.isNumber(e.left))&&(a.left=e.left),f.isString(e.position)&&(a.position=e.position)),e.confined&&(o=e.confined),(f.isString(e.width)||f.isNumber(e.width))&&(t=e.width),(f.isString(e.height)||f.isNumber(e.height))&&(n=e.height),f.isString(e.background)&&(r=e.background),f.isString(e.imageSource)&&(u=e.imageSource),o&&e.wrapperEl&&(i=e.wrapperEl,f.isString(i)&&(i=document.getElementById(i)))),u=u||((c=l.DWT&&l.DWT.CustomizableDisplayInfo?l.DWT.CustomizableDisplayInfo:c)&&f.isString(c.loaderBarSource)&&""!=c.loaderBarSource?c.loaderBarSource:l.navInfoSync.bIE?f.loaderBarSourceIE:f.loaderBarSource),i&&(s=i.getBoundingClientRect(),i.style.position="relative"),(e=document.createElement("div")).className="dynamsoft-dialog-wrap",e.innerHTML=f.createShowMaskContent({width:t,height:n,backgroundColor:r,imageSource:u}),i?(i.appendChild(e),e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)"):document.body.appendChild(e),o&&s&&(window.onresize?f.mask.preOnresize=window.onresize:f.mask.preOnresize=!1,window.onscroll?f.mask.preOnscroll=window.onscroll:f.mask.preOnscroll=!1),f.mask.dlgMask=e,f.dialog.setup(e,o),a&&(e._dlgInfo.styleConfig=a),i&&(e._dlgInfo.wrapperEl=i),e.showModal())},f.hideMask=function(){var e=f.mask.dlgMask;e&&(e.close(),e._dlgInfo&&e._dlgInfo.wrapperEl?(e._dlgInfo.wrapperEl.removeChild(e),e._dlgInfo.wrapperEl=null):document.body.removeChild(e),f.mask.dlgMask=!1),f.mask.preOnresize?window.onresize=f.mask.preOnresize:window.onresize=null,f.mask.preOnresize=!1,f.mask.preOnscroll?window.onscroll=f.mask.preOnscroll:window.onscroll=null,f.mask.preOnscroll=!1}}function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(d){var t,n,r,o,i,s,a,c,u,l,f,h,A,p,y,g,m,b,w,C,Q,j,O,v,P,I,S,x,R,E,B,k,e=d.doc,T=d.each,M=e.documentElement,z=d.support,N=d.sizzle,L=e.createElement("div"),F=e.createElement("div");function D(){var e;M.appendChild(L),F.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=r=s=!1,n=i=!0,window.getComputedStyle&&(e=window.getComputedStyle(F),t="1%"!==(e||{}).top,s="2px"===(e||{}).marginLeft,r="4px"===(e||{width:"4px"}).width,F.style.marginRight="50%",n="4px"===(e||{marginRight:"4px"}).marginRight,(e=F.appendChild(document.createElement("div"))).style.cssText=F.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",F.style.width="1px",i=!parseFloat((window.getComputedStyle(e)||{}).marginRight),F&&F.removeChild(e)),F.style.display="none",(o=0===F.getClientRects().length)&&(F.style.display="",F.innerHTML="<table><tr><td></td><td>t</td></tr></table>",F.childNodes[0].style.borderCollapse="separate",(e=F.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",o=0===e[0].offsetHeight)),M&&M.removeChild(L)}function U(e){if(e in S)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=x.length;n--;)if((e=x[n]+t)in S)return e}function H(e,t){for(var n,r,o,i,s,a,c=e.length,u=function(e){var t=R.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}(t),l=[],f=0;f<c;f++)if((r=e[f])||0===r)if("object"===d.type(r))B.merge(l,r.nodeType?[r]:r);else if(m.test(r)){if(o=o||u.appendChild(t.createElement("div"))){for(i=(y.exec(r)||["",""])[1].toLowerCase(),o.innerHTML=(a=I[i]||I._default)[1]+B.htmlPrefilter(r)+a[2],n=a[0];n--;)o=o.lastChild;if(!z.leadingWhitespace&&g.test(r)&&l.push(t.createTextNode(g.exec(r)[0])),!z.tbody&&(n=(r="table"!==i||b.test(r)?"<table>"!==a[1]||b.test(r)?0:o:o.firstChild)&&r.childNodes.length,r))for(;n--;)B.nodeName(s=r.childNodes[n],"tbody")&&!s.childNodes.length&&r.removeChild(s);for(B.merge(l,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=u.lastChild}}else l.push(t.createTextNode(r));for(o&&u&&u.removeChild(o),f=0;r=l[f++];)"SCRIPT"!==r.tagName&&(N.contains(r.ownerDocument,r),u.appendChild(r));return o=null,u}function K(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,s=0;i<4;i+=2)"margin"===n&&(s+=d.css(e,n+P[i],!0,o)),r?("content"===n&&(s-=d.css(e,"padding"+P[i],!0,o)),"margin"!==n&&(s-=d.css(e,"border"+P[i]+"Width",!0,o))):(s+=d.css(e,"padding"+P[i],!0,o),"padding"!==n&&(s+=d.css(e,"border"+P[i]+"Width",!0,o)));return s}function J(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,i=a(e),s=z.boxSizing&&"border-box"===d.css(e,"boxSizing",!1,i);if(o<=0||null==o){if(((o=c(e,t,i))<0||null==o)&&(o=e.style[t]),h.test(o))return o;r=s&&(z.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+K(e,t,n||(s?"border":"content"),r,i)}function G(e){return new RegExp("^(?:([+-])=|)("+f+")([a-z%]*)$","i").exec(e)}F.style&&(F.style.cssText="float:left;opacity:.5",z.opacity="0.5"===F.style.opacity,z.cssFloat=!!F.style.cssFloat,F.style.backgroundClip="content-box",F.cloneNode(!0).style.backgroundClip="",z.clearCloneStyle="content-box"===F.style.backgroundClip,(L=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",F.innerHTML="",L.appendChild(F),z.boxSizing=""===F.style.boxSizing||""===F.style.MozBoxSizing||""===F.style.WebkitBoxSizing,d.mix(z,{reliableHiddenOffsets:function(){return null==t&&D(),o},boxSizingReliable:function(){return null==t&&D(),r},pixelMarginRight:function(){return null==t&&D(),n},pixelPosition:function(){return null==t&&D(),t},reliableMarginRight:function(){return null==t&&D(),i},reliableMarginLeft:function(){return null==t&&D(),s}}),u=/^margin/,l=/^(top|right|bottom|left)$/,f=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,h=new RegExp("^("+f+")(?!px)[a-z%]+$","i"),A=new RegExp("^("+f+")(.*)$","i"),window.getComputedStyle?(a=function a(e){var e=d.isFunction(e.getEL)?e.getEL():e,t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:window).getComputedStyle(e)},c=function c(e,t,n){var r,o,i=e.style;return""!==(o=(n=n||a(e))?n.getPropertyValue(t)||n[t]:undefined)&&o!==undefined||N.contains(e.ownerDocument,e)||(o=d.style(e,t)),n&&!z.pixelMarginRight()&&h.test(o)&&u.test(t)&&(e=i.width,t=i.minWidth,r=i.maxWidth,i.minWidth=i.maxWidth=i.width=o,o=n.width,i.width=e,i.minWidth=t,i.maxWidth=r),o===undefined?o:o+""}):M.currentStyle&&(a=function a(e){return e.currentStyle},c=function c(e,t,n){var r,o,i,s=e.style;return null==(n=(n=n||a(e))?n[t]:undefined)&&s&&s[t]&&(n=s[t]),h.test(n)&&!l.test(t)&&(r=s.left,(i=(o=e.runtimeStyle)&&o.left)&&(o.left=e.currentStyle.left),s.left="fontSize"===t?"1em":n,n=s.pixelLeft+"px",s.left=r,i&&(o.left=i)),n===undefined?n:n+""||"auto"}),p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,y=/<([\w:-]+)/,g=/^\s+/,m=/<|&#?\w+;/,b=/<tbody/i,w=/^-ms-/,C=/-([\da-z])/gi,Q=/^(none|table(?!-c[ea]).+)/,j=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,O={position:"absolute",visibility:"hidden",display:"block"},v={letterSpacing:"0",fontWeight:"400"},P=["Top","Right","Bottom","Left"],I={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:z.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},x=["Webkit","O","Moz","ms"],R="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video",(e=document.createElement("div")).style&&(S=e.style,z.cssFloat=!!e.style.cssFloat,E=function E(e,t){return t.toUpperCase()},B={type:d.type,cssHooks:{},htmlPrefilter:function(e){return e.replace(p,"<$1></$2>")},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;)e[o++]=t[r++];if(n!=n)for(;t[r]!==undefined;)e[o++]=t[r++];return e.length=o,e},camelCase:function(e){return e.replace(w,"ms-").replace(C,E)},cssProps:{},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}},e=["flo","at"].join(""),B.cssProps[e]=z.cssFloat?"cssFloat":"styleFloat",k=function k(n,r,e,t){var o={};return T(r,function(e,t){o[t]=n.style[t],n.style[t]=r[t]}),t=e.apply(n,t||[]),T(r,function(e,t){n.style[t]=o[t]}),t},T(["height","width"],function(o,e){B.cssHooks[o]={get:function(e,t,n){if(t)return Q.test(d.css(e,"display"))&&0===e.offsetWidth?k(e,O,function(){return J(e,o,n)}):J(e,o,n)},set:function(e,t,n){var r=n&&a(e);return t=t,n=n?K(e,o,n,z.boxSizing&&"border-box"===d.css(e,"boxSizing",!1,r),r):0,(e=A.exec(t))?Math.max(0,parseInt(e[1])-(n||0))+(e[2]||"px"):t}}}),d.style=function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,s,a=B.camelCase(t),c=e.style;if(t=B.cssProps[a]||(B.cssProps[a]=U(a)||a),s=B.cssHooks[t]||B.cssHooks[a],n===undefined)return s&&"get"in s&&(o=s.get(e,!1,r))!==undefined?o:c[t]+"";"string"===(i=ge(n))&&(o=G(n))&&o[1]&&(n=function(e,t,n,r){var o,i=1,s=20,a=r?function(){return r.cur()}:function(){return d.css(e,t,"")},c=a(),u=n&&n[3]||(B.cssNumber[t]?"":"px"),l=(B.cssNumber[t]||"px"!==u&&+c)&&G(d.css(e,t));if(l&&l[3]!==u)for(u=u||l[3],n=n||[],l=+c||1;l/=i=i||".5",d.style(e,t,l+u),i!==(i=a()/c)&&1!==i&&--s;);return n&&(l=+l||+c||0,o=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=o)),o}(e,t,o),i="number"),null!=n&&n==n&&("number"===i&&(n+=o&&o[3]||(B.cssNumber[a]?"":"px")),z.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&(n=s.set(e,n,r))===undefined||(c[t]=n))}},d.css=function(e,t,n,r){var o,i=B.camelCase(t);return t=B.cssProps[i]||(B.cssProps[i]=U(i)||i),"normal"===(o=(o=(i=B.cssHooks[t]||B.cssHooks[i])&&"get"in i?i.get(e,!0,n):o)===undefined?c(e,t,r):o)&&t in v&&(o=v[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o},d.parseHTML=function(e,t){if(!e||"string"!=typeof e)return[];t=(t="boolean"==typeof t?!1:t)||document;var n=j.exec(e);return n?[t.createElement(n[1])]:(n=H([e],t),B.merge([],n.childNodes))}))}function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o(i,"deferred",i),o(i,"defer",i),o(i,"nextTick",a),o(i,"alwaysAsync",!0),o(i,"onlyFuncs",!0),o(i,"resolve",function(e){return new i(!0).resolve(e).promise}),o(i,"resolved",i.resolve),o(i,"fulfilled",i.resolve),o(i,"reject",function(e){return new i(!0).reject(e).promise}),o(i,"rejected",i.reject);var we,Ce,ve,l,Pe,Ie,d,h,A,p,y,Se,g,m,xe,b,w,C,v,Ee,P,I,E,B,S,J,Be,ke,Te,Me,x,ze,k,e="undefined"!=typeof window?window:"undefined"!=typeof self?self:undefined,T=e.Dynamsoft,M=T.Lib,z=!1,Le=function Le(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};if(!(z=M&&M.__ver&&M.isNumber(M.__ver)&&20220623<=M.__ver?!0:z)){var L=function L(e){if(null==e||"object"!=be(e))return e;var t,n,r;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){for(t=[],r=e.length,n=0;n<r;n++)t[n]=L(e[n]);return t}if(e instanceof Object){for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=L(e[n]));return t}return 0},Fe=Date.now||function(){return+new Date},De=function De(){for(var e,t=Fe()%1e4,n=[],r=0;r<5;r++)e=Math.floor(10*Math.random()),0==r&&0==e?r=-1:n.push(e);return t<10?n.push("000"):t<100?n.push("00"):t<1e3&&n.push("0"),n.push(t),n.join("")},Qe=function Qe(e){for(var t,n,r=[],o="0123456789abcdef",i=0;i<8;i++)n=Math.floor(16*Math.random()),r.push(o.substring(n,n+1));for(r.push("-"),i=0;i<4;i++)n=Math.floor(16*Math.random()),r.push(o.substring(n,n+1));for(r.push("-4"),i=0;i<3;i++)n=Math.floor(16*Math.random()),r.push(o.substring(n,n+1));for(r.push("-"),n=Math.floor(16*Math.random()),t=o.substring(n,n+1),t=o.substring(n=3&t|8,n+1),r.push(t),i=0;i<3;i++)n=Math.floor(16*Math.random()),r.push(o.substring(n,n+1));for(r.push("-"),i=0;i<8;i++)n=Math.floor(16*Math.random()),r.push(o.substring(n,n+1));return r.unshift(e),r.join("")},M=(e.Map||(e.Map=function(){this.keys=[],this.data={},this.set=function(e,t){null==this.data[e]&&-1==this.keys.indexOf(e)&&this.keys.push(e),this.data[e]=t},this.get=function(e){return this.data[e]}}),Le(T.Lib,{win:e,doc:e.document,debug:!1,nil:undefined,mix:Le,clone:L,keys:Object.keys,now:Fe,getRandom:De,guid:Qe,noop:function(){},stringify:e.JSON.stringify,parse:e.JSON.parse,__ver:20220623}),Q(T),H(T),(k=T.Lib).mix(k,{startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)===n},replaceAll:function(e,t,n){return e.replace(new RegExp(t,"gi"),n)},upperCaseFirst:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},removeNonPrintableChar:function(e){return k.isString(e)?e.replace(/[^\x20-\x7E]/g,""):e},makeArray:function(e){if(null==e)return[];if(k.isArray(e))return e;var t=s(e.length),n=s(e);if("number"!==t||e.alert||"string"===n||"function"===n&&!("item"in e&&"number"===t))return[e];for(var r=[],o=0,i=e.length;o<i;o++)r[o]=e[o];return r}}),(ze=T.Lib).extend=function(e,t){var n=function n(){e.apply(this,arguments),t&&t.apply(this,arguments)};return ze.each(e.prototype,function(e,t){n.prototype[t]=e}),n.prototype.constructor=n},(x=T.Lib).mix(Re.prototype,{get:function(e){return e in this.__attrs?this.__attrs[e]:""},set:function(e,t){e in this.__attrs&&(this.__attrs[e]=t)},addAttrs:function(e){x.mix(this.__attrs,e)}}),Re.extend=function(e){var t;return(e=e||{}).constructor&&(t=e.constructor),t=x.extend(this,t),x.mix(t,e),t},x.Attributes=Re,M=T.Lib,z=Array.prototype,Te=z.indexOf,Me=z.filter,M.mix(M,{filter:function(e,t,n){return Me.call(e,t,n||this)},indexOf:function(e,t){return Te.call(t,e)},uniq:function(e){for(var t=[],n=e.length,r=0;r<n;r++){for(var o=r+1;o<n;o++)e[r]===e[o]&&(o=++r);t.push(e[r])}return t}}),z=T.Lib,Be=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,M=String.prototype,ke=(ke=M.trim)||(M.trim=function(){return this.replace(Be,"")}),z.trim=function(e){return null==e?"":ke.call(e)},(J=T.Lib).getNavInfoByUserAgent=function(e,t){var n,r,o=J.doc,e=e.toLowerCase(),t=t.toLowerCase(),i=/harmonyos/g.test(e),s=!i&&/cros/.test(e),a=!i&&/android/g.test(e)||/android/g.test(t),c=/iphone/g.test(e)||/iphone/g.test(t),u=/macintosh/.test(e),l=navigator.maxTouchPoints||0,u=/ipad/g.test(e)||(u||"macintel"==t)&&1<l,l=/ucweb|ucbrowser/g.test(e),f=!l&&/nexus/g.test(e)&&/version\/[\d.]+.*safari\//g.test(e),d=/playbook/g.test(e),h=/hp-tablet/g.test(e),A=/blackberry|bb10/g.test(e),p=/symbian/g.test(e),y=/windows phone/g.test(e),g=/mobile/g.test(e),m=/arm64|aarch64/g.test(e),b=/mips64/g.test(e),w=/huaweibrowser/g.test(e),C=m||b,h=("linux"==t&&0<=e.indexOf("windows nt")&&(t="harmonyos",i=!0),d||u||h),g=!h&&(c||f||A||p||y||a||i||g),v=!g&&!h&&!s,P=v&&/win32|win64|windows/.test(t),I=P&&/win64|x64/.test(e),S=v&&/mac68k|macppc|macintosh|macintel/.test(e),v=v&&/linux/.test(t),t="win64"==t||/wow64|x86_64|win64|x64/.test(e)||C,Q=/wow64/g.test(e),x=!1,E=/opera|opr/g.test(e),j=/360se/g.test(e),O=/maxthon/g.test(e),R=/tencenttraveler|qqbrowser/g.test(e),N=/the world/g.test(e),U=/metasr/g.test(e),H=/avant/g.test(e),B=/firefox|fxios/g.test(e),k=J.preNavInfo.bEdge,T=J.preNavInfo.bIE,M=!(A||d||l||E||k||w)&&/chrome|crios/g.test(e),z="",L=0,K=/gecko/g.test(e),F=g||h,D="";return!(S||c||u||P||A||d||f)||l||E||k||T||B||(n=e.match(/version\/([\d.]+).*safari\//))&&(A||d||f||(M=!(x=!0)),D=n[1]),k?(-1<(A=e.indexOf("edge/"))?A+=5:-1<(A=e.indexOf("edg/"))?A+=4:-1<(A=e.indexOf("edga/"))?A+=5:-1<(A=e.indexOf("edgios/"))&&(A+=7),-1<A&&-1<(n=(D=e.slice(A)).indexOf(" "))&&(D=D.slice(0,n)),F=!0):B?(F=!0,-1<(n=e.indexOf("firefox/"))?(n=-1<(d=(D=n=-1<(d=(n=e.slice(n+8)).indexOf(" "))?n.slice(0,d):n).indexOf("."))?D.slice(0,d):n)<27&&(F=!1):(c||u)&&-1<(n=e.indexOf("fxios/"))&&(D=n=(n=e.slice(n+6)).slice(0,n.indexOf(" ")))):T?(A=e.indexOf("msie "),d=e.indexOf("trident"),r=e.indexOf("rv:"),-1!=A?z=n=(n=e.slice(A+5)).slice(0,n.indexOf(";")):-1!=r?z=n=(n=(n=e.slice(r+3)).slice(0,n.indexOf(";"))).slice(0,n.indexOf(")")):-1!=d&&(z=n=(n=e.slice(d+7)).slice(0,n.indexOf(";"))),(""===z||10<=parseInt(z))&&(F=!0),D=n):x?(F=!0,-1<(n=D.indexOf("."))&&(n=D.slice(0,n))<7&&(F=!1)):l?(-1<(n=e.indexOf("ucweb"))?D=e.slice(n+5):-1<(n=e.indexOf("ucbrowser/"))&&-1<(n=(D=e.slice(n+10)).indexOf(" "))&&(D=D.slice(0,n)),F=!0):E?(-1<(n=e.indexOf("version/"))?D=e.slice(n+8):-1<(n=e.indexOf("opr/"))&&(D=e.slice(n+4)),F=!0):p?(-1<(n=e.indexOf("browserng/"))&&(D=e.slice(n+10)),F=!0):y?(-1<(n=e.indexOf("iemobile/"))&&(D=e.slice(n+9)),F=!0):M?(-1<(A=e.indexOf("chrome/"))?-1<(n=(D=e.slice(A+7)).indexOf(" "))&&(D=D.slice(0,n)):-1<(A=e.indexOf("crios/"))&&-1<(n=(D=e.slice(A+6)).indexOf(" "))&&(D=D.slice(0,n)),F=!0,-1<(n=D.indexOf("."))&&(n=D.slice(0,n))<27&&(F=!1)):w&&(-1<(r=e.indexOf("huaweibrowser"))&&-1<(n=(D=e.slice(r+14)).indexOf(" "))&&(D=D.slice(0,n)),F=!0),(k||T)&&(o.documentMode?L=o.documentMode:(L=5,o.compatMode&&"CSS1Compat"==o.compatMode&&(L=7))),(S||v)&&(t=!0,S&&(n=e.match(/mac os x (\d+)(_|\.)(\d+)/))&&3<n.length&&(10==n[1]&&n[3]<14||n[1]<10)&&(t=!1)),{bWin:P,bMac:S,bLinux:v,bMobile:g,bPad:h,bChromeOS:s,bHarmonyOS:i,bArm64:m,bMips64:b,bEmbed:C,bAndroid:a,biPhone:c,biPad:u,bWin64:I,bWOW64:Q,bOSx64:t,bIE:T,bEdge:k,bChrome:M,bFirefox:B,bSafari:x,bOpera:E,bNexus:f,bUC:l,b360SE:j,bMaxthon:O,bTencentTraveler:R,bTheWorld:N,bMetaSr:U,bAvant:H,bHuaWeiBrowser:w,bGecko:K,bHTML5Edition:F,strBrowserVersion:D,IEMode:L}},fe(T.Lib),ie(T.Lib),ue(T.Lib),ae(T.Lib),T),z=(M=M.Lib).win;if(!(M._promise_ver&&M.isNumber(M._promise_ver)&&20220622<=M._promise_ver))M._promise_ver=20220622,M.isFunction(z.__zone_symbol__Promise)&&(M.nativePromise=z.__zone_symbol__Promise),self&&self.Promise?M.Promise=self.Promise:z&&z.Promise?M.Promise=z.Promise:M.Promise=i,M.nativePromise||(M.nativePromise=M.Promise);(B=(E=T).Lib)._defaultAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",B._defaultPlatform="Win64",S=B.Promise||window.Promise,B.getNavInfoSync=function(){var e,t=B.win,n=B.preNavInfo.uaBrands,r=t.location.protocol,o="https:"===r,r="https:"!==r&&"http:"!==r,i=!1,s=!0,a=!0,c=0,u=0,l=!1,f=!1,d=!1,h=!1,A=!1,p=!1,y=!1,g=!1,m=!1,b=!1,w=!1,C=!1;if(B.preNavInfo.bUseUserAgent)E.navInfo?S=E.navInfo:(P=navigator,S=B.getNavInfoByUserAgent(P.userAgent,P.platform),E.navInfo=S),i=S.bIE,a=S.bGecko,l=S.bWin,f=S.bMac,d=S.bLinux,A=S.bAndroid,h=S.bChromeOS,p=S.bHarmonyOS,y=S.bMobile,g=S.bChrome,m=S.bEdge,b=S.bOpera,w=S.bFirefox,C=S.bSafari,e=+S.strBrowserVersion,i&&(c=parseInt(e),u=S.IEMode),s=S.bHTML5Edition;else{var v,P="",I=0,S=navigator.userAgentData;for(S.platform&&""!=S.platform&&(P=S.platform.toLowerCase(),y=S.mobile,I=n.length),v=0;v<I;v++){var x=n[v].brand.toLowerCase();if(0<=x.indexOf("chrome")){g=!0,e=n[v].version;break}if(0<=x.indexOf("edge")){m=!0,e=n[v].version;break}if(0<=x.indexOf("opera")){b=!0,e=n[v].version;break}}g||m||b||(g=!0,e="100"),f=0<=P.indexOf("mac"),h=0<=P.indexOf("chromeos"),l="windows"==P,d="linux"==P,A="android"==P,p=0<=P.indexOf("harmony")}return{host:t,bSSL:o,bFileSystem:r,bIE:i,bGecko:a,IEVersion:c,IEMode:u,bHTML5Edition:s,bWin:l,bMac:f,bLinux:d,bAndroid:A,bChromeOS:h,bHarmonyOS:p,bMobile:y,bChrome:g,bEdge:m,bOpera:b,bFirefox:w,bSafari:C,strBrowserVersion:e}},B.getNavInfoByUAData=function(e){var u=function u(e){var t=E.navInfoSync,n=e.platform.toLowerCase(),r=e.architecture.toLowerCase(),e="64"==e.bitness,o=-1<r.indexOf("arm"),r=-1<r.indexOf("mips"),i=navigator.maxTouchPoints||0,s=t.bMobile,a=!1,c=!1;return/win32|win64|windows/.test(n)||((a=/android/g.test(n))?s=!0:/linux/.test(n)||(/iphone/g.test(n)?s=!0:"macintel"==n&&1<i&&(c=!0))),{bWin:t.bWin,bMac:t.bMac,bLinux:t.bLinux,bAndroid:a,bMobile:s,bPad:c,bChromeOS:t.bChromeOS,bHarmonyOS:t.bHarmonyOS,bArm64:o,bMips64:r,bEmbed:!1,bOSx64:e,bIE:!1,bEdge:t.bEdge,bChrome:t.bChrome,bFirefox:t.bFirefox,bSafari:t.bSafari,bOpera:t.bOpera,bGecko:!0,bHuaWeiBrowser:!1,bHTML5Edition:!0,strBrowserVersion:t.strBrowserVersion,IEMode:0}};return e?S.resolve(function(){return u(e)}):navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","bitness"]).then(u)},B.asyncGetNavInfo=function(){if(E.navInfo)return S.resolve(E.navInfo);var e=navigator;if("userAgentData"in e){var t=navigator.userAgentData;if(t.platform&&""!=t.platform){var n=[];if("brands"in t&&B.isArray(t.brands)&&0<t.brands.length?n=t.brands:"uaList"in t&&B.isArray(t.uaList)&&0<t.uaList.length&&(n=t.uaList),0<n.length)return B.getNavInfoByUAData().then(function(e){return E.navInfo=e})}}return"userAgent"in e?E.navInfo=B.getNavInfoByUserAgent(e.userAgent,e.platform):E.navInfo=B.getNavInfoByUserAgent(B._defaultAgent,B._defaultPlatform),S.resolve(E.navInfo)},B.getNavInfo=function(){if(E.navInfo)return E.navInfo;var e=navigator;if("userAgentData"in e){var t=navigator.userAgentData;if(t.platform&&""!=t.platform){var n=[];if("brands"in t&&B.isArray(t.brands)&&0<t.brands.length?n=t.brands:"uaList"in t&&B.isArray(t.uaList)&&0<t.uaList.length&&(n=t.uaList),0<n.length)return B.getNavInfoByUAData().then(function(e){E.navInfo=e}),!1}}return"userAgent"in e?E.navInfo=B.getNavInfoByUserAgent(e.userAgent,e.platform):E.navInfo=B.getNavInfoByUserAgent(B._defaultAgent,B._defaultPlatform),E.navInfo},E.navInfoSync=B.getNavInfoSync();var M=(z=T).Lib,z=z.navInfoSync,je=!1,F=!1;if(!(z.bEdge&&z.bFileSystem||z.bIE&&z.IEVersion<8))try{F=window.localStorage,je=!!F}catch(Ue){F=!1}M.LS={isSupportLS:function(){return je},item:function(e,t,n){var r=null;return!this.isSupportLS()||null===(r=t?(F.setItem(e,t),t):F.getItem(e))?n:r},removeItem:function(e){return!!this.isSupportLS()&&(F.removeItem(e),!0)}},U(T),P=T.Lib,I="none",P.mix(P,{get:function(e){return P.doc.getElementById(e)},hide:function(e){e=P.isString(e)?P.get(e):e;e&&(e.style.display=I)},show:function(e){e=P.isString(e)?P.get(e):e;e&&(e.style.display="")},toggle:function(e){e=P.isString(e)?P.get(e):e;e&&(e.style.display===I?e.style.display="":e.style.display=I)},empty:function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}}),(z=(Ee=T).Lib).colorStrToInt=function(e){var t,n="0x";if(/^(rgb|RGB)/.test(e)){for(var r=e.replace(/[^\d,.]/g,"").split(","),o=0;o<3;++o)n+=t=1==(t=Number(r[o]).toString(16)).length?"0"+t:t;4==r.length?n+=t=1==(t=Math.round(255*Number(r[o])).toString(16)).length?"0"+t:t:n+="ff"}else if("transparent"==e)n+="00000000";else if(/^#[0-9a-fA-f]{6}$/.test(e))n+=e.replace(/#/,"")+"ff";else if(/^#[0-9a-fA-f]{3}$/.test(e)){for(o=0;o<3;++o)n+=e[o]+e[o];n+="ff"}else n="-1";return Number(n)},z.IntToColorStr=function(e){if(4294967295<e||e<0)return null;var t;if(Ee.navInfoSync.bHTML5Edition)t="rgba("+Math.floor(e/16777216)+","+Math.floor(e/65536)%256+","+Math.floor(e/256)%256+","+e%256/255+")";else if(e%256==0)t="transparent";else{for(t=Math.floor(e/256).toString(16);6!=t.length;)t="0"+t;t="#"+t}return t},b=(xe=T).Lib,w=b.doc,M=w&&w.documentElement,C=w.getElementsByTagName("head")[0]||M,v=w.createElement("script").readyState?function(t,n){var r=t.onreadystatechange;t.onreadystatechange=function(){var e=t.readyState;"loaded"===e||"complete"===e?(t.onreadystatechange=null,r&&r(),n.call(this,!0)):"loading"!==e&&n.call(this,!1)}}:function(e,t){e.addEventListener("load",t,!1),e.addEventListener("error",t,!1)},b.scriptOnload=v,b.getScript=function(e,t,n){var r;if(b.isFunction(n)||(n=function n(){}),b.isString(e)&&""!=e)return r=w.createElement("script"),e=["",e].join(""),r.src=e,t&&(r.async=!0),r.charset="utf-8",v(r,n),C.insertBefore(r,C.firstChild),r;n()},b.getScripts=function(e,t,n){var r,o;b.isArray(e)?(r=e.length,o=function o(e){e?r--:n(),r<=0&&n("ok")},r<=0?n("ok"):b.each(e,function(e){b.getScript(e,t,o)})):n()},b.getCss=function(e,t){var n;if(b.isFunction(t)||(t=!1),b.isString(e)&&""!=e)return(n=w.createElement("link")).href=e,n.rel="stylesheet",n.async=!0,t&&v(n,t),C.insertBefore(n,C.firstChild),n;t&&t()},b.getAllCss=function(e,t){var n,r;b.isArray(e)?(n=e.length,r=function r(e){e?n--:t(),n<=0&&t("ok")},b.each(e,function(e){b.getCss(e,r)})):t()},b.addScript=function(e){var t,n=e.body;b.isString(n)&&""!=n&&((t=w.createElement("script")).charset="utf-8",xe.navInfoSync.bIE?t.text=n:t.appendChild(w.createTextNode(n)),e.language?t.language=e.language:t.language="javascript",e.type?t.type=e.type:t.type="text/javascript",C.insertBefore(t,C.firstChild))},b.addJS=function(e){b.addScript({body:e})},b.addVBS=function(e){b.addScript({body:e,language:"vbscript",type:"text/vbscript"})},R(T),N(T),m=(Se=T).Lib,g=function g(e){return Se.navInfoSync.bGecko&&"mousewheel"===e?"DOMMouseScroll":e},m.mix(m,{addEventListener:function(e,t,n){t=g(t);e&&e.addEventListener(t,n,!1)},removeEventListener:function(e,t,n){t=g(t);e&&e.removeEventListener(t,n,!1)},stopPropagation:function(e){e=e||m.win.event;e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0},fireEvent:function(e,t){var n=m.win.document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent&&t.dispatchEvent(n)}}),z=(z=T).Lib,p={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]},z.base64={UTF16ToUTF8:function(e){for(var t=[],n=e.length,r=0;r<n;r++){var o,i,s=e.charCodeAt(r);0<s&&s<=127?t.push(e.charAt(r)):128<=s&&s<=2047?(o=192|s>>6&31,i=128|63&s,t.push(String.fromCharCode(o),String.fromCharCode(i))):2048<=s&&s<=65535&&(o=224|s>>12&15,i=128|s>>6&63,s=128|63&s,t.push(String.fromCharCode(o),String.fromCharCode(i),String.fromCharCode(s)))}return t.join("")},UTF8ToUTF16:function(e){for(var t,n,r,o=[],i=e.length,s=0;s<i;s++)0==((t=e.charCodeAt(s))>>7&255)?o.push(e.charAt(s)):6==(t>>5&255)?(r=(31&t)<<6|63&(n=e.charCodeAt(++s)),o.push(String.fromCharCode(r))):14==(t>>4&255)&&(r=(255&(t<<4|(n=e.charCodeAt(++s))>>2&15))<<8|((3&n)<<6|63&e.charCodeAt(++s)),o.push(String.fromCharCode(r)));return o.join("")},encode:function(e){for(var t,n,r,o=this.UTF16ToUTF8(e),i=[],s=0,a=o.length;s<a;){if(t=255&o.charCodeAt(s++),s==a){i.push(p.encodeChars.charAt(t>>2)),i.push(p.encodeChars.charAt((3&t)<<4)),i.push("==");break}if(n=o.charCodeAt(s++),s==a){i.push(p.encodeChars.charAt(t>>2)),i.push(p.encodeChars.charAt((3&t)<<4|(240&n)>>4)),i.push(p.encodeChars.charAt((15&n)<<2)),i.push("=");break}r=o.charCodeAt(s++),i.push(p.encodeChars.charAt(t>>2)),i.push(p.encodeChars.charAt((3&t)<<4|(240&n)>>4)),i.push(p.encodeChars.charAt((15&n)<<2|(192&r)>>6)),i.push(p.encodeChars.charAt(63&r))}return i.join("")},encodeArray:function(e){for(var t,n,r,o=[],i=0,s=e.length;i<s;){if(t=255&e[i++],i==s){o.push(p.encodeChars.charAt(t>>2)),o.push(p.encodeChars.charAt((3&t)<<4)),o.push("==");break}if(n=255&e[i++],i==s){o.push(p.encodeChars.charAt(t>>2)),o.push(p.encodeChars.charAt((3&t)<<4|(240&n)>>4)),o.push(p.encodeChars.charAt((15&n)<<2)),o.push("=");break}r=255&e[i++],o.push(p.encodeChars.charAt(t>>2)),o.push(p.encodeChars.charAt((3&t)<<4|(240&n)>>4)),o.push(p.encodeChars.charAt((15&n)<<2|(192&r)>>6)),o.push(p.encodeChars.charAt(63&r))}return o.join("")},decode:function(e,t){for(var n,r,o,i,s=[],a=0,c=e.length;a<c;){for(;n=p.decodeChars[255&e.charCodeAt(a++)],a<c&&-1==n;);if(-1==n)break;for(;r=p.decodeChars[255&e.charCodeAt(a++)],a<c&&-1==r;);if(-1==r)break;t?s.push(n<<2|(48&r)>>4):s.push(String.fromCharCode(n<<2|(48&r)>>4));do{if(61==(o=255&e.charCodeAt(a++)))return t?s:this.UTF8ToUTF16(s.join(""))}while(o=p.decodeChars[o],a<c&&-1==o);if(-1==o)break;t?s.push((15&r)<<4|(60&o)>>2):s.push(String.fromCharCode((15&r)<<4|(60&o)>>2));do{if(61==(i=255&e.charCodeAt(a++)))return t?s:this.UTF8ToUTF16(s.join(""))}while(i=p.decodeChars[i],a<c&&-1==i);if(-1==i)break;t?s.push((3&o)<<6|i):s.push(String.fromCharCode((3&o)<<6|i))}return t?s:this.UTF8ToUTF16(s.join(""))}},z.utf8={fromUTF16:function(e){for(var t,n=[],r=0,o=e.length;r<o;)1<=(t=e.charCodeAt(r))&&t<=127?n.push(e.charAt(r)):(2047<t?(n.push(String.fromCharCode(224|t>>12&15)),n.push(String.fromCharCode(128|t>>6&63))):n.push(String.fromCharCode(192|t>>6&31)),n.push(String.fromCharCode(128|t>>0&63))),r++;return n.join("")},toUTF16:function(e){for(var t,n,r,o=[],i=0,s=e.length;i<s;)switch((t=e.charCodeAt(i++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o.push(e.charAt(i-1));break;case 12:case 13:n=e.charCodeAt(i++),o.push(String.fromCharCode((31&t)<<6|63&n));break;case 14:n=e.charCodeAt(i++),r=e.charCodeAt(i++),o.push(String.fromCharCode((15&t)<<12|(63&n)<<6|(63&r)<<0))}return o.join("")}},y="undefined"!=typeof self?self:r.g,(Oe.prototype=new Error).name="InvalidCharacterError",z.btoa=y.btoa?function(e){return y.btoa(e)}:function(e){for(var t,n,r=String(e),o=0,i=p.encodeChars,s="",o=0,i=p.encodeChars,s="";r.charAt(0|o)||(i="=",o%1);s+=i.charAt(63&t>>8-o%1*8)){if(255<(n=r.charCodeAt(o+=.75)))throw new Oe("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return s},z.atob=y.atob?function(e){return y.atob(e)}:function(e){var t,n,r=String(e).replace(/[=]+$/,""),o=0,i=0,s="";if(r.length%4==1)throw new Oe("'atob' failed: The string to be decoded is not correctly encoded.");for(i=o=0,s="";n=r.charAt(i++);~n&&(t=o%4?64*t+n:n,o++%4)&&(s+=String.fromCharCode(255&t>>(-2*o&6))))n=p.encodeChars.indexOf(n);return s},h=T.Lib,A={queue:[],doNextStarted:!1,timer:null,pushToDo:function(e,t,n){A.queue.push({obj:e,method:t,args:n})},doNext:function(){if(!A.doNextStarted)return clearTimeout(A.timer),void(A.timer=null);if(0==A.queue.length)A.timer=setTimeout(A.doNext,500);else{var e=A.queue[0],t=e.obj,n=e.method,e=e.args;if(A.queue.splice(0,1),t&&h.isFunction(t[n])){var r,o,i=!1;2<e.length&&(r=e[e.length-2],o=e[e.length-1],h.isFunction(r)&&h.isFunction(o)&&(e[e.length-2]=function(){try{r.apply(t,arguments)}catch(e){}A.timer=setTimeout(A.doNext,0)},e[e.length-1]=function(){try{o.apply(t,arguments)}catch(e){}A.timer=setTimeout(A.doNext,0)},i=!0));try{t[n].apply(t,e)}catch(s){}i||(A.timer=setTimeout(A.doNext,0))}else if(null===t&&h.isFunction(n)){try{n.apply(null,e)}catch(a){}A.timer=setTimeout(A.doNext,0)}else h.log("not invoke a function: "+n),A.timer=setTimeout(A.doNext,0)}},start:function(){A.doNextStarted||(A.doNextStarted=!0,A.timer=setTimeout(A.doNext,0))},stop:function(){clearTimeout(A.timer),A.doNextStarted=!1,A.queue=[]}},h.asyncQueue=A,oe(T),l=T.Lib,Pe=l.doc,l.Events={registedClass:[],registedObjs:[]},Ie=function Ie(e){var n=e||window.event,r=!0;return l.each(l.Events.registedObjs,function(t){l.each(l.Events.registedClass,function(e){if(t instanceof e&&t.bFocus&&t.handlerKeyDown&&!(r=t.handlerKeyDown(n)))return!1})}),r},l.ready(function(){l.addEventListener(Pe.documentElement,"keydown",Ie)}),l.mix(l,{getWheelDelta:function(e){var t,n=(e=e||window.event).wheelDelta,e=e.detail;return n&&(t=n/120),t=e?-(e%3==0?e/3:e):t}}),d={LEFT:0,MIDDLE:1,RIGHT:2},l.EnumMouseButton=d,l.detectButton=function(e){e=e||window.event;return null==e.which?e.button<2?d.LEFT:4==e.button?d.MIDDLE:d.RIGHT:e.which<2?d.LEFT:2==e.which?d.MIDDLE:d.RIGHT},T.Lib.switchEvent=function(e){return null==(e=e||window.event).which?e.which=e.button<2?1:4==e.button?2:3:e.which=e.which<2?1:2==e.which?2:3,e},de(T.Lib),pe(T),M=T.Lib,we=M.win,Ce=M.doc,ve=isNaN,M.DOM={getOffset:function(e,t,n){e=e||we.event;for(var r,o,i=n||e.target,s=0,a=0,n=0,c=0,u=!1;i&&!ve(i.offsetLeft)&&!ve(i.offsetTop);)o=i.scrollLeft,r=i.scrollTop,"BODY"===i.tagName?u?r=o=0:(o|=Ce.documentElement.scrollLeft,r|=Ce.documentElement.scrollTop):"fixed"===i.style.position&&(u=!0),s+=i.offsetLeft-o,a+=i.offsetTop-r,i=i.offsetParent;return t&&(n=t.Left,c=t.Top),{x:s=e.clientX-s-n,y:a=e.clientY-a-c}},getElDimensions:function(e,t){var n;return e?(n=e.style.display,e.style.display="",t=t?{offsetTop:e.offsetTop,offsetLeft:e.offsetLeft,offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight}:{clientTop:e.clientTop,clientLeft:e.clientLeft,clientWidth:e.clientWidth||(parseInt(e.style.width)?parseInt(e.style.width):0),clientHeight:e.clientHeight||(parseInt(e.style.height)?parseInt(e.style.height):0)},e.style.display=n,t):{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}},M.getElDimensions=M.DOM.getElDimensions,ye(T),!function(e){var i,c,u,l,f=window.document,d=(t=[]).push,t=t.slice,h=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,n=function n(){c()};try{d.apply(t.call(f.childNodes),f.childNodes)}catch(o){return}function r(e,t,n,r){var o,i,s=t&&t.ownerDocument,a=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!r&&((t?t.ownerDocument||t:f)!==u&&c(t),t=t||u,11!==a&&(i=h.exec(e))))if(r=i[1]){if(9===a){if(!(o=t.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(s&&(o=s.getElementById(r))&&l(t,o)&&o.id===r)return n.push(o),n}else{if(i[2])return d.apply(n,t.getElementsByTagName(e)),n;if((r=i[3])&&t.getElementsByClassName)return d.apply(n,t.getElementsByClassName(r)),n}return n}c=r.setDocument=function(e){var e=e?e.ownerDocument||e:f;return e!==u&&9===e.nodeType&&e.documentElement&&((u=e).documentElement,f!==u&&(e=u.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",n,!1):e.attachEvent&&e.attachEvent("onunload",n)),l=function l(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1}),u},r.contains=function(e,t){return(e.ownerDocument||e)!==u&&c(e),l(e,t)},r.error=function(e){throw new Error("Syntax error: "+e)},i=r.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},c(),e.support={},e.sizzle=r}(T.Lib),me(T.Lib)}function Oe(e){this.message=e}function Re(e){var t=this,n=t.constructor;for(t.__attrs={},t.__attrVals={},t.userConfig=e;n;)t.addAttrs(n.ATTRS),n=n.superclass?n.superclass.constructor:null;x.mix(t.__attrs,e)}var Ne=e.Dynamsoft=T;return D.default},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Dynamsoft=t():e.Dynamsoft=t();
(function(b){var a=b.DWT||(b.DWT={});if(!b.Lib)b.Lib={};a.initQueue=[];b.initOrder=b.initOrder||[];b.unloadQueue=b.unloadQueue||[];if(!window['Dynamsoft'])window['Dynamsoft']=b})(Dynamsoft);
Dynamsoft.DWT.IfUseActiveXForIE10Plus=false;
(function(factory){if(typeof exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define(factory)}else{var glob;try{glob=window}catch(e){glob=self}glob.SparkMD5=factory()}})(function(undefined){"use strict";var add32=function(a,b){return a+b&4294967295},hex_chr=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32(a<<s|a>>>32-s,b)}function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a+=(b&c|~b&d)+k[0]-680876936|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[1]-389564586|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[2]+606105819|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[3]-1044525330|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[4]-176418897|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[5]+1200080426|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[6]-1473231341|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[7]-45705983|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[8]+1770035416|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[9]-1958414417|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[10]-42063|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[11]-1990404162|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[12]+1804603682|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[13]-40341101|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[14]-1502002290|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[15]+1236535329|0;b=(b<<22|b>>>10)+c|0;a+=(b&d|c&~d)+k[1]-165796510|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[6]-1069501632|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[11]+643717713|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[0]-373897302|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[5]-701558691|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[10]+38016083|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[15]-660478335|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[4]-405537848|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[9]+568446438|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[14]-1019803690|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[3]-187363961|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[8]+1163531501|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[13]-1444681467|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[2]-51403784|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[7]+1735328473|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[12]-1926607734|0;b=(b<<20|b>>>12)+c|0;a+=(b^c^d)+k[5]-378558|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[8]-2022574463|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[11]+1839030562|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[14]-35309556|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[1]-1530992060|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[4]+1272893353|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[7]-155497632|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[10]-1094730640|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[13]+681279174|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[0]-358537222|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[3]-722521979|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[6]+76029189|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[9]-640364487|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[12]-421815835|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[15]+530742520|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[2]-995338651|0;b=(b<<23|b>>>9)+c|0;a+=(c^(b|~d))+k[0]-198630844|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[7]+1126891415|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[14]-1416354905|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[5]-57434055|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[12]+1700485571|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[3]-1894986606|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[10]-1051523|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[1]-2054922799|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[8]+1873313359|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[15]-30611744|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[6]-1560198380|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[13]+1309151649|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[4]-145523070|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[11]-1120210379|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[2]+718787259|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[9]-343485551|0;b=(b<<21|b>>>11)+c|0;x[0]=a+x[0]|0;x[1]=b+x[1]|0;x[2]=c+x[2]|0;x[3]=d+x[3]|0}function md5blk(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24)}return md5blks}function md5blk_array(a){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+(a[i+3]<<24)}return md5blks}function md51(s){var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)))}s=s.substring(i-64);length=s.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function md51_array(a){var n=a.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk_array(a.subarray(i-64,i)))}a=i-64<n?a.subarray(i-64):new Uint8Array(0);length=a.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=a[i]<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function rhex(n){var s="",j;for(j=0;j<4;j+=1){s+=hex_chr[n>>j*8+4&15]+hex_chr[n>>j*8&15]}return s}function hex(x){var i;for(i=0;i<x.length;i+=1){x[i]=rhex(x[i])}return x.join("")}if(hex(md51("hello"))!=="5d41402abc4b2a76b9719d911017c592"){add32=function(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}}if(typeof ArrayBuffer!=="undefined"&&!ArrayBuffer.prototype.slice){(function(){function clamp(val,length){val=val|0||0;if(val<0){return Math.max(val+length,0)}return Math.min(val,length)}ArrayBuffer.prototype.slice=function(from,to){var length=this.byteLength,begin=clamp(from,length),end=length,num,target,targetArray,sourceArray;if(to!==undefined){end=clamp(to,length)}if(begin>end){return new ArrayBuffer(0)}num=end-begin;target=new ArrayBuffer(num);targetArray=new Uint8Array(target);sourceArray=new Uint8Array(this,begin,num);targetArray.set(sourceArray);return target}})()}function toUtf8(str){if(/[\u0080-\uFFFF]/.test(str)){str=unescape(encodeURIComponent(str))}return str}function utf8Str2ArrayBuffer(str,returnUInt8Array){var length=str.length,buff=new ArrayBuffer(length),arr=new Uint8Array(buff),i;for(i=0;i<length;i+=1){arr[i]=str.charCodeAt(i)}return returnUInt8Array?arr:buff}function arrayBuffer2Utf8Str(buff){return String.fromCharCode.apply(null,new Uint8Array(buff))}function concatenateArrayBuffers(first,second,returnUInt8Array){var result=new Uint8Array(first.byteLength+second.byteLength);result.set(new Uint8Array(first));result.set(new Uint8Array(second),first.byteLength);return returnUInt8Array?result:result.buffer}function hexToBinaryString(hex){var bytes=[],length=hex.length,x;for(x=0;x<length-1;x+=2){bytes.push(parseInt(hex.substr(x,2),16))}return String.fromCharCode.apply(String,bytes)}function SparkMD5(){this.reset()}SparkMD5.prototype.append=function(str){this.appendBinary(toUtf8(str));return this};SparkMD5.prototype.appendBinary=function(contents){this._buff+=contents;this._length+=contents.length;var length=this._buff.length,i;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk(this._buff.substring(i-64,i)))}this._buff=this._buff.substring(i-64);return this};SparkMD5.prototype.end=function(raw){var buff=this._buff,length=buff.length,i,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff.charCodeAt(i)<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.prototype.reset=function(){this._buff="";this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}};SparkMD5.prototype.setState=function(state){this._buff=state.buff;this._length=state.length;this._hash=state.hash;return this};SparkMD5.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length};SparkMD5.prototype._finish=function(tail,length){var i=length,tmp,lo,hi;tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(this._hash,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=this._length*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(this._hash,tail)};SparkMD5.hash=function(str,raw){return SparkMD5.hashBinary(toUtf8(str),raw)};SparkMD5.hashBinary=function(content,raw){var hash=md51(content),ret=hex(hash);return raw?hexToBinaryString(ret):ret};SparkMD5.ArrayBuffer=function(){this.reset()};SparkMD5.ArrayBuffer.prototype.append=function(arr){var buff=concatenateArrayBuffers(this._buff.buffer,arr,true),length=buff.length,i;this._length+=arr.byteLength;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk_array(buff.subarray(i-64,i)))}this._buff=i-64<length?new Uint8Array(buff.buffer.slice(i-64)):new Uint8Array(0);return this};SparkMD5.ArrayBuffer.prototype.end=function(raw){var buff=this._buff,length=buff.length,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff[i]<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.ArrayBuffer.prototype.getState=function(){var state=SparkMD5.prototype.getState.call(this);state.buff=arrayBuffer2Utf8Str(state.buff);return state};SparkMD5.ArrayBuffer.prototype.setState=function(state){state.buff=utf8Str2ArrayBuffer(state.buff,true);return SparkMD5.prototype.setState.call(this,state)};SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy;SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish;SparkMD5.ArrayBuffer.hash=function(arr,raw){var hash=md51_array(new Uint8Array(arr)),ret=hex(hash);return raw?hexToBinaryString(ret):ret};return SparkMD5});
/******/
var r={7682:function(e,t,r){e.exports=r(2626)},1445:function(e,t,r){e.exports=r(4122)},8066:function(e,t,r){e.exports=r(1086)},3701:function(e,t,r){e.exports=r(7895)},699:function(e,t,r){e.exports=r(4442)},5683:function(e,t,r){e.exports=r(9447)},677:function(e,t,r){e.exports=r(5376)},1006:function(e,t,r){e.exports=r(6769)},5238:function(e,t,r){e.exports=r(1493)},3662:function(e,t,r){e.exports=r(1777)},1614:function(e,t,r){e.exports=r(5319)},9104:function(e,t,r){e.exports=r(5425)},2825:function(e,t,r){e.exports=r(2740)},189:function(e,t,r){e.exports=r(6094)},4341:function(e,t,r){e.exports=r(3685)},4889:function(e,t,r){e.exports=r(4303)},9356:function(e,t,r){e.exports=r(3799)},9542:function(e,t,r){e.exports=r(5122)},5005:function(e,t,r){e.exports=r(1645)},7711:function(e,t,r){e.exports=r(3103)},9798:function(e,t,r){e.exports=r(9531)},3535:function(e,t,r){e.exports=r(856)},6019:function(e,t,r){e.exports=r(1490)},4579:function(e,t,r){e.exports=r(4803)},1446:function(e,t,r){e.exports=r(6600)},3882:function(e,t,r){e.exports=r(9759)},9927:function(e,t,r){e.exports=r(7740)},6944:function(e,t,r){e.exports=r(8714)},373:function(e,t,r){e.exports=r(2790)},3887:function(e,t,r){r.d(t,{Ho:function(){return i}});var t=r(5238),n=r.n(t);function i(e){var t=Dynamsoft.DWT.EnumDWT_ImageType,r=e;return(e instanceof ArrayBuffer||e instanceof Array)&&(r=new Uint8Array(n()(e).call(e,0,12))),37==(e=r)[0]&&80==e[1]&&68==e[2]&&70==e[3]?t.IT_PDF:73==(e=r)[0]&&73==e[1]&&42==e[2]&&0==e[3]||77==e[0]&&77==e[1]&&0==e[2]&&42==e[3]?t.IT_TIF:137==(e=r)[0]&&80==e[1]&&78==e[2]&&71==e[3]?t.IT_PNG:255==(e=r)[0]&&216==e[1]?t.IT_JPG:66==(e=r)[0]&&77==e[1]?t.IT_BMP:0==(e=r)[0]&&0==e[1]&&0==e[2]&&12==e[3]&&106==e[4]&&80==e[5]&&32==e[6]&&32==e[7]||255==e[0]&&79==e[1]&&255==e[2]&&81==e[3]?t.IT_J2K:t.IT_PNG}},9158:function(e,t,r){function n(e){return e}r.d(t,{T:function(){return n}})},668:function(V,e,t){t.d(e,{KX:function(){return m},ME:function(){return A},zW:function(){return g}});var r=0,n=1,i=2,o=3,a=4,s=14,u=3001,c=3002,l=3003,d=3004,h=3005,g=3006,f=3007,m=5001,_=4001,p=4002,I=4003,D="3001",v="3002",b="3003",y="3004",T="3005",S="3006",w="3007",C="3011",E="3012",M="3013",P="3014",W="3015",x="3016",k="5001",F="4001",L="4002",N="4003";function A(e){switch(e){case r:return C;case n:return E;case i:return P;case o:return M;case a:return W;case s:return x;case u:return D;case c:return v;case l:return b;case d:return y;case h:return T;case g:return S;case f:return w;case m:return k;case _:return F;case p:return L;case I:return N}return""}},6870:function(){Dynamsoft.Lib.domReady(function(){var e=document.createElement("style"),t=["dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-backdrop{position:fixed;background:rgba(128,128,128,0.1);top:0;bottom:0;left:0;right:0;z-index:-99999999;}.dynamsoft-dwt-dialogProgress{width:330px;background:#FFF}.dynamsoft-finalMessage{margin:0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:7px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{width:290px;height:290px;margin:auto;color:#CCC;border-width:1px;background:#FFF}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 50px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");e.type="text/css";try{e.appendChild(document.createTextNode(t))}catch(r){e.styleSheet.cssText=t}document.body.appendChild(e)})},9032:function(){var o=Dynamsoft.Lib;o.detect.showMask=function(e){o.detect.bMaskShow=!0,Dynamsoft.DWT.ScanDirectly||(o.isFunction(Dynamsoft.OnWebTwainPreExecuteCallback)?Dynamsoft.OnWebTwainPreExecuteCallback():o.detect.OnWebTwainPreExecute(Dynamsoft.DWT.IfConfineMaskWithinTheViewer,e))},o.detect.OnWebTwainPreExecute=function(e,t){var r;if(e&&(t?r=t._containerElement:0<Dynamsoft.DWT.Containers.length&&Dynamsoft.DWT.Containers[0].ContainerId&&(r=Dynamsoft.Lib.get(Dynamsoft.DWT.Containers[0].ContainerId)),r)){var n=r.getBoundingClientRect(),i=r.firstChild;if(i){for(;i;){if(o.isFunction(i.getBoundingClientRect)){n=i.getBoundingClientRect();break}i=i.nextSibling}r=i}}(n==undefined||1<Dynamsoft.DWT.Containers.length||1==Dynamsoft.DWT.Containers.length&&(0==n.width||0==n.height))&&(e=!1,r=null);t=e?{confined:e,wrapperEl:r}:{};o.showMask(t)},o.detect.hideMask=function(){o.detect.bMaskShow=!1,Dynamsoft.DWT.ScanDirectly||(o.isFunction(Dynamsoft.OnWebTwainPostExecuteCallback)?Dynamsoft.OnWebTwainPostExecuteCallback():o.detect.OnWebTwainPostExecute())},o.detect.OnWebTwainPostExecute=o.hideMask},4393:function(){var e=Dynamsoft.Lib;e.install={_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:!1},e.install._strNonInstallDIV=['<div style="text-align:center;" id="',e.install._divDWTNonInstallContainerID,'"></div>'].join("")},5775:function(x,e,t){t.r(e);var e=t(3662),V=t.n(e),f=t(1695),e=t(3535),i=t.n(e),s=t(8420),k=t(7344);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var F=t(189),L=t(4341),N=t(9542),U=t(1445);function G(e,t){var r;return(G=N?U(r=N).call(r):function G(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=F(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),L(e,"prototype",{writable:!1}),t&&G(e,t)}var j=t(9623);function z(e,t){if(t&&("object"===(0,j.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}var Z=t(4889);function o(e){var t;return(o=N?U(t=Z).call(t):function o(e){return e.__proto__||Z(e)})(e)}e=t(4845);function J(e,t,r){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+r+" private field on non-instance")}function c(e,t){var t=J(e,t,"get");return e=e,(t=t).get?t.get.call(e):t.value}var r=t(6944),r=t.n(r),n=t(373),n=t.n(n);function X(e,t,r){t=J(e,t,"set");if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var a=t(5238),Y=t.n(a);function K(e,t,r){var n=e;if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,r)}var l=new(r()),Q=function(){function e(){(0,s.Z)(this,e),K(this,l,{writable:!0,value:{}})}return(0,k.Z)(e,[{key:"fire",value:function(e){var n,i=this;e=e.toLowerCase(),n=Y()(Array.prototype).call(arguments,1),f.D.each(c(i,l)[e]||[],function(e){var t=e.f,e=e.c||i;try{t.apply(e,n)}catch(r){f.D.log(r)}})}},{key:"on",value:function(e,t,r){e=e.toLowerCase(),c(this,l)[e]=c(this,l)[e]||[],c(this,l)[e].push({f:t,c:r})}},{key:"off",value:function(e,t,r){if(e&&t){e=e.toLowerCase();for(var n=c(this,l)[e]||[],i=n.length-1;0<=i;i--)n[i]===t&&V()(n).call(n,i,1)}else X(this,l,{})}}]),e}(),a=t(7711),A=t.n(a);function q(r){var n=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(r);return z(this,n?(e=o(this).constructor,i()(t,arguments,e)):t.apply(this,arguments))}}function d(e,t){$(e,t),t.add(e)}function $(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(e,t,r){if(t.has(e))return r;throw new TypeError("attempted to get private field on non-instance")}var h="[bio]: ",a=f.D.win,ee=a&&a.FormData,g=new(r()),te=new(n()),re=new(n()),ne=new(n()),ie=new(n()),_=new(n()),p=new(n()),I=new(n()),oe=new(n()),ae=new(n()),D=new(n()),v=function(){H(a,Q);var o=q(a);function a(e){var t,r,n,i;return(0,s.Z)(this,a),d(u(t=o.call(this)),D),d(u(t),ae),d(u(t),oe),d(u(t),I),d(u(t),p),d(u(t),_),d(u(t),ie),d(u(t),ne),d(u(t),re),d(u(t),te),r=u(t),i={writable:!0,value:{}},$(r,n=g),n.set(r,i),f.D.mix(c(u(t),g),{action:"",data:{},bChunkedSendData:!0,blockSize:0,ajaxConfig:{value:{},type:"post",processData:!1,cache:!1,dataType:"text",async:!0,contentType:!1,retry:0,headers:{"X-Requested-With":!1}},ajax:"",formData:"",CORS:!1,bOnlyEmptyIsOK:!0}),f.D.mix(c(u(t),g),e),m(u(t),te,se).call(u(t)),t}return(0,k.Z)(a,[{key:"get",value:function(e){return e in c(this,g)?c(this,g)[e]:""}},{key:"set",value:function(e,t){e in c(this,g)&&(c(this,g)[e]=t)}},{key:"uploadToServer",value:function(e){var t=this,t=(0<t.get("blockSize")&&e&&0<e.size?m(t,ie,le):m(t,re,ue)).call(t,e);return t}},{key:"uploadFilesToServer",value:function(e){return m(this,ne,ce).call(this,e)}},{key:"abort",value:function(){var e=this.get("ajax");return f.D.isObject(e)?(e.abort(),this.set("ajax",!1)):f.D.log(h+"abort(), the value of io invalid!"),this}},{key:"setRequestHeader",value:function(e,t){var r=this.get("ajaxConfig");return r.headers[e]=t,this.set("ajaxConfig",r),t}}]),a}();function se(){this.get("CORS");var e=this.get("ajaxConfig");return f.D.mix(e,{xhrFields:{withCredentials:!1}}),e}function ue(i){var o=this,e=o.get("ajaxConfig"),a=!0,r=function r(e){var t="";e&&(f.D.isArray(e)&&1<e.length?t=e[0]:f.D.isString(e)&&(t=e)),t=m(o,D,_e).call(o,t),o.fire(v.event.SUCCESS,t)},s=function s(e,t,r){var n;a=!1,e=e&&f.D.isArray(e)&&2<e.length?(n=e[1],e[2]):(n=t,r),m(o,I,ge).call(o,e,n,i)},t=(m(o,_,de).call(o),i&&0<i.size&&(m(o,p,he).call(o,i),f.D.isString(i.name)&&""!=i.name?o.name=i.name:o.name=i.fileName),f.D.mix(e,{data:o.get("formData"),url:o.get("action"),beforeSend:function(e,t,r){e.upload.addEventListener("progress",function(e){o.fire(v.event.PROGRESS,{loaded:e.loaded,total:e.total,name:o.name})},!1)}}),f.D.mix(e,{method:"POST",onSuccess:r,onError:s}),f.D.ajax(e));return o.set("formData",null),e.async?(o.set("ajax",t),!0):(o.set("ajax",!1),a)}function ce(i){var o=this,e=o.get("ajaxConfig"),a=!0,s=[],r=function r(e){var t="";s=[],e&&(f.D.isArray(e)&&1<e.length?t=e[0]:f.D.isString(e)&&(t=e)),t=m(o,D,_e).call(o,t),o.fire(v.event.SUCCESS,t)},u=function u(e,t,r){var n;a=!1,s=[],e=e&&f.D.isArray(e)&&2<e.length?(n=e[1],e[2]):(n=t,r),m(o,I,ge).call(o,e,n,i)},t=(m(o,_,de).call(o),f.D.each(i,function(e){e&&0<e.size?(m(o,p,he).call(o,e),f.D.isString(e.name)&&""!=e.name?s.push(e.name):s.push(e.fileName)):s.push("")}),f.D.mix(e,{data:o.get("formData"),url:o.get("action"),beforeSend:function(e,t,r){e.upload.addEventListener("progress",function(e){o.fire(v.event.PROGRESS,{loaded:e.loaded,total:e.total,name:""})},!1)}}),f.D.mix(e,{method:"POST",onSuccess:r,onError:u}),o.name="",f.D.ajax(e));return o.set("formData",null),e.async?(o.set("ajax",t),!0):(o.set("ajax",!1),a)}function le(i){var o=this,a=o.get("ajaxConfig"),s=function s(e){var t="";e&&(f.D.isArray(e)&&1<e.length?t=e[0]:f.D.isString(e)&&(t=e)),t=m(o,D,_e).call(o,t),o.fire(v.event.SUCCESS,t)},u=function u(e,t,r){var n,e=e&&f.D.isArray(e)&&2<e.length?(n=e[1],e[2]):(n=t,r);m(o,I,ge).call(o,e,n,i)},c=(f.D.mix(a,{url:o.get("action")}),i.size),l=0,d=o.get("blockSize")||c,h=Y()(i)||i.webkitSlice||i.mozSlice;!function g(e){var t=h.call(i,l,l+d,i.type),n=t.size,r=i.name;m(o,ae,me).call(o,l,n,c),m(o,_,de).call(o),e&&o.set("data",[]),f.D.isString(r)&&""!=r||(r=i.fileName),t.name=r,o.name=r,m(o,p,he).call(o,t),f.D.mix(a,{data:o.get("formData")}),f.D.mix(a,{method:"POST",onSuccess:function(e,t,r){l=m(o,oe,fe).call(o,r)||l+n,o.fire(v.event.PROGRESS,{loaded:l,total:c,name:o.name}),l<c?g(!1):s(e)},onError:u}),f.D.ajax(a),o.set("formData",null)}(!0)}function de(){var r,e=this.get("data");if(ee)if(e instanceof ee)this.set("formData",e);else{r=new ee;try{f.D.each(e,function(e,t){r.append(t,e)}),this.set("formData",r)}catch(t){f.D.log(h+"something error when reset FormData.")}}else f.D.log(h+"the browser does not support ajax.")}function he(e){if(!f.D.isObject(e))return f.D.log(h+"_addFileData(), file parameter invalid!"),!1;var t=this.get("formData"),r=e.name,n=(n=e.remoteFilename)||"RemoteFile";return t.append(n,e,r),this.set("formData",t),t}function ge(e,t,r){var n=v.status.ERROR,t={status:n,msg:t,response:!1,name:this.name};e&&(t.httpStatus=e.status,t.response=e.responseText),this.fire(n,t)}function fe(e){e=e.getResponseHeader("Range"),e=e&&e.split("-"),e=e&&1<e.length&&A()(e[1],10);return e&&e+1}function me(e,t,r){e="bytes "+e+"-"+(e+t-1)+"/"+r;return this.get("ajaxConfig").headers["Content-Range"]=e}function _e(e){var t,r,n,i,o=!1,a=this.name,s=v.status.SUCCESS,u=v.event.ERROR;if(f.D.log("Response from server: "+e),!this.get("bOnlyEmptyIsOK"))return{status:s,msg:!1,json:!1,response:e,name:a};if(f.D.isUndefined(e)||""===e)i={status:s,msg:!1,json:!1,response:"",name:a};else if(f.D.isString(e)){try{for(t=0;t<e.length&&!(10<t);t++){if("{"==(r=e[t])){o=!0;break}if(" "!=r&&"\r"!=r&&"\n"!=r&&"\t"!=r)break}o&&(i=1==(n=f.D.parse(e)).status?{status:s,msg:!1,json:n,response:e,name:a}:{status:u,msg:!1,json:n,response:e,name:a})}catch(c){o=!1,f.D.log(c)}o||(i=""==String(e).replace(/( |\t|\r|\n)/g,"")?{status:s,msg:!1,json:!1,response:e,name:a}:{status:u,msg:!1,json:!1,response:e,name:a})}else i={status:s,msg:!1,json:!1,response:"",name:a};return i}function pe(r){var n=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(r);return z(this,n?(e=o(this).constructor,i()(t,arguments,e)):t.apply(this,arguments))}}function b(e,t){Ie(e,t),t.add(e)}function Ie(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t,r){if(t.has(e))return r;throw new TypeError("attempted to get private field on non-instance")}(0,e.Z)(v,"event",{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}),(0,e.Z)(v,"status",{SUCCESS:"success",ERROR:"error"});var T=new(r()),De=new(n()),ve=new(n()),be=new(n()),ye=new(n()),S=function(){H(a,Q);var o=pe(a);function a(e){var t,r,n,i;return(0,s.Z)(this,a),b(u(t=o.call(this)),ye),b(u(t),be),b(u(t),ve),b(u(t),De),r=u(t),i={writable:!0,value:{}},Ie(r,n=T),n.set(r,i),f.D.mix(c(u(t),T),{action:"",retry:0,timeout:0,CORS:!1,async:!0,dataType:"text",fileStatus:"",uploadType:!1,data:{},bOnlyEmptyIsOK:!0}),f.D.mix(c(u(t),T),e),y(u(t),ve,Se).call(u(t)),t}return(0,k.Z)(a,[{key:"get",value:function(e){return e in c(this,T)?c(this,T)[e]:""}},{key:"set",value:function(e,t){e in c(this,T)&&(c(this,T)[e]=t)}},{key:"upload",value:function(e){var t,r=this.get("uploadType");if(e){if(f.D.isArray(e))return r.uploadFilesToServer(e);if(f.D.isObject(e))return(t=e).size?(t.id||(t.id=f.D.guid("file-")),t.size&&(t.textSize=y(this,De,Te).call(this,t.size))):t.size=0,r.uploadToServer(t)}return r.uploadToServer(e)}},{key:"abort",value:function(){return this.get("uploadType").abort(),!0}},{key:"setRequestHeader",value:function(e,t){this.get("uploadType").setRequestHeader(e,t)}}]),a}();function Te(e){for(var t=-1;t++,99<(e/=1024)&&t<4;);return Math.max(e,.1).toFixed(1)+["KB","MB","GB","TB"][t]}function Se(){var e=this,t={action:e.get("action"),data:e.get("data"),CORS:e.get("CORS"),bOnlyEmptyIsOK:e.get("bOnlyEmptyIsOK")},t=new v(t),r=t.get("ajaxConfig");return r&&(r.dataType=e.get("dataType"),r.async=e.get("async"),r.retry=e.get("retry")),t.on(v.event.SUCCESS,y(e,ye,Ce),e),t.on(v.event.ERROR,y(e,ye,Ce),e),t.on(v.event.PROGRESS,y(e,be,we),e),e.set("uploadType",t),t}function we(e){this.fire(S.event.PROGRESS,e)}function Ce(e){var t=e.status,r=e.msg,n=this.get("file");f.D.mix(e,{file:n}),"success"===t?this.fire(S.event.SUCCESS,e):(!1!==r&&("abort"===r?f.D.mix(e,{canceled:!0}):"timeout"===r&&f.D.mix(e,{timeout:!0})),this.fire(S.event.ERROR,e))}(0,e.Z)(S,"event",{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"});var a=t(4579),Ee=t.n(a),r=(f.I.DWT.__innerCheckCertDate=function(e){var t,r=Date.parse(e+"T00:00:00");""==e||isNaN(r)||f.I.DWT.CheckCertExpired&&(t=(new Date).getTime(),r-864e5*f.I.DWT.CertificateConfig.UpdateDaysBeforeExpired<=t&&(f.D.isFunction(f.I.OnCertExpired)&&f.I.OnCertExpired(e),Ee()(function(){f.I.DWT.UpdateCert(f.I.DWT.CertificateConfig.URL,f.I.OnUpdateCertSuccess,f.I.OnUpdateCertFailure)},5e3)))},f.I.DWT.__innerUpdateCert=function(e,t,r,n){var i=f.I.dcp,o=function o(){f.D.isFunction(n)&&n()},t=t?i._getHttpPreUrl(i.detect.curPortIndex):i._getPreUrl(i.detect.curPortIndex),t=[t,i._getModuleName(),i._getModuleVer(),"/LoadZipFromBytes?type=",2,"&dsver=",i.getServiceVersion().join(""),"&ts=",f.D.now()].join("");f.D.ajax({method:"POST",url:t,async:!0,data:e,onSuccess:r,onError:o})},f.I.DWT.__innerReboot=function(e,t){var r=f.I.dcp,n=[r._getPreUrl(r.detect.curPortIndex),r._getModuleName(),r._getModuleVer(),"/admin?ts=",f.D.now()].join("");f.D.ajax({method:"POST",url:n,async:!0,data:'{"id":"'+(new Date).getTime().toString()+'","method":"Reboot","parameter":[],"version":"dwasm2_'+r._getModuleVer()+'"}',onSuccess:e,onError:t})},f.I.DWT.UpdateCert=function(e,t,r){var n=function n(e){f.I.DWT.__innerUpdateCert(e,!1,function(){f.I.DWT.CheckCertExpired=!1,f.D.isFunction(t)&&t()},function(){f.I.navInfoSync.bSSL?f.I.DWT.__innerUpdateCert(e,!0,t,r):f.D.isFunction(r)&&r()}),e=null};f.D.isString(e)&&""!=e?f.D.fetch(e,{mode:"cors",dataType:"arraybuffer"}).then(n,r):f.D.isFunction(r)&&r()},t(1614)),Me=t.n(r),w=Dynamsoft.Lib,n={Errors:{FilePathSyntaxIncorrect:function(e){e._errorCode=-3123,e._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(e,t){return w.isString(t)&&0!=t.length?!(Me()(w).call(w,t,"http://")||Me()(w).call(w,t,"https://")||Me()(w).call(w,t,"ftp://"))||(w.File.Errors.FilePathSyntaxIncorrect(e),!1):(w.Errors.InvalidFile(e),!1)}},e=(n.checkFolder=n.checkFilePath,w.File=n,w.showProgress=function(){},w.closeProgress=function(){},t(5683)),B=t.n(e),a=t(9104),Pe=t.n(a),O=t(1255),We=O.CH+".",R=Dynamsoft.Lib,xe=0,ke=1,Fe=2,Le=3,Ne=4,Ve=7,Ae=8,Be=9,Oe=10,Re=50,Ue=51,Ge=52,r=(R.License={isLTS:function(){return R.isString(Dynamsoft.DWT.handshakeCode)||R.isString(Dynamsoft.DWT.organizationID)||Dynamsoft.DWT.isPublicLicense()},_innerCheckProductKey:function(e,t,r,n){var i,o=n,a=e.__licenseInfo;if(a&&a.LTS){if(!a||!R.isArray(a.Detail)||0==a.Detail.length)return Dynamsoft.Lib.License.isLTS()?R.Errors.LicenseNoCore(e):R.Errors.LicenseEmptyOrInvalid(e),R.License.ShowInvalidLicense("",!0),!1;o=!1}else if(!R.isString(Dynamsoft.DWT.ProductKey)||""==Dynamsoft.DWT.ProductKey||"******"==Dynamsoft.DWT.ProductKey||!a||!R.isArray(a.Detail)||0==a.Detail.length)return Dynamsoft.Lib.License.isLTS()?R.Errors.LicenseNoCore(e):R.Errors.LicenseEmptyOrInvalid(e),R.License.ShowInvalidLicense("",!0),!1;var s=0,u=0,c=[],l=[],d=!1,h=!1,g=!1,f=!1,m=!1,_=!1;if(!this.isBindDomainOK(a.Domain))return R.Errors.LicenseBadDomain(e),o&&R.License.promptLicenseErr(e),!1;for(0<a.Detail.length&&(i="FALSE"!=(C=a.Detail[0]).Trial),D=1;D<a.Detail.length;D++)if("FALSE"==(C=a.Detail[D]).Trial&&i||"TRUE"==C.Trial&&!i)return R.Errors.LicenseTrialFullMixed(e),o&&R.License.promptLicenseErr(e),!1;if(t.Core||t.Webcam){for(var p=[],I=!1,D=0;D<a.Detail.length;D++)if(C=a.Detail[D],E=this.getEnumLicenseType(C.EnumLicenseType),(t.Core||!t.Wasm)&&E.Core||(t.Webcam||!t.Wasm)&&E.Webcam){var v,b=this.getLicenseType(C.LicenseType);if(R.isString(C.Version)&&0==B()(v=C.Version).call(v,We)){if(R.product.bHTML5Edition){if(b.ActiveX&&!b.Html5)continue;l.push(C)}else{if(!b.ActiveX&&b.Html5)continue;l.push(C)}I=!0}else p.push(C)}else l.push(C);if(!I&&0<p.length)return V()(p).call(p,0),n=(0==O.Ne?[O.CH,O.$n]:[O.CH,O.$n,O.Ne]).join("."),R.Errors.LicenseVersionNotCurrent(e,n),o&&R.License.promptLicenseErr(e),!1;V()(p).call(p,0)}else l=a.Detail;for(D=0;D<l.length;D++){var y,T,S,w=!0,C=l[D],E=this.getEnumLicenseType(C.EnumLicenseType);(t.Core||this.isAllowLicenseType(E,t))&&(y=C.ExpireDate.replace(/-/g,"/"),(S="FALSE"!=C.Trial)&&!Dynamsoft.DWT.HideTrialMessage&&(T=this.remainExpireDays(y))<=5&&(R.isFunction(Dynamsoft.OnLicenseExpiredMessage)&&Dynamsoft.OnLicenseExpiredMessage(y,T),Dynamsoft.DWT.HideTrialMessage=!0),this.isExpiredOrFuture(y,S)?c.push(y):E.Core&&15<=A()(C.Version)||!E.Core?t.Wasm?(T=!1,(T=t.Core&&E.Core||t.PDFRasterizer&&E.PDFRasterizer||t.Webcam&&E.Webcam?!0:T)&&(-1<B()(S=C.OS.toLowerCase()).call(S,"wasm")?this.isBrowserOK(C.Browser)||r?(s++,w=!1):h=!0:t.PDFRasterizer?m=!0:t.Webcam?_=!0:f=!0)):this.isOSOK(C.OS,e)?this.isBrowserOK(C.Browser)||r?(s++,w=!1):h=!0:d=!0:g=!0,w&&u++)}if(0<s)return!0;if(0==u)return this.setNoAllowedLicenseTypeError(e,t),o&&R.License.promptLicenseErr(e),!1;if(0<c.length){var M,P=0,W=1e20,x="",k=(new Date).getTime();for(y="",D=0;D<c.length;D++)(M=this.parseDateFromString(c[D])).getTime()<k&&M.getTime()>P?(P=M.getTime(),y=c[D]):M.getTime()>k&&M.getTime()<W&&(W=M.getTime(),x=c[D]);return""!=y?(M=this.parseDateFromString(y),y=this.getLicenseDateString(M),R.Errors.LicenseExpired(e,y),Dynamsoft.Lib.License.isLTS()||R.License.ShowInvalidLicense(y,i),o=!1):""!=x?(M=this.parseDateFromString(x),x=this.getLicenseDateString(M),R.Errors.LicenseIsFuture(e,x)):(R.Errors.LicenseExpired(e,""),o=!1,R.License.ShowInvalidLicense()),o&&R.License.promptLicenseErr(e),!1}if(g)return R.Errors.LicenseLower(e),o&&R.License.promptLicenseErr(e),!1;var F,L,N,n=Dynamsoft.navInfoSync;return h?(n.bEdge?R.Errors.LicenseNoEdge(e):n.bChrome?R.Errors.LicenseNoChrome(e):n.bFirefox?R.Errors.LicenseNoFirefox(e):n.bIE?R.Errors.LicenseNoIE(e):n.bSafari?R.Errors.LicenseNoSafari(e):R.Errors.LicenseNotSupportBorwser(e),o&&R.License.promptLicenseErr(e)):d?(N=L=F=!1,e._bRemoteMode?e.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow?N=!0:e.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux?L=!0:e.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac&&(F=!0):(F=n.bMac,L=n.bLinux,N=n.bWin),N?R.Errors.LicenseNotSupportWindows(e):F?R.Errors.LicenseNotSupportMAC(e):L?R.Errors.LicenseNotSupportLinux(e):R.Errors.LicenseNotSupportOS(e),o&&R.License.promptLicenseErr(e)):f?(R.Errors.LicenseNotSupportWasm(e),o&&R.License.promptLicenseErr(e)):m?(R.Errors.LicenseNotSupportPdfRWasm(e),o&&R.License.promptLicenseErr(e)):_?(R.Errors.LicenseNotSupportWebcamWasm(e),o&&R.License.promptLicenseErr(e)):(R.Errors.LicenseEmptyOrInvalid(e),o&&this.promptLicenseErr(e)),!1},checkProductKey:function(e,t,r,n){var i=Dynamsoft.DWT.licenseException,o=!0;return(Dynamsoft.Lib.isString(Dynamsoft.DWT.handshakeCode)||Dynamsoft.Lib.isString(Dynamsoft.DWT.organizationID))&&Dynamsoft.Lib.isString(Dynamsoft.DWT.ProductKey)&&(Dynamsoft.Lib.Errors.LongKeyShortKeyMixed(e),o=!1),(o=o&&Dynamsoft.Lib.License._innerCheckProductKey(e,t,r,n))||(i.code=e._errorCode,i.message=e._errorString,i.fromLTS=!1),o},promptLicenseErr:function(e){var t,r=!1,n=screen.width,n=640<n?640:n-10;R.isNumber(e.ErrorCode)?(r=e.ErrorCode,t=e.ErrorString):R.isNumber(e.code)?(r=e.code,t=e.message):R.isString(e.message)&&(r=!0,t=e.message),!1!==r&&Dynamsoft.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',t,"</div>",'<div style="padding-top:35px"></div>'].join(""),{width:n,height:0,headerStyle:1})},ShowInvalidLicense:function(e,t){if(!R.detect.needUpgrade){if(R.License.isLTS())return r=Dynamsoft.DWT.licenseException.message,void(Dynamsoft.OnLTSLicenseError&&Dynamsoft.OnLTSLicenseError(Dynamsoft.Lib.License.getPublicLicenseContent(r)));var r=[],n="is not valid",i=screen.width,i=640<i?640:i-10;e&&""!=e&&(n=-1==B()(e).call(e,"on")?"has expired on "+e:"has expired "+e),r.push('<div style="padding:0 25px 25px 25px;">'),R.env.bMobile?(r.push("The <strong>ProductKey</strong> is not valid."),t&&(r.push(" Please <br /><ul><li>1. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a trial license</a>.</li>"),r.push("<li>2. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key?product=dwt&utm_source=in-product' target='_blank'>Update the ProductKey</a>.</li>"),r.push("</ul>"))):t?(r.push("You are seeing this message because your trial key "),r.push(n),r.push(". Two quick steps to extend your trial: <br /><div><ul>"),r.push("<li style='padding-left:25px'>1.<strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a new trial key</a></strong> and follow the instructions to set the new key</li>"),r.push("<li style='padding-left:25px'>2.Refresh your scan page and try again</li>"),r.push("</ul></div>If you run into any issues, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a>.")):(r.push("You are seeing this message because the license for doc scanning support "),r.push(n),r.push(".<br /><div><ul>"),r.push("<li><strong>If you are the owner of the website</strong>, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/order/renewalList' target='_blank'>renew your license</a> and follow the instructions to set the new key. Please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a> if you need any help.</li>"),r.push("<li><strong>If you are an end-user</strong>, please inform the owner or developer of this website.</li>"),r.push("</ul></div>")),r.push("</div>"),Dynamsoft.DWT.ShowMessage(r.join(""),{width:i,height:0,headerStyle:1}),!R.env.bMobile||(e=R.one(".ds-dwt-ui-dlg-wrap"))&&0<e.length&&(e[0].style.fontSize="1.5em",e[0].style.lineHeight="1.5em")}},isBindDomainOK:function(e){if(R.isUndefined(e)||null==e||""==e||"*"==e||"*.*"==e)return!0;var t=location.hostname,r=!1;if(""==t)return!0;for(var n=t.toLowerCase().split("."),i=n.length,o=e.toLowerCase().split(";"),a=0;a<o.length;a++){var s=o[a];if("*.*"==s){r=!0;break}var u=s.split("."),c=u.length;if(0<c&&c-1<=i){for(var l,d=!0,h=c-1;0<h;h--){if(-1<B()(l=u[h]).call(l,"*")){r=!0;break}if(0<=h+i-c){if(n[h+i-c]!=u[h]){d=!1;break}}else if("*"!=u[h]){d=!1;break}}if(d&&("*"==u[0]||c<=i&&n[i-c]==u[0])){r=!0;break}}}return r},isExpiredOrFuture:function(e,t){if(""==e)return!1;if(!t){var r=e.length;if(2<r&&"/"==e[r-2]&&"0"==e[r-1])return!1}var r=this.parseDateFromString(e),e=(new Date).getTime(),n=e+5184e6;return r.getTime()<e||!!(t&&r.getTime()>n)},remainExpireDays:function(e){if(""==e)return 65536;var e=this.parseDateFromString(e),t=(new Date).getTime(),r=(e.getTime()-t)/864e5;return e.getTime()<t?0:Math.ceil(r)},isOSOK:function(e,t){var r=!1,n=!1,i=!1,o=!1,a=!1,s=!1;return""==e||"0"==e||(t._bRemoteMode?t.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow?i=!0:t.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux?n=!0:t.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumMac?r=!0:t.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumEmbed?a=!0:t.__serverPlatform==Dynamsoft.DWT.EnumDWT_PlatformType.enumChromeOS&&(s=!0):(r=(t=Dynamsoft.navInfoSync).bMac,n=t.bLinux,i=t.bWin,o=R.env.bMobile,s=t.bChromeOS,a=Dynamsoft.navInfo.bEmbed),e=e.toLowerCase(),!!(-1<B()(e).call(e,"windows")&&i)||(!!(-1<B()(e).call(e,"mac")&&r)||(!!(-1<B()(e).call(e,"linux")&&(n||s))||(!!(-1<B()(e).call(e,"mobile")&&o)||!!(-1<B()(e).call(e,"embed")&&a)))))},isBrowserOK:function(e){if(R.isString(e)){if(""==e||"0"==e)return!0;var e=(e=e.toLowerCase()).split(";"),t=!1,r=Dynamsoft.navInfoSync;return R.each(e,function(e){("chrome"==Pe()(R).call(R,e)&&(r.bChrome||r.bSafari||r.bOpera||r.bEdge)||"ie"==Pe()(R).call(R,e)&&r.bIE||"firefox"==Pe()(R).call(R,e)&&r.bFirefox)&&(t=!0)}),t}return!1},parseDateFromString:function(e){e=(e=e).replace(/-/g,"/"),e=Date.parse(e);return isNaN(e)&&(e=0),(e=new Date(e)).setHours(23,59,59,999),e},getEnumLicenseType:function(e){var t=!1,r=!1,n=!1,i=!1,o=!1,a=!1,s=!1,u=!1,c=!1;return R.isString(e)&&R.each(e.split(";"),function(e){e=+e;e==Fe||e==Le||e==xe||e==ke?t=!0:e==Ne?r=!0:e==Re?n=!0:e==Ue?i=!0:e==Ge?o=!0:e==Ve?a=!0:e==Ae?s=!0:e==Be?u=!0:e==Oe&&(c=!0)}),{Core:t,PDFRasterizer:u,Webcam:s,barcode1D:r,QR:n,PDF417:i,DataMatrix:o,OCR:a,OCRPro:c}},getLicenseType:function(e){var t=!1,r=!1,n=!1,i=!1,o=!1,a=!1,s=!1,u=!1,c=!1,l=!1;return e&&""!=e&&("html5;activex;oldie"==(e=e.toLowerCase())?n=!0:"html5"==e||"win=(aph) or mac=(ph) or linux(h)"==e?t=!0:"html5;activex"==e?n=t=!0:"1d barcode reader"==e?r=!0:"2d barcode reader(qrcode)"==e?i=!0:"2d barcode reader(pdf417)"==e?o=!0:"2d barcode reader(data matrix)"==e?a=!0:"ocr"==e?s=!0:"webcam"==e?u=!0:"pdf rasterizer"==e?c=!0:"proocr"==e&&(l=!0)),{Html5:t,PDFRasterizer:c,Webcam:u,barcode1D:r,QR:i,PDF417:o,DataMatrix:a,OCR:s,OCRPro:l,ActiveX:n}},isAllowLicenseType:function(e,t){return t.Core?e.Core:t.PDFRasterizer?e.PDFRasterizer:t.Webcam?e.Webcam:t.barcode1D?e.barcode1D:t.QR?e.QR:t.PDF417?e.PDF417:t.DataMatrix?e.DataMatrix:t.OCR?e.OCR:t.OCRPro?e.OCRPro:e.Core},setNoAllowedLicenseTypeError:function(e,t){t.Core?t.Wasm?R.Errors.LicenseNotSupportWasm(e):R.Errors.LicenseNoCore(e):t.PDFRasterizer?t.Wasm?R.Errors.LicenseNotSupportPdfRWasm(e):R.Errors.LicenseNoPDF(e):t.Webcam?t.Wasm?R.Errors.LicenseNotSupportWebcamWasm(e):R.Errors.LicenseNoWebcam(e):t.OCR?R.Errors.LicenseNoOCR(e):t.OCRPro?R.Errors.LicenseNoOCRPro(e):R.Errors.LicenseEmptyOrInvalid(e)},getLicenseDateString:function(e){var t=e.getFullYear(),r=e.getMonth()+1,r=10<=r?""+r:"0"+r,e=10<=e.getDate()?""+e.getDate():"0"+e.getDate();return[r,"/",e,"/",t].join("")},hasPDFRProductKey:function(e){if(e._isMobileMode()){if(!R.License.checkProductKey(e,{PDFRasterizer:!0,Wasm:!0},!0))return e._resetErr(),!1}else if(!R.License.checkProductKey(e,{PDFRasterizer:!0},!0))return e._resetErr(),!1;return!0},checkPDFProductKeyWhenNeeds:function(e,t){if(t==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF||t==Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF){var r;if(R.product.bHTML5Edition?e.__addon&&e.__addon.PDF&&(r=e.__addon.PDF.GetConvertMode()):e.Addon&&e.Addon.PDF&&(r=e.Addon.PDF.GetConvertMode()),1==r||4==r)return R.isFunction(e._isMobileMode)&&e._isMobileMode()?this.checkProductKey(e,{PDFRasterizer:!0,Wasm:!0},!0):this.checkProductKey(e,{PDFRasterizer:!0},!0)}return!0},getPublicLicenseContent:function(e){var t=[];if(!R.isString(e)){if(R.isUndef(e))return"";e=e instanceof Error||"message"in e?e.message:""+e}var r=B()(e).call(e,"["),n=B()(e).call(e,"]",r),i=B()(e).call(e,"(",n),o=B()(e).call(e,")",i);if(-1==r||-1==n||-1==i||-1==o)return e;0<r&&t.push(e.substring(0,r));r=e.substring(r+1,n),n=e.substring(i+1,o);return t.push(['<a href="',n,'" target="_blank" class="dynamsoft-major-color">',r,"</a>"].join("")),t.push(e.substring(o+1)),t.join("")}},Dynamsoft.DWT.isPublicLicense=function(){return!(!R.isUndef(Dynamsoft.DWT.ProductKey)||!(R.isUndef(Dynamsoft.DWT.handshakeCode)&&R.isUndef(Dynamsoft.DWT.organizationID)||R.isUndef(Dynamsoft.DWT.handshakeCode)&&"200001"==Dynamsoft.DWT.organizationID))},t(1006)),He=t.n(r),C=Dynamsoft.navInfoSync,n=C.bHTML5Edition,e=!1,r=(C.bIE&&(""===(a=C.IEVersion)||10<=a?0==Dynamsoft.DWT.IfUseActiveXForIE10Plus?n=!0:(e=!(n=!1),C.bHTML5Edition=n):(n=!1,9<=a&&(e=!0))),{name:"Dynamic Web TWAIN",bHTML5Edition:n,bActiveXEdition:e,host:Dynamsoft.dcp.host,wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:Dynamsoft.dcp.getDSPath,getPKGPath:function(){return Dynamsoft.DWT.ResourcesPath+"/dist/mac/DynamicWebTWAINMacEdition.pkg"},getMSIPath:function(){return Dynamsoft.DWT.ResourcesPath+"/dist/win/DynamicWebTWAINPlugIn.msi"},getActiveXCABx86Path:function(){return Dynamsoft.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAIN.cab"},getActiveXCABx64Path:function(){return Dynamsoft.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAINx64.cab"},strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},bChromeEdition:n,getServerVersionInfo:function(e){var t=Dynamsoft.DWT.ServerVersionInfo;return C.bWin||(C.bMac?t=Dynamsoft.DWT.ServerMacVersionInfo:(C.bLinux||C.bChromeOS)&&(t=Dynamsoft.DWT.ServerLinuxVersionInfo)),e?t:He()(e=Dynamsoft.Lib).call(e,t,",","")},getDWTPrefix:function(){return!0===Dynamsoft.DWT.CustomMode?"dwtc_":"dwt_"},loadResourcePath:!1,loadingResourcePath:!1}),a=t(5005),e=t.n(a),n=t(677),a=t.n(n),n=f.I.navInfoSync,t=n.bWin,je=n.bMac,ze=n.bLinux,Ze=n.bSafari,Je=n.bFirefox,Xe=n.bChrome,Ye=location.hostname,E=location.pathname,Ke=0,Qe=n.bMobile,e=e()(n.strBrowserVersion),E=(f.I.navInfo&&(M=f.I.navInfo,Qe=Qe||M.bPad||M.biPhone||M.biPad),""===Ye?(t&&1<a()(E).call(E,"\\")?E.substring(1,a()(E).call(E,"\\")):E.substring(Ke=1,a()(E).call(E,"/"))).replace(/%20/g," "):(Ke=1,E.substring(0,a()(E).call(E,"/")))),M={bChrome:Xe,bFirefox:Je,bSafari:Ze,bIE:n.bIE,bEdge:n.bEdge,bWin:t,bMac:je,bLinux:ze,iPluginLength:0,bFileSystem:n.bFileSystem,bMobile:Qe,strIEVersion:n.IEVersion,strChromeVersion:n.bChrome?e:"",strFirefoxVersion:n.bFirefox?e:"",basePath:E,pathType:Ke,isDesktopViewer:function(){return f.I.navInfoSync.bWin||f.I.navInfoSync.bLinux||f.I.navInfoSync.bChromeOS||f.I.navInfoSync.bMac},isPadViewer:function(){return f.I.navInfo.bPad||f.I.navInfo.biPad},isMobileViewer:function(){return f.I.navInfoSync.bMobile||f.I.navInfo.biPhone},isWasmUseFastcomp:function(){if(f.I.Lib.preNavInfo.bUseUserAgent){var e=A()(f.I.navInfoSync.strBrowserVersion);if(f.I.navInfoSync.bSafari&&13<=e)return!1;if(f.I.navInfoSync.bFirefox&&94<=e)return!1;if(f.I.navInfoSync.bChrome&&94<=e)return!1}else{var e=navigator.userAgentData,t=[],r=0;"brands"in e&&f.D.isArray(e.brands)&&0<e.brands.length?t=e.brands:"uaList"in e&&f.D.isArray(e.uaList)&&0<e.uaList.length&&(t=e.uaList);for(r=0;r<t.length;r++){var n=t[r];if(n.brand&&("Chromium"==n.brand||"Google Chrome"==n.brand)&&n.version&&94<=A()(n.version,10))return!1}}return!0}},P={getHex:function(e){e=Number(e).toString(16).toUpperCase();return e=1==e.length?["0",e].join(""):e},getColor:function(e){var t=(65280&e)>>8,r=255&e;return["#",P.getHex(e>>16),P.getHex(t),P.getHex(r)].join("")},RGB2BGR:function(e){return(255&e)<<16|65280&e|e>>16}},Ye=(P.BGR2RGB=P.RGB2BGR,P),a=document.location.protocol,Xe=location.hostname,Je=f.I.navInfoSync.bSSL,W=(f.D.env=M,f.D.product=r,f.D.mix(f.D,Ye),f.D.BIO=S,{config:{debug:!(f.I.MSG={Loading:"Processing...",LoadingTiff:"Processing tiff...",LoadingPdf:"Processing pdf...",Encoding:"Processing...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Wasm_Initializing:"Initializing...",Init_LookingLicense:"Looking for license...",Init_LoadingViewerJs:"Loading the viewer script...",Init_AllJsLoaded:"All scripts loaded.",Init_FireBeforeInitEvt:"OnWebTwainWillInit triggered.",Init_InitActiveX:"Initializing the ActiveX...",Init_InitH5:"Initializing...",Init_InitWasm:"Initializing WebAssembly mode...",Init_DownloadingWasm:"Downloading WebAssembly code...",Init_CompilingWasm:"Compiling WebAssembly code...",Init_InitDynamsoftService:"Initializing the Service mode...",Init_CheckDWT:"Looking for the service module...",Init_CheckDWTVersion:"Checking the service module...",Init_CreatingDWT:"Creating a WebTwain instance...",Init_ConfiguringDWT:"Configuring the WebTwain instance...",Init_SetLicenseForDWT:"Activating the WebTwain instance...",Init_GetLicenseInfoForDWT:"Decoding the license...",Init_CheckingLicense:"Checking the license...",Err_BrowserNotSupportWasm:"It looks like your browser doesn't support the WebAssembly technology which is required to use the library."}),devMode:!1,usingMainMode:!1,bDiscardBlankImage:!1,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:Je,dcpStatus:0,dcpCallbackType:0,arySTwains:[],arySTwainsByIP:[],aryWSPool:[],bFirst:!0,bOK:!1,__dialog:!1,scriptLoaded:!1,wasmScriptLoaded:!1,wasmPdfReaderLoaded:!1,wasmLoad:!1,cssLoaded:!1,viewerScriptLoaded:!1,bNoControlEvent:!1,bNeedUpgradeEvent:!1,StartWSTimeoutId:!1,StartWSByIPTimeoutId:!1,bPromptJSOrServerOutdated:!1,bNeedWasm:!1,bAutoLoadDone:!1,detectType:Je?1:"http:"===a||""===Xe?0:-1,tryTimes:0,ports:[{port:f.I.DWT.SSLPort,ssl:!0},{port:f.I.DWT.Port,ssl:!1}],win64Ports:[{port:18621,ssl:!0},{port:18620,ssl:!1}],cUrlIndex:0,urls:[],onNoControl:!1,needUpgrade:!1,OnDetectNext:!1,OnCreatWS:!1,bMaskShow:!1},page:{bUnload:!1,OnUnload:!1},tmp:{IfAllowLocalCache:!0,EmptyFunction:function(){}}});W.appendMessage=function(e){"string"==typeof e?W.config.msg.push(e):"[object Array]"===Object.prototype.toString.call(e)&&f.I.Lib.each(e,function(e){W.appendMessage(e)})},W.appendRichMessage=function(e){W.appendMessage([W.config.msgPrefix,e,W.config.msgSuffix])},W.clearMessage=function(){var e;return V()(e=W.config.msg).call(e,0),!0},W.getRealPath=function(e){return e===undefined?"":1==W.env.pathType?W.env.basePath+e:W.env.basePath+e.replace(new RegExp("/","g"),"\\\\")},W.isLocalIP=function(e){return e&&("127.0.0.1"===e||"localhost"===e||"local.dynamsoftwebtwain.com"===e||"local.dynamsoft.com"===e)},W.IsNeedLoadWasm=function(){return f.D.detect.bNeedWasm||!1===f.I.DWT.UseLocalService||f.D.isUndefined(f.I.DWT.UseLocalService)&&f.D.env.bMobile||f.I.DWT.UseBarcodeAddonWasm},W.getShadowRoot=function(e){var t=e;if(f.D.win.ShadowRoot)for(;t;){if(t instanceof f.D.win.ShadowRoot)return t;t=t.parentNode}return!1},W.isShadowRoot=function(e){return!!(f.D.win.ShadowRoot&&e instanceof f.D.win.ShadowRoot)},f.D.mix(f.D,W),f.D.Addon_Events=[],f.D.Addon_Sendback_Events=[]},2053:function(e,t,r){r.r(t);var n,b,y,f,m,a=r(9623),t=r(7711),i=r.n(t),t=r(4579),T=r.n(t),t=r(5238),o=r.n(t),S=r(1695),t=r(1255),r=i()(t.CH),s=i()(t.$n),u=i()(t.Ne),c=t.Bm,l=t.Bm,d=S.I.managerEnv,_=S.D.LS,h=S.I.navInfoSync.host,g=20220401,p=function p(){if(S.I.dcp){var e=S.I.dcp.dcpJSVer;if(S.D.isNumber(e))return g<=e}return!1};d||(S.I.managerEnv={},d=S.I.managerEnv),d.resourcesPath=d.resourcesPath||"Resources",d.IfUpdateService=!!d.IfUpdateService,p()?g=p=n:(y={dcpStatus:0,bConnected:!1,connectedResult:"",curPortIndex:0,bConnectNumLimited:!0,IMAXCONNECTCOUNT:5,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}},f=[],m=0,S.I.dcp=b={host:"127.0.0.1",ports:[[18625,18626]],dcpJSVer:g,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],managerVersion:[r,s,u,c],managerVersionMac:[r,s,u,c],managerVersionLinux:[r,s,u,c],serviceVersion:[t.UJ,t.oU,t.$E,l],serviceVersionMac:[t.UJ,t.oU,t.$E,l],serviceVersionLinux:[t.UJ,t.oU,t.$E,l],detect:y,strSID:"",bEnhancedMode:!1,b64bit:!1,wsProtocol:"dwt_command",dwtPort:0,onReadys:[],getManagerVersion:function(){var e=S.I.navInfoSync;if(!e.bWin){if(e.bMac)return b.managerVersionMac;if(e.bLinux)return b.managerVersionLinux}return b.managerVersion},getServiceVersion:function(){var e=S.I.navInfoSync;if(!e.bWin){if(e.bMac)return b.serviceVersionMac;if(e.bLinux)return b.serviceVersionLinux}return b.serviceVersion},versionInfo:function(n,e){var i=0,r=function r(e){if(S.D.isArray(e)&&0<e.length&&e[0]){y.curPort=b.ports[i%b.ports.length];var t=e[0];if(S.D.isString(t)&&b._compareVersion(t.split(","),b.oldDWASMVer))return b._setDefaultValuesFromServer(e),y.bConnected=!0,y.dcpStatus=y.EnumDCP_DetectStatus.Connected,b._sendStatusEvent(!1,t),S.D.isFunction(n)&&T()(function(){n(b.strSID,b.bEnhancedMode)},0),!0}return!1},o=function o(e,t,r){return++i,y.curPortIndex=i%b.ports.length,y.bConnected=!1,!!(y.bConnectNumLimited&&i>=y.IMAXCONNECTCOUNT)&&(T()(function(){n(e,t,r)},0),!0)};y.dcpStatus=y.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,e,r,o)},_checkOldManagerVersion:function(e,t){y.dcpStatus=y.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,n,e,t)},_checkManagerVersion:function(e,t,r){y.dcpStatus=y.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!1,e,t,r)},_checkService:function(e,t){y.dcpStatus=y.EnumDCP_DetectStatus.CheckingServiceVer,this._postBase("DSVersion",!1,n,e,t)},_checkUpdateFile:function(e,t){this._postBase("CheckUpdateFile",!1,n,e,t)},_updateService:function(e,t){this._postBase("UpdateService",!1,n,e,t)},_postBase:function(e,t,r,n,i){var o=t?b.oldDWASMVerStr:"dwasm2_"+b._getModuleVer(),o={id:(new Date).getTime().toString(),method:e,version:o,parameter:[]};return r&&(o.productKey=r),this._postBaseV2(e,t,o,500,n,i),!0},_postBaseV2:function(e,t,r,n,i,o){var a,s,u,c=S.D.stringify(r);if(S.D.isFunction(i)&&S.D.isFunction(o))if(b.detect.bConnected&&"VersionInfo"==e&&""!=b.detect.connectedResult)i(b.detect.connectedResult);else{if(a=function a(e,t,r){0==--m&&o(e,t,r)},s=function s(e,t,r){var n=b._getJSON(e);if(n&&"result"in n){if(m=-1,b.detect.bConnected)return;if(b.detect.bConnected=!0,b.detect.dcpStatus=b.detect.EnumDCP_DetectStatus.Connected,b.detect.curPort=b.ports[r.index],b.ports=[b.detect.curPort],b.detect.curPortIndex=0,_.isSupportLS()&&_.item("DCP_port",b.detect.curPort[1]),i(n.result))return}a(e,t,r)},1<(m=b.ports.length)&&_.isSupportLS()){var l=_.item("DCP_port");if(S.D.isString(l)&&""!==l)for(u=1;u<m;u++){var d=b.ports[u],h=d[0];(d=d[1])==l&&(b.ports[u][0]=b.ports[0][0],b.ports[u][1]=b.ports[0][1],b.ports[0][0]=h,b.ports[0][1]=d);break}}for(b.detect.bConnected&&(m=1),f=[],b.detect.bConnected=!1,u=0;u<m;u++){var g=[b._getPreUrl(u),t?"dcp/":b._getModuleName(),t?b.oldDWASMVerStr:b._getModuleVer(),"/",e,"?type=1&dsver=",b.getServiceVersion().join(""),"&ts=",S.D.now()].join("");f.push({method:"POST",url:g,timeout:n,data:c,onSuccess:s,onError:a})}for(u=0;u<m;u++)S.D.ajax(f[u]).index=u}},loadZip:function(e,t,r,n){var i=t,o=r;100===t&&(i=0,o=function o(e){S.D.isString(e)&&(e=e.replace('"result" : [ 0,','"result" : [ 100,')),r(e)}),t=(S.I.managerEnv.IfUpdateService?[b._getPreUrl(y.curPortIndex),b._getModuleName(),b._getModuleVer(),"/LoadZipFromBytes?type=",i,"&dsver=",b.getServiceVersion().join(""),"&ts=",S.D.now()]:[b._getPreUrl(y.curPortIndex),"dcp/",b.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",b.getServiceVersion().join(""),"&ts=",S.D.now()]).join(""),S.D.ajax({method:"POST",url:t,async:!0,data:e,onSuccess:o,onError:n})},oldLoadZip:function(e,t,r,n){var i=[b._getPreUrl(y.curPortIndex),"dcp/",b.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",b.getServiceVersion().join(""),"&ts=",S.D.now()].join("");S.D.ajax({method:"POST",url:i,async:!0,data:e,onSuccess:r,onError:n})},_getPreUrl:function(e){var t,e=S.I.navInfoSync.bSSL?(t="https://",b.ports[e][1]):(t="http://",b.ports[e][0]);return[t,b.host,":",e,"/"].join("")},_getHttpPreUrl:function(e){return["http://",b.host,":",b.ports[e][0],"/"].join("")},_getDcpWsPreUrl:function(e){return b.getWsUrl(b.host,S.I.navInfoSync.bSSL?b.ports[e][1]:b.ports[e][0])},_getJSON:function(e){return!!e&&S.D.parse(e)},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return b.getManagerVersion().join("")},_compareVersion:function(e,t){return!S.D.isLocalIP(b.host)||(S.D.isArray(e)&&4==e.length&&S.D.isArray(t)&&4<=t.length?e[0]>t[0]||e[0]==t[0]&&e[1]>t[1]||e[0]==t[0]&&e[1]==t[1]&&e[2]>t[2]||e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&i()(e[3])>=i()(t[3]):!!(S.D.isArray(e)&&1==e.length&&S.D.isArray(t)&&1<=t.length)&&i()(e[0])>=i()(t[0]))},_getDSUpdateZipUrl:function(){var e,t=S.I.navInfoSync,r="",n="Win";return t.bMac?n="Mac":t.bLinux&&(n="Linux"),e=t.bFileSystem?"":"?t="+S.D.now(),t.bWin&&b.b64bit&&(r="_x64"),[S.I.managerEnv.resourcesPath,"/dist/serviceupdate/",n,"DSUpdate_",b.getManagerVersion().join("."),r,".zip",e].join("")},getPorts:function(e,t,r){var n="GetPorts",i="dwasm2_"+b._getModuleVer();this._postBaseV2(n,!1,{id:"1",method:n,version:i,parameter:[e]},700,t,r)},_setDefaultValuesFromServer:function(e){var t="",r=!1,n=!1,i={};4<e.length&&(t=S.D.isString(e[2])?e[2]:"",r=S.D.isString(e[3])&&"true"===e[3],n=S.D.isString(e[4])&&"64"===e[4]),5<e.length&&(i=e[5]),b.detect.connectedResult=e,b.strSID=t,b.bEnhancedMode=r,b.b64bit=n,b.objEnhancedPorts=i,r&&i&&i.dcp?(e=i.dcp,y.curPort=[e.port,e.sslPort]):y.curPort=b.ports[y.curPortIndex],r&&i&&i.dwt&&((t=i.dwt)?S.I.navInfoSync.bSSL?y.dwtPort=t.sslPort:y.dwtPort=t.port:y.dwtPort=0)},checkDcpForUpdate:function(a,e,s,u,c,l,d,h){var g,r,f,m,n,i,_=!1,p=!0,o=3,I=0,D=(g=function g(e){if(!(S.D.isArray(e)&&0<e.length&&e[0]))return!1;var n,t,r,i=e[0].split(","),o=!1;return 4<e.length&&(o=S.D.isString(e[4])&&"64"===e[4]),b.b64bit=o,S.I.managerEnv.IfUpdateService?b._compareVersion(i,b.oldDWASMVer)?(e=b._getDSUpdateZipUrl(),_=!0,r=function r(e){y.dcpStatus=y.EnumDCP_DetectStatus.DownloadedZip,b._sendStatusEvent();b.oldLoadZip(e,0,function(){T()(function(){b._checkManagerVersion(h,f,m)},5e3)},n)},n=function n(e,t,r){b._funUpdateFailed(c,l,e,r.status),T()(d,0)},t=function t(e){y.dcpStatus=y.EnumDCP_DetectStatus.DownloadFailed,c&&c();e="The update package can't be downloaded. The error code is "+e.httpCode+".";l&&l(!0,e),b._sendStatusEvent(!0,e),T()(d,0)},s&&s(),u&&u(),y.dcpStatus=y.EnumDCP_DetectStatus.DownloadingZip,b._sendStatusEvent(),S.D.fetch(e,{mode:"cors",dataType:"arraybuffer"}).then(r,t)):p&&(y.dcpStatus=y.EnumDCP_DetectStatus.NotInstalled,s&&s(),a&&a(),b._sendStatusEvent(),p=!1):(y.bConnected=!0,y.dcpStatus=y.EnumDCP_DetectStatus.UpdateSkipped,b._sendStatusEvent(),T()(d,0)),!0},r=function(e,t){return++I,y.curPortIndex=I%b.ports.length,y.bConnected=!1,y.bConnectNumLimited&&I>=y.IMAXCONNECTCOUNT?(y.dcpStatus=y.EnumDCP_DetectStatus.NotInstalled,b._sendStatusEvent()):T()(function(){b._checkOldManagerVersion(g,r)},1e3),!0},f=function f(e){if(!(S.D.isArray(e)&&0<e.length&&e[0]))return!1;var t=e[0].split(",");return!!b._compareVersion(t,b.getManagerVersion())&&(b.detect.connectedResult=e,S.I.managerEnv.IfUpdateService?_?T()(function(){b._checkUpdateZip(u,c,l,d)},0):T()(function(){b._checkService(n,i)},0):(y.dcpStatus=y.EnumDCP_DetectStatus.UpdateSkipped,b._sendStatusEvent(),T()(d,0)),!0)},m=function(e,t,r){var n=o<3?500:1e3;return--o<0?(b._funShowUpgradeDialogWhenUpdateFailed(c,l),T()(d,0)):T()(function(){b._checkManagerVersion(h,f,m)},n),!0},n=function n(e){if(!(S.D.isArray(e)&&0<e.length&&e[0]))return s&&s(),!1;var t=e[0].split(",");return b._compareVersion(t,b.getServiceVersion())?(y.bConnected=!0,c&&c(),y.dcpStatus=y.EnumDCP_DetectStatus.CheckedService,b._sendStatusEvent(!1,e[0]),y.dcpStatus=y.EnumDCP_DetectStatus.UpdateSucceed,b._sendStatusEvent(),T()(d,0)):T()(function(){b._checkUpdateZip(u,c,l,d)},0),!0},i=function i(e,t,r){return b._funUpdateFailed(c,l,e,r.status),T()(d,0),!0},function D(e){if(!(S.D.isArray(e)&&0<e.length&&e[0]))return!1;var t=e[0];return S.D.isString(t)&&b._compareVersion(t.split(","),b.oldDWASMVer)?(b._setDefaultValuesFromServer(e),y.curPort=b.ports[I%b.ports.length],S.I.managerEnv.IfUpdateService?T()(function(){b._checkService(n,i)},0):(y.dcpStatus=y.EnumDCP_DetectStatus.UpdateSkipped,b._sendStatusEvent(),T()(d,0))):(I=0,y.curPortIndex=0,p&&(s&&s(),a&&a(),p=!1),T()(function(){b._checkOldManagerVersion(g,r)},1e3)),!0}),v=function v(e,t){return++I,y.curPortIndex=I%b.ports.length,y.bConnected=!1,p&&(s&&s(),a&&a(e,t),p=!1),y.bConnectNumLimited&&I>=y.IMAXCONNECTCOUNT?(I=0,y.curPortIndex=0,T()(function(){b._checkOldManagerVersion(g,r)},1e3)):T()(function(){b._checkManagerVersion(h,D,v)},1e3),!0};e&&e(),b._checkManagerVersion(h,D,v)},_checkUpdateZip:function(e,i,o,a,t){var s,u,r,c,l,d,h,n=3;s=function s(e,t,r){var n=-1;if(0==(n=r?r.status:n))return T()(function(){b._checkService(d,h)},5e3),!0;r=b._getDSUpdateZipUrl();return y.dcpStatus=y.EnumDCP_DetectStatus.DownloadingZip,b._sendStatusEvent(),S.D.fetch(r,{mode:"cors",dataType:"arraybuffer"}).then(c,u),!0},u=function u(e){y.dcpStatus=y.EnumDCP_DetectStatus.DownloadFailed,i&&i();e="The update package can't be downloaded. The error code is "+e.httpCode+".";return o&&o(!0,e),b._sendStatusEvent(!0,e),T()(a,0),!0},r=function r(e){if(!(S.D.isArray(e)&&1<e.length))return!1;if(1==e[1])y.dcpStatus=y.EnumDCP_DetectStatus.VerifiedZip,b._sendStatusEvent(),y.dcpStatus=y.EnumDCP_DetectStatus.UpdatingService,b._sendStatusEvent(),T()(function(){b._checkService(d,h)},5e3);else{var t=0;if(-2373==(t="exception"in e?e.exception:t))return b._funUpdateFailed(i,o,e,200),T()(a,0),!0;T()(s,0)}return!0},c=function c(e){S.I.dcp.loadZip(e,1,function(e){var t,r;try{S.D.isString(e)&&"result"in(r=S.D.parse(e.replace(/\0/g,"")))&&(t=r.result)}catch(n){}S.D.isArray(t)&&2<t.length&&1==t[2]?T()(function(){b._checkService(d,h)},5e3):(b._funUpdateFailed(i,o,e,200),T()(a,0))},l)},l=function l(e,t,r){var n=-1;return 0==(n=r?r.status:n)?T()(function(){b._checkService(d,h)},5e3):(b._funUpdateFailed(i,o,e,r.status),T()(a,0)),!0},d=function d(e){if(!(S.D.isArray(e)&&0<e.length&&e[0]))return!1;var t=e[0].split(",");return!!b._compareVersion(t,b.getServiceVersion())&&(y.bConnected=!0,i&&i(),y.dcpStatus=y.EnumDCP_DetectStatus.CheckedService,b._sendStatusEvent(!1,e[0]),y.dcpStatus=y.EnumDCP_DetectStatus.UpdateSucceed,b._sendStatusEvent(),T()(a,0),!0)},h=function(e,t){var r=n<3?500:1e3;return--n<0?(b._funShowUpgradeDialogWhenUpdateFailed(i,o),T()(a,0)):T()(function(){b._checkService(d,h)},r),!0},e&&e(),y.dcpStatus=y.EnumDCP_DetectStatus.VerifyingZip,b._sendStatusEvent(),b._checkUpdateFile(r,s)},_getStatusString:function(e,t){var r,n="";return e==y.EnumDCP_DetectStatus.Init?"Getting manager version":e==y.EnumDCP_DetectStatus.Connected?"Getting manager version succeeded and the version is "+(n=t?t:n):e==y.EnumDCP_DetectStatus.DownloadingZip?"Downloading the update package":e==y.EnumDCP_DetectStatus.DownloadedZip?"Update package downloaded":e==y.EnumDCP_DetectStatus.DownloadFailed?(r=".","Update package failed to download"+(t&&0<t.length?("."==o()(t).call(t,t.length-1)&&(r="")," with the error: "+t):"")+r):e==y.EnumDCP_DetectStatus.CheckingManagerVer?"Getting manager version":e==y.EnumDCP_DetectStatus.CheckingServiceVer?"Getting service version":e==y.EnumDCP_DetectStatus.NotInstalled?"Dynamsoft Service Not Installed":e==y.EnumDCP_DetectStatus.UpdateSkipped?"Update skipped":e==y.EnumDCP_DetectStatus.CheckedService?"Getting service version succeeded and the version is "+(n=t?t:n):e==y.EnumDCP_DetectStatus.VerifyingZip?"Verifying the update package":e==y.EnumDCP_DetectStatus.VerifiedZip?"Update package verified":e==y.EnumDCP_DetectStatus.UpdatingService?"Updating the service":e==y.EnumDCP_DetectStatus.UpdateSucceed?"Update succeeded":e==y.EnumDCP_DetectStatus.UpdateFailed?(r=".","The update failed"+(t&&0<t.length?("."==o()(t).call(t,t.length-1)&&(r="")," with the error: "+t):"")+r):""},_sendStatusEvent:function(e,t){e=!!e;S.D.isFunction(h.OnGetServiceUpdateStatus)&&h.OnGetServiceUpdateStatus(e,y.dcpStatus,b._getStatusString(y.dcpStatus,t))},_getErr:function(e){var t,r="";try{S.D.isString(e)?(t=e.replace(/\0/g,""),t=S.D.parse(t)):e&&(t=e),"description"in t&&(r=t.description)}catch(n){}return r},_funShowUpgradeDialogWhenUpdateFailed:function(e,t){return y.bConnected=!0,y.dcpStatus=y.EnumDCP_DetectStatus.UpdateFailed,e&&e(),t&&t(),b._sendStatusEvent(!0),!0},_funUpdateFailed:function(e,t,r,n){var i;return y.bConnected=!0,y.dcpStatus=y.EnumDCP_DetectStatus.UpdateFailed,e&&e(),e=200==n?(i="The update failed.",b._getStatusString(y.dcpStatus,b._getErr(r))):i="The update failed. The error code is "+n,t&&t(!0,i),b._sendStatusEvent(!0,e),!0},getDSPath:function(e,t){var r,n,i=S.I.managerEnv.resourcesPath;return S.I.Lib.isString(i)&&0<i.length?"/"!=i[i.length-1]&&(i+="/"):i="Resources/",t||(r=S.I.navInfo,t=(n=S.I.navInfoSync).bMac?".pkg":r.bArm64?"-arm64.deb":r.bMips64?"-mips64el.deb":n.bLinux||n.bChromeOS||n.bHarmonyOS?".deb":".msi"),[i,"dist/DynamsoftServiceSetup",t].join("")},getLinuxHTML5DebPath:function(){return S.I.dcp.getDSPath(!1,".deb")},getLinuxHTML5RpmPath:function(){return S.I.dcp.getDSPath(!1,".rpm")},newWebsocket:function(e,t){var r,n=b.wsProtocol,i=window.MozWebSocket;if(void 0!==i)r=n?new i(e,n):new i(e);else{var o=window.WebSocket;if(t){var a=window,s=parent;try{for(;a!=s&&s.WebSocket;)o=s.WebSocket,a=s.window,s=s.parent}catch(u){o=window.WebSocket}}r=n?new o(e,n):new o(e)}return r},_checkManagerVersionWS:function(e,t,r){var n=b._getDcpWsPreUrl(0),i={id:(new Date).getTime().toString(),method:"VersionInfo",version:"dwasm2_"+b._getModuleVer(),parameter:[]},o=function o(e){e=S.D.parse(e);e&&"result"in e?t(e.result):r()};return e&&(i.productKey=e),b.postStringDataByWS(n,S.D.stringify(i),o,r)},getWsUrl:function(e,t){return[S.I.navInfoSync.bSSL?"wss://":"ws://",e,":",t,"/"].join("")},postStringDataByWS:function(t,e,n,i){var r=0,o=b.newWebsocket(t,!1);o.onopen=function(){1==o.readyState?(o.onopen=null,o.send(e)):0==o.readyState&&T()(o.onopen,100)},o.onmessage=function(e){var t=e.data;if("object"===(0,a.Z)(t))return e=t=null,i(),void o.close();e=t.replace(/\0/g,"");try{n(e),o.close()}catch(r){S.D.log(t),i(),o.close()}t=null},o.onerror=function(e){if(0==r&&S.I.navInfoSync.bEdge)return r++,void(o=b.newWebsocket(t,!0));e&&S.D.log("websocket error: "+e),i(),o.close()},o.onclose=function(e){o.onclose=null,o.onerror=null,o.onmessage=null}},getBinaryFileInfo:function(i,o){var e,t="GetBinaryFileInfo",r={id:(new Date).getTime().toString(),method:t,version:"dwasm2_"+b._getModuleVer(),parameter:[]},r=S.D.stringify(r),a=function a(e,t,r){var n=b._getJSON(e);n?i(n):o(e,t,r)};if(S.I.DWT.ConnectWithSocket&&S.I.navInfoSync.bHTML5Edition)return e=b._getDcpWsPreUrl(0),b.postStringDataByWS(e,r,a,o);e=[b._getPreUrl(0),b._getModuleName(),b._getModuleVer(),"/",t,"?type=1&dsver=",b.getServiceVersion().join(""),"&ts=",S.D.now()].join(""),S.D.ajax({method:"POST",url:e,timeout:500,data:r,onSuccess:a,onError:o})},checkDcpV3:function(r,n,t){var i=!0,o=0,a=function a(e){return!!(S.D.isArray(e)&&0<e.length&&e[0])&&(b._setDefaultValuesFromServer(e),y.dcpStatus=y.EnumDCP_DetectStatus.UpdateSkipped,b._sendStatusEvent(),T()(t,0),!0)},s=function s(e,t){return++o,y.bConnectNumLimited&&o>=y.IMAXCONNECTCOUNT?(y.bConnected=!1,y.dcpStatus=y.EnumDCP_DetectStatus.NotInstalled,b._sendStatusEvent()):T()(function(){S.I.DWT.ConnectWithSocket&&S.I.navInfoSync.bHTML5Edition?b._checkManagerVersionWS(r,a,s):b._checkManagerVersion(r,a,s)},1e3),i&&(n&&n(e,t),i=!1),!0};y.curPortIndex=0,y.bConnected=!1,S.I.DWT.ConnectWithSocket&&S.I.navInfoSync.bHTML5Edition?b._checkManagerVersionWS(r,a,s):b._checkManagerVersion(r,a,s)}},d=g=p=n,S.D.domReady(function(){0<b.onReadys.length&&S.D.each(b.onReadys,function(e){S.D.isFunction(e)&&e()})}))},1383:function(e,t,r){r.r(t);var n=r(1695),t=r(1255),r={CertificateConfig:{},CustomizableDisplayInfo:{}},i=n.I.DWT;r.RegisterEvent=function(e,t){return("OnWebTwainReady"===e&&n.D.isFunction(t)||"OnWebTwainInitMessage"===e&&n.D.isFunction(t))&&(n.I.DWT[e]=t),!0},n.D.mix(r,t.Sf),n.D.mix(r.CertificateConfig,t.LX),n.D.mix(r.CustomizableDisplayInfo,t.Vn),n.D.mix(r,i),n.I.DWT=r},7378:function(e,t,r){r.r(t);var p=r(1695),t=r(4579),I=r.n(t),D=(r(4393),p.I.DWT),o=(D.CloseDialog=function(){var e,t=p.D.install._dlgInstall;t&&(e=p.D.all(".dynamsoft-dialog-close"),p.D.each(e,function(e,t){p.D.removeEventListener(e,"click",D.CloseDialog)}),t.open&&t.close(),document.body.removeChild(t),p.D.install._dlgInstall=!1)},D.ShowDialog=function(e,t,r,n,i){var o;!1!==r&&(e={width:e,height:t,position:"absolute"},n?(o=['<div class="dynamsoft-dwt-dialog-body">',r,"</div>"].join(""),e.closeButton=!1):o=['<div class="ds-dwt-ui-showdlg">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',i?"":'<div class="dynamsoft-dialog-close"></div>',"</div>",r,"</div>","</div>"].join(""),i&&(e.closeButton=!1),D.ShowMessage(o,e))},D.ShowMessage=function(t,e){var r,n,i,o=p.D.install,a="ds-dwt-ui-dlg",s="ds-dwt-ui-dlg-wrap",u=screen.width,c=!0,l=0,d=!0,h=!0,g=0,f="fixed",m="Error",_=p.D.product.bActiveXEdition,g=(e&&(r=e.width,n=e.height,e.seconds&&(l=e.seconds),e.headerStyle&&(g=e.headerStyle),!1===e.closeButton&&(d=!1),e.bAutoClose&&(i=e.bAutoClose,d=!0),0==e.bReadyClosed&&(c=!1),e.position&&(f=e.position),e.caption&&(m=e.caption)),r?u-10<r&&(r=u-10):r=600<u?600:u-10,n=n||"100%",1==g?t=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',d?'<div class="dynamsoft-dialog-close"></div>':"","</div>",t,"</div></div>"].join(""):2==g&&(t=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:35px;margin-left:15px">',m,"</span>",d?'<div class="dynamsoft-dialog-close"></div>':"","</div>",'<div class="dynamsoft-dwt-ltsdlg-body" style="padding:25px 50px 20px 50px;">',t,"</div></div>"].join("")),0==p.D.one("."+a).length?(e=document.createElement("div"),u=document.createElement("div"),g=document.createElement("div"),e.className=a,u.className=s,u.style.margin="auto",u.style.zIndex="9999",u.style.position="relative",u.style.border="0",i&&((m=document.createElement("div")).className="dynamsoft-dialog-close",u.insertBefore(m,u.firstChild),(a=document.createElement("div")).className="dynamsoft-dialog-closeTimer",a.style.width="100%",a.style.height="2px",a.style.marginTop="-2px",a.style.backgroundColor="#fe8e14",u.insertBefore(a,u.firstChild)),u.appendChild(g),g.innerHTML=t,e.appendChild(u),document.body.appendChild(e),o._dlgInstall=e,p.D.dialog.setup(o._dlgInstall,!1),p.I.navInfoSync.bIE&&((m=document.createElement("iframe")).frameborder="0",m.marginheight="0",m.marginwidth="0",m.style.border="0",m.style.backgroundColor="transparent",m.style.position="absolute",m.style.left=0,m.style.top=0,m.style.width="100%",m.style.height=document.body.clientHeight+"px",m.style.margin="0 auto",m.style.zIndex="9990",m.src=["javas","cript:",'""'].join(""),(a=p.D.one(".dynamsoft-backdrop"))&&0<a.length&&(a[0].innerHTML="",a[0].appendChild(m)))):h=!1,p.D.one("."+s));g&&g.getEL()&&(g[0].style.width=r+"px",p.D.isNumber(n)&&0<n?g[0].style.height=n+"px":g[0].style.height="100%",h||p.D.each(g[0].childNodes,function(e){if("DIV"==e.tagName&&"dynamsoft-dialog-close"!=e.className&&"dynamsoft-dialog-closeTimer"!=e.className)return e.innerHTML=t,!1})),_&&(u=p.D.one(".dynamsoft-dialog"))&&u.getEL()&&(u.getEL().style.border="1px solid #999"),o._dlgInstall.open&&o._dlgInstall.close(),o._dlgInstall.showModal({position:f}),o._dlgInstall.bReadyClosed=c,d&&(e=p.D.all(".dynamsoft-dialog-close"),p.D.each(e,function(e,t){p.D.addEventListener(e,"click",D.CloseDialog)}),0<e.length&&i&&0<l&&I()(p.D._zdgb_xkz_dhk,100))},D.OnWebTwainPreExecute=function(){p.I.Lib.detect.OnWebTwainPreExecute(p.I.DWT.IfConfineMaskWithinTheViewer)},D.OnWebTwainPostExecute=function(){p.I.Lib.detect.OnWebTwainPostExecute()},function o(e,t){var r=p.I.Lib,t=(t||p.I.DWT.CloseDialog(),r.get(r.install._divDWTNonInstallContainerID));if(t&&t.parentNode&&t.parentNode.removeChild(t),e&&r.isDOM(e)&&r.show(e),e&&r.isString(e))r.show(e);else{var n,i=p.I.DWT.Containers;if(i)for(n=0;n<i.length;n++)i[n].ContainerId&&r.show(i[n].ContainerId);if(i=p.I.DWT.DynamicContainers)for(n=0;n<i.length;n++)i[n].ContainerId&&r.show(i[n].ContainerId);i=null}""!=r.install._divDWTemessageContainer&&r.show(r.install._divDWTemessageContainer)}),t=(p.D.win.DCP_DWT_OnClickCloseInstall=o,r(9032),r(7711)),n=r.n(t),i=(r(6870),p.D._zdgb_xkz_dhk=function(){var e,t=p.D.install._dlgInstall;t&&(t=p.D.one(".dynamsoft-dialog-closeTimer",t)).getEL()&&(e=n()(t.getEL().style.width),--e<=0?p.I.DWT.CloseDialog():(t.getEL().style.width=e+"%",I()(p.D._zdgb_xkz_dhk,100)))},p.D.ShowLicenseDialog=p.I.DWT.ShowMessage,p.D.createLoadingBarContent=function(){var e=p.D.loaderBarClassName+"-noserver",t=p.D.loaderBarClassName+"-noserver-parent",r="",n=(""!=p.D.loaderBarBackgroundColor&&(r=";background:"+p.D.loaderBarBackgroundColor),[]);return n.push('<dialog class="dynamsoft-loadingMsg" closed="closed" style="top:30%">'),n.push(['<div class="',t,'" style="margin:0 auto',r,'">'].join("")),n.push(['<div class="',e,'" style="margin:0 auto',r,'">'].join("")),n.push(['<img src="',p.D.loaderBarSource,'" />'].join("")),n.push('</div><h3 class="dynamsoft-loadingMsg-msg"> </h3>'),n.push('<p class="dynamsoft-loadingMsg-desc"> </p>'),n.push("</div></dialog>"),n.join("")},p.D.openLoadingMsg=function(){var e,t;p.D.product.bHTML5Edition&&!p.D.dlgLoadingShowStatus&&p.I.DWT.showLoadingMsgDialog&&(e=p.I.DWT.UseLocalService,p.D.env.bMobile||!p.D.isUndefined(e)&&1!=e?(p.D.detect.hideMask(),p.D.dlgLoading||((e=p.D.one(".dynamsoft-loadingMsg"))&&e.getEL()&&e.remove(),(t=p.D.parseHTML(p.D.createLoadingBarContent()))&&0<t.length&&document.body.appendChild(t[0]),(e=p.D.one(".dynamsoft-loadingMsg"))&&e.getEL()&&(p.D.dlgLoading=e[0],p.D.dialog.setup(p.D.dlgLoading))),p.D.dlgLoading.showModal(),p.D.dlgLoadingShowStatus=!0):p.D.detect.showMask())},p.D.showLoadingMsg=function(e,t,r){var n,i;0!=p.D.dlgLoadingShowStatus&&(p.D.one(".dynamsoft-loadingMsg"),n=p.D.one(".dynamsoft-loadingMsg-msg"),i=p.D.one(".dynamsoft-loadingMsg-desc"),n&&n.getEL()&&n.html(t),i&&i.getEL()&&(p.D.env.bMobile&&(i.getEL().style.fontSize="1.4em"),i.html(r)))},p.D.closeLoadingMsg=function(e){p.D.log("closeLoadingMsg:"+e),p.D.detect.hideMask(),1==p.D.dlgLoadingShowStatus&&(p.D.dlgLoading&&p.D.dlgLoading.close(),p.D.dlgLoadingShowStatus=!1)},r(1255)),a=!0;p.D._funsAfterConfigLoaded=[],p.D._safePromptCustomMsg=function(e){var t,r;p.D.product.loadResourcePath?e&&p.D._funsAfterConfigLoaded.push(e):(a&&(r=p.I.DWT.CustomizableDisplayInfo,p.D.mix(t={},i.Vn),r&&(r.loaderBarClassName&&(t.loaderBarClassName=r.loaderBarClassName),r.loaderBarSource&&(t.loaderBarSource=r.loaderBarSource),r.loaderBarWidth&&(t.loaderBarWidth=r.loaderBarWidth),r.loaderBarHeight&&(t.loaderBarHeight=r.loaderBarHeight),r.errorMessages&&p.D.mix(t.errorMessages,r.errorMessages),r.generalMessages&&p.D.mix(t.generalMessages,r.generalMessages),r.customProgressText&&p.D.mix(t.customProgressText,r.customProgressText),r.buttons&&(r.buttons.titles&&p.D.mix(t.buttons.titles,r.buttons.titles),r.buttons.bShowAllButtons&&p.D.mix(t.buttons.bShowAllButtons,r.buttons.bShowAllButtons),r.buttons.visibility&&p.D.mix(t.buttons.visibility,r.buttons.visibility)),r.dialogText&&p.D.mix(t.dialogText,r.dialogText)),p.I.DWT.CustomizableDisplayInfo=t,a=!1),e&&e())}},5930:function(e,t,r){r.r(t);t=r(1695).I.DWT;t.EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16},t.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2},t.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16},t.EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446},t.EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6},t.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2},t.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16},t.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773},t.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5},t.EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5,IT_MULTIPAGE_PDF:7,IT_MULTIPAGE_TIF:8,IT_J2K:14},t.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7},t.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4},t.EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12},t.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6},t.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2},t.EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113},t.EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54},t.EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3},t.EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1},t.EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7},t.EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2},t.EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3},t.EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1},t.EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8},t.EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4},t.EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1},t.EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4},t.EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1},t.EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6},t.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2},t.EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3},t.EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6},t.EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4},t.EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1},t.EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1},t.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3},t.EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2},t.EnumDWT_PlatformType={enumUnknown:-1,enumWindow:0,enumMac:1,enumLinux:2,enumEmbed:3,enumChromeOS:4,enumHarmonyOS:5},t.EnumDWT_UploadDataFormat={Binary:0,Base64:1},t.EnumDWT_MouseShape={Default:0,Hand:1,Crosshair:2,Zoom:3,NWResize:4,EResize:5,NResize:6,Resize:7,Move:8},t.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8},t.EnumDWT_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5},t.EnumDWT_Driver={TWAIN:0,ICA:3,SANE:3,TWAIN_AND_ICA:4,TWAIN_AND_TWAIN64:4,TWAIN64:5},t.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14},t.EnumDWT_SelectionMode={Single:0,Multiple:1},t.EnumDWT_ConfirmExitType={Cancel:0,Exit:1,SaveAndExit:2}},9435:function(e,t,r){r.r(t);var t=r(5683),n=r.n(t),i=r(1695);function o(e){return i.I.Lib.isString(e)?e:("errorMessage"in e&&(t=e.errorMessage),"message"in e&&(t=e.message),i.I.Lib.isString(t)||(t="message"in t?t.message:""),"errorCode"in e&&-1==n()(t).call(t,"(")&&(t+="("+e.errorCode+")"),"code"in e&&-1==n()(t).call(t,"(")&&(t+="("+e.code+")"),t);var t}i.I.DWT.EnumDWT_Error={ModuleNotExists:-2371},i.D.Errors={OutOfRange:function(e){e._errorCode=-1010,e._errorString="Data parameter out of supported range."},InvalidIndex:function(e){e._errorCode=-1033,e._errorString="Invalid index."},InvalidValue:function(e){e._errorCode=-1034,e._errorString="Invalid value."},NoImage:function(e){e._errorCode=-1035,e._errorString="There is no image."},UnrecognizedExt:function(e){e._errorCode=-1110,e._errorString="Unrecognized file extension."},LoadTextPDFButSetImageOnly:function(e){e._errorCode=-1119,e._errorString="The text-based PDF file was not imported correctly because ConvertMode was set to CM_IMAGEONLY, which means PDF Rasterizer is turned off. Please set ConvertMode to Dynamsoft.DWT.EnumDWT_ConvertMode.CM_AUTO to enable it."},SourceHasNothingToCapture:function(e){e._errorCode=-1029,e._errorString="Source has nothing to capture."},bImageOnlyError_NotPurelyPDF:function(e){return-1416==e},MustUpgradeService:function(e){e._errorCode=-2207,e._errorString="The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website."},Server_Restarted:function(e){e._errorCode=-2208,e._errorString="The connection with the local Dynamsoft Service encountered a problem and has been reset."},HTML5NotSupport:function(e){e._errorCode=-2209,e._errorString="The HTML5 edition does not support this method or property."},CannotCallUIMethodWhenNotBindDefaultViewer:function(e){e._errorCode=-2210,e._errorString="You cannot call this method on this WebTwain instance because it does not use the default viewer."},HttpServerCannotEmpty:function(e){e._errorCode=-2300,e._errorString="Http upload error: the HTTP Server name/ip cannot be empty."},NetworkError:function(e){e._errorCode=-2301,e._errorString="Network error."},InvalidResultFormat:function(e){e._errorCode=-2302,e._errorString="The result format is invalid."},UploadError:function(e,t,r,n){t?(e._errorCode=-2303,e._errorString="Upload cancelled."):(e._errorCode=-2003,n&&0<n||r?(t=["HTTP process error: "],r&&t.push(r),n&&0<n&&t.push(" ("+n+")"),e._errorString=t.join("")+"."):e._errorString="HTTP process error.")},HttpDownloadUrlError:function(e){e._errorCode=-2304,e._errorString="Http download error: the url is invalid."},HttpDownloadError:function(e,t,r,n){t?(e._errorCode=-2305,e._errorString="User cancelled the operation."):(e._errorCode=-2003,n&&0<n||r?(t=["HTTP process error: "],r&&t.push(r),n&&0<n&&t.push(" ("+n+")"),e._errorString=t.join("")+"."):e._errorString="HTTP process error.")},UploadFileCannotEmpty:function(e){e._errorCode=-2306,e._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(e){e._errorCode=-2307,e._errorString="The width or height you entered is invalid."},Server_Invalid:function(e){0==e._errorCode&&(e._errorCode=-2308,e._errorString="The local Dynamsoft Service has been stopped.")},InvalidLocalFilename:function(e,t){e._errorCode=-2309,e._errorString="The LocalFile is empty in the name "+t+" Function."},BarCode_InvalidIndex:function(e,t){e._errorCode=-2310,e._errorString="The index is out of range."},BarCode_InvalidRemoteFilename:function(e){e._errorCode=-2311,e._errorString="The RemoteFile field is empty in the Barcode Download Function."},ImageFileLengthCannotZero:function(e){e._errorCode=-2312,e._errorString="The file length is empty."},UploadExceededMaxSize:function(e){e._errorCode=-2313,e._errorString="The size of the images you are about to upload has exceeded the limit."},ParameterCannotEmpty:function(e){e._errorCode=-2314,e._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(e,t){e._errorCode=-2315,e._errorString="The index is out of range."},Webcam_InvalidRemoteFilename:function(e){e._errorCode=-2316,e._errorString="The RemoteFile field is empty in the Webcam Download Function."},Pdf_InvalidRemoteFilename:function(e){e._errorCode=-2317,e._errorString="The RemoteFile field is empty in the Pdf Download Function."},InvalidDestination:function(e){e._errorCode=-2318,e._errorString="Invalid destination file."},InvalidSourceFile:function(e){e._errorCode=-2319,e._errorString="Invalid source file."},InvalidFile:function(e){e._errorCode=-2320,e._errorString="Invalid file."},hasLicenseError:function(e){return-2348<=e._errorCode&&e._errorCode<=-2325},OCR_InvalidIndex:function(e,t){e._errorCode=-2321,e._errorString="The index is out of range."},OCR_InvalidLeftOrTopOrRightOrBottom:function(e){e._errorCode=-2322,e._errorString="The left or top or right or bottom you entered is invalid."},OCR_InvalidOutputFormat:function(e){e._errorCode=-2323,e._errorString="The OCR output format is not supported."},OCR_InvalidPageSetMode:function(e){e._errorCode=-2324,e._errorString="The OCR page set mode is not supported."},LicenseEmptyOrInvalid:function(e){e._errorCode=-2325,i.I.Lib.License.isLTS()?(e._errorString="The license is invalid.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key is empty or invalid."},LicenseExpired:function(e,t){e._errorCode=-2326;var r="";t&&""!=t&&-1==n()(t).call(t,"on")&&(r=" on "+t),i.I.Lib.License.isLTS()?(e._errorString="The license has expired"+r+".",i.I.DWT.lcexp().then(function(){e._errorString=i.I.DWT.licenseException.message})):e._errorString="The current product key has expired"+r+", please contact the site administrator."},LicenseNoChrome:function(e){e._errorCode=-2327,e._errorString="The current product key does not support Chrome, please contact the site administrator."},LicenseNoFirefox:function(e){e._errorCode=-2328,e._errorString="The current product key does not support Firefox, please contact the site administrator."},LicenseNoIE:function(e){e._errorCode=-2329,e._errorString="The current product key does not support IE, please contact the site administrator."},LicenseNoEdge:function(e){e._errorCode=-2330,e._errorString="The current product key does not support Edge, please contact the site administrator."},LicenseNoSafari:function(e){e._errorCode=-2392,e._errorString="The current product key does not support Safari, please contact the site administrator."},LicenseNoCore:function(e){e._errorCode=-2333,i.I.Lib.License.isLTS()?(e._errorString="The license for the module twain is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key is missing the core license, please contact the site administrator."},LicenseNoWebcam:function(e){e._errorCode=-2338,i.I.Lib.License.isLTS()?(e._errorString="The license for the module direct show is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support Webcam, please contact the site administrator."},LicenseNoPDF:function(e){e._errorCode=-2339,i.I.Lib.License.isLTS()?(e._errorString="The license for the module pdf rasterizer is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support pdf rasterizer, please contact the site administrator."},LicenseNoOCR:function(e){e._errorCode=-2340,i.I.Lib.License.isLTS()?(e._errorString="The license for the module ocr is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support OCR, please contact the site administrator."},LicenseNoOCRPro:function(e){e._errorCode=-2341,i.I.Lib.License.isLTS()?(e._errorString="The license for the module ocr pro is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support OCR pro, please contact the site administrator."},LicenseBadDomain:function(e){e._errorCode=-2342,e._errorString="The domain of your current site does not match the domain bound in the current product key, please contact the site administrator."},LicenseNotSupportBorwser:function(e){e._errorCode=-2343,e._errorString="The current product key does not support your browser, please contact the site administrator."},LicenseNotSupportWindows:function(e){e._errorCode=-2344,e._errorString="The current product key does not support Windows OS, please contact the site administrator."},LicenseNotSupportMAC:function(e){e._errorCode=-2345,e._errorString="The current product key does not support MAC OS, please contact the site administrator."},LicenseNotSupportLinux:function(e){e._errorCode=-2346,e._errorString="The current product key does not support Linux OS, please contact the site administrator."},LicenseNotSupportOS:function(e){e._errorCode=-2347,e._errorString="The current product key does not support your OS, please contact the site administrator."},LicenseLower:function(e){e._errorCode=-2348,e._errorString="The current product key is invalid because it's generated with the licenses of a different major version."},BarcodeLicenseEmpty:function(e){e._errorCode=-2349,e._errorString="The current product key does not include a license for reading barcode, please contact the site administrator."},IndicesCannotEmpty:function(e){e._errorCode=-2350,e._errorString="The indices cannot be empty."},UploadIndexMoreThanOne:function(e){e._errorCode=-2351,e._errorString="You cannot upload more than one image when the format is BMP, JPG or PNG"},IndicesOutOfRange:function(e){e._errorCode=-2352,e._errorString="The indices are out of range."},HttpHeaderNotAllowed:function(e){e._errorCode=-2353,e._errorString="The header name being used is a protected keyword and is not allowed."},HttpHeaderIsEmpty:function(e){e._errorCode=-2354,e._errorString="The header name cannot be empty."},HttpHeaderIsNull:function(e){e._errorCode=-2355,e._errorString="The header name cannot be null."},HttpHeaderIsUndefined:function(e){e._errorCode=-2356,e._errorString="The header name cannot be undefined."},HttpHeaderIsInvalid:function(e){e._errorCode=-2357,e._errorString="The header name you entered is invalid."},IndicesNotArray:function(e){e._errorCode=-2358,e._errorString="The type of the parameter indices must be an Array."},IndexOutOfRange:function(e){e._errorCode=-2359,e._errorString="The index is out of range."},IndexNullOrUndefined:function(e){e._errorCode=-2360,e._errorString="The index is null or undefined."},ConvertBase64IndexMoreThanOne:function(e){e._errorCode=-2361,e._errorString="You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."},InvalidImageType:function(e){e._errorCode=-2362,e._errorString="The image type is not supported."},InvalidDataFormat:function(e){e._errorCode=-2363,e._errorString="The data format is not supported."},InvalidUploadInSegments:function(e){e._errorCode=-2364,e._errorString="Please use a Boolean value for the parameter bUploadInSegments."},InvalidUrl:function(e){e._errorCode=-2365,e._errorString="The url is invalid."},ConvertBase64Failed:function(e){e._errorCode=-2366,e._errorString="Converting images to a base64 string failed."},InvalidSegmentUploadThreshold:function(e){e._errorCode=-2367,e._errorString="Invalid value for the parameter segmentUploadThreshold."},InvalidModuleSize:function(e){e._errorCode=-2368,e._errorString="Invalid value for the parameter moduleSize."},LicenseNotSupportWasm:function(e){e._errorCode=-2369,e._errorString="The current product key is missing the WASM core license, please contact the site administrator."},LicenseNotSupportPdfRWasm:function(e){e._errorCode=-2370,i.I.Lib.License.isLTS()?(e._errorString="The license for the module pdf rasterizer is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support Pdf Rasterizer Wasm, please contact the site administrator."},WebTwainModuleNotExist:function(e){e._errorCode=i.I.DWT.EnumDWT_Error.ModuleNotExists,e._errorString="Dynamic Web TWAIN scanner module is not installed and it is also missing on the server, please contact the site administrator."},ConvertBinaryIndexMoreThanOne:function(e){e._errorCode=-2372,e._errorString="You cannot convert more than one image to binary when the format is BMP, JPG or PNG."},Overlay_InvalidLeftOrTopOrRightOrBottom:function(e){e._errorCode=-2375,e._errorString="The left or top or right or bottom you entered is invalid."},GenerateURL_InvalidRetFromServer:function(e){e._errorCode=-2376,e._errorString="The generate url failed."},ImageCaptureDriverTypeError:function(e){e._errorCode=-2377,e._errorString="Failed to set Image Capture Driver Type."},InvalidTiffTagError:function(e){e._errorCode=-2378,e._errorString="Invalid value for the tiff tag code."},OCR_InvalidRemoteFilename:function(e){e._errorCode=-2379,e._errorString="The RemoteFile field is empty in the OCR Download Function."},Uploader_ModuleError:function(e){e._errorCode=-2380,e._errorString="Please make sure the Uploader Module has been installed."},ScanUploader_InvalidScanSetup:function(e){e._errorCode=-2381,e._errorString="scanSetup is invalid."},ScanUploader_InvalidTransferMode:function(e){e._errorCode=-2382,e._errorString="Scanner setup error: Invalid Transfer Mode."},ScanUploader_InvalidFileXfer:function(e){e._errorCode=-2383,e._errorString="Scanner setup error: fileXfer is invalid."},ScanUploader_InvalidFileXferFilename:function(e){e._errorCode=-2384,e._errorString="Scanner setup error: Invalid fileName in fileXfer."},ScanUploader_InvalidFileXferFileFormat:function(e){e._errorCode=-2385,e._errorString="Scanner setup error: Invalid fileFormat in fileXfer."},ScanUploader_InvalidHttpParams:function(e){e._errorCode=-2386,e._errorString="Output setup error: Invalid httpParams in outputSetup."},ScanUploader_InvalidHttpType:function(e){e._errorCode=-2387,e._errorString="Output setup error: Invalid type in outputSetup."},ScanUploader_InvalidHttpUrl:function(e){e._errorCode=-2388,e._errorString="Output setup error: Invalid url in outputSetup.httpParams."},ScanUploader_InvalidHttpFilename:function(e){e._errorCode=-2389,e._errorString="Output setup error: Invalid fileName in outputSetup.httpParams."},ScanUploader_InvalidOutputFormat:function(e){e._errorCode=-2390,e._errorString="Output setup error: Invalid format in outputSetup."},InvalidImageID:function(e){e._errorCode=-1034,e._errorString="Invalid image ID."},InvalidEventName:function(e){e._errorCode=-2391,e._errorString="Invalid event name."},ConvertBlobIsEmpty:function(e){e._errorCode=-2393,e._errorString="Failed to convert the data to blob."},InvalidTagName:function(e){e._errorCode=-2394,e._errorString="Invalid tag name."},WebTwainModuleDownloadFailure:function(e){e._errorCode=-2395,e._errorString="The module for Dynamic Web TWAIN has failed to download."},LicenseIsFuture:function(e,t){e._errorCode=-2396,e._errorString="The current product key is invalid, please contact the site administrator."},ServiceNotSupport:function(e,t){e._errorCode=-2397,e._errorString=t+" doesn't work under current settings."},MobileNotSupport:function(e,t){e._errorCode=-2400,e._errorString=t+" doesn't work under current settings."},LoadImageFailed:function(e,t){e._errorCode=-2401,e._errorString="Failed to load image: "+o(t)},RotateFailed:function(e,t){e._errorCode=-2402,e._errorString="Failed to rotate image: "+o(t)},FlipFailed:function(e,t){e._errorCode=-2403,e._errorString="Failed to flip image: "+o(t)},MirrorFailed:function(e,t){e._errorCode=-2404,e._errorString="Failed to mirror image: "+o(t)},EraseFailed:function(e,t){e._errorCode=-2405,e._errorString="Failed to erase image: "+o(t)},InvertFailed:function(e,t){e._errorCode=-2406,e._errorString="Failed to invert image: "+o(t)},SaveImageFailed:function(e,t){e._errorCode=-2407,e._errorString="Failed to save image: "+o(t)},ChangeImageSizeFailed:function(e,t){e._errorCode=-2408,e._errorString="Failed to change image size: "+o(t)},CropFailed:function(e,t){e._errorCode=-2409,e._errorString="Failed to crop image: "+o(t)},SkewAngleFailed:function(e,t){e._errorCode=-2410,e._errorString="Failed to skew angle: "+o(t)},ConvertToGrayScaleFailed:function(e,t){e._errorCode=-2411,e._errorString="Failed to convert to gray scale: "+o(t)},ConvertToBWScaleFailed:function(e,t){e._errorCode=-2412,e._errorString="Failed to convert to black and white scale: "+o(t)},SetDPIFailed:function(e,t){e._errorCode=-2413,e._errorString="Failed to set dpi: "+o(t)},SetImageWidthFailed:function(e,t){e._errorCode=-2414,e._errorString="Failed to set image width: "+o(t)},GetLicenseInfoFailed:function(e,t){e._errorCode=-2415,e._errorString="Failed to get license info: "+o(t)},InvalidParameter:function(e){e._errorCode=-2416,e._errorString="Invalid parameter type."},MobileServer_InvalidLeftOrTopOrRightOrBottom:function(e){e._errorCode=-2417,e._errorString="The left or top or right or bottom you entered is invalid."},MobileServer_InvalidWidth:function(e){e._errorCode=-2418,e._errorString="The width you entered is invalid."},MobileServer_InvalidHeight:function(e){e._errorCode=-2419,e._errorString="The height you entered is invalid."},MobileServer_InvalidXResolution:function(e){e._errorCode=-2420,e._errorString="The x resolution you entered is invalid."},MobileServer_InvalidYResolution:function(e){e._errorCode=-2421,e._errorString="The y resolution you entered is invalid."},MobileServer_InvalidImage:function(e){e._errorCode=-2422,e._errorString="The image source is invalid."},MobileServer_InvalidIndex:function(e){e._errorCode=-2423,e._errorString="The index is invalid."},GetMD5Failed:function(e,t){e._errorCode=-2424,e._errorString="Failed to get MD5: "+o(t)},ConvertFromBase64Failed:function(e){e._errorCode=-2425,e._errorString="Converting image from a base64 string failed."},LicenseTrialFullMixed:function(e){e._errorCode=-2426,e._errorString="You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.DWT.ProductKey."},BarcodeReaderError:function(e,t){e._errorCode=-2427,e._errorString=t},TiffTagCountExceedError:function(e){e._errorCode=-2428,e._errorString="Tiff tag count has exceeded the limit."},SelectSourceMustAsync:function(e){e._errorCode=-2429,e._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."},HttpLicenseInvalid:function(e){e._errorCode=-2430,e._errorString="The current product key is invalid."},LicenseNotSupportWebcamWasm:function(e){e._errorCode=-2431,e._errorString="The current product key does not support Webcam Wasm, please contact the site administrator."},InvalidParameterInCallback:function(e){e._errorCode=-2432,e._errorString="Invalid parameter."},ActiveXNotSupport:function(e){e._errorCode=-2433,e._errorString="The ActiveX edition does not support this method or property."},DetectCallbackErr:function(e){e._errorCode=-2434},PerspectiveCallback:function(e){e._errorCode=-2435},webtwain_id_not_string:function(){return'Error: The "WebTwainId" is not a string.'},container_id_not_string:function(){return'Error: The argument you passed to the parameter "conatinerId" is not a string.'},container_id_not_exist:function(e){return'Error: The element specified by the id "'+e+"\" doesn't exist."},StartScanFailed:function(e){e._errorCode=-2436,e._errorString="Operation in progress, please try again when the current operation has finished."},ImageEditorOpenCannotPlayVideo:function(e){e._errorCode=-2437,e._errorString="The video can not be played while the Image Editor is open."},SelectSourceMustAsyncWhenRemote:function(e){e._errorCode=-2438,e._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when the scanning is done on a remote machine."},CannotBindViewerWhenNoViewerJS:function(e){e._errorCode=-2439,e._errorString="You cannot call the method bindViewer() when Dynamsoft.DWT.UseDefaultViewer is set to false."},LongKeyShortKeyMixed:function(e){e._errorCode=-2444,e._errorString="You can only specify the license once and have already specified it with the API ProductKey."},ImageEditorExist:function(e){e._errorCode=-2500,e._errorString="An ImageEditor already exists."},ThumbnailViewerExist:function(e){e._errorCode=-2501,e._errorString="A ThumbnailViewer already exists."},CustomElementExist:function(e){e._errorCode=-2502,e._errorString="A CustomElement already exists."},ImageEditorNotExist:function(e){e._errorCode=-2503,e._errorString="This ImageEditor doesn't exist."},ImageEditorDispose:function(e){e._errorCode=-2504,e._errorString="The ImageEditor object has been disposed."},ThumbnailViewerNotExist:function(e){e._errorCode=-2505,e._errorString="This ThumbnailViewer doesn't exist."},ThumbnailViewerDispose:function(e){e._errorCode=-2506,e._errorString="The ThumbnailViewer object has been disposed."},CustomElementNotExist:function(e){e._errorCode=-2507,e._errorString="This CustomElement doesn't exist."},CustomElementDispose:function(e){e._errorCode=-2508,e._errorString="The CustomElement object has been disposed."},EventNotExist:function(e){e._errorCode=-2509,e._errorString="The specified event doesn't exist."},CallbackNotAFunction:function(e){e._errorCode=-2510,e._errorString="The callback is not a function."},ElementRequired:function(e){e._errorCode=-2511,e._errorString="Parameter 'element' is required."},ElementNotExist:function(e){e._errorCode=-2512,e._errorString="Parameter 'element' doesn't exist."},Destroyed:function(e){e._errorCode=-2513,e._errorString="The WebTwain instance has been destroyed and can not be used anymore."},InvalidPropertyValue:function(e){e._errorCode=-2514,e._errorString="Invalid property value. "},HostNotAvailable:function(e,t){e._errorCode=-2515,e._errorString="The Dynamsoft Service is not configured correctly on "+t+". Please check."},CameraRequired:function(e){e._errorCode=-2516,e._errorString="The camera addon is required."},OldTagNameRequired:function(e){e._errorCode=-2517,e._errorString="Old tag name is required."},NewTagNameRequired:function(e){e._errorCode=-2518,e._errorString="New tag name is required."},CursorInvalidMode:function(e){e._errorCode=-2519,e._errorString="The current mode does not support setting the cursor to zoom-in."},SystemExceptionError:function(e,t){e._errorCode=-2520,e._errorString=t},ChangeContrastFailed:function(e,t){e._errorCode=-2521,e._errorString="Failed to change contrast: "+o(t)},ChangeBrightnessFailed:function(e,t){e._errorCode=-2522,e._errorString="Failed to change brightening: "+o(t)},ConvertToGrayScaleFilterCallbackErr:function(e,t){e._errorCode=-2523,e._errorString='Failed to apply "gray" filter: '+o(t)},ConvertToBWScaleFilterCallbackErr:function(e,t){e._errorCode=-2524,e._errorString='Failed to apply "black and white" filter: '+o(t)},RemoveShadowFilterCallbackErr:function(e,t){e._errorCode=-2525,e._errorString='Failed to apply "remove shadow" filter: '+o(t)},EnhanceAndSharpenFilterCallbackErr:function(e,t){e._errorCode=-2526,e._errorString='Failed to apply "enhance and sharpen" filter: '+o(t)},BrightenFilterCallbackErr:function(e,t){e._errorCode=-2527,e._errorString='Failed to apply "brightening" filter: '+o(t)},SaveTonerCallbackErr:function(e,t){e._errorCode=-2528,e._errorString='Failed to apply "save toner" filter: '+o(t)},GetBlurryScoreErr:function(e,t){e._errorCode=-2529,e._errorString="Failed to get blurry score: "+o(t)},FileNameCannotEmpty:function(e){e._errorCode=-2530,e._errorString="Document name cannot be empty."},FileNameNotString:function(e){e._errorCode=-2531,e._errorString="Document name is not a string."},DocumentEditorNotExist:function(e){e._errorCode=-2532,e._errorString="This documentEditor doesn't exist."},DocumentEditorDispose:function(e){e._errorCode=-2533,e._errorString="The documentEditor object has been disposed."},DocumentEditorExist:function(e){e._errorCode=-2534,e._errorString="A documentEditor already exists."},RgbaImageToBlobErr:function(e,t){e._errorCode=-2535,e._errorString="Failed to convert image data: "+o(t)},LoadTextPDFButNoPdfrLicenseErr:function(e){e._errorCode=-2536,e._errorString="This PDF file is not supported by the Core module. You may need to activate your PDF Rasterizer licence to support this PDF file. Please contact support for further information."},WasmNotLoaded:function(e){e._errorCode=-2537,e._errorString="The wasm not loaded."},WasmNotLoaded_UseWasmFalse:function(e){e._errorCode=-2538,e._errorString="The wasm not loaded when Dynamsoft.DWT.UseCameraAddonWasm is set to false."},LicenseVersionNotCurrent:function(e,t){e._errorCode=-2539,e._errorString="The current product key is not for version ".concat(t,", please contact the site administrator.")},FileNotExist:function(e){e._errorCode=-2540,e._errorString="The document does not exist."},FileExist:function(e){e._errorCode=-2541,e._errorString="The document already exists."},WebviewerError:function(e,t,r){e._errorCode=r||-2600,e._errorString=t},ClearErrorInfo:function(e){e._errorCode=0,e._errorString=""},SetLTSException:function(e){var t=i.I.DWT.licenseException;t.code=e._errorCode,t.message=e._errorString,t.fromLTS=!1},__last:!1}},7843:function(V,e,t){t.r(e);var l,r,n,i,e=t(1614),a=t.n(e),e=t(1006),d=t.n(e),e=t(3701),s=t.n(e),e=t(3662),u=t.n(e),e=t(9798),c=t.n(e),e=t(7682),o=t.n(e),e=t(2825),h=t.n(e),e=t(4579),g=t.n(e),e=t(7711),f=t.n(e),e=t(5683),m=t.n(e),_=t(1188),A=t(4130),B=t(8420),O=t(7344),p=t(4845),I=t(1695),D=function(){function t(e){(0,B.Z)(this,t),(0,p.Z)(this,"m_iUsingTime",0),(0,p.Z)(this,"m_jvUsingTime",void 0),(0,p.Z)(this,"m_countMap",{}),(0,p.Z)(this,"m_newConsum",!1),(0,p.Z)(this,"m_mapSavedToDb",!1),(0,p.Z)(this,"m_minExpiredTime",void 0),(0,p.Z)(this,"m_maxExpiredTime",void 0),(0,p.Z)(this,"m_cu",void 0),(0,p.Z)(this,"m_ar",void 0),(0,p.Z)(this,"m_ltsInstance",void 0),this.clearData(),(this.m_enumInstance=e)==I.I.DWT.EnumInstance.dwt_desktop?this.m_deploymentType="desktop":e!=I.I.DWT.EnumInstance.dwt_browser&&e!=I.I.DWT.EnumInstance.dbr||(this.m_deploymentType="browser")}return(0,O.Z)(t,[{key:"clearData",value:function(){this.m_iUsingTime=0,this.m_jvUsingTime=I.D.nil,this.m_countMap={},this.m_newConsum=!1,this.m_mapSavedToDb=!1,this.m_minExpiredTime=I.D.nil,this.m_maxExpiredTime=I.D.nil,this.m_cu=I.D.nil,this.m_ar=I.D.nil,this.m_ltsInstance=I.D.nil}},{key:"set_cu",value:function(e){this.m_cu=e}},{key:"get_cu",value:function(){return this.m_cu}},{key:"set_ar",value:function(e){this.m_ar=e}},{key:"get_ar",value:function(){return this.m_ar}},{key:"get_ltsInstance",value:function(e){return this.m_ltsInstance||(this.m_ltsInstance=e(this.m_enumInstance)),this.m_ltsInstance}},{key:"inited_ltsInstance",value:function(e){return!!this.m_ltsInstance}},{key:"set_maxExpiredTime",value:function(e){this.m_maxExpiredTime=e}},{key:"get_maxExpiredTime",value:function(){return this.m_maxExpiredTime}},{key:"set_minExpiredTime",value:function(e){this.m_minExpiredTime=e}},{key:"get_minExpiredTime",value:function(){return this.m_minExpiredTime}},{key:"get_deploymentType",value:function(){return this.m_deploymentType}}]),t}(),e=t(668),v=(I.I.DWT.LTS=I.I.DWT.LTS||{},I.I.DWT.lwscmd=[],I.I.DWT.licenseException={code:0,message:"",fromLTS:!1},I.I.DWT.bLTSOnline=!0,I.I.DWT.axInstance=undefined,I.I.DWT.lOnUpdateDWObj=[],I.I.DWT.globalWS=[],I.I.DWT.EnumInstance={dwt_desktop:0,dwt_browser:1,dbr:2},0),b={},y=!1,T=!1,S=!1,w=!1,C=!1,E=Dynamsoft.Lib;function M(){var e=I.I.DWT.handshakeCode;return e=I.I.Lib.isString(e)?e:""}function P(){var e=I.I.DWT.organizationID;return I.I.Lib.isNumber(e)?e=""+e:I.I.Lib.isString(e)||(e=""),e}function W(){return I.I.DWT.JSVersion.split(",")[0]}function x(e){return(e=e===I.I.Lib.nil?Dynamsoft.Lib.IsNeedLoadWasm()?I.I.DWT.EnumInstance.dwt_browser:I.I.DWT.EnumInstance.dwt_desktop:e)==I.I.DWT.EnumInstance.dwt_browser?r=r||new D(e):e==I.I.DWT.EnumInstance.dbr?i=i||new D(e):n=n||new D(e)}I.I.DWT.lupverfy=function(){x(I.I.DWT.EnumInstance.dwt_desktop).get_ltsInstance(F),x(I.I.DWT.EnumInstance.dwt_browser).get_ltsInstance(F),x(I.I.DWT.EnumInstance.dbr).get_ltsInstance(F)},I.I.DWT.lsmid=function(e){x(I.I.DWT.EnumInstance.dwt_desktop).set_cu(e)},I.I.DWT.laddDWTObj=function(t){var r=!1;I.I.Lib.each(I.I.DWT.lOnUpdateDWObj,function(e){if(e==t)return!(r=!0)}),r||I.I.DWT.lOnUpdateDWObj.push(t)},I.I.DWT.lremoveDWTObj=function(r){I.I.Lib.each(I.I.DWT.lOnUpdateDWObj,function(e,t){if(e==r)return u()(e=I.I.DWT.lOnUpdateDWObj).call(e,t,1),!1})},I.I.DWT.lsendUpdateEvt=function(r){var t=[];if(I.I.Lib.each(I.I.DWT.lOnUpdateDWObj,function(e){r==Dynamsoft.DWT.EnumInstance.dwt_desktop?(e.isUsingActiveX()||e._bLocalService)&&t.push(e):r!=Dynamsoft.DWT.EnumInstance.dwt_browser||e.isUsingActiveX()||e._bLocalService||t.push(e)}),0==t.length)return I.I.Lib.Promise.resolve();var e=t[0];return e.isUsingActiveX()?(I.I.Lib.each(t,function(e){e.SetLTSInfo(x(r).get_ar(),x(r).get_cu())}),e.GetLicenseInfo().then(function(e){e&&I.I.Lib.isArray(e.Detail)&&0<e.Detail.length&&Dynamsoft.DWT.lsexp(r,e.Detail[0].ExpireDate)})):(e=e.SetLTSLicenseAsync(x(r).get_ar()).then(function(e){e&&I.I.Lib.isArray(e.Detail)&&0<e.Detail.length&&Dynamsoft.DWT.lsexp(r,e.Detail[0].ExpireDate)}),I.I.Lib.each(t,function(e,t){0!=t&&e.SetLTSLicenseAsync(x(r).get_ar())}),e)},I.I.DWT.lgcb=function(){var e=I.I.navInfo,t=I.I.navInfoSync,r=[];return t.bChrome?r.push("Chrome"):t.bFirefox?r.push("Firefox"):t.bEdge?r.push("Edge"):t.bIE?r.push("IE"):t.bSafari?r.push("Safari"):t.bOpera?r.push("Opera"):e.b360SE?r.push("360SE"):e.bTencentTraveler?r.push("TencentTraveler"):e.bMaxthon?r.push("Maxthon"):e.bMetaSr?r.push("MetaSr"):e.bTheWorld?r.push("TheWorld"):e.bUC?r.push("UC"):e.bHuaWeiBrowser&&r.push("HuaWeiBrowser"),r.push(t.strBrowserVersion),t.bWin?r.push("Windows"):t.bMac?r.push("Mac"):t.bLinux?r.push("Linux"):t.bAndroid?r.push("Android"):t.bChromeOS?r.push("ChromeOS"):t.bHarmonyOS?r.push("HarmonyOS"):Dynamsoft.Lib.env.bMobile?r.push("Mobile OS"):e.bEmbed&&r.push("Embed OS"),r.join(" ")};var k={NetworkError:-2440,Timedout:-2441,JsonError:-2442,CorsError:-2443,Expired:-2445,LtsJsLoadError:-2446,UUIDError:-2447};function F(e){var t,r,n=Dynamsoft.DWT.licenseServer;if(n&&0<n.length)for(t=0;t<n.length;t++)r=n[t],s()(E).call(E,r,"/")||(n[t]=r+"/");var i,o={lf:E.localforage,btoa:E.btoa,atob:E.atob,sutlcb:function(){E.isFunction(Dynamsoft.DWT.lonsend)&&Dynamsoft.DWT.lonsend()},fol:Dynamsoft.DWT.OnFirstOffline,dwt:!0,product:"dwt|dbr"};return e==Dynamsoft.DWT.EnumInstance.dwt_browser||e==Dynamsoft.DWT.EnumInstance.dbr?o.feab=Dynamsoft.DWT.lfeab_wasm:o.feab=Dynamsoft.DWT.lfeab_ax,!Dynamsoft.navInfoSync.bIE&&Dynamsoft.DWT.ltsDebug&&(o.debugLog=console.log),Dynamsoft.LTS&&Dynamsoft.LTS._?Dynamsoft.LTS._.createLtsInstance(o):((e={}).i=i=function i(){return E.Promise.reject({code:k.LtsJsLoadError,message:"The dynamsoft.lts.js load failed."})},e.s=i,e.caret=i,e)}function L(){return o()()}function N(e){var t,e=e?new Date(e):new Date,r="yyyy-MM-ddTHH:mm:ss.SSSZ",n={"M+":e.getUTCMonth()+1,"d+":e.getUTCDate(),"H+":e.getUTCHours(),"h+":e.getUTCHours()%12||12,"m+":e.getUTCMinutes(),"s+":e.getUTCSeconds(),"q+":Math.floor((e.getUTCMonth()+3)/3),"S+":e.getUTCMilliseconds()};for(t in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(e.getUTCFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+t+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?n[t]:("000"+n[t]).substr(("000"+n[t]).length-RegExp.$1.length)));return r}I.I.DWT.lglic=function(t){var r=x(t);if(I.I.DWT.lclex(),r.get_ar()&&r.get_cu())return c().resolve({ar:r.get_ar(),cu:r.get_cu()});var e,n,i,o={engineResourcePath:(o=I.I.DWT.ResourcesPath,i="",[o,i=s()(n=Dynamsoft.Lib).call(n,o,"/")?i:"/","src"].join("")),version:d()(n=I.I.Lib).call(n,I.I.DWT.JSVersion,",","."),pk:M(),dm:location.origin?a()(e=I.I.Lib).call(e,location.origin,"http")?location.origin:"https://localhost":a()(e=I.I.Lib).call(e,location.href,"http")?location.href:"https://localhost",browserInfo:I.I.DWT.lgcb(),deviceFriendlyName:I.I.DWT.DeviceFriendlyName||"",ls:I.I.DWT.licenseServer,sp:I.I.DWT.sessionPassword,og:P(),getMinExpireTime:function(){return r.get_maxExpiredTime()},getMaxExpireTime:function(){return r.get_minExpiredTime()},fol:I.I.DWT.OnFirstOffline};return o.dt=r.get_deploymentType(),t==I.I.DWT.EnumInstance.dwt_desktop&&(o.lsu=r.get_cu()),t!=I.I.DWT.EnumInstance.dbr&&(o.dwt=!0,o.updateLicense=function(e){r.set_ar(e.ar),r.get_cu()||r.set_cu(e.cu),I.I.DWT.lsendUpdateEvt(t)}),r.get_ltsInstance(F).i(o).then(function(e){return r.get_ar()||r.set_ar()(e.ar),r.get_cu()||r.set_cu(e.cu),e})},I.I.DWT.lshow=function(){return{t:l,t2:v,m:h()(b)}},I.I.DWT.lgct=e.ME,I.I.DWT.lcvrf=function(e){var t=e.isUsingActiveX()||e._bLocalService?Dynamsoft.DWT.EnumInstance.dwt_desktop:Dynamsoft.DWT.EnumInstance.dwt_browser;g()(function(){I.I.DWT.lcvrf_(e,t)},1)},I.I.DWT.lcvrf_=function(e,t){var r,n,i,o,a,s=I.I.DWT.lgcb(),u=x(t),s={handShake:M(),organization:P(),clientUuid:u.get_cu(),clientFriendName:"",cw:"",os:s,versionMajor:W(),deploymentType:u.get_deploymentType(),edition:"javascript"},c=function c(e,t){var r,i,n=Dynamsoft.Lib,o=0;n.isString(e)&&""!=e&&"{}"!=e&&t&&n.isArray(t)&&(t.length<1||(i=x(t[0]),t=n.parse(e),I.I.DWT.lclex(),0==v&&(e=L(),r="",l=N(v=e),b={},o=0,n.each(t,function(e,t){(t<o||0==o)&&(o=t,r=e)}),0<o&&i.get_ltsInstance(F).s(I.I.DWT.licenseServer,r,o,!0).then(function(){},function(e){})),n.each(t,function(e,t){var r=!1,n=f()(t);0<n&&n!=o&&(n+18e4<L()&&(r=!0),i.get_ltsInstance(F).s(I.I.DWT.licenseServer,e,t,r).then(function(){},function(e){}))})))};{if(s.product="dwt|dbr",u=h()(s),!e.isUsingActiveX())return s=Dynamsoft.Lib.html5.Funs,r="GetBuffer",n=(0,_.dv)(d()(n=Dynamsoft.Lib).call(n,u,'"','\\"')),u=e._objWS,i=e.clientId,o=(0,A.R)(),I.I.DWT.lwscmd.push({cmd:r,cmdId:o,sFun:c,fFun:a=function a(){},params:[t,e._host]}),s.sendData(u,I.I.DWT.lgj(i,r,n,o),!1,!0);c(e.GetBuffer(u),[t,""])}},I.I.DWT.lavrf=function(e,t,r){var n=1;""!=e&&(1<t&&(n=t),t=L(),0<v&&v+18e4<t&&(T?(b={},I.I.DWT.lavrf__unload()):I.I.DWT.lavrf__(!0,r),t=L()+1,l=N(v=t),b={}),T=!(y=!0),b[e]?b[e]+=n:b[e]=n,0==v&&I.I.DWT.lavrf__(!0,r))},I.I.DWT.lavrf_=function(e,t){y&&(e=e||1,g()(function(){I.I.DWT.lavrf__(!1,t)},e))},I.I.DWT.lavrf__=function(e,t){var r,n=L(),i=!1,e=!!e,o=0,a=(t=x(t=I.I.Lib.isUndefined(t)?I.I.DWT.EnumInstance.dwt_browser:t),y=!1,0==v&&(i=!0,l=N(v=n)),r=v,u=l,{}),s=(a.usingTime=u,{});if(Dynamsoft.Lib.each(b,function(e,t){0<(s[t]=e)&&o++}),a.counts=s,e||r+18e4<n){var e=!0,u=L()+1;if(l=N(v=u),T=!(b={}),0==o)return}else{if(0==o)return;T=!0}a.concurrentDuration=i?1:180;n=I.I.DWT.lgcb(),u={handShake:M(),organization:P(),clientUuid:t.get_cu(),clientFriendName:"",cw:"",os:n,versionMajor:W(),deploymentType:t.get_deploymentType(),edition:"javascript",records:[a],product:"dwt|dbr"},i=h()(u);I.I.DWT.ltsDebug&&N(),I.I.DWT.lclex(),t.get_ltsInstance(F).s(I.I.DWT.licenseServer,i,""+r,e).then(function(){},function(e){})},I.I.DWT.lavrf__unload=function(){var e=L(),t=x(I.I.DWT.EnumInstance.dwt_desktop),r=x(I.I.DWT.EnumInstance.dwt_browser),n=x(I.I.DWT.EnumInstance.dbr),i=(y=!1,0==v&&(l=N(v=e)),e=v,L()+1);l=N(v=i),T=!(b={}),e+=1,I.I.DWT.lclex(),t.inited_ltsInstance()&&t.get_ltsInstance(F).s(I.I.DWT.licenseServer,!1,""+e,!0).then(function(){},function(e){}),r.inited_ltsInstance()&&r.get_ltsInstance(F).s(I.I.DWT.licenseServer,!1,""+e,!0).then(function(){},function(e){}),n.inited_ltsInstance()&&n.get_ltsInstance(F).s(I.I.DWT.licenseServer,!1,""+e,!0).then(function(){},function(e){})},I.I.DWT.lclex=function(){var e=I.I.DWT.licenseException;e.code=0,e.message="",e.httpResponse="",e.fromLTS=!1},I.I.DWT.li=function(e){var t;if(e.axInstance&&(I.I.DWT.axInstance=e.axInstance,I.I.DWT.axInstance))return t=I.I.DWT.axInstance.GetUUID(),I.I.DWT.ltsDebug,x(e.instanceMode).set_cu(t),t;return x(e.instanceMode).get_cu()},I.I.DWT.lfeab_ax=function(i){return new(c())(function(e,t){var r="";if(I.I.DWT.axInstance)try{r=I.I.DWT.axInstance.Encrypt(i,0)}catch(n){}e(r)})},I.I.DWT.lfeab_wasm=function(e){return new(c())(function(t,r){var n=new Dynamsoft.Imagecore;n.getAesResult(e).then(function(e){n.terminate(),t(e)},function(e){n.terminate(),r(e)})})},I.I.DWT.lgj=function(e,t,r,n){var i=[],e=(i.push("{"),i.push('"id":"'),i.push(e),i.push('"'),n&&(i.push(',"cmdId":"'),i.push(n),i.push('"')),i.push(',"method":"'),i.push(t),i.push('"'),i.push(',"module":"dwt","version":"'),Dynamsoft.Lib),n=[e.product.getDWTPrefix(),e.product.getServerVersionInfo()].join("");return i.push(n),i.push('"'),r!==undefined&&null!==r&&(i.push(',"parameter":'),i.push(r)),i.push("}"),i.join("")},I.I.DWT.lwsproc=function(e){var t,r;if(0<=m()(e).call(e,"Exception:")||0==m()(e).call(e,"Error"))return t=e,void((r=Dynamsoft.DWT.lwscmd.pop()||{}).fFun&&r.fFun({code:-2520,message:t}));try{e=Dynamsoft.Lib.parse(e)}catch(a){return void((r=I.I.DWT.lwscmd.pop()||{}).fFun&&r.fFun(a))}if(e.cmdId){for(var n=-1,i=Dynamsoft.DWT.lwscmd.length-1;0<=i;i--)if(Dynamsoft.DWT.lwscmd[i].cmdId==e.cmdId){var o,n=i;r=u()(o=Dynamsoft.DWT.lwscmd).call(o,n,1)[0];break}if(n<0)return}"GetBuffer"==e.method?e.exception!==undefined&&e.description!==undefined?r.fFun&&r.fFun({code:e.exception,message:e.description}):r.sFun&&0<e.result.length?r.sFun(e.result[0],r.params):r.sFun("",r.params):r.sFun&&r.sFun(e)},I.I.DWT.lsexp=function(e,t){3==(n=(t=d()(n=I.I.Lib).call(n,t,"/","-")).split("-")).length&&(i=n[0],r=n[1],n=n[2],t=[i,r=r.length<2?(r="00"+r).substr(r.length-2):r,n=n.length<2?(n="00"+n).substr(n.length-2):n].join("-"));var r,n,i=[t,"T23:59:59.999Z"].join("");x(e).set_minExpiredTime(i),x(e).set_maxExpiredTime(i)},I.I.DWT.lunload=function(){I.I.DWT.lavrf__unload();var e=x(I.I.DWT.EnumInstance.dwt_desktop),t=x(I.I.DWT.EnumInstance.dwt_browser),r=x(I.I.DWT.EnumInstance.dbr);e.clearData(),t.clearData(),r.clearData(),v=0,l=I.I.Lib.nil,C=w=S=y=T=!(b={}),I.I.DWT.lwscmd=[],I.I.DWT.lclex(),I.I.DWT.bLTSOnline=!0,I.I.DWT.axInstance=I.I.Lib.nil,I.I.DWT.lOnUpdateDWObj=[],I.I.DWT.globalWS=[]},I.I.DWT.lcexp=function(e){return x(e).get_ltsInstance(F).caret().then(function(){return!1},function(e){var t=Dynamsoft.DWT.licenseException,r="";return e instanceof Error||"message"in e?r=e.message:I.I.Lib.isString(e)&&(r=e),I.I.DWT.lsetException(k.Expired,r,!1),w||(w=!0,console&&console.error,Dynamsoft.OnLTSLicenseError&&Dynamsoft.OnLTSLicenseError(Dynamsoft.Lib.License.getPublicLicenseContent(t.message))),!0})},I.I.DWT.OnLicenseException=function(){var e,t,r,n=I.I.DWT.licenseException,i=n.message;I.I.Lib.isString(i)&&(-1<m()(i).call(i,"Error Code")?i=d()(e=I.I.Lib).call(e,i,"Error Code","error code"):-1<m()(i).call(i,"Error code")&&(i=d()(e=I.I.Lib).call(e,i,"Error code","error code"))),-1<m()(i).call(i,"(https://www.dynamsoft.com/purchase-center/)")&&(i=i.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamic-web-twain/)"),n.message=i),-1<m()(i).call(i,"error code:")?(e=i.substr(0,m()(i).call(i,"message")),t=i.substr(m()(i).call(i,"message")),-1<m()(e).call(e,"{")&&(e=e.substr(m()(e).call(e,"{")+1)),-1<m()(t).call(t,"}")&&(t=t.substr(0,m()(t).call(t,"}"))),e=d()(r=I.I.Lib).call(r,e,"error code:",""),t=d()(r=I.I.Lib).call(r,t,"message: ",""),I.I.DWT.lsetException(f()(e),t,!0),console&&console.error,Dynamsoft.OnLTSLicenseError&&Dynamsoft.OnLTSLicenseError(Dynamsoft.Lib.License.getPublicLicenseContent(i))):(n.code||(r=k.NetworkError,-1<m()(i).call(i,"timed out")||-1<m()(i).call(i,"timeout")?r=k.Timedout:(-1<m()(i).call(i,"access-control-allow-origin")||-1<m()(i).call(i,"cors"))&&(r=k.CorsError),I.I.DWT.lsetException(r,i,!0)),console&&console.error,n.code!=k.LtsJsLoadError&&Dynamsoft.OnLTSLicenseError&&Dynamsoft.OnLTSLicenseError(Dynamsoft.Lib.License.getPublicLicenseContent(n.message)))},I.I.DWT.lol=function(){return I.I.DWT.bLTSOnline},I.I.DWT.OnFirstOffline=function(e){I.I.DWT.bLTSOnline=!1},I.I.DWT.lpubdlg=function(e,t){if(I.I.Lib.isString(e)&&""!=e){if(e=I.I.Lib.atob(e),console&&console.warn,1==t)return S||(S=!0,Dynamsoft.OnLTSPublicLicenseMessage&&Dynamsoft.OnLTSPublicLicenseMessage(Dynamsoft.Lib.License.getPublicLicenseContent(e))),!0;2==t&&(S=S||!0)}return!1},I.I.DWT.lcheckLic=function(e,r){var t,n=!1;if(r){if(I.I.Lib.isArray(r.Detail))if(0<r.Detail.length)return t=r.Detail[0].ExpireDate,Dynamsoft.DWT.lsexp(e,t),Dynamsoft.DWT.lcexp().then(function(e){var t=!1;e?t=!0:1!=r.Trial&&2!=r.Trial||(t=I.I.DWT.lpubdlg(r.Message,r.Trial)),t||I.I.DWT.bLTSOnline||C||(C=!0,Dynamsoft.OnLTSConnectionWarning&&Dynamsoft.OnLTSConnectionWarning())});1!=r.Trial&&2!=r.Trial||(n=I.I.DWT.lpubdlg(r.Message,r.Trial))}n||I.I.DWT.bLTSOnline||C||(C=!0,Dynamsoft.OnLTSConnectionWarning&&Dynamsoft.OnLTSConnectionWarning())},I.I.DWT.lisValidID=function(e){if(I.I.Lib.isString(e)&&""!=e)return!0;var e=I.I.DWT.licenseException;return I.I.DWT.lsetException(k.UUIDError,"Failed to generate an ID for your device to license it: not enough permission.",!0),console&&console.error,e=e.message,Dynamsoft.OnLTSUUIDError&&Dynamsoft.OnLTSUUIDError(e),!1},I.I.DWT.lsetException=function(e,t,r){var n=Dynamsoft.DWT.licenseException;n.code=e,n.message=t,I.I.Lib.isUndefined(r)||(n.fromLTS=r)}},6831:function(e,t,r){r.r(t);var t=r(3662),c=r.n(t),t=r(4579),u=r.n(t),t=r(9798),i=r.n(t),t=r(5683),a=r.n(t),l=r(1695),t=r(7711),n=r.n(t);function s(e,t){var r=this,n=0,e=l.D.isString(e)?document.getElementById(e):e,i=(r.isLoaded=!1,r.displayType=0,r.progress=0,r.progressPosition=0,r.borderWidth={left:0,right:0,top:0,bottom:0},r.orientation=t.orientation||s.Orientation.Horizontal,r.direction=t.direction||s.Direction.LeftToRight,r.creationType=t.creationType||s.CreationType.Replace,r.value=0,r.initialValue=t.value||0,r.minValue=t.minValue||0,r.maxValue=t.maxValue||100,r.showLabel="undefined"==typeof t.showLabel||t.showLabel,r.labelText=t.labelText||"",r.width=t.width||280,r.height=t.height||20,r.borderRadius=t.borderRadius||10,r.orientation==s.Orientation.Horizontal&&r.borderRadius>r.height/2&&(r.borderRadius=Math.round(r.height/2)),r.orientation==s.Orientation.Vertical&&r.borderRadius>r.width/2&&(r.borderRadius=Math.round(r.width/2)),r.backColor=t.backColor||"",r.color=t.color||"#50a8e1",r.animationStyle=0,r.animationInterval=t.animationInterval||100,["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"]);for(r.extraClassName={},n=0;n<i.length;n++)t.extraClassName?"string"==typeof t.extraClassName?r.extraClassName[i[n]]=t.extraClassName:r.extraClassName[i[n]]=t.extraClassName[i[n]]||"":r.extraClassName[i[n]]="";r.onLoad=t.onLoad||null,r.onValueChanged=t.onValueChanged||null,r.onAnimate=t.onAnimate||null,r.creationType==s.CreationType.Replace?r.parentElement=e:(r.parentElement=document.createElement("DIV"),e.appendChild(r.parentElement)),r.finishLoading()}s.Orientation={Horizontal:0,Vertical:1},s.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1},s.CreationType={Replace:0,AppendChild:1},s.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24},s.prototype.finishLoading=function(){for(var e,t=this,r=(t.wrapperElement=null,t.backgroundElement=null,t.valueElement=null,t.leftElement=null,t.middleElement=null,t.rightElement=null,t.backgroundElement=document.createElement("DIV"),t.backgroundElement.className="progressbar_background"+(t.extraClassName.background?" ":"")+t.extraClassName.background,t.backgroundElement.style.cssText=t.backgroundElement.style.cssText+s._createBorderRadiusCss(t.borderRadius),t.parentElement.appendChild(t.backgroundElement),["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"]),n=0,i="",n=0;n<r.length&&!(i=s._elementCurrentStyle(t.backgroundElement,r[n]))&&"string"!=typeof i;n++);""!=i&&s._parseInt(i)!=t.borderRadius&&(t.borderRadius=s._parseInt(i)),t.orientation==s.Orientation.Horizontal||t.orientation==s.Orientation.Vertical?t.displayType=0:t.displayType=1,t.parentElement.className=(""!=t.parentElement.className?" ":"")+"progressbar_parent dynamsoft-progressBar"+(t.extraClassName.parent?" ":"")+t.extraClassName.parent,0==t.displayType?((e=t.wrapperElement=document.createElement("DIV")).style.border="1px solid #A0A0A0",e.style.cssFloat="left",e.style.display="inline-block",e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.left="0px",e.style.top=-t.height+"px",e.style.backgroundColor=t.backColor,e.style.backgroundRepeat="no-repeat",e.style.position="relative",e.style.cssText=e.style.cssText+s._createBorderRadiusCss(t.borderRadius),t.parentElement.appendChild(e),t.borderWidth={left:s._parseInt(s._elementCurrentStyle(e,"border-left-width")),right:s._parseInt(s._elementCurrentStyle(e,"border-right-width")),top:s._parseInt(s._elementCurrentStyle(e,"border-top-width")),bottom:s._parseInt(s._elementCurrentStyle(e,"border-bottom-width"))}):1==t.displayType&&(t.orientation==s.Orientation.Horizontal?t.borderRadius>t.width/2&&(t.borderRadius=t.width):t.orientation==s.Orientation.Vertical&&t.borderRadius>t.height/2&&(t.borderRadius=t.height),t.valueElement=document.createElement("DIV"),t.valueElement.className="",t.leftElement=document.createElement("DIV"),t.middleElement=document.createElement("DIV"),t.rightElement=document.createElement("DIV"),t.leftElement.style.border="1px solid #A0A0A0",t.leftElement.style.cssFloat="left",t.leftElement.style.display="inline-block",t.leftElement.style.backgroundColor=t.backColor,t.leftElement.style.backgroundRepeat="no-repeat",t.leftElement.style.position="relative",t.rightElement.style.border="1px solid #A0A0A0",t.rightElement.style.cssFloat="left",t.rightElement.style.display="inline-block",t.rightElement.style.backgroundColor=t.backColor,t.rightElement.style.backgroundRepeat="no-repeat",t.rightElement.style.position="relative",t.middleElement.style.border="1px solid #A0A0A0",t.middleElement.style.cssFloat="left",t.middleElement.style.display="inline-block",t.middleElement.style.overflow="hidden",t.middleElement.style.position="relative",t.valueElement.style.backgroundColor=t.backColor,t.valueElement.style.position="relative",t.orientation==s.Orientation.Horizontal?(t.leftElement.style.width=t.borderRadius+"px",t.leftElement.style.height=t.height+"px",t.leftElement.style.top=-t.height+"px",t.leftElement.style.left="0px",t.leftElement.style.borderRight="none",t.leftElement.style.cssText=t.leftElement.style.cssText+s._createBorderRadiusCss(t.borderRadius,0,0,t.borderRadius),t.rightElement.style.width=t.borderRadius+"px",t.rightElement.style.height=t.height+"px",t.rightElement.style.top=-t.height+"px",t.rightElement.style.borderLeft="none",t.rightElement.style.cssText=t.rightElement.style.cssText+s._createBorderRadiusCss(0,t.borderRadius,t.borderRadius,0),t.middleElement.style.width=t.width-2*t.borderRadius+"px",t.middleElement.style.height=t.height+"px",t.middleElement.style.top=-t.height+"px",t.middleElement.style.borderLeft="none",t.middleElement.style.borderRight="none",t.valueElement.style.width="0px",t.valueElement.style.height=t.height+"px"):t.orientation==s.Orientation.Vertical&&(t.leftElement.style.width=t.width+"px",t.leftElement.style.height=t.borderRadius+"px",t.leftElement.style.top=-t.height+"px",t.leftElement.style.left="0px",t.leftElement.style.borderBottom="none",t.leftElement.style.cssText=t.leftElement.style.cssText+s._createBorderRadiusCss(t.borderRadius,t.borderRadius,0,0),t.rightElement.style.width=t.width+"px",t.rightElement.style.height=t.borderRadius+"px",t.rightElement.style.top=-t.height+"px",t.rightElement.style.left="0px",t.rightElement.style.borderTop="none",t.rightElement.style.cssText=t.rightElement.style.cssText+s._createBorderRadiusCss(0,0,t.borderRadius,t.borderRadius),t.middleElement.style.width=t.width+"px",t.middleElement.style.height=t.height-2*t.borderRadius+"px",t.middleElement.style.top=-t.height+"px",t.middleElement.style.left="0px",t.middleElement.style.borderTop="none",t.middleElement.style.borderBottom="none",t.valueElement.style.width=t.width+"px",t.valueElement.style.height="0px"),t.middleElement.appendChild(t.valueElement),t.parentElement.appendChild(t.leftElement),t.parentElement.appendChild(t.middleElement),t.parentElement.appendChild(t.rightElement),t.orientation==s.Orientation.Horizontal?t.borderWidth={left:s._parseInt(s._elementCurrentStyle(t.leftElement,"border-left-width")),right:s._parseInt(s._elementCurrentStyle(t.rightElement,"border-right-width")),top:s._parseInt(s._elementCurrentStyle(t.middleElement,"border-top-width")),bottom:s._parseInt(s._elementCurrentStyle(t.middleElement,"border-bottom-width"))}:t.orientation==s.Orientation.Vertical&&(t.borderWidth={left:s._parseInt(s._elementCurrentStyle(t.middleElement,"border-left-width")),right:s._parseInt(s._elementCurrentStyle(t.middleElement,"border-right-width")),top:s._parseInt(s._elementCurrentStyle(t.leftElement,"border-top-width")),bottom:s._parseInt(s._elementCurrentStyle(t.rightElement,"border-bottom-width"))})),t.parentElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px",t.parentElement.style.height=t.height+t.borderWidth.top+t.borderWidth.bottom+"px",t.backgroundElement.style.cssFloat="left",t.backgroundElement.style.display="inline-block",t.backgroundElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px",t.backgroundElement.style.height=t.height+"px",t.backgroundElement.style.backgroundColor="#FFFFFF",t.backgroundElement.style.position="relative",0==t.displayType&&(t.backgroundElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px"),t.backgroundElement.style.top=t.borderWidth.top+"px",t.markerElement=document.createElement("DIV"),t.markerElement.style.display="inline-block",t.markerElement.style.zoom="1.0",t.markerElement.style.width=t.width+"px",t.markerElement.style.height=t.height+"px",t.markerElement.style.top=2*-t.height-t.borderWidth.top+"px",t.markerElement.style.left=t.borderWidth.left+"px",t.markerElement.style.backgroundColor=t.color,t.markerElement.style.lineHeight=t.height+"px",t.markerElement.style.position="relative",t.parentElement.appendChild(t.markerElement),t.isLoaded=!0,t.setValue(t.initialValue),null!=t.onLoad&&t.onLoad()},s.prototype.setValue=function(e){var t,r,n,i,o=this;null!==(e=null!==(e=null!==e&&e<o.minValue?o.minValue:e)&&e>o.maxValue?o.maxValue:e)&&(o.value=e),o.isLoaded&&(e=0,o.orientation==s.Orientation.Horizontal?(e=o.value/o.maxValue*o.width,o.progressPosition=e,0==o.displayType?(o.direction,s.Direction.LeftToRight):1==o.displayType&&(o.direction==s.Direction.LeftToRight?e<=o.borderRadius?o.valueElement.style.width="0px":e>=o.width-o.borderRadius?o.valueElement.style.width=o.middleElement.style.width:o.valueElement.style.width=e-o.borderRadius+"px":e<=o.borderRadius?o.valueElement.style.width="0px":e>=o.width-o.borderRadius?(o.valueElement.style.left="0px",o.valueElement.style.width=o.middleElement.style.width):(o.valueElement.style.left=o.width-e-o.borderRadius+"px",o.valueElement.style.width=e-o.borderRadius+"px")),0<e?(o.animationStyle!=s.AnimationStyle.StaticFull&&o.animationStyle!=s.AnimationStyle.CustomFull?o.markerElement.style.width=e+"px":o.markerElement.style.width=o.width+"px",o.markerElement.style.visibility="visible"):(o.markerElement.style.width=o.width+"px",o.animationStyle!=s.AnimationStyle.StaticFull&&o.animationStyle!=s.AnimationStyle.CustomFull&&(o.markerElement.style.visibility="hidden")),o.animationStyle==s.AnimationStyle.StaticFull||o.animationStyle==s.AnimationStyle.CustomFull||o.direction==s.Direction.LeftToRight?o.markerElement.style.left=o.borderWidth.left+"px":o.markerElement.style.left=o.width-e+o.borderWidth.left+"px",o.height,o.height,o.borderWidth.top,i=2*-o.height-o.borderWidth.top,0==e||o.width==e?(o.markerElement.style.top=i+"px",o.markerElement.style.height=o.height+"px",o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius)):e<o.borderRadius?(n=o.height-2.25*(o.borderRadius-Math.sqrt(Math.pow(o.borderRadius,2)-Math.pow(o.borderRadius-e,2))),r=i+o.height/2-n/2,o.markerElement.style.top=r+"px",o.markerElement.style.height=n+"px",o.direction==s.Direction.LeftToRight?o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius,0,0,o.borderRadius):o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(0,o.borderRadius,o.borderRadius,0)):o.width-e<o.borderRadius?(t=(2*(o.borderRadius-(o.width-e))+(o.borderRadius-Math.sqrt(Math.pow(o.borderRadius,2)-Math.pow(o.borderRadius-(o.width-e),2))))/3,o.direction==s.Direction.LeftToRight?o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius,t,t,o.borderRadius):o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(t,o.borderRadius,o.borderRadius,t)):(o.markerElement.style.top=i+"px",o.markerElement.style.height=o.height+"px",o.direction==s.Direction.LeftToRight?o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius,0,0,o.borderRadius):o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(0,o.borderRadius,o.borderRadius,0))):o.orientation==s.Orientation.Vertical&&(e=o.value/o.maxValue*o.height,o.progressPosition=e,0==o.displayType?(o.direction,s.Direction.TopToBottom):1==o.displayType&&(o.direction==s.Direction.TopToBottom?e<=o.borderRadius?o.valueElement.style.height="0px":e>=o.height-o.borderRadius?o.valueElement.style.height=o.middleElement.style.height:o.valueElement.style.height=e-o.borderRadius+"px":e<=o.borderRadius?o.valueElement.style.height="0px":e>=o.height-o.borderRadius?(o.valueElement.style.top="0px",o.valueElement.style.height=o.middleElement.style.height):(o.valueElement.style.top=o.height-e-o.borderRadius+"px",o.valueElement.style.height=e+2*o.borderRadius+"px")),0<e?(o.animationStyle!=s.AnimationStyle.StaticFull&&o.animationStyle!=s.AnimationStyle.CustomFull?o.markerElement.style.height=e+"px":(o.markerElement.style.height=o.height+"px",o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius)),o.markerElement.style.visibility="visible"):(o.markerElement.style.height="0px",o.animationStyle!=s.AnimationStyle.StaticFull&&o.animationStyle!=s.AnimationStyle.CustomFull&&(o.markerElement.style.visibility="hidden")),o.borderWidth.left,r=o.borderWidth.left,0==e||o.height==e?(o.markerElement.style.left=r+"px",o.markerElement.style.width=o.width+"px",o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius)):e<o.borderRadius?((n=2.5*e)>o.width&&(n=o.width),i=r+o.width/2-n/2,o.markerElement.style.left=i+"px",o.markerElement.style.width=n+"px",o.direction==s.Direction.BottomToTop?o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(0,0,o.borderRadius,o.borderRadius):o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius,o.borderRadius,0,0)):o.height-e<o.borderRadius?(t=(2*(o.borderRadius-(o.height-e))+(o.borderRadius-Math.sqrt(Math.pow(o.borderRadius,2)-Math.pow(o.borderRadius-(o.height-e),2))))/3,o.direction==s.Direction.BottomToTop?o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(t,t,o.borderRadius,o.borderRadius):o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius,o.borderRadius,t,t)):(o.markerElement.style.left=r+"px",o.markerElement.style.width=o.width+"px",o.direction==s.Direction.BottomToTop?o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(0,0,o.borderRadius,o.borderRadius):o.markerElement.style.cssText=o.markerElement.style.cssText+s._createBorderRadiusCss(o.borderRadius,o.borderRadius,0,0)),o.animationStyle==s.AnimationStyle.StaticFull||o.animationStyle==s.AnimationStyle.CustomFull||o.direction==s.Direction.TopToBottom?o.markerElement.style.top=2*-o.height-o.borderWidth.top+"px":o.markerElement.style.top=-o.height-e-o.borderWidth.top+"px"),o.progress=o.value/o.maxValue),null!=o.onValueChanged&&o.onValueChanged()},s._elementCurrentStyle=function(e,t){if(e.currentStyle){for(var r=0,n="",i=!1,r=0;r<t.length;r++)i="-"==t[r].toString()||(n+=i?t[r].toString().toUpperCase():t[r].toString(),!1);return t=n,e.currentStyle[t]}return getComputedStyle(e,null).getPropertyValue(t)},s._parseInt=function(e){e=n()(e);return e=isNaN(e)?0:e},s._createBorderRadiusCss=function(e,t,r,n){return null!=e&&null==t&&null==r&&null==n?"; -moz-border-radius: "+e+"px; -ms-border-radius: "+e+"px; -o-border-radius: "+e+"px; -webkit-border-radius: "+e+"px; -khtml-border-radius: "+e+"px; border-radius: "+e+"px;":"; -moz-border-radius: "+(e=e||0)+"px "+(t=t||0)+"px "+(r=r||0)+"px "+(n=n||0)+"px; -ms-border-radius: "+e+"px "+t+"px "+r+"px "+n+"px; -o-border-radius: "+e+"px "+t+"px "+r+"px "+n+"px; -webkit-border-radius: "+e+"px "+t+"px "+r+"px "+n+"px; -khtml-border-radius: "+e+"px "+t+"px "+r+"px "+n+"px; border-radius: "+e+"px "+t+"px "+r+"px "+n+"px;"};var d,o=s,t=l.I.DWT,h=l.I.navInfo,g=l.D.each;function f(e,t,r){var n={host:e,port:t,ssl:r,ws:null};return new(i())(function(e,t){l.I.DWT;if(l.D.product.bHTML5Edition)try{n.ws=l.D.getWS(n.host,n.port,n.ssl),l.D.log(["connecting ... [host ssl port:",n.host,n.ssl,n.port,"]"].join(" ")),n.ws.onopen=function(){1==n.ws.readyState?e(n):0==n.ws.readyState&&u()(n.ws.onopen,100)},n.ws.onclose=n.ws.onerror=function(){l.I.Lib.each(l.I.DWT.globalWS,function(e,t){if(e==n.ws)return c()(e=l.I.DWT.globalWS).call(e,t,1),!1}),n.ws.onopen=null,n.ws.onclose=null,n.ws.onerror=null,n.ws=null,t("WebSocket closed.")}}catch(r){l.D.log(r),n.ws&&(l.I.Lib.each(l.I.DWT.globalWS,function(e,t){if(e==n.ws)return c()(e=l.I.DWT.globalWS).call(e,t,1),!1}),n.ws.onopen=null,n.ws.onclose=null,n.ws.onerror=null,n.ws=null),t(r.message)}else t("This browser is currently not supported. Please try Chrome or Firefox!")})}l.D.ProgressBar=o,l.D.env.WSVersion="12.0.0",l.D.env.WSSession=(new Date).getTime(),l.D.getHttpUrl=function(e){return(e.ssl?["https://",e.host,":",e.port,"/"]:["http://",e.host,":",e.port,"/"]).join("")},l.D.getWSUrl=function(e,t,r){return(r?["wss://",e,":",t]:["ws://",e,":",t]).join("")},l.D.getWS_bywsurl=function(e){var t=l.D.product.wsProtocol,r=window.MozWebSocket;if(this.detect.OnCreatWS&&this.detect.OnCreatWS(e,t),void 0!==r)i=t?new r(e,t):new r(e);else{var n=window.WebSocket,i=t?new n(e,t):new n(e);if(3==i.readyState&&l.I.navInfoSync.bEdge){var o=window,a=parent;try{for(;o!=a&&a.WebSocket;)n=a.WebSocket,o=a.window,a=a.parent;i=t?new n(e,t):new n(e)}catch(s){}}}return l.I.DWT.globalWS.push(i),i},l.D.getWS=function(e,t,r){e=l.D.getWSUrl(e,t,r);return l.D.getWS_bywsurl(e)},l.D._init=function(e){var t,r=l.I.Lib,n=l.I.dcp,i=r.LS.item("DWT_port"),o=r.LS.item("DWT_ssl");if(n.bEnhancedMode)return!0;if(c()(n=r.detect.urls).call(n,0),r.detect.cUrlIndex=0,!e.bLocalService)return!0;i!==d&&o!==d&&(t={port:i,ssl:"true"==o});var a=function a(e){return!t||!(!e||e.port==t.port&&e.ssl==t.ssl)};1===r.detect.detectType?(t!==d&&t.ssl&&r.detect.urls.push(t),g(r.detect.ports,function(e){e.ssl&&a(e)&&r.detect.urls.push(e)})):0===r.detect.detectType?(t===d||t.ssl||r.detect.urls.push(t),g(r.detect.ports,function(e){!1===e.ssl&&a(e)&&r.detect.urls.push(e)})):(t!==d&&r.detect.urls.push(t),g(r.detect.ports,function(e){a(e)&&r.detect.urls.push(e)}))},l.D._reconnect=function(){var e=l.I.DWT.ContainerMap;e&&l.D.each(e,function(e,t){l.D._reconnectDWT(e)})},l.D._reconnectDWT=function(e){var t,r,n,i;if(e&&!e.__bConnecting&&!e.bReady){e.__bConnecting=!0,t=e._host,n=e._ssl,r=e._port;try{(i=l.D.getWS(t,r,n)).onopen=function(){1==i.readyState?((e._objWS=i).clientId=e.clientId,e.bReady||e._OnReady(!0),e.__bConnecting=!1,l.D.detect.hideMask(),l.D.detect.bOK=!0):0==i.readyState?u()(i.onopen,100):e.__bConnecting=!1},i.onclose=i.onerror=function(){i.onopen=null,e.__bConnecting=!1,e.bReady?(l.D.closeProgress(e,"Reconnect"),l.D.detect.hideMask()):(e.__wsRetry++,e.__wsRetry<5?u()(l.D._reconnect,500):(l.D.closeProgress(e,"Reconnect"),l.D.Errors.Server_Restarted(e))),l.I.Lib.each(l.I.DWT.globalWS,function(e,t){if(e==i)return c()(e=l.I.DWT.globalWS).call(e,t,1),!1})}}catch(o){l.D.log(o),i&&l.I.Lib.each(l.I.DWT.globalWS,function(e,t){if(e==i)return c()(e=l.I.DWT.globalWS).call(e,t,1),!1}),e.__bConnecting=!1,e.bReady?l.D.detect.hideMask():(e.__wsRetry++,e.__wsRetry<5&&u()(l.D._reconnect,500))}}},l.D._checkAndReconnect=function(e,t){l.I.DWT.CheckConnectToTheService(e,t,function(){u()(l.D._reconnect,500)},function(){u()(function(){l.D._checkAndReconnect(e,t)},500)})},l.D.connectToWS=function(e){if(!e.bReady&&!e.__bConnecting){var r;e.__bConnecting=!0;try{r=l.D.getWS(l.D.product.host,e._port,e._ssl),l.D.log(["connecting ... [port:",e._port,"]"].join("")),r.onopen=function(){e.__bConnecting=!1,1==r.readyState?((e._objWS=r).clientId=e.clientId,e.bReady||e._OnReady(!0)):0==r.readyState&&u()(r.onopen,100)},r.onclose=r.onerror=function(){r.onopen=null,e.__bConnecting=!1,e.bReady&&l.D.detect.hideMask(),l.I.Lib.each(l.I.DWT.globalWS,function(e,t){if(e==r)return c()(e=l.I.DWT.globalWS).call(e,t,1),!1})}}catch(t){l.D.log(t),r&&l.I.Lib.each(l.I.DWT.globalWS,function(e,t){if(e==r)return c()(e=l.I.DWT.globalWS).call(e,t,1),!1}),e.__bConnecting=!1,e.bReady&&l.D.detect.hideMask()}}},l.D.startWS=function(){var t=l.D.detect,e=!0;if(l.D.product.bHTML5Edition){if(!((e=l.D.IsNeedLoadWasm()?!1:e)&&5<t.tryTimes)){if(t.OnDetectNext&&t.OnDetectNext(),0==t.tryTimes&&0<t.cUrlIndex&&0<t.arySTwains.length&&(t.bNoControlEvent||(t.hideMask(),l.D.isFunction(t.onNoControl)&&(o=(i=t.arySTwains[0])._width,n=i._height,t.onNoControl(i._containerElement,o=o<=0?270:o,n=n<=0?350:n,i)),t.bNoControlEvent=!0)),e&&t.cUrlIndex>=t.urls.length&&(t.cUrlIndex=0,t.tryTimes++),!(0<t.arySTwains.length))return l.D.closeLoadingMsg(),void(t.bOK=!0);var r,n,i,o=(r=t.arySTwains[0])._getWebTwainId();return(l.I.DWT.ContainerMap[o]?(r._OnReady(),r.dispose()):0==r._bLocalService&&(r.bReady=!0,r._OnReady()),r.bReady||r._destroy)?(c()(n=t.arySTwains).call(n,0,1),void(t.arySTwains.length<=0?t.bOK=!0:u()(l.D.startWS,100))):(t.bNoControlEvent||t.showMask(),r.__bConnecting?void 0:(r.__bConnecting=!0,i=t.urls[t.cUrlIndex],f(l.D.product.host,i.port,i.ssl).then(function(e){r.__bConnecting=!1,r._objWS=e.ws,e.ws.clientId=r.clientId,r._host=e.host,r._port=e.port,r._ssl=e.ssl,l.I.DWT.IfUseWSPool&&l.D._addToWSPool(r),r.bReady||(r.bReady=!0,r._OnReady()),c()(e=t.arySTwains).call(e,0,1),t.arySTwains.length<=0?(t.hideMask(),t.bOK=!0):u()(l.D.startWS,100)},function(e){l.D.log(e),r.__bConnecting=!1,r.bReady?t.hideMask():(t.cUrlIndex++,u()(l.D.startWS,100))})))}l.D.log("Failed more than 5 times.")}else l.D.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},l.D.startWSByIP=function(){var t=l.D.detect;if(l.D.product.bHTML5Edition){if(!(0<t.arySTwainsByIP.length))return t.hideMask(),void(t.bOK=!0);var r,e,n=(r=t.arySTwainsByIP[0])._getWebTwainId();return(l.I.DWT.ContainerMap[n]?(r._OnReady(),r.dispose()):0==r._bLocalService&&(r.bReady=!0,r._OnReady()),r.bReady||r._destroy)?(c()(n=t.arySTwainsByIP).call(n,0,1),void(t.arySTwainsByIP.length<=0?(t.hideMask(),t.bOK=!0):u()(l.D.startWSByIP,100))):(t.bNoControlEvent||t.showMask(),r.__bConnecting?void 0:(0<r.__wsRetry&&(t.bNoControlEvent||(t.hideMask(),l.D.isFunction(t.onNoControl)&&(n=r._width,e=r._height,t.onNoControl(r._containerElement,n=n<=0?270:n,e=e<=0?350:e,r)),t.bNoControlEvent=!0)),r.__bConnecting=!0,f(r._host,r._port,r._ssl).then(function(e){r.__bConnecting=!1,r._objWS=e.ws,e.ws.clientId=r.clientId,l.I.DWT.IfUseWSPool&&l.D._addToWSPool(r),r.bReady||(r.bReady=!0,r._OnReady()),c()(e=t.arySTwainsByIP).call(e,0,1),t.arySTwainsByIP.length<=0?(t.hideMask(),t.bOK=!0):u()(l.D.startWSByIP,100)},function(e){l.D.log(e),r.__bConnecting=!1,r.bReady?t.hideMask():(r.__wsRetry++,u()(l.D.startWSByIP,100))})))}l.D.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},l.D.html5.closeAll=function(){var e,t,r,n,i,o,a,s,u;for(l.D.dlgProgress=!1,l.D.detect.bOK=!1,l.D.detect.bFirst=!0,e=l.D.detect.arySTwains.length-1;0<=e;e--)if(r=l.D.detect.arySTwains[e]){for(o=r._id,r._containerElement&&(i=r._containerElement,n=r._containerElement.id),s=!1,t=0;t<l.I.DWT.Containers.length;t++)if((a=l.I.DWT.Containers[t])&&(o==a.WebTwainId||n&&n==a.ContainerId||i==a.Container)){s=!0;break}s&&(r.__unload(),c()(u=l.D.detect.arySTwains).call(u,e,1)),r._isMobileMode()}},l.D.bio=!1,l.D.progressMessage="",l.D.dialogShowStatus=!1,l.D.needShowTwiceShowDialog=!1,l.D.dlgProgress=!1,l.D.cancelFrome=0,l.D.dlgRef=0,l.D.initProgress=function(e){var t,r;l.D.dlgProgress||((r=[]).push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">'),r.push('<h3 class="dynamsoft-finalMessage"> </h3>'),r.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>'),h.bIE?r.push('<div class="dynamsoft-progressBar" value="" max="100"></div>'):r.push('<progress class="dynamsoft-progressBar" value="" max="100"></progress>'),r.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>'),r.push("</div></dialog>"),(t=l.D.one(".dynamsoft-dwt-dialogProgress"))&&t.getEL()&&t.remove(),(r=l.D.parseHTML(r.join("")))&&0<r.length&&document.body.appendChild(r[0]),h.bIE&&(r=(r=l.D.one(".dynamsoft-progressBar"))&&r.getEL())&&(r.objProgressBar=new o(r,{width:280,height:20})),(t=l.D.one(".dynamsoft-dwt-dialogProgress"))&&t.getEL()&&(l.D.dlgProgress=t[0],l.D.dialog.setup(l.D.dlgProgress)),l.D.dlgRef=0,l.D.dialogShowStatus=!1,l.D.cancelFrome=0)},l.D.setBtnCancelVisibleForProgress=function(e){var t;l.D.dlgRef<=0||0==l.D.dialogShowStatus||(t=(t=l.D.one(".dynamsoft-btnCancel"))&&t.getEL())&&(t.style.display=e?"":"none")},l.D.showProgressMsg=function(e,t,r){var n,i,o,a,s;l.D.dlgRef<=0||0==l.D.dialogShowStatus||(n=l.D.one(".dynamsoft-progressBar"),i=l.D.one(".dynamsoft-status"),o=l.D.one(".dynamsoft-finalMessage"),a=l.D.one(".dynamsoft-desc"),(s=e)<0?s=0:100<e&&(s=100),s=Math.floor(s),o&&o.getEL()&&o.html(t),a&&a.getEL()&&a.html(r),!s&&0!==s||(i&&i.getEL()&&i.html(s+"%"),n&&n.getEL()&&(h.bIE?n[0].objProgressBar?n[0].objProgressBar.setValue(s):n[0].value=s:(h.bEdge&&(n[0].style.display=""),n[0].value=s))),s&&(100<=s||l.D.dlgRef<=0)&&(u()(function(){n&&n.getEL()&&(h.bIE?n[0].objProgressBar?n[0].objProgressBar.setValue(0):n[0].value=0:(h.bEdge&&(n[0].style.display="none"),n[0].value=0))},300),l.D.dlgRef<=0&&l.D.closeProgress(null,"OnPercentDone")))},l.D.showProgress=function(e,t,r){var n,i=l.I.DWT.IfConfineMaskWithinTheViewer?e._containerElement||(0<l.I.DWT.Containers.length&&l.I.DWT.Containers[0].ContainerId?l.I.Lib.get(l.I.DWT.Containers[0].ContainerId):document.body):document.body;!i||i===document.body||""!==(i=(n=i.firstChild)&&n!==l.D.dlgProgress?n:i).style.position&&"static"!==i.style.position||(i.style.position="relative",e.progressContainer={el:i}),i.appendChild(l.D.dlgProgress),l.D.log("showProgress:"+t+",bCancel:"+r),(0==l.D.cancelFrome&&1==e.__IfShowProgressBar||0!=l.D.cancelFrome&&1==e.__IfShowCancelDialogWhenImageTransfer)&&((i=(n=l.D.one(".dynamsoft-btnCancel"))&&n.getEL())&&(i.style.display=0==r?"none":""),0==l.D.dialogShowStatus&&(l.D.dlgProgress&&(l.D.dialog.setup(l.D.dlgProgress,!0),l.D.dlgProgress.showModal()),l.D.dialogShowStatus=!0,t=l.D.one(".dynamsoft-finalMessage"),n=(e=l.D.one(".dynamsoft-progressBar"))&&e.getEL(),i=l.D.one(".dynamsoft-status"),t&&t.getEL()&&t.html(""),i&&i.getEL()&&i.html("0%"),n&&(h.bIE&&n.objProgressBar?n.objProgressBar.setValue(0):n.value=0)),l.D.dlgRef++)},l.D.closeProgress=function(e,t){l.D.log("closeProgress:"+t),t=l.D.one(".dynamsoft-btnCancel");l.D.dlgRef--,l.D.dlgRef<=0&&(l.D.dlgRef=0),1==l.D.needShowTwiceShowDialog&&1==l.D.cancelFrome?t&&t.getEL()&&(t[0].innerHTML="Cancel"):(t&&t.getEL()&&(t[0].innerHTML="Cancel"),0==l.D.dlgRef&&(1==l.D.dialogShowStatus&&(l.D.dlgProgress&&(l.D.dlgProgress.close(),document.body.appendChild(l.D.dlgProgress),e&&e.progressContainer&&e.progressContainer.el&&(e.progressContainer.el.style.position="",e.progressContainer=null)),l.D.dialogShowStatus=!1),l.D.needShowTwiceShowDialog=!1,l.D.cancelFrome=0))},l.D.html5.CreateDWTObject=function(e){for(var t,r=0;r<l.D.detect.arySTwains.length;r++)if(l.D.detect.arySTwains[r]._id==e.id)return!1;return t=new l.D.html5.STwain(e),e.customIP?l.D.detect.arySTwainsByIP.push(t):(l.D.detect.arySTwains.push(t),l.D.detect.bFirst&&l.D._init(e),l.D.detect.bFirst=!1),t},t.RemoveAllAuthorizations=function(){var e=l.D.LS.item("DWT_port"),t="http://",t=[t="true"==l.D.LS.item("DWT_ssl")?"https://":t,l.D.product.host,":",e,"/dwt/",l.D.product.getDWTPrefix(),l.D.product.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",l.D.now()].join("");return l.D.ajax({method:"GET",xhrFields:{withCredentials:!0},url:t,async:!0}),!0},l.D._reconnectWSPool=function(){l.D.each(l.D.detect.aryWSPool,function(e){!e||e.bOK||e.__bConnecting||l.D._reconnectWSElement(e)})},l.D._reconnectWSElement=function(e){var t,r;if(e&&!e.bOK&&!e.__bConnecting){t=e.wsurl,e.__bConnecting=!0,e.__wsRetry=0;var n=function n(){r&&(l.I.Lib.each(l.I.DWT.globalWS,function(e,t){if(e==r)return c()(e=l.I.DWT.globalWS).call(e,t,1),!1}),r.onopen=null),e.__wsRetry++,e.__wsRetry<5?u()(l.D._reconnectWSPool,500):(e.__bConnecting=!1,l.D.closeProgress(_stwain,"Reconnect"),l.D.each(e.list,function(e,t){l.D.Errors.Server_Restarted(e)}))};try{(r=l.D.getWS_bywsurl(t)).onopen=function(){1==r.readyState?(r.onopen=null,l.D.each(e.list,function(e,t){(e._objWS=r).clientId=e.clientId,e.bReady||e._OnReady(!0)}),e.__bConnecting=!1,e.bOK=!0,l.D.detect.hideMask()):0==r.readyState?u()(r.onopen,300):e.__bConnecting=!1},r.onclose=n}catch(i){l.D.log(i),r&&l.I.Lib.each(l.I.DWT.globalWS,function(e,t){if(e==r)return c()(e=l.I.DWT.globalWS).call(e,t,1),!1}),u()(n,500)}}},l.D._deliverMsg=function(r,n){var i=n.id,o=[];0<=a()(n).call(n,'"method" : "EnableBuffer"')||0<=a()(n).call(n,'"method" : "GetBuffer"')?l.I.DWT.lwsproc(n):(l.D.each(l.D.detect.aryWSPool,function(e,t){if(e.wsurl==r)return o=e.list,!1}),l.D.each(o,function(e,t){if(e.clientId==i)return e._OnRecieveMsg&&e._OnRecieveMsg(n),!1}))},l.D._addToWSPool=function(e){var r,n=e._objWS.url;l.D.each(l.D.detect.aryWSPool,function(e,t){if(e.wsurl==n)return r=e,!1}),r&&l.D.isArray(r.list)?r.list.push(e):l.D.detect.aryWSPool.push({wsurl:n,list:[e]})},l.D._removeFromWSPool=function(e){var r,n,t;e&&e._objWS&&(n=e._objWS.url),l.D.each(l.D.detect.aryWSPool,function(e,t){if(e.wsurl==n)return r=e,!1}),r&&l.D.isArray(r.list)&&(-1<(t=a()(t=r.list).call(t,e))&&c()(e=r.list).call(e,t,1),0==r.list.length&&(r.ws.close(),r.wsurl="",delete r.ws,-1<(t=a()(e=l.D.detect.aryWSPool).call(e,r))&&c()(e=l.D.detect.aryWSPool).call(e,t,1)))}},3839:function(e,t,r){r.r(t);var t=r(7711),m=r.n(t),t=r(3662),_=r.n(t),t=r(4579),p=r.n(t),t=r(5683),I=r.n(t),D=r(1695),v=D.I.navInfo,t=D.D.html5,r=t.STwain,b=t.Funs,y={upload:"Uploading...",download:"Downloading...",load:"Processing...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",encode:"Processing..."},o=function o(e,t){var r;D.D.config.bDiscardBlankImage&&(r=e._ImgManager.getCurrentImageIndex(),e.IsBlankImage(r)&&e.RemoveImage(r),r=["Blank Discard (",t,"): ",e.ErrorString].join(""),D.D.isFunction(e.__OnPrintMsg)&&e.__OnPrintMsg(r))},t=r.prototype;t.RegisterEvent=function(e,t){return this._resetErr(),!!this._isValid()&&(this[["__",e].join("")]=t,!0)},t.onEvent=function(e,t){this.RegisterEvent(e,t)},t.on=function(e,t){this.RegisterEvent(e,t)},t.OnRefreshUI=function(e,t,r,n){var i=this;return r&&i._ImgManager.refresh(e,i._ImgManager.count(),!0,n),D.I.Lib.isFunction(i.__OnRefreshUI)&&i.__OnRefreshUI(i._ImgManager.getCurrentImageIndex(),i._ImgManager.count()),!0},t._OnRemoteScanStatusAsync=function(e){var t,r,n,i=this;if(e&&2<=e.length){try{var o=new String(e[1]),a=D.D.parse(o)}catch(s){D.D.log(s.message),D.D.log("parse json failed: "+e[1])}a=a||{sequence:0,screen:[]}}return a&&a.sequence&&(0<a.sequence&&a.screen&&0<a.screen.length?(o=a.screen,r=a.sequence,n=a.wnds,o=(e=o[0]).img,D.D.isString(o)&&""!=o&&(t=e.wnd),r&&t&&((e=D.D.one(".ds-img-screen"))&&i._acquireDivEL&&(i._acquireDivEL.evtFun&&(D.D.removeEventListener(e[0],"mouseup",i._acquireDivEL.evtFun),i._acquireDivEL.evtFun=null),e[0].src=o,i._acquireDivEL.evtFun=function(e){n=n||"0";e=D.D.stringify({sequence:r,wnds:n,wnd:t+"",type:2,x:e.offsetX,y:e.offsetY});i._innerSendCmd("SendEventToScannerUI",["[",e,"]"].join(""))},D.D.addEventListener(e[0],"mouseup",i._acquireDivEL.evtFun)))):i.__closeRemoteScanUI(!1)),D.D.isFunction(i.__OnRemoteScanStatusAsync)&&i.__OnRemoteScanStatusAsync(a),!0},t._OnConsumed=function(e){},t._OnBitmapChanged=function(e,t,r){var n,o=this,i="10"==e[0],a="0"==e[0],s="c2"==e[0],u=a||s||i,a=e[1].split(","),c=e[2],l=e[3],d=o.__maxImagesInBuffer,h=r,r=-1,g=[];if(h||""==(h=o.GetCurrentDocumentName())&&(h=o._ImgManager.getWebViewer().GetDefaultFileName()),i?5<e.length&&(n=e[5],g.push(n),!o._blts||1!=c&&2!=c||D.I.Lib.isUndef(n.verify)||(r=D.I.DWT.lgct(n.verify),D.D.isFunction(o.__OnLtsverify)&&o.__OnLtsverify(r,1,D.I.DWT.EnumInstance.dwt_browser),D.I.DWT.lavrf(r,1,D.I.DWT.EnumInstance.dwt_browser))):s?(5<e.length&&(g=e[5]),D.D.isArray(g)||(g=[])):(n={},5<e.length&&(n.width=e[5]),6<e.length&&(n.height=e[6]),7<e.length&&(n.bitDepth=e[7]),8<e.length&&(n.resolutionX=e[8]),9<e.length&&(n.resolutionY=e[9]),10<e.length&&(r=e[10]),g.push(n),-1<r&&o._blts&&(1==c||2==c)&&(s=D.I.DWT.lgct(r),D.D.isFunction(o.__OnLtsverify)&&o.__OnLtsverify(s,1))),D.D.log("OnBitmapChanged:"+e),2==c||1==c&&!o.__IfAppendImage?(D.D.each(a,function(e,t){var r=m()(e),e=o._ImgManager.getCurrentImageIndex(),t=t<g.length&&g[t]?g[t]:{};if(t.currentFileName=h,isNaN(r)||r<0)return!0;if(u)o._aryBitmapCache.push(r);else for(var n,i=0;i<o._aryBitmapCache.length;i++)if(o._aryBitmapCache[i]==r)return _()(n=o._aryBitmapCache).call(n,i,1),!0;if(o._ImgManager.exists(r))return!0;-1<o.__insertingIndex&&(e=o.__insertingIndex),o._ImgManager.insertBefore(e=-1==e?0:e,d,r,t),-1<o.__insertingIndex&&(o.__insertingIndex=o.__insertingIndex+1)}),D.D.isFunction(o.__OnRefreshUI)&&o.__OnRefreshUI(o._ImgManager.getCurrentImageIndex(),o._ImgManager.count())):1==c&&o.__IfAppendImage?(D.D.each(a,function(e,t){var r=m()(e);if(isNaN(r)||r<0)return!0;if((e=t<g.length&&g[t]?g[t]:{}).currentFileName=h,u)o._aryBitmapCache.push(r);else for(var n,i=0;i<o._aryBitmapCache.length;i++)if(o._aryBitmapCache[i]==r)return _()(n=o._aryBitmapCache).call(n,i,1),!0;if(o._ImgManager.exists(r))return!0;o._ImgManager.append(d,r,e)}),D.D.isFunction(o.__OnRefreshUI)&&o.__OnRefreshUI(o._ImgManager.getCurrentImageIndex(),o._ImgManager.count())):3==c&&u?(n=!1,(n=1==a.length&&-1==a[0]?!0:n)?o._ImgManager.clear():D.D.each(a,function(e,t){e=m()(e);if(isNaN(e)||e<0)return!0;o._ImgManager.removeByServerId(h,e)}),D.D.isFunction(o.__OnRefreshUI)&&o.__OnRefreshUI(o._ImgManager.getCurrentImageIndex(),o._ImgManager.count())):4==c?D.D.each(a,function(e,t){var e=m()(e);if(isNaN(e)||e<0)return!0;(t=t<g.length&&g[t]?g[t]:{}).currentFileName=h,0<=e&&!o.__bLoadingImage&&(o._isBindViewer()&&(0==o._ImgManager.bImageJustChangedInEditor?o._ImgManager.bImageChangedInViewer=!0:(o._ImgManager.bImageJustChangedInEditor=!1,o._ImgManager.bImageChangedInViewer=!1)),-1<(e=o._ImgManager.convertServerIdToClientIndex(e))&&o.OnRefreshUI(e,o._ImgManager.count(),!0,t))}):5==c&&0<=l&&!o.__bLoadingImage&&((r=0<g.length&&g[0]?g[0]:{}).currentFileName=h,0==o.__IfAppendImage&&o.OnRefreshUI(l,o._ImgManager.count(),!0,r),o._ImgManager.refresh(l,o._ImgManager.count(),!1,r)),D.D.isFunction(o.__OnBitmapChanged)){if(!i){if(D.I.navInfo.bFirefox&&!u)return!0;if(!D.I.navInfo.bFirefox&&u)return!0}var f=[],s=(D.D.each(a,function(e){var e=m()(e);if(isNaN(e)||e<0)return!0;-1<(e=o._ImgManager.convertServerIdToClientIndex(e))&&f.push(e)}),o._ImgManager.getCurrentImageIndex()),e=c;1==c&&(e=o.__IfAppendImage?1:2),o.__OnBitmapChanged(f,e,s,o._ImgManager.count())}},t._OnPostLoad=function(e,t){var r,n,i=this;t!==undefined&&t.exception!==undefined&&t.description!==undefined&&(i._errorCode=t.exception,i._errorString=t.description),D.D.log("OnPostLoad Results:"),t=e[1].split(","),e=D.D.base64.decode(t[0]),r=D.D.base64.decode(t[1]),D.D.log(e),D.D.log(r),D.D.log(t[2]),o(i,"On PostLoad"),0<=(n=i._ImgManager.getCurrentImageIndex())&&i.OnRefreshUI(n),D.D.isFunction(i.__OnPostLoad)&&i.__OnPostLoad(e,r,t[2])},t._OnPostTransfer=function(e){D.D.log("On PostTransfer Results:"+e),o(this,"On PostTransfer"),D.D.isFunction(this.__OnPostTransfer)&&this.__OnPostTransfer()},t._OnPostTransferAsync=function(e){if(D.D.log("On PostTransfer Async Results:"+e),D.D.isFunction(this.__OnPostTransferAsync)){if(e&&2<=e.length)try{var t,r=String(e[1]).replace(/\\/g,"\\\\");(t=D.D.parse(r)).imageId&&(t.imageId=this.objImageIndexManager.convertServerIdToGuid(t.imageId))}catch(n){D.D.log(e)}this.__OnPostTransferAsync(t=t||{imageId:-1})}},t._OnPreAllTransfersAsync=function(e){var t=this;if(D.D.isFunction(t.__OnPreAllTransfersAsync)){var r={event:"beforeAcquire",result:{}};try{D.D.isArray(e)&&1<e.length&&(r=D.D.parse(e[1]))}catch(n){}p()(function(){t.__OnPreAllTransfersAsync(r)},10)}},t._OnPostAllTransfers=function(e){var t=this;2<=e.length&&0==t._errorCode&&(t._errorCode=e[1],t._errorString=e[2]),D.D.log("On PostAllTransfers Results:"+e),t.__bLoadingImage=!1,t.__bAcquireImageNow=!1,t.__closeRemoteScanUI(!0),D.D.isFunction(t.__OnPostAllTransfers)&&t.__OnPostAllTransfers(),D.D.License.isLTS()&&D.I.DWT.lcvrf(t)},t._OnResult=function(e){e=e[1];D.D.isFunction(this.__OnResult)&&this.__OnResult(e)},t._OnTransferCancelled=function(e){var t=this;t._ImgManager.getCurrentImageIndex(),t._ImgManager.count();t.__bLoadingImage=!1,t.__bAcquireImageNow=!1,D.D.isFunction(t.__OnTransferCancelled)&&t.__OnTransferCancelled()},t._OnTransferError=function(e){D.D.isFunction(this.__OnTransferError)&&this.__OnTransferError()},t._OnSourceUIClose=function(e){this.__closeRemoteScanUI(!0),D.D.isFunction(this.__OnSourceUIClose)&&this.__OnSourceUIClose()},t._OnPreTransfer=function(e){D.D.isFunction(this.__OnPreTransfer)&&this.__OnPreTransfer()},t._OnPreAllTransfers=function(e){D.D.isFunction(this.__OnPreAllTransfers)&&this.__OnPreAllTransfers()},t._OnPercentDone=function(e){var t,r,n,i,o,a,s,u,c,l=this,d=!1,h=D.I.Lib,g=!1,f=0;h.isArray(e)&&2<e.length&&(i=e[0],f=e[1],r=e[2],3<e.length&&(s=e[3]),4<e.length&&(o=e[4]),5<e.length&&e[5],(t=f)<0?t=0:100<f&&(t=100),t=Math.floor(t),1!=h.cancelFrome&&2!=h.cancelFrome&&5!=h.cancelFrome||(g=o)),!l._bServerPercentDone&&0!=i||((0<f||0==f)&&(1!=h.cancelFrome&&2!=h.cancelFrome||"http"==s&&(d=!0),3!=h.cancelFrome&&4!=h.cancelFrome||"ftp"==o&&(d=!0)),(0==h.cancelFrome&&1==l.__IfShowProgressBar||0!=h.cancelFrome&&1==l.__IfShowCancelDialogWhenImageTransfer)&&(n=h.one(".dynamsoft-progressBar"),e=h.one(".dynamsoft-status"),i=h.one(".dynamsoft-finalMessage"),o=h.one(".dynamsoft-desc"),3!=h.cancelFrome&&4!=h.cancelFrome||(0==(s=s)?b.setBtnCancelVisibleForProgress(l,!1):1==s&&b.setBtnCancelVisibleForProgress(l,!0)),a=f<0?(h.progressMessage=r,h.progressMessage):""!=r&&"1/1"!=r?h.progressMessage+"("+r+")":h.progressMessage,i&&i.getEL()&&(c=u="",I()(a).call(a," ...")&&(a=a.replace(" ...","...")),-1!=I()(a).call(a,"(")?(u=a.substr(0,I()(a).call(a,"(")),c=a.substr(I()(a).call(a,"("))):u=a,h.each(y,function(e,t){-1!=I()(e).call(e,u)&&(a=D.I.DWT.CustomizableDisplayInfo.customProgressText[t]+c)}),""==a&&(a="&nbsp;"),i.html(a)),0!=g?(""==g||h.isUndef(g)?g="&nbsp;":h.isString(g)&&30<g.length&&(g=g.substring(0,30)+"..."),o.html(g)):o.html("&nbsp;"),!t&&0!==t||(e&&e.getEL()&&e.html(t+"%"),n&&n.getEL()&&(v.bIE?n[0].objProgressBar?n[0].objProgressBar.setValue(t):n[0].value=t:(v.bEdge&&(n[0].style.display=""),n[0].value=t))),t&&(100<=t||h.dlgRef<=0)&&(p()(function(){n&&n.getEL()&&(v.bIE?n[0].objProgressBar?n[0].objProgressBar.setValue(0):n[0].value=0:(v.bEdge&&(n[0].style.display="none"),n[0].value=0))},1e3),h.dlgRef<=0&&h.closeProgress(l,"OnPercentDone"))),1==d&&(h.isFunction(l.__OnInternetTransferPercentage)&&l.__OnInternetTransferPercentage(t,!1),h.isFunction(l.__OnInternetTransferPercentageEx)&&l.__OnInternetTransferPercentageEx(t,!1)),h.isFunction(l.__OnPercentDone)&&l.__OnPercentDone())},t._OnGetFilePath=function(e){var t,r=e[1].split(",");D.D.log("On GetFilePath Results:"+e),e=D.D.base64.decode(r[3]),t=D.D.base64.decode(r[4]),"-1032"==r[2]&&(r[2]="-1",e=t=""),D.D.isFunction(this.__OnGetFilePath)&&this.__OnGetFilePath(+r[0],+r[1],+r[2],e,t),this.__bOpenFileNow=!1},t.checkErrorString=function(){var e=this.ErrorCode;return-2115===e||(-2003!==e||D.I.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(this.__HTTPPostResponseString),0===e)},t.__GetLoadEventsNum=function(){var e=0;return D.D.isFunction(this.__OnPostLoad)&&(e|=1),D.D.isFunction(this.__OnGetFilePath)&&(e|=2),e},t._OnPageFocus=function(e){var t,r=this;if(r.bPageFocus=!0,!r._isMobileMode()&&!r.bReady)return D.I.Lib.connectToWS(r);v.bWin&&!r._isMobileMode()&&D.I.DWT.IfAlwaysFocusOnPopupWindow&&(t=D.D.stringify({sequence:0,wnds:0,wnd:"0",type:3,x:0,y:0}),(r.__bAcquireImageNow||e||r.__bOpenFileNow)&&(r.bServerAlwaysFocusOnPopupWindow=!0,r._innerSendCmd("SendEventToScannerUI",["[",t,"]"].join(""))))},t._OnPageBlur=function(e){var t=this;if(v.bWin&&!t._isMobileMode()){if(!t.bReady)return D.I.Lib.connectToWS(t);var r=D.D.stringify({sequence:0,wnds:0,wnd:"0",type:4,x:0,y:0});0==t.bPageFocus&&!e||(t.bPageFocus=!1,(t.__bAcquireImageNow||e||t.__bOpenFileNow)&&(t.bServerAlwaysFocusOnPopupWindow=!1,t._innerSendCmd("SendEventToScannerUI",["[",r,"]"].join(""))))}}},7367:function(e,t,r){r.r(t);var t=r(5683),s=r.n(t),t=r(7711),l=r.n(t),t=r(4579),g=r.n(t),t=r(5238),I=r.n(t),t=r(677),i=r.n(t),t=r(4341),o=r.n(t),D=r(1695),u=r(1188);D.D.html5=D.D.html5||{};var c=D.D.html5.Funs={notSupportProperty:function(e){},notSupportMethod:function(e){},cformat:function(e,t){if(D.D.isString(e)){var r,n,i,o=s()(e).call(e,"<%");if(-1==o)return e;if(r=e.substring(0,o),!(o+2<(n=s()(e).call(e,">",r))))return e;o=e.substring(o+1,n),n=e.substring(n+1);try{i=D.D.sprintf(o,t)}catch(a){i=""}return[r,i,n].join("")}return""},sendData:function(e,t,r,n){var i,o,a,s,u;if(!n){try{e.send(t)}catch(c){D.D.log(c)}return!1}for(n=new ArrayBuffer(12),o=r&&r.size?r.size:0,a=(i=(t=new Blob([t])).size)+o,s=new DataView(n),u=0;u<8&&a;u++)s.setUint8(u,a%256),a=l()(a/256);for(u=0;u<4&&i;u++)s.setUint8(8+u,i%256),i=l()(i/256);return n=new Blob([n,t]),e.send(n),0<o&&e.send(r),!(s=null)},getJson:function(e,t,r,n){var i=[],e=(i.push("{"),i.push('"id":"'),i.push(e.clientId),i.push('"'),n&&(i.push(',"cmdId":"'),i.push(n),i.push('"')),i.push(',"method":"'),i.push(t),i.push('"'),i.push(',"module":"dwt","version":"'),[D.D.product.getDWTPrefix(),D.D.product.getServerVersionInfo()].join(""));return i.push(e),i.push('"'),r!==undefined&&null!==r&&(i.push(',"parameter":'),i.push(r)),i.push("}"),i.join("")},refreshImageAfterInvokeFun:function(e,t,r){return 1==r},loadHttpBlob:function(s,e,t,r,u,i,a,n){var o,c=!1,l={method:e,dataType:"blob"};if(n&&(l.headers=n),""!=s.HTTPUserName&&(l.username=s.HTTPUserName,l.password=s.HTTPPassword),r){if((D.I.Lib.env.bMobile||D.I.navInfo.bChrome||D.I.navInfo.bFirefox)&&"get"==e)return l.fetchRaw=!0,fetch(t,l).then(function(e){if(!e.ok)throw{httpCode:e.status,errorString:e.statusText};var n=e.headers.get("Content-Length"),i=0,o=e.body.getReader(),t=new ReadableStream({start:function(t){var r=function r(){o.read().then(function(e){e.done?t.close():(i+=e.value.length,a({loaded:i,total:n}),t.enqueue(e.value),g()(r,0))})};g()(r,0)}}),e=e.headers.get("Content-Type");return e&&""!=e||(e="application/octet-stream"),new Response(t,{headers:{"Content-Type":e}})}).then(function(e){return e.blob()}).then(function(e){u(e)},function(e){e&&e.httpCode?D.D.Errors.HttpDownloadError(s,!1,e.errorString,e.httpCode):D.D.Errors.HttpDownloadUrlError(s),D.D.isFunction(i)&&i({code:s._errorCode,message:s._errorString})}),!0;l.onSuccess=u,D.D.isFunction(a)&&(l.beforeSend=function(e){e.addEventListener("progress",function(e){delete e.totalSize,delete e.position,a(e)},!1)}),c=!0}else D.I.navInfoSync.bIE?(l.dataType="arraybuffer",l.onSuccess=function(e,t,r){var n,e=e||r.responseData;e&&(n=new Uint8Array(e)),s._errorCode=0,s._errorString="",u(n),c=!(n=null)}):(l.dataType="text",l.contentType="text/plain; charset=x-user-defined",l.mimeType="text/plain; charset=x-user-defined",l.onSuccess=function(e,t,r){for(var n=r.responseText,i=n.length,o=new Uint8Array(i),a=0;a<i;a++)o[a]=n.charCodeAt(a);s._errorCode=0,s._errorString="",u(o),c=!(o=null)}),l.headers?D.D.mix(l.headers,{"X-Requested-With":!1}):l.headers={"X-Requested-With":!1};if("post"==e){var d,n=s.httpFormFields;if(n)try{d=new FormData,D.D.each(n,function(e,t){var r;e instanceof Blob?(r=e.name,d.append(t,e,r)):d.append(t,e)}),D.D.mix(l,{data:d,processData:!1,contentType:!1})}catch(h){}}o=function o(e,t,r){var n,e=e&&D.D.isArray(e)&&2<e.length?(n=e[1],e[2]):(n=t,r);2==e.state&&0==e.status?"abort"===e.statusText?D.D.Errors.HttpDownloadError(s,!0):D.D.Errors.HttpDownloadUrlError(s):D.D.Errors.HttpDownloadError(s,!1,n,e.status),D.D.isFunction(i)&&i()},l.url=t,l.async=r,l.onError=o,l.onComplete=function(){D.D.bio=!1};e=D.D.ajax(l);return r&&(D.D.bio=e),c},combineUrl:function(e,t,r){var n=[],i=t;return i!==undefined&&r!==undefined&&(D.D.isString(i)||(i=String(t)),0==s()(i).call(i,"http://")?(i=i.replace("http://",""),n.push("http://")):0==s()(i).call(i,"https://")?(i=i.replace("https://",""),n.push("https://")):(0==s()(i).call(i,"//")&&(i=i.replace("//","")),e.IfSSL?n.push("https://"):n.push("http://")),n.push(i),s()(i).call(i,":")<0&&(""==e.HTTPPort&&(e.HTTPPort=D.D.detect.ssl?443:80),(!D.D.detect.ssl&&80!=e.HTTPPort||D.D.detect.ssl&&443!=e.HTTPPort)&&(n.push(":"),n.push(e.HTTPPort))),0!==s()(r).call(r,"/")&&n.push("/"),n.push(r),n.join(""))},httpPostUpload:function(e,t,r,n,i,o,a,s,u,c,l,d){if(!r||r.size<=0)return D.D.Errors.UploadFileCannotEmpty(e),D.D.isFunction(d)&&d(),!1;var h,g=e.MaxUploadImageSize,f=r.size,m=r.type;return g<f&&-1!=g?(D.D.Errors.UploadExceededMaxSize(e),D.D.isFunction(d)&&d(),!1):(""===m||m&&m!=e.HttpContentTypeFieldValue?(g=I()(r)||r.webkitSlice||r.mozSlice,m=r.name,D.D.isString(m)&&""!=m||(m=r.fileName),(h=g.call(r,0,f,e.HttpContentTypeFieldValue)).name=m):h=r,r=null,h.remoteFilename=e.__remoteFilename,f=this.httpUploadByBIO(e,t,h,i,n,o,a,s,u,c,l,d),h=null,f)},httpPostUploadFiles:function(e,t,r,n,i,o,a,s,u,c,l){var d,h=e.MaxUploadImageSize,g=0;if(!r||!D.D.isArray(r)||r.length<=0)return D.D.Errors.UploadFileCannotEmpty(e),D.D.isFunction(l)&&l(),!1;for(d=0;d<r.length;d++){var f=r[d];if(!f||f.size<=0)return D.D.Errors.UploadFileCannotEmpty(e),D.D.isFunction(l)&&l(),!1;var m,_=f.size,p=f.type;g+=_,(""===p||p&&p!=e.HttpContentTypeFieldValue)&&(p=I()(f)||f.webkitSlice||f.mozSlice,m=f.name,_=p.call(f,0,_,e.HttpContentTypeFieldValue),D.D.isString(m)&&""!=m||(m=f.fileName),_.name=this.cformat(m,d+1),r[d]=_),r[d].remoteFilename=this.cformat(e.__remoteFilename,d+1),f=null}if(h<g&&-1!=h)return D.D.Errors.UploadExceededMaxSize(e),D.D.isFunction(l)&&l(),!1;for(ret=this.httpUploadByBIO(e,t,r,i,n,o,a,s,u,!1,c,l),d=0;d<r.length;d++)r[d]=null;return r=null,ret},httpPostUploadString:function(e,t,r,n,i,o,a,s,u,c,l){if(""==r)return D.D.Errors.UploadFileCannotEmpty(e),D.D.isFunction(l)&&l(),!1;if((d=e.MaxUploadImageSize)<r.length&&-1!=d)return D.D.Errors.UploadExceededMaxSize(e),D.D.isFunction(l)&&l(),!1;(d=new Blob([r],{type:"text/plain"})).name=n;var r=this.httpUploadByBIO(e,t,d,i,!0,o,a,s,u,!1,c,l),d=null;return r},httpUploadByBIO:function(i,e,t,r,n,o,a,s,u,c,l,d){var h=i.httpFormFields,g=new FormData;return D.D.each(h,function(e,t){var r;e instanceof Blob?(r=e.name,g.append(t,e,r)):g.append(t,e)}),D.D.bio=new D.D.BIO({action:e,data:g,async:n,retry:s,bOnlyEmptyIsOK:u}),(h=D.D.bio.get("uploadType"))&&((e=h.get("ajaxConfig"))&&e.headers&&o&&D.D.mix(e.headers,o),0<=r&&h.set("blockSize",r),i.__withCredentials&&D.D.mix(e.xhrFields,{withCredentials:!0})),i.__HTTPPostResponseString=!1,D.D.bio.on(D.D.BIO.event.SUCCESS,function(e){D.D.bio=!1,e&&D.D.isString(e.response)?i.__HTTPPostResponseString=e.response:i.__HTTPPostResponseString="",D.D.isFunction(i.__OnHttpUploadStatus)&&(e={fileName:e.name,percentage:100,statusCode:200,responseString:i.__HTTPPostResponseString},i.__OnHttpUploadStatus(e)),D.D.isFunction(l)&&l(i.__HTTPPostResponseString)}),D.D.bio.on(D.D.BIO.event.ERROR,function(e){var t=e&&e.canceled,r=(e&&e.timeout,!1),n=0;D.D.bio=!1,e&&D.D.isString(e.response)?i.__HTTPPostResponseString=e.response:i.__HTTPPostResponseString="",t||(e&&e.msg&&(r=e.msg),e&&e.httpStatus&&(n=e.httpStatus)),D.D.Errors.UploadError(i,t,r,n),D.D.isFunction(i.__OnHttpUploadStatus)&&(t={fileName:e.name,percentage:100,statusCode:n,responseString:i.__HTTPPostResponseString},i.__OnHttpUploadStatus(t)),D.D.isFunction(d)&&d(i.__HTTPPostResponseString)}),(a||D.D.isFunction(i.__OnHttpUploadStatus))&&(D.D.bio.on(D.D.BIO.event.PROGRESS,function(e){delete e.totalSize,delete e.position;var t,r=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join("");D.D.isFunction(i.__OnHttpUploadStatus)&&(t=e.name,i.__OnHttpUploadStatus({fileName:t,percentage:r=99<r?99:r,statusCode:0,responseString:""})),a&&i._OnPercentDone([0,r,"","http",e.name])}),a&&i._OnPercentDone([0,-1,D.I.MSG.Uploading,"http"]),D.D.isFunction(i.__OnHttpUploadStatus)&&(n="",D.D.isArray(t)&&0<t.length||(t&&t.name&&""!=t.name?n=t.name:t&&t.fileName&&(n=t.fileName)),i.__OnHttpUploadStatus({fileName:n,percentage:0,statusCode:0,responseString:""}))),c&&c.bCancel?(c.st=2,D.D.isFunction(d)&&d(!1),!1):D.D.bio.upload(t)},httpPutImage:function(e,t,r,n,i,o,a){var s=!0,t={method:"PUT",url:t,hasContent:!0,processData:!1,async:n,data:r,onSuccess:i,onError:function(){s=!1,D.D.isFunction(o)&&o()},onComplete:function(){D.D.bio=!1},beforeSend:function(e){D.D.isFunction(a)&&e.upload.addEventListener("progress",function(e){delete e.totalSize,delete e.position,a(e)},!1)}};return""!=e.HTTPUserName&&(t.username=e.HTTPUserName,t.password=e.HTTPPassword),n||D.D.mix(t,{headers:{"X-Requested-With":!1}}),D.D.bio=D.D.ajax(t),s},dialog:!1,dialogRef:0,showMask:function(e){D.D.log("showMask:"+e+"--"+this.dialogRef),0==this.dialogRef&&D.D.detect.showMask(),this.dialogRef++},hideMask:function(e){var t=this;D.D.log("hideMask:"+e+"--"+t.dialogRef),1<t.dialogRef?t.dialogRef--:t.dialogRef<=1&&(D.D.detect.hideMask(),t.dialog=!1,t.dialogRef=0)},setBtnCancelVisibleForProgress:function(e,t){(0==D.D.cancelFrome&&1==e.__IfShowProgressBar||0!=D.D.cancelFrome&&1==e.__IfShowCancelDialogWhenImageTransfer)&&D.D.setBtnCancelVisibleForProgress(t)},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync","OnRemoteScanStatusAsync","OnConsumed"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleOnBitmapChangedEvent:function(e,t,r){var n="_OnBitmapChanged";return D.D.isFunction(e[n])&&e[n](t.result,t,r),!1},handleEvent:function(r,n,e){var i=n.result[0],o=r._objWS,a=!1;return D.D.each(c.EVENTS,function(e,t){if(n.event===e)return e=["_",e].join(""),a=!0,D.D.isFunction(r[e])&&r[e](n.result,n),!1}),a?(D.D.log("handled event:"+n.event),D.D.each(c.SEND_BACK_EVENTS,function(e,t){return!c.isServerInvalid(r)&&(n.event===e?(D.D.log("sendback event:"+n.event),c.sendData(o,c.getJson(r,n.event,(0,u.dv)(i),0),!1,!0),!1):void 0)})):(D.D.each(D.D.Addon_Events,function(e,t){if(n.event===e)return e=["_",e].join(""),a=!0,D.D.isFunction(r[e])&&r[e](n.result),!1}),a&&(D.D.log("handled addon event:"+n.event),D.D.each(D.D.Addon_Sendback_Events,function(e,t){return!c.isServerInvalid(r)&&(n.event===e?(D.D.log("sendback addon event:"+n.event),c.sendData(o,c.getJson(r,n.event,(0,u.dv)(i),0),!1,!0),!1):void 0)}))),a},getImageType:function(e){if(e===undefined)return-1;if(e.length<4)return-1;var t=i()(e).call(e,".");if(-1===t)return-1;e=I()(e).call(e,t).toLowerCase();return".bmp"===e||".dib"===e?D.I.DWT.EnumDWT_ImageType.IT_BMP:".jpg"===e||".jpe"===e||".jpeg"===e||".jfif"===e?D.I.DWT.EnumDWT_ImageType.IT_JPG:".tif"===e||".tiff"===e?D.I.DWT.EnumDWT_ImageType.IT_TIF:".png"===e?D.I.DWT.EnumDWT_ImageType.IT_PNG:".pdf"===e?D.I.DWT.EnumDWT_ImageType.IT_PDF:".jp2"===e||".j2k"===e||".j2c"===e?D.I.DWT.EnumDWT_ImageType.IT_J2K:-1},addImageFileExt:function(e,t){var r,n=e.substring(i()(e).call(e,".")).toLowerCase();return".bmp"==n||".dib"==n||".jpg"==n||".jpe"==n||".jpeg"==n||".jfif"==n||".tif"==n||".tiff"==n||".png"==n||".pdf"==n?e:(t==D.I.DWT.EnumDWT_ImageType.IT_BMP?r=[e,".bmp"].join(""):t==D.I.DWT.EnumDWT_ImageType.IT_JPG?r=[e,".jpg"].join(""):t==D.I.DWT.EnumDWT_ImageType.IT_PNG?r=[e,".png"].join(""):t==D.I.DWT.EnumDWT_ImageType.IT_TIF?r=[e,".tif"].join(""):t==D.I.DWT.EnumDWT_ImageType.IT_PDF?r=[e,".pdf"].join(""):t==D.I.DWT.EnumDWT_ImageType.IT_J2K&&(r=[e,".jp2"].join("")),r)},replaceLocalFilename:function(e){return e===undefined?"":(e=(e=String(e)).replace(/\\/g,"\\\\"),D.I.navInfoSync.bFileSystem?decodeURI(e):e)},GetImageInfo:function(e,t){t=e._ImgManager.convertClientIndexToServerId(t);return-1==t?(D.D.Errors.IndexOutOfRange(e),!1):e._innerFun("GetImageInfo",(0,u.dv)(t))},isServerInvalid:function(e){var t=!e.bReady||null===e._objWS,r=e.__bMustUpgradeService;return t?D.D.Errors.Server_Invalid(e):r?D.D.Errors.MustUpgradeService(e):e._destroy&&D.D.Errors.Destroyed(e),t||r||-2208==e._errorCode||e._destroy},isHttpServerInvalid:function(e){var t=!e.bReady||null===e.httpUrl,r=e.__bMustUpgradeService;return t?D.D.Errors.Server_Invalid(e):r&&D.D.Errors.MustUpgradeService(e),t||r||-2208==e._errorCode},getBlobTypeByImageType:function(e){var t="application/octet-stream";switch(e){case 0:t="image/bmp";break;case 1:t="image/jpeg";break;case 2:t="image/tiff";break;case 3:t="image/png";break;case 4:t="application/pdf";break;case 14:t="image/jp2"}return t},DEF:function(t,r,e,n){var i;0!==e&&1!==e?i=e:(i={},e&&(i.set=1==n?function(e){e=+e;return!D.D.isNumber(e)||isNaN(e)?(D.D.Errors.InvalidValue(t),!1):(t._resetErr(),!!t._isValid()&&t._innerFun(r,(0,u.dv)(e)))}:2==n?function(e){return D.D.isBoolean(e)?(t._resetErr(),!!t._isValid()&&t._innerFun(r,(0,u.dv)(e))):(D.D.Errors.InvalidValue(t),!1)}:function(e){return D.D.isString(e)?(t._resetErr(),!!t._isValid()&&t._innerFun(r,(0,u.dv)(e))):(D.D.Errors.InvalidValue(t),!1)})),i.get||(i.get=function(){return t._resetErr(),!!t._isValid()&&("CurrentSourceName"==r?(e=t._innerFun(r),t.__currentImageCaptureDriverType==D.I.DWT.EnumDWT_Driver.TWAIN64&&0<e.length?"Twain64-"+e:t.__currentImageCaptureDriverType==D.I.DWT.EnumDWT_Driver.ICA&&t.__serverPlatform==D.I.DWT.EnumDWT_PlatformType.enumMac&&0<e.length?"ICA-"+e:e):t._innerFun(r));var e}),r in t||o()(t,r,i)},_DEF_NOT_SUPPORT_MOBILE_A:function(e,t,r){var n={get:function(){return e._mobileNotSupport(t)}};1!==r&&!D.D.isUndef(r)||(n.set=n.get),t in e||o()(e,t,n)},DEF_NOT_SUPPORT_MOBILE:function(t,e,r){D.D.isArray(e)?D.D.each(e,function(e){c._DEF_NOT_SUPPORT_MOBILE_A(t,e,r)}):c._DEF_NOT_SUPPORT_MOBILE_A(t,e,r)},callbacks:[],pushCallback:function(e,t,r){c.callbacks({method:e,callback:t,ticks:r})},refreshUIRef:0,makeParams:u.dv}},1505:function(e,t,r){r.r(t);var n=r(1695);n.D.LS={isSupportLS:function(){var e=n.I.navInfoSync,t=!1;if(!e.bEdge||!e.bFileSystem)try{t=!!window.localStorage}catch(r){}return t},item:function(e,t,r){var n=null;return!this.isSupportLS()||null===(n=t?(localStorage.setItem(e,t),t):localStorage.getItem(e))?r:n},removeItem:function(e){return!!this.isSupportLS()&&(localStorage.removeItem(e),!0)}}},8743:function(A,e,t){t.r(e);var f,a,o,s,u,I,c,l,n,d,h,g,m,_,p,D,v,b,y,T,S,w,B=t(9623),e=t(5005),O=t.n(e),e=t(4579),R=t.n(e),e=t(5683),C=t.n(e),e=t(9927),E=t.n(e),e=t(7711),M=t.n(e),e=t(9798),P=t.n(e),W=t(1695),x=t(3887),U=t(668),r=W.D.html5.STwain,e=r.prototype,G=0,H=1,j=2,z=3,Z=4,J=5,k=0,F=null,L=function L(){return new W.I.Imagecore},N=function N(){return new W.I.ImageProc},V=function V(){return new W.I.PdfReader},X=function X(){return new W.I.PdfWriter},Y=(W.D.MobileFuns={makeParams:function(){return arguments},_innerSaveLocal:function(e,t,r){var n,i=window,o=W.I.navInfo,a=W.I.navInfoSync,i=i.requestFileSystem||i.webkitRequestFileSystem||i.mozRequestFileSystem;if((o.biPad||o.biPhone)&&!i&&(a.bSafari&&O()(a.strBrowserVersion)<13||!a.bSafari))return n=window.open(e,"","",!1),R()(function(){n.document.title=t},100),!0;i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=e,i.download=t,i.target="_blank",document.body.appendChild(i),o.bEdge?i.click():((a=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1),i.dispatchEvent(a)),document.body.removeChild(i),!0},saveLocal:function(e,t,r){W.D.isString(e)&&-1<C()(e).call(e,"blob:http://")?W.D.MobileFuns._innerSaveLocal(e,t,r):e instanceof Blob?W.D.MobileFuns._innerSaveLocal(E().createObjectURL(e),t,r):e instanceof ArrayBuffer?W.D.MobileFuns._innerSaveLocal(E().createObjectURL(new Blob([e])),t,r):W.D.MobileFuns._innerSaveLocal(e,t,r)},dataURLtoBlob:function(e){var t,r,n,e=e.split(","),i=e[0].match(/:(.*?);/)[1];try{t=atob(e[1])}catch(o){return t="",!1}for(r=t.length,n=new Uint8Array(r);r--;)n[r]=t.charCodeAt(r);return new Blob([n],{type:i})},appendTiffPage:function(e,t,i,r){var o=e,n=t,e=i.context.bShowPercentProgress,a=o._aryTiffTag.length;if(0<a){32<a&&(a=32);for(var s=0;s<a;s++)n=(n=n.then(function(e){i.context.tagIndex=0;var t=i.context.tagIndex,t=o._aryTiffTag[t];return W.D.log("[Wasm]Save Image: page "+i.context.cIndex+" add tiff tag "+t.tag),i.addTag(t.tag,t.content,t.UseBase64Encoding)})).then(function(){var e=i.context.tagIndex;i.context.tagIndex=e+1})}return n=n.then(function(){W.D.log("[Wasm]Save Image: page "+i.context.cIndex+" add tiff tag successfully");var e=i.context.aryIndex,t=i.context.cIndex;return o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getUidByIndex(e[t]))}),n=(n=o._scaleDownThreshold<=0?n:(n=n.then(function(e){var t=e&&e.metadata?e.metadata:{},r=(W.D.log("[Wasm]Save Image: scale"),1==(i.context.metaData=t).bitDepth);return W.I.ImageProcWrapper.resize(e.oriData,t.width,t.height,o._scaleDownThreshold,5,r)})).then(function(e){return W.D.log("[Wasm]Save Image: scaled"),{oriData:e.imageData,metadata:i.context.metaData}})).then(function(e){var t=W.I.DWT.EnumDWT_ImageType.IT_ALL,r=i.context.tiffFormat,n=(W.D.log("[Wasm]Save Image: page "+i.context.cIndex+" append to tiff"),1==e.metadata.bitDepth);return i.appendImage(e.oriData,t,r,o._jpgQuality,n)}),n=(n=e?n.then(function(){var e=i.context.aryIndex.length,t=i.context.cIndex+1;o._OnPercentDone([0,100*t/+e,t+"/"+e,""])}):n).then(function(){var e=i.context.cIndex;return i.context.cIndex=e+1,e+1})},unloadWasm:function(){return F&&(F.terminate(),F=null),W.D.detect.wasmScriptLoaded&&W.I.WasmEnv,W.D.Promise.resolve()},loadCallback:function(e){if(e&&e.customData){var t,r=e.customData,o=e.fPdfReader,a=e.imgCore,e=r.src,n=r.imgType,s=r.index,i=r.password,u=r.resolution,c=r.convertMode,l=!1,r=W.I.DWT.EnumDWT_ImageType;if(n==r.IT_PDF)return o||(o=V(),l=!0),t=function t(e){o.close(),l&&o.terminate()},o.open(e,i).then(function(e){var t,r,n,i=W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad;return(W.I.navInfoSync.bMobile||W.I.navInfoSync.bPad)&&(t=5,r=85,n=3840),o.readPage(s,u,c,W.I.DWT.EnumDWT_ImageType.IT_JPG,!1,!1,i,t,r,n)},t).then(function(e){return o.close(),l&&o.terminate(),e.imageData},t);if(n==r.IT_TIF)return a||(a=L(),l=!0),t=function t(e){l&&a.terminate()},a.openTiff(e).then(function(e){var t,r,n,i=W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad;return(W.I.navInfoSync.bMobile||W.I.navInfoSync.bPad)&&(t=5,r=85,n=3840),a.readTiff(s,W.I.DWT.EnumDWT_ImageType.IT_JPG,!1,i,t,r,n)}).then(function(e){return l&&a.terminate(),e.imageData},t);if(n==r.IT_PNG||n==r.IT_JPG||n==r.IT_BMP){a=a||L(),l=!0,i=_this._jpgQuality,n=(t=function t(e){l&&a.terminate()},W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad);if(W.I.navInfoSync.bMobile||W.I.navInfoSync.bPad){l&&a.terminate();if(r1&&(3840<r1.imageWidth||3840<r1.imageHeight))return W.I.ImageProcWrapper.resizeImageWithMeta(e,r1,5,i,3840).then(function(e){return e.imageData})}return a.readImage(e,W.I.DWT.EnumDWT_ImageType.IT_JPG,i,!1,n).then(function(e){return l&&a.terminate(),e.imageData},t)}}return W.D.Promise.resolve()},convertOutputType:function(e){return e},isBlobUrl:function(e){return W.D.isString(e)&&-1<C()(e).call(e,"blob:http://")},revoke:function(e){return!W.D.MobileFuns.isBlobUrl(e)||(E()||window.webkitURL).revokeObjectURL(e)}},e._innerSendToMobile=function(e,t,r,n,i){var o=this;return"GetLicenseInfo"==e||"SetLTSLicense"==e?(W.D.detect.showMask(o),a(o,t).then(function(e){W.D.hideMask(),W.D.isFunction(n)&&n(e)},function(e){W.D.hideMask(),W.D.Errors.GetLicenseInfoFailed(o,e),i&&i(o._errorCode,o._errorString)})):W.D.License.checkProductKey(o,{Core:!0,Wasm:!0},!0)?("SaveImage"==e?f(o,t).then(function(e){var t=e.blobData;n&&n(t,e.type,e.MD5)},function(){W.D.isFunction(i)&&i(o._errorCode,o._errorString)}):o._innerSendToMobileV2(e,t).then(n,function(){W.D.isFunction(i)&&i(o._errorCode,o._errorString)}),!0):(i&&i(o._errorCode,o._errorString),!1)},e._innerSendToMobileV2=function(e,t){var r=this;return"GetLicenseInfo"==e||"SetLTSLicense"==e?a(r,t):W.D.License.checkProductKey(r,{Core:!0,Wasm:!0},!0)?"LoadImageFromBinary"==e?I(r,t):"RotateEx"==e?c(r,t):"Flip"==e?n(r,t):"Mirror"==e?d(r,t):"Invert"==e?h(r,t):"SaveImage"==e?f(r,t):"Crop"==e?g(r,t):"Erase"==e?m(r,t):"ChangeImageSize"==e?_(r,t):"GetSkewAngleOnly"==e?p(r,t):"GetSkewAngle"==e?D(r,t):"ConvertToGrayScale"==e?v(r,t):"ConvertToBWScale"==e?b(r,t):"SetDPI"==e?y(r,t):"SetImageWidth"==e?T(r,t):"IsTextBasedPDF"==e?S(r,t):"GetMD5"==e?o(r,t):"ChangeBrightness"==e?u(r,t):"ChangeContrast"==e?s(r,t):W.D.Promise.reject({code:-1e3,message:"invalid method: "+e}):W.D.Promise.reject(W.I.DWT.licenseException)},function Y(){var e=W.I.DWT.ProductKey;return e=W.D.License.isLTS()&&W.I.WasmEnv?W.I.WasmEnv.productKey:e});S=function S(t,e){var r,n,i,e=e[0],o=W.I.DWT.EnumDWT_ImageType;return e instanceof FileList?r=e[0]:!(e instanceof Blob)&&(e instanceof ArrayBuffer||e instanceof Uint8Array)?(r=new Blob([e]),n=(0,x.Ho)(e)):r=e,W.D.isUndefined(n)&&(r.type?"application/pdf"==r.type&&(n=o.IT_PDF):n=W.D.html5.Funs.getImageType(r.name)),n==o.IT_PDF?(i=V(),W.D.detect.showMask(t),i.open(r,t._pdfPassword).then(function(e){return W.D.hideMask(),i.close(),i.terminate(),e.isTextBased},function(e){throw W.D.hideMask(),W.D.Errors.LoadImageFailed(t,e),i.close(),i.terminate(),{code:t._errorCode,message:t._errorString}})):(W.D.Errors.LoadImageFailed(t,"not pdf."),W.D.Promise.reject({code:t._errorCode,message:t._errorString}))},I=function(s,a){var u,c,l,d,e,h,t=a[0],g=a[1],f=!1,n=0,m=!1,_=W.I.DWT.EnumDWT_ImageType,p=!1;if(3<a.length&&(u=a[3]),4<a.length&&(m=a[4]),5<a.length&&(p=a[5]),u||""==(u=s.GetCurrentDocumentName())&&(u=s._ImgManager.getWebViewer().GetDefaultFileName()),t instanceof FileList?c=t[0]:!(t instanceof Blob)&&(t instanceof ArrayBuffer||t instanceof Uint8Array)?(c=new Blob([t]),d=(0,x.Ho)(t)):c=t,W.D.isUndefined(c))return W.D.Errors.InvalidSourceFile(s),W.D.Promise.reject({code:s._errorCode,message:s._errorString});if(W.D.isUndefined(d))if(c.type){if(-1==(d="application/pdf"==c.type?_.IT_PDF:"image/png"==c.type?_.IT_PNG:"image/jpeg"==c.type||"image/jpg"==c.type?_.IT_JPG:"image/bmp"==c.type?_.IT_BMP:"image/tiff"==c.type||"image/tif"==c.type?_.IT_TIF:"image/jp2"==c.type?_.IT_J2K:W.D.html5.Funs.getImageType(c.name))&&"application/octet-stream"==c.type)return new W.D.Promise(function(t,e){var r=new FileReader;r.onload=function(e){e=e.target.result;a[0]=e,t(a)},r.readAsArrayBuffer(c)}).then(function(e){return I(s,e)})}else d=W.D.html5.Funs.getImageType(c.name);return l=c.name,d==_.IT_JPG||d==_.IT_PNG||d==_.IT_BMP||d==_.IT_J2K?(m||W.D.detect.showMask(s),t=s._jpgQuality,f=L(),e=W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad,f.readImage(c,_.IT_JPG,t,!1,e).then(function(e){if(W.I.navInfoSync.bMobile||W.I.navInfoSync.bPad){var t=s._jpgQuality;if(e&&(3840<e.imageWidth||3840<e.imageHeight))return W.I.ImageProcWrapper.resizeImageWithMeta(c,e,5,t,3840)}return e}).then(function(e){var t=0,t=(g?(t=U.zW,p&&(e.imageBitDepth=1)):1==e.originalFormat?t=_.IT_BMP:2==e.originalFormat?t=_.IT_JPG:3==e.originalFormat?t=_.IT_PNG:14==e.originalFormat&&(t=_.IT_J2K),{src:e.imageData,imgType:e.imageType,verify:t,dataType:"url"}),r=(c instanceof File||2==e.originalFormat&&c instanceof Blob&&(t.src=c),a[2]),n={},e=(n.width=e.imageWidth,n.height=e.imageHeight,n.bitDepth=e.imageBitDepth,n.resolutionX=e.imageXResolution,n.resolutionY=e.imageYResolution,r&&(n.oriBlobData=r),t.metadata=n,k++,!1);try{t.imageId=k,s._OnBitmapChanged(["10",""+k,1,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count(),t],null,u)}catch(i){e=!0,W.D.Errors.SystemExceptionError(s,i.message)}if(m||W.D.hideMask(),!e&&W.D.isFunction(s.__OnPostLoad))try{s.__OnPostLoad("",l,d)}catch(o){e=!0,W.D.Errors.SystemExceptionError(s,o.message)}if(f&&f.terminate(),W.I.DWT.lavrf_(1,W.I.DWT.EnumInstance.dwt_browser),e)throw{code:s._errorCode,message:s._errorString}},function(e){throw W.D.Errors.LoadImageFailed(s,e),m||W.D.hideMask(),f&&f.terminate(),{code:s._errorCode,message:s._errorString}})):d==_.IT_PDF?((h=V()).context={},W.D.showProgress(s),s._OnPercentDone([0,-1,W.I.MSG.LoadingPdf,""]),h.open(c,s._pdfPassword).then(function(e){var t,r=e.PdfCount;if(e.isTextBased&&2==s._pdfRealConvertMode)return W.I.Lib.closeProgress(s),2==s._pdfConvertMode?W.I.Lib.Errors.LoadTextPDFButSetImageOnly(s):W.I.Lib.Errors.LoadTextPDFButNoPdfrLicenseErr(s),h.close(),h.terminate(),W.D.Promise.reject({code:s._errorCode,message:s._errorString});for(s._OnPercentDone([0,0,"0/"+r,""]),t=W.D.Promise.resolve(0),h.context.cIndex=0,h.context.pdfCount=r,n=0;n<r;n++)t=(t=t.then(function(){var e,t,r,n=h.context.cIndex,i=W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad;return(W.I.navInfoSync.bMobile||W.I.navInfoSync.bPad)&&(e=5,t=85,r=3840),h.readPage(n,s._pdfResolution,s._pdfRealConvertMode,W.I.DWT.EnumDWT_ImageType.IT_JPG,!1,!1,i,e,t,r)})).then(function(e){var t=h.context.cIndex,r=h.context.pdfCount,n=t+1,i={},o=W.I.DWT.EnumDWT_ImageType.IT_PDF,r=(1==e.realReadMode&&(o=U.KX),s._OnPercentDone([0,100*n/+r,n+"/"+r,""]),W.I.Lib.isArray(e.imageInfos)&&0<e.imageInfos.length&&(n=e.imageInfos[0],i.width=n.imageWidth,i.height=n.imageHeight,i.bitDepth=n.imageBitDepth,i.resolutionX=n.imageXResolution,i.resolutionY=n.imageYResolution),k++,{src:e.imageData,dataType:"url",imgType:W.I.DWT.EnumDWT_ImageType.IT_PDF,verify:o,index:e.pageIndex,metadata:i,imageId:k});try{s._OnBitmapChanged(["10",""+k,1,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count(),r],null,u)}catch(a){throw W.I.Lib.Errors.SystemExceptionError(s,a.message),0}h.context.cIndex=t+1});return t.then(function(){W.I.Lib.closeProgress(s),h.close(),h.terminate(),W.I.DWT.lavrf_(1,W.I.DWT.EnumInstance.dwt_browser),W.I.Lib.isFunction(s.__OnPostLoad)&&s.__OnPostLoad("",l,d)},function(e){throw W.I.Lib.closeProgress(s),h.close(),h.terminate(),e&&W.I.Lib.Errors.LoadImageFailed(s,e),{code:s._errorCode,message:s._errorString}})},function(e){throw W.I.Lib.closeProgress(s),h.close(),h.terminate(),e&&W.I.Lib.Errors.LoadImageFailed(s,e),{code:s._errorCode,message:s._errorString}})):d==_.IT_TIF?(f=L(),W.D.showProgress(s),s._OnPercentDone([0,-1,W.I.MSG.LoadingTiff,""]),f.openTiff(c).then(function(e){var o=e.pageCount,a=e.imageInfos,t=W.D.Promise.resolve(0);s._OnPercentDone([0,0,"0/"+o,""]);for(var r=0;r<o;r++)t=t.then(function(n){var e,t,r,i=W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad;return(W.I.navInfoSync.bMobile||W.I.navInfoSync.bPad)&&(e=5,t=85,r=3840),f.readTiff(n,W.I.DWT.EnumDWT_ImageType.IT_JPG,!1,i,e,t,r).then(function(e){var t=n+1,t=(s._OnPercentDone([0,100*t/+o,t+"/"+o,""]),k++,{src:e.imageData,dataType:"url",imgType:W.I.DWT.EnumDWT_ImageType.IT_TIF,verify:W.I.DWT.EnumDWT_ImageType.IT_TIF,index:n,metadata:a[n],imageId:k});try{s._OnBitmapChanged(["10",""+k,1,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count(),t],null,u)}catch(r){throw W.I.Lib.Errors.SystemExceptionError(s,r.message),0}return n+1})});return t.then(function(){W.I.Lib.closeProgress(s),f.closeTiff(),f.terminate(),W.I.DWT.lavrf_(1,W.I.DWT.EnumInstance.dwt_browser),W.I.Lib.isFunction(s.__OnPostLoad)&&s.__OnPostLoad("",l,d)},function(e){throw W.I.Lib.closeProgress(s),f.closeTiff(),f.terminate(),e&&W.I.Lib.Errors.LoadImageFailed(s,e),{code:s._errorCode,message:s._errorString}})},function(e){throw W.I.Lib.closeProgress(s),f.closeTiff(),f.terminate(),W.I.Lib.Errors.LoadImageFailed(s,e),{code:s._errorCode,message:s._errorString}})):(W.D.Errors.LoadImageFailed(s,"invalid image type."),W.D.Promise.reject({code:s._errorCode,message:s._errorString}))},c=function c(n,e){var t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=(W.D.isUndefined(r)&&(r=0),W.D.isUndefined(i)&&(i=!0),(W.D.isUndefined(o)||o<1||3<o)&&(o=3),W.D.isUndefined(a)&&(a="FFFFFF"),r<0?r=r%360+360:360<=r&&(r%=360),W.D.detect.showMask(n),N()),u=n._ImgManager.convertClientIndexToServerId(t);return s.context={},n._ImgManager.getWebViewer().GetImageData(n._ImgManager.getUidByIndex(t)).then(function(e){return s.context.metadata=e&&e.metadata?e.metadata:{},s.initImage(e.oriData)}).then(function(){if(0!=r)return s.rotate(r,a,i,o)}).then(function(){return s.getImage()}).then(function(e){if(W.I.navInfoSync.bMobile||W.I.navInfoSync.bPad){var t=n._jpgQuality;if(e&&(3840<e.imageWidth||3840<e.imageHeight))return W.I.ImageProcWrapper.resizeImageWithMeta(e.imageData,e,5,t,3840)}return e}).then(function(e){"width"in e&&(e.imageWidth=e.imageWidth),"height"in e&&(e.imageHeight=e.imageHeight);var e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{width:e.imageWidth,height:e.imageHeight}},t=!1;try{n._OnBitmapChanged(["10",""+u,4,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count(),e])}catch(r){t=!0,W.D.Errors.SystemExceptionError(n,r.message)}if(W.D.hideMask(),s.terminate(),t)throw{code:n._errorCode,message:n._errorString}},function(e){throw W.D.Errors.RotateFailed(n,e),W.D.hideMask(),s.terminate(),{code:n._errorCode,message:n._errorString}})},l=function l(r,e,t){var n=N(),i=r._ImgManager.convertClientIndexToServerId(e);return n.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(e)).then(function(e){return n.context.metadata=e&&e.metadata?e.metadata:{},n.initImage(e.oriData)}).then(function(){return n.flip(t)}).then(function(){return n.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url"};try{r._OnBitmapChanged(["10",""+i,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),n.terminate()},function(e){throw W.D.hideMask(),e&&(-1==t?W.D.Errors.MirrorFailed(r,e):W.D.Errors.FlipFailed(r,e)),n.terminate(),{code:r._errorCode,message:r._errorString}})},d=function d(e,t){t=t[0];return l(e,t,-1)},n=function n(e,t){t=t[0];return l(e,t,1)},h=function h(r,e){var e=e[0],t=N(),n=r._ImgManager.convertClientIndexToServerId(e);return t.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(e)).then(function(e){return t.context.metadata=e&&e.metadata?e.metadata:{},t.initImage(e.oriData)}).then(function(){return t.invert()}).then(function(){return t.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url"};try{r._OnBitmapChanged(["10",""+n,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),t.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.InvertFailed(r,e),t.terminate(),{code:r._errorCode,message:r._errorString}})},g=function g(r,e){var t=e[0],n=e[1],i=e[2],o=e[3],a=e[4];if(!(W.D.isNumber(n)&&W.D.isNumber(i)&&W.D.isNumber(o)&&W.D.isNumber(a)))return W.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});var s=N(),u=r._ImgManager.convertClientIndexToServerId(t);return s.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(t)).then(function(e){return s.context.metadata=e&&e.metadata?e.metadata:{},s.initImage(e.oriData)}).then(function(){return s.crop(n,i,o,a)}).then(function(){return s.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight}};try{r._OnBitmapChanged(["10",""+u,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),s.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.CropFailed(r,e),s.terminate(),{code:r._errorCode,message:r._errorString}})},m=function m(r,e){var t=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5];if(!(W.D.isNumber(n)&&W.D.isNumber(i)&&W.D.isNumber(o)&&W.D.isNumber(a)))return W.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});W.D.isUndefined(s)&&(s="FFFFFF");var u=N(),c=r._ImgManager.convertClientIndexToServerId(t);return u.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(t)).then(function(e){return u.context.metadata=e&&e.metadata?e.metadata:{},u.initImage(e.oriData)}).then(function(){return u.erase(n,i,o,a,s)}).then(function(){return u.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight}};try{r._OnBitmapChanged(["10",""+c,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),u.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.EraseFailed(r,e),u.terminate(),{code:r._errorCode,message:r._errorString}})},_=function _(r,e){var t=e[0],n=e[1],i=e[2],o=e[3];if(!W.D.isNumber(n))return W.D.Errors.MobileServer_InvalidWidth(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});if(!W.D.isNumber(i))return W.D.Errors.MobileServer_InvalidHeight(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});W.D.isUndefined(o)&&(o=5);var a=N(),s=r._ImgManager.convertClientIndexToServerId(t);return a.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(t)).then(function(e){return a.context.metadata=e&&e.metadata?e.metadata:{},a.initImage(e.oriData)}).then(function(){var e=1==a.context.metadata.bitDepth;return a.resize(n,i,o,5,e)}).then(function(){return a.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight}};try{r._OnBitmapChanged(["10",""+s,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),a.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.ChangeImageSizeFailed(r,e),a.terminate(),{code:r._errorCode,message:r._errorString}})},p=function p(t,e){var e=e[0],r=N(),e=(t._ImgManager.convertClientIndexToServerId(e),r.context={},W.D.detect.showMask(t),t._ImgManager.getWebViewer().GetMinPageData());if(e)return r.initImage(e.data,!0,e.width,e.height).then(function(){return r.getSkewAngle()}).then(function(e){return W.D.hideMask(),delete r.context,r.terminate(),e},function(e){throw W.D.hideMask(),W.D.Errors.SkewAngleFailed(t,e),r.terminate(),{code:t._errorCode,message:t._errorString}})},D=function D(t,e){var e=e[0],r=N();t._ImgManager.convertClientIndexToServerId(e);return r.context={},W.D.detect.showMask(t),t._ImgManager.getWebViewer().GetImageData(t._ImgManager.getUidByIndex(e)).then(function(e){return r.context.metadata=e&&e.metadata?e.metadata:{},r.initImage(e.oriData)}).then(function(){return r.getSkewAngle()}).then(function(e){return W.D.hideMask(),delete r.context,r.terminate(),e},function(e){throw W.D.hideMask(),W.D.Errors.SkewAngleFailed(t,e),r.terminate(),{code:t._errorCode,message:t._errorString}})},v=function v(r,e){var e=e[0],t=N(),n=r._ImgManager.convertClientIndexToServerId(e);return t.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(e)).then(function(e){return t.context.metadata=e&&e.metadata?e.metadata:{},t.initImage(e.oriData)}).then(function(){return t.toGrayscale()}).then(function(){return t.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight,bitDepth:8}};try{r._OnBitmapChanged(["10",""+n,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),t.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.ConvertToGrayScaleFailed(r,e),t.terminate(),{code:r._errorCode,message:r._errorString}})},b=function b(r,e){var e=e[0],t=N(),n=r._ImgManager.convertClientIndexToServerId(e);return t.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(e)).then(function(e){return t.context.metadata=e&&e.metadata?e.metadata:{},t.initImage(e.oriData)}).then(function(){return t.toBinary(!1,void 0)}).then(function(){return t.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight,bitDepth:1}};try{r._OnBitmapChanged(["10",""+n,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),t.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.ConvertToBWScaleFailed(r,e),t.terminate(),{code:r._errorCode,message:r._errorString}})},y=function y(r,e){var t=e[0],n=e[1],i=e[2],o=e[3],a=e[4];if(!W.D.isNumber(n))return W.D.Errors.MobileServer_InvalidXResolution(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});if(!W.D.isNumber(i))return W.D.Errors.MobileServer_InvalidYResolution(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});W.D.isUndefined(a)&&(a=W.I.DWT.EnumDWT_InterpolationMethod.IM_BICUBIC);var s,u,c=N(),l=r._ImgManager.convertClientIndexToServerId(t);return c.context={},e=r._ImgManager._UIView.GetMetaDataByIndex(t),s=e.resolutionX,u=e.resolutionY,W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(t)).then(function(e){return c.context.metadata=e&&e.metadata?e.metadata:{},c.initImage(e.oriData)}).then(function(){return c.setDPI(s,u,n,i,o,a)}).then(function(){return c.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight,resolutionX:n,resolutionY:i}};try{r._OnBitmapChanged(["10",""+l,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),c.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.SetDPIFailed(r,e),c.terminate(),{code:r._errorCode,message:r._errorString}})},T=function T(r,e){var t=e[0],n=e[1];if(!W.D.isNumber(n))return W.D.Errors.MobileServer_InvalidWidth(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});var i=N(),o=r._ImgManager.convertClientIndexToServerId(t);return i.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(t)).then(function(e){return i.context.metadata=e&&e.metadata?e.metadata:{},i.initImage(e.oriData)}).then(function(){return i.setImageWidth(n)}).then(function(){return i.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight}};try{r._OnBitmapChanged(["10",""+o,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),i.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.SetImageWidthFailed(r,e),i.terminate(),{code:r._errorCode,message:r._errorString}})},f=function f(o,e){var n,a,t=e[0],s=e[1],r=e[2],u=e[3],c=e[4],l=!1,d=!1,e=W.I.DWT.EnumDWT_ImageType;if(W.D.isUndefined(t))return W.D.Errors.MobileServer_InvalidImage(o),W.D.Promise.reject({code:o._errorCode,message:o._errorString});if(!W.D.isArray(s))return W.D.Errors.MobileServer_InvalidIndex(o),W.D.Promise.reject({code:o._errorCode,message:o._errorString});if(W.D.isUndefined(r)&&(r="jpg"),W.D.isString(t)&&""!=t||(t="img."+r),"png"==r||"jpg"==r||"bmp"==r)return t=s[0],a=o._jpgQuality,W.D.log("[Wasm]Save Image: save "+r),1==u&&W.D.detect.showMask(o),n="png"==r?e.IT_PNG:"bmp"==r?e.IT_BMP:e.IT_JPG,e=o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getUidByIndex(t)),(d=L()).context={},d.context.bSaveAsBinary=c,(e=o._scaleDownThreshold<=0?e.then(function(e){W.D.log("[Wasm]Save Image: get original image data successfully.");var t=d.context.bSaveAsBinary?W.I.Enum_ReturnType.RT_BINARY:W.I.Enum_ReturnType.RT_BASE64,r=1==e.metadata.bitDepth;return d.saveImage(e.oriData,n,a,t,r)}):(e=e.then(function(e){W.D.log("[Wasm]Save Image: save to new type successfully.");var t=e&&e.metadata?e.metadata:{},r=1==t.bitDepth;return d.context.bOneBit=r,W.I.ImageProcWrapper.resize(e.oriData,t.width,t.height,o._scaleDownThreshold,5,d.context.bOneBit)})).then(function(e){W.D.log("[Wasm]Save Image: image scale successfully.");var t=d.context.bSaveAsBinary?W.I.Enum_ReturnType.RT_BINARY:W.I.Enum_ReturnType.RT_BASE64;return d.saveImage(e.imageData,n,a,t,d.context.bOneBit)})).then(function(e){return 1==u&&W.D.hideMask(),d&&d.terminate(),l&&l.terminate(),W.D.log("[Wasm]Save Image: save image terminate."),{blobData:e.imageData,type:r,MD5:e.MD5}},function(e){throw 1==u&&W.D.hideMask(),W.D.Errors.SaveImageFailed(o,e),W.D.log("[Wasm]Save Image: save image failed."),d&&d.terminate(),l&&l.terminate(),{code:o._errorCode,message:o._errorString}});if("pdf"!=r){if("tiff"!=r)return W.D.Errors.InvalidImageType(o),W.D.Promise.reject({code:o._errorCode,message:o._errorString});var h=s.length,g=(W.D.log("[Wasm]Save Image: save tiff"),(d=L()).context={},d.context.bSaveAsBinary=c,0<o._scaleDownThreshold&&((l=N()).context={}),u&&(d.context.bShowPercentProgress=!0,W.D.showProgress(o),2==u?o._OnPercentDone([0,-1,W.I.MSG.ConvertingToBlob,""]):3==u?o._OnPercentDone([0,-1,W.I.MSG.ConvertingToBase64,""]):4==u?o._OnPercentDone([0,-1,W.I.MSG.Encoding,""]):o._OnPercentDone([0,-1,W.I.MSG.SavingTiff,""])),d.createTiff()),t=W.I.DWT.EnumDWT_TIFFCompressionType;for(d.context.cIndex=0,e=G,o._tiffCompressionType==t.TIFF_AUTO?e=G:o._tiffCompressionType==t.TIFF_FAX3||o._tiffCompressionType==t.TIFF_T4?e=H:o._tiffCompressionType==t.TIFF_FAX4||o._tiffCompressionType==t.TIFF_T6?e=j:o._tiffCompressionType==t.TIFF_LZW?e=z:o._tiffCompressionType==t.TIFF_JPEG?e=J:o._tiffCompressionType==t.TIFF_PACKBITS&&(e=Z),d.context.tiffFormat=e,d.context.aryIndex=s,i=0;i<h;i++)g=W.D.MobileFuns.appendTiffPage(o,g,d,l);return(g=g.then(function(){W.D.log("[Wasm]Save Image: generate tiff data.");var e=d.context.bSaveAsBinary?W.I.Enum_ReturnType.RT_BINARY:W.I.Enum_ReturnType.RT_AUTO;return d.getTiff(e)})).then(function(e){return W.D.log("[Wasm]Save Image: save tiff successfully."),d.context.bShowPercentProgress&&W.D.closeProgress(o),d.closeTiff(),d.terminate(),l&&l.terminate(),{blobData:e.imageData,type:"tiff",MD5:e.MD5}},function(e){throw d.context.bShowPercentProgress&&W.D.closeProgress(o),W.D.Errors.SaveImageFailed(o,e),W.D.log("[Wasm]Save Image: save tiff failed."),d.closeTiff(),d.terminate(),l&&l.terminate(),{code:o._errorCode,message:o._errorString}})}t=function(){var e,n=X(),t=s.length,r=(n.context={},W.D.log("[Wasm]Save Image: save pdf"),u&&(W.D.showProgress(o),2==u?o._OnPercentDone([0,-1,W.I.MSG.ConvertingToBlob,""]):3==u?o._OnPercentDone([0,-1,W.I.MSG.ConvertingToBase64,""]):4==u?o._OnPercentDone([0,-1,W.I.MSG.Encoding,""]):o._OnPercentDone([0,-1,W.I.MSG.SavingPdf,""])),n.initPdfSetting(o._pdfWriteSetting));for(0<o._scaleDownThreshold&&((l=N()).context={}),n.context.cIndex=0,n.context.aryIndex=s,n.context.bSaveAsBinary=c,e=0;e<t;e++)r=r.then(function(){var e=n.context.cIndex,t=n.context.aryIndex;return W.D.log("[Wasm]Save Image: page "+n.context.cIndex+" start process."),o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getUidByIndex(t[e]))}),r=(r=o._scaleDownThreshold<=0?r.then(function(e){W.D.log("[Wasm]Save Image: page "+n.context.cIndex+" get image data successfully. (no scale)");var t=1==e.metadata.bitDepth;return n.appendPage(e.oriData,t)}):(r=r.then(function(e){W.D.log("[Wasm]Save Image: page "+n.context.cIndex+" get image data successfully.");var t=e&&e.metadata?e.metadata:{},r=1==t.bitDepth;return n.context.bOneBit=r,W.I.ImageProcWrapper.resize(e.oriData,t.width,t.height,o._scaleDownThreshold,5,r)})).then(function(e){return W.D.log("[Wasm]Save Image: page "+n.context.cIndex+" scale successfully."),n.appendPage(e.imageData,n.context.bOneBit)})).then(function(){var e,t=n.context.cIndex,r=n.context.aryIndex.length;u&&o._OnPercentDone([0,100*(e=t+1)/+r,e+"/"+r,""]),W.D.log("[Wasm]Save Image: page "+n.context.cIndex+" processed."),n.context.cIndex=t+1});return{v:r.then(function(){var e=n.context.bSaveAsBinary?W.I.Enum_ReturnType.RT_BINARY:W.I.Enum_ReturnType.RT_AUTO;return n.writePdf(e)}).then(function(e){return W.D.log("[Wasm]Save Image: save pdf successfully."),u&&W.D.closeProgress(o),n.terminate(),l&&l.terminate(),{blobData:e.pdfData,type:"pdf",MD5:e.MD5}},function(e){throw u&&W.D.closeProgress(o),W.D.Errors.SaveImageFailed(o,e),W.D.log("[Wasm]Save Image: save pdf failed."),n.terminate(),l&&l.terminate(),{code:o._errorCode,message:o._errorString}})}}();return"object"===(0,B.Z)(t)?t.v:void 0},a=function a(t,e){var r,n,e=0<e.length?e[0]:Y();return W.I.WasmEnv?(r=W.I.WasmEnv.licMode,n=W.I.WasmEnv.uuid,W.I.WasmEnv.getLicenseInfo(e,r,n).then(function(e){if(e&&e.Detail)return e;throw W.D.Errors.LicenseEmptyOrInvalid(t),{code:t._errorCode,message:t._errorString}},function(e){throw W.D.Errors.GetLicenseInfoFailed(t,e),{code:t._errorCode,message:t._errorString}})):(W.D.Errors.GetLicenseInfoFailed(t,"wasm not load."),W.D.Promise.reject({code:t._errorCode,message:t._errorString}))},o=function o(t,e){var e=e[0],r=e,n=(e instanceof FileList?r=e[0]:(e instanceof Uint8ClampedArray||e instanceof ArrayBuffer||e instanceof Uint8Array)&&(r=new Blob([e])),L());return n.getMD5(r).then(function(e){return n.terminate(),e},function(e){throw W.D.Errors.GetMD5Failed(t,e),n.terminate(),{code:t._errorCode,message:t._errorString}})},s=function s(r,e){var t=e[0],n=e[1],i=N(),o=r._ImgManager.convertClientIndexToServerId(t);return i.context={},W.D.detect.showMask(r),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(t)).then(function(e){return i.context.metadata=e&&e.metadata?e.metadata:{},i.initImage(e.oriData)}).then(function(){return i.changeContrast(n)}).then(function(){return i.getImage()}).then(function(e){e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight,bitDepth:8}};try{r._OnBitmapChanged(["10",""+o,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),i.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.ChangeContrastFailed(r,e),i.terminate(),{code:r._errorCode,message:r._errorString}})},u=function u(r,e){var t=e[0],n=e[1],i=N(),o=r._ImgManager.convertClientIndexToServerId(t);return i.context={},W.D.detect.showMask(r),W.D.log("[Wasm]Change Brightness: value "+n),r._ImgManager.getWebViewer().GetImageData(r._ImgManager.getUidByIndex(t)).then(function(e){return W.D.log("[Wasm]Change Brightness: get original image data"),i.context.metadata=e&&e.metadata?e.metadata:{},i.initImage(e.oriData)}).then(function(){return W.D.log("[Wasm]Change Brightness: change brightness"),i.changeBrightness(n)}).then(function(){return i.getImage()}).then(function(e){W.D.log("[Wasm]Change Brightness: change brightness successfully");e={src:e.imageData,imgType:W.D.MobileFuns.convertOutputType(e.imageType),dataType:"url",metadata:{imageData:e.imageData,width:e.imageWidth,height:e.imageHeight,bitDepth:8}};try{r._OnBitmapChanged(["10",""+o,4,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count(),e])}catch(t){throw W.D.Errors.SystemExceptionError(r,t.message),0}}).then(function(){W.D.hideMask(),i.terminate()},function(e){throw W.D.hideMask(),e&&W.D.Errors.ChangeBrightnessFailed(r,e),i.terminate(),{code:r._errorCode,message:r._errorString}})},e._saveImageCallback=function(t){var e,r,n,s=this;if(!W.D.isArray(t))return W.D.Errors.InvalidSourceFile(s),W.D.Promise.reject({code:s._errorCode,message:s._errorString});for(W.D.log("[Wasm]camera callback: save image"),n=t.length,e=W.D.Promise.resolve({aryData:t,curIndex:0,count:n}),r=0;r<n;r++)e=(e=e.then(function(t){var e,r=t.aryData[t.curIndex];if(t.bOneBit=!1,r){var n=r.iImageData;r.file;if(n instanceof Blob||n instanceof ArrayBuffer)return t.captureBlob=n,t;e=n.imageData,t.bOneBit=1==n.imageBitDepth}return e instanceof Blob||e instanceof ArrayBuffer?t.bOneBit&&s._bLocalService?w(e).then(function(e){return t.captureBlob=e.blobData,t}):(t.captureBlob=e,t):(W.I.Lib.Errors.InvalidSourceFile(s),W.D.log("[Wasm]camera callback: save image error - page "+t.curIndex+" source invalid."),W.I.Lib.Promise.reject({code:s._errorCode,message:s._errorString}))})).then(function(o){var a,e=o.aryData[o.curIndex];return t&&e&&(a=e.file),W.D.log("[Wasm]camera callback: save image - page "+o.curIndex+" data ready"),new W.I.Lib.Promise(function(e,r){var t=o.captureBlob,n=-1,i=W.I.DWT.EnumDWT_ImageType;s._bLocalService?(W.I.Lib.isString(t.type)&&("application/pdf"==t.type?n=i.IT_PDF:"image/png"==t.type?n=i.IT_PNG:"image/jpeg"==t.type||"image/jpg"==t.type?n=i.IT_JPG:"image/bmp"==t.type?n=i.IT_BMP:"image/tiff"==t.type||"image/tif"==t.type?n=i.IT_TIF:"image/jp2"==t.type&&(n=i.IT_J2K)),s.__captureImage(t,n,function(){W.D.log("[Wasm]camera callback: save image - page "+o.curIndex+" data saved from service"),o.curIndex=o.curIndex+1,o.captureBlob=null,e(o)},function(e,t){r({code:e,message:t})})):(""==(i=s.GetCurrentDocumentName())&&(i=s._ImgManager.getWebViewer().GetDefaultFileName()),s._innerSendToMobile("LoadImageFromBinary",[t,!0,a,i,!0,o.bOneBit],0,function(){W.D.log("[Wasm]camera callback: save image - page "+o.curIndex+" data saved"),o.curIndex=o.curIndex+1,o.captureBlob=null,e(o)},function(e,t){r({code:e,message:t})}))})});return e},e._insertImageCallback=function(e,t,r){var n=this,i=t.oriData,o=!0;if(i&&(i instanceof Blob||i instanceof ArrayBuffer||i instanceof Uint8Array)&&(o=!1),!t||o)throw W.I.Lib.Errors.InvalidSourceFile(n),W.D.log("[Wasm]camera callback: save image error - source invalid."),{code:n._errorCode,message:n._errorString};i=t.customData,i&&(o=i.oriBlob)&&o.imageBitDepth,W.D.log("[Wasm]camera callback: save image - data ready"),k++,i.imageId=k,n._ImgManager.insertImage(e,t,r),o=n._ImgManager.getWebViewer().GetUidByIndex(r);n._ImgManager.getView().innerInsertModel(k,o)},r._areaDetectCallback=function(e,t,r,n,i){var o=N();return W.D.log("[Wasm]camera callback: area detect"),o.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then(function(e){return W.D.log("[Wasm]camera callback: image is ready"),o.src=e.srcBuffer,o.detectDocument(i,t,r,n)}).then(function(e){return W.D.log("[Wasm]camera callback: area detect successfully"),e.src=o.src,o.terminate(),o.src=null,e},function(e){W.D.closeLoadingMsg(),W.D.log("[Wasm]camera callback: area detect failed"),o.terminate();var t={};throw e&&e.code&&e.message?(t._errorString=e.message,t._errorCode=e.code):(t._errorString=e,W.D.Errors.DetectCallbackErr(t)),{code:t._errorCode,message:t._errorString}})},r._perspectiveCallback=function(o,t){var e,a=N();return W.D.log("[Wasm]camera callback: perspective"),W.D.isArray(t)&&8==t.length?a.initImage(o.imageData,o.rgba,o.imageWidth,o.imageHeight,o.bgra).then(function(e){return W.D.log("[Wasm]camera callback: image is ready"),a.src=e.srcBuffer,a.perspective(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7])}).then(function(){W.D.log("[Wasm]camera callback: perspective successfully");var e=void 0,t=o.imageXResolution,r=o.imageYResolution,n=W.I.Enum_ImageType.IT_JPG,i=(o.imageBitDepth<=8&&(e=o.imageBitDepth,n=W.I.Enum_ImageType.IT_PNG),W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad);return a.getImage(85,!0,!1,e,t,r,!0,n,i)}).then(function(e){W.D.log("[Wasm]camera callback: filter process successfully");var t=a.src;return a.terminate(),a.src=null,{src:t,result:e}},function(e){W.D.log("[Wasm]camera callback: filter process failed"),W.D.closeLoadingMsg(),a.terminate();var t={};throw e&&e.code&&e.message?(t._errorString=e.message,t._errorCode=e.code):(t._errorString=e,W.D.Errors.PerspectiveCallback(t)),{code:t._errorCode,message:t._errorString}}):(W.D.Errors.InvalidParameterInCallback(e={}),W.D.Promise.reject({code:e._errorCode,message:e._errorString}))},r._convertToGrayScaleFilterCallback=function(o,r){var a=N();return W.D.log("[Wasm]camera callback: convert to gray scale filter"),a.initImage(o.imageData,o.rgba,o.imageWidth,o.imageHeight,o.bgra).then(function(e){var t;return W.D.log("[Wasm]camera callback: image is ready"),a.src=e.srcBuffer,r&&(t=r.level),a.toGrayscale(t)}).then(function(){W.D.log("[Wasm]camera callback: gray scale successfully");var e=void 0,t=o.imageXResolution,r=o.imageYResolution,n=W.I.Enum_ImageType.IT_JPG,i=(o.imageBitDepth<=8&&(e=o.imageBitDepth,n=W.I.Enum_ImageType.IT_PNG),W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad);return a.getImage(85,!0,!1,e,t,r,!0,n,i)}).then(function(e){W.D.log("[Wasm]camera callback: filter process successfully");var t=a.src;return a.terminate(),a.src=null,{src:t,result:e}},function(e){W.D.log("[Wasm]camera callback: filter process failed"),W.D.closeLoadingMsg(),a.terminate();var t={};throw W.D.Errors.ConvertToGrayScaleFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}})},r._saveTonerFilterCallback=function(e,t){return r._convertToBWScaleFilterCallback(e,t,!0)},r._convertToBWScaleFilterCallback=function(n,r,i){var o=N();return i?W.D.log("[Wasm]camera callback: save toner filter"):W.D.log("[Wasm]camera callback: convert to BW scale filter"),o.initImage(n.imageData,n.rgba,n.imageWidth,n.imageHeight,n.bgra).then(function(e){var t;return W.D.log("[Wasm]camera callback: image is ready"),o.src=e.srcBuffer,r&&(t=r.level),o.toBinary(!!i,t)}).then(function(){var e=n.imageXResolution,t=n.imageYResolution,r=W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad;return o.getImage(85,!0,!1,1,e,t,!0,W.I.Enum_ImageType.IT_PNG,r)}).then(function(e){W.D.log("[Wasm]camera callback: filter process successfully");var t=o.src;return o.terminate(),o.src=null,{src:t,result:e}},function(e){W.D.log("[Wasm]camera callback: filter process failed"),W.D.closeLoadingMsg(),o.terminate();var t={};throw i?W.D.Errors.SaveTonerCallbackErr(t,e):W.D.Errors.ConvertToBWScaleFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}})},r._cleanFilterCallback=function(o,n){var a=N();return W.D.log("[Wasm]camera callback: remove shadow filter"),a.initImage(o.imageData,o.rgba,o.imageWidth,o.imageHeight,o.bgra).then(function(e){var t,r;return W.D.log("[Wasm]camera callback: image is ready"),n&&(t=n.level,r=n.alpha),a.src=e.srcBuffer,a.removeShadow(t,r)}).then(function(){var e=void 0,t=o.imageXResolution,r=o.imageYResolution,n=W.I.Enum_ImageType.IT_JPG,i=(o.imageBitDepth<=8&&(e=o.imageBitDepth,n=W.I.Enum_ImageType.IT_PNG),W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad);return a.getImage(85,!0,!1,e,t,r,!0,n,i)}).then(function(e){W.D.log("[Wasm]camera callback: remove shadow successfully");var t=a.src;return a.terminate(),a.src=null,{src:t,result:e}},function(e){W.D.log("[Wasm]camera callback: remove shadow failed"),W.D.closeLoadingMsg(),a.terminate();var t={};throw W.D.Errors.RemoveShadowFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}})},r._enhanceAndSharpenFilterCallback=function(o,r){var a=N();return W.D.log("[Wasm]camera callback: enhance and sharpen filter"),a.initImage(o.imageData,o.rgba,o.imageWidth,o.imageHeight,o.bgra).then(function(e){var t;return W.D.log("[Wasm]camera callback: image is ready"),a.src=e.srcBuffer,r&&(t=r.level),a.enhanceAndSharpenImage(t)}).then(function(){var e=void 0,t=o.imageXResolution,r=o.imageYResolution,n=W.I.Enum_ImageType.IT_JPG,i=(o.imageBitDepth<=8&&(e=o.imageBitDepth,n=W.I.Enum_ImageType.IT_PNG),W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad);return a.getImage(85,!0,!1,e,t,r,!0,n,i)}).then(function(e){W.D.log("[Wasm]camera callback: enhance and sharpen successfully");var t=a.src;return a.terminate(),a.src=null,{src:t,result:e}},function(e){W.D.log("[Wasm]camera callback: enhance and sharpen failed"),W.D.closeLoadingMsg(),a.terminate();var t={};throw W.D.Errors.EnhanceAndSharpenFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}})},r._brightenFilterCallback=function(o,r){var a=N();return W.D.log("[Wasm]camera callback: brighten filter"),a.initImage(o.imageData,o.rgba,o.imageWidth,o.imageHeight,o.bgra).then(function(e){var t;return W.D.log("[Wasm]camera callback: image is ready"),a.src=e.srcBuffer,r&&(t=r.level),a.brighten(t)}).then(function(){var e=void 0,t=o.imageXResolution,r=o.imageYResolution,n=W.I.Enum_ImageType.IT_JPG,i=(o.imageBitDepth<=8&&(e=o.imageBitDepth,n=W.I.Enum_ImageType.IT_PNG),W.I.navInfo.bMac||W.I.navInfo.biPhone||W.I.navInfo.biPad);return a.getImage(85,!0,!1,e,t,r,!0,n,i)}).then(function(e){W.D.log("[Wasm]camera callback: brighten successfully");var t=a.src;return a.terminate(),a.src=null,{src:t,result:e}},function(e){W.D.log("[Wasm]camera callback: brighten failed"),W.D.closeLoadingMsg(),a.terminate();var t={};throw W.D.Errors.BrightenFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}})},r._getBlurryScore=function(e){var r=N();return W.D.log("[Wasm]camera callback: get blurry score filter"),r.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then(function(e){return W.D.log("[Wasm]camera callback: image is ready"),r.src=e.srcBuffer,r.getBlurryScore()}).then(function(e){W.D.log("[Wasm]camera callback: get blurry score successfully");var t=r.src;return r.terminate(),r.src=null,{src:t,result:100<=e}},function(e){W.D.log("[Wasm]camera callback: get blurry score failed"),W.D.closeLoadingMsg(),r.terminate();var t={};throw W.D.Errors.GetBlurryScoreErr(t,e),{code:t._errorCode,message:t._errorString}})},r._imageDataToBlob=function(e,t,r,n,i,o){W.D.log("[Wasm]ImageDataToBlob: init image");var a={source:{},output:{}};return W.D.mix(a.source,e),t&&(t<0?t=t%360+360:360<=t&&(t%=360),0!=t&&(a.source.angle=t)),r&&(a.polygon=r),n&&r&&r.points&&(a.doPerspective=!0),!1!==i&&(W.D.isObject(i)?a.output.orgImage=i:a.output.orgImage={quality:85,returnType:W.I.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==o&&(W.D.isObject(o)?a.output.previewImage=o:a.output.previewImage={quality:85,width:200,height:200,returnType:W.I.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),W.I.ImageProcWrapper.createImage(a)},r._freeCallback=function(){F&&(F.terminate(),F=null)},e._checkWebcamWasmLicense=function(){return W.D.License.checkProductKey(this,{Webcam:!0},!0)&&W.D.License.checkProductKey(this,{Webcam:!0,Wasm:!0},!0)?{errorCode:0}:W.I.DWT.licenseException},e.GetRawDataAsync=function(e){var t=this;if(t._resetErr(),!t._isMobileMode())return t._serviceNotSupportAsync("GetRawDataAsync");var r,e=M()(e);return isNaN(e)?(W.D.Errors.InvalidIndex(t),W.D.Promise.reject({code:t._errorCode,message:t._errorString})):e<0||e>=t._ImgManager.count()?(W.D.Errors.IndexOutOfRange(t),W.D.Promise.reject({code:t._errorCode,message:t._errorString})):(r=t.Viewer&&t.Viewer._webViewer?t.Viewer._webViewer.GetUidByIndex(e):r)?t.Viewer._webViewer.GetImageData(r).then(function(e){var t={displayImage:{},documentData:{polygon:[],originImage:{}}};return e.oriData&&(t.displayImage.data=e.oriData),e.metadata&&(e.metadata.bitDepth&&(t.displayImage.bitDepth=e.metadata.bitDepth),e.metadata.height&&(t.displayImage.height=e.metadata.height),e.metadata.width&&(t.displayImage.width=e.metadata.width),e.metadata.resolutionX&&(t.displayImage.resolutionX=e.metadata.resolutionX),e.metadata.resolutionY&&(t.displayImage.resolutionY=e.metadata.resolutionY)),e.customData&&(W.D.isNumber(e.customData.angle)?t.documentData.angle=e.customData.angle:t.documentData.angle=0,e.customData.detectArea&&(t.documentData.polygon.push({x:e.customData.detectArea[0],y:e.customData.detectArea[1]}),t.documentData.polygon.push({x:e.customData.detectArea[2],y:e.customData.detectArea[3]}),t.documentData.polygon.push({x:e.customData.detectArea[4],y:e.customData.detectArea[5]}),t.documentData.polygon.push({x:e.customData.detectArea[6],y:e.customData.detectArea[7]})),e.customData.filterValue&&(t.documentData.filterValue=e.customData.filterValue),e.customData.oriBlob&&(e.customData.oriBlob.imageBitDepth&&(t.documentData.originImage.bitDepth=e.customData.oriBlob.imageBitDepth),e.customData.oriBlob.imageData&&(t.documentData.originImage.data=e.customData.oriBlob.imageData),e.customData.oriBlob.imageHeight&&(t.documentData.originImage.height=e.customData.oriBlob.imageHeight),e.customData.oriBlob.imageWidth&&(t.documentData.originImage.width=e.customData.oriBlob.imageWidth),e.customData.oriBlob.imageXResolution&&(t.documentData.originImage.resolutionX=e.customData.oriBlob.imageXResolution),e.customData.oriBlob.imageYResolution&&(t.documentData.originImage.resolutionY=e.customData.oriBlob.imageYResolution))),t}):P().resolve(null)},e.SetRawDataAsync=function(e,t){var r=this;if(r._resetErr(),!r._isMobileMode())return r._serviceNotSupportAsync("GetRawDataAsync");var e=M()(e);if(isNaN(e))return W.D.Errors.InvalidIndex(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});if(e<0||e>=r._ImgManager.count())return W.D.Errors.IndexOutOfRange(r),W.D.Promise.reject({code:r._errorCode,message:r._errorString});if(r.Viewer&&r.Viewer._webViewer&&(e=r.Viewer._webViewer.GetUidByIndex(e))){var n,r=r.Viewer._webViewer.mydvs;if(r)return n=t.displayImage.data,delete t.displayImage.data,n={oriData:n,metadata:t.displayImage,customData:{}},t.documentData&&(W.D.isNumber(t.documentData.angle)?n.customData.angle=t.documentData.angle:n.customData.angle=0,t.documentData.polygon&&4==t.documentData.polygon.length&&(n.customData.detectArea=[t.documentData.polygon[0].x,t.documentData.polygon[0].y,t.documentData.polygon[1].x,t.documentData.polygon[1].y,t.documentData.polygon[2].x,t.documentData.polygon[2].y,t.documentData.polygon[3].x,t.documentData.polygon[3].y]),t.documentData.filterValue&&(n.customData.filterValue=t.documentData.filterValue),t.documentData.originImage&&(n.customData.oriBlob={},t.documentData.originImage.bitDepth&&(n.customData.oriBlob.imageBitDepth=t.documentData.originImage.bitDepth),t.documentData.originImage.data&&(n.customData.oriBlob.imageData=t.documentData.originImage.data),t.documentData.originImage.height&&(n.customData.oriBlob.imageHeight=t.documentData.originImage.height),t.documentData.originImage.width&&(n.customData.oriBlob.imageWidth=t.documentData.originImage.width),n.customData.oriBlob.imageXResolution&&(n.customData.oriBlob.imageXResolution=t.documentData.originImage.resolutionX),t.documentData.originImage.resolutionY&&(n.customData.oriBlob.imageYResolution=t.documentData.originImage.resolutionY))),t=r.DataControl.updateSync(e,n,!0),P().resolve(t)}return P().resolve(null)},e.GetImageDataAsync=function(e){var t;return(t=this.Viewer&&this.Viewer._webViewer?this.Viewer._webViewer.GetUidByIndex(e):t)?this.Viewer._webViewer.GetImageData(t):P().resolve(null)},e.SetCustomDataAsync=function(e,t){var r,n=this;return(r=n.Viewer&&n.Viewer._webViewer?n.Viewer._webViewer.GetUidByIndex(e):r)&&t?n.Viewer._webViewer.GetImageData(r).then(function(e){return e.customData=t,n.Viewer._webViewer.UpdateImageData(r,e)}):P().resolve(!1)},w=function w(e){var t=L(),r=W.I.Enum_ReturnType.RT_BINARY,n=W.I.DWT.EnumDWT_ImageType.IT_PNG;return t.saveImage(e,n,85,r,!0).then(function(e){return t&&t.terminate(),{blobData:e.imageData,type:"png",MD5:e.MD5}},function(e){throw t&&t.terminate(),{code:_this._errorCode,message:_this._errorString}})}},5719:function(e,t,r){r.r(t);var t=r(5683),h=r.n(t),t=r(4579),u=r.n(t),t=r(7711),c=r.n(t),t=r(1006),l=r.n(t),t=r(3662),n=r.n(t),g=r(1695),f=r(1188),m=r(3887),a=r(9158),t=g.D.html5.STwain.prototype,_=g.D.html5.Funs;t.SetCookie=function(e){return this._cookie=e,document.cookie=e,!0},t.LoadImageFromBase64Binary=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!e)return g.D.Errors.InvalidParameter(i),g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;var o=!1,a="LoadImageFromBase64Binary",s=t,u=1;if((c=e)instanceof g.I.Lib.html5.Base64Result&&g.D.isFunction(c.getLength)&&g.D.isFunction(c.getData)&&(c=c.getData(0,c.getLength())),(s=g.D.isString(c)?-1!=h()(c).call(c,"data:image/bmp")?0:-1!=h()(c).call(c,"data:image/jpeg")?1:-1!=h()(c).call(c,"data:image/tif")?2:-1!=h()(c).call(c,"data:image/png")?3:-1!=h()(c).call(c,"data:application/pdf")?4:-1!=h()(c).call(c,"data:image/jp2")?14:(e=c.substr(0,64),e=g.I.Lib.base64.decode(e,!0),(0,m.Ho)(e)):s)!=g.I.DWT.EnumDWT_ImageType.IT_BMP&&s!=g.I.DWT.EnumDWT_ImageType.IT_JPG&&s!=g.I.DWT.EnumDWT_ImageType.IT_TIF&&s!=g.I.DWT.EnumDWT_ImageType.IT_PNG&&s!=g.I.DWT.EnumDWT_ImageType.IT_PDF&&s!=g.I.DWT.EnumDWT_ImageType.IT_J2K&&(s=-1),!g.D.License.checkProductKey(i,{Core:!0}))return g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(!g.D.License.checkPDFProductKeyWhenNeeds(i,s))return g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;e=i.GetCurrentDocumentName();if(""==e&&(e=i._ImgManager.getWebViewer().GetDefaultFileName()),i._isMobileMode()){g.D.cancelFrome=2,g.D.showProgress(i,a,!0),i.__bLoadingImage=!0;var c,l,d=c;if(g.D.isString(c)){if(0<=h()(c).call(c,"blob:")||0<=h()(c).call(c,"data:")||(l=s==g.I.DWT.EnumDWT_ImageType.IT_PNG?"data:image/png;base64,":s==g.I.DWT.EnumDWT_ImageType.IT_JPG?"data:image/jpeg;base64,":s==g.I.DWT.EnumDWT_ImageType.IT_TIF?"data:image/tif;base64,":s==g.I.DWT.EnumDWT_ImageType.IT_PDF?"data:application/pdf;base64,":s==g.I.DWT.EnumDWT_ImageType.IT_BMP?"data:image/bmp;base64,":s==g.I.DWT.EnumDWT_ImageType.IT_J2K?"data:image/jp2;base64,":"data:application/octet-stream;base64,",c=[l,c].join("")),0<=h()(c).call(c,"data:")&&0==(d=g.D.MobileFuns.dataURLtoBlob(c)))return g.I.Lib.closeProgress(i,a),i.__bLoadingImage=!1,g.D.Errors.ConvertFromBase64Failed(i),g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString,c,t),!1}else c instanceof ArrayBuffer&&(l="image/png",s==g.I.DWT.EnumDWT_ImageType.IT_PNG?l="image/png":s==g.I.DWT.EnumDWT_ImageType.IT_JPG?l="image/jpeg":s==g.I.DWT.EnumDWT_ImageType.IT_TIF?l="image/tiff":s==g.I.DWT.EnumDWT_ImageType.IT_PDF?l="application/pdf":s==g.I.DWT.EnumDWT_ImageType.IT_BMP?l="image/bmp":s==g.I.DWT.EnumDWT_ImageType.IT_J2K&&(l="image/jp2"),d=new Blob([c],{type:l}));return l=i._innerSendToMobile("LoadImageFromBinary",(0,f.An)(d,!1,null,e),0,function(){var e;return g.I.Lib.closeProgress(i,a),i.__bLoadingImage=!1,i._isBindViewer()&&0<=(e=i._ImgManager.getCurrentImageIndex())&&i.OnRefreshUI(e),r&&r(c,t),!0},function(){g.I.Lib.closeProgress(i,a),i.__bLoadingImage=!1,g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString,c,t)}),!0}if(g.D.isFunction(r)&&(o=!0),g.D.isString(c)&&-1!=h()(c).call(c,"base64,")&&(c=c.substr(h()(c).call(c,"base64,")+7)),d=i.__GetLoadEventsNum(),o){if(_.isServerInvalid(i))return g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString,c,t),!1;g.D.cancelFrome=2,g.D.showProgress(i,a,!0),i.__bLoadingImage=!0,l=i._innerSend(a,(0,f.dv)(c,s,d,u=0),!0,function(){var e;return g.I.Lib.closeProgress(i,a),i.__bLoadingImage=!1,i._isBindViewer()&&0<=(e=i._ImgManager.getCurrentImageIndex())&&i.OnRefreshUI(e),r&&r(c,t),!0},function(){g.I.Lib.closeProgress(i,a),i.__bLoadingImage=!1,g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString,c,t)})}else l=i.__innerLoadImageFun(a,(0,f.dv)(c,s,d,u),u,e);return l},t.SaveSelectedImagesToBytes=function(e,t){return g.D.Errors.HTML5NotSupport(this),!1},t.LoadImageFromBytes=function(e,t,r){return g.D.Errors.HTML5NotSupport(this),!1},t.UnregisterEvent=function(e,t){return this._resetErr(),!!this._isValid()&&!(this[["__",e].join("")]=null)},t.SetCancel=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCancel",t):this._innerSend("SetCancel",null,!0,e,t))},t._asyncSetImageWidth=function(e,t,r,n){var i=this,o=function o(){_.refreshImageAfterInvokeFun(i,e),g.D.isFunction(r)&&u()(r,30)},a=function a(){g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString)},s=c()(e);return i._innerSendToMobile("SetImageWidth",(0,f.An)(s,t),0,o,a)},t.SetImageWidth=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;var e=c()(e);if(isNaN(e))return g.D.Errors.InvalidIndex(i),g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(e<0||e>=i._ImgManager.count())return g.D.Errors.IndexOutOfRange(i),g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(g.D.isUndefined(t))return g.D.Errors.InvalidParameter(i),g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(i._isMobileMode())return i._asyncSetImageWidth(e,t,r,n);e=i._ImgManager.convertClientIndexToServerId(e);return-1==e?(g.D.Errors.IndexOutOfRange(i),g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1):((e=1==i._innerFun("SetImageWidth",(0,f.dv)(e,t)))?g.D.isFunction(r)&&r():g.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),e)},t.HTTPDownloadStreamThroughPost=function(e,t){return g.D.Errors.HTML5NotSupport(this),!1},t.HTTPUploadStreamThroughPost=function(e,t,r,n,i){return g.D.Errors.HTML5NotSupport(this),!1},t.HTTPUploadThroughPutDirectly=function(e,t,r,n,i){return g.D.Errors.HTML5NotSupport(this),!1},t.SetCustomDSDataEx=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCustomDSDataEx"):this._innerFun("SetCustomDSDataEx",(0,f.dv)(e)))},t.SetCustomDSData=function(e){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("SetCustomDSData");e=_.replaceLocalFilename(e);return this._innerFun("SetCustomDSData",(0,f.dv)(e))},t.GetCustomDSDataEx=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCustomDSDataEx"):this._innerFun("GetCustomDSDataEx"))},t.GetCustomDSData=function(e){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("GetCustomDSData");e=_.replaceLocalFilename(e);return this._innerFun("GetCustomDSData",(0,f.dv)(e))},t._asyncConvertToBW=function(e,t,r){var n=this,i=function i(){_.refreshImageAfterInvokeFun(n,e),g.D.isFunction(t)&&t()},o=function o(){g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString)},a=c()(e);return n._innerSendToMobile("ConvertToBWScale",(0,f.An)(a),0,i,o)},t.ConvertToBW=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(!g.D.License.checkProductKey(n,{Core:!0}))return g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;var i=c()(e);if(isNaN(i))return g.D.Errors.InvalidIndex(n),g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(i<0||i>=n._ImgManager.count())return g.D.Errors.IndexOutOfRange(n),g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._asyncConvertToBW(i,t,r);i=n.ChangeBitDepth(e,1,!0);return i?g.D.isFunction(t)&&t():g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),i},t.LoadImageFromBinary=function(e,t,r){var n,i=this;if(!g.D.License.checkProductKey(i,{Core:!0}))return g.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1;if(!e||""==e)return g.D.Errors.ParameterCannotEmpty(i),g.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1;var o,a,s,u=(u=(u=e.currentFileName)||i.GetCurrentDocumentName())||i._ImgManager.getWebViewer().GetDefaultFileName();if(e instanceof FileList){if(1==e.length)return e[0].currentFileName=u,i.LoadImageFromBinary(e[0],t,r);if(1<e.length){for(var c=0;c<e.length;c++)e[c].currentFileName=u,g.D.asyncQueue.pushToDo(i,"LoadImageFromBinary",[e[c],t,r]);return g.D.asyncQueue.start(),!0}return g.D.Errors.ParameterCannotEmpty(i),g.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1}return window.ReadableStream&&e instanceof ReadableStream?n=new Response(e):window.Response&&e instanceof Response&&(n=e),i._bLocalService?n?n.arrayBuffer().then(function(e){e=new Blob([e]);i.__LoadImageFromBytes(e,-1,"",!0,t,r)}):(((o=e)instanceof ArrayBuffer||o instanceof Uint8Array)&&((o=new Blob([e])).currentFileName=e.currentFileName),a=-1,s=g.I.DWT.EnumDWT_ImageType,g.D.isString(o.type)&&("application/pdf"==o.type?a=s.IT_PDF:"image/png"==o.type?a=s.IT_PNG:"image/jpeg"==o.type||"image/jpg"==o.type?a=s.IT_JPG:"image/bmp"==o.type?a=s.IT_BMP:"image/tiff"==o.type||"image/tif"==o.type?a=s.IT_TIF:"image/jp2"==o.type&&(a=s.IT_J2K)),i.__LoadImageFromBytes(o,a,"",!0,t,r)):n?n.arrayBuffer().then(function(e){i._innerSendToMobile("LoadImageFromBinary",(0,f.An)(e,!1,null,u),0,t,r)}):i._innerSendToMobile("LoadImageFromBinary",(0,f.An)(e,!1,null,u),0,t,r),!0},t.EnableSourceUI=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("EnableSourceUI",t):this._innerSend("EnableSourceUI",null,!0,e,t))},t.getCapabilities=function(i,o){var a=this;return a._bLocalService?a._innerFunRaw("GetCapabilities",null,!0,!1,!1,function(e){var t,r;0<e.length&&(r=e[0]);try{t=g.D.isString(r)?(r=g.D.removeNonPrintableChar(r),r=l()(g.D).call(g.D,r,"\\\\","\\\\"),JSON.parse(r)):{}}catch(n){return a._errorCode=-2302,a._errorString=n,void(g.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString))}0==t.errorCode?g.D.isFunction(i)&&i(t.response):(a._errorCode=t.errorCode,a._errorString=t.errorString,g.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString))},o):a._mobileNotSupport("GetCapabilities",o)},t.setCapabilities=function(e,t,r){return this._bLocalService?g.D.isObject(e)&&!g.D.isArray(e)?(e=["[",g.D.stringify(e),"]"].join(""),this._innerSend("SetCapabilities",e,0,function n(e){g.D.isFunction(t)&&t(e)},r)):(g.D.Errors.InvalidParameter(this),g.D.isFunction(r)&&r(this.ErrorCode,this.ErrorString),!1):this._mobileNotSupport("SetCapabilities",r)},t.BindViewer=function(e){var t=e;return g.I.DWT.UseDefaultViewer?(g.D.isString(e)&&(t=g.D.get(e)),this.config.container!=t&&(this.config.container=t,this.config.ifBindViewer=!0,g.D.html5.ui.init(this,this.config)),t=this._ImgManager.BindView(e),this._bBindViewer=!0,this.config.ifBindViewer=!1,t):(g.D.Errors.CannotBindViewerWhenNoViewerJS(this),!1)},t.UnbindViewer=function(){return this.__funResize&&(g.D.removeEventListener(window,"resize",this.__funResize),this.__funResize=!1),this._bBindViewer=!1,this.config.container=null,!!this._ImgManager&&this._ImgManager.UnbindView()},t.GetIfShowVideoContainer=function(){return this._ImgManager.GetIfShowVideoContainer()},t.ShowVideoContainer=function(e){return this._ImgManager.ShowVideoContainer(e)},t.UpdateVideoContainer=function(e){return this._ImgManager.UpdateVideoContainer(e)},t.ChangeBitDepth=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(n._isMobileMode())return n._mobileNotSupport("ChangeBitDepth");if(e=c()(e),isNaN(e))return g.D.Errors.InvalidIndex(n),!1;if(e<0||e>=n._ImgManager.count())return g.D.Errors.IndexOutOfRange(n),!1;e=n._ImgManager.convertClientIndexToServerId(e);return-1==e?(g.D.Errors.IndexOutOfRange(n),!1):n._innerFun("ChangeBitDepth",(0,f.dv)(e,t,r))},t._asyncConvertToGrayScale=function(e,t,r){var n=this,i=function i(){_.refreshImageAfterInvokeFun(n,e),g.D.isFunction(t)&&u()(t,30)},o=function o(){g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString)};if(!g.D.License.checkProductKey(n,{Core:!0}))return o(),!1;var a=c()(e);return n._innerSendToMobile("ConvertToGrayScale",(0,f.An)(a),0,i,o)},t.ConvertToGrayScale=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;e=c()(e);if(isNaN(e))return g.D.Errors.InvalidIndex(n),g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(e<0||e>=n._ImgManager.count())return g.D.Errors.IndexOutOfRange(n),g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._asyncConvertToGrayScale(e,t,r);var i=n._ImgManager.convertClientIndexToServerId(e);return-1==i?(g.D.Errors.IndexOutOfRange(n),g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1):((i=1==n._innerFun("ConvertToGrayScale",(0,f.dv)(i)))?(_.refreshImageAfterInvokeFun(n,e),g.D.isFunction(t)&&t()):g.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),i)},t.ClearTiffCustomTag=function(){var e;return this._resetErr(),!!this._isValid()&&(n()(e=this._aryTiffTag).call(e,0,this._aryTiffTag.length),!!this._isMobileMode()||this._innerFun("ClearTiffCustomTag"))},t.SetTiffCustomTag=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(g.D.isUndef(e)||g.D.isUndef(t))return g.D.Errors.InvalidParameter(n),!1;var i=+e,o=g.D.isString(t)?l()(g.D).call(g.D,t,'"','\\"'):t;if(i<=0||2147483647<i)return g.D.Errors.InvalidTiffTagError(n),!1;for(var a,s=0,u=!1,c=n._aryTiffTag.length,s=0;s<c;s++)(a=n._aryTiffTag[s]).tag==i&&(a.Content=t,a.UseBase64Encoding=r,u=!0);return!u&&32<=c?(g.D.Errors.TiffTagCountExceedError(n),!1):n._isMobileMode()?(u||n._aryTiffTag.push({tag:e,content:t,UseBase64Encoding:r}),!0):n._innerFun("SetTiffCustomTag",(0,f.dv)(i,o,r))},t.IsBlankImage=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(t._isMobileMode())return t._mobileNotSupport("IsBlankImage");if(e=c()(e),isNaN(e))return g.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return g.D.Errors.IndexOutOfRange(t),!1;e=t._ImgManager.convertClientIndexToServerId(e);return-1==e?(g.D.Errors.IndexOutOfRange(t),!1):t._innerFun("IsBlankImage",(0,f.dv)(e,!1))},t.IsBlankImageExpress=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(t._isMobileMode())return t._mobileNotSupport("IsBlankImageExpress");e=c()(e);if(isNaN(e))return g.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return g.D.Errors.IndexOutOfRange(t),!1;e=t._ImgManager.convertClientIndexToServerId(e);return-1==e?(g.D.Errors.IndexOutOfRange(t),!1):t._innerFun("IsBlankImage",(0,f.dv)(e,!0))},t.SetOpenSourceTimeout=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetOpenSourceTimeout"):this._innerFun("SetOpenSourceTimeout",(0,f.dv)(e)))},t.GetImageURL=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode()){if(!g.D.isFunction(t))return o._mobileNotSupport("GetImageURL");o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getWebViewer().GetUidByIndex(e)).then(function(e){t(e.oriData)},function(e){r(e.message)})}var a=c()(t),s=c()(r),n=n?(u="","dwt://"):(u=o.httpUrl,"dwt/"),u=[u,n,g.D.product.getDWTPrefix(),g.D.product.getServerVersionInfo(),"/img?id=",o.clientId];if(g.D.isUndefined(e)||null===e)return g.D.Errors.IndexNullOrUndefined(o),"";if(i)u.push("&index=-1&width=-1&height=-1&webcam="),u.push(i);else{if(e=c()(e),isNaN(e))return g.D.Errors.InvalidIndex(o),"";if(e<-1||e>=o._ImgManager.count())return g.D.Errors.IndexOutOfRange(o),"";n=o._ImgManager.convertClientIndexToServerId(e);if(-1==n)return"";u.push("&index="),u.push(n),0<a&&0<s&&(u.push("&width="),u.push(a),u.push("&height="),u.push(s))}return u.push("&t="),u.push((new Date).getTime()),u.join("")},t.GetImagePartURL=function(e,t,r){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("GetImagePartURL");e=c()(e);return isNaN(e)?(g.D.Errors.InvalidIndex(this),""):e<0||e>=this._ImgManager.count()?(g.D.Errors.IndexOutOfRange(this),""):this.GetImageURL(e,t,r,!0)},t.SetLanguage=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetLanguage"):this._innerFun("SetLanguageForSecurity",(0,f.dv)(e)))},t._wasmGetLicenseInfo=function(r,n){var i=this,o=function o(e){if(e)if(e.exception)n&&n(e.exception);else{if(i.__licenseInfo=(0,a.T)(e),g.D.detect.wasmScriptLoaded&&!g.D.detect.wasmPdfReaderLoaded)try{g.I.WasmEnv.loadPdfReader(),g.D.detect.wasmPdfReaderLoaded=!0}catch(t){}r&&r(i.__licenseInfo)}else n&&n()};return i._innerSendToMobile("GetLicenseInfo",(0,f.An)(),0,o,n)},t.GetLicenseInfo=function(r,n){var i=this;if(i.__licenseInfo)g.D.isFunction(r)&&r(i.__licenseInfo);else{if(i._isMobileMode())return i._wasmGetLicenseInfo(r,n);if(_.isHttpServerInvalid(i))return!1;i._innerFunRaw("GetLicenseInfo",null,!0,!1,!0,function(e){if(e)if(e.exception)g.D.isFunction(n)&&n(e.exception);else{if(i.__licenseInfo=(0,a.T)(e),g.D.detect.wasmScriptLoaded&&!g.D.detect.wasmPdfReaderLoaded)try{g.I.WasmEnv.loadPdfReader(),g.D.detect.wasmPdfReaderLoaded=!0}catch(t){}g.D.isFunction(r)&&r(i.__licenseInfo)}else g.D.isFunction(n)&&n()},n)}return!0},t.IndexToImageID=function(e){if(this._resetErr(),!this._isValid())return!1;e=c()(e);if(isNaN(e))return g.D.Errors.InvalidIndex(this),-1;if(e<0||e>=this._ImgManager.count())return g.D.Errors.IndexOutOfRange(this),-1;e=this._ImgManager.convertClientIndexToServerId(e);return this.objImageIndexManager.convertServerIdToGuid(e)},t.ImageIDToIndex=function(e){var t=-1;return this._resetErr(),!!this._isValid()&&(-1==(t=0<(e=this.objImageIndexManager.convertGuidToServerId(e))?this._ImgManager.convertServerIdToClientIndex(e):t)&&g.D.Errors.InvalidImageID(this),t)},t._setProductKeyV2=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(_.isHttpServerInvalid(t))return g.D.Promise.reject({code:t._errorCode,message:t._errorString});if(!g.D.isString(e)||"******"==e)return g.D.Errors.LicenseEmptyOrInvalid(t),g.D.Promise.reject({code:t._errorCode,message:t._errorString});var r,n=g.I.DWT.ProductKey;return(r=(r=t._innerFunRawV2("ProductKey",(0,f.dv)(e))).then(function(e){if(e){if(e.exception!==undefined&&e.description!==undefined)throw t._errorCode=e.exception,t._errorString=e.description,g.I.DWT.ProductKey=n,r.context=null,{code:t._errorCode,message:t._errorString};return g.I.DWT.ProductKey=r.context.productKey,r.context=null,t._innerFunRawV2("GetLicenseInfo")}throw g.D.Errors.LicenseEmptyOrInvalid(t),g.I.DWT.ProductKey=n,r.context=null,{code:t._errorCode,message:t._errorString}})).context={productKey:e},r},t.SetProductKeyAsync=function(r){var n=this;return n._resetErr(),n._isValid()?g.D.isUndefined(r)?(g.D.Errors.LicenseEmptyOrInvalid(n),g.D.Promise.reject({code:n._errorCode,message:n._errorString})):(n._isMobileMode()?n._innerSendToMobileV2("GetLicenseInfo",(0,f.An)(r)):n._setProductKeyV2(r)).then(function(e){if(!e||e.message)throw g.D.Errors.LicenseEmptyOrInvalid(n),e&&e.message&&(n._errorString=e.message),{code:n._errorCode,message:n._errorString};if(g.D.License.isLTS()||(g.I.DWT.ProductKey=r),n.__licenseInfo=(0,a.T)(e),g.D.detect.wasmScriptLoaded&&!g.D.detect.wasmPdfReaderLoaded)try{g.I.WasmEnv.loadPdfReader(),g.D.detect.wasmPdfReaderLoaded=!0}catch(t){}return e}):g.D.Promise.reject({code:n.ErrorCode,message:n.ErrorString})},t.GetVersionInfoAsync=function(){return this._innerFunV2("VersionInfo")},t.isUsingActiveX=function(){return!1},t._setLTSLic=function(e){var t=this;return t._resetErr(),!!t._isValid()&&(_.isHttpServerInvalid(t)?g.D.Promise.reject({code:t._errorCode,message:t._errorString}):g.D.isString(e)?t._innerFunRawV2("LTSLicense",(0,f.dv)(e)).then(function(e){if(e){if(e.exception!==undefined&&e.description!==undefined)throw t._errorCode=e.exception,t._errorString=e.description,{code:t._errorCode,message:t._errorString};return t._innerFunRawV2("GetLicenseInfo")}throw g.D.Errors.LicenseEmptyOrInvalid(t),{code:t._errorCode,message:t._errorString}}):(g.D.Errors.LicenseEmptyOrInvalid(t),g.D.Promise.reject({code:t._errorCode,message:t._errorString})))},t.SetLTSLicenseAsync=function(e){var r=this;return r._resetErr(),r._isValid()?g.D.isString(e)?(r._isMobileMode()?r._innerSendToMobileV2("GetLicenseInfo",(0,f.An)(e)):r._setLTSLic(e)).then(function(e){if(!e||e.message)throw g.D.Errors.LicenseEmptyOrInvalid(r),e&&e.message&&(r._errorString=e.message),{code:r._errorCode,message:r._errorString};if(r.__licenseInfo=(0,a.T)(e),g.D.detect.wasmScriptLoaded&&!g.D.detect.wasmPdfReaderLoaded)try{g.I.WasmEnv.loadPdfReader(),g.D.detect.wasmPdfReaderLoaded=!0}catch(t){}return r.__licenseInfo&&(r.__licenseInfo.LTS=!0),e}):(g.D.Errors.LicenseEmptyOrInvalid(r),g.D.Promise.reject({code:r._errorCode,message:r._errorString})):g.D.Promise.reject({code:r._errorCode,message:r._errorString})}},2696:function(e,t,r){r.r(t);var t=r(9104),g=r.n(t),f=r(1695),a=r(1188),m=f.I.navInfo,n=f.D.html5.Funs,i=n.DEF,o=n.DEF_NOT_SUPPORT_MOBILE,s=(f.D.removeNonPrintableChar,function s(r,e,t){2==t&&f.D.each(e,function(e,t){i(r,e,{get:function(){return r._resetErr(),!!r._isValid()},set:function(e){return r._resetErr(),!!r._isValid()}})})}),u=function u(r,e){f.D.each(e,function(e,t){i(r,e,1,2)})},c=function c(r,e){f.D.each(e,function(e,t){i(r,e,1,1)})},l=function l(r,e){f.D.each(e,function(e,t){i(r,e,0)})},d=function d(r,e){f.D.each(e,function(e,t){i(r,e,1)})};f.D.DynamicLoadAddonFuns=[],f.D.attachAddon=function(t){f.D.each(f.D.DynamicLoadAddonFuns,function(e){f.D.isFunction(e)&&e(t)})},f.D.attachProperty=function(e){var h=e,e=(i(h,"ErrorCode",{get:function(){return h._errorCode}}),i(h,"ErrorString",{get:function(){return-2207==h._errorCode&&h.__bMustUpgradeService&&f.D.Errors.MustUpgradeService(h),0!=h._errorCode?h._errorString:"Successful."}}),i(h,"ProductKey",{get:function(){return f.I.DWT.ProductKey},set:function(e){return f.D.isString(e)?(h._resetErr(),!!h._isValid()&&h._setProductKey(e,!1)):(f.D.Errors.InvalidValue(h),!1)}}),i(h,"ProductName",{get:function(){return h.__strProductName},set:function(e){return h._resetErr(),f.D.isString(e)?(h.__strProductName=e,!0):(f.D.Errors.InvalidValue(h),!1)}}),i(h,"VersionInfo",{get:function(){return h.__versionInfo}}),h._isMobileMode()?o(h,"DefaultSourceName",0):i(h,"DefaultSourceName",{get:function(){if(h._resetErr(),!h._isValid())return!1;f.D.isUndefined(h.__currentImageCaptureDriverType)&&(h.__currentImageCaptureDriverType=0);var e="",t=0,r=h._innerFun("GetDefaultSourceName",(0,a.dv)(h._driverType));return 0<r.length&&(t=(r=JSON.parse(r)).type,e=f.I.Lib.base64.decode(r.ProductName)),4==h._driverType?t==f.I.DWT.EnumDWT_Driver.TWAIN64&&0<e.length?"Twain64-"+e:t==f.I.DWT.EnumDWT_Driver.ICA&&h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumMac&&0<e.length?"ICA-"+e:e:h.__currentImageCaptureDriverType==f.I.DWT.EnumDWT_Driver.TWAIN64?0<e.length&&t==f.I.DWT.EnumDWT_Driver.TWAIN64?"Twain64-"+e:e:h.__currentImageCaptureDriverType==f.I.DWT.EnumDWT_Driver.ICA&&0<e.length&&h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumMac?"ICA-"+e:e}}),h._isMobileMode()?o(h,["ImageCaptureDriverType","IfShowCancelDialogWhenImageTransfer"]):(i(h,"IfShowCancelDialogWhenImageTransfer",{get:function(){return h._resetErr(),!!h._isValid()&&h.__IfShowCancelDialogWhenImageTransfer},set:function(e){return f.D.isBoolean(e)?(h._resetErr(),!!h._isValid()&&(h.__IfShowCancelDialogWhenImageTransfer=e)):(f.D.Errors.InvalidValue(h),!1)}}),i(h,"ImageCaptureDriverType",{get:function(){return h._resetErr(),h._isValid()?h._driverType:0},set:function(e){h._driverType;var t=!1,r=!1,n=!1;if(h._bRemoteMode?h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumWindow?n=!0:h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumLinux?r=!0:h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumMac&&(t=!0):(t=m.bMac,r=m.bLinux,n=m.bWin),h._resetErr(),!h._isValid())return!1;if(""===e)return f.D.Errors.ImageCaptureDriverTypeError(h),!1;e=+e;if(e<f.I.DWT.EnumDWT_Driver.TWAIN||e>f.I.DWT.EnumDWT_Driver.TWAIN64)return f.D.Errors.ImageCaptureDriverTypeError(h),!1;if(n){if(e===f.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(f.I.dcp.b64bit)return h._driverType=e,h.__icaSourceCount=-1,h._innerFun("SetImageCaptureDriverType",(0,a.dv)(f.I.DWT.EnumDWT_Driver.TWAIN,h._driverType))}else if(e!=f.I.DWT.EnumDWT_Driver.TWAIN&&e!=f.I.DWT.EnumDWT_Driver.TWAIN64)return f.D.Errors.ImageCaptureDriverTypeError(h),!1;f.I.dcp.b64bit||(e=f.I.DWT.EnumDWT_Driver.TWAIN),h._driverType=e,h.__currentImageCaptureDriverType=e}else{if(r)return e=f.I.DWT.EnumDWT_Driver.SANE,h._driverType=e,(h.__currentImageCaptureDriverType=e)===f.I.DWT.EnumDWT_Driver.SANE||(f.D.Errors.ImageCaptureDriverTypeError(h),!1);if(t){if(e===f.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA)return h._driverType=e,h.__icaSourceCount=-1,!0;if(e!=f.I.DWT.EnumDWT_Driver.ICA&&e!=f.I.DWT.EnumDWT_Driver.TWAIN&&e!=f.I.DWT.EnumDWT_Driver.TWAIN64)return f.D.Errors.ImageCaptureDriverTypeError(h),!1;h._driverType=e,h.__currentImageCaptureDriverType=e}}h.__icaSourceCount=0,h.CloseSourceManager();n=h._innerFun("SetImageCaptureDriverType",(0,a.dv)(e,h._driverType));return h.OpenSourceManager(),n}})),h._isMobileMode()?o(h,"SourceCount",0):i(h,"SourceCount",{get:function(){var e,t,r,n,i,o,a,s,u,c=[],l=!1,d=!1;if(h._bRemoteMode?h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumWindow?d=!0:h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumLinux?0:h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumMac&&(l=!0):(l=m.bMac,m.bLinux,d=m.bWin),h._resetErr(),!h._isValid())return 0;if(!f.D.License.checkProductKey(h,{Core:!0}))return 0;if(h._resetSources(),h.__icaSourceCount=0,l&&h._driverType===f.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA){for(t=[],a=h._getSourceNamesSyncV2(f.I.DWT.EnumDWT_Driver.ICA),o=0;o<a.length;o++)n=a[o].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(1==a[o].IsDefaultSource&&(r=n),"ICA"===a[o].DriverType?c.push("ICA-"+n):c.push(n),t.push(a[o]));for(r===undefined&&0<a.length&&(n=a[0].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(r="ICA"===a[0].DriverType?"ICA-"+n:n)),u=h._getSourceNamesSyncV2(f.I.DWT.EnumDWT_Driver.TWAIN),o=0;o<u.length;o++)n=u[o].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(1==u[o].IsDefaultSource&&(r=n),"ICA"===u[o].DriverType?c.push("ICA-"+n):c.push(n),t.push(u[o]));r===undefined&&0<u.length&&(n=u[0].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(r="ICA"===u[0].DriverType?"ICA-"+n:n)),e=t.length,h.__defaultSourceName=r,h.__icaSourceCount=a.length,h.__sourceCount=e,h.__sourceName=c,h.__sourceDetails=t}else if(d&&f.I.dcp.b64bit&&h._driverType===f.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){for(t=[],u=h._getSourceNamesSyncV2(f.I.DWT.EnumDWT_Driver.TWAIN),o=0;o<u.length;o++)n=u[o].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(1==u[o].IsDefaultSource&&(r=n),c.push(n),t.push(u[o]));if(r===undefined&&0<u.length&&(n=u[0].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(r=n)),f.I.dcp.b64bit){for(s=h._getSourceNamesSyncV2(f.I.DWT.EnumDWT_Driver.TWAIN64),o=0;o<s.length;o++)n=s[o].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(1==s[o].IsDefaultSource&&(r=n),"TWAIN(64Bit)"===s[o].DriverType?c.push("Twain64-"+n):c.push(n),t.push(s[o]));r===undefined&&0<s.length&&(n=s[0].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(r="TWAIN(64Bit)"===s[0].DriverType?"Twain64-"+n:n))}else s=[];e=t.length,h.__defaultSourceName=r,h.__icaSourceCount=u.length,h.__sourceCount=e,h.__sourceName=c,h.__sourceDetails=t}else{if(i=h._getSourceNamesSyncV2(),h.__defaultSourceName="",i&&1<=i.length){for(o=0;o<i.length;o++)n=i[o].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&(1==i[o].IsDefaultSource&&(r=n),c.push(n));f.D.isString(r)?h.__defaultSourceName=r:(n=i[0].ProductName,f.D.isString(n)&&""!==(n=g()(f.D).call(f.D,n))&&("ICA"===i[0].DriverType?h.__defaultSourceName="ICA-"+n:h.__defaultSourceName=n))}else i=[],c=[];e=i.length,h.__sourceCount=e,h._driverType===f.I.DWT.EnumDWT_Driver.ICA&&l&&0<e&&(f.D.each(c,function(e,t){f.D.isString(e)&&""!==(e=g()(f.D).call(f.D,e))&&(c[t]="ICA-"+e)}),""!==h.__defaultSourceName&&(h.__defaultSourceName="ICA-"+h.__defaultSourceName)),h.__sourceName=c,h.__sourceDetails=i}return e<=0?(t=[],c=[],h.__sourceName=[],h.__sourceDetails=[],h.__defaultSourceName="",h.__sourceCount=0):e}}),i(h,"HowManyImagesInBuffer",{get:function(){return h._isValid()?h._ImgManager.count():0}}),i(h,"HTTPPostResponseString",{get:function(){return h._resetErr(),h._isValid()&&h.__HTTPPostResponseString||""}}),i(h,"IfAppendImage",{get:function(){return h._resetErr(),!!h._isValid()&&h.__IfAppendImage},set:function(e){return h._resetErr(),!!h._isValid()&&(f.D.isBoolean(e)?h.__IfAppendImage=e:(f.D.Errors.InvalidValue(h),!1))}}),h._isMobileMode()?o(h,["FTPPort","IfShowProgressBar","IfAppendImage"]):(i(h,"FTPPort",{get:function(){return h._resetErr(),h._isValid()?h._innerFun("FTPPort"):0},set:function(e){return h._resetErr(),!!h._isValid()&&(""!==e?h._innerFun("FTPPort",(0,a.dv)(+e)):void 0)}}),i(h,"IfShowProgressBar",{get:function(){return h._resetErr(),!!h._isValid()&&h.__IfShowProgressBar},set:function(e){return h._resetErr(),!!h._isValid()&&(f.D.isBoolean(e)?h.__IfShowProgressBar=e:(f.D.Errors.InvalidValue(h),!1))}})),h._isMobileMode()?i(h,"JPEGQuality",{get:function(){return h._resetErr(),!!h._isValid()&&h._jpgQuality},set:function(e){e=+e;return 100<=e?e=100:e<0&&(e=0),h._resetErr(),!!h._isValid()&&(h._jpgQuality=e,!0)}}):i(h,"JPEGQuality",{get:function(){return h._resetErr(),h._isValid()?h._innerFun("JPEGQuality"):0},set:function(e){e=+e;return 100<=e?e=100:e<0&&(e=0),h._resetErr(),!!h._isValid()&&h._innerFun("JPEGQuality",(0,a.dv)(e))}}),h._isMobileMode()?i(h,"TIFFCompressionType",{get:function(){return h._resetErr(),h._isValid()?h._tiffCompressionType:0},set:function(e){return h._resetErr(),!!h._isValid()&&(h._tiffCompressionType=e,!0)}}):i(h,"TIFFCompressionType",1,1),h._isMobileMode()?i(h,"BufferMemoryLimit",{get:function(){return h._resetErr(),h._isValid(),0},set:function(e){return h._resetErr(),h._isValid(),!1}}):i(h,"BufferMemoryLimit",1,1),h._isMobileMode()?i(h,"LogLevel",{get:function(){return h._resetErr(),h._isValid()?h._logLevel:0},set:function(e){if(h._resetErr(),!h._isValid())return!1;e=+e;return 14<=e?e=14:e<0&&(e=0),f.I.WasmEnv&&f.I.WasmEnv.setLoglevel(h._logLevel),h._logLevel=e,!0}}):i(h,"LogLevel",1,1),i(h,"HttpContentTypeFieldValue",{get:function(){return h._resetErr(),h._isValid()?h.__strHttpContentTypeFieldValue:""},set:function(e){return h._resetErr(),!!h._isValid()&&(h.__strHttpContentTypeFieldValue=e)}}),i(h,"BrokerProcessType",{get:function(){return h._resetErr(),h._isValid()?1:0},set:function(e){return h._resetErr(),!!h._isValid()}}),i(h,"BorderStyle",{get:function(){return h._resetErr(),!!h._isValid()&&0},set:function(e){return h._resetErr(),h._isValid(),!1}}),i(h,"HttpFieldNameOfUploadedImage",{get:function(){return h._resetErr(),!!h._isValid()&&h.__remoteFilename},set:function(e){return h._resetErr(),!!h._isValid()&&(h.__remoteFilename=e)}}),i(h,"style",{get:function(){return h._isValid()?h.__style:""}}),i(h,"Addon",{get:function(){return h.__addon}}),i(h,"HTTPRequestswithCredentials",{get:function(){return h._resetErr(),!!h._isValid()&&h.__withCredentials},set:function(e){return h._resetErr(),!!h._isValid()&&(h.__withCredentials=e)}}),i(h,"ScaleDownThreshold",{get:function(){return h._resetErr(),h._isValid()?h._scaleDownThreshold:0},set:function(e){var t=+e;return!f.D.isNumber(t)||isNaN(t)?(f.D.Errors.InvalidValue(self),!1):(h._resetErr(),!!h._isValid()&&(h._scaleDownThreshold=e))}}),i(h,"CurrentImageIndexInBuffer",{get:function(){return h._isValid()?h._ImgManager.getCurrentImageIndex():0},set:function(e){e=+e;return h._resetErr(),!!h._isValid()&&(0<=e&&e<h._ImgManager.count()&&(h._ImgManager.Go(e),h._isBindViewer()&&n.__innerRefreshFromUIView(h,h._ImgManager.getCurrentImageIndex())),!0)}}),i(h,"SelectedImagesIndices",{get:function(){return h._resetErr(),!h._isValid()||h._ImgManager.count()<=0?[]:h._ImgManager.getSelectedClientIndexArray()}}),i(h,"MaxImagesInBuffer",{get:function(){return h._resetErr(),h._isValid()?h.__maxImagesInBuffer:0},set:function(e){e=+e;return h._resetErr(),!!h._isValid()&&(0<e&&e<32768?h.__maxImagesInBuffer=e:f.D.Errors.OutOfRange(h),h.__maxImagesInBuffer)}}),i(h,"MaxUploadImageSize",{get:function(){return h._resetErr(),!!h._isValid()&&h.__maxUploadImageSize},set:function(e){e=+e;return h._resetErr(),!!h._isValid()&&(h.__maxUploadImageSize=e,h._isMobileMode()||h._innerFun("MaxUploadImageSize",(0,a.dv)(e)),h.__maxUploadImageSize)}}),i(h,"IfSSL",{get:function(){return h._ifSSL},set:function(e){return h._ifSSL=e,h._isMobileMode()||h._innerFun("IfSSL",(0,a.dv)(e)),!0}}),h._isMobileMode()?i(h,"IfAllowLocalCache",{get:function(){return!1},set:function(e){return!1}}):i(h,"IfAllowLocalCache",1,2),i(h,"UseLocalService",{get:function(){return!h._isMobileMode()}}),i(h,"PDFCompressionType",{get:function(){return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("PDFCompressionType"):h._innerFun("PDFCompressionType"))},set:function(e){e=+e;return e==f.I.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(e=f.I.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("PDFCompressionType"):h._innerFun("PDFCompressionType",(0,a.dv)(e)))}}),h._getPdfDllname=function(){var e=!1,t=!1;return h._bRemoteMode?h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumWindow?0:h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumLinux?t=!0:h.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumMac&&(e=!0):(e=m.bMac,t=m.bLinux,m.bWin),e?f.I.dcp.b64bit?"libDynamicPdfCorex64_"+f.I.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+f.I.DWT.PdfVersion+".dylib":t?"libDynamicPdfCore_"+f.I.DWT.PdfVersion+".so":f.I.dcp.b64bit?"DynamicPdfCorex64_"+f.I.DWT.PdfVersion+".dll":"DynamicPdfCore_"+f.I.DWT.PdfVersion+".dll"},h._setConvertModeInner=function(e){if(!f.D.License.checkProductKey(h,{Core:!0}))return!1;e=+e;return h._resetErr(),!!h._isValid()&&(isNaN(e)?(f.D.Errors.ParameterCannotEmpty(h),!1):1!=e&&2!=e&&3!=e&&4!=e?(f.D.Errors.InvalidValue(h),!1):(2==(h._pdfConvertMode=e)||f.D.License.hasPDFRProductKey(h)?h._pdfRealConvertMode=e:h._pdfRealConvertMode=2,!0))},h._setConvertMode=function(e){return!!h._setConvertModeInner(e)&&(h._isMobileMode()||(e=h._getPdfDllname(),h._innerFun("SetPDFConvertMode",(0,a.dv)(h._pdfRealConvertMode,e))),!(2==h._pdfRealConvertMode&&1==h._pdfConvertMode||2==h._pdfRealConvertMode&&4==h._pdfConvertMode)||(f.D.Errors.LicenseNoPDF(h),!1))},h._setConvertModeAsync=function(e){return h._setConvertModeInner(e)?h._isMobileMode()?2==h._pdfRealConvertMode&&1==h._pdfConvertMode||2==h._pdfRealConvertMode&&4==h._pdfConvertMode?(f.D.Errors.LicenseNoPDF(h),f.D.Promise.reject({code:h._errorCode,message:h._errorString})):f.D.Promise.resolve(!0):(e=h._getPdfDllname(),h._innerFunV2("SetPDFConvertMode",(0,a.dv)(h._pdfRealConvertMode,e)).then(function(){if(2==h._pdfRealConvertMode&&1==h._pdfConvertMode||2==h._pdfRealConvertMode&&4==h._pdfConvertMode)throw f.D.Errors.LicenseNoPDF(h),{code:h._errorCode,message:h._errorString};return!0})):f.D.Promise.reject({code:h._errorCode,message:h._errorString})},h._setProductKey=function(e,r,t,n){var i=!0,o=function o(e){e||(h.__licenseInfo=!1);e=!0;return n||(e=f.D.License.checkProductKey(h,{Core:!0})),f.D.isFunction(t)&&t(),e};if(h._resetErr(),!h._isValid())return!1;if(f.D.isString(e)&&"******"!=e||(e=""),""==(f.I.DWT.ProductKey=e))i=!1,o();else{if(h._isMobileMode())return f.D.showProgressMsg(-1,"",f.I.MSG.Init_GetLicenseInfoForDWT),h.GetLicenseInfo(function(e){f.I.WasmEnv&&f.I.WasmEnv.setLoglevel(h._logLevel),h._setConvertMode(h._pdfConvertMode),h._resetErr(),o(!0)},o),!0;h._innerFunRaw("ProductKey",(0,a.dv)(e),r,!1,!1,function(e){var t=!1,t=f.D.isArray(e)?e[0]:e;f.D.isArray(e)&&3<=e.length&&"1"===e[1]&&f.D.isFunction(f.I.DWT.ShowMessage)&&f.I.DWT.ShowMessage(e[2],{width:510,height:272,headerStyle:1,seconds:10}),r||(i=t),f.D.showProgressMsg(-1,"",f.I.MSG.Init_GetLicenseInfoForDWT),h.GetLicenseInfo(function(){h._setConvertMode(h._pdfConvertMode),o(!0)},o)},function(){r||(i=!1),o()})}return i},d(h,["ProxyServer"]),["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"]),e=((h._isMobileMode()?o:d)(h,e),l(h,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]),["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"]),e=(h._isMobileMode()?o(h,e,0):l(h,e),u(h,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]),["CurrentSourceName","IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfShowFileDialog","IfShowUI","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"]),e=((h._isMobileMode()?o:u)(h,e),c(h,["MaxInternetTransferThreads"]),["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"]),e=((h._isMobileMode()?o:c)(h,e),s(h,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],2),["IfOpenImageWithGDIPlus"]);(h._isMobileMode()?o:s)(h,e)},f.D.attachPropertyUI||(f.D.attachPropertyUI=function(){})},8975:function(e,t,r){r.r(t);var t=r(9104),o=r.n(t),t=r(7711),c=r.n(t),h=r(1695),l=r(1188),d=h.I.navInfoSync,t=h.D.html5.STwain.prototype,g=h.D.html5.Funs,a=h.D.removeNonPrintableChar,f=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"],u=(t.LoadDibFromClipboard=function(e,t){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("LoadDibFromClipboard",t);var r=this.__GetLoadEventsNum();return this.__innerLoadImage("LoadDibFromClipboard",(0,l.dv)(r,1),-1,!0,1,e,t)},t.LoadImage=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(n._isMobileMode())return n._mobileNotSupport("LoadImage",r);var i,o,a,e=g.replaceLocalFilename(e),s=h.D.html5.Funs.getImageType(e);return t&&h.D.isFunction(t)&&(o=function o(){t()}),r&&h.D.isFunction(r)&&(a=function a(){r(n.ErrorCode,n.ErrorString)}),i=n.__GetLoadEventsNum(),""==e&&(n.__bOpenFileNow=!0),n.__innerLoadImage("LoadImage",(0,l.dv)(e,i,1),s,!0,1,o,a)},t.LoadImageEx=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;if(i._isMobileMode())return 0==(u=h.D.one(".d-loadImage")).length?((s=document.createElement("input"))._stwain=i,s.setAttribute("type","file"),s.setAttribute("multiple","multiple"),s.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;",s.className="d-loadImage",t==h.I.DWT.EnumDWT_ImageType.IT_BMP?s.setAttribute("accept","image/bmp"):t==h.I.DWT.EnumDWT_ImageType.IT_JPG?s.setAttribute("accept","image/jpeg"):t==h.I.DWT.EnumDWT_ImageType.IT_TIF?s.setAttribute("accept","image/tiff"):t==h.I.DWT.EnumDWT_ImageType.IT_PNG?s.setAttribute("accept","image/png"):t==h.I.DWT.EnumDWT_ImageType.IT_PDF?s.setAttribute("accept",".pdf"):t==h.I.DWT.EnumDWT_ImageType.IT_J2K?s.setAttribute("accept",".jp2,.j2k,.j2c"):h.D.env.bMobile?s.setAttribute("accept","image/jpeg,image/png,image/tiff,image/tif"):s.setAttribute("accept","image/*,.pdf,.jp2,.j2k,.j2c"),s.ondoubleclick=function(){0<this.files.length&&this._stwain.LoadImageFromBinary(this.files,r,n),this.value="",this._stwain=null},s.onchange=function(){0<this.files.length&&this._stwain.LoadImageFromBinary(this.files,r,n),this.value="",this._stwain=null},document.body.appendChild(s),s.click()):(t==h.I.DWT.EnumDWT_ImageType.IT_BMP?u[0].setAttribute("accept","image/bmp"):t==h.I.DWT.EnumDWT_ImageType.IT_JPG?u[0].setAttribute("accept","image/jpeg"):t==h.I.DWT.EnumDWT_ImageType.IT_TIF?u[0].setAttribute("accept","image/tiff"):t==h.I.DWT.EnumDWT_ImageType.IT_PNG?u[0].setAttribute("accept","image/png"):t==h.I.DWT.EnumDWT_ImageType.IT_PDF?u[0].setAttribute("accept",".pdf"):t==h.I.DWT.EnumDWT_ImageType.IT_J2K?u[0].setAttribute("accept",".jp2,.j2k,.j2c"):h.D.env.bMobile?u[0].setAttribute("accept","image/jpeg,image/png,image/tiff,image/tif"):u[0].setAttribute("accept","image/*,.pdf,.jp2,.j2k,.j2c"),u[0].value="",u[0]._stwain=i,u[0].click()),!0;var o,a,s=g.replaceLocalFilename(e),u=t;return r&&h.D.isFunction(r)&&(o=function o(){r()}),n&&h.D.isFunction(n)&&(a=function a(){n(i.ErrorCode,i.ErrorString)}),u==h.I.DWT.EnumDWT_ImageType.IT_ALL&&(u=-1),e=i.__GetLoadEventsNum(),""==s&&(i.__bOpenFileNow=!0),i.__innerLoadImage("LoadImageEx",(0,l.dv)(s,u,e,1),u,!0,1,o,a)},t.EnableSource=function(e,t,r){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("EnableSource",r):this.AcquireImage(e,t,r))},t.AcquireImage=function(e,t,r){var n,i,o=this,a=null,s=null;if(o._resetErr(),!o._isValid())return!1;if(h.D.isUndefined(r)&&(h.D.isFunction(e)&&h.D.isFunction(t)||h.D.isFunction(e)&&h.D.isUndefined(t)||h.D.isFunction(e)&&null==t||null==e&&h.D.isFunction(t))?(i={},h.D.isFunction(e)&&(a=e),h.D.isFunction(t)&&(s=t)):(i=h.D.isUndefined(e)||null==e?{}:h.D.clone(e),h.D.isFunction(t)&&(a=function a(){t(i)}),h.D.isFunction(r)&&(s=function s(){r(i,o._errorCode,o._errorString)})),!h.D.License.checkProductKey(o,{Core:!0}))return h.D.isFunction(s)&&s(o.ErrorCode,o.ErrorString),!1;if(o._isMobileMode())return o._mobileNotSupport("AcquireImage",s);if(g.isServerInvalid(o))return h.D.isFunction(s)&&s(o.ErrorCode,o.ErrorString),!1;!o._bRemoteMode&&i.RemoteScan&&(i.RemoteScan=!1),o._bRemoteMode&&i.RemoteScan&&(h.D.isFunction(o.__OnRemoteScanStatusAsync)||(o.__OnRemoteScanStatusAsync=function(){}),h.D.isFunction(o.__OnSourceUIClose)||(o.__OnSourceUIClose=function(){}));for(var u,c=0,l=0;l<f.length;l++){var d=["__",f[l]].join("");h.D.isFunction(o[d])&&(c|=1<<l)}return i.EnableEvents=c,o._enableEvents=c,o._bRemoteMode&&i.RemoteScan&&(o._isBindViewer()||i.ShowRemoteScanUI)&&((e=document.createElement("div")).style.position="absolute",e.style.zIndex="510000",e.style.left="0",e.style.top="0",(u=document.createElement("img")).className="ds-img-screen",e.appendChild(u),document.body.appendChild(e),o._acquireDivEL=e),"SelectSourceByIndex"in i?(u=i.SelectSourceByIndex,delete i.SelectSourceByIndex,o.SelectSourceByIndexAsync(u).then(function(){return n=["[",h.D.stringify(i),"]"].join(""),o.__bAcquireImageNow=!0,o.__innerAcquireImage("AcquireImage",n,!1,a,s)},function(e){s(e.code,e.message)})):(o._bRemoteMode||(o.bPageFocus&&h.I.DWT.IfAlwaysFocusOnPopupWindow?o.bServerAlwaysFocusOnPopupWindow||o._OnPageFocus(!0):o.bServerAlwaysFocusOnPopupWindow&&o._OnPageBlur(!0)),n=["[",h.D.stringify(i),"]"].join(""),o.__bAcquireImageNow=!0,o.__innerAcquireImage("AcquireImage",n,!1,a,s))},t._startScan=function(e,t,r){var n=this,i=null,o=null,a=h.D.isUndefined(e)||null==e?{}:e;if(n._resetErr(),!n._isValid())return!1;if(h.D.isFunction(t)&&(i=function i(){t(a)}),h.D.isFunction(r)&&(o=function o(e,t){r(e,t,a)}),g.isServerInvalid(n))return h.D.isFunction(o)&&o(n._errorCode,n._errorString),!1;if(!h.D.License.checkProductKey(n,{Core:!0}))return h.D.isFunction(o)&&o(n._errorCode,n._errorString),!1;for(var s=0,u=0;u<f.length;u++){var c=["__",f[u]].join("");h.D.isFunction(n[c])&&(s|=1<<u)}return a.EnableEvents=s,e=["[",h.D.stringify(a),"]"].join(""),n.__bAcquireImageNow=!0,n.__innerAcquireImage("StartScan",e,!1,i,o)},t.CancelAllPendingTransfers=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CancelAllPendingTransfers"):this._innerFun("CancelAllPendingTransfers"))},t.CloseSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseSource"):this._innerFun("CloseSource"))},t.CloseSourceManager=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseSourceManager"):this._innerFun("CloseSourceManager"))},t.CloseSourceAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("CloseSource"):this._innerFunV2("CloseSource"):h.D.Promise.reject({code:this._errorCode,message:this._errorString})},t.CloseSourceManagerAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("CloseSourceManager"):this._innerFunV2("CloseSourceManager"):h.D.Promise.reject({code:this._errorCode,message:this._errorString})},t.DisableSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("DisableSource"):this._innerFun("DisableSource"))},t.FeedPage=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FeedPage"):this._innerFun("FeedPage"))},t.GetDeviceType=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetDeviceType"):this._innerFun("GetDeviceType"))},t.GetSourceNameItems=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetSourceNameItems"):(this.__sourceCount<0&&(this.SourceCount=0),e<this.__sourceCount&&0<=e?this.__sourceName[e]:""))},t.SourceNameItems=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SourceNameItems"):this.GetSourceNameItems(e))},function u(e){e=JSON.parse(a(e));return h.D.each(e,function(e){var t;e.ProductName&&(t=e.ProductName,e.ProductName=h.D.base64.decode(t)),e.ProductFamily&&(t=e.ProductFamily,e.ProductFamily=h.D.base64.decode(t)),e.Manufacturer&&(t=e.Manufacturer,e.Manufacturer=h.D.base64.decode(t)),e.Version&&e.Version.Info&&(t=e.Version.Info,e.Version.Info=h.D.base64.decode(t))}),e});t._getSourceNamesSyncV2=function(e){var t=[],e=this._innerFun("GetSourceNames",(0,l.dv)(1,e));if(0!=this._errorCode&&-3032!=this._errorCode)return[];if(""!=e)for(var r=u(e),n=0;n<r.length;n++){var i,o="true"==(i=r[n]).IsCurrentSource,a="true"==i.IsDefaultSource;i.IsCurrentSource=o,i.IsDefaultSource=a,t.push(i)}return t},t._getSourceNamesAsyncV2=function(e){var s=this;return s._innerFunV2("GetSourceNames",(0,l.dv)(1,e)).then(function(e){if(0!=s._errorCode&&-3032!=s._errorCode)throw 0;var t=[];if(""!=e)for(var r=u(e),n=0;n<r.length;n++){var i,o="true"==(i=r[n]).IsCurrentSource,a="true"==i.IsDefaultSource;i.IsCurrentSource=o,i.IsDefaultSource=a,t.push(i)}return t})},t.GetSourceNames=function(e){this.SourceCount;return e?this.__sourceDetails:this.__sourceName},t._resetSources=function(){this.__defaultSourceName="",this.__sourceCount=0,this.__icaSourceCount=-1,this.__sourceName=[],this.__sourceDetails=[]},t.GetSourceCountAsync=function(e){var i=this,t=!1,r=!1;return i._resetErr(),i._isValid()?i._isMobileMode()?h.D.Promise.resolve(0):(i._bRemoteMode?i.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumWindow?r=!0:i.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumLinux?0:i.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumMac&&(t=!0):(t=d.bMac,d.bLinux,r=d.bWin),i._resetSources(),h.D.detect.showMask(i),e&&(i._driverType=e),t&&i._driverType===h.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?i._getSourceNamesAsyncV2(h.I.DWT.EnumDWT_Driver.ICA).then(function(e){for(var t,r,n=0;n<e.length;n++)t=(r=e[n]).ProductName,h.D.isString(t)&&""!==(t=a(o()(h.D).call(h.D,t)))&&("ICA"===r.DriverType&&(t="ICA-"+t),1==r.IsDefaultSource&&(i.__defaultSourceName=t),i.__sourceName.push(t),i.__sourceDetails.push(r));i.__icaSourceCount=i.__sourceDetails.length}).then(function(){return i._getSourceNamesAsyncV2(h.I.DWT.EnumDWT_Driver.TWAIN)}).then(function(e){for(var t,r,n=0;n<e.length;n++)t=(r=e[n]).ProductName,h.D.isString(t)&&""!==(t=a(o()(h.D).call(h.D,t)))&&("ICA"===r.DriverType&&(t="ICA-"+t),1==r.IsDefaultSource&&(i.__defaultSourceName=t),i.__sourceName.push(t),i.__sourceDetails.push(r))}).then(function(){var e=i.__sourceDetails.length;return i.__sourceCount=e,""===i.__defaultSourceName&&0<i.__sourceName.length&&(i.__defaultSourceName=i.__sourceName[0]),h.D.hideMask(),e},function(){return i._resetSources(),i.__icaSourceCount=0,h.D.hideMask(),0}):r&&h.I.dcp.b64bit&&i._driverType===h.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(e=i._getSourceNamesAsyncV2(h.I.DWT.EnumDWT_Driver.TWAIN).then(function(e){for(var t,r,n=0;n<e.length;n++)t=(r=e[n]).ProductName,h.D.isString(t)&&""!==(t=a(o()(h.D).call(h.D,t)))&&(1==r.IsDefaultSource&&(i.__defaultSourceName=t),i.__sourceName.push(t),i.__sourceDetails.push(r));i.__icaSourceCount=i.__sourceDetails.length}),(e=h.I.dcp.b64bit?e.then(function(){return i._getSourceNamesAsyncV2(h.I.DWT.EnumDWT_Driver.TWAIN64)}).then(function(e){for(var t,r,n=0;n<e.length;n++)t=(r=e[n]).ProductName,h.D.isString(t)&&""!==(t=o()(h.D).call(h.D,t))&&("TWAIN(64Bit)"===r.DriverType&&(t="Twain64-"+t),1==r.IsDefaultSource&&(i.__defaultSourceName=t),i.__sourceName.push(t),i.__sourceDetails.push(r))}):e).then(function(){var e=i.__sourceDetails.length;return i.__sourceCount=e,""===i.__defaultSourceName&&0<i.__sourceName.length&&(i.__defaultSourceName=i.__sourceName[0]),h.D.hideMask(),e},function(){return i._resetSources(),i.__icaSourceCount=0,h.D.hideMask(),0})):i._getSourceNamesAsyncV2().then(function(e){for(var t,r,n=0;n<e.length;n++)t=(r=e[n]).ProductName,h.D.isString(t)&&""!==(t=a(o()(h.D).call(h.D,t)))&&("ICA"===r.DriverType&&(t="ICA-"+t),1==r.IsDefaultSource&&(i.__defaultSourceName=t),i.__sourceName.push(t),i.__sourceDetails.push(r))}).then(function(){var e=i.__sourceDetails.length;return i.__sourceCount=e,""===i.__defaultSourceName&&0<i.__sourceName.length&&(i.__defaultSourceName=i.__sourceName[0]),i.__icaSourceCount=0,h.D.hideMask(),e},function(){return i._resetSources(),i.__icaSourceCount=0,h.D.hideMask(),0})):h.D.Promise.reject({code:i._errorCode,message:i._errorString})},t.getSourceCount=function(e){return this.GetSourceCountAsync(e)},t.GetSourceNamesAsync=function(e){var t,r=this;return r._resetErr(),r._isValid()?r._isMobileMode()?r._mobileNotSupportAsync("GetSourceNames"):(t=r.getSourceCount(),e?t.then(function(e){return r.__sourceDetails}):t.then(function(e){return r.__sourceName})):h.D.Promise.reject({code:r._errorCode,message:r._errorString})},t.GetSourceType=function(e){e=c()(e);return this._resetErr(),isNaN(e)?(h.D.Errors.InvalidParameter(this),!1):(e=this.__SetImageCaptureTypeInner(e),this._innerFun("GetSourceType",(0,l.dv)(e)))},t.OpenSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("OpenSource"):this._innerFun("OpenSource"))},t.OpenSourceManager=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("OpenSourceManager"):this._innerFun("OpenSourceManager"))},t.OpenSourceAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("OpenSource"):this._innerFunV2("OpenSource"):h.D.Promise.reject({code:this._errorCode,message:this._errorString})},t.OpenSourceManagerAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("OpenSourceManager"):this._innerFunV2("OpenSourceManager"):h.D.Promise.reject({code:this._errorCode,message:this._errorString})},t.ResetImageLayout=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("ResetImageLayout"):this._innerFun("ResetImageLayout"))},t.RewindPage=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("RewindPage"):this._innerFun("RewindPage"))},t.SelectSource=function(e,t){var r=this;return r._resetErr(),!!r._isValid()&&(r._isMobileMode()?r._mobileNotSupport("SelectSource",t):h.D.isUndefined(e)?r._bRemoteMode&&r.IfShowUI?(h.D.Errors.SelectSourceMustAsyncWhenRemote(r),!1):r._driverType==h.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(h.D.Errors.SelectSourceMustAsync(r),!1):r._innerFun("SelectSource"):(r.SelectSourceAsync().then(e,function(){h.D.isFunction(t)&&t(r.ErrorCode,r.ErrorString)}),!0))},t.SelectSourceAsync=function(e){var u=this;return u._resetErr(),u._isValid()?u._isMobileMode()?u._mobileNotSupportAsync("SelectSource"):e?u._innerFunV2("SelectSource",(0,l.dv)(e)):u.getSourceCount().then(function(e){var t,r=document,n=h.I.DWT;if(e<=0)return e=n.CustomizableDisplayInfo.dialogText.selectSource[3],alert(e),h.D.Promise.reject(e);if(h.D.dialog.selectsourcedlg){e=h.I.Lib.one(".dynamsoft-dialog-selectsource");e&&0<e.length&&(i=e[0])}else{var i,o=-1;for((i=r.createElement("dialog")).className="dynamsoft-dialog-selectsource",i.style.top="20%",d.bIE&&(i.style.width="300px"),i.setAttribute("closed","closed"),(s=[]).push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">'),t=0;t<u.__sourceCount;t++){var a="";(""==u.__defaultSourceName&&0==t||u.__defaultSourceName==u.__sourceName[t])&&(a=" dynamsoft-dialog-selectsource-sourcelist-li-selected",o=t),s.push('<li class="dynamsoft-dialog-selectsource-item'+a+'" sourceindex='+t+">"+u.__sourceName[t]+"</li>")}s.push("</ul>");var s=s.join(""),e=["<p>",n.CustomizableDisplayInfo.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',s,"</div>",'<div><input type="button" value="',n.CustomizableDisplayInfo.dialogText.selectSource[1],'" class="dynamsoft-dialog-selectsource-button-select">','<input type="button" value="',n.CustomizableDisplayInfo.dialogText.selectSource[2],'" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join("");i.innerHTML=e,h.D.dialog.selectsourcedlg=i,r.body.appendChild(h.D.dialog.selectsourcedlg),h.D.each(h.D.all(".dynamsoft-dialog-selectsource-item"),function(e,t){h.D.addEventListener(e,"click",function(e){for(var e=e.target,t=e.attributes.sourceindex.value,r=e.parentElement.children,n=0;n<r.length;n++)r[n].className="dynamsoft-dialog-selectsource-item";e.className="dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected",h.D.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",t)})}),h.D.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",o.toString()),h.D.dialog.setup(h.D.dialog.selectsourcedlg)}h.D.dialog.selectsourcedlg.showModal();n=0;return 0<(n=("CSS1Compat"==r.compatMode?r.documentElement:r.body).scrollTop)&&i&&(e=h.D.DOM.getElDimensions(i,!0).offsetTop,i.style.top=(e+=n)+"px"),new h.D.Promise(function(t,e){h.D.removeEventListener(h.D.one(".dynamsoft-dialog-selectsource-button-select")[0],"click"),h.D.removeEventListener(h.D.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click"),h.D.addEventListener(h.D.one(".dynamsoft-dialog-selectsource-button-select")[0],"click",function(){var e=c()(h.I.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);u.SelectSourceByIndexAsync(e).then(function(){h.D.dialog.selectsourcedlg.close(),document.body.removeChild(h.D.dialog.selectsourcedlg),h.D.dialog.selectsourcedlg=!1,t(e)})}),h.D.addEventListener(h.D.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click",function(){h.D.dialog.selectsourcedlg.close(),document.body.removeChild(h.D.dialog.selectsourcedlg),h.D.dialog.selectsourcedlg=!1,e({code:-1032,message:"User cancelled the operation."})})})}):h.D.Promise.reject({code:u._errorCode,message:u._errorString})},t.SelectSourceByIndex=function(e){var t=c()(e);if(this._resetErr(),this._isMobileMode())return this._mobileNotSupport("SelectSourceByIndex");if(isNaN(t))return h.D.Errors.InvalidParameter(this),!1;t=this.__getSourceIndexAndImageCaptureType(e);return this._innerFun("SelectSourceByIndex",(0,l.dv)(t[0],t[1],t[2]))},t.__getSourceIndexAndImageCaptureType=function(e){var t=this,e=+e,r=!1,n=!1,r=(t.__currentImageCaptureDriverType,t._driverType,t._isValid()&&(t._bRemoteMode?t.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumWindow?n=!0:t.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumLinux?0:t.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumMac&&(r=!0):(r=d.bMac,d.bLinux,n=d.bWin),r&&t._driverType===h.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?(-1==t.__icaSourceCount&&t.SourceCount<=0&&0,e>=t.__icaSourceCount?(e-=t.__icaSourceCount,t.__currentImageCaptureDriverType=h.I.DWT.EnumDWT_Driver.TWAIN):t.__currentImageCaptureDriverType=h.I.DWT.EnumDWT_Driver.ICA):n&&h.I.dcp.b64bit&&t._driverType===h.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64&&(-1==t.__icaSourceCount&&t.SourceCount<=0&&0,e>=t.__icaSourceCount?(e-=t.__icaSourceCount,t.__currentImageCaptureDriverType=h.I.DWT.EnumDWT_Driver.TWAIN64):t.__currentImageCaptureDriverType=h.I.DWT.EnumDWT_Driver.TWAIN)),t._driverType===undefined?0:t._driverType);return[e,t.__currentImageCaptureDriverType===undefined?r:t.__currentImageCaptureDriverType,r]},t.__SetImageCaptureTypeInner=function(e){if(!this._isValid())return!1;e=this.__getSourceIndexAndImageCaptureType(e);return this._innerFun("SetImageCaptureDriverType",(0,l.dv)(e[1],e[2])),e[0]},t._resetImageCaptureDriverType=function(e){var t,r=this,n=e,i=!1,o=!1;return r._resetErr(),!!r._isValid()&&(r._bRemoteMode?r.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumWindow?o=!0:r.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumLinux?0:r.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumMac&&(i=!0):(i=d.bMac,d.bLinux,o=d.bWin),(t=i&&r._driverType===h.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?(t=-1==r.__icaSourceCount?r.getSourceCount():h.D.Promise.resolve(r.__sourceCount),e>=r.__icaSourceCount?(n-=r.__icaSourceCount,r.__currentImageCaptureDriverType=h.I.DWT.EnumDWT_Driver.TWAIN,t.then(function(){return r._innerFunV2("SetImageCaptureDriverType",(0,l.dv)(h.I.DWT.EnumDWT_Driver.TWAIN,r._driverType))})):(r.__currentImageCaptureDriverType=h.I.DWT.EnumDWT_Driver.ICA,t.then(function(){return r._innerFunV2("SetImageCaptureDriverType",(0,l.dv)(h.I.DWT.EnumDWT_Driver.ICA,r._driverType))}))):o&&h.I.dcp.b64bit&&r._driverType===h.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(t=-1==r.__icaSourceCount?r.getSourceCount():h.D.Promise.resolve(r.__sourceCount),e>=r.__icaSourceCount?(n-=r.__icaSourceCount,r.__currentImageCaptureDriverType=h.I.DWT.EnumDWT_Driver.TWAIN64,t.then(function(){return r._innerFunV2("SetImageCaptureDriverType",(0,l.dv)(h.I.DWT.EnumDWT_Driver.TWAIN64,r._driverType))})):(r.__currentImageCaptureDriverType=h.I.DWT.EnumDWT_Driver.TWAIN,t.then(function(){return r._innerFunV2("SetImageCaptureDriverType",(0,l.dv)(h.I.DWT.EnumDWT_Driver.TWAIN,r._driverType))}))):h.D.Promise.resolve(0)).then(function(){return n}))},t.GetSourceTypeAsync=function(e){var t=this,e=+e;return t._resetErr(),t._isValid()?t._isMobileMode()?t._mobileNotSupportAsync("GetSourceType"):t._resetImageCaptureDriverType(e).then(function(e){return t._innerFunV2("GetSourceType",(0,l.dv)(e))}):h.D.Promise.reject({code:t._errorCode,message:t._errorString})},t.SelectSourceByIndexAsync=function(e){var t=this,e=+e;return t._resetErr(),t._isValid()?h.D.isNaN(e)?(h.D.Errors.InvalidIndex(t),h.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._mobileNotSupportAsync("SelectSourceByIndex"):t._resetImageCaptureDriverType(e).then(function(e){return t._innerFunV2("SelectSourceByIndex",(0,l.dv)(e))}):h.D.Promise.reject({code:t._errorCode,message:t._errorString})},t.SetFileXferInfo=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetFileXferInfo"):(e=h.I.navInfoSync.bFileSystem?e.replace(/<%/g,"<%25"):e,e=g.replaceLocalFilename(e),this._innerFun("SetFileXferInfo",(0,l.dv)(e,t))))},t.SetImageLayout=function(e,t,r,n){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetImageLayout"):this._innerFun("SetImageLayout",(0,l.dv)(e,t,r,n)))},t.CapGet=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGet"):this._innerFun("CapGet"))},t.CapGetCurrent=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetCurrent"):this._innerFun("CapGetCurrent"))},t.CapGetDefault=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetDefault"):this._innerFun("CapGetDefault"))},t.CapGetFrameBottom=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameBottom"):this._innerFun("CapGetFrameBottom",(0,l.dv)(e)))},t.CapGetFrameLeft=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameLeft"):this._innerFun("CapGetFrameLeft",(0,l.dv)(e)))},t.CapGetFrameRight=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameRight"):this._innerFun("CapGetFrameRight",(0,l.dv)(e)))},t.CapGetFrameTop=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameTop"):this._innerFun("CapGetFrameTop",(0,l.dv)(e)))},t.CapGetHelp=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetHelp"):this._innerFun("CapGetHelp"))},t.CapGetLabel=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetLabel"):this._innerFun("CapGetLabel"))},t.CapGetLabels=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetLabels"):this._innerFun("CapGetLabels"))},t.CapIfSupported=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapIfSupported"):this._innerFun("CapIfSupported",(0,l.dv)(e)))},t.CapReset=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapReset"):this._innerFun("CapReset"))},t.CapSet=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapSet"):this._innerFun("CapSet"))},t.CapSetFrame=function(e,t,r,n,i){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapSetFrame"):this._innerFun("CapSetFrame",(0,l.dv)(e,t,r,n,i)))},t.GetCapItems=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCapItems"):this._innerFun("GetCapItems",(0,l.dv)(e)))},t.GetCapItemsString=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCapItemsString"):this._innerFun("GetCapItemsString",(0,l.dv)(e)))},t.SetCapItems=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCapItems"):this._innerFun("SetCapItems",(0,l.dv)(e,t)))},t.SetCapItemsString=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCapItemsString"):this._innerFun("SetCapItemsString",(0,l.dv)(e,t)))},t.GenerateURLForUploadData=function(e,t,r,n,i){var o,a,s=this,u=[];if(t==h.I.DWT.EnumDWT_ImageType.IT_BMP||t==h.I.DWT.EnumDWT_ImageType.IT_JPG||t==h.I.DWT.EnumDWT_ImageType.IT_PNG){if(!h.D.isArray(e))return h.D.Errors.IndicesNotArray(s),h.D.isFunction(n)&&n(s.ErrorCode,s.ErrorString,"",e,t),"";if(1<e.length)return h.D.Errors.UploadIndexMoreThanOne(s),h.D.isFunction(n)&&n(s.ErrorCode,s.ErrorString,"",e,t),"";if(!s._checkIndices(e))return n(s.ErrorCode,s.ErrorString,"",e,t),!1;var c=s._ImgManager.convertClientIndexToServerId(e[0]);-1!=c&&u.push(c)}else{if(t!=h.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=h.I.DWT.EnumDWT_ImageType.IT_PDF)return h.D.isArray(e)?h.D.Errors.InvalidImageType(s):h.D.Errors.IndicesNotArray(s),h.D.isFunction(n)&&n(s.ErrorCode,s.ErrorString,s.__HTTPPostResponseString,e,t),"";if(h.D.isArray(e)){if(!s._checkIndices(e))return n(s.ErrorCode,s.ErrorString,"",e,t),!1;o=e}else{if(-1!=e)return h.D.Errors.IndicesNotArray(s),h.D.isFunction(n)&&n(s.ErrorCode,s.ErrorString,s.__HTTPPostResponseString,e,t),"";for(o=[],a=0;a<s._ImgManager.count();a++)o.push(a)}h.D.each(o,function(e){e=s._ImgManager.convertClientIndexToServerId(e);-1!=e&&u.push(e)})}return h.D.isFunction(r)&&h.D.isFunction(n)?(s._asyncGenerateURLForUploadData(u,t,i,r,function l(e){n(s.ErrorCode,s.ErrorString,s.__HTTPPostResponseString,e,t)}),!0):this._syncGenerateURLForUploadData(u,t,i)},t._syncGenerateURLForUploadData=function(e,t,r){var n=this,i=!1,o=h.I.dcp.managerVersion.join(""),a=",",t=(h.D.isString(r)&&""!=r||(a=r=""),["[",'"dcp","dwasm_'+o,'",',t,',"',e.join(","),'"',a,r,"]"].join("")),a=this._innerFunRaw("GenerateURLForUploadData",t,!1,!1,!0),s=(a&&h.D.isArray(a.result)&&1<a.result.length&&(r=a.result[0],t=a.result[1],1==r&&(i=["dcp://dwasm_",o,"/file/",t].join(""))),[]);return h.D.isArray(e)&&h.D.each(e,function(e){e=n._ImgManager.convertServerIdToClientIndex(e);-1<e&&s.push(e)}),0==i?(h.D.Errors.GenerateURL_InvalidRetFromServer(n),""):i},t._asyncGenerateURLForUploadData=function(n,i,e,o,r){var a=this,t=i,s=function s(){var t;return h.D.isFunction(r)&&(t=[],h.D.isArray(n)&&h.D.each(n,function(e){e=a._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)}),r(t)),""},u=",";if(t==h.I.DWT.EnumDWT_ImageType.IT_BMP||t==h.I.DWT.EnumDWT_ImageType.IT_JPG||t==h.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<n.length)return h.D.Errors.UploadIndexMoreThanOne(a),s(),""}else if(t!=h.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=h.I.DWT.EnumDWT_ImageType.IT_PDF)return h.D.Errors.InvalidImageType(a),s(),"";var c=!1,l=h.I.dcp.managerVersion.join(""),t=(h.D.isString(e)&&""!=e||(u=e=""),["[",'"dcp","dwasm_'+l,'",',t,',"',n.join(","),'"',u,e,"]"].join(""));return this._innerFunRaw("GenerateURLForUploadData",t,!0,!1,!0,function(e){var t,r;return e&&h.D.isArray(e.result)&&0<e.result.length?1==e.result[0]&&1<e.result.length?(t=e.result[1],c=["dcp://dwasm_",l,"/file/",t].join("")):e.exception!==undefined&&e.description!==undefined?(a._errorCode=e.exception,a._errorString=e.description):h.D.Errors.GenerateURL_InvalidRetFromServer(a):h.D.Errors.GenerateURL_InvalidRetFromServer(a),0==c?(s(),""):(h.D.isFunction(o)&&(r=[],h.D.isArray(n)&&h.D.each(n,function(e){e=a._ImgManager.convertServerIdToClientIndex(e);-1<e&&r.push(e)}),o(c,r,i)),c)},s)}},5505:function(e,t,r){r.r(t);var n=r(9623),t=r(4579),j=r.n(t),t=r(1614),p=r.n(t),t=r(677),I=r.n(t),z=r(1695),t=z.D.html5.STwain,Z=z.D.html5.Funs,J=12,X=13,Y=14,v=function v(e,t){if(!z.D.isUndef(e)&&!z.D.isUndef(t)&&null!=e&&null!=t){for(var r in t)e.hasOwnProperty(r)?"object"===(0,n.Z)(e[r])&&v(e[r],t[r]):e[r]=t[r];return e}};t.prototype.checkStartScanParams=function(e,t){var r=this;if(!e)return z.D.Errors.ScanUploader_InvalidScanSetup(r),!1;if(!z.D.isUndefined(t.transferMode)&&0!=e.transferMode&&1!=e.transferMode&&2!=e.transferMode)return z.D.Errors.ScanUploader_InvalidTransferMode(r),!1;if(e.transferMode==z.I.DWT.EnumDWT_TransferMode.TWSX_FILE){if(!e.fileXfer)return z.D.Errors.ScanUploader_InvalidFileXfer(r),!1;if(!z.D.isString(e.fileXfer.fileName)||""==e.fileXfer.fileName)return z.D.Errors.ScanUploader_InvalidFileXferFilename(r),!1;if(!z.D.isNumber(e.fileXfer.fileFormat)||e.fileXfer.fileFormat<0||16<e.fileXfer.fileFormat)return z.D.Errors.ScanUploader_InvalidFileXferFileFormat(r),!1}if(t){if(!z.D.isString(t.type)||""==t.type)return z.D.Errors.ScanUploader_InvalidHttpType(r),!1;if(!t.httpParams)return z.D.Errors.ScanUploader_InvalidHttpParams(r),!1;if(e.transferMode!=z.I.DWT.EnumDWT_TransferMode.TWSX_FILE&&z.D.isUndefined(t.format))return z.D.Errors.ScanUploader_InvalidOutputFormat(r),!1;if(!z.D.isString(t.httpParams.url)||""==t.httpParams.url)return z.D.Errors.ScanUploader_InvalidHttpUrl(r),!1;if(!z.D.isString(t.httpParams.fileName)||""==t.httpParams.fileName)return z.D.Errors.ScanUploader_InvalidHttpFilename(r),!1}return!0},t.prototype.startScan=function(e){var S=this;if(S._resetErr(),!S._isValid())return!1;if(S._isMobileMode())return S._mobileNotSupportAsync("startScan");if(1==S.startScanFlag)return z.D.Errors.StartScanFailed(S),z.D.Promise.reject({code:S.ErrorCode,message:S.ErrorString});S.startScanFlag=!0,z.D.isObject(e)||(e={});var w,C,E=!1,r=!0,M=!0,D=!0,P=!1,W=e.onFinally,x=[],k=[],F=0,L=1,N=[],t={type:"http",format:z.I.DWT.EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:!1,singlePost:!0,showProgressBar:!0,removeAfterOutput:!0,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},V=z.D.clone(e),A=e,B=V.funcScanStatus;if(delete V.funcScanStatus,z.D.isFunction(B)?V.bfuncScanStatus=!0:V.bfuncScanStatus=!1,!(V.outputSetup?(e={pdfSetup:{},tiffSetup:{}},v(V.outputSetup,t),C=V.outputSetup,delete V.outputSetup,!C.pdfSetup||C.format!=z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&C.format!=z.I.DWT.EnumDWT_ImageType.IT_PDF||z.D.mix(e.pdfSetup,C.pdfSetup),!C.tiffSetup||C.format!=z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&C.format!=z.I.DWT.EnumDWT_ImageType.IT_TIF||z.D.mix(e.tiffSetup,C.tiffSetup),C.format!=z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&C.format!=z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||(C.singlePost=!0),z.D.isNumber(C.httpParams.threads)&&(L=C.httpParams.threads),E=z.D.stringify(e),S.checkStartScanParams(V,C)):((C=t).type="",S.checkStartScanParams(V,!1))))return new z.D.Promise(function(e,t){r&&(t({code:S.ErrorCode,message:S.ErrorString,response:""}),r=!1,S.startScanFlag=!1)});C.funcHttpUploadStatus&&(P=C.funcHttpUploadStatus);var O,n,R,U,i,o=S.HttpFieldNameOfUploadedImage,a=S.MaxUploadImageSize,s=S.IfShowProgressBar,u=S.__IfShowCancelDialogWhenImageTransfer,c=S.__OnPostTransferAsync,l=S.__OnPostAllTransfers,d=S.__OnHttpUploadStatus,h=S.__insertingIndex,g=S.__IfAppendImage,m=S.httpFormFields,_=S._tiffCompressionType,G=!1,H=C.showProgressBar,f=function(e){var r=!0;z.D.each(N,function(e,t){-1==e.st&&(r=!1)}),r?O(e):j()(function(){f(e)},200)};if((O=function O(e){e.__OnPostTransferAsync=c,e.__OnPostAllTransfers=l,e.__OnHttpUploadStatus=d,e.HttpFieldNameOfUploadedImage=o,e.__maxUploadImageSize=a,e.IfShowProgressBar=s,e.__IfShowCancelDialogWhenImageTransfer=u,e.__insertingIndex=h,e.__IfAppendImage=g,e.httpFormFields=m,e._tiffCompressionType=_,e.__OnCancel=!1,z.I.FileUploader&&(z.I.FileUploader.nextLoopTime=600),e.startScanFlag=!1},n=function(e,t,r){M?(t(r),f(e)):j()(function(){n(e,t,r)},200)},R=function R(e,t){G=!0,r&&(r=!1,M||S._innerSendCmd("CancelAllPendingTransfers"),n(S,e,t))},U=function U(e,t,r,n){var i,o;z.D.isFunction(P)&&(t=t,i=0,z.D.isNumber(n)&&0<n&&(i=n),o={fileName:t,percentage:r,statusCode:i,responseString:e.__HTTPPostResponseString},j()(function(){P(o)},10))},S.__OnCancel=!1,S.__HTTPPostResponseString="",S.IfShowProgressBar=H,S.__IfShowCancelDialogWhenImageTransfer=H,z.D.isNumber(V.insertingIndex)&&-1<V.insertingIndex&&(S.__insertingIndex=V.insertingIndex,S.__IfAppendImage=!1),z.D.isFunction(P)?S.__OnHttpUploadStatus=P:S.__OnHttpUploadStatus=!1,C.useUploader)&&!z.I.FileUploader)return new z.D.Promise(function(e,t){z.D.Errors.Uploader_ModuleError(S);var r={code:S.ErrorCode,message:S.ErrorString,response:""};M=!0,R(t,r)});return w=C.reTries,C.useUploader?(e=C.httpParams.url,p()(z.D).call(z.D,e,"http://")||p()(z.D).call(z.D,e,"https://")||(t=window.location.href,i=I()(t).call(t,"/"),t=t.substring(0,i+1),C.httpParams.url=t+e)):(z.D.each(C.httpParams.headers,function(e,t){S.SetHTTPHeader(t,e)}),z.D.each(C.httpParams.formFields,function(e,t){S.SetHTTPFormField(t,e)})),""!==C.httpParams.remoteName&&(S.HttpFieldNameOfUploadedImage=C.httpParams.remoteName),new z.D.Promise(function(t,r){C.useUploader?z.I.FileUploader.Init(0,function(e){t({uploadManager:e})},function(e,t){e={code:S._errorCode=e,message:S._errorString=t,response:S.__HTTPPostResponseString};M=!0,R(r,e)}):t({})}).then(function(T){return new z.D.Promise(function(v,b){var y=function y(){(V.transferMode==z.I.DWT.EnumDWT_TransferMode.TWSX_FILE?F==k.length:F==x.length)?(z.D.closeProgress(S,"Scan Upload"),G=!0,v(A),O(S)):j()(y,100)},r=(B&&z.D.isFunction(B)&&(S.__OnPreAllTransfersAsync=function(e){B(e)}),S.RegisterEvent("OnPostTransferAsync",function(e){var t,r,i=C.httpParams.url,n=S.objImageIndexManager.convertGuidToServerId(e.imageId),o=C.singlePost,a=V.transferMode==z.I.DWT.EnumDWT_TransferMode.TWSX_FILE,s=C.removeAfterOutput,u=0;if(D=D&&(M=!1),a?(u=k.length,k.push(e.path)):(u=x.length,x.push(n)),B&&z.D.isFunction(B)&&(r={event:"postTransfer",bScanCompleted:!1,result:{currentPageNum:u+1}},j()(function(){B(r)},10)),G)return!1;if("http"==C.type){var c,l,d=Z.cformat(C.httpParams.fileName,u+1),h=Z.cformat(C.httpParams.remoteName,u+1);if(o||"http"!=C.type)o||C.type;else if(z.D.isNumber(C.httpParams.maxSizeLimit)&&(S.__maxUploadImageSize=C.httpParams.maxSizeLimit),C.useUploader){H&&(z.I.FileUploader.nextLoopTime=300,z.D.showProgress(S,"Scan Upload",!0)),c=function c(e,t){return S.__HTTPPostResponseString=t,U(S,e._fileName,100,200),S._OnPercentDone([0,100,"","http",e._fileName]),H&&z.D.closeProgress(S,"Scan Upload"),!a&&C.removeAfterOutput?j()(function(){-1<S._ImgManager.convertServerIdToClientIndex(n)?S._removeImageById(n,function(){F++},function(){F++}):F++},100):F++,!0};var g,f,m,_,p=T.uploadManager;g=function g(){if(H)for(var e=0,e=(a?k:x).length,t=0;t<e;t++)z.D.closeProgress(S,"Scan Upload");!a&&C.removeAfterOutput&&j()(function(){-1<S._ImgManager.convertServerIdToClientIndex(n)&&S._removeImageById(n)},100),p.CancelAllUpload();var r={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString};return R(b,r),!1},l=function l(e,t,r,n){var i=303;t==J?i=404:t==X?i=500:t==Y&&(i=503),S._errorCode=t,S._errorString=r,S.__HTTPPostResponseString=n,U(S,d,100,i),g()},S.__OnCancel=function(){l(null,-1032,"User cancelled the operation.","")},f=function f(){S.__HTTPPostResponseString="",U(S,d,100,303),g()},a?(m=p.CreateJob(),_=m.FormField,z.D.each(C.httpParams.headers,function(e,t){m.HttpHeader[t]=e}),z.D.each(C.httpParams.formFields,function(e,t){_.Add(t,e)}),m.ServerUrl=i,m.bDeleteFile=s,m.reTries=w,z.D.isNumber(C.httpParams.maxSizeLimit)&&(m.maxSizeLimit=C.httpParams.maxSizeLimit),m._fileName=d,m.SourceValue.Add(e.path,d,h),m.ImageType=V.fileXfer.fileFormat,m.ThreadNum=L,m.OnRunSuccess=c,m.OnRunFailure=l,(H||z.D.isFunction(P))&&(m.OnUploadTransferPercentage=function(e,t){0<t&&t<=100&&(100==t&&(t=99),H&&S._OnPercentDone([0,t,"","http",e._fileName]),z.D.isFunction(P)&&U(S,e._fileName,t,0))},z.D.cancelFrome=5,H&&S._OnPercentDone([0,-1,z.I.MSG.Uploading,"http",d]),U(S,d,0,0)),p.Run(m)):((t=C.format)==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?t=z.I.DWT.EnumDWT_ImageType.IT_PDF:t==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(t=z.I.DWT.EnumDWT_ImageType.IT_TIF),H&&(z.D.cancelFrome=5,S._OnPercentDone([0,-1,z.I.MSG.Encoding,"http",d])),S._asyncGenerateURLForUploadData([n],t,E,function(e){var r=p.CreateJob(),n=r.FormField;z.D.each(C.httpParams.headers,function(e,t){r.HttpHeader[t]=e}),z.D.each(C.httpParams.formFields,function(e,t){n.Add(t,e)}),r.ServerUrl=i,r.bDeleteFile=s,r.reTries=w,z.D.isNumber(C.httpParams.maxSizeLimit)&&(r.maxSizeLimit=C.httpParams.maxSizeLimit),r._fileName=d,r.SourceValue.Add(e,d,h),r.ImageType=t,r.ThreadNum=L,r.OnRunSuccess=c,r.OnRunFailure=l,(H||z.D.isFunction(P))&&(r.OnUploadTransferPercentage=function(e,t){0<t&&t<=100&&(100==t&&(t=99),H&&S._OnPercentDone([0,t,"","http",e._fileName]),z.D.isFunction(P)&&U(S,e._fileName,t,0))},z.D.cancelFrome=5,H&&S._OnPercentDone([0,-1,z.I.MSG.Uploading,"http",d]),U(S,d,0,0)),p.Run(r)},f))}else{var I={id:n,st:-1,bCancel:!1};if(N.push(I),0==u&&z.D.showProgress(S,"Scan Upload",!0),a)c=function c(e){return I.st=0,!a&&C.removeAfterOutput?j()(function(){-1<S._ImgManager.convertServerIdToClientIndex(n)?S._removeImageById(n,function(){F++},function(){F++}):F++},100):F++,!0},l=function l(){!a&&C.removeAfterOutput&&j()(function(){-1<S._ImgManager.convertServerIdToClientIndex(n)&&S._removeImageById(n)},100);var e={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString};return z.D.closeProgress(S,"Scan Upload"),2==I.st||(I.st=1,z.D.each(N,function(e,t){-1==e.st&&(e.bCancel=!0)}),R(b,e)),!1},S._innerUploadDirectly(i,e.path,d,H,s,w,!1,I,c,l);else{if(c=function c(e,t){return I.st=0,!a&&C.removeAfterOutput?j()(function(){-1<S._ImgManager.convertServerIdToClientIndex(n)?S._removeImageById(n,function(){F++},function(){F++}):F++},100):F++,!0},l=function l(e){!a&&C.removeAfterOutput&&j()(function(){-1<S._ImgManager.convertServerIdToClientIndex(n)&&S._removeImageById(n)},100);var t={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString};return z.D.closeProgress(S,"Scan Upload"),2==I.st||(I.st=1,z.D.each(N,function(e,t){-1==e.st&&(e.bCancel=!0)}),R(b,t)),!1},t=C.format,z.D.isUndefined(t))return o=S._ImgManager.convertServerIdToClientIndex(n),z.D.Errors.InvalidImageType(S),l([o]),!1;t==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?t=z.I.DWT.EnumDWT_ImageType.IT_PDF:t==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(t=z.I.DWT.EnumDWT_ImageType.IT_TIF);u={bOnlyUploadForm:!1,method:"startScan",_this:S,url:i,serverIds:[n],enumImageType:t,saveSetup:E,fileName:d,dataFormat:z.I.DWT.EnumDWT_UploadDataFormat.Binary,retry:w,bOnlyEmptyIsOK:!1,objUploadFileStatus:I,asyncSuccessFunc:c,asyncFailureFunc:l};z.D._asyncUploadCmd(u)}}}}),S.__OnPostAllTransfers=function(){var e,i,o,r,a,s,u,c,l,d,h,g,f,m,t=-1,n=z.I.DWT.EnumDWT_UploadDataFormat.Binary,_=C.httpParams.url,p=C.singlePost,I=V.transferMode==z.I.DWT.EnumDWT_TransferMode.TWSX_FILE,D=C.removeAfterOutput;if(B&&z.D.isFunction(B)&&(e={event:"postTransfer",bScanCompleted:!0,result:{currentPageNum:t=(I?k:x).length}},j()(function(){B(e)},10)),0==t)return z.D.Errors.SourceHasNothingToCapture(S),void j()(function(){M=!0,W&&z.D.isFunction(W)&&W();var e={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString};R(b,e)},1e3);if(0<t&&-1029==S.ErrorCode)S._errorCode=0;else if(0!=S.ErrorCode)return M=!0,W&&z.D.isFunction(W)&&W(),t={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString},void R(b,t);"http"==C.type&&(p&&"http"==C.type&&(r=x,z.D.isNumber(C.httpParams.maxSizeLimit)&&(S.__maxUploadImageSize=C.httpParams.maxSizeLimit),C.useUploader?(a=T.uploadManager,s=a.CreateJob(),u=s.FormField,H&&(z.I.FileUploader.nextLoopTime=300,z.D.showProgress(S,"Scan Upload",!0)),i=function i(e,t){e=(e=e._fileName)||"";return S._bServerPercentDone=!0,S.__HTTPPostResponseString=t,U(S,e,100,200),S._OnPercentDone([0,100,"","http"]),H&&z.D.closeProgress(S,"Scan Upload"),!I&&C.removeAfterOutput?j()(function(){F=0,z.D.each(r,function(e){-1<S._ImgManager.convertServerIdToClientIndex(e)?S._removeImageById(e,function(){F++},function(){F++}):F++}),j()(y,100)},100):(G=!0,v(A),O(S)),!0},c=function c(){S._OnPercentDone([0,100,"","http"]),H&&z.D.closeProgress(S,"Scan Upload"),S._bServerPercentDone=!0;var e={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString};return R(b,e),!I&&C.removeAfterOutput&&j()(function(){z.D.each(r,function(e){-1<S._ImgManager.convertServerIdToClientIndex(e)&&S._removeImageById(e)})},100),!1},o=function o(e,t,r,n){var i=303;t==J?i=404:t==X?i=500:t==Y&&(i=503),S._errorCode=t,S._errorString=r,S.__HTTPPostResponseString=n,U(S,"",100,i),c()},S.__OnCancel=function(){o(null,-1032,"User cancelled the operation.","")},l=function l(){S.__HTTPPostResponseString="",U(S,"",100,303),c()},I?(z.D.each(C.httpParams.headers,function(e,t){s.HttpHeader[t]=e}),z.D.each(C.httpParams.formFields,function(e,t){u.Add(t,e)}),s.ServerUrl=_,s.bDeleteFile=D,s.reTries=w,z.D.isNumber(C.httpParams.maxSizeLimit)&&(s.maxSizeLimit=C.httpParams.maxSizeLimit),z.D.each(k,function(e,t){var r=Z.cformat(C.httpParams.fileName,t+1),t=Z.cformat(C.httpParams.remoteName,t+1);s.SourceValue.Add(e,r,t)}),s.ImageType=V.fileXfer.fileFormat,s.ThreadNum=L,s.OnRunSuccess=i,s.OnRunFailure=o,(H||z.D.isFunction(P))&&(s.OnUploadTransferPercentage=function(e,t){0<t&&t<=100&&(100==t&&(t=99),H&&S._OnPercentDone([0,t,"","http"]),z.D.isFunction(P)&&U(S,"",t=99<t?99:t,0))},H&&S._OnPercentDone([0,-1,z.I.MSG.Uploading,"http"]),U(S,"",0,0)),a.Run(s)):(m=C.format)==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||m==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF?(m==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?m=z.I.DWT.EnumDWT_ImageType.IT_PDF:m==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(m=z.I.DWT.EnumDWT_ImageType.IT_TIF),H&&S._OnPercentDone([0,-1,z.I.MSG.Encoding,"http"]),S._asyncGenerateURLForUploadData(r,m,E,function(e){z.D.each(C.httpParams.headers,function(e,t){s.HttpHeader[t]=e}),z.D.each(C.httpParams.formFields,function(e,t){u.Add(t,e)}),s.ServerUrl=_,s.bDeleteFile=D,s.reTries=w,z.D.isNumber(C.httpParams.maxSizeLimit)&&(s.maxSizeLimit=C.httpParams.maxSizeLimit);var r=Z.cformat(C.httpParams.fileName,1),t=Z.cformat(C.httpParams.remoteName,1);s._fileName=r,s.SourceValue.Add(e,r,t),s.ImageType=m,s.ThreadNum=L,s.OnRunSuccess=i,s.OnRunFailure=o,(H||z.D.isFunction(P))&&(s.OnUploadTransferPercentage=function(e,t){0<t&&t<=100&&(100==t&&(t=99),H&&S._OnPercentDone([0,t,"","http",r]),z.D.isFunction(P)&&U(S,r,t,0))},z.D.cancelFrome=5,H&&S._OnPercentDone([0,-1,z.I.MSG.Uploading,"http",r])),a.Run(s)},l)):(d=r.length,g=h=0,f="",H&&(S._bServerPercentDone=!1,S._OnPercentDone([0,-1,z.I.MSG.Encoding,"http"])),z.D.each(r,function(e,t){var r=Z.cformat(C.httpParams.fileName,t+1),n=Z.cformat(C.httpParams.remoteName,t+1);S._asyncGenerateURLForUploadData([e],m,E,function(e){g=(h+1)/d*100,f=[h+1,"/",d].join(""),S._OnPercentDone([0,g,f,"http"]),s.SourceValue.Add(e,r,n),d<=++h&&(H&&(S._bServerPercentDone=!0),z.D.each(C.httpParams.headers,function(e,t){s.HttpHeader[t]=e}),z.D.each(C.httpParams.formFields,function(e,t){u.Add(t,e)}),s.ServerUrl=_,s.bDeleteFile=D,s.reTries=w,z.D.isNumber(C.httpParams.maxSizeLimit)&&(s.maxSizeLimit=C.httpParams.maxSizeLimit),s.ImageType=m,s.ThreadNum=L,s.OnRunSuccess=i,s.OnRunFailure=o,(H||z.D.isFunction(P))&&(s.OnUploadTransferPercentage=function(e,t){0<t&&t<=100&&(100==t&&(t=99),H&&S._OnPercentDone([0,t,"","http"]),z.D.isFunction(P)&&U(S,"",t=99<t?99:t,0))},H&&S._OnPercentDone([0,-1,z.I.MSG.Uploading,"http"])),a.Run(s))},l)}))):I?(i=function i(e){return S._bServerPercentDone=!0,!I&&C.removeAfterOutput?j()(function(){F=0,z.D.each(r,function(e){-1<S._ImgManager.convertServerIdToClientIndex(e)?S._removeImageById(e,function(){F++},function(){F++}):F++}),j()(y,100)},100):(G=!0,v(A),O(S)),!0},o=function o(e){S._bServerPercentDone=!0;var t={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString};return R(b,t),!I&&C.removeAfterOutput&&j()(function(){z.D.each(r,function(e){-1<S._ImgManager.convertServerIdToClientIndex(e)&&S._removeImageById(e)})},100),!1},S._innerUploadFilesDirectly(_,k,C.httpParams.fileName,H,D,w,!1,i,o)):(i=function i(e,t){return S._bServerPercentDone=!0,!I&&C.removeAfterOutput?j()(function(){F=0,z.D.each(r,function(e){-1<S._ImgManager.convertServerIdToClientIndex(e)?S._removeImageById(e,function(){F++},function(){F++}):F++}),j()(y,100)},100):(G=!0,v(A),O(S)),!0},o=function o(e){S._bServerPercentDone=!0;var t={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString};return R(b,t),!I&&C.removeAfterOutput&&j()(function(){z.D.each(r,function(e){-1<S._ImgManager.convertServerIdToClientIndex(e)&&S._removeImageById(e)})},100),!1},(m=C.format)==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||m==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF?(m==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?m=z.I.DWT.EnumDWT_ImageType.IT_PDF:m==z.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(m=z.I.DWT.EnumDWT_ImageType.IT_TIF),t=Z.cformat(C.httpParams.fileName,1),Z.cformat(C.httpParams.remoteName,1),t={bOnlyUploadForm:!1,method:"startScan",_this:S,url:_,serverIds:r,enumImageType:m,saveSetup:E,fileName:t,dataFormat:n,retry:w,bOnlyEmptyIsOK:!1,objUploadFileStatus:!1,asyncSuccessFunc:i,asyncFailureFunc:o},z.D._asyncUploadCmd(t)):0<r.length&&S._asyncUploadFilesCmd(_,r,m,C.httpParams.fileName,E,H,w,!1,i,o))),p&&C.type),M=!0,W&&z.D.isFunction(W)&&W()},function r(){"http"!=C.type?(G=!0,v(A),O(S)):C.singlePost||j()(y,100)});S._startScan(V,r,function(e){if(-1029==S.ErrorCode)if(V.transferMode==z.I.DWT.EnumDWT_TransferMode.TWSX_FILE?0<k.length:0<x.length)return S._errorCode=0,r();var t={code:S.ErrorCode,message:S.ErrorString,response:S.__HTTPPostResponseString};R(b,t)})})})}},9475:function(e,t,r){r.r(t);var l=r(9623),t=r(3662),d=r.n(t),t=r(4579),i=r.n(t),t=r(5683),h=r.n(t),g=r(1695),c=r(1188),n=r(8420),o=r(7344),a=function(){function e(){(0,n.Z)(this,e)}return(0,o.Z)(e,[{key:"convertServerIdToGuid",value:function(e){return+e+239514e3}},{key:"convertGuidToServerId",value:function(e){return+e-239514e3}}]),e}(),f=g.D.html5.Funs,s=g.I.dcp,t=(g.D.html5.STwain=function(e){var t=this,e=e||{},r=e.bNoViewer,n=e.bLocalService,r=(t._destroy=!1,t.config=e,t.clientId=g.D.getRandom(),t._id=e.id,e.container?t._containerElement=e.container:e.containerID&&(t._containerElement=g.D.get(e.containerID)),t._bBindViewer=!r,t._customIP=!1,t._ssl=g.D.detect.ssl,e.customIP?(t._customIP=!0,t._host=e.host):t._host=g.D.product.host,""==t._host||g.D.isLocalIP(t._host)?(t._bLocalService=!!n,t._bRemoteMode=!1):(t._bLocalService=!0,t._bRemoteMode=!0),(e.customIP||s.bEnhancedMode)&&(t._port=e.port),t.bReady=!1,t.httpFormFields={},t._objWS=null,t.__wsRetry=0,t.curCommand=[],t.__OnInternetTransferPercentage=e.onInternetTransferPercentage||"",t.__OnInternetTransferPercentageEx=e.onInternetTransferPercentageEx||"",t.__OnReady=e.onReady||null,t.__OnWSReconnect=e.onWSReconnect||null,t.__OnWSClose=e.onWSClose||null,t.__OnWSMessage=e.onWSMessage||null,t.__OnWSError=e.onWSError||null,t.__OnPercentDone=e.onPercentDone||"",t.__OnPrintMsg=e.onPrintMsg||"",t.__OnResult=e.onResult||"",t.HTTPPassword=e.HTTPPassword||"",t.HTTPPort=e.HTTPPort||(g.D.detect.ssl?443:80),t.HTTPUserName=e.HTTPUserName||"",t.__HTTPPostResponseString="",t.__strHttpContentTypeFieldValue="application/octet-stream",t.__IfShowProgressBar=!0,t.__IfShowCancelDialogWhenImageTransfer=!0,t._errorCode=0,t._errorString="",t.__bLoadingImage=!1,t.__bAcquireImageNow=!1,t.__bOpenFileNow=!1,t.__backgroundColor=!1,t.__addon={},t.__remoteFilename="RemoteFile",t.__sourceName=[],t.__defaultSourceName="",t.__sourceCount=0,t.__icaSourceCount=-1,t.__serverId="",t.__bConnecting=!1,t.__bTrial=!1,t.__licenseInfo=!1,t.__httpHeaderMap=!1,t.__bForceClose=!1,t._bLocalService?t.__strProductName="":t.__strProductName=g.I.DWT.ProductName,t.__versionInfo=g.I.DWT.JSVersion,t.__bMustUpgradeService=!1,t.__withCredentials=!1,t._moduleSize=1048576,g.I.dcp.b64bit?t._segementUploadThreshold=4294967296:t._segementUploadThreshold=524288e3,t._driverType=g.I.DWT.EnumDWT_Driver.TWAIN,t.__IfAppendImage=!0,t.__maxImagesInBuffer=32767,t.__maxUploadImageSize=-1,t.__insertingIndex=-1,t.objImageIndexManager=new a(t.__maxImagesInBuffer),t._bServerPercentDone=!0,t._aryBitmapCache=[],t._aryTiffTag=[],t._tiffCompressionType=g.I.DWT.EnumDWT_TIFFCompressionType.TIFF_AUTO,t._jpgQuality=80,t._pdfConvertMode=3,t._pdfRealConvertMode=3,t._pdfResolution=200,t._pdfPassword="",t._ifSSL=g.I.navInfoSync.bSSL,t._bRegistedLoad=!1,t._logLevel=0,t._scaleDownThreshold=0,t._pdfWriteSetting={},t.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumUnknown,t.bPageFocus=!0,t.bServerAlwaysFocusOnPopupWindow=!0,g.D.License.isLTS()&&(t._blts=!0),t),n=e;n=n||{},r.__OnAfterOperate=n.onAfterOperate||"",r.__OnBeforeOperate=n.onBeforeOperate||"",r.__OnOperateStatus=n.onOperateStatus||"",r.__OnBitmapChanged=n.onBitmapChanged||"",r.__OnGetFilePath=n.onGetFilePath||"",r.__OnPreAllTransfers=n.onPreAllTransfers||"",r.__OnPreTransfer=n.onPreTransfer||"",r.__OnPostLoad=n.onPostLoad||"",r.__OnPostTransfer=n.onPostTransfer||"",r.__OnPostAllTransfers=n.onPostAllTransfers||"",r.__OnSourceUIClose=n.onSourceUIClose||"",r.__OnTransferCancelled=n.onTransferCancelled||"",r.__OnTransferError=n.onTransferError||"",r.__OnInternetTransferPercentage=n.onInternetTransferPercentage||"",r.__OnInternetTransferPercentageEx=n.onInternetTransferPercentageEx||"",r.__OnRemoteScanStatusAsync=n.onRemoteScanStatusAsync||""},g.D.html5.STwain.prototype);t.getInstance=function(){return this},t._getWebTwainId=function(){return this._id},t._isMobileMode=function(){return!(!g.D.isLocalIP(this._host)&&""!=this._host)&&!this._bLocalService},t._isPC=function(){var e=g.I.navInfo;return e.bWin||e.bMac||e.bLinux},t._resetErr=function(){this._errorCode=0,this._errorString="";var e=g.I.DWT.licenseException;e.code=0,e.message=""},t._isValid=function(){return!this._destroy||(g.D.Errors.Destroyed(this),!1)},t._isBindViewer=function(){return this._bBindViewer},t._isNoViewer=function(){return!this._bBindViewer},t._mobileNotSupport=function(e,t){return g.D.Errors.MobileNotSupport(this,e),g.D.isFunction(t)&&t(this.ErrorCode,this.ErrorString),!1},t._mobileNotSupportAsync=function(e){return g.D.Errors.MobileNotSupport(this,e),g.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},t._serviceNotSupportAsync=function(e){return g.D.Errors.ServiceNotSupport(this,e),g.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},t._nouiNotSupport=function(e,t){return g.D.Errors.CannotCallUIMethodWhenNotBindDefaultViewer(this,e),g.D.isFunction(t)&&t(this.ErrorCode,this.ErrorString),!1},t._OnRecieveMsg=function(e){var t,r=this;if(e.event)if("OnBitmapChanged"!=e.event)f.handleEvent(r,e,t);else{if(e.cmdId)for(var n=r.curCommand.length-1;0<=n;n--)if(r.curCommand[n].cmdId==e.cmdId)return t=r.curCommand[n].currentFileName,void f.handleOnBitmapChangedEvent(r,e,t);f.handleOnBitmapChangedEvent(r,e)}else{if(e.cmdId){for(var i=-1,o=r.curCommand.length-1;0<=o;o--)if(r.curCommand[o].cmdId==e.cmdId){var a,i=o,s=d()(a=r.curCommand).call(a,i,1)[0];break}if(i<0)return}else s=r.curCommand.pop()||{};if(e.exception!==undefined&&e.description!==undefined?(r._errorCode=e.exception,r._errorString=e.description):"StartScan"!=e.method&&"GetAddOnVersion"!=e.method&&(r._errorCode=0,r._errorString=""),"ReadBarcode"==e.method||"OCRRecognize"==e.method||e.request&&"OCRProRecognize"==e.request.method)s.sFun&&s.sFun(e);else{if("ActiveUI"==e.method||"VersionInfo"==e.method||"ConvertToBase64"==e.method||"SaveSelectedImagesToBase64Binary"==e.method||"ConvertToBlob"==e.method){if(s.sFun&&0<e.result.length)return void s.sFun(e.result)}else if("ShowFileDialog"==e.method||"SplitTiff"==e.method||"SplitPDF"==e.method||"EncodeAsBase64"==e.method||"ProductKey"==e.method||"GetSourceNames"==e.method||"GetSkewAngle"==e.method||"GetImageInfo"==e.method){if(s.sFun)return void s.sFun(e.result)}else if("GetLicenseInfo"==s.cmd&&g.D.isArray(e.Detail)){if(s.sFun)return void s.sFun(e)}else if("SetCapabilities"==e.method)return"exception"in e&&"0"!=e.exception?(e.result.errorCode&&e.result.errorString?(r._errorCode=e.result.errorCode,r._errorString=e.result.errorString):(r._errorCode=e.exception,r._errorString=e.description),s.fFun&&s.fFun(e.result)):s.sFun&&s.sFun(e.result),void(e=null);if(e.result&&e.result.length&&("1"==e.result[0]||1==e.result[0]))s.sFun&&s.sFun();else if(e.exception){var u=!1;!(u=s.fFun?s.fFun(r._errorString):u)&&e.exception&&e.exception<0&&-2115!=e.exception&&g.D.isFunction(r.__OnPrintMsg)&&r.__OnPrintMsg(r._errorString)}else{if("LoadImage"==e.method||"LoadImageEx"==e.method||"LoadImageFromBytes"==e.method||"LoadImageFromBase64Binary"==e.method||"LoadDibFromClipboard"==e.method||"FTPDownload"==e.method||"FTPDownloadEx"==e.method)return s.sFun&&s.sFun(e.result),void(e=null);s.fFun&&s.fFun((0,c.yN)(["result:"],e.result))}}}},t._OnReady=function(e){var c=this,t=c._getWebTwainId();if(g.D.detect.starting=!1,g.D.detect.bOK=!0,c.bReady=!0,c.__wsRetry=0,!e&&g.I.DWT.ContainerMap[t]){var r=g.I.DWT.ContainerMap[t];if(!r._destroy)return void(c!=r&&(g.D.isFunction(c.__OnReady)&&c.__OnReady(r),c.dispose()));g.I.DWT.ContainerMap[t]=null}if(c._bLocalService&&g.I.DWT.IfUseWSPool){if(null===(s=c._objWS))return;if(s.onopen=null,c.httpUrl=g.D.getHttpUrl({host:c._host,ssl:c._ssl,port:c._port}),s.onmessage=function(e){var t=e.data;if("object"===(0,l.Z)(t)){if(g.I.DWT.ConnectWithSocket){for(var r=c.curCommand.length-1;0<=r;r--)if("ConvertToBlob"==c.curCommand[r].cmd||"GetImageByIndex"==c.curCommand[r].cmd){var n,i=r,o=d()(n=c.curCommand).call(n,i,1)[0];break}o.sFun(t)}e=t=null}else{e=t.replace(/\0/g,"");try{e=g.D.parse(e)}catch(a){g.D.log(t)}e.id&&g.D._deliverMsg(s.url,e)}},s.onclose=s.onerror=function(e){g.D.page.bUnload||g.D.detect.starting||(i()(g.D._reconnectWSPool,500),g.D.detect.starting=!0),e&&g.D.log("websocket error: "+e),f.hideMask(!0),g.D.detect.bOK=!1,g.I.Lib.each(g.I.DWT.globalWS,function(e,t){if(e==s)return d()(e=g.I.DWT.globalWS).call(e,t,1),!1})},e)return void c._innerActiveUI(function(e){var t,r,n,i=c.__serverId;e&&6<=e.length?(t=e[1],r=e[2],n=e[5],c.__strProductName=r,g.D.isString(n)&&("win"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==n&&(c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumChromeOS))):e&&3<=e.length?(t=e[1],r=e[2],c.__strProductName=r):e&&2<=e.length?t=e[1]:g.D.log("ActiveUI return parameters error."),r=r&&r.toLowerCase(),c.__serverId=t,c._blts?g.I.DWT.lglic(g.I.DWT.EnumInstance.dwt_desktop).then(function(e){return g.D.closeProgress(c,"Reconnect"),c.SetLTSLicenseAsync(e.ar)}).then(function(e){g.I.DWT.laddDWTObj(c),g.I.DWT.lcheckLic(g.I.DWT.EnumInstance.dwt_desktop,e)},function(e){e&&(g.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),g.I.DWT.OnLicenseException()),c.__unload(),g.I.DWT.ContainerMap={},d()(e=g.D.detect.arySTwains).call(e,0),d()(e=g.D.detect.arySTwainsByIP).call(e,0)}):(g.D.closeProgress(c,"Reconnect"),c.SetProductKeyAsync(g.I.DWT.ProductKey)),i!=t?(g.D.Errors.Server_Restarted(c),c._ImgManager&&(c._ImgManager.clear(),c._ImgManager.OnReady())):c._ImgManager&&c._innerFunRawV2("HowManyImagesInBuffer").then(function(e){e&&e.result&&0==e.result[0]&&c._ImgManager.clear(),c._ImgManager.OnReady(),c._resetErr()})});g.D.isLocalIP(c._host)&&(g.D.LS.item("DWT_port",c._port),g.D.LS.item("DWT_ssl",c._ssl?"true":"false"))}else if(c._bLocalService&&!g.I.DWT.IfUseWSPool){var n,s=c._objWS;if(c._customIP?n={host:c._host,ssl:c._ssl,port:c._port}:(n=g.D.detect.urls[g.D.detect.cUrlIndex])?n.host=g.D.product.host:n={host:g.D.product.host,ssl:c._ssl,port:c._port},c.httpUrl=g.D.getHttpUrl(n),null===s)return;if(s.onopen=null,s.onmessage=function(e){var t,r=e.data;if("object"===(0,l.Z)(r)){if(g.I.DWT.ConnectWithSocket){for(var n=c.curCommand.length-1;0<=n;n--)if("ConvertToBlob"==c.curCommand[n].cmd||"GetImageByIndex"==c.curCommand[n].cmd){var i,o=n,a=d()(i=c.curCommand).call(i,o,1)[0];break}a.sFun(r)}e=r=null}else{c.__OnWSMessage&&c.__OnWSMessage(r);var s,e=r.replace(/\0/g,"");if(0<=h()(e).call(e,'"method" : "EnableBuffer"')||0<=h()(e).call(e,'"method" : "GetBuffer"'))g.I.DWT.lwsproc(e);else{if(0<=h()(e).call(e,"Exception:")||0==h()(e).call(e,"Error"))return s=r,a=c.curCommand.pop()||{},t=!1,g.D.log(s+"@"+a.cmd),void(!(t=a.fFun?a.fFun(s):t)&&g.D.isFunction(c.__OnPrintMsg)&&c.__OnPrintMsg(s));try{e=g.D.parse(e)}catch(u){g.D.log(r)}c._OnRecieveMsg&&c._OnRecieveMsg(e)}}},s.onclose=function(){c.bReady=!1,c.__wsRetry=0,g.D.Errors.Server_Invalid(c),c.__bForceClose||g.D.page.bUnload||g.D.detect.starting||(i()(function(){g.D._checkAndReconnect(c._host,c._port)},500),g.D.detect.starting=!0),c.__OnWSClose&&c.__OnWSClose(),f.hideMask(!0),g.D.detect.bOK=!1,c.__bForceClose=!1,g.I.Lib.each(g.I.DWT.globalWS,function(e,t){if(e==s)return d()(e=g.I.DWT.globalWS).call(e,t,1),!1})},s.onerror=function(e){c.bReady=!1,c.__wsRetry=0,g.D.Errors.Server_Invalid(c),g.D.detect.bOK=!1,g.D.page.bUnload||g.D.detect.starting||(i()(function(){g.D._checkAndReconnect(c._host,c._port)},500),g.D.detect.starting=!0),e&&g.D.log("websocket error: "+e),c.__OnWSError&&c.__OnWSError(),f.hideMask(!0)},e)return void c._innerActiveUI(function(e){var t,r,n,i=c.__serverId;e&&6<=e.length?(t=e[1],r=e[2],n=e[5],c.__strProductName=r,g.D.isString(n)&&("win"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==n&&(c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumChromeOS))):e&&3<=e.length?(t=e[1],r=e[2],c.__strProductName=r):e&&2<=e.length?t=e[1]:g.D.log("ActiveUI return parameters error."),r=r&&r.toLowerCase(),c.__serverId=t,c._blts?g.I.DWT.lglic(g.I.DWT.EnumInstance.dwt_desktop).then(function(e){return g.D.closeProgress(c,"Reconnect"),c.SetLTSLicenseAsync(e.ar)}).then(function(e){g.I.DWT.laddDWTObj(c),g.I.DWT.lcheckLic(g.I.DWT.EnumInstance.dwt_desktop,e)},function(e){e&&(g.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),g.I.DWT.OnLicenseException()),c.__unload(),g.I.DWT.ContainerMap={},d()(e=g.D.detect.arySTwains).call(e,0),d()(e=g.D.detect.arySTwainsByIP).call(e,0)}):(g.D.closeProgress(c,"Reconnect"),c.SetProductKeyAsync(g.I.DWT.ProductKey)),i!=t?(g.D.Errors.Server_Restarted(c),c._ImgManager&&(c._ImgManager.clear(),c._ImgManager.OnReady()),g.D.isFunction(c.__OnWSReconnect)&&(n=g.D.getWSUrl(c._host,c._port,c._ssl),c.__OnWSReconnect(n,c.httpUrl))):c._ImgManager&&c._innerFunRawV2("HowManyImagesInBuffer").then(function(e){e&&e.result&&0==e.result[0]&&c._ImgManager.clear(),c._ImgManager.OnReady(),c._resetErr()})});g.D.isLocalIP(c._host)&&(g.D.LS.item("DWT_port",n.port),g.D.LS.item("DWT_ssl",n.ssl?"true":"false"))}else c._port||(c._port=c._ssl?g.I.DWT.SSLPort:g.I.DWT.Port),c.httpUrl=g.D.getHttpUrl({host:c._host,ssl:c._ssl,port:c._port});g.D.attachProperty(c),g.D.html5.ui.init(c,c.config),g.D.html5.ui.addMethods(c),g.D.attachPropertyUI(c),c._ImgManager.OnReady(),c._bLocalService?c._innerActiveUI(function(e){var t,r,n,i=!1;e&&6<=e.length?(t=e[1],r=e[2],n=e[5],c.__strProductName=r,g.D.isString(n)&&("win"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==n?c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==n&&(c.__serverPlatform=g.I.DWT.EnumDWT_PlatformType.enumChromeOS))):e&&3<=e.length?(t=e[1],r=e[2],c.__strProductName=r):e&&2<=e.length?(t=e[1],i=!0):(i=!0,g.D.log("ActiveUI return parameters error.")),g.D.attachAddon(c),r=r&&r.toLowerCase(),c.__serverId=t,(c.__bMustUpgradeService=i)?g.D.isFunction(c.__OnReady)&&c.__OnReady(c):(g.D.showLoadingMsg(-1,"",g.I.MSG.Init_SetLicenseForDWT),(c._blts?(n=c._bLocalService,g.D.isUndefined(n)&&g.D.env.bMobile,g.I.DWT.lglic(g.I.DWT.EnumInstance.dwt_desktop).then(function(e){return c.SetLTSLicenseAsync(e.ar)}).then(function(e){g.I.DWT.laddDWTObj(c),g.I.DWT.lcheckLic(g.I.DWT.EnumInstance.dwt_desktop,e)})):""==(e=g.I.DWT.ProductKey)||"******"==e?g.D.Promise.resolve(0):c.SetProductKeyAsync(e)).then(function(){g.D.closeLoadingMsg();var e=!1;if(c._blts?0==g.I.DWT.licenseException.code&&(g.D.License.checkProductKey(c,{Core:!0},!0)||g.D.License.checkProductKey(c,{Webcam:!0},!0)?(g.I.DWT.lclex(),e=!0):g.D.License.checkProductKey(c,{Core:!0},!0)):g.D.License.checkProductKey(c,{Core:!0})||g.D.License.checkProductKey(c,{Webcam:!0},!0)?(g.I.DWT.lclex(),e=!0):g.D.License.checkProductKey(c,{Core:!0},!1,!0),g.D.isFunction(c.__OnReady)&&c.__OnReady(c),e)return c._setConvertModeAsync(c._pdfConvertMode).catch(function(){})},function(e){if(g.D.closeLoadingMsg(),c._blts&&e)return g.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),g.I.DWT.OnLicenseException(),c.__unload(),g.I.DWT.ContainerMap={},d()(e=g.D.detect.arySTwains).call(e,0),void d()(e=g.D.detect.arySTwainsByIP).call(e,0);c._blts?g.D.License.checkProductKey(c,{Core:!0},!0):g.D.License.checkProductKey(c,{Core:!0})||g.D.License.checkProductKey(c,{Webcam:!0},!0)||g.D.License.checkProductKey(c,{Core:!0},!1,!0)}))}):(g.D.attachAddon(c),c.__serverId=1,c.__bMustUpgradeService=!1,g.D.showLoadingMsg(-1,"",g.I.MSG.Init_SetLicenseForDWT),(c._blts?(g.I.DWT.li({instanceMode:g.I.DWT.EnumInstance.dwt_browser}),g.I.DWT.lglic(g.I.DWT.EnumInstance.dwt_browser).then(function(e){return c.SetLTSLicenseAsync(e.ar)}).then(function(e){g.I.DWT.laddDWTObj(c),g.I.DWT.lcheckLic(g.I.DWT.EnumInstance.dwt_browser,e)},function(e){e&&(g.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),g.I.DWT.OnLicenseException()),c.__unload(),g.I.DWT.ContainerMap={},d()(e=g.D.detect.arySTwains).call(e,0),d()(e=g.D.detect.arySTwainsByIP).call(e,0)})):""==(r=g.I.DWT.ProductKey)||"******"==r?g.D.Promise.resolve(0):c.SetProductKeyAsync(r)).then(function(){var e;g.D.closeLoadingMsg(),c.ErrorCode<0?g.D.License.promptLicenseErr(c):(e=!1,c._blts?0==g.I.DWT.licenseException.code&&(g.D.License.checkProductKey(c,{Core:!0},!0)||g.D.License.checkProductKey(c,{Webcam:!0},!0)?(g.I.DWT.lclex(),e=!0):g.D.License.checkProductKey(c,{Core:!0},!0)):g.D.License.checkProductKey(c,{Core:!0})||g.D.License.checkProductKey(c,{Webcam:!0},!0)?g.D.License.checkProductKey(c,{Core:!0,Wasm:!0},!0,!0)&&(g.I.DWT.lclex(),e=!0):g.D.License.checkProductKey(c,{Core:!0},!1,!0),e&&(g.I.WasmEnv&&g.I.WasmEnv.setLoglevel(c._logLevel),c._setConvertMode(c._pdfConvertMode)),g.D.isFunction(c.__OnReady)&&c.__OnReady(c))},function(e){g.D.closeLoadingMsg(),c.errorCode=e.code,c.errorString=e.message,g.I.OnLicenseError(e.message,e.code)}))},t.__unload=t.dispose=function(){var e,t=this;t._destroy||(t._ImgManager&&t._ImgManager.clear(),(e=t._objWS)&&(t.__bForceClose=!0,g.I.DWT.IfUseWSPool?g.D._removeFromWSPool(t):(e.close(),e.onmessage=null,e.onclose=null),d()(e=t.curCommand).call(e,0),delete t._objWS,t._objWS=null),t.bReady=!1,t.__addon&&t.__addon.Camera&&t.__addon.Camera._viewer&&(""!=t.__addon.Camera.getStatus()&&t.__addon.Camera.closeSource().catch(function(){}),t.__addon.Camera._viewer.dispose(),t.__addon.Camera._viewer=null),t._isBindViewer()&&(t.UnbindViewer(),g.D.html5.ui.unLoad(t)),t._ImgManager&&(t._ImgManager.dispose(),t._ImgManager=null,t.Viewer=null),t.objImageIndexManager&&(t.objImageIndexManager=null),t._OnRecieveMsg=null,g.I.DWT.lremoveDWTObj(t),t._destroy=!0)}},1097:function(e,t,r){r.r(t);var t=r(9798),n=r.n(t),t=r(4579),D=r.n(t),t=r(5683),h=r.n(t),t=r(7711),s=r.n(t),v=r(1695),g=window.SparkMD5,d=r(1188),f=r(4130),m=v.I.navInfoSync,t=v.D.html5.STwain.prototype,b=v.D.html5.Funs;t.__innerLoadImage=function(e,t,r,n,i,o,a){var s=this;return v.D.License.checkProductKey(s,{Core:!0})&&v.D.License.checkPDFProductKeyWhenNeeds(s,r)?v.D.isFunction(o)?s.__innerAcquireImage(e,t,n,o,a):(""==(r=s.GetCurrentDocumentName())&&(r=s._ImgManager.getWebViewer().GetDefaultFileName()),s.__innerLoadImageFun(e,t,i,r)):(v.D.isFunction(a)&&a(s._errorCode,s._errorString),!1)},t.__innerLoadImageFun=function(e,t,r,n){var i=!0;if(b.isHttpServerInvalid(this))return!1;if(t=this._innerFunRaw(e,t,!1,!1,!0),this.__bOpenFileNow=!1,v.D.isArray(t.result)&&0<t.result.length){var o="",a=[];if(r?(r=t.result[0],v.D.isObject(r)?(o=r.ids,a=r.metaData):(-1!=r||"LoadImage"!=e&&"FTPDownload"!=e)&&(r||"LoadImageFromBase64Binary"!=e)||(i=!1)):o=t.result.join(","),v.D.isArray(a)||(a=[]),this._OnBitmapChanged(["c2",o,1,this._ImgManager.getCurrentImageIndex(),this._ImgManager.count(),a],null,n),i)return v.D.License.isLTS()&&v.I.DWT.lcvrf(this),!0}return v.I.Lib.Errors.bImageOnlyError_NotPurelyPDF(this._errorCode)&&v.I.Lib.Errors.LicenseNoPDF(this),!1},t.__closeRemoteScanUI=function(e){var t;this._acquireDivEL&&(t=v.D.one(".ds-img-screen"),this._acquireDivEL.evtFun?(t&&0<t.length&&v.D.removeEventListener(t[0],"mouseup",this._acquireDivEL.evtFun),this._acquireDivEL.evtFun=null):t&&0<t.length&&v.D.removeEventListener(t[0],"mouseup"),t&&0<t.length&&(t[0].src=""),e&&(document.body.removeChild(this._acquireDivEL),this._acquireDivEL=null))},t.__innerAcquireImage=function(r,e,t,n,i){var o=this,a="LoadImage"==r||"LoadImageEx"==r||"GenerateURLForUploadData"==r,s=a||"LoadDibFromClipboard"==r,u=function u(e){o.__bLoadingImage=!1,o.__bAcquireImageNow=!1,o.__bOpenFileNow=!1;var t=o._ImgManager.getCurrentImageIndex();return 0<=t&&o.OnRefreshUI(t),v.I.Lib.Errors.bImageOnlyError_NotPurelyPDF(o._errorCode)&&v.I.Lib.Errors.LicenseNoPDF(o),v.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),a?v.I.Lib.closeProgress(o,r):b.hideMask(r),e&&v.I.Lib.log(e),o.__closeRemoteScanUI(!0),!1};return b.isServerInvalid(o)?(u(),!1):(a?v.I.Lib.showProgress(o,r,!1):b.showMask(r),o._innerSend(r,e,!0,function(){var e;o.__bLoadingImage=!1,o.__bOpenFileNow=!1,a?(v.I.Lib.closeProgress(o,r),o._isBindViewer()&&0<=(e=o._ImgManager.getCurrentImageIndex())&&o.OnRefreshUI(e)):b.hideMask(r),v.D.isFunction(n)&&n(),o.__closeRemoteScanUI(!0),s&&v.D.License.isLTS()&&v.I.DWT.lcvrf(o)},u),!0)},t.__innerSaveImage=function(e,t,r,n){return this._OnPercentDone([0,-1,v.I.MSG.Encoding]),this.__innerProgressFunction(e,t,!1,r,n)},t.__innerFTPDownloadDirectly=function(e,t,r,n,i){return v.D.License.checkProductKey(this,{Core:!0})&&v.D.License.checkPDFProductKeyWhenNeeds(this,r)?(v.D.cancelFrome=4,this.__innerProgressFunction(e,t,!0,n,i)):(v.D.isFunction(i)&&i(this._errorCode,this._errorString),!1)},t.__innerFTPDownload=function(e,t,r,n,i){var o=this;return v.D.License.checkProductKey(o,{Core:!0})&&v.D.License.checkPDFProductKeyWhenNeeds(o,r)?(v.D.cancelFrome=4,v.D.isFunction(i)?o.__innerProgressFunction(e,t,!0,function(){var e=o._ImgManager.getCurrentImageIndex();0<=e&&o.OnRefreshUI(e),v.D.License.isLTS()&&v.I.DWT.lcvrf(o),v.D.isFunction(n)&&n()},i):(""==(r=o.GetCurrentDocumentName())&&(r=o._ImgManager.getWebViewer().GetDefaultFileName()),(e=o.__innerLoadImageFun(e,t,1,r))&&v.D.License.isLTS()&&v.I.DWT.lcvrf(o),0<=(t=o._ImgManager.getCurrentImageIndex())&&o.OnRefreshUI(t),e)):(v.D.isFunction(i)&&i(o._errorCode,o._errorString),!1)},t.__innerFTPUpload=function(e,t,r,n){return v.I.Lib.cancelFrome=3,this.__innerProgressFunction(e,t,!0,r,n)},t.__innerProgressFunction=function(t,e,r,n,i){var o=this;if(!v.D.isFunction(i))return this._innerFun(t,e);var a=function a(e){return v.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),v.I.Lib.closeProgress(o,t),e&&v.I.Lib.log(e),!0};return v.I.Lib.showProgress(o,t,r),this._innerSend(t,e,!0,function(){v.I.Lib.closeProgress(o,t),v.D.isFunction(n)&&n()},a)},t.__innerGetBarcodeResultAsyncFunction=function(e){var t=v.I.Lib.NewBarcodeResult();return e&&(t._errorCode=e.exception,t._errorString=e.description,t._resultlist=e.result,t._Count=e.result.length),t},t.__innerGetOCRResultAsyncFunction=function(e){var t=v.I.Lib.NewOCRResult(this);return e&&(t._errorCode=e.exception,t._errorString=e.description,t._resultlist=e.result),t},t._innerSendCmd=function(e,t){if(b.isHttpServerInvalid(this))return!1;this._innerFunRaw(e,t,!0,!1,!0)},t._innerFun=function(e,t){return!b.isHttpServerInvalid(this)&&(e=this._innerFunRaw(e,t,!1,!1,!1),v.I.Lib.isArray(e)?e[0]:e)},t._innerFunRawV2=function(e,t,r){var i=this;return i._resetErr(),!i._isValid()||b.isHttpServerInvalid(i)?v.D.Promise.reject({code:i._errorCode,message:i._errorString}):(r={method:"post",body:b.getJson(i,e,t,0),dataType:r},v.I.DWT.ConnectWithSocket?new(n())(function(n,r){i._innerSend(e,t,!1,function(e){var t=!1;try{t=v.D.isString(e)?v.D.parse(e):e}catch(r){}if(t){if(t instanceof Blob||t instanceof ArrayBuffer)return void n(t);t.exception!==undefined&&t.description!==undefined&&(i._errorCode=t.exception,i._errorString=t.description)}i._resetErr(),n(t)},function(e){var t;v.I.Lib.Errors.NetworkError(i),e&&(t=[i._errorString," ",e.errorString],e.httpCode&&(t.push(" ("),t.push(e.httpCode),t.push(")")),i._errorString=t.join("")),r({code:i._errorCode,message:i._errorString})})}):v.D.fetch([i.httpUrl,"fa/",e].join(""),r).then(function(e){var t=!1;try{t=v.D.isString(e)?v.D.parse(e):e}catch(r){}if(t){if(t instanceof Blob||t instanceof ArrayBuffer)return t;if(t.exception===undefined||t.description===undefined)return i._resetErr(),t;i._errorCode=t.exception,i._errorString=t.description}else v.I.Lib.Errors.InvalidResultFormat(i);throw{code:i._errorCode,message:i._errorString}},function(e){var t;throw v.I.Lib.Errors.NetworkError(i),e&&(t=[i._errorString," ",e.errorString],e.httpCode&&(t.push(" ("),t.push(e.httpCode),t.push(")")),i._errorString=t.join("")),{code:i._errorCode,message:i._errorString}}))},t._innerFunV2=function(e,t){return b.isHttpServerInvalid(this)?v.D.Promise.reject({code:this._errorCode,message:this._errorString}):this._innerFunRawV2(e,t,"text").then(function(e){return e&&v.I.Lib.isArray(e.result)&&0<e.result.length?e.result[0]:e})},t._innerNewWS=function(e,t){var i=this,r=(0,f.R)(),o=b.getJson(i,e,t,r);return i._resetErr(),!i._isValid()||b.isHttpServerInvalid(i)?v.D.Promise.reject({code:i._errorCode,message:i._errorString}):new v.D.Promise(function(t,r){var n;try{n=v.D.getWS(i._host,i._port,i._ssl)}catch(e){n&&(n.close(),n=null),v.D.Errors.Server_Invalid(i),r({code:i._errorCode,message:i._errorString})}n.onopen=function(){1==n.readyState?(n.onopen=null,n.send(o)):0==n.readyState&&D()(n.onopen,100)},n.onmessage=function(e){t(e&&e.data?e.data:""),n.close()},n.onerror=function(e){r(e),n.close()},n.onclose=function(e){n&&(n.onclose=null,n.onerror=null,n.onmessage=null,n=null)}})},t._innerFunRaw=function(e,t,r,n,o,c,i){var l,d=this,a="f/",s=!1;if(v.I.DWT.ConnectWithSocket)return this._innerSend(e,t,!1,c,i);if(b.isHttpServerInvalid(d))return!1;if(d._resetErr(),!d._isValid())return!1;if(r&&(s=!0,a="fa/"),e={method:"POST",url:r=[d.httpUrl,a,e].join(""),data:a=b.getJson(d,e,t,0),async:s,onSuccess:function(e,t,r){var n=!1;try{n=v.D.isString(e)&&"text/json"===r.getResponseHeader("content-type")?v.D.parse(e):e}catch(i){}l=n?(n.exception!==undefined&&n.description!==undefined?(d._errorCode=n.exception,d._errorString=n.description):d._resetErr(),o?n:n.result):(v.I.Lib.Errors.InvalidResultFormat(d),""),v.D.isFunction(c)&&c(l)},onError:function(){v.I.Lib.Errors.NetworkError(d),l="",v.D.isFunction(i)&&i()}},!s&&n)m.bIE?(e.dataType="arraybuffer",e.onSuccess=function(e,t,r){var n,i,o=!1;if(r.responseHeadersString&&(s=r.responseHeadersString,-1!=h()(s).call(s,"text/json")&&(o=!0)),s=r.responseData,d._resetErr(),l=!1,s&&(n=new Uint8Array(s),o?s=String.fromCharCode.apply(null,n):(l=new Blob([n],{type:d.__strHttpContentTypeFieldValue}),(i=new g.ArrayBuffer).append(n),l.md5=i.end())),!s||o){var a=!1,s=o?s:r.responseText;if(0<s.length){if("{"==s.charAt(0))try{a=v.D.parse(s),o=!0}catch(u){v.I.Lib.log(s)}o?l=a.exception===undefined||a.description===undefined||(d._errorCode=a.exception,d._errorString=a.description,!1):(n=new Uint8Array(s),l=new Blob([n],{type:d.__strHttpContentTypeFieldValue}),(i=new g.ArrayBuffer).append(n),l.md5=i.end())}}v.D.isFunction(c)&&c(l)}):(s||(e.dataType="text",e.contentType="text/plain; charset=x-user-defined",e.mimeType="text/plain; charset=x-user-defined"),e.onSuccess=function(e,t,r){var n,i;if(d._resetErr(),0<(i=(n=r.responseText).length)){var o,r=!1;if("{"==n.charAt(0))try{o=v.D.parse(n),r=!0}catch(u){v.I.Lib.log(n)}if(r)l=o.exception===undefined||o.description===undefined||(d._errorCode=o.exception,d._errorString=o.description,!1);else{for(var a=new Uint8Array(i),s=0;s<i;s++)a[s]=n.charCodeAt(s);l=new Blob([a],{type:d.__strHttpContentTypeFieldValue});r=new g.ArrayBuffer;r.append(a),l.md5=r.end()}}else l="";v.D.isFunction(c)&&c(l)});else if(s&&n)return e={method:"POST",body:a},m.bIE?e.dataType="arraybuffer":e.fetchRaw=!0,t=v.D.fetch(r,e),(t=m.bIE?t:t.then(function(e){var t=e.headers.get("content-type");return 0<=h()(t).call(t,"image/")||0<=h()(t).call(t,"application/octet-stream")?e.arrayBuffer():e.json()})).then(function(e){var t;d._resetErr(),e instanceof ArrayBuffer?(v.D.isFunction(c)&&c(e),e=null):v.D.isObject(e)?(e=e).exception!==undefined&&e.description!==undefined?(d._errorCode=e.exception,d._errorString=e.description,v.D.isFunction(i)&&i()):(t="",e.result&&(t=e.result),v.D.isFunction(c)&&c(t)):(v.I.Lib.Errors.NetworkError(d),v.D.isFunction(i)&&i())},function(e){v.I.Lib.Errors.NetworkError(d),v.D.isFunction(i)&&i()}),!0;return s||v.D.mix(e,{headers:{"X-Requested-With":!1}}),m.bFileSystem&&(e.crossDomain=!1),v.D.ajax(e),!!s||l},t._innerSend=function(e,t,r,n,i){var o=this._objWS,a=!1,s=!1,u=!1,c=!0;if("ActiveUI"==e?c=!1:u=b.isServerInvalid(this),u)return v.D.isFunction(i)&&i(),!0;v.D.isFunction(n)&&(s=n),v.D.isFunction(i)&&(a=i);u=(0,f.R)(),n=v.I.DWT.ConnectWithSocket||"SaveSelectedImagesToBytes"!=e&&"ConvertToBlob"!=e?(""==(n=this.GetCurrentDocumentName())&&(n=this._ImgManager.getWebViewer().GetDefaultFileName()),this.curCommand.push({cmd:e,cmdId:u,sFun:s,fFun:a,currentFileName:n}),b.sendData(o,b.getJson(this,e,t,u),!1,c)):(i=b.getJson(this,e,t,u),this._innerFunRaw(e,i,!0,!0,!0,s,a),!0);return n},t.__innerConvertToBlob=function(n,e,t,r,i,o,a,s){if(this._isMobileMode())return this.__innerConvertToBlobByMobile(n,e,t,i,o,a,s);var i=t,t=",",e=(v.D.isString(i)&&""!=i||(t=i=""),["[",n,',"',e.join(","),'"',t,i,"]"].join(""));return r?this._innerFunRaw("ConvertToBlob",e,!0,!0,!0,function(e){var t,r=b.getBlobTypeByImageType(n),r=new Blob([e],{type:r});v.I.DWT.IfAddMD5InUploadHeader?((t=new g.ArrayBuffer).append(e),v.D.isFunction(o)&&o(r,t.end(),s)):v.D.isFunction(o)&&o(r,"",s)},a):(t=this._innerFunRaw("ConvertToBlob",e,!1,!0,!1),i="",0==this.ErrorCode?(t&&"md5"in t&&(i=t.md5),o(t,i,s)):(a(),!1))},t.__innerConvertToBlobByMobile=function(e,t,r,n,i,o,a){var s,u,c=function c(e,t,r){v.D.isFunction(i)&&i(e,a)},l=[];if(e==v.I.DWT.EnumDWT_ImageType.IT_BMP)return s="bmp",this._mobileNotSupport("Convert to bmp",o);for(s=e==v.I.DWT.EnumDWT_ImageType.IT_JPG?"jpg":e==v.I.DWT.EnumDWT_ImageType.IT_PNG?"png":e==v.I.DWT.EnumDWT_ImageType.IT_TIF?"tiff":e==v.I.DWT.EnumDWT_ImageType.IT_PDF?"pdf":e==v.I.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",u=0;u<t.length;u++)l.push(this._ImgManager.convertServerIdToClientIndex(t[u]));return this._innerSendToMobile("SaveImage",(0,d.An)("",l,s,n,!0),0,c,o)},t.__innerConvertToBase64ByMobile=function(e,t,r,n,o,a){var i,s,u=this,c=function c(t,e,r){var n,i;if(t instanceof Uint8ClampedArray||t instanceof ArrayBuffer||t instanceof Uint8Array)return(n=new FileReader).onload=function(e){var e=e.target.result,t=v.D.isString(e)?e.split(","):[];2<=t.length&&(e=t[1]),v.D.isFunction(o)&&o({result:[e,e.length,n.md5]})},i="pdf"==e?"application/pdf":"image/"+e,void u._innerSendToMobile("GetMD5",(0,d.An)(t),0,function(e){n.md5=e,n.readAsDataURL(new Blob([t],{type:i}))},a);o({result:[t,t.length,r]})},l=[];if(r==v.I.DWT.EnumDWT_ImageType.IT_BMP)return i="bmp",u._mobileNotSupport("Convert to bmp",a);if(i=r==v.I.DWT.EnumDWT_ImageType.IT_JPG?"jpg":r==v.I.DWT.EnumDWT_ImageType.IT_PNG?"png":r==v.I.DWT.EnumDWT_ImageType.IT_TIF?"tiff":r==v.I.DWT.EnumDWT_ImageType.IT_PDF?"pdf":r==v.I.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",v.D.isArray(t))for(s=0;s<t.length;s++)l.push(u._ImgManager.convertServerIdToClientIndex(t[s]));return u._innerSendToMobile("SaveImage",(0,d.An)(e,l,i,n,!1),0,c,a)},t.__SaveLocalFileToBytes=function(e,t,r,n,i){return t?(this._innerFunRaw("SaveSelectedImagesToBytes",(0,d.dv)(0,0,e,r),t,!0,!0,function(e){v.D.isFunction(n)&&(e=new Blob([e]),n(e))},i),!0):(e=this._innerFunRaw("SaveSelectedImagesToBytes",(0,d.dv)(0,0,e,r),t,!0,!1),0==this.ErrorCode?n(e):(i(),!1))},t.__captureImage=function(e,t,r,n){return this.__LoadImageFromBytesV2(e,t,"",!0,r,n,0,0,"true")},t.__LoadImageFromBytes=function(e,t,r,n,i,o,a,s){return this.__LoadImageFromBytesV2(e,t,r,n,i,o,a,s,"false")},t.__LoadImageFromBytesV2=function(e,t,r,n,i,o,a,s,u){var c=this,l="LoadImageFromBytes",d=t||3,h=e.size||e.length,g=e.name,f=b.isServerInvalid(c),m=!0,_=0,p=1,I=(!isNaN(a)&&0<=a&&!isNaN(s)&&0<s?p=0:s=a=0,_=c.__GetLoadEventsNum(),d=["[",h,",",0,",",d,',"',r,'",',a,",",s,",",_,",",p,",",u,"]"].join(""),function I(){var e;return v.I.Lib.closeProgress(c,l),c.__bLoadingImage=!1,m&&0<=(e=c._ImgManager.getCurrentImageIndex())&&c.OnRefreshUI(e),v.D.isFunction(o)&&o(c._errorCode,c._errorString,g),!1});return!f&&(v.D.License.checkProductKey(c,{Core:!0})||v.D.License.checkProductKey(c,{Webcam:!0},!0))&&v.D.License.checkPDFProductKeyWhenNeeds(c,t)?0===h?(v.I.Lib.Errors.ImageFileLengthCannotZero(c),m=!1,I()):(b.setBtnCancelVisibleForProgress(c,!1),this._innerSendBlob(l,d,e,n,p,function(){var e;if((a+h==s||s<=0||isNaN(s))&&v.I.Lib.closeProgress(c,l),c.__bLoadingImage=!1,c._isBindViewer()&&(e=c._ImgManager.getCurrentImageIndex(),n&&0<=e&&c.OnRefreshUI(e)),v.D.isFunction(i))if(n)D()(function(){i(g)},30);else try{i(g)}catch(t){v.I.Lib.log(t.message)}return v.D.License.isLTS()&&v.I.DWT.lcvrf(c),!0},I)):(m=!1,I())},t._innerSendBlob=function(e,t,r,n,a,i,o){var s,u,c,l=this,d=l._objWS,h=!1;return b.isServerInvalid(l)?(v.D.isFunction(o)&&o(),!1):(v.D.isFunction(o)&&(h=o),n?(o=(0,f.R)(),l.curCommand.push({cmd:e,cmdId:o,sFun:function g(){v.D.isFunction(i)&&i()},fFun:h,currentFileName:r.currentFileName}),void b.sendData(d,b.getJson(l,e,t,o),r,!0)):(u=[],c="",!b.isHttpServerInvalid(l)&&(l._resetErr(),!!l._isValid()&&(n=[l.httpUrl,"f/",e].join(""),d=b.getJson(l,e,t,0),d=(d+="\r\n\r\n")+v.I.Lib.base64.encodeArray(r),v.D.mix(o={method:"POST",url:n,processData:!1,data:d,async:!1,onSuccess:function(e,t,r){var n=!1,i=!1;try{n=v.D.isString(e)&&"text/json"===r.getResponseHeader("content-type")?v.D.parse(e):e}catch(o){}n!==undefined&&null!==n&&(n.exception!==undefined&&n.description!==undefined?(l._errorCode=n.exception,l._errorString=n.description):l._resetErr(),(s=n.result)&&v.D.isArray(s)&&1<=s.length&&(a?(r=s[0])&&v.D.isObject(r)&&(c=r.ids,v.D.isArray(r.metaData)&&(u=r.metaData),i=!0):(c=s.join(","),u=[],i=!0))),i||(v.I.Lib.Errors.InvalidResultFormat(l),s="",u=[])},onError:function(){v.I.Lib.Errors.NetworkError(l),s="",u=[]}},{headers:{"X-Requested-With":!1}}),m.bFileSystem&&(o.crossDomain=!1),v.D.ajax(o),0==l._errorCode?(0<c.length&&l._OnBitmapChanged(["c2",c,1,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count(),u],null,r.currentFileName),v.D.isFunction(i)&&i()):v.D.isFunction(h)&&h(),s))))},t.GetImageAsync=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return v.D.Promise.reject({code:o._errorCode,message:o._errorString});e=s()(e);if(isNaN(e))return v.D.Errors.InvalidIndex(o),v.D.Promise.reject({code:o._errorCode,message:o._errorString});if(e<0||e>=o._ImgManager.count())return v.D.Errors.IndexOutOfRange(o),v.D.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._mobileNotSupportAsync("GetImageAsync");if(b.isHttpServerInvalid(o))return v.D.Promise.reject({code:o._errorCode,message:o._errorString});var a,e=o._ImgManager.convertClientIndexToServerId(e);return-1==e?(v.D.Errors.IndexOutOfRange(o),v.D.Promise.reject({code:o._errorCode,message:o._errorString})):(v.D.isNumber(t)?a=(0,d.dv)(e,t):v.D.isNumber(r)&&v.D.isNumber(n)?a=(0,d.dv)(e,r,n):v.D.isNumber(i)&&(a=(0,d.dv)(e,-1,-1,i)),o._innerFunRawV2("GetImageByIndex",a,"blob"))},t.GetImageInfoAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return v.D.Promise.reject({code:t._errorCode,message:t._errorString});e=s()(e);if(isNaN(e))return v.D.Errors.InvalidIndex(t),v.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return v.D.Errors.IndexOutOfRange(t),v.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._mobileNotSupportAsync("GetImageAsync");e=t._ImgManager.convertClientIndexToServerId(e);return-1==e?(v.D.Errors.IndexOutOfRange(t),v.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageInfo",(0,d.dv)(e)).then(function(e){var t=0,r=0,n=e;return v.I.Lib.isArray(e)&&1==e.length&&(n=e[0]),v.I.Lib.isString(n)&&(e=n.split(","),t=s()(e[0]),r=s()(e[1])),{width:t,height:r}})},t._innerActiveUI=function(e,t){var r=v.D.detect.ssl;if(this._blts){var n=this,i=v.I.DWT.li({instanceMode:v.I.DWT.EnumInstance.dwt_desktop});if(!v.I.DWT.lisValidID(i))return void(n=null);n._innerSend("ActiveUI",(0,d.dv)(v.I.Lib.env.WSVersion,v.I.Lib.env.WSSession,1,i,r),!1,e,t),n=null}else this._innerSend("ActiveUI",(0,d.dv)(v.I.Lib.env.WSVersion,v.I.Lib.env.WSSession,1,"",r),!1,e,t);return!0}},2246:function(e,t,r){r.r(t);var t=r(7711),a=r.n(t),s=r(1695),u=s.D.html5.Funs,n=u.DEF;s.D.html5.STwainStyle=function(e){this._parent=e,n(e=this,"width",{get:function(){return this._parent._width},set:function(e){this.SetSize(e,!1)}}),n(e,"height",{get:function(){return this._parent._height},set:function(e){this.SetSize(!1,e)}})},s.D.html5.STwainStyle.prototype.SetSize=function(e,t){var r,n,i,o;r=this._parent,e=e,t=t,o=i=!1,r._isBindViewer()&&(!(i=s.D.isString(e)&&0<e.length&&"%"===e.charAt(e.length-1)?e:i)&&e&&(n=a()(e))&&(i=n+"px"),!(o=s.D.isString(t)&&0<t.length&&"%"===t.charAt(t.length-1)?t:o)&&t&&(n=a()(t))&&(o=n+"px"),i&&(r._width=i),o&&(r._height=o),u.changeImageUISize(r,i,o))}},4666:function(V,e,t){t.r(e);var e=t(5683),m=t.n(e),e=t(7711),_=t.n(e),p=t(1695),A=t(1188),a=t(8420),s=t(7344),e=t(9927),l=t.n(e),e=t(7682),d=t.n(e),e=t(9356),B=t.n(e),o=t(4845),O=function(){function e(){(0,a.Z)(this,e),(0,o.Z)(this,"bIsDirty",!1),(0,o.Z)(this,"imageWidth",0),(0,o.Z)(this,"imageHeight",0),(0,o.Z)(this,"iImageControlWidth",0),(0,o.Z)(this,"iImageControlHeight",0),(0,o.Z)(this,"imageUrl",""),(0,o.Z)(this,"minImageUrl",""),(0,o.Z)(this,"uuid",-1),(0,o.Z)(this,"serverId",-1),(0,o.Z)(this,"aryOverlayRectangleData",[]),(0,o.Z)(this,"ticks",d()())}return(0,s.Z)(e,[{key:"Clear",value:function(){this.imageUrl="",this.minImageUrl="",this.serverId=-1,this.aryOverlayRectangleData=[]}}]),e}(),u=(0,s.Z)(function u(e,t,r){(0,a.Z)(this,u),this.Url=e,this.Width=t,this.Height=r}),e=t(699),g=t.n(e),e=t(9798),c=t.n(e),e=t(4579),R=t.n(e),U=function(){function o(e,t,r,n){(0,a.Z)(this,o);var i=1;this._webViewer=e,this.myViewer=this._webViewer.myViewer,this.element=t,p.D.isUndefined(r)||(i="left"==r?-1:1),p.D.isUndefined(n)&&(n=!1),this.myCustomElemet=this.myViewer.createCustomElement(t,i,n),this.myCustomElemet&&(this.hide(),this.bDispose=!1)}return(0,s.Z)(o,[{key:"show",value:function(){return this.myCustomElemet?(this.myCustomElemet.show(),!0):(this.bDispose?p.D.Errors.CustomElementDispose(this._webViewer._stwain):p.D.Errors.CustomElementNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.myCustomElemet?(this.myCustomElemet.hide(),!0):(this.bDispose?p.D.Errors.CustomElementDispose(this._webViewer._stwain):p.D.Errors.CustomElementNotExist(this._webViewer._stwain),!1)}},{key:"dispose",value:function(){var e=!1;return!!this.bDispose||(this.myCustomElemet?(e=this.myCustomElemet.dispose())&&(this.bDispose=!0,this._webViewer._customElement=undefined,this.myCustomElemet=undefined,this.myViewer=null,this.element=null):e=this.bDispose=!0,e)}}]),o}(),e=(p.D.UI.CustomElement=U,t(373)),e=t.n(e);function G(e,t){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}var r=p.D.html5.Funs.DEF,H=new(e()),j=function(){function r(e,t){(0,a.Z)(this,r),G(this,H);this._ImgManager=t,this._stwain=t._stwain,this._webViewer=e,this._elements=[],function(e,t,r){if(t.has(e))return r;throw new TypeError("attempted to get private field on non-instance")}(this,H,z).call(this)}return(0,s.Z)(r,[{key:"dispose",value:function(){this._stwain=null,this._ImgManager=null,this._webViewer&&(this._webViewer=null),this._elements=[]}},{key:"next",value:function(){return this._webViewer.next()}},{key:"previous",value:function(){return this._webViewer.previous()}},{key:"first",value:function(){return this._webViewer.first()}},{key:"last",value:function(){return this._webViewer.last()}},{key:"gotoPage",value:function(e){return this._webViewer.go(e)}},{key:"render",value:function(){return this._webViewer.render()}},{key:"createDocumentEditor",value:function(e){return this._stwain._isMobileMode()?this._webViewer.createDocumentEditor(e):(p.D.Errors.ServiceNotSupport(this._stwain,"createDocumentEditor"),null)}},{key:"createImageEditor",value:function(e){return this._webViewer.createImageEditor(e)}},{key:"createThumbnailViewer",value:function(e){return this._webViewer.createThumbnailViewer(e)}},{key:"getUISettings",value:function(){return this._webViewer.getUISettings()}},{key:"resetUISettings",value:function(){return this._webViewer.resetUISettings()}},{key:"updateUISettings",value:function(e){return this._webViewer.updateUISettings(e)}},{key:"updateCheckboxStyle",value:function(e){return this._webViewer.UpdateCheckboxStyle(e)}},{key:"updatePageNumberStyle",value:function(e){return this._webViewer.UpdatePageNumberStyle(e)}},{key:"clearSelectedAreas",value:function(){return this._webViewer.clearSelectedAreas()}},{key:"setSelectedAreas",value:function(e){return this._webViewer.setSelectedAreas(e)}},{key:"createCustomElement",value:function(e,t,r){return this._webViewer.createCustomElement(e,t,r)}},{key:"fitWindow",value:function(e){return this._webViewer.SetFitType(e)}},{key:"setButtonClass",value:function(e,t){return this._webViewer.setButtonClass(e,t)}},{key:"setViewMode",value:function(e,t){return this._webViewer.SetViewMode(e,t)}},{key:"bind",value:function(e,t){var r,n,i;return p.D.isShadowRoot(e)&&(r=document.createElement("div"),e.appendChild(r),this._elements.push(r),e=r),p.D.isDOM(e)&&((r=p.D.getShadowRoot(e))?(n=p.I.Lib.timestamp,(i=document.createElement("style")).innerHTML=['@import url("',p.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",n,'")'].join(""),r.appendChild(i),this._elements.push(i)):r=!1,e.id&&""!=e.id||(e.id=["dwt_",p.D.getRandom()].join(""))),t?this._webViewer.BindTemplate(e,t):this._webViewer.BindView(e)}},{key:"createTemplate",value:function(e,t){return this._stwain._isMobileMode()?this._webViewer.CreateTemplate(e,t):(p.D.Errors.ServiceNotSupport(this._stwain,"createTemplate"),null)}},{key:"show",value:function(){return this._webViewer.show()}},{key:"hide",value:function(){return this._webViewer.hide()}},{key:"unbind",value:function(){return this._webViewer._stwain.Template&&this._stwain.Template._documentTemplate.UnbindView(),p.D.each(this._elements,function(e){e.parentNode&&e.parentNode.removeChild(e)}),this._webViewer.UnbindView()}},{key:"on",value:function(e,t){this._webViewer.on(e,t)}},{key:"off",value:function(e,t){this._webViewer.off(e,t)}}]),r}();function z(){var t=this;r(t,"width",{get:function(){return t._webViewer.GetWidth()},set:function(e){return t._webViewer.SetWidth(e)}}),r(t,"height",{get:function(){return t._webViewer.GetHeight()},set:function(e){return t._webViewer.SetHeight(e)}}),r(t,"idPostfix",{get:function(){return t._webViewer.GetIdPostfix()}}),r(t,"background",{get:function(){return t._webViewer.GetBackground()},set:function(e){return t._webViewer.SetBackground(e)}}),r(t,"border",{get:function(){return t._webViewer.GetBorder()},set:function(e){return t._webViewer.SetBorder(e)}}),r(t,"innerBorder",{get:function(){return t._webViewer.GetInnerBorder()},set:function(e){return t._webViewer.SetInnerBorder(e)}}),r(t,"selectedPageBorder",{get:function(){return t._webViewer.GetSelectedPageBorder()},set:function(e){return t._webViewer.SetSelectedPageBorder(e)}}),r(t,"selectedPageBackground",{get:function(){return t._webViewer.GetSelectedPageBackground()},set:function(e){return t._webViewer.SetSelectedPageBackground(e)}}),r(t,"showPageNumber",{get:function(){return t._webViewer.GetShowPageNumber()},set:function(e){return t._webViewer.SetShowPageNumber(e)}}),r(t,"selectedAreaBorderColor",{get:function(){return t._webViewer.GetSelectedAreaBorderColor()},set:function(e){return t._webViewer.SetSelectedAreaBorderColor(e)}}),r(t,"selectionRectAspectRatio",{get:function(){return t._webViewer.GetSelectionRectAspectRatio()},set:function(e){return t._webViewer.SetSelectionRectAspectRatio(e)}}),r(t,"cursor",{get:function(){return t._webViewer.GetCursor()},set:function(e){return t._webViewer.SetCursor(e)}}),r(t,"ifAutoScroll",{get:function(){return t._webViewer.GetIfAutoScroll()},set:function(e){return t._webViewer.SetIfAutoScroll(e)}}),r(t,"pageMargin",{get:function(){return t._webViewer.GetPageMargin()},set:function(e){return t._webViewer.SetPageMargin(e)}}),r(t,"zoom",{get:function(){return t._webViewer.GetZoom()},set:function(e){return t._webViewer.SetZoom(e)}}),r(t,"singlePageMode",{get:function(){return t._webViewer.GetIfSinglePageMode()},set:function(e){return t._webViewer.SetIfSinglePageMode(e)}}),r(t,"acceptDrop",{get:function(){return t._webViewer.GetAcceptDrop()},set:function(e){return t._webViewer.SetAcceptDrop(e)}}),r(t,"allowSlide",{get:function(){return t._webViewer.GetAllowSlide()},set:function(e){return t._webViewer.SetAllowSlide(e)}}),r(t,"autoChangeIndex",{get:function(){return t._webViewer.GetAutoChangeIndex()},set:function(e){return t._webViewer.SetAutoChangeIndex(e)}}),r(t,"showCheckbox",{get:function(){return t._webViewer.GetShowCheckbox()},set:function(e){return t._webViewer.SetShowCheckbox(e)}}),r(t,"selectionMode",{get:function(){return t._webViewer.GetMultiSelectMode()},set:function(e){return t._webViewer.SetMultiSelectMode(e)}}),r(t,"allowPageDragging",{get:function(){return t._webViewer.GetAllowPageDragging()},set:function(e){return t._webViewer.SetAllowPageDragging(e)}})}p.D.UI.DWTViewer=j;var h="dynamsoft-default-document",n="rgb(255, 255, 255)",i="transparent",Z="1px solid rgb(238, 238, 238)",J="rgb(239, 246, 253)",X="1px solid rgb(238, 238, 238)",Y="rgb(251, 236, 136)",K="1px solid rgb(125,162,206)",Q="rgb(199, 222, 252)",f={visibility:"hidden",width:"24px",height:"24px",background:"#ffffff",borderWidth:"2px",borderColor:"#000000",checkMarkColor:"#000000",checkMarkLineWidth:"2px",borderRadius:0,opacity:.5,left:0,top:0,right:"",bottom:"",translateX:"",translateY:""},I={visibility:"hidden",width:"24px",height:"24px",background:"#ffffff",borderWidth:"1px",borderColor:"#a79898",borderRadius:"50%",opacity:.5,color:"#000000",fontFamily:"sans-serif",fontSize:12,left:"",top:"",right:0,bottom:0,translateX:"",translateY:""},q="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjQuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAgMzAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0NDQ0NDQzt9Cgkuc3Qxe2ZpbGw6I0YwRUZGNDt9Cjwvc3R5bGU+CjxnIGlkPSJHcm91cF8xMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOS42NjggLTE3OC41ODkpIj4KCTxnIGlkPSJSZWN0YW5nbGVfMTciPgoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01OTgsMzQ3LjloLTQuMnYtMmgyLjJ2LTEuOGgyVjM0Ny45eiBNNTg3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTU3NS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01NjMuOSwzNDcuOQoJCQloLTZ2LTJoNlYzNDcuOXogTTU1MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01MzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNTI3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTUxNS45LDM0Ny45aC02di0yaDYKCQkJVjM0Ny45eiBNNTAzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQ5MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00NzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDY3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXoKCQkJIE00NTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDQzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQzMS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00MTkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDA3LjksMzQ3LjkKCQkJaC02di0yaDZWMzQ3Ljl6IE0zOTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNMzgzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTM3OC42LDM0MS4xaC0ydi02aDJWMzQxLjF6IE01OTgsMzM4LjFoLTJ2LTZoMlYzMzguMXoKCQkJIE0zNzguNiwzMjkuMWgtMnYtNmgyVjMyOS4xeiBNNTk4LDMyNi4xaC0ydi02aDJWMzI2LjF6IE0zNzguNiwzMTcuMWgtMnYtNmgyVjMxNy4xeiBNNTk4LDMxNC4xaC0ydi02aDJWMzE0LjF6IE0zNzguNiwzMDUuMWgtMgoJCQl2LTZoMlYzMDUuMXogTTU5OCwzMDIuMWgtMnYtNmgyVjMwMi4xeiBNMzc4LjYsMjkzLjFoLTJ2LTZoMlYyOTMuMXogTTU5OCwyOTAuMWgtMnYtNmgyVjI5MC4xeiBNMzc4LjYsMjgxLjFoLTJ2LTZoMlYyODEuMXoKCQkJIE01OTgsMjc4LjFoLTJ2LTZoMlYyNzguMXogTTM3OC42LDI2OS4xaC0ydi02aDJWMjY5LjF6IE01OTgsMjY2LjFoLTJ2LTZoMlYyNjYuMXogTTM3OC42LDI1Ny4xaC0ydi02aDJWMjU3LjF6IE01OTgsMjU0LjFoLTJ2LTYKCQkJaDJWMjU0LjF6IE0zNzguNiwyNDUuMWgtMnYtNmgyVjI0NS4xeiBNNTk4LDI0Mi4xaC0ydi02aDJWMjQyLjF6IE0zNzguNiwyMzMuMWgtMnYtNmgyVjIzMy4xeiBNNTk4LDIzMC4xaC0ydi02aDJWMjMwLjF6CgkJCSBNMzc4LjYsMjIxLjFoLTJ2LTYuN2g3djJoLTVWMjIxLjF6IE01OTgsMjE4LjFoLTJ2LTEuNmgtMi40di0yaDQuNFYyMTguMXogTTU4Ny42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NzUuNiwyMTYuNWgtNnYtMmg2CgkJCVYyMTYuNXogTTU2My42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNTM5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUyNy42LDIxNi41aC02di0yaDZWMjE2LjV6CgkJCSBNNTE1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUwMy42LDIxNi41aC02di0yaDZWMjE2LjV6IE00OTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDc5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ2Ny42LDIxNi41CgkJCWgtNnYtMmg2VjIxNi41eiBNNDU1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ0My42LDIxNi41aC02di0yaDZWMjE2LjV6IE00MzEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDE5LjYsMjE2LjVoLTZ2LTJoNgoJCQlWMjE2LjV6IE00MDcuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNMzk1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXoiLz4KCTwvZz4KCTxnIGlkPSJGaWxlcy1Gb2xkZXJzX0NvbW1vbi1GaWxlc19jb21tb24tZmlsZS10ZXh0LWFkZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4zNjIgMi4xMzkpIj4KCQk8ZyBpZD0iR3JvdXBfNDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Ny44MDYgMjAxLjk1KSI+CgkJCTxnIGlkPSJjb21tb24tZmlsZS10ZXh0LWFkZCI+CgkJCQk8ZyBpZD0iT3ZhbF8xOCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwNy4yLDExOC40TDEwNy4yLDExOC40TDEwNy4yLDExOC40Yy0xMi4zLDAtMjIuMy0xMC0yMi4zLTIyLjNjMC0xMi4zLDEwLTIyLjMsMjIuMy0yMi4zYzAsMCwwLDAsMCwwCgkJCQkJCWMxMi4zLDAsMjIuMywxMCwyMi4zLDIyLjNjMCw1LjktMi4zLDExLjUtNi41LDE1LjdDMTE4LjgsMTE2LjEsMTEzLjIsMTE4LjQsMTA3LjIsMTE4LjR6IE0xMDcuMiw3NS45CgkJCQkJCUMxMDcuMiw3NS45LDEwNy4yLDc1LjksMTA3LjIsNzUuOUM5Ni4xLDc1LjksODcsODUsODcsOTYuMmMwLDExLjIsOS4xLDIwLjMsMjAuMywyMC4zbDAsMXYtMWM1LjQsMCwxMC41LTIuMSwxNC4zLTUuOQoJCQkJCQljMy44LTMuOCw1LjktOC45LDUuOS0xNC4zQzEyNy41LDg1LDExOC40LDc1LjksMTA3LjIsNzUuOXoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzMiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDcuMiwxMDcuOGMtMC42LDAtMS0wLjQtMS0xVjg1LjVjMC0wLjYsMC40LTEsMS0xczEsMC40LDEsMXYyMS4zQzEwOC4yLDEwNy4zLDEwNy44LDEwNy44LDEwNy4yLDEwNy44egoJCQkJCQkiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzQiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMTcuOSw5Ny4ySDk2LjZjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTMTE4LjQsOTcuMiwxMTcuOSw5Ny4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzNSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTk0LjgsNjUuM0g2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDMzLjdjMC42LDAsMSwwLjQsMSwxUzk1LjQsNjUuMyw5NC44LDY1LjN6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCw3NS45SDYxLjFjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTODMsNzUuOSw4Mi40LDc1Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM3Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODYsNTQuNkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xSDg2YzAuNiwwLDEsMC40LDEsMVM4Ni41LDU0LjYsODYsNTQuNnoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzgiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03NS4zLDg2LjVINjEuMWMtMC42LDAtMS0wLjQtMS0xczAuNC0xLDEtMWgxNC4yYzAuNiwwLDEsMC40LDEsMVM3NS45LDg2LjUsNzUuMyw4Ni41eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzOSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTc1LjMsOTcuMkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDE0LjJjMC42LDAsMSwwLjQsMSwxUzc1LjksOTcuMiw3NS4zLDk3LjJ6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTQwIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCwxMTguNEg1MC41Yy0yLjUsMC00LjUtMi00LjUtNC41VjM5LjRjMC0yLjUsMi00LjUsNC41LTQuNWg0Ny4xYzEuMiwwLDIuNCwwLjUsMy4yLDEuM0wxMTQsNDkuNAoJCQkJCQljMC45LDAuOSwxLjMsMiwxLjMsMy4ydjExLjdjMCwwLjYtMC40LDEtMSwxcy0xLTAuNC0xLTFWNTIuNmMwLTAuNy0wLjMtMS4zLTAuNy0xLjhMOTkuNCwzNy42Yy0wLjUtMC41LTEuMS0wLjctMS44LTAuN0g1MC41CgkJCQkJCWMtMS40LDAtMi41LDEuMS0yLjUsMi41djc0LjRjMCwxLjQsMS4xLDIuNSwyLjUsMi41aDMxLjljMC42LDAsMSwwLjQsMSwxUzgzLDExOC40LDgyLjQsMTE4LjR6Ii8+CgkJCQk8L2c+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+Cgk8ZyBpZD0iQXJyb3dzLURpYWdyYW1zX0RpYWdyYW1zX2RpYWdyYW0tZGFzaC1kb3duLWZhc3QiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yIDQpIj4KCQk8ZyBpZD0iR3JvdXBfMTY1Ij4KCQkJPGcgaWQ9IkxpZ2h0XzE2NSI+CgkJCQk8ZyBpZD0iU2hhcGVfNTM5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjEsNDQzbC00LjItNC4ybDEuNC0xLjRsNC4yLDQuMkw0ODQuMSw0NDN6IE00ODkuNyw0NDIuN2wtMS40LTEuNGw0LjItNC4ybDEuNCwxLjRMNDg5LjcsNDQyLjd6CgkJCQkJCSBNNDc1LjYsNDM0LjVsLTQuMi00LjJsMS40LTEuNGw0LjIsNC4yTDQ3NS42LDQzNC41eiBNNDk4LjIsNDM0LjJsLTEuNC0xLjRsMy45LTMuOWwxLjQsMS40TDQ5OC4yLDQzNC4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQwMi43LDM0Ny42djQuMiIvPgoJCQkJCTxyZWN0IHg9IjQwMS43IiB5PSIzNDcuNiIgY2xhc3M9InN0MCIgd2lkdGg9IjIiIGhlaWdodD0iNC4yIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQxIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAyLjcsMzYwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDAxLjciIHk9IjM2MC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQyIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAzLjMsMzc3LjRjMC44LDIuOCwyLjIsNS4zLDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDA1LjEsMzgzLjNjLTEuMy0xLjctMi4yLTMuNi0yLjgtNS43bDEuOS0wLjVjMC41LDEuOCwxLjMsMy41LDIuNSw1TDQwNS4xLDM4My4zeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQxNC44LDM4OWMyLjgsMC42LDUuNywwLjksOC41LDAuNyIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MjAuNywzOTAuN2MtMi4xLDAtNC4xLTAuMy02LjItMC43bDAuNC0xLjljMS45LDAuNCwzLjgsMC43LDUuNywwLjdMNDIwLjcsMzkwLjd6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ0Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDMxLjgsMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDMxLjgiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ1Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQ4LjksMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDQ4LjkiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDY2LDM4OS42YzIuOS0wLjIsNS43LDAsOC41LDAuNiIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NzEuOCwzOTAuOGMtMS45LTAuMy0zLjgtMC4zLTUuOC0wLjJsLTAuMS0yYzIuMS0wLjEsNC4yLTAuMSw2LjIsMC4yTDQ3MS44LDM5MC44eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0NyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ4MS43LDM5NC41YzIsMiwzLjUsNC41LDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjIsMzk5LjljLTAuOC0xLjctMS45LTMuMy0zLjItNC42bDEuNC0xLjRjMS41LDEuNSwyLjcsMy4zLDMuNiw1LjJMNDg0LjIsMzk5Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ4Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDEwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQxMC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDI3LjR2NC4yIi8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQyNy40IiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI0LjIiLz4KCQkJCTwvZz4KCQkJPC9nPgoJCTwvZz4KCTwvZz4KPC9nPgo8L3N2Zz4K) center /auto no-repeat,#F0EFF4",$=["click","onExitFunc","onMultiSelectionFunc","onAddDocumentFunc","onMultiSelectionCencelFunc","onAllSelectionFunc","onCancelAllSelectionFunc","onSaveFunc","onUploadFunc","bufferChanged","onRemoveSelectedFunc"],ee={toolbars:{topMenu:!0,bottomMenu:!0},groups:{viewMenu:!1,global:!1,viewChange:!1,viewerCorner:!1,pager:!1,myMainTopGroup:{visibility:!0,location:"topMenu",sequence:1},myMainBottomGroup:{visibility:!0,location:"bottomMenu",sequence:1},myMultiSelectionTopGroup:{visibility:!0,location:"topMenu",sequence:2},myMultiSelectionBottomGroup:{visibility:!0,location:"bottomMenu",sequence:2},myGroup3:{visibility:!0,location:"header",sequence:1}},cropStyle:{cropMask:!1,cropBar:!1},buttonResize:{ifResize:!0,maxSize:18,minSize:12},buttons:{exit:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onExitFunc"},fileName:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre1 ds-dwt-ui-icon-color",sequence:2,text:""},addDocument:{visibility:!0,location:"myMainBottomGroup",iconClass:"ds-dwt-ui-icon-addImageFromCamera  ds-dwt-ui-icon-color",sequence:1,onButtonClick:"onAddDocumentFunc"},multiSelection:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dwt-ui-icon-selectAll ds-dwt-ui-icon-color ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onMultiSelectionFunc"},cancel:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onMultiSelectionCencelFunc"},selectCount:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre2 ds-dwt-ui-icon-color",sequence:2,text:"selected count: "},selectAll:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-unselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:2,onButtonClick:"onAllSelectionFunc"},cancelAllSelect:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-a-allselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onCancelAllSelectionFunc"},save:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-icon-saveImage ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onSaveFunc"},upload:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-a-uploadfromserver ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onUploadFunc"},removeSelected:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-delete ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onRemoveSelectedFunc"}},content:{besides:{visibility:!1,sequence:4},thumbnail:{backgroundColor:"#fff"}},canvasConfig:{columns:2,rows:2,background:n,pageBackground:"rgb(255,255,255)",allowPageDragging:!0,checkbox:{visibility:f.visibility,width:"30px",height:"30px",background:f.background,borderWidth:"3px",borderColor:"#FE8E14",checkMarkColor:"#FE8E14",checkMarkLineWidth:"3px",borderRadius:f.borderRadius,opacity:1,left:f.left,top:f.top,right:f.right,bottom:f.bottom,translateX:f.translateX,translateY:f.translateY},pageNumber:{visibility:"visible",width:"36px",height:"36px",background:I.background,borderWidth:I.borderWidth,borderColor:I.borderColor,borderRadius:I.borderRadius,opacity:1,color:I.color,fontFamily:I.fontFamily,fontSize:18,left:I.left,top:I.top,right:I.right,bottom:I.bottom,translateX:I.translateX,translateY:I.translateY}},thumbnail:{showThumbnailControl:!1,selectedBorderColor:"#7DA2CE",selectedBackgroundColor:"rgb(199, 222, 252)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)"}},te=function(){function i(e,t,r,n){(0,a.Z)(this,i);this._ImgManager=t,this._stwain=t._stwain,this._webViewer=e,this._template=r,this._documentConfiguration=n}return(0,s.Z)(i,[{key:"BindView",value:function(e){var t=this,e=e&&"DIV"==e.nodeName?e:document.getElementById(e);p.D.isUndefined(e)||p.D.isNull(e)?(t.newContainer=document.createElement("div"),document.body.appendChild(t.newContainer),document.body.insertBefore(t.newContainer,document.body.firstElementChild),t.newContainer.style.width="100%",t.newContainer.style.height="100%",t.newContainer.style.position="fixed",t.newContainer.style.left="0px",t.newContainer.style.top="0px",t.bFullScreen=!0):(t.newContainer=e,t.bFullScreen=!1),t._webViewer.BindView(t.newContainer),t._webViewer.updateUISettings(ee)}},{key:"initView",value:function(){var e=this,t=document.createElement("div"),r=(t.id="btnCapture"+e._webViewer.myViewer.postfix,t.className="ds-dwt-ui-icon-addImageFromCamera dynamsoft-dwt-btnCapture",t.onclick=function(){e._webViewer.myViewer.emit("onAddDocumentFunc")},0==e._webViewer.GetHowManyImagesInBuffer()&&e._webViewer.SetBackground(q),document.getElementById("WebViewer"+e._webViewer.myViewer.postfix)),t=(r&&r.appendChild(t),e.setMultiSelectMode(!1),e.__bindButtonEvents(),e._webViewer.SetCursor("pointer"),e.DWTCustomWrapper=document.createElement("div"),p.I.Lib.env.isMobileViewer()),r=p.I.Lib.env.isPadViewer(),t=(t||r?e.customElement=e._webViewer.createCustomElement(e.DWTCustomWrapper,"right",!0):(e.DWTCustomWrapper.style.height="100%",e.DWTCustomWrapper.style.width="20%",e.customElement=e._webViewer.createCustomElement(e.DWTCustomWrapper,"right",!1)),document.getElementById("fileName"+e._webViewer.myViewer.postfix)),r=(t&&(t.style.width="80%",t.style.whiteSpace="nowrap"),document.getElementById("selectCount"+e._webViewer.myViewer.postfix)),t=(r&&(r.style.width="200px",r.style.whiteSpace="nowrap"),document.getElementById("bottomMenu"+e._webViewer.myViewer.postfix));t&&(t.style.border="0",t.style.display="none")}},{key:"UnbindView",value:function(){var e=this,t=(e._unbindButtonEvents(),e._documentEditor&&e._documentEditor.dispose(),document.getElementById("btnCapture"+e._webViewer.myViewer.postfix));return t&&(t.onclick=function(){}),e.newContainer&&1==e.bFullScreen&&this.newContainer.parentNode&&0<e.newContainer.childNodes.length&&e.newContainer.parentNode.removeChild(e.newContainer),e.newContainer="",!(e.DWTCustomWrapper="")}},{key:"setMultiSelectMode",value:function(e){var t=document.getElementById("myMainTopGroup"+this._webViewer.GetIdPostfix()),r=document.getElementById("myMainBottomGroup"+this._webViewer.GetIdPostfix()),n=document.getElementById("myMultiSelectionTopGroup"+this._webViewer.GetIdPostfix()),i=document.getElementById("myMultiSelectionBottomGroup"+this._webViewer.GetIdPostfix());e?(t.style.display="none",r.style.display="none",n.style.display="",i.style.display=""):(t.style.display="",r.style.display="",n.style.display="none",i.style.display="none")}},{key:"__bindButtonEvents",value:function(){var n=this;p.I.Lib.each($,function(r){n._webViewer.on(r,function(e,t){n[r](e,t)})})}},{key:"_unbindButtonEvents",value:function(){var t=this;p.D.each($,function(e){t._webViewer.off(e)})}},{key:"bufferChanged",value:function(e){var t=this,r=("shift"!=e.action&&"remove"!=e.action&&"add"!=e.action||(r=document.getElementById("selectCount"+t._webViewer.GetIdPostfix()),e.selectedIds&&r&&(r.innerText="selected count: "+e.selectedIds.length),e.selectedIds&&e.selectedIds.length==t._stwain.HowManyImagesInBuffer&&0!=t._stwain.HowManyImagesInBuffer?t.setSelectAllButtonEnable(!1):t.setSelectAllButtonEnable(!0)),e.selectedIds&&0==e.selectedIds.length?(t._webViewer.setButtonClass("save","ds-dwt-ui-icon-color-grey"),t._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color-grey"),t._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color-grey")):(t._webViewer.setButtonClass("save","ds-dwt-ui-icon-color"),t._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color"),t._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color")),document.getElementById("btnCapture"+t._webViewer.myViewer.postfix));r&&""==r.style.display&&(p.D.isUndefined(e.imageIds)||e.imageIds&&0==e.imageIds.length)?t._webViewer.SetBackground(q):t._webViewer.SetBackground(n)}},{key:"Dynamsoft_DocumentTemplate_OnVideoClosed",value:function(){this._webViewer.OpenFile(this._webViewer.currentFileName)}},{key:"click",value:function(e){-1!=e.index&&this._webViewer.GetMultiSelectMode()==p.I.DWT.EnumDWT_SelectionMode.Single&&0<this._stwain.HowManyImagesInBuffer&&(e=this._webViewer.createDocumentEditor(this._documentConfiguration))&&e.show()}},{key:"onExitFunc",value:function(){this._template.onExitFunc()}},{key:"ifShowDocumentTemplate",value:function(e){this.newContainer&&(this.newContainer.style.display=e?"":"none")}},{key:"setTemplateTitle",value:function(e){var t=p.I.Lib.env.isMobileViewer(),r=document.getElementById("fileName"+this._webViewer.myViewer.postfix);r&&(t&&26<e.length?r.innerText=e.substring(0,10)+"..."+e.substring(e.length-13,e.length):!t&&100<e.length?r.innerText=e.substring(0,80)+"..."+e.substring(e.length-17,e.length):r.innerText=e)}},{key:"onMultiSelectionFunc",value:function(){this._MultiSelectionInner([])}},{key:"_MultiSelectionInner",value:function(e){var t=this,r=document.getElementById("bottomMenu"+t._webViewer.myViewer.postfix);r&&(r.style.display=""),t._stwain.SelectImages(e),t.setMultiSelectMode(!0),t._webViewer.GetShowCheckbox()||(document.getElementById("selectCount"+t._webViewer.GetIdPostfix()).innerText="selected count: "+t._stwain.SelectedImagesIndices.length,t._webViewer.SetShowCheckbox(!0),t._stwain.SelectedImagesIndices.length==t._stwain.HowManyImagesInBuffer&&0!=t._stwain.HowManyImagesInBuffer?t.setSelectAllButtonEnable(!1):t.setSelectAllButtonEnable(!0),(r=document.getElementById("btnCapture"+t._webViewer.myViewer.postfix))&&(r.style.display="none",t._webViewer.SetBackground(n)),t._template&&!p.I.Lib.isFunction(t._template.onSaveFunc)&&(e=document.getElementById("save"+t._webViewer.myViewer.postfix))&&(e.style.display="none"),t._template&&!p.I.Lib.isFunction(t._template.onUploadFunc)&&(r=document.getElementById("upload"+t._webViewer.myViewer.postfix))&&(r.style.display="none"))}},{key:"onAddDocumentFunc",value:function(){this._template.onAddDocumentFunc()}},{key:"onMultiSelectionCencelFunc",value:function(){this.setMultiSelectMode(!1),this._webViewer.SetShowCheckbox(!1),this._stwain.SelectImages([]);var e=document.getElementById("bottomMenu"+this._webViewer.myViewer.postfix),e=(e&&(e.style.border="0",e.style.display="none"),document.getElementById("btnCapture"+this._webViewer.myViewer.postfix));e&&(e.style.display="",0==this._webViewer.GetHowManyImagesInBuffer()?this._webViewer.SetBackground(q):this._webViewer.SetBackground(n)),this._webViewer.SetViewMode(2,2)}},{key:"onAllSelectionFunc",value:function(){this._stwain.SelectAllImages(),this.setSelectAllButtonEnable(!1)}},{key:"onCancelAllSelectionFunc",value:function(){this._stwain.SelectImages([]),this.setSelectAllButtonEnable(!0)}},{key:"setSelectAllButtonEnable",value:function(e){var t=document.getElementById("cancelAllSelect"+this._webViewer.GetIdPostfix()),r=document.getElementById("selectAll"+this._webViewer.GetIdPostfix());r&&t&&(e?(r.style.display="",t.style.display="none"):(r.style.display="none",t.style.display=""))}},{key:"onSaveFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&p.I.Lib.isFunction(this._template.onSaveFunc)&&this._template.onSaveFunc()}},{key:"onUploadFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&p.I.Lib.isFunction(this._template.onUploadFunc)&&this._template.onUploadFunc()}},{key:"onRemoveSelectedFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&this._template.onRemoveSelectedFunc()}},{key:"getCustomElement",value:function(){return this.customElement}}]),i}(),re=(p.D.UI.DocumentTemplate=te,function(){function n(e,t,r){(0,a.Z)(this,n);this._webViewer=e,this._ImgManager=t,this._documentTemplate=new te(e,t,this,r)}return(0,s.Z)(n,[{key:"getCustomElement",value:function(){return this._documentTemplate.getCustomElement()}},{key:"onExitFunc",value:function(){this._webViewer.hide()}},{key:"onAddDocumentFunc",value:function(){var e=this;e._documentTemplate._documentConfiguration?e._webViewer.showVideoInner(e._documentTemplate._documentConfiguration):""==e._webViewer._documentScanConfiguration?0==e._documentTemplate.bFullScreen?(e._documentTemplate.newContainer.style.width=e._webViewer.GetWidth()+"px",e._documentTemplate.newContainer.style.height=e._webViewer.GetHeight()+"px",e._webViewer.showVideoInner({element:e._documentTemplate.newContainer})):e._webViewer.showVideoInner():e._webViewer.showVideoInner(e._webViewer._documentScanConfiguration)}},{key:"onRemoveSelectedFunc",value:function(){0<this._ImgManager._stwain.SelectedImagesIndices.length&&this._ImgManager._stwain.RemoveAllSelectedImages()}}]),n}());function ne(e){if(e!=undefined){var t=e;if(p.D.isString(t)&&(t=t.toLowerCase()),"hidden"===e||!1===e)return!1}return!0}p.D.UI.Template=re;var D,ie,oe,ae=function(){function i(e,t,r){(0,a.Z)(this,i),(0,o.Z)(this,"bShowDocumentEdit",!1);var n=this,e=(n._webViewer=e,n._stwain=e._stwain,n._webViewer.mydocEditManager||n._webViewer.createDocumentEditManager(),n._mydocEditManager=e.mydocEditManager,n._webViewer.notBindCameraForDocumentEditManager()&&n._webViewer.bindCameraForDocumentEditManager(),n._webViewer.GetCurrentFileName());0==e.length&&(n._webViewer.CreateFile(h),n._webViewer.OpenFile(h),e=h),r.fileName=e,r.viewerUid=n._webViewer.myViewer.uid,n.myDocumentEditor=n._mydocEditManager.createEditPage(t,r),n.bShowDocumentEdit=ne(r.visibility)&&ne(r.documentEditorSettings.visibility),n.myDocumentEditor||p.D.Errors.WebviewerError(n._webViewer._stwain,n._webViewer.mydocEditManager.Error.errorMessage,n._webViewer.mydocEditManager.Error.errorCode),n.bDispose=!1}return(0,s.Z)(i,[{key:"dispose",value:function(){var e=this,t=!1;return e.bShowDocumentEdit=!1,e.myDocumentEditor&&e.myDocumentEditor.hide(),e._mydocEditManager?e.myDocumentEditor.isDestroyed?(p.D.Errors.DocumentEditorDispose(e._webViewer._stwain),e.myDocumentEditor=undefined,e._webViewer._documentEditor=undefined,e._webViewer._documentEditorInner=undefined,e._mydocEditManager=null,e._stwain=null,!(e.bDispose=!0)):((t=e._mydocEditManager.removeEditPage(e.myDocumentEditor))&&(e.myDocumentEditor=undefined,e._webViewer._documentEditor=undefined,e._webViewer._documentEditorInner=undefined,e._mydocEditManager=null,e._stwain=null,e.bDispose=!0),t):(e.bDispose?p.D.Errors.DocumentEditorDispose(e._webViewer._stwain):p.D.Errors.DocumentEditorNotExist(e._webViewer._stwain),!1)}},{key:"show",value:function(){return this.myDocumentEditor?this.myDocumentEditor.isDestroyed?(p.D.Errors.DocumentEditorDispose(this._webViewer._stwain),!1):(this.bShowDocumentEdit||this.myDocumentEditor.show(),this.bShowDocumentEdit=!0):(this.bDispose?p.D.Errors.DocumentEditorDispose(this._webViewer._stwain):p.D.Errors.DocumentEditorNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.bShowDocumentEdit=!1,this.myDocumentEditor?this.myDocumentEditor.isDestroyed?(p.D.Errors.DocumentEditorDispose(this._webViewer._stwain),!1):(this.myDocumentEditor.hide(),!0):(this.bDispose?p.D.Errors.DocumentEditorDispose(this._webViewer._stwain):p.D.Errors.DocumentEditorNotExist(this._webViewer._stwain),!1)}},{key:"syncFile",value:function(e){this._mydocEditManager.syncFile(e)}}]),i}(),se=(p.D.UI.DocumentEditorInner=ae,function(){function n(e,t,r){(0,a.Z)(this,n),(0,o.Z)(this,"_documentEditorInner",void 0),(0,o.Z)(this,"myDocumentEditor",void 0),this._documentEditorInner=new ae(e,t,r),this.myDocumentEditor=this._documentEditorInner.myDocumentEditor}return(0,s.Z)(n,[{key:"show",value:function(){return this._documentEditorInner.show()}},{key:"hide",value:function(){return this._documentEditorInner.hide()}},{key:"dispose",value:function(){return this._documentEditorInner.dispose()}},{key:"syncFile",value:function(e){return this._documentEditorInner.syncFile(e)}}]),n}()),ue=(p.D.UI.DocumentEditor=se,p.I.navInfoSync),v={getImageUrl:function(e,t,r,n,i){e=[e];return p.D.isNumber(t)&&t<0?"":(t!==undefined&&null!==t&&(e.push("&index="),e.push(t)),e.push("&width="),e.push(r),e.push("&height="),e.push(n),e.push("&ticks="),i?e.push(i):e.push(d()()),e.join(""))},getUrlByAct:function(e,t,r){e=[e];return t!==undefined&&null!==t&&(e.push("&index="),e.push(t)),r&&(e.push("&act="),e.push(r)),e.push("&ticks="),e.push(d()()),e.join("")},output:function(e,t){p.I.DWT.Debug&&p.D.log(t)},print:function(e){var t=850,r=1120,n=0,i=0,o=0,a="";for(p.D.product.bHTML5Edition&&(ue.bIE&&(r=1160),ue.bFirefox&&(r=1150)),n=0;n<e.length;n++){var s=r,u=e[n],c=u.Width,l=u.Height,u=u.Url,d=t/(c=c<=0?t:c),h=s/(l=l<=0?s:l);d<h?s=_()(l*d):h<d&&(t=_()(c*h)),i+=c,o+=l,a=a+'<div style="width:'+t+"px;height:"+s+'px"><img id="D_img'+n+'" src="'+u+'" style="position:relative;left:0px;top:0px;width: '+t+"px;height: "+s+'px" referrerpolicy="strict-origin-when-cross-origin" /></div>'}var g=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",i,",height=",o].join(""),f=window.open("about:blank","_blank",g);f&&(f.document.write('<html><body id="D_img">'+a+"</body></html>"),f.document.close(),f.focus(),(g=f.document.getElementById("D_img"))?g.onload=function(){f.print(),p.D.log("print image...ok")}:p.D.log("cannot find image"))}},b=(p.D.html5.Funs2=v,document),y=window,T=p.I.DWT,S=(T.CustomizableDisplayInfo.buttons,T.CustomizableDisplayInfo.dialogText),ce=v,w={isFunction:function(e){return e&&"function"==typeof e},addClass:function(e,t){e=p.D.one(e);e&&0<e.length&&e.addClass(t)},removeClass:function(e,t){e=p.D.one(e);e&&0<e.length&&e.removeClass(t)},output:function(e,t){p.I.DWT.Debug&&p.D.log(t)},getTop:function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=w.getTop(e.offsetParent)),t},getLeft:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=w.getLeft(e.offsetParent)),t}},le=(p.D._safePromptCustomMsg(function(){D=T.CustomizableDisplayInfo.buttons,S=T.CustomizableDisplayInfo.dialogText,ie={toolbars:{bottomMenu:!1,header:!1,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1}},buttonResize:{ifResize:!0,maxSize:22,minSize:16},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},previousImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-preImage",sequence:1,onButtonClick:"OnPreviousImage"},nextImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-nextImage",sequence:2,onButtonClick:"OnNextImage"},blank1:{visibility:!0,location:"myGroup",sequence:3},acquire:{visibility:1==D.visibility.scan,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-acquire",sequence:4,onButtonClick:"OnAcquire"},loadImages:{visibility:1==D.visibility.load,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:5,onButtonClick:"OnLoadImage"},print:{visibility:1==D.visibility.print,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-printImage",sequence:6,onButtonClick:"OnPrint"},blank2:{visibility:!!(D.visibility.scan||D.visibility.load||D.visibility.print),location:"myGroup",sequence:7},removeAll:{visibility:1==D.visibility.removeall,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:8,onButtonClick:"OnRemoveAll"},remove:{visibility:1==D.visibility.removeselected,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:9,onButtonClick:"OnRemove"},blank3:{visibility:!(!D.visibility.removeall&&!D.visibility.removeselected),location:"myGroup",sequence:10},rotateLeft:{visibility:1==D.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:11,onButtonClick:"OnRotateLeft"},rotate:{visibility:1==D.visibility.rotate,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotate",sequence:12,onButtonClick:"OnRotate"},rotateRight:{visibility:1==D.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:13,onButtonClick:"OnRotateRight"},deskew:{visibility:1==D.visibility.deskew,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-deskew",sequence:14,onButtonClick:"OnDeskew"},blank4:{visibility:!!(D.visibility.rotateleft||D.visibility.rotate||D.visibility.rotateright||D.visibility.deskew),location:"myGroup",sequence:15},crop:{visibility:1==D.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:16,onButtonClick:"OnCrop"},cut:{visibility:1==D.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:17,onButtonClick:"OnErase"},changeImageSize:{visibility:1==D.visibility.changeimagesize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-changeImageSize",sequence:18,onButtonClick:"OnChangeImageSize"},flip:{visibility:1==D.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:19,onButtonClick:"OnFlip"},mirror:{visibility:1==D.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:20,onButtonClick:"OnMirror"},blank5:{visibility:!!(D.visibility.crop||D.visibility.cut||D.visibility.changeimagesize||D.visibility.flip||D.visibility.mirror),location:"myGroup",sequence:21},zoomin:{visibility:1==D.visibility.zoomin,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomin",sequence:22,onButtonClick:"OnZoomin"},originalsize:{visibility:1==D.visibility.originalsize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-originalsize",sequence:23,onButtonClick:"OnOriginalsize"},zoomout:{visibility:1==D.visibility.zoomout,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomout",sequence:24,onButtonClick:"OnZoomout"},blank6:{visibility:!!(D.visibility.zoomin||D.visibility.originalsize||D.visibility.zoomout||D.visibility.stretch),location:"myGroup",sequence:26},fitPage:{visibility:1==D.visibility.fit,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fullWebType",sequence:27,onButtonClick:"OnFitPage"},fitWidth:{visibility:1==D.visibility.fitw,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitWidthType",sequence:28,onButtonClick:"OnFitWidth"},fitHeight:{visibility:1==D.visibility.fith,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitHeightType",sequence:29,onButtonClick:"OnFitHeight"},blank7:{visibility:!!(D.visibility.fit||D.visibility.fitw||D.visibility.fith),location:"myGroup",sequence:30},hand:{visibility:1==D.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:31,onButtonClick:"OnHand"},select:{visibility:1==D.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:32,onButtonClick:"OnSelect"},clicktozoomin:{visibility:1==D.visibility.zoom,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-clicktozoomin",sequence:33,onButtonClick:"OnClicktozoomin"},blank8:{visibility:!!(D.visibility.hand||D.visibility.rectselect||D.visibility.zoom),location:"myGroup",sequence:34},restore:{visibility:1==D.visibility.restore,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:35,onButtonClick:"OnRestore"},save:{visibility:1==D.visibility.save,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:36,onButtonClick:"OnSave"},close:{visibility:1==D.visibility.close,location:"topMenuRight",iconClass:"d-icon-font ds-dwt-ui-icon-close",sequence:1,onButtonClick:"OnClose"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)"},tipsConfig:{previousImage:D.titles.previous,nextImage:D.titles.next,acquire:D.titles.scan,loadImages:D.titles.load,print:D.titles.print,removeAll:D.titles.removeall,remove:D.titles.removeselected,rotateLeft:D.titles.rotateleft,rotate:D.titles.rotate,rotateRight:D.titles.rotateright,deskew:D.titles.deskew,crop:D.titles.crop,cut:D.titles.cut,changeImageSize:D.titles.changeimagesize,flip:D.titles.flip,mirror:D.titles.mirror,zoomin:D.titles.zoomin,originalsize:D.titles.originalsize,zoomout:D.titles.zoomout,stretch:D.titles.stretch,fitPage:D.titles.fit,fitWidth:D.titles.fitw,fitHeight:D.titles.fith,hand:D.titles.hand,select:D.titles.rectselect,clicktozoomin:D.titles.zoom,restore:D.titles.restore,save:D.titles.save,close:D.titles.close},canvasConfig:{selectedPageBackground:i,selectedPageBorder:"",hoverPageBackground:i,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""},oe={toolbars:{header:!0,bottomMenu:!0,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},global:{visibility:!1},viewChange:{visibility:!1},viewerCorner:{visibility:!1},pager:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1},myGroup2:{visibility:!0,location:"bottomMenu",sequence:1},myGroup3:{visibility:!0,location:"header",sequence:1},myGroup4:{visibility:!0,location:"bottomMenu",sequence:2}},buttonResize:{ifResize:!0,maxSize:32,minSize:26},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},print:{visibility:!1},loadImages:{visibility:1==D.visibility.load,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:1,onButtonClick:"OnLoadImage"},close:{visibility:1==D.visibility.close,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-close ds-dwt-ui-icon-close-right",sequence:2,onButtonClick:"OnClose"},rotateLeft:{visibility:1==D.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:1,onButtonClick:"OnRotateLeft"},rotateRight:{visibility:1==D.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:2,onButtonClick:"OnRotateRight"},flip:{visibility:1==D.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:3,onButtonClick:"OnFlip"},mirror:{visibility:1==D.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:4,onButtonClick:"OnMirror"},crop:{visibility:1==D.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:5,onButtonClick:"OnCrop"},cut:{visibility:1==D.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:6,onButtonClick:"OnErase"},hand:{visibility:1==D.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:7,onButtonClick:"OnHand"},select:{visibility:1==D.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:8,onButtonClick:"OnSelect"},firstPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageStart",sequence:1,onButtonClick:"OnFirstImage"},previousPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pagePre",sequence:2,onButtonClick:"OnPreviousImage"},pagination:{visibility:!0,location:"myGroup2",sequence:3},nextPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageNext",sequence:4,onButtonClick:"OnNextImage"},lastPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageEnd",sequence:5,onButtonClick:"OnLastImage"},removeAll:{visibility:1==D.visibility.removeall,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:7,onButtonClick:"OnRemoveAll"},remove:{visibility:1==D.visibility.removeselected,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:8,onButtonClick:"OnRemove"},restore:{visibility:1==D.visibility.restore,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:10,onButtonClick:"OnRestore"},save:{visibility:1==D.visibility.save,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:11,onButtonClick:"OnSave"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:D.titles.previous,nextImage:D.titles.next,acquire:D.titles.scan,loadImages:D.titles.load,print:D.titles.print,removeAll:D.titles.removeall,remove:D.titles.removeselected,rotateLeft:D.titles.rotateleft,rotate:D.titles.rotate,rotateRight:D.titles.rotateright,deskew:D.titles.deskew,crop:D.titles.crop,cut:D.titles.cut,changeImageSize:D.titles.changeimagesize,flip:D.titles.flip,mirror:D.titles.mirror,zoomin:D.titles.zoomin,originalsize:D.titles.originalsize,zoomout:D.titles.zoomout,stretch:D.titles.stretch,fitPage:D.titles.fit,fitWidth:D.titles.fitw,fitHeight:D.titles.fith,hand:D.titles.hand,select:D.titles.rectselect,clicktozoomin:D.titles.zoom,restore:D.titles.restore,save:D.titles.save,close:D.titles.close},canvasConfig:{selectedPageBackground:i,selectedPageBorder:"",hoverPageBackground:i,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""}}),function(){function i(e,t){(0,a.Z)(this,i);var r=this,e=(r._webViewer=e,r.mydvs=e.mydvs,r._stwain=e._stwain,r.bShowImageEditForFullScreen=!1,r.bCouldBeTimeConsuming=!1,r.bShowImageEdit=!1,r.promptToSaveChange=!0,ie),n=r.bMobile=!1;r._stwain._isPC()||(r.bPadViewer||(e=oe,n=!0),r.bMobile=!0),e=r.updateWebviewerConfig(e,t,n),r.myImageEditor=r.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:e,scrollerConfig:{}},r._webViewer.myViewer.uid),r.myImageEditor.maxZoom=50,0!=r._webViewer.mydvs.Error.errorCode&&p.D.Errors.WebviewerError(r._webViewer._stwain,r._webViewer.mydvs.Error.errorMessage,r._webViewer.mydvs.Error.errorCode),r.bDispose=!1,r._BindImageEditorEvents(),r._bindView(),r._currentIndex=r._webViewer.GetCurrentIndex()}return(0,s.Z)(i,[{key:"updateWebviewerConfig",value:function(e,t,r){return t&&(this.editorSettings=t,p.D.isUndefined(t.buttons)||(p.D.isUndefined(t.buttons.titles)||(p.D.isUndefined(t.buttons.titles.previous)||(e.tipsConfig.previousImage=t.buttons.titles.previous),p.D.isUndefined(t.buttons.titles.next)||(e.tipsConfig.nextImage=t.buttons.titles.next),p.D.isUndefined(t.buttons.titles.print)||(e.tipsConfig.print=t.buttons.titles.print),p.D.isUndefined(t.buttons.titles.scan)||(e.tipsConfig.acquire=t.buttons.titles.scan),p.D.isUndefined(t.buttons.titles.load)||(e.tipsConfig.loadImages=t.buttons.titles.load),p.D.isUndefined(t.buttons.titles.rotateleft)||(e.tipsConfig.rotateLeft=t.buttons.titles.rotateleft),p.D.isUndefined(t.buttons.titles.rotate)||(e.tipsConfig.rotate=t.buttons.titles.rotate),p.D.isUndefined(t.buttons.titles.rotateright)||(e.tipsConfig.rotateRight=t.buttons.titles.rotateright),p.D.isUndefined(t.buttons.titles.deskew)||(e.tipsConfig.deskew=t.buttons.titles.deskew),p.D.isUndefined(t.buttons.titles.crop)||(e.tipsConfig.crop=t.buttons.titles.crop),p.D.isUndefined(t.buttons.titles.cut)||(e.tipsConfig.cut=t.buttons.titles.cut),p.D.isUndefined(t.buttons.titles.changeimagesize)||(e.tipsConfig.changeImageSize=t.buttons.titles.changeimagesize),p.D.isUndefined(t.buttons.titles.flip)||(e.tipsConfig.flip=t.buttons.titles.flip),p.D.isUndefined(t.buttons.titles.mirror)||(e.tipsConfig.mirror=t.buttons.titles.mirror),p.D.isUndefined(t.buttons.titles.zoomin)||(e.tipsConfig.zoomin=t.buttons.titles.zoomin),p.D.isUndefined(t.buttons.titles.originalsize)||(e.tipsConfig.originalsize=t.buttons.titles.originalsize),p.D.isUndefined(t.buttons.titles.zoomout)||(e.tipsConfig.zoomout=t.buttons.titles.zoomout),p.D.isUndefined(t.buttons.titles.stretch)||(e.tipsConfig.stretch=t.buttons.titles.stretch),p.D.isUndefined(t.buttons.titles.fit)||(e.tipsConfig.fitPage=t.buttons.titles.fit),p.D.isUndefined(t.buttons.titles.fitw)||(e.tipsConfig.fitWidth=t.buttons.titles.fitw),p.D.isUndefined(t.buttons.titles.fith)||(e.tipsConfig.fitHeight=t.buttons.titles.fith),p.D.isUndefined(t.buttons.titles.hand)||(e.tipsConfig.hand=t.buttons.titles.hand),p.D.isUndefined(t.buttons.titles.rectselect)||(e.tipsConfig.select=t.buttons.titles.rectselect),p.D.isUndefined(t.buttons.titles.zoom)||(e.tipsConfig.clicktozoomin=t.buttons.titles.zoom),p.D.isUndefined(t.buttons.titles.restore)||(e.tipsConfig.restore=t.buttons.titles.restore),p.D.isUndefined(t.buttons.titles.save)||(e.tipsConfig.save=t.buttons.titles.save),p.D.isUndefined(t.buttons.titles.close)||(e.tipsConfig.close=t.buttons.titles.close),p.D.isUndefined(t.buttons.titles.removeall)||(e.tipsConfig.removeAll=t.buttons.titles.removeall),p.D.isUndefined(t.buttons.titles.removeselected)||(e.tipsConfig.remove=t.buttons.titles.removeselected)),p.D.isUndefined(t.buttons.visibility)||(r?(p.D.isUndefined(t.buttons.visibility.load)?e.buttons.loadImages.visibility=!0:e.buttons.loadImages.visibility=1==t.buttons.visibility.load,p.D.isUndefined(t.buttons.visibility.close)?e.buttons.close.visibility=!0:e.buttons.close.visibility=1==t.buttons.visibility.close,p.D.isUndefined(t.buttons.visibility.rotateleft)?e.buttons.rotateLeft.visibility=!0:e.buttons.rotateLeft.visibility=1==t.buttons.visibility.rotateleft,p.D.isUndefined(t.buttons.visibility.rotateright)?e.buttons.rotateRight.visibility=!0:e.buttons.rotateRight.visibility=1==t.buttons.visibility.rotateright,p.D.isUndefined(t.buttons.visibility.flip)?e.buttons.flip.visibility=!0:e.buttons.flip.visibility=1==t.buttons.visibility.flip,p.D.isUndefined(t.buttons.visibility.mirror)?e.buttons.mirror.visibility=!0:e.buttons.mirror.visibility=1==t.buttons.visibility.mirror,p.D.isUndefined(t.buttons.visibility.crop)?e.buttons.crop.visibility=!0:e.buttons.crop.visibility=1==t.buttons.visibility.crop,p.D.isUndefined(t.buttons.visibility.cut)?e.buttons.cut.visibility=!0:e.buttons.cut.visibility=1==t.buttons.visibility.cut,p.D.isUndefined(t.buttons.visibility.hand)?e.buttons.hand.visibility=!0:e.buttons.hand.visibility=1==t.buttons.visibility.hand,p.D.isUndefined(t.buttons.visibility.rectselect)?e.buttons.select.visibility=!0:e.buttons.select.visibility=1==t.buttons.visibility.rectselect,p.D.isUndefined(t.buttons.visibility.removeall)?e.buttons.removeAll.visibility=!0:e.buttons.removeAll.visibility=1==t.buttons.visibility.removeall,p.D.isUndefined(t.buttons.visibility.removeselected)?e.buttons.remove.visibility=!0:e.buttons.remove.visibility=1==t.buttons.visibility.removeselected,p.D.isUndefined(t.buttons.visibility.restore)?e.buttons.restore.visibility=!0:e.buttons.restore.visibility=1==t.buttons.visibility.restore,p.D.isUndefined(t.buttons.visibility.save)?e.buttons.save.visibility=!0:e.buttons.save.visibility=1==t.buttons.visibility.save):(p.D.isUndefined(t.buttons.visibility.scan)?e.buttons.acquire.visibility=!0:e.buttons.acquire.visibility=1==t.buttons.visibility.scan,p.D.isUndefined(t.buttons.visibility.load)?e.buttons.loadImages.visibility=!0:e.buttons.loadImages.visibility=1==t.buttons.visibility.load,p.D.isUndefined(t.buttons.visibility.print)?e.buttons.print.visibility=!0:e.buttons.print.visibility=1==t.buttons.visibility.print,e.buttons.blank2.visibility=!!(e.buttons.acquire.visibility||e.buttons.loadImages.visibility||e.buttons.print.visibility),p.D.isUndefined(t.buttons.visibility.removeall)?e.buttons.removeAll.visibility=!0:e.buttons.removeAll.visibility=1==t.buttons.visibility.removeall,p.D.isUndefined(t.buttons.visibility.removeselected)?e.buttons.remove.visibility=!0:e.buttons.remove.visibility=1==t.buttons.visibility.removeselected,e.buttons.blank3.visibility=!(!e.buttons.removeAll.visibility&&!e.buttons.remove.visibility),p.D.isUndefined(t.buttons.visibility.rotateleft)?e.buttons.rotateLeft.visibility=!0:e.buttons.rotateLeft.visibility=1==t.buttons.visibility.rotateleft,p.D.isUndefined(t.buttons.visibility.rotate)?e.buttons.rotate.visibility=!0:e.buttons.rotate.visibility=1==t.buttons.visibility.rotate,p.D.isUndefined(t.buttons.visibility.rotateright)?e.buttons.rotateRight.visibility=!0:e.buttons.rotateRight.visibility=1==t.buttons.visibility.rotateright,p.D.isUndefined(t.buttons.visibility.deskew)?e.buttons.deskew.visibility=!0:e.buttons.deskew.visibility=1==t.buttons.visibility.deskew,e.buttons.blank4.visibility=!!(e.buttons.rotateLeft.visibility||e.buttons.rotate.visibility||e.buttons.rotateRight.visibility||e.buttons.deskew.visibility),p.D.isUndefined(t.buttons.visibility.crop)?e.buttons.crop.visibility=!0:e.buttons.crop.visibility=1==t.buttons.visibility.crop,p.D.isUndefined(t.buttons.visibility.cut)?e.buttons.cut.visibility=!0:e.buttons.cut.visibility=1==t.buttons.visibility.cut,p.D.isUndefined(t.buttons.visibility.changeimagesize)?e.buttons.changeImageSize.visibility=!0:e.buttons.changeImageSize.visibility=1==t.buttons.visibility.changeimagesize,p.D.isUndefined(t.buttons.visibility.flip)?e.buttons.flip.visibility=!0:e.buttons.flip.visibility=1==t.buttons.visibility.flip,p.D.isUndefined(t.buttons.visibility.mirror)?e.buttons.mirror.visibility=!0:e.buttons.mirror.visibility=1==t.buttons.visibility.mirror,e.buttons.blank5.visibility=!!(e.buttons.crop.visibility||e.buttons.cut.visibility||e.buttons.changeImageSize.visibility||e.buttons.flip.visibility||e.buttons.mirror.visibility),p.D.isUndefined(t.buttons.visibility.zoomin)?e.buttons.zoomin.visibility=!0:e.buttons.zoomin.visibility=1==t.buttons.visibility.zoomin,p.D.isUndefined(t.buttons.visibility.originalsize)?e.buttons.originalsize.visibility=!0:e.buttons.originalsize.visibility=1==t.buttons.visibility.originalsize,p.D.isUndefined(t.buttons.visibility.zoomout)?e.buttons.zoomout.visibility=!0:e.buttons.zoomout.visibility=1==t.buttons.visibility.zoomout,e.buttons.blank6.visibility=!!(e.buttons.zoomin.visibility||e.buttons.originalsize.visibility||e.buttons.zoomout.visibility),p.D.isUndefined(t.buttons.visibility.fit)?e.buttons.fitPage.visibility=!0:e.buttons.fitPage.visibility=1==t.buttons.visibility.fit,p.D.isUndefined(t.buttons.visibility.fitw)?e.buttons.fitWidth.visibility=!0:e.buttons.fitWidth.visibility=1==t.buttons.visibility.fitw,p.D.isUndefined(t.buttons.visibility.fith)?e.buttons.fitHeight.visibility=!0:e.buttons.fitHeight.visibility=1==t.buttons.visibility.fith,e.buttons.blank7.visibility=!!(e.buttons.fitPage.visibility||e.buttons.fitWidth.visibility||e.buttons.fitHeight.visibility),p.D.isUndefined(t.buttons.visibility.hand)?e.buttons.hand.visibility=!0:e.buttons.hand.visibility=1==t.buttons.visibility.hand,p.D.isUndefined(t.buttons.visibility.rectselect)?e.buttons.select.visibility=!0:e.buttons.select.visibility=1==t.buttons.visibility.rectselect,p.D.isUndefined(t.buttons.visibility.zoom)?e.buttons.clicktozoomin.visibility=!0:e.buttons.clicktozoomin.visibility=1==t.buttons.visibility.zoom,e.buttons.blank7.visibility=!!(e.buttons.hand.visibility||e.buttons.select.visibility||e.buttons.clicktozoomin.visibility),p.D.isUndefined(t.buttons.visibility.restore)?e.buttons.restore.visibility=!0:e.buttons.restore.visibility=1==t.buttons.visibility.restore,p.D.isUndefined(t.buttons.visibility.save)?e.buttons.save.visibility=!0:e.buttons.save.visibility=1==t.buttons.visibility.save,p.D.isUndefined(t.buttons.visibility.close)?e.buttons.close.visibility=!0:e.buttons.close.visibility=1==t.buttons.visibility.close))),p.D.isUndefined(t.dialogText)||(S=t.dialogText,T.CustomizableDisplayInfo.dialogText=S),p.D.isUndefined(t.promptToSaveChange)||(this.promptToSaveChange=t.promptToSaveChange),p.D.isUndefined(t.border)||(e.outerBorder=t.border),p.D.isUndefined(t.topMenuBorder)||(e.topMenuBorder=t.topMenuBorder),p.D.isUndefined(t.innerBorder)||(e.canvasConfig.canvasBorder=t.innerBorder),p.D.isUndefined(t.background)||(e.canvasConfig.canvasBackground=t.background)),e}},{key:"_bindView",value:function(){var t=this;if(t.bShowImageEdit)return!0;if(!t.myImageEditor)return t.bDispose?p.D.Errors.ImageEditorDispose(t._stwain):p.D.Errors.ImageEditorNotExist(t._stwain),!1;var e,r=p.D.one(".dynamsoft-cvs-container");return r&&r.getEL()?(t.cvsContainer=r,t.cvsParentId=r.parent()[0].id,t._stwain&&t._stwain.Addon&&t._stwain.Addon.Camera&&(t.cvsStatus=t._stwain.Addon.Camera.getStatus())):(t.cvsContainer="",t.cvsParentId="",t.cvsStatus=""),t.bShowImageEdit=!0,t.editorSettings&&t.editorSettings.element&&t.editorSettings.width&&t.editorSettings.height?(t.UIEditor=t.editorSettings.element,t.bFullScreen=!1,t.myImageEditor.width=t.editorSettings.width,t.myImageEditor.height=t.editorSettings.height,t.SetWidthInner(t.editorSettings.width,!0),t.SetHeightInner(t.editorSettings.height,!0),t.myImageEditor.bindView(t.UIEditor),t.hide(),t.cvsParentId&&(r=document.getElementById(t.cvsParentId))&&r.appendChild(t.cvsContainer[0])):(r=b.createElement("div"),b.body.appendChild(r),document.body.insertBefore(r,document.body.firstElementChild),t.UIEditor=r,t.bFullScreen=!0,t.UIEditor.className="D_ImageUIEditor",t.UIEditor.style.width="100%",t.UIEditor.style.height="100%",t.UIEditor.style.position="fixed",t.UIEditor.style.left="0px",t.UIEditor.style.top="0px",t.UIEditor.style.zIndex="9999",t.UIEditor.style.display="none",t.SetWidthInner("100%",!0),t.SetHeightInner("100%",!0),t.myImageEditor.bindView(t.UIEditor),t.hide(),t.bShowImageEditForFullScreen=!0),t.updateMode(),t.editorSettings&&t.editorSettings.selectionRectAspectRatio?t.SetSelectionRectAspectRatio(t.editorSettings.selectionRectAspectRatio):t.SetSelectionRectAspectRatio(0),t.HideEditorButtonForPad(),t.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],t._stwain._isMobileMode()&&((r=p.D.one(".ds-dwt-ui-icon-acquire"))&&r.getEL()&&(r[0].style.display="none"),t.dwtMobileFileId="dwtmobilefile",t.UIEditor&&"DIV"==t.UIEditor.nodeName?(e=document.createElement("div"),t.bMobile?e.innerHTML="<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+t.dwtMobileFileId+"' type='file' style='display:none' />":e.innerHTML="<input multiple accept='image/*,.pdf' id ='"+t.dwtMobileFileId+"' type='file' style='display:none' />",t.UIEditor.appendChild(e)):(r=document.getElementById(t.UIEditor),e=document.createElement("div"),t.bMobile?e.innerHTML="<input id ='"+t.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />":e.innerHTML="<input id ='"+t.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />",r.appendChild(e)),p.D.get(t.dwtMobileFileId).onchange=function(){for(var e=0;e<this.files.length;e++)t._stwain.LoadImageFromBinary(this.files[e]);document.getElementById(t.dwtMobileFileId).value=""}),t.myImageEditor.off("slideSwitch"),t.myImageEditor.on("slideSwitch",function(e){"left"==e?t._webViewer.myViewer.previous():"right"==e&&t._webViewer.myViewer.next()}),!0}},{key:"dispose",value:function(){var e,t=this;return(e=t.mydvs.ViewControl.removeViewer(t.myImageEditor))&&(t.UIEditor&&t.UIEditor.lastChild&&t.UIEditor.removeChild(t.UIEditor.lastChild),t.myImageEditor=undefined,t._webViewer._imageEditor=undefined,t._webViewer._imageEditorInner=undefined,t.mydvs=null,t._stwain=null,t.bDispose=!0),e}},{key:"show",value:function(){return this.myImageEditor?(this.bFullScreen&&(this.UIEditor.style.display="",document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.style.overflow="hidden"),this.myImageEditor.showViewer=!0):(this.bDispose?p.D.Errors.ImageEditorDispose(this._webViewer._stwain):p.D.Errors.ImageEditorNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.myImageEditor?(this.myImageEditor.showViewer=!1,this.bFullScreen&&(this.UIEditor.style.display="none"),!0):(this.bDispose?p.D.Errors.ImageEditorDispose(this._webViewer._stwain):p.D.Errors.ImageEditorNotExist(this._webViewer._stwain),!1)}},{key:"_BindImageEditorEvents",value:function(){var n=this;p.D.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered","wheel"],function(r){n.myImageEditor.on(r,function(e,t){n[r](e,t)})})}},{key:"HideEditorButtonForPad",value:function(){var e=this.myImageEditor,t=this.bPadViewer,r=document.getElementById("rotateBtn"+e.postfix),r=(r&&(r.style.display=t?"none":""),document.getElementById("deskewBtn"+e.postfix)),r=(r&&(r.style.display=t?"none":""),document.getElementById("changeImageSizeBtn"+e.postfix));r&&(r.style.display=t?"none":"")}},{key:"BackImageData",value:function(){var t,r=this;r._stwain._isMobileMode()&&r.bShowImageEdit&&(0<=(t=r._webViewer.GetCurrentIndex())&&r._webViewer.GetImageData(r._webViewer.GetUidByIndex(t)).then(function(e){r.BackImageBuffer=e.oriData;e=r._webViewer.GetMetaDataByIndex(t);e&&(r.BackModelImageControl={},r.BackModelImageControl.width=e.width,r.BackModelImageControl.height=e.height,r.BackModelImageControl.bitDepth=e.bitDepth,r.BackModelImageControl.resolutionX=e.resolutionX,r.BackModelImageControl.resolutionY=e.resolutionY)}))}},{key:"CloseShowImageEditor",value:function(){var e,t=this;return t.myImageEditor?(t.cvsContainer&&""!=t.cvsContainer&&t.cvsParentId&&""!=t.cvsParentId&&((e=document.getElementById(t.cvsParentId))&&e.appendChild(t.cvsContainer[0]),"playing"==t.cvsStatus&&t._stwain&&t._stwain.Addon&&t._stwain.Addon.Camera&&t._stwain.Addon.Camera.resume()),!0):(t.bDispose?p.D.Errors.ImageEditorDispose(t._stwain):p.D.Errors.ImageEditorNotExist(t._stwain),!1)}},{key:"UpdateInfo",value:function(){p.I.Lib.hideMask()}},{key:"clearSelectedAreas",value:function(){var e;return this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0||((e=this.myImageEditor.clearSelectedBoxes())||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"SetSelectionRectAspectRatio",value:function(e){return this.myImageEditor.selectionBoxAspectRatio=e,!0}},{key:"ZoomIn",value:function(){var e;return(e=this.myImageEditor.zoomIn())||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"ZoomOut",value:function(){var e;return(e=this.myImageEditor.zoomOut())||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"SetZoom",value:function(e,t,r){var n=!1;return(n=t&r?this.myImageEditor.zoomTo(e,t,r):this.myImageEditor.zoomTo(e))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),n}},{key:"GetZoom",value:function(){return this.myImageEditor.zoom}},{key:"SetFitType",value:function(e){var t="window";return p.D.isUndefined(e)||"width"!=e&&"height"!=e||(t=e),this.myImageEditor.fitType=t,!0}},{key:"SetMouseShape",value:function(e){var t;switch(e){case p.I.DWT.EnumDWT_MouseShape.Default:t="default";break;case p.I.DWT.EnumDWT_MouseShape.Hand:t="pointer";break;case p.I.DWT.EnumDWT_MouseShape.Crosshair:t="crosshair";break;case p.I.DWT.EnumDWT_MouseShape.Zoom:t="zoom-in";break;default:t="crosshair"}return this.SetCursor(t),!0}},{key:"SetCursor",value:function(e){if(!this._webViewer._NouiNotSupport("cursor"))return!1;var t="default";switch(e){case"default":t="default",this.SetOperationMode(1);break;case"pointer":t="pointer",this.SetOperationMode(0);break;case"crosshair":t="crosshair",this.SetOperationMode(1);break;case"zoom-in":t="zoom-in",this.SetOperationMode(2);break;default:t="crosshair"}return this.myImageEditor.canvasMouseShape=t,!0}},{key:"SetSelectionImageBorderColor",value:function(e){return this.myImageEditor.selectedPageBorderColor=e,!0}},{key:"SetBackgroundColor",value:function(e){return this.myImageEditor.imageBackgroundColor=e,!0}},{key:"SetWidth",value:function(e){return this.myImageEditor.width=e,!0}},{key:"SetWidthInner",value:function(e,t){return!t&&p.D.isString(e)&&0<=m()(e).call(e,"%")?(t=p.D.one("#"+this._stwain._containerID),this.myImageEditor.width=_()(p.D.css(t,"width")*_()(e)/100)):this.myImageEditor.width=e,!0}},{key:"SetHeight",value:function(e){return this.myImageEditor.height=e,!0}},{key:"SetHeightInner",value:function(e,t){return!t&&p.D.isString(e)&&0<=m()(e).call(e,"%")?(t=p.D.one(this._stwain._containerElement),this.myImageEditor.height=_()(p.D.css(t,"height")*_()(e)/100)):this.myImageEditor.height=e,!0}},{key:"SetIfAutoScroll",value:function(e){return this.myImageEditor.showLatestPage=e,!0}},{key:"ChangeButtonClass",value:function(e,t){var r;return r=this.myImageEditor?this.myImageEditor.setButtonClass(e,t):r}},{key:"SetOperationMode",value:function(e){this.myImageEditor.operationMode=e}},{key:"UnbindContent",value:function(e){this.myImageEditor.unbindContent()}},{key:"SetSelectedPageBackground",value:function(e){this.myImageEditor.selectedPageBackground=e}},{key:"GetRealTimeMetadataByIndex",value:function(e){if(!(e<0||e>=this._webViewer.GetHowManyImagesInBuffer()))return this.myImageEditor.getRealTimeMetadataByIndex(e);p.D.Errors.IndexOutOfRange(this._stwain)}},{key:"DVSRotate",value:function(e){return this.myImageEditor.rotateMode=0,(e=this.myImageEditor.rotate(e))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"DVSFlip",value:function(){var e=this.myImageEditor.flip();return e||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"DVSMirror",value:function(){var e=this.myImageEditor.mirror();return e||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"DVSCrop",value:function(e,t,r,n){r=this.myImageEditor.crop(e,t,r-e,n-t);return r||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),r}},{key:"DVSErase",value:function(e,t,r,n){r=this.myImageEditor.erase(e,t,r-e,n-t,this._webViewer._UIView.BackgroundFillColor);return r||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),r}},{key:"DVSSaveTransformResult",value:function(e){var t=this;return t.myImageEditor.saveTransformation().then(function(){e(null,-1,null)},function(e){p.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode)}),!0}},{key:"DVSRotateEx",value:function(e,t){return this.myImageEditor.rotateMode=t?1:0,(t=this.myImageEditor.rotate(e))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),t}},{key:"DVSChangeImageSize",value:function(e,t,r){e=this.myImageEditor.changePageSize(_()(e),_()(t),r);return e||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"DVSSkewAngle",value:function(){var t=this;return t._stwain._asyncGetSkewAngleOnly(t._webViewer.GetCurrentIndex(),function(e){t.DVSRotateEx(e,!0),t.UpdateInfo(),t._IfChangedWithinTheEditor=!0,t.iChangedIndex=t._webViewer.GetCurrentIndex(),t.updateButtons()}),!0}},{key:"updateButtons",value:function(){1==this._IfChangedWithinTheEditor?(this.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage"),this.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")):(this.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage-grey"),this.ChangeButtonClass("restore","ds-dwt-ui-icon-restore-grey"))}},{key:"updateMode",value:function(e){var t,r=this;if(r.bShowImageEdit){if(1<(t=r._webViewer.GetHowManyImagesInBuffer())?(r._webViewer.GetCurrentIndex()==t-1||r._webViewer.GetHowManyImagesInBuffer()<=1?r.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"):r.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage"),r._webViewer.GetCurrentIndex()<=0||r._webViewer.GetHowManyImagesInBuffer()<=1?r.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey"):r.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")):(r.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"),r.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")),r.updateButtons(),r.__SetCropButtonGrey(!0),r.__SetEraseButtonGrey(!0),r.bMobile)switch(r.cursorStatus){case"rectselect":r.OnSelect();break;case"zoom":r.OnClicktozoomin();break;default:r.OnHand()}else switch(r.cursorStatus){case"hand":r.OnHand();break;case"zoom":r.OnClicktozoomin();break;default:r.OnSelect()}e&&(t=r._webViewer.GetCurrentIndex(),1==r._IfChangedWithinTheEditor&&t!=r.iChangedIndex&&r.ShowDialogForSaveImage(r._webViewer.GetCurrentIndex(),!1))}}},{key:"__SaveImageInner",value:function(n,i){var o=this;if(-1==o.iChangedIndex&&0==o._IfSaveChangesOutSideOfTheEditor)return o._IfChangedWithinTheEditor=!1,i&&i(),!1;if(1!=o._IfChangedWithinTheEditor&&0==o._IfSaveChangesOutSideOfTheEditor)return alert(T.CustomizableDisplayInfo.errorMessages.imageNotChanged),o._IfChangedWithinTheEditor=!1,i&&i(),!1;o._IfSaveChangesOutSideOfTheEditor&&(o.iChangedIndex=o._webViewer.GetCurrentIndex());var a=function a(e,t,r){if(e){if(1==n&&(p.D.log("__SaveImageInner: "+[e.guid].join(",")),o._webViewer.GetCurrentIndex()==t&&(o._stwain._isMobileMode()?o._webViewer.MobileUpdateImage(e,r):o._webViewer.UpdateImage(e,r))),o._IfChangedWithinTheEditor=!1,(o.iChangedIndex=-1)==e.serverId)return i&&i(),!1}else o._IfChangedWithinTheEditor=!1,o.iChangedIndex=-1;return o.updateButtons(),i&&i(),!0},e=!0;if(1==o._IfChangedWithinTheEditor||1==o._IfSaveChangesOutSideOfTheEditor){var t=o.getImageManager().convertClientIndexToServerId(o.iChangedIndex);if(-1==t)return i&&i(),!1;o.OnGetImageFromServerForEdit(o._webViewer._UIView.mapModelImageControl[t],o.iChangedIndex,2,a),e=!1}return o._IfSaveChangesOutSideOfTheEditor=!1,e&&(o._IfChangedWithinTheEditor=!1,i&&i()),!0}},{key:"ShowDialogForSaveImage",value:function(t,r,n,i){var e,o=this,a=function a(){o.__SaveImageInner(!0,function(){var e=o._stwain._containerID;y.DCP_DWT_OnClickCloseInstall(e),-(p.D.bChangeImage=1)==t?r&&o.OnClose():o._webViewer.__goInner(t),r&&(document.body.style.overflow=""),w.isFunction(n)&&n()})};o.promptToSaveChange?(e=['<div class="dynamsoft-dwt-dlg-tips">',"<div>",S.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',S.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',S.saveChangedImage[2],'" /></div>',"</div>"],o.bMobile?p.I.DWT.ShowMessage(e.join(""),{width:300,headerStyle:1}):p.I.DWT.ShowMessage(e.join(""),{width:420,headerStyle:1}),(e=p.D.one(".dynamsoft_btnSave").getEL())&&(e.onclick=function(){a()}),(e=p.D.one(".dynamsoft_btnCancel").getEL())&&(e.onclick=function(){o.__RestoreImageInner(t,function(){var e=o._stwain._containerElement;y.DCP_DWT_OnClickCloseInstall(e),p.D.bChangeImage=0,-1==t?r&&o.OnClose():o._webViewer.__goInner(t),r&&(document.body.style.overflow=""),w.isFunction(i)&&i()})})):a()}},{key:"__SetCropButtonGrey",value:function(e){this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),e&&this.clearSelectedAreas()}},{key:"__SetEraseButtonGrey",value:function(e){this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey"),e&&this.clearSelectedAreas()}},{key:"__SetZoomInButtonEnable",value:function(e){1==e?this.ChangeButtonClass("zoomin","ds-dwt-ui-icon-zoomin"):this.ChangeButtonClass("zoomin","ds-dwt-ui-icon-zoomin-grey")}},{key:"__SetZoomOutButtonEnable",value:function(e){1==e?this.ChangeButtonClass("zoomout","ds-dwt-ui-icon-zoomout"):this.ChangeButtonClass("zoomout","ds-dwt-ui-icon-zoomout-grey")}},{key:"pageChange",value:function(e){var t=this._webViewer.GetHowManyImagesInBuffer();p.D.log("OnPagination"),t<=0?w.output(this,"No image in Buffer"):1!=t&&(!/^\d+$/.test(e)||e<=0?alert(T.CustomizableDisplayInfo.errorMessages.invalidIndex):((e=_()(e)-1)<0?e=0:t<=e&&(e=t-1),e!=this._webViewer.GetCurrentIndex()&&this.go(e)))}},{key:"bufferChanged",value:function(e){if(this._currentIndex!=this._webViewer.GetCurrentIndex())return this._currentIndex=this._webViewer.GetCurrentIndex(),this.updateMode(),"shift"!=e.action||1!=this._IfChangedWithinTheEditor||(this.ShowDialogForSaveImage(this._currentIndex,!1),!1)}},{key:"pageRendered",value:function(e){}},{key:"OnFirstImage",value:function(){p.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.first()}},{key:"OnLastImage",value:function(){p.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.last()}},{key:"OnPreviousImage",value:function(){var e=p.D.one(".ds-dwt-ui-icon-preImage-grey");p.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),e&&e.getEL()||this._webViewer.previous()}},{key:"OnNextImage",value:function(){var e=p.D.one(".ds-dwt-ui-icon-nextImage-grey");this.hideImgEditorDilag(),p.D.Errors.ClearErrorInfo(this._stwain),e&&e.getEL()||this._webViewer.next()}},{key:"go",value:function(e){if(this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0)return w.output(this,"No image in Buffer"),!1;if(1==this._IfChangedWithinTheEditor)return this.ShowDialogForSaveImage(e,!1),!1;if(this.bShowImageEdit&&void 0!==e){if(-1==e)return!1;this.bCouldBeTimeConsuming=!0,this.myImageEditor.gotoPage(e),this.updateMode()}return!0}},{key:"OnAcquire",value:function(){var e=this,t=function t(){e._stwain.SelectSource(function(){e._stwain.CloseSource(),e._stwain.OpenSource(),e._stwain.IfShowUI=!0,1==p.I.DWT.IfConfineMaskWithinTheViewer?(p.I.DWT.IfConfineMaskWithinTheViewer=!1,e._stwain.AcquireImage({},function(){p.I.DWT.IfConfineMaskWithinTheViewer=!0,null==window.onresize&&(window.onresize=function(){e._stwain.ShowImageEditorEx(-1,-1,-1,-1)})},function(){null==window.onresize&&(window.onresize=function(){e._stwain.ShowImageEditorEx(-1,-1,-1,-1)})})):e._stwain.AcquireImage()},function(){p.D.log("User did not select a source")})};p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._IfChangedWithinTheEditor?e.ShowDialogForSaveImage(e._webViewer.GetCurrentIndex(),!1,t,t):t()}},{key:"OnLoadImage",value:function(){var i=this,o=null,a=function a(){if(i._stwain._isMobileMode())return(e=document.getElementById(i.dwtMobileFileId)).value="",void e.click();var e,t,r=function r(){p.D.log("Loaded an image successfully."),null!=o&&i._stwain.Addon.PDF.SetConvertMode(o)},n=function n(e,t){p.D.log("Loading failed with the error: "+t),null!=o&&i._stwain.Addon.PDF.SetConvertMode(o)};i._stwain.IfShowFileDialog=!0,i._stwain.Addon&&i._stwain.Addon.PDF&&(e=!1,(i._stwain._isMobileMode()?p.D.License.checkProductKey(i._stwain,{PDFRasterizer:!0,Wasm:!0},!0):p.D.License.checkProductKey(i._stwain,{PDFRasterizer:!0},!0))&&(o=i._stwain.Addon.PDF.GetConvertMode(),t=i._stwain._innerFun("GetAddOnVersion",(0,A.dv)("pdf")),(e=p.D.env.bMac&&t==p.I.DWT.PdfMacVersion||p.D.env.bLinux&&t==p.I.DWT.PdfLinuxVersion||t==p.I.DWT.PdfVersion?!0:e)&&i._stwain.Addon.PDF.SetConvertMode(3))),i._stwain.LoadImageEx("",5,r,n)};p.D.Errors.ClearErrorInfo(i._stwain),i.hideImgEditorDilag(),i._IfChangedWithinTheEditor?i.ShowDialogForSaveImage(i._webViewer.GetCurrentIndex(),!1,a,a):a()}},{key:"OnPrint",value:function(){p.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetCurrentIndex()<0?w.output(this,"No image in Buffer"):this._webViewer._UIView.Print()}},{key:"OnRemoveAll",value:function(){p.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?w.output(this,"No image in Buffer"):this._stwain.RemoveAllImages()}},{key:"OnRemove",value:function(){p.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?w.output(this,"No image in Buffer"):this._stwain.RemoveAllSelectedImages()}},{key:"OnRotateLeft",value:function(){var e=this;p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(1==e._webViewer._ImgManager.bImageChangedInViewer?(e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,function(){e.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(e._stwain),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._stwain._isMobileMode()?(e.DVSRotate(270),e.UpdateInfo()):e._stwain.RotateLeft(e._webViewer.GetCurrentIndex()),e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()})):(e.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(e._stwain),e._IfSaveChangesOutSideOfTheEditor=!1,e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e._stwain._isMobileMode()?(e.DVSRotate(270),e.UpdateInfo()):e._stwain.RotateLeft(e._webViewer.GetCurrentIndex())),e.updateMode())}},{key:"RotateEx",value:function(e,t,r){var n=this;n._webViewer.GetHowManyImagesInBuffer()<=0||n._webViewer.GetCurrentIndex()<0?w.output(n,"No image in Buffer"):(void 0===e||void 0===t||void 0===r?alert(T.CustomizableDisplayInfo.errorMessages.insufficientParas):1==n._webViewer._ImgManager.bImageChangedInViewer?(n._IfSaveChangesOutSideOfTheEditor=!0,n._webViewer._ImgManager.bImageChangedInViewer=!1,n.__SaveImageInner(!1,function(){n.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(n._stwain),n._webViewer._ImgManager.bImageJustChangedInEditor=!0,n._stwain._isMobileMode()?(n.DVSRotateEx(e,t,r),n.UpdateInfo()):n._stwain.RotateEx(n._webViewer.GetCurrentIndex(),e,t,r),n._IfChangedWithinTheEditor=!0,n.iChangedIndex=n._webViewer.GetCurrentIndex(),n.updateButtons()})):(n.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(n._stwain),n._IfSaveChangesOutSideOfTheEditor=!1,n._webViewer._ImgManager.bImageJustChangedInEditor=!0,n._IfChangedWithinTheEditor=!0,n.iChangedIndex=n._webViewer.GetCurrentIndex(),n._stwain._isMobileMode()?(n.DVSRotateEx(e,t,r),n.UpdateInfo()):n._stwain.RotateEx(n._webViewer.GetCurrentIndex(),e,t,r)),n.updateMode())}},{key:"OnRotate",value:function(e){var t,r,n,i,o=this;p.D.Errors.ClearErrorInfo(o._stwain),o._webViewer.GetHowManyImagesInBuffer()<=0||o._webViewer.GetCurrentIndex()<0?w.output(o,"No image in Buffer"):(p.D.hide("dynamsoft_ImgSizeEditor"),p.D.get("dynamsoft_RotateAnyAngle")||(t=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',S.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',S.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',S.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',S.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',S.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"],p.D.one("body").append(t.join(""))),(t=p.D.get("dynamsoft_Angle_InterpolationMethod")).options.length=0,t.options.add(new Option("NearestNeighbor",1)),t.options.add(new Option("Bilinear",2)),t.options.add(new Option("Bicubic",3)),t=null,p.D.get("dynamsoft_btnRotateAnyAngleOK").onclick=function(){var e=p.D.get("dynamsoft_Angle").value;p.D.get("dynamsoft_Angle").className="";if(!/^\d+$/.test(e)||e<=0)return p.D.get("dynamsoft_Angle").className+=" invalid",p.D.get("dynamsoft_Angle").focus(),void alert(T.CustomizableDisplayInfo.errorMessages.invalidAngle);var t=p.D.get("dynamsoft_KeepSize").checked,e=(o.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(o._stwain),_()(e));o.RotateEx(e,t,p.D.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1);0==o._stwain.ErrorCode&&p.D.hide("dynamsoft_RotateAnyAngle")},p.D.get("dynamsoft_btnCancelRotateAnyAngle").onclick=function(){p.D.hide("dynamsoft_RotateAnyAngle")},t=p.D.get("dynamsoft_RotateAnyAngle"),p.D.toggle("dynamsoft_RotateAnyAngle"),n=(n=(r=e.srcElement||e.target).y)||r.offsetTop+1,i=(i=r.x)||r.offsetLeft+1,o.UIEditor&&"DIV"==o.UIEditor.nodeName?(t.style.top=e.clientY+document.documentElement.scrollTop+"px",t.style.left=e.clientX+document.documentElement.scrollLeft+"px"):(e=b.getElementById(o.UIEditor),t.style.top=n+r.offsetHeight+w.getTop(e)+"px",t.style.left=i+w.getLeft(e)+"px"),p.D.get("dynamsoft_Angle").value="45")}},{key:"OnRotateRight",value:function(){var e=this;p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(1==e._webViewer._ImgManager.bImageChangedInViewer?(e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,function(){e.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(e._stwain),e._stwain._isMobileMode()?(e.DVSRotate(90),e.UpdateInfo()):e._stwain.RotateRight(e._webViewer.GetCurrentIndex()),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()})):(e.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(e._stwain),e._IfSaveChangesOutSideOfTheEditor=!1,e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e._stwain._isMobileMode()?(e.DVSRotate(90),e.UpdateInfo()):e._stwain.RotateRight(e._webViewer.GetCurrentIndex())),e.updateMode())}},{key:"OnDeskew",value:function(){var e,t=this;p.D.Errors.ClearErrorInfo(t._stwain),t.hideImgEditorDilag(),t._webViewer.GetHowManyImagesInBuffer()<=0||t._webViewer.GetCurrentIndex()<0?w.output(t,"No image in Buffer"):1==t._webViewer._ImgManager.bImageChangedInViewer?(t._IfSaveChangesOutSideOfTheEditor=!0,t._webViewer._ImgManager.bImageChangedInViewer=!1,t.__SaveImageInner(!1,function(){var e;t.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(t._stwain),t._webViewer._ImgManager.bImageJustChangedInEditor=!0,t._stwain._isMobileMode()?t.DVSSkewAngle():(0<=(e=t._webViewer.GetCurrentIndex())&&t._stwain.GetSkewAngleAsync(e).then(function(e){t.RotateEx(e,!0,1)}),t._IfChangedWithinTheEditor=!0,t.iChangedIndex=t._webViewer.GetCurrentIndex(),t.updateButtons())})):(t.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(t._stwain),t._IfSaveChangesOutSideOfTheEditor=!1,t._webViewer._ImgManager.bImageJustChangedInEditor=!0,t._IfChangedWithinTheEditor=!0,t.iChangedIndex=t._webViewer.GetCurrentIndex(),t._stwain._isMobileMode()?t.DVSSkewAngle():0<=(e=t._webViewer.GetCurrentIndex())&&t._stwain.GetSkewAngleAsync(e).then(function(e){t.RotateEx(e,!0,1)}))}},{key:"OnCrop",value:function(){p.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag();var e=p.D.one(".ds-dwt-ui-icon-cropImage");e&&e.getEL()&&this.Crop()}},{key:"Crop",value:function(){var e,t,r,n,i,o=this;o._webViewer.GetHowManyImagesInBuffer()<=0||o._webViewer.GetCurrentIndex()<0?w.output(o,"No image in Buffer"):2!=(e=o.actualSelectedCanvasAreas).length?w.output(o,"No area selected for cropping"):(e=e[1],t=e.left,r=e.top,n=e.right,i=e.bottom,_()(t)-_()(n)!=0&&_()(r)-_()(i)!=0&&(1==o._webViewer._ImgManager.bImageChangedInViewer?(o._IfSaveChangesOutSideOfTheEditor=!0,o._webViewer._ImgManager.bImageChangedInViewer=!1,o.__SaveImageInner(!1,function(){o.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(o._stwain),o._stwain._isMobileMode()?(o.DVSCrop(_()(t),_()(r),_()(n),_()(i)),o.UpdateInfo()):o._stwain.Crop(o._webViewer.GetCurrentIndex(),_()(t),_()(r),_()(n),_()(i)),o._webViewer._ImgManager.bImageJustChangedInEditor=!0,o.__SetCropButtonGrey(!0),o.__SetEraseButtonGrey(!0),o._IfChangedWithinTheEditor=!0,o.iChangedIndex=o._webViewer.GetCurrentIndex(),o.updateButtons()})):(o.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(o._stwain),o._IfSaveChangesOutSideOfTheEditor=!1,o._webViewer._ImgManager.bImageJustChangedInEditor=!0,o._IfChangedWithinTheEditor=!0,o.iChangedIndex=o._webViewer.GetCurrentIndex(),o._stwain._isMobileMode()?(o.DVSCrop(_()(t),_()(r),_()(n),_()(i)),o.UpdateInfo()):o._stwain.Crop(o._webViewer.GetCurrentIndex(),_()(t),_()(r),_()(n),_()(i)),o.__SetCropButtonGrey(!0),o.__SetEraseButtonGrey(!0)),o.updateMode()))}},{key:"OnErase",value:function(){var e=p.D.one(".ds-dwt-ui-icon-erase");p.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),e&&e.getEL()&&this.Erase()}},{key:"Erase",value:function(){var o=this,a=!1;if(o._webViewer.GetHowManyImagesInBuffer()<=0||o._webViewer.GetCurrentIndex()<0)w.output(o,"No image in Buffer");else{var s=o.actualSelectedCanvasAreas;if(1==s.length)w.output(o,"No area selected for erasing");else{if(1==o._webViewer._ImgManager.bImageChangedInViewer)o._IfSaveChangesOutSideOfTheEditor=!0,o._webViewer._ImgManager.bImageChangedInViewer=!1,o.__SaveImageInner(!1,function(){for(var e=1;e<s.length;e++){var t=s[e],r=t.left,n=t.top,i=t.right,t=t.bottom;_()(r)-_()(i)!=0&&_()(n)-_()(t)!=0&&(o.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(o._stwain),o._stwain._isMobileMode()?(o.DVSErase(_()(r),_()(n),_()(i),_()(t)),o.UpdateInfo()):o._stwain.CutFrameToClipboard(o._webViewer.GetCurrentIndex(),_()(r),_()(n),_()(i),_()(t)),o._webViewer._ImgManager.bImageJustChangedInEditor=!0,o._IfChangedWithinTheEditor=!0,o.iChangedIndex=o._webViewer.GetCurrentIndex(),o.updateButtons(),a=!0)}o.__SetEraseButtonGrey(a),o.__SetCropButtonGrey(a)});else{o._IfSaveChangesOutSideOfTheEditor=!1,o._IfChangedWithinTheEditor=!0,o.iChangedIndex=o._webViewer.GetCurrentIndex();for(var e=1;e<s.length;e++){var t=s[e],r=t.left,n=t.top,i=t.right,t=t.bottom;_()(r)-_()(i)!=0&&_()(n)-_()(t)!=0&&(o.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(o._stwain),o._stwain._isMobileMode()?(o.DVSErase(_()(r),_()(n),_()(i),_()(t)),o.UpdateInfo()):o._stwain.CutFrameToClipboard(o._webViewer.GetCurrentIndex(),_()(r),_()(n),_()(i),_()(t)),o._webViewer._ImgManager.bImageJustChangedInEditor=!0,o._IfChangedWithinTheEditor=!0,o.iChangedIndex=o._webViewer.GetCurrentIndex(),a=!0)}o.__SetEraseButtonGrey(a),o.__SetCropButtonGrey(a)}o.updateMode()}}}},{key:"ChangeImageSize",value:function(e,t,r){var n=this;n._webViewer.GetHowManyImagesInBuffer()<=0||n._webViewer.GetCurrentIndex()<0?w.output(n,"No image in Buffer"):(1==n._webViewer._ImgManager.bImageChangedInViewer?(n._IfSaveChangesOutSideOfTheEditor=!0,n._webViewer._ImgManager.bImageChangedInViewer=!1,n.__SaveImageInner(!1,function(){n.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(n._stwain),n._webViewer._ImgManager.bImageJustChangedInEditor=!0,n._stwain._isMobileMode()?(n.DVSChangeImageSize(e,t,r),n.UpdateInfo()):n._stwain.ChangeImageSize(n._webViewer.GetCurrentIndex(),e,t,r),n._IfChangedWithinTheEditor=!0,n.iChangedIndex=n._webViewer.GetCurrentIndex(),n.updateButtons()})):(n.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(n._stwain),n._IfSaveChangesOutSideOfTheEditor=!1,n._webViewer._ImgManager.bImageJustChangedInEditor=!0,n._IfChangedWithinTheEditor=!0,n.iChangedIndex=n._webViewer.GetCurrentIndex(),n._stwain._isMobileMode()?(n.DVSChangeImageSize(e,t,r),n.UpdateInfo()):n._stwain.ChangeImageSize(n._webViewer.GetCurrentIndex(),e,t,r)),n.updateMode())}},{key:"OnChangeImageSize",value:function(e){var t,r,n,i,o=this;{if(p.D.Errors.ClearErrorInfo(o._stwain),o.hideImgEditorDilag(),!(o._webViewer.GetHowManyImagesInBuffer()<=0||o._webViewer.GetCurrentIndex()<0))return p.D.hide("dynamsoft_RotateAnyAngle"),p.D.get("dynamsoft_ImgSizeEditor")||(n=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',S.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',S.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",S.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',S.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',S.dlgChangeImageSize[4],'"/></span></div>',"</div>"],p.D.one("body").append(n.join(""))),(n=p.D.get("dynamsoft_InterpolationMethod")).options.length=0,n.options.add(new Option("NearestNeighbor",1)),n.options.add(new Option("Bilinear",2)),n.options.add(new Option("Bicubic",3)),n=null,p.D.get("dynamsoft_btnChangeImageSizeOK").onclick=function(){var e=p.D.get("dynamsoft_img_width").value,t=p.D.get("dynamsoft_img_height").value,r=(p.D.get("dynamsoft_img_width").className="",p.D.get("dynamsoft_img_height").className="",/^\d+$/);if(!r.test(t)||t<=0)return p.D.get("dynamsoft_img_height").className+=" invalid",p.D.get("dynamsoft_img_height").focus(),void alert(T.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth);if(!r.test(e)||e<=0)return p.D.get("dynamsoft_img_width").className+=" invalid",p.D.get("dynamsoft_img_width").focus(),void alert(T.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth);o.ChangeImageSize(e,t,p.D.get("dynamsoft_InterpolationMethod").selectedIndex+1);0==o._stwain.ErrorCode&&p.D.hide("dynamsoft_ImgSizeEditor")},p.D.get("dynamsoft_btnCancelChange").onclick=function(){p.D.hide("dynamsoft_ImgSizeEditor")},n=p.D.get("dynamsoft_ImgSizeEditor"),p.D.toggle("dynamsoft_ImgSizeEditor"),t=(t=(r=e.srcElement||e.target).y)||r.offsetTop+1,i=(i=r.x)||r.offsetLeft+1,o.UIEditor&&"DIV"==o.UIEditor.nodeName?(n.style.top=e.clientY+document.documentElement.scrollTop+"px",n.style.left=e.clientX+document.documentElement.scrollLeft+"px"):(e=b.getElementById(o.UIEditor),n.style.top=t+r.offsetHeight+w.getTop(e)+"px",n.style.left=i+w.getLeft(e)+"px"),t=o._webViewer.GetCurrentIndex(),-1!=(r=o.getImageManager().convertClientIndexToServerId(t))&&(!!o._webViewer._UIView.mapModelImageControl[r]&&(o._stwain._isMobileMode()?(i=n=0,(e=o.GetRealTimeMetadataByIndex())&&e.width&&(n=e.width),e&&e.height&&(i=e.height),p.D.get("dynamsoft_img_width").value=_()(n),p.D.get("dynamsoft_img_height").value=_()(i)):(p.D.get("dynamsoft_img_width").value=_()(o.getImageManager().GetImageWidth(t)),p.D.get("dynamsoft_img_height").value=_()(o.getImageManager().GetImageHeight(t))),!0));w.output(o,"No image in Buffer")}}},{key:"OnFlip",value:function(){var e=this;p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(1==e._webViewer._ImgManager.bImageChangedInViewer?(e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,function(){e.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(e._stwain),e._stwain._isMobileMode()?(e.DVSFlip(),e.UpdateInfo()):e._stwain.Flip(e._webViewer.GetCurrentIndex()),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()})):(e.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(e._stwain),e._IfSaveChangesOutSideOfTheEditor=!1,e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e._stwain._isMobileMode()?(e.DVSFlip(),e.UpdateInfo()):e._stwain.Flip(e._webViewer.GetCurrentIndex())),e.updateMode())}},{key:"OnMirror",value:function(){var e=this;p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(1==e._webViewer._ImgManager.bImageChangedInViewer?(e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,function(){e.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(e._stwain),e._stwain._isMobileMode()?(e.DVSMirror(),e.UpdateInfo()):e._stwain.Mirror(e._webViewer.GetCurrentIndex()),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()})):(e.bCouldBeTimeConsuming=!0,p.I.Lib.detect.showMask(e._stwain),e._IfSaveChangesOutSideOfTheEditor=!1,e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e._stwain._isMobileMode()?(e.DVSMirror(),e.UpdateInfo()):e._stwain.Mirror(e._webViewer.GetCurrentIndex())),e.updateMode())}},{key:"wheel",value:function(e){this.myImageEditor.zoom,this.myImageEditor.maxZoom,this.myImageEditor.zoom<this.myImageEditor.maxZoom?this.__SetZoomInButtonEnable(!0):this.__SetZoomInButtonEnable(!1),this.myImageEditor.zoom>this.myImageEditor.minZoom?this.__SetZoomOutButtonEnable(!0):this.__SetZoomOutButtonEnable(!1)}},{key:"OnZoomin",value:function(){var e=this,t=(e.hideImgEditorDilag(),p.D.one(".ds-dwt-ui-icon-zoomin-grey"));t&&t.getEL()||(p.D.Errors.ClearErrorInfo(e._stwain),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(this.myImageEditor.zoom<this.myImageEditor.maxZoom?(e.ZoomIn(),e.__SetZoomInButtonEnable(!0)):e.__SetZoomInButtonEnable(!1),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0)))}},{key:"OnOriginalsize",value:function(){var e=this;p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(e.SetZoom(1),e.__SetZoomInButtonEnable(!0),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0))}},{key:"OnZoomout",value:function(){var e=this,t=(e.hideImgEditorDilag(),p.D.one(".ds-dwt-ui-icon-zoomout-grey"));t&&t.getEL()||(p.D.Errors.ClearErrorInfo(e._stwain),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(this.myImageEditor.zoom>this.myImageEditor.minZoom?(e.ZoomOut(),e.__SetZoomOutButtonEnable(!0)):e.__SetZoomOutButtonEnable(!1),e.__SetZoomInButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0)))}},{key:"OnFitPage",value:function(){var e=this;p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(e.SetFitType(),e.__SetZoomInButtonEnable(!0),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0))}},{key:"OnFitWidth",value:function(){var e=this;p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(e.SetFitType("width"),e.__SetZoomInButtonEnable(!0),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0))}},{key:"OnFitHeight",value:function(){var e=this;p.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):(e.SetFitType("height"),e.__SetZoomInButtonEnable(!0),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0))}},{key:"OnHand",value:function(){var e=p.I.DWT.EnumDWT_MouseShape.Hand;this.hideImgEditorDilag(),this.clearSelectedAreas(),this.SetMouseSelectInner(e)}},{key:"OnSelect",value:function(){var e=p.I.DWT.EnumDWT_MouseShape.Crosshair;this.hideImgEditorDilag(),this.SetMouseSelectInner(e)}},{key:"OnClicktozoomin",value:function(){var e=p.I.DWT.EnumDWT_MouseShape.Zoom;this.hideImgEditorDilag(),this.clearSelectedAreas(),this.SetMouseSelectInner(e)}},{key:"SetMouseSelectInner",value:function(e){var t=this;if(p.D.Errors.ClearErrorInfo(t._stwain),t._webViewer.GetHowManyImagesInBuffer()<=0||t._webViewer.GetCurrentIndex()<0)w.output(t,"No image in Buffer");else if(t.SetMouseShape(e),t.__EnableMouseShapButtons(e),t.bMobile)switch(e){case p.I.DWT.EnumDWT_MouseShape.Crosshair:t.cursorStatus="rectselect";break;case p.I.DWT.EnumDWT_MouseShape.Zoom:t.cursorStatus="zoom";break;default:t.cursorStatus="hand"}else switch(e){case p.I.DWT.EnumDWT_MouseShape.Hand:t.cursorStatus="hand";break;case p.I.DWT.EnumDWT_MouseShape.Zoom:t.cursorStatus="zoom";break;default:t.cursorStatus="rectselect"}}},{key:"OnRestore",value:function(){this.hideImgEditorDilag();var e=p.D.one(".ds-dwt-ui-icon-saveImage-grey");e&&e.getEL()||(p.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?w.output(this,"No image in Buffer"):this.__RestoreImageInner(-1))}},{key:"__RestoreImageInner",value:function(n,i){var o,e,t,a=this;if(-1==a.iChangedIndex)return a._IfChangedWithinTheEditor=!1,void(i&&i());a._stwain._isMobileMode()?(a.Reset(),a._IfChangedWithinTheEditor=!1,a.iChangedIndex=-1,a.updateButtons(),i&&i()):(o=function o(e,t,r){return e&&(p.D.log("__RestoreImageInner: "+[e.guid].join(",")),a._stwain._isMobileMode()?a._webViewer.MobileUpdateImage(e,r):a._webViewer.UpdateImage(e,r)),a._IfChangedWithinTheEditor=!1,(a.iChangedIndex=-1)==(e&&e.serverId)?(a.updateButtons(),i&&i(),!1):(a.updateButtons(),-1==n&&-1==a.getImageManager().convertClientIndexToServerId(a._webViewer.GetCurrentIndex())?(p.D.Errors.IndexOutOfRange(a._stwain),i&&i(),!1):void(i&&i()))},e=!0,1==a._IfChangedWithinTheEditor&&(-1!=(t=a.getImageManager().convertClientIndexToServerId(a.iChangedIndex))&&a.OnGetImageFromServerForEdit(a._webViewer._UIView.mapModelImageControl[t],a.iChangedIndex,1,o),e=!1),e&&(a._IfChangedWithinTheEditor=!1,i&&i()))}},{key:"OnGetImageFromServerForEdit",value:function(n,i,e,o){var a=this;if(o&&a._webViewer._UIView.BaseUrl){var t,s=a.getImageManager().convertClientIndexToServerId(i);if(-1==s)return!1;a._stwain._isMobileMode()?1==e?((t=a._webViewer.GetMetaDataByIndex(i))&&(t.width=a.BackModelImageControl.width,t.height=a.BackModelImageControl.height,t.bitDepth=a.BackModelImageControl.bitDepth,t.resolutionX=a.BackModelImageControl.resolutionX,t.resolutionY=a.BackModelImageControl.resolutionY),n.ticks=d()(),n.imageUrl=a.BackImageBuffer,o(n,i,{metaData:t})):a.DVSSaveTransformResult(o):p.I.DWT.ConnectWithSocket?o():(t=ce.getUrlByAct(a._webViewer._UIView.BaseUrl,s,e),p.D.ajax({method:"GET",xhrFields:{withCredentials:!0},url:t,onSuccess:function(e){n.ticks=d()(),n.imageUrl=ce.getImageUrl(a._webViewer._UIView.BaseUrl,s,-1,-1,n.ticks),n.minImageUrl=ce.getImageUrl(a._webViewer._UIView.BaseUrl,s,_()(n.iImageControlWidth),_()(n.iImageControlHeight),n.ticks);var t,r=a._webViewer.GetMetaDataByIndex(i);r&&((t=a._webViewer._UIView.GetDataImageControl(s))&&t.width?r.width=t.width:r.width=a._stwain.GetImageWidth(i),t&&t.height?r.height=t.height:r.height=a._stwain.GetImageHeight(i)),o(n,i,r)},onError:function(){}}))}return!0}},{key:"OnSave",value:function(){var e=this,t=(e.hideImgEditorDilag(),p.D.one(".ds-dwt-ui-icon-saveImage-grey"));t&&t.getEL()||(p.D.Errors.ClearErrorInfo(e._stwain),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?w.output(e,"No image in Buffer"):e.__SaveImageInner(!0,function(){if(-1==e.getImageManager().convertClientIndexToServerId(e._webViewer.GetCurrentIndex()))return p.D.Errors.IndexOutOfRange(e._stwain),!1}))}},{key:"OnClose",value:function(){return p.D.Errors.ClearErrorInfo(this._stwain),1==this._IfChangedWithinTheEditor?(this.ShowDialogForSaveImage(-1,!0),!1):this.OnCloseInner()}},{key:"OnCloseInstall",value:function(){var e;0==this._IfChangedWithinTheEditor&&(e=this._stwain._containerElement,y.DCP_DWT_OnClickCloseInstall(e))}},{key:"Reset",value:function(e){return this.myImageEditor.reset()}},{key:"OnCloseInner",value:function(e){var t=this;if(p.D.Errors.ClearErrorInfo(t._stwain),1==t._IfChangedWithinTheEditor){if(!e)return t.ShowDialogForSaveImage(-1,!0),!1;var e=t._stwain._containerElement;y.DCP_DWT_OnClickCloseInstall(e),p.D.bChangeImage=0,t.__RestoreImageInner(-1)}return t.UIEditor&&1==t.bFullScreen?t.UIEditor&&t.UIEditor.parentNode&&0<t.UIEditor.childNodes.length&&t.UIEditor.parentNode.removeChild(t.UIEditor):t.myImageEditor&&t.myImageEditor.unbindView(t.UIEditor),t.bShowImageEdit=!1,t._webViewer.bShowImageEdit=!1,t.bShowImageEditForFullScreen=!1,t.CloseShowImageEditor(),t.hideImgEditorDilag(),(e=p.D.get("dynamsoft_ImgSizeEditor"))&&e.parentNode.removeChild(e),(e=p.D.get("dynamsoft_RotateAnyAngle"))&&e.parentNode.removeChild(e),p.I.Lib.dialog.selectsourcedlg&&p.I.Lib.dialog.selectsourcedlg.close(),window.onresize=null,document.body.style.overflow="",p.D.isFunction(t._stwain.__CloseImageEditorUI)&&t._stwain.__CloseImageEditorUI(),t.dispose()}},{key:"__EnableMouseShapButtons",value:function(e){this.ChangeButtonClass("hand","ds-dwt-ui-icon-hand"),this.ChangeButtonClass("select","ds-dwt-ui-icon-select"),this.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin"),e==p.I.DWT.EnumDWT_MouseShape.Hand?this.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected"):e==p.I.DWT.EnumDWT_MouseShape.Crosshair?this.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected"):e==p.I.DWT.EnumDWT_MouseShape.Zoom&&this.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")}},{key:"click",value:function(e){this.hideImgEditorDilag(),this.myImageEditor.zoom<this.myImageEditor.maxZoom?this.__SetZoomInButtonEnable(!0):this.__SetZoomInButtonEnable(!1),this.__SetZoomOutButtonEnable(!0)}},{key:"hideImgEditorDilag",value:function(){p.D.hide("dynamsoft_ImgSizeEditor"),p.D.hide("dynamsoft_RotateAnyAngle")}},{key:"imageClick",value:function(e,t){this.UpdateInfo()}},{key:"pageAreaSelected",value:function(e,t){var r=1;t&&0<t.length&&(0<(r=(t=t[t.length-1]).index?_()(t.index)+1:r)&&r<this.actualSelectedCanvasAreas.length?this.actualSelectedCanvasAreas[r]={left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}:r==this.actualSelectedCanvasAreas.length&&this.actualSelectedCanvasAreas.push({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}),2==this.actualSelectedCanvasAreas.length&&0<t.width&&0<t.height?(this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage"),this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase")):(this.__SetCropButtonGrey(!1),this.__SetEraseButtonGrey(!1)))}},{key:"pageAreaUnselected",value:function(e){this.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")}},{key:"onDrop",value:function(e){this._webViewer.dropEvent(e)}},{key:"getImageManager",value:function(){return this._webViewer._ImgManager}}]),i}()),de=(p.D.UI.ImageEditorInner=le,function(){function r(e,t){(0,a.Z)(this,r),(0,o.Z)(this,"_imageEditorInner",void 0),(0,o.Z)(this,"myImageEditor",void 0),this._imageEditorInner=new le(e,t),this.myImageEditor=this._imageEditorInner.myImageEditor}return(0,s.Z)(r,[{key:"show",value:function(){return this._imageEditorInner.show()}},{key:"hide",value:function(){return this._imageEditorInner.hide()}},{key:"dispose",value:function(){return this._imageEditorInner.OnCloseInner(!0)}}]),r}());function he(e,t){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}p.D.UI.ImageEditor=de;var C={showThumbnail:!1,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:i,pageBorder:Z,hoverPageBackground:J,hoverPageBorder:X,placeholderBackground:Y,autoChangeIndex:!1},ge=new(e()),fe=function(){function n(e,t){(0,a.Z)(this,n),he(this,ge);var r=this;if(r._webViewer=e,t){if(t.location)switch(t.location){case"left":t.location="horizontal",t.sequence=-1;break;case"right":t.location="horizontal",t.sequence=1;break;case"top":t.location="vertical",t.sequence=-1;break;case"bottom":t.location="vertical",t.sequence=1;break;default:t.location="horizontal",t.sequence=-1}else t.location="horizontal",t.sequence=-1;p.D.isUndefined(t.size)&&(t.size=C.size),p.D.isUndefined(t.columns)&&(t.columns=C.columns),p.D.isUndefined(t.rows)&&(t.rows=C.rows),(p.D.isUndefined(t.scrollDirection)||"horizontal"!=t.scrollDirection)&&(t.scrollDirection=C.scrollDirection),p.D.isUndefined(t.pageMargin)&&(t.pageMargin=C.pageMargin),p.D.isUndefined(t.allowKeyboardControl)&&(t.allowKeyboardControl=C.allowKeyboardControl),p.D.isUndefined(t.allowPageDragging)&&(t.allowPageDragging=C.allowPageDragging),p.D.isUndefined(t.allowResizing)&&(t.allowResizing=C.allowResizing),p.D.isUndefined(t.border)&&(t.border=C.border),p.D.isUndefined(t.pageBackground)&&(t.pageBackground=C.pageBackground),p.D.isUndefined(t.pageBorder)&&(t.pageBorder=C.pageBorder),p.D.isUndefined(t.hoverPageBackground)&&(t.hoverPageBackground=C.hoverPageBackground),p.D.isUndefined(t.hoverPageBorder)&&(t.hoverPageBorder=C.hoverPageBorder),p.D.isUndefined(t.placeholderBackground)&&(t.placeholderBackground=C.placeholderBackground),p.D.isUndefined(t.autoChangeIndex)&&(t.autoChangeIndex=C.autoChangeIndex)}else t=p.I.Lib.clone(C);p.D.isUndefined(t.background)&&(t.background=r._webViewer.GetBackground()),p.D.isUndefined(t.pageNumber)&&(t.pageNumber=r._webViewer.GetPageNumberStyle()),p.D.isUndefined(t.checkbox)&&(t.checkbox=r._webViewer.GetCheckboxStyle()),p.D.isUndefined(t.multiSelectMode)&&(t.multiSelectMode=r._webViewer.GetMultiSelectMode()==p.I.DWT.EnumDWT_SelectionMode.Multiple),p.D.isUndefined(t.selectedPageBorder)&&(e=r._webViewer.GetSelectedPageBorder(),p.D.isUndef(e)?t.selectedPageBorder=C.selectedPageBorder:t.selectedPageBorder=e),p.D.isUndefined(t.selectedPageBackground)&&(e=r._webViewer.GetSelectedPageBackground(),p.D.isUndef(e)?t.selectedPageBackground=C.selectedPageBackground:t.selectedPageBackground=e),t.showThumbnail=!1,r.myThumbnailViewer=r._webViewer.myViewer.createThumbnailView(t),0!=r._webViewer.mydvs.Error.errorCode&&p.D.Errors.WebviewerError(r._webViewer._stwain,r._webViewer.mydvs.Error.errorMessage,r._webViewer.mydvs.Error.errorCode),function(e,t,r){if(t.has(e))return r;throw new TypeError("attempted to get private field on non-instance")}(this,ge,me).call(this),r.bDispose=!1,r._webViewer.bThumbnailDispose=!1}return(0,s.Z)(n,[{key:"show",value:function(){return!!this._webViewer._NouiNotSupport("show")&&(this.myThumbnailViewer?(this._webViewer.myViewer.setViewMode(1,1),this._webViewer.SetIfSinglePageMode(!0),this.myThumbnailViewer.showThumbnail=!0):(this.bDispose?p.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):p.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1))}},{key:"hide",value:function(){return!!this._webViewer._NouiNotSupport("hide")&&(this.myThumbnailViewer?!(this.myThumbnailViewer.showThumbnail=!1):(this.bDispose?p.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):p.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1))}},{key:"dispose",value:function(){var e;return!!this.bDispose||((e=this._webViewer.myViewer.removeThumbnailView(this.myThumbnailViewer))&&(this.bDispose=!0,this._webViewer._thumbnailViewer=undefined,this._webViewer.myThumbnailViewer=undefined,this.myThumbnailViewer=undefined,this._webViewer.bThumbnailDispose=!0),e)}},{key:"updateViewMode",value:function(e){if(!this.myThumbnailViewer)return this.bDispose?p.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):p.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1;if(e&&e.columns&&e.rows){if(e.columns<0||e.rows<0)return p.D.Errors.InvalidPropertyValue(this._webViewer._stwain),!1;this.myThumbnailViewer.showThumbnail=!1,this.myThumbnailViewer.setViewMode(e.columns,e.rows),!e.scrollDirection||"horizontal"!=e.scrollDirection&&"vertical"!=e.scrollDirection||(this.myThumbnailViewer.scrollDirection=e.scrollDirection),this.myThumbnailViewer.showThumbnail=!0}return!0}},{key:"updateCheckboxStyle",value:function(e){return this.myThumbnailViewer?(this.myThumbnailViewer.checkbox=e,!0):(this.bDispose?p.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):p.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1)}},{key:"updatePageNumberStyle",value:function(e){return this.myThumbnailViewer?(this.myThumbnailViewer.pageNumber=e,!0):(this.bDispose?p.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):p.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1)}},{key:"on",value:function(e,t){e&&(p.D.isFunction(t)?this.myThumbnailViewer.on(e,t):p.D.Errors.CallbackNotAFunction(this._webViewer._stwain))}},{key:"off",value:function(e,t){var r=this;e&&(p.D.isUndefined(t)?(r.myThumbnailViewer.off(e),"click"==e&&r.myThumbnailViewer.on("click",function(e,t){r._webViewer.UpdateInfo(!0,!1,!0)})):p.D.isFunction(t)?r.myThumbnailViewer.off(e,t):p.D.Errors.CallbackNotAFunction(r._webViewer._stwain))}}]),n}();function me(){var t=this,e=p.D.html5.Funs.DEF;e(t,"location",{get:function(){return t._webViewer.GetThumLocation()},set:function(e){return t._webViewer.SetThumLocation(e)}}),e(t,"size",{get:function(){return t._webViewer.GetThumSize()},set:function(e){return t._webViewer.SetThumSize(e)}}),e(t,"scrollDirection",{get:function(){return t._webViewer.GetThumScrollDirection()},set:function(e){return t._webViewer.SetThumScrollDirection(e)}}),e(t,"showPageNumber",{get:function(){return t._webViewer.GetThumShowPageNumber()},set:function(e){return t._webViewer.SetThumShowPageNumber(e)}}),e(t,"showCheckbox",{get:function(){return t._webViewer.GetThumShowCheckbox()},set:function(e){return t._webViewer.SetThumShowCheckbox(e)}}),e(t,"pageMargin",{get:function(){return t._webViewer.GetThumMargin()},set:function(e){return t._webViewer.SetThumMargin(e)}}),e(t,"border",{get:function(){return t._webViewer.GetThumBorder()},set:function(e){return t._webViewer.SetThumBorder(e)}}),e(t,"background",{get:function(){return t._webViewer.GetThumBackground()},set:function(e){return t._webViewer.SetThumBackground(e)}}),e(t,"pageBackground",{get:function(){return t._webViewer.GetThumPageBackground()},set:function(e){return t._webViewer.SetThumPageBackground(e)}}),e(t,"pageBorder",{get:function(){return t._webViewer.GetThumPageBorder()},set:function(e){return t._webViewer.SetThumPageBorder(e)}}),e(t,"hoverPageBackground",{get:function(){return t._webViewer.GetThumHoverBackground()},set:function(e){return t._webViewer.SetThumHoverBackground(e)}}),e(t,"hoverPageBorder",{get:function(){return t._webViewer.GetThumHoverBorder()},set:function(e){return t._webViewer.SetThumHoverBorder(e)}}),e(t,"placeholderBackground",{get:function(){return t._webViewer.GetThumPlaceholderBackground()},set:function(e){return t._webViewer.SetThumPlaceholderBackground(e)}}),e(t,"selectedPageBorder",{get:function(){return t._webViewer.GetThumSelectedPageBorder()},set:function(e){return t._webViewer.SetThumSelectedPageBorder(e)}}),e(t,"selectedPageBackground",{get:function(){return t._webViewer.GetThumSelectedPageBackground()},set:function(e){return t._webViewer.SetThumSelectedPageBackground(e)}}),e(t,"allowKeyboardControl",{get:function(){return t._webViewer.GetThumAllowKeyboardControl()},set:function(e){return t._webViewer.SetThumAllowKeyboardControl(e)}}),e(t,"allowPageDragging",{get:function(){return t._webViewer.GetThumAllowDrag()},set:function(e){return t._webViewer.SetThumAllowDrag(e)}}),e(t,"allowResizing",{get:function(){return t._webViewer.GetThumAllowResize()},set:function(e){return t._webViewer.SetThumAllowResize(e)}}),e(t,"autoChangeIndex",{get:function(){return t._webViewer.GetThumAutoChangeIndex()},set:function(e){return t._webViewer.SetThumAutoChangeIndex(e)}})}p.D.UI.ThumbnailViewer=fe;var e=t(5238),_e=t.n(e),e=t(3662),pe=t.n(e),E="dvsDb",Ie="dvsDoc",De=function(){function r(e,t){(0,a.Z)(this,r),(0,o.Z)(this,"_db",void 0),(0,o.Z)(this,"syncDb",void 0),this._db=e.DataControl._db,t?this.syncDb={}:((e=this._db.DBMng._d)[E]||(e[E]={}),e[E][Ie]||(e[E][Ie]={}),this.syncDb=e[E][Ie])}return(0,s.Z)(r,[{key:"setCustomDataSync",value:function(e,t){return this.syncDb[e].customData=t,!0}},{key:"getCustomDataSync",value:function(e){return this.syncDb[e]||(this.syncDb[e]={}),this.syncDb[e].customData||(this.syncDb[e].customData={}),this.syncDb[e].customData}},{key:"getOriDataSync",value:function(e){return this.syncDb[e]||(this.syncDb[e]={}),this.syncDb[e].oriData}},{key:"getMetaDataSync",value:function(e){return this._db.getMetadata(e)}},{key:"dispose",value:function(){this._db=null,this.syncDb=null}}]),r}(),ve=function(){function t(e){(0,a.Z)(this,t),(0,o.Z)(this,"_fileTree",void 0),this._fileTree=e._tree}return(0,s.Z)(t,[{key:"createFile",value:function(e){return this._fileTree.createFile(e)}},{key:"openFile",value:function(e){var e=this._fileTree.findChild(this._fileTree.dfNode,e);return e&&"file"===e.type?_e()(e=e.chs).call(e):[]}},{key:"findFile",value:function(e){if(this._fileTree.dfNode){e=this._fileTree.findChild(this._fileTree.dfNode,e);if(e&&"file"===e.type)return e}return null}},{key:"replaceFileContent",value:function(e,t){var r,e=this.findFile(e);e&&(pe()(r=e.chs).call(r,0),e.chs=t)}},{key:"getFileCount",value:function(e){e=this.findFile(e);return e?e.chs.length:0}},{key:"getIndexByUidInFile",value:function(e,t){var r=this.findFile(e);if(r)for(var n=r.chs.length,i=0;i<n;i++)if(r.chs[i]==t)return i;return-1}},{key:"removeByIndexInFile",value:function(e,t){e=this.findFile(e);if(e){var r=e.chs.length;if(0<=t&&t<r)return pe()(r=e.chs).call(r,t,1),!0}return!1}},{key:"dispose",value:function(){this._fileTree=null}}]),t}(),be=document,M=p.I.DWT,P=(p.D.html5.Funs.DEF,["topPageChanged","click","rightclick","dblclick","mousemove","pageAreaSelected","pageAreaUnselected","dragdone","onDrop","bufferChanged","pageChange"]),ye={toolbars:{header:!1,topMenu:!1,asideMenu:!1,bottomMenu:!1},groups:{},buttons:{},thumbnail:{showThumbnailControl:!1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,border:"",background:n,pageBackground:i,pageBorder:Z,hoverPageBackground:J,hoverPageBorder:X,placeholderBackground:Y,selectedPageBorder:K,selectedPageBackground:Q,autoChangeIndex:!1,checkbox:f,pageNumber:I},canvasConfig:{canvasMouseShape:"crosshair",canvasBackground:n,canvasBorder:"",selectedPageBorder:K,pageBorder:Z,pageMargin:10,pageBackground:i,selectedPageBackground:Q,hoverPageBorder:X,hoverPageBackground:J,placeholderBackground:Y,autoChangeIndex:!1,allowPageDragging:!0,columns:1,rows:1,scrollDirection:"vertical",checkbox:f,pageNumber:I},showSidebar:!1,showMain:!0,showViewer:!0,sidebarWidth:"180",outerBorder:"1px solid rgb(204, 204, 204)",topMenuBorder:"",selectedAreaBorderColor:"rgb(42, 29, 43)",selectionRectAspectRatio:0,ifAutoScroll:!0,useOuterDrop:!0,allowSlide:!0},W={background:"#434246",topMenuBorder:"",innerBorder:"",promptToSaveChange:!0,buttons:M.CustomizableDisplayInfo.buttons,dialogText:M.CustomizableDisplayInfo.dialogText},x=(M.CustomizableDisplayInfo.buttons,M.CustomizableDisplayInfo.dialogText,{scannerViewer:{headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},bodyStyle:{background:"#ffffff ",loaderBarSource:""},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},fullScreen:!1,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},scanButtonStyle:{background:"#fe8e14",color:"#ffffff"},resolution:{visibility:"visible",valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoScan:{visibility:"visible",enableAutoScan:!1},autoDetect:{visibility:"visible",enableAutoDetect:!1,acceptedPolygonConfidence:80,fpsLimit:3,acceptedBlurryScore:0,autoCaptureDelay:1e3},continuousScan:!0,switchCamera:{visibility:"visible"},loadLocalFile:{visibility:"visible"},funcConfirmExit:p.I.funcConfirmExit},documentEditorSettings:{visibility:"visible",defaultViewerName:"CropViewer",headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14",disabledColor:"#808080"},bodyStyle:{background:"#ffffff ",loaderBarSource:""},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},insert:{visibility:"visible",position:"before"},remove:{visibility:"visible",funcConfirmRemove:p.I.funcConfirmRemove},rotateLeft:{visibility:"visible"},filter:{visibility:"visible",valueList:[{label:"Original",value:"original",option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],defaultValue:"original",applyToAll:{visibility:"visible",enableApplyToAll:!1,label:"Apply to all"}},crop:{visibility:"visible"},cropViewer:{visibility:"visible",polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},rotateLeft:{visibility:"visible"},rotateRight:{visibility:"visible"},autoDetectBorder:{visibility:"visible"},funcConfirmExit:p.I.funcConfirmCropViewerExit},funcConfirmExit:p.I.funcConfirmMainViewerExit,funcConfirmExitAfterSave:p.I.funcConfirmExitAfterSave}}),k={isFunction:function(e){return e&&"function"==typeof e},addClass:function(e,t){e=p.D.one(e);e&&0<e.length&&e.addClass(t)},removeClass:function(e,t){e=p.D.one(e);e&&0<e.length&&e.removeClass(t)},output:function(e,t){p.I.DWT.Debug&&p.D.log(t)},getTop:function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=k.getTop(e.offsetParent)),t},getLeft:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=k.getLeft(e.offsetParent)),t}},Te=(p.D._safePromptCustomMsg(function(){W.buttons=M.CustomizableDisplayInfo.buttons,W.dialogText=M.CustomizableDisplayInfo.dialogText}),function(){function i(e,t,r){(0,a.Z)(this,i),(0,o.Z)(this,"_dvsWrapper",null),(0,o.Z)(this,"_fileWrapper",null),(0,o.Z)(this,"_bFireSync",!0);var n=this;n._ImgManager=e,n._stwain=e._stwain,n._UIView=r,n._currentTag="",n.bShowImageEdit=!1,n.acceptDrop=!0,n.currentFileName=h,n._documentScanConfiguration="",n.addCSSForShowVideo=!1,n.ifWebviewerInit=!1,n._Init(t),p.I.funcConfirmExit&&p.I.Lib.isFunction(p.I.funcConfirmExit)&&(x.scannerViewer.funcConfirmExit=p.I.funcConfirmExit),p.I.funcConfirmRemove&&p.I.Lib.isFunction(p.I.funcConfirmRemove)&&(x.documentEditorSettings.remove.funcConfirmRemove=p.I.funcConfirmRemove),p.I.funcConfirmMainViewerExit&&p.I.Lib.isFunction(p.I.funcConfirmMainViewerExit)&&(x.documentEditorSettings.funcConfirmExit=p.I.funcConfirmMainViewerExit),p.I.funcConfirmExitAfterSave&&p.I.Lib.isFunction(p.I.funcConfirmExitAfterSave)&&(x.documentEditorSettings.funcConfirmExitAfterSave=p.I.funcConfirmExitAfterSave),p.I.funcConfirmCropViewerExit&&p.I.Lib.isFunction(p.I.funcConfirmCropViewerExit)&&(x.documentEditorSettings.cropViewer.funcConfirmExit=p.I.funcConfirmCropViewerExit),n._globalScanConfiguration_ScannViewer=p.I.Lib.clone(x),n._globalScanConfiguration=p.I.Lib.clone(x),n._globalScanConfiguration.documentEditorSettings.defaultViewerName="mainViewer",j&&p.I.DWT.UseDefaultViewer&&(n._stwain.Viewer=new j(n,e))}return(0,s.Z)(i,[{key:"dispose",value:function(){var e=this;e.containerElement=null,e.myViewer&&(e.myViewer.off("bufferChanged"),e.mydvs.ViewControl.removeViewer(e.myViewer),e.myViewer=null),e.mydvs&&(e.mydvs.dispose(),e.mydvs=null),e._dvsWrapper&&(e._dvsWrapper.dispose(),e._dvsWrapper=null),e._fileWrapper&&(e._fileWrapper.dispose(),e._fileWrapper=null),e.myccvs&&(e.myccvs.dispose(),e.myccvs=null),e.mydocEditManager&&(e.mydocEditManager.dispose(),e.mydocEditManager=null),e._UIView=null,e._ImgManager=null,e._stwain.Viewer&&(e._stwain.Viewer.dispose(),e._stwain.Viewer=null),e._stwain=null}},{key:"_Init",value:function(e){var t,r,n=this;e.Container&&(p.D.isNodeList(e.Container)||p.D.isArray(e.Container)&&0<e.Container.length)&&(r=e.Container[0])?((t=document.createElement("div")).style.width="100%",t.style.height="100%",r.appendChild(t),n.containerElement=r):n.containerElement="",n.mydvs?""!=n.containerElement&&(n.BindView(n.containerElement),n.show()):(n.initWidth=e.Width,n.initHeight=e.Height,(r=ye).width=n.initWidth,r.height=n.initHeight,n._stwain._isPC()||(r.canvasConfig.canvasMouseShape="pointer"),n.mydvs=new p.I.ViewModel({uiConfig:r,displayMode:"continuous",fitType:"window",scrollerConfig:{}}),n._dvsWrapper=new De(n.mydvs),n._fileWrapper=new ve(n.mydvs.File),n._bindViewUi=!1,n.myViewer=n.mydvs.ViewControl.getViewerByUid(),p.I.DWT.UseDefaultViewer&&n.containerElement&&n.mydvs.ViewControl&&(n.mydvs.ViewControl.bindViewUiConstructor(p.I.ViewUi),n.myViewer.bindView(t),n._bindViewUi=!0),n.myViewer&&(n._stwain._isPC()?n.SetOperationMode(1):n.SetOperationMode(0)),n.containerElement&&n._InitDVS(),n._bindEvent=!1,n._bindViewUi?(n._BindViewerEvents(),n._bindEvent=!0):n.myViewer.on("bufferChanged",function(e,t){n.bufferChanged(e,t)}),n._bRegistedLoad=!1)}},{key:"BindView",value:function(e){var t,r=this;return r.OnCloseImageEditor(),e=e&&"DIV"==e.nodeName?e:be.getElementById(e),p.D.isUndefined(e)||p.D.isNull(e)?t=e:((t=document.createElement("div")).style.width="100%",t.style.height="100%",e.appendChild(t)),0==r._bindViewUi&&r.mydvs.ViewControl&&(r.mydvs.ViewControl.bindViewUiConstructor(p.I.ViewUi),p.D.html5.ui.initProgress(r._stwain),r._bindViewUi=!0),p.D.isUndefined(r.myViewer.width)&&(""!=e.style.width?r.initWidth=e.style.width:0<e.clientWidth?r.initWidth=e.clientWidth:0<e.offsetWidth?r.initWidth=e.offsetWidth:0<e.scrollWidth?r.initWidth=e.scrollWidth:r.initWidth=100),p.D.isUndefined(r.myViewer.height)&&(""!=e.style.height?r.initHeight=e.style.height:0<e.clientHeight?r.initHeight=e.clientHeight:0<e.offsetHeight?r.initHeight=e.offsetHeight:0<e.scrollHeight?r.initHeight=e.scrollHeight:r.initHeight=100),(t=r.myViewer.bindView(t))?(r.myViewer.showViewer=!1,r.containerElement=e,r._stwain._containerElement=e,r._stwain._bBindViewer=!0,r._InitDVS(),r.SetAcceptDrop(!0),r.SetAllowSlide(!0),r.myViewer.off("bufferChanged"),r.resetUISettingsInner(!1,r.GetWidth(),r.GetHeight()),r._bindEvent||r._BindViewerEvents(),r.hide(),t):(p.D.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode),!1)}},{key:"CreateTemplate",value:function(e,t){return this._stwain.Template=new re(this,this._ImgManager,t),this._stwain.Template}},{key:"BindTemplate",value:function(e,t){var r=!1;return r=t&&t._documentTemplate?t._documentTemplate.BindView(e):r}},{key:"show",value:function(){var e;return!!this._NouiNotSupport("show")&&(this._stwain.Template&&this._stwain.Template._documentTemplate&&(this._stwain.Template._documentTemplate.ifShowDocumentTemplate(!0),(e=document.getElementById("btnCapture"+this.myViewer.postfix))&&(e.style.display="")),this.myViewer.showViewer=!0)}},{key:"hide",value:function(){var e;return!!this._NouiNotSupport("hide")&&(this._stwain.Template&&this._stwain.Template._documentTemplate&&(this._stwain.Template._documentTemplate.ifShowDocumentTemplate(!1),(e=document.getElementById("btnCapture"+this.myViewer.postfix))&&(e.style.display="none")),!(this.myViewer.showViewer=!1))}},{key:"UnbindView",value:function(){var e,t=this;if(t._stwain&&t._stwain.Addon&&t._stwain.Addon.Camera&&t._stwain.Addon.Camera._viewer&&""!=t._stwain.Addon.Camera.getStatus()&&t._stwain.Addon.Camera.closeSource(),e=t.myViewer.unbindView()){if(t._bindViewUi=!1,t._UnbindViewerEvents(),t._bindEvent=!1,t._imageEditor&&t._imageEditor.dispose(),t._documentEditor&&t._documentEditor.dispose(),t._thumbnailViewer&&t._thumbnailViewer.dispose(),t._customElement&&t._customElement.dispose(),t.closeVideo(),t.containerElement&&t.containerElement.childNodes&&0<t.containerElement.childNodes.length)if(1==t.containerElement.childNodes.length)t.containerElement&&0==t.containerElement.childNodes[0].childNodes.length&&t.containerElement.removeChild(t.containerElement.childNodes[0]);else for(var r=t.containerElement.childNodes.length-1;0<=r;r--)t.containerElement&&t.containerElement.removeChild(t.containerElement.childNodes[r]);t.containerElement=""}else p.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode);return t._stwain._bBindViewer=!1,e}},{key:"SetUIView",value:function(e){this._UIView=e}},{key:"_BindViewerEvents",value:function(){var n=this;n.myViewer&&(n.myViewer.off("bufferChanged"),p.D.each(P,function(r){n.myViewer.on(r,function(e,t){n[r](e,t)})}))}},{key:"_UnbindViewerEvents",value:function(){var t=this;p.D.each(P,function(e){"bufferChanged"!=e&&t.myViewer.off(e)})}},{key:"_InitDVS",value:function(){var e=this;e.ifWebviewerInit=!0,e.myViewer.showHeader=!1,e.myViewer.showTopMenu=!1,e.myViewer.showFooter=!1,e.myViewer.showMain=!0,e.myViewer.bOnlyShowThumbnailsView=!1,e.myViewer.showThumbnailControl=!1,e.myViewer.showLatestPage=!0,e.myViewer.minZoom=e._UIView.MIN_ZOOM,e.myViewer.maxZoom=e._UIView.MAX_ZOOM}},{key:"ShowImageEditor",value:function(e,t,r,n){return e&&r&&n?(W.element=e,W.width=r,W.height=n):(W.element=undefined,W.width=undefined,W.height=undefined),W.border=this.GetBorder(),W.selectionRectAspectRatio=this.GetSelectionRectAspectRatio(),this.createImageEditor(W),0!=this._stwain._errorCode&&(this._imageEditor.dispose(),this.createImageEditor(W)),this._imageEditor.show(),!0}},{key:"OnCloseImageEditor",value:function(){return!!this.bShowImageEdit&&(this._imageEditor&&this._imageEditor.dispose(),this.bShowImageEdit=!1,this._imageEditor=undefined,this._imageEditorInner=undefined,!0)}},{key:"GetUidByIndex",value:function(e){return e<0||e>=this.GetHowManyImagesInBuffer()?(p.D.Errors.IndexOutOfRange(this._stwain),-1):this.myViewer.getUidByIndex(e)}},{key:"GetIndexByUid",value:function(e){return e&&""!=e&&-1!=e?this.myViewer.getIndexByUid(e):(p.D.Errors.IndexOutOfRange(this._stwain),-1)}},{key:"SetMetaDataByIndex",value:function(e,t){if(!(e<0||e>=this.GetHowManyImagesInBuffer()))return this.myViewer.setMetadataByIndex(e,t);p.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetMetaDataByIndex",value:function(e){if(!(e<0||e>=this.GetHowManyImagesInBuffer()))return this.myViewer.getMetadataByIndex(e);p.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetCustomDataByIndex",value:function(e){if(!(e<0||e>=this.GetHowManyImagesInBuffer()))return e=p.D.isArray(e)?e[0]:e,this.myViewer.getCustomDataByIndex(e);p.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetHowManyImagesInBuffer",value:function(){return p.D.isUndefined(this.myViewer.currentPageCount)?0:this.myViewer.currentPageCount}},{key:"UpdateInfo",value:function(e,t,r){t&&p.I.Lib.hideMask(),e&&this.bShowImageEdit&&this._imageEditorInner&&this._imageEditorInner.updateMode(r)}},{key:"AppendImage",value:function(e,t){var r,n,i=e.imageUrl,o=e.minImageUrl,a=e.serverId,s=e.bAppendImage,u=e.index,c={},l=this.currentFileName;if(t&&(p.D.isUndef(t.currentFileName)||(l=t.currentFileName),p.D.isUndef(t.width)||(c.width=t.width),p.D.isUndef(t.height)||(c.height=t.height),p.D.isUndef(t.bitDepth)||(c.bitDepth=t.bitDepth),p.D.isUndef(t.resolutionX)||(c.resolutionX=t.resolutionX),p.D.isUndef(t.resolutionY)||(c.resolutionY=t.resolutionY),p.D.isUndef(t.oriBlobData)||(n=t.oriBlobData)),0==this.ifFileNameExist(l))return!1;if(p.D.log("AppendImage_oriData:"+i),s||0==s&&0==this.GetHowManyImagesInBuffer()){if(n){var d,h={imageId:a};for(d in n)n.hasOwnProperty(d)&&(h[d]=n[d]);r=this.mydvs.DataControl.appendSync(l,[{oriData:i,minData:o,metadata:c,customData:h}])}else r=this.mydvs.DataControl.appendSync(l,[{oriData:i,minData:o,metadata:c,customData:{imageId:a}}]);return e.uuid=r[0],this.UpdateInfo(!0),r[0]}return r=this.mydvs.DataControl.insertSync(l,[{oriData:i,minData:o,metadata:c,customData:{imageId:a}}],u),e.uuid=r[0],this.UpdateInfo(!0),r[0]}},{key:"MobileAppendImage",value:function(e,t){var r=e.bAppendImage,n=e.index,i={},o=this.currentFileName;return t.imageId=e.serverId,t&&t.currentFileName&&(o=t.currentFileName),0!=this.ifFileNameExist(o)&&(t&&t.metadata&&(p.D.isUndef(t.metadata.width)||(i.width=t.metadata.width),p.D.isUndef(t.metadata.imageWidth)||(i.width=t.metadata.imageWidth),p.D.isUndef(t.metadata.height)||(i.height=t.metadata.height),p.D.isUndef(t.metadata.imageHeight)||(i.height=t.metadata.imageHeight),p.D.isUndef(t.metadata.bitDepth)||(i.bitDepth=t.metadata.bitDepth),p.D.isUndef(t.metadata.imageBitDepth)||(i.bitDepth=t.metadata.imageBitDepth),p.D.isUndef(t.metadata.resolutionX)||(i.resolutionX=t.metadata.resolutionX),p.D.isUndef(t.metadata.imageXResolution)||(i.resolutionX=t.metadata.imageXResolution),p.D.isUndef(t.metadata.resolutionY)||(i.resolutionY=t.metadata.resolutionY),p.D.isUndef(t.metadata.imageYResolution)||(i.resolutionY=t.metadata.imageYResolution),p.D.isUndef(t.metadata.oriBlobData)||(i.oriBlobData=t.metadata.oriBlobData),delete t.metadata),"url"!=t.dataType&&"srcId"in t?(r=0==r&&0==this.GetHowManyImagesInBuffer()?this.mydvs.DataControl.appendSync(o,[{oriData:null,minData:null,metadata:i,customData:t}]):this.mydvs.DataControl.insertSync(o,[{oriData:null,minData:null,metadata:i,customData:t}],n),e.uuid=r[0],this.UpdateInfo(!0),r[0]):("src"in t&&(e.imageUrl=t.src,delete t.src),"imageUrl"in t&&(e.imageUrl=t.imageUrl,delete t.imageUrl),i.currentFileName=o,this.AppendImage(e,i)))}},{key:"UpdateImage",value:function(e,t){var r=e.imageUrl,n=e.minImageUrl,i=e.serverId,e=e.uuid,o={};return t&&(p.D.isUndef(t.width)||(o.width=t.width),p.D.isUndef(t.height)||(o.height=t.height),p.D.isUndef(t.bitDepth)||(o.bitDepth=t.bitDepth),p.D.isUndef(t.resolutionX)||(o.resolutionX=t.resolutionX),p.D.isUndef(t.resolutionY)||(o.resolutionY=t.resolutionY)),e&&""!=e&&-1!=e?(this._UpdateImageInner(e,{oriData:r,minData:n,customData:{imageId:i},metadata:o}),this.UpdateInfo(!1,!0),e):(p.D.Errors.IndexOutOfRange(this._stwain),!1)}},{key:"MobileUpdateImage",value:function(e,t){var r=e.index,n=e.uuid,i={},o={};return n&&""!=n&&-1!=n?((i=this.GetMetaDataByIndex(r))&&"metadata"in t&&t.metadata&&(p.D.isUndef(t.metadata.width)||(i.width=t.metadata.width),p.D.isUndef(t.metadata.imageWidth)||(i.width=t.metadata.imageWidth),p.D.isUndef(t.metadata.height)||(i.height=t.metadata.height),p.D.isUndef(t.metadata.imageHeight)||(i.height=t.metadata.imageHeight),p.D.isUndef(t.metadata.bitDepth)||(i.bitDepth=t.metadata.bitDepth),p.D.isUndef(t.metadata.imageBitDepth)||(i.bitDepth=t.metadata.imageBitDepth),p.D.isUndef(t.metadata.resolutionX)||(i.resolutionX=t.metadata.resolutionX),p.D.isUndef(t.metadata.imageXResolution)||(i.resolutionX=t.metadata.imageXResolution),p.D.isUndef(t.metadata.resolutionY)||(i.resolutionY=t.metadata.resolutionY),p.D.isUndef(t.metadata.imageYResolution)||(i.resolutionY=t.metadata.imageYResolution)),"url"!=t.dataType&&"srcId"in t?(t&&t.src&&t.srcId&&((o=this.myViewer.getCustomDataByIndex(r))&&(o.src=t.src,o.srcId=t.srcId,p.D.isUndef(t.imgType)||(o.imgType=t.imgType),r={},o&&(r.customData=o,r.metadata=i,this._UpdateImageInner(n,r))),this.UpdateInfo(!1,!0)),n):("src"in t&&(e.imageUrl=t.src),"imageUrl"in t&&(e.imageUrl=t.imageUrl),this.UpdateImage(e,i))):(p.D.Errors.IndexOutOfRange(this._stwain),!1)}},{key:"_UpdateImageInner",value:function(e,t){this.mydvs.DataControl.updateSync(e,t)}},{key:"RemoveByIndex",value:function(e){var t=this;if(e<0||e>=t.GetHowManyImagesInBuffer())return p.D.Errors.IndexOutOfRange(t._stwain),!1;t.bShowImageEdit&&t._imageEditorInner&&1==t._imageEditorInner._IfChangedWithinTheEditor&&(t._imageEditorInner.iChangedIndex!=e?t._imageEditorInner.iChangedIndex>e&&t._imageEditorInner.iChangedIndex--:(t._imageEditorInner._IfChangedWithinTheEditor=!1,t._imageEditorInner.iChangedIndex=-1,t._imageEditorInner.OnCloseInstall())),e==this.GetCurrentIndex()&&t.clearSelectedAreas();var r=[];return r.push(e),(e=t.myViewer.removeSync(r))?t.UpdateInfo(!0):p.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),e}},{key:"RemoveAllImages",value:function(){var e,t=this;return t.bShowImageEdit&&t._imageEditorInner&&1==t._imageEditorInner._IfChangedWithinTheEditor&&(t._imageEditorInner._IfChangedWithinTheEditor=!1,t._imageEditorInner.iChangedIndex=-1,t._imageEditorInner.OnCloseInstall()),t.clearSelectedAreas(),(e=t.myViewer.removeAllSync())?(t.UpdateInfo(),t.bShowImageEdit&&t._imageEditorInner&&t._imageEditorInner.updateMode()):p.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),e}},{key:"SetCurrentIndex",value:function(e){if(e<0||e>=this.GetHowManyImagesInBuffer())return p.D.Errors.IndexOutOfRange(this._stwain),p.I.Lib.hideMask(),!1;return!/^(\d+)$/.test(e)||e<0?(p.D.Errors.MobileServer_InvalidIndex(this._stwain),p.I.Lib.hideMask(),!1):((e=this.myViewer.setCurrentIndex(e))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),this.UpdateInfo(!0,!0),e)}},{key:"OnlySetCurrentIndex",value:function(e){return e<0||e>=this.GetHowManyImagesInBuffer()?(p.D.Errors.IndexOutOfRange(this._stwain),!1):((e=this.myViewer.setCurrentIndex(e))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"GetCurrentIndex",value:function(){var e=-1;return 0<this.GetHowManyImagesInBuffer()&&(e=this.myViewer.getCurrentIndex(),(p.D.isUndef(e)||e<0)&&p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode)),e}},{key:"SetSelectedindexes",value:function(e){return(e=this.myViewer.setSelectedIndexes(e))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"GetSelectedindexes",value:function(){return this.myViewer.getSelectedIndexes()}},{key:"GoToPage",value:function(e){if(e<0||e>=this.GetHowManyImagesInBuffer())return p.D.Errors.IndexOutOfRange(this._stwain),p.I.Lib.hideMask(),-1;return!/^(\d+)$/.test(e)||e<0?(p.D.Errors.MobileServer_InvalidIndex(this._stwain),p.I.Lib.hideMask(),-1):((e=this.myViewer.gotoPage(e))<0&&p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),this.UpdateInfo(!0,!0),e)}},{key:"SetSelectedImageArea",value:function(e,t,r,n){var i=[];if(!this._NouiNotSupport("setSelectedAreas"))return!1;var o={};return o.left=e,o.top=t,o.width=r-e,o.height=n-t,i.push(o),(r=this.myViewer.setSelectedBoxes(i,!1))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),r}},{key:"SetSelectionRectAspectRatio",value:function(e){return!!this._NouiNotSupport("selectionRectAspectRatio")&&(this.myViewer.selectionBoxAspectRatio=e,!0)}},{key:"GetSelectionRectAspectRatio",value:function(){return this._NouiNotSupport("selectionRectAspectRatio")?this.myViewer.selectionBoxAspectRatio:""}},{key:"ZoomIn",value:function(){var e;return(e=this.myViewer.zoomIn())||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"ZoomOut",value:function(){var e;return(e=this.myViewer.zoomOut())||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"SetZoom",value:function(e,t,r){var n=!1;return!!this._NouiNotSupport("zoom")&&((n=t&r?this.myViewer.zoomTo(e,t,r):this.myViewer.zoom=e)||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),n)}},{key:"GetZoom",value:function(){return this._NouiNotSupport("zoom")?this.myViewer.zoom:""}},{key:"SetFitType",value:function(e){var t="window";if(!this._NouiNotSupport("fitType"))return!1;if(!p.D.isUndefined(e)){if("width"!=e&&"height"!=e&&"window"!=e)return p.D.Errors.InvalidValue(this._stwain),!1;t=e}return this.myViewer.fitType=t,!0}},{key:"GetMouseShape",value:function(){var e;switch(this.GetCursor()){case"default":e=p.I.DWT.EnumDWT_MouseShape.Default;break;case"pointer":e=p.I.DWT.EnumDWT_MouseShape.Hand;break;case"crosshair":e=p.I.DWT.EnumDWT_MouseShape.Crosshair;break;case"zoom-in":e=p.I.DWT.EnumDWT_MouseShape.Zoom;break;default:e=p.I.DWT.EnumDWT_MouseShape.Crosshair}return e}},{key:"SetMouseShape",value:function(e){var t;switch(e){case p.I.DWT.EnumDWT_MouseShape.Default:t="default";break;case p.I.DWT.EnumDWT_MouseShape.Hand:t="pointer";break;case p.I.DWT.EnumDWT_MouseShape.Crosshair:t="crosshair";break;case p.I.DWT.EnumDWT_MouseShape.Zoom:t="zoom-in";break;default:t="crosshair"}return this.SetCursor(t),!0}},{key:"SetImageMargin",value:function(e){return this.SetPageMargin(e)}},{key:"GetImageMargin",value:function(){return this.GetPageMargin()}},{key:"SetSelectionImageBorderColor",value:function(e){return p.I.Lib.isNumber(e)&&(e=p.I.Lib.getColor(e)),-1==m()(e).call(e,"1px solid")&&(e="1px solid "+e),this.SetSelectedPageBorder(e)}},{key:"GetSelectedPageBorder",value:function(){return this._NouiNotSupport("selectedPageBorder")?this.myViewer.selectedPageBorder:""}},{key:"SetSelectedPageBorder",value:function(e){return!!this._NouiNotSupport("selectedPageBorder")&&(this.myViewer.selectedPageBorder=e,this._thumbnailViewer&&this.SetThumSelectedPageBorder(e),!0)}},{key:"GetSelectedPageBackground",value:function(){return this._NouiNotSupport("selectedPageBackground")?this.myViewer.selectedPageBackground:""}},{key:"SetSelectedPageBackgroundInner",value:function(e){return this.myViewer.selectedPageBackground=e,!0}},{key:"SetSelectedPageBackground",value:function(e){return!!this._NouiNotSupport("selectedPageBackground")&&(this.SetSelectedPageBackgroundInner(e),this._thumbnailViewer&&this.SetThumSelectedPageBackground(e),!0)}},{key:"GetShowPageNumber",value:function(){return this._NouiNotSupport("showPageNumber")?"visible"==this.myViewer.pageNumber.visibility:""}},{key:"SetShowPageNumberInner",value:function(e){var t={visibility:"hidden"};return e&&(t.visibility="visible"),this.UpdatePageNumberStyle(t),!0}},{key:"SetShowPageNumber",value:function(e){if(!this._NouiNotSupport("showPageNumber"))return!1;if(!p.D.isBoolean(e))return p.D.Errors.InvalidValue(this._stwain),!1;var t={visibility:"hidden"};return e&&(t.visibility="visible"),this.UpdatePageNumberStyle(t),this._thumbnailViewer&&this.UpdateThumPageNumberStyle(t),!0}},{key:"UpdatePageNumberStyle",value:function(e){return!!this._NouiNotSupport("updatePageNumberStyle")&&(this.myViewer.pageNumber=e,this._thumbnailViewer&&this.UpdateThumPageNumberStyle(e),!0)}},{key:"GetPageNumberStyle",value:function(){return!!this._NouiNotSupport("getPageNumberStyle")&&this.myViewer.pageNumber}},{key:"GetAutoChangeIndex",value:function(){return this._NouiNotSupport("autoChangeIndex")?this.myViewer.autoChangeIndex:""}},{key:"SetAutoChangeIndex",value:function(e){return!!this._NouiNotSupport("autoChangeIndex")&&(p.D.isBoolean(e)?(this.myViewer.autoChangeIndex=e,!0):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetShowCheckbox",value:function(){return this._NouiNotSupport("checkbox")?"visible"==this.myViewer.checkbox.visibility:0}},{key:"SetShowCheckbox",value:function(e){if(!this._NouiNotSupport("checkbox"))return!1;var t={visibility:"hidden"};return e&&(t.visibility="visible"),"visible"==(this.myViewer.checkbox=t).visibility?this.SetMultiSelectMode(p.I.DWT.EnumDWT_SelectionMode.Multiple):this.SetMultiSelectMode(p.I.DWT.EnumDWT_SelectionMode.Single),this._thumbnailViewer&&(this.UpdateThumCheckboxStyle(t),"visible"==t.visibility?this.SetThumMultiSelectMode(p.I.DWT.EnumDWT_SelectionMode.Multiple):this.SetThumMultiSelectMode(p.I.DWT.EnumDWT_SelectionMode.Single)),!0}},{key:"GetCheckboxStyle",value:function(){return!!this._NouiNotSupport("getCheckboxStyle")&&this.myViewer.checkbox}},{key:"UpdateCheckboxStyle",value:function(e){return!!this._NouiNotSupport("updateCheckboxStyle")&&(this.myViewer.checkbox=e,this._thumbnailViewer&&this.UpdateThumCheckboxStyle(e),!0)}},{key:"GetMultiSelectMode",value:function(){return this._NouiNotSupport("multiSelectMode")?this.myViewer.multiSelectMode?p.I.DWT.EnumDWT_SelectionMode.Multiple:p.I.DWT.EnumDWT_SelectionMode.Single:0}},{key:"SetMultiSelectMode",value:function(e){return!!this._NouiNotSupport("multiSelectMode")&&(p.D.isNumber(e)?(e==p.I.DWT.EnumDWT_SelectionMode.Multiple?this.myViewer.multiSelectMode=!0:this.myViewer.multiSelectMode=!1,this._thumbnailViewer&&this.SetThumMultiSelectMode(e),!0):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"SetHoverPageBackground",value:function(e){return this.myViewer.hoverPageBackground=e,!0}},{key:"SetBackground",value:function(e){return!!this._NouiNotSupport("background")&&(p.I.Lib.isNumber(e)&&(e=p.I.Lib.getColor(e)),this.myViewer.canvasBackground=e,this._thumbnailViewer&&this.SetThumBackground(e),!0)}},{key:"GetBackground",value:function(){return this._NouiNotSupport("background")?this.myViewer.canvasBackground:""}},{key:"SetViewerBorder",value:function(e){return this.SetBorder("1px solid"+e)}},{key:"SetWidth",value:function(e){if(!this._NouiNotSupport("width"))return!1;return!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<=0?(p.D.Errors.MobileServer_InvalidWidth(this._stwain),!1):(this.myViewer.width=e,!0)}},{key:"GetWidth",value:function(){return this._NouiNotSupport("width")?this.myViewer.width:""}},{key:"SetWidthInner",value:function(e,t){return!t&&p.D.isString(e)&&0<=m()(e).call(e,"%")?(t=p.D.one("#"+this._stwain._containerID),this.myViewer.width=_()(p.D.css(t,"width")*_()(e)/100)):this.myViewer.width=e,!0}},{key:"GetHeight",value:function(){return this._NouiNotSupport("height")?this.myViewer.height:""}},{key:"SetHeight",value:function(e){if(!this._NouiNotSupport("height"))return!1;return!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<=0?(p.D.Errors.MobileServer_InvalidHeight(this._stwain),!1):(this.myViewer.height=e,!0)}},{key:"GetIdPostfix",value:function(){return this._NouiNotSupport("idPostfix")?this.myViewer.postfix:""}},{key:"SetHeightInner",value:function(e,t){return!t&&p.D.isString(e)&&0<=m()(e).call(e,"%")?(t=p.D.one("#"+this._stwain._containerID),this.myViewer.height=_()(p.D.css(t,"height")*_()(e)/100)):this.myViewer.height=e,!0}},{key:"SwitchImage",value:function(e,t){return e<0||e>=this.GetHowManyImagesInBuffer()||t<0||t>=this.GetHowManyImagesInBuffer()?(p.D.Errors.IndexOutOfRange(this._stwain),!1):((e=this.myViewer.switchPage(e,t))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"MoveImage",value:function(e,t){return e<0||e>=this.GetHowManyImagesInBuffer()||t<0||t>=this.GetHowManyImagesInBuffer()?(p.D.Errors.IndexOutOfRange(this._stwain),!1):((e=this.myViewer.movePage(e,t))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"SetIfSinglePageMode",value:function(e){return!!this._NouiNotSupport("singlePageMode")&&(this.myViewer.displayMode=e?"single":"continuous",!0)}},{key:"GetIfSinglePageMode",value:function(){return!!this._NouiNotSupport("singlePageMode")&&"continuous"!=this.myViewer.displayMode}},{key:"SetAcceptDrop",value:function(e){return!!this._NouiNotSupport("acceptDrop")&&(p.D.isBoolean(e)?(this.acceptDrop=e,!0):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetAcceptDrop",value:function(){return this._NouiNotSupport("acceptDrop")?this.acceptDrop:""}},{key:"SetAllowSlide",value:function(e){return!!this._NouiNotSupport("allowSlide")&&(p.D.isBoolean(e)?(this.myViewer.allowSlide=e,!0):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetAllowSlide",value:function(){return this._NouiNotSupport("allowSlide")?this.myViewer.allowSlide:""}},{key:"SetViewMode",value:function(e,t){var r=this,n=!1,i="vertical";return!!r._NouiNotSupport("setViewMode")&&(p.D.isNumber(e)&&p.D.isNumber(t)?(r._thumbnailViewer&&r._thumbnailViewer.hide(),r.clearSelectedAreas(),-1==e&&-1==t?(r.SetIfSinglePageMode(!0),t=0-t,e=0-e,n=!0):(t<0&&(i="horizontal",t=0-t),e<0&&(e=0-e),r.myViewer.scrollDirection=i,(n=r.myViewer.setViewMode(e,t))||p.D.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode),r.SetIfSinglePageMode(!1),"zoom-in"==r.GetCursor()&&r.SetCursor("crosshair")),n):(p.D.Errors.InvalidValue(r._stwain),!1))}},{key:"RemoveImageTag",value:function(e){var t=this;return e<0||e>=t.GetHowManyImagesInBuffer()?(p.D.Errors.IndexOutOfRange(t._stwain),!1):(e=t.GetUidByIndex(e))&&""!=e&&-1!=e?((e=t.mydvs.Tag.removePageTag(e))||p.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),e):(p.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),!1)}},{key:"FilterImagesByTag",value:function(e,t,r){var n,i=this;return p.D.isUndefined(e)||null==e||0==e.length?(i._currentTag="",0==(n=i.GetCurrentFileName()).length&&(n=h),i.mydvs.File.openFile(n,i.myViewer.uid)?(i.mydvs.Tag.setDefaultTag(""),p.D.isFunction(t)&&t()):(p.D.Errors.WebviewerError(i._stwain,i.mydvs.Error.errorMessage,i.mydvs.Error.errorCode),p.D.isFunction(r)&&r(i.mydvs.Error.errorCode,i.mydvs.Error.errorMessage))):(i._currentTag=e,i.mydvs.Tag.openTag(e,i.myViewer.uid)?p.D.isFunction(t)&&t():(p.D.Errors.WebviewerError(i._stwain,i.mydvs.Error.errorMessage,i.mydvs.Error.errorCode),p.D.isFunction(r)&&r(i.mydvs.Error.errorCode,i.mydvs.Error.errorMessage))),!0}},{key:"ClearFilter",value:function(){this._currentTag="";var e=this.GetCurrentFileName();return 0==e.length&&(e=h),(e=this.mydvs.File.openFile(e,this.myViewer.uid))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"GetServerIdList",value:function(){var e,t,r=[];if(t=this.myViewer.getCurrentPageUids())for(var n=0;n<t.length;n++)(e=t[n])&&(e=this.myViewer.getCustomDataByUid(e))&&r.push(e.imageId);else p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode);return r}},{key:"GetTagContents",value:function(e){var t=!1;return(t=e&&0<e.length?this.mydvs.Tag.getTagContents(e):this.myViewer.getCurrentPageUids())||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),t}},{key:"SetDefaultTag",value:function(e){return this._currentTag=e,this.mydvs.Tag.addTag(e),(e=this.mydvs.Tag.setDefaultTag(e))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"AddImageTag",value:function(e,t){var r;this.mydvs.Tag.addTag(t);for(var n=0;n<e.length;n++)0<=(r=e[n])&&(r=this.GetUidByIndex(r))&&""!=r&&-1!=r&&this.mydvs.Tag.addPageTag(r,t);return!0}},{key:"GetCurrentTag",value:function(){return this._currentTag}},{key:"RenameTag",value:function(e,t){return this._currentTag=t,(e=this.mydvs.Tag.renameTag(e,t))?this.mydvs.Tag.setDefaultTag(t):p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"RemoveTag",value:function(t,e){var r=this,n=!1,i=!1,o=r.mydvs.Tag.getCurrentTag();if(o&&(i=o.name==t),p.D.isUndefined(e))n=r.mydvs.Tag.removeTag(t),i&&r.ClearFilter();else{if(!p.D.isArray(e))return p.D.Errors.IndicesNotArray(r),!1;if(!r._stwain._checkIndices(e))return!1;var a=[];p.D.each(e,function(e){e=r.GetUidByIndex(e);-1!=e&&a.push(e)}),p.D.each(a,function(e){if(!(n=r.mydvs.Tag.removePageTag(e,t)))return!1})}return n||p.D.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode),n}},{key:"GetTagList",value:function(){var n,i,e,o=this,a=[];return(e=o.mydvs.Tag.getTagList())?p.D.each(e,function(e){if(n=[],i={},e.uids)for(var t=0;t<e.uids.length;t++){var r=e.uids[t];r&&(i=o.myViewer.getCustomDataByUid(r))&&n.push(o._stwain.objImageIndexManager.convertServerIdToGuid(i.imageId))}e.imageIds=n,delete e.uids,a.push(e)}):a=[],a}},{key:"GetTagListByIndex",value:function(e){var n=[],i=this.GetUidByIndex(e);return i&&((e=this.mydvs.Tag.getTagList())?p.D.each(e,function(e){if(e.uids)for(var t=0;t<e.uids.length;t++){var r=e.uids[t];r&&r==i&&n.push(e.name)}}):n=[]),n}},{key:"CreateFile",value:function(e){var t=!1;return e&&(this.mydvs.File.createFile(e)?80032==this.mydvs.Error.errorCode?p.D.Errors.FileExist(this._stwain):t=!0:p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode)),t}},{key:"OpenFile",value:function(e){var t=this,r=!1;return t.mydvs.File.openFile(e,t.myViewer.uid)?(r=!0,t.currentFileName=e,t._stwain.Template&&t._stwain.Template._documentTemplate&&t._stwain.Template._documentTemplate.setTemplateTitle(t.currentFileName)):80006==t.mydvs.Error.errorCode?p.D.Errors.FileNotExist(t._stwain):p.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),r}},{key:"GetCurrentFileName",value:function(){var e,t=this,r="";return(e=t.mydvs.File.getCurrentFileList())&&p.D.each(e,function(e){e.name==t.currentFileName&&(r=t.currentFileName)}),r}},{key:"GetDefaultFileName",value:function(){return h}},{key:"RemoveFile",value:function(e){var t,r=this;return(t=r.mydvs.File.removeFile(e))?r.currentFileName==e&&(r.currentFileName=h,r.OpenFile(r.currentFileName)):80006==r.mydvs.Error.errorCode?p.D.Errors.FileNotExist(r._stwain):p.D.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode),t}},{key:"RenameFile",value:function(e,t){var r,n=this;return(r=n.mydvs.File.renameFile(e,t))?n.currentFileName==e&&(n.currentFileName=t,n._stwain.Template&&n._stwain.Template._documentTemplate&&n._stwain.Template._documentTemplate.setTemplateTitle("")):80006==n.mydvs.Error.errorCode?p.D.Errors.FileNotExist(n._stwain):80032==n.mydvs.Error.errorCode?p.D.Errors.FileExist(n._stwain):p.D.Errors.WebviewerError(n._stwain,n.mydvs.Error.errorMessage,n.mydvs.Error.errorCode),r}},{key:"GetFileInfoList",value:function(){var n,i,o,e,a=this,s=[];return(e=a.mydvs.File.getCurrentFileList())?p.D.each(e,function(e){if(!a.IsInternalFile(e.name)){if(n=[],i={},o={},e.chs)for(var t=0;t<e.chs.length;t++){var r=e.chs[t];r&&(i=a.myViewer.getCustomDataByUid(r))&&n.push(a._stwain.objImageIndexManager.convertServerIdToGuid(i.imageId))}o.imageIds=n,o.name=e.name,s.push(o)}}):s=[],s}},{key:"GetImageIdsByFileName",value:function(n){var i,e,o=this,a=[];return(e=o.mydvs.File.getCurrentFileList())?p.D.each(e,function(e){if(n==e.name){if(i={},e.chs)for(var t=0;t<e.chs.length;t++){var r=e.chs[t];r&&(i=o.myViewer.getCustomDataByUid(r))&&a.push(i.imageId)}return!1}}):a=[],a}},{key:"ifFileNameExist",value:function(t){var e,r=!1;return(e=this.mydvs.File.getCurrentFileList())&&(0==e.length?t==h&&(r=!0):(p.D.each(e,function(e){if(e.name==t)return r=!0}),0==r&&t==h&&(r=!0))),r}},{key:"OverlayRectangle",value:function(e,t,r,n,i,o,a){return e<0||e>=this.GetHowManyImagesInBuffer()?(p.D.Errors.IndexOutOfRange(this._stwain),!1):(p.D.isNumber(o)&&(o=p.D.getColor(o)),(e=this.myViewer.overlayRectangle(e,t,r,n-t,i-r,o,a))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"SetOperationMode",value:function(e){this.myViewer.operationMode=e}},{key:"GetIfShowVideoContainer",value:function(){return this.myViewer.showVideoContainer}},{key:"ShowVideoContainer",value:function(e){return this.myViewer.showVideoContainer==e||(this._thumbnailViewer&&(e?(this.OldShowThumbnail=this.myThumbnailViewer.showThumbnail,this.myThumbnailViewer.showThumbnail=!1):this.myThumbnailViewer.showThumbnail=this.OldShowThumbnail),this.myViewer.showVideoContainer=e),!0}},{key:"UpdateVideoContainer",value:function(e){e=this.myViewer.updateVideoContainer(e);return e||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"GetImageData",value:function(e){return this.mydvs.DataControl.getData(e)}},{key:"UpdateImageData",value:function(e,t){return this.mydvs.DataControl.updateData(e,t)}},{key:"GetMinPageData",value:function(e){return this._imageEditorInner?this._imageEditorInner.myImageEditor.getMinPageData():NaN}},{key:"SetLogLevel",value:function(e){this.mydvs.Log.setLogLevel(e)}},{key:"SetLogFunc",value:function(e){this.mydvs.Log.setLogFunc(e)}},{key:"SetThumLocation",value:function(e){var t=this;if(!t._NouiNotSupport("ThumbnailViewer.location"))return!1;if(t.myThumbnailViewer){switch(e){case"left":t.myThumbnailViewer.location="horizontal",t.myThumbnailViewer.sequence=-1;break;case"right":t.myThumbnailViewer.location="horizontal",t.myThumbnailViewer.sequence=1;break;case"top":t.myThumbnailViewer.location="vertical",t.myThumbnailViewer.sequence=-1;break;case"bottom":t.myThumbnailViewer.location="vertical",t.myThumbnailViewer.sequence=1;break;default:t.myThumbnailViewer.location="horizontal",t.myThumbnailViewer.sequence=-1}return!0}return t.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(t._stwain):p.D.Errors.ThumbnailViewerNotExist(t._stwain),!1}},{key:"GetThumLocation",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.location")&&(this.myThumbnailViewer?"vertical"==this.myThumbnailViewer.location?0<this.myThumbnailViewer.sequence?"bottom":"top":0<this.myThumbnailViewer.sequence?"right":"left":(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSize",value:function(e){if(!this._NouiNotSupport("ThumbnailViewer.size"))return!1;return!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<0?(p.D.Errors.InvalidValue(this._stwain),!1):this.myThumbnailViewer?(this.myThumbnailViewer.size=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1)}},{key:"GetThumSize",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.size")&&(this.myThumbnailViewer?this.myThumbnailViewer.size:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),0))}},{key:"SetThumScrollDirection",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.scrollDirection")&&("horizontal"!=e&&(e="vertical"),this.myThumbnailViewer?(this.myThumbnailViewer.scrollDirection=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumScrollDirection",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.scrollDirection")&&(this.myThumbnailViewer?this.myThumbnailViewer.scrollDirection:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumShowPageNumber",value:function(e){if(!this._NouiNotSupport("ThumbnailViewer.showPageNumber"))return!1;if(!p.D.isBoolean(e))return p.D.Errors.InvalidValue(this._stwain),!1;var t={visibility:"hidden"};return e&&(t.visibility="visible"),this.myThumbnailViewer?(this.UpdateThumPageNumberStyle(t),!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1)}},{key:"GetThumShowPageNumber",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.showPageNumber")&&(this.myThumbnailViewer?"visible"==this.myThumbnailViewer.pageNumber.visibility:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"UpdateThumPageNumberStyle",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.pageNumber")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageNumber=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumShowCheckbox",value:function(e){var t;return!!this._NouiNotSupport("ThumbnailViewer.showCheckbox")&&(p.D.isBoolean(e)?this.myThumbnailViewer?(t={visibility:"hidden"},e&&(t.visibility="visible"),this.UpdateThumCheckboxStyle(t),"visible"==t.visibility?this.SetThumMultiSelectMode(p.I.DWT.EnumDWT_SelectionMode.Multiple):this.SetThumMultiSelectMode(p.I.DWT.EnumDWT_SelectionMode.Single),!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"UpdateThumCheckboxStyle",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.checkbox")&&(this.myThumbnailViewer?(this.myThumbnailViewer.checkbox=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumShowCheckbox",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.showCheckbox")&&(this.myThumbnailViewer?"visible"==this.myThumbnailViewer.checkbox.visibility:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"GetThumMultiSelectMode",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.multiSelectMode")&&(this.myThumbnailViewer?this.myThumbnailViewer.multiSelectMode?p.I.DWT.EnumDWT_SelectionMode.Multiple:p.I.DWT.EnumDWT_SelectionMode.Single:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"SetThumMultiSelectMode",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.multiSelectMode")&&(p.D.isNumber(e)?this.myThumbnailViewer?(e==p.I.DWT.EnumDWT_SelectionMode.Multiple?this.myThumbnailViewer.multiSelectMode=!0:this.myThumbnailViewer.multiSelectMode=!1,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"SetThumMargin",value:function(e){if(!this._NouiNotSupport("ThumbnailViewer.margin"))return!1;return!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<0?(p.D.Errors.InvalidValue(this._stwain),!1):this.myThumbnailViewer?(this.myThumbnailViewer.pageMargin=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1)}},{key:"GetThumMargin",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.margin")&&(this.myThumbnailViewer?this.myThumbnailViewer.columns==this.myThumbnailViewer.rows&&1==this.myThumbnailViewer.rows?0:this.myThumbnailViewer.pageMargin:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),0))}},{key:"SetThumBorder",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.border")&&(this.myThumbnailViewer?(this.myThumbnailViewer.border=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.border")&&(this.myThumbnailViewer?this.myThumbnailViewer.border:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.background")&&(this.myThumbnailViewer?(this.myThumbnailViewer.background=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.background")&&(this.myThumbnailViewer?this.myThumbnailViewer.background:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPageBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.pageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageBackground=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPageBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.pageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.pageBackground:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPageBorder",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.pageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageBorder=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPageBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.pageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.pageBorder:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumHoverBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.hoverPageBackground=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"GetThumHoverBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.hoverPageBackground:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumHoverBorder",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.hoverPageBorder=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumHoverBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.hoverPageBorder:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPlaceholderBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.placeholderBackground=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPlaceholderBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.placeholderBackground:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSelectedPageBorder",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.selectedPageBorder=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumSelectedPageBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.selectedPageBorder:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSelectedPageBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.selectedPageBackground=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumSelectedPageBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.selectedPageBackground:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumAllowKeyboardControl",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")&&(p.D.isBoolean(e)?this.myThumbnailViewer?(this.myThumbnailViewer.allowKeyboardControl=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetThumAllowKeyboardControl",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowKeyboardControl:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAllowDrag",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.allowDrag")&&(p.D.isBoolean(e)?this.myThumbnailViewer?(this.myThumbnailViewer.allowPageDragging=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetThumAllowDrag",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowPageDragging")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowPageDragging:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAllowResize",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.allowResizing")&&(p.D.isBoolean(e)?this.myThumbnailViewer?(this.myThumbnailViewer.allowResizing=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetThumAllowResize",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowResizing")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowResizing:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAutoChangeIndex",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(this.myThumbnailViewer?(this.myThumbnailViewer.autoChangeIndex=e,!0):(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumAutoChangeIndex",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(this.myThumbnailViewer?this.myThumbnailViewer.autoChangeIndex:(this.bThumbnailDispose?p.D.Errors.ThumbnailViewerDispose(this._stwain):p.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"render",value:function(){return!!this._NouiNotSupport("render")&&this.myViewer.render()}},{key:"getUISettings",value:function(){if(!this._NouiNotSupport("getUISettings"))return!1;var e=p.I.Lib.clone(this.myViewer.uiConfig);return delete e.tag,delete e.tree,delete e.cropStyle,delete e.thumbnail,e}},{key:"resetUISettings",value:function(){var e={};return e=this.resetUISettingsInner(!0)?this.getUISettings():e}},{key:"resetUISettingsInner",value:function(e,t,r){var n=this;if(!n._NouiNotSupport("resetUISetting"))return!1;var i=ye,e=(e?(i.width=n.initWidth,i.height=n.initHeight):(p.D.isUndefined(t)?i.width=n.initWidth:i.width=t,p.D.isUndefined(r)?i.height=n.initHeight:i.height=r),n.myViewer.showViewer);return(t=n.myViewer.updateUISetting(i))?(e||n.hide(),n.SetFitType("window"),n.SetIfSinglePageMode(!1),n._stwain._isPC()?n.SetOperationMode(1):n.SetOperationMode(0),n.OnlySetCurrentIndex(n.GetCurrentIndex())):p.D.Errors.WebviewerError(n._stwain,n.mydvs.Error.errorMessage,n.mydvs.Error.errorCode),t}},{key:"updateUISettings",value:function(e){var t=this,r={};if(!t._NouiNotSupport("updateUISettings"))return!1;var n=t.myViewer.showViewer;return t.myViewer.updateUISetting(e)?(n||t.hide(),"crosshair"==(r=t.getUISettings()).canvasConfig.canvasMouseShape?t.SetOperationMode(1):t.SetOperationMode(0),t._stwain.Template&&t._stwain.Template._documentTemplate&&(t._stwain.Template._documentTemplate.initView(),0<t.GetFileInfoList().length&&t._stwain.Template._documentTemplate.setTemplateTitle(t.currentFileName))):p.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),r}},{key:"createDocumentCameraManager",value:function(){if(!p.I.CameraModel)return p.D.Errors.CameraRequired(this._stwain),!1;if(!this.myccvs){this.myccvs=new p.I.CameraModel;try{this.myccvs&&this.bindCallback(this,this.myccvs)}catch(e){}}}},{key:"createDocumentEditManager",value:function(){if(!p.I.DocumentEditManager)return p.D.Errors.CameraRequired(this._stwain),!1;if(!this.mydocEditManager){this.mydocEditManager=new p.I.DocumentEditManager;try{this.mydocEditManager&&this.bindCallback(this,this.mydocEditManager)}catch(e){}}}},{key:"notBindCameraForCameraManager",value:function(){return!this.myccvs||this.myccvs.notBindCamera()}},{key:"bindCameraForCameraManager",value:function(){var e=!0;return p.I.CameraModel?(this.myccvs||this.createDocumentCameraManager(),(e=this.myccvs.notBindCamera()?this.myccvs.bindCamera(p.I.ViewUi,this.mydvs):e)?e:void p.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode)):(p.D.Errors.CameraRequired(this._stwain),!1)}},{key:"notBindCameraForDocumentEditManager",value:function(){return!this.mydocEditManager||this.mydocEditManager.notBindCamera()}},{key:"bindCameraForDocumentEditManager",value:function(){var e=!0;return p.I.DocumentEditManager?(this.mydocEditManager||this.createDocumentEditManager(),(e=this.mydocEditManager.notBindCamera()?this.mydocEditManager.bindCamera(p.I.ViewUi,this.mydvs):e)?e:void p.D.Errors.WebviewerError(this._stwain,this.mydocEditManager.Error.errorMessage,this.mydocEditManager.Error.errorCode)):(p.D.Errors.CameraRequired(this._stwain),!1)}},{key:"bindCallback",value:function(n,e){var t;e&&(t=p.D.html5.STwain,e.bindLicenseCallback&&e.bindLicenseCallback(function(){return n._stwain._checkWebcamWasmLicense()}),e.bindSavePhotoCallback&&e.bindSavePhotoCallback(function(e){return n._stwain._saveImageCallback(e)}),e.bindInsertPhotoCallback&&e.bindInsertPhotoCallback(function(e,t,r){return n._stwain._insertImageCallback(e,t,r)}),e.bindRemovePhotoCallback&&e.bindRemovePhotoCallback(function(e,t){n._stwain._innerRemoveImage(e,t)}),e.bindAreaDetectFunction&&e.bindAreaDetectFunction(t._areaDetectCallback),e.bindPerspectiveFunction&&e.bindPerspectiveFunction(t._perspectiveCallback),e.bindFilterHandleList&&e.bindFilterHandleList([{label:"grayscale",handler:t._convertToGrayScaleFilterCallback},{label:"blackAndWhite",handler:t._convertToBWScaleFilterCallback},{label:"saveToner",handler:t._saveTonerFilterCallback},{label:"clean",handler:t._cleanFilterCallback},{label:"brightening",handler:t._brightenFilterCallback}]),e.bindFreeHandle&&e.bindFreeHandle(t._freeCallback))}},{key:"showVideo",value:function(e,t,r,n){if(!this._NouiNotSupport("showVideo"))return!1;e={scannerViewer:{devicedId:e,fullScreen:n,enableBorderDetection:!0,resolution:{visibility:"hidden"},autoScan:{visibility:"hidden"},autoDetect:{visibility:"visible",enableAutoDetect:!1},continuousScan:!1,switchCamera:{visibility:"hidden"},loadLocalFile:{visibility:"hidden"}},documentEditorSettings:{defaultViewerName:"CropViewer",insert:{visibility:"hidden"},remove:{visibility:"hidden"},rotateLeft:{visibility:"hidden"},filter:{visibility:"hidden",valueList:[]},crop:{visibility:"hidden"},cropViewer:{visibility:"visible",rotateLeft:{visibility:"hidden"},rotateRight:{visibility:"hidden"},autoDetectBorder:{visibility:"hidden"}}}};return t&&(e.scannerViewer.resolution.valueList=[],e.scannerViewer.resolution.valueList.push({label:"resolution",value:t}),e.scannerViewer.resolution.defaultValue=t),r&&"document"==r?e.scannerViewer.enableBorderDetection=!0:(e.scannerViewer.enableBorderDetection=!1,e.scannerViewer.autoDetect.visibility="hidden",e.documentEditorSettings.cropViewer.visibility="hidden"),this.myccvs||this.createDocumentCameraManager(),this.notBindCameraForCameraManager()&&this.bindCameraForCameraManager(),(n=this.showVideoEx(e))||p.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode),n}},{key:"getDefaultFilterValueList",value:function(e){return g()(defaultDocumentEditorSettings).valueList}},{key:"setElementForDocumentConfiguration",value:function(e){var t,r,n=p.I.Lib.clone(e);return e&&e.scannerViewer&&e.scannerViewer.element&&((r=e.scannerViewer.element&&"DIV"==e.scannerViewer.element.nodeName?e.scannerViewer.element:document.getElementById(e.scannerViewer.element)).childNodes[0]||(t=document.createElement("div"),r.appendChild(t)),(t=r.childNodes[0])&&r&&""==r.style.width?0<r.clientWidth?t.style.width=r.clientWidth+"px":0<r.offsetWidth?t.style.width=r.offsetWidth+"px":0<r.scrollWidth?t.style.width=r.scrollWidth+"px":t.style.width=this.myViewer.width+"px":t.style.width="100%",t&&r&&""==r.style.height?0<r.clientHeight?t.style.height=r.clientHeight+"px":0<r.offsetHeight?t.style.height=r.offsetHeight+"px":0<r.scrollHeight?t.style.height=r.scrollHeight+"px":t.style.height=this.myViewer.height+"px":t.style.height="100%",n.scannerViewer.element=t),e&&e.documentEditorSettings&&e.documentEditorSettings.element&&((r=e.documentEditorSettings.element&&"DIV"==e.documentEditorSettings.element.nodeName?e.documentEditorSettings.element:document.getElementById(e.documentEditorSettings.element)).childNodes[0]||(e=document.createElement("div"),r.appendChild(e)),(t=r.childNodes[0])&&r&&""==r.style.width?0<r.clientWidth?t.style.width=r.clientWidth+"px":0<r.offsetWidth?t.style.width=r.offsetWidth+"px":0<r.scrollWidth?t.style.width=r.scrollWidth+"px":t.style.width=this.myViewer.width+"px":t.style.width="100%",t&&r&&""==r.style.height?0<r.clientHeight?t.style.height=r.clientHeight+"px":0<r.offsetHeight?t.style.height=r.offsetHeight+"px":0<r.scrollHeight?t.style.height=r.scrollHeight+"px":t.style.height=this.myViewer.height+"px":t.style.height="100%",n.documentEditorSettings.element=t),n}},{key:"showVideoEx",value:function(e){e=this.setElementForDocumentConfiguration(e);return this.showVideoInner(e)}},{key:"showVideoInner",value:function(e){var t=this;if(!t._NouiNotSupport("scanDocument"))return!1;if(!t._stwain._isMobileMode())return t._stwain._serviceNotSupportAsync("scanDocument");if(p.I.Lib.env.bMobile&&0==t.addCSSForShowVideo){var r=document.createElement("style"),n="*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select:none;-ms-user-select:none;user-select:none;}";r.type="text/css";try{r.appendChild(document.createTextNode(n))}catch(i){r.styleSheet.cssText=n}document.body.appendChild(r),t.addCSSForShowVideo=!0}t._stwain.Template&&t._stwain.Template._documentTemplate&&t._stwain.Template._documentTemplate.setTemplateTitle(t.currentFileName),e=t.getDefaultDocumentConfigurationValue(t._globalScanConfiguration_ScannViewer,e,!1),t._globalScanConfiguration_ScannViewer=e,t._documentScanConfiguration=e,t.notBindCameraForCameraManager()&&t.bindCameraForCameraManager();n=t.GetCurrentFileName();return 0==n.length&&(t.CreateFile(h),t.OpenFile(h),n=h),(r=t.myccvs.showVideo(e,n))||p.D.Errors.WebviewerError(t._stwain,t.myccvs.Error.errorMessage,t.myccvs.Error.errorCode),r}},{key:"getDefaultDocumentConfigurationValue",value:function(e,t,r){var n,i,o,a=this,s=p.I.Lib.clone(t);return s&&(s.scannerViewer&&t.scannerViewer&&t.scannerViewer.element&&(s.scannerViewer.element=t.scannerViewer.element),s.documentEditorSettings&&t.documentEditorSettings&&t.documentEditorSettings.element&&(s.documentEditorSettings.element=t.documentEditorSettings.element)),p.D.isUndefined(s)?s=e:(s.scannerViewer=a.getDefaultScannerViewerValue(s.scannerViewer,!0),s.documentEditorSettings=a.getDefaultDocumentEditorValue(s.documentEditorSettings,!0,r)),p.D.isFunction(s.documentEditorSettings.funcConfirmExitAfterSave)?(n=s.documentEditorSettings.funcConfirmExitAfterSave,s.documentEditorSettings.funcConfirmExitAfterSave=function(e){var t=a.GetCurrentFileName();0==t.length&&(t=h),a.OpenFile(t),n(e)}):s.documentEditorSettings.funcConfirmExitAfterSave=function(e){var t=a.GetCurrentFileName();0==t.length&&(t=h),a.OpenFile(t)},r&&("cropviewer"==s.documentEditorSettings.defaultViewerName.toLowerCase()?p.D.isFunction(s.documentEditorSettings.cropViewer.funcConfirmExit)?(i=s.documentEditorSettings.cropViewer.funcConfirmExit,s.documentEditorSettings.cropViewer.funcConfirmExit=function(e,t){var r=a.GetCurrentFileName();return 0==r.length&&(r=h),a.OpenFile(r),i(e,t)}):s.documentEditorSettings.cropViewer.funcConfirmExit=function(e,t){var r=a.GetCurrentFileName();return 0==r.length&&(r=h),a.OpenFile(r),"documentScanPage"==t&&e?c().resolve(p.I.DWT.EnumDWT_ConfirmExitType.SaveAndExit):c().resolve(p.I.DWT.EnumDWT_ConfirmExitType.Exit)}:p.D.isFunction(s.documentEditorSettings.funcConfirmExit)?(o=s.documentEditorSettings.funcConfirmExit,s.documentEditorSettings.funcConfirmExit=function(e,t){var r=a.GetCurrentFileName();return 0==r.length&&(r=h),a.OpenFile(r),o(e,t)}):s.documentEditorSettings.funcConfirmExit=function(e,t){var r=a.GetCurrentFileName();return 0==r.length&&(r=h),a.OpenFile(r),"cropViewer"==t&&e?c().resolve(p.I.DWT.EnumDWT_ConfirmExitType.SaveAndExit):c().resolve(p.I.DWT.EnumDWT_ConfirmExitType.Exit)}),p.D.isUndefined(s.scannerViewer.maxDocuments)&&(s.scannerViewer.maxDocuments=a._stwain.MaxImagesInBuffer-a.GetHowManyImagesInBuffer()),1==s.scannerViewer.continuousScan?s.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!0}:0==s.scannerViewer.continuousScan?s.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!1}:p.D.isUndefined(s.scannerViewer.continuousScan)?s.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!0}:(s.scannerViewer.continuousScan.visibility="hidden",p.D.isUndefined(s.scannerViewer.continuousScan.enableContinuousScan)&&(s.scannerViewer.continuousScan.enableContinuousScan=!0)),s}},{key:"getDefaultScannerViewerValue",value:function(e,t){var r,n=x.scannerViewer;return p.D.isUndefined(e)?(r=n,t&&delete r.funcConfirmExit):(p.D.isUndefined((r=e).headerStyle)?r.headerStyle=n.headerStyle:(p.D.isUndefined(r.headerStyle.background)&&(r.headerStyle.background=n.headerStyle.background),p.D.isUndefined(r.headerStyle.color)&&(r.headerStyle.color=n.headerStyle.color),p.D.isUndefined(r.headerStyle.selectedColor)&&(r.headerStyle.selectedColor=n.headerStyle.selectedColor)),p.D.isUndefined(r.bodyStyle)?r.bodyStyle=n.bodyStyle:(p.D.isUndefined(r.bodyStyle.background)&&(r.bodyStyle.background=n.bodyStyle.background),p.D.isUndefined(r.bodyStyle.loaderBarSource)&&(r.bodyStyle.loaderBarSource=n.bodyStyle.loaderBarSource)),p.D.isUndefined(r.footerStyle)?r.footerStyle=n.footerStyle:(p.D.isUndefined(r.footerStyle.background)&&(r.footerStyle.background=n.footerStyle.background),p.D.isUndefined(r.footerStyle.color)&&(r.footerStyle.color=n.footerStyle.color),p.D.isUndefined(r.footerStyle.selectedColor)&&(r.footerStyle.selectedColor=n.footerStyle.selectedColor)),p.D.isUndefined(r.fullScreen)&&(r.fullScreen=n.fullScreen),p.D.isUndefined(r.enableBorderDetection)&&(r.enableBorderDetection=n.enableBorderDetection),p.D.isUndefined(r.polygonStyle)?r.polygonStyle=n.polygonStyle:(p.D.isUndefined(r.polygonStyle.stroke)&&(r.polygonStyle.stroke=n.polygonStyle.stroke),p.D.isUndefined(r.polygonStyle.strokeWidth)&&(r.polygonStyle.strokeWidth=n.polygonStyle.strokeWidth),p.D.isUndefined(r.polygonStyle.dash)&&(r.polygonStyle.dash=n.polygonStyle.dash)),r.scanButtonStyle?(p.D.isUndefined(r.scanButtonStyle.background)&&(r.scanButtonStyle.background=n.scanButtonStyle.background),p.D.isUndefined(r.scanButtonStyle.color)&&(r.scanButtonStyle.color=n.scanButtonStyle.color)):r.scanButtonStyle=n.scanButtonStyle,p.D.isUndefined(r.resolution)?r.resolution=n.resolution:(t=r.resolution,p.D.isBoolean(t.visibility)&&!t.visibility?t.visibility="hidden":p.D.isString(t.visibility)||(t.visibility=n.resolution.visibility),p.D.isUndefined(t.valueList)&&(t.valueList=n.resolution.valueList),p.D.isUndefined(t.defaultValue)&&t.valueList&&0<t.valueList.length&&(t.defaultValue=t.valueList[0].value)),p.D.isUndefined(r.autoScan)?r.autoScan=n.autoScan:(e=r.autoScan,p.D.isBoolean(e.visibility)&&!e.visibility?e.visibility="hidden":p.D.isString(e.visibility)||(e.visibility=n.autoScan.visibility),p.D.isUndefined(e.enableAutoScan)&&(e.enableAutoScan=n.autoScan.enableAutoScan)),p.D.isUndefined(r.autoDetect)?r.autoDetect=n.autoDetect:(t=r.autoDetect,p.D.isBoolean(t.visibility)&&!t.visibility?t.visibility="hidden":p.D.isString(t.visibility)||(t.visibility=n.autoDetect.visibility),p.D.isUndefined(t.enableAutoDetect)&&(t.enableAutoDetect=n.autoDetect.enableAutoDetect),p.D.isUndefined(t.fpsLimit)&&(t.fpsLimit=n.autoDetect.fpsLimit),p.D.isUndefined(t.acceptedPolygonConfidence)?t.acceptedPolygonConfidence=n.autoDetect.acceptedPolygonConfidence:(e=_()(t.acceptedPolygonConfidence),t.acceptedPolygonConfidence=0<=e?e:n.autoDetect.acceptedPolygonConfidence),p.D.isUndefined(t.acceptedBlurryScore)?t.acceptedBlurryScore=n.autoDetect.acceptedBlurryScore:(e=_()(t.acceptedBlurryScore),t.acceptedBlurryScore=0<=e?e:n.autoDetect.acceptedBlurryScore),p.D.isUndefined(t.autoCaptureDelay)?t.autoCaptureDelay=n.autoDetect.autoCaptureDelay:(e=_()(t.autoCaptureDelay),t.autoCaptureDelay=0<=e?e:n.autoDetect.autoCaptureDelay)),p.D.isUndefined(r.switchCamera)?r.switchCamera=n.switchCamera:(t=r.switchCamera,p.D.isBoolean(t.visibility)&&!t.visibility?t.visibility="hidden":p.D.isString(t.visibility)||(t.visibility=n.switchCamera.visibility)),p.D.isUndefined(r.loadLocalFile)?r.loadLocalFile=n.loadLocalFile:(e=r.loadLocalFile,p.D.isBoolean(e.visibility)&&!e.visibility?e.visibility="hidden":p.D.isString(e.visibility)||(e.visibility=n.loadLocalFile.visibility))),r}},{key:"getDefaultDocumentEditorValue",value:function(e,t,r){var n,i=p.I.Lib.clone(x.documentEditorSettings);if(i&&x.documentEditorSettings&&x.documentEditorSettings.element&&(i.element=x.documentEditorSettings.element),r&&(i.defaultViewerName="mainViewer"),p.D.isUndefined(e))n=i,t&&(delete n.remove.funcConfirmRemove,delete n.funcConfirmExit,delete n.funcConfirmExitAfterSave,delete n.cropViewer.funcConfirmExit);else{if(p.D.isBoolean((n=e).visibility)&&!n.visibility?n.visibility="hidden":p.D.isString(n.visibility)||(n.visibility=i.visibility),(p.D.isUndefined(n.defaultViewerName)||""==n.defaultViewerName||"cropviewer"!=n.defaultViewerName.toLowerCase()&&"mainviewer"!=n.defaultViewerName.toLowerCase())&&(n.defaultViewerName=i.defaultViewerName),p.D.isUndefined(n.headerStyle)?n.headerStyle=i.headerStyle:(p.D.isUndefined(n.headerStyle.background)&&(n.headerStyle.background=i.headerStyle.background),p.D.isUndefined(n.headerStyle.color)&&(n.headerStyle.color=i.headerStyle.color),p.D.isUndefined(n.headerStyle.selectedColor)&&(n.headerStyle.selectedColor=i.headerStyle.selectedColor),p.D.isUndefined(n.headerStyle.disabledColor)&&(n.headerStyle.disabledColor=i.headerStyle.disabledColor)),p.D.isUndefined(n.bodyStyle)?n.bodyStyle=i.bodyStyle:(p.D.isUndefined(n.bodyStyle.background)&&(n.bodyStyle.background=i.bodyStyle.background),p.D.isUndefined(n.bodyStyle.loaderBarSource)&&(n.bodyStyle.loaderBarSource=i.bodyStyle.loaderBarSource)),p.D.isUndefined(n.footerStyle)?n.footerStyle=i.footerStyle:(p.D.isUndefined(n.footerStyle.background)&&(n.footerStyle.background=i.footerStyle.background),p.D.isUndefined(n.footerStyle.color)&&(n.footerStyle.color=i.footerStyle.color),p.D.isUndefined(n.footerStyle.selectedColor)&&(n.footerStyle.selectedColor=i.footerStyle.selectedColor)),p.D.isUndefined(n.insert)?n.insert=i.insert:(p.D.isBoolean(n.insert.visibility)&&!n.insert.visibility?n.insert.visibility="hidden":p.D.isString(n.insert.visibility)||(n.insert.visibility=i.insert.visibility),p.D.isUndefined(n.insert.position)&&(n.insert.position=i.insert.position)),p.D.isUndefined(n.remove)?(n.remove=i.remove,t&&delete n.remove.funcConfirmRemove):p.D.isBoolean(n.remove.visibility)&&!n.remove.visibility?n.remove.visibility="hidden":p.D.isString(n.remove.visibility)||(n.remove.visibility=i.remove.visibility),p.D.isUndefined(n.rotateLeft)?n.rotateLeft=i.rotateLeft:p.D.isBoolean(n.rotateLeft.visibility)&&!n.rotateLeft.visibility?n.rotateLeft.visibility="hidden":p.D.isString(n.rotateLeft.visibility)||(n.rotateLeft.visibility=i.rotateLeft.visibility),p.D.isUndefined(g()(n)))n.filter=g()(i);else{if(p.D.isBoolean(g()(n).visibility)&&!g()(n).visibility?g()(n).visibility="hidden":p.D.isString(g()(n).visibility)||(g()(n).visibility=g()(i).visibility),p.D.isUndefined(g()(n).valueList))g()(n).valueList=g()(i).valueList;else{for(var o=[],a=0;a<g()(n).valueList.length;a++){for(var s=!1,u=g()(n).valueList[a].value,c=0;c<g()(i).valueList.length;c++)if(u==g()(i).valueList[c].value){s=!0;break}s&&(p.D.isUndefined(g()(n).valueList[a].option)&&(g()(n).valueList[a].option=g()(i).valueList[0].option),o.push(g()(n).valueList[a]))}g()(n).valueList=o}if(p.D.isUndefined(g()(n).defaultValue))g()(n).defaultValue=g()(i).defaultValue;else{for(var l=!1,d=g()(n).defaultValue,h=0;h<g()(n).valueList.length;h++)if(d==g()(n).valueList[h].value){l=!0;break}0==l&&(g()(n).defaultValue=g()(i).defaultValue)}p.D.isUndefined(g()(n).applyToAll)?g()(n).applyToAll=g()(i).applyToAll:(r=g()(n).applyToAll,p.D.isBoolean(r.visibility)&&!r.visibility?r.visibility="hidden":p.D.isString(r.visibility)||(r.visibility=g()(i).applyToAll.visibility),p.D.isUndefined(r.enableApplyToAll)&&(r.enableApplyToAll=g()(i).applyToAll.enableApplyToAll),p.D.isUndefined(r.label)&&(r.label=g()(i).applyToAll.label))}p.D.isUndefined(n.crop)?n.crop=i.crop:p.D.isBoolean(n.crop.visibility)&&!n.crop.visibility?n.crop.visibility="hidden":p.D.isString(n.crop.visibility)||(n.crop.visibility=i.crop.visibility),p.D.isUndefined(n.cropViewer)?(n.cropViewer=i.cropViewer,t&&delete n.cropViewer.funcConfirmExit):(p.D.isBoolean(n.cropViewer.visibility)&&!n.cropViewer.visibility?n.cropViewer.visibility="hidden":p.D.isString(n.cropViewer.visibility)||(n.cropViewer.visibility=i.cropViewer.visibility),p.D.isUndefined(n.cropViewer.polygonStyle)?n.cropViewer.polygonStyle=i.cropViewer.polygonStyle:(p.D.isUndefined(n.cropViewer.polygonStyle.stroke)&&(n.cropViewer.polygonStyle.stroke=i.cropViewer.polygonStyle.stroke),p.D.isUndefined(n.cropViewer.polygonStyle.strokeWidth)&&(n.cropViewer.polygonStyle.strokeWidth=i.cropViewer.polygonStyle.strokeWidth),p.D.isUndefined(n.cropViewer.polygonStyle.dash)&&(n.cropViewer.polygonStyle.dash=i.cropViewer.polygonStyle.dash)),p.D.isUndefined(n.cropViewer.rotateLeft)?n.cropViewer.rotateLeft=i.cropViewer.rotateLeft:(e=n.cropViewer.rotateLeft,p.D.isBoolean(e.visibility)&&!e.visibility?e.visibility="hidden":p.D.isString(e.visibility)||(e.visibility=i.cropViewer.rotateLeft.visibility)),p.D.isUndefined(n.cropViewer.rotateRight)?n.cropViewer.rotateRight=i.cropViewer.rotateRight:(r=n.cropViewer.rotateRight,p.D.isBoolean(r.visibility)&&!r.visibility?r.visibility="hidden":p.D.isString(r.visibility)||(r.visibility=i.cropViewer.rotateRight.visibility)),p.D.isUndefined(n.cropViewer.autoDetectBorder)?n.cropViewer.autoDetectBorder=i.cropViewer.autoDetectBorder:(t=n.cropViewer.autoDetectBorder,p.D.isBoolean(t.visibility)&&!t.visibility?t.visibility="hidden":p.D.isString(t.visibility)||(t.visibility=i.cropViewer.autoDetectBorder.visibility)))}return n}},{key:"closeVideo",value:function(){var e;return!!this._NouiNotSupport("closeVideo")&&(!this.myccvs||((e=this.myccvs.closeVideo())||p.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode),e))}},{key:"camera_on",value:function(e,t){this.myccvs||this.bindCameraForCameraManager(),this.mydocEditManager||this.bindCameraForDocumentEditManager(),e&&(p.D.isFunction(t)?(this.myccvs.on(e,t),this.mydocEditManager.on(e,t)):p.D.Errors.CallbackNotAFunction(this._stwain))}},{key:"camera_off",value:function(r,e){var n=this;if(n.myccvs&&r)if(p.D.isUndefined(e))n.myccvs.off(r),0<=m()(P).call(P,r)&&n.myccvs.on(r,function(e,t){p.D.isFunction(n[r])&&n[r](e,t)});else{if(!p.D.isFunction(e))return void p.D.Errors.CallbackNotAFunction(n._stwain);n.myccvs.off(r,e)}n.mydocEditManager&&r&&(p.D.isUndefined(e)?(n.mydocEditManager.off(r),0<=m()(P).call(P,r)&&n.mydocEditManager.on(r,function(e,t){p.D.isFunction(n[r])&&n[r](e,t)})):p.D.isFunction(e)?n.mydocEditManager.off(r,e):p.D.Errors.CallbackNotAFunction(n._stwain))}},{key:"createEditPage",value:function(e,t){var r=this,t=t||{};if(!r._NouiNotSupport("createEditPage"))return!1;r.mydocEditManager||r.createDocumentEditManager(),r.notBindCameraForDocumentEditManager()&&r.bindCameraForDocumentEditManager();var n=r.GetCurrentFileName();return 0==n.length&&(r.CreateFile(h),r.OpenFile(h),n=h),t.fileName=n,(n=r.mydocEditManager.createEditPage(e,t))||p.D.Errors.WebviewerError(r._stwain,r.mydocEditManager.Error.errorMessage,r.mydocEditManager.Error.errorCode),n}},{key:"removeEditPage",value:function(e){var t=!1;return t=_this.mydocEditManager?_this.mydocEditManager.removeEditPage(e):t}},{key:"GetBorder",value:function(){return this._NouiNotSupport("border")?this.myViewer.outerBorder:""}},{key:"SetBorder",value:function(e){return!!this._NouiNotSupport("border")&&(this.myViewer.outerBorder=e,!0)}},{key:"GetInnerBorder",value:function(){return this._NouiNotSupport("innerBorder")?this.myViewer.canvasBorder:""}},{key:"SetInnerBorder",value:function(e){return!!this._NouiNotSupport("innerBorder")&&(this.myViewer.canvasBorder=e,!0)}},{key:"GetAllowPageDragging",value:function(){return this._NouiNotSupport("allowPageDragging")?this.myViewer.allowPageDragging:""}},{key:"SetAllowPageDragging",value:function(e){return!!this._NouiNotSupport("allowPageDragging")&&(this.myViewer.allowPageDragging=e,!0)}},{key:"GetSelectedAreaBorderColor",value:function(){return this._NouiNotSupport("selectedAreaBorderColor")?this.myViewer.selectedBoxLineColor:""}},{key:"SetSelectedAreaBorderColor",value:function(e){return!!this._NouiNotSupport("selectedAreaBorderColor")&&(this.myViewer.selectedBoxLineColor=e,!0)}},{key:"GetCursor",value:function(){return this._NouiNotSupport("cursor")?this.myViewer.canvasMouseShape:""}},{key:"SetCursor",value:function(e){if(!this._NouiNotSupport("cursor"))return!1;if("zoom-in"==e&&!this.GetIfSinglePageMode())return p.D.Errors.CursorInvalidMode(this._stwain),!1;var t="default";switch(e){case"default":t="default",this.SetOperationMode(0);break;case"pointer":t="pointer",this.SetOperationMode(0);break;case"crosshair":t="crosshair",this.SetOperationMode(1);break;case"zoom-in":t="zoom-in",this.SetOperationMode(2);break;default:t="crosshair",this.SetOperationMode(1)}return this.myViewer.canvasMouseShape=t,!0}},{key:"GetIfAutoScroll",value:function(){return this._NouiNotSupport("ifAutoScroll")?this.myViewer.showLatestPage:""}},{key:"SetIfAutoScroll",value:function(e){return!!this._NouiNotSupport("ifAutoScroll")&&(p.D.isBoolean(e)?(this.myViewer.showLatestPage=e,this._imageEditorInner&&this._imageEditorInner.SetIfAutoScroll(),!0):(p.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetPageMargin",value:function(){return this._NouiNotSupport("pageMargin")?this.myViewer.pageMargin:0}},{key:"SetPageMargin",value:function(e){if(!this._NouiNotSupport("pageMargin"))return!1;return!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<0?(p.D.Errors.InvalidValue(this._stwain),!1):(this.myViewer.pageMargin=e,!0)}},{key:"setButtonClass",value:function(e,t){return!!this._NouiNotSupport("setButtonClass")&&((e=this.myViewer.setButtonClass(e,t))||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"clearSelectedAreas",value:function(){var e;return!!this._NouiNotSupport("clearSelectedAreas")&&(this.GetHowManyImagesInBuffer()<=0||((e=this.myViewer.clearSelectedBoxes())||p.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e))}},{key:"setSelectedAreas",value:function(e){var t,r,n=this,i=[];if(n.GetCurrentIndex()<0)return p.D.Errors.NoImage(n._stwain),!1;if(!n._NouiNotSupport("setSelectedAreas"))return!1;if(p.D.isUndefined(e)||0==e.length)return p.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(n._stwain),!1;if(e.length&&0<e.length)for(var o=0;o<e.length;o++)r={},p.D.isUndefined(e[o])||p.D.isUndefined(e[o].left)||p.D.isUndefined(e[o].top)||p.D.isUndefined(e[o].right)||p.D.isUndefined(e[o].bottom)||e[o].left<0||e[o].top<0||e[o].right<0||e[o].bottom<0||(r.left=e[o].left,r.top=e[o].top,e[o].right-e[o].left<0||e[o].bottom-e[o].top<0||(r.width=e[o].right-e[o].left,r.height=e[o].bottom-e[o].top,i.push(r)));else if(r={},!(p.D.isUndefined(e)||p.D.isUndefined(e.left)||p.D.isUndefined(e.top)||p.D.isUndefined(e.right)||p.D.isUndefined(e.bottom))){if(e.left<0||e.top<0||e.right<0||e.bottom<0)return p.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(n._stwain),!1;if(r.left=e.left,r.top=e.top,e.right-e.left<0||e.bottom-e.top<0)return p.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(n._stwain),!1;r.width=e.right-e.left,r.height=e.bottom-e.top,i.push(r)}return 0==i.length?(p.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(n._stwain),!1):((t=n.myViewer.setSelectedBoxes(i,!0))||p.D.Errors.WebviewerError(n._stwain,n.mydvs.Error.errorMessage,n.mydvs.Error.errorCode),t)}},{key:"_NouiNotSupport",value:function(e){return this._stwain._resetErr(),!!this._stwain._isValid()&&(!this._stwain._isNoViewer()||(this._stwain._nouiNotSupport(e),!1))}},{key:"pageChange",value:function(e){var t=this.GetHowManyImagesInBuffer();if(p.D.log("OnPagination"),t<=0)return p.D.Errors.NoImage(this._stwain),void k.output(this,"No image in Buffer");1!=t&&(!/^\d+$/.test(e)||e<=0?alert(M.CustomizableDisplayInfo.errorMessages.invalidIndex):((e=_()(e)-1)<0?e=0:t<=e&&(e=t-1),e!=this.GetCurrentIndex()&&this.go(e)))}},{key:"first",value:function(){var e=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("first")?e<=0?(p.D.Errors.NoImage(this._stwain),k.output(this,"No image in Buffer"),-1):(1==e||this.go(0),0):-1}},{key:"last",value:function(){var e=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("last")?e<=0?(p.D.Errors.NoImage(this._stwain),k.output(this,"No image in Buffer"),-1):1==e?0:(this.go(e=e-1),e):-1}},{key:"previous",value:function(){var e=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("previous")?e<=0?(p.D.Errors.NoImage(this._stwain),k.output(this,"No image in Buffer"),-1):1==e?0:(e=this.GetCurrentIndex()-1,this.go(e=e<0?0:e),e):-1}},{key:"next",value:function(){var e,t=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("next")?t<=0?(p.D.Errors.NoImage(this._stwain),k.output(this,"No image in Buffer"),-1):1==t?0:(e=this.GetCurrentIndex()+1,this.go(e=t<=e?t-1:e),e):-1}},{key:"go",value:function(e){var t=e;return this._NouiNotSupport("go")?this.GetHowManyImagesInBuffer()<=0?(p.D.Errors.NoImage(this._stwain),k.output(this,"No image in Buffer"),-1):(this._imageEditorInner?this._imageEditorInner.go(e):t=this.__goInner(e),t):-1}},{key:"__goInner",value:function(e){var t;if(void 0!==e){if(-1==e)return p.D.Errors.IndexOutOfRange(this._stwain),-1;p.I.Lib.detect.showMask(this._stwain),t=this.GoToPage(e)}return t}},{key:"topPageChanged",value:function(e,t){this._UIView.__fireEvent("onTopImageInTheViewChanged",{index:e,bByScrollBar:t})}},{key:"bufferChanged",value:function(e,t){for(var r,n=this,i=[],o=-1,a=[],s=0;s<n.GetHowManyImagesInBuffer();s++)(r=n.GetCustomDataByIndex(s))&&r.imageId&&i.push(n._stwain.objImageIndexManager.convertServerIdToGuid(r.imageId));if(0<i.length&&(e.imageIds=i),!e.currentUid||0<=(l=n.GetIndexByUid(e.currentUid))&&(r=n.GetCustomDataByIndex(l))&&r.imageId&&(o=n._stwain.objImageIndexManager.convertServerIdToGuid(r.imageId),(l=n._stwain._ImgManager._UIView.GetDataImageControl(r.imageId))&&-1==l.uuid&&(l.uuid=e.currentUid)),e.currentId=o,e.selectedUids)for(var u,c=0;c<e.selectedUids.length;c++)!e.selectedUids[c]||0<=(u=n.GetIndexByUid(e.selectedUids[c]))&&(r=n.GetCustomDataByIndex(u))&&r.imageId&&(a.push(n._stwain.objImageIndexManager.convertServerIdToGuid(r.imageId)),(u=n._stwain._ImgManager._UIView.GetDataImageControl(r.imageId))&&-1==u.uuid&&(u.uuid=e.currentUid));e.selectedIds=a;var l=p.D.mix(e,{});delete e.uids,delete e.currentUid,delete e.selectedUids,n._UIView.__fireEvent("onBufferChanged",e),n._documentEditor&&n._bFireSync&&(l.file||(l.file=n.GetCurrentFileName()),l.fromViewerBufferChanged===undefined&&(l.fromViewerBufferChanged=!0),n._documentEditor.syncFile(l))}},{key:"click",value:function(e){this.UpdateInfo(!0,!1,!0),this._UIView.__fireEvent("onMouseClick",{e:e,x:e.imageX,y:e.imageY,index:this.GetCurrentIndex()})}},{key:"rightclick",value:function(e){this._UIView.__fireEvent("onMouseRightClick",{e:e,x:e.imageX,y:e.imageY,index:this.GetCurrentIndex()})}},{key:"dblclick",value:function(e){this._UIView.__fireEvent("onMouseDoubleClick",{e:e,x:e.imageX,y:e.imageY,index:this.GetCurrentIndex()})}},{key:"mousemove",value:function(e){this._UIView.__fireEvent("onMouseMove",{e:e,x:e.imageX,y:e.imageY,index:this.GetCurrentIndex()})}},{key:"pageAreaSelected",value:function(e,t){var r=1;t&&0<t.length&&((t=t[t.length-1]).index&&(r=_()(t.index)+1),this._UIView.__fireEvent("onImageAreaSelected",{index:e,left:_()(t.x),top:_()(t.y),right:_()(t.x+t.width),bottom:_()(t.y+t.height),areaIndex:r}))}},{key:"pageAreaUnselected",value:function(e){this._UIView.__fireEvent("onImageAreaDeSelected",e)}},{key:"dragdone",value:function(e){p.D.isFunction(this._stwain.__OnIndexChangeDragDropDone)&&this._stwain.__OnIndexChangeDragDropDone(e)}},{key:"RegistLoadCallback",value:function(e){return this._bRegistedLoad||(this._bRegistedLoad=!0),!0}},{key:"onDrop",value:function(e){this.acceptDrop&&this.dropEvent(e)}},{key:"dropEvent",value:function(e){var t,r,n=this,i=null,o=function o(e){e&&v.output(null,e+" was loaded successfully!"),null!=i&&n._stwain.Addon.PDF.SetConvertMode(i)},a=function a(e,t,r){r&&v.output(null,r+" failed to load. Error code: "+e+"Error String: "+t),null!=i&&n._stwain.Addon.PDF.SetConvertMode(i)};try{for(var s,u,c=e.dataTransfer.files,l=0;l<c.length;l++){if(0==(t=c[l]).type.length){var d,h=void 0,g=m()(d=t.name).call(d,".");switch(h=0<g?t.name.substring(g+1):h){case"bmp":r=p.I.DWT.EnumDWT_ImageType.IT_BMP;break;case"jpg":case"jpeg":r=p.I.DWT.EnumDWT_ImageType.IT_JPG;break;case"tif":case"tiff":r=p.I.DWT.EnumDWT_ImageType.IT_TIF;break;case"png":r=p.I.DWT.EnumDWT_ImageType.IT_PNG;break;case"pdf":r=p.I.DWT.EnumDWT_ImageType.IT_PDF;break;case"jp2":case"j2k":case"j2c":r=p.I.DWT.EnumDWT_ImageType.IT_J2K;break;default:v.output(null,t.name+" failed to load because the file type is not supported!"),r=-1,p.D.Errors.UnrecognizedExt(n._stwain)}}else switch(t.type){case"image/bmp":r=p.I.DWT.EnumDWT_ImageType.IT_BMP;break;case"image/jpg":case"image/jpeg":r=p.I.DWT.EnumDWT_ImageType.IT_JPG;break;case"image/tif":case"image/tiff":r=p.I.DWT.EnumDWT_ImageType.IT_TIF;break;case"image/png":r=p.I.DWT.EnumDWT_ImageType.IT_PNG;break;case"application/pdf":r=p.I.DWT.EnumDWT_ImageType.IT_PDF;break;case"image/jp2":r=p.I.DWT.EnumDWT_ImageType.IT_J2K;break;default:v.output(null,t.name+" failed to load because the file type is not supported!"),r=-1,p.D.Errors.UnrecognizedExt(n._stwain)}-1!=r&&(p.D.showProgress(n._stwain,"DropLoading",!0),n._stwain._OnPercentDone([0,-1,p.I.MSG.Loading]),n._stwain.Addon&&n._stwain.Addon.PDF&&(s=!1,u=void 0,(n._stwain._isMobileMode()?p.D.License.checkProductKey(n._stwain,{PDFRasterizer:!0,Wasm:!0},!0):p.D.License.checkProductKey(n._stwain,{PDFRasterizer:!0},!0))&&(n._stwain._isMobileMode()?s=!0:(i=n._stwain.Addon.PDF.GetConvertMode(),u=n._stwain._innerFun("GetAddOnVersion",(0,A.dv)("pdf")),(p.D.env.bMac&&u==p.I.DWT.PdfMacVersion||p.D.env.bLinux&&u==p.I.DWT.PdfLinuxVersion||u==p.I.DWT.PdfVersion)&&(s=!0)),s&&n._stwain.Addon.PDF.SetConvertMode(3))),n._stwain._isMobileMode()?n._stwain.LoadImageFromBinary(t,function(){p.I.Lib.closeProgress(n._stwain)},function(){p.I.Lib.closeProgress(n._stwain)}):function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){n._stwain.__LoadImageFromBytes(e,r,"",!0,o,a,0,e.size)},t.onerror=function(e){p.I.Lib.closeProgress(n._stwain),p.I.Lib.Errors.InvalidFile(n._stwain),n._stwain._errorString=this.error,a({code:n._stwain._errorCode,message:n._stwain._errorString})}}(c[l]))}}catch(f){p.D.log(f.stack||f,"error"),R()(function(){throw f},0)}}},{key:"getImageManager",value:function(){return this._ImgManager}},{key:"on",value:function(e,t){e&&(p.D.isFunction(t)?this.myViewer.on(e,t):p.D.Errors.CallbackNotAFunction(this._stwain))}},{key:"off",value:function(r,e){var n=this;r&&(p.D.isUndefined(e)?(n.myViewer.off(r),0<=m()(P).call(P,r)&&n.myViewer.on(r,function(e,t){p.D.isFunction(n[r])&&n[r](e,t)})):p.D.isFunction(e)?n.myViewer.off(r,e):p.D.Errors.CallbackNotAFunction(n._stwain))}},{key:"initDialogText",value:function(e,t){return p.D.isUndefined(e)?e=t:(p.D.isUndefined(e.dlgChangeImageSize)?e.dlgChangeImageSize=t.dlgChangeImageSize:(0==e.dlgChangeImageSize[0].length&&(e.dlgChangeImageSize[0]=t.dlgChangeImageSize[0]),0==e.dlgChangeImageSize[1].length&&(e.dlgChangeImageSize[1]=t.dlgChangeImageSize[1]),0==e.dlgChangeImageSize[2].length&&(e.dlgChangeImageSize[2]=t.dlgChangeImageSize[2]),0==e.dlgChangeImageSize[3].length&&(e.dlgChangeImageSize[3]=t.dlgChangeImageSize[3]),0==e.dlgChangeImageSize[4].length&&(e.dlgChangeImageSize[4]=t.dlgChangeImageSize[4])),p.D.isUndefined(e.dlgRotateAnyAngle)?e.dlgRotateAnyAngle=t.dlgRotateAnyAngle:(0==e.dlgRotateAnyAngle[0].length&&(e.dlgRotateAnyAngle[0]=t.dlgRotateAnyAngle[0]),0==e.dlgRotateAnyAngle[1].length&&(e.dlgRotateAnyAngle[1]=t.dlgRotateAnyAngle[1]),0==e.dlgRotateAnyAngle[2].length&&(e.dlgRotateAnyAngle[2]=t.dlgRotateAnyAngle[2]),0==e.dlgRotateAnyAngle[3].length&&(e.dlgRotateAnyAngle[3]=t.dlgRotateAnyAngle[3]),0==e.dlgRotateAnyAngle[4].length&&(e.dlgRotateAnyAngle[4]=t.dlgRotateAnyAngle[4])),p.D.isUndefined(e.saveChangedImage)?e.saveChangedImage=t.saveChangedImage:(0==e.saveChangedImage[0].length&&(e.saveChangedImage[0]=t.saveChangedImage[0]),0==e.saveChangedImage[1].length&&(e.saveChangedImage[1]=t.saveChangedImage[1]),0==e.saveChangedImage[2].length&&(e.saveChangedImage[2]=t.saveChangedImage[2])),p.D.isUndefined(e.selectSource)?e.selectSource=t.selectSource:(0==e.selectSource[0].length&&(e.selectSource[0]=t.selectSource[0]),0==e.selectSource[1].length&&(e.selectSource[1]=t.selectSource[1]),0==e.selectSource[2].length&&(e.selectSource[2]=t.selectSource[2]),0==e.selectSource[3].length&&(e.selectSource[3]=t.selectSource[3]))),e}},{key:"createDocumentEditor",value:function(e){var t=this;if(!t._NouiNotSupport("createImageEditor"))return NaN;if(p.I.Lib.env.bMobile&&0==t.addCSSForShowVideo){var r=document.createElement("style"),n="*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select:none;-ms-user-select:none;user-select:none;}";r.type="text/css";try{r.appendChild(document.createTextNode(n))}catch(i){r.styleSheet.cssText=n}document.body.appendChild(r),t.addCSSForShowVideo=!0}return!t._documentEditor||t._documentEditor.myDocumentEditor.isDestroyed?(n=t.setElementForDocumentConfiguration(e),r=t.getDefaultDocumentConfigurationValue(t._globalScanConfiguration,n,!0),t._globalScanConfiguration=r,t._documentEditor=new se(t,t.GetCurrentIndex(),r)):p.D.Errors.DocumentEditorExist(t._stwain),t._documentEditorInner=t._documentEditor._documentEditorInner,t.bShowDocumentEdit=t._documentEditorInner.bShowDocumentEdit,t._documentEditor}},{key:"createImageEditor",value:function(e){var t=this;return t._NouiNotSupport("createImageEditor")?(t._imageEditor?p.D.Errors.ImageEditorExist(t._stwain):(e?(p.D.isUndefined(e.border)&&(e.border=t.GetBorder()),p.D.isUndefined(e.selectionRectAspectRatio)&&(e.selectionRectAspectRatio=t.GetSelectionRectAspectRatio()),p.D.isUndefined(e.background)&&(e.background=W.background),p.D.isUndefined(e.topMenuBorder)&&(e.topMenuBorder=W.topMenuBorder),p.D.isUndefined(e.innerBorder)&&(e.innerBorder=W.innerBorder),p.D.isUndefined(e.promptToSaveChange)&&(e.promptToSaveChange=W.promptToSaveChange),p.D.isUndefined(e.buttons)&&(e.buttons=W.buttons),e.dialogText=t.initDialogText(e.dialogText,W.dialogText)):((e=W).border=t.GetBorder(),e.selectionRectAspectRatio=t.GetSelectionRectAspectRatio()),t._imageEditor=new de(t,e)),t._imageEditorInner=t._imageEditor._imageEditorInner,t.bShowImageEdit=t._imageEditorInner.bShowImageEdit,t._imageEditor):NaN}},{key:"createThumbnailViewer",value:function(e){var r=this;return r._NouiNotSupport("createThumbnailViewer")?(e&&!p.D.isUndefined(e.showCheckbox)&&(p.D.isUndefined(e.checkbox)&&(e.checkbox={}),e.checkbox.visibility=e.showCheckbox?"visible":"hidden"),r._thumbnailViewer?p.D.Errors.ThumbnailViewerExist(r._stwain):r._thumbnailViewer=new fe(r,e),r.myThumbnailViewer=r._thumbnailViewer.myThumbnailViewer,r.myThumbnailViewer.on("click",function(e,t){r.UpdateInfo(!0,!1,!0)}),r._thumbnailViewer):NaN}},{key:"createCustomElement",value:function(e,t,r){var n=this,i="right",o=!1;return n._NouiNotSupport("createCustomElement")?p.D.isUndefined(e)?(p.D.Errors.ElementRequired(n._stwain),NaN):e?(p.D.isUndefined(t)||(i=t),!p.D.isUndefined(r)&&p.D.isBoolean(r)&&(o=r),n._customElement?p.D.Errors.CustomElementExist(n._stwain):(n._customElement=new U(n,e,i,o),n._customElement.myCustomElemet||(n._customElement=undefined)),n._customElement):(p.D.Errors.ElementNotExist(n._stwain),NaN):NaN}},{key:"ConvertClientIndexToServerIdInFile",value:function(e,t){e=this._fileWrapper.openFile(e);if(0<=t&&t<e.length){t=e[t];if(t)return this._dvsWrapper.getCustomDataSync(t).imageId}return null}},{key:"ConvertServerIdToIndexInFile",value:function(e,t){for(var r=-1,n=this._fileWrapper.openFile(e),i=0;i<n.length;i++){var o=n[i];if(o&&(o=this._dvsWrapper.getCustomDataSync(o))&&o.imageId==t){r=i;break}}return r}},{key:"FireBufferChanged",value:function(e,t,r){var n,i=this._fileWrapper.openFile(e),o=null,a=(this.currentFileName==e&&(a=this.GetCurrentIndex(),(n=this.myViewer.getCurrentPageUids())&&0<=a&&a<n.length&&(o=n[a])),{action:t,actionData:r,uids:i,currentUid:o,selectedUids:[],fromViewerBufferChanged:!1,file:e});this.IsInternalFile(e)||"add"==t?this._documentEditor&&this._documentEditor.syncFile(a):this.bufferChanged(a)}},{key:"RemoveByServerId",value:function(e,t){t=this.ConvertServerIdToIndexInFile(e,t);0<=t&&(this._fileWrapper.removeByIndexInFile(e,t),this.FireBufferChanged(e,"remove"))}},{key:"IsInternalFile",value:function(e){var t=!1;return t=0!=m()(e).call(e,"__dynamsoft_camera_files")&&0!=m()(e).call(e,"__dynamsoft_crop_files")&&0!=m()(e).call(e,"__dynamsoft_edit_files")?t:!0}},{key:"InsertImage",value:function(e,t,r){var n;this._bFireSync=!1,r=0<=r?this.mydvs.DataControl.insertSync(e,[t],r):this.mydvs.DataControl.appendSync(e,[t]),this._bFireSync=!0,r&&1<=r.length&&(n=r[0]),this.FireBufferChanged(e,"add",n)}}]),i}()),F=(p.D.UI.WebViewer=Te,v),L=p.I.DWT;var Se=function(){function n(e,t){(0,a.Z)(this,n);var r=this;r._ImgManager=e,r._stwain=e._stwain,r.zoomInStep=1.2,r.zoomOutStep=.8,r.MIN_ZOOM=.02,r.MAX_ZOOM=65,r.BaseUrl=!1,r.MAX_ROWS=128,r.MAX_COLUMNS=128,r.AllowMultiSelect=!0,r.__MousewheelValue=0,this._Init(t)}return(0,s.Z)(n,[{key:"_Init",value:function(e){var t=this;t.borderWidth=p.D.isUndefined(e.borderWidth)?1:e.borderWidth,e.BackgroundColor?t.BackgroundColorByDefault=e.BackgroundColor:t.BackgroundColorByDefault="#FFFFFF",e.BackgroundColor=t.BackgroundColorByDefault,t.BackgroundFillColor=t.BackgroundColorByDefault,t._webViewer?t._webViewer._Init(e):t._webViewer=new Te(t._ImgManager,e,t),t.mapModelImageControl=e.mapModelImageControl,t.__InitEvents(e)}},{key:"dispose",value:function(){this._webViewer&&(this._webViewer.dispose(),this._webViewer=null)}},{key:"__InitEvents",value:function(e){var t=this;p.D.isFunction(e.onTopImageInTheViewChanged)&&(t.onTopImageInTheViewChanged=e.onTopImageInTheViewChanged),p.D.isFunction(e.onGetImageInfo)&&(t.onGetImageInfo=e.onGetImageInfo),p.D.isFunction(e.onZoomChanged)&&(t.onZoomChanged=e.onZoomChanged),p.D.isFunction(e.onMouseMove)&&(t.onMouseMove=e.onMouseMove),p.D.isFunction(e.onMouseClick)&&(t.onMouseClick=e.onMouseClick),p.D.isFunction(e.onMouseRightClick)&&(t.onMouseRightClick=e.onMouseRightClick),p.D.isFunction(e.onMouseDoubleClick)&&(t.onMouseDoubleClick=e.onMouseDoubleClick),p.D.isFunction(e.onImageAreaDeSelected)&&(t.onImageAreaDeSelected=e.onImageAreaDeSelected),p.D.isFunction(e.onImageAreaSelected)&&(t.onImageAreaSelected=e.onImageAreaSelected),p.D.isFunction(e.onBufferChanged)&&(t.onBufferChanged=e.onBufferChanged),p.D.isFunction(e.onSelected)&&(t.onSelected=e.onSelected),p.D.isFunction(e.onRefreshUI)&&(t.onRefreshUI=e.onRefreshUI),p.D.isFunction(e.onResetCurrentIndex)&&(t.onResetCurrentIndex=e.onResetCurrentIndex)}},{key:"SetMetaDataByIndex",value:function(e,t){return this.GetWebViewer().SetMetaDataByIndex(e,t)}},{key:"GetMetaDataByIndex",value:function(e){return this.GetWebViewer().GetMetaDataByIndex(e)}},{key:"GetDataImageControl",value:function(e){return this.mapModelImageControl[e]}},{key:"SetDataImageControl",value:function(e,t,r){var n;return-1!=t&&((n=this.mapModelImageControl[t])||((n=new O).serverId=t,this.mapModelImageControl[t]=n),null!=n&&(n.bIsDirty=!0),this.__GetImageAndAttach(n,t,!0,!1,!1,e,r),!0)}},{key:"AttachImagesForControl",value:function(e,t){var r=this.GetWebViewer();return e.bAddImage?r.AppendImage(e,t):r.UpdateImage(e,t),r._ImageEditorInner&&r._ImageEditorInner.bCouldBeTimeConsuming&&(r._ImageEditorInner.bCouldBeTimeConsuming=!1,p.I.Lib.hideMask()),!0}},{key:"MobileAttachImagesForControl",value:function(e,t){var r=this.GetWebViewer();e.bAddImage?r.MobileAppendImage(e,t):r.MobileUpdateImage(e,t);return r._ImageEditorInner&&r._ImageEditorInner.bCouldBeTimeConsuming&&(r._ImageEditorInner.bCouldBeTimeConsuming=!1,p.I.Lib.hideMask()),!0}},{key:"GetWebViewer",value:function(){return this._webViewer}},{key:"__GetWebViewerUuid",value:function(e){return this.mapModelImageControl[e].uuid}},{key:"SetSelectedImageArea",value:function(e,t,r,n){var i=this.GetWebViewer();return null!=i&&i.SetSelectedImageArea(e,t,r,n)}},{key:"OverlayRectangle",value:function(e,t,r,n,i,o,a){var s=this.GetWebViewer();return null!=s&&s.OverlayRectangle(e,t,r,n,i,o,a)}},{key:"ChangeImageViewSize",value:function(e,t){var r=this.GetWebViewer();return 0<=e&&(e>r.GetWidth()&&0,r.SetWidth(e)),0<=t&&(t>r.GetHeight()&&0,this.GetWebViewer().SetHeight(t)),!0}},{key:"GetWidth",value:function(){return this.GetWebViewer().GetWidth()}},{key:"SetWidth",value:function(e){return this.GetWebViewer().SetWidth(e),!0}},{key:"GetHeight",value:function(){return this.GetWebViewer().GetHeight()}},{key:"SetHeight",value:function(e){return this.GetWebViewer().SetHeight(e),!0}},{key:"RefreshAllImages",value:function(e,t){var r=this.GetWebViewer();if(!this._stwain._isMobileMode()&&this.mapModelImageControl)for(var n=0;n<r.GetHowManyImagesInBuffer();n++){var i=this.getImageManager().convertClientIndexToServerId(n),o=this.mapModelImageControl[i];o&&(i=F.getImageUrl(this.BaseUrl,i,e,t,d()()),o.minImageUrl=i,i=r.GetMetaDataByIndex(n),r.UpdateImage(o,i))}}},{key:"SetViewMode",value:function(e,t){return this.GetWebViewer().SetViewMode(e,t)}},{key:"RemoveAllImages",value:function(){for(var e,t=this._ImgManager.count(),r=B()(this.mapModelImageControl).length,n=0;n<t;n++)-1!=(e=this.getImageManager().convertClientIndexToServerId(n))&&this.mapModelImageControl[e]&&(this.mapModelImageControl[e].Clear(),delete this.mapModelImageControl[e]);return t==r&&(this.mapModelImageControl={}),this.GetWebViewer().RemoveAllImages(),!0}},{key:"__GetImageAndAttach",value:function(e,t,r,n,i,o,a){var s=this.GetWebViewer().GetWidth(),u=this.GetWebViewer().GetHeight(),c=!1,c=!!r||1==e.bIsDirty,r=this.__GetWebViewerUuid(t);r&&e.iImageControlWidth==s&&e.iImageControlHeight==u&&0==e.bIsDirty||this.__SetArrayControlLoadImage(r,t,e,s,u,this.AttachImagesForControl,c,n,i,o,a)}},{key:"__SetArrayControlLoadImage",value:function(e,t,r,n,i,o,a,s,u,c,l){this._stwain._isMobileMode()?this.OnGetImageFromMobileServer(t,r,n,i,s,u,c,l):a?this.OnGetImageFromServer(t,r,n,i,s,u,c,l):this.OnGetImageByURL(t,r,n,i,s,u,c,l)}},{key:"OnGetImageByURL",value:function(e,t,r,n,i,o,a,s){return t.imageUrl&&""!=t.imageUrl?(t.iImageControlWidth=r,t.iImageControlHeight=n,t.bAddImage=i,t.bAppendImage=o,t.index=a,this._stwain._isMobileMode()?this.MobileAttachImagesForControl(t,s):this.AttachImagesForControl(t,s),!0):this.OnGetImageFromServer(e,t,r,n,i,o,a,s)}},{key:"OnGetImageFromMobileServer",value:function(e,t,r,n,i,o,a,s){t.iImageControlWidth=r,t.iImageControlHeight=n,t.bAddImage=i,t.bAppendImage=o,t.index=a,this.MobileAttachImagesForControl(t,s)}},{key:"OnGetImageFromServer",value:function(e,t,r,n,i,o,a,s){var u=this,c=u.BaseUrl;if(c){if(-1==e)return!1;t.bIsDirty&&(t.ticks=d()()),p.D.isUndefined(r)&&(r=-1),p.D.isUndefined(n)&&(n=-1),t.iImageControlWidth=r,t.iImageControlHeight=n,t.bAddImage=i,t.bAppendImage=o,t.index=a,p.I.DWT.ConnectWithSocket&&u._stwain._bBindViewer?u._stwain.__innerConvertToBlob(p.I.DWT.EnumDWT_ImageType.IT_PNG,[e],!1,!0,4,function(e){t.imageUrl=l().createObjectURL(e),t.minImageUrl=l().createObjectURL(e),u.AttachImagesForControl(t,s)},function(e){}):(i=F.getImageUrl(c,e,-1,-1,t.ticks),o=F.getImageUrl(c,e,r,n,t.ticks),t.imageUrl=i,t.minImageUrl=o,u.AttachImagesForControl(t,s))}return!0}},{key:"SetIfFitWindowAndType",value:function(e){var t,r=this.GetWebViewer();if(null!=r){switch(e){case 1:t="height";break;case 2:t="width";break;default:t="window"}r.SetFitType(t)}return!0}},{key:"GetAllowMultiSelect",value:function(){return this.AllowMultiSelect}},{key:"SetAllowMultiSelect",value:function(e){return this.AllowMultiSelect=e,!0}},{key:"GetFitWindowType",value:function(){return 0}},{key:"SetSelectionRectAspectRatio",value:function(e){return this.GetWebViewer().SetSelectionRectAspectRatio(e),!0}},{key:"GetSelectionRectAspectRatio",value:function(e){return this.GetWebViewer().GetSelectionRectAspectRatio()}},{key:"SetFitWindowType",value:function(e){return this.SetIfFitWindowAndType(e),!0}},{key:"GetIfFitWindow",value:function(){return!0}},{key:"SetIfFitWindow",value:function(e){return e?this.GetWebViewer().SetFitType():this.GetWebViewer().SetZoom(1),!0}},{key:"GetImageMargin",value:function(){return this.GetWebViewer().GetImageMargin()}},{key:"SetImageMargin",value:function(e){return this.GetWebViewer().SetImageMargin(e),!0}},{key:"GetSelectionImageBorderColor",value:function(){return this.GetWebViewer().GetSelectedPageBorder()}},{key:"SetSelectionImageBorderColor",value:function(e){return this.GetWebViewer().SetSelectionImageBorderColor(e),!0}},{key:"GetZoom",value:function(){return this.GetWebViewer().GetZoom()}},{key:"SetZoom",value:function(e){(e=e<this.MIN_ZOOM?this.MIN_ZOOM:e)>this.MAX_ZOOM&&(e=this.MAX_ZOOM);var t=this.GetWebViewer();return null!=t&&t.SetZoom(e),!0}},{key:"ZoomIn",value:function(e,t){var r=this.mapModelImageControl[this.getImageManager().convertClientIndexToServerId(this._webViewer.GetCurrentIndex())],n=this.GetWebViewer().GetZoom(),i=Math.floor(100*n*this.zoomInStep)+1;return!(1<i&&i<2501)||15e3<_()(r.imageWidth*n)||15e3<_()(r.imageHeight*n)?(F.output(this,L.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),alert(L.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),!1):(this.SetZoom(i/100,e,t),!0)}},{key:"ZoomOut",value:function(){var e=this.GetWebViewer().GetZoom(),e=Math.floor(100*e*this.zoomOutStep)-1;return 1<e&&e<6501?(this.SetZoom(e/100),!0):(F.output(this,L.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),alert(L.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),!1)}},{key:"GetMouseShape",value:function(){return this.GetWebViewer().GetMouseShape()}},{key:"SetMouseShape",value:function(e){return this.GetWebViewer().SetMouseShape(e),!0}},{key:"GetShowPageNumber",value:function(){return this.GetWebViewer().GetShowPageNumber()}},{key:"SetShowPageNumber",value:function(e){return this.GetWebViewer().SetShowPageNumber(e),!0}},{key:"SetBackgroundFillColor",value:function(e){return this.BackgroundFillColor=e,!0}},{key:"GetBackgroundColor",value:function(){return this.GetWebViewer().GetBackground()}},{key:"SetBackgroundColor",value:function(e){return this.GetWebViewer().SetBackground(e),!0}},{key:"Go",value:function(e){return this.GetWebViewer().go(e)}},{key:"SetSelectedindexes",value:function(e){return this.GetWebViewer().SetSelectedindexes(e)}},{key:"GetSelectedindexes",value:function(e){return this.GetWebViewer().GetSelectedindexes()}},{key:"__Previous",value:function(){return this.Go(this.GetWebViewer().GetCurrentIndex()-1),!0}},{key:"__Next",value:function(){return this.Go(this.GetWebViewer().GetCurrentIndex()+1),!0}},{key:"__fireEvent",value:function(e,t){return!p.D.isFunction(this[e])||this[e](t)}},{key:"AddImage",value:function(e,t,r,n){var i,e=+e;return-1!=t&&((i=new O).bIsDirty=!0,i.serverId=t,this.mapModelImageControl[t]=i,0<=t&&this.__GetImageAndAttach(i,t,!1,!0,n,e,r),!0)}},{key:"RemoveImage",value:function(e,t){e=_()(e);return isNaN(e)?(p.D.Errors.InvalidIndex(this),!1):e<0||e>=this._ImgManager.count()?(p.D.Errors.IndexOutOfRange(this),!1):(this._ImgManager.count(),-1!=t&&this.mapModelImageControl[t]&&(this.mapModelImageControl[t].Clear(),delete this.mapModelImageControl[t]),this.GetWebViewer().RemoveByIndex(e))}},{key:"MoveImage",value:function(e,t,r){return this.GetWebViewer().MoveImage(e,t)}},{key:"SwitchImage",value:function(e,t){return this.GetWebViewer().SwitchImage(e,t)}},{key:"GetIfAutoScroll",value:function(){return this._webViewer.GetIfAutoScroll()}},{key:"SetIfAutoScroll",value:function(e){return this._webViewer.SetIfAutoScroll(e),!0}},{key:"Print",value:function(){var t=this,r=t.GetWebViewer().GetCurrentIndex();if(!(r<0)){var n=t.getImageManager().convertClientIndexToServerId(r);if(-1==n)return p.D.Errors.IndexOutOfRange(t),!1;if(!t._stwain._isMobileMode())return e=F.getImageUrl(t.BaseUrl,n,-1,-1),t.__PrintInner(e,n,r);var e=t.GetWebViewer().GetUidByIndex(r);return t.GetWebViewer().GetImageData(e).then(function(e){return e.oriData instanceof ArrayBuffer?t.__PrintInner(l().createObjectURL(new Blob([e.oriData])),n,r):e.oriData instanceof Blob?t.__PrintInner(l().createObjectURL(e.oriData),n,r):t.__PrintInner(e.oriData,n,r)}),!0}}},{key:"__PrintInner",value:function(e,t,r){var t=this.mapModelImageControl[t],n=[];if(!t)return!1;var i=t.width,o=((p.D.isUndefined(t.width)||t.width<=0)&&(t.width=this.getImageManager().GetImageWidth(r)),t.height),r=((p.D.isUndefined(t.height)||t.height<=0)&&(t.height=this.getImageManager().GetImageHeight(r)),new u(e,t.width,t.height));return n.push(r),t.width=i,t.height=o,F.print(n),!0}},{key:"GetHowManyImagesInBuffer",value:function(){return this.GetWebViewer().GetHowManyImagesInBuffer()}},{key:"RemoveImageTag",value:function(e){return this.GetWebViewer().RemoveImageTag(e)}},{key:"FilterImagesByTag",value:function(e,t,r){return this.GetWebViewer().FilterImagesByTag(e,t,r)}},{key:"ClearFilter",value:function(){return this.GetWebViewer().ClearFilter()}},{key:"GetServerIdList",value:function(){return this.GetWebViewer().GetServerIdList()}},{key:"GetServerIdListByTag",value:function(e){var t,r,n,i,o=[];if(e&&0==e.length)for(r=0;r<this.GetHowManyImagesInBuffer();r++)(i=this.GetWebViewer().GetCustomDataByIndex(r))&&o.push(i.imageId);else if(t=this.GetWebViewer().GetTagContents(e))for(r=0;r<t.length;r++)0<=(n=this.GetWebViewer().GetIndexByUid(t[r]))&&(i=this.GetWebViewer().GetCustomDataByIndex(n))&&o.push(i.imageId);return o}},{key:"SetDefaultTag",value:function(e){return this.GetWebViewer().SetDefaultTag(e)}},{key:"AddImageTag",value:function(e,t){return this.GetWebViewer().AddImageTag(e,t)}},{key:"GetCurrentTag",value:function(){var e=this.GetWebViewer().GetCurrentTag();return 0==e?"":e}},{key:"RenameTag",value:function(e,t){return this.GetWebViewer().RenameTag(e,t)}},{key:"RemoveTag",value:function(e,t){return this.GetWebViewer().RemoveTag(e,t)}},{key:"GetTagList",value:function(){return this.GetWebViewer().GetTagList()}},{key:"GetTagListByIndex",value:function(e){return this.GetWebViewer().GetTagListByIndex(e)}},{key:"CreateFile",value:function(e){return this.GetWebViewer().CreateFile(e)}},{key:"OpenFile",value:function(e){return this.GetWebViewer().OpenFile(e)}},{key:"GetCurrentFileName",value:function(){return this.GetWebViewer().GetCurrentFileName()}},{key:"RemoveFile",value:function(e){return this.GetWebViewer().RemoveFile(e)}},{key:"RenameFile",value:function(e,t){return this.GetWebViewer().RenameFile(e,t)}},{key:"GetFileInfoList",value:function(){return this.GetWebViewer().GetFileInfoList()}},{key:"GetImageIdsByFileName",value:function(e){return this.GetWebViewer().GetImageIdsByFileName(e)}},{key:"BindView",value:function(e){var t=this.GetWebViewer();return(e=t.BindView(e))&&t.show(),e}},{key:"UnbindView",value:function(){return this.GetWebViewer().UnbindView()}},{key:"GetIfShowVideoContainer",value:function(){return this.GetWebViewer().GetIfShowVideoContainer()}},{key:"ShowVideoContainer",value:function(e){return this.GetWebViewer().ShowVideoContainer(e)}},{key:"UpdateVideoContainer",value:function(e){return this.GetWebViewer().UpdateVideoContainer(e)}},{key:"__AttachImages",value:function(){for(var e,t,r=this.GetWebViewer().GetHowManyImagesInBuffer(),n=0;n<r;n++)0<=(e=this._ImgManager.convertClientIndexToServerId(n))&&(t=this.mapModelImageControl[e],this.__GetImageAndAttach(t,e,!0,!1,!1,0))}},{key:"exists",value:function(e){return!p.D.isUndefined(this.mapModelImageControl[e])}},{key:"getImageManager",value:function(){return this._ImgManager}},{key:"GetImageData",value:function(e){this.GetWebViewer().GetImageData(e)}},{key:"RegistLoadCallback",value:function(e){return this.GetWebViewer().RegistLoadCallback(e)}},{key:"UpdateData",value:function(e,t){var r=this.GetWebViewer(),e=this.GetDataImageControl(e);return e&&r.UpdateImage(e,t),!0}},{key:"RemoveByServerId",value:function(e,t){return this.GetWebViewer().RemoveByServerId(e,t)}},{key:"innerInsertModel",value:function(e,t){var r=new O;r.serverId=e,r.uuid=t,this.mapModelImageControl[e]=r}}]),n}();p.D.UI.ImageUIView=Se;var we=function(e){return[e.httpUrl,"dwt/",p.D.product.getDWTPrefix(),p.D.product.getServerVersionInfo(),"/img?id=",e.clientId].join("")},Ce=function(e){p.I.DWT.Debug&&p.D.log(e)},Ee=function(){function r(e,t){(0,a.Z)(this,r);this._stwain=e,this.__BackgroundFillColor=16777215,this.bImageJustChangedInEditor=!1,this.bImageChangedInViewer=!1,this._Init(e,t)}return(0,s.Z)(r,[{key:"_Init",value:function(t,e){var r=this;t._ifBindViewer?e.mapModelImageControl=r.getView().mapModelImageControl:e.mapModelImageControl={},e.onTopImageInTheViewChanged=function(e){p.I.Lib.isFunction(t.__OnTopImageInTheViewChanged)&&t.__OnTopImageInTheViewChanged(e.index,e.bByScrollBar)},e.onGetImageInfo=function(e){return{width:r.GetImageWidth(e),height:-1}},r._UIView?r._UIView._Init(e):r._UIView=new Se(r,e)}},{key:"getUidByIndex",value:function(e){return this.getWebViewer().GetUidByIndex(e)}},{key:"getIndexByUid",value:function(e){return this.getWebViewer().GetIndexByUid(e)}},{key:"getCurrentImageIndex",value:function(){return this.getWebViewer().GetCurrentIndex()}},{key:"convertServerIdToClientIndex",value:function(e){var t,r=-1,e=this._UIView.GetDataImageControl(e);return(t=e?e.uuid:t)&&(r=this.getWebViewer().GetIndexByUid(t)),r=p.D.isNumber(r)?r:-1}},{key:"convertClientIndexToServerId",value:function(e){e=this.getWebViewer().GetCustomDataByIndex(e);return e?e.imageId:-1}},{key:"convertClientIndexToServerIdInFile",value:function(e,t){return this.getWebViewer().ConvertClientIndexToServerIdInFile(e,t)}},{key:"getWebViewer",value:function(){return this.getView()._webViewer}},{key:"getTwain",value:function(){return this._stwain}},{key:"getView",value:function(){return this._UIView}},{key:"OnReady",value:function(){return this.getView().BaseUrl=we(this._stwain),!0}},{key:"count",value:function(){return this.getView().GetWebViewer().GetHowManyImagesInBuffer()}},{key:"clear",value:function(){return this.getView().RemoveAllImages(),!0}},{key:"dispose",value:function(){return this._UIView&&(this._UIView.dispose(),this._UIView=null),!0}},{key:"unshift",value:function(e,t,r){this.getView();return this._updateUIAfterAdd(0,t,r)}},{key:"append",value:function(e,t,r){for(var n,i,o=this.getView(),a=o.GetWebViewer().GetHowManyImagesInBuffer(),s=o.GetWebViewer().GetCurrentIndex(),u=a-1;e<=u;u--)i=this.convertClientIndexToServerId(u),o.RemoveImage(u,i);return a<e?this._updateUIAfterAdd(n=a,t,r,!0):(i=this.convertClientIndexToServerId(n=a-1<=s?0:s+1),o.RemoveImage(n,i),n==e-1?this._updateUIAfterAdd(n,t,r,!0):this._updateUIAfterAdd(n,t,r,!1))}},{key:"exists",value:function(e){return this.getView().exists(e)}},{key:"insertBefore",value:function(e,t,r,n){e=+e;return(e<0||t<e)&&(e=-1),t=this.getView().GetWebViewer().GetHowManyImagesInBuffer(),this._updateUIAfterAdd(e=t<=e?t:e,r,n,!1)}},{key:"insert",value:function(e,t,r,n){e=+e;return(e<0||t<e)&&(e=-1),t=this.getView().GetWebViewer().GetHowManyImagesInBuffer(),this._updateUIAfterAdd(e=t<=e?t:e,r,n,!1)}},{key:"_updateUIAfterAdd",value:function(e,t,r,n){var i=this.getView();return!(t<0)&&i.AddImage(e,t,r,n)}},{key:"removeByServerId",value:function(e,t){var r=e,n=this.GetCurrentFileName();if(!r||r==n){n=this.convertServerIdToClientIndex(t);if(n<0&&0<=(n=this.getWebViewer().ConvertServerIdToIndexInFile(r,t))&&(r=this.getUidByIndex(n),this.getView().innerInsertModel(t,r)),0<=n)return this.remove(t)}return this.getView().RemoveByServerId(e,t)}},{key:"remove",value:function(e){var t=this.getView(),r=this.convertServerIdToClientIndex(e);return t.RemoveImage(r,e)}},{key:"MoveImage",value:function(e,t){return this.getView().MoveImage(e,t)}},{key:"SwitchImage",value:function(e,t){return this.getView().SwitchImage(e,t)}},{key:"GetImageHeight",value:function(e){var e=+e,t=this.getView(),r=this.count();return e<0||r<e?0:this._stwain._isMobileMode()?(r=t._webViewer.GetMetaDataByIndex(e))&&r.height?r.height:0:(r=this.convertClientIndexToServerId(e),(r=t.GetDataImageControl(r))&&r.imageHeight?r.imageHeight:this._stwain.GetImageHeight(e))}},{key:"GetImageWidth",value:function(e){var e=+e,t=this.getView(),r=this.count();return e<0||r<e?0:this._stwain._isMobileMode()?(r=t._webViewer.GetMetaDataByIndex(e))&&r.width?r.width:0:(r=this.convertClientIndexToServerId(e),(r=t.GetDataImageControl(r))&&r.imageWidth?r.imageWidth:this._stwain.GetImageWidth(e))}},{key:"get",value:function(e){var e=_()(e),t=this.getView(),r=this.count();return!(e<0||r<e)&&(r=this.convertClientIndexToServerId(e),t.GetDataImageControl(r))}},{key:"refresh",value:function(e,t,r,n){e=+e;if(r){var r=this.getView(),i=this.count();if(e<0||i<e)return!1;i=this.convertClientIndexToServerId(e),r.SetDataImageControl(e,i,n)}return!0}},{key:"Go",value:function(e){return this.getView().Go(e)}},{key:"__Next",value:function(){return this.getView().__Next()}},{key:"__Previous",value:function(){return this.getView().__Previous()}},{key:"SetSelectedClientIndexArray",value:function(e){return this.getView().SetSelectedindexes(e)}},{key:"getSelectedClientIndexArray",value:function(){return this.getView().GetSelectedindexes()}},{key:"GetZoom",value:function(){return this.getView().GetZoom()}},{key:"SetZoom",value:function(e){return this.getView().SetZoom(e)}},{key:"__GetPrintUrl",value:function(e,t,r){var n,i=0,o=0,t=this.getView().GetDataImageControl(t);return t&&(!t.width||t.width<=0?t.width=this.GetImageWidth(r):i=t.width,!t.height||t.height<=0?t.height=this.GetImageHeight(r):o=t.height,n=new u(e,t.width,t.height),t.width=i,t.height=o),n}},{key:"__GetPrintUrlforHttp",value:function(e,n){var i=this,o=i.getView();p.D.each(e,function(e){var t,r=i.convertClientIndexToServerId(e);-1!=r&&(t=v.getImageUrl(o.BaseUrl,r,-1,-1),t=i.__GetPrintUrl(t,r,e),n.push(t))}),v.print(n)}},{key:"__GetPrintUrlforSocket",value:function(n,i){var o,a=this,e=p.D.Promise.resolve(0),s=0;return p.D.each(n,function(r){e=e.then(function(){var e,t=a.convertClientIndexToServerId(r);-1!=t&&(e=a.getWebViewer().GetUidByIndex(r),a.getWebViewer().GetImageData(e).then(function(e){s++,o=e.oriData instanceof ArrayBuffer?l().createObjectURL(new Blob([e.oriData])):e.oriData instanceof Blob?l().createObjectURL(e.oriData):e.oriData;e=a.__GetPrintUrl(o,t,r);i.push(e),n.length==s&&v.print(i)}))})}),!0}},{key:"__GetPrintUrlforMobileEx",value:function(n,i){var o,a=this,e=p.D.Promise.resolve(0),s=0;return p.D.each(n,function(r){e=e.then(function(){var e,t=a.convertClientIndexToServerId(r);-1!=t&&(e=a.getWebViewer().GetUidByIndex(r),a.getWebViewer().GetImageData(e).then(function(e){s++,o=e.oriData instanceof ArrayBuffer?l().createObjectURL(new Blob([e.oriData])):e.oriData instanceof Blob?l().createObjectURL(e.oriData):e.oriData;e=a.__GetPrintUrl(o,t,r);i.push(e),n.length==s&&v.print(i)}))})}),!0}},{key:"PrintEx",value:function(e){var t;if(!(this.count()<=0))return t=[],this._stwain._isMobileMode()?this.__GetPrintUrlforMobileEx(e,t):p.I.DWT.ConnectWithSocket?this.__GetPrintUrlforSocket(e,t):this.__GetPrintUrlforHttp(e,t),!0}},{key:"Print",value:function(){if(this.count()<=0)return!1;for(var e=[],t=0;t<this.count();t++)e.push(t);return this.PrintEx(e)}},{key:"_isNoViewer",value:function(){return!this._stwain._bBindViewer}},{key:"ChangeSize",value:function(e,t){return this.getView().ChangeImageViewSize(e,t)}},{key:"GetWidth",value:function(){return this.getView().GetWidth()}},{key:"SetWidth",value:function(e,t){return!!this._isNoViewer()||this.getView().SetWidth(e)}},{key:"GetHeight",value:function(){return this.getView().GetHeight()}},{key:"SetHeight",value:function(e,t){return!!this._isNoViewer()||this.getView().SetHeight(e)}},{key:"SetViewMode",value:function(e,t){return this._isNoViewer()?this._nouiNotSupport("SetViewMode"):this.getView().SetViewMode(e,t)}},{key:"ShowImageEditorEx",value:function(e,t,r,n,i,o,a,s){if(this._isNoViewer())return this._nouiNotSupport("ShowImageEditorEx");switch(i){case 0:case 1:case 2:break;case 3:if(this.getWebViewer().OnCloseImageEditor())return!0}var u,i=document,c=this.getView();this.getTwain()._containerElement==a&&(o=!1,Ce("warning: cannot use the same DIV for the main viewer and the editor viewer."));for(var l=0;l<p.I.DWT.DynamicContainers.length;l++)if(p.I.DWT.DynamicContainers[l].ContainerId==a){o=!1,Ce("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");break}if(o&&a&&(p.D.isDOM(a)?u=a:p.D.isShadowRoot(a)?(u=document.createElement("div"),a.appendChild(u)):(u=i.getElementById(a))&&"DIV"!=u.nodeName&&(Ce("warning: cannot create the editor viewer in a non-DIV element."),o=!1)),o&&a&&p.D.isDOM(a)){var d,h,g,f=p.D.getShadowRoot(a);if(f)return d=p.I.Lib.timestamp,(g=i.createElement("link")).href=[p.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",d].join(""),g.rel="stylesheet",g.async=!0,(h=i.createElement("link")).href=[p.I.DWT.ResourcesPath,"/src/dynamsoft.webtwain.css",d].join(""),h.rel="stylesheet",h.async=!0,p.D.scriptOnload(g,function(){p.D.scriptOnload(h,function(){return c.GetWebViewer().ShowImageEditor(u,o,r,n)}),f.appendChild(h)}),f.appendChild(g),!0}return c.GetWebViewer().ShowImageEditor(u,o,r,n)}},{key:"SetSelectionRectAspectRatio",value:function(e){return this.getView().SetSelectionRectAspectRatio(e)}},{key:"GetSelectionRectAspectRatio",value:function(){return this.getView().GetSelectionRectAspectRatio()}},{key:"GetSelectionImageBorderColor",value:function(){return this.getView().GetSelectionImageBorderColor()}},{key:"SetSelectionImageBorderColor",value:function(e){return this.getView().SetSelectionImageBorderColor(e)}},{key:"GetBackgroundColor",value:function(){return this.getView().GetBackgroundColor()}},{key:"SetBackgroundColor",value:function(e,t){var r;return!!this._isNoViewer()||(r=this.getView(),t?r.SetBackgroundColor(e,!0):r.SetBackgroundColor(e))}},{key:"GetAllowMultiSelect",value:function(){var e=this.getView();return!this._isNoViewer()&&e.GetAllowMultiSelect()}},{key:"SetAllowMultiSelect",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetAllowMultiSelect(e)}},{key:"GetFitWindowType",value:function(){var e=this.getView();return this._isNoViewer()?0:e.GetFitWindowType()}},{key:"SetFitWindowType",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetFitWindowType(e)}},{key:"GetIfFitWindow",value:function(){var e=this.getView();return!!this._isNoViewer()||e.GetIfFitWindow()}},{key:"SetIfFitWindow",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetIfFitWindow(e)}},{key:"GetImageMargin",value:function(){var e=this.getView();return this._isNoViewer()?0:e.GetImageMargin()}},{key:"SetImageMargin",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetImageMargin(e)}},{key:"GetMouseShape",value:function(){var e=this.getView();return this._isNoViewer()?0:e.GetMouseShape()}},{key:"SetMouseShape",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetMouseShape(e)}},{key:"GetShowPageNumber",value:function(){var e=this.getView();return!this._isNoViewer()&&e.GetShowPageNumber()}},{key:"SetShowPageNumber",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetShowPageNumber(e)}},{key:"GetIfAutoScroll",value:function(){return this.getView().GetIfAutoScroll()}},{key:"SetIfAutoScroll",value:function(e){return this.getView().SetIfAutoScroll(e)}},{key:"OverlayRectangle",value:function(e,t,r,n,i,o,a){return!!this._isNoViewer()||this.getView().OverlayRectangle(e,t,r,n,i,o,a)}},{key:"SetSelectedImageArea",value:function(e,t,r,n,i){var o=this.getView();return e==o.GetWebViewer().GetCurrentIndex()&&(!!this._isNoViewer()||o.SetSelectedImageArea(t,r,n,i))}},{key:"ShowImagesByFilter",value:function(e,t,r){return this.getView().FilterImagesByTag(e,t,r)}},{key:"ClearFilter",value:function(){return this.getView().ClearFilter()}},{key:"GetServerIdListByTag",value:function(e){return this.getView().GetServerIdListByTag(e)}},{key:"GetAllServerIdList",value:function(){return this.getView().GetServerIdList()}},{key:"RemoveImageTag",value:function(e){return this.getView().RemoveImageTag(e)}},{key:"SetDefaultTag",value:function(e){return this.getView().SetDefaultTag(e)}},{key:"AddImageTag",value:function(e,t){return this.getView().AddImageTag(e,t)}},{key:"GetCurrentTag",value:function(){return this.getView().GetCurrentTag()}},{key:"RenameTag",value:function(e,t){return this.getView().RenameTag(e,t)}},{key:"RemoveTag",value:function(e,t){return this.getView().RemoveTag(e,t)}},{key:"GetTagList",value:function(){return this.getView().GetTagList()}},{key:"GetTagListByIndex",value:function(e){return this.getView().GetTagListByIndex(e)}},{key:"OpenFile",value:function(e){return this.getView().OpenFile(e)}},{key:"CreateFile",value:function(e){return this.getView().CreateFile(e)}},{key:"GetCurrentFileName",value:function(){return this.getView().GetCurrentFileName()}},{key:"RemoveFile",value:function(e){return this.getView().RemoveFile(e)}},{key:"RenameFile",value:function(e,t){return this.getView().RenameFile(e,t)}},{key:"GetFileInfoList",value:function(){return this.getView().GetFileInfoList()}},{key:"GetImageIdsByFileName",value:function(e){return this.getView().GetImageIdsByFileName(e)}},{key:"BindView",value:function(e){var t=this.getView(),r=e;return p.D.isString(e)?r=p.D.get(e):!p.D.isDOM(r)||r.id&&""!=r.id||(r.id=["dwt_",p.D.getRandom()].join("")),t.BindView(r)}},{key:"UnbindView",value:function(){return this.getView().UnbindView()}},{key:"GetIfShowVideoContainer",value:function(){return this.getView().GetIfShowVideoContainer()}},{key:"ShowVideoContainer",value:function(e){return this.getView().ShowVideoContainer(e)}},{key:"UpdateVideoContainer",value:function(e){return this.getView().UpdateVideoContainer(e)}},{key:"GetImageData",value:function(e){var t=this.getView(),e=this.convertServerIdToClientIndex(e);return 0<=e?t.GetImageData(this.getUidByIndex(e)):NaN}},{key:"RegistLoadCallback",value:function(e){return this.getView().RegistLoadCallback(e)}},{key:"insertImage",value:function(e,t,r){this.getWebViewer().InsertImage(e,t,r)}}]),r}(),N=(p.D.UI.ImageManager=Ee,p.D.html5.Funs),Me=function Me(t){p.D.dlgProgress||p.D.initProgress();var e=p.D.one(".dynamsoft-btnCancel");e&&e.getEL()&&p.D.addEventListener(e[0],"mousedown",function r(){var e=p.D.cancelFrome;p.D.closeProgress(t,0),1==e||2==e?p.D.bio&&(p.D.bio.abort(),p.D.bio=!1):3==e||4==e?t.SetCancel():5==e&&p.D.isFunction(t.__OnCancel)&&t.__OnCancel()})};p.D.mix(N,{changeImageUISize:function(t,e,r){var n,i,o=e,a=r,s=!1,u=p.D.one(t._containerElement),r=(p.D.isString(e)&&0<=m()(e).call(e,"%")?(0==(n=p.D.css(u,"width"))&&(u[0].style.width="100%"),n=p.D.css(u,"width")*_()(e)/100,s=!0):o=[(n=_()(e))+2,"px"].join(""),p.D.isString(r)&&0<=m()(r).call(r,"%")?(0==(i=p.D.css(u,"height"))&&(u[0].style.height="100%"),i=p.D.css(u,"height")*_()(r)/100,s=!0):a=[(i=_()(r))+2,"px"].join(""),u&&(e=p.D.one(".dynamsoft-dwt-container-box",u))&&e.getEL()&&(e.style("width",o),e.style("height",a)),s?(t.__funResize||(t.__funResize=function(){var e;return!t._ImgManager||!t._containerElement||(e=N.__innerGetUIViewRealSize(t._containerElement,t._width,t._height),t._ImgManager.ChangeSize(e.width,e.height))}),p.D.removeEventListener(window,"resize",t.__funResize),p.D.addEventListener(window,"resize",t.__funResize)):t.__funResize&&(p.D.removeEventListener(window,"resize",t.__funResize),t.__funResize=!1),N.__innerGetUIViewRealSize(t._containerElement,n,i));return!t._ImgManager||t._ImgManager.ChangeSize(r.width,r.height)},__innerGetUIViewRealSize:function(e,t,r){var n=-1,i=-1,e=p.D.one(e);return{width:n=(n=p.D.isString(t)&&0<=m()(t).call(t,"%")?p.D.css(e,"width")*_()(t)/100:n)<0&&t?_()(t):n,height:i=(i=p.D.isString(r)&&0<=m()(r).call(r,"%")?p.D.css(e,"height")*_()(r)/100:i)<0&&r?_()(r):i}},bindUIViewEvents:function(e,t){var n=e;t.onSelected=function(e){var t;n._isNoViewer()||0<(t=e.length)&&(n._ImgManager.SetSelectedImageCount(t),t=e[t-1],p.D.isFunction(n.__OnRefreshUI)&&n.__OnRefreshUI(t))},t.onRefreshUI=function(e){n._isNoViewer()||N.__innerRefreshFromUIView(n,e)},t.onResetCurrentIndex=function(e){var t;n._isNoViewer()||(t=n._ImgManager.getCurrentImageIndex(),0<=e&&e<n._ImgManager.count()&&t!=e&&p.D.isFunction(n.__OnIndexChangeDuringDragDrop)&&n.__OnIndexChangeDuringDragDrop(t,e))},t.onMouseMove=function(e){var t,r;n._isNoViewer()||(t=e.index,e&&(r=e.x,e=e.y,n.__MouseX=r,n.__MouseY=e),p.D.isFunction(n.__OnMouseMove)&&n.__OnMouseMove(t))},t.onMouseClick=function(e){var t,r;n._isNoViewer()||(t=e.index,e&&(r=e.x,e=e.y,n.__MouseX=r,n.__MouseY=e),p.D.isFunction(n.__OnMouseClick)&&n.__OnMouseClick(t))},t.onMouseDoubleClick=function(e){n._isNoViewer()||(e=e.index,p.D.isFunction(n.__OnMouseDoubleClick)&&n.__OnMouseDoubleClick(e))},t.onMouseRightClick=function(e){var t,r;if(!n._isNoViewer())return t=e.index,e&&(r=e.x,e=e.y,n.__MouseX=r,n.__MouseY=e),!p.D.isFunction(n.__OnMouseRightClick)||n.__OnMouseRightClick(t)},t.onImageAreaSelected=function(e){n._isNoViewer()||p.D.isFunction(n.__OnImageAreaSelected)&&n.__OnImageAreaSelected(e.index,e.left,e.top,e.right,e.bottom,e.areaIndex)},t.onImageAreaDeSelected=function(e){n._isNoViewer()||p.D.isFunction(n.__OnImageAreaDeSelected)&&n.__OnImageAreaDeSelected(e)},t.onBufferChanged=function(e){p.D.isFunction(n.__OnBufferChanged)&&n.__OnBufferChanged(e)}},__innerRefreshFromUIView:function(e,t){p.D.isFunction(e.__OnRefreshUI)&&e.__OnRefreshUI(t)}}),p.D.html5.ui={init:function(e,t){var r,n,i,o,a,s,u;e._isBindViewer()?(t.container?e._containerElement=t.container:t.containerID&&(e._containerElement=p.D.get(t.containerID)),e._width=t.width,e._height=t.height,Me(e),n=p.D.one(e._containerElement)):e._containerElement=null,e._ifBindViewer=t.ifBindViewer,n=n,a=!(o={Stwain:r=e}),r._isBindViewer()&&(u=r._width,i=r._height,s=p.D.one(r._containerElement),p.D.isString(u)&&0<=m()(u).call(u,"%")?(u=p.D.css(s,"width")*_()(u)/100,a=!0):u=_()(u),p.D.isString(i)&&0<=m()(i).call(i,"%")?(i=p.D.css(s,"height")*_()(i)/100,a=!0):i=_()(i),o={Stwain:r,Container:n,Width:u,Height:i}),N.bindUIViewEvents(r,o),r._ImgManager?(r._ImgManager&&r._ImgManager._UIView&&r._ImgManager._UIView.BackgroundColor&&(o.BackgroundColor=r._ImgManager._UIView.BackgroundColor),r._ImgManager._Init(r,o)):r._ImgManager=new Ee(r,o),a&&N.changeImageUISize(r,r._width,r._height),e._ifBindViewer||(u=(u=(s=e).config)||{},s.__OnImageAreaDeSelected=u.onImageAreaDeSelected||"",s.__OnImageAreaSelected=u.onImageAreaSelected||"",s.__OnMouseClick=u.onMouseClick||"",s.__OnMouseDoubleClick=u.onMouseDoubleClick||"",s.__OnMouseMove=u.onMouseMove||"",s.__OnMouseRightClick=u.onMouseRightClick||"",s.__OnTopImageInTheViewChanged=u.onTopImageInTheViewChanged||"",s.__OnBufferChanged=u.onBufferChanged||"",e.__OnMouseClick=t.onMouseClick||"",e.__OnThumbnailMouseClick="",e.__OnKeyDown=t.onKeyDown||"",e.__OnMouseWheel=t.onMouseWheel||"",e.__OnMouseDoubleClick=t.onMouseDoubleClick||"",e.__OnMouseRightClick=t.onMouseRightClick||"",e.__OnMouseMove=t.onMouseMove||"",e.__OnImageAreaSelected=t.onImageAreaSelected||"",e.__OnImageAreaDeSelected=t.onImageAreaDeSelected||"",e.__OnRefreshUI=t.onRefreshUI||"",e.__OnBufferChanged=t.onBufferChanged||"",e.__MouseX=0,e.__MouseY=0,e.__style=new p.D.html5.STwainStyle(e),e.__fSelectionRectAspectRatio=0)},unLoad:function(e){e=e._containerElement;e&&(e.innerHTML="")},initProgress:function(e){Me(e)},addMethods:function(e){p.D.mix(e,{OverlayRectangle:function(e,t,r,n,i,o,a){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("OverlayRectangle"):n<t||i<r||t==n&&r==i?(p.D.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(this),!1):(o=p.D.isNumber(o)?p.D.getColor(o):o,this._ImgManager.OverlayRectangle(e,t,r,n,i,o,a)))},SetViewMode:function(e,t){if(this._resetErr(),!this._isValid())return!1;if(this._isNoViewer())return this._nouiNotSupport("SetViewMode");if(p.D.isString(e)||p.D.isString(t)||e<-1&&t<-1)return p.D.Errors.InvalidValue(this),!1;e=Math.floor(e),t=Math.floor(t);return this._ImgManager.SetViewMode(e,t),!0},Print:function(e){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("Print"):!this._isMobileMode()&&e?this._innerSend("PrintEx",(0,A.dv)(!0),!0,function(){},function(){}):(this._ImgManager.Print(),!0))},PrintEx:function(e){return this._resetErr(),!!this._isValid()&&(p.D.isArray(e)?this._isNoViewer()?this._nouiNotSupport("Print"):!!this._checkIndices(e)&&(this._ImgManager.PrintEx(e),!0):(p.D.Errors.IndicesNotArray(this),!1))},ShowImageEditor:function(e,t,r,n){var i=this;return i._resetErr(),!!i._isValid()&&(i._isNoViewer()?i._nouiNotSupport("ShowImageEditor"):!(!i._isMobileMode()&&N.isServerInvalid(i))&&(i._ImgManager.getWebViewer().bShowImageEdit?i.ShowImageEditorEx(-1,-1,-1,-1,3):e&&t&&r?i.ShowImageEditorEx(-1,-1,t,r,0,!0,e,n):i.ShowImageEditorEx(-1,-1,-1,-1,0,!1)))},ShowImageEditorEx:function(e,t,r,n,i,o,a,s){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("ShowImageEditorEx"):this._ImgManager.ShowImageEditorEx(e,t,r,n,i,o,a,s))},SetSelectedImageArea:function(e,t,r,n,i){if(this._resetErr(),!this._isValid())return!1;if(this._isNoViewer())return this._nouiNotSupport("SetSelectedImageArea");e=_()(e);return isNaN(e)||e<0||e>=this._ImgManager.count()?(p.D.Errors.IndexOutOfRange(this),!1):!(!this._isMobileMode()&&N.isServerInvalid(this))&&this._ImgManager.SetSelectedImageArea(e,t,r,n,i)},first:function(){var e=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("first"):(0<e&&(this._ImgManager.Go(0),N.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},previous:function(){var e=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("previous"):(0<e&&(this._ImgManager.__Previous(),N.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},next:function(){var e=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("next"):(0<e&&(this._ImgManager.__Next(),N.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},last:function(){var e=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("last"):(0<e&&(this._ImgManager.Go(e-1),N.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))}})}}},2766:function(e,t,r){r.r(t);var t=r(7711),n=r.n(t),t=r(5238),i=r.n(t),t=r(5005),o=r.n(t),a=r(1695),s=r(1188),t=a.D.html5.Funs,u=t.DEF;a.D.attachPropertyUI=function(r){u(r,"Width",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("Width"),""):r._ImgManager.GetWidth():""},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("Width"):r._ImgManager.SetWidth(e))}}),u(r,"Height",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("Height"),""):r._ImgManager.GetHeight():""},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("Height"):r._ImgManager.SetHeight(e))}}),u(r,"AllowMultiSelect",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?r._nouiNotSupport("AllowMultiSelect"):r._ImgManager.GetAllowMultiSelect():""},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("AllowMultiSelect"):void r._ImgManager.SetAllowMultiSelect(e))}}),u(r,"BackgroundColor",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("BackgroundColor"),""):r._ImgManager.GetBackgroundColor():""},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("BackgroundColor"):r._ImgManager.SetBackgroundColor(e))}}),u(r,"BackgroundFillColor",{get:function(){if(r._resetErr(),!r._isValid())return"";if(r._isNoViewer())return r._nouiNotSupport("BackgroundFillColor"),"";if(r._isMobileMode())return e=r.__BackgroundFillColor,a.D.isUndefined(e)&&(e=r._ImgManager._UIView.BackgroundFillColor),a.D.isNumber(e)?a.D.getColor(e):n()(i()(e).call(e,1),16);var e=r._innerFun("BackgroundFillColor");return a.D.BGR2RGB(e)},set:function(e){if(r._resetErr(),!r._isValid())return!1;if(r._isNoViewer())return r._nouiNotSupport("BackgroundFillColor");var e=+e;return!a.D.isNumber(e)||isNaN(e)?(a.D.Errors.InvalidValue(r),!1):r._isMobileMode()?(r._ImgManager._UIView.SetBackgroundFillColor(a.D.getColor(e)),r.__BackgroundFillColor=a.D.getColor(e),!0):(e=a.D.RGB2BGR(e),r._innerFun("BackgroundFillColor",(0,s.dv)(e)))}}),u(r,"FitWindowType",{get:function(){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?(r._nouiNotSupport("FitWindowType"),0):r._ImgManager.GetFitWindowType())},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("FitWindowType"):r._ImgManager.SetFitWindowType(+e))}}),u(r,"IfFitWindow",{get:function(){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("IfFitWindow"):r._ImgManager.GetIfFitWindow())},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("IfFitWindow"):e?r._ImgManager.SetIfFitWindow(!0):r._ImgManager.SetIfFitWindow(!1))}}),u(r,"ImageMargin",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("ImageMargin"),0):r._ImgManager.GetImageMargin():0},set:function(e){if(r._resetErr(),!r._isValid())return!1;if(r._isNoViewer())return r._nouiNotSupport("ImageMargin");e=n()(e);return!isNaN(e)&&r._ImgManager.SetImageMargin(e)}}),u(r,"MouseX",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("MouseX"),0):r.__MouseX:0}}),u(r,"MouseY",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("MouseY"),0):r.__MouseY:0}}),u(r,"SelectionImageBorderColor",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("SelectionImageBorderColor"),""):r._ImgManager.GetSelectionImageBorderColor():""},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("SelectionImageBorderColor"):r._ImgManager.SetSelectionImageBorderColor(e))}}),u(r,"Zoom",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("Zoom"),0):r._ImgManager.GetZoom():0},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("Zoom"):r._ImgManager.SetZoom(e))}}),u(r,"MouseShape",{get:function(){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("MouseShape"):r._ImgManager.GetMouseShape()==a.I.DWT.EnumDWT_MouseShape.Hand)},set:function(e){if(r._resetErr(),!r._isValid())return!1;if(r._isNoViewer())return r._nouiNotSupport("MouseShape");var t=a.I.DWT.EnumDWT_MouseShape.Crosshair;return e&&(t=a.I.DWT.EnumDWT_MouseShape.Hand),r._ImgManager.SetMouseShape(t)}}),u(r,"SelectionRectAspectRatio",{get:function(){return r._resetErr(),r._isValid()?r._isNoViewer()?(r._nouiNotSupport("SelectionRectAspectRatio"),0):r._ImgManager.GetSelectionRectAspectRatio():0},set:function(e){if(r._resetErr(),!r._isValid())return!1;if(r._isNoViewer())return r._nouiNotSupport("SelectionRectAspectRatio");e=o()(e);return 0<=e&&(r._ImgManager.SetSelectionRectAspectRatio(e),!0)}}),u(r,"ShowPageNumber",{get:function(){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("ShowPageNumber"):r._ImgManager.GetShowPageNumber())},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("ShowPageNumber"):r._ImgManager.SetShowPageNumber(e))}}),u(r,"IfAutoScroll",{get:function(){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("IfAutoScroll"):r._ImgManager.GetIfAutoScroll())},set:function(e){return r._resetErr(),!!r._isValid()&&(r._isNoViewer()?r._nouiNotSupport("IfAutoScroll"):r._ImgManager.SetIfAutoScroll(e))}})},a.D.detect.viewerScriptLoaded=!0},7821:function(e,t,r){r.r(t);var T,t=r(1006),g=r.n(t),t=r(4579),I=r.n(t),t=r(5005),f=r.n(t),t=r(5683),D=r.n(t),t=r(7711),S=r.n(t),t=r(5238),v=r.n(t),w=r(1695),m=r(1188),t=w.D.html5.STwain,r=t.prototype,C=w.D.html5.Funs,u=function u(e,t){return 0!=e._ImgManager.count()||(w.D.Errors.NoImage(e),w.D.isFunction(t)&&t(e.ErrorCode,e.ErrorString),!1)},a=function a(e,t,r){return!!u(e,r)&&(!(isNaN(t)||!w.D.isNumber(t)||t<0||t>=e._ImgManager.count())||(w.D.Errors.IndexOutOfRange(e),w.D.isFunction(r)&&r(e.ErrorCode,e.ErrorString),!1))},h=function h(e,t,r,n){if(0==e._ImgManager.count())return w.D.Errors.NoImage(e),w.D.isFunction(n)&&n(t),!1;if(w.D.isNumber(t)){if(isNaN(t)||t<-2||t>=e._ImgManager.count())return w.D.Errors.IndexOutOfRange(e),w.D.isFunction(n)&&n(t),!1}else{if(!w.D.isArray(t))return w.D.Errors.IndexOutOfRange(e),w.D.isFunction(n)&&n(t),!1;for(var i=0;i<t.length;i++){var o=t[i];if(isNaN(o)||!w.D.isNumber(o)||o<0||o>=e._ImgManager.count())return w.D.Errors.IndicesOutOfRange(e),w.D.isFunction(n)&&n(t),!1}}if(r==w.I.DWT.EnumDWT_ImageType.IT_BMP||r==w.I.DWT.EnumDWT_ImageType.IT_JPG||r==w.I.DWT.EnumDWT_ImageType.IT_PNG||r==w.I.DWT.EnumDWT_ImageType.IT_J2K)(-1==t&&1<e._ImgManager.count()||w.D.isArray(t)&&1<t.length)&&(w.D.Errors.UploadIndexMoreThanOne(e),w.D.isFunction(n)&&n(t));else if(r!=w.I.DWT.EnumDWT_ImageType.IT_TIF&&r!=w.I.DWT.EnumDWT_ImageType.IT_PDF)return w.D.Errors.InvalidImageType(e),w.D.isFunction(n)&&n(t),!1;return!0},s=function s(t){var e,r,n=[];return t._ImgManager.count()<=0||(0<=(r=t._ImgManager.getCurrentImageIndex())&&(e=t._ImgManager.convertClientIndexToServerId(r)),r=t._ImgManager.getSelectedClientIndexArray(),w.D.isArray(r)&&w.D.each(r,function(e){e=t._ImgManager.convertClientIndexToServerId(e);-1!=e&&n.push(e)}),-1!=e&&0==n.length&&n.push(e)),n},c=function c(e){if(e._ImgManager.count()<=0)return[];var t=e._ImgManager.getSelectedClientIndexArray();return w.D.isArray(t)?(0==t.length&&0<=(e=e._ImgManager.getCurrentImageIndex())&&t.push(e),t):[]},l=function l(e,t){for(var r=e._ImgManager.GetAllServerIdList(),n=0;n<r.length;n++)t.push(r[n])},E=function E(e,t,r,n,i){try{e(t,r,n,i)}catch(o){}},d=function d(e,t,r){try{e(t.ErrorCode,t.ErrorString,r)}catch(n){}},_=function _(e,t,r,n,i,o){try{e(t.ErrorCode,t.ErrorString,r,n,i,o)}catch(a){}};r._asyncSaveImage=function(i,o,e,a,t){var r,n,s=this,u=!0,c=w.D.isString(e)?e.toLowerCase():"",l=function l(e,t,r){var n=i,n=w.D.isString(n)&&""!=n?(n=g()(w.D).call(w.D,n,"\\\\","_"),g()(w.D).call(w.D,n,":","_")):"img"+w.D.getRandom()+"."+c;!u&&w.D.isString(e)?(t=["png"==t?"data:image/png;base64,":"jpg"==t?"data:image/jpeg;base64,":"tiff"==t||"tif"==t?"data:image/tif;base64,":"pdf"==t?"data:application/pdf;base64,":"bmp"==t?"data:image/bmp;base64,":"jp2"==t?"data:image/jp2;base64,":"data:application/octet-stream;base64,",e].join(""),w.D.MobileFuns.saveLocal(t,n,c)):w.D.MobileFuns.saveLocal(e,n,c),C.refreshImageAfterInvokeFun(s,o),w.D.isFunction(a)&&I()(a,30)},d=function d(){w.D.isFunction(t)&&t(s.ErrorCode,s.ErrorString)},e=window,h=w.I.navInfo,e=e.requestFileSystem||e.webkitRequestFileSystem||e.mozRequestFileSystem;if((h.biPad||h.biPhone)&&!e&&(h.bSafari&&f()(h.strBrowserVersion)<13||!h.bSafari))return u=!1,e=-1,e="png"==c?w.I.DWT.EnumDWT_ImageType.IT_PNG:"jpg"==c?w.I.DWT.EnumDWT_ImageType.IT_JPG:"tiff"==c||"tif"==c?w.I.DWT.EnumDWT_ImageType.IT_TIF:"pdf"==c?w.I.DWT.EnumDWT_ImageType.IT_PDF:"bmp"==c?w.I.DWT.EnumDWT_ImageType.IT_BMP:"jp2"==c?w.I.DWT.EnumDWT_ImageType.IT_J2K:w.I.DWT.EnumDWT_ImageType.IT_PNG,r=[],n=function n(e){e=e&&e.result;if(w.D.isArray(e)&&3==e.length)return l(e[0],e[1],e[2])},w.D.isArray(o)&&w.D.each(o,function(e){e=s._ImgManager.convertClientIndexToServerId(e);-1!=e&&r.push(e)}),s.__innerConvertToBase64ByMobile(i,r,e,1,n,d);return s._innerSendToMobile("SaveImage",(0,m.An)(i,o,c,1,u),0,l,d)},r.SaveAllAsMultiPageTIFF=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(!w.D.License.checkProductKey(n,{Core:!0})&&!w.D.License.checkProductKey(n,{Webcam:!0},!0))return w.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(!u(n,r))return!1;var i=[],o=C.replaceLocalFilename(e);if(n._isMobileMode()){if(!o||""==o)return w.D.Errors.InvalidFile(n),w.D.isFunction(r)&&d(r,n),!1;for(var a=[],s=0;s<n.HowManyImagesInBuffer;s++)a.push(s);return n._asyncSaveImage(e,a,"tiff",t,r)}return l(n,i),n.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",(0,m.dv)(o,i.join(",")),t,r)},r.SaveAllAsPDF=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(!w.D.License.checkProductKey(n,{Core:!0})&&!w.D.License.checkProductKey(n,{Webcam:!0},!0))return w.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(!u(n,r))return!1;var i=[],o=C.replaceLocalFilename(e);if(n._isMobileMode()){if(!o||""==o)return w.D.Errors.InvalidFile(n),w.D.isFunction(r)&&d(r,n),!1;for(var a=[],s=0;s<n.HowManyImagesInBuffer;s++)a.push(s);return n._asyncSaveImage(e,a,"pdf",t,r)}return l(n,i),n.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",(0,m.dv)(o,i.join(",")),t,r)},r.SaveAsBMP=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;if(i._isMobileMode())return i._mobileNotSupport("SaveAsBMP",n);if(!w.D.License.checkProductKey(i,{Core:!0})&&!w.D.License.checkProductKey(i,{Webcam:!0},!0))return w.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;e=C.replaceLocalFilename(e);return!!a(i,t,n)&&(-1==(t=i._ImgManager.convertClientIndexToServerId(t))?(w.D.Errors.IndexOutOfRange(i),w.D.isFunction(n)&&d(n,i),!1):i.__innerSaveImage("SaveAsBMP",(0,m.dv)(e,t),r,n))},r.SaveAsJPEG=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!w.D.License.checkProductKey(i,{Core:!0})&&!w.D.License.checkProductKey(i,{Webcam:!0},!0))return w.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(!a(i,t,n))return!1;var o=C.replaceLocalFilename(e);return i._isMobileMode()?o&&""!=o?i._asyncSaveImage(e,[t],"jpg",r,n):(w.D.Errors.InvalidFile(i),w.D.isFunction(n)&&d(n,i),!1):-1==(e=i._ImgManager.convertClientIndexToServerId(t))?(w.D.Errors.IndexOutOfRange(i),w.D.isFunction(n)&&d(n,i),!1):i.__innerSaveImage("SaveAsJPEG",(0,m.dv)(o,e),r,n)},r.SaveAsPDF=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!w.D.License.checkProductKey(i,{Core:!0})&&!w.D.License.checkProductKey(i,{Webcam:!0},!0))return w.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(!a(i,t,n))return!1;var o=C.replaceLocalFilename(e);return i._isMobileMode()?o&&""!=o?i._asyncSaveImage(e,[t],"pdf",r,n):(w.D.Errors.InvalidFile(i),w.D.isFunction(n)&&d(n,i),!1):-1==(e=i._ImgManager.convertClientIndexToServerId(t))?(w.D.Errors.IndexOutOfRange(i),w.D.isFunction(n)&&d(n,i),!1):i.__innerSaveImage("SaveAsPDF",(0,m.dv)(o,e),r,n)},r.SaveAsPNG=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!w.D.License.checkProductKey(i,{Core:!0})&&!w.D.License.checkProductKey(i,{Webcam:!0},!0))return w.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(!a(i,t,n))return!1;var o=C.replaceLocalFilename(e);return i._isMobileMode()?o&&""!=o?i._asyncSaveImage(e,[t],"png",r,n):(w.D.Errors.InvalidFile(i),w.D.isFunction(n)&&d(n,i),!1):-1==(e=i._ImgManager.convertClientIndexToServerId(t))?(w.D.Errors.IndexOutOfRange(i),w.D.isFunction(n)&&d(n,i),!1):i.__innerSaveImage("SaveAsPNG",(0,m.dv)(o,e),r,n)},r.SaveAsTIFF=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!w.D.License.checkProductKey(i,{Core:!0})&&!w.D.License.checkProductKey(i,{Webcam:!0},!0))return w.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(!a(i,t,n))return!1;var o=C.replaceLocalFilename(e);return i._isMobileMode()?o&&""!=o?i._asyncSaveImage(e,[t],"tiff",r,n):(w.D.Errors.InvalidFile(i),w.D.isFunction(n)&&d(n,i),!1):-1==(e=i._ImgManager.convertClientIndexToServerId(t))?(w.D.Errors.IndexOutOfRange(i),w.D.isFunction(n)&&d(n,i),!1):i.__innerSaveImage("SaveAsTIFF",(0,m.dv)(o,e),r,n)},r.SaveAsGIF=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return!1;if(i._isMobileMode())return w.D.Errors.HTML5NotSupport(i),w.D.isFunction(n)&&d(n,i),!1;if(!w.D.License.checkProductKey(i,{Core:!0})&&!w.D.License.checkProductKey(i,{Webcam:!0},!0))return w.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;e=C.replaceLocalFilename(e);return!!a(i,t,n)&&(-1==(t=i._ImgManager.convertClientIndexToServerId(t))?(w.D.Errors.IndexOutOfRange(i),w.D.isFunction(n)&&d(n,i),!1):i.__innerSaveImage("SaveAsGIF",(0,m.dv)(e,t),r,n))},r.SaveSelectedImagesAsMultiPagePDF=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(!w.D.License.checkProductKey(n,{Core:!0})&&!w.D.License.checkProductKey(n,{Webcam:!0},!0))return w.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;var i=C.replaceLocalFilename(e);if(n._isMobileMode()){if(!i||""==i)return w.D.Errors.InvalidFile(n),w.D.isFunction(r)&&d(r,n),!1;var o=c(n);return n._asyncSaveImage(e,o,"pdf",t,r)}e=s(n);return n.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",(0,m.dv)(i,e.join(",")),t,r)},r.SaveSelectedImagesAsMultiPageTIFF=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(!w.D.License.checkProductKey(n,{Core:!0})&&!w.D.License.checkProductKey(n,{Webcam:!0},!0))return w.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;var i=C.replaceLocalFilename(e);if(n._isMobileMode()){if(!i||""==i)return w.D.Errors.InvalidFile(n),w.D.isFunction(r)&&d(r,n),!1;var o=c(n);return n._asyncSaveImage(e,o,"tiff",t,r)}e=s(n);return n.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",(0,m.dv)(i,e.join(",")),t,r)},r.SaveSelectedImagesToBase64Binary=function(e,t){var r=this;if(r._resetErr(),!r._isValid())return!1;if(!w.D.License.checkProductKey(r,{Core:!0})&&!w.D.License.checkProductKey(r,{Webcam:!0},!0))return w.D.isFunction(t)&&t(r.ErrorCode,r.ErrorString),!1;if(r._isMobileMode())return r._mobileNotSupport("SaveSelectedImagesToBase64Binary",t);var n=s(r);return w.D.isFunction(e)?r._innerSend("SaveSelectedImagesToBase64Binary",(0,m.dv)(n.join(",")),!0,e,t):r._innerFun("SaveSelectedImagesToBase64Binary",(0,m.dv)(n.join(",")))},r.ShowFileDialog=function(e,t,r,n,i,o,a,s){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("ShowFileDialog");var i=C.replaceLocalFilename(i),u=this.__GetLoadEventsNum();return this._innerSend("ShowFileDialog",(0,m.dv)(e,t,r,n,i,o,a,s,u),!0)},r.FTPDownload=function(e,t,r,n){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPDownload",n);if(!e)return w.D.Errors.InvalidParameter(this),w.D.isFunction(n)&&n(this.ErrorCode,this.ErrorString),!1;var i=w.D.html5.Funs.getImageType(t);return this.__innerFTPDownload("FTPDownload",(0,m.dv)(e,t),i,r,n)},r.FTPDownloadEx=function(e,t,r,n,i){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FTPDownloadEx",i):e?this.__innerFTPDownload("FTPDownloadEx",(0,m.dv)(e,t,r),r,n,i):(w.D.Errors.InvalidParameter(this),w.D.isFunction(i)&&i(this.ErrorCode,this.ErrorString),!1))},r.FTPUpload=function(e,t,r,n,i){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUpload",i);var o=this._ImgManager.convertClientIndexToServerId(t);return!!a(this,t,i)&&(-1==o?(w.D.Errors.IndexOutOfRange(this),w.D.isFunction(i)&&d(i,this),!1):this.__innerFTPUpload("FTPUpload",(0,m.dv)(e,o,r),n,i))},r.FTPUploadEx=function(e,t,r,n,i,o){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FTPUploadEx",o):!!a(this,t,o)&&(-1==(t=this._ImgManager.convertClientIndexToServerId(t))?(w.D.Errors.IndexOutOfRange(this),w.D.isFunction(o)&&d(o,this),!1):this.__innerFTPUpload("FTPUploadEx",(0,m.dv)(e,t,r,n),i,o)))},r.FTPUploadAllAsMultiPageTIFF=function(e,t,r,n){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAllAsMultiPageTIFF",n);var i=[];return l(this,i),this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",(0,m.dv)(e,t,i.join(",")),r,n)},r.FTPUploadAllAsPDF=function(e,t,r,n){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAllAsPDF",n);var i=[];return l(this,i),this.__innerFTPUpload("FTPUploadAsMultiPagePDF",(0,m.dv)(e,t,i.join(",")),r,n)},r.FTPUploadAsMultiPagePDF=function(e,t,r,n){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAsMultiPagePDF",n);var i=s(this);return this.__innerFTPUpload("FTPUploadAsMultiPagePDF",(0,m.dv)(e,t,i.join(",")),r,n)},r.FTPUploadAsMultiPageTIFF=function(e,t,r,n){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAsMultiPageTIFF",n);var i=s(this);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",(0,m.dv)(e,t,i.join(",")),r,n)},r.HTTPDownload=function(e,t,r,n){if(this._resetErr(),!this._isValid())return w.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString});var i=C.getImageType(t);return this.HTTPDownloadThroughGet(e,t,i,r,n)},t.prototype.HTTPDownloadEx=function(e,t,r,n,i){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupport("HTTPDownloadEx",i):this.HTTPDownloadThroughGet(e,t,r,n,i):w.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},r.HTTPDownloadDirectly=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return!1;if(!w.D.License.checkProductKey(o,{Core:!0}))return w.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),!1;if(o._isMobileMode())return o._mobileNotSupport("HTTPDownloadDirectly",i);var a,s=T.GetHttpHeadersAndClear(o),e=C.combineUrl(o,e,t);if(!1===e)return w.D.Errors.ParameterCannotEmpty(o),!1;if(!r||""==r)return w.D.Errors.InvalidLocalFilename(o,"HTTPDownloadDirectly"),w.D.isFunction(i)&&d(i,o),!1;if(t=w.D.html5.Funs.getImageType(r),C.isServerInvalid(o))return w.D.isFunction(i)&&d(i,o),!1;if(!w.D.License.checkPDFProductKeyWhenNeeds(o,t))return w.D.isFunction(i)&&i(o._errorCode,o._errorString),!1;w.D.cancelFrome=2,a=C.replaceLocalFilename(r),w.D.showProgress(o,"HTTPDownloadDirectly",!0);var u=function u(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join("");o._OnPercentDone([0,t,"","http"])},c=!0;return o._OnPercentDone([0,-1,w.I.MSG.Downloading,"http"]),w.D.isFunction(n)||(c=!1),C.loadHttpBlob(o,"get",e,c,function(e){o._OnPercentDone([0,-1,w.I.MSG.Loading]);return o.__LoadImageFromBytes(e,3,a,c,n,i)},function(){return w.D.closeProgress(o,"HTTPDownloadDirectly"),w.D.isFunction(i)&&d(i,o),!1},u,s)},r.HTTPUploadThroughPostDirectly=function(e,t,r,n,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadThroughPostDirectly",o);var r=C.combineUrl(a,e,r),s=function s(){w.D.isFunction(o)&&d(o,a,a.__HTTPPostResponseString)};if((a.__HTTPPostResponseString="")===e)return w.D.Errors.HttpServerCannotEmpty(a),s(),!1;return a._innerUploadDirectly(r,t,n,!0,!1,0,!0,!1,i,s)},r._innerUploadDirectly=function(t,e,r,n,i,o,a,s,u,c){var l=this,d=T.GetHttpHeadersAndClear(l),h="HTTPUploadThroughPostDirectly",g=!0;if(!1===t||""===t)return w.D.Errors.ParameterCannotEmpty(l),w.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(w.D.isFunction(u)||(g=!1),!w.D.License.checkProductKey(l,{Core:!0}))return w.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;w.D.cancelFrome=1;var f=function f(){return w.D.needShowTwiceShowDialog=!1,n&&w.D.closeProgress(l,h),w.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1};return w.D.needShowTwiceShowDialog=!0,n&&w.D.showProgress(l,h,!1),(e=C.replaceLocalFilename(e))&&""!=e?s&&s.bCancel?(s.st=2,f()):l.__SaveLocalFileToBytes(e,g,i,function(e){return w.D.needShowTwiceShowDialog=!1,s&&s.bCancel?(s.st=2,f()):e&&(0<w.D.dlgRef||0==l.__IfShowCancelDialogWhenImageTransfer||0==g||!1===n)?(e instanceof File?e.fileName=r:e.name=r,C.setBtnCancelVisibleForProgress(l,!0),C.httpPostUpload(l,t,e,g,0,d,!0,o,a,s,function(e){n&&w.D.closeProgress(l,h),w.D.isFunction(u)&&E(u,e)},f)):(f(),!1)},f):(w.D.Errors.InvalidFile(l),f(),!1)},r._innerUploadFilesDirectly=function(n,e,i,o,t,a,s,u,r){var c,l=this,d=T.GetHttpHeadersAndClear(l),h="HTTPUploadThroughPostDirectly",g=!0,f=[];if(!1===n||""===n)return w.D.Errors.ParameterCannotEmpty(l),w.D.isFunction(r)&&r(l.ErrorCode,l.ErrorString,e),!1;if(w.D.isFunction(u)||(g=!1),!w.D.License.checkProductKey(l,{Core:!0}))return w.D.isFunction(r)&&r(l.ErrorCode,l.ErrorString,e),!1;w.D.cancelFrome=1;var m=function m(){return w.D.needShowTwiceShowDialog=!1,o&&w.D.closeProgress(l,h),w.D.isFunction(r)&&r(e),!1},_=(w.D.needShowTwiceShowDialog=!0,o&&w.D.showProgress(l,h,!1),w.D.each(e,function(e){e=C.replaceLocalFilename(e);if(!e||""==e)return w.D.Errors.InvalidFile(l),m(),!1;f.push(e)}),[]),p=f.length,I=0;return w.D.each(f,function(e,r){c=l.__SaveLocalFileToBytes(e,g,t,function(e){if(w.D.needShowTwiceShowDialog=!1,!e||!(0<w.D.dlgRef||0==l.__IfShowCancelDialogWhenImageTransfer||0==g||!1===o))return o&&w.D.closeProgress(l,h),w.D.isFunction(m)&&m(),!1;var t=C.cformat(i,r+1);return e instanceof File?e.fileName=t:e.name=t,_[r]=e,++I==p?(C.setBtnCancelVisibleForProgress(l,!0),C.httpPostUploadFiles(l,n,_,g,0,d,o,a,s,function(e){o&&w.D.closeProgress(l,h),w.D.isFunction(u)&&E(u,e)},function(){o&&w.D.closeProgress(l,h),w.D.isFunction(m)&&m()})):void 0},function(){o&&w.D.closeProgress(l,h),w.D.isFunction(m)&&m()})}),c},r.HTTPUploadThroughPost=function(e,t,r,n,i,o,a){var s=this;if(s._resetErr(),!s._isValid())return!1;if(s._isMobileMode())return s._mobileNotSupport("HTTPUploadThroughPost",o);var u=C.getImageType(n),c=arguments,l=!1,d=function d(e){return w.D.isFunction(o)&&_(o,s,s.__HTTPPostResponseString,e,c),!1};return w.D.isString(n)&&""!=n?(i&&w.D.isFunction(i)&&(l=function l(e,t){return E(i,s.__HTTPPostResponseString,t,c),!0}),!!h(s,t,u,d)&&s.innerHTTPUploadPost(e,t,r,n,u,l,d,a)):(w.D.Errors.UploadFileCannotEmpty(s),d())},r.HTTPUploadThroughPostEx=function(e,t,r,n,i,o,a,s){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("HTTPUploadThroughPostEx",a);var c=arguments,l=!1,d=function d(e){return w.D.isFunction(a)&&_(a,u,u.__HTTPPostResponseString,e,c),!1};return w.D.isString(n)&&""!=n?(o&&w.D.isFunction(o)&&(l=function l(e,t){return E(o,u.__HTTPPostResponseString,t,c),!0}),!!h(u,t,i,d)&&u.innerHTTPUploadPost(e,t,r,n,i,l,d,s)):(w.D.Errors.UploadFileCannotEmpty(u),d())},r.innerHTTPUploadPost=function(e,t,r,i,n,o,a,s){var u,c=this,l="HTTPUploadThroughPostEx",d=C.combineUrl(c,e,r),h=!0,g=!1,f=[],m=function m(e){return w.D.isFunction(a)&&a(e),!1};if(c.__HTTPPostResponseString="",w.D.isNumber(t)){if(t<-2)return w.D.Errors.IndexOutOfRange(c),m(t)}else if(!w.D.isArray(t))return w.D.Errors.IndexOutOfRange(c),m(t);if(!w.D.isString(i)||""==i)return w.D.Errors.UploadFileCannotEmpty(c),m();if(w.D.isUndefined(n))return w.D.Errors.InvalidImageType(c),m(t);if(n==w.I.DWT.EnumDWT_ImageType.IT_BMP||n==w.I.DWT.EnumDWT_ImageType.IT_JPG||n==w.I.DWT.EnumDWT_ImageType.IT_PNG||n==w.I.DWT.EnumDWT_ImageType.IT_J2K){if(-1==t&&1<c._ImgManager.count()||w.D.isArray(t)&&1<t.length)return w.D.Errors.UploadIndexMoreThanOne(c),m(t);w.D.isArray(t)?f.push(t[0]):-1==t?f.push(0):f.push(t)}else{if(n!=w.I.DWT.EnumDWT_ImageType.IT_TIF&&n!=w.I.DWT.EnumDWT_ImageType.IT_PDF)return w.D.Errors.InvalidImageType(c),m(t);if(-1==t){if(0==c._ImgManager.count())return w.D.Errors.NoImage(c),m();for(u=0;u<c._ImgManager.count();u++)f.push(u)}else if(-2==t)f=c._ImgManager.getSelectedClientIndexArray();else if(w.D.isArray(t))for(u=0;u<t.length;u++)f.push(t[u]);else f.push(t)}if(c._isMobileMode()?h=!0:w.D.isFunction(o)||(h=!1),""===e)return w.D.Errors.HttpServerCannotEmpty(c),m(f);if(w.D.isUndefined(d)||""===d)return w.D.Errors.ParameterCannotEmpty(c),m(f);if(!w.D.isString(d))return w.D.Errors.InvalidUrl(c),m(f);if(0!=D()(d).call(d,"http://")&&0!=D()(d).call(d,"https://")&&(d=w.D.detect.ssl?"https://"+d:"http://"+d),!c._isMobileMode()&&C.isServerInvalid(c))return m(f);if(!c._checkIndices(f)&&-1!=f)return m(f);var _,p,I=[];return w.D.isArray(f)&&w.D.each(f,function(e){e=c._ImgManager.convertClientIndexToServerId(e);-1!=e&&I.push(e)}),c._resetErr(),!!c._isValid()&&(h?(r={bOnlyUploadForm:!1,method:"HTTPUploadThroughPostEx",_this:c,url:d,serverIds:I,enumImageType:n,saveSetup:!1,fileName:i,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,dataFormat:w.I.DWT.EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:o,asyncFailureFunc:m},w.D._asyncUploadCmd(r),!0):(w.D.cancelFrome=1,_=function _(){return w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(c,l),m(f),!1},w.D.needShowTwiceShowDialog=!0,w.D.showProgress(c,l,!1),p=T.GetHttpHeadersAndClear(c),c._OnPercentDone([0,-1,w.I.MSG.Encoding,"http"]),c.__innerConvertToBlob(n,I,!1,h,4,function(e,t,r){if(w.D.needShowTwiceShowDialog=!1,e&&(0<w.D.dlgRef||0==c.__IfShowCancelDialogWhenImageTransfer||0==h)){var n=c.MaxUploadImageSize;if(n<e.size&&-1!=n)return w.D.Errors.UploadExceededMaxSize(c),_();w.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(p["dwt-md5"]=t),e instanceof File?e.fileName=i:e.name=i,C.setBtnCancelVisibleForProgress(c,!0);return C.httpPostUpload(c,d,e,h,0,p,!0,0,!0,!1,function(e){return w.D.closeProgress(c,l),g=!0},_)}return _()},_),g))},r._checkIndices=function(e){var t,r;if(!w.D.isArray(e))return w.D.Errors.IndicesNotArray(this),!1;if(0==e.length)return w.D.Errors.IndicesCannotEmpty(this),!1;if(w.I.DWT.ConnectWithSocket)return!0;for(t=this._ImgManager.count(),r=0;r<e.length;r++){var n=e[r];if(w.D.isUndefined(n)||null===n)return w.D.Errors.IndexNullOrUndefined(this),!1;if(n=S()(n),isNaN(n))return w.D.Errors.InvalidIndex(this),!1;if(n<0||t<=n)return w.D.Errors.IndicesOutOfRange(this),!1}return!0},r.SetUploadSegment=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetUploadSegment"):!w.D.isNumber(e)||e<0?(w.D.Errors.InvalidSegmentUploadThreshold(this),!1):!w.D.isNumber(t)||t<=0?(w.D.Errors.InvalidModuleSize(this),!1):(this._segementUploadThreshold=1024*e*1024,this._moduleSize=1024*t,!0))},r.HTTPUpload=function(e,t,r,n,i,o,a){var s=this;if(s._resetErr(),!s._isValid())return!1;if(w.D.isUndefined(e))return w.D.Errors.InvalidParameter(s),w.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1;var u,c,l,d=arguments;if(arguments.length<=3)c=!!w.D.isFunction(t)&&function c(){t(s.__HTTPPostResponseString,e,d)},u={bOnlyUploadForm:!0,_this:s,url:e,asyncSuccessFunc:c,asyncFailureFunc:l=function l(){w.D.isFunction(r)&&_(r,s,s.__HTTPPostResponseString,e,d)}};else{var h,g=[];if(l=w.D.isFunction(i)?(h="RemoteFile",c=function c(e,t){i(s.__HTTPPostResponseString,t,d)},function l(e){w.D.isFunction(o)&&_(o,s,s.__HTTPPostResponseString,e,d)}):(h=w.D.isString(i)?i:"RemoteFile",c=!!w.D.isFunction(o)&&function c(e,t){E(o,s.__HTTPPostResponseString,t,d)},function l(e){w.D.isFunction(a)&&_(a,s,s.__HTTPPostResponseString,e,d)}),!s._checkIndices(t))return l(t),!1;if(w.D.isArray(t)&&w.D.each(t,function(e){e=s._ImgManager.convertClientIndexToServerId(e);-1!=e&&g.push(e)}),0==g.length)return w.D.Errors.InvalidIndex(s),l(t),!1;if(w.D.isUndefined(r))return w.D.Errors.InvalidImageType(s),l(t),!1;if(r==w.I.DWT.EnumDWT_ImageType.IT_BMP||r==w.I.DWT.EnumDWT_ImageType.IT_JPG||r==w.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<g.length)return w.D.Errors.UploadIndexMoreThanOne(s),l(t),!1}else if(r!=w.I.DWT.EnumDWT_ImageType.IT_TIF&&r!=w.I.DWT.EnumDWT_ImageType.IT_PDF)return w.D.Errors.InvalidImageType(s),l(t),!1;if(w.D.isUndefined(n)||n!=w.I.DWT.EnumDWT_UploadDataFormat.Binary&&n!=w.I.DWT.EnumDWT_UploadDataFormat.Base64)return w.D.Errors.InvalidDataFormat(s),l(t),!1;u={bOnlyUploadForm:!1,method:"HTTPUpload",_this:s,url:e,serverIds:g,enumImageType:r,saveSetup:!1,dataFormat:n,fileName:h,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,asyncSuccessFunc:c,asyncFailureFunc:l}}return w.D._asyncUploadCmd(u),!0},r._innerHTTPUpload=function(e,t,r,n,i,o,a,s,u,c,l){var d,h=this,g=S()(r),n=S()(n),f=i,m="HTTPUpload",_=e,p=!1,I=h._moduleSize,D=h._segementUploadThreshold;if(h.__HTTPPostResponseString="",w.D.isUndefined(r))return w.D.Errors.InvalidImageType(h),w.D.isFunction(l)&&l(),!1;w.D.cancelFrome=1;var v,b,y=function y(){return w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(h,m),w.D.isFunction(l)&&l(),!1};if(d=function d(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join("");h._OnPercentDone([0,t,"","http",f])},f=C.addImageFileExt(f,g),w.D.needShowTwiceShowDialog=!0,w.D.showProgress(h,m,!1),!h._isMobileMode()&&C.isServerInvalid(h))return y();if(n==w.I.DWT.EnumDWT_UploadDataFormat.Binary){if(u&&u.bCancel)return u.st=2,y();h._OnPercentDone([0,-1,w.I.MSG.Encoding,"http"]),p=h.__innerConvertToBlob(g,t,o,!0,4,function(e,t,r){if(v=function v(){return w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(h,m),w.D.isFunction(c)&&E(c,e),!0},u&&u.bCancel)return u.st=2,y();if(!e||e.size<=0)return w.D.Errors.UploadFileCannotEmpty(h),y();var n=h.MaxUploadImageSize;return n<e.size&&-1!=n?(w.D.Errors.UploadExceededMaxSize(h),y()):0!=h._errorCode?y():void(p=0<D&&e.size>D?(n=T.GetHttpHeadersAndClear(h),w.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(n["dwt-md5"]=t),h._OnPercentDone([0,-1,w.I.MSG.Uploading,"http",f]),T.UploadBinary(h,_,g,e,f,n,0,I,d,a,s,u,v,y)):h.__innnerHTTPUploadBinaryFull(_,t,e,g,f,a,s,u,v,y))},y)}else n==w.I.DWT.EnumDWT_UploadDataFormat.Base64&&(p=h._convertToBase64ByServerIds(t,g,o,4,function(e){if(!e||e.getLength()<=0)return w.D.Errors.UploadFileCannotEmpty(h),y();if(v=function v(){return w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(h,m),w.D.isFunction(c)&&E(c,e),!0},0<D&&e.getLength()>D){var t=T.GetHttpHeadersAndClear(h);b=e.getMD5(),w.I.DWT.IfAddMD5InUploadHeader&&(t["dwt-md5"]=b),h._OnPercentDone([0,-1,w.I.MSG.Uploading,"http"]),T.UploadBase64(h,_,g,e,f,t,0,I,d,v,y)}else{if(b=e.getMD5(),!(t=e.getData(0,e.getLength()))||""==t)return w.D.Errors.UploadFileCannotEmpty(h),y();h.__innnerHTTPUploadBase64Full(_,b,t,g,f,a,s,v,y)}},y));return p},r._innerFormFieldHTTPUpload=function(e,t,r){var n,i=this,o="HTTPUpload";if(i.__HTTPPostResponseString="",n=function n(){return w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(i,o),w.D.isFunction(r)&&d(r,i,i.__HTTPPostResponseString),!1},w.D.isUndefined(e)||""===e)return w.D.Errors.ParameterCannotEmpty(i),n();if(!w.D.isString(e))return w.D.Errors.InvalidUrl(i),n();0!=D()(e).call(e,"http://")&&0!=D()(e).call(e,"https://")&&(e=w.D.detect.ssl?"https://"+e:"http://"+e),i.__HTTPPostResponseString="",w.D.cancelFrome=1,w.D.showProgress(i,o,!1),w.D.needShowTwiceShowDialog=!0;var a=T.GetHttpHeadersAndClear(i);i._OnPercentDone([0,-1,w.I.MSG.Uploading,"http"]);return C.httpUploadByBIO(i,e,!1,0,!0,a,!0,0,!0,!1,function(e){w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(i,o),w.D.isFunction(t)&&E(t,e)},n)},T={UploadBinary:function(t,r,n,i,o,a,s,u,c,l,d,h,g,f){var m,e,_=i.size,p=_-s;return 0<p?(u<=p?(p-=u,m=u):(m=p,p=0),(e=0==s&&m==_?i:v()(i).call(i,s,s+m))?0<w.D.dlgRef||0==t.__IfShowCancelDialogWhenImageTransfer?(e.name=o,C.setBtnCancelVisibleForProgress(t,!0),a["Content-Range"]=["bytes ",s,"-",s+e.size-1,"/",_].join(""),c({total:_,loaded:s}),C.httpPostUpload(t,r,e,!0,0,a,!1,l,d,h,function(e){0==p?(w.D.needShowTwiceShowDialog=!1,c({total:_,loaded:_}),w.D.isFunction(g)&&E(g,e)):(s+=m,I()(function(){w.D.cancelFrome=1,T.UploadBinary(t,r,n,i,o,a,s,u,c,l,d,h,g,f)},100))},f),!0):(w.D.Errors.UploadError(t,!0),f()):(w.D.Errors.UploadFileCannotEmpty(t),f())):(w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(t,"HttpUpload"),w.D.isFunction(g)&&g(""),!0)},UploadBase64:function(t,r,n,i,o,a,s,u,c,l,d){var h,e,g=i.getLength(),f=g-s;return 0<f?(u<=f?(f-=u,h=u):(h=f,f=0),(e=i.getData(s,u))&&""!=e?0<w.D.dlgRef||0==t.__IfShowCancelDialogWhenImageTransfer?(C.setBtnCancelVisibleForProgress(t,!0),a["Content-Range"]=["bytes ",s,"-",s+h-1,"/",g].join(""),c({total:g,loaded:s}),C.httpPostUploadString(t,r,e,o,0,a,!1,0,!0,function(e){0==f?(w.D.needShowTwiceShowDialog=!1,c({total:g,loaded:g}),w.D.isFunction(l)&&E(l,e)):(s+=h,I()(function(){w.D.cancelFrome=1,T.UploadBase64(t,r,n,i,o,a,s,u,c,l,d)},100))},d),!0):(w.D.Errors.UploadError(t,!0),d()):(w.D.Errors.UploadFileCannotEmpty(t),d())):(w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(t,"HttpUpload"),w.D.isFunction(l)&&l(""),!0)},GetHttpHeadersAndClear:function(e){var t=e.__httpHeaderMap;return e.__httpHeaderMap={},t=t||e.__httpHeaderMap}},r.__innnerHTTPUploadBinaryFull=function(e,t,r,n,i,o,a,s,u,c){var l=T.GetHttpHeadersAndClear(this);return w.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(l["dwt-md5"]=t),0<w.D.dlgRef||0==this.__IfShowCancelDialogWhenImageTransfer?(r instanceof File?r.fileName=i:r.name=i,C.setBtnCancelVisibleForProgress(this,!0),C.httpPostUpload(this,e,r,!0,0,l,!0,o,a,s,function(e){w.D.isFunction(u)&&E(u,e)},c)):(w.D.Errors.UploadError(this,!0),c())},r.__innnerHTTPUploadBase64Full=function(e,t,r,n,i,o,a,s,u){var c=T.GetHttpHeadersAndClear(this);return 0<w.D.dlgRef||0==this.__IfShowCancelDialogWhenImageTransfer?(w.I.DWT.IfAddMD5InUploadHeader&&c&&t&&""!=t&&(c["dwt-md5"]=t),C.setBtnCancelVisibleForProgress(this,!0),C.httpPostUploadString(this,e,r,i,0,c,!0,o,a,function(e){w.D.isFunction(s)&&E(s,e)},u)):(w.D.Errors.UploadError(this,!0),u())},r.ConvertToBase64=function(e,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return!1;var a=[],s=arguments,t=S()(r);if(!w.D.License.checkProductKey(o,{Core:!0}))return w.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),!1;if(!o._isMobileMode()&&C.isServerInvalid(o))return w.D.isFunction(i)&&_(i,o,e,r,s),!1;if(!o._checkIndices(e))return w.D.isFunction(i)&&_(i,o,e,r,s),!1;if(t==w.I.DWT.EnumDWT_ImageType.IT_BMP||t==w.I.DWT.EnumDWT_ImageType.IT_JPG||t==w.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<e.length)return w.D.Errors.ConvertBase64IndexMoreThanOne(o),w.D.isFunction(i)&&_(i,o,e,r,s),!1}else if(t!=w.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=w.I.DWT.EnumDWT_ImageType.IT_PDF)return w.D.Errors.InvalidImageType(o),w.D.isFunction(i)&&_(i,o,e,r,s),!1;w.D.isArray(e)&&w.D.each(e,function(e){e=o._ImgManager.convertClientIndexToServerId(e);-1!=e&&a.push(e)});var u=function u(e){var t=[];return w.D.isArray(a)&&w.D.each(a,function(e){e=o._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)}),w.D.isFunction(n)&&E(n,e,t,r,s),!1},c=function c(){var t=[];return w.D.isArray(a)&&w.D.each(a,function(e){e=o._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)}),w.D.isFunction(i)&&_(i,o,t,r,s),!1};return o._convertToBase64ByServerIds(a,t,!1,3,u,c)},r._convertToBase64ByServerIds=function(i,e,t,r,o,n){var a=this,s="ConvertToBase64",u=(w.D.showProgress(a,s,!1),function u(){return w.D.closeProgress(a,s),w.D.isFunction(n)&&n(),!1}),c=function c(e){var t,r,e=e&&e.result,n=[];w.D.isArray(i)&&w.D.each(i,function(e){e=a._ImgManager.convertServerIdToClientIndex(e);-1<e&&n.push(e)}),0!=a.ErrorCode?u():e&&w.D.isArray(e)&&3==e.length?(t=e[0],r=e[1],e=e[2],r=new w.D.html5.Base64Result(a,r,e,t),w.D.closeProgress(a,s),w.D.isFunction(o)&&E(o,r)):(w.D.Errors.ConvertBase64Failed(a),u())};if(a._isMobileMode())return e==w.I.DWT.EnumDWT_ImageType.IT_BMP?(w.D.closeProgress(a,s),a._mobileNotSupport("Convert to bmp",n)):a.__innerConvertToBase64ByMobile("",i,e,r,c,u);w.D.isString(t)&&""!=t||(t="{}");r=["[",e,',"',i.join(","),'",',t,",1]"].join("");return a._innerFunRaw(s,r,!0,!1,!0,c,u)},r.ClearAllHTTPFormField=function(){return this._resetErr(),!!this._isValid()&&(this.httpFormFields={},!0)},r.SetHTTPFormField=function(e,t,r){if(this._resetErr(),!this._isValid())return!1;return w.D.isString(e)||(e=""+e),t instanceof Blob&&(t.name=r),this.httpFormFields[e]=t,!0},r.HTTPUploadAllThroughPostAsMultiPageTIFF=function(e,t,r,n,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF",i);var s=arguments,u=!1,c=function c(e){return w.D.isFunction(i)&&_(i,a,a.__HTTPPostResponseString,e,s),!1};return w.D.isString(r)&&""!=r?(n&&w.D.isFunction(n)&&(u=function u(e,t){return E(n,a.__HTTPPostResponseString,t,s),!0}),a.innerHTTPUploadPost(e,-1,t,r,2,u,c,o)):(w.D.Errors.UploadFileCannotEmpty(a),c())},r.HTTPUploadThroughPostAsMultiPageTIFF=function(e,t,r,n,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF",i);var s=arguments,u=!1,c=function c(e){return w.D.isFunction(i)&&_(i,a,a.__HTTPPostResponseString,e,s),!1};return w.D.isString(r)&&""!=r?(n&&w.D.isFunction(n)&&(u=function u(e,t){return E(n,a.__HTTPPostResponseString,t,s),!0}),a.innerHTTPUploadPost(e,-2,t,r,2,u,c,o)):(w.D.Errors.UploadFileCannotEmpty(a),c())},r.HTTPUploadAllThroughPostAsPDF=function(e,t,r,n,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadAllThroughPostAsPDF",i);var s=arguments,u=!1,c=function c(e){return w.D.isFunction(i)&&_(i,a,a.__HTTPPostResponseString,e,s),!1};return w.D.isString(r)&&""!=r?(n&&w.D.isFunction(n)&&(u=function u(e,t){return E(n,a.__HTTPPostResponseString,t,s),!0}),a.innerHTTPUploadPost(e,-1,t,r,4,u,c,o)):(w.D.Errors.UploadFileCannotEmpty(a),c())},r.HTTPUploadThroughPostAsMultiPagePDF=function(e,t,r,n,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF",i);var s=arguments,u=!1,c=function c(e){return w.D.isFunction(i)&&_(i,a,a.__HTTPPostResponseString,e,s),!1};return w.D.isString(r)&&""!=r?(n&&w.D.isFunction(n)&&(u=function u(e,t){return E(n,a.__HTTPPostResponseString,t,s),!0}),a.innerHTTPUploadPost(e,-2,t,r,4,u,c,o)):(w.D.Errors.UploadFileCannotEmpty(a),c())},r.HTTPDownloadThroughPost=function(e,t,r,n,i,o){var a=this,s=T.GetHttpHeadersAndClear(a),u=arguments,e=C.combineUrl(a,e,t);if(!1===e)return w.D.Errors.ParameterCannotEmpty(a),!1;if(C.isServerInvalid(a))return w.D.isFunction(i)&&d(i,a,u),!1;if(!w.D.License.checkProductKey(a,{Core:!0}))return w.D.isFunction(i)&&d(i,a,u),!1;if(!w.D.License.checkPDFProductKeyWhenNeeds(a,r))return w.D.isFunction(i)&&d(i,a,u),!1;w.D.cancelFrome=2,w.D.showProgress(a,"HttpDownloadThroughPost",!0);var c=function c(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join("");a._OnPercentDone([0,t,"","http"])},l=!0;return a._OnPercentDone([0,-1,w.I.MSG.Downloading,"http"]),w.D.isFunction(n)||(l=!1),C.loadHttpBlob(a,"post",e,l,function(e){a._OnPercentDone([0,-1,w.I.MSG.Loading]);var t=r;t!=w.I.DWT.EnumDWT_ImageType.IT_BMP&&t!=w.I.DWT.EnumDWT_ImageType.IT_JPG&&t!=w.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=w.I.DWT.EnumDWT_ImageType.IT_PNG&&t!=w.I.DWT.EnumDWT_ImageType.IT_PDF&&t!=w.I.DWT.EnumDWT_ImageType.IT_J2K&&(t=-1),a.__LoadImageFromBytes(e,t,"",l,n,i)},function(){w.D.closeProgress(a,"HttpDownloadThroughPost"),w.D.isFunction(i)&&d(i,a,u)},c,s)},r.HTTPDownloadThroughGet=function(e,t,r,n,i){var o=this,a=T.GetHttpHeadersAndClear(o),e=C.combineUrl(o,e,t);if(!1===e)return w.D.Errors.ParameterCannotEmpty(o),w.D.isFunction(i)&&d(i,o),!1;if(o._isMobileMode()){if(!w.D.License.checkProductKey(o,{Core:!0}))return w.D.isFunction(i)&&d(i,o),!1}else{if(C.isServerInvalid(o))return w.D.isFunction(i)&&d(i,o),!1;if(!w.D.License.checkProductKey(o,{Core:!0}))return w.D.isFunction(i)&&d(i,o),!1;if(!w.D.License.checkPDFProductKeyWhenNeeds(o,r))return w.D.isFunction(i)&&d(i,o),!1}w.D.cancelFrome=2,w.D.showProgress(o,"HTTPDownloadThroughGet",!0);var s=function s(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join("");o._OnPercentDone([0,t,"","http"])},u=!0,c=(o._OnPercentDone([0,-1,w.I.MSG.Downloading,"http"]),w.D.isFunction(n)||(u=!1),o.GetCurrentDocumentName());return""==c&&(c=o._ImgManager.getWebViewer().GetDefaultFileName()),o._isMobileMode()?C.loadHttpBlob(o,"get",e,u,function(e){o._OnPercentDone([0,-1,w.I.MSG.Loading]),e.currentFileName=c,o.LoadImageFromBinary(e,function(){w.I.Lib.closeProgress(o,""),w.D.isFunction(n)&&n()},function(){w.D.closeProgress(o,"HTTPDownloadThroughGet"),w.D.isFunction(i)&&d(i,o)})},function(){w.D.closeProgress(o,"HTTPDownloadThroughGet"),w.D.isFunction(i)&&d(i,o)},s,a):C.loadHttpBlob(o,"get",e,u,function(e){o._OnPercentDone([0,-1,w.I.MSG.Loading]);var t=r;t!=w.I.DWT.EnumDWT_ImageType.IT_BMP&&t!=w.I.DWT.EnumDWT_ImageType.IT_JPG&&t!=w.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=w.I.DWT.EnumDWT_ImageType.IT_PNG&&t!=w.I.DWT.EnumDWT_ImageType.IT_PDF&&t!=w.I.DWT.EnumDWT_ImageType.IT_J2K&&(t=-1),e.currentFileName=c,o.__LoadImageFromBytes(e,t,"",u,function(){w.I.Lib.closeProgress(o,""),w.D.isFunction(n)&&n()},function(){w.D.closeProgress(o,"HTTPDownloadThroughGet"),w.D.isFunction(i)&&d(i,o)})},function(){w.D.closeProgress(o,"HTTPDownloadThroughGet"),w.D.isFunction(i)&&d(i,o)},s,a)},r.HTTPUploadThroughPut=function(e,t,r,n,i){var o=C.getImageType(r);return this.HTTPUploadThroughPutEx(e,t,r,o,n,i)},r.HTTPUploadThroughPutEx=function(e,t,n,i,o,r){var a=this,s=T.GetHttpHeadersAndClear(a),u="HTTPUploadThroughPutEx",c=C.combineUrl(a,e,n),l=!0,d=[];if(!1===c)return w.D.Errors.ParameterCannotEmpty(a),w.D.isFunction(r)&&_(r,a,"",[t],n,i),!1;w.D.isFunction(o)||(l=!1),w.D.cancelFrome=1;var h,g=function g(){return w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(a,u),w.D.isFunction(r)&&_(r,a,a.__HTTPPostResponseString,d,n,i),!1};switch(w.D.needShowTwiceShowDialog=!0,w.D.showProgress(a,u,!1),t){case-1:for(var f=0;f<a._ImgManager.count();f++)d.push(f);break;case-2:d=a._ImgManager.getSelectedClientIndexArray();break;default:if(d.push(t),0<=t)break;return w.D.Errors.IndexOutOfRange(a),g()}if(""===e)return w.D.Errors.HttpServerCannotEmpty(a),g();var m=[];w.D.isArray(d)&&w.D.each(d,function(e){e=a._ImgManager.convertClientIndexToServerId(e);-1!=e&&m.push(e)});return a._OnPercentDone([0,-1,w.I.MSG.Encoding,"http"]),a.__innerConvertToBlob(i,m,!1,l,4,function(e,t,r){return w.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(s["dwt-md5"]=t),w.D.needShowTwiceShowDialog=!1,e&&(0<w.D.dlgRef||0==a.__IfShowCancelDialogWhenImageTransfer||0==l)?(t=a.MaxUploadImageSize)<e.size&&-1!=t?(w.D.Errors.UploadExceededMaxSize(a),g()):(h=function h(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join("");a._OnPercentDone([0,t,"","http"])},a._OnPercentDone([0,-1,w.I.MSG.Uploading,"http"]),C.setBtnCancelVisibleForProgress(a,!0),C.httpPutImage(a,c,e,l,function(e){var t;return a.__HTTPPostResponseString=e,w.D.closeProgress(a,u),w.D.isFunction(o)&&(t=[],w.D.isArray(m)&&w.D.each(m,function(e){e=a._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)}),E(o,a.__HTTPPostResponseString,t,n,i)),!0},g,h)):(w.D.closeProgress(a,u),!1)},g)},r.HTTPUploadAllThroughPutAsMultiPageTIFF=function(e,t,r,n){return this.HTTPUploadThroughPutEx(e,-1,t,2,r,n)},r.HTTPUploadThroughPutAsMultiPageTIFF=function(e,t,r,n){return this.HTTPUploadThroughPutEx(e,-2,t,2,r,n)},r.HTTPUploadAllThroughPutAsPDF=function(e,t,r,n){return this.HTTPUploadThroughPutEx(e,-1,t,4,r,n)},r.HTTPUploadThroughPutAsMultiPagePDF=function(e,t,r,n){return this.HTTPUploadThroughPutEx(e,-2,t,4,r,n)},r.GetSelectedImagesSize=function(e){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("GetSelectedImagesSize");var t=s(this);return this._innerFun("GetSelectedImagesSize",(0,m.dv)(e,t.join(",")))},r.SetHTTPHeader=function(e,t){var r=this;if(r._resetErr(),!r._isValid())return!1;var n,i,o=e;if(r.__httpHeaderMap||(r.__httpHeaderMap={}),!o||!w.D.isString(o))return w.D.isUndefined(o)?w.D.Errors.HttpHeaderIsUndefined(r):""===o?w.D.Errors.HttpHeaderIsEmpty(r):null===o?w.D.Errors.HttpHeaderIsNull(r):w.D.Errors.HttpHeaderIsInvalid(r),!1;for(n=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],o=o.toLowerCase(),i=0;i<n.length;i++)if(n[i]==o)return w.D.Errors.HttpHeaderNotAllowed(r),!1;return w.D.isUndefined(t)||null===t||""===t?e in r.__httpHeaderMap&&delete r.__httpHeaderMap[e]:(w.D.isNumber(t)&&(t=""+t),r.__httpHeaderMap[e]=t),!0},w.D.html5.Base64Result=function(e,t,r,n){this._stwain=e,this._md5=r,this._length=t,this._content=n},w.D.html5.Base64Result.prototype.getLength=function(){return this._length},w.D.html5.Base64Result.prototype.getMD5=function(){return this._md5},w.D.html5.Base64Result.prototype.getData=function(e,t){var r=t;return!w.D.isNumber(e)||!w.D.isNumber(t)||e<0||t<=0?"":0==e&&r==this._length?this._content:(e+r>this._length&&(r=this._length-e),this._content.substr(e,r))},r._ConvertToBlob=function(a,e,t,s,r){var u=this,c="ConvertToBlob",l=!0,d=arguments,h=(w.D.isFunction(s)||(l=!1),w.D.cancelFrome=0,w.D.showProgress(u,c,!1),function h(){var t;return w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(u,c),w.D.isFunction(r)&&(t=[],w.D.isArray(a)&&w.D.each(a,function(e){e=u._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)}),_(r,u,t,e,d)),!1});return u._OnPercentDone([0,-1,w.I.MSG.Encoding]),u.__innerConvertToBlob(e,a,t,l,2,function(e,t,r){if(!e||e.size<=0)return w.D.Errors.ConvertBlobIsEmpty(u),h();var n=u.MaxUploadImageSize;if(n<e.size&&-1!=n)return w.D.Errors.UploadExceededMaxSize(u),h();if(w.D.needShowTwiceShowDialog=!1,w.D.closeProgress(u,c),w.D.isFunction(s)){var i=[];w.D.isArray(a)&&w.D.each(a,function(e){e=u._ImgManager.convertServerIdToClientIndex(e);-1<e&&i.push(e)});try{s(e,i,d)}catch(o){}e=null}return!!l||e},h)},r.ConvertToBlob=function(e,r,n,t,i){var o=this;if(o._resetErr(),!o._isValid())return!1;var a=S()(r),s=arguments,u=function u(e,t){return w.D.isFunction(n)&&E(n,e,t,r,s),!(e=t=null)},c=function c(e){return w.D.isFunction(t)&&_(t,o,e,r,s),e=null,!1};if(!w.D.License.checkProductKey(o,{Core:!0}))return w.D.isFunction(t)&&t(o.ErrorCode,o.ErrorString),!1;if(!o._isMobileMode()&&C.isServerInvalid(o))return c(e);if(!o._checkIndices(e))return c(e);if(a==w.I.DWT.EnumDWT_ImageType.IT_BMP||a==w.I.DWT.EnumDWT_ImageType.IT_JPG||a==w.I.DWT.EnumDWT_ImageType.IT_PNG||a==w.I.DWT.EnumDWT_ImageType.IT_J2K){if(1<e.length)return w.D.Errors.ConvertBinaryIndexMoreThanOne(o),c(e)}else if(a!=w.I.DWT.EnumDWT_ImageType.IT_TIF&&a!=w.I.DWT.EnumDWT_ImageType.IT_PDF)return w.D.Errors.InvalidImageType(o),c(e);var l=[];return w.D.isArray(e)&&w.D.each(e,function(e){e=o._ImgManager.convertClientIndexToServerId(e);-1!=e&&l.push(e)}),w.D.isFunction(n)?(o._ConvertToBlob(l,a,!1,u,c),!0):o._ConvertToBlob(l,a,!1)},w.D._asyncUploadCmd=function(e){var n,t,r,i,o,a,s,u=e._this,c=e.bOnlyUploadForm,l=e.url,d=e.asyncSuccessFunc,h=e.asyncFailureFunc;if(!c)return n=e.serverIds,c=e.enumImageType,t=e.dataFormat,r=e.fileName,i=e.saveSetup,o=e.retry,a=e.bOnlyEmptyIsOK,e=e.objUploadFileStatus,s=function s(){if(w.D.isFunction(h)){var t=[];w.D.isArray(n)&&w.D.each(n,function(e){e=u._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)});try{h(t)}catch(e){}}return!1},w.D.isNumber(o)&&0<o||(o=0),0!=u._errorCode?s():u._innerHTTPUpload(l,n,c,t,r,i,o,a,e,function(e){if(w.D.isFunction(d)){var t=[];w.D.isArray(n)&&w.D.each(n,function(e){e=u._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)});try{E(d,e,t)}catch(r){}}return!0},s);u._innerFormFieldHTTPUpload(l,function(){if(w.D.isFunction(d))try{d()}catch(e){}},function(){if(w.D.isFunction(h))try{h()}catch(e){}})},r._asyncUploadFilesCmd=function(e,r,t,o,n,a,s,u,i,c){var l=this,d=S()(t),h="HTTPUpload",g=e,f=!1,m=[],_=(l.__HTTPPostResponseString="",w.D.cancelFrome=1,function _(){if(l._bServerPercentDone=!0,w.D.needShowTwiceShowDialog=!1,a&&w.D.closeProgress(l,h),m=null,w.D.isFunction(c)){var t=[];w.D.isArray(r)&&w.D.each(r,function(e){e=l._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)});try{c(t)}catch(e){}}return!1});if(w.D.needShowTwiceShowDialog=!0,a&&w.D.showProgress(l,h,!1),C.isServerInvalid(l))return _();var p,I,D=function D(e){var t;l._bServerPercentDone=!0,w.D.needShowTwiceShowDialog=!1,a&&w.D.closeProgress(l,h),m=null,w.D.isFunction(i)&&(t=[],w.D.isArray(r)&&w.D.each(r,function(e){e=l._ImgManager.convertServerIdToClientIndex(e);-1<e&&t.push(e)}),E(i,e,t))},v=r.length,b=0;return l._bServerPercentDone=!1,l._OnPercentDone([0,-1,w.I.MSG.Encoding,"http"]),w.D.each(r,function(e,i){f=l.__innerConvertToBlob(d,[e],n,!0,4,function(e,t,r){if(!e||e.size<=0)return w.D.Errors.UploadFileCannotEmpty(l),_();var n=l.MaxUploadImageSize;if(n<e.size&&-1!=n)return w.D.Errors.UploadExceededMaxSize(l),_();n=C.cformat(o,i+1);p=(b+1)/v*100,I=[b+1,"/",v].join(""),l._OnPercentDone([0,p,I,"http",n]),r[0],r[1];e.name=n,m.push(e),v<=++b&&(r=T.GetHttpHeadersAndClear(l),w.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(r["dwt-md5"]=t),f=C.httpPostUploadFiles(l,g,m,!0,0,r,a,s,u,function(e){D(e)},_))},_,[e,i])}),f}},398:function(e,t,r){r.r(t);var n=r(9623),t=r(7711),h=r.n(t),t=r(4579),g=r.n(t),f=r(1695),m=r(1188),t=f.D.html5.STwain.prototype,_=f.D.html5.Funs;t.AddText=function(e,t,r,n,i,o,a,s){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("AddText");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(u),!1;if(e<0||e>=u._ImgManager.count())return f.D.Errors.IndexOutOfRange(u),!1;i=f.D.RGB2BGR(i),o=f.D.RGB2BGR(o),e=u._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(u),!1):u._innerFun("AddText",(0,m.dv)(e,t,r,n,i,o,a,s))},t.CreateTextFont=function(e,t,r,n,i,o,a,s,u,c,l,d,h,g){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CreateTextFont"):this._innerFun("CreateTextFont",(0,m.dv)(e,t,r,n,i,o,a,s,u,c,l,d,h,g)))},t.CopyToClipboard=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(t._isMobileMode())return t._mobileNotSupport("CopyToClipboard");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),!1;e=t._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(t),!1):t._innerFun("CopyToClipboard",(0,m.dv)(e))},t.CopyToClipboardAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._mobileNotSupportAsync("CopyToClipboardAsync");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});e=t._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("CopyToClipboard",(0,m.dv)(e))},t._asyncErase=function(e,t,r,n,i,o,a){var s=this,u=function u(){_.refreshImageAfterInvokeFun(s,e),f.D.isFunction(o)&&g()(o,30)},c=function c(){f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString)},l=h()(e),d=s.__BackgroundFillColor;return f.D.isUndef(d)?d="FFFFFF":f.D.isNumber(d)?d=d.toString(16):f.D.isString(d)&&(d=d.replace("#","")),s._innerSendToMobile("Erase",(0,m.An)(l,t,r,n,i,d),0,u,c)},t.Erase=function(e,t,r,n,i,o,a){var s=this;if(s._resetErr(),!s._isValid())return!1;var e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1;if(e<0||e>=s._ImgManager.count())return f.D.Errors.IndexOutOfRange(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1;if(s._isMobileMode())return s._ImgManager.getView().GetWebViewer().clearSelectedAreas(),s._asyncErase(e,t,r,n,i,o,a);e=s._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1):(s._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(e=1==s._innerFun("Erase",(0,m.dv)(e,t,r,n,i)))?f.D.isFunction(o)&&o():f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),e)},t.GetImageBitDepth=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),!1;if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),h()(r.bitDepth);var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),!1):t._innerFun("GetImageBitDepth",(0,m.dv)(r))},t.GetImageWidth=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),-1;if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),-1;if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),h()(r.width);var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),-1):t._innerFun("GetImageWidth",(0,m.dv)(r))},t.GetImageHeight=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),-1;if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),-1;if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),h()(r.height);var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),-1):t._innerFun("GetImageHeight",(0,m.dv)(r))},t.GetImageSize=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;if(n._isMobileMode())return n._mobileNotSupport("GetImageSize");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(n),-1;if(e<0||e>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),-1;e=n._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(n),-1):n._innerFun("GetImageSize",(0,m.dv)(e,t,r))},t.GetImageSizeWithSpecifiedType=function(e,t){var r=this;if(r._resetErr(),!r._isValid())return!1;if(r._isMobileMode())return r._mobileNotSupport("GetImageSizeWithSpecifiedType");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(r),-1;if(e<0||e>=r._ImgManager.count())return f.D.Errors.IndexOutOfRange(r),-1;e=r._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(r),-1):r._innerFun("GetImageSizeWithSpecifiedType",(0,m.dv)(e,t))},t.GetImageXResolution=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),!1;if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),h()(r.resolutionX);var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),!1):t._innerFun("GetImageXResolution",(0,m.dv)(r))},t.GetImageYResolution=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),!1;if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),h()(r.resolutionY);var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),!1):t._innerFun("GetImageYResolution",(0,m.dv)(r))},t.SelectAllImages=function(){var e,t=this.HowManyImagesInBuffer,r=[];if(this._resetErr(),!this._isValid())return!1;for(e=0;e<t;e++)r.push(e);return this._ImgManager.SetSelectedClientIndexArray(r),r},t.SelectImages=function(e){return this._resetErr(),!!this._isValid()&&this._ImgManager.SetSelectedClientIndexArray(e)},t._asyncGetSkewAngleOnly=function(t,r,e){var n=this,i=function i(e){_.refreshImageAfterInvokeFun(n,t),f.D.isFunction(r)&&g()(function(){r(e)},30)},o=function o(){f.D.isFunction(e)&&e(n.ErrorCode,n.ErrorString)},a=h()(t);return n._innerSendToMobile("GetSkewAngleOnly",(0,m.An)(a),0,i,o)},t._asyncGetSkewAngle=function(t,r,e){var n=this,i=function i(e){_.refreshImageAfterInvokeFun(n,t),f.D.isFunction(r)&&g()(function(){r(e)},30)},o=function o(){f.D.isFunction(e)&&e(n.ErrorCode,n.ErrorString)},a=h()(t);return n._innerSendToMobile("GetSkewAngle",(0,m.An)(a),0,i,o)},t.GetSkewAngle=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(e<0||e>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._asyncGetSkewAngle(e,t,r);var i=n._ImgManager.convertClientIndexToServerId(e);if(-1==i)return f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(i=n._innerFun("GetSkewAngle",(0,m.dv)(i)),0==n.ErrorCode){if(_.refreshImageAfterInvokeFun(n,e),!f.D.isFunction(t))return i;t(i)}else f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString);return!0},t.GetSkewAngleAsync=function(e){var r=this;if(r._resetErr(),!r._isValid())return f.D.Promise.reject({code:r._errorCode,message:r._errorString});var n=h()(e);if(isNaN(n))return f.D.Errors.InvalidIndex(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString});if(n<0||n>=r._ImgManager.count())return f.D.Errors.IndexOutOfRange(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString});if(r._isMobileMode())return r._innerSendToMobileV2("GetSkewAngle",(0,m.An)(n)).then(function(e){_.refreshImageAfterInvokeFun(r,n)});e=r._ImgManager.convertClientIndexToServerId(n);return-1==e?(f.D.Errors.IndexOutOfRange(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString})):r._innerFunV2("GetSkewAngle",(0,m.dv)(e)).then(function(e){var t=e;return f.D.isArray(e)&&(t=0<e.length?e[0]:0),_.refreshImageAfterInvokeFun(r,n),t})},t.GetSkewAngleEx=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("GetSkewAngleEx");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(o),!1;if(e<0||e>=o._ImgManager.count())return f.D.Errors.IndexOutOfRange(o),!1;e=o._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(o),!1):o._innerFun("GetSkewAngleEx",(0,m.dv)(e,t,r,n,i))},t.IsBlankImageEx=function(e,t,r,n,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("IsBlankImageEx");if(e=h()(e),isNaN(e))return f.D.Errors.InvalidIndex(a),!1;if(e<0||e>=a._ImgManager.count())return f.D.Errors.IndexOutOfRange(a),!1;e=a._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(a),!1):a._innerFun("IsBlankImageEx",(0,m.dv)(e,t,r,n,i,o))},t.MirrorAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});var r=h()(e);if(isNaN(r))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(r<0||r>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._innerSendToMobileV2("Mirror",(0,m.An)(r)).then(function(){_.refreshImageAfterInvokeFun(t,r),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});e=t._ImgManager.convertClientIndexToServerId(r);return-1==e?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("Mirror",(0,m.dv)(e)).then(function(e){if(1!=e)throw{code:t._errorCode,message:t._errorString};_.refreshImageAfterInvokeFun(t,r),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},t.Mirror=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;var i=h()(e);if(isNaN(i))return f.D.Errors.InvalidIndex(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(i<0||i>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._innerSendToMobileV2("Mirror",(0,m.An)(i)).then(function(){_.refreshImageAfterInvokeFun(n,i),n._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),t&&t()},function(){f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString)}),!0;e=n._ImgManager.convertClientIndexToServerId(i);if(-1==e)return f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;e=1==n._innerFun("Mirror",(0,m.dv)(e));return e?(_.refreshImageAfterInvokeFun(n,i),n._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),f.D.isFunction(t)&&t()):f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),e},t.RemoveAllImages=function(){var e=this,t=!0,r=e._isMobileMode();if(e._resetErr(),!e._isValid())return!1;var n=e._ImgManager.GetCurrentTag();if(""==n||"All"==n)r?e._OnBitmapChanged(["10","-1",3,-1,0]):!(t=e._innerFun("RemoveAllImages"))&&-1033!=e._errorCode||e._OnBitmapChanged(["0","-1",3,-1,0]);else{var i=function i(){},o=function o(){},a=[],n="0";r&&(n="10");for(var s=e.HowManyImagesInBuffer-1;0<=s;s--){var u=e._ImgManager.convertClientIndexToServerId(s);-1<u&&(r||(t=e._innerFunRaw("RemoveImage",(0,m.dv)(u),!0,!1,!0,i,o))||-1033==e._errorCode)&&a.push(u)}e._OnBitmapChanged([n,a.join(","),3,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count()])}return t},t._innerRemoveImage=function(e,t){t=this._ImgManager.convertClientIndexToServerIdInFile(e,t);this._OnBitmapChanged(["10",""+t,3,this._ImgManager.getCurrentImageIndex(),this._ImgManager.count()],null,e)},t.RemoveImage=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;var e=h()(e),r=!0;if(isNaN(e))return f.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),!1;e=t._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(t),!1):(t._isMobileMode()?t._OnBitmapChanged(["10",""+e,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]):!(r=t._innerFun("RemoveImage",(0,m.dv)(e)))&&-1033!=t._errorCode||t._OnBitmapChanged(["0",""+e,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),r)},t.RemoveAllImagesAsync=function(){var a=this;if(a._resetErr(),!a._isValid())return f.D.Promise.reject({code:a._errorCode,message:a._errorString});var e=a._ImgManager.GetCurrentTag();if(""==e||"All"==e)return a._isMobileMode()?(a._OnBitmapChanged(["10","-1",3,-1,0]),f.D.Promise.resolve(!0)):a._innerFunV2("RemoveAllImages").then(function(e){return!(!e&&-1033!=a._errorCode)&&(a._OnBitmapChanged(["0","-1",3,-1,0]),!0)});e=function(){for(var e,r=[],t=a.HowManyImagesInBuffer,n=0;n<t;n++){var i=a._ImgManager.convertClientIndexToServerId(n);-1<i&&r.push(i)}if(a._isMobileMode())e=f.D.Promise.resolve(r.join(","));else{var o=[];for(e=f.D.Promise.resolve(0),n=0;n<r.length;n++)e=e.then(function(t){return a._innerFunRawV2("RemoveImage",(0,m.dv)(r[t])).then(function(e){return!e&&-1033!=a._errorCode||o.push(r[t]),t++})});e=e.then(function(){return o.join(",")})}return{v:e.then(function(e){var t="0";a._isMobileMode()&&(t="10"),""!=e&&a._OnBitmapChanged([t,e,3,a._ImgManager.getCurrentImageIndex(),a._ImgManager.count()])})}}();return"object"===(0,n.Z)(e)?e.v:void 0},t.RemoveImageAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?(t._OnBitmapChanged(["10",""+r,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),f.D.Promise.resolve(!0)):t._innerFunV2("RemoveImage",(0,m.dv)(r)).then(function(e){return!(!e&&-1033!=t._errorCode)&&(t._OnBitmapChanged(["0",""+r,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),!0)})},t._removeImageById=function(e,t,r){var n=this,i=function i(){n._OnBitmapChanged(["0",""+e,3,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count()]),f.D.isFunction(t)&&t()};return n._innerFunRaw("RemoveImage",(0,m.dv)(e),!0,!1,!0,i,r)},t._asyncRotateEx=function(e,t,r,n){var i=this,o=h()(e),a=i.__BackgroundFillColor;return f.D.isUndef(a)?a="FFFFFF":f.D.isNumber(a)?a="0x"+a.toString(16):f.D.isString(a)&&(a=a.replace("#","")),i._innerSendToMobileV2("RotateEx",(0,m.An)(o,t,r,n,a)).then(function(){_.refreshImageAfterInvokeFun(i,e),i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},t.Rotate=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(o),f.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),!1;if(e<0||e>=o._ImgManager.count())return f.D.Errors.IndexOutOfRange(o),f.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),!1;if(o._isMobileMode())return o._asyncRotateEx(e,t,r,-1).then(n,function(){f.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString)}),!0;var a=o._ImgManager.convertClientIndexToServerId(e);return-1==a?(f.D.Errors.IndexOutOfRange(o),f.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),!1):((a=1==o._innerFun("Rotate",(0,m.dv)(a,t,r)))?(_.refreshImageAfterInvokeFun(o,e),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),f.D.isFunction(n)&&n()):f.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),a)},t.RotateEx=function(e,t,r,n,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(a),f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),!1;if(e<0||e>=a._ImgManager.count())return f.D.Errors.IndexOutOfRange(a),f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),!1;if(a._isMobileMode())return a._asyncRotateEx(e,t,r,n).then(i,function(){f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString)}),!0;var s=a._ImgManager.convertClientIndexToServerId(e);return-1==s?(f.D.Errors.IndexOutOfRange(a),f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),!1):((s=1==a._innerFun("RotateEx",(0,m.dv)(s,t,r,n)))?(_.refreshImageAfterInvokeFun(a,e),a._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),f.D.isFunction(i)&&i()):f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),s)},t.RotateLeft=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(e<0||e>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._asyncRotateEx(e,-90,!0,-1).then(t,function(){f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString)}),!0;var i=n._ImgManager.convertClientIndexToServerId(e);return-1==i?(f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1):((i=1==n._innerFun("RotateLeft",(0,m.dv)(i)))?(_.refreshImageAfterInvokeFun(n,e),n._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),f.D.isFunction(t)&&t()):f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),i)},t.RotateRight=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(e<0||e>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._asyncRotateEx(e,90,!0,-1).then(t,function(){f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString)}),!0;var i=n._ImgManager.convertClientIndexToServerId(e);return-1==i?(f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1):((i=1==n._innerFun("RotateRight",(0,m.dv)(i)))?(_.refreshImageAfterInvokeFun(n,e),n._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),f.D.isFunction(t)&&t()):f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),i)},t.RotateAsync=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return f.D.Promise.reject({code:n._errorCode,message:n._errorString});var i=h()(e);if(isNaN(i))return f.D.Errors.InvalidIndex(n),f.D.Promise.reject({code:n._errorCode,message:n._errorString});if(i<0||i>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),f.D.Promise.reject({code:n._errorCode,message:n._errorString});if(n._isMobileMode())return n._asyncRotateEx(i,t,r,-1);e=n._ImgManager.convertClientIndexToServerId(i);return-1==e?(f.D.Errors.IndexOutOfRange(n),f.D.Promise.reject({code:n._errorCode,message:n._errorString})):n._innerFunV2("Rotate",(0,m.dv)(e,t,r)).then(function(e){if(1!=e)throw{code:n._errorCode,message:n._errorString};_.refreshImageAfterInvokeFun(n,i),n._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},t.RotateExAsync=function(e,t,r,n){var i=this;if(i._resetErr(),!i._isValid())return f.D.Promise.reject({code:i._errorCode,message:i._errorString});var o=h()(e);if(isNaN(o))return f.D.Errors.InvalidIndex(i),f.D.Promise.reject({code:i._errorCode,message:i._errorString});if(o<0||o>=i._ImgManager.count())return f.D.Errors.IndexOutOfRange(i),f.D.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._asyncRotateEx(o,t,r,n);e=i._ImgManager.convertClientIndexToServerId(o);return-1==e?(f.D.Errors.IndexOutOfRange(i),f.D.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("RotateEx",(0,m.dv)(e,t,r,n)).then(function(e){if(1!=e)throw{code:i._errorCode,message:i._errorString};_.refreshImageAfterInvokeFun(i,o),i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},t.RotateLeftAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});var r=h()(e);if(isNaN(r))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(r<0||r>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._asyncRotateEx(r,-90,!0,-1);e=t._ImgManager.convertClientIndexToServerId(r);return-1==e?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("RotateLeft",(0,m.dv)(e)).then(function(e){if(1!=e)throw{code:t._errorCode,message:t._errorString};_.refreshImageAfterInvokeFun(t,r),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},t.RotateRightAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});var r=h()(e);if(isNaN(r))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(r<0||r>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._asyncRotateEx(r,90,!0,-1);e=t._ImgManager.convertClientIndexToServerId(r);return-1==e?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("RotateRight",(0,m.dv)(e)).then(function(e){if(1!=e)throw{code:t._errorCode,message:t._errorString};_.refreshImageAfterInvokeFun(t,r),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},t._asyncChangeImageSize=function(e,t,r,n){var i=this,o=h()(e),t=h()(t),r=h()(r);return i._innerSendToMobileV2("ChangeImageSize",(0,m.An)(o,t,r,n)).then(function(){_.refreshImageAfterInvokeFun(i,e)})},t.ChangeImageSize=function(e,t,r,n,i,o){var a=this,e=h()(e),s=+t,u=+r;if(a._resetErr(),!a._isValid())return!1;if(isNaN(e))return f.D.Errors.InvalidIndex(a),f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),!1;if(e<0||e>=a._ImgManager.count())return f.D.Errors.IndexOutOfRange(a),f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),!1;if(s<=0||u<=0)return f.D.Errors.InvalidWidthOrHeight(a),f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),!1;if(a._isMobileMode())return a._asyncChangeImageSize(e,t,r,n).then(i,function(){f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString)}),!0;t=a._ImgManager.convertClientIndexToServerId(e);return-1==t?(f.D.Errors.IndexOutOfRange(a),f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),!1):((r=1==a._innerFun("ChangeImageSize",(0,m.dv)(t,s,u,n)))?(_.refreshImageAfterInvokeFun(a,e),f.D.isFunction(i)&&i()):f.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),r)},t.ChangeImageSizeAsync=function(e,t,r,n){var i=this,o=h()(e),e=+t,a=+r;if(i._resetErr(),!i._isValid())return f.D.Promise.reject({code:i._errorCode,message:i._errorString});if(isNaN(o))return f.D.Errors.InvalidIndex(i),f.D.Promise.reject({code:i._errorCode,message:i._errorString});if(o<0||o>=i._ImgManager.count())return f.D.Errors.IndexOutOfRange(i),f.D.Promise.reject({code:i._errorCode,message:i._errorString});if(e<=0||a<=0)return f.D.Errors.InvalidWidthOrHeight(i),f.D.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._asyncChangeImageSize(o,t,r,n);t=i._ImgManager.convertClientIndexToServerId(o);return-1==t?(f.D.Errors.IndexOutOfRange(i),f.D.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("ChangeImageSize",(0,m.dv)(t,e,a,n)).then(function(e){if(1!=e)throw{code:i._errorCode,message:i._errorString};_.refreshImageAfterInvokeFun(i,o)})},t._asyncFlip=function(e){var t=this,r=h()(e);return t._innerSendToMobileV2("Flip",(0,m.An)(r)).then(function(){_.refreshImageAfterInvokeFun(t,e),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},t.Flip=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(e<0||e>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._asyncFlip(e).then(t,function(){f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString)}),!0;var i=n._ImgManager.convertClientIndexToServerId(e);return-1==i?(f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1):((i=1==n._innerFun("Flip",(0,m.dv)(i)))?(_.refreshImageAfterInvokeFun(n,e),n._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),f.D.isFunction(t)&&t()):f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),i)},t.FlipAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});var r=h()(e);if(isNaN(r))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(r<0||r>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._asyncFlip(r);e=t._ImgManager.convertClientIndexToServerId(r);return-1==e?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("Flip",(0,m.dv)(e)).then(function(e){if(1!=e)throw{code:t._errorCode,message:t._errorString};_.refreshImageAfterInvokeFun(t,r),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},t._asyncCrop=function(r,e,t,n,i){var o=this,a=h()(r);return o._innerSendToMobileV2("Crop",(0,m.An)(a,e,t,n,i)).then(function(){var e,t;_.refreshImageAfterInvokeFun(o,r),e=o.ErrorCode,t=o.ErrorString,o._ImgManager.getView().GetWebViewer().clearSelectedAreas(),o._errorCode=e,o._errorString=t})},t.Crop=function(e,t,r,n,i,o,a){var s=this;if(s._resetErr(),!s._isValid())return!1;e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1;if(e<0||e>=s._ImgManager.count())return f.D.Errors.IndexOutOfRange(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1;if(s._isMobileMode())return s._asyncCrop(e,t,r,n,i).then(o,function(){f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString)}),!0;var u=s._ImgManager.convertClientIndexToServerId(e);return-1==u?(f.D.Errors.IndexOutOfRange(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1):(u=1==s._innerFun("Crop",(0,m.dv)(u,t,r,n,i)),t=s.ErrorCode,r=s.ErrorString,s._ImgManager.getView().GetWebViewer().clearSelectedAreas(),s._errorCode=t,s._errorString=r,u?(_.refreshImageAfterInvokeFun(s,e),f.D.isFunction(o)&&o()):f.D.isFunction(a)&&a(t,r),u)},t.CropAsync=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return f.D.Promise.reject({code:o._errorCode,message:o._errorString});var a=h()(e);if(isNaN(a))return f.D.Errors.InvalidIndex(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString});if(a<0||a>=o._ImgManager.count())return f.D.Errors.IndexOutOfRange(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._asyncCrop(a,t,r,n,i);e=o._ImgManager.convertClientIndexToServerId(a);return-1==e?(f.D.Errors.IndexOutOfRange(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("Crop",(0,m.dv)(e,t,r,n,i)).then(function(e){var t=o.ErrorCode,r=o.ErrorString;if(o._ImgManager.getView().GetWebViewer().clearSelectedAreas(),o._errorCode=t,o._errorString=r,1!=e)throw{code:o._errorCode,message:o._errorString};return _.refreshImageAfterInvokeFun(o,a),!0})},t.CropToClipboard=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("CropToClipboard");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(o),!1;if(e<0||e>=o._ImgManager.count())return f.D.Errors.IndexOutOfRange(o),!1;var a=o._ImgManager.convertClientIndexToServerId(e);return-1==a?(f.D.Errors.IndexOutOfRange(o),!1):(o._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(a=1==o._innerFun("CropToClipboard",(0,m.dv)(a,t,r,n,i)))&&_.refreshImageAfterInvokeFun(o,e),a)},t.CutFrameToClipboard=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("CutFrameToClipboard");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(o),!1;if(e<0||e>=o._ImgManager.count())return f.D.Errors.IndexOutOfRange(o),!1;var a=o._ImgManager.convertClientIndexToServerId(e);return-1==a?(f.D.Errors.IndexOutOfRange(o),!1):(o._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(a=1==o._innerFun("CutFrameToClipboard",(0,m.dv)(a,t,r,n,i)))&&_.refreshImageAfterInvokeFun(o,e),a)},t.CutToClipboard=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(t._isMobileMode())return t._mobileNotSupport("CutToClipboard");var r,e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),!1;e=t._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(t),!1):((r=1==t._innerFun("CutToClipboard",(0,m.dv)(e)))&&t._OnBitmapChanged(["0",""+e,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),r)},t.CutFrameToClipboardAsync=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return f.D.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._mobileNotSupportAsync("CutFrameToClipboardAsync");var a=h()(e);if(isNaN(a))return f.D.Errors.InvalidIndex(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString});if(a<0||a>=o._ImgManager.count())return f.D.Errors.IndexOutOfRange(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString});e=o._ImgManager.convertClientIndexToServerId(a);return-1==e?(f.D.Errors.IndexOutOfRange(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("CutFrameToClipboard",(0,m.dv)(e,t,r,n,i)).then(function(e){e=1==e;if(e)return _.refreshImageAfterInvokeFun(o,a),e;throw{code:o._errorCode,message:o._errorString}})},t.CropToClipboardAsync=function(e,t,r,n,i){var o=this;if(o._resetErr(),!o._isValid())return f.D.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._mobileNotSupportAsync("CropToClipboardAsync");var a=h()(e);if(isNaN(a))return f.D.Errors.InvalidIndex(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString});if(a<0||a>=o._ImgManager.count())return f.D.Errors.IndexOutOfRange(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString});e=o._ImgManager.convertClientIndexToServerId(a);return-1==e?(f.D.Errors.IndexOutOfRange(o),f.D.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("CropToClipboard",(0,m.dv)(e,t,r,n,i)).then(function(e){e=1==e;if(e)return _.refreshImageAfterInvokeFun(o,a),e;throw{code:o._errorCode,message:o._errorString}})},t.CutToClipboardAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._mobileNotSupportAsync("CutToClipboardAsync");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("CutToClipboard",(0,m.dv)(r)).then(function(e){e=1==e;if(e)return t._OnBitmapChanged(["0",""+r,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),e;throw{code:t._errorCode,message:t._errorString}})},t._asyncSetDPI=function(e,t,r,n,i,o,a,s){var u=this,c=function c(){_.refreshImageAfterInvokeFun(u,e),f.D.isFunction(a)&&g()(a,30)},l=function l(){f.D.isFunction(s)&&s(u.ErrorCode,u.ErrorString)},d=h()(e),r=h()(r),n=h()(n),o=h()(o);return isNaN(r)||r<=0||isNaN(n)||n<=0||isNaN(o)||o<0?(f.D.Errors.InvalidParameter(u),f.D.isFunction(s)&&s(u.ErrorCode,u.ErrorString),!1):u._innerSendToMobile("SetDPI",(0,m.An)(d,r,n,i,o),0,c,l)},t.SetDPI=function(e,t,r,n,i,o,a){var s=this;if(s._resetErr(),!s._isValid())return!1;var e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1;if(e<0||e>=s._ImgManager.count())return f.D.Errors.IndexOutOfRange(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1;var u=s._ImgManager.convertClientIndexToServerId(e);return-1==u?(f.D.Errors.IndexOutOfRange(s),f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1):s._isMobileMode()?s._asyncSetDPI(e,u,t,r,n,i,o,a):((e=1==s._innerFun("SetDPI",(0,m.dv)(u,t,r,n,i)))?f.D.isFunction(o)&&o():f.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),e)},t.MoveImage=function(e,t){if(this._resetErr(),!this._isValid())return!1;e=h()(e),t=h()(t);return isNaN(e)||isNaN(t)?(f.D.Errors.InvalidIndex(this),!1):e<0||e>=this._ImgManager.count()||t<0||t>=this._ImgManager.count()?(f.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.MoveImage(e,t)},t.SwitchImage=function(e,t){if(this._resetErr(),!this._isValid())return!1;e=h()(e),t=h()(t);return isNaN(e)||isNaN(t)?(f.D.Errors.InvalidIndex(this),!1):e<0||e>=this._ImgManager.count()||t<0||t>=this._ImgManager.count()?(f.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.SwitchImage(e,t)},t.CloseWorkingProcess=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseWorkerProcess"):this._innerFun("CloseWorkerProcess"))},t.RemoveAllSelectedImages=function(){var r=this,e=r._isMobileMode();if(r._resetErr(),!r._isValid())return!1;var t=!0,n=r._ImgManager.getCurrentImageIndex(),i=r._ImgManager.getSelectedClientIndexArray(),o=[];return f.D.isArray(i)&&f.D.each(i,function(e){e=r._ImgManager.convertClientIndexToServerId(e);-1!=e&&o.push(e)}),0==o.length&&0<=n&&(i=r._ImgManager.convertClientIndexToServerId(n),o.push(i)),(t=e?t:r._innerFun("RemoveAllSelectedImages",(0,m.dv)(o.join(","))))&&(e||(r._HowManyImagesInBuffer=r._innerFun("HowManyImagesInBuffer")),f.D.each(o,function(e){var t="0";r._isMobileMode()&&(t="10"),r._OnBitmapChanged([t,""+e,3,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count()])})),t},t.RemoveAllSelectedImagesAsync=function(){var r=this,e=r._isMobileMode();if(r._resetErr(),!r._isValid())return f.D.Promise.reject({code:r._errorCode,message:r._errorString});var t=r._ImgManager.getCurrentImageIndex(),n=r._ImgManager.getSelectedClientIndexArray(),i=[];return f.D.isArray(n)&&f.D.each(n,function(e){e=r._ImgManager.convertClientIndexToServerId(e);-1!=e&&i.push(e)}),0==i.length&&0<=t&&(n=r._ImgManager.convertClientIndexToServerId(t),i.push(n)),(e?f.D.Promise.resolve(!0):r._innerFunV2("RemoveAllSelectedImages",(0,m.dv)(i.join(","))).then(function(e){return e&&r._innerFunV2("HowManyImagesInBuffer").then(function(e){return r._HowManyImagesInBuffer=e,!0})})).then(function(e){e&&f.D.each(i,function(e){var t="0";r._isMobileMode()&&(t="10"),r._OnBitmapChanged([t,""+e,3,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count()])})})},t.TagImages=function(e,t){var r=this;if(r._resetErr(),!r._isValid())return!1;var n=!0,i=r._ImgManager.getView().GetWebViewer().GetHowManyImagesInBuffer();return f.D.isArray(e)?f.D.isString(t)&&""!=t?(f.D.each(e,function(e){if(isNaN(e)||e<0||i<=e)return f.D.Errors.IndexOutOfRange(r),n=!1}),n&&r._ImgManager.AddImageTag(e,t)):(f.D.Errors.InvalidTagName(r),!1):(f.D.Errors.IndicesNotArray(r),!1)},t.ClearImageTags=function(e){return this._resetErr(),!!this._isValid()&&(-1==e||e>=this.HowManyImagesInBuffer?(f.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.RemoveImageTag(e))},t.SetDefaultTag=function(e){return this._resetErr(),!!this._isValid()&&this._ImgManager.SetDefaultTag(e)},t.FilterImagesByTag=function(e,t,r){return this._resetErr(),!!this._isValid()&&this._ImgManager.ShowImagesByFilter(e,t,r)},t.ClearFilter=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.ClearFilter()},t.CreateDocument=function(e){return this._resetErr(),!!this._isValid()&&(e&&""!=e?f.D.isString(e)?this._ImgManager.CreateFile(e):(f.D.Errors.FileNameNotString(this),!1):(f.D.isNumber(e)?f.D.Errors.FileNameNotString(this):f.D.Errors.FileNameCannotEmpty(this),!1))},t.OpenDocument=function(e){return this._resetErr(),!!this._isValid()&&(e&&""!=e?f.D.isString(e)?this._ImgManager.OpenFile(e):(f.D.Errors.FileNameNotString(this),!1):(f.D.isNumber(e)?f.D.Errors.FileNameNotString(this):f.D.Errors.FileNameCannotEmpty(this),!1))},t.GetCurrentDocumentName=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetCurrentFileName()},t.RemoveDocument=function(e){var t=this._isMobileMode();return this._resetErr(),!!this._isValid()&&(t||(t=this._ImgManager.GetImageIdsByFileName(e),this._innerFun("RemoveAllSelectedImages",(0,m.dv)(t.join(",")))),this._ImgManager.RemoveFile(e))},t.RenameDocument=function(e,t){return this._resetErr(),!!this._isValid()&&(f.D.isString(e)&&f.D.isString(t)?e&&""!=e&&t&&""!=t?this._ImgManager.RenameFile(e,t):(f.D.Errors.FileNameCannotEmpty(this),!1):(f.D.Errors.FileNameNotString(this),!1))},t.GetDocumentInfoList=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetFileInfoList()},t._asyncInvert=function(e){var t=this,r=h()(e);return t._innerSendToMobileV2("Invert",(0,m.An)(r)).then(function(){_.refreshImageAfterInvokeFun(t,e)})},t.Invert=function(e,t,r){var n=this,e=h()(e);if(n._resetErr(),!n._isValid())return!1;if(isNaN(e))return f.D.Errors.InvalidIndex(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(e<0||e>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._asyncInvert(e).then(t,function(){f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString)}),!0;var i=n._ImgManager.convertClientIndexToServerId(e);return-1==i?(f.D.Errors.IndexOutOfRange(n),f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),!1):((i=1==n._innerFun("Invert",(0,m.dv)(i)))?(_.refreshImageAfterInvokeFun(n,e),f.D.isFunction(t)&&t()):f.D.isFunction(r)&&r(n.ErrorCode,n.ErrorString),i)},t.InvertAsync=function(e){var t=this,r=h()(e);if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(isNaN(r))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(r<0||r>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._asyncInvert(r);e=t._ImgManager.convertClientIndexToServerId(r);return-1==e?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("Invert",(0,m.dv)(e)).then(function(e){e=1==e;if(e)return _.refreshImageAfterInvokeFun(t,r),e;throw{code:t._errorCode,message:t._errorString}})},t.RenameTag=function(e,t){return this._resetErr(),!!this._isValid()&&(f.D.isUndefined(e)?(f.D.Errors.ParameterCannotEmpty(this),!1):0==e.length?(f.D.Errors.OldTagNameRequired(this),!1):f.D.isUndefined(t)||0==t.length?(f.D.Errors.NewTagNameRequired(this),!1):this._ImgManager.RenameTag(e,t))},t.RemoveTag=function(e,t){return this._resetErr(),!!this._isValid()&&(f.D.isUndefined(e)||0==e.length?(f.D.Errors.ParameterCannotEmpty(this),!1):f.D.isUndefined(t)||f.D.isArray(t)?this._ImgManager.RemoveTag(e,t):(f.D.Errors.IndicesNotArray(this),!1))},t.GetTagList=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetTagList()},t.GetTagListByIndex=function(e){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetTagListByIndex(e)},t._registLoadCallback=function(e){return this._resetErr(),!!this._isValid()&&this._ImgManager.RegistLoadCallback(e)},t.GetImageBitDepthAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),f.D.Promise.resolve(h()(r.bitDepth));var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageBitDepth",(0,m.dv)(r))},t.GetImageWidthAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),f.D.Promise.resolve(h()(r.width));var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageWidth",(0,m.dv)(r))},t.GetImageHeightAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),f.D.Promise.resolve(h()(r.height));var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageHeight",(0,m.dv)(r))},t.GetImageSizeAsync=function(e,t,r){var n=this;if(n._resetErr(),!n._isValid())return f.D.Promise.reject({code:n._errorCode,message:n._errorString});if(n._isMobileMode())return n._mobileNotSupportAsync("GetImageSizeAsync");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(n),f.D.Promise.reject({code:n._errorCode,message:n._errorString});if(e<0||e>=n._ImgManager.count())return f.D.Errors.IndexOutOfRange(n),f.D.Promise.reject({code:n._errorCode,message:n._errorString});e=n._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(n),f.D.Promise.reject({code:n._errorCode,message:n._errorString})):n._innerFunV2("GetImageSize",(0,m.dv)(e,t,r))},t.GetImageSizeWithSpecifiedTypeAsync=function(e,t){var r=this;if(r._resetErr(),!r._isValid())return f.D.Promise.reject({code:r._errorCode,message:r._errorString});if(r._isMobileMode())return r._mobileNotSupportAsync("GetImageSizeWithSpecifiedTypeAsync");e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString});if(e<0||e>=r._ImgManager.count())return f.D.Errors.IndexOutOfRange(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString});e=r._ImgManager.convertClientIndexToServerId(e);return-1==e?(f.D.Errors.IndexOutOfRange(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString})):r._innerFunV2("GetImageSizeWithSpecifiedType",(0,m.dv)(e,t))},t.GetImageXResolutionAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),f.D.Promise.resolve(h()(r.resolutionX));var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageXResolution",(0,m.dv)(r))},t.GetImageYResolutionAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return f.D.Promise.reject({code:t._errorCode,message:t._errorString});e=h()(e);if(isNaN(e))return f.D.Errors.InvalidIndex(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return r=t._ImgManager._UIView.GetMetaDataByIndex(e),f.D.Promise.resolve(h()(r.resolutionY));var r=t._ImgManager.convertClientIndexToServerId(e);return-1==r?(f.D.Errors.IndexOutOfRange(t),f.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageYResolution",(0,m.dv)(r))},t.ChangeBrightnessAsync=function(e,t){var r=this,n=h()(e);if(!r._isValid())return f.D.Promise.reject({code:r._errorCode,message:r._errorString});if(t<-1e3||1e3<t)return f.D.Errors.InvalidValue(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString});if(r._isMobileMode())return r._innerSendToMobileV2("ChangeBrightness",(0,m.An)(n,t)).then(function(){_.refreshImageAfterInvokeFun(r,e),r._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});n=r._ImgManager.convertClientIndexToServerId(n);return-1==n?(f.D.Errors.IndexOutOfRange(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString})):r._innerFunV2("ChangeBrightness",(0,m.dv)(n,t))},t.ChangeContrastAsnyc=function(e,t){var r=this,n=h()(e);if(!r._isValid())return f.D.Promise.reject({code:r._errorCode,message:r._errorString});if(t<-1e3||1e3<t)return f.D.Errors.InvalidValue(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString});if(r._isMobileMode())return r._innerSendToMobileV2("ChangeContrast",(0,m.An)(n,t)).then(function(){_.refreshImageAfterInvokeFun(r,e),r._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});n=r._ImgManager.convertClientIndexToServerId(n);return-1==n?(f.D.Errors.IndexOutOfRange(r),f.D.Promise.reject({code:r._errorCode,message:r._errorString})):r._innerFunV2("ChangeContrast",(0,m.dv)(n,t))}},4571:function(V,e,t){t.r(e);var A,B=t(9623),e=t(4579),h=t.n(e),e=t(1006),O=t.n(e),e=t(7711),o=t.n(e),e=t(3662),g=t.n(e),e=t(6019),R=t.n(e),e=t(9104),r=t.n(e),e=t(9798),U=t.n(e),f=t(1695),e=t(5683),u=t.n(e);function G(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":(0,B.Z)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(t){}}function d(){f.I.WasmEnv&&(f.I.WasmEnv.useFastcompEdition=f.I.Lib.env.isWasmUseFastcomp(),f.I.DWT.WasmConfig&&(f.I.DWT.WasmConfig.fetchOptions&&(f.I.WasmEnv.fetchOptions=f.I.DWT.WasmConfig.fetchOptions),f.I.DWT.WasmConfig.maxHeapSize&&(f.I.WasmEnv.maxHeapSize=f.I.DWT.WasmConfig.maxHeapSize)))}function H(r,n){var i,e=[f.I.DWT.ResourcesPath,"/src/dynamsoft.imageio.js",f.I.Lib.timestamp].join("");if(f.D.IsNeedLoadWasm()){if(!G())return void r();if(!f.D.detect.wasmScriptLoaded)return f.D.showLoadingMsg(-1,"",f.I.MSG.Init_DownloadingWasm),i=function i(e){if(f.D.detect.wasmScriptLoaded=!0,d(),f.D.showLoadingMsg(-1,"",f.I.MSG.Init_CompilingWasm),f.D.License.isLTS())f.I.DWT.lglic(f.I.DWT.EnumInstance.dwt_browser).then(function(e){try{f.I.WasmEnv.load(e.ar,!0,e.cu),f.I.WasmEnv.wasmLoad=!0}catch(t){}r()},function(e){e&&(f.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),f.D.closeLoadingMsg(),f.I.DWT.OnLicenseException()),n(e)});else{try{f.I.WasmEnv.load(f.I.DWT.ProductKey),f.I.WasmEnv.wasmLoad=!0}catch(t){}r()}},void(f.I.DWT.bNpm?i(!0):f.D.getScript(e,!0,i))}else if(f.D.showLoadingMsg(-1,"",f.I.MSG.Init_InitDynamsoftService),!f.D.detect.wasmScriptLoaded&&!f.I.navInfoSync.bFileSystem&&f.I.DWT.UseCameraAddonWasm){if(!G())return void r();var o=function o(e){if(f.D.detect.wasmScriptLoaded=!0,d(),f.D.License.isLTS())f.I.DWT.lglic(f.I.DWT.EnumInstance.dwt_browser).then(function(e){try{f.I.WasmEnv.load(e.ar,!0,e.cu),f.I.WasmEnv.wasmLoad=!0}catch(t){}r()},function(e){e&&(f.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),f.D.closeLoadingMsg(),f.I.DWT.OnLicenseException()),n(e)});else{try{f.I.WasmEnv.load(f.I.DWT.ProductKey),f.I.WasmEnv.wasmLoad=!0}catch(t){}r()}};return void(f.I.DWT.bNpm?o(!0):f.D.getScript(e,!0,o))}r()}function j(){f.D.detect.scriptLoaded?new f.D.Promise(H).then(function(){A()}):h()(j,60)}function m(){return new f.D.Promise(function(e){A=e,h()(j,60)})}f.I.DWT.NeedCheckWebTwainBySocket=function(){return"localhost"!=(e=location.hostname)&&"127.0.0.1"!=e&&0!=u()(e).call(e,"192.168.")&&0!=u()(e).call(e,"172.16.")&&0!=u()(e).call(e,"10.")&&!f.I.navInfoSync.bSSL&&!!((f.I.navInfoSync.bChrome||f.I.navInfoSync.bEdge)&&94<=o()(f.I.navInfoSync.strBrowserVersion));var e},f.I.DWT.CheckWebTwainBySocket=function(n,i,o){var a,e,t=f.I.Lib.detect.urls;(a=t&&0<t.length?(t=t[0],f.I.Lib.getWS(t.host,t.port,t.ssl)):(e=(t=f.I.navInfoSync.bSSL)?f.I.DWT.SSLPort:f.I.DWT.Port,f.I.Lib.getWS(f.I.Lib.product.host,e,t))).onopen=function(){var e;1==a.readyState?(a.onopen=null,e=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',f.I.Lib.product.getDWTPrefix(),f.I.Lib.product.getServerVersionInfo(),'"}'].join(""),a.send(e)):0==a.readyState&&h()(a.onopen,100)},a.onmessage=function(e){try{var t;a.close(),(0<=u()(t=e.data).call(t,"Version not found")?i:n)()}catch(r){o(),a.close()}},a.onerror=function(){o()}},f.I.DWT.IsLocalServiceConnected=function(){return new f.D.Promise(function(n,e){var t,r=f.I.dcp.host;f.D.each(f.D.detect.ports,function(e){f.I.navInfoSync.bSSL?e.ssl&&(t=e.port):e.ssl||(t=e.port)}),f.I.DWT.CheckConnectToTheService(r,t,function(e,t,r){n(!0)},function(){e(!1)})})};var z=t(1255),c=f.I.navInfoSync,n=window,Z=n.document,l=f.I.Lib.timestamp;function _(i){var e,t,r,n,o,a,s;f.D.product.loadResourcePath||f.D.product.loadingResourcePath||((0<f.I.DWT.Port||0<f.I.DWT.SSLPort)&&(f.D.detect.ports=[{port:f.I.DWT.Port,ssl:!1},{port:f.I.DWT.SSLPort,ssl:!0}],f.D.LS.removeItem("DWT_port"),f.D.LS.removeItem("DWT_ssl")),f.D.isArray(f.I.DWT.licenseServer)?0<f.I.DWT.licenseServer.length&&(""!=(t=f.I.DWT.licenseServer[0])&&0!=u()(t).call(t,"https://mlts.dynamsoft.com")||(f.I.DWT.licenseServer=undefined)):f.I.DWT.licenseServer=undefined,f.D.isString(f.I.DWT.organizationID)&&""!=f.I.DWT.organizationID&&"undefined"!=f.I.DWT.organizationID||(f.D.isNumber(f.I.DWT.organizationID)?f.I.DWT.organizationID=""+f.I.DWT.organizationID:f.I.DWT.organizationID=undefined),f.D.isString(f.I.DWT.handshakeCode)&&""!=f.I.DWT.handshakeCode&&"undefined"!=f.I.DWT.handshakeCode||(f.D.isNumber(f.I.DWT.handshakeCode)?f.I.DWT.handshakeCode=""+f.I.DWT.handshakeCode:f.I.DWT.handshakeCode=undefined),f.D.isString(f.I.DWT.ProductKey)?""!=f.I.DWT.ProductKey&&"f"!=(t=f.I.DWT.ProductKey.charAt(0))&&"t"!=t&&(f.I.DWT.organizationID=f.I.DWT.ProductKey,f.I.DWT.ProductKey=undefined):f.I.DWT.ProductKey=undefined,t=z.LX,f.I.DWT.CertificateConfig?(e=f.I.DWT.CertificateConfig,f.D.isString(e.URL)||(e.URL=t.URL),(!f.D.isNumber(e.UpdateDaysBeforeExpired)||e.UpdateDaysBeforeExpired<=0)&&(e.UpdateDaysBeforeExpired=t.UpdateDaysBeforeExpired)):f.I.DWT.CertificateConfig=t,e=z.Vn,t=f.I.DWT.CustomizableDisplayInfo,f.D.isString(t.loaderBarSource)&&""!=t.loaderBarSource?f.D.loaderBarSource=t.loaderBarSource:c.bIE?f.D.loaderBarSourceIE=e.loaderBarSource:f.D.loaderBarSource=e.loaderBarSource,f.D.isString(t.loaderBarClassName)&&""!=t.loaderBarClassName?f.D.loaderBarClassName=t.loaderBarClassName:f.D.loaderBarClassName=e.loaderBarClassName,f.D.isString(t.loaderBarBackgroundColor)?f.D.loaderBarBackgroundColor=t.loaderBarBackgroundColor:f.D.loaderBarBackgroundColor=e.loaderBarBackgroundColor,f.D._safePromptCustomMsg(),f.D.each(f.D._funsAfterConfigLoaded,function(e){try{f.D.isFunction(e)&&e()}catch(t){}}),f.D.showLoadingMsg(-1,"",f.I.MSG.Init_LookingLicense),(n=f.D.one(".dynamsoft_waiting").getEL())&&n.parentNode&&n.parentNode.removeChild(n),n=c.bFileSystem,o=f.D.env.basePath,r=f.I.DWT.ResourcesPath,f.D.product.loadResourcePath||f.D.product.loadingResourcePath||(f.D.product.loadingResourcePath=!0,n||(0<(r=void 0!==r&&""!=r?r:o).length&&"/"==r.charAt(r.length-1)&&(r=r.substr(0,r.length-1)),f.I.DWT.ResourcesPath=r),n=!0,o=[],s=[[f.I.managerEnv.resourcesPath=r,"/src/dynamsoft.webtwain.css",l].join("")],a=function a(){f.D.detect.cssLoaded=!0},f.D.product.bHTML5Edition&&f.I.DWT.UseDefaultViewer&&s.push([r,"/src/dynamsoft.viewer.css",l].join("")),c.bSafari?(f.D.getAllCss(s,a),a()):f.D.getAllCss(s,a),c.bSafari&&(n=!1),o.push([r,"/dynamsoft.webtwain.install.js",l].join("")),f.I.DWT.bNpm&&(o=[]),f.D.product.bHTML5Edition&&f.I.DWT.UseDefaultViewer&&o.push([r,"/src/dynamsoft.viewer.js",l].join("")),s=!1,!(s=f.I.navInfoSync.bIE?f.I.navInfoSync.strBrowserVersion<=7:s)&&f.D.License.isLTS()&&o.push([r,"/src/dynamsoft.lts.js",l].join("")),0<o.length&&f.D.showLoadingMsg(-1,"",f.I.MSG.Init_LoadingViewerJs),f.D.getScripts(o,n,function(e){if(!e)return f.D.log("error: load js failed."),void(f.D.product.loadingResourcePath=!1);if(f.D.showLoadingMsg(-1,"",f.I.MSG.Init_AllJsLoaded),f.D.detect.scriptLoaded=!0,f.D.isString(f.I.DWT.Host)&&(f.I.dcp.host=f.I.DWT.Host,f.D.product.host=f.I.DWT.Host),f.D.product.bHTML5Edition?f.D.closeAll=f.D.html5.closeAll:f.D.product.bActiveXEdition&&(f.D.closeAll=f.D.ie.closeAll),f.D.isUndefined(f.I.DWT.UseLocalService)&&(f.D.env.bMobile?f.I.DWT.UseLocalService=!1:f.I.DWT.UseLocalService=!0),f.I.DWT._srcUseLocalService=f.I.DWT.UseLocalService,f.D.isArray(f.I.aryAddonReadyFun)){for(var t=0;t<f.I.aryAddonReadyFun.length;t++){var r=f.I.aryAddonReadyFun[t];if(f.D.isFunction(r))try{r(f.D)}catch(n){f.D.log(n.stack||n,"error"),h()(function(){throw n},0)}}f.I.aryAddonReadyFun=[]}f.D.product.loadResourcePath=!0,f.D.product.loadingResourcePath=!1,i||(f.I.Lib.detect.bAutoLoadDone=!0)})))}var i=[];function J(){if(f.D.isArray(f.I.DWT.Containers)){for(var e=i.length,t=0;t<e;t++)i[t]();g()(i).call(i,0)}else h()(J,60)}function X(){return new f.D.Promise(function(e){i.push(e),f.D.domReady(function(){h()(J,60)})})}f.D.domReady(function(){X().then(function(){0<f.I.DWT.Containers.length&&f.I.DWT.AutoLoad&&(_(!0),f.D.showLoadingMsg(-1,"",f.I.MSG.Init_FireBeforeInitEvt),f.I.DWT.OnWebTwainWillInit&&f.I.DWT.OnWebTwainWillInit(),h()(f.I.DWT._innerLoad,10))}),c.bIE&&n.addEventListener&&n.addEventListener("unload",f.I.DWT.Unload,!1),n&&(f.D.addEventListener(n,"focus",function(){var e=f.I.DWT.ContainerMap;e&&f.D.each(e,function(e,t){e&&e._OnPageFocus&&e._OnPageFocus()})}),f.D.addEventListener(n,"blur",function(){var e;f.I.navInfoSync.bWin&&(e=f.I.DWT.ContainerMap)&&f.D.each(e,function(e,t){e&&e._OnPageBlur&&e._OnPageBlur()})}),f.D.addEventListener(Z,"visibilitychange",function(){var e;f.I.navInfoSync.bWin&&"hidden"==Z.visibilityState&&(e=f.I.DWT.ContainerMap)&&f.D.each(e,function(e,t){e&&e._OnPageBlur&&e._OnPageBlur()})}))}),window.onbeforeunload=function(){f.I.DWT.Unload(),f.D.each(f.I.DWT.globalWS,function(e){try{e.close()}catch(t){}})};var p=f.I.navInfoSync,I=f.I.dcp,D=f.D.win,v=0,Y=2,b=f.I.Lib.timestamp,y=function y(e,t,r,n){f.D.isFunction(e)&&h()(function(){e(t,r,n)},10)},T={bConnected:!1,_dwtVersionInfoSuccessCallback:function(e,t,r,n){var i,o,a,s;f.D.isFunction(n)&&(i=r[0],s=1<r.length?r[1]:"",o=2<r.length?r[2]:0,a=3<r.length?r[3]:"",r=4<r.length?r[4]:"",""!==s?(f.I.DWT.OnWebTwainInitMessage&&f.I.DWT.OnWebTwainInitMessage(s,f.I.DWT.EnumDWT_InitMsg.Error),y(n,Y,f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)):(f.I.DWT.OnWebTwainInitMessage&&f.I.DWT.OnWebTwainInitMessage("The WebTwain version is: "+i,f.I.DWT.EnumDWT_InitMsg.Info),"64"==o&&(f.I.dcp.b64bit=!0),""!=a&&f.I.DWT.lsmid(a),T.bConnected=!0,n(v,e,t,i)),f.D.isFunction(f.I.OnSSLCertInfo)&&(s=null,""!=r&&(s=Date.parse(r+"T00:00:00"),s=isNaN(s)?null:new Date(s)),f.I.OnSSLCertInfo(s)))},versionInfo:function(r,n,i){var o,e,t=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',f.D.product.getDWTPrefix(),f.D.product.getServerVersionInfo(),'","parameter":[]}'].join(""),a=function a(){T.bConnected=!1,f.I.DWT.OnWebTwainInitMessage&&f.I.DWT.OnWebTwainInitMessage(f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED,f.I.DWT.EnumDWT_InitMsg.NotInstalledError),i&&y(i,Y,f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)};f.I.DWT.OnWebTwainInitMessage&&(e=f.I.DWT.CustomizableDisplayInfo.generalMessages.checkingDWTVersion,f.I.DWT.OnWebTwainInitMessage(e,f.I.DWT.EnumDWT_InitMsg.Info)),o=function o(e){var t=I._getJSON(e);t&&"result"in t&&(t=t.result,f.D.isArray(t)&&0<t.length)?h()(function(){T._dwtVersionInfoSuccessCallback(r,n,t,i)},0):h()(a,1e3)},f.I.DWT.ConnectWithSocket&&f.I.navInfoSync.bHTML5Edition?I.postStringDataByWS(I.getWsUrl(r,n),t,o,a):f.D.ajax({method:"POST",url:[T._getPreUrl(r,n),"fa/VersionInfo?ts=",f.D.now()].join(""),data:t,onSuccess:o,onError:a})},_getPreUrl:function(e,t){return[f.I.navInfoSync.bSSL?"https://":"http://",e,":",t,"/"].join("")}};function K(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":(0,B.Z)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(t){}}function a(e,t,r,n,i,o){var a,s,u,c,l,d,h=f.D.product,g=f.I.navInfo;g.bMac?(e&&(f.D.one(e).before(f.D.install._strNonInstallDIV),(a=f.D.get(f.D.install._divDWTNonInstallContainerID))&&(a.style.width=t,a.style.height=r),f.D.show(f.D.install._divDWTNonInstallContainerID),f.D.hide(e)),""!=f.D.install._divDWTemessageContainer&&f.D.hide(f.D.install._divDWTemessageContainer),s=h.bHTML5Edition?f.I.dcp.getDSPath():f.D.product.getPKGPath(),i?f.D.isFunction(f.I.OnWebTwainNeedUpgradeCallback)&&f.I.OnWebTwainNeedUpgradeCallback(h.name,{default:s},h.bHTML5Edition,f.I.DWT.EnumDWT_PlatformType.enumMac,g.bIE,g.bSafari,f.D.detect.ssl,f.D.env.strIEVersion):f.D.isFunction(f.I.OnWebTwainNotFoundOnMacCallback)&&f.I.OnWebTwainNotFoundOnMacCallback(h.name,s,h.bHTML5Edition,g.bIE,g.bSafari,f.D.detect.ssl,f.D.env.strIEVersion,o)):g.bLinux||g.bArm64||g.bMips64||g.bChromeOS||g.bHarmonyOS?(e&&(f.D.one(e).before(f.D.install._strNonInstallDIV),(a=f.D.get(f.D.install._divDWTNonInstallContainerID))&&(a.style.width=t,a.style.height=r),f.D.show(f.D.install._divDWTNonInstallContainerID),f.D.hide(e)),""!=f.D.install._divDWTemessageContainer&&f.D.hide(f.D.install._divDWTemessageContainer),l=g.bArm64||g.bMips64||g.bChromeOS||g.bHarmonyOS?(u=f.I.dcp.getDSPath(),g.bChromeOS?f.I.DWT.EnumDWT_PlatformType.enumChromeOS:g.bHarmonyOS?f.I.DWT.EnumDWT_PlatformType.enumHarmonyOS:f.I.DWT.EnumDWT_PlatformType.enumEmbed):(u=f.I.dcp.getLinuxHTML5DebPath(),c=f.I.dcp.getLinuxHTML5RpmPath(),f.I.DWT.EnumDWT_PlatformType.enumLinux),i?f.D.isFunction(f.I.OnWebTwainNeedUpgradeCallback)&&(d={default:u},g.bLinux&&(d.deb=u,d.rpm=c),f.I.OnWebTwainNeedUpgradeCallback(h.name,d,h.bHTML5Edition,l,g.bIE,g.bSafari,f.D.detect.ssl,f.D.env.strIEVersion)):f.D.isFunction(f.I.OnWebTwainNotFoundOnLinuxCallback)&&f.I.OnWebTwainNotFoundOnLinuxCallback(h.name,u,c,h.bHTML5Edition,g.bIE,g.bSafari,f.D.detect.ssl,f.D.env.strIEVersion,l,o)):(g.bChrome||g.bSafari||g.bFirefox||g.bOpera||0==f.I.DWT.IfUseActiveXForIE10Plus||!f.I.DWT.ActiveXInstallWithCAB&&g.bIE)&&(e&&(f.D.one(e).before(f.D.install._strNonInstallDIV),(a=f.D.get(f.D.install._divDWTNonInstallContainerID))&&(a.style.width=t,a.style.height=r),f.D.show(f.D.install._divDWTNonInstallContainerID),f.D.hide(e)),""!=f.D.install._divDWTemessageContainer&&f.D.hide(f.D.install._divDWTemessageContainer),s="",s=g.bIE||h.bHTML5Edition?f.I.dcp.getDSPath():h.getMSIPath(),i?f.D.isFunction(f.I.OnWebTwainNeedUpgradeCallback)&&f.I.OnWebTwainNeedUpgradeCallback(h.name,{default:s},h.bHTML5Edition,f.I.DWT.EnumDWT_PlatformType.enumWindow,g.bIE,g.bSafari,f.D.detect.ssl,f.D.env.strIEVersion):f.D.isFunction(f.I.OnWebTwainNotFoundOnWindowsCallback)&&f.I.OnWebTwainNotFoundOnWindowsCallback(h.name,s,h.bHTML5Edition,g.bIE,g.bSafari,f.D.detect.ssl,f.D.env.strIEVersion,o))}f.D.replaceControl=function(e,t){f.I.DWT.ContainerMap[e]=t},f.D.detect.onNoControl=function(e,t,r,n){var i;n&&n._customIP&&!f.D.isLocalIP(n._host)?f.D.isFunction(f.I.OnRemoteWebTwainNotFoundCallback)&&(i=n._port,f.I.OnRemoteWebTwainNotFoundCallback(f.D.product.name,n._host,i,n._ssl,f.D.env.bMobile)):f.I.DWT.CheckWebTwainBySocket(function(){f.I.DWT.NeedCheckWebTwainBySocket()?f.D.isFunction(f.I.OnHTTPCorsError)&&f.I.OnHTTPCorsError():a(e,t,r,0,!1,!0)},function(){a(e,t,r,0,!0,!0)},function(){a(e,t,r,0,!1,!1)})},f.D.detect.getVersionArray=function(e){e=e.toLowerCase().replace(f.D.product.name.toLowerCase()+" ","");return(e=O()(f.D).call(f.D,e,"[.]",",")).split(",")},f.D.detect.isDWTVersionLatest=function(e){if(f.D.isUndefined(e))return!1;for(var e=e.toString().toLowerCase(),t=f.D.detect.getVersionArray(e),e=f.I.navInfoSync.bIE&&f.D.product.bActiveXEdition?f.I.DWT.ActiveXVersion:f.D.product.getServerVersionInfo(!0),r=(e=O()(f.D).call(f.D,String(e),"[.]",",")).split(","),n=(t.length>r.length?t:r).length,i=0;i<n;i++){if(null==t[i]&&(t[i]=0),null==r[i]&&(r[i]=0),o()(t[i])<o()(r[i]))return!1;if(o()(t[i])>o()(r[i]))return!0}return!0};var S,Q=function Q(e,t){var r,n,i,o,a=f.I.navInfo;f.D.isFunction(f.I.OnWebTwainNeedUpgradeCallback)&&(r={},i=a.bWin?(n=a.bIE||(n=f.D.product).bHTML5Edition?f.I.dcp.getDSPath():n.getMSIPath(),f.I.DWT.EnumDWT_PlatformType.enumWindow):a.bArm64||a.bMips64||a.bChromeOS||a.bHarmonyOS?(n=i=f.I.dcp.getDSPath(),r.deb=i,a.bChromeOS?f.I.DWT.EnumDWT_PlatformType.enumChromeOS:a.bHarmonyOS?f.I.DWT.EnumDWT_PlatformType.enumHarmonyOS:f.I.DWT.EnumDWT_PlatformType.enumEmbed):a.bLinux?(i=f.I.dcp.getLinuxHTML5DebPath(),o=f.I.dcp.getLinuxHTML5RpmPath(),n=i,r.deb=i,r.rpm=o,f.I.DWT.EnumDWT_PlatformType.enumLinux):(n=f.D.product.bHTML5Edition?f.I.dcp.getDSPath():f.D.product.getPKGPath(),f.I.DWT.EnumDWT_PlatformType.enumMac),r.default=n,(o=f.D.one(".dynamsoft-dialog-license"))&&o.getEL()&&(o.getEL().style.display="none"),f.D.detect.needUpgrade=!0,f.I.OnWebTwainNeedUpgradeCallback(f.D.product.name,r,f.D.product.bHTML5Edition,i,a.bIE,a.bSafari,f.D.detect.ssl,f.D.env.strIEVersion,f.D.detect.bPromptJSOrServerOutdated,e,t))},w=function w(e){var t,r;f.D.detect.bNeedUpgradeEvent||f.D.detect.isDWTVersionLatest(e.VersionInfo)||(f.D.detect.bNeedUpgradeEvent=!0,f.D.isFunction(f.I.DWT.OnWebTwainNeedUpgrade)&&f.I.DWT.OnWebTwainNeedUpgrade()||(e&&e._customIP&&!f.D.isLocalIP(e._host)?f.D.isFunction(f.I.OnRemoteWebTwainNeedUpgradeCallback)&&(t=e._port,f.I.OnRemoteWebTwainNeedUpgradeCallback(f.D.product.name,e._host,t,e._ssl)):(f.D.product.bHTML5Edition&&e._isBindViewer()||!f.D.product.bHTML5Edition)&&(f.D.product.bHTML5Edition?(r=e._containerElement,f.D.isString(r)&&(r=f.D.get(r))):r=f.D.get(e._containerID),r&&(f.D.one(r).before(f.D.install._strNonInstallDIV),f.D.show(f.D.install._divDWTNonInstallContainerID),f.D.hide(r)),""!=f.D.install._divDWTemessageContainer&&f.D.hide(f.D.install._divDWTemessageContainer),Q())))},q=function q(e){e=e||{};e.basePath&&(f.D.env.basePath=e.basePath),e.pathType&&(f.D.env.pathType=e.pathType),f.D.isUndefined(e.bDiscardBlankImage)||(f.D.config.bDiscardBlankImage=e.bDiscardBlankImage),e.msgPrefix&&(f.D.config.msgPrefix=e.msgPrefix),e.msgSuffix&&(f.D.config.msgSuffix=e.msgSuffix),e.detectType&&(f.D.detect.detectType=e.detectType),e.tryTimes&&(f.D.detect.tryTimes=e.tryTimes),e.onReady&&(f.I.DWT.OnWebTwainReady=e.onReady)},C=function C(e){return!(""==e||!f.D.isString(e)&&!f.D.isNumber(e))},E=function E(e){return!(!e||f.D.isString(e))},M=function M(e){var t,r,n,i,o,a=f.I.DWT.Containers,s=f.I.navInfo,u=f.D.Promise.resolve(0),c=f.I.DWT.licenseException;if(0<a.length){if(0==c.code?D.DCP_DWT_OnClickCloseInstall(!1,!0):console&&console.error,f.D.isUndefined(e)){for(r=0;r<a.length;r++)if(f.D.product.bHTML5Edition){if(n=a[r].WebTwainId,C(n)&&(o=f.I.DWT.ContainerMap[n]))break}else if(a[r].Container?i=a[r].Container:a[r].ContainerId&&(i=f.D.get(a[r].ContainerId)),E(i)&&i.id){if(o=f.I.DWT.ContainerMap[i.id])break;if(n=a[r].WebTwainId,o=f.I.DWT.ContainerMap[n])break}}else o=e;o&&(f.D.product.bHTML5Edition?o._bLocalService&&(u=o._innerFunRawV2("LogLevel").then(function(){w(o)},function(){-2207==o.ErrorCode&&(f.D.isFunction(f.I.DWT.OnWebTwainNeedUpgradeWebJavascript)?f.I.DWT.OnWebTwainNeedUpgradeWebJavascript(o.ErrorString):f.D.detect.bPromptJSOrServerOutdated||(f.D.detect.bPromptJSOrServerOutdated=!0)),w(o)})):w(o))}var l=[],d=!1;for(f.D.License.isLTS()&&f.D.isNumber(c.code)&&0!==c.code&&!0===c.fromLTS&&(d=!0),r=0;r<a.length;r++)f.D.product.bHTML5Edition?n=a[r].WebTwainId:(n=a[r].ContainerId,(t=f.I.DWT.ContainerMap[n])||(n=a[r].WebTwainId)),(t=f.I.DWT.ContainerMap[n])&&(d?f.D.product.bHTML5Edition?f.D.hide(t._containerElement):f.D.hide(t._containerID):f.D.product.bHTML5Edition?(t._isBindViewer()&&(t.Width<=0||t.Height<=0)&&(t.Width<=0&&(t.Width=270),t.Height<=0&&(t.Height=350)),t._bLocalService?l.push(S(t)):f.D.License.checkProductKey(t,{Core:!0})):(t.IfAllowLocalCache=!0,t.IfShowFileDialog=!0,t.IfDisableSourceAfterAcquire=!0,t.BrokerProcessType=f.D.product._iBrokerProcessType,0!=r||f.D.License.checkProductKey(t,{Core:!0})||f.D.License.checkProductKey(t,{Webcam:!0},!0)||f.D.License.checkProductKey(t,{Core:!0},!1,!0),s.bWin||(t.ImageCaptureDriverType=f.D.product._iImageCaptureDriverType))),t=null;0<l.length&&(u=u.then(function(){return f.I.Lib.Promise.all(l)}));var a=null,e=f.I.initOrder;"dwt"==e[0]&&g()(e).call(e,0,1),d?(f.I.DWT.ContainerMap={},g()(c=f.D.detect.arySTwains).call(c,0),g()(e=f.D.detect.arySTwainsByIP).call(e,0)):u.then(function(){f.I.Lib.detect.bAutoLoadDone=!0,f.D.isFunction(f.I.DWT.OnWebTwainReady)?f.I.DWT.OnWebTwainReady():f.D.isFunction(D.Dynamsoft_OnReady)&&D.Dynamsoft_OnReady()},function(e){console&&console.error})},$=function $(e){var t;return e.Container?t=e.Container.id:e.ContainerId&&(t=e.ContainerId),!!E(f.D.get(t))&&!(f.D.isString(e.WebTwainId)?f.I.DWT.ContainerMap[e.WebTwainId]:f.I.DWT.ContainerMap[t])},P=function P(){f.D.detect.StartWSTimeoutId||0!=f.D.detect.arySTwains.length||(f.D.detect.StartWSTimeoutId=h()(function(){f.D.detect.StartWSTimeoutId=!1,f.D.startWS()},100))},ee=function ee(){f.D.detect.StartWSByIPTimeoutId||0!=f.D.detect.arySTwainsByIP.length||(f.D.detect.StartWSByIPTimeoutId=h()(function(){f.D.detect.StartWSByIPTimeoutId=!1,f.D.startWSByIP()},100))};function te(){var e,t,r,n,i,o,a,s=[f.I.DWT.Containers,f.I.DWT.DynamicContainers];for(f.I.DWT.lunload(),f.D.closeAll&&f.D.closeAll(),a=f.I.DWT.ContainerMap,r=0;r<2;r++)if(t=s[r])if(f.D.product.bHTML5Edition)for(n=0;n<t.length;n++)(o=t[n].WebTwainId)&&o in a&&(i=a[o])&&(i.__unload(),delete a[o]);else for(n=t.length-1;0<=n;n--)t[n].Container?o=(i=t[n].Container).id:(o=t[n].ContainerId)&&(i=f.D.get(o)),i&&(o in a&&a[o]&&delete a[o],i.innerHTML="");for(f.D.page.bUnload=!0,f.D.page.OnUnload&&f.D.page.OnUnload(),g()(e=f.I.DWT.initQueue).call(e,0),n=0;n<f.I.unloadQueue.length;n++){var u=f.I.unloadQueue[n];f.D.isFunction(u)&&u()}return g()(e=f.I.unloadQueue).call(e,0),g()(e=f.I.DWT.DynamicContainers).call(e,0),g()(e=f.D.detect.arySTwains).call(e,0),g()(e=f.D.detect.arySTwainsByIP).call(e,0),f.D.MobileFuns?f.D.MobileFuns.unloadWasm():f.D.Promise.resolve()}f.D.detect.__WebTwainMain=function(e,t,r){var n,i,o,a,s,u,c={id:e.WebTwainId,width:e.Width,height:e.Height};if(e.Container?(c.container=e.Container,c.containerID=e.Container.id):e.ContainerId&&(c.container=f.D.get(e.ContainerId),c.containerID=e.ContainerId),C(c.id)||(E(f.D.get(c.containerID))?c.id=c.containerID:c.id=c.containerID="dwtcontrolContainer"),q(c),f.D.product.bHTML5Edition){for(f.D.mix(c,e.bLocalService?{port:e.port,HTTPPort:f.D.detect.ssl?443:80,bLocalService:!0}:{bLocalService:!1}),c.onReady=function(e){f.D.replaceControl(c.id,e),f.D.isFunction(t)&&(e={stwain:e},r&&f.D.mix(e,r),t(e))},n=0;n<f.D.detect.arySTwains.length;n++)i=f.D.detect.arySTwains[n],c.id==i._id&&(c.id=c.id+"_"+f.D.getRandom()),!i._containerElement||c.container!=i._containerElement&&c.containerID!=i._containerElement.id||(c.containerID="");return E(f.D.get(c.containerID))?c.bNoViewer=!1:c.bNoViewer=!0,e=new f.D.html5.STwain(c),f.D.detect.arySTwains.push(e),f.D.detect.bFirst&&f.D._init(c),f.D.detect.bFirst=!1,e}for(c.onPluginReady=function(){f.D.replaceControl(c.id,o.getInstance())},c.onPluginNotReady=function(){f.D.isFunction(D.Dynamsoft_OnNotReady)&&D.Dynamsoft_OnNotReady()},o=new f.D.ie.DynamicWebTwain(c),s=0,a=(u=f.I.DWT.Containers).length-1;0<=a;a--){var l=u[a];l.Container?E(l.Container)&&s++:l.ContainerId&&E(f.D.get(l.ContainerId))&&s++}return f.D.detect.arySTwains.length==s&&(f.D.detect._varSeed=R()(f.D.detect._controlDetect,200)),o},f.I.DWT.Unload=function(){te();try{f.D.closeLoadingMsg(),f.I.DWT.CloseDialog(),f.D._zdgb_xkz_dhk(),f.D.closeProgress(null,""),f.D.hideMask()}catch(e){}};var W,s=function s(){for(var e=f.I.DWT.Containers,t=0;t<e.length;t++){var r=void 0;if(E(f.D.get(e[t].ContainerId))&&(r=e[t].ContainerId,C(e[t].WebTwainId)&&(r=e[t].WebTwainId)),r)if(!f.I.DWT.ContainerMap[r])return void h()(s,200)}f.D.closeLoadingMsg(),e=null,M()},re=function re(e){if(e&&"readyObj"in e){var t,r,n=e.readyObj;if(n)return t=e.stwain,r=n.totalCount,n.readyCount=n.readyCount+1,void(n.readyCount>=r&&M(t))}M(e)},x=function x(e){var t;g()(t=f.D.detect.urls).call(t,0),f.D.detect.urls.push({port:e,ssl:p.bSSL}),f.D.detect.ports=[{port:e,ssl:p.bSSL}],f.D.detect.cUrlIndex=0,p.bSSL?f.I.DWT.SSLPort=e:f.I.DWT.Port=e},ne=function ne(e,t,r){var n,i=f.I.DWT.Containers;if(f.D.config.usingMainMode)f.D.closeLoadingMsg();else{if(!i||0===i.length)return f.D.closeLoadingMsg(),void f.D.log("Dynamsoft.DWT.Containers was not set.");f.D.isString(e)&&""!=e&&(f.D.product.host=e),I.bEnhancedMode&&x(t),P();for(var o={totalCount:i.length,readyCount:0},a=0;a<i.length;a++)n=i[a],E(f.D.get(n.ContainerId))||(n.bNoViewer=!0),r?(n.bLocalService=!1,n.ip="",n.port=0):(n.bLocalService=!0,I.bEnhancedMode&&(n.port=t)),f.D.detect.__WebTwainMain(n,re,{readyObj:o})}},ie=function ie(){if(f.D.config.usingMainMode)f.D.closeLoadingMsg();else{var e,t=f.I.DWT.Containers;if(!1===t||0===t.length)return f.D.log("Dynamsoft.DWT.Containers was not set."),void f.D.closeLoadingMsg();for(e=0;e<t.length;e++){var r=t[e];$(r)&&f.D.detect.__WebTwainMain(r)}h()(s,100)}},oe=function oe(e){var t=e.bNoViewer,r=e.id,n=e.container,i=e.containerID,o=e.host,a=e.port,o=!!(o&&a&&0<a)&&{host:o,port:a},s=e.asyncSuccessFunc,u=e.asyncFailureFunc;if(e.bNoViewer||f.D.isString(i)&&""!=i&&(n||f.D.get(i))){if(f.I.DWT.Containers&&!t)for(var c=f.I.DWT.Containers,l=0;l<c.length;l++)if(c[l].ContainerId==i)return f.D.closeLoadingMsg(),f.D.isFunction(u)&&f.D._safePromptCustomMsg(function(){u(f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers)}),!1;n=n||f.D.get(i)}else t=!0,i=0;if(f.I.DWT.ContainerMap[r])return f.D.closeLoadingMsg(),f.D.isFunction(u)&&u(f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),!1;if(!e.bLocalService&&!f.I.WasmEnv)return f.D.closeLoadingMsg(),f.D._safePromptCustomMsg(function(){u(f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WasmEnvNotLoaded)}),!1;(o?ee:P)();a={id:r,container:n,customIP:!1,width:t?0:300,height:t?0:300,bNoViewer:t,bLocalService:e.bLocalService};return t||(n.style.width&&(a.width=n.style.width),n.style.height&&(a.height=n.style.height)),o&&(a.customIP=!0,a.host=o.host,a.port=o.port),a.onReady=function(e){if(D.DCP_DWT_OnClickCloseInstall(!1,!0),!e)return f.D.closeLoadingMsg(),f.D.isFunction(u)&&u(f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer),!1;if(f.I.DWT.ContainerMap[e._id])return f.D.closeLoadingMsg(),e.dispose(),f.D.isFunction(u)&&u(f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),!1;f.D.showLoadingMsg(-1,"",f.I.MSG.Init_ConfiguringDWT);var t={};return t.WebTwainId=e._id,e._containerElement&&e._containerElement.id&&(t.ContainerId=e._containerElement.id),f.I.DWT.DynamicContainers.push(t),f.I.DWT.ContainerMap[e._id]=e,!f.I.DWT.IfDisableDefaultSettings&&e._bLocalService?S(e).then(function(){f.D.closeLoadingMsg(),f.D.isFunction(s)&&s(e),w(e)},function(){f.D.closeLoadingMsg(),-2207!=e.ErrorCode||f.D.detect.bPromptJSOrServerOutdated||(f.D.detect.bPromptJSOrServerOutdated=!0),w(e)}):(f.D.closeLoadingMsg(),f.D.isFunction(s)&&s(e)),!0},new f.D.html5.CreateDWTObject(a)},k=!(S=function S(i){return f.D.showLoadingMsg(-1,"",f.I.MSG.Init_ConfiguringDWT),i._innerFunV2("IfDisableSourceAfterAcquire","[1]").then(function(){var e=f.I.navInfo,t=f.I.DWT.EnumDWT_Driver.TWAIN,r=!1,n=!1;i._bRemoteMode?i.__serverPlatform!=f.I.DWT.EnumDWT_PlatformType.enumWindow&&(i.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumLinux?n=!0:i.__serverPlatform==f.I.DWT.EnumDWT_PlatformType.enumMac&&(r=!0)):(r=e.bMac,n=e.bLinux,e.bWin),r?t=f.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA:n&&(t=f.I.DWT.EnumDWT_Driver.SANE),i._driverType=t}).then(function(){(f.D.License.checkProductKey(i,{Core:!0})||f.D.License.checkProductKey(i,{Webcam:!0}))&&(f.I.DWT.lclex(),f.D.Errors.ClearErrorInfo(i))})}),ae=function ae(e,t){e=e.split(","),t=t.split(",");return 3<e.length&&r()(f.D).call(f.D,e[0])==t[0]&&(r()(f.D).call(f.D,e[1])>t[1]||r()(f.D).call(f.D,e[1])==t[1]&&r()(f.D).call(f.D,e[2])>t[2]||r()(f.D).call(f.D,e[1])==t[1]&&r()(f.D).call(f.D,e[2])==t[2]&&o()(r()(f.D).call(f.D,e[3]))>=o()(t[3]))};function se(){f.I.DWT.ShowMessage(f.I.MSG.Err_BrowserNotSupportWasm,{width:510,headerStyle:2})}function ue(e,t,r){if(!f.D.product.bHTML5Edition)return f.D._safePromptCustomMsg(function(){r&&r(f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)}),!1;if(!1===e.UseLocalService&&!K())return f.D.closeLoadingMsg(),se(),r&&r(f.I.MSG.Err_BrowserNotSupportWasm),!1;W();var n,i,o={},a=e.WebTwainId,s=e.Host,u=e.Port,c=e.PortSSL;if(!f.I.DWT._srcUseLocalService&&e.UseLocalService&&(f.D.detect.dcpStatus=0,f.I.DWT._srcUseLocalService=!0),e.Container?(o.container=e.Container,o.bNoViewer=!1,null!=(n=o.container.id)&&""!==n||(o.container.id=["dwt_",f.D.getRandom()].join("")),o.containerID=o.container.id,null!=a&&""!==a||(o.id=o.container.id)):null==a||""===a?(o.id=["dwt_",f.D.getRandom()].join(""),o.bNoViewer=!0):f.D.get(a)?(o.id=a,o.containerID=a,o.bNoViewer=!1):(o.id=a,o.bNoViewer=!0),o.UseLocalService=e.UseLocalService,0==o.UseLocalService?(f.D.detect.bNeedWasm=!0,o.host="",o.port=0):(f.D.isString(s)&&""!=s||(s=f.I.dcp.host),o.host=s,p.bSSL?(c=c||f.I.DWT.SSLPort,o.port=c):(u=u||f.I.DWT.Port,o.port=u)),t&&(o.asyncSuccessFunc=t),r&&(o.asyncFailureFunc=r),f.D.detect.wasmScriptLoaded&&f.I.WasmEnv&&!f.I.WasmEnv.wasmLoad)if(d(),f.D.License.isLTS())i=f.I.DWT.lglic(f.I.DWT.EnumInstance.dwt_browser).then(function(e){try{f.I.WasmEnv.load(e.ar,!0,e.cu),f.I.WasmEnv.wasmLoad=!0}catch(t){}},function(e){e&&(f.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),f.D.closeLoadingMsg(),f.I.DWT.OnLicenseException())});else{try{f.I.WasmEnv.load(f.I.DWT.ProductKey),f.I.WasmEnv.wasmLoad=!0}catch(l){}i=U().resolve()}else i=U().resolve();return i.then(m).then(function(){N({callback:function(){o.bLocalService=!0,oe(o)},docViewCallback:function(){o.bLocalService=!1,oe(o)},host:o.host,port:o.port,UseLocalService:o.UseLocalService,dcpFailedCallback:function(e){o.asyncFailureFunc&&o.asyncFailureFunc(e),f.D.closeLoadingMsg()}})},function(){f.D.closeLoadingMsg()}),!0}f.I.DWT.Load=function(){k||(k=!0,f.D.openLoadingMsg(),f.I.Lib.detect.bAutoLoadDone?(_(),m().then(te).then(function(){if(f.I.DWT.CloseDialog(),f.I.Lib.detect.bNeedWasm=!1,f.I.Lib.detect.wasmScriptLoaded&&f.I.WasmEnv&&!f.I.WasmEnv.wasmLoad){if(f.I.Lib.License.isLTS())return void f.I.DWT.lglic(f.I.DWT.EnumInstance.dwt_browser).then(function(e){try{f.I.WasmEnv.load(e.ar,!0,e.cu),f.I.WasmEnv.wasmLoad=!0}catch(t){}y(f.I.DWT._innerLoad)},function(e){e&&(f.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),f.I.Lib.closeLoadingMsg(),f.I.DWT.OnLicenseException())});try{f.I.WasmEnv.load(f.I.DWT.ProductKey),f.I.WasmEnv.wasmLoad=!0}catch(e){}}y(f.I.DWT._innerLoad)},function(){f.D.closeLoadingMsg()})):f.I.Lib.product.bActiveXEdition||f.I.navInfoSync.bIE&&10==f.I.navInfoSync.strBrowserVersion?(_(),k=!1,f.I.Lib.detect.bAutoLoadDone=!0,h()(f.I.DWT.Load,100)):X().then(function(){_(),k=!1,f.I.Lib.detect.bAutoLoadDone=!0,h()(f.I.DWT.Load,100)}))},f.I.DWT.CheckConnectToTheService=function(e,t,r,n){if(f.D.detect.scriptLoaded)if(f.D.product.bHTML5Edition){var i=0,o=e,a=t,s=r,u=n;if(f.D.isFunction(o)&&f.D.isFunction(a)&&(s=o,u=a,a=o=null),o=o||f.I.dcp.host,!a)for(i=0;i<f.I.Lib.detect.ports.length;i++)if(f.I.navInfoSync.bSSL&&f.I.Lib.detect.ports[i].ssl||!f.I.navInfoSync.bSSL&&!f.I.Lib.detect.ports[i].ssl){a=f.I.Lib.detect.ports[i].port;break}T.versionInfo(o,a,function(e,t,r,n){if(e===v&&n&&0<n.length&&ae(n,f.D.product.getServerVersionInfo(!0)))return f.I.DWT.CloseDialog(),void(f.D.isFunction(s)&&s(t,r));f.D.isFunction(u)&&u()},u)}else f.D.isFunction(n)&&n();else h()(function(){f.I.DWT.CheckConnectToTheService(e,t,r,n)},500)},f.I.DWT.ConnectToTheService=f.I.DWT.Load,f.I.DWT.CreateDWTObject=function(t,r,n,i,o,a){var e,s=o,u=a;if(f.D.openLoadingMsg(),f.I.Lib.detect.bAutoLoadDone){if(_(),e=f.D.isFunction(r)&&f.D.isFunction(n)&&f.D.isUndefined(i)&&f.D.isUndefined(o)&&f.D.isUndefined(a)?(s=r,u=n,{WebTwainId:t}):{WebTwainId:t,Host:r,Port:n,PortSSL:i},!f.D.product.bHTML5Edition)return f.D.isFunction(u)&&f.D._safePromptCustomMsg(function(){u(f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)}),!1;var c=t;if(f.D.isShadowRoot(c)&&(d=document.createElement("div"),c.appendChild(d),c=d),f.D.isDOM(c)){var l,d=f.D.getShadowRoot(c);d&&((l=document.createElement("style")).innerHTML=['@import url("',f.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",b,'")'].join(""),d.appendChild(l)),(e.Container=c).id&&""!=c.id||(c.id=["dwt_",f.D.getRandom()].join("")),e.WebTwainId=c.id}else{if(!f.D.isString(t))return f.D.isFunction(u)&&u(f.D.Errors.container_id_not_string()),!1;if(!f.D.get(t))return f.D.isFunction(u)&&u(f.D.Errors.container_id_not_exist(t)),!1}return f.D.isUndefined(e.UseLocalService)&&(f.D.isUndefined(f.I.DWT.UseLocalService)?f.D.env.bMobile?e.UseLocalService=!1:e.UseLocalService=!0:e.UseLocalService=f.I.DWT.UseLocalService),ue(e,s,u)}f.I.Lib.domReady(function(){var e=f.I.DWT.Containers;f.D.isArray(e)&&0<e.length&&f.I.DWT.AutoLoad||_(),h()(function(){f.I.DWT.CreateDWTObject(t,r,n,i,o,a)},100)})},f.I.DWT.CreateDWTObjectEx=function(t,r,n){var e=t.Container;if(f.D.openLoadingMsg(),f.I.Lib.detect.bAutoLoadDone){if(_(),f.D.isShadowRoot(e)&&(o=document.createElement("div"),e.appendChild(o),e=o),f.D.isDOM(e)){var i,o=f.D.getShadowRoot(e);o&&((i=document.createElement("style")).innerHTML=['@import url("',f.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",b,'")'].join(""),o.appendChild(i)),o==e&&(e=document.createElement("div"),o.appendChild(e),t.Container=e),e.id&&""!=e.id||(e.id=["dwt_",f.D.getRandom()].join("")),f.D.isString(t.WebTwainId)||(t.WebTwainId=e.id)}else if(!f.D.isString(t.WebTwainId))return n&&n(f.D.Errors.webtwain_id_not_string()),!1;return f.D.isUndefined(t.UseLocalService)&&(f.D.isUndefined(f.I.DWT.UseLocalService)?f.D.env.bMobile?t.UseLocalService=!1:t.UseLocalService=!0:t.UseLocalService=f.I.DWT.UseLocalService),ue(t,r,n)}f.I.Lib.domReady(function(){var e=f.I.DWT.Containers;f.D.isArray(e)&&0<e.length&&f.I.DWT.AutoLoad||_(),h()(function(){f.I.DWT.CreateDWTObjectEx(t,r,n)},100)})},W=function W(){var e=f.I.initOrder,t=!1;if(e){for(var r=0;r<e.length;r++)if("dwt"==e[r]){t=!0;break}t||e.push("dwt")}};var ce=function ce(e,t){f.D.isLocalIP(e)&&(f.D.LS.item("DWT_port",t),f.D.LS.item("DWT_ssl",p.bSSL?"true":"false"))},le=function le(e){var t="",r="",n=f.I.navInfo,i=n.bMac?"mac/MacDWT_":n.bLinux?"linux/LinuxDWT_":"win/WinDWT_";return p.bFileSystem||(t="?t="+f.D.getRandom()),0<e.length&&"/"!=e[e.length-1]&&(e+="/"),n.bWin&&I.b64bit&&(r="_x64"),[e,"dist/",i,f.D.product.getServerVersionInfo(),r,".zip",t].join("")},F=function F(r,n,e){var t,i,o,a=le(f.I.DWT.ResourcesPath);t=function t(e){I.loadZip(e,0,function(){var e,t=f.I.navInfo;if(f.D.closeLoadingMsg(),f.D.isFunction(f.I.OnWebTWAINDllDownloadSuccessful)&&f.I.OnWebTWAINDllDownloadSuccessful(),f.I.DWT.OnWebTwainInitMessage){if(p.bSSL&&t.bFirefox)return e=f.I.DWT.CustomizableDisplayInfo.generalMessages.refreshNeeded,void f.I.DWT.OnWebTwainInitMessage(e,f.I.DWT.EnumDWT_InitMsg.DownloadNotRestartError);e=f.I.DWT.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded,f.I.DWT.OnWebTwainInitMessage(e,f.I.DWT.EnumDWT_InitMsg.Info)}h()(n,3e3)},i)},i=function i(e){f.D.closeLoadingMsg();var t;f.I.DWT.OnWebTwainInitMessage&&(t=f.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED,f.I.DWT.OnWebTwainInitMessage(t,f.I.DWT.EnumDWT_InitMsg.DownloadError)),f.D.isFunction(f.I.OnWebTWAINDllDownloadFailure)&&(t={},404==e.httpCode?f.D.Errors.WebTwainModuleNotExist(t):f.D.Errors.WebTwainModuleDownloadFailure(t),f.I.OnWebTWAINDllDownloadFailure(f.D.product.name,t._errorCode,t._errorString)),f.D.detect.dcpStatus=3,f.D.isFunction(r.dwtFailedCallback)&&r.dwtFailedCallback()},f.I.DWT.OnWebTwainInitMessage&&(o=f.I.DWT.CustomizableDisplayInfo.generalMessages.downloadingDWTModule,f.I.DWT.OnWebTwainInitMessage(o,f.I.DWT.EnumDWT_InitMsg.Info)),f.D.fetch(a,{mode:"cors",dataType:"arraybuffer"}).then(t,i)},L=function L(i,o,e){f.D.detect;var a,t=i.host,r=i.port;if(!1===i.UseLocalService)return f.D.showLoadingMsg(-1,"",f.I.MSG.Init_CreatingDWT),f.D.detect.dcpStatus=2,ce("",0),void y(i.docViewCallback);f.D.showLoadingMsg(-1,"",f.I.MSG.Init_CheckDWT),a=0<e?e+1:1,r||f.D.each(f.D.detect.ports,function(e){p.bSSL?e.ssl&&(r=e.port):e.ssl||(r=e.port)}),f.D.showLoadingMsg(-1,"",f.I.MSG.Init_CheckDWTVersion),T.versionInfo(t,r,function(e,t,r,n){if(e===v&&n&&0<n.length&&ae(n,f.D.product.getServerVersionInfo(!0)))return f.D.detect.dcpStatus=2,ce(t,r),f.D.showLoadingMsg(-1,"",f.I.MSG.Init_CreatingDWT),void(f.D.isFunction(i.callback)&&i.callback(t,r));o?3<a?(f.D.closeLoadingMsg(),f.D.detect.dcpStatus=3,f.D.isFunction(i.dwtFailedCallback)&&i.dwtFailedCallback({code:e,message:t})):h()(function(){L(i,!0,a)},1e3):f.I.DWT.IfInstallDWTModuleWithZIP?F(i,function(){L(i,!0,a)},function(){L(i,!1,a)}):(f.D.closeLoadingMsg(),f.D.detect.dcpStatus=3,f.D.isFunction(i.dwtFailedCallback)&&i.dwtFailedCallback({code:e,message:t}))})},N=function(s){var e=f.I.initOrder,u=!1;if(0<e.length&&"dwt"===e[0]){var r=function r(e){var t;f.I.DWT.OnWebTwainInitMessage&&(t=f.I.DWT.CustomizableDisplayInfo.generalMessages.downloadNeeded,f.I.DWT.OnWebTwainInitMessage(t,f.I.DWT.EnumDWT_InitMsg.Info)),f.D.isLocalIP(s.host)?f.D.isFunction(f.D.detect.onNoControl)&&f.D.detect.onNoControl():f.D.isFunction(f.I.OnRemoteWebTwainNotFoundCallback)&&(t=p.bSSL,f.I.OnRemoteWebTwainNotFoundCallback(f.D.product.name,s.host,s.port,t,f.D.env.bMobile)),f.D.isFunction(s.dcpFailedCallback)&&(s.dcpFailedCallback(e),f.I.DWT.ConnectToTheService=function(){N(s)})};if(!f.I.DWT.IfCheckDCP||0==s.UseLocalService)return s.dwtFailedCallback||(s.dwtFailedCallback=r),void L(s,!1,0);var c=function(e){var r,n,i,o=1,a=f.I.navInfoSync;if(f.I.navInfoSync.bWin&&3<(o=0<e?e+1:1))return c=null,f.D.closeLoadingMsg(),f.D.detect.dcpStatus=3,void(f.D.isFunction(s.dwtFailedCallback)&&s.dwtFailedCallback());if(!u)return s.dwtFailedCallback||(s.dwtFailedCallback=function(){var e,t,r=f.I.navInfoSync;f.D.closeLoadingMsg(),f.D.isFunction(f.I.OnWebTWAINModuleDownloadManually)&&(t=r.bLinux?(e=f.I.DWT.EnumDWT_PlatformType.enumLinux,{default:f.I.dcp.getLinuxHTML5DebPath(),deb:f.I.dcp.getLinuxHTML5DebPath(),rpm:f.I.dcp.getLinuxHTML5RpmPath()}):(e=r.bMac?f.I.DWT.EnumDWT_PlatformType.enumMac:f.I.DWT.EnumDWT_PlatformType.enumWindow,{default:f.I.dcp.getDSPath()}),f.I.OnWebTWAINModuleDownloadManually(t,e,r.bIE,r.bSafari,f.D.detect.ssl,f.D.env.strIEVersion))}),I.bEnhancedMode?(r=0,n=function n(){if(f.D.closeLoadingMsg(),f.I.DWT.IfInstallDWTModuleWithZIP)return F(s,function(){c(o)},function(){c(o)}),!0;f.D.detect.dcpStatus=3,f.D.isFunction(s.dwtFailedCallback)&&s.dwtFailedCallback()},I.getPorts(I.strSID,i=function(e){if(f.D.isArray(e)&&1<e.length){f.D.closeLoadingMsg();var t,e=e[1];if(e&&(I.currentUserPorts=e).dwt)return t=e.dwt.port,e=e.dwt.sslPort,0==t||0==e?f.I.dcp.bEnhancedMode?(h()(function(){I.getPorts(I.strSID,i,n)},800),!0):5<++r?(c(o),!1):(h()(function(){I.getPorts(I.strSID,i,n)},300),!0):(s.port=a.bSSL?e:t,x(s.port),L(s,!1,0),!0)}if(f.I.DWT.IfInstallDWTModuleWithZIP)return F(s,function(){c(o)},function(){c(o)}),!0;f.D.detect.dcpStatus=3,f.D.isFunction(s.dwtFailedCallback)&&s.dwtFailedCallback()},n)):(c=null,L(s,!1,0)),!0;var e=f.D.install._dlgInstall,t=500;e&&e.open||(u=!1,t=0),h()(c,t)};f.I.managerEnv.IfUpdateService=f.I.DWT.IfUpdateService,I.host=s.host,I.checkDcpV3(f.I.DWT.ProductKey,r,c)}else f.D.env.stopCheckingForService||h()(function(){N(s)},1e3)};f.I.DWT._innerLoad=function(){var e,t;if((f.D.page.bUnload=!1,f.D.License.isLTS())&&f.D.isString(f.I.DWT.ProductKey))return t=f.I.DWT.licenseException,f.D.Errors.LongKeyShortKeyMixed(e={}),t.code=e._errorCode,t.message=e._errorString,t.fromLTS=!1,f.D.closeLoadingMsg(),t=e._errorString,void f.I.DWT.ShowMessage(t,{width:510,headerStyle:2});for(var r,n,i=f.I.DWT.Containers,o=[],a=0;a<i.length;a++)if(n=i[a],f.D.product.bHTML5Edition){var s,u,c=n.Container;for(f.D.isShadowRoot(c)&&(s=document.createElement("div"),c.appendChild(s),c=s),f.D.isDOM(c)&&((s=f.D.getShadowRoot(c))&&((u=document.createElement("style")).innerHTML=['@import url("',f.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",b,'")'].join(""),s.appendChild(u)),c.id&&""!=c.id||(c.id=["dwt_",f.D.getRandom()].join("")),n.ContainerId=c.id),(f.D.isString(n.WebTwainId)||f.D.isNumber(n.WebTwainId))&&""!=n.WebTwainId||(f.D.isString(n.ContainerId)&&""!=n.ContainerId?n.WebTwainId=n.ContainerId:n.WebTwainId=["dwt_",f.D.getRandom()].join("")),r=0;r<o.length;r++)if(n.WebTwainId==o[r]){n.WebTwainId=n.WebTwainId+"_"+f.D.getRandom();break}o.push(n.WebTwainId)}else!f.D.isString(n.WebTwainId)||f.D.isString(n.ContainerId)&&""!=n.ContainerId||(n.ContainerId=n.WebTwainId);if(f.D.product.bHTML5Edition){if(f.D.IsNeedLoadWasm()){if(!K())return f.D.closeLoadingMsg(),void se();f.D.detect.bNeedWasm=!0,f.D.showLoadingMsg(-1,"",f.I.MSG.Init_InitWasm)}else f.D.showLoadingMsg(-1,"",f.I.MSG.Init_InitH5);W(),m().then(function(){var e=!0;f.D.isString(f.I.DWT.Host)&&(I.host=f.I.DWT.Host),f.D.IsNeedLoadWasm()&&(e=!1),N({callback:ne,docViewCallback:function(){ne("",0,!0)},host:I.host,UseLocalService:e}),k=!1},function(){f.D.closeLoadingMsg(),k=!1})}else f.D.showLoadingMsg(-1,"",f.I.MSG.Init_InitActiveX),ie(),k=!1},f.I.DWT.DeleteDWTObject=function(e){var t,r,n,i=f.I.DWT.ContainerMap;if(!f.D.product.bHTML5Edition)return!1;i&&e in i&&((r=i[e])&&(delete i[e],r.__unload()));for(t=0;t<f.I.DWT.DynamicContainers.length;t++)if(f.I.DWT.DynamicContainers[t].WebTwainId==e){g()(n=f.I.DWT.DynamicContainers).call(n,t,1);break}return f.D.closeLoadingMsg(),!0},f.I.DWT.GetWebTwain=function(e){var t,r,n,i=e,o=f.I.DWT.Containers;if(f.D.isString(i))i=f.D.get(i);else if(!f.D.isDOM(i)&&!i&&o&&0<o.length)for(r=0;r<o.length;r++){if(o[r].Container){i=o[r].Container;break}if(o[r].ContainerId&&E(f.D.get(o[r].ContainerId))){i=f.D.get(o[r].ContainerId);break}}var a=f.I.DWT.ContainerMap;if(i&&a&&o&&0<o.length)for(r=0;r<o.length;r++)if(n=!1,(t=o[r]).Container){if(t.Container==i&&(n=C(t.WebTwainId)?t.WebTwainId:t.Container.id)&&n in a)return a[n]}else if(t.ContainerId&&t.ContainerId==i.id&&(n=C(t.WebTwainId)?t.WebTwainId:t.ContainerId)&&n in a)return a[n];return f.I.DWT.GetWebTwainEx(e)},f.I.DWT.GetWebTwainEx=function(e){var t,r=e,n=f.I.DWT.DynamicContainers;if(f.D.isDOM(r))r=r.id;else if(!r&&n&&0<n.length)for(t=0;t<n.length;t++)if(C(n[t].WebTwainId)){r=n[t].WebTwainId;break}if(n=null,r){e=f.I.DWT.ContainerMap;if(e&&r in e)return e[r]}return null}},6045:function(e,t,r){r.r(t);var t=r(5683),o=r.n(t),t=r(7711),a=r.n(t),s=r(1695),u=s.I.navInfo,c=document;function n(e){var t,r,n,i=this,e=e||{};i._containerID=e.containerID||"dwtcontrolContainer",i._strWidth=e.width||270,i._strHeight=e.height||350,s.D.isString(i._strWidth)&&0<o()(t=i._strWidth).call(t,"%")||(i._strWidth=[a()(i._strWidth),"px"].join("")),s.D.isString(i._strHeight)&&0<o()(t=i._strHeight).call(t,"%")||(i._strHeight=[a()(i._strHeight),"px"].join("")),i._strObjectName=i._containerID+"_Obj",r=i,(n=e)&&s.I.Lib.each(["onAfterOperate","onBeforeOperate","onOperateStatus","onBitmapChanged","onGetFilePath","onImageAreaDeSelected","onImageAreaSelected","onMouseClick","onMouseDoubleClick","onMouseMove","onMouseRightClick","onPreAllTransfers","onPreTransfer","onPostLoad","onPostTransfer","onPostTransferAsync","onPreAllTransfersAsync","onPostAllTransfers","onSourceUIClose","onTopImageInTheViewChanged","onTransferCancelled","onTransferError","onInternetTransferPercentage","onInternetTransferPercentageEx","onRemoteScanStatusAsync","onKeyDown","onMouseWheel"],function(e){r["__O"+e.substring(1)]=n[e]||""}),i.__OnPluginReady=e.onPluginReady,i.__OnPluginNotReady=e.onPluginNotReady,i.__OnRefreshUI=e.onRefreshUI||"",i._objectWebTwain=null,i._strDWTInnerContainerID=i._containerID+"_CID",i._strDWTNonInstallInnerContainerID=i._containerID+"_NonInstallCID",i.Addon={},i._pdfConvertMode=3,i._pdfRealConvertMode=3,s.D.UI.DWTAxViewer&&(i.Viewer=new s.D.UI.DWTAxViewer(i))}(t=n.prototype).getSWebTwain=function(){return this._objectWebTwain},t._isMobileMode=function(){return!1},t.getInstance=function(){return!!this._objectWebTwain&&this},t._createControl=function(){var e,t=this,r=t._strWidth,n=t._strHeight;s.D.isString(r)&&(r=0<o()(r).call(r,"%")?"100%":a()(r)+2+"px"),s.D.isString(n)&&(n=0<o()(n).call(n,"%")?"100%":a()(n)+2+"px"),n=['<div id="',t._strDWTInnerContainerID,'" style="width:',r,";height:",n,'">'],u.bIE?s.I.DWT.ActiveXInstallWithCAB?n.push('<object id="',t._strObjectName,'" style="width:',t._strWidth,";height:",t._strHeight,';border:1px solid #AAAAAA"',' codebase="',u.bWin64?s.D.product.getActiveXCABx64Path():s.D.product.getActiveXCABx86Path(),"#version=",s.I.DWT.ActiveXVersion,'"',' classid="clsid:',s.D.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>"):n.push('<object id="',t._strObjectName,'" style="width:',t._strWidth,";height:",t._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',s.D.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>"):(e=t._strWidth,s.D.isString(e)&&-1==o()(e).call(e,"%")&&(e=a()(e)-2+"px"),n.push('<embed id="',t._strObjectName,'" style="display: inline; width:',e,";height:",t._strHeight,'" type="',s.D.product.strMIMEType,'"',' pluginspage="',u.bWin?s.D.product.getMSIPath():s.D.product.getPKGPath(),'"></embed>')),n.push('</div><div id="',t._strDWTNonInstallInnerContainerID,'" style="width: ',r,';display:none"></div>'),(e=s.D.get(t._containerID))&&(e.innerHTML=n.join("")),t._objectWebTwain=s.D.get(t._strObjectName)},t._createNonAllowedDivPlugin=function(){var e=this,t=s.D.get(e._strDWTNonInstallInnerContainerID);if(""==t.innerHTML){var r=e._strHeight,r=(s.D.isString(r)&&-1==o()(r).call(r,"%")&&(r=a()(r)-10+"px"),['<div style="display: block; border:1px solid black; width:',e._strWidth,";height:",r,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPvZRNSxthEMeX0mNpKS09tP04tdBqobT9WCGJ5kU9pIk5xB4KaoJGmoiNMS+IUiqNB08mjUoUN2vU3WyS9d+ZIbvEZREP0j8Mk5ln5sfs7jxRcM/6f8BKpYKZmRlEIhGUSiUYhjE8uV2eQIal0xmobQ3aeQc/CwWUy+Xh6e3yBM7OzuJMbcPs9cUYzNPeRQLc29tDKpVCOBx2LJ3JQDe66Jo9fI3HEY1GnTOurdVqAnBLgFxwcNBAp3N5w0yTJiTTtA5UVXPy9XpDerwkwOnpaZydtWma/p3s8OgYcZraSwIMhULoXFx6NntZvf4XyWRSAG45QO38wrO51x/Asq7F27nbJMBEIoFm8wiLS0uYm0s6j88QfXUF6ucJXNMe2lAWx+qXD3I+KgHu7OwgEAjI/q2vr2N5eUUaebIWwRovFLTG38AaQtlzLPlP4wKyJcB8Pi83IpfLoVqtYmFh0ZnQ0nU0qHn/uSJ+0G7fiPl8VAL0+/20cyZdsTLm57+hdXIqQAdKE+1T869nCnZfK+I5dsNYAgwGg7i8MhwIG8cbG0Wafo1+X6FPk5VfPUDxqSK+r6oCcEuAU1NT0GhhDQLZVtwsIZvNShFPuDX+FqtPFORfPhS/9X5M8m4JkO/pyakKo0uwof3e/SMF3FQg2PfHCgoEMWlS9nbshgqQt755eIwr3RTYOV+vRlMK1j5OIPlIwY93YxgM39mAIBxzns9HJcDt7W3EYjH5OD6fD5OTk7KbrDo99go12TBbDOV8Peuxh5Zl0Z8ATUdFOjWy55jztt1VArw/Af8A9+n0bhYJ0I4AAAAASUVORK5CYII="/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join(""));t.innerHTML=r;for(var n=0;n<c.links.length;n++)"DWT_CloseNonAllowedDiv"==c.links[n].className&&(c.links[n].onclick=i)}function i(){s.D.get(e._strDWTNonInstallInnerContainerID).style.display="none",s.D.get(e._strDWTInnerContainerID).style.display="inline"}},s.D.detect._controlDetect=function(){var e,t,o,r,a=s.D.detect.arySTwains,n=a[0],i=n&&n._objectWebTwain;i?(e=s.I.DWT,t=!1,u.bIE?(r=!u.bOSx64||u.bWOW64?"DynamicPdfCore_"+e.PdfVersion+".dll":"DynamicPdfCorex64_"+e.PdfVersion+".dll",0==i.ErrorCode&&""!=i.GetAddOnVersion("pdf",r)&&(t=!0)):0==i.ErrorCode&&(t=!0),t?(clearInterval(s.D.detect._varSeed),o=function o(e,t,r){for(var n,i=0;i<a.length;i++)n=a[i],s.D.attachProperty(n),s.D.attachMethod(n),n._attachEvents(),s.D.detect.ssl&&(n.IfSSL=!0,n.HTTPPort=443),0==e?(n.GetLicenseInfo(t),n._setConvertMode(n._pdfConvertMode)):(n._blts=!0,""!=t&&""!=r?(n.SetLTSInfo(t,r),n._setConvertMode(n._pdfConvertMode),n.GetLicenseInfo().then(function(e){s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_desktop,e)})):n.__licenseInfo={LTS:!0,Detail:[]},s.I.DWT.laddDWTObj(n)),s.D.attachAddon(n),n._objectWebTwain.BrokerProcessType=s.D.product._iBrokerProcessType,u.bWin||(n._objectWebTwain.ImageCaptureDriverType=s.D.product._iImageCaptureDriverType),s.D.isFunction(n.__OnPluginReady)&&n.__OnPluginReady()},s.D.License.isLTS()?(r=s.I.DWT.li({instanceMode:s.I.DWT.EnumInstance.dwt_desktop,axInstance:i}),s.I.DWT.lisValidID(r)?s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_desktop).then(function(e){o(1,e.ar,e.cu)},function(e){e&&(s.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),s.I.DWT.OnLicenseException()),o(1,"","")}):o(1,"","")):o(0,e.ProductKey,"")):(s.D.detect.bNoControlEvent||(s.D.noControl(n),s.D.detect.bNoControlEvent=!0),s.D.isFunction(n.__OnPluginNotReady)&&n.__OnPluginNotReady())):clearInterval(s.D.detect._varSeed)},s.D.ie={},s.D.ie.DynamicWebTwain=function(e){e=new n(e);return e._createControl(),s.D.detect.arySTwains.push(e),e},s.D.ie.closeAll=function(){for(var e,t=s.D.detect.arySTwains,r=0;r<t.length;r++)(e=t[r])&&e._objectWebTwain&&(e=e._objectWebTwain)&&0==e.ErrorCode&&e.RemoveAllImages();s.D.detect.arySTwains=[]},s.I.DWT.RemoveAllAuthorizations=function(){return!1}},7127:function(e,t,r){r.r(t);var t=r(4341),i=r.n(t),t=r(9104),n=r.n(t),t=r(2825),o=r.n(t),a=r(1695);function s(e){this._stwain=e,a.D.attachAxViewerPropertyUI(this),a.D.attachAxViewerFunctions(this),this._thumbnailViewer=null}a.D.attachAxViewerPropertyUI=function(r){var n;(n=function n(e,t){e in r||i()(r,e,t)})("width",{get:function(){return r._stwain.Width},set:function(e){return r._stwain.Width=e,a.D.checkErrorString(r._stwain)}}),n("height",{get:function(){return r._stwain.Height},set:function(e){return r._stwain.Height=e,a.D.checkErrorString(r._stwain)}}),n("background",{get:function(){return r._stwain.BackgroundColor},set:function(e){return r._stwain.BackgroundColor=e}}),n("cursor",{get:function(){return r._stwain.MouseShape?"pointer":"crosshair"},set:function(e){return r._stwain.MouseShape="pointer"==e,e}}),n("showPageNumber",{get:function(){return!1},set:function(e){return!1}}),n("ifAutoScroll",{get:function(){return r._stwain.IfAutoScroll},set:function(e){return r._stwain.IfAutoScroll=e}}),n("pageMargin",{get:function(){return r._stwain.ImageMargin},set:function(e){return r._stwain.ImageMargin=e}}),n("zoom",{get:function(){return r._stwain.Zoom},set:function(e){return r._stwain.Zoom=e}})},a.D.attachAxViewerFunctions=function(e){e.next=function(){return this._stwain.next()},e.previous=function(){return this._stwain.previous()},e.first=function(){return this._stwain.first()},e.last=function(){return this._stwain.last()},e.gotoPage=function(e){e=+e;return a.D.isNaN(e)||!a.D.isNumber(e)?(a.D.Errors.InvalidIndex(this._stwain),!1):e<0||e>=this._stwain.HowManyImagesInBuffer?(a.D.Errors.IndexOutOfRange(this._stwain),!1):this._stwain.CurrentImageIndexInBuffer=e},e.setSelectedAreas=function(e){return this._stwain.SetSelectedImageArea(this._stwain.CurrentImageIndexInBuffer,e.left,e.top,e.right,e.bottom)},e.fitWindow=function(e){return"height"==e?(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=a.I.DWT.EnumDWT_FitWindowType.enumFitWindowHeight):"width"==e?(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=a.I.DWT.EnumDWT_FitWindowType.enumFitWindowWidth):(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=a.I.DWT.EnumDWT_FitWindowType.enumFitWindow),!0},e.setViewMode=function(e,t){return this._stwain.SetViewMode(e,t)},e.createImageEditor=function(){return this._stwain},e.on=function(e,o){e=this._convertEvtName(e);return""!=e&&("OnImageAreaSelected"==e?(this.OnImageAreaSelected=function(e,t,r,n,i){o(e,[{x:t,y:r,width:n-t,height:i-r}])},this._stwain.RegisterEvent(e,this.OnImageAreaSelected)):this._stwain.RegisterEvent(e,o))},e.off=function(e,t){e=this._convertEvtName(e);return""!=e&&("OnImageAreaSelected"==e?this.OnImageAreaSelected?this._stwain.UnregisterEvent(e,this.OnImageAreaSelected):this._stwain.UnregisterEvent(e):this._stwain.UnregisterEvent(e,t))},e.createThumbnailViewer=function(e){return this._thumbnailViewer?a.D.Errors.ThumbnailViewerExist(this._stwain):(e=new a.D.UI.ThumbnailViewer(this._stwain,e),this._thumbnailViewer=e.getInstance()),this._thumbnailViewer},e._convertEvtName=function(e){if(!a.D.isString(e))return"";var t=n()(a.D).call(a.D,e).toLowerCase();return"toppagechanged"==t?"OnTopImageInTheViewChanged":"click"==t?"OnMouseClick":"dblclick"==t?"OnMouseDoubleClick":"mousemove"==t?"OnMouseMove":"rightclick"==t?"OnMouseRightClick":"wheel"==t?"OnMouseWheel":"keydown"==t?"OnKeyDown":"pageareaselected"==t?"OnImageAreaSelected":"pageareaunselected"==t?"OnImageAreaDeSelected":n()(a.D).call(a.D,e)}};var u={showThumbnail:!(s.prototype.getInstance=function(){return this}),location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:"transparent",pageBorder:"1px solid rgb(238, 238, 238)",hoverPageBackground:"rgb(239, 246, 253)",hoverPageBorder:"1px solid rgb(238, 238, 238)",placeholderBackground:"rgb(251, 236, 136)",autoChangeIndex:!1};function c(e,t){var r=t;if(r){if(r.location)switch(r.location){case"left":r.location="horizontal",r.sequence=-1;break;case"right":r.location="horizontal",r.sequence=1;break;case"top":r.location="vertical",r.sequence=-1;break;case"bottom":r.location="vertical",r.sequence=1;break;default:r.location="horizontal",r.sequence=-1}else r.location="horizontal",r.sequence=-1;a.D.isUndefined(r.size)&&(r.size=u.size),a.D.isUndefined(r.columns)&&(r.columns=u.columns),a.D.isUndefined(r.rows)&&(r.rows=u.rows),(a.D.isUndefined(r.scrollDirection)||"horizontal"!=r.scrollDirection)&&(r.scrollDirection=u.scrollDirection),a.D.isUndefined(r.pageMargin)&&(r.pageMargin=u.pageMargin),a.D.isUndefined(r.allowKeyboardControl)&&(r.allowKeyboardControl=u.allowKeyboardControl),a.D.isUndefined(r.allowPageDragging)&&(r.allowPageDragging=u.allowPageDragging),a.D.isUndefined(r.allowResizing)&&(r.allowResizing=u.allowResizing),a.D.isUndefined(r.border)&&(r.border=u.border),a.D.isUndefined(r.pageBackground)&&(r.pageBackground=u.pageBackground),a.D.isUndefined(r.pageBorder)&&(r.pageBorder=u.pageBorder),a.D.isUndefined(r.hoverPageBackground)&&(r.hoverPageBackground=u.hoverPageBackground),a.D.isUndefined(r.hoverPageBorder)&&(r.hoverPageBorder=u.hoverPageBorder),a.D.isUndefined(r.placeholderBackground)&&(r.placeholderBackground=u.placeholderBackground),a.D.isUndefined(r.autoChangeIndex)&&(r.autoChangeIndex=u.autoChangeIndex)}else r=u;this._stwain=e,this._settings=r,a.D.attachViewerPropertyThumbnailUI(this),a.D.attachViewerFunctionsThumbnailUI(this),e.getSWebTwain().SetViewMode(-1,-1),e.getSWebTwain().ShowThumbnail(o()(r))}c.prototype.getInstance=function(){return this},a.D.attachViewerFunctionsThumbnailUI=function(n){n.show=function(){n._stwain?(n._stwain.getSWebTwain().SetViewMode(-1,-1),n._stwain.getSWebTwain().ShowThumbnail('{"mode":"show"}')):a.D.Errors.ThumbnailViewerDispose(n._stwain)},n.hide=function(){n._stwain?n._stwain.getSWebTwain().ShowThumbnail('{"mode":"hide"}'):a.D.Errors.ThumbnailViewerDispose(n._stwain)},n.dispose=function(){n.hide(),n._stwain=null},n.updateViewMode=function(e){if(n._stwain){if(e&&e.columns&&e.rows){if(e.columns<0||e.rows<0)return a.D.Errors.InvalidPropertyValue(n._stwain),!1;n._stwain.getSWebTwain().ShowThumbnail('{"columns":'+e.columns+',"rows":'+e.rows+"}")}}else a.D.Errors.ThumbnailViewerDispose(n._stwain)},n.on=function(e,t){var r=e,e=!1;a.D.isFunction(t)&&("OnMouseClick"==(r="pageareaunselected"==(r="pageareaselected"==(r="toppagechanged"==(r="keydown"==(r="wheel"==(r="mousemove"==(r="dblclick"==(r="rightclick"==(r="click"==r?"OnMouseClick":r)?"OnMouseRightClick":r)?"OnMouseDoubleClick":r)?"OnMouseMove":r)?"OnMouseWheel":r)?"OnKeyDown":r)?"OnTopImageInTheViewChanged":r)?"OnImageAreaSelected":r)?"OnImageAreaDeSelected":r)||"OnMouseDoubleClick"==r||"OnMouseRightClick"==r||"OnMouseMove"==r||"OnMouseWheel"==r||"OnKeyDown"==r||"OnPaintDone"==r||"OnImageAreaDeSelected"==r||"OnTopImageInTheViewChanged"==r?(a.D.isFunction(n._stwain["__"+r])||a.D.isFunction(n._stwain["__"+r+"_Thumbnail"])||(e=!0),n._stwain["__"+r+"_Thumbnail"]=t,e&&n._stwain.getSWebTwain().RegisterEvent(r,function(e,t){return n._stwain.__OnDispatchThumbnailEvt(r,e,t)})):"OnImageAreaSelected"==r&&(a.D.isFunction(n._stwain["__"+r])||a.D.isFunction(n._stwain["__"+r+"_Thumbnail"])||(e=!0),n._stwain["__"+r+"_Thumbnail"]=t,e&&n._stwain.getSWebTwain().RegisterEvent(r,n._stwain._OnImageAreaSelected)))},n.off=function(e,t){n._stwain["__"+e+"_Thumbnail"]=""}},a.D.attachViewerPropertyThumbnailUI=function(r){var n;(n=function n(e,t){e in r||i()(r,e,t)})("location",{get:function(){return r._settings.location},set:function(e){r._settings.location=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"location":"'+e+'"}')}}),n("size",{get:function(){return r._settings.size},set:function(e){r._settings.size=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"size":"'+e+'"}')}}),n("pageMargin",{get:function(){return r._settings.pageMargin},set:function(e){r._settings.pageMargin=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"pageMargin":"'+e+'"}')}}),n("background",{get:function(){return r._settings.background},set:function(e){r._settings.background=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"background":"'+e+'"}')}}),n("pageBackground",{get:function(){return r._settings.pageBackground},set:function(e){r._settings.pageBackground=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"pageBackground":"'+e+'"}')}}),n("selectedPageBorder",{get:function(){return r._settings.selectedPageBorder},set:function(e){r._settings.selectedPageBorder=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBorder":"'+e+'"}')}}),n("selectedPageBackground",{get:function(){return r._settings.selectedPageBackground},set:function(e){r._settings.selectedPageBackground=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBackground":"'+e+'"}')}}),n("scrollDirection",{get:function(){return r._settings.scrollDirection},set:function(e){r._settings.scrollDirection=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"scrollDirection":"'+e+'"}')}}),n("showPageNumber",{get:function(){return r._settings.showPageNumber},set:function(e){r._settings.showPageNumber=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"showPageNumber":"'+e+'"}')}}),n("border",{get:function(){return r._settings.border},set:function(e){r._settings.border=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"border":"'+e+'"}')}}),n("pageBorder",{get:function(){return r._settings.pageBorder},set:function(e){r._settings.pageBorder=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"pageBorder":"'+e+'"}')}}),n("hoverPageBackground",{get:function(){return r._settings.hoverPageBackground},set:function(e){r._settings.hoverPageBackground=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBackground":"'+e+'"}')}}),n("hoverPageBorder",{get:function(){return r._settings.hoverPageBorder},set:function(e){r._settings.hoverPageBorder=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBorder":"'+e+'"}')}}),n("placeholderBackground",{get:function(){return r._settings.placeholderBackground},set:function(e){r._settings.placeholderBackground=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"placeholderBackground":"'+e+'"}')}}),n("allowKeyboardControl",{get:function(){return r._settings.allowKeyboardControl},set:function(e){r._settings.allowKeyboardControl=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"allowKeyboardControl":"'+e+'"}')}}),n("allowPageDragging",{get:function(){return r._settings.allowPageDragging},set:function(e){r._settings.allowPageDragging=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"allowPageDragging":"'+e+'"}')}}),n("allowResizing",{get:function(){return r._settings.allowResizing},set:function(e){r._settings.allowResizing=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"allowResizing":"'+e+'"}')}}),n("autoChangeIndex",{get:function(){return r._settings.autoChangeIndex},set:function(e){r._settings.autoChangeIndex=e,r._stwain&&r._stwain.getSWebTwain().ShowThumbnail('{"autoChangeIndex":"'+e+'"}')}})},a.D.UI=a.D.UI||{},a.D.UI.DWTAxViewer=s,a.D.UI.ThumbnailViewer=c},9035:function(e,t,r){r.r(t);var t=r(677),n=r.n(t),t=r(5238),i=r.n(t),t=r(4341),a=r.n(t),t=r(7711),c=r.n(t),t=r(9798),l=r.n(t),d=r(1695),h=r(9158),u=d.I.navInfo,m={isFunction:function(e){return e&&"function"==typeof e},isReturnSuccess:function(e){return-2115===e._errorCode||(-2003!==e._errorCode||d.I.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(e.HTTPPostResponseString),0==e._errorCode)},setErrorString:function(e){e._errorCode=e.getSWebTwain().ErrorCode,e._errorString=e.getSWebTwain().ErrorString},checkErrorString:function(e){return m.setErrorString(e),m.isReturnSuccess(e)},wrapperRet:function(e,t,r,n,i,o){if(m.checkErrorString(e)){if(m.isFunction(r))if(i)r(e.getSWebTwain().HTTPPostResponseString);else{if(o)return r(t),!0;r()}}else m.isFunction(n)&&(i?n(e._errorCode,e._errorString,e.getSWebTwain().HTTPPostResponseString):n(e._errorCode,e._errorString));return t},wrapperPromise:function(e,t){return t?d.D.Promise.resolve(!0):d.D.Promise.reject({errorCode:e._errorCode,errorString:e._errorString})},getImageType:function(e){if(e.length<4)return-1;var t=n()(e).call(e,".");if(-1===t)return-1;e=i()(e).call(e,t).toLowerCase();return".bmp"===e||".dib"===e?0:".jpg"===e||".jpe"===e||".jpeg"===e||".jfif"===e?1:".tif"===e||".tiff"===e?2:".png"===e?3:".pdf"===e?4:".gif"===e?5:-1},replaceLocalFilename:function(e){return e=d.I.navInfoSync.bFileSystem?decodeURI(e):e},makeParams:function(){var e=arguments;return e===undefined||0===e.length?undefined:e}};d.D.checkErrorString=m.checkErrorString,d.D.wrapperRet=m.wrapperRet,d.D.setErrorString=m.setErrorString,d.D.DynamicLoadAddonFuns=[],d.D.attachAddon=function(t){if(u.bWin){var e=!u.bOSx64||u.bWOW64,r=t.getSWebTwain(),e=e?"DynamicPdfCore_"+d.I.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+d.I.DWT.PdfVersion+".dll";try{r.GetAddOnVersion("pdf",e)}catch(n){}}d.D.each(d.D.DynamicLoadAddonFuns,function(e){d.D.isFunction(e)&&e(t)})};d.D.attachProperty=function(e){var i,o=e;(i=function i(t,e,r){var n;0!==e&&1!==e?n=e:(n={},e&&(n.set=1==r?function(e){return!d.D.isNumber(e=+e)||isNaN(e)?(d.D.Errors.InvalidValue(o),!1):(o.getSWebTwain()[t]=e,m.checkErrorString(o))}:2==r?function(e){return d.D.isBoolean(e)?(o.getSWebTwain()[t]=e,m.checkErrorString(o)):(d.D.Errors.InvalidValue(o),!1)}:function(e){return d.D.isString(e)?(o.getSWebTwain()[t]=e,m.checkErrorString(o)):(d.D.Errors.InvalidValue(o),!1)})),n.get||(n.get=function(){var e=o.getSWebTwain()[t];return o._errorCode=o.getSWebTwain().ErrorCode,o._errorString=o.getSWebTwain().ErrorString,e}),t in o||a()(o,t,n)})("ErrorCode",{get:function(e){return o._errorCode}}),i("ErrorString",{get:function(e){return o._errorString}}),i("LogLevel",1,1),i("Manufacturer",1),i("ProductFamily",1),i("ProductKey",{get:function(){return d.I.DWT.ProductKey},set:function(e){var t=!0;return d.D.isString(e)&&"******"!=e||(e=""),d.I.DWT.ProductKey=e,o.__licenseInfo=!1,""==e?d.D.License.checkProductKey(o,{Core:!(t=!1)},!1,!0):(o.GetLicenseInfo(e),t=m.checkErrorString(o)),t}}),i("ProductName",1),i("VersionInfo",1),i("BitDepth",1,1),i("Brightness",1,1),i("Contrast",1,1),i("CurrentSourceName",0),i("DataSourceStatus",0),i("DefaultSourceName",0),i("Duplex",0),i("IfAppendImage",1,2),i("IfAutoBright",1,2),i("IfAutoDiscardBlankpages",1,2),i("IfAutoFeed",1,2),i("IfAutomaticBorderDetection",1,2),i("IfAutomaticDeskew",1,2),i("IfAutoScan",1,2),i("IfDisableSourceAfterAcquire",1,2),i("IfDuplexEnabled",1,2),i("IfFeederEnabled",1,2),i("IfModalUI",1,2),i("IfScanInNewThread",1,2),i("IfShowCancelDialogWhenImageTransfer",1,2),i("IfShowUI",1,2),i("IfShowIndicator",1,2),i("IfUseTwainDSM",1,2),i("IfFeederLoaded",0,2),i("IfPaperDetectable",0,2),i("IfUIControllable",0,2),i("ImageBitsPerPixel",0),i("ImageCaptureDriverType",1,1),i("ImageLayoutDocumentNumber",0),i("ImageLayoutFrameBottom",0),i("ImageLayoutFrameLeft",0),i("ImageLayoutFrameNumber",0),i("ImageLayoutFrameRight",0),i("ImageLayoutFrameTop",0),i("ImageLayoutPageNumber",0),i("ImageLength",0),i("ImagePixelType",0),i("ImageWidth",0),i("ImageXResolution",0),i("ImageYResolution",0),i("MagData",0),i("MagType",0),i("PageSize",1,1),i("PendingXfers",0),i("PixelFlavor",1,1),i("PixelType",1,1),i("Resolution",1,1),i("SourceCount",0),i("TransferMode",1,1),i("Unit",1,1),i("XferCount",1,1),i("Capability",1,1),i("CapCurrentIndex",1,1),i("CapCurrentValue",1,1),i("CapDefaultIndex",0),i("CapDefaultValue",0),i("CapDescription",1),i("CapMaxValue",1,1),i("CapMinValue",1,1),i("CapNumItems",1,1),i("CapStepSize",1,1),i("CapType",1,1),i("CapValue",1,1),i("CapValueString",1),i("CapValueType",1,1),i("AllowMultiSelect",1,2),i("BackgroundColor",1,1),i("BackgroundFillColor",1,1),i("BlankImageCurrentStdDev",0),i("BlankImageMaxStdDev",1,1),i("BlankImageThreshold",1,1),i("CurrentImageIndexInBuffer",{set:function(e){return e!=o.getSWebTwain().CurrentImageIndexInBuffer&&(o.getSWebTwain().CurrentImageIndexInBuffer=e),m.checkErrorString(o)}}),i("FitWindowType",1,1),i("HowManyImagesInBuffer",0),i("IfFitWindow",1,2),i("ImageMargin",1,1),i("MaxImagesInBuffer",1,1),i("MouseX",0),i("MouseY",0),i("SelectionImageBorderColor",1),i("Zoom",1,1),i("MouseShape",1,2),i("SelectedImagesIndices",{get:function(){for(var e=[],t=o.getSWebTwain().SelectedImagesCount,r=0;r<t;r++)e.push(o.getSWebTwain().GetSelectedImageIndex(r));return e}}),i("HTTPPostResponseString",0),i("AsyncMode",1,2),i("FTPPassword",1),i("FTPPort",{set:function(e){return""!==e&&(e=+e,o.getSWebTwain().FTPPort=e,m.checkErrorString(o))}}),i("FTPUserName",1),i("HTTPPort",{set:function(e){return e=""!==e?+e:d.D.detect.ssl?443:80,o.getSWebTwain().HTTPPort=e,m.checkErrorString(o)}}),i("HTTPPassword",1),i("HTTPUserName",1),i("IfPASVMode",1,2),i("IfShowProgressBar",1,2),i("ProxyServer",1),i("IfShowFileDialog",1,2),i("IfTiffMultiPage",1,2),i("PDFAuthor",1),i("PDFCompressionType",1,1),i("PDFCreationDate",1),i("PDFCreator",1),i("PDFKeywords",1),i("PDFModifiedDate",1),i("PDFProducer",1),i("PDFSubject",1),i("PDFTitle",1),i("PDFVersion",1),i("TIFFCompressionType",1,1),i("JPEGQuality",{set:function(e){return 100<=(e=+e)?e=100:e<0&&(e=0),o.getSWebTwain().JPEGQuality=e,m.checkErrorString(o)}}),i("HttpContentTypeFieldValue",1),i("SelectionRectAspectRatio",1,1),i("IfAllowLocalCache",1,2),i("_AutoCropMethod",1,2),i("BrokerProcessType",1,1),i("BorderStyle",1,1),i("IfShowPrintUI",1,2),i("VScrollBar",1,2),i("EnableInteractiveZoom",1,2),i("ImageEditorIfEnableEnumerator",1,2),i("ImageEditorIfReadonly",1,2),i("ImageEditorIfModal",1,2),i("ImageEditorWindowTitle",1),i("IfSSL",1,2),i("AllowPluginAuthentication",1,2),i("HttpFieldNameOfUploadedImage",1),i("MaxInternetTransferThreads",1,1),i("MaxUploadImageSize",1,1),i("IfOpenImageWithGDIPlus",1,2),i("BufferMemoryLimit",1,1),i("Width",{get:function(){return o.getSWebTwain().style.width},set:function(e){return o._ChangeWidth(e),m.checkErrorString(o)}}),i("Height",{get:function(){return o.getSWebTwain().style.height},set:function(e){return o._ChangeHeight(e),m.checkErrorString(o)}}),i("IfThrowException",1,2),i("IfAutoScroll",1,2),i("ShowPageNumber",{get:function(){return!1},set:function(e){return!1}}),i("UseLocalService",{get:function(){return!0}})},d.D.attachMethod=function(s){var f=s,u=function u(e){return!!d.D.License.checkProductKey(f,{Core:!0})||(d.D.isFunction(e)&&e(f.ErrorCode,f.ErrorString),!1)},o=function o(e,t){return!!d.D.License.checkPDFProductKeyWhenNeeds(f,e)||(d.D.isFunction(t)&&t(f.ErrorCode,f.ErrorString),!1)},n=function n(e,t){return 0!=e.HowManyImagesInBuffer||(d.D.Errors.NoImage(e),d.D.isFunction(t)&&t(e.ErrorCode,e.ErrorString),!1)},i=function i(e,t,r){return!!n(e,r)&&(!(isNaN(t)||!d.D.isNumber(t)||t<0||t>=e.HowManyImagesInBuffer)||(d.D.Errors.IndexOutOfRange(e),d.D.isFunction(r)&&r(e.ErrorCode,e.ErrorString),!1))},a=(s.RegisterEvent=function(e,t){if(!d.D.isString(e))return d.D.Errors.InvalidEventName(f),!1;if("onwsmessage"===e.toLowerCase())return d.D.Errors.InvalidEventName(f),!1;if("onpostalltransfers"===e.toLowerCase())return d.D.isFunction(t)&&(f.__OnPostAllTransfers=t),!0;var r=["__",e].join("");return f[r]=t,f.getSWebTwain().RegisterEvent(e,t),m.checkErrorString(f)},s.onEvent=function(e,t){return f.RegisterEvent(e,t)},s.on=function(e,t){return f.RegisterEvent(e,t)},s._isMobileMode=function(){return!1},s.CancelAllPendingTransfers=function(){return f.getSWebTwain().CancelAllPendingTransfers(),m.checkErrorString(f)},s.CloseSource=function(){return f.getSWebTwain().CloseSource(),m.checkErrorString(f)},s.CloseSourceManager=function(){return f.getSWebTwain().CloseSourceManager(),m.checkErrorString(f)},s.DisableSource=function(){return f.getSWebTwain().DisableSource(),m.checkErrorString(f)},s.FeedPage=function(){return f.getSWebTwain().FeedPage(),m.checkErrorString(f)},s.GetDeviceType=function(){var e=f.getSWebTwain().GetDeviceType();return m.setErrorString(f),e},s.GetSourceNameItems=function(e){e=f.getSWebTwain().GetSourceNameItems(e);return m.setErrorString(f),e},s.SourceNameItems=function(e){e=f.getSWebTwain().GetSourceNameItems(e);return m.setErrorString(f),e},s.GetSourceNames=function(){return d.D.Errors.ActiveXNotSupport(f),[]},s.GetSourceType=function(e){e=f.getSWebTwain().GetSourceType(e);return m.setErrorString(f),e},s.OpenSource=function(){return f.getSWebTwain().OpenSource(),m.checkErrorString(f)},s.OpenSourceManager=function(){return f.getSWebTwain().OpenSourceManager(),m.checkErrorString(f)},s.ResetImageLayout=function(){return f.getSWebTwain().ResetImageLayout(),m.checkErrorString(f)},s.RewindPage=function(){return f.getSWebTwain().RewindPage(),m.checkErrorString(f)},s.SelectSource=function(e,t){return d.D.isUndefined(e)?(f.getSWebTwain().SelectSource(),m.checkErrorString(f)):(f.getSWebTwain().SelectSource(),m.checkErrorString(f)?(e(),!0):(t(),!1))},s.SelectSourceByIndex=function(e){return f.getSWebTwain().SelectSourceByIndex(e),m.checkErrorString(f)},s.CloseSourceAsync=function(){return m.wrapperPromise(f,f.CloseSource())},s.CloseSourceManagerAsync=function(){return m.wrapperPromise(f,f.CloseSourceManager())},s.GetSourceNamesAsync=function(){return m.wrapperPromise(f,f.GetSourceNames())},s.GetSourceTypeAsync=function(e){return m.wrapperPromise(f,f.GetSourceType(e))},s.OpenSourceAsync=function(){return m.wrapperPromise(f,f.OpenSource())},s.OpenSourceManagerAsync=function(){return m.wrapperPromise(f,f.OpenSourceManager())},s.SelectSourceAsync=function(){return m.wrapperPromise(f,f.SelectSource())},s.SelectSourceByIndexAsync=function(e){return m.wrapperPromise(f,f.SelectSourceByIndex(e))},s.SetFileXferInfo=function(e,t){e=m.replaceLocalFilename(e);return f.getSWebTwain().SetFileXferInfo(e,t),m.checkErrorString(f)},s.SetImageLayout=function(e,t,r,n){return f.getSWebTwain().SetImageLayout(e,t,r,n),m.checkErrorString(f)},s.CapGet=function(){var e=f.getSWebTwain().CapGet();return m.setErrorString(f),e},s.CapGetCurrent=function(){var e=f.getSWebTwain().CapGetCurrent();return m.setErrorString(f),e},s.CapGetDefault=function(){var e=f.getSWebTwain().CapGetDefault();return m.setErrorString(f),e},s.CapGetFrameBottom=function(e){e=f.getSWebTwain().CapGetFrameBottom(e);return m.setErrorString(f),e},s.CapGetFrameLeft=function(e){e=f.getSWebTwain().CapGetFrameLeft(e);return m.setErrorString(f),e},s.CapGetFrameRight=function(e){e=f.getSWebTwain().CapGetFrameRight(e);return m.setErrorString(f),e},s.CapGetFrameTop=function(e){e=f.getSWebTwain().CapGetFrameTop(e);return m.setErrorString(f),e},s.CapGetHelp=function(){var e=f.getSWebTwain().CapGetHelp();return m.setErrorString(f),e},s.CapGetLabel=function(){var e=f.getSWebTwain().CapGetLabel();return m.setErrorString(f),e},s.CapGetLabels=function(){var e=f.getSWebTwain().CapGetLabels();return m.setErrorString(f),e},s.CapIfSupported=function(e){e=f.getSWebTwain().CapIfSupported(e);return m.setErrorString(f),e},s.CapReset=function(){return f.getSWebTwain().CapReset(),m.checkErrorString(f)},s.CapSet=function(){return f.getSWebTwain().CapSet(),m.checkErrorString(f)},s.CapSetFrame=function(e,t,r,n,i){return f.getSWebTwain().CapSetFrame(e,t,r,n,i),m.checkErrorString(f)},s.GetCapItems=function(e){e=f.getSWebTwain().GetCapItems(e);return m.setErrorString(f),e},s.GetCapItemsString=function(e){e=f.getSWebTwain().GetCapItemsString(e);return m.setErrorString(f),e},s.SetCapItems=function(e,t){return f.getSWebTwain().SetCapItems(e,t),m.checkErrorString(f)},s.SetCapItemsString=function(e,t){return f.getSWebTwain().SetCapItemsString(e,t),m.checkErrorString(f)},s.AddText=function(e,t,r,n,i,o,a,s){e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().AddText(e,t,r,n,i,o,a,s),m.checkErrorString(f))},s.CreateTextFont=function(e,t,r,n,i,o,a,s,u,c,l,d,h,g){return f.getSWebTwain().CreateTextFont(e,t,r,n,i,o,a,s,u,c,l,d,h,g),m.checkErrorString(f)},s.CopyToClipboard=function(e){e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().CopyToClipboard(e),m.checkErrorString(f))},s.Erase=function(e,t,r,n,i,o,a){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(a)&&a(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().Erase(e,t,r,n,i),m.wrapperRet(f,e,o,a))},s.GetImageBitDepth=function(e){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().GetImageBitDepth(e);return m.setErrorString(f),e},s.GetImageWidth=function(e){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().GetImageWidth(e);return m.setErrorString(f),e},s.GetImageHeight=function(e){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().GetImageHeight(e);return m.setErrorString(f),e},s.GetImageSize=function(e,t,r){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().GetImageSize(e,t,r);return m.setErrorString(f),e},s.GetImageSizeWithSpecifiedType=function(e,t){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().GetImageSizeWithSpecifiedType(e,t);return m.setErrorString(f),e},s.GetImageXResolution=function(e){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().GetImageXResolution(e);return m.setErrorString(f),e},s.GetImageYResolution=function(e){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().GetImageYResolution(e);return m.setErrorString(f),e},s.CopyToClipboardAsync=function(e){return m.wrapperPromise(f,f.CopyToClipboard(e))},s.EraseAsync=function(e,t,r,n,i){return m.wrapperPromise(f,f.Erase(e,t,r,n,i))},s.GetImageBitDepthAsync=function(e){return m.wrapperPromise(f,f.GetImageBitDepth(e))},s.GetImageWidthAsync=function(e){return m.wrapperPromise(f,f.GetImageWidth(e))},s.GetImageHeightAsync=function(e){return m.wrapperPromise(f,f.GetImageHeight(e))},s.GetImageSizeAsync=function(e,t,r){return m.wrapperPromise(f,f.GetImageSize(e,t,r))},s.GetImageSizeWithSpecifiedTypeAsync=function(e,t){return m.wrapperPromise(f,f.GetImageSizeWithSpecifiedType(e,t))},s.GetImageXResolutionAsync=function(e){return m.wrapperPromise(f,f.GetImageXResolution(e))},s.GetImageYResolutionAsync=function(e){return m.wrapperPromise(f,f.GetImageYResolution(e))},s.SelectAllImages=function(){var e,t=f.getSWebTwain().HowManyImagesInBuffer,r=[];for(f.getSWebTwain().SelectedImagesCount=t,e=0;e<t;e++)f.getSWebTwain().SetSelectedImageIndex(e,e),r.push(e);return m.checkErrorString(f),r},s.SelectImages=function(e){var t=e.length;f.getSWebTwain().SelectedImagesCount=t;for(var r=0;r<t;r++)f.getSWebTwain().SetSelectedImageIndex(r,e[r]);return m.checkErrorString(f)},s.GetSelectedImagesSize=function(e){e=f.getSWebTwain().GetSelectedImagesSize(e);return m.setErrorString(f),e},s.GetSkewAngle=function(e,t,r){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(r)&&r(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().GetSkewAngle(e),m.wrapperRet(f,e,t,r,!1,!0))},s.GetSkewAngleEx=function(e,t,r,n,i,o,a){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(a)&&a(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().GetSkewAngleEx(e,t,r,n,i),m.wrapperRet(f,e,o,a))},s.IsBlankImage=function(e){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().IsBlankImage(e);return m.setErrorString(f),e},s.IsBlankImageEx=function(e,t,r,n,i,o){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().IsBlankImageEx(e,t,r,n,i,o);return m.setErrorString(f),e},s.Mirror=function(e,t,r){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(r)&&r(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().Mirror(e),m.wrapperRet(f,e,t,r))},s.OverlayRectangle=function(e,t,r,n,i,o,a){return f.getSWebTwain().OverlayRectangle(e,t,r,n,i,o,a),m.checkErrorString(f)},s.RemoveAllImages=function(){var e;return f.getSWebTwain().RemoveAllImages(),(e=m.checkErrorString(f))&&f.__innerRefreshImage(),f.Width=c()(f.Width)+2,e},s.RemoveAllSelectedImages=function(){var e;return f.getSWebTwain().RemoveAllSelectedImages(),(e=m.checkErrorString(f))&&f.__innerRefreshImage(),e},s.RemoveImage=function(e){e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().RemoveImage(e),m.checkErrorString(f))},s.MirrorAsync=function(e){return m.wrapperPromise(f,f.Mirror(e))},s.RemoveAllImagesAsync=function(){return m.wrapperPromise(f,f.RemoveAllImages())},s.RemoveAllSelectedImagesAsync=function(){return m.wrapperPromise(f,f.RemoveAllSelectedImages())},s.RemoveImageAsync=function(e){return m.wrapperPromise(f,f.RemoveImage(e))},s.Rotate=function(e,t,r,n,i){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(i)&&i(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().Rotate(e,t,r),m.wrapperRet(f,e,n,i))},s.RotateEx=function(e,t,r,n,i,o){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(o)&&o(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().RotateEx(e,t,r,n),m.wrapperRet(f,e,i,o))},s.RotateLeft=function(e,t,r){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(r)&&r(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().RotateLeft(e),m.wrapperRet(f,e,t,r))},s.RotateRight=function(e,t,r){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(r)&&r(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().RotateRight(e),m.wrapperRet(f,e,t,r))},s.ChangeImageSize=function(e,t,r,n,i,o){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(o)&&o(f.ErrorCode,f.ErrorString),!1):t<=0||r<=0?(d.D.Errors.InvalidWidthOrHeight(f),d.D.isFunction(o)&&o(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().ChangeImageSize(e,t,r,n),m.wrapperRet(f,e,i,o))},s.Flip=function(e,t,r){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(r)&&r(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().Flip(e),m.wrapperRet(f,e,t,r))},s.Crop=function(e,t,r,n,i,o,a){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(a)&&a(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().Crop(e,t,r,n,i),m.wrapperRet(f,e,o,a))},s.CropToClipboard=function(e,t,r,n,i){e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().CropToClipboard(e,t,r,n,i),m.checkErrorString(f))},s.CutFrameToClipboard=function(e,t,r,n,i){e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().CutFrameToClipboard(e,t,r,n,i),m.checkErrorString(f))},s.CutToClipboard=function(e){e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().CutToClipboard(e),m.checkErrorString(f))},s.RotateAsync=function(e,t,r){return m.wrapperPromise(f,f.Rotate(e,t,r))},s.RotateExAsync=function(e,t,r,n){return m.wrapperPromise(f,f.RotateEx(e,t,r,n))},s.RotateLeftAsync=function(e){return m.wrapperPromise(f,f.RotateLeft(e))},s.RotateRightAsync=function(e){return m.wrapperPromise(f,f.RotateRight(e))},s.ChangeImageSizeAsync=function(e,t,r,n){return m.wrapperPromise(f,f.ChangeImageSize(e,t,r,n))},s.FlipAsync=function(e){return m.wrapperPromise(f,f.Flip(e))},s.CropAsync=function(e,t,r,n,i){return m.wrapperPromise(f,f.Crop(e,t,r,n,i))},s.CropToClipboardAsync=function(e,t,r,n,i){return m.wrapperPromise(f,f.CropToClipboard(e,t,r,n,i))},s.CutFrameToClipboardAsync=function(e,t,r,n,i){return m.wrapperPromise(f,f.CutFrameToClipboard(e,t,r,n,i))},s.CutToClipboardAsync=function(e){return m.wrapperPromise(f,f.CutToClipboard(e))},s.InvertAsync=function(e){return m.wrapperPromise(f,f.Invert(e))},s.Invert=function(e){e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?d.D.Errors.IndexOutOfRange(f):d.D.Errors.ActiveXNotSupport(f),!1},s.SetDPI=function(e,t,r,n,i,o,a){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(a)&&a(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().SetDPI(e,t,r,n,i),m.wrapperRet(f,e,o,a))},s.SetViewMode=function(e,t){return f.getSWebTwain().SetViewMode(e,t),m.checkErrorString(f)},s.GetViewModeH=function(){var e=f.getSWebTwain().GetViewModeH();return m.setErrorString(f),e},s.GetViewModeV=function(){var e=f.getSWebTwain().GetViewModeV();return m.setErrorString(f),e},s.MoveImage=function(e,t){e=c()(e),t=c()(t);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer||isNaN(t)||t<0||t>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().MoveImage(e,t),m.checkErrorString(f))},s.SwitchImage=function(e,t){e=c()(e),t=c()(t);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer||isNaN(t)||t<0||t>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().SwitchImage(e,t),m.checkErrorString(f))},s.Print=function(){return f.getSWebTwain().Print(),m.checkErrorString(f)},s.checkErrorString=function(){return m.isReturnSuccess(f)},s.FileExists=function(e){e=m.replaceLocalFilename(e),e=f.getSWebTwain().FileExists(e);return m.setErrorString(f),e},s.SaveAllAsMultiPageTIFF=function(e,t,r){if(!n(f,r))return!1;e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveAllAsMultiPageTIFF(e);return m.wrapperRet(f,e,t,r)},s.SaveAllAsPDF=function(e,t,r){if(!n(f,r))return!1;e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveAllAsPDF(e);return m.wrapperRet(f,e,t,r)},s.SaveAsBMP=function(e,t,r,n){if(!i(f,t,n))return!1;e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveAsBMP(e,t);return m.wrapperRet(f,e,r,n)},s.SaveAsJPEG=function(e,t,r,n){if(!i(f,t,n))return!1;e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveAsJPEG(e,t);return m.wrapperRet(f,e,r,n)},s.SaveAsPDF=function(e,t,r,n){if(!i(f,t,n))return!1;e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveAsPDF(e,t);return m.wrapperRet(f,e,r,n)},s.SaveAsPNG=function(e,t,r,n){if(!i(f,t,n))return!1;e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveAsPNG(e,t);return m.wrapperRet(f,e,r,n)},s.SaveAsTIFF=function(e,t,r,n){if(!i(f,t,n))return!1;e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveAsTIFF(e,t);return m.wrapperRet(f,e,r,n)},s.SaveSelectedImagesAsMultiPagePDF=function(e,t,r){e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(e);return m.wrapperRet(f,e,t,r)},s.SaveSelectedImagesAsMultiPageTIFF=function(e,t,r){e=m.replaceLocalFilename(e),e=f.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(e);return m.wrapperRet(f,e,t,r)},s.SaveSelectedImagesToBase64Binary=function(e,t){var r=f.getSWebTwain().SaveSelectedImagesToBase64Binary();return m.wrapperRet(f,r,e,t)},s.ShowFileDialog=function(e,t,r,n,i,o,a,s){return f.getSWebTwain().ShowFileDialog(e,t,r,n,i,o,a,s),m.checkErrorString(f)},s.FTPDownload=function(e,t,r,n){if(!u(n))return!1;e=f.getSWebTwain().FTPDownload(e,t);return e&&d.D.License.isLTS()&&d.I.DWT.lcvrf(f),m.wrapperRet(f,e,r,n)},s.FTPDownloadDirectly=function(e,t,r,n,i){if(!u(i))return!1;e=f.getSWebTwain().FTPDownloadDirectly(e,t,r);return m.wrapperRet(f,e,n,i)},s.FTPDownloadEx=function(e,t,r,n,i){if(!u(i))return!1;if(r!=d.I.DWT.EnumDWT_ImageType.IT_BMP&&r!=d.I.DWT.EnumDWT_ImageType.IT_JPG&&r!=d.I.DWT.EnumDWT_ImageType.IT_TIF&&r!=d.I.DWT.EnumDWT_ImageType.IT_PNG&&r!=d.I.DWT.EnumDWT_ImageType.IT_PDF&&r!=d.I.DWT.EnumDWT_ImageType.IT_J2K&&(r=-1),!o(r,i))return!1;e=f.getSWebTwain().FTPDownloadEx(e,t,r);return m.wrapperRet(f,e,n,i)},s.FTPUpload=function(e,t,r,n,i){if(!u(i))return!1;e=f.getSWebTwain().FTPUpload(e,t,r);return m.wrapperRet(f,e,n,i)},s.FTPUploadDirectly=function(e,t,r,n,i){if(!u(i))return!1;e=f.getSWebTwain().FTPUploadDirectly(e,t,r);return m.wrapperRet(f,e,n,i)},s.FTPUploadEx=function(e,t,r,n,i,o){if(!u(o))return!1;e=f.getSWebTwain().FTPUploadEx(e,t,r,n);return m.wrapperRet(f,e,i,o)},s.FTPUploadAllAsMultiPageTIFF=function(e,t,r,n){if(!u(n))return!1;e=f.getSWebTwain().FTPUploadAllAsMultiPageTIFF(e,t);return m.wrapperRet(f,e,r,n)},s.FTPUploadAllAsPDF=function(e,t,r,n){if(!u(n))return!1;e=f.getSWebTwain().FTPUploadAllAsPDF(e,t);return m.wrapperRet(f,e,r,n)},s.FTPUploadAsMultiPagePDF=function(e,t,r,n){e=f.getSWebTwain().FTPUploadAsMultiPagePDF(e,t);return m.wrapperRet(f,e,r,n)},s.FTPUploadAsMultiPageTIFF=function(e,t,r,n){e=f.getSWebTwain().FTPUploadAsMultiPageTIFF(e,t);return m.wrapperRet(f,e,r,n)},s.HTTPDownloadDirectly=function(e,t,r,n,i){if(!u(i))return!1;e=f.getSWebTwain().HTTPDownloadDirectly(e,t,r);return m.wrapperRet(f,e,n,i)},s.HTTPDownload=function(e,t,r,n){var i=m.getImageType(t);return f.HTTPDownloadEx(e,t,i,r,n)},s.HTTPDownloadEx=function(e,t,r,n,i){if(!u(i))return!1;if(r!=d.I.DWT.EnumDWT_ImageType.IT_BMP&&r!=d.I.DWT.EnumDWT_ImageType.IT_JPG&&r!=d.I.DWT.EnumDWT_ImageType.IT_TIF&&r!=d.I.DWT.EnumDWT_ImageType.IT_PNG&&r!=d.I.DWT.EnumDWT_ImageType.IT_PDF&&r!=d.I.DWT.EnumDWT_ImageType.IT_J2K&&(r=-1),!o(r,i))return!1;e=f.getSWebTwain().HTTPDownloadEx(e,t,r);return e&&d.D.License.isLTS()&&d.I.DWT.lcvrf(f),m.wrapperRet(f,e,n,i)},s.HTTPDownloadThroughGet=s.HTTPDownloadEx,s.HTTPUploadThroughPostDirectly=function(e,t,r,n,i,o){if(!u(o))return!1;e=f.getSWebTwain().HTTPUploadThroughPostDirectly(e,t,r,n);return m.wrapperRet(f,e,i,o,!0)},s.HTTPUploadThroughPost=function(e,t,r,n,i,o){if(!d.D.isNumber(t)||isNaN(t)||t<-2)return d.D.Errors.IndexOutOfRange(f),d.D.isFunction(o)&&o(f.ErrorCode,f.ErrorString),!1;e=f.getSWebTwain().HTTPUploadThroughPost(e,t,r,n);return m.wrapperRet(f,e,i,o,!0)},s.HTTPUploadThroughPostEx=function(e,t,r,n,i,o,a){if(!d.D.isNumber(t)||isNaN(t)||t<-2)return d.D.Errors.IndexOutOfRange(f),d.D.isFunction(a)&&a(f.ErrorCode,f.ErrorString),!1;e=f.getSWebTwain().HTTPUploadThroughPostEx(e,t,r,n,i);return m.wrapperRet(f,e,o,a,!0)},s.ClearAllHTTPFormField=function(){return f.getSWebTwain().ClearAllHTTPFormField(),m.checkErrorString(f)},s.SetHTTPFormField=function(e,t){return f.getSWebTwain().SetHTTPFormField(e,t),m.checkErrorString(f)},s.HTTPUploadAllThroughPostAsMultiPageTIFF=function(e,t,r,n,i){e=f.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(e,t,r);return m.wrapperRet(f,e,n,i,!0)},s.HTTPUploadThroughPostAsMultiPageTIFF=function(e,t,r,n,i){e=f.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(e,t,r);return m.wrapperRet(f,e,n,i,!0)},s.HTTPUploadAllThroughPostAsPDF=function(e,t,r,n,i){e=f.getSWebTwain().HTTPUploadAllThroughPostAsPDF(e,t,r);return m.wrapperRet(f,e,n,i,!0)},s.HTTPUploadThroughPostAsMultiPagePDF=function(e,t,r,n,i){e=f.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(e,t,r);return m.wrapperRet(f,e,n,i,!0)},s.HTTPUploadThroughPutDirectly=function(e,t,r,n,i){e=f.getSWebTwain().HTTPUploadThroughPutDirectly(e,t,r);return m.wrapperRet(f,e,n,i)},s.HTTPUploadThroughPut=function(e,t,r,n,i){var o=m.getImageType(r);return f.HTTPUploadThroughPutEx(e,t,r,o,n,i)},s.HTTPUploadThroughPutEx=function(e,t,r,n,i,o){e=f.getSWebTwain().HTTPUploadThroughPutEx(e,t,r,n);return m.wrapperRet(f,e,i,o)},s.HTTPUploadAllThroughPutAsMultiPageTIFF=function(e,t,r,n){return f.HTTPUploadThroughPutEx(e,-1,t,2,r,n)},s.HTTPUploadThroughPutAsMultiPageTIFF=function(e,t,r,n){return f.HTTPUploadThroughPutEx(e,-2,t,2,r,n)},s.HTTPUploadAllThroughPutAsPDF=function(e,t,r,n){return f.HTTPUploadThroughPutEx(e,-1,t,4,r,n)},s.HTTPUploadThroughPutAsMultiPagePDF=function(e,t,r,n){return f.HTTPUploadThroughPutEx(e,-2,t,4,r,n)},s.ShowImageEditor=function(){return f.getSWebTwain().ShowImageEditor(),m.checkErrorString(f)},s.SetCookie=function(e){return f.getSWebTwain().SetCookie(e),m.checkErrorString(f)},s.LoadImageFromBase64Binary=function(e,t){if(!u())return!1;if(t!=d.I.DWT.EnumDWT_ImageType.IT_BMP&&t!=d.I.DWT.EnumDWT_ImageType.IT_JPG&&t!=d.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=d.I.DWT.EnumDWT_ImageType.IT_PNG&&t!=d.I.DWT.EnumDWT_ImageType.IT_PDF&&t!=d.I.DWT.EnumDWT_ImageType.IT_J2K&&(t=-1),!o(t))return!1;e=f.getSWebTwain().LoadImageFromBase64Binary(e,t);return m.setErrorString(f),e},s.SaveSelectedImagesToBytes=function(e,t){e=f.getSWebTwain().SaveSelectedImagesToBytes(e,t);return m.setErrorString(f),e},s.LoadImageFromBytes=function(e,t,r){if(!u())return!1;if(r!=d.I.DWT.EnumDWT_ImageType.IT_BMP&&r!=d.I.DWT.EnumDWT_ImageType.IT_JPG&&r!=d.I.DWT.EnumDWT_ImageType.IT_TIF&&r!=d.I.DWT.EnumDWT_ImageType.IT_PNG&&r!=d.I.DWT.EnumDWT_ImageType.IT_PDF&&r!=d.I.DWT.EnumDWT_ImageType.IT_J2K&&(r=-1),!o(r))return!1;e=f.getSWebTwain().LoadImageFromBytes(e,t,r);return m.setErrorString(f),e},s.UnregisterEvent=function(e,t){return f.getSWebTwain().UnregisterEvent(e,t),m.checkErrorString(f)},s.SetImageWidth=function(e,t,r,n){var e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(n)&&n(f.ErrorCode,f.ErrorString),!1):(e=f.getSWebTwain().SetImageWidth(e,t),m.wrapperRet(f,e,r,n))},s.HTTPDownloadThroughPost=function(e,t,r,n,i){if(!u(i))return!1;if(r!=d.I.DWT.EnumDWT_ImageType.IT_BMP&&r!=d.I.DWT.EnumDWT_ImageType.IT_JPG&&r!=d.I.DWT.EnumDWT_ImageType.IT_TIF&&r!=d.I.DWT.EnumDWT_ImageType.IT_PNG&&r!=d.I.DWT.EnumDWT_ImageType.IT_PDF&&r!=d.I.DWT.EnumDWT_ImageType.IT_J2K&&(r=-1),!o(r,i))return!1;e=f.getSWebTwain().HTTPDownloadThroughPost(e,t,r);return m.wrapperRet(f,e,n,i)},s.SetCustomDSDataEx=function(e){return f.getSWebTwain().SetCustomDSDataEx(e),m.checkErrorString(f)},s.SetCustomDSData=function(e){return f.getSWebTwain().SetCustomDSData(e),m.checkErrorString(f)},s.GetCustomDSDataEx=function(){var e=f.getSWebTwain().GetCustomDSDataEx();return m.setErrorString(f),e},s.GetCustomDSData=function(e){e=f.getSWebTwain().GetCustomDSData(e);return m.setErrorString(f),e},s.ChangeBitDepth=function(e,t,r){e=c()(e);return isNaN(e)||e<0||e>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().ChangeBitDepth(e,t,r),m.checkErrorString(f))},s.ConvertToGrayScale=function(e,t,r){var n=c()(e);return isNaN(n)||n<0||n>=f.HowManyImagesInBuffer?(d.D.Errors.IndexOutOfRange(f),d.D.isFunction(r)&&r(f.ErrorCode,f.ErrorString),!1):(n=f.getSWebTwain().ConvertToGrayScale(e),m.wrapperRet(f,n,t,r))},s.ShowImageEditorEx=function(e,t,r,n,i){return f.getSWebTwain().ShowImageEditorEx(e,t,r,n,i),m.checkErrorString(f)},s.ClearTiffCustomTag=function(){return f.getSWebTwain().ClearTiffCustomTag(),m.checkErrorString(f)},s.SetTiffCustomTag=function(e,t,r){var n=+e;return d.I.Lib.isUndef(e)||d.I.Lib.isUndef(t)?(d.I.Lib.Errors.InvalidParameter(f),!1):n<=0||2147483647<n?(d.I.Lib.Errors.InvalidTiffTagError(f),!1):(f.getSWebTwain().SetTiffCustomTag(e,t,r),m.checkErrorString(f))},s.IsBlankImageExpress=function(e){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),!1;e=f.getSWebTwain().IsBlankImageExpress(e);return m.setErrorString(f),e},s._ChangeWidth=function(e){var t,r=document.getElementById(f._strDWTInnerContainerID);return(t=d.D.isString(e)&&0<e.length&&"%"===e.charAt(e.length-1)?e:t)||(e=c()(e))&&2<e&&(t=e-2+"px"),t&&(f._strWidth=t,f.getSWebTwain().style.width=t,r&&(r.style.width=t)),!0},s._ChangeHeight=function(e){var t,r=document.getElementById(f._strDWTInnerContainerID);return(t=d.D.isString(e)&&0<e.length&&"%"===e.charAt(e.length-1)?e:t)||(e=c()(e))&&(t=e+"px"),t&&(f._strHeight=t,f.getSWebTwain().style.height=t,r&&(r.style.height=t)),!0},s.SetSize=function(e,t){return this._ChangeWidth(e),this._ChangeHeight(t),!0},s.SetSelectedImageArea=function(e,t,r,n,i){return f.getSWebTwain().SetSelectedImageArea(e,t,r,n,i),m.checkErrorString(f)},s.SetVideoRotateMode=function(e){return f.getSWebTwain().SetVideoRotateMode(e),m.checkErrorString(f)},s.SetOpenSourceTimeout=function(e){return f.getSWebTwain().SetOpenSourceTimeout(e),m.checkErrorString(f)},s.SetHTTPHeader=function(e,t){return!1},s.GetImageURL=function(e,t,r){return""},s.GetImagePartURL=function(e){e=c()(e);if(isNaN(e)||e<0||e>=f.HowManyImagesInBuffer)return d.D.Errors.IndexOutOfRange(f),"";e=f.getSWebTwain().GetDIB(e);return m.setErrorString(f),e},s.GetLicenseInfo=function(e){try{var t,r,n=!1,i=(d.D.License.isLTS()?n=!0:f.getSWebTwain().ProductKey=e,f.getSWebTwain().GetLicenseInfo());m.checkErrorString(f)?((t=d.D.parse(i))&&t.message?(d.D.Errors.LicenseEmptyOrInvalid(f),f._errorString=t.message,t=undefined):n&&(t&&d.D.isArray(t.Detail)&&0<t.Detail.length&&(r=t.Detail[0].ExpireDate,d.I.DWT.lsexp(d.I.DWT.EnumInstance.dwt_desktop,r)),t.LTS=!0),f.__licenseInfo=(0,h.T)(t)):f.__licenseInfo=undefined}catch(o){f.__licenseInfo=undefined}return l().resolve(f.__licenseInfo)},s.LoadDibFromClipboard=function(e,t){var r=f.getSWebTwain().LoadDibFromClipboard();return r&&d.D.License.isLTS()&&d.I.DWT.lcvrf(f),m.wrapperRet(f,r,e,t)},s.LoadImage=function(e,t,r){if(!u(r))return!1;e=m.replaceLocalFilename(e),e=f.getSWebTwain().LoadImage(e);return e&&d.D.License.isLTS()&&d.I.DWT.lcvrf(f),m.wrapperRet(f,e,t,r)},s.LoadImageEx=function(e,t,r,n){if(!u(n))return!1;if(t!=d.I.DWT.EnumDWT_ImageType.IT_BMP&&t!=d.I.DWT.EnumDWT_ImageType.IT_JPG&&t!=d.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=d.I.DWT.EnumDWT_ImageType.IT_PNG&&t!=d.I.DWT.EnumDWT_ImageType.IT_PDF&&t!=d.I.DWT.EnumDWT_ImageType.IT_J2K&&(t=-1),!o(t,n))return!1;var e=m.replaceLocalFilename(e);return t==d.I.DWT.EnumDWT_ImageType.IT_ALL&&(t=-1),(e=f.getSWebTwain().LoadImageEx(e,t))&&d.D.License.isLTS()&&d.I.DWT.lcvrf(f),m.wrapperRet(f,e,r,n)},s.EnableSource=function(e,t,r){return f.AcquireImage(e,t,r),m.checkErrorString(f)},s.AcquireImage=function(e,t,r){var n=f.getSWebTwain(),i=null,o=null,a=null;return d.D.isUndefined(r)&&(d.D.isFunction(e)&&d.D.isFunction(t)||d.D.isFunction(e)&&d.D.isUndefined(t)||d.D.isFunction(e)&&null==t||null==e&&d.D.isFunction(t))?(i=null,d.D.isFunction(e)&&(o=e),d.D.isFunction(t)&&(a=t)):(i=d.D.isUndefined(e)||null==e?{}:d.D.clone(e),d.D.isFunction(t)&&(o=function o(){t(i)}),d.D.isFunction(r)&&(a=function a(){r(i,f._errorCode,f._errorString)})),!!u(a)&&(i!==undefined&&null!==i&&(null!=(e=i.SelectSourceByIndex)&&void 0!==e&&(n.SelectSourceByIndex(e),n.CloseSource(),n.OpenSource()),null!=(e=i.IfShowUI)&&void 0!==e&&(n.IfShowUI=e),null!=(e=i.PixelType)&&void 0!==e&&(n.PixelType=e),null!=(e=i.Resolution)&&void 0!==e&&(n.Resolution=e),null!=(e=i.IfFeederEnabled)&&void 0!==e&&(n.IfFeederEnabled=e),null!=(e=i.IfDuplexEnabled)&&void 0!==e&&(n.IfDuplexEnabled=e),null!=(e=i.IfDisableSourceAfterAcquire)&&void 0!==e&&(n.IfDisableSourceAfterAcquire=e)),f.getSWebTwain().RegisterEvent("OnPostTransferAsync",function(e){var t;e&&d.D.isString(e)&&(t=d.D.parse(e)),d.D.isFunction(f.__OnPostTransferAsync)&&f.__OnPostTransferAsync(t)}),f.getSWebTwain().RegisterEvent("OnPostAllTransfers",function(){m.checkErrorString(f)?(d.D.License.isLTS()&&d.I.DWT.lcvrf(f),d.D.isFunction(o)&&o()):d.D.isFunction(a)&&a(f._errorCode,f._errorString),d.D.isFunction(f.__OnPostAllTransfers)&&f.__OnPostAllTransfers()}),n.AcquireImage(),m.checkErrorString(f))},s.GenerateURLForUploadData=function(e,t,r){return d.I.DWT.EnumDWT_ImageType.IT_ALL,m.wrapperRet(f,!0,t,r)},s._innerFun=function(e,t,r){var n=f.getSWebTwain(),e=n[e];return"function"==typeof e?e.apply(n,t):e},s.ActiveUI=function(e,t){},s.startScan=function(){return new(l())(function(e,t){})},s.IndexToImageID=function(e){return e},s.ImageIDToIndex=function(e){return e},s.first=function(){return 0<f.HowManyImagesInBuffer&&(f.CurrentImageIndexInBuffer=0,f.__innerRefreshImage()),!0},s.previous=function(){var e;return 0<f.HowManyImagesInBuffer&&0<(e=f.CurrentImageIndexInBuffer)&&(f.CurrentImageIndexInBuffer=e-1,f.__innerRefreshImage()),!0},s.next=function(){var e,t=f.HowManyImagesInBuffer;return 0<t&&0<=(e=f.CurrentImageIndexInBuffer)&&e<t-1&&(f.CurrentImageIndexInBuffer=e+1,f.__innerRefreshImage()),!0},s.last=function(){var e=f.HowManyImagesInBuffer;return 0<e&&(f.CurrentImageIndexInBuffer=e-1,f.__innerRefreshImage()),!0},s.isUsingActiveX=function(){return!0},s.show=function(){return s.ShowImageEditor()},s.SetLTSInfo=function(e,t){return f.getSWebTwain().SetLTSInfo(e,t)},s.EnableBuffer=function(e){return f.getSWebTwain().Encrypt(e,0)},s.GetBuffer=function(e){return f.getSWebTwain().GetBuffer(e)},s.GetUUID=function(){return f.getSWebTwain().GetUUID()},s.__OnDispatchThumbnailEvt=function(e,t,r){1==r?d.D.isFunction(s["__"+e+"_Thumbnail"])&&("OnMouseClick"==e||"OnMouseDoubleClick"==e||"OnMouseMove"==e||"OnMouseWheel"==e||"OnKeyDown"==e?s["__"+e+"_Thumbnail"]():s["__"+e+"_Thumbnail"](t)):d.D.isFunction(s["__"+e])&&s["__"+e](t)},s._OnImageAreaSelected=function(e,t,r,n,i,o){var a="OnImageAreaSelected";1==o?d.D.isFunction(s["__"+a+"_Thumbnail"])&&s["__"+a+"_Thumbnail"](e,t,r,n,i):d.D.isFunction(s["__"+a])&&s["__"+a](e,t,r,n,i)},function a(r,n){(d.D.isFunction(r["__"+n])||d.D.isFunction(r["__"+n+"_Thumbnail"]))&&("OnImageAreaSelected"==n?r.getSWebTwain().RegisterEvent(n,r._OnImageAreaSelected):r.getSWebTwain().RegisterEvent(n,function(e,t){return r.__OnDispatchThumbnailEvt(n,e,t)}))});s.getSourceCount=function(e){return d.D.Errors.ActiveXNotSupport(f),d.D.Promise.resolve(f.getSWebTwain().SourceCount)},s.GetSourceCountAsync=function(e){return d.D.Errors.ActiveXNotSupport(f),d.D.Promise.resolve(f.getSWebTwain().SourceCount)},s._resetErr=function(){this._errorCode=0,this._errorString="";var e=d.I.DWT.licenseException;e.code=0,e.message=""},s._setConvertModeInner=function(e){if(!d.D.License.checkProductKey(f,{Core:!0}))return!1;e=+e;return f._resetErr(),isNaN(e)?(d.D.Errors.ParameterCannotEmpty(f),!1):1!=e&&2!=e&&3!=e&&4!=e?(d.D.Errors.InvalidValue(f),!1):(2==(f._pdfConvertMode=e)||d.D.License.hasPDFRProductKey(f)?f._pdfRealConvertMode=e:f._pdfRealConvertMode=2,!0)},s._setConvertMode=function(e){return!!f._setConvertModeInner(e)&&(f.getSWebTwain().SetPDFConvertMode(f._pdfRealConvertMode),!(2==f._pdfRealConvertMode&&1==f._pdfConvertMode||2==f._pdfRealConvertMode&&4==f._pdfConvertMode)||(d.D.Errors.LicenseNoPDF(f),!1))},s.__innerRefreshImage=function(){var e,t=f.HowManyImagesInBuffer;0<t&&(e=f.CurrentImageIndexInBuffer,f.__OnRefreshUI&&f.__OnRefreshUI(e,t))},s.__OnBitmapChangedEx=function(e,t,r,n,i){-1<i&&s._blts&&(1==t||2==t)&&(t=d.I.DWT.lgct(i),d.D.isFunction(f.__OnLtsverify)&&f.__OnLtsverify(t,1))},s._attachEvents=function(){var e=f.getSWebTwain(),t=d.I.Lib.detect.getVersionArray(String(f.VersionInfo));t.length<=2||t[0]<9||9==t[0]&&t[1]<=2||(""!=f.__OnPostTransfer&&e.RegisterEvent("OnPostTransfer",f.__OnPostTransfer),""!=f.__OnPostAllTransfers&&e.RegisterEvent("OnPostAllTransfers",f.__OnPostAllTransfers),""!=f.__OnPostLoad&&e.RegisterEvent("OnPostLoad",f.__OnPostLoad),a(f,"OnMouseClick"),a(f,"OnImageAreaSelected"),a(f,"OnTopImageInTheViewChanged"),a(f,"OnImageAreaDeSelected"),a(f,"OnMouseDoubleClick"),a(f,"OnMouseRightClick"),a(f,"OnMouseMove"),""!=f.__OnGetFilePath&&e.RegisterEvent("OnGetFilePath",f.__OnGetFilePath),""!=f.__OnAfterOperate&&e.RegisterEvent("OnAfterOperate",f.__OnAfterOperate),""!=f.__OnBeforeOperate&&e.RegisterEvent("OnBeforeOperate",f.__OnBeforeOperate),""!=f.__OnOperateStatus&&e.RegisterEvent("OnOperateStatus",f.__OnOperateStatus),""!=f.__OnBitmapChanged&&e.RegisterEvent("OnBitmapChanged",f.__OnBitmapChanged),""!=f.__OnBitmapChangedEx&&e.RegisterEvent("OnBitmapChangedEx",f.__OnBitmapChangedEx),""!=f.__OnPreAllTransfers&&e.RegisterEvent("OnPreAllTransfers",f.__OnPreAllTransfers),""!=f.__OnPreTransfer&&e.RegisterEvent("OnPreTransfer",f.__OnPreTransfer),""!=f.__OnSourceUIClose&&e.RegisterEvent("OnSourceUIClose",f.__OnSourceUIClose),""!=f.__OnTransferCancelled&&e.RegisterEvent("OnTransferCancelled",f.__OnTransferCancelled),""!=f.__OnTransferError&&e.RegisterEvent("OnTransferError",f.__OnTransferError),""!=f.__OnInternetTransferPercentage&&e.RegisterEvent("OnInternetTransferPercentage",f.__OnInternetTransferPercentage),""!=f.__OnInternetTransferPercentageEx&&e.RegisterEvent("OnInternetTransferPercentageEx",f.__OnInternetTransferPercentageEx),a(f,"OnMouseWheel"),a(f,"OnKeyDown"),a(f,"OnPaintDone"))}},d.D.noControl=function(e){if(d.I.DWT.IfUseEmbeddedDownloadNoticeForActiveX)if(d.D.isFunction(d.D.detect.onNoControl))d.D.detect.onNoControl(d.D.get(e._containerID),e._strWidth,e._strHeight);else for(var t=d.D.detect.arySTwains,r=0;r<t.length;r++){var n=t[r];o=n,s=a=void 0,a=d.D.get(o._strDWTNonInstallInnerContainerID),(s="")==a.innerHTML&&(o=d.I.DWT.ActiveXInstallWithCAB&&u.bIE?["<div style='display: block; border:solid black 1px; text-align:center; width:",o._strWidth,";height:",o._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join(""):(location.protocol,s=d.D.product.bHTML5Edition||u.bIE?d.I.dcp.getDSPath():u.bWin?d.D.product.getMSIPath():d.D.product.getPKGPath(),["<div style='display: block; border:solid black 1px; text-align:center; width:",o._strWidth,";height:",o._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install to use this sample.</li>","<li>Please click the below link to download it.</li>","<li><a href='",s,"'>Download</a></li>","</ul></div>"].join("")),a.innerHTML=o),d.D.show(n._strDWTNonInstallInnerContainerID),d.D.hide(n._strDWTInnerContainerID)}else{window;var e=d.D.product,i="";d.D.isFunction(d.I.OnWebTwainNotFoundOnWindowsCallback)&&(i=u.bIE||e.bHTML5Edition?d.I.dcp.getDSPath():e.getMSIPath(),d.I.OnWebTwainNotFoundOnWindowsCallback(e.name,i,e.bHTML5Edition,u.bIE,u.bSafari,d.D.detect.ssl,d.D.env.strIEVersion,!1))}var o,a,s}},1695:function(e,t,r){r.d(t,{D:function(){return i},I:function(){return n}});var n=window.Dynamsoft,i=window.Dynamsoft.Lib},1255:function(e,t,r){r.d(t,{$E:function(){return c},$n:function(){return i},Bm:function(){return a},CH:function(){return n},LX:function(){return d},Ne:function(){return o},Sf:function(){return l},UJ:function(){return s},Vn:function(){return h},oU:function(){return u}});var t=r(8066),t=r.n(t),n="17",i="3",o="0",a="0531",s=1,u=7,c=3,r=t()(t=t()(r="".concat(n,",").concat(i,",")).call(r,o,",")).call(t,a),t=0==o?"Dynamic Web TWAIN "+[n,i].join("."):"Dynamic Web TWAIN "+[n,i,o].join("."),l={JSVersion:r,ServerVersionInfo:r,ServerLinuxVersionInfo:r,ServerMacVersionInfo:r,ActiveXVersion:r,PdfVersion:"11.4.0.0531",ProductName:t,Containers:[],DynamicContainers:[],ContainerMap:{},Trial:!1,ResourcesPath:"Resources",Debug:!1,IfUpdateService:!1,AutoLoad:!0,ReConnectToService:!0,OnWebTwainReady:!1,OnWebTwainNotFound:!1,OnWebTwainOldPluginNotAllowed:!1,OnWebTwainNeedUpgrade:!1,OnWebTwainNeedUpgradeWebJavascript:!1,OnWebTwainInitMessage:!1,ViewerJSIntegerited:!0,ActiveXInstallWithCAB:!1,IfUseActiveXForIE10Plus:!1,IfInstallDWTModuleWithZIP:!1,IfUseEmbeddedDownloadNoticeForActiveX:!1,IfCheckDCP:!1,IfDisableDefaultSettings:!1,OnWebTwainWillInit:!1,IfAddMD5InUploadHeader:!1,IfAlwaysFocusOnPopupWindow:!0,IfConfineMaskWithinTheViewer:!0,IfUseWSPool:!1,UseDefaultViewer:!0,fetchOptions:{mode:"cors",credentials:"same-origin"},HideTrialMessage:!1,CheckCertExpired:!0,ConnectWithSocket:!1,SSLPort:18623,Port:18622,handshakeCode:undefined,organizationID:undefined,licenseServer:undefined,sessionPassword:"",ltsDebug:!1,showLoadingMsgDialog:!0},d={URL:"",UpdateDaysBeforeExpired:30},h={loaderBarClassName:"ds-dwt-loaderBar",loaderBarBackgroundColor:"",loaderBarSource:Dynamsoft.navInfoSync.bIE?Dynamsoft.Lib.loaderBarSourceIE:Dynamsoft.Lib.loaderBarSource,errorMessages:{ERR_MODULE_NOT_INSTALLED:"Error: The Dynamic Web TWAIN module is not installed.",ERR_BROWSER_NOT_SUPPORT:"Error: This browser is currently not supported.",ERR_CreateID_MustNotInContainers:"Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_WebTwainIdDuplicated:"Error: Duplicate id detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_NotContainer:"Error: The ID of the DIV for creating the new DWT object is invalid.",ERR_CreateID_WasmEnvNotLoaded:"Error: The wasm env not loaded.",ERR_DWT_NOT_DOWNLOADED:"Error: Failed to download the Dynamic Web TWAIN module.",limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encode:"Processing...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Scan Documents",load:"Load Local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",cut:"Cut Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Original Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:!0,visibility:{scan:!0,load:!0,print:!0,removeall:!0,removeselected:!0,rotateleft:!0,rotate:!0,rotateright:!0,deskew:!0,crop:!0,cut:!0,changeimagesize:!0,flip:!0,mirror:!0,zoomin:!0,originalsize:!0,zoomout:!0,stretch:!0,fit:!0,fitw:!0,fith:!0,hand:!0,rectselect:!0,zoom:!0,restore:!0,save:!0,close:!0}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation method:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}}},4130:function(e,t,r){r.d(t,{R:function(){return i}});var n=1;function i(){return++n}},1188:function(e,t,r){r.d(t,{An:function(){return l},dv:function(){return d},yN:function(){return c}});var t=r(5238),a=r.n(t),t=Dynamsoft.Lib,n=t.isString,i=t.isArray,o=t.each,s=!0,u=!1;function c(t,e){var r;n(e)?(t.push('"'),t.push(e),t.push('"')):i(e)?(r=s,t.push("["),o(e,function(e){r?r=u:t.push(","),c(t,e)}),t.push("]")):e===undefined?t.push('""'):t.push(e)}function l(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t}function d(){for(var e,t,r=[],n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return 0<i.length&&(1===i.length?(e=i[0],r.push("["),c(r,e),r.push("]")):2===i.length?(e=i[0],t=i[1],r.push("["),c(r,e),r.push(","),c(r,t),r.push("]")):c(r,a()(Array.prototype).call(i))),r.join("")}},5316:function(e,t,r){r=r(7784);e.exports=r},93:function(e,t,r){r=r(8196);e.exports=r},2772:function(e,t,r){r=r(8065);e.exports=r},327:function(e,t,r){r=r(5247);e.exports=r},3688:function(e,t,r){r=r(1955);e.exports=r},5684:function(e,t,r){r=r(9373);e.exports=r},682:function(e,t,r){r=r(1022);e.exports=r},729:function(e,t,r){r=r(7145);e.exports=r},4234:function(e,t,r){r=r(2073);e.exports=r},900:function(e,t,r){r=r(2348);e.exports=r},5598:function(e,t,r){r=r(5178);e.exports=r},6279:function(e,t,r){r=r(6361);e.exports=r},7679:function(e,t,r){r=r(8933);e.exports=r},2271:function(e,t,r){r=r(4471);e.exports=r},3536:function(e,t,r){r=r(1910);e.exports=r},9565:function(e,t,r){r=r(6507);e.exports=r},5012:function(e,t,r){r=r(3059);e.exports=r},8690:function(e,t,r){r=r(6670);e.exports=r},2679:function(e,t,r){r=r(6877);e.exports=r},4116:function(e,t,r){r=r(4888);e.exports=r},5626:function(e,t,r){r=r(7460);e.exports=r},4670:function(e,t,r){r=r(1895);e.exports=r},4942:function(e,t,r){r=r(3474);e.exports=r},5057:function(e,t,r){r=r(7989);e.exports=r},281:function(e,t,r){r=r(2547);e.exports=r},31:function(e,t,r){r=r(6509);e.exports=r},7877:function(e,t,r){r=r(7641);e.exports=r},1718:function(e,t,r){r=r(2010);e.exports=r},9002:function(e,t,r){r=r(3726);e.exports=r},5367:function(e,t,r){r(5906);r=r(5703);e.exports=r("Array").concat},2383:function(e,t,r){r(1501);r=r(5703);e.exports=r("Array").filter},8700:function(e,t,r){r(9076);r=r(5703);e.exports=r("Array").indexOf},9728:function(e,t,r){r(8071);r=r(5703);e.exports=r("Array").lastIndexOf},4900:function(e,t,r){r(186);r=r(5703);e.exports=r("Array").slice},8209:function(e,t,r){r(8611);r=r(5703);e.exports=r("Array").splice},1103:function(e,t,r){r(5160);r=r(4058);e.exports=r.Date.now},7700:function(e,t,r){r(3381);r=r(5703);e.exports=r("Function").bind},6246:function(e,t,r){var n=r(7046),i=r(7700),o=Function.prototype;e.exports=function(e){var t=e.bind;return e===o||n(o,e)&&t===o.bind?i:t}},6043:function(e,t,r){var n=r(7046),i=r(5367),o=Array.prototype;e.exports=function(e){var t=e.concat;return e===o||n(o,e)&&t===o.concat?i:t}},1727:function(e,t,r){var n=r(7046),i=r(7796),o=String.prototype;e.exports=function(e){var t=e.endsWith;return"string"==typeof e||e===o||n(o,e)&&t===o.endsWith?i:t}},2480:function(e,t,r){var n=r(7046),i=r(2383),o=Array.prototype;e.exports=function(e){var t=e.filter;return e===o||n(o,e)&&t===o.filter?i:t}},4570:function(e,t,r){var n=r(7046),i=r(8700),o=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===o||n(o,e)&&t===o.indexOf?i:t}},7564:function(e,t,r){var n=r(7046),i=r(9728),o=Array.prototype;e.exports=function(e){var t=e.lastIndexOf;return e===o||n(o,e)&&t===o.lastIndexOf?i:t}},9279:function(e,t,r){var n=r(7046),i=r(9615),o=String.prototype;e.exports=function(e){var t=e.replaceAll;return"string"==typeof e||e===o||n(o,e)&&t===o.replaceAll?i:t}},9601:function(e,t,r){var n=r(7046),i=r(4900),o=Array.prototype;e.exports=function(e){var t=e.slice;return e===o||n(o,e)&&t===o.slice?i:t}},8339:function(e,t,r){var n=r(7046),i=r(8209),o=Array.prototype;e.exports=function(e){var t=e.splice;return e===o||n(o,e)&&t===o.splice?i:t}},1611:function(e,t,r){var n=r(7046),i=r(3269),o=String.prototype;e.exports=function(e){var t=e.startsWith;return"string"==typeof e||e===o||n(o,e)&&t===o.startsWith?i:t}},2774:function(e,t,r){var n=r(7046),i=r(3348),o=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===o||n(o,e)&&t===o.trim?i:t}},4426:function(e,t,r){r(2619);var n=r(4058),i=r(9730);n.JSON||(n.JSON={stringify:JSON.stringify}),e.exports=function(e,t,r){return i(n.JSON.stringify,null,arguments)}},5254:function(e,t,r){r(6950);var n=r(4058).Object;e.exports=function(e,t){return n.create(e,t)}},8171:function(e,t,r){r(6450);var n=r(4058).Object,i=e.exports=function i(e,t,r){return n.defineProperty(e,t,r)};n.defineProperty.sham&&(i.sham=!0)},3966:function(e,t,r){r(7405);r=r(4058);e.exports=r.Object.getPrototypeOf},8494:function(e,t,r){r(1724);r=r(4058);e.exports=r.Object.keys},3065:function(e,t,r){r(108);r=r(4058);e.exports=r.Object.setPrototypeOf},7579:function(e,t,r){r(9718);r=r(4058);e.exports=r.parseFloat},8524:function(e,t,r){r(4038);r=r(4058);e.exports=r.parseInt},2956:function(e,t,r){r(7627),r(6274),r(5967),r(8881),r(4560),r(7206),r(4349),r(7971);r=r(4058);e.exports=r.Promise},4983:function(e,t,r){r(7453);r=r(4058);e.exports=r.Reflect.construct},7796:function(e,t,r){r(1293);r=r(5703);e.exports=r("String").endsWith},9615:function(e,t,r){r(7091),r(3475),r(6226);r=r(5703);e.exports=r("String").replaceAll},3269:function(e,t,r){r(4761);r=r(5703);e.exports=r("String").startsWith},3348:function(e,t,r){r(6371);r=r(5703);e.exports=r("String").trim},7473:function(e,t,r){r(5906),r(5967),r(5824),r(8555),r(2615),r(1732),r(5903),r(1825),r(8394),r(5915),r(1766),r(2737),r(9911),r(4315),r(3131),r(4714),r(659),r(9120),r(5327),r(1502);r=r(4058);e.exports=r.Symbol},4227:function(e,t,r){r(6274),r(5967),r(7971),r(1825);r=r(1477);e.exports=r.f("iterator")},2304:function(e,t,r){r(6274),r(5967),r(4334);r=r(4058);e.exports=r.WeakMap},9567:function(e,t,r){r(6274),r(5967),r(1773);r=r(4058);e.exports=r.WeakSet},2626:function(e,t,r){e.exports=r(6526)},4122:function(e,t,r){e.exports=r(9097)},1086:function(e,t,r){e.exports=r(898)},7895:function(e,t,r){e.exports=r(8675)},4442:function(e,t,r){e.exports=r(1675)},9447:function(e,t,r){e.exports=r(628)},5376:function(e,t,r){e.exports=r(8460)},6769:function(e,t,r){e.exports=r(3893)},1493:function(e,t,r){e.exports=r(7088)},1777:function(e,t,r){e.exports=r(2792)},5319:function(e,t,r){e.exports=r(8744)},5425:function(e,t,r){e.exports=r(6384)},2740:function(e,t,r){e.exports=r(9821)},6094:function(e,t,r){e.exports=r(6467)},3685:function(e,t,r){e.exports=r(621)},4303:function(e,t,r){e.exports=r(8688)},3799:function(e,t,r){e.exports=r(2093)},5122:function(e,t,r){e.exports=r(5383)},1645:function(e,t,r){e.exports=r(5796)},3103:function(e,t,r){e.exports=r(6309)},9531:function(e,t,r){e.exports=r(2050)},856:function(e,t,r){e.exports=r(6733)},1490:function(e,t,r){e.exports=r(6170)},4803:function(e,t,r){e.exports=r(1051)},6600:function(e,t,r){e.exports=r(2201)},9759:function(e,t,r){e.exports=r(7398)},7740:function(e,t,r){e.exports=r(3085)},8714:function(e,t,r){e.exports=r(3463)},2790:function(e,t,r){e.exports=r(5069)},6526:function(e,t,r){r=r(5316);e.exports=r},9097:function(e,t,r){r=r(93);e.exports=r},898:function(e,t,r){r=r(2772);e.exports=r},8675:function(e,t,r){r=r(327);e.exports=r},1675:function(e,t,r){r=r(3688);e.exports=r},628:function(e,t,r){r=r(5684);e.exports=r},8460:function(e,t,r){r=r(682);e.exports=r},3893:function(e,t,r){r=r(729);e.exports=r},7088:function(e,t,r){r=r(4234);e.exports=r},2792:function(e,t,r){r=r(900);e.exports=r},8744:function(e,t,r){r=r(5598);e.exports=r},6384:function(e,t,r){r=r(6279);e.exports=r},9821:function(e,t,r){r=r(7679);e.exports=r},6467:function(e,t,r){r=r(2271);e.exports=r},621:function(e,t,r){r=r(3536);e.exports=r},8688:function(e,t,r){r=r(9565);e.exports=r},2093:function(e,t,r){r=r(5012);e.exports=r},5383:function(e,t,r){r=r(8690);e.exports=r},5796:function(e,t,r){r=r(2679);e.exports=r},6309:function(e,t,r){r=r(4116);e.exports=r},2050:function(e,t,r){var n=r(5626);r(9731),r(5708),r(14),r(8731),e.exports=n},6733:function(e,t,r){r=r(4670);e.exports=r},6170:function(e,t,r){r=r(4942);e.exports=r},1051:function(e,t,r){r=r(5057);e.exports=r},2201:function(e,t,r){var n=r(281);r(8783),r(3975),r(5799),r(1943),r(6774),r(5414),r(620),r(6172),e.exports=n},7398:function(e,t,r){r=r(31);e.exports=r},3085:function(e,t,r){r=r(7877);e.exports=r},3463:function(e,t,r){var n=r(1718);r(7971),r(6442),r(6207),r(3215),r(4629),r(4055),e.exports=n},5069:function(e,t,r){var n=r(9002);r(7971),r(5896),r(5501),r(2511),r(3309),e.exports=n},4883:function(e,t,r){var n=r(7475),i=r(9826),o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not a function")}},174:function(e,t,r){var n=r(4284),i=r(9826),o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not a constructor")}},1851:function(e,t,r){var n=r(7475),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},8479:function(e){e.exports=function(){}},5743:function(e,t,r){var n=r(7046),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw i("Incorrect invocation")}},6059:function(e,t,r){var n=r(941),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not an object")}},7135:function(e,t,r){r=r(5981);e.exports=r(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))})},1354:function(e,t,r){var h=r(6843),g=r(8834),f=r(9678),m=r(5196),_=r(6782),p=r(4284),I=r(623),D=r(5449),v=r(3476),b=r(2902),y=Array;e.exports=function(e){var t,r,n,i,o,a,s=f(e),e=p(this),u=arguments.length,c=1<u?arguments[1]:undefined,l=c!==undefined,u=(l&&(c=h(c,2<u?arguments[2]:undefined)),b(s)),d=0;if(!u||this===y&&_(u))for(t=I(s),r=e?new this(t):y(t);d<t;d++)a=l?c(s[d],d):s[d],D(r,d,a);else for(o=(i=v(s,u)).next,r=e?new this:[];!(n=g(o,i)).done;d++)a=l?m(i,c,[n.value,d],!0):n.value,D(r,d,a);return r.length=d,r}},1692:function(e,t,r){var u=r(4529),c=r(9413),l=r(623),r=function(s){return function(e,t,r){var n,i=u(e),o=l(i),a=c(r,o);if(s&&t!=t){for(;a<o;)if((n=i[a++])!=n)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===t)return s||a||0;return!s&&-1}};e.exports={includes:r(!0),indexOf:r(!1)}},3610:function(e,t,r){var v=r(6843),n=r(5329),b=r(7026),y=r(9678),T=r(623),S=r(4692),w=n([].push),r=function(h){var g=1==h,f=2==h,m=3==h,_=4==h,p=6==h,I=7==h,D=5==h||p;return function(e,t,r,n){for(var i,o,a=y(e),s=b(a),u=v(t,r),c=T(s),l=0,t=n||S,d=g?t(e,c):f||I?t(e,0):undefined;l<c;l++)if((D||l in s)&&(o=u(i=s[l],l,a),h))if(g)d[l]=o;else if(o)switch(h){case 3:return!0;case 5:return i;case 6:return l;case 2:w(d,i)}else switch(h){case 4:return!1;case 7:w(d,i)}return p?-1:m||_?_:d}};e.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6),filterReject:r(7)}},247:function(e,t,r){var i=r(9730),o=r(4529),a=r(2435),s=r(623),r=r(4194),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,r=r("lastIndexOf");e.exports=l||!r?function(e){if(l)return i(c,this,arguments)||0;var t=o(this),r=s(t),n=r-1;for((n=1<arguments.length?u(n,a(arguments[1])):n)<0&&(n=r+n);0<=n;n--)if(n in t&&t[n]===e)return n||0;return-1}:c},568:function(e,t,r){var n=r(5981),i=r(9813),o=r(3385),a=i("species");e.exports=function(t){return 51<=o||!n(function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},4194:function(e,t,r){var n=r(5981);e.exports=function(e,t){var r=[][e];return!!r&&n(function(){r.call(null,t||function(){return 1},1)})}},5790:function(e,t,r){var u=r(9413),c=r(623),l=r(5449),d=Array,h=Math.max;e.exports=function(e,t,r){for(var n=c(e),i=u(t,n),o=u(r===undefined?n:r,n),a=d(h(o-i,0)),s=0;i<o;i++,s++)l(a,s,e[i]);return a.length=s,a}},3765:function(e,t,r){r=r(5329);e.exports=r([].slice)},1388:function(e,t,r){var I=r(5790),D=Math.floor,v=function(e,t){var r=e.length,n=D(r/2);if(r<8){for(var i,o,a=e,s=t,u=a.length,c=1;c<u;){for(i=a[o=c];o&&0<s(a[o-1],i);)a[o]=a[--o];o!==c++&&(a[o]=i)}return a}for(var l=e,d=v(I(e,0,n),t),h=v(I(e,n),t),g=t,f=d.length,m=h.length,_=0,p=0;_<f||p<m;)l[_+p]=_<f&&p<m?g(d[_],h[p])<=0?d[_++]:h[p++]:_<f?d[_++]:h[p++];return l};e.exports=v},5693:function(e,t,r){var n=r(1052),i=r(4284),o=r(941),a=r(9813)("species"),s=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===s||n(t.prototype))||o(t)&&null===(t=t[a]))&&(t=undefined)),t===undefined?s:t}},4692:function(e,t,r){var n=r(5693);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},5196:function(e,t,r){var o=r(6059),a=r(7609);e.exports=function(e,t,r,n){try{return n?t(o(r)[0],r[1]):t(r)}catch(i){a(e,"throw",i)}}},1385:function(e,t,r){var i=r(9813)("iterator"),o=!1;try{var n=0,a={next:function(){return{done:!!n++}},return:function(){o=!0}};a[i]=function(){return this},Array.from(a,function(){throw 2})}catch(s){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var n={};n[i]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(s){}return r}},2532:function(e,t,r){var r=r(5329),n=r({}.toString),i=r("".slice);e.exports=function(e){return i(n(e),8,-1)}},9697:function(e,t,r){var n=r(2885),i=r(7475),o=r(2532),a=r(9813)("toStringTag"),s=Object,u="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(r){}}(e=s(e),a))?t:u?o(e):"Object"==(t=o(e))&&i(e.callee)?"Arguments":t}},8694:function(e,t,r){var r=r(5329),n=Error,i=r("".replace),r=String(n("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,a=o.test(r);e.exports=function(e,t){if(a&&"string"==typeof e&&!n.prepareStackTrace)for(;t--;)e=i(e,o,"");return e}},7622:function(e,t,r){var i=r(8834),o=r(4883),a=r(6059);e.exports=function(){for(var e=a(this),t=o(e.add),r=0,n=arguments.length;r<n;r++)i(t,e,arguments[r]);return e}},8984:function(e,t,r){var a=r(8834),s=r(4883),u=r(6059);e.exports=function(){for(var e,t=u(this),r=s(t.delete),n=!0,i=0,o=arguments.length;i<o;i++)e=a(r,t,arguments[i]),n=n&&e;return!!n}},3590:function(e,t,r){var s=r(6843),u=r(8834),c=r(4883),l=r(174),d=r(3091),h=[].push;e.exports=function(e){var t,r,n,i,o=arguments.length,a=1<o?arguments[1]:undefined;return l(this),(t=a!==undefined)&&c(a),e==undefined?new this:(r=[],t?(n=0,i=s(a,2<o?arguments[2]:undefined),d(e,function(e){u(h,r,i(e,n++))})):d(e,h,{that:r}),new this(r))}},5226:function(e,t,r){var n=r(3765);e.exports=function(){return new this(n(arguments))}},8850:function(e,t,r){var n=r(5329),u=r(4380),c=r(1647).getWeakData,l=r(6059),d=r(941),h=r(5743),g=r(3091),i=r(3610),f=r(953),r=r(5402),m=r.set,_=r.getterFor,o=i.find,a=i.findIndex,s=n([].splice),p=0,I=function(e){return e.frozen||(e.frozen=new D)},D=function(){this.entries=[]},v=function(e,t){return o(e.entries,function(e){return e[0]===t})};D.prototype={get:function(e){e=v(this,e);if(e)return e[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(t){var e=a(this.entries,function(e){return e[0]===t});return~e&&s(this.entries,e,1),!!~e}},e.exports={getConstructor:function(e,r,n,i){var e=e(function(e,t){h(e,o),m(e,{type:r,id:p++,frozen:undefined}),t!=undefined&&g(t,e[i],{that:e,AS_ENTRIES:n})}),o=e.prototype,a=_(r),s=function(e,t,r){var n=a(e),i=c(l(t),!0);return!0===i?I(n).set(t,r):i[n.id]=r,e};return u(o,{delete:function(e){var t=a(this);if(!d(e))return!1;var r=c(e);return!0===r?I(t).delete(e):r&&f(r,t.id)&&delete r[t.id]},has:function(e){var t=a(this);if(!d(e))return!1;var r=c(e);return!0===r?I(t).has(e):r&&f(r,t.id)}}),u(o,n?{get:function(e){var t,r=a(this);if(d(e))return!0===(t=c(e))?I(r).get(e):t?t[r.id]:undefined},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),e}}},4683:function(e,t,r){var h=r(6887),g=r(1899),f=r(1647),m=r(5981),_=r(2029),p=r(3091),I=r(5743),D=r(7475),v=r(941),b=r(904),y=r(5988).f,T=r(3610).forEach,S=r(5746),r=r(5402),w=r.set,C=r.getterFor;e.exports=function(r,e,t){var n,o,a,i=-1!==r.indexOf("Map"),s=-1!==r.indexOf("Weak"),u=i?"set":"add",c=g[r],l=c&&c.prototype,d={};return S&&D(c)&&(s||l.forEach&&!m(function(){(new c).entries().next()}))?(o=(n=e(function(e,t){w(I(e,o),{type:r,collection:new c}),t!=undefined&&p(t,e[u],{that:e,AS_ENTRIES:i})})).prototype,a=C(r),T(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(n){var i="add"==n||"set"==n;n in l&&(!s||"clear"!=n)&&_(o,n,function(e,t){var r=a(this).collection;if(!i&&s&&!v(e))return"get"==n&&undefined;e=r[n](0===e?0:e,t);return i?this:e})}),s||y(o,"size",{configurable:!0,get:function(){return a(this).collection.size}})):(n=t.getConstructor(e,r,i,u),f.enable()),b(n,r,!1,!0),d[r]=n,h({global:!0,forced:!0},d),s||t.setStrong(n,r,i),n}},3489:function(e,t,r){var u=r(953),c=r(1136),l=r(9677),d=r(5988);e.exports=function(e,t,r){for(var n=c(t),i=d.f,o=l.f,a=0;a<n.length;a++){var s=n[a];u(e,s)||r&&u(r,s)||i(e,s,o(t,s))}}},7772:function(e,t,r){var i=r(9813)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[i]=!1,"/./"[e](t)}catch(n){}}return!1}},4160:function(e,t,r){r=r(5981);e.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},1046:function(e,t,r){var i=r(5143).IteratorPrototype,o=r(9290),a=r(1887),s=r(904),u=r(2077),c=function(){return this};e.exports=function(e,t,r,n){t+=" Iterator";return e.prototype=o(i,{next:a(+!n,r)}),s(e,t,!1,!0),u[t]=c,e}},2029:function(e,t,r){var n=r(5746),i=r(5988),o=r(1887);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},1887:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5449:function(e,t,r){var n=r(3894),i=r(5988),o=r(1887);e.exports=function(e,t,r){t=n(t);t in e?i.f(e,t,o(0,r)):e[t]=r}},9202:function(e,t,r){var n=r(5988);e.exports=function(e,t,r){return n.f(e,t,r)}},5929:function(e,t,r){var i=r(2029);e.exports=function(e,t,r,n){return n&&n.enumerable?e[t]=r:i(e,t,r),e}},4380:function(e,t,r){var i=r(5929);e.exports=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:i(e,n,t[n],r);return e}},5609:function(e,t,r){var n=r(1899),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},7771:function(e,t,r){var m=r(6887),_=r(8834),p=r(2529),n=r(9417),I=r(7475),D=r(1046),v=r(249),b=r(8929),y=r(904),T=r(2029),S=r(5929),i=r(9813),w=r(2077),r=r(5143),C=n.PROPER,E=n.CONFIGURABLE,M=r.IteratorPrototype,P=r.BUGGY_SAFARI_ITERATORS,W=i("iterator"),x="values",k=function(){return this};e.exports=function(e,t,r,n,i,o,a){D(r,t,n);var s,u,n=function(e){if(e===i&&g)return g;if(!P&&e in d)return d[e];switch(e){case"keys":case x:case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},c=t+" Iterator",l=!1,d=e.prototype,h=d[W]||d["@@iterator"]||i&&d[i],g=!P&&h||n(i),f="Array"==t&&d.entries||h;if(f&&(e=v(f.call(new e)))!==Object.prototype&&e.next&&(p||v(e)===M||(b?b(e,M):I(e[W])||S(e,W,k)),y(e,c,!0,!0),p&&(w[c]=k)),C&&i==x&&h&&h.name!==x&&(!p&&E?T(d,"name",x):(l=!0,g=function(){return _(h,this)})),i)if(s={values:n(x),keys:o?g:n("keys"),entries:n("entries")},a)for(u in s)!P&&!l&&u in d||S(d,u,s[u]);else m({target:t,proto:!0,forced:P||l},s);return p&&!a||d[W]===g||S(d,W,g,{name:i}),w[t]=g,s}},6349:function(e,t,r){var n=r(4058),i=r(953),o=r(1477),a=r(5988).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},5863:function(e,t,r){var n=r(9826),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+n(t)+" of "+n(e))}},5746:function(e,t,r){r=r(5981);e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:function(e,t,r){var n=r(1899),r=r(941),i=n.document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},6796:function(e){var t=TypeError;e.exports=function(e){if(9007199254740991<e)throw t("Maximum allowed index exceeded");return e}},3281:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:function(e){e.exports="object"==typeof window&&"object"!=typeof Deno},4470:function(e,t,r){var n=r(2861),r=r(1899);e.exports=/ipad|iphone|ipod/i.test(n)&&r.Pebble!==undefined},2749:function(e,t,r){r=r(2861);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},6049:function(e,t,r){var n=r(2532),r=r(1899);e.exports="process"==n(r.process)},8045:function(e,t,r){r=r(2861);e.exports=/web0s(?!.*chrome)/i.test(r)},2861:function(e,t,r){r=r(626);e.exports=r("navigator","userAgent")||""},3385:function(e,t,r){var n,i,o=r(1899),r=r(2861),a=o.process,o=o.Deno,a=a&&a.versions||o&&o.version,o=a&&a.v8;!(i=o?0<(n=o.split("."))[0]&&n[0]<4?1:+(n[0]+n[1]):i)&&r&&(!(n=r.match(/Edge\/(\d+)/))||74<=n[1])&&(n=r.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},5703:function(e,t,r){var n=r(4058);e.exports=function(e){return n[e+"Prototype"]}},6759:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:function(e,t,r){var n=r(5981),i=r(1887);e.exports=!n(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)})},6887:function(e,t,r){var f=r(1899),m=r(9730),_=r(5329),p=r(7475),I=r(9677).f,D=r(7252),v=r(4058),b=r(6843),y=r(2029),T=r(953);e.exports=function(e,t){var r,n,i,o,a,s=e.target,u=e.global,c=e.stat,l=e.proto,d=u?f:c?f[s]:(f[s]||{}).prototype,h=u?v:v[s]||y(v,s,{})[s],g=h.prototype;for(r in t)o=!D(u?r:s+(c?".":"#")+r,e.forced)&&d&&T(d,r),i=h[r],o&&(a=e.dontCallGetSet?(a=I(d,r))&&a.value:d[r]),n=o&&a?a:t[r],o&&typeof i==typeof n||(o=e.bind&&o?b(n,f):e.wrap&&o?function(n){var i=function(e,t,r){if(this instanceof i){switch(arguments.length){case 0:return new n;case 1:return new n(e);case 2:return new n(e,t)}return new n(e,t,r)}return m(n,this,arguments)};return i.prototype=n.prototype,i}(n):l&&p(n)?_(n):n,(e.sham||n&&n.sham||i&&i.sham)&&y(o,"sham",!0),y(h,r,o),l&&(T(v,i=s+"Prototype")||y(v,i,{}),y(v[i],r,n),e.real&&g&&!g[r]&&y(g,r,n)))}},5981:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},5602:function(e,t,r){r=r(5981);e.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},9730:function(e,t,r){var r=r(8285),n=Function.prototype,i=n.apply,o=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(i):function(){return o.apply(i,arguments)})},6843:function(e,t,r){var n=r(5329),i=r(4883),o=r(8285),a=n(n.bind);e.exports=function(e,t){return i(e),t===undefined?e:o?a(e,t):function(){return e.apply(t,arguments)}}},8285:function(e,t,r){r=r(5981);e.exports=!r(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},8308:function(e,t,r){var n=r(5329),i=r(4883),o=r(941),l=r(953),d=r(3765),r=r(8285),h=Function,g=n([].concat),f=n([].join),m={};e.exports=r?h.bind:function(a){var s=i(this),e=s.prototype,u=d(arguments,1),c=function(){var e=g(u,d(arguments));if(this instanceof c){var t=s,r=e.length,n=e;if(!l(m,r)){for(var i=[],o=0;o<r;o++)i[o]="a["+o+"]";m[r]=h("C,a","return new C("+f(i,",")+")")}return m[r](t,n)}return s.apply(a,e)};return o(e)&&(c.prototype=e),c}},8834:function(e,t,r){var r=r(8285),n=Function.prototype.call;e.exports=r?n.bind(n):function(){return n.apply(n,arguments)}},9417:function(e,t,r){var n=r(5746),r=r(953),i=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,r=r(i,"name"),a=r&&"something"===function(){}.name,n=r&&(!n||o(i,"name").configurable);e.exports={EXISTS:r,PROPER:a,CONFIGURABLE:n}},5329:function(e,t,r){var r=r(8285),n=Function.prototype,i=n.bind,o=n.call,a=r&&i.bind(o,o);e.exports=r?function(e){return e&&a(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},626:function(e,t,r){var n=r(4058),i=r(1899),o=r(7475),a=function(e){return o(e)?e:undefined};e.exports=function(e,t){return arguments.length<2?a(n[e])||a(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},2902:function(e,t,r){var n=r(9697),i=r(4229),o=r(2077),a=r(9813)("iterator");e.exports=function(e){if(e!=undefined)return i(e,a)||i(e,"@@iterator")||o[n(e)]}},3476:function(e,t,r){var n=r(8834),i=r(4883),o=r(6059),a=r(9826),s=r(2902),u=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(i(r))return o(n(r,e));throw u(a(e)+" is not iterable")}},4229:function(e,t,r){var n=r(4883);e.exports=function(e,t){t=e[t];return null==t?undefined:n(t)}},4342:function(e,t,r){var n=r(5329),i=r(9678),h=Math.floor,g=n("".charAt),f=n("".replace),m=n("".slice),_=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,p=/\$([$&'`]|\d{1,2})/g;e.exports=function(o,a,s,u,c,e){var l=s+o.length,d=u.length,t=p;return c!==undefined&&(c=i(c),t=_),f(e,t,function(e,t){var r;switch(g(t,0)){case"$":return"$";case"&":return o;case"`":return m(a,0,s);case"'":return m(a,l);case"<":r=c[m(t,1,-1)];break;default:var n,i=+t;if(0==i)return e;if(d<i)return 0!==(n=h(i/10))&&n<=d?u[n-1]===undefined?g(t,1):u[n-1]+g(t,1):e;r=u[i-1]}return r===undefined?"":r})}},1899:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},953:function(e,t,r){var n=r(5329),i=r(9678),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},7748:function(e){e.exports={}},3146:function(e,t,r){var n=r(1899);e.exports=function(e,t){var r=n.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))}},5463:function(e,t,r){r=r(626);e.exports=r("document","documentElement")},2840:function(e,t,r){var n=r(5746),i=r(5981),o=r(1333);e.exports=!n&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},7026:function(e,t,r){var n=r(5329),i=r(5981),o=r(2532),a=Object,s=n("".split);e.exports=i(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?s(e,""):a(e)}:a},1302:function(e,t,r){var n=r(5329),i=r(7475),r=r(3030),o=n(Function.toString);i(r.inspectSource)||(r.inspectSource=function(e){return o(e)}),e.exports=r.inspectSource},3794:function(e,t,r){var n=r(941),i=r(2029);e.exports=function(e,t){n(t)&&"cause"in t&&i(e,"cause",t.cause)}},1647:function(e,t,r){var n=r(6887),a=r(5329),i=r(7748),o=r(941),s=r(953),u=r(5988).f,c=r(946),l=r(684),d=r(1584),h=r(9418),g=r(5602),f=!1,m=h("meta"),_=0,p=function(e){u(e,m,{value:{objectID:"O"+_++,weakData:{}}})},I=e.exports={enable:function(){I.enable=function(){},f=!0;var i=c.f,o=a([].splice),e={};e[m]=1,i(e).length&&(c.f=function(e){for(var t=i(e),r=0,n=t.length;r<n;r++)if(t[r]===m){o(t,r,1);break}return t},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,m)){if(!d(e))return"F";if(!t)return"E";p(e)}return e[m].objectID},getWeakData:function(e,t){if(!s(e,m)){if(!d(e))return!0;if(!t)return!1;p(e)}return e[m].weakData},onFreeze:function(e){return g&&f&&d(e)&&!s(e,m)&&p(e),e}};i[m]=!0},5402:function(e,t,r){var n,i,o,a,s,u,c,l,d=r(8019),h=r(1899),g=r(5329),f=r(941),m=r(2029),_=r(953),p=r(3030),I=r(4262),r=r(7748),D="Object already initialized",v=h.TypeError,h=h.WeakMap;c=d||p.state?(n=p.state||(p.state=new h),i=g(n.get),o=g(n.has),a=g(n.set),s=function(e,t){if(o(n,e))throw new v(D);return t.facade=e,a(n,e,t),t},u=function(e){return i(n,e)||{}},function(e){return o(n,e)}):(r[l=I("state")]=!0,s=function(e,t){if(_(e,l))throw new v(D);return t.facade=e,m(e,l,t),t},u=function(e){return _(e,l)?e[l]:{}},function(e){return _(e,l)}),e.exports={set:s,get:u,has:c,enforce:function(e){return c(e)?u(e):s(e,{})},getterFor:function(t){return function(e){if(f(e)&&(e=u(e)).type===t)return e;throw v("Incompatible receiver, "+t+" required")}}}},6782:function(e,t,r){var n=r(9813),i=r(2077),o=n("iterator"),a=Array.prototype;e.exports=function(e){return e!==undefined&&(i.Array===e||a[o]===e)}},1052:function(e,t,r){var n=r(2532);e.exports=Array.isArray||function(e){return"Array"==n(e)}},7475:function(e){e.exports=function(e){return"function"==typeof e}},4284:function(e,t,r){var n=r(5329),i=r(5981),o=r(7475),a=r(9697),s=r(626),u=r(1302),c=function(){},l=[],d=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,g=n(h.exec),f=!h.exec(c),m=function(e){if(!o(e))return!1;try{return d(c,l,e),!0}catch(t){return!1}},r=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!g(h,u(e))}catch(t){return!0}};r.sham=!0,e.exports=!d||i(function(){var e;return m(m.call)||!m(Object)||!m(function(){e=!0})||e})?r:m},7252:function(e,t,r){var n=r(5981),i=r(7475),o=/#|\.prototype\./,r=function(e,t){e=s[a(e)];return e==c||e!=u&&(i(t)?n(t):!!t)},a=r.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=r.data={},u=r.NATIVE="N",c=r.POLYFILL="P";e.exports=r},941:function(e,t,r){var n=r(7475);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},2529:function(e){e.exports=!0},685:function(e,t,r){var n=r(941),i=r(2532),o=r(9813)("match");e.exports=function(e){var t;return n(e)&&((t=e[o])!==undefined?!!t:"RegExp"==i(e))}},6664:function(e,t,r){var n=r(626),i=r(7475),o=r(7046),r=r(2302),a=Object;e.exports=r?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,a(e))}},3091:function(e,t,r){var p=r(6843),I=r(8834),D=r(6059),v=r(9826),b=r(6782),y=r(623),T=r(7046),S=r(3476),w=r(2902),C=r(7609),E=TypeError,M=function(e,t){this.stopped=e,this.result=t},P=M.prototype;e.exports=function(e,t,r){var n,i,o,a,s,u,c=r&&r.that,l=!(!r||!r.AS_ENTRIES),d=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),g=p(t,c),f=function(e){return n&&C(n,"normal",e),new M(!0,e)},m=function(e){return l?(D(e),h?g(e[0],e[1],f):g(e[0],e[1])):h?g(e,f):g(e)};if(d)n=e;else{if(!(r=w(e)))throw E(v(e)+" is not iterable");if(b(r)){for(i=0,o=y(e);i<o;i++)if((a=m(e[i]))&&T(P,a))return a;return new M(!1)}n=S(e,r)}for(s=n.next;!(u=I(s,n)).done;){try{a=m(u.value)}catch(_){C(n,"throw",_)}if("object"==typeof a&&a&&T(P,a))return a}return new M(!1)}},7609:function(e,t,r){var a=r(8834),s=r(6059),u=r(4229);e.exports=function(e,t,r){var n,i;s(e);try{if(!(n=u(e,"return"))){if("throw"===t)throw r;return r}n=a(n,e)}catch(o){i=!0,n=o}if("throw"===t)throw r;if(i)throw n;return s(n),r}},5143:function(e,t,r){var n,i,o=r(5981),a=r(7475),s=r(9290),u=r(249),c=r(5929),l=r(9813),r=r(2529),d=l("iterator"),l=!1;[].keys&&("next"in(i=[].keys())?(i=u(u(i)))!==Object.prototype&&(n=i):l=!0),n==undefined||o(function(){var e={};return n[d].call(e)!==e})?n={}:r&&(n=s(n)),a(n[d])||c(n,d,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:l}},2077:function(e){e.exports={}},623:function(e,t,r){var n=r(3057);e.exports=function(e){return n(e.length)}},8721:function(e,t,r){var a=r(8834),s=r(4883),u=r(6059);e.exports=function(e,t){var r=u(this),n=s(r.get),i=s(r.has),o=s(r.set),i=a(i,r,e)&&"update"in t?t.update(a(n,r,e),e,r):t.insert(e,r);return a(o,r,e,i),i}},716:function(e,t,r){var u=r(8834),c=r(4883),l=r(7475),d=r(6059),h=TypeError;e.exports=function(e,t){var r,n=d(this),i=c(n.get),o=c(n.has),a=c(n.set),s=2<arguments.length?arguments[2]:undefined;if(l(t)||l(s))return u(o,n,e)?(r=u(i,n,e),l(t)&&(r=t(r),u(a,n,e,r))):l(s)&&(r=s(),u(a,n,e,r)),r;throw h("At least one callback required")}},5331:function(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){e=+e;return(0<e?r:t)(e)}},6132:function(e,t,r){var n,i,o,a,s,u,c,l=r(1899),d=r(6843),h=r(9677).f,g=r(2941).set,f=r(2749),m=r(4470),_=r(8045),p=r(6049),r=l.MutationObserver||l.WebKitMutationObserver,I=l.document,D=l.process,v=l.Promise,h=h(l,"queueMicrotask"),h=h&&h.value;h||(n=function(){var e,t;for(p&&(e=D.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(r){throw i?a():o=undefined,r}}o=undefined,e&&e.enter()},a=f||p||_||!r||!I?!m&&v&&v.resolve?((f=v.resolve(undefined)).constructor=v,c=d(f.then,f),function(){c(n)}):p?function(){D.nextTick(n)}:(g=d(g,l),function(){g(n)}):(s=!0,u=I.createTextNode(""),new r(n).observe(u,{characterData:!0}),function(){u.data=s=!s})),e.exports=h||function(e){e={fn:e,next:undefined};o&&(o.next=e),i||(i=e,a()),o=e}},5366:function(e,t,r){r=r(2497);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},2497:function(e,t,r){var n=r(3385),r=r(5981);e.exports=!!Object.getOwnPropertySymbols&&!r(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},8468:function(e,t,r){var n=r(5981),i=r(9813),o=r(2529),a=i("iterator");e.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),r=e.searchParams,n="";return e.pathname="c%20d",r.forEach(function(e,t){r.delete("b"),n+=t+e}),o&&!e.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",undefined).host})},8019:function(e,t,r){var n=r(1899),i=r(7475),r=r(1302),n=n.WeakMap;e.exports=i(n)&&/native code/.test(r(n))},9520:function(e,t,r){var i=r(4883),n=function(e){var r,n;this.promise=new e(function(e,t){if(r!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");r=e,n=t}),this.resolve=i(r),this.reject=i(n)};e.exports.f=function(e){return new n(e)}},4649:function(e,t,r){var n=r(5803);e.exports=function(e,t){return e===undefined?arguments.length<2?"":t:n(e)}},344:function(e,t,r){var n=r(685),i=TypeError;e.exports=function(e){if(n(e))throw i("The method doesn't accept regular expressions");return e}},1942:function(e,t,r){var n=r(1899),i=r(5981),o=r(5329),a=r(5803),s=r(4853).trim,r=r(3483),u=o("".charAt),c=n.parseFloat,o=n.Symbol,l=o&&o.iterator,n=1/c(r+"-0")!=-Infinity||l&&!i(function(){c(Object(l))});e.exports=n?function parseFloat(e){var e=s(a(e)),t=c(e);return 0===t&&"-"==u(e,0)?-0:t}:c},9806:function(e,t,r){var n=r(1899),i=r(5981),o=r(5329),a=r(5803),s=r(4853).trim,r=r(3483),u=n.parseInt,n=n.Symbol,c=n&&n.iterator,l=/^[+-]?0x/i,d=o(l.exec),n=8!==u(r+"08")||22!==u(r+"0x16")||c&&!i(function(){u(Object(c))});e.exports=n?function parseInt(e,t){e=s(a(e));return u(e,t>>>0||(d(l,e)?16:10))}:u},4420:function(e,t,r){var h=r(5746),n=r(5329),g=r(8834),i=r(5981),f=r(4771),m=r(7857),_=r(6760),p=r(9678),I=r(7026),o=Object.assign,a=Object.defineProperty,D=n([].concat);e.exports=!o||i(function(){if(h&&1!==o({b:1},o(a({},"a",{enumerable:!0,get:function(){a(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=o({},e)[r]||f(o({},t)).join("")!=n})?function(e,t){for(var r=p(e),n=arguments.length,i=1,o=m.f,a=_.f;i<n;)for(var s,u=I(arguments[i++]),c=o?D(f(u),o(u)):f(u),l=c.length,d=0;d<l;)s=c[d++],h&&!g(a,u,s)||(r[s]=u[s]);return r}:o},9290:function(e,t,r){var i,n=r(6059),o=r(9938),a=r(6759),s=r(7748),u=r(5463),c=r(1333),r=r(4262),l="prototype",d="script",h=r("IE_PROTO"),g=function(){},f=function(e){return"<"+d+">"+e+"</"+d+">"},m=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},_=function(){try{i=new ActiveXObject("htmlfile")}catch(n){}_="undefined"==typeof document||document.domain&&i?m(i):(e=c("iframe"),t="java"+d+":",e.style.display="none",u.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F);for(var e,t,r=a.length;r--;)delete _[l][a[r]];return _()};s[h]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(g[l]=n(e),r=new g,g[l]=null,r[h]=e):r=_(),t===undefined?r:o.f(r,t)}},9938:function(e,t,r){var n=r(5746),i=r(3937),s=r(5988),u=r(6059),c=r(4529),l=r(4771);t.f=n&&!i?Object.defineProperties:function(e,t){u(e);for(var r,n=c(t),i=l(t),o=i.length,a=0;a<o;)s.f(e,r=i[a++],n[r]);return e}},5988:function(e,t,r){var n=r(5746),i=r(2840),o=r(3937),a=r(6059),s=r(3894),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",g="writable";t.f=n?o?function(e,t,r){var n;return a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&g in r&&!r[g]&&((n=l(e,t))&&n[g]&&(e[t]=r.value,r={configurable:(h in r?r:n)[h],enumerable:(d in r?r:n)[d],writable:!1})),c(e,t,r)}:c:function(e,t,r){if(a(e),t=s(t),a(r),i)try{return c(e,t,r)}catch(n){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},9677:function(e,t,r){var n=r(5746),i=r(8834),o=r(6760),a=r(1887),s=r(4529),u=r(3894),c=r(953),l=r(2840),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=s(e),t=u(t),l)try{return d(e,t)}catch(r){}if(c(e,t))return a(!i(o.f,e,t),e[t])}},684:function(e,t,r){var n=r(2532),i=r(4529),o=r(946).f,a=r(5790),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){if(!s||"Window"!=n(e))return o(i(e));try{return o(e)}catch(t){return a(s)}}},946:function(e,t,r){var n=r(5629),i=r(6759).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},7857:function(e,t){t.f=Object.getOwnPropertySymbols},249:function(e,t,r){var n=r(953),i=r(7475),o=r(9678),a=r(4262),r=r(4160),s=a("IE_PROTO"),u=Object,c=u.prototype;e.exports=r?u.getPrototypeOf:function(e){e=o(e);if(n(e,s))return e[s];var t=e.constructor;return i(t)&&e instanceof t?t.prototype:e instanceof u?c:null}},1584:function(e,t,r){var n=r(5981),i=r(941),o=r(2532),a=r(7135),s=Object.isExtensible,r=n(function(){s(1)});e.exports=r||a?function(e){return!!i(e)&&((!a||"ArrayBuffer"!=o(e))&&(!s||s(e)))}:s},7046:function(e,t,r){r=r(5329);e.exports=r({}.isPrototypeOf)},5629:function(e,t,r){var n=r(5329),a=r(953),s=r(4529),u=r(1692).indexOf,c=r(7748),l=n([].push);e.exports=function(e,t){var r,n=s(e),i=0,o=[];for(r in n)!a(c,r)&&a(n,r)&&l(o,r);for(;t.length>i;)!a(n,r=t[i++])||~u(o,r)||l(o,r);return o}},4771:function(e,t,r){var n=r(5629),i=r(6759);e.exports=Object.keys||function(e){return n(e,i)}},6760:function(e,t){var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){e=n(this,e);return!!e&&e.enumerable}:r},8929:function(e,t,r){var i=r(5329),o=r(6059),a=r(1851);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,e={};try{(r=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),n=e instanceof Array}catch(t){}return function(e,t){return o(e),a(t),n?r(e,t):e.__proto__=t,e}}():undefined)},5623:function(e,t,r){var n=r(2885),i=r(9697);e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},9811:function(e,t,r){var i=r(8834),o=r(7475),a=r(941),s=TypeError;e.exports=function(e,t){var r,n;if("string"===t&&o(r=e.toString)&&!a(n=i(r,e)))return n;if(o(r=e.valueOf)&&!a(n=i(r,e)))return n;if("string"!==t&&o(r=e.toString)&&!a(n=i(r,e)))return n;throw s("Can't convert object to primitive value")}},1136:function(e,t,r){var n=r(626),i=r(5329),o=r(946),a=r(7857),s=r(6059),u=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=a.f;return r?u(t,r(e)):t}},4058:function(e){e.exports={}},2:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},7742:function(e,t,r){var n=r(1899),i=r(6991),o=r(7475),a=r(7252),s=r(1302),u=r(9813),c=r(3321),l=r(2529),d=r(3385),h=i&&i.prototype,g=u("species"),f=!1,m=o(n.PromiseRejectionEvent),r=a("Promise",function(){var e=s(i),t=e!==String(i);if(!t&&66===d)return!0;if(l&&(!h.catch||!h.finally))return!0;if(51<=d&&/native code/.test(e))return!1;var e=new i(function(e){e(1)}),r=function(e){e(function(){},function(){})};return(e.constructor={})[g]=r,!(f=e.then(function(){})instanceof r)||!t&&c&&!m});e.exports={CONSTRUCTOR:r,REJECTION_EVENT:m,SUBCLASSING:f}},6991:function(e,t,r){r=r(1899);e.exports=r.Promise},6584:function(e,t,r){var n=r(6059),i=r(941),o=r(9520);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;e=o.f(e);return(0,e.resolve)(t),e.promise}},1542:function(e,t,r){var n=r(6991),i=r(1385),r=r(7742).CONSTRUCTOR;e.exports=r||!i(function(e){n.all(e).then(undefined,function(){})})},8397:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){e={item:e,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},6777:function(e,t,r){var n=r(6059);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},3613:function(e,t,r){var n=r(8834),i=r(953),o=r(7046),a=r(6777),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return t!==undefined||"flags"in s||i(e,"flags")||!o(s,e)?t:n(a,e)}},8219:function(e){var t=TypeError;e.exports=function(e){if(e==undefined)throw t("Can't call method on "+e);return e}},7620:function(e,t,r){var n=r(1899),a=r(9730),s=r(7475),i=r(2861),u=r(3765),c=r(8348),l=/MSIE .\./.test(i),d=n.Function,r=function(o){return l?function(e,t){var r=2<c(arguments.length,1),n=s(e)?e:d(e),i=r?u(arguments,2):undefined;return o(r?function(){a(n,this,i)}:n,t)}:o};e.exports={setTimeout:r(n.setTimeout),setInterval:r(n.setInterval)}},4431:function(e,t,r){var n=r(626),i=r(5988),o=r(9813),a=r(5746),s=o("species");e.exports=function(e){var e=n(e),t=i.f;a&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},904:function(e,t,r){var i=r(2885),o=r(5988).f,a=r(2029),s=r(953),u=r(5623),c=r(9813)("toStringTag");e.exports=function(e,t,r,n){e&&(r=r?e:e.prototype,s(r,c)||o(r,c,{configurable:!0,value:t}),n&&!i&&a(r,"toString",u))}},4262:function(e,t,r){var n=r(8726),i=r(9418),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},3030:function(e,t,r){var n=r(1899),r=r(5609),i="__core-js_shared__",n=n[i]||r(i,{});e.exports=n},8726:function(e,t,r){var n=r(2529),i=r(3030);(e.exports=function(e,t){return i[e]||(i[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.23.2",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.2/LICENSE",source:"https://github.com/zloirock/core-js"})},487:function(e,t,r){var n=r(6059),i=r(174),o=r(9813)("species");e.exports=function(e,t){var e=n(e).constructor;return e===undefined||(e=n(e)[o])==undefined?t:i(e)}},4620:function(e,t,r){var n=r(5329),o=r(2435),a=r(5803),s=r(8219),u=n("".charAt),c=n("".charCodeAt),l=n("".slice),r=function(i){return function(e,t){var r,e=a(s(e)),t=o(t),n=e.length;return t<0||n<=t?i?"":undefined:(r=c(e,t))<55296||56319<r||t+1===n||(n=c(e,t+1))<56320||57343<n?i?u(e,t):r:i?l(e,t,t+2):n-56320+(r-55296<<10)+65536}};e.exports={codeAt:r(!1),charAt:r(!0)}},3291:function(e,t,r){var r=r(5329),p=2147483647,I=36,D=26,v=38,b=700,o=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",T=I-1,S=RangeError,s=r(a.exec),w=Math.floor,C=String.fromCharCode,E=r("".charCodeAt),M=r([].join),P=r([].push),u=r("".replace),c=r("".split),l=r("".toLowerCase),W=function(e){return e+22+75*(e<26)},d=function(e){var t,r=[],n=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i,o=E(e,r++);55296<=o&&o<=56319&&r<n?56320==(64512&(i=E(e,r++)))?P(t,((1023&o)<<10)+(1023&i)+65536):(P(t,o),r--):P(t,o)}return t}(e)).length,i=128,o=0,a=72;for(l=0;l<e.length;l++)(t=e[l])<128&&P(r,C(t));var s=r.length,u=s;for(s&&P(r,"-");u<n;){for(var c=p,l=0;l<e.length;l++)i<=(t=e[l])&&t<c&&(c=t);var d=u+1;if(c-i>w((p-o)/d))throw S(y);for(o+=(c-i)*d,i=c,l=0;l<e.length;l++){if((t=e[l])<i&&++o>p)throw S(y);if(t==i){for(var h=o,g=I;;){var f=g<=a?1:a+D<=g?D:g-a;if(h<f)break;var m=h-f,_=I-f;P(r,C(W(f+m%_))),h=w(m/_),g+=I}P(r,C(W(h))),a=function(e,t,r){var n=0;for(e=r?w(e/b):e>>1,e+=w(e/t);T*D>>1<e;)e=w(e/T),n+=I;return w(n+(T+1)*e/(e+v))}(o,d,u==s),o=0,u++}}o++,i++}return M(r,"")};e.exports=function(e){for(var t,r=[],n=c(u(l(e),a,"."),"."),i=0;i<n.length;i++)t=n[i],P(r,s(o,t)?"xn--"+d(t):t);return M(r,".")}},3093:function(e,t,r){var n=r(9417).PROPER,i=r(5981),o=r(3483);e.exports=function(e){return i(function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e})}},4853:function(e,t,r){var n=r(5329),i=r(8219),o=r(5803),r=r(3483),a=n("".replace),n="["+r+"]",s=RegExp("^"+n+n+"*"),u=RegExp(n+n+"*$"),r=function(t){return function(e){e=o(i(e));return 1&t&&(e=a(e,s,"")),e=2&t?a(e,u,""):e}};e.exports={start:r(1),end:r(2),trim:r(3)}},9630:function(e,t,r){var n=r(8834),i=r(626),o=r(9813),a=r(5929);e.exports=function(){var e=i("Symbol"),e=e&&e.prototype,t=e&&e.valueOf,r=o("toPrimitive");e&&!e[r]&&a(e,r,function(e){return n(t,this)},{arity:1})}},2941:function(e,t,r){var n,i,o=r(1899),a=r(9730),s=r(6843),u=r(7475),c=r(953),l=r(5981),d=r(5463),h=r(3765),g=r(1333),f=r(8348),m=r(2749),r=r(6049),_=o.setImmediate,p=o.clearImmediate,I=o.process,D=o.Dispatch,v=o.Function,b=o.MessageChannel,y=o.String,T=0,S={},w="onreadystatechange";try{n=o.location}catch(W){}var C=function(e){var t;c(S,e)&&(t=S[e],delete S[e],t())},E=function(e){return function(){C(e)}},M=function(e){C(e.data)},P=function(e){o.postMessage(y(e),n.protocol+"//"+n.host)};_&&p||(_=function(e){f(arguments.length,1);var t=u(e)?e:v(e),r=h(arguments,1);return S[++T]=function(){a(t,undefined,r)},i(T),T},p=function(e){delete S[e]},r?i=function(e){I.nextTick(E(e))}:D&&D.now?i=function(e){D.now(E(e))}:b&&!m?(m=(r=new b).port2,r.port1.onmessage=M,i=s(m.postMessage,m)):o.addEventListener&&u(o.postMessage)&&!o.importScripts&&n&&"file:"!==n.protocol&&!l(P)?(i=P,o.addEventListener("message",M,!1)):i=w in g("script")?function(e){d.appendChild(g("script"))[w]=function(){d.removeChild(this),C(e)}}:function(e){setTimeout(E(e),0)}),e.exports={set:_,clear:p}},9413:function(e,t,r){var n=r(2435),i=Math.max,o=Math.min;e.exports=function(e,t){e=n(e);return e<0?i(e+t,0):o(e,t)}},4529:function(e,t,r){var n=r(7026),i=r(8219);e.exports=function(e){return n(i(e))}},2435:function(e,t,r){var n=r(5331);e.exports=function(e){e=+e;return e!=e||0==e?0:n(e)}},3057:function(e,t,r){var n=r(2435),i=Math.min;e.exports=function(e){return 0<e?i(n(e),9007199254740991):0}},9678:function(e,t,r){var n=r(8219),i=Object;e.exports=function(e){return i(n(e))}},6935:function(e,t,r){var n=r(8834),i=r(941),o=r(6664),a=r(4229),s=r(9811),r=r(9813),u=TypeError,c=r("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r=a(e,c);if(r){if(t===undefined&&(t="default"),r=n(r,e,t),!i(r)||o(r))return r;throw u("Can't convert object to primitive value")}return t===undefined&&(t="number"),s(e,t)}},3894:function(e,t,r){var n=r(6935),i=r(6664);e.exports=function(e){e=n(e,"string");return i(e)?e:e+""}},2885:function(e,t,r){var n={};n[r(9813)("toStringTag")]="z",e.exports="[object z]"===String(n)},5803:function(e,t,r){var n=r(9697),i=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},9826:function(e){var r=String;e.exports=function(e){try{return r(e)}catch(t){return"Object"}}},9418:function(e,t,r){var r=r(5329),n=0,i=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(e===undefined?"":e)+")_"+o(++n+i,36)}},2302:function(e,t,r){r=r(2497);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:function(e,t,r){var n=r(5746),r=r(5981);e.exports=n&&r(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8348:function(e){var r=TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},1477:function(e,t,r){r=r(9813);t.f=r},9813:function(e,t,r){var n=r(1899),i=r(8726),o=r(953),a=r(9418),s=r(2497),u=r(2302),c=i("wks"),l=n.Symbol,d=l&&l.for,h=u?l:l&&l.withoutSetter||a;e.exports=function(e){var t;return o(c,e)&&(s||"string"==typeof c[e])||(t="Symbol."+e,s&&o(l,e)?c[e]=l[e]:c[e]=(u&&d?d:h)(t)),c[e]}},3483:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9812:function(e,t,r){var n=r(6887),o=r(7046),a=r(249),s=r(8929),i=r(3489),u=r(9290),c=r(2029),l=r(1887),d=r(8694),h=r(3794),g=r(3091),f=r(4649),m=r(9813),_=r(8780),p=m("toStringTag"),I=Error,D=[].push,r=function(e,t){var r,n=2<arguments.length?arguments[2]:undefined,i=o(v,this),i=(s?r=s(new I,i?a(this):v):(r=i?this:u(v),c(r,p,"Error")),t!==undefined&&c(r,"message",f(t)),_&&c(r,"stack",d(r.stack,1)),h(r,n),[]);return g(e,D,{that:i}),c(r,"errors",i),r},v=(s?s(r,I):i(r,I,{name:!0}),r.prototype=u(I.prototype,{constructor:l(1,r),message:l(1,""),name:l(1,"AggregateError")}));n({global:!0,constructor:!0,arity:2},{AggregateError:r})},7627:function(e,t,r){r(9812)},5906:function(e,t,r){var n=r(6887),i=r(5981),c=r(1052),l=r(941),d=r(9678),h=r(623),g=r(6796),f=r(5449),m=r(4692),o=r(568),a=r(9813),r=r(3385),_=a("isConcatSpreadable"),a=51<=r||!i(function(){var e=[];return e[_]=!1,e.concat()[0]!==e}),r=o("concat");n({target:"Array",proto:!0,arity:1,forced:!a||!r},{concat:function(e){for(var t,r,n,i=d(this),o=m(i,0),a=0,s=-1,u=arguments.length;s<u;s++)if(function(e){if(!l(e))return!1;var t=e[_];return t!==undefined?!!t:c(e)}(n=-1===s?i:arguments[s]))for(r=h(n),g(a+r),t=0;t<r;t++,a++)t in n&&f(o,a,n[t]);else g(a+1),f(o,a++,n);return o.length=a,o}})},1501:function(e,t,r){var n=r(6887),i=r(3610).filter;n({target:"Array",proto:!0,forced:!r(568)("filter")},{filter:function(e){return i(this,e,1<arguments.length?arguments[1]:undefined)}})},9076:function(e,t,r){var n=r(6887),i=r(5329),o=r(1692).indexOf,r=r(4194),a=i([].indexOf),s=!!a&&1/a([1],1,-0)<0,i=r("indexOf");n({target:"Array",proto:!0,forced:s||!i},{indexOf:function(e){var t=1<arguments.length?arguments[1]:undefined;return s?a(this,e,t)||0:o(this,e,t)}})},6274:function(e,t,r){var n=r(4529),i=r(8479),o=r(2077),a=r(5402),s=r(5988).f,u=r(7771),c=r(2529),r=r(5746),l="Array Iterator",d=a.set,h=a.getterFor(l),a=(e.exports=u(Array,"Array",function(e,t){d(this,{type:l,target:n(e),index:0,kind:t})},function(){var e=h(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?{value:e.target=undefined,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values"),o.Arguments=o.Array);if(i("keys"),i("values"),i("entries"),!c&&r&&"values"!==a.name)try{s(a,"name",{value:"values"})}catch(g){}},8071:function(e,t,r){var n=r(6887),r=r(247);n({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},186:function(e,t,r){var n=r(6887),c=r(1052),l=r(4284),d=r(941),h=r(9413),g=r(623),f=r(4529),m=r(5449),i=r(9813),o=r(568),_=r(3765),r=o("slice"),p=i("species"),I=Array,D=Math.max;n({target:"Array",proto:!0,forced:!r},{slice:function(e,t){var r,n,i,o=f(this),a=g(o),s=h(e,a),u=h(t===undefined?a:t,a);if(c(o)&&(r=o.constructor,(r=l(r)&&(r===I||c(r.prototype))||d(r)&&null===(r=r[p])?undefined:r)===I||r===undefined))return _(o,s,u);for(n=new(r===undefined?I:r)(D(u-s,0)),i=0;s<u;s++,i++)s in o&&m(n,i,o[s]);return n.length=i,n}})},8611:function(e,t,r){var n=r(6887),d=r(9678),h=r(9413),g=r(2435),f=r(623),m=r(6796),_=r(4692),p=r(5449),I=r(5863),r=r(568)("splice"),D=Math.max,v=Math.min;n({target:"Array",proto:!0,forced:!r},{splice:function(e,t){var r,n,i,o,a,s,u=d(this),c=f(u),l=h(e,c),e=arguments.length;for(0===e?r=n=0:n=1===e?(r=0,c-l):(r=e-2,v(D(g(t),0),c-l)),m(c+r-n),i=_(u,n),o=0;o<n;o++)(a=l+o)in u&&p(i,o,u[a]);if(r<(i.length=n)){for(o=l;o<c-n;o++)s=o+r,(a=o+n)in u?u[s]=u[a]:I(u,s);for(o=c;c-n+r<o;o--)I(u,o-1)}else if(n<r)for(o=c-n;l<o;o--)s=o+r-1,(a=o+n-1)in u?u[s]=u[a]:I(u,s);for(o=0;o<r;o++)u[o+l]=arguments[o+2];return u.length=c-n+r,i}})},5160:function(e,t,r){var n=r(6887),r=r(5329),i=Date,o=r(i.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return o(new i)}})},3381:function(e,t,r){var n=r(6887),r=r(8308);n({target:"Function",proto:!0,forced:Function.bind!==r},{bind:r})},2619:function(e,t,r){var n=r(6887),i=r(626),o=r(9730),a=r(8834),s=r(5329),u=r(5981),c=r(1052),l=r(7475),d=r(941),h=r(6664),g=r(3765),r=r(2497),f=i("JSON","stringify"),m=s(/./.exec),_=s("".charAt),p=s("".charCodeAt),I=s("".replace),D=s(1..toString),v=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,y=/^[\uDC00-\uDFFF]$/,T=!r||u(function(){var e=i("Symbol")();return"[null]"!=f([e])||"{}"!=f({a:e})||"{}"!=f(Object(e))}),S=u(function(){return'"\\udf06\\ud834"'!==f("\udf06\ud834")||'"\\udead"'!==f("\udead")}),w=function(e,t){var r=g(arguments),n=t;if((d(t)||e!==undefined)&&!h(e))return c(t)||(t=function(e,t){if(l(n)&&(t=a(n,this,e,t)),!h(t))return t}),r[1]=t,o(f,null,r)},C=function(e,t,r){var n=_(r,t-1),r=_(r,t+1);return m(b,e)&&!m(y,r)||m(y,e)&&!m(b,n)?"\\u"+D(p(e,0),16):e};f&&n({target:"JSON",stat:!0,arity:3,forced:T||S},{stringify:function(e,t,r){var n=g(arguments),n=o(T?w:f,null,n);return S&&"string"==typeof n?I(n,v,C):n}})},9120:function(e,t,r){var n=r(1899);r(904)(n.JSON,"JSON",!0)},5327:function(){},6950:function(e,t,r){r(6887)({target:"Object",stat:!0,sham:!r(5746)},{create:r(9290)})},6450:function(e,t,r){var n=r(6887),i=r(5746),r=r(5988).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!i},{defineProperty:r})},7144:function(e,t,r){var n=r(6887),i=r(2497),o=r(5981),a=r(7857),s=r(9678);n({target:"Object",stat:!0,forced:!i||o(function(){a.f(1)})},{getOwnPropertySymbols:function(e){var t=a.f;return t?t(s(e)):[]}})},7405:function(e,t,r){var n=r(6887),i=r(5981),o=r(9678),a=r(249),r=r(4160);n({target:"Object",stat:!0,forced:i(function(){a(1)}),sham:!r},{getPrototypeOf:function(e){return a(o(e))}})},1724:function(e,t,r){var n=r(6887),i=r(9678),o=r(4771);n({target:"Object",stat:!0,forced:r(5981)(function(){o(1)})},{keys:function(e){return o(i(e))}})},108:function(e,t,r){r(6887)({target:"Object",stat:!0},{setPrototypeOf:r(8929)})},5967:function(){},9718:function(e,t,r){var n=r(6887),r=r(1942);n({global:!0,forced:parseFloat!=r},{parseFloat:r})},4038:function(e,t,r){var n=r(6887),r=r(9806);n({global:!0,forced:parseInt!=r},{parseInt:r})},4560:function(e,t,r){var n=r(6887),c=r(8834),l=r(4883),i=r(9520),o=r(2),d=r(3091);n({target:"Promise",stat:!0},{allSettled:function(e){var s=this,t=i.f(s),u=t.resolve,r=t.reject,n=o(function(){var n=l(s.resolve),i=[],o=0,a=1;d(e,function(e){var t=o++,r=!1;a++,c(n,s,e).then(function(e){r||(r=!0,i[t]={status:"fulfilled",value:e},--a||u(i))},function(e){r||(r=!0,i[t]={status:"rejected",reason:e},--a||u(i))})}),--a||u(i)});return n.error&&r(n.value),t.promise}})},6890:function(e,t,r){var n=r(6887),l=r(8834),d=r(4883),i=r(9520),o=r(2),h=r(3091);n({target:"Promise",stat:!0,forced:r(1542)},{all:function(e){var s=this,t=i.f(s),u=t.resolve,c=t.reject,r=o(function(){var n=d(s.resolve),i=[],o=0,a=1;h(e,function(e){var t=o++,r=!1;a++,l(n,s,e).then(function(e){r||(r=!0,i[t]=e,--a||u(i))},c)}),--a||u(i)});return r.error&&c(r.value),t.promise}})},7206:function(e,t,r){var n=r(6887),h=r(8834),g=r(4883),i=r(626),o=r(9520),a=r(2),f=r(3091),m="No one promise resolved";n({target:"Promise",stat:!0},{any:function(e){var u=this,c=i("AggregateError"),t=o.f(u),l=t.resolve,d=t.reject,r=a(function(){var n=g(u.resolve),i=[],o=0,a=1,s=!1;f(e,function(e){var t=o++,r=!1;a++,h(n,u,e).then(function(e){r||s||(s=!0,l(e))},function(e){r||s||(r=!0,i[t]=e,--a||d(new c(i,m)))})}),--a||d(new c(i,m))});return r.error&&d(r.value),t.promise}})},3376:function(e,t,r){var n=r(6887),i=r(2529),o=r(7742).CONSTRUCTOR,a=r(6991),s=r(626),u=r(7475),r=r(5929),c=a&&a.prototype;n({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(e){return this.then(undefined,e)}}),!i&&u(a)&&(o=s("Promise").prototype.catch,c.catch!==o&&r(c,"catch",o,{unsafe:!0}))},6934:function(V,A,e){var n,t,i,B=e(6887),O=e(2529),g=e(6049),f=e(1899),m=e(8834),r=e(5929),o=e(8929),R=e(904),U=e(4431),G=e(4883),a=e(7475),H=e(941),j=e(5743),z=e(487),_=e(2941).set,s=e(6132),Z=e(3146),J=e(2),X=e(8397),u=e(5402),c=e(6991),l=e(7742),e=e(9520),d="Promise",h=l.CONSTRUCTOR,Y=l.REJECTION_EVENT,l=l.SUBCLASSING,p=u.getterFor(d),K=u.set,u=c&&c.prototype,I=c,D=u,v=f.TypeError,b=f.document,y=f.process,T=e.f,Q=T,q=!!(b&&b.createEvent&&f.dispatchEvent),S="unhandledrejection",$="rejectionhandled",w=1,ee=2,C=1,E=2,M=function(e){var t;return!(!H(e)||!a(t=e.then))&&t},P=function(e,t){var r,n,i,o,a=t.value,s=t.state==w,u=s?e.ok:e.fail,c=e.resolve,l=e.reject,d=e.domain;try{u?(s||(t.rejection===E&&(o=t,m(_,f,function(){var e=o.facade;g?y.emit("rejectionHandled",e):x($,e,o.value)})),t.rejection=C),!0===u?r=a:(d&&d.enter(),r=u(a),d&&(d.exit(),i=!0)),r===e.promise?l(v("Promise-chain cycle")):(n=M(r))?m(n,r,c,l):c(r)):l(a)}catch(h){d&&!i&&d.exit(),l(h)}},W=function(r,i){r.notified||(r.notified=!0,s(function(){for(var e,n,t=r.reactions;e=t.get();)P(e,r);r.notified=!1,i&&!r.rejection&&(n=r,m(_,f,function(){var e=n.facade,t=n.value,r=k(n);if(r&&(r=J(function(){g?y.emit("unhandledRejection",t,e):x(S,e,t)}),n.rejection=g||k(n)?E:C,r.error))throw r.value}))}))},x=function(e,t,r){var n;q?((n=b.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),f.dispatchEvent(n)):n={promise:t,reason:r},!Y&&(t=f["on"+e])?t(n):e===S&&Z("Unhandled promise rejection",r)},k=function(e){return e.rejection!==C&&!e.parent},F=function(t,r,n){return function(e){t(r,e,n)}},L=function(e,t,r){e.done||(e.done=!0,(e=r?r:e).value=t,e.state=ee,W(e,!0))},N=function(r,n,e){if(!r.done){r.done=!0,e&&(r=e);try{if(r.facade===n)throw v("Promise can't be resolved itself");var i=M(n);i?s(function(){var e={done:!1};try{m(i,n,F(N,e,r),F(L,e,r))}catch(t){L(e,t,r)}}):(r.value=n,r.state=w,W(r,!1))}catch(t){L({done:!1},t,r)}}};if(h&&(D=(I=function Promise(e){j(this,D),G(e),m(n,this);var t=p(this);try{e(F(N,t),F(L,t))}catch(r){L(t,r)}}).prototype,(n=function Promise(e){K(this,{type:d,done:!1,notified:!1,parent:!1,reactions:new X,rejection:!1,state:0,value:undefined})}).prototype=r(D,"then",function(e,t){var r=p(this),n=T(z(this,I));return r.parent=!0,n.ok=!a(e)||e,n.fail=a(t)&&t,n.domain=g?y.domain:undefined,0==r.state?r.reactions.add(n):s(function(){P(n,r)}),n.promise}),t=function(){var e=new n,t=p(e);this.promise=e,this.resolve=F(N,t),this.reject=F(L,t)},e.f=T=function(e){return e===I||void 0===e?new t:Q(e)},!O&&a(c)&&u!==Object.prototype)){i=u.then,l||r(u,"then",function(e,t){var r=this;return new I(function(e,t){m(i,r,e,t)}).then(e,t)},{unsafe:!0});try{delete u.constructor}catch(te){}o&&o(u,D)}B({global:!0,constructor:!0,wrap:!0,forced:h},{Promise:I}),R(I,d,!1,!0),U(d)},4349:function(e,t,r){var n=r(6887),i=r(2529),o=r(6991),a=r(5981),s=r(626),u=r(7475),c=r(487),l=r(6584),r=r(5929),d=o&&o.prototype;n({target:"Promise",proto:!0,real:!0,forced:!!o&&a(function(){d.finally.call({then:function(){}},function(){})})},{finally:function(t){var r=c(this,s("Promise")),e=u(t);return this.then(e?function(e){return l(r,t()).then(function(){return e})}:t,e?function(e){return l(r,t()).then(function(){throw e})}:t)}}),!i&&u(o)&&(a=s("Promise").prototype.finally,d.finally!==a&&r(d,"finally",a,{unsafe:!0}))},8881:function(e,t,r){r(6934),r(6890),r(3376),r(5921),r(4069),r(4482)},5921:function(e,t,r){var n=r(6887),o=r(8834),a=r(4883),s=r(9520),u=r(2),c=r(3091);n({target:"Promise",stat:!0,forced:r(1542)},{race:function(e){var r=this,n=s.f(r),i=n.reject,t=u(function(){var t=a(r.resolve);c(e,function(e){o(t,r,e).then(n.resolve,i)})});return t.error&&i(t.value),n.promise}})},4069:function(e,t,r){var n=r(6887),i=r(8834),o=r(9520);n({target:"Promise",stat:!0,forced:r(7742).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return i(t.reject,undefined,e),t.promise}})},4482:function(e,t,r){var n=r(6887),i=r(626),o=r(2529),a=r(6991),s=r(7742).CONSTRUCTOR,u=r(6584),c=i("Promise"),l=o&&!s;n({target:"Promise",stat:!0,forced:o||s},{resolve:function(e){return u(l&&this===c?a:this,e)}})},7453:function(e,t,r){var n=r(6887),i=r(626),o=r(9730),a=r(8308),s=r(174),u=r(6059),c=r(941),l=r(9290),r=r(5981),d=i("Reflect","construct"),h=Object.prototype,g=[].push,f=r(function(){function e(){}return!(d(function(){},[],e)instanceof e)}),m=!r(function(){d(function(){})}),i=f||m;n({target:"Reflect",stat:!0,forced:i,sham:i},{construct:function(e,t){s(e),u(t);var r=arguments.length<3?e:s(arguments[2]);if(m&&!f)return d(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return o(g,n,t),new(o(a,e,n))}n=r.prototype,r=l(c(n)?n:h),n=o(e,r,t);return c(n)?n:r}})},1502:function(){},7091:function(){},1293:function(e,t,r){var n=r(6887),i=r(5329),o=r(9677).f,a=r(3057),s=r(5803),u=r(344),c=r(8219),l=r(7772),r=r(2529),d=i("".endsWith),h=i("".slice),g=Math.min,i=l("endsWith");n({target:"String",proto:!0,forced:!!(r||i||(!(l=o(String.prototype,"endsWith"))||l.writable))&&!i},{endsWith:function(e){var t=s(c(this)),r=(u(e),1<arguments.length?arguments[1]:undefined),n=t.length,r=r===undefined?n:g(a(r),n),n=s(e);return d?d(t,n,r):h(t,r-n.length,r)===n}})},7971:function(e,t,r){var n=r(4620).charAt,i=r(5803),o=r(5402),r=r(7771),a="String Iterator",s=o.set,u=o.getterFor(a);r(String,"String",function(e){s(this,{type:a,string:i(e),index:0})},function(){var e=u(this),t=e.string,r=e.index;return r>=t.length?{value:undefined,done:!0}:(t=n(t,r),e.index+=t.length,{value:t,done:!1})})},6226:function(e,t,r){var n=r(6887),f=r(8834),i=r(5329),m=r(8219),_=r(7475),p=r(685),I=r(5803),D=r(4229),v=r(3613),b=r(4342),o=r(9813),y=r(2529),T=o("replace"),S=TypeError,w=i("".indexOf),C=i("".replace),E=i("".slice),M=Math.max,P=function(e,t,r){return r>e.length?-1:""===t?r:w(e,t,r)};n({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,i,o,a,s,u,c,l=m(this),d=0,h=0,g="";if(null!=e){if((r=p(e))&&(n=I(m(v(e))),!~w(n,"g")))throw S("`.replaceAll` does not allow non-global regexes");if(n=D(e,T))return f(n,e,l,t);if(y&&r)return C(I(l),e,t)}for(i=I(l),o=I(e),(a=_(t))||(t=I(t)),s=o.length,u=M(1,s),d=P(i,o,0);-1!==d;)c=a?I(t(o,d,i)):b(o,i,d,[],undefined,t),g+=E(i,h,d)+c,h=d+s,d=P(i,o,d+u);return h<i.length&&(g+=E(i,h)),g}})},3475:function(){},4761:function(e,t,r){var n=r(6887),i=r(5329),o=r(9677).f,a=r(3057),s=r(5803),u=r(344),c=r(8219),l=r(7772),r=r(2529),d=i("".startsWith),h=i("".slice),g=Math.min,i=l("startsWith");n({target:"String",proto:!0,forced:!!(r||i||(!(l=o(String.prototype,"startsWith"))||l.writable))&&!i},{startsWith:function(e){var t=s(c(this)),r=(u(e),a(g(1<arguments.length?arguments[1]:undefined,t.length))),e=s(e);return d?d(t,e,r):h(t,r,r+e.length)===e}})},6371:function(e,t,r){var n=r(6887),i=r(4853).trim;n({target:"String",proto:!0,forced:r(3093)("trim")},{trim:function(){return i(this)}})},8555:function(e,t,r){r(6349)("asyncIterator")},8616:function(V,A,e){var t=e(6887),r=e(1899),n=e(8834),i=e(5329),B=e(2529),o=e(5746),a=e(2497),O=e(5981),s=e(953),R=e(7046),u=e(6059),c=e(4529),l=e(3894),U=e(5803),d=e(1887),h=e(9290),g=e(4771),G=e(946),f=e(684),H=e(7857),m=e(9677),_=e(5988),j=e(9938),p=e(6760),I=e(5929),D=e(8726),v=e(4262),z=e(7748),Z=e(9418),J=e(9813),X=e(1477),Y=e(6349),K=e(9630),Q=e(904),b=e(5402),y=e(3610).forEach,T=v("hidden"),S="Symbol",e="prototype",q=b.set,$=b.getterFor(S),w=Object[e],v=r.Symbol,C=v&&v[e],ee=r.TypeError,b=r.QObject,te=m.f,E=_.f,re=f.f,ne=p.f,ie=i([].push),M=D("symbols"),P=D("op-symbols"),r=D("wks"),W=!b||!b[e]||!b[e].findChild,x=o&&O(function(){return 7!=h(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=te(w,t);n&&delete w[t],E(e,t,r),n&&e!==w&&E(w,t,n)}:E,k=function(e,t){var r=M[e]=h(C);return q(r,{type:S,tag:e,description:t}),o||(r.description=t),r},F=function(e,t,r){e===w&&F(P,t,r),u(e);t=l(t);return u(r),s(M,t)?(r.enumerable?(s(e,T)&&e[T][t]&&(e[T][t]=!1),r=h(r,{enumerable:d(0,!1)})):(s(e,T)||E(e,T,d(1,{})),e[T][t]=!0),x(e,t,r)):E(e,t,r)},L=function(t,e){u(t);var r=c(e),e=g(r).concat(oe(r));return y(e,function(e){o&&!n(N,r,e)||F(t,e,r[e])}),t},N=function(e){var e=l(e),t=n(ne,this,e);return!(this===w&&s(M,e)&&!s(P,e))&&(!(t||!s(this,e)||!s(M,e)||s(this,T)&&this[T][e])||t)},i=function(e,t){var r,e=c(e),t=l(t);if(e!==w||!s(M,t)||s(P,t))return r=te(e,t),!r||!s(M,t)||s(e,T)&&e[T][t]||(r.enumerable=!0),r},D=function(e){var e=re(c(e)),t=[];return y(e,function(e){s(M,e)||s(z,e)||ie(t,e)}),t},oe=function(e){var t=e===w,e=re(t?P:c(e)),r=[];return y(e,function(e){!s(M,e)||t&&!s(w,e)||ie(r,M[e])}),r};a||(I(C=(v=function Symbol(){if(R(C,this))throw ee("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==undefined?U(arguments[0]):undefined,t=Z(e),r=function(e){this===w&&n(r,P,e),s(this,T)&&s(this[T],t)&&(this[T][t]=!1),x(this,t,d(1,e))};return o&&W&&x(w,t,{configurable:!0,set:r}),k(t,e)})[e],"toString",function(){return $(this).tag}),I(v,"withoutSetter",function(e){return k(Z(e),e)}),p.f=N,_.f=F,j.f=L,m.f=i,G.f=f.f=D,H.f=oe,X.f=function(e){return k(J(e),e)},o&&(E(C,"description",{configurable:!0,get:function(){return $(this).description}}),B||I(w,"propertyIsEnumerable",N,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!a,sham:!a},{Symbol:v}),y(g(r),function(e){Y(e)}),t({target:S,stat:!0,forced:!a},{useSetter:function(){W=!0},useSimple:function(){W=!1}}),t({target:"Object",stat:!0,forced:!a,sham:!o},{create:function(e,t){return t===undefined?h(e):L(h(e),t)},defineProperty:F,defineProperties:L,getOwnPropertyDescriptor:i}),t({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:D}),K(),Q(v,S),z[T]=!0},2615:function(){},4523:function(e,t,r){var n=r(6887),i=r(626),o=r(953),a=r(5803),s=r(8726),r=r(5366),u=s("string-to-symbol-registry"),c=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!r},{for:function(e){e=a(e);if(o(u,e))return u[e];var t=i("Symbol")(e);return u[e]=t,c[t]=e,t}})},1732:function(e,t,r){r(6349)("hasInstance")},5903:function(e,t,r){r(6349)("isConcatSpreadable")},1825:function(e,t,r){r(6349)("iterator")},5824:function(e,t,r){r(8616),r(4523),r(8608),r(2619),r(7144)},8608:function(e,t,r){var n=r(6887),i=r(953),o=r(6664),a=r(9826),s=r(8726),r=r(5366),u=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!r},{keyFor:function(e){if(!o(e))throw TypeError(a(e)+" is not a symbol");if(i(u,e))return u[e]}})},5915:function(e,t,r){r(6349)("matchAll")},8394:function(e,t,r){r(6349)("match")},1766:function(e,t,r){r(6349)("replace")},2737:function(e,t,r){r(6349)("search")},9911:function(e,t,r){r(6349)("species")},4315:function(e,t,r){r(6349)("split")},3131:function(e,t,r){var n=r(6349),r=r(9630);n("toPrimitive"),r()},4714:function(e,t,r){var n=r(626),i=r(6349),r=r(904);i("toStringTag"),r(n("Symbol"),"Symbol")},659:function(e,t,r){r(6349)("unscopables")},4776:function(e,t,r){var n,i,o,a,s,u=r(1899),c=r(5329),l=r(4380),d=r(1647),h=r(4683),g=r(8850),f=r(941),m=r(1584),_=r(5402).enforce,r=r(8019),u=!u.ActiveXObject&&"ActiveXObject"in u,p=function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}},h=h("WeakMap",p,g);r&&u&&(n=g.getConstructor(p,"WeakMap",!0),d.enable(),r=h.prototype,i=c(r.delete),o=c(r.has),a=c(r.get),s=c(r.set),l(r,{delete:function(e){var t;return f(e)&&!m(e)?((t=_(this)).frozen||(t.frozen=new n),i(this,e)||t.frozen.delete(e)):i(this,e)},has:function(e){var t;return f(e)&&!m(e)?((t=_(this)).frozen||(t.frozen=new n),o(this,e)||t.frozen.has(e)):o(this,e)},get:function(e){var t;return f(e)&&!m(e)?((t=_(this)).frozen||(t.frozen=new n),o(this,e)?a(this,e):t.frozen.get(e)):a(this,e)},set:function(e,t){var r;return f(e)&&!m(e)?((r=_(this)).frozen||(r.frozen=new n),o(this,e)?s(this,e,t):r.frozen.set(e,t)):s(this,e,t),this}}))},4334:function(e,t,r){r(4776)},1115:function(e,t,r){r(4683)("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}},r(8850))},1773:function(e,t,r){r(1115)},9731:function(e,t,r){r(7627)},5708:function(e,t,r){r(4560)},8731:function(e,t,r){r(7206)},14:function(e,t,r){var n=r(6887),i=r(9520),o=r(2);n({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=i.f(this),e=o(e);return(e.error?t.reject:t.resolve)(e.value),t.promise}})},8783:function(e,t,r){r(6349)("asyncDispose")},3975:function(e,t,r){r(6349)("dispose")},5799:function(e,t,r){r(6349)("matcher")},1943:function(e,t,r){r(6349)("metadataKey")},5414:function(e,t,r){r(6349)("metadata")},6774:function(e,t,r){r(6349)("observable")},620:function(e,t,r){r(6349)("patternMatch")},6172:function(e,t,r){r(6349)("replaceAll")},4629:function(e,t,r){r(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:r(8984)})},6442:function(e,t,r){r(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:r(8721)})},6207:function(e,t,r){r(6887)({target:"WeakMap",stat:!0,forced:!0},{from:r(3590)})},3215:function(e,t,r){r(6887)({target:"WeakMap",stat:!0,forced:!0},{of:r(5226)})},4055:function(e,t,r){r(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:r(716)})},5896:function(e,t,r){r(6887)({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:r(7622)})},5501:function(e,t,r){r(6887)({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:r(8984)})},2511:function(e,t,r){r(6887)({target:"WeakSet",stat:!0,forced:!0},{from:r(3590)})},3309:function(e,t,r){r(6887)({target:"WeakSet",stat:!0,forced:!0},{of:r(5226)})},7634:function(e,t,r){r(6274);var n,i=r(3281),o=r(1899),a=r(9697),s=r(2029),u=r(2077),c=r(9813)("toStringTag");for(n in i){var l=o[n],l=l&&l.prototype;l&&a(l)!==c&&s(l,c,n),u[n]=u.Array}},9229:function(e,t,r){var n=r(6887),i=r(1899),r=r(7620).setInterval;n({global:!0,bind:!0,forced:i.setInterval!==r},{setInterval:r})},7749:function(e,t,r){var n=r(6887),i=r(1899),r=r(7620).setTimeout;n({global:!0,bind:!0,forced:i.setTimeout!==r},{setTimeout:r})},1249:function(e,t,r){r(9229),r(7749)},2524:function(V,A,e){e(6274);var n,i,t,r=e(6887),o=e(1899),c=e(8834),a=e(5329),B=e(5746),s=e(8468),u=e(5929),O=e(4380),R=e(904),l=e(1046),d=e(5402),h=e(5743),g=e(7475),U=e(953),G=e(6843),H=e(9697),j=e(6059),f=e(941),m=e(5803),z=e(9290),_=e(1887),p=e(3476),Z=e(2902),I=e(8348),D=e(9813),J=e(1388),e=D("iterator"),v="URLSearchParams",b=v+"Iterator",y=d.set,T=d.getterFor(v),X=d.getterFor(b),Y=Object.getOwnPropertyDescriptor,D=function(e){if(!B)return o[e];e=Y(o,e);return e&&e.value},S=D("fetch"),w=D("Request"),C=D("Headers"),E=w&&w.prototype,d=C&&C.prototype,K=o.RegExp,Q=o.TypeError,M=o.decodeURIComponent,q=o.encodeURIComponent,$=a("".charAt),P=a([].join),W=a([].push),x=a("".replace),ee=a([].shift),k=a([].splice),F=a("".split),te=a("".slice),re=/\+/g,ne=Array(4),ie=function(e){try{return M(e)}catch(t){return e}},oe=function(e){var t,r=x(e,re," "),n=4;try{return M(r)}catch(i){for(;n;)r=x(r,(t=n--,ne[t-1]||(ne[t-1]=K("((?:%[\\da-f]{2}){"+t+"})","gi"))),ie);return r}},ae=/[!'()~]|%20/g,se={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ue=function(e){return se[e]},ce=function(e){return x(q(e),ae,ue)},L=l(function(e,t){y(this,{type:b,iterator:p(T(e).entries),kind:t})},"Iterator",function(){var e=X(this),t=e.kind,e=e.iterator.next(),r=e.value;return e.done||(e.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),e},!0),le=function(e){this.entries=[],this.url=null,e!==undefined&&(f(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===$(e,0)?te(e,1):e:m(e)))},D=(le.prototype={type:v,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,o,a,s=Z(e);if(s)for(r=(t=p(e,s)).next;!(n=c(r,t)).done;){if(i=(n=p(j(n.value))).next,(o=c(i,n)).done||(a=c(i,n)).done||!c(i,n).done)throw Q("Expected sequence with length 2");W(this.entries,{key:m(o.value),value:m(a.value)})}else for(var u in e)U(e,u)&&W(this.entries,{key:u,value:m(e[u])})},parseQuery:function(e){if(e)for(var t,r=F(e,"&"),n=0;n<r.length;)(t=r[n++]).length&&(t=F(t,"="),W(this.entries,{key:oe(ee(t)),value:oe(P(t,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],W(r,ce(e.key)+"="+ce(e.value));return P(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}},function URLSearchParams(){h(this,N);var e=0<arguments.length?arguments[0]:undefined;y(this,new le(e))}),N=D.prototype;O(N,{append:function(e,t){I(arguments.length,2);var r=T(this);W(r.entries,{key:m(e),value:m(t)}),r.updateURL()},delete:function(e){I(arguments.length,1);for(var t=T(this),r=t.entries,n=m(e),i=0;i<r.length;)r[i].key===n?k(r,i,1):i++;t.updateURL()},get:function(e){I(arguments.length,1);for(var t=T(this).entries,r=m(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){I(arguments.length,1);for(var t=T(this).entries,r=m(e),n=[],i=0;i<t.length;i++)t[i].key===r&&W(n,t[i].value);return n},has:function(e){I(arguments.length,1);for(var t=T(this).entries,r=m(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){I(arguments.length,1);for(var r,n=T(this),i=n.entries,o=!1,a=m(e),s=m(t),u=0;u<i.length;u++)(r=i[u]).key===a&&(o?k(i,u--,1):(o=!0,r.value=s));o||W(i,{key:a,value:s}),n.updateURL()},sort:function(){var e=T(this);J(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=T(this).entries,n=G(e,1<arguments.length?arguments[1]:undefined),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new L(this,"keys")},values:function(){return new L(this,"values")},entries:function(){return new L(this,"entries")}},{enumerable:!0}),u(N,e,N.entries,{name:"entries"}),u(N,"toString",function(){return T(this).serialize()},{enumerable:!0}),R(D,v),r({global:!0,constructor:!0,forced:!s},{URLSearchParams:D}),!s&&g(C)&&(n=a(d.has),i=a(d.set),t=function(e){if(f(e)){var t,r=e.body;if(H(r)===v)return t=e.headers?new C(e.headers):new C,n(t,"content-type")||i(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),z(e,{body:_(0,m(r)),headers:_(0,t)})}return e},g(S)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function fetch(e){return S(e,1<arguments.length?t(arguments[1]):{})}}),g(w)&&((E.constructor=l=function(e){return h(this,E),new w(e,1<arguments.length?t(arguments[1]):{})}).prototype=E,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:l}))),V.exports={URLSearchParams:D,getState:T}},5304:function(e,t,r){r(2524)},7250:function(f,m,e){e(7971);var I,_=e(6887),n=e(5746),p=e(8468),t=e(1899),R=e(6843),r=e(5329),i=e(5929),o=e(9202),U=e(5743),D=e(953),a=e(4420),v=e(1354),b=e(5790),G=e(4620).codeAt,H=e(3291),y=e(5803),j=e(904),z=e(8348),s=e(2524),e=e(5402),Z=e.set,u=e.getterFor("URL"),J=s.URLSearchParams,X=s.getState,e=t.URL,c=t.TypeError,T=t.parseInt,Y=Math.floor,K=Math.pow,S=r("".charAt),w=r(/./.exec),C=r([].join),Q=r(1..toString),q=r([].pop),E=r([].push),$=r("".replace),ee=r([].shift),te=r("".split),l=r("".slice),M=r("".toLowerCase),re=r([].unshift),ne="Invalid scheme",P="Invalid host",ie="Invalid port",oe=/[a-z]/i,ae=/[\d+-.a-z]/i,se=/\d/,ue=/^0x/i,ce=/^[0-7]+$/,le=/^\d+$/,de=/^[\da-f]+$/i,he=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ge=/[\0\t\n\r #/:<>?@[\\\]^|]/,fe=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,me=/[\t\n\r]/g,d=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)re(t,e%256),e=Y(e/256);return C(t,".")}if("object"!=typeof e)return e;for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(r<i&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return r<i&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i=i&&!1,n===r?(t+=r?":":"::",i=!0):(t+=Q(e[r],16),r<7&&(t+=":")));return"["+t+"]"},W={},_e=a({},W,{" ":1,'"':1,"<":1,">":1,"`":1}),pe=a({},_e,{"#":1,"?":1,"{":1,"}":1}),Ie=a({},pe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),x=function(e,t){var r=G(e,0);return 32<r&&r<127&&!D(t,e)?e:encodeURIComponent(e)},k={ftp:21,file:null,http:80,https:443,ws:80,wss:443},F=function(e,t){return 2==e.length&&w(oe,S(e,0))&&(":"==(e=S(e,1))||!t&&"|"==e)},De=function(e){return 1<e.length&&F(l(e,0,2))&&(2==e.length||"/"===(e=S(e,2))||"\\"===e||"?"===e||"#"===e)},ve={},be={},ye={},Te={},Se={},we={},Ce={},Ee={},L={},N={},Me={},Pe={},We={},xe={},ke={},Fe={},V={},A={},Le={},B={},O={},Ne=function(e,t,r){var n,i,e=y(e);if(t){if(i=this.parse(e))throw c(i);this.searchParams=null}else{if(r!==undefined&&(n=new Ne(r,!0)),i=this.parse(e,null,n))throw c(i);(t=X(new J)).bindURL(this),this.searchParams=t}},h=(Ne.prototype={type:"URL",parse:function(e,t,r){var n,i,o,a,s=this,u=t||ve,c=0,l="",d=!1,h=!1,g=!1;for(e=y(e),t||(s.scheme="",s.username="",s.password="",s.host=null,s.port=null,s.path=[],s.query=null,s.fragment=null,s.cannotBeABaseURL=!1,e=$(e,fe,"")),e=$(e,me,""),n=v(e);c<=n.length;){switch(i=n[c],u){case ve:if(!i||!w(oe,i)){if(t)return ne;u=ye;continue}l+=M(i),u=be;break;case be:if(i&&(w(ae,i)||"+"==i||"-"==i||"."==i))l+=M(i);else{if(":"!=i){if(t)return ne;l="",u=ye,c=0;continue}if(t&&(s.isSpecial()!=D(k,l)||"file"==l&&(s.includesCredentials()||null!==s.port)||"file"==s.scheme&&!s.host))return;if(s.scheme=l,t)return void(s.isSpecial()&&k[s.scheme]==s.port&&(s.port=null));l="","file"==s.scheme?u=xe:s.isSpecial()&&r&&r.scheme==s.scheme?u=Te:s.isSpecial()?u=Ee:"/"==n[c+1]?(u=Se,c++):(s.cannotBeABaseURL=!0,E(s.path,""),u=Le)}break;case ye:if(!r||r.cannotBeABaseURL&&"#"!=i)return ne;if(r.cannotBeABaseURL&&"#"==i){s.scheme=r.scheme,s.path=b(r.path),s.query=r.query,s.fragment="",s.cannotBeABaseURL=!0,u=O;break}u="file"==r.scheme?xe:we;continue;case Te:if("/"!=i||"/"!=n[c+1]){u=we;continue}u=L,c++;break;case Se:if("/"==i){u=N;break}u=A;continue;case we:if(s.scheme=r.scheme,i==I)s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=b(r.path),s.query=r.query;else if("/"==i||"\\"==i&&s.isSpecial())u=Ce;else if("?"==i)s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=b(r.path),s.query="",u=B;else{if("#"!=i){s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=b(r.path),s.path.length--,u=A;continue}s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=b(r.path),s.query=r.query,s.fragment="",u=O}break;case Ce:if(!s.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,u=A;continue}u=N}else u=L;break;case Ee:if(u=L,"/"!=i||"/"!=S(l,c+1))continue;c++;break;case L:if("/"==i||"\\"==i)break;u=N;continue;case N:if("@"==i){d&&(l="%40"+l);for(var d=!0,f=v(l),m=0;m<f.length;m++){var _=f[m];":"!=_||g?(_=x(_,Ie),g?s.password+=_:s.username+=_):g=!0}l=""}else if(i==I||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()){if(d&&""==l)return"Invalid authority";c-=v(l).length+1,l="",u=Me}else l+=i;break;case Me:case Pe:if(t&&"file"==s.scheme){u=Fe;continue}if(":"!=i||h){if(i==I||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()){if(s.isSpecial()&&""==l)return P;if(t&&""==l&&(s.includesCredentials()||null!==s.port))return;if(o=s.parseHost(l))return o;if(l="",u=V,t)return;continue}"["==i?h=!0:"]"==i&&(h=!1),l+=i}else{if(""==l)return P;if(o=s.parseHost(l))return o;if(l="",u=We,t==Pe)return}break;case We:if(!w(se,i)){if(i==I||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()||t){if(""!=l){var p=T(l,10);if(65535<p)return ie;s.port=s.isSpecial()&&p===k[s.scheme]?null:p,l=""}if(t)return;u=V;continue}return ie}l+=i;break;case xe:if(s.scheme="file","/"==i||"\\"==i)u=ke;else{if(!r||"file"!=r.scheme){u=A;continue}if(i==I)s.host=r.host,s.path=b(r.path),s.query=r.query;else if("?"==i)s.host=r.host,s.path=b(r.path),s.query="",u=B;else{if("#"!=i){De(C(b(n,c),""))||(s.host=r.host,s.path=b(r.path),s.shortenPath()),u=A;continue}s.host=r.host,s.path=b(r.path),s.query=r.query,s.fragment="",u=O}}break;case ke:if("/"==i||"\\"==i){u=Fe;break}r&&"file"==r.scheme&&!De(C(b(n,c),""))&&(F(r.path[0],!0)?E(s.path,r.path[0]):s.host=r.host),u=A;continue;case Fe:if(i==I||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&F(l))u=A;else if(""==l){if(s.host="",t)return;u=V}else{if(o=s.parseHost(l))return o;if("localhost"==s.host&&(s.host=""),t)return;l="",u=V}continue}l+=i;break;case V:if(s.isSpecial()){if(u=A,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=I&&(u=A,"/"!=i))continue}else s.fragment="",u=O;else s.query="",u=B;break;case A:if(i==I||"/"==i||"\\"==i&&s.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(p=M(p=l))||"%2e."===p||".%2e"===p||"%2e%2e"===p?(s.shortenPath(),"/"==i||"\\"==i&&s.isSpecial()||E(s.path,"")):"."===(a=l)||"%2e"===M(a)?"/"==i||"\\"==i&&s.isSpecial()||E(s.path,""):("file"==s.scheme&&!s.path.length&&F(l)&&(s.host&&(s.host=""),l=S(l,0)+":"),E(s.path,l)),l="","file"==s.scheme&&(i==I||"?"==i||"#"==i))for(;1<s.path.length&&""===s.path[0];)ee(s.path);"?"==i?(s.query="",u=B):"#"==i&&(s.fragment="",u=O)}else l+=x(i,pe);break;case Le:"?"==i?(s.query="",u=B):"#"==i?(s.fragment="",u=O):i!=I&&(s.path[0]+=x(i,W));break;case B:t||"#"!=i?i!=I&&("'"==i&&s.isSpecial()?s.query+="%27":s.query+="#"==i?"%23":x(i,W)):(s.fragment="",u=O);break;case O:i!=I&&(s.fragment+=x(i,_e))}c++}},parseHost:function(e){var t,r,n;if("["==S(e,0))return"]"==S(e,e.length-1)&&(t=function(e){var t,r,n,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,h=function(){return S(e,d)};if(":"==h()){if(":"!=S(e,1))return;d+=2,l=++c}for(;h();){if(8==c)return;if(":"==h()){if(null!==l)return;d++,l=++c}else{for(t=r=0;r<4&&w(de,h());)t=16*t+T(h(),16),d++,r++;if("."==h()){if(0==r)return;if(d-=r,6<c)return;for(n=0;h();){if(i=null,0<n){if(!("."==h()&&n<4))return;d++}if(!w(se,h()))return;for(;w(se,h());){if(o=T(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(255<i)return;d++}u[c]=256*u[c]+i,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;u[c++]=t}}if(null!==l)for(a=c-l,c=7;0!=c&&0<a;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u}(l(e,1,-1)))?void(this.host=t):P;if(this.isSpecial())return e=H(e),w(he,e)||null===(t=function(e){var t,r,n,i,o,a,s,u=te(e,".");if(u.length&&""==u[u.length-1]&&u.length--,4<(t=u.length))return e;for(r=[],n=0;n<t;n++){if(""==(i=u[n]))return e;if(o=10,1<i.length&&"0"==S(i,0)&&(o=w(ue,i)?16:8,i=l(i,8==o?1:2)),""===i)a=0;else{if(!w(10==o?le:8==o?ce:de,i))return e;a=T(i,o)}E(r,a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=K(256,5-t))return null}else if(255<a)return null;for(s=q(r),n=0;n<r.length;n++)s+=r[n]*K(256,3-n);return s}(e))?P:void(this.host=t);if(w(ge,e))return P;for(t="",r=v(e),n=0;n<r.length;n++)t+=x(r[n],W);this.host=t},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return D(k,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&F(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",e.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=d(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+C(a,"/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},setHref:function(e){e=this.parse(e);if(e)throw c(e);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new h(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+d(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",ve)},getUsername:function(){return this.username},setUsername:function(e){var t=v(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=x(t[r],Ie)}},getPassword:function(){return this.password},setPassword:function(e){var t=v(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=x(t[r],Ie)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?d(e):d(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Me)},getHostname:function(){var e=this.host;return null===e?"":d(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Pe)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=y(e))?this.port=null:this.parse(e,We))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+C(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,V))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=y(e))?this.query=null:("?"==S(e,0)&&(e=l(e,1)),this.query="",this.parse(e,B)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""==(e=y(e))?this.fragment=null:("#"==S(e,0)&&(e=l(e,1)),this.fragment="",this.parse(e,O))},update:function(){this.query=this.searchParams.serialize()||null}},function URL(e){var t=U(this,g),r=1<z(arguments.length,1)?arguments[1]:undefined,e=Z(t,new Ne(e,!1,r));n||(t.href=e.serialize(),t.origin=e.getOrigin(),t.protocol=e.getProtocol(),t.username=e.getUsername(),t.password=e.getPassword(),t.host=e.getHost(),t.hostname=e.getHostname(),t.port=e.getPort(),t.pathname=e.getPathname(),t.search=e.getSearch(),t.searchParams=e.getSearchParams(),t.hash=e.getHash())}),g=h.prototype,s=function(e,t){return{get:function(){return u(this)[e]()},set:t&&function(e){return u(this)[t](e)},configurable:!0,enumerable:!0}};n&&(o(g,"href",s("serialize","setHref")),o(g,"origin",s("getOrigin")),o(g,"protocol",s("getProtocol","setProtocol")),o(g,"username",s("getUsername","setUsername")),o(g,"password",s("getPassword","setPassword")),o(g,"host",s("getHost","setHost")),o(g,"hostname",s("getHostname","setHostname")),o(g,"port",s("getPort","setPort")),o(g,"pathname",s("getPathname","setPathname")),o(g,"search",s("getSearch","setSearch")),o(g,"searchParams",s("getSearchParams")),o(g,"hash",s("getHash","setHash"))),i(g,"toJSON",function(){return u(this).serialize()},{enumerable:!0}),i(g,"toString",function(){return u(this).serialize()},{enumerable:!0}),e&&(t=e.createObjectURL,r=e.revokeObjectURL,t&&i(h,"createObjectURL",R(t,e)),r&&i(h,"revokeObjectURL",R(r,e))),j(h,"URL"),_({global:!0,constructor:!0,forced:!p,sham:!n},{URL:h})},3601:function(e,t,r){r(7250)},8947:function(){},7784:function(e,t,r){r=r(1103);e.exports=r},8196:function(e,t,r){r=r(6246);e.exports=r},8065:function(e,t,r){r=r(6043);e.exports=r},5247:function(e,t,r){r=r(1727);e.exports=r},1955:function(e,t,r){r=r(2480);e.exports=r},9373:function(e,t,r){r=r(4570);e.exports=r},1022:function(e,t,r){r=r(7564);e.exports=r},7145:function(e,t,r){r=r(9279);e.exports=r},2073:function(e,t,r){r=r(9601);e.exports=r},2348:function(e,t,r){r=r(8339);e.exports=r},5178:function(e,t,r){r=r(1611);e.exports=r},6361:function(e,t,r){r=r(2774);e.exports=r},8933:function(e,t,r){r=r(4426);e.exports=r},4471:function(e,t,r){r=r(5254);e.exports=r},1910:function(e,t,r){r=r(8171);e.exports=r},6507:function(e,t,r){r=r(3966);e.exports=r},3059:function(e,t,r){r=r(8494);e.exports=r},6670:function(e,t,r){r=r(3065);e.exports=r},6877:function(e,t,r){r=r(7579);e.exports=r},4888:function(e,t,r){r=r(8524);e.exports=r},7460:function(e,t,r){var n=r(2956);r(7634),e.exports=n},1895:function(e,t,r){r=r(4983);e.exports=r},3474:function(e,t,r){r(1249);r=r(4058);e.exports=r.setInterval},7989:function(e,t,r){r(1249);r=r(4058);e.exports=r.setTimeout},2547:function(e,t,r){var n=r(7473);r(7634),e.exports=n},6509:function(e,t,r){var n=r(4227);r(7634),e.exports=n},7641:function(e,t,r){r=r(1459);e.exports=r},2010:function(e,t,r){var n=r(2304);r(7634),e.exports=n},3726:function(e,t,r){var n=r(9567);r(7634),e.exports=n},1459:function(e,t,r){r(3601),r(8947),r(5304);r=r(4058);e.exports=r.URL},630:function(V,A){var B={553:function(e){e=function(a){var u,e=Object.prototype,c=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(M){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof p?t:p,t=Object.create(t.prototype),n=new w(n||[]);return t._invoke=(i=e,o=r,a=n,s=h,function(e,t){if(s===f)throw new Error("Generator is already running");if(s===m){if("throw"===e)throw t;return E()}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r=r&&function n(e,t){var r=e.iterator[t.method];if(r!==u)return"throw"===(r=d(r,e.iterator,t.arg)).type?(t.method="throw",t.arg=r.arg,t.delegate=null,_):(r=r.arg)?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=u),t.delegate=null,_):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_);if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=u,n(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}(r,a)){if(r===_)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=m,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(s=f,"normal"===(r=d(i,o,a)).type){if(s=a.done?m:g,r.arg!==_)return{value:r.arg,done:a.done}}else"throw"===r.type&&(s=m,a.method="throw",a.arg=r.arg)}}),t}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(M){return{type:"throw",arg:M}}}a.wrap=l;var h="suspendedStart",g="suspendedYield",f="executing",m="completed",_={};function p(){}function o(){}function I(){}s(t={},i,function(){return this});var D=Object.getPrototypeOf,v=((D=D&&D(D(C([]))))&&D!==e&&c.call(D,i)&&(t=D),I.prototype=p.prototype=Object.create(t));function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(o,a){var t;this._invoke=function(r,n){function e(){return new a(function(e,t){!function s(e,t,r,n){var i;return"throw"!==(e=d(o[e],o,t)).type?(t=(i=e.arg).value)&&"object"==typeof t&&c.call(t,"__await")?a.resolve(t.__await).then(function(e){s("next",e,r,n)},function(e){s("throw",e,r,n)}):a.resolve(t).then(function(e){i.value=e,r(i)},function(e){return s("throw",e,r,n)}):void n(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t,r,n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return t=-1,(r=function r(){for(;++t<e.length;)if(c.call(e,t))return r.value=e[t],r.done=!1,r;return r.value=u,r.done=!0,r}).next=r}return{next:E}}function E(){return{value:u,done:!0}}return s(v,"constructor",o.prototype=I),s(I,"constructor",o),o.displayName=s(I,n,"GeneratorFunction"),a.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,s(e,n,"GeneratorFunction")),e.prototype=Object.create(v),e},a.awrap=function(e){return{__await:e}},b(y.prototype),s(y.prototype,r,function(){return this}),a.AsyncIterator=y,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new y(l(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(v),s(v,n,"Generator"),s(v,i,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function n(){for(;r.length;){var e=r.pop();if(e in t)return n.value=e,n.done=!1,n}return n.done=!0,n}},a.values=C,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,S(i)),n}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),_}},a}(e.exports);try{regeneratorRuntime=e}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},757:function(e,t,r){e.exports=r(553)}},R={};function n(e){var t=R[e];return t!==undefined||(t=R[e]={exports:{}},B[e](t,t.exports,n)),t.exports}function U(e,t){return(U=Object.setPrototypeOf||function U(e,t){return e.__proto__=t,e})(e,t)}function e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,U(e,t)}function g(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function G(e){return"function"==typeof e}function f(e){return"string"==typeof e}function r(e){return e=String(e),/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(e)}function l(e){return"number"==typeof e&&!isNaN(e)}function d(e){return"[object Boolean]"===Object.prototype.toString.call(e)}function o(e){var t=document.createElement("span");return t.style.background=e,t.style.background}function a(e){var t=document.createElement("span");return t.style.border=e,t.style.border||""===e}function H(){return"ontouchstart"in document.documentElement}function j(e){return e instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(e)}function z(e,t){for(var r in e)t[r]!==undefined&&c(e[r])&&c(t[r])?z(e[r],t[r]):t[r]=e[r]}function Z(e,t){for(var r in e){var n=e[r],i=t[r];i===undefined?t[r]=e[r]:f(n)&&c(i)?i.visibility=n:c(n)&&c(i)?Z(e[r],t[r]):t[r]=e[r]}}function m(e){var t=Math.random().toString(35).substring(2);return t.length<11&&(t+=Math.random().toString(35).substring(2)),e=Math.max(Math.min(Math.round(e),11),8),t.substring(0,e)}function J(e){var t,r;if(g(e))t=[];else{if(!c(e))return e;t={}}for(r in e){var n=e[r];g(e)||c(e)?t[r]=J(n):t[r]=n}return t}function X(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame,r=!!t;if(r=!(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString()))&&r)return t(e);var n={},i=null,o=+new Date;n[1]=e,null===i&&(i=setInterval(function(){var e,t=+new Date,r=n;for(e in n={},r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e](t),o=t);2500<t-o&&(clearInterval(i),i=null)},1e3/60))}function Y(){var e=window;if(e){if(e.devicePixelRatio)return e.devicePixelRatio;if(e.screen.deviceXDPI&&e.screen.logicalXDPI)return e.screen.deviceXDPI/e.screen.logicalXDPI}return 1}function K(e,t,r,n,i){var o=e+r/2,a=t+n/2,s=Q(e,t,o,a,i),u=Q(e+r,t,o,a,i),r=Q(e+r,t+n,o,a,i),e=Q(e,t+n,o,a,i),t=[u.x,s.x,e.x,r.x].sort(function(e,t){return e-t}),n=[u.y,s.y,e.y,r.y].sort(function(e,t){return e-t});return{x:t[0],y:n[0],width:t[3]-t[0],height:n[3]-n[0]}}function Q(e,t,r,n,i){return i=i/180*Math.PI,{x:(e-r)*Math.cos(i)-(t-n)*Math.sin(i)+r,y:(e-r)*Math.sin(i)+(t-n)*Math.cos(i)+n}}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var q=function(e){window.Dynamsoft&&window.Dynamsoft.Lib.debug&&window.Dynamsoft.Lib.log(e)},_={windowURL:window.URL||window.webkitURL,createURL:function(e){return f(e)?e:_.createURLWithType(e).data},createURLWithType:function(e){if(f(e)||undefined===e)return{type:"string",data:e};if(e instanceof Blob)return{type:"object",data:_.createObjectURL(e)};if(e.imageData&&e.imageData instanceof Blob)return{type:"object",data:_.createObjectURL(e.imageData)};if(e.imageData){var t=Object.prototype.toString.call(e.imageData);if(/\[object \w+Array\]/.test(t))return{type:"object",data:_.createObjectURL(new Blob([e.imageData]))}}else if(t=Object.prototype.toString.call(e),/\[object \w+Array\]/.test(t))return{type:"object",data:_.createObjectURL(new Blob([e]))};return/data:image\/\w+;base64/.test(e)?{type:"string",data:e}:{type:"object",data:e}},createObjectURL:function(e){return e?(e=_.windowURL.createObjectURL(e),q("createObjectURL:"+e),e):""},revokeObjectURL:function(e){q("revokeObjectURL:"+e),f(e)&&0==e.indexOf("blob:http")&&_.windowURL.revokeObjectURL(e)}},h=((t=te.prototype).getPublishSubscribe=function(){return this._oPub},t._on=function(e,t){t=this._oPub.on(e,t),this.push(e,t)},t._emit=function(e){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];null!=(t=this._oPub)&&t.emit.apply(t,[e].concat(n))},t._off=function(e,t){var r;null!=(r=this._oPub)&&r.off(e,t)},t._offById=function(e,t){var r;null!=(r=this._oPub)&&r.offById(e,t)},t.push=function(e,t){this._evtIds.push({name:e,id:t})},t.dispose=function(){if(this._oPub){for(var e=this._evtIds.length,t=0;t<e;t++){var r=this._evtIds[t];this._oPub.offById(r.name,r.id)}this._bDisposePub&&this._oPub&&this._oPub.dispose()}this._oPub=null},te),$=((t=ee.prototype).on=function(e,t){this._events[e]||(this._events[e]=[]);var r=m(10);return this._events[e].push({fn:t,evtId:r}),r},t.emit=function(e){var t=this._events[e];if(!t||0===t.length)return!1;for(var r=t.length,n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var a,s=0;s<r;s++)null!=(a=t[s])&&(a=a.fn).call.apply(a,[null].concat(i))},t.emitEx=function(e){var r=this._events[e];if(!r||0===r.length)return Promise.resolve(!0);for(var t=r.length,n=Promise.resolve(!0),i=arguments.length,o=new Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(1===r.length)return(e=null==(e=r[0])?void 0:(e=e.fn).call.apply(e,[null].concat(o)))instanceof Promise?e:n;for(var s=function s(e){var t=null==(e=r[e])?void 0:(e=e.fn).call.apply(e,[null].concat(o));t instanceof Promise&&(n=n.then(function(){return t}))},u=0;u<t;u++)s(u);return n},t.off=function(e,t){var r=this._events[e];if(!r)return!1;if(t)for(var n=r.length-1;0<=n;n--){var i=r[n];i&&i.fn===t&&r.splice(n,1),i=null}else r&&(r.length=0)},t.offById=function(e,t){var r=this._events[e];if(!r)return!1;if(t)for(var n=r.length-1;0<=n;n--){var i=r[n];if(i&&i.evtId===t){r.splice(n,1);break}i=null}else r&&(r.length=0)},t.dispose=function(){for(var e=Object.keys(this._events),t=0,r=e.length;t<r;t++){var n=e[t];(n=this._events[n])&&n.splice(0),n=null}this._events={}},ee);function ee(){this._events={}}function te(e){this._evtIds=[],this._oPub=null,this._bDisposePub=!1,e?this._oPub=e:(this._oPub=new $,this._bDisposePub=!0)}function re(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return r(c)}s.done?t(u):Promise.resolve(u).then(n,i)}function ne(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){re(n,t,r,i,o,"next",e)}function o(e){re(n,t,r,i,o,"throw",e)}i(undefined)})}}var ie,oe,ae,se,ue,t=n(757),s=n.n(t),u=(t="undefined"!=typeof window)?window:{},ce=(t&&0 in window.document.documentElement,t&&0 in u,"prev"),le="next",de="pageAreaSelected",p="pageAreaUnselected",he="_canvasVisibilityChanged",I="_updateErrorMessage",D="_updateLogMessage",ge="_DirectoryChanged",fe="_canvasRightClick",me="_afterRender",_e="_currentChanged",pe="_updateThbItem",Ie="_setScrollerSizeUI",De="_changeCanvasCursorUI",ve="_tabChangedUI",be="_updateForViewer",ye="_loadToViewer",Te="_openToViewer",Se="_loadPage",we="_removeViewerUid",S="_changePage",Ce="_reorderPage",Ee="_removePage",v="_editPage",Me="_loadToTag",Pe="_removePageTag",We="_addPageTag",xe="_emptyTag",ke="_renameTag",Fe="_tagChanged",Le="_appendSync",Ne="_updateSync",Ve="_loadToFile",Ae="_removeFile",Be="_renameFile",b={code:0,message:"ok."},y={code:80001,message:"The parameter type is wrong."},T={code:80002,message:"The parameter is out of range."},w={code:80003,message:"The image does not exist."},Oe={code:80006,message:"The file does not exist."},Re={code:80009,message:"Tag does not exist."},Ue={code:80010,message:"The tag already exists."},C={code:80011,message:"Element does not exist."},Ge={code:80012,message:"Page does not exist."},E={code:80013,message:"The parameter is invalid."},M={code:80016,message:"The color is invalid."},He={code:80017,message:"Failed to save image to database."},je={code:80018,message:"Failed to remove image from database by uid."},ze={code:80020,message:"Your browser does not support full screen."},Ze={code:80021,message:"The size is invalid."},Je={code:80022,message:"The operation mode is error."},O={code:80023,message:"The border is invalid."},Xe={code:80026,message:"The constructor of view ui is required."},Ye={code:80032,message:"The file already exists."},Ke=((N=et.prototype).calc3x3Matrix=function(e,t){for(var r=[],n=0;n<3;n++)for(var i=0;i<3;i++){var o=e[3*n+0]*t[i]+e[3*n+1]*t[i+3]+e[3*n+2]*t[i+6];r.push(o)}return r},N.rotateMatrix=function(e,t,r){e=e/180*Math.PI;var n=Math.sin(e);return[e=Math.cos(e),-n,(1-e)*t+r*n,n,e,(1-e)*r-t*n,0,0,1]},N.moveMatrix=function(e,t){return[1,0,e,0,1,t,0,0,1]},N.scaleMatrix=function(e){return[e,0,0,0,e,0,0,0,1]},N.flipMatrix=function(e,t){return[1-2*Math.pow(e,2),-2*e*t,0,-2*e*t,1-2*Math.pow(t,2),0,0,0,1]},N.toCanvasMatrix=function(e){for(var t=[0,3,1,4,2,5],r=0;r<t.length;r++)t[r]=e[t[r]];return t},N.getLatestResult=function(){return 0!==this.result.length?this.result[this.result.length-1].slice():null},N.rotatePoint=function Q(e,t,r,n,i){return i=i/180*Math.PI,{x:(e-r)*Math.cos(i)-(t-n)*Math.sin(i)+r,y:(e-r)*Math.sin(i)+(t-n)*Math.cos(i)+n}},N.rotateRect=function K(e,t,r,n,i){var o=e+r/2,a=t+n/2,s=this.rotatePoint(e,t,o,a,i),u=this.rotatePoint(e+r,t,o,a,i),r=this.rotatePoint(e+r,t+n,o,a,i),e=this.rotatePoint(e,t+n,o,a,i),t=[u.x,s.x,e.x,r.x].sort(function(e,t){return e-t}),n=[u.y,s.y,e.y,r.y].sort(function(e,t){return e-t});return{x:t[0],y:n[0],width:t[3]-t[0],height:n[3]-n[0]}},N.calcLineEquation=function(e,t){var r=t.y-e.y,n=e.x-t.x,e=t.x*e.y-e.x*t.y,t=r*r+n*n,i=[];return i.push((n*n-r*r)/t,-2*r*n/t,-2*r*e/t,-2*r*n/t,(r*r-n*n)/t,-2*n*e/t,0,0,1/t),i},N.setTransform=function(t){var r=this;this.matrix.forEach(function(e){e=r.toCanvasMatrix(e),t.transform.apply(t,e)})},N.setPointTransform=function(e,t){for(var r=0;r<this.matrix.length;r++){var n=e*(i=this.matrix[r])[0]+t*i[3],i=e*i[1]+t*i[4];e=n,t=i}return{x:e,y:t}},N.crop=function(e,t,r,n){return this._clear(),this.all.push(e={type:"crop",left:e,top:t,width:r,height:n}),e},N.erase=function(e,t,r,n,i){return this._clear(),this.all.push(e={type:"erase",left:e,top:t,width:r,height:n,color:i}),e},N.changePageSize=function(e,t){return this._clear(),this.all.push(e={type:"changeSize",width:e,height:t}),e},N.flip=function(e){this._flipNum+=1;var t=this._tAngle/180*Math.PI,r=Math.cos(t),n=-Math.sin(t),i=-Math.sin(t),t=-Math.cos(t),r=(this._flipNumX%2&&(i=-i,t=-t),this._flipNumY%2&&(r=-r,n=-n),{x:r,y:n}),n={x:i,y:t},i={x:0,y:0},t=null;if(0===e)this._flipNumX+=1,t=this.calcLineEquation(r,i);else{if(1!==e)return;this._flipNumY+=1,t=this.calcLineEquation(n,i)}return this.all.push(r={type:"flip",matrix:t,direction:e}),this.matrix.push(t),n=(n=this.getLatestResult())?this.calc3x3Matrix(t,n):t,this.result.push(n),r},N.calcFlipMatrix=function(e,t){return[1-2*e*e,-2*e*t,0,-2*e*t,1-2*t*t,0,0,0,1]},N.rotate=function(e,t,r,n){var i=!1,o=(null!==this._curMode&&(i=this._curMode===n||(this._clear(),!1)),this._curMode=n,this._flipNum%2&&(e=-e),this._tAngle+=e,e),r={type:"rotate",matrix:t=this.rotateMatrix(e,t||0,r||0),mode:n,angle:e,calcAngle:o=i?this._tAngle:o};return this.all.push(r),this.matrix.push(t),n=(n=this.getLatestResult())?this.calc3x3Matrix(t,n):t,this.result.push(n),r},N.translate=function(e,t){e=this.moveMatrix(e,t),this.all.push(e),this.matrix.push(e),t=(t=this.getLatestResult())?this.calc3x3Matrix(e,t):e,this.result.push(t)},N.calcTranslateDis=function(e,t){var r=this._tAngle/180*Math.PI,n=e*Math.cos(r),e=-e*Math.sin(r),i=t*Math.sin(r),t=t*Math.cos(r);return this._flipNumX%2&&(i=-i,t=-t),this._flipNumY%2&&(n=-n,e=-e),{x:n+i,y:e+t}},N.reset=function(){this.all=[],this._clear(),this._curMode=null},N.getCurAngle=function(){return this._tAngle},N._clear=function(){this.result=[],this.matrix=[],this._tAngle=0,this._flipNumX=0,this._flipNumY=0,this._flipNum=0},et),Qe=((N=$e.prototype).setTempSize=function(e,t){this.tempWidth=e,this.tempHeight=t},N.addViewer=function(e){-1===this.vws.indexOf(e)&&this.vws.push(e)},N.rmViewer=function(e){-1!==(e=this.vws.indexOf(e))&&this.vws.splice(e,1)},N.setTags=function(e){e.length<1||(this.tags=e.slice())},N.getTags=function(){return this.tags.slice()},$e),qe=(e(P,ie=h),(N=P.prototype).dispose=function(){ie.prototype.dispose.call(this),this._db=null},N._initEvent=function(){var o=this;this._on(Ne,function(e,t,r){o.updateSync(e,t,r)}),this._on(Ee,function(e,t){t.forEach(function(e){var t,r=o._db.getMid(e);r&&(f(r.oriData)&&_.revokeObjectURL(r.oriData),f(r.minData)&&_.revokeObjectURL(r.minData),(t=r.img)&&(t.src="",t.onload=null,t.onerror=null,r.img=null)),o._db.removeMid(e),o._db.getDataAsync(e).then(function(e){f(e.oriData)&&_.revokeObjectURL(e.oriData),f(e.minData)&&_.revokeObjectURL(e.minData)}).catch(function(e){}),o._db.removeDataAsync(e),o._db.removeMetadata(e)})}),this._on(ke,function(n,i,e){e.forEach(function(r){var e,t=o._db.getMid(r);t&&-1!==(e=t.tags.indexOf(n))&&t.tags.splice(e,1,i),o._db.getDataAsync(r).then(function(e){var t;e.tags&&-1!==(t=e.tags.indexOf(n))&&(e.tags.splice(t,1,i),o._db.updateDataAsync(r,e).catch(function(e){}))}).catch(function(e){})})}),this._on(xe,function(n,e,t){e.forEach(function(r){var e,t=o._db.getMid(r);t&&-1!==(e=t.tags.indexOf(n))&&t.tags.splice(e,1),o._db.getDataAsync(r).then(function(e){var t;e.tags&&-1!==(t=e.tags.indexOf(n))&&(e.tags.splice(t,1),o._db.updateDataAsync(r,e).catch(function(e){}))}).catch(function(e){})})}),this._on(We,function(t,r,e){var n=o._db.getMid(t);n&&-1===n.tags.indexOf(r)&&n.tags.push(t),o._db.getDataAsync(t).then(function(e){e.tags&&-1===e.tags.indexOf(r)&&(e.tags.push(t),o._db.updateDataAsync(t,e).catch(function(e){}))}).catch(function(e){})}),this._on(Pe,function(r,n,e){var t,i=o._db.getMid(r);i&&-1!==(t=i.tags.indexOf(n))&&i.tags.splice(t,1),o._db.getDataAsync(r).then(function(e){var t;e.tags&&-1!==(t=e.tags.indexOf(n))&&(e.tags.splice(t,1),o._db.updateDataAsync(r,e).catch(function(e){}))}).catch(function(e){})})},N.appendSync=function(e,t){return this._ckStr(e)&&this._ckArray(t)?(e=this._load(e,t),this._ok(),e):[]},N.insertSync=function(e,t,r){return this._ckStr(e)&&this._ckArray(t)?r===undefined?this.appendSync(e,t):(e=this._load(e,t,r),this._ok(),e):(this._thrEr(y),[])},N.updateSync=function(e,t,r){void 0===r&&(r=!0),this._emit(D,"Invoking DataControl#updateSync.");var n=this._db.getMid(e);if(!n)return!1;this._db.updateMetadata(e,t.metadata),t.customData&&(n.customData=t.customData),t.tags&&n.setTags(t.tags),r&&(_.revokeObjectURL(n.oriData),_.revokeObjectURL(n.minData)),n.minData=null,!n.overlays.length&&t.minData&&f(t.minData)&&(n.minData=t.minData),n.oriData=null,n.img=null,n.active=!1,n.activeMin=!1,n.minTask=null,n.edt.reset(),n.setTempSize(t.metadata.width,t.metadata.height),this._db.updateMid(e,n),t.tags||(t.tags=n.getTags()),t.customData||(t.customData=n.customData),this._db.updateDataAsync(e,t),this._emit(be,e,t)},N._load=function(e,r,t){for(var n=this,i=[],o=[],a=r.length,s=function s(e){var t={uid:m(11),data:r[e]},e=(o.push(t),i.push(t.uid),Object.assign({},t.data.metadata)),e=(n._db.addMetadata(t.uid,e),n._db.addDataAsync(t.uid,t.data).then(function(e){n._emit("_addDataToDBSuccess",t.uid,e)}).catch(function(e){n._emit("_addDataToDBFailed",t.uid,e)}),new Qe(t.uid,e));t.data.minData&&f(t.data.minData)&&(e.minData=t.data.minData),e.customData=t.data.customData||{},e.setTags(t.data.tags||[]),n._db.addMid(t.uid,e)},u=0;u<a;u++)s(u);return this._emit(Ve,e,o,t),o.slice().forEach(function(e){n._emit(Me,e)}),i},N._convertData=function(n){return new Promise(function(t,e){var r;c(n)?t(n):((r=new XMLHttpRequest).onload=function(){var e=_.createObjectURL(r.response);t(e)},r.open("GET",n,!0),r.responseType="blob",r.send())})},N.addData=(ue=ne(s().mark(function P(t,r){var n=this;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ckStr(t)&&c(r)){e.next=3;break}return this._thrEr(y),e.abrupt("return",this._err(y.message));case 3:return e.next=5,this._db.addDataAsync(t,r).then(function(e){return n._ok(),e}).catch(function(e){return n._thrEr(He),n._err(He.message)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},P,this)})),function(e,t){return ue.apply(this,arguments)}),N.getData=(se=ne(s().mark(function P(t){var r=this;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ckStr(t)){e.next=3;break}return this._thrEr(y),e.abrupt("return",this._err(y.message));case 3:return e.next=5,this._db.getDataAsync(t).then(function(e){return r._ok(),Promise.resolve(e)}).catch(function(e){return r._thrEr(w),r._err(w.message)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},P,this)})),function(e){return se.apply(this,arguments)}),N.removeData=(ae=ne(s().mark(function P(t){var r=this;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ckStr(t)){e.next=3;break}return this._thrEr(y),e.abrupt("return",this._err(y.message));case 3:return e.next=5,this._db.removeDataAsync(t).then(function(e){return r._ok(),e}).catch(function(e){return r._thrEr(je),r._err(je.message)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},P,this)})),function(e){return ae.apply(this,arguments)}),N.updateData=(oe=ne(s().mark(function P(t,r){var n=this;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ckStr(t)){e.next=3;break}return this._thrEr(y),e.abrupt("return",this._err(y.message));case 3:return e.next=5,this._db.updateDataAsync(t,r).then(function(e){return n._ok(),e}).catch(function(e){return n._thrEr(w),n._err(w.message)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},P,this)})),function(e,t){return oe.apply(this,arguments)}),N._err=function(e){return Promise.reject(new Error(e))},N._ckArray=function(e){return!!g(e)||(this._thrEr(y),!1)},N._ckStr=function(e){return!!f(e)||(this._thrEr(y),!1)},N._thrEr=function(e){this._emit(I,e)},N._ok=function(){this._emit(I,b)},P);function P(e,t,r){var n=ie.call(this,t)||this;return n._db=r,n._on(Le,function(e,t){n.appendSync(e,t)}),n._initEvent(),n}function $e(e,t){this.uid=null,this.minData=null,this.oriData=null,this.customData={},this.tags=[],this.active=!1,this.activeMin=!1,this.minTask=null,this.load=!1,this.show=[],this.overlays=[],this.img=null,this.edt=null,this.vws=[],this.oriType=null,this.minType=null,this.tempWidth=0,this.tempHeight=0,this.uid=e,this.setTempSize(t.width,t.height),this.edt=new Ke}function et(){this.matrix=[],this.all=[],this.result=[],this._flipNum=0,this._flipNumX=0,this._flipNumY=0,this._tAngle=0,this._curMode=null}function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nt(e,t,r){t&&rt(e.prototype,t),r&&rt(e,r),Object.defineProperty(e,"prototype",{writable:!1})}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(N=Xt.prototype).bind=function(e){this.canvas=e,this.ctx=e.getContext("2d"),this.ctx.imageSmoothingEnabled=!1},N.unbind=function(){this.canvas=null,this.ctx=null},N.clear=function(e,t,r,n){var i;null!=(i=this.canvas)&&i.clearRect(e,t,r,n)},N.size=function(e,t){this.cssWidth=e,this.cssHeight=t,this.innerWidth=e*this.dpr,this.innerHeight=t*this.dpr},N.dispose=function(){this.unbind()},e(Jt,bt=t=Xt),(N=Jt.prototype).setMaskColor=function(e){this.maskColor=e},N.getMaskColor=function(){return this.maskColor};var ot=Jt,at=(e(Zt,vt=t),Zt.prototype.setBackGroundColor=function(e){this.canvas.style.background=e},Zt),st=((N=zt.prototype).updateDpr=function(e){this.mainCvs.dpr=e,this.cropCvs.dpr=e},N.bind=function(e){var t,r=e.main,e=e.cropper;r&&null!=(t=this.mainCvs)&&t.bind(r),e&&null!=(r=this.cropCvs)&&r.bind(e)},N.unbind=function(e){"main"===e&&this.mainCvs&&(this.mainCvs.innerWidth=1,this.mainCvs.innerHeight=1,this.mainCvs.unbind()),"cropper"===e&&this.cropCvs&&(this.cropCvs.innerWidth=1,this.cropCvs.innerHeight=1,this.cropCvs.unbind())},N.setCanvasSize=function(e,t){var r;null!=(r=this.mainCvs)&&r.size(e,t),null!=(r=this.cropCvs)&&r.size(e,t)},N.dispose=function(){var e;null!=(e=this.cropCvs)&&e.dispose(),(this.cropCvs=null)!=(e=this.mainCvs)&&e.dispose(),this.mainCvs=null},zt),ut=(e(jt,Dt=h),(N=jt.prototype)._initEvent=function(){var t=this;Dt.prototype._on.call(this,me,function(e){t.renderPageUid=e}),Dt.prototype._on.call(this,_e,function(e){e||(t.renderPageUid=null),t.curPageUid=e})},N.setSlidePages=function(e){if(this.wrapper){for(var t=0;t<3;t++){var r=e[t];if(r.index!==this.targetIndexes[t]||-1<r.index&&""===r.url)return}this.pages=e,this.isNew=!0,this.allowDrag=!1,this.isVisible||this.showPages()}},N.showPages=function(){var t,s=this;this.loading||this.isNew&&(this.loading=!0,this.isNew=!1,t=[],this.pages.forEach(function(o,a){var e=new Promise(function(e,t){var r,n=null==(r=s.wrapper)||null==(r=r.children[a])?void 0:r.children[0],i=o.index;if(n)if(n.style.width=o.width+"px",n.style.height=o.height+"px",n.src!==o.url){if(""===o.url)return n.src=o.url,n.onload=null,n.onerror=null,e(-1);n.onload=function(){n.onload=null,n.onerror=null,e(i)},n.onerror=function(){n.onload=null,n.onerror=null,e(i)},n.src=o.url}else e(i);else t(i)});t.push(e)}),Promise.all(t).then(function(e){s.allowDrag=!0;for(var t=0;t<e.length;t++)if(e[t]!==s.targetIndexes[t]){s.allowDrag=!1;break}s.loading=!1,s.showPages()}).catch(function(e){}))},N.startHandler=function(e){!this.isDragging&&this.allowDrag&&(clearTimeout(this.hideTimer),this.startTime=e.timeStamp,e.touches?(this.touchNum=e.touches.length,this.startX=e.touches[0].pageX):this.startX=e.pageX,this.isStart=!0)},N.moveHandler=function(e){var t;!this.isStart||2<this.touchNum||(e=(e.touches?e.touches[0]:e).pageX-this.startX,Math.abs(e)>this.triggerDist&&(this.isDragging=!0,null!=(t=this.stateCb)&&t.call(this,!0),this._visible(!0),(t=this.width)<e?e=t:e<-t&&(e=-t)),this._translateX(e))},N.endHandler=function(e){var t,r,n,i,o=this;this.isStart&&(t=!0,(!e||e.touches&&(1<this.touchNum||1!==e.changedTouches.length))&&(t=!1),this.isStart=!1,r=(e=e||{}).pageX-this.startX,e=e.timeStamp-this.startTime,n=this._calcDirection(e,r,t),i=this,(f(n)?this._oPub.emitEx("preSlide",n):Promise.resolve(!0)).then(function(){n&&(o.allowDrag=!1);var e=o._calcSlidingDistance(n);i._transition("transform 0.2s linear"),o._translateX(e),setTimeout(function(){var e;o.wrapper&&(o.isDragging=!1,null!=(e=o.stateCb)&&e.call(o,!1))},200),n&&setTimeout(function(){var e;o.isDisposed||null!=(e=o.slideEndCallback)&&e.call(o,n)},205),i._hideSlide()}))},N._calcDirection=function(e,t,r){if(r){var n,r=this.pages,i=this.minDistanceThreshold,o=this.minTimeThreshold,a=this.triggerDist;if(-1!==(null==(n=r[0])?void 0:n.index)&&(i<t||e<o&&a<t))return ce;if(-1!==(null==(n=r[2])?void 0:n.index)&&(t<-i||e<o&&t<-a))return le}return null},N._calcSlidingDistance=function(e){return e===ce?this.width:e===le?-this.width:0},N._hideSlide=function(){var e=this;this.curPageUid!==this.renderPageUid||this.pages[1].uid!==this.curPageUid||this.isDragging?(clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){e.isDisposed||e._hideSlide()},210)):(this._visible(!1),this.showPages(),this._transition(""),this._translateX(0))},N._translateX=function(e){this.wrapper&&(this.wrapper.style.transform="translateX(".concat(e,"px)"))},N._visible=function(e){this.wrapper&&(this.wrapper.style.visibility=e?"visible":"hidden"),this.isVisible=e},N._transition=function(e){this.wrapper&&(this.wrapper.style.transition=e)},N.bindSlideEndCallback=function(e){this.slideEndCallback=e},N.bind=function(e){this.wrapper=e},N.unbind=function(){this.wrapper=null},N.setSlideSize=function(e){if(!this.wrapper)return!1;e<120&&(this.minDistanceThreshold=e/2),this.width=e,this.wrapper.style.width=3*e+"px",this.wrapper.style.left=-e+"px";for(var t=0;t<3;t++)this.wrapper.children[t].style.width=e+"px"},N.dispose=function(){Dt.prototype.dispose.call(this),this._hideSlide(),this.unbind(),this.isDisposed=!0},jt),ct=((N=Ht.prototype).resize=function(e,t,r,n,i,o){return this.useWorker?this.resizeWithWorker(e,t,r,n,i,o):this.resizeWithoutWorker(e,n,i,o)},N.resizeWithoutWorker=function(e,t,r,V){for(var n=e.width,i=e.height,o=(t=Math.round(t),i/(r=Math.round(r))),a=e.getContext("2d"),s=[],u=2*Math.ceil(i/this.cores/2),c=[],l=-1,d=0;d<this.cores;d++){var h,g=l+1;i<=g||(l=g+u-1,l=Math.min(l,i-1),h=Math.min(u,i-g),s[d]={},s[d].source=a.getImageData(0,g,n,u),s[d].target=!0,s[d].start_y=Math.ceil(g/o),s[d].height=h,g={width_source:n,height_source:s[d].height,width:t,height:Math.ceil(s[d].height/o),core:d,source:s[d].source.data.buffer||s[d].source.data},c[d]=g)}for(var f=c.length,m=[],_=0;_<f;_++){for(var A=(S=c[_]).core,p=S.width_source,I=S.height_source,D=S.width,v=S.height,b=p/D,y=I/v,B=Math.ceil(b/2),O=Math.ceil(y/2),T=new Uint8ClampedArray(S.source),S=(T.length,D*v*4),R=new ArrayBuffer(S),w=new Uint8ClampedArray(R,0,S),C=0;C<v;C++)for(var E=0;E<D;E++){for(var M=4*(E+C*D),P=0,W=0,U=0,G=0,H=0,j=0,z=0,Z=C*y,J=Math.floor(E*b),X=Math.ceil((E+1)*b),Y=Math.floor(C*y),K=Math.ceil((C+1)*y),X=Math.min(X,p),K=Math.min(K,I),x=Y;x<K;x++)for(var Q=Math.abs(Z-x)/O,q=E*b,$=Q*Q,k=J;k<X;k++){var F=Math.abs(q-k)/B;1<=(F=Math.sqrt($+F*F))||(z+=(P=2*F*F*F-3*F*F+1)*T[3+(F=4*(k+x*p))],U+=P,G+=(P=T[3+F]<255?P*T[3+F]/250:P)*T[F],H+=P*T[1+F],j+=P*T[2+F],W+=P)}w[M]=G/W,w[1+M]=H/W,w[2+M]=j/W,w[3+M]=z/U}m.push({core:A,target:w})}for(var L=0;L<f;L++){var ee=m[L],te=Math.ceil(s[L].height/o);if(s[L].target=a.createImageData(t,te),s[L].target.data.set)s[L].target.data.set(ee.target);else for(var re=s[L].target.data.length,N=0;N<re;N++)s[L].target.data[N]=ee.target[N]}return Promise.resolve(s)},N.resizeWithWorker=function(e,t,r,u,n,i){for(var c=this,o=Math.floor(t),a=Math.floor(r),s=(u=Math.round(u),a/(n=Math.round(n))),l=e.getContext("2d"),d=[],h=2*Math.ceil(a/this.cores/2),g=-1,f=0;f<this.cores;f++){var m,_,p=g+1;a<=p||(g=p+h-1,g=Math.min(g,a-1),m=Math.min(h,a-p),d[f]={},d[f].source=l.getImageData(0,p,o,h),d[f].target=!0,_=Math.ceil(p/s),d[f].start_y=_,d[f].height=m,d[f].height_part=Math.ceil((p+m)/s)-_)}e=l=null;for(var I=[],D=function D(e){if(d[e]==undefined)return"continue";var s=new Worker(c.workerBlobURL),t=new Promise(function(o,a){s.onmessage=function(e){s.terminate(),s.onmessage=null,s.onerror=null,s=null,e.data.taskUid!==c.taskUid&&a(!1);var t=e.data.core,r=d[t].height_part;if(d[t].target=document.createElement("canvas").getContext("2d").createImageData(u,r),d[t].target.data.set)d[t].target.data.set(e.data.target);else for(var n=d[t].target.data.length,i=0;i<n;i++)d[t].target.data[i]=e.data.target[i];o(t)},s.onerror=function(e){s.terminate(),s.onmessage=null,s.onerror=null,s=null,a(e)}}),t=(I.push(t),{width_source:o,height_source:d[e].height,width:u,height:d[e].height_part,core:e,source:d[e].source.data.buffer||d[e].source.data,taskUid:i});try{s.postMessage(t,[t.source])}catch(r){s.postMessage(t)}},v=0;v<this.cores;v++)D(v);return Promise.all(I).then(function(e){return Promise.resolve(d)}).catch(function(e){return Promise.reject(e)})},Ht),lt=(e(Gt,x=h),(k=Gt.prototype).updateDpr=function(){var t=Y();this.dpr=t,this.cvsMng.updateDpr(t),this.tabItem&&this.tabItem.chs.forEach(function(e){e.cropMng.updateDpr(t)})},k.setAllowSlide=function(e){this.allowSlide=e},k.setSlidePages=function(e){var t;null!=(t=this.slide)&&t.setSlidePages(e)},k.checkDisplay=function(e,t){return"single"!==t.disMode||!(!(t=t.getCurPage())||e!==t.uid)},k.initGraphic=function(e){var t=e.uid;this.curPages=e.chs,t!==this.curTab&&(this.curTab=t,this.tabItem=e,this.virH=e.virH||0,this.virW=e.virW||0,this.fitType=e.fitType,this.clickZoom=e.clickZoom,this.isFreeCrop=e.isFreeCrop,this.scrL=e.scrL,this.scrT=e.scrT,this.zoom=e.zoom,this.iMargin=e.iMargin,this.oMargin=e.oMargin,this.direction=e.direction,this.disMode=e.disMode,this.opMode=e.opMode)},k.render=function(i){var o,e,a,s,u,c,l,d,h,t,r,g,f=this;this.tabItem&&(o=this.tabItem.getCurPage())&&o.uid===i&&(e=this._db.getMid(i),a=e.img,s=this.cvsMng.mainCvs.ctx,a&&s&&(null!=e&&e.overlays,u=Math.round(o.style.left-this.scrL+o.style.width/2),c=Math.round(o.style.top-this.scrT+o.style.height/2),(l=this.offScreenCanvas).render(d={viewerUid:"",pageUid:i,isMin:!1,img:a,page:o,midData:e}),h=l.mainCanvas,r=o.style.width/l.mainWidth,t=h.width*r,r=h.height*r,s.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),s.save(),s.imageSmoothingEnabled=!1,s.mozImageSmoothingEnabled=!1,s.webkitImageSmoothingEnabled=!1,s.msImageSmoothingEnabled=!1,s.oImageSmoothingEnabled=!1,s.scale(this.dpr,this.dpr),s.translate(u,c),s.drawImage(h,Math.round(-o.style.width/2),Math.round(-o.style.height/2),Math.round(t),Math.round(r)),this._handleOverlay((null==e?void 0:e.overlays)||[],o,s),s.restore(),this.workerTimer&&clearTimeout(this.workerTimer),g=m(11),this.renderTaskUid=g,this.hermite&&(this.hermite.taskUid=this.renderTaskUid),this.useHermite&&this.zoom<1&&this.hermite&&(this.workerTimer=setTimeout(function(){var e,t,r,n;f.isDisposed||!f.offScreenCanvas||l.isDisposed||f.hermite.taskUid===g&&a.naturalWidth&&a.naturalHeight&&(l.render(d),t=(e=document.createElement("canvas")).getContext("2d"),r=l.mainWidth,n=l.mainHeight,e.width=r,e.height=n,t.imageSmoothingEnabled=!1,t.drawImage(h,0,0),null!=(t=f.hermite)&&t.resize(e,r,n,o.style.width*f.dpr||1,o.style.height*f.dpr||1,f.renderTaskUid).then(function(e){var n,t=f._db.getMid(i);t&&f.tabItem&&(n=f.tabItem.getCurPage())&&n.uid===i&&(s.save(),s.clearRect(0,0,f.cvsInnerW,f.cvsInnerH),e.forEach(function(e){var t=0+Math.round((n.style.left-f.scrL)*f.dpr),r=e.start_y+Math.round((n.style.top-f.scrT)*f.dpr);s.putImageData(e.target,t,r)}),s.scale(f.dpr,f.dpr),s.translate(u,c),f._handleOverlay((null==t?void 0:t.overlays)||[],n,s),s.restore(),x.prototype._emit.call(f,me,i))}).catch(function(e){x.prototype._emit.call(f,me,i)}))},100)),"single"===this.disMode&&(this.useHermite&&this.zoom<1&&this.hermite||x.prototype._emit.call(this,me,i),x.prototype._emit.call(this,"pageRendered",this.tabItem.cur))))},k._handleOverlay=function(e,t,r){var n=this;e.forEach(function(e){0<t.style.width-e.width*n.zoom&&0<t.style.height-e.height*n.zoom&&(r.save(),r.globalAlpha=e.opacity,r.fillStyle=e.color,r.fillRect(-t.style.width/2+e.left*n.zoom,-t.style.height/2+e.top*n.zoom,Math.min(t.style.width-e.left*n.zoom,e.width*n.zoom),Math.min(t.style.height-e.top*n.zoom,e.height*n.zoom)),r.restore())})},k.drawSltBox=function(e){var y=this,T=this.cvsMng.cropCvs.ctx;T&&(T.imageSmoothingEnabled=!1,T.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),1===this.opMode&&(T.save(),T.scale(this.dpr,this.dpr),T.lineJoin="round",e.cropMng.cropBoxes.forEach(function(e){for(var t=(g=e.cropBoxStyle).ctrlBorderWidth,r=g.ctrlBackground,n=g.ctrlBorderColor,i=g.ctrlBorderRadius,o=g.ctrlWidth,a=g.ctrlHeight,s=g.borderColor,u=g.borderWidth,c=g.invalidBorderColor,l=g.invalidCtrlBorderColor,d=g.background,h=g.dashLine,g=g.enableConcaveBorderColor,f=e.probePoints.slice(0,8),m=e.midpoints.slice(0,8),_=0;_<4;_++){var p=y.toCanvasCoordinate(f[2*_],f[2*_+1]),I=y.toCanvasCoordinate(m[2*_],m[2*_+1]);f[2*_]=p.x,f[2*_+1]=p.y,m[2*_]=I.x,m[2*_+1]=I.y}T.save();try{T.setLineDash(h)}catch(S){}T.fillStyle=d,T.lineWidth=u,g&&!e.isConvex?T.strokeStyle=c:T.strokeStyle=s,T.beginPath(),T.moveTo(f[0],f[1]),T.lineTo(f[2],f[3]),T.lineTo(f[4],f[5]),T.lineTo(f[6],f[7]),T.closePath(),T.stroke(),T.restore(),T.lineWidth=t,T.fillStyle=r,g&&!e.isConvex?T.strokeStyle=l:T.strokeStyle=n;for(var D=Math.min(i,o/2),v=Math.min(i,a/2),b=0;b<4;b++)y.drawRoundedRectangle(T,{x:f[2*b],y:f[2*b+1],width:o,height:a,radiusX:D,radiusY:v}),T.stroke(),""!==r&&T.fill(),y.drawRoundedRectangle(T,{x:m[2*b],y:m[2*b+1],width:o,height:a,radiusX:D,radiusY:v}),T.stroke(),""!==r&&T.fill()}),T.restore()))},k.drawRoundedRectangle=function(e,t){var r=t.width,n=t.height,i=t.radiusX,o=t.radiusY,a=t.x,s=[{x:a-r/2+i,y:(t=t.y)-n/2+o,start:Math.PI,end:3*Math.PI/2},{x:a+r/2-i,y:t-n/2+o,start:3*Math.PI/2,end:2*Math.PI},{x:a+r/2-i,y:t+n/2-o,start:0,end:Math.PI/2},{x:a-r/2+i,y:t+n/2-o,start:Math.PI/2,end:Math.PI}];if(e.beginPath(),e.ellipse)for(var u=0;u<4;u++){var c=s[u];e.ellipse(c.x,c.y,i,o,0,c.start,c.end)}else e.rect(a-r/2,t-n/2,r,n);e.closePath()},k.clearCanvas=function(){var e=this.cvsMng.mainCvs.ctx;e&&e.clearRect(0,0,this.cvsInnerW,this.cvsInnerH)},k._layoutSingle=function(e,t,r){var n,i,o,a,s,u,c,l,d,h,g,f=e.getCurPage();f&&(d=this._db.getMetadata(f.uid),c=this._db.getMid(f.uid)),f&&d&&c?(c=c.edt.all,n=d.width,i=d.height,o=d.width,a=d.height,u=s=null,c.forEach(function(e){var t,r;"rotate"===e.type?(0===e.mode&&(u=K(0,0,o,a,e.calcAngle)),null!==s&&s!==e.mode&&(o=n,a=i),s=e.mode,u&&(t=(r=u).width,r=r.height,n=t,i=r)):"crop"!==e.type&&"changeSize"!==e.type||(t=e.width,r=e.height,o=n=t,a=i=r)}),null!=f&&f.setNaturalSize(n,i),c=(d=this._calcZoom(e,n||0,i||.1)).zoom,h=d.canvasWidth,g=d.canvasHeight,l=d.virW,d=d.virH,this.setCanvasSize(h,g),f.cropMng.setZoom(c=c||1),this.virW=l,this.virH=d,r||x.prototype._emit.call(this,Ie,{width:this.virW,height:this.virH,x:this.scrL,y:this.scrT}),h=(this.cvsCltW-l)/2,g=(this.cvsCltH-d)/2,h<0&&(t&&(this._srL=Math.abs(h)),h=0),g<0&&(t&&(this._srT=Math.abs(g)),g=0),f.setBorder(e.pageBorderWidth),f.setSize(l,d),f.setPosition(h,g),e.virW=l,e.virH=d,this._zoomTo(c,!1,t),this.setVirtualSize(l,d),this._zoomTo(c,!1,t),this.zoom!==c&&(this.zoom=c),r||x.prototype._emit.call(this,Ie,{width:l,height:d,x:this.scrL,y:this.scrT})):x.prototype._emit.call(this,Ie,{width:1,height:1,x:0,y:0})},k._calcZoom=function(e,t,r){return"window"===e.fitType?this._calFitWindow(t,r):"width"===e.fitType?this._calcFitWidth(t,r):"height"===e.fitType?this._calcFitHeight(t,r):this.keepZoom&&"none"===e.fitType?this._calcKeepZoom(t,r):this._calFitWindow(t,r)},k.calcZoomForSlide=function(e,t){return e=this._calFitWindow(e,t).zoom,Math.min(Math.max(this.minZoom,e),this.maxZoom)},k._calcKeepZoom=function(e,t){var r=this.zoom,n=this.cvsOffW,i=this.cvsOffH,t=t*r;return n<(e=e*r)&&(i-=this.scrBarW),i<t&&(n-=this.scrBarW),{zoom:r,canvasWidth:n,canvasHeight:i,virW:e,virH:t}},k._calcFitWidth=function(e,t){var r=1,n=0,i=this.cvsOffW,o=this.cvsOffH;return o<(n=t*(r=e<=this.cvsOffW?1:this.cvsOffW/e))&&(n=t*(r=e<=this.cvsOffW-this.scrBarW?1:(this.cvsOffW-this.scrBarW)/e))>this.cvsOffH&&(i-=this.scrBarW),{zoom:r,canvasWidth:i,canvasHeight:o,virW:e*r,virH:n}},k._calcFitHeight=function(e,t){var r=1,n=0,i=0,o=this.cvsOffW,i=this.cvsOffH;return o<(n=e*(r=t<=this.cvsOffH?1:this.cvsOffH/t))&&(n=e*(r=t<=this.cvsOffH-this.scrBarW?1:(this.cvsOffH-this.scrBarW)/t))>this.cvsOffW&&(i-=this.scrBarW),{zoom:r,canvasWidth:o,canvasHeight:i,virW:n,virH:t*r}},k._calFitWindow=function(e,t){return e<=this.cvsCltW&&t<=this.cvsCltH||e>this.cvsCltW&&t<=this.cvsCltH||!(e<=this.cvsCltW&&t>this.cvsCltH)&&e/this.cvsCltW>=t/this.cvsCltH?this._calcFitWidth(e,t):this._calcFitHeight(e,t)},k._getPage=function(e){for(var t=this.curPages.length,r=0;r<t;r++)if(this.curPages[r].uid===e)return{page:this.curPages[r],index:r}},k.setFitType=function(e){this.fitType=e,this.tabItem&&(this.tabItem.fitType=e)},k._setValidArea=function(){this.setValidArea(this.cvsCltW,this.cvsCltH,this.virW,this.virH)},k._setScrollerPosition=function(){var e=this.cvsMng.mainCvs.canvas;if(e){var t={left:0,top:0,right:0,bottom:0,width:0,height:0};try{t=e.getBoundingClientRect()}catch(r){}this.setPosition(t.left+window.pageXOffset+(null==e?void 0:e.clientLeft)||0,t.top+window.pageYOffset+(null==e?void 0:e.clientTop)||0)}},k.setCanvasOffsetSize=function(e,t){var r=!1;return this.cvsOffW===e&&this.cvsOffH===t&&(r=!0),this.cvsOffW=e,this.cvsOffH=t,this.cvsCltW=e,this.cvsCltH=t,this.cvsInnerW=e*this.dpr,this.cvsInnerH=t*this.dpr,this.cvsMng.setCanvasSize(e,t),null!=(t=this.slide)&&t.setSlideSize(e),this._setScrollerPosition(),r},k.setCanvasSize=function(e,t){this.cvsCltW=e,this.cvsCltH=t,this.cvsInnerW=e*this.dpr,this.cvsInnerH=t*this.dpr,this.cvsMng.setCanvasSize(e,t)},k.setVirtualSize=function(e,t){this.virW=e||0,this.virH=t||0,this._setValidArea()},k.setZoom=function(e){return e=Math.max(Math.min(this.maxZoom,e),this.minZoom),this.zoom=e,this.tabItem&&this.tabItem.total||(this._zoom=e),this.setFitType("none"),x.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&x.prototype._emit.call(this,"_getSlidePages"),!0},k.getZoom=function(){return this.zoom},k.zoomTo=function(e,t,r,n){return this.zoom=e,this._zoomTo(e,t,!1,r,n),this.setFitType("none"),x.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&x.prototype._emit.call(this,"_getSlidePages"),this._zoom},k.scrollTo=function(e,t,r,n){this._scrollTo(e,t,!1),x.prototype._emit.call(this,"_onRender")},k.zoomIn=function(){var e=this.zoom;return e*=this.zoomInDelta,this._zoomTo(e,!1),this.setFitType("none"),x.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&x.prototype._emit.call(this,"_getSlidePages"),e},k.zoomOut=function(){var e=this.zoom;return e/=this.zoomInDelta,this._zoomTo(e,!1),this.setFitType("none"),x.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&x.prototype._emit.call(this,"_getSlidePages"),e},k.getMinPageData=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),r=this.offScreenCanvas,n=(e.dvsUid="useToGetMinPageData",r.mainWidth),i=r.mainHeight,o=n/i,o=((800<n||800<i)&&(1<=o?i=(n=800)/o:n=(i=800)*o),e.width=n,e.height=i,n/r.mainWidth),a=i/r.mainHeight,o=r.mainCanvas.width*o,a=r.mainCanvas.height*a,r=(t.drawImage(r.mainCanvas,0,0,Math.floor(o),Math.floor(a)),t.getImageData(0,0,n,i));return e.width=1,e.height=1,t.fillRect(0,0,1,1),e=null,r},k.setSaveBackgroundColor=function(e){this.saveBg=e,this.offScreenCanvas.saveColor=e},k.onCanvasTouchstart=function(e){var t,r,n,i,o,a;e.cancelable&&e.preventDefault(),e.touches[0]&&e.touches[0].target&&e.touches[0].target.tagName.match(/input|textarea|select/i)||"single"===this.disMode&&"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,e.target.tagName.match(/input|textarea|select/i)||(t=e.touches[0].pageX,r=e.touches[0].pageY,0===this.opMode?(this._pageX=t,this._pageY=r,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging&&null!=(n=this.slide)&&n.startHandler(e),this.isSliding||(1<e.targetTouches.length&&(this._startDistance=this._calDistance(e.targetTouches)),this.startHandler(e.targetTouches,e.timeStamp))):1===this.opMode?this.checkMouseOverPage(e)&&(n=this.tabItem.getCurPage())&&(i=this.getMouseCoordinate(e),i=this.toPageCoordinate(i.x,i.y),!(o=!1)===e.ctrlKey&&(o=!0),a=this.tabItem.cur,null!==n.cropMng.checkSelect(i.x,i.y)||o||0<n.cropMng.cropBoxes.length&&x.prototype._emit.call(this,p,a),n.cropMng.onStartHandler(i.x,i.y,o)):2===this.opMode&&this.checkMouseOverPage(e)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,!1,t-this._outerLeft,r-this._outerTop),x.prototype._emit.call(this,"_onRender"))))},k.onCanvasTouchmove=function(e){if("single"===this.disMode&&this.tabItem){var t=this.tabItem.getCurPage();if(t&&this._mousedown){if(0===this.opMode)if(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL&&1===e.targetTouches.length)null!=(t=this.slide)&&t.moveHandler(e);else{if(this.isSliding)return;(t=1)<e.targetTouches.length&&(t=this._calDistance(e.targetTouches)/this._startDistance,this.fitType="none",this.tabItem.fitType="none",e.scale&&(t=e.scale)),this.moveHandler(e.targetTouches,e.timeStamp,t),x.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&x.prototype._emit.call(this,"_getSlidePages")}this._mousedown=!0}}},k.onCanvasTouchend=function(e){},k.onDocumentTouchend=function(e){},k.onCanvasMousedown=function(e){var t,r,n,i;"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,e.cancelable&&e.preventDefault(),e.target.tagName.match(/input|textarea|select/i)||(0===this.opMode?(this._pageX=e.pageX,this._pageY=e.pageY,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging?null!=(t=this.slide)&&t.startHandler(e):this.startHandler([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp)):1===this.opMode?this.checkMouseOverPage(e)&&(t=this.tabItem.getCurPage())&&(r=this.getMouseCoordinate(e),r=this.toPageCoordinate(r.x,r.y),!(n=!1)===e.ctrlKey&&(n=!0),i=this.tabItem.cur,null!==t.cropMng.checkSelect(r.x,r.y)||n||0<t.cropMng.cropBoxes.length&&x.prototype._emit.call(this,p,i),t.cropMng.onStartHandler(r.x,r.y,n)):2===this.opMode&&this.checkMouseOverPage(e)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,!1,e.pageX-this._outerLeft,e.pageY-this._outerTop),x.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&x.prototype._emit.call(this,"_getSlidePages"))))},k.onCanvasMousemove=function(e){this._mousedown&&(e.cancelable&&e.preventDefault(),"single"===this.disMode&&this.tabItem&&this.tabItem.total)},k.onCanvasMouseup=function(e){},k.onDocumentMousemove=function(e){var t,r,n;"single"===this.disMode&&this.tabItem&&(t=this.tabItem.getCurPage())&&(r=this.getMouseCoordinate(e),r=this.toPageCoordinate(r.x,r.y),this._mousedown?(1===this.opMode?this.checkMouseOverPage(e)!==undefined&&(!(n=!1)===e.ctrlKey&&(n=!0),t.cropMng.setAspectRatio(this.aspectRatio),!0===e.shiftKey?t.cropMng.setKeepAspectRatio(!0):t.cropMng.setKeepAspectRatio(this.keepAspectRatio),t.cropMng.onMoveHandler(r.x,r.y,n),x.prototype._emit.call(this,"_onRenderBoxes")):0!==this.opMode||e.touches||(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL?null!=(n=this.slide)&&n.moveHandler(e):0===this._maxSrL&&0===this._maxSrT||(this.moveHandler([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp),x.prototype._emit.call(this,"_onRender"))),this._mousedown=!0):0<t.cropMng.cropBoxes.length&&(null!==(n=t.cropMng.checkSelectForCursor(r.x,r.y))?(e=null,"move"===n.position?e="move":"nw"!==n.position&&"se"!==n.position&&"ne"!==n.position&&"sw"!==n.position&&"e"!==n.position&&"w"!==n.position&&"n"!==n.position&&"s"!==n.position||(e=n.position+"-resize"),x.prototype._emit.call(this,De,e)):x.prototype._emit.call(this,De,this.defaultCursor)))},k._calDistance=function(e){return Math.sqrt(Math.pow(e[0].pageX-e[1].pageX,2)+Math.pow(e[0].pageY-e[1].pageY,2))},k.onDocumentMouseup=function(e){var t,r;this._mousedown&&(1===this.opMode?this.tabItem&&"single"===this.tabItem.disMode&&(r=this.tabItem.getCurPage())&&(r.cropMng.onEndHandler(),t=this.tabItem.cur,0<(r=r.cropMng.getRectArr()).length&&x.prototype._emit.call(this,de,t,r),x.prototype._emit.call(this,"_onRenderBoxes")):0===this.opMode&&(this.clickZoom&&this._pageX===e.pageX&&this._pageY===e.pageY&&(t=this.getPosition(),this._zoomTo(this.zoom*this.zoomInDelta,!1,!1,e.pageX-t.left,e.pageY-t.top),x.prototype._emit.call(this,"_onRender")),this.allowSlide&&null!=(r=this.slide)&&r.endHandler(e),this.endHandler(e&&e.timeStamp||0)),this._mousedown=!1)},k.onCanvasWheel=function(e){this.isSliding||this._onWheelHandler(e)},k.onCanvasScroll=function(e){e&&e.target&&(this._scrollTo(e.target.scrollLeft,e.target.scrollTop,!1),x.prototype._emit.call(this,"_onRender"),x.prototype._emit.call(this,"_onRenderBoxes"))},k._onWheelHandler=function(e){var t=0,r=e.wheelDelta||-e.deltaY;e.ctrlKey?(e.cancelable&&e.preventDefault(),t=0<r?1.05:.95,this.fitType="none",this.tabItem.fitType="none",this.zoomHandler(r,e.timeStamp,e.pageX,e.pageY),x.prototype._emit.call(this,"_onRender"),x.prototype._emit.call(this,"_onRenderBoxes"),0===this._maxSrL&&0===this._maxSrT&&x.prototype._emit.call(this,"_getSlidePages")):e.shiftKey?0!==this._maxSrL&&(e.cancelable&&e.preventDefault(),t=r<0?30:-30,(0!==this._srL&&t<0||this._srL!==this._maxSrL&&0<t)&&(this._scrollTo(this.scrL+t,this.scrT,!1),x.prototype._emit.call(this,"_onRender"),x.prototype._emit.call(this,"_onRenderBoxes"))):0!==this._maxSrT&&(e.cancelable&&e.preventDefault(),t=r<0?30:-30,(0!==this._srT&&t<0||this._srT!==this._maxSrT&&0<t)&&(this._scrollTo(this.scrL,this.scrT+t,!1),x.prototype._emit.call(this,"_onRender"),x.prototype._emit.call(this,"_onRenderBoxes")))},k.checkMouseOverPage=function(e){if(!this.tabItem)return!1;var t=this.tabItem.getCurPage();if(!t)return!1;var e=this.getMouseCoordinate(e),r=(e=this.toPageCoordinate(e.x,e.y)).x,e=e.y;return 0<=r&&r<=t.naturalWidth&&0<=e&&e<=t.naturalHeight},k.toCanvasCoordinate=function(e,t){var r=this.tabItem.getCurPage();return r.style.left,this.scrL,r.style.width,r.style.top,this.scrT,r.style.height,{x:e=e*this.zoom+r.style.left-this.scrL,y:t=t*this.zoom+r.style.top-this.scrT}},k.toPageCoordinate=function(e,t){var r=this.tabItem.getCurPage();return{x:e=(e-r.style.left+this.scrL)/this.zoom,y:t=(t-r.style.top+this.scrT)/this.zoom}},k.getMouseCoordinate=function(e){var t=this.cvsMng.mainCvs.canvas.getBoundingClientRect(),r=(e.clientX!==undefined?e:e.changedTouches[0]).clientX,e=(e.clientY!==undefined?e:e.changedTouches[0]).clientY;return{x:r-t.left,y:e-t.top}},k._initAnimation=function(){this._time=Date.now||function(){return+new Date},this._fps=60,this._running={},this._counter=1},k._initScroller=function(){this.callback=function(e,t,r){this.scrL=e,this.scrT=t,this.zoom=r,this.tabItem&&(this.tabItem.scrL=e,this.tabItem.scrT=t,this.tabItem.zoom=r)}.bind(this),this._setValidArea(),this._setScrollerPosition()},k.setValidArea=function(e,t,r,n){e===+e&&(this._outerWidth=e),t===+t&&(this._outerHeight=t),r===+r&&(this._innerWidth=r),n===+n&&(this._innerHeight=n),this.calcMaxScrollValue()},k.calcMaxScrollValue=function(e){var t,n,i,o,a,s,u,r,c;e===undefined&&(e=this._zoom),this.tabItem&&((r=this.tabItem.getCurPage())&&(c=this._db.getMetadata(r.uid),t=this._db.getMid(r.uid)),r&&c&&t&&(n=c.width,i=c.height,o=c.width,a=c.height,u=s=null,t.edt.all.forEach(function(e){var t,r;"rotate"===e.type?(0===e.mode&&(u=K(0,0,o,a,e.calcAngle)),null!==s&&s!==e.mode&&(o=n,a=i),s=e.mode,u&&(t=(r=u).width,r=r.height,n=t,i=r)):"crop"!==e.type&&"changeSize"!==e.type||(t=e.width,r=e.height,o=n=t,a=i=r)}),r=n*e,c=i*e,this._maxSrL=Math.round(Math.max(r-this._outerWidth,0)),this._maxSrT=Math.round(Math.max(c-this._outerHeight,0))))},k.setPosition=function(e,t){this._outerLeft=e||0,this._outerTop=t||0},k.getPosition=function(){return{left:this._outerLeft||0,top:this._outerTop||0}},k.setSnapSize=function(e,t){this._snapWidth=e,this._snapHeight=t},k.activatePull=function(e,t,r,n){this._pullHeight=e,this._pullStart=n,this._pullActivate=t,this._pullDeactivate=r},k.emitPull=function(){this.publish(this._srL,-this._pullHeight,this._zoom,!0),this._pullStart&&this._pullStart()},k.endPull=function(){this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate(),this._scrollTo(this._srL,this._srT,!0)},k.getCurScrollValues=function(){return{scrollLeft:this._srL,scrollTop:this._srT,zoom:this._zoom}},k.getMaxScrollValues=function(){return{maxScrollLeft:this._maxSrL,maxScrollTop:this._maxSrT}},k._zoomTo=function(e,t,r,n,i,o){if(void 0===r&&(r=!1),!this.zooming)return!1;if("continuous"===this.disMode)return!1;o&&(this._zoomComplete=o),this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),n===undefined&&(n=this._outerWidth/2),i===undefined&&(i=this._outerHeight/2);o=this._zoom;return e=Math.max(Math.min(e,this.maxZoom),this.minZoom),"single"===this.disMode?(this.calcMaxScrollValue(e),n=(n+this._srL)*e/o-n,o=(i+this._srT)*e/o-i,n>this._maxSrL?n=this._maxSrL:n<0&&(n=0),o>this._maxSrT?o=this._maxSrT:o<0&&(o=0),(this._innerWidth<this._outerWidth||r)&&(n=this._maxSrL/2),(this._innerHeight<this._outerHeight||r)&&(o=this._maxSrT/2),this.publish(n,o,e,t),!0):void 0},k._zoomBy=function(e,t,r,n,i){return this._zoomTo(this._zoom*e,t,!1,r,n,i)},k._scrollTo=function(e,t,r,n){this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),n!==undefined&&n!==this._zoom?this.zooming&&(e*=n,t*=n,this.calcMaxScrollValue(n)):n=this._zoom,this.scrollX?this.paging?e=Math.round(e/this._outerWidth)*this._outerWidth:this.snapping&&(e=Math.round(e/this._snapWidth)*this._snapWidth):e=this._srL,this.scrollY?this.paging?t=Math.round(t/this._outerHeight)*this._outerHeight:this.snapping&&(t=Math.round(t/this._snapHeight)*this._snapHeight):t=this._srT,e=Math.max(Math.min(this._maxSrL,e),0),t=Math.max(Math.min(this._maxSrT,t),0),e===this._srL&&t===this._srT&&(r=!1),this._isProcessing||this.publish(e,t,n,r)},k._scrollBy=function(e,t,r){var n=this._isAnimating?this._futureLeft:this._srL,i=this._isAnimating?this._futureTop:this._srT;this._scrollTo(n+(e||0),i+(t||0),r)},k.startHandler=function(e,t){var r;e.length!==undefined&&(t instanceof Date&&(t=t.valueOf()),this._interruptedAnimation=!0,this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),this._isAnimating&&(this._stop(this._animationId),this._isAnimating=!1),this._isSingleTouch=1===e.length,e=this._isSingleTouch?(r=e[0].pageX,e[0].pageY):(r=Math.abs(e[0].pageX+e[1].pageX)/2,Math.abs(e[0].pageY+e[1].pageY)/2),this._startTouchLeft=r,this._startTouchTop=e,this._startZoom=this._zoom,this._lastTouchLeft=r,this._lastTouchTop=e,this._lastScale=1,this._lastTouchMove=t,this._enableScrollX=!this._isSingleTouch&&this.scrollX,this._enableScrollY=!this._isSingleTouch&&this.scrollY,this._isProcessing=!0,this._isDecComp=!1,this._isDragging=!this._isSingleTouch,this._position=[])},k.moveHandler=function(e,t,r){var n,i,o,a,s,u,c,l,d;e.length!==undefined&&(t instanceof Date&&(t=t.valueOf()),this._isProcessing&&(e=1===e.length?(n=e[0].pageX,e[0].pageY):(n=Math.abs(e[0].pageX+e[1].pageX)/2,Math.abs(e[0].pageY+e[1].pageY)/2),i=this._position,this._isDragging?(d=n-this._lastTouchLeft,o=e-this._lastTouchTop,a=this._srL,s=this._srT,u=this._zoom,r!==undefined&&this.zooming&&(u=(c=u)/this._lastScale*r,c!==(u=Math.max(Math.min(u,this.maxZoom),this.minZoom))&&(this._setScrollerPosition(),a=((l=n-this._outerLeft)+a)*u/c-l,s=((l=e-this._outerTop)+s)*u/c-l,this.calcMaxScrollValue(u))),this._enableScrollX&&((a-=d*this.speedDelta)>this._maxSrL||a<0)&&(this.bouncing?a+=d/2*this.speedDelta:a=Math.max(Math.min(this._maxSrL,a),0)),this._enableScrollY&&((s-=o*this.speedDelta)>this._maxSrT||s<0)&&(this.bouncing?(s+=o/2*this.speedDelta,this._enableScrollX||null==this._pullHeight||(!this._pullActive&&s<=-this._pullHeight?(this._pullActive=!0,this._pullActivate&&this._pullActivate()):this._pullActive&&s>-this._pullHeight&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))):s=Math.max(Math.min(this._maxSrT,s),0)),60<i.length&&i.splice(0,30),i.push(a,s,t),this.publish(a,s,u)):(c=this.locking?3:0,l=Math.abs(n-this._startTouchLeft),d=Math.abs(e-this._startTouchTop),this._enableScrollX=this.scrollX&&c<=l,this._enableScrollY=this.scrollY&&c<=d,i.push(this._srL,this._srT,t),this._isDragging=(this._enableScrollX||this._enableScrollY)&&(5<=l||5<=d),this._isDragging&&(this._interruptedAnimation=!1)),this._lastTouchLeft=n,this._lastTouchTop=e,this._lastTouchMove=t,this._lastScale=r))},k.endHandler=function(e){if(e instanceof Date&&(e=e.valueOf()),this._isProcessing){if(this._isProcessing=!1,this._isDragging)if(this._isDragging=!1,this._isSingleTouch&&this.animating&&e-this._lastTouchMove<=100){for(var t,r,n=this._position,i=n.length-1,o=i,a=i;0<a&&n[a]>this._lastTouchMove-100;a-=3)o=a;o!==i?(i=n[i]-n[o],t=this._srL-n[o-2],r=this._srT-n[o-1],this._decVX=t/i*(1e3/60),this._decVY=r/i*(1e3/60),1<Math.abs(this._decVX)||1<Math.abs(this._decVY)?this._startDeceleration(e):this._scrollComp&&this._scrollComp()):this._scrollComp&&this._scrollComp()}else 100<e-this._lastTouchMove&&this._scrollComp&&this._scrollComp();this._isDecelerating||(this._pullActive&&this._pullStart?(this.publish(this._srL,this._srT,this._zoom),this._pullStart()):((this._interruptedAnimation||this._isDragging)&&this._scrollComp&&this._scrollComp(),this._scrollTo(this._srL,this._srT,!0,this._zoom),this._pullActive&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))),this._position.length=0}},k.zoomHandler=function(e,t,r,n){return e=0<e?1.05:.95,this._setScrollerPosition(),this._zoomTo(this._zoom*e,!1,!1,r-this._outerLeft,n-this._outerTop)},k.publish=function(n,i,o,e){var a,s,u,c,l,d,h=this;this._isAnimating&&(this._stop(this._isAnimating),this._isAnimating=!1),e&&this.animating?(this._futureLeft=n,this._futureTop=i,this._futureZoom=o,a=this._srL,s=this._srT,u=this._zoom,c=n-a,l=i-s,d=o-u,this._isAnimating=this._start(function g(e,t,r){r&&(h._srL=a+c*e,h._srT=s+l*e,h._zoom=u+d*e,h.callback&&h.callback(n,i,o))},function k(e){return h._isAnimating===e},function f(e,t,r){t===h._isAnimating&&(h._isAnimating=!1),(h._isDecComp||r)&&h._scrollComp&&h._scrollComp(),h.zooming&&(h.calcMaxScrollValue(),h._zoomComplete&&(h._zoomComplete(),h._zoomComplete=null))},this.animationDuration,this._isAnimating?this._easeOut:this._easeInOut)):(this._futureLeft=this._srL=n,this._futureTop=this._srT=i,this._futureZoom=this._zoom=o,this.callback&&this.callback(n,i,o),this.zooming&&(this.calcMaxScrollValue(),this._zoomComplete&&(this._zoomComplete(),this._zoomComplete=null)))},k._easeOut=function(e){return Math.pow(e-1,3)+1},k._easeInOut=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},k._startDeceleration=function(e){var t,r,n,i,u=this,c=(this.paging?(t=Math.max(Math.min(this._srL,this._maxSrL),0),r=Math.max(Math.min(this._srT,this._maxSrT),0),n=this._outerWidth,i=this._outerHeight,this._minDecL=Math.floor(t/n)*n,this._minDecT=Math.floor(r/i)*i,this._maxDecL=Math.ceil(t/n)*n,this._maxDecT=Math.ceil(r/i)*i):(this._minDecL=0,this._minDecT=0,this._maxDecL=this._maxSrL,this._maxDecT=this._maxSrT),function c(e,t,r){var n,i,o,a=u._srL+u._decVX,s=u._srT+u._decVY;u.bouncing||(n=Math.max(Math.min(u._maxDecL,a),u._minDecL),i=Math.max(Math.min(u._maxDecT,s),u._minDecT),n!==a&&(a=n,u._decVX=0),i!==s&&(s=i,u._decVY=0)),r?u.publish(a,s,u._zoom):(u._srL=a,u._srT=s),u.paging||(u._decVX*=.95,u._decVY*=.95),u.bouncing&&(i=n=0,r=u.penetrationAcceleration,o=u.penetrationDeceleration,a<u._minDecL?n=u._minDecL-a:a>u._maxDecL&&(n=u._maxDecL-a),s<u._minDecT?i=u._minDecT-s:s>u._maxDecT&&(i=u._maxDecT-s),0!=n&&(n*u._decVX<=0?u._decVX+=n*o:u._decVX=n*r),0!=i&&(i*u._decVY<=0?u._decVY+=i*o:u._decVY=i*r))}),o=this.snapping?4:.001,a=function a(){return Math.abs(u._decVX)>=o||Math.abs(u._decVY)>=o||!(u._isDecComp=!0)},s=function s(e,t,r){u._isDecelerating=!1,u._scrollComp&&u._scrollComp(),u._scrollTo(u._srL,u._srT,u.snapping)};this._isDecelerating=this._start(c,a,s)},k._stop=function(e){var t=null!=this._running[e];return t&&(this._running[e]=null),t},k._isRunning=function(e){return null!=this._running[e]},k._start=function(o,a,s,u,c){var l=this,d=this._time(),h=d,g=0,f=0,m=this._counter++;if(m%16==0){var e,t={};for(e in this._running)t[e]=!0;this._running=t}var _=function _(e){var e=!0!==e,t=l._time();if(!l._running[m]||a&&!a(m))return l._running[m]=null,void(s&&s(l._fps-f/((t-d)/1e3),m,!1));if(e)for(var r=Math.round((t-h)/(1e3/l._fps))-1,n=0;n<Math.min(r,4);n++)_(!0),f++;u&&1<(g=(t-d)/u)&&(g=1);var i=c?c(g):g;!1!==o(i,t,e)&&1!==g||!e?e&&(h=t,X(_)):(l._running[m]=null,s&&s(l._fps-f/((t-d)/1e3),m,1===g||null==u))};return this._running[m]=!0,X(_),m},k.dispose=function(){var e;x.prototype.dispose.call(this),(this._db=null)!=(e=this.cvsMng)&&e.dispose(),(this.cvsMng=null)!=(e=this.slide)&&e.dispose(),this.slide=null,this.hermite=null,this.offScreenCanvas=null,this.isDisposed=!0},Gt),dt=(e(Ut,It=h),(N=Ut.prototype).updateUiSetting=function(e){this.init(e=void 0===e?{}:e)},N.init=function(r,n){var i=this;void 0===n&&(n=[]),Object.keys(r).forEach(function(e){var t=i[e];t!==r[e]&&(i[e]=r[e],t===i[e]&&n.push(e))})},N._err=function(e){this._emit(I,e)},N._ok=function(){this._emit(I,b)},N.scrollTo=function(e){this.emit("_scrollToUI",e,!1)},N.setViewMode=function(e,t){return l(e)&&l(t)?e<0||t<0?(this._err(T),!1):(this._rows=t,this._columns=e,this.emit("_setViewModeUI",e,t),!0):(this._err(y),!1)},N.getConfig=function(){return{pubsub:this._tbPub.getPublishSubscribe(),uid:this.uid,size:this.size,mouseShape:this.mouseShape,scrollDirection:this.scrollDirection,sequence:this.sequence,location:this.location,showThumbnail:this.showThumbnail,showPageNumber:this.showPageNumber,showRemoveBtn:this.showRemoveBtn,fullThumbnail:this.fullThumbnail,allowPageDragging:this.allowPageDragging,allowResizing:this.allowResizing,allowKeyboardControl:this.allowKeyboardControl,autoChangeIndex:this.autoChangeIndex,rows:this.rows,columns:this.columns,background:this.background,border:this.border,pageBackground:this.pageBackground,pageBorder:this.pageBorder,selectedPageBackground:this.selectedPageBackground,selectedPageBorder:this.selectedPageBorder,hoverPageBackground:this.hoverPageBackground,hoverPageBorder:this.hoverPageBorder,placeholderBackground:this.placeholderBackground,pageMargin:this.pageMargin,checkbox:this.checkbox,pageNumber:this.pageNumber}},N.on=function(e,t){return f(e)&&G(t)?(this._tbPub._on(e,t),!0):(this._err(y),!1)},N.emit=function(e){var t;if(!f(e))return this._err(y),!1;for(var r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(t=this._tbPub)._emit.apply(t,[e].concat(n)),!0},N.off=function(e,t){return f(e)?(this._tbPub._off(e,t),!0):(this._err(y),!1)},N._notifyUi=function(e){this.emit("_updateThumbnailPropUI",e)},N.dispose=function(){var e;It.prototype.dispose.call(this),null!=(e=this._tbPub)&&e.dispose(),this._tbPub=null},nt(Ut,[{key:"optimizeImage",get:function(){return this._optimizeImage},set:function(e){this._optimizeImage=e,this._notifyUi({optimizeImage:e}),this._ok()}},{key:"multiSelectMode",get:function(){return this._multiSelectMode},set:function(e){d(e)?(this._multiSelectMode=e,this._notifyUi({multiSelectMode:e}),this._ok()):this._err(y)}},{key:"checkbox",get:function(){return this._checkboxConfig},set:function(e){c(e)?(Object.assign(this._checkboxConfig,e),this._notifyUi({checkbox:e}),this._ok()):this._err(y)}},{key:"pageNumber",get:function(){return this._pageNumberConfig},set:function(e){c(e)?(e.visibility!==undefined&&(this._showPNum="visible"===e.visibility),Object.assign(this._pageNumberConfig,e),this._notifyUi({pageNumber:e}),this._ok()):this._err(y)}},{key:"size",get:function(){return this._size},set:function(e){r(e)?(this._size=e,this._notifyUi({size:e}),this._ok()):this._err(Ze)}},{key:"mouseShape",get:function(){return this._mouseShape},set:function(e){f(e)?(this._mouseShape=e,this._notifyUi({mouseShape:e}),this._ok()):this._err(y)}},{key:"pubsub",get:function(){return this._tbPub.getPublishSubscribe()}},{key:"scrollDirection",get:function(){return this._direction},set:function(e){f(e)?(this._direction=e,this._notifyUi({scrollDirection:e}),this._ok()):this._err(y)}},{key:"sequence",get:function(){return this._sequence},set:function(e){l(e)?(this._sequence=e,this._notifyUi({sequence:e}),this._ok()):this._err(y)}},{key:"location",get:function(){return this._location},set:function(e){f(e)?(this._location=e,this._notifyUi({location:e}),this._ok()):this._err(y)}},{key:"showThumbnail",get:function(){return this._showThb},set:function(e){d(e)?(this._showThb=e,this._notifyUi({showThumbnail:e}),this._ok()):this._err(y)}},{key:"showPageNumber",get:function(){return this._showPNum},set:function(e){d(e)?(this._showPNum=e,this._pageNumberConfig||(this._pageNumberConfig={}),this._pageNumberConfig.visibility=e?"visible":"hidden",this._notifyUi({showPageNumber:e}),this._ok()):this._err(y)}},{key:"showRemoveBtn",get:function(){return this._showRmBtn},set:function(e){d(e)?(this._showRmBtn=e,this._notifyUi({showRemoveBtn:e}),this._ok()):this._err(y)}},{key:"fullThumbnail",get:function(){return this._fullThb},set:function(e){d(e)?(this._fullThb=e,this._notifyUi({fullThumbnail:e}),this._ok()):this._err(y)}},{key:"rows",get:function(){return this._rows},set:function(e){l(e)?e<=0?this._err(T):(this._rows=e,this._notifyUi({rows:e}),this._ok()):this._err(y)}},{key:"columns",get:function(){return this._columns},set:function(e){l(e)?e<=0?this._err(T):(this._columns=e,this._notifyUi({columns:e}),this._ok()):this._err(y)}},{key:"background",get:function(){return this._bg},set:function(e){o(e)?(this._bg=e,this._notifyUi({background:e}),this._ok()):this._err(M)}},{key:"border",get:function(){return this._border},set:function(e){a(e)?(this._border=e,this._notifyUi({border:e}),this._ok()):this._err(O)}},{key:"pageBackground",get:function(){return this._pageBg},set:function(e){o(e)?(this._pageBg=e,this._notifyUi({pageBackground:e}),this._ok()):this._err(M)}},{key:"pageBorder",get:function(){return this._pageBorder},set:function(e){a(e)?(this._pageBorder=e,this._notifyUi({pageBorder:e}),this._ok()):this._err(O)}},{key:"selectedPageBackground",get:function(){return this._sltPBg},set:function(e){o(e)?(this._sltPBg=e,this._notifyUi({selectedPageBackground:e}),this._ok()):this._err(M)}},{key:"selectedPageBorder",get:function(){return this._sltPBorder},set:function(e){a(e)?(this._sltPBorder=e,this._notifyUi({selectedPageBorder:e}),this._ok()):this._err(O)}},{key:"hoverPageBackground",get:function(){return this._hvPBg},set:function(e){o(e)?(this._hvPBg=e,this._notifyUi({hoverPageBackground:e}),this._ok()):this._err(M)}},{key:"hoverPageBorder",get:function(){return this._hvPBorder},set:function(e){a(e)?(this._hvPBorder=e,this._notifyUi({hoverPageBorder:e}),this._ok()):this._err(O)}},{key:"placeholderBackground",get:function(){return this._placeholderBg},set:function(e){o(e)?(this._placeholderBg=e,this._notifyUi({placeholderBackground:e}),this._ok()):this._err(M)}},{key:"pageMargin",get:function(){return this._pageMargin},set:function(e){r(e)?(this._pageMargin=e,this._notifyUi({pageMargin:e}),this._ok()):this._err(Ze)}},{key:"allowPageDragging",get:function(){return this._dragging},set:function(e){d(e)?(this._dragging=e,this._notifyUi({allowPageDragging:e}),this._ok()):this._err(y)}},{key:"allowResizing",get:function(){return this._resizing},set:function(e){d(e)?(this._resizing=e,this._notifyUi({allowResizing:e}),this._ok()):this._err(y)}},{key:"allowKeyboardControl",get:function(){return this._keyboard},set:function(e){d(e)?(this._keyboard=e,this._notifyUi({allowKeyboardControl:e}),this._ok()):this._err(y)}},{key:"autoChangeIndex",get:function(){return this._autoChangeIdx},set:function(e){d(e)?(this._autoChangeIdx=e,this._notifyUi({autoChangeIndex:e}),this._ok()):this._err(y)}}]),Ut),ht=((N=Rt.prototype).getRect=function(){if("free"===this.mode)return null;var e=(n=this._getMaxPoint()).minX,t=n.maxX,r=n.minY,n=n.maxY;return{x:Math.floor(e),y:Math.floor(r),width:Math.floor(t-e),height:Math.floor(n-r)}},N._initBox=function(){this.midpoints=this._calcMidpoint(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this._calcSlopeRatio(this.vertexes)},N._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},N.checkPointPosition=function(e){var t=(i=this._getMaxPoint()).minX,r=i.maxX,n=i.minY,i=i.maxY,o=this.probePoints[2*e],a=this.probePoints[2*e+1];return e<4?o===r&&a===i?"se":o===r&&a===n?"ne":o===t&&a===n?"nw":o===t&&a===i?"sw":null:o===r?"e":a===i?"s":o===t?"w":a===n?"n":null},N.onStartHandler=function(e,t,r){var n=this.isBoxSelected(e,t);null!==(n=r!==undefined?r:n)&&(this._startX=e,this._startY=t,this._lastX=e,this._lastY=t,-1===n?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=n,this.isMoveBox=!1),"free"===this.mode&&3<n&&(this.k1=this.slopeRatio[(1+(r=n-4))%4],this.b1=this.probePoints[(2*r+3)%8]-this.k1*this.probePoints[(2*r+2)%8],this.k2=this.slopeRatio[(3+r)%4],this.b2=this.probePoints[(2*r+1)%8]-this.k2*this.probePoints[(2*r+0)%8]))},N.onMoveHandler=function(e,t,r){if(this.isPointSelected||this.isMoveBox){var n=this.probePoints.slice();if(this.isPointSelected){var i=this.activeProbePoint,r=(r!==undefined&&(i=r),"normal"===this.mode?n=this._movePointNormal(n,i,e,t):(n=this._movePointFree(n,i,e,t),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4)),this.probePoints=n.slice(),this._checkRectConvexity(this.probePoints));this.isConvex=!!r}else if(this.isMoveBox){if(i=e-this._lastX,r=t-this._lastY,0==i&&0==r)return;n=this._moveBox(n,i,r),this.probePoints=n.slice()}i=this._calcMidpoint(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(i),this.midpoints=i,this._lastX=e,this._lastY=t}},N.onEndHandler=function(){this.isConvex=!0;var e,t=this._startX,r=this._startY,n=(this._startX=0,this._startY=0,this._lastX),i=this._lastY;(this.isPointSelected||this.isMoveBox)&&(this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null,e=this._checkRectConvexity(this.probePoints),(t!==n||r!==i)&&e||(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=this._calcMidpoint(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4))},N._checkEdge=function(e,t){return 0<=e&&e<=this.width&&0<=t&&t<this.height},N._movePointNormal=function(e,t,r,n){r=Math.max(0,Math.min(this.width,r)),n=Math.max(0,Math.min(this.height,n));var i=0,o=0;if(this.keepAspectRatio){var a=(c=this._getMaxPoint()).minX,s=c.maxX,u=c.minY,c=c.maxY,l=this.checkPointPosition(t),a=(0===(s=(s-a)/(c-u))||s===Infinity||s===-Infinity||isNaN(s)?s=this._lastWhr:this._lastWhr=s,o=i=0,"width");if(t<4){if(i=r-e[2*t],o=n-e[2*t+1],0===i||0===o)return e;a="width"}else if(c=t-4,"e"===l?(t=(1+c)%4,a="width"):"s"===l?(t=c,a="height"):"w"===l?(t=c,a="width"):"n"===l&&(t=(1+c)%4,a="height"),i=r-e[2*c],o=n-e[2*c+1],0===i||0===o)return e;"height"===a?(i=o*s,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(i=-i)):(o=i/s,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(o=-o)),u=e[2*t]+i,c=e[2*t+1]+o,u<0?(i=0-e[2*t],o=0):u>this.width?(i=this.width-e[2*t],o=0):c<0?(o=0-e[2*t+1],i=0):c>this.height&&(o=this.height-e[2*t+1],i=0),e[2*t]+=i,e[2*t+1]+=o,a=(t+1)%4,s=(t+3)%4,t%2?(e[2*a]+=i,e[2*s+1]+=o):(e[2*a+1]+=o,e[2*s]+=i)}else if(t<4){if(i=r-e[2*t],o=n-e[2*t+1],0===i&&0===o)return e;e[2*t]=r,e[2*t+1]=n,l=(t+1)%4,u=(t+3)%4,t%2?(e[2*l]=r,e[2*u+1]=n):(e[2*l+1]=n,e[2*u]=r)}else 0===(a=this.slopeRatio[(c=t-4)%4])?(e[(2*c+3)%8]=n,e[(2*c+1)%8]=n):a!==Infinity&&a!==-Infinity||(e[(2*c+2)%8]=r,e[(2*c+0)%8]=r);return e},N._movePointFree=function(e,t,r,n){r=Math.max(0,Math.min(this.width,r)),n=Math.max(0,Math.min(this.height,n));var i=e.slice();if(t<4){var o=r-e[2*t],a=n-e[2*t+1];if(0==o&&0==a)return e;e[2*t]=r,e[2*t+1]=n}else{var o=t-4,s=-(t=n-(a=this.slopeRatio[o%4])*r)/a,u=t,c=e[(2*o+9)%8]-a*e[(2*o+8)%8],l=-c/a,d=this.k1,h=this.b1,g=this.k2,f=this.b2;0===a?(e[(2*o+3)%8]=n,d!==Infinity&&d!==-Infinity&&(e[(2*o+2)%8]=(n-h)/d),e[(2*o+1)%8]=n,g!==Infinity&&g!==-Infinity&&(e[(2*o+0)%8]=(n-f)/g)):a===Infinity||a===-Infinity?(e[(2*o+2)%8]=r,e[(2*o+3)%8]=d*r+h,e[(2*o+0)%8]=r,e[(2*o+1)%8]=g*r+f):(0===d?e[(2*o+2)%8]+=s-l:d===Infinity||d===-Infinity?e[(2*o+3)%8]+=u-c:(e[(2*o+2)%8]=(h-t)/(a-d),e[(2*o+3)%8]=(a*h-d*t)/(a-d)),0===g?e[(2*o+0)%8]+=s-l:g===Infinity||g===-Infinity?e[(2*o+1)%8]+=u-c:(e[(2*o+0)%8]=(f-t)/(a-g),e[(2*o+1)%8]=(a*f-g*t)/(a-g)));for(var m=0;m<4;m++){var _=e[2*m],p=e[2*m+1];if(_<0||_>this.width||p<0||p>this.height)return i}}return e},N._moveBox=function(e,t,r){if("normal"===this.mode){var n=Math.min(e[0],e[2],e[4],e[6]),i=Math.max(e[0],e[2],e[4],e[6]),o=Math.min(e[1],e[3],e[5],e[7]),a=Math.max(e[1],e[3],e[5],e[7]);i+(t=n+t<0?-n:t)>this.width&&(t=this.width-i),a+(r=o+r<0?-o:r)>this.height&&(r=this.height-a);for(var s=0;s<4;s++)e[2*s]+=t,e[2*s+1]+=r}return e},N._isPointOnBox=function(e,t){var r,n,i,o;return"normal"===this.mode&&(r=(o=this._getMaxPoint()).minX,n=o.maxX,i=o.minY,o=o.maxY,r<=e&&e<=n&&i<=t&&t<=o)},N.isBoxSelected=function(e,t){var r=this._isPointOnBox(e,t);return null!==(e=this.isCtrlPointSelected(e,t))?e:r?-1:null},N.isCtrlPointSelected=function(e,t){for(var r=this.cropBoxStyle.ctrlWidth/this.zoom/2,n=this.cropBoxStyle.ctrlHeight/this.zoom/2,i=(s=this._getMaxPoint()).minX,o=s.maxX,a=s.minY,s=s.maxY,r=Math.min(Math.max(r,.1*(o-i)),3*r),n=Math.min(Math.max(n,.1*(s-a)),3*n),u=0;u<8;u++){var c=this.probePoints[2*u],l=this.probePoints[2*u+1];if(e<=c+r&&c-r<=e&&t<=l+n&&l-n<=t&&0<=e&&e<=this.width&&0<=t&&t<=this.height)return u}return null},N._checkRectConvexity=function(e){var t=(e[6]-e[0])*(e[3]-e[1])-(e[7]-e[1])*(e[2]-e[0]),r=(e[0]-e[2])*(e[5]-e[3])-(e[1]-e[3])*(e[4]-e[2]),n=(e[2]-e[4])*(e[7]-e[5])-(e[3]-e[5])*(e[6]-e[4]),i=(e[4]-e[6])*(e[1]-e[7])-(e[5]-e[7])*(e[0]-e[6]);if(t*r*n*i<0)return!1;var o=e.slice().concat(e.slice(0,2));if(this.slopeRatio.length)for(var a=0;a<2;a++)if(this.slopeRatio[a]!==this.slopeRatio[a+2]&&this._calcIntersection(o.slice(2*a,2*a+2),o.slice(2*a+2,2*a+4),o.slice(2*a+4,2*a+6),o.slice(2*a+6,2*a+8)))return!1;return 0<t*r*n*i},N._calcMidpoint=function(e){for(var t=e.slice(0,8).concat(e[0],e[1]),r=[],n=0;n<4;n++){var i=(t[2*n]+t[2*n+2])/2,o=(t[2*n+1]+t[2*n+3])/2;r.push(i,o)}return r},N._calcSlopeRatio=function(e){for(var t,r=[],n=e.slice(0,8).concat(e[0],e[1]),i=0;i<4;i++)t=n[2*i+3]-n[2*i+1]==0&&n[2*i+2]-n[2*i]==0?0:(n[2*i+3]-n[2*i+1])/(n[2*i+2]-n[2*i]),r.push(t);return r},N._calcIntersection=function(e,t,r,n){if(this._isRectCross(e,t,r,n)&&this._isLineSegmentCross(e,t,r,n)){var i=(n[0]-r[0])*(e[1]-t[1])-(t[0]-e[0])*(r[1]-n[1]),o=(e[1]-r[1])*(t[0]-e[0])*(n[0]-r[0])+r[0]*(n[1]-r[1])*(t[0]-e[0])-e[0]*(t[1]-e[1])*(n[0]-r[0]);if(0==i||0===o){var a=this._getLine(e,t),s=this._getLine(r,n),u=a[0],c=a[1],l=s[0],d=s[1];if(c[0]===l[0]&&c[1]===l[1])return c;if(u[0]===d[0]&&u[1]===d[1])return u;if(this._isOnLine(c,s)&&this._isOnLine(l,a))return[l,c];if(this._isOnLine(u,s)&&this._isOnLine(d,a))return[u,d];if(this._isOnLine(u,s)&&this._isOnLine(c,s))return[u,c];if(this._isOnLine(l,s)&&this._isOnLine(d,s))return[l,d]}return a=o/i,i=(e[0]-t[0])*(n[1]-r[1])-(t[1]-e[1])*(r[0]-n[0]),[a,(o=t[1]*(e[0]-t[0])*(n[1]-r[1])+(n[0]-t[0])*(n[1]-r[1])*(e[1]-t[1])-n[1]*(r[0]-n[0])*(t[1]-e[1]))/i]}return!1},N._getLine=function(e,t){return e[0]===t[0]?e[1]<t[1]?[e,t]:[t,e]:e[0]<t[0]?[e,t]:[t,e]},N._isOnLine=function(e,t){return t[0][0]===t[1][0]?e[1]>=t[0][1]&&e[1]<=t[1][1]:e[0]>=t[0][0]&&e[0]<=t[1][0]},N._isRectCross=function(e,t,r,n){var i=Math.min,o=Math.max;return i(e[0],t[0])<=o(r[0],n[0])&&i(r[0],n[0])<=o(e[0],t[0])&&i(e[1],t[1])<=o(r[1],n[1])&&i(r[1],n[1])<=o(e[1],t[1])},N._isLineSegmentCross=function(e,t,r,n){var i=e[0]*(r[1]-t[1])+t[0]*(e[1]-r[1])+r[0]*(t[1]-e[1]),o=e[0]*(n[1]-t[1])+t[0]*(e[1]-n[1])+n[0]*(t[1]-e[1]);return!(0<=(i^o)&&0!==i&&0!==o||0<=((i=r[0]*(e[1]-n[1])+n[0]*(r[1]-e[1])+e[0]*(n[1]-r[1]))^(o=r[0]*(t[1]-n[1])+n[0]*(r[1]-t[1])+t[0]*(n[1]-r[1])))&&0!==i&&0!==o)},Rt),gt=((N=Ot.prototype).setCropBoxStyle=function(t){Object.assign(this.cropBoxStyle,t),this.cropBoxes.forEach(function(e){Object.assign(e.cropBoxStyle,t)})},N.updateDpr=function(t){this.cropBoxes.forEach(function(e){e.dpr=t})},N.setKeepAspectRatio=function(t){this.keepAspectRatio=t,this._drawingFlag||this.cropBoxes.forEach(function(e){e.keepAspectRatio=t})},N.setAspectRatio=function(e){this.aspectRatio=e},N.setZoom=function(t){this.zoom=t,this.cropBoxes.forEach(function(e){e.zoom=t})},N.setPageSize=function(e,t){this.width=e,this.height=t},N.getRectArr=function(){var r=[];return this.cropBoxes.forEach(function(e,t){t=Object.assign({index:t},e.getRect()),r.push(t)}),r},N.clear=function(){var e;0<this.cropBoxes.length&&null!=(e=this.unselectedCallback)&&e.call(this),this.cropBoxes=[]},N.addFreeBox=function(e){var t=Y(),e=new ht({cropBoxStyle:this.cropBoxStyle,vertexes:e.slice(),width:this.width,height:this.height,mode:"free",dpr:t});return this.cropBoxes.push(e),e},N.addBox=function(e,t){var r=Y(),e=new ht({cropBoxStyle:this.cropBoxStyle,vertexes:e.slice(),width:this.width,height:this.height,type:t,mode:"normal",aspectRatio:this.aspectRatio,keepAspectRatio:this.keepAspectRatio,zoom:this.zoom,dpr:r});return this.cropBoxes.push(e),e},N.removeBox=function(e){return e===undefined&&this.clear(),!(e<0||e>=this.cropBoxes.length||(this.cropBoxes.splice(e,1),0))},N.getBoxByUid=function(e){for(var t=this.cropBoxes.length,r=0;r<t;r++)if(this.cropBoxes[r].uid===e)return this.cropBoxes[r];return null},N.onStartHandler=function(e,t,r){this._startX=e,this._startY=t,this.mouseDown=!0;var n=this.checkSelect(e,t);if(null===n)return r||this.clear(),void(this._activeBoxId=null);this._activeBoxId=this.cropBoxes[n].uid,this.getBoxByUid(this._activeBoxId).onStartHandler(e,t)},N.onMoveHandler=function(e,t,r){if(this.mouseDown){var n=null,i=e-this._startX,o=t-this._startY,a=null,s=2/this.zoom,u=(!this._activeBoxId&&e-this._startX<-s&&t-this._startY<-s?(a=0)<this.aspectRatio&&(o=i/this.aspectRatio):!this._activeBoxId&&e-this._startX>s&&t-this._startY<-s?(a=1,0<this.aspectRatio&&(o=-i/this.aspectRatio)):!this._activeBoxId&&e-this._startX>s&&t-this._startY>s?(a=2,0<this.aspectRatio&&(o=i/this.aspectRatio)):!this._activeBoxId&&e-this._startX<-s&&t-this._startY>s&&(a=3,0<this.aspectRatio&&(o=-i/this.aspectRatio)),[e,this._startY+o,this._startX,this._startY+o,this._startX,this._startY,e,this._startY]),c=[this._startX,this._startY,this._startX,this._startY+o,e,this._startY+o,e,this._startY];if(null!==a){for(var l=[],d=0;d<4;d++)a%2?(l.push(c[2*(a+d)%8]),l.push(c[(2*(a+d)+1)%8])):(l.push(u[2*(a+d)%8]),l.push(u[(2*(a+d)+1)%8]));return n=this.addBox(l,["topLeft","topRight","bottomRight","bottomLeft"][a]),0<this.aspectRatio?n.keepAspectRatio=!0:n.keepAspectRatio=!1,this._drawingFlag=!0,this._addNewFlag=this.keepAspectRatio,this._activeBoxId=n.uid,n.onStartHandler(this._startX,this._startY,a),void n.onMoveHandler(e,t,a)}(n=this._activeBoxId?this.getBoxByUid(this._activeBoxId):n)&&n.onMoveHandler(e,t)}},N.onEndHandler=function(){var e;this.mouseDown&&(this.mouseDown=!1,this._drawingFlag=!1,this._activeBoxId&&(e=this.getBoxByUid(this._activeBoxId),null!==this._addNewFlag&&(e.keepAspectRatio=this._addNewFlag,this._addNewFlag=null),e.onEndHandler(),0<this.cropBoxes.length&&null!=(e=this.selectedCallback)&&e.call(this,this.getRectArr()),this._activeBoxId=null))},N.checkSelect=function(e,t){var r=this.cropBoxes.length;if(0===r)return null;for(var n=r-1;0<=n;n--)if(null!==this.cropBoxes[n].isBoxSelected(e,t))return n;return null},N.checkSelectForCursor=function(e,t){var r=this.cropBoxes.length;if(0===r)return null;for(var n=r-1;0<=n;n--){var i,o=this.cropBoxes[n],a=o.isBoxSelected(e,t);if(null!==a)return i="move",-1!==a&&(i=o.checkPointPosition(a)),{part:a,type:o.type,position:i}}return null},N.dispose=function(){this.unselectedCallback=null,this.selectedCallback=null},Ot),ft=((N=Bt.prototype).setBorder=function(e,t,r){this.style.borderWidth=e,t&&(this.style.borderType=t),r&&(this.style.borderColor=r)},N.setSize=function(e,t){this.style.width=e||1,this.style.height=t||1},N.setPosition=function(e,t){this.style.left=e,this.style.top=t},N.clearSelectionBoxes=function(){this.selectionBoxes=[]},N.pushSelectionBox=function(e){this.selectionBoxes.push(e)},N.setNaturalSize=function(e,t){var r=this._db.getMid(this.uid);r&&(r.tempWidth=e,r.tempHeight=t),this.naturalWidth=e,this.naturalHeight=t,this.cropMng.setPageSize(e,t)},N.boxCount=function(){return this.cropMng.cropBoxes.length},Bt);(N=At.prototype).append=function(e){return-1===this._idxOf(e)&&(this.chs.push(e),!0)},N.insert=function(e,t){return!(t<0||t>=this.chs.length||(this.chs.splice(t,0,e),0))},N.remove=function(e){return-1!==(e=this._idxOf(e))&&(this.chs.splice(e,1),!0)},N.clear=function(){return this.chs=[],!0},N.move=function(e,t){return e===t||(e=this.chs.splice(e,1)[0],this.chs.splice(t,0,e)),!0},N.switch=function(e,t){if(e===t)return!0;var r=this.chs[e];return this.chs[e]=this.chs[t],this.chs[t]=r,!0},N.reorder=function(e){var t=e.length,r=[],n=0;if(this.chs.length!==t||0===t)return!1;for(var i=0;i<t;i++)e[i]===i&&n++;if(n===t)return!0;for(var o=0;o<t;o++)r[o]=this.chs[e[o]];for(var a=0;a<t;a++)this.chs[a]=r[a];return!0},N._idxOf=function(e){for(var t=f(e),r=0,n=this.chs.length;r<n;r++){if(t&&this.chs[r]===e)return r;if(!t&&this.chs[r].uid===e.uid)return r}return-1},e(Vt,pt=u=At),(N=Vt.prototype).getCurUid=function(){return-1===this.cur?null:this.chs[this.cur].uid},N.getCurPage=function(){return-1===this.cur?null:this.chs[this.cur]},N.idxPage=function(e){return this.chs[e]},N.uidPage=function(e){if(!e)return null;for(var t=0;t<this.total;t++)if(this.chs[t].uid===e)return this.chs[t];return null},N.uid2Idx=function(e){for(var t=0;t<this.total;t++)if(this.chs[t].uid===e)return t;return-1},N.setCur=function(e){return!(e<0||e>=this.total||(this.cur=e,0))},N.append=function(e){return this.chs.push(e),!0},N.remove=function(e){var t=this.chs.length;return 0!==t&&(1===t?this.chs[0].uid===e&&(this.cur=-1,this.total=0,this.slt=[],this.chs=[],!0):-1!==(t=this.uid2Idx(e))&&((t===this.cur&&t===this.total-1||t<this.cur)&&this.cur--,this.chs.splice(t,1),this.chs[this.cur]?this.slt=[this.chs[this.cur].uid]:this.slt=[],this.total--,!0))},N.clear=function(){return this.chs=[],this.slt=[],this.cur=-1,!(this.total=0)},N.getSlt=function(){return this.slt.slice()},N.setSlt=function(e){var t=e.length;return 0===t?(this.slt=e,this.cur=-1,!0):-1!==(t=this.uid2Idx(e[t-1]))&&(this.slt=e,this.cur=t,!0)},N.move=function(e,t){return pt.prototype.move.call(this,e,t),this.setSlt([this.chs[t].uid])},N.switch=function(e,t){return pt.prototype.switch.call(this,e,t),this.cur===e?this.setSlt([this.chs[t].uid]):this.cur===t&&this.setSlt([this.chs[e].uid]),!0},N.next=function(){return 0===this.total?-1:(1<this.total-this.cur&&this.cur<this.total&&this.cur++,this.slt=[this.chs[this.cur].uid],this.cur)},N.prev=function(){return 0===this.total?-1:(0<this.cur&&this.cur--,this.cur<0?-1:(this.slt=[this.chs[this.cur].uid],this.cur))},N.first=function(){return 0===this.total?-1:(this.cur=0,this.slt=[this.chs[0].uid],0)},N.last=function(){return 0===this.total?-1:(this.cur!==this.total-1&&(this.cur=this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)},N.goto=function(e){return 0===this.total?-1:(e!==this.cur&&(e=e<this.total?0<=e?e:0:this.total-1,this.cur=e),this.slt=[this.chs[this.cur].uid],this.cur)};var mt,_t,W,pt,It,x,k,Dt,vt,bt,yt=Vt,Tt=((N=Nt.prototype).addTab=function(e){var t=this.checkTab(e.uid),r=null;return-1!==t?r=this.tabs[t]:(t=Object.assign(this.dfConfig,e),r=new yt(t),"single"===this.mode?this.tabs=[r]:this.tabs.push(r)),r},N.getTab=function(e){return-1===(e=this.checkTab(e))?null:this.tabs[e]},N.checkTab=function(e){for(var t=this.tabs.length,r=0;r<t;r++)if(this.tabs[r].uid===e)return r;return-1},N.getCurTab=function(){return this.getTab(this.curTab)},N.setCurTab=function(e){if(~this.checkTab(e))return this.curTab=e,!0},N._moveToTop=function(e,t){0<=t&&t<e.length&&(t=e.splice(t,1)[0],e.push(t))},N.closeTab=function(e){return-1!==(e=this.checkTab(e))&&(this._opStack.pop(),this.tabs.splice(e,1),0===this.tabs.length?this.curTab=null:this.curTab=this._opStack[this._opStack.length-1],!0)},N.setMode=function(e){return("single"===e||"multiple"===e)&&(this.mode=e,!0)},N.removePage=function(e,t){return-1!=(e=this.checkTab(e))&&this.tabs[e].remove(t)},N.dispose=function(){},Nt),St=(e(Lt,W=h),(N=Lt.prototype).setUseHermite=function(e){this.useHermite=e,this._gpc.useHermite=e},N.drawSltBox=function(){var e;"single"===this._gpc.disMode&&(e=this._tabMng.getCurTab())&&(e=e.getCurPage())&&this._gpc.drawSltBox(e)},N.render=function(e,t){e=e||!1,t=t||!1;var r=this._tabMng.getCurTab();return!!r&&(this._gpc._layoutSingle(r,e,t),(e=r.getCurPage())?(this._checkDisplay(r),this._showPage(e.uid,r.uid),this._ok(),!0):(this._gpc.clearCanvas(),this._err(Ge),!1))},N.tabHandler=function(e,t,r){var n,i=this,o=(void 0===t&&(t=null),[]),a=this.getTab(e.uid);if((t=this.getCurTab())&&!a&&"single"===this.tabMode&&r&&this._emitM(we,t.uid,this.uid),!t||!a&&r)n=a=this._tabMng.addTab({uid:e.uid,name:e.name,type:e.type,chs:[]});else{if(!a)return void this._emitM(we,e.uid,this.uid);t.uid!==a.uid&&!r||(n=a)}e.chs.forEach(function(e){a.uidPage(e)||o.push(e)});var s=o.map(function(e){var t=i._db.getMetadata(e);return new ft({uid:e,naturalW:t.width,naturalH:t.height},i._db,i.cropBoxStyle)}),u=[];return e.chs.forEach(function(e){var t=o.indexOf(e);-1<t?u.push(s[t]):(t=a.uidPage(e))&&u.push(t)}),a.chs=u,a.total=e.chs.length,this.showLatest?(this.clearBox(),t=e.chs.indexOf(o[o.length-1]),(r=a.idxPage(t))&&(a.cur=t,a.setSlt([r.uid]))):0<a.total&&-1===a.cur&&(a.cur=0),n},N.showTab=function(e,t){var r=this,n=(void 0===t&&(t="add"),null!==this.showTabTimer&&clearTimeout(this.showTabTimer),e.uid);this._tabMng.setCurTab(n),W.prototype._emit.call(this,ve,{tabId:this._tabMng.curTab,tabs:this._tabMng.tabs}),this._showAllThb(e),(!e.total||e.cur<0)&&this._gpc.clearCanvas(),this._gpc.initGraphic(e),this._gpc._layoutSingle(e,!0),"remove"==t&&!e.total||(this.showTabTimer=setTimeout(function(){r.isDisposed||(r._checkDisplay(e),e.chs.length||r._gpc.offScreenCanvas.reset(),e.chs.forEach(function(e){r._showPage(e.uid,n)}))},20),this.getSlidePages()),this.__slt([e.cur]),this.__buffer(e,t),this.__pager()},N.onTabChanged=function(){var e={selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs};W.prototype._emit.call(this,ve,e)},N.updateSync=function(e,t,r){var n=this,i=null;if(!(i=t?this.getTab(t):this.getCurTab()))return this._err(w),!1;for(var o=i.chs,a=new ft({uid:e,naturalW:r.metadata.width||0,naturalH:r.metadata.height||0},this._db,this.cropBoxStyle),s=null,u=0;u<o.length;u++)if(o[u].uid===e){s=o[u],o[u]=a;break}if(this._tabMng.curTab===i.uid){if(i.getCurUid()===e&&this._gpc.offScreenCanvas.reset(),!s)return!1;t=!0,s&&s.naturalHeight===a.naturalHeight&&s.naturalWidth===a.naturalWidth&&(t=!1),this._gpc._layoutSingle(i,t),this._gpc.initGraphic(i),this._checkDisplay(i),o.forEach(function(e){n._showPage(e.uid,i.uid,!0)}),this.getSlidePages(),this.__buffer(i,"modify",e)}},N.setTabMode=function(e){-1!==["single","multiple"].indexOf(e)&&(this.tabMode=e)},N.getSlidePages=function(){var e,t,r,n=this,i=this._tabMng.getCurTab();i&&"continuous"!==i.disMode&&(null!==this.slideTimer&&clearTimeout(this.slideTimer),e=i.cur,i=i.total,t=[],r=[-1,-1,-1],0!==i&&(0<=e-1?(t.push(e-1),r[0]=e-1):r[0]=-1,t.push(e),(r[1]=e)+1<i?(t.push(e+1),r[2]=e+1):r[2]=-1),this._gpc&&this._gpc.slide&&(this._gpc.slide.targetIndexes=r),this.slideTimer=setTimeout(function(){n.isDisposed||t.forEach(function(e){e=n.idxUid(e),n._emitM(Se,e)})},200))},N._setSlidePages=function(e){var t,r,n,i=this,o=this.getCurTab();!this.isDisposed&&o&&"single"===o.disMode&&(t=o.cur,r=[-1,-1,-1],0!==(n=o.total)&&(0<=t-1&&(r[0]=t-1),(r[1]=t)+1<n&&(r[2]=t+1)),r.indexOf(e)<0||(n=r.map(function(e){return i._calcSlidePage(e,t,o)}),this._gpc.setSlidePages(n)))},N._calcSlidePage=function(e,t,r){var n={width:0,height:0,index:-1,uid:null,url:""};if(-1===e)return n;var i=this.idxUid(e),o=this._db.getMid(i),r=r.idxPage(e);if(!o||!r)return n;var n=r.style.width,a=r.style.height;return e!==t&&(t=this._gpc.calcZoomForSlide(r.naturalWidth||1,r.naturalHeight||1),n=(r.naturalWidth||0)*t,a=(r.naturalHeight||0)*t),{width:n,height:a,index:e,uid:i,url:o.minData||""}},N._showAllThb=function(e,t){var r=this,n=e.chs||[],t=e.uidPage(t),i=[];(n=t?[t]:n).forEach(function(e){var t;e&&(t=r._db.getMid(e.uid))&&(e={uid:e.uid,data:t.minData,tags:t.getTags()},i.push(e))}),W.prototype._emit.call(this,"_thumbnailChangedUI",i)},N.showThbItem=function(e){var t,r,n=this.getCurTab();n&&(t=n.uidPage(e),r=this._db.getMid(e),t&&r&&(t={uid:e,data:r.minData,tags:r.getTags()},W.prototype._emit.call(this,pe,t),r=n.uid2Idx(e),this._setSlidePages(r)))},N.needRender=function(e){return!!this._db&&!(!(e=this._db.getMid(e))||e.show.indexOf(this.uid)<0)},N.renderMainPage=function(e){this.needRender(e)&&this._db.getMid(e).img&&this._gpc.render(e)},N._showPage=function(r,e,n){var i,o=this;e===this._tabMng.curTab&&this.needRender(r)&&(i=this._db.getMid(r),!n&&i.img?null!=this&&this._gpc.render(r):!n&&i.active||(i.active=!0,this._db.getDataAsync(r).then(function(e){var t;o.needRender(r)?(e=_.createURLWithType(e.oriData),i.oriData=e.data,i.oriType=e.type,t=new Image,o.cors&&(t.crossOrigin="anonymous"),t.onload=function(){if(t.onload=null,t.onerror=null,o.isDisposed||!o.needRender(r))i.active=!1;else{if(n){if(!o._gpc)return;o._gpc.offScreenCanvas.reset()}i.img=t,o._emitM("dvsRenderMainPage",i.show.slice(),r)}},t.onerror=function(){t.onload=null,t.onerror=null},t.src=i.oriData):i.active=!1}).catch(function(e){i.active=!1})))},N._checkDisplay=function(o){var e,a=this;"single"===o.disMode&&(e=o.chs,o.getCurPage()&&e.forEach(function(e,t){var r,n,i=a._db.getMid(e.uid);i&&(e=a._gpc.checkDisplay(e.uid,o),n=(r=i.show).indexOf(a.uid),e?n<0&&r.push(a.uid):(-1<n&&r.splice(n,1),0===r.length&&(f(i.oriData)&&""!=i.oriData&&_.revokeObjectURL(i.oriData),i.active=!1,i.load=!1,i.img=null,i.oriData=null)))}))},N.getTabManager=function(){return this._tabMng},N.closeTab=function(e){var t;return!!this._tabMng.closeTab(e)&&(this._tabMng.curTab?this.showTab(this._tabMng.getCurTab(),"add"):(t=new yt({uid:"",name:"empty",type:"",chs:[]}),this.showTab(t,"remove")),W.prototype._emit.call(this,"_onCloseTab",e),!0)},N.closeCurTab=function(){},N.emptyTab=function(e){},N.getCurrentTabId=function(){return this._tabMng.curTab},N.getTab=function(e){return this._tabMng.getTab(e)},N.getCurTab=function(){return this._tabMng?this._tabMng.getCurTab():null},N.setCurTab=function(e){return!!this._tabMng&&this._tabMng.setCurTab(e)},N.getCurPageUids=function(){var e=this.getCurTab();return e?e.chs.map(function(e){return e.uid}):[]},N.getCurPageCount=function(){var e=this.getCurTab();return e?e.total:0},N.createThumbnailView=function(e){return e=new dt(e=void 0===e?{}:e,this._mPub.getPublishSubscribe()),this.thbViews.push(e),e},N.removeThumbnailView=function(e){if(!e)return this.thbViews=[],!0;for(var t=0;t<this.thbViews.length;t++)if(this.thbViews[t].uid===e)return this.thbViews.splice(t,1),!0;return!1},N.getThumbnailViewById=function(e){if(!this._chStr(e))return null;for(var t=0;t<this.thbViews.length;t++)if(this.thbViews[t].uid===e)return this._ok(),this.thbViews[t];return null},N.remove=function(e,t,r){if(void 0===t&&(t=!0),!g(e))return this._err(y),!1;var n=this._tabMng.tabs,i=(e.forEach(function(t){n.forEach(function(e){e.remove(t)})}),this.getCurTab());return i?(t&&this._emitM(Ee,this.uid,i,e),r&&r!==i.uid||(this.showTab(i,"remove"),0===i.chs.length&&(this._gpc.slide.targetIndexes=[-1,-1,-1],this._setSlidePages(-1),this._gpc.clearCanvas(),W.prototype._emit.call(this,Ie,{width:1,height:1,x:1,y:1}))),this._ok(),!0):void 0},N.rmAll=function(e){void 0===e&&(e=!0);var t=[],r=this.getCurTab();return r?(r.chs.forEach(function(e){t.push(e.uid)}),this.remove(t,e,r.uid)):(this._ok(),!0)},N.setBox=function(e,t){var r=this.getCurTab();if(!r)return!1;var n=r.getCurPage();if(n===undefined)return!1;for(var i=null,o=(g(e)?i=e:c(e)&&(i=[e]),t||0<n.boxCount()&&(n.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,r.cur)),i.length),a=0;a<o;a++){var s=i[a];if(!this._chBox(s,n.naturalWidth,n.naturalHeight))return!1;n.cropMng.addBox([s.left,s.top,s.left+s.width,s.top,s.left+s.width,s.top+s.height,s.left,s.top+s.height],"bottomRight")}return this.drawSltBox(),0<(e=n.cropMng.getRectArr()).length&&W.prototype._emit.call(this,de,r.cur,e),this._ok(),!0},N._chBox=function(e,t,r){return l(e.left)&&l(e.top)&&l(e.width)&&l(e.height)?!(e.left<0||e.top<0||e.width<0||e.height<0)&&!(e.left>t||e.top>r||e.left+e.width>t||e.top+e.height>r)||(this._err(T),!1):(this._err(E),!1)},N.clearBox=function(e){var t=this.getCurTab();if(!t)return this._err(w),!1;var r=t.getCurPage();return r?(0<r.boxCount()&&W.prototype._emit.call(this,p,t.cur),r.cropMng.removeBox(e),this.drawSltBox(),this._ok(),!0):(this._err(Ge),!1)},N._clearBox=function(){var e=this.getCurTab();if(!e)return!1;var t=e.getCurPage();return t?(0<t.boxCount()&&W.prototype._emit.call(this,p,e.cur),t.cropMng.removeBox(),W.prototype._emit.call(this,"_clearSltBox",e.cur),!0):(this._err(Ge),!1)},N.setFreeBox=function(e){var t=this.getCurTab();if(!t)return!1;var r=t.getCurPage();return r!==undefined&&(r.cropMng.addFreeBox(e),this.drawSltBox(),0<(e=r.cropMng.getRectArr()).length&&W.prototype._emit.call(this,de,t.cur,e),this._ok(),!0)},N.nextPage=function(e){void 0===e&&(e=!0);var t=this.getCurTab();if(!t)return this._err(w),-1;var r=t.cur,n=t.slt.length,i=t.next();return-1===i?(this._err(w),-1):((r!==t.total-1||1<n)&&((n=t.idxPage(r))&&0<n.boxCount()&&(n.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,t.cur)),this.__pager(),this.render(!0),this.getSlidePages(),e&&this._emitM(S,this.uid,le),this.__buffer(t,"shift")),this.__slt(),this._ok(),i)},N.prevPage=function(e){void 0===e&&(e=!0);var t=this.getCurTab();if(!t)return this._err(w),-1;var r=t.cur,n=t.slt.length,i=t.prev();return-1===i?(this._err(w),-1):((0!==r||1<n)&&((n=t.idxPage(r))&&0<n.boxCount()&&(n.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,t.cur)),this.__pager(),this.render(!0),this.getSlidePages(),e&&this._emitM(S,this.uid,ce),this.__buffer(t,"shift")),this.__slt(),this._ok(),i)},N.firstPage=function(e){void 0===e&&(e=!0);var t=this.getCurTab();if(!t)return this._err(w),-1;var r=t.cur,n=t.slt.length,i=t.first();return-1===i?(this._err(w),-1):((0!==r||1<n)&&((n=t.idxPage(r))&&0<n.boxCount()&&(n.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,t.cur)),this.__pager(),this.render(!0),this.getSlidePages(),e&&this._emitM(S,this.uid,"first"),this.__buffer(t,"shift")),this.__slt(),this._ok(),i)},N.lastPage=function(e){void 0===e&&(e=!0);var t=this.getCurTab();if(!t)return this._err(w),-1;var r=t.cur,n=t.slt.length,i=t.last();return-1===i?(this._err(w),-1):((r!==t.total-1||1<n)&&((n=t.idxPage(r))&&0<n.boxCount()&&(n.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,t.cur)),this.__pager(),this.render(!0),this.getSlidePages(),e&&this._emitM(S,this.uid,"last"),this.__buffer(t,"shift")),this.__slt(),this._ok(),i)},N.gotoPage=function(e,t){if(void 0===t&&(t=!0),!this._checkIndex(e))return-1;var r=this.getCurTab();if(!r)return this._err(w),-1;var n=r.cur,i=r.slt.length,o=r.goto(e);return-1===o?(this._err(w),-1):((n!==e||1<i)&&((i=r.idxPage(n))&&0<i.boxCount()&&(i.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,r.cur)),this.render(!0),this.getSlidePages(),t&&this._emitM(S,this.uid,"goto",e),this.__buffer(r,"shift")),this.__pager(),this.__slt(),this._ok(),o)},N.__slt=function(e){e=e||this.getSltIndexes(),W.prototype._emit.call(this,"_imageSelectedUI",e),W.prototype._emit.call(this,"imageSelected",e)},N.updateSltIndex=function(){this.__slt(),this.__pager(),this.render()},N.__pager=function(){var e=this.getCurTab(),t={cur:-1,total:0};e&&(t={cur:e.cur,total:e.total}),W.prototype._emit.call(this,"_pagerChangedUI",t)},N.changeTag=function(e){W.prototype._emit.call(this,Fe,e)},N.changeDir=function(e){W.prototype._emit.call(this,Fe,e)},N.rmPageTag=function(e,t){return!!(t=this._tabMng.getTab(t))&&(t.remove(e),t.uid===this._tabMng.curTab?(this.showTab(t,"remove"),0===t.chs.length&&this._gpc.clearCanvas(),!0):void 0)},N.addPageTag=function(e,t){return!!(t=this._tabMng.getTab(t))&&(!!(r=this._db.getMetadata(e))&&(e=new ft({uid:e,naturalW:r.width,naturalH:r.height},this._db,this.cropBoxStyle),t.append(e),t.total=t.chs.length,this.showLatest&&(t.cur=t.total-1),void(t.uid===this._tabMng.curTab&&this.showTab(t,"add"))));var r},N.emptyTag=function(e){if(!this._tabMng.getTab(e))return!1},N.renameTag=function(e,t,r){if(!(r=this._tabMng.getTab(r)))return!1;r.name=t,W.prototype._emit.call(this,ve,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},N.renameFile=function(e,t,r){if(!(r=this._tabMng.getTab(r)))return!1;r.name=t,W.prototype._emit.call(this,ve,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},N.switchPage=function(e,t,r,n){void 0===r&&(r=!0);var i=null;return(i=n?this.getTab(n):this.getCurTab())?!(!this._checkIndex(e)||!this._checkIndex(t)||(i.switch(e,t),this._tabMng.curTab===i.uid&&(this._showAllThb(i),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(i,"shift")),r&&this._emitM(Ce,this.uid,i,"switch",e,t),this._ok(),0)):(this._err(w),!1)},N.movePage=function(e,t,r,n){void 0===r&&(r=!0);var i=null;return(i=n?this.getTab(n):this.getCurTab())?!(!this._checkIndex(e)||!this._checkIndex(t)||(i.move(e,t),this._tabMng.curTab===i.uid&&(this._showAllThb(i),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(i,"shift")),r&&this._emitM(Ce,this.uid,i,"move",e,t),this._ok(),0)):(this._err(w),!1)},N.reorderPage=function(e,t,r,n){void 0===r&&(r=!0);var i=null;if(!(i=n?this.getTab(n):this.getCurTab()))return this._err(w),!1;var o,n=i.getCurPage();i.reorder(e),this._tabMng.curTab===i.uid&&(this._showAllThb(i),this.setSltPages(t,!1),o=i.getCurPage(),n&&o&&n.uid!==o.uid&&0<n.boxCount()&&(n.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,i.cur))),r&&this._emitM(Ce,this.uid,i,"reorder",e,t)},N.uidIdx=function(e){var t=this.getCurTab();if(!t)return this._err(w),null;if(!this._chStr(e))return null;for(var r=t.chs.length,n=0;n<r;n++)if(t.chs[n].uid===e)return this._ok(),n;return this._err(E),null},N.idxUid=function(e){if(!this._checkIndex(e))return null;var t=this.getCurTab();return t?(this._ok(),t.chs[e].uid):(this._err(w),null)},N.getRealTimeMetadataByIndex=function(e){if(e!==undefined&&!this._checkIndex(e))return null;var t=this.getCurTab();if(!t)return this._err(w),null;var r=t.getCurPage();return(r=e!==undefined?t.idxPage(e):r)?(e=this._db.getMetadata(r.uid))?(t=this._db.getMid(r.uid),(e=Object.assign({},e)).width=t.tempWidth,e.height=t.tempHeight,this._ok(),e):null:(this._err(w),null)},N.getMetadata=function(e){return this._checkIndex(e)&&(e=this.idxUid(e))?(this._ok(),(e=this._db.getMetadata(e))?Object.assign({},e):null):null},N.setMetadata=function(e,t){return!!this._checkIndex(e)&&(c(t)?!!(e=this.idxUid(e))&&(this._ok(),this._db.updateMetadata(e,t)):(this._err(y),!1))},N.getCurIndex=function(){var e=this._tabMng.getCurTab();return e?(this._ok(),e.cur):(this._err(w),-1)},N.getNextPageIndex=function(){var e=this._tabMng.getCurTab();if(!e)return this._err(w),-1;if(this._ok(),0===e.total)return-1;var t=e.cur+1;return t>=e.total?-1:t},N.getPrePageIndex=function(){var e=this._tabMng.getCurTab();return e?(this._ok(),0===e.total||(e=e.cur-1)<0?-1:e):(this._err(w),-1)},N.setCurIndex=function(e,t){if(void 0===t&&(t=!0),!this._checkIndex(e))return!1;var r=this._tabMng.getCurTab();if(!r)return this._err(w),!1;var n=r.getCurUid(),i=this.idxUid(e);if(i!==n){if((n=r.getCurPage())&&0<n.boxCount()&&(n.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,r.cur)),r.setSlt([i]),!r.setCur(e))return!1;this.__pager(),this.render(!0),this.getSlidePages(),t&&this._emitM(S,this.uid,"cur",e),this.__buffer(r,"shift")}return this.__slt(),this._ok(),!0},N.setSltPages=function(e,t){var r=this;if(void 0===t&&(t=!0),!g(e))return this._err(y),!1;var n=e.length;0===n&&this._err(E);for(var i=0;i<n;i++){var o=e[i];if(!this._checkIndex(o))return!1}var a=this.getCurTab();if(!a)return this._err(w),!1;var s=!1,u=a.getCurUid(),c=a.slt.slice(),l=(c.length!==n&&(s=!0),[]),d=(e.forEach(function(e,t){e=r.idxUid(e),l.push(e),c[t]!==e&&(s=!0)}),!1);return u&&u!==l[n-1]&&(s=!0,(u=a.getCurPage())&&0<u.boxCount()&&(u.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,a.cur)),d=!0),a.setSlt(l),this.__slt(e),this.__pager(),this.render(d),this.getSlidePages(),t&&this._emitM(S,this.uid,"slt",e),!s&&c.length===l.length||this.__buffer(a,"shift"),this._ok(),!0},N.getCustomDataByIndex=function(e){return this._checkIndex(e)?(e=this.idxUid(e))?this.getCustomDataByUid(e):(this._err(w),null):null},N.getCustomDataByUid=function(e){return(e=this._db.getMid(e))?(this._ok(),e.customData):(this._err(w),null)},N.getSltIndexes=function(){var t=this;if(!(e=this.getCurTab()))return this._err(w),null;var e=e.getSlt(),r=[];return e.forEach(function(e){e=t.uidIdx(e),r.push(e)}),this._ok(),r},N.selectAll=function(){var e=this.getCurTab();if(!e)return this._err(w),!1;for(var t=[],r=e.chs.length,n=0;n<r;n++)t.push(n);return this.setSltPages(t)},N.zoomIn=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomIn()},N.zoomOut=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomOut()},N.zoomTo=function(e,t,r){return!l(e)||t!==undefined&&!l(t)||r!==undefined&&!l(r)?(this._err(y),-1):("single"===this.tabMode&&(this._tabMng.dfConfig.zoom=e,this._tabMng.dfConfig.fitType="none"),this._ok(),this._gpc.zoomTo(e,!1,t,r))},N.flip=function(e){var t=this.getCurTab();if(!t)return this._err(w),!1;if(!(t=t.getCurPage()))return this._err(w),!1;this._clearBox();var r=this._db.getMid(t.uid);return r&&(this._releaseMin(r),e=r.edt.flip(e),this._emitM(v,"flip",{uid:t.uid,flipObj:e,page:t,interlayerData:r})),this.getSlidePages(),!0},N.reset=function(){var t=this,e=this.getCurTab();return e&&e.getCurPage()?(this._clearBox(),e.chs.forEach(function(e){t._resetByPage(e,!0)}),this.getSlidePages(),this._ok(),!0):(this._err(w),!1)},N._resetByPage=function(e,t){var r,n=this._db.getMid(e.uid);n&&0<n.edt.all.length&&(r=this._db.getMetadata(e.uid),t&&this._releaseMin(n),r&&e.setNaturalSize(r.width,r.height),n.edt.reset(),this._emitM(v,"reset",{uid:e.uid}))},N.resetByIndex=function(e,t){var r=this.getCurTab();r?!l(e)||e<0||e>=r.chs.length?this._err(y):(e=r.chs[e],this._resetByPage(e,t)):this._err(w)},N.getRotateAngle=function(e){var t=this.getCurTab();return t?!l(e)||e<0||e>=t.chs.length?(this._err(y),0):(e=t.chs[e],(t=this._db.getMid(e.uid))?(this._releaseMin(t),t.edt.getCurAngle()):0):(this._err(w),0)},N.rotate=function(r,e){var n=this,i=this.getCurTab();if(!i)return this._err(w),!1;if(!l(r))return this._err(y),!1;if(e!==undefined){if(!l(e)&&!g(e))return this._err(y),!1;if(g(e))for(var t=e.length,o=0;o<t;o++)if(!this._checkIndex(e[o]))return!1}var a,s,u=[],c=(i.getCurPage(),e===undefined?-1<(s=i.cur)&&(u=[s]):u=l(e)?[e]:e.slice(),this._clearBox(),this._gpc.rotateMode);return u.forEach(function(e){var t;a=i.chs[e],(e=n._db.getMid(a.uid))&&(n._releaseMin(e),t=e.edt.rotate(r,0,0,c),n._emitM(v,"rotate",{uid:a.uid,rotateObj:t,page:a,interlayerData:e}))}),this.getSlidePages(),this._ok(),!0},N.crop=function(e,t,r,n){var i=this.getCurTab();if(!i)return this._err(w),!1;if(!(i=i.getCurPage()))return this._err(w),!1;if(!(l(e)&&l(t)&&l(r)&&l(n)))return this._err(y),!1;var o=i.naturalWidth,a=i.naturalHeight;return e<0||o<e||t<0||a<t||r<0||n<0||o<e+r||a<t+n?(this._err(T),!1):(this._clearBox(),(o=this._db.getMid(i.uid))&&(this._releaseMin(o),a=o.edt.crop(e,t,r,n),this._emitM(v,"crop",{uid:i.uid,cropObj:a,page:i})),this.getSlidePages(),this._ok(),!0)},N.erase=function(e,t,r,n,i){var o=this.getCurTab();if(!o)return this._err(w),!1;if(!(o=o.getCurPage()))return this._err(w),!1;if(!(l(e)&&l(t)&&l(r)&&l(n)))return this._err(y),!1;var a=o.naturalWidth,s=o.naturalHeight;return e<0||a<e||t<0||s<t||r<0||n<0||a<e+r||s<t+n?(this._err(T),!1):(this._clearBox(),(a=this._db.getMid(o.uid))&&(this._releaseMin(a),s=a.edt.erase(e,t,r,n,i),this._emitM(v,"erase",{uid:o.uid,eraseObj:s,page:o})),this.getSlidePages(),this._ok(),!0)},N.overlay=function(e,t,r,n,i,o,a){if(!this._checkIndex(e))return!1;if(!(s=this.getCurTab()))return this._err(w),!1;if(!(e=s.idxPage(e)))return this._err(w),!1;if(!(l(t)&&l(r)&&l(n)&&l(i)))return this._err(y),!1;var s=e.naturalWidth,u=e.naturalHeight;return t<0||s<t||r<0||u<r||n<0||i<0||s<t+n||u<r+i?(this._err(T),!1):((s=this._db.getMid(e.uid)).overlays.push({type:"overlay",left:t,top:r,width:n,height:i,color:o,opacity:a}),s&&(this._releaseMin(s),this._emitM(v,"overlay",{uid:e.uid})),this.getSlidePages(),this._clearBox(),this._ok(),!0)},N.changePageSize=function(e,t){if(e<=0||t<=0)return this._err(E),!1;var r=this.getCurTab();if(!r)return this._err(w),!1;if(!(r=r.getCurPage()))return this._err(w),!1;if(!l(e)||!l(t))return this._err(y),!1;this._clearBox();var n=this._db.getMid(r.uid);return n&&(this._releaseMin(n),e=n.edt.changePageSize(e,t),this._emitM(v,"changePageSize",{uid:r.uid,changeSizeObj:e,page:r})),this.getSlidePages(),this._ok(),!0},N._releaseMin=function(e){f(e.minData)&&""!=e.minData&&_.revokeObjectURL(e.minData),e.minData=null,e.minType=null,e.activeMin=!1},N.setSaveType=function(e){return["image/png","image/jpeg"].indexOf(e)<0?(this._err(E),!1):(this.saveType=e,this._gpc.offScreenCanvas.saveType=e,this._ok(),!0)},N.getSaveType=function(){return this.saveType},N.setSaveQuality=function(e){return e<0||1<e?(this._err(T),!1):(this.saveQuality=e,this._ok(),!0)},N.getSaveQuality=function(){return this.saveQuality},N.setRotateMode=function(e){return l(e)||this._err(y),-1===[0,1,2].indexOf(e)?(this._err(E),!1):(this._gpc.rotateMode=e,this._ok(),!0)},N.getRotateMode=function(){return this._gpc.rotateMode},N.setSaveBackgroundColor=function(e){return this._ok(),this._gpc.setSaveBackgroundColor(e)},N.getSaveBackgroundColor=function(){return this._gpc.saveBg},N.saveTransformation=function(){var o=this,e=this.getCurTab();if(!e)return Promise.reject(w);for(var a=e.getCurUid(),t=e.chs,r=[],n=function n(e){var i=t[e];(e=o._db.getMid(i.uid))&&0<e.edt.all.length&&(e=new Promise(function(t,e){var r=!0,n=(a===i.uid&&(r=!1),o._db.getMid(i.uid));n.img?o._saveToBlob(i.uid,n.img,i,r).then(function(e){t(e)}):n.oriData?o._getImage(i.uid,n.oriData,i,r).then(function(e){t(e)}):o._db.getDataAsync(i.uid).then(function(e){e=_.createURL(e.oriData),o._getImage(i.uid,e,i,r).then(function(e){t(e)})}).catch(function(e){})}),r.push(e))},i=0;i<t.length;i++)n(i);return Promise.all(r)},N.__buffer=function(e,t,r){t={action:t,uids:(null==(t=e.data)||null==(t=t.chs)?void 0:t.slice())||[],currentUid:e.getCurUid(),selectedUids:e.getSlt(),pageUid:r},W.prototype._emit.call(this,_e,e.getCurUid()),W.prototype._emit.call(this,"bufferChanged",t)},N._getImage=function(n,i,o,a){var s=this;return new Promise(function(t,e){var r=new Image;s.cors&&(r.crossOrigin="anonymous"),r.src=i,r.onload=function(){r.onload=null,r.onerror=null,s._saveToBlob(n,r,o,a).then(function(e){t(e)}),"object"===i.type&&_.revokeObjectURL(i),r.src=""}})},N._saveToBlob=function(n,e,t,r){var i=this,o=this._gpc.offScreenCanvas,a=this._db.getMid(n),s=(o.render({viewerUid:"",pageUid:n,isMin:!1,img:e,page:t,midData:a}),this._db.getMetadata(n)),u=a.customData,c=a.tags,t=(s.width=t.naturalWidth,s.height=t.naturalHeight,a.setTempSize(t.naturalWidth,t.naturalHeight),e=null,o.mainCanvas),e=o.mainWidth,o=o.mainHeight,l=this.saveCanvas,d=l.getContext("2d");return l.width!==e&&(l.width=e),l.height!==o&&(l.height=o),d.drawImage(t,0,0),new Promise(function(r,e){l.toBlob(function(t){a.edt.reset(),i._emitM(Ne,n,{oriData:t,minData:null,metadata:s,customData:u,tags:c},!0),i._db&&i._db.getDataAsync(n).then(function(e){r(t)})},i.saveType,i.saveQuality)})},N.getMinPageData=function(){var e=this.getCurTab();return(e=e&&e.getCurPage())&&this._db.getMid(e.uid)?this._gpc.getMinPageData():(this._err(w),null)},N.setCropBoxStyle=function(t){Object.assign(this.cropBoxStyle,t),this._tabMng.tabs.forEach(function(e){e.chs.forEach(function(e){e.cropMng.setCropBoxStyle(t)})}),this.drawSltBox()},N.setKeepZoom=function(e){this._gpc.keepZoom=e},N.getFitType=function(){return this._gpc.fitType},N.setFitType=function(e){if(!this._chStr(e))return!1;if(-1===["window","width","height"].indexOf(e))return this._err(E),!1;this._gpc.fitType=e;var t=this.getCurTab();return t&&(t.fitType=e),"single"===this.tabMode&&(this._tabMng.dfConfig.fitType=e),this.render(!0),this.getSlidePages(),this._ok(),!0},N.setZoom=function(e){"single"===this.tabMode&&(this._tabMng.dfConfig.zoom=e,this._tabMng.dfConfig.fitType="none");var t=this.getCurTab();return t&&(t.zoom=e),this._gpc.setZoom(e)},N.getZoom=function(){return this._gpc.getZoom()},N.setMinZoom=function(e){return this._gpc.minZoom=e,!0},N.getMinZoom=function(){return this._gpc.minZoom},N.setMaxZoom=function(e){return this._gpc.maxZoom=e,!0},N.getMaxZoom=function(){return this._gpc.maxZoom},N.setOperationMode=function(e){var t,r=this.getCurTab();r&&(r.opMode=e,(t=r.getCurPage())&&0<t.boxCount()&&(t.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,r.cur))),this._gpc.opMode=e,"single"===this.tabMode&&(this._tabMng.dfConfig.opMode=e)},N.getOperationMode=function(){return this._gpc.opMode},N.setDisplayMode=function(e){var t,r=this.getCurTab();r&&(r.disMode=e,(t=r.getCurPage())&&0<t.boxCount()&&(t.cropMng.clear(),this.drawSltBox(),W.prototype._emit.call(this,p,r.cur))),this._tabMng.dfConfig.disMode=e,this._gpc.disMode=e,this.render(!0),this.getSlidePages()},N.setAspectRatio=function(t){this._gpc.aspectRatio=t;var e=this.getCurTab();e&&e.chs.forEach(function(e){e.cropMng.setAspectRatio(t)})},N.getAspectRatio=function(){return this._gpc.aspectRatio},N.setKeepAspectRatio=function(t){this._gpc.keepAspectRatio=t;var e=this.getCurTab();e&&e.chs.forEach(function(e){e.cropMng.setKeepAspectRatio(t)})},N.getKeepAspectRatio=function(){return this._gpc.keepAspectRatio},N.setPageMargin=function(e){return this._gpc.iMargin=e,!0},N.getPageMargin=function(){return this._gpc.iMargin},N.setZoomDelta=function(){},N.getZoomDelta=function(){},N.setAllowSlide=function(e){this._gpc.setAllowSlide(e)},N.getAllowSlide=function(){return this._gpc.allowSlide},N._getOutEvent=function(e){var t=null,r=-1,n=-1,i=-1,o=null==e?void 0:e.clientX,a=null==e?void 0:e.clientY,s=this.getCurTab();return(t=s?s.getCurPage():t)&&(r=this.uidIdx(t.uid)),this._gpc.checkMouseOverPage(e)&&(s=this._gpc.getMouseCoordinate(e),t=this._gpc.toPageCoordinate(s.x,s.y),n=Math.floor(t.x),i=Math.floor(t.y)),{index:r,imageX:n,imageY:i,pageX:o,pageY:a}},N._initEvent=function(){var n=this;W.prototype._on.call(this,Le,function(e,t){n._emitM(Le,e,t)}),W.prototype._on.call(this,he,this._onSetCanvasVisibility.bind(this)),W.prototype._on.call(this,"_bindSlideComponent",function(e){var t;null!=(t=n._gpc.slide)&&t.bind(e)}),W.prototype._on.call(this,"_unbindSlideComponent",function(){var e;null!=(e=n._gpc.slide)&&e.unbind()}),W.prototype._on.call(this,"_bindCanvas",function(e){n._gpc.cvsMng.bind(e)}),W.prototype._on.call(this,"_unbindCanvas",function(e){n._gpc.cvsMng.unbind(e)}),W.prototype._on.call(this,"_setCanvasSize",function(e){var t=e.width,r=e.height,e=(e.isChange,n._gpc.updateDpr(),n._gpc.setCanvasOffsetSize(t,r));(t=n.getCurTab())&&0!==t.total||W.prototype._emit.call(n,Ie,{width:0,height:0,x:0,y:0}),"single"!==n._gpc.disMode||e||(n.render(!1,!1),n.drawSltBox(),n.getSlidePages())}),W.prototype._on.call(this,"_displayedImageChanged",function(e){e.forEach(function(e){var t=n._db.getMid(e);t&&(t.minData?(t={uid:e,data:t.minData,tags:t.getTags()},W.prototype._emit.call(n,pe,t)):n._emitM(Se,e))})}),W.prototype._on.call(this,"_canvasMousedown",function(e,t){var r=n.getCurTab();r&&r.getCurPage()&&n._gpc.onCanvasMousedown(e),t=t||n._getOutEvent(e),W.prototype._emit.call(n,"mousedown",t,e)}),W.prototype._on.call(this,"_canvasMousemove",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"mousemove",t,e)}),W.prototype._on.call(this,"_canvasMouseup",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"mouseup",t,e)}),W.prototype._on.call(this,"_canvasMouseOver",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"mouseover",t,e)}),W.prototype._on.call(this,"_canvasMouseOut",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"mouseout",t,e)}),W.prototype._on.call(this,"_canvasTouchstart",function(e,t){var r=n.getCurTab();r&&r.getCurPage()&&n._gpc.onCanvasTouchstart(e),t=t||n._getOutEvent(e),W.prototype._emit.call(n,"mousedown",t,e)}),W.prototype._on.call(this,"_canvasTouchmove",function(e,t){var r=n.getCurTab();r&&r.getCurPage()&&n._gpc.onCanvasTouchmove(e),t=t||n._getOutEvent(e),W.prototype._emit.call(n,"mousemove",t,e)}),W.prototype._on.call(this,"_canvasTouchend",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"mouseup",t,e)}),W.prototype._on.call(this,"_canvasScroll",function(e,t){var r=n.getCurTab();r&&r.getCurPage()&&n._gpc.onCanvasScroll(e)}),W.prototype._on.call(this,"_canvasWheel",function(e,t){var r=n.getCurTab();r&&r.getCurPage()&&(n._gpc.onCanvasWheel(e),W.prototype._emit.call(n,"wheel",e))}),W.prototype._on.call(this,"_canvasClick",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"click",t,e)}),W.prototype._on.call(this,"_canvasDoubleClick",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"dblclick",t,e)}),W.prototype._on.call(this,fe,function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"rightclick",t,e)}),W.prototype._on.call(this,fe,function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"contextmenu",t,e)}),W.prototype._on.call(this,"_canvasKeyDown",function(e){W.prototype._emit.call(n,"keydown",e)}),W.prototype._on.call(this,"_canvasKeyUp",function(e){W.prototype._emit.call(n,"keyup",e)}),W.prototype._on.call(this,"_canvasResize",function(e,t){W.prototype._emit.call(n,"resize",e,t)}),W.prototype._on.call(this,"_canvasDragStart",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"dragstart",t,e)}),W.prototype._on.call(this,"_canvasDragMove",function(e,t){t=t||n._getOutEvent(e),W.prototype._emit.call(n,"dragmove",t,e)}),W.prototype._on.call(this,"_canvasDragDone",function(e){W.prototype._emit.call(n,"dragdone",e)}),W.prototype._on.call(this,"_documentMove",function(e){var t=n.getCurTab();t&&t.getCurPage()&&n._gpc.onDocumentMousemove(e)}),W.prototype._on.call(this,"_documentUp",function(e){var t=n.getCurTab();t&&t.getCurPage()&&n._gpc.onDocumentMouseup(e)}),W.prototype._on.call(this,"_SetSelectedIndexes",function(e){n.setSltPages(e,!1),n._emitM(S,n.uid,"slt",e)}),W.prototype._on.call(this,"_onReOrderThumbnail",function(e,t){n.getCurTab()&&n.reorderPage(e,t,!0)}),W.prototype._on.call(this,"_canvasDefaultCursor",function(e){n._gpc.defaultCursor=e=void 0===e?"default":e}),W.prototype._on.call(this,"_onRender",function(){n.render()}),W.prototype._on.call(this,"_onRenderBoxes",function(){n.drawSltBox()}),W.prototype._on.call(this,"_getSlidePages",function(){n.getSlidePages()})},N._onSetCanvasVisibility=function(e){},N.setScrBarW=function(e){this._gpc.scrBarW=e},N._onM=function(e,t){this._mPub._on(e,t)},N._emitM=function(e){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this._mPub&&(t=this._mPub)._emit.apply(t,[e].concat(n))},N._offM=function(e,t){this._mPub._off(e,t)},N._err=function(e){this._emitM(I,e)},N._ok=function(){this._emitM(I,b)},N._chStr=function(e){return!!f(e)||(this._err(y),!1)},N._checkIndex=function(e){return l(e)?!(e<0||e>=this.getCurPageCount())||(this._err(T),!1):(this._err(y),!1)},N.dispose=function(){var e;this.isDisposed||(W.prototype.dispose.call(this),null!=(e=this._mPub)&&e.dispose(),this._mPub=null,(this._db=null)!=(e=this._tabMng)&&e.dispose(),(this._tabMng=null)!=(e=this._gpc)&&e.dispose(),this._gpc=null,this.saveCanvas=null,this.isDisposed=!0)},Lt),wt=(e(Ft,_t=h),(N=Ft.prototype)._bindEvents=function(){var n=this;this.on("_updateFocus",function(e){var t=e.viewerId,e=e.thumbnailId;n._focus.viewerId=t,n._focus.thumbnailId=e}),this.on("_documentKeyDownUI",function(e){var t=(r=n._focus).thumbnailId,r=r.viewerId;n.uid===r&&null!=(r=n.ui)&&r.documentKeyDown(e,t)}),this.on("_documentKeyUpUI",function(e){var t=(r=n._focus).thumbnailId,r=r.viewerId;n.uid===r&&null!=(r=n.ui)&&r.documentKeyUp(e,t)}),this.on("_gotoPage",function(e){n.gotoPage(e)})},N.initConfig=function(e){var t,r=[],n=tt({},e,e.uiConfig.canvasConfig,e.uiConfig);for(t in n)"uiConfig"===t||c(n[t])||this._checkInitProp(n,t)||r.push(t);return this._config=e,this._uiConfig=e.uiConfig,r},N._e=function(e){_t.prototype._emit.call(this,I,e)},N._checkInitProp=function(e,t){var r=this[t],n=e[t];return this[t]=e[t],r===n||r!==this[t]},N.closeTab=function(e){if(!f(e))return this._e(y),!1;this.vm.closeTab(e)},N.closeCurrentTab=function(){return this.vm.closeCurTab()},N.emptyTab=function(e){},N.getCurrentTabId=function(){return this.vm.getCurrentTabId()},N.getTab=function(e){return f(e)?this.vm.getTab(e):(this._e(y),null)},N.setCurrentTab=function(e){return this.vm.setCurTab(e)},N.getCurrentTab=function(){return this.vm.getCurTab()},N.getCurrentPageUids=function(){return this.vm.getCurPageUids()},N.getCurrentIndex=function(){return this.vm.getCurIndex()},N.getNextPageIndex=function(){return this.vm.getNextPageIndex()},N.getPrePageIndex=function(){return this.vm.getPrePageIndex()},N.setCurrentIndex=function(e){return this.vm.setCurIndex(e)},N.setSelectedIndexes=function(e){return this.vm.setSltPages(e)},N.getSelectedIndexes=function(){return this.vm.getSltIndexes()},N.selectAll=function(){return this.vm.selectAll()},N.removeSync=function(e){if(!g(e=l(e)?[e]:e))return this._e(y),!1;if(0===e.length)return this._e(E),!1;for(var t=[],r=0;r<e.length;r++){var n=this.getUidByIndex(e[r]);if(!n)return!1;t.push(n)}return this.vm.remove(t)},N.removeAllSync=function(){return this.vm.rmAll()},N.switchPage=function(e,t){return this.vm.switchPage(e,t,!0)},N.movePage=function(e,t){return this.vm.movePage(e,t,!0)},N.getViewerElement=function(){var e;return this._e(b),(null==(e=this.ui)?void 0:e.getViewerElement())||null},N.bindView=function(e,t,r){var n=this;return void 0===t&&(t={}),void 0===r&&(r=!0),this.ViewUi?e&&j(e=f(e)?document.getElementById(e):e)?(this.unbindView(),r?Z(t,this._uiConfig):this._uiConfig=t,this.ui=new this.ViewUi(e,this._uiConfig,this.postfix,this._iPub.getPublishSubscribe(),this._db,this.workerBlobURL),null!=(r=this.ui)&&r.createInnerThumbnail(),null!=(t=this.ui)&&t.setDisplayMode(this.displayMode),null!=(e=this.ui)&&e.setOperationMode(this.operationMode),this.vm.thbViews.forEach(function(e){var t;null!=(t=n.ui)&&t.createThumbnail(e.getConfig())}),(r=this.vm.getCurTab())&&(this.vm._showAllThb(r),this.vm.getSlidePages(),this.vm.updateSltIndex(),this.vm.onTabChanged(),this._e(b)),!0):(this._e(E),!1):(this._e(Xe),!1)},N.unbindView=function(){var e;return null!=(e=this.ui)&&e.unbindView(),this.ui=null,this._e(b),!0},N.dispose=function(){var e;_t.prototype.dispose.call(this),null!=(e=this._iPub)&&e.dispose(),this._iPub=null,this._db=null,this.ViewUi=null,(this.ui=null)!=(e=this.vm)&&e.dispose(),this.vm=null},N.updateUISetting=function(e){var t;return c(e)?(Z(e,e=J(this._dfConfig.uiConfig)),(t=null==(t=this.ui)?void 0:t.containerBox)&&this.bindView(t,e,!1),this._e(b),!0):(this._e(y),!1)},N.bindContent=function(e){var t;return j(e=f(e)?document.getElementById(e):e)?null!=(t=this.ui)&&t.bindContent(e)?(this._e(b),!0):(this._e(C),!1):(this._e(E),!1)},N.unbindContent=function(){var e;return null!=(e=this.ui)&&e.unbindContent()?(this._e(b),!0):(this._e(C),!1)},N.fullScreen=function(){var e;return null!=(e=this.ui)&&e.fullScreen()?(this._e(b),!0):(this.ui?this._e(ze):this._e(C),!1)},N.cancelFullScreen=function(){var e;return this._e(b),null==(e=this.ui)?void 0:e.cancelFullScreen()},N.fullWebPage=function(){var e;return null!=(e=this.ui)&&e.fullPage()?(this._e(b),!0):(this._e(C),!1)},N.cancelFullWebPage=function(){var e;return null!=(e=this.ui)&&e.cancelFullPage()?(this._e(b),!0):(this._e(C),!1)},N.setButtonClass=function(e,t){if(!f(e)||!f(t))return this._e(y),!1;var r=this._uiConfig.buttons[e];return r?(r.setClass=t,null!=(r=this.ui)&&r.setButtonClass(e)?(this._e(b),!0):(this._e(C),!1)):(this._e(C),!1)},N.setViewMode=function(e,t){return l(e)&&l(t)?0<e&&0<t?(this._uiConfig.canvasConfig.rows=t,this._uiConfig.canvasConfig.columns=e,this.ui?(this._e(b),this.vm.rows=t,this.vm.columns=e,null==(r=this.ui)?void 0:r.setViewMode(e,t)):(this._e(C),!1)):(this._e(T),!1):(this._e(y),!1);var r},N.createCustomElement=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=!1);var n=e;return j(n=f(e)?document.getElementById(e):n)?(this._e(b),null==(e=this.ui)?void 0:e.createCustomElement(n,t,r)):(this._e(y),!1)},N.updateVideoContainer=function(e){return this.ui?(f(e)||this._e(y),this.ui.updateVideoContainer(e),this._e(b),!0):(this._e(C),!1)},N.setLoadingImage=function(e){var t;this.uiConfig.canvasConfig.loadingImageUrl=e,null!=(t=this.ui)&&t.setLoadingImage(e)},N.nextPage=function(){return this.vm.nextPage()},N.prevPage=function(){return this.vm.prevPage()},N.firstPage=function(){return this.vm.firstPage()},N.lastPage=function(){return this.vm.lastPage()},N.gotoPage=function(e){return this.vm.gotoPage(e)},N.createThumbnailView=function(e){if(void 0===e&&(e={}),_t.prototype._emit.call(this,D,"Invoking viewer#createThumbnailView."),!c(e))return this._e(y),null;var t,r=[],n=this.vm.createThumbnailView(this._uiConfig.thumbnail);return null!=(t=this.ui)&&t.createThumbnail(n.getConfig()),n.init(e,r),r.length?(t="Failed to create the thumbnail viewer because the parameter ".concat(r[0]," is incorrect."),this._e({code:80024,message:t})):this._e(b),n},N.removeThumbnailView=function(e){_t.prototype._emit.call(this,D,"Invoking viewer#removeThumbnailView.");var t=e;return f(e)||(t=e.uid),this.vm.removeThumbnailView(t)?(null!=(e=this.ui)&&e.removeThumbnail(t),this._e(b),!0):(this._e(E),!1)},N.getThumbnailViewById=function(e){return this.vm.getThumbnailViewById(e)},N.getThumbnailViewsList=function(){return this.vm.thbViews},N.getIndexByUid=function(e){return this.vm.uidIdx(e)},N.getUidByIndex=function(e){return this.vm.idxUid(e)},N.getRealTimeMetadataByIndex=function(e){return this.vm.getRealTimeMetadataByIndex(e)},N.getMetadataByIndex=function(e){return this.vm.getMetadata(e)},N.setMetadataByIndex=function(e,t){return this.vm.setMetadata(e,t)},N.getCustomDataByIndex=function(e){return this.vm.getCustomDataByIndex(e)},N.getCustomDataByUid=function(e){return this.vm.getCustomDataByUid(e)},N.zoomIn=function(){return this.vm.zoomIn()},N.zoomOut=function(){return this.vm.zoomOut()},N.zoomTo=function(e,t,r){return this.vm.zoomTo(e,t,r)},N.reset=function(){return this.vm.reset()},N.resetByIndex=function(e,t){return this.vm.resetByIndex(e,t)},N.mirror=function(){return this.vm.flip(1)},N.flip=function(){return this.vm.flip(0)},N.rotate=function(e,t){return this.vm.rotate(e,t)},N.getRotateAngle=function(e){return this.vm.getRotateAngle(e)},N.crop=function(e,t,r,n){return this.vm.crop(e,t,r,n)},N.erase=function(e,t,r,n,i){return this.vm.erase(e,t,r,n,i)},N.overlayRectangle=function(e,t,r,n,i,o,a){return this.vm.overlay(e,t,r,n,i,o,a)},N.changePageSize=function(e,t){return this.vm.changePageSize(e,t)},N.saveTransformation=function(){return this.vm.saveTransformation()},N.getMinPageData=function(){return"single"===this.displayMode?this.vm.getMinPageData():"continuous"===this.displayMode?null:void 0},N.setFreeSelectedBox=function(e){return this.vm.setFreeBox(e)},N.setSelectedBoxes=function(e,t){if(1!==this.operationMode)return this._e(Je),!1;if(e===undefined)return this._e(y),!1;if(t!==undefined&&!d(t))return this._e(y),!1;var r=this.getCurrentTab();if(!r)return this._e(w),!1;if((r=r.getCurPage())===undefined)return this._e(w),!1;var n=null;if(g(e)){if(0===(n=e).length)return this._e(E),!1}else{if(!c(e))return this._e(y),!1;n=[e]}for(var i=n.length,o=r.naturalWidth,a=r.naturalHeight,s=0;s<i;s++){var u=n[s];if(!(l(u.left)&&l(u.top)&&l(u.width)&&l(u.height)))return this._e(y),!1;u.left<0&&(u.left=0),u.top<0&&(u.top=0),u.width<=0&&(u.width=1),u.height<=0&&(u.height=1),u.width+u.left>o&&(u.width=o-u.left),u.height+u.top>a&&(u.height=a-u.top)}return"single"===this.displayMode?this.vm.setBox(e,t):null!=(r=this.ui)&&r.setSelectedBoxes(e,t),this._e(b),!0},N.clearSelectedBoxes=function(e){var t;return this.vm.clearBox(e),null!=(t=this.ui)&&t.clearSelectedBoxes(e),this._e(b),!0},N.render=function(){return this.vm.render()},N.on=function(e,t){f(e)&&G(t)?(this._iPub._on(e,t),this._e(b)):this._e(y)},N.emit=function(e){var t;if(f(e)){for(var r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this._iPub)._emit.apply(t,[e].concat(n)),this._e(b)}else this._e(y)},N.off=function(e,t){!f(e)||t!==undefined&&!G(t)?this._e(y):(this._iPub._off(e,t),this._e(b))},N.offById=function(e,t){f(e)&&f(t)?(this._iPub._offById(e,t),this._e(b)):this._e(y)},nt(Ft,[{key:"zoom",get:function(){return this.vm.getZoom()},set:function(e){l(e)?e<=0?this._e(T):(this.vm.setZoom(e),this._e(b)):this._e(y)}},{key:"minZoom",get:function(){return this._config.minZoom},set:function(e){l(e)?e<=0?this._e(T):(this._config.minZoom=e,this.vm.setMinZoom(e),this._e(b)):this._e(y)}},{key:"maxZoom",get:function(){return this._config.maxZoom},set:function(e){l(e)?e<=0?this._e(T):(this._config.maxZoom=e,this.vm.setMaxZoom(e),this._e(b)):this._e(y)}},{key:"showViewer",get:function(){return this._uiConfig.showViewer},set:function(e){var t;d(e)?(this._uiConfig.showViewer=e,null!=(t=this.ui)&&t.setShowViewer(e),e&&this.render(),this._e(b)):this._e(y)}},{key:"showHeader",get:function(){return this._uiConfig.toolbars.header},set:function(e){var t;d(e)?(this._uiConfig.toolbars.header=e,null!=(t=this.ui)&&t.setShowHeader(e),this._e(b)):this._e(y)}},{key:"headerColor",get:function(){return this._uiConfig.headerColor},set:function(e){var t;o(e)?(this._uiConfig.headerColor=e,null!=(t=this.ui)&&t.setHeaderColor(e),this._e(b)):this._e(M)}},{key:"showTopMenu",get:function(){return this._uiConfig.toolbars.topMenu},set:function(e){var t;d(e)?(this._uiConfig.toolbars.topMenu=e,null!=(t=this.ui)&&t.setShowTopMenu(e),this._e(b)):this._e(y)}},{key:"topMenuColor",get:function(){return this._uiConfig.topMenuColor},set:function(e){var t;o(e)?(this._uiConfig.topMenuColor=e,null!=(t=this.ui)&&t.setTopMenuColor(e),this._e(b)):this._e(M)}},{key:"topMenuBorder",get:function(){return this._uiConfig.topMenuBorder},set:function(e){var t;a(e)?(this._uiConfig.topMenuBorder=e,null!=(t=this.ui)&&t.setTopMenuBorder(e),this._e(b)):this._e(O)}},{key:"showSidebar",get:function(){return this._uiConfig.showSidebar},set:function(e){var t;d(e)?(this._uiConfig.showSidebar=e,null!=(t=this.ui)&&t.setShowSidebar(e),this._e(b)):this._e(y)}},{key:"showAside",get:function(){return this._uiConfig.toolbars.asideMenu},set:function(e){var t;d(e)?(this._uiConfig.toolbars.asideMenu=e,null!=(t=this.ui)&&t.setShowAside(e),this._e(b)):this._e(y)}},{key:"showMain",get:function(){return this._uiConfig.showMain},set:function(e){var t;d(e)?(this._uiConfig.showMain=e,null!=(t=this.ui)&&t.setShowMain(e),this.emit(he,e),this._e(b)):this._e(y)}},{key:"showFooter",get:function(){return this._uiConfig.toolbars.bottomMenu},set:function(e){var t;d(e)?(this._uiConfig.toolbars.bottomMenu=e,null!=(t=this.ui)&&t.setShowFooter(e),this._e(b)):this._e(y)}},{key:"showTab",get:function(){return this._uiConfig.showTab},set:function(e){var t;d(e)?(this._uiConfig.showTab=e,null!=(t=this.ui)&&t.setShowTab(e),this._e(b)):this._e(y)}},{key:"footerColor",get:function(){return this._uiConfig.footerColor},set:function(e){var t;o(e)?(this._uiConfig.footerColor=e,null!=(t=this.ui)&&t.setFooterColor(e),this._e(b)):this._e(M)}},{key:"showVideoContainer",get:function(){return this._uiConfig.showVideoContainer},set:function(e){var t;d(e)||this._e(y),this._uiConfig.showVideoContainer=e,null!=(t=this.ui)&&t.setShowVideoContainer(e),this._e(b)}},{key:"fitType",get:function(){return this.vm.getFitType()},set:function(e){this.vm.setFitType(e)&&(this._config.fitType=e)}},{key:"canvasMouseShape",get:function(){return this._uiConfig.canvasConfig.canvasMouseShape},set:function(e){var t;f(e)?(this._uiConfig.canvasConfig.canvasMouseShape=e,null!=(t=this.ui)&&t.setCanvasMouseShape(e),this._e(b)):this._e(y)}},{key:"canvasBackground",get:function(){return this._uiConfig.canvasConfig.canvasBackground},set:function(e){var t;o(e)?(this._uiConfig.canvasConfig.canvasBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("canvasBackground",e),this._e(b)):this._e(M)}},{key:"cropBoxStyle",get:function(){return this.vm.cropBoxStyle},set:function(e){c(e)?(e.borderColor!==undefined&&(this._uiConfig.canvasConfig.selectedBoxLineColor=e.borderColor),this._uiConfig.canvasConfig.cropBoxStyle||(this._uiConfig.canvasConfig.cropBoxStyle={}),Object.assign(this._uiConfig.canvasConfig.cropBoxStyle,e),this.vm.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),null!=(e=this.ui)&&e.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),this._e(b)):this._e(y)}},{key:"selectedBoxLineColor",get:function(){return this.vm.cropBoxStyle.borderColor},set:function(e){o(e)?(this._uiConfig.canvasConfig.selectedBoxLineColor=e,this._uiConfig.canvasConfig.cropBoxStyle||(this._uiConfig.canvasConfig.cropBoxStyle={}),this._uiConfig.canvasConfig.cropBoxStyle.borderColor=e,this._uiConfig.canvasConfig.cropBoxStyle.ctrlBorderColor=e,this.vm.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),null!=(e=this.ui)&&e.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),this._e(b)):this._e(M)}},{key:"saveBackgroundColor",get:function(){return this.vm.getSaveBackgroundColor()},set:function(e){this.vm.setSaveBackgroundColor(e)}},{key:"saveQuality",get:function(){return this.vm.getSaveQuality()},set:function(e){this.vm.setSaveQuality(e)}},{key:"saveType",get:function(){return this.vm.getSaveType()},set:function(e){this.vm.setSaveType(e)}},{key:"rotateMode",get:function(){return this.vm.getRotateMode()},set:function(e){this.vm.setRotateMode(e)}},{key:"canvasBorder",get:function(){return this._uiConfig.canvasConfig.canvasBorder},set:function(e){var t;a(e)?(this._uiConfig.canvasConfig.canvasBorder=e,null!=(t=this.ui)&&t.setCanvasBorder(e),this._e(b)):this._e(O)}},{key:"pageBackground",get:function(){return this._uiConfig.canvasConfig.pageBackground},set:function(e){var t;o(e)?(this._uiConfig.canvasConfig.pageBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("pageBackground",e),this._e(b)):this._e(M)}},{key:"pageBorder",get:function(){return this._uiConfig.canvasConfig.pageBorder},set:function(e){var t;a(e)?(this._uiConfig.canvasConfig.pageBorder=e,null!=(t=this.ui)&&t.setInnerTbProp("pageBorder",e),this._e(b)):this._e(O)}},{key:"selectedPageBackground",get:function(){return this._uiConfig.canvasConfig.selectedPageBackground},set:function(e){var t;o(e)?(this._uiConfig.canvasConfig.selectedPageBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("selectedPageBackground",e),this._e(b)):this._e(M)}},{key:"selectedPageBorder",get:function(){return this._uiConfig.canvasConfig.selectedPageBorder},set:function(e){var t;a(e)?(this._uiConfig.canvasConfig.selectedPageBorder=e,null!=(t=this.ui)&&t.setInnerTbProp("selectedPageBorder",e),this._e(b)):this._e(O)}},{key:"hoverPageBorder",get:function(){return this._uiConfig.canvasConfig.hoverPageBorder},set:function(e){var t;a(e)?(this._uiConfig.canvasConfig.hoverPageBorder=e,null!=(t=this.ui)&&t.setInnerTbProp("hoverPageBorder",e),this._e(b)):this._e(O)}},{key:"hoverPageBackground",get:function(){return this._uiConfig.canvasConfig.hoverPageBackground},set:function(e){var t;o(e)?(this._uiConfig.canvasConfig.hoverPageBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("hoverPageBackground",e),this._e(b)):this._e(M)}},{key:"placeholderBackground",get:function(){return this._uiConfig.canvasConfig.placeholderBackground},set:function(e){var t;o(e)?(this._uiConfig.canvasConfig.placeholderBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("placeholderBackground",e),this._e(b)):this._e(M)}},{key:"showPageNumber",get:function(){return this._uiConfig.canvasConfig.showPageNumber},set:function(e){var t;d(e)?(this._uiConfig.canvasConfig.showPageNumber=e,this._uiConfig.canvasConfig.pageNumber||(this._uiConfig.canvasConfig.pageNumber={}),this._uiConfig.canvasConfig.pageNumber.visibility=e?"visible":"hidden",null!=(t=this.ui)&&t.setInnerTbProp("showPageNumber",e),this._e(b)):this._e(y)}},{key:"pageNumber",get:function(){var e;return null==(e=this._uiConfig.canvasConfig)?void 0:e.pageNumber},set:function(e){var t;c(e)?(e.visibility!==undefined&&(this._uiConfig.canvasConfig.showPageNumber="visible"===e.visibility),this._uiConfig.canvasConfig.pageNumber||(this._uiConfig.canvasConfig.pageNumber={}),Object.assign(this._uiConfig.canvasConfig.pageNumber,e),null!=(t=this.ui)&&t.setInnerTbProp("pageNumber",e),this._e(b)):this._e(y)}},{key:"checkbox",get:function(){return this._uiConfig.canvasConfig.checkbox||{}},set:function(e){var t;c(e)?(this._uiConfig.canvasConfig.checkbox||(this._uiConfig.canvasConfig.checkbox={}),Object.assign(this._uiConfig.canvasConfig.checkbox,e),null!=(t=this.ui)&&t.setInnerTbProp("checkbox",e),this._e(b)):this._e(y)}},{key:"multiSelectMode",get:function(){return this._multiSelectMode},set:function(e){var t;d(e)?(this._multiSelectMode=e,null!=(t=this.ui)&&t.setInnerTbProp("multiSelectMode",e),this._e(b)):this._e(y)}},{key:"allowPageDragging",get:function(){return this._uiConfig.canvasConfig.allowPageDragging},set:function(e){var t;d(e)?(this._uiConfig.canvasConfig.allowPageDragging=e,null!=(t=this.ui)&&t.setInnerTbProp("allowPageDragging",e),this._e(b)):this._e(y)}},{key:"allowKeyboardControl",get:function(){return this._uiConfig.canvasConfig.allowKeyboardControl},set:function(e){var t;d(e)?(this._uiConfig.canvasConfig.allowKeyboardControl=e,null!=(t=this.ui)&&t.setInnerTbProp("allowKeyboardControl",e),this._e(b)):this._e(y)}},{key:"pageMargin",get:function(){return this._uiConfig.canvasConfig.pageMargin},set:function(e){var t;r(e)?(this._uiConfig.canvasConfig.pageMargin=e,this.vm.setPageMargin(e),null!=(t=this.ui)&&t.setInnerTbProp("pageMargin",e),this._e(b)):this._e(Ze)}},{key:"scrollDirection",get:function(){return this._uiConfig.canvasConfig.scrollDirection},set:function(e){var t;f(e)?(this._uiConfig.canvasConfig.scrollDirection=e,null!=(t=this.ui)&&t.setInnerTbProp("scrollDirection",e),this._e(b)):this._e(y)}},{key:"autoChangeIndex",get:function(){return this._uiConfig.canvasConfig.autoChangeIndex},set:function(e){var t;d(e)?(this.uiConfig.canvasConfig.autoChangeIndex=e,null!=(t=this.ui)&&t.setInnerTbProp("autoChangeIndex",e)):this._e(y)}},{key:"outerBorder",get:function(){return this._uiConfig.outerBorder},set:function(e){var t;a(e)?(this._uiConfig.outerBorder=e,null!=(t=this.ui)&&t.setOuterBorder(e),this._e(b)):this._e(O)}},{key:"sidebarWidth",get:function(){return this._uiConfig.sidebarWidth},set:function(e){var t;r(e)?(this._uiConfig.sidebarWidth=e,null!=(t=this.ui)&&t.setSidebarWidth(e),this._e(b)):this._e(Ze)}},{key:"width",get:function(){var e;return(null==(e=this.ui)?void 0:e.getViewerWidth())||this._uiConfig.width},set:function(e){var t;r(e)?(this._uiConfig.width=e,null!=(t=this.ui)&&t.setViewerWidth(e),this._e(b)):this._e(Ze)}},{key:"height",get:function(){var e;return(null==(e=this.ui)?void 0:e.getViewerHeight())||this._uiConfig.height},set:function(e){var t;r(e)?(this._uiConfig.height=e,null!=(t=this.ui)&&t.setViewerHeight(e),this._e(b)):this._e(Ze)}},{key:"uiConfig",get:function(){return this._uiConfig}},{key:"operationMode",get:function(){return this._config.operationMode},set:function(e){var t;l(e)?-1===[0,1,2].indexOf(e)?this._e(E):(this._config.operationMode=e,this.vm.setOperationMode(e),null!=(t=this.ui)&&t.setOperationMode(e),this._e(b)):this._e(y)}},{key:"allowSlide",get:function(){return this.vm.getAllowSlide()},set:function(e){d(e)?(this.vm.setAllowSlide(e),this._e(b)):this._e(y)}},{key:"tabMode",get:function(){return this._config.tabMode},set:function(e){"single"===e||"multiple"===e?(this._config.tabMode=e,this.vm.setTabMode(e),this._e(b)):this._e(E)}},{key:"selectionBoxAspectRatio",get:function(){return this.vm.getAspectRatio()},set:function(e){var t;l(e)?(this.vm.setAspectRatio(e),null!=(t=this.ui)&&t.setAspectRatio(e),this._e(b)):this._e(y)}},{key:"keepAspectRatio",get:function(){return this.vm.getKeepAspectRatio()},set:function(e){d(e)?this.vm.setKeepAspectRatio(e):this._e(y)}},{key:"displayMode",get:function(){return this._config.displayMode},set:function(e){var t;f(e)?-1!==["single","continuous"].indexOf(String(e))?(this._config.displayMode=e,null!=(t=this.ui)&&t.setDisplayMode(e),this.vm.setDisplayMode(e),this._e(b)):this._e(T):this._e(y)}},{key:"zooming",get:function(){return this._config.zooming},set:function(e){this._config.zooming=e,this._e(b)}},{key:"scrollX",get:function(){return this._config.scrollX},set:function(e){this._config.scrollX=e,this._e(b)}},{key:"scrollY",get:function(){return this._config.scrollY},set:function(e){this._config.scrollY=e,this._e(b)}},{key:"keepZoom",get:function(){return this._config.keepZoom},set:function(e){d(e)?(this._config.keepZoom=e,this.vm.setKeepZoom(e),this._e(b)):this._e(y)}},{key:"ifAllowSlide",get:function(){return this._config.ifAllowSlide},set:function(e){d(e)?(this._config.ifAllowSlide=e,this._e(b)):this._e(y)}},{key:"zoomInDelta",get:function(){return this._config.zoomInDelta},set:function(e){l(e)?e<=0?this._e(T):(this._config.zoomInDelta=e,this._e(b)):this._e(y)}},{key:"zoomOutDelta",get:function(){return this._config.zoomOutDelta},set:function(e){l(e)?e<=0?this._e(T):(this._config.zoomOutDelta=e,this._e(b)):this._e(y)}},{key:"zoomDelta",get:function(){return this._config.zoomDelta},set:function(e){l(e)?e<=0?this._e(T):(this._config.zoomDelta=e,this._e(b)):this._e(y)}},{key:"currentPageCount",get:function(){return this.vm.getCurPageCount()}},{key:"showLatestPage",get:function(){return this._config.showLatestPage},set:function(e){d(e)?(this._config.showLatestPage=e,this.vm.showLatest=e,this._e(b)):this._e(y)}},{key:"container",get:function(){return this._config.container},set:function(e){""===e||j(e)||j(e)?this._config.container=e:this._e(y)}},{key:"optimizeImage",get:function(){return this.vm.useHermite},set:function(e){this.vm.setUseHermite(e)}}]),Ft),Ct=(e(kt,mt=u),(N=kt.prototype).getCounts=function(){return this.chs.length},N.addViewer=function(e){return-1==this.vws.indexOf(e)&&(this.vws.push(e),!0)},N.removeViewer=function(e){return-1!=(e=this.vws.indexOf(e))&&(this.vws.splice(e,1),!0)},kt),Et=((N=xt.prototype).addTab=function(e,t){var r=this.checkTab(e.uid),n=null;return-1!==r?n=this.tabs[r]:(n=new Ct(e),this.tabs.push(n)),t&&n.addViewer(t),n},N.getTab=function(e){return-1===(e=this.checkTab(e))?null:this.tabs[e]},N.removeTab=function(e){-1<(e=this.checkTab(e))&&this.tabs.splice(e,1)},N.checkTab=function(e){for(var t=this.tabs.length,r=0;r<t;r++)if(this.tabs[r].uid===e)return r;return-1},N.setMode=function(e){return("single"===e||"multiple"===e)&&(this.mode=e,!0)},N.removePage=function(e,t){return-1!=(e=this.checkTab(e))&&this.tabs[e].remove(t)},N.dispose=function(){},xt),Mt=function Mt(){return{container:"",ifAllowSlide:!0,useWebWorker:!0,zoomInDelta:1.2,zoomOutDelta:1.2,zoomDelta:.05,fitType:"window",tabMode:"single",displayMode:"single",operationMode:"0",zooming:!0,scrollX:!0,scrollY:!0,minZoom:.01,maxZoom:8,keepZoom:!0,showLatestPage:!0,pageMargin:10,uiConfig:{toolbars:{header:!0,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!0,location:"topMenu",sequence:1}},buttons:{},buttonResize:{ifResize:!1,minSize:24,maxSize:26},tipsConfig:{},thumbnail:{size:180,mouseShape:"pointer",scrollDirection:"vertical",sequence:-1,location:"horizontal",showThumbnail:!0,showPageNumber:!1,showRemoveBtn:!1,fullThumbnail:!1,allowDragDrop:!0,allowResizing:!1,allowKeyboardControl:!1,rows:4,columns:1,background:"rgba(67,66,70,1)",border:"1px solid rgba(27,27,29,1)",pageBackground:"rgba(0,0,0,0)",pageBorder:"1px solid rgba(128,128,128,1)",selectedPageBackground:"rgba(127,133,251,1)",selectedPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgba(196,250,248,1)",hoverPageBorder:"1px solid rgba(255,255,0,1)",placeholderBackground:"rgba(255,192,203,1)",pageMargin:10,checkbox:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,left:"",top:"",right:"",bottom:"",checkMarkLineWidth:2,checkMarkColor:"#000"},pageNumber:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,color:"#000",fontSize:12,fontFamily:"sans-serif",left:"",top:"",right:0,bottom:0}},canvasConfig:{canvasMouseShape:"default",canvasBackground:"#434246",canvasBorder:"1px solid #1b1b1d",pageBorder:"1px solid rgba(128,128,128,1)",pageMargin:"10",pageBackground:"rgba(0,0,0,0)",selectedPageBorder:"1px solid rgba(255,0,0,1)",selectedPageBackground:"rgba(127,133,251,1)",hoverPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgb(196,250,248)",placeholderBackground:"pink",allowPageDragging:!0,allowKeyboardControl:!1,showPageNumber:!1,selectedBoxLineColor:"rgba(0,0,0,1)",autoChangeIndex:!1,scrollDirection:"vertical",checkbox:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,left:0,top:0},pageNumber:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:1,borderRadius:0,borderColor:"#000",opacity:.5,color:"#000",fontSize:12,fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",left:"",top:"",right:0,bottom:0},cropBoxStyle:{borderWidth:1,borderColor:"rgba(0,0,0,1)",invalidBorderColor:"#f00",dashLine:[4,2],background:"",ctrlBorderWidth:1,ctrlBorderRadius:0,ctrlBorderColor:"rgba(0,0,0,1)",invalidCtrlBorderColor:"#f00",ctrlBackground:"",ctrlWidth:8,ctrlHeight:8,enableConcaveBorderColor:!1}},tree:{visibility:!0,iconClass:"ds-dvs-ui-tree",selectedColor:"#0000ff"},tag:{visibility:!0,iconClass:"ds-dvs-ui-tags",selectedColor:"#0000ff",displayMode:""},headerColor:"#2a292b",topMenuColor:"#3a393b",topMenuBorder:"1px solid #1b1b1d",showSidebar:!1,showMain:!0,footerColor:"#434246",showViewer:!0,showVideoContainer:!1,outerBorder:"1px solid #1b1b1d",sidebarWidth:"180",width:"100%",height:"100%"}}},Pt=((N=Wt.prototype).dispose=function(){this.isDisposed||(this._setCanvasSize(1,1),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCanvas=null,this.minorCanvas=null,this.mainCtx=null,this.minorCtx=null,this.isDisposed=!0)},N.reset=function(){this.scale=1,this.pageUid=null,this._curOpType=null},N.render=function(e){var t=this,r=e.viewerUid,n=e.pageUid,i=e.isMin,o=e.img,a=e.page,s=e.midData;n!==this.pageUid&&(this.ownerViewer=r,this.isMin=i,this.pageUid=n,e=1,r=o.naturalWidth,i=o.naturalHeight,Math.pow(Math.pow(r,2)+Math.pow(i,2),.5),n=Math.max(r,i),this.isKeepCanvasSize?this.mainCanvas.width<n&&(e=this.baseSize/n,this.scale=e):this.mainCanvas.width===r&&this.mainCanvas.height===i||this._setCanvasSize(r,i),r*=e,i*=e,r=Math.floor(r),i=Math.floor(i),this._setMainSize(r,i),this._setMinorSize(r,i),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCtx.drawImage(o,0,0,r,i),this.minorCtx.drawImage(o,0,0,r,i),n=s.edt.all.slice(),s.edt.reset(),n.forEach(function(e){"rotate"===e.type?(s.edt.rotate(e.angle,0,0,e.mode),t.rotate(e,a,s)):"flip"===e.type?(s.edt.flip(e.direction),t.flip(e,a,s)):"crop"===e.type?(s.edt.crop(e.left,e.top,e.width,e.height),t.crop(e,a)):"erase"===e.type?(s.edt.erase(e.left,e.top,e.width,e.height,e.color),t.erase(e,a)):"changeSize"===e.type&&(s.edt.changePageSize(e.width,e.height),t.changePageSize(e,a))}))},N.rotate=function(e,t,r){var n=this.mainCanvas,i=this.minorCanvas,o=this.mainCtx,a=this.minorCtx,s=null,u=this.mainWidth,c=this.mainHeight,l=1,d=0,h=!1,g=(0===e.mode&&(u=(s=K(0,0,this.minorWidth,this.minorHeight,e.calcAngle)).width,c=s.height,d=Math.pow(Math.pow(u,2)+Math.pow(c,2),.5),h=!this.isKeepCanvasSize&&(this.mainCanvas.width!==u||this.mainCanvas.height!==c),this.isKeepCanvasSize&&(g=Math.max(u,c),this.mainCanvas.width<g&&(l=this.baseSize/g)),u*=l,c*=l),null!==this._curOpType&&this._curOpType!==e.mode&&(s&&h&&this._setMinorCanvasSize(d,d),this._setMinorSize(this.mainWidth,this.mainHeight),this._clearRect(a),a.save(),a.beginPath(),a.rect(0,0,this.minorWidth,this.minorHeight),a.clip(),a.closePath(),a.drawImage(n,0,0),a.restore()),this._curOpType=e.mode,s&&(h&&this._setMainCanvasSize(d,d),this._setMainSize(u,c)),this._clearRect(o),o.save(),o.beginPath(),o.rect(0,0,this.mainWidth,this.mainHeight),o.clip(),o.closePath(),this._fillRect(o,this.mainWidth,this.mainHeight),o.translate(this.mainWidth/2,this.mainHeight/2),r.edt.setTransform(o),this.minorWidth*l/this.minorWidth),n=i.width*g,a=i.height*g;o.drawImage(i,Math.floor(-this.minorWidth*l/2),Math.floor(-this.minorHeight*l/2),Math.floor(n),Math.floor(a)),o.restore()},N.flip=function(e,t,r){var n=this.minorCanvas,i=this.mainCtx;this._clearRect(i),i.save(),i.beginPath(),i.rect(0,0,this.mainWidth,this.mainHeight),i.clip(),i.closePath(),this._fillRect(i,this.mainWidth,this.mainHeight),i.translate(this.mainWidth/2,this.mainHeight/2),r.edt.setTransform(i),i.drawImage(n,Math.floor(-this.minorWidth/2),Math.floor(-this.minorHeight/2)),i.restore()},N.crop=function(e,t){var r=this.mainCanvas,n=this.minorCanvas,i=this.mainCtx,o=this.minorCtx,a=this.scale,s=e.left,u=e.top,c=e.width,e=e.height;s*=a,u*=a,this._setMinorSize(c*=a,e*=a),this._clearRect(o),o.save(),o.beginPath(),o.rect(0,0,c,e),o.clip(),o.closePath(),o.translate(-s,-u),o.drawImage(r,0,0),o.restore(),this._setMainSize(c,e),this._clearRect(i),i.save(),i.beginPath(),i.rect(0,0,this.mainWidth,this.mainHeight),i.clip(),i.closePath(),i.drawImage(n,0,0),i.restore()},N.erase=function(e,t){var r=this.mainCanvas,n=this.mainCtx,i=this.minorCtx,o=this.scale,a=e.left,s=e.top,u=e.width,c=e.height;a*=o,s*=o,u*=o,c*=o,o=e.color||"#ffffff",this._clearRect(i),i.save(),i.beginPath(),i.rect(0,0,this.minorWidth,this.minorHeight),i.clip(),i.closePath(),i.drawImage(r,0,0),i.fillStyle=o,i.fillRect(a,s,u,c),i.restore(),n.save(),n.fillStyle=o,n.fillRect(a,s,u,c),n.restore()},N.changePageSize=function(e,t){var r=this.mainCanvas,n=this.minorCanvas,i=this.mainCtx,o=this.minorCtx,a=e.width,e=e.height,s=this.scale,u=Math.pow(Math.pow(a,2)+Math.pow(e,2),.5),c=(this.isKeepCanvasSize?(c=Math.max(a,e),this.mainCanvas.width<c&&(s=this.baseSize/c,this.scale=s)):this.mainCanvas.width<u&&this._setMinorCanvasSize(u,u),this._setMinorSize(a*=s,e*=s),this._clearRect(o),o.save(),o.beginPath(),o.rect(0,0,this.minorWidth,this.minorHeight),o.clip(),o.closePath(),a/this.mainWidth),s=e/this.mainHeight,c=r.width*c,s=r.height*s;o.drawImage(r,0,0,Math.floor(c),Math.floor(s)),o.restore(),this.isKeepCanvasSize||this.mainCanvas.width<u&&this._setMainCanvasSize(u,u),this._setMainSize(a,e),this._clearRect(i),i.save(),i.beginPath(),i.rect(0,0,this.mainWidth,this.mainHeight),i.clip(),i.closePath(),i.drawImage(n,0,0),i.restore()},N._clearRect=function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)},N._fillRect=function(e,t,r){return e.save(),e.fillStyle=this.saveColor,e.fillRect(0,0,t,r),e.restore(),!0},N._setMainSize=function(e,t){this.mainWidth=e,this.mainHeight=t},N._setMinorSize=function(e,t){this.minorWidth=e,this.minorHeight=t},N._setCanvasSize=function(e,t){this.mainCanvas.width=e,this.mainCanvas.height=t,this.minorCanvas.width=e,this.minorCanvas.height=t},N._setMainCanvasSize=function(e,t){this.mainCanvas.width=e,this.mainCanvas.height=t},N._setMinorCanvasSize=function(e,t){this.minorCanvas.width=e,this.minorCanvas.height=t},Wt);function Wt(e,t,r){this.baseSize=0,this.mainWidth=0,this.mainHeight=0,this.minorWidth=0,this.minorHeight=0,this._curOpType=null,this.saveColor=null,this.saveType="image/jpg",this.scale=1,this.isKeepCanvasSize=!1,this.isDisposed=!1,this.uid=e,this.baseSize=t=t||3840;var e=document.createElement("canvas"),n=document.createElement("canvas");e.id="dvs_used_as_offscreenCanvas_main_".concat(this.uid),n.id="dvs_used_as_offscreenCanvas_minor_".concat(this.uid),this.mainCanvas=e,this.minorCanvas=n,this.mainCtx=e.getContext("2d"),this.minorCtx=n.getContext("2d"),this.mainCtx.imageSmoothingEnabled=!1,this.minorCtx.imageSmoothingEnabled=!1,this._setCanvasSize(t,t),r!==undefined?this.isKeepCanvasSize=r:H()&&(this.isKeepCanvasSize=!0)}function xt(e){this.tabs=[],this.mode="single",this.tabs=[]}function kt(e){var t=mt.call(this,e)||this;return t.vws=[],t.name=e.name,t.type=e.type,t.chs=e.chs||[],t}function Ft(e){var t=e.config,r=e.viewUi,n=e.workerBlobURL,i=e.scrollbarWidth,o=e.groupUid,a=e.defaultConfig,s=e.mPub,u=e.focus,c=e.db,l=e.offScreenCanvas,e=e.saveCanvas,r=((s=_t.call(this,s)||this).ViewUi=null,s.group=null,s._uiConfig={canvasConfig:{}},s._config={},s._dfConfig=null,s._focus={viewerId:undefined,thumbnailId:undefined},s._multiSelectMode=!1,s.workerBlobURL=null,s.uid=m(6),s.postfix="-"+s.uid,s._iPub=new h,s._db=c,s.ViewUi=r,s.group=o,s._dfConfig=a,s._focus=u,s.workerBlobURL=n,s.vm=new St(t,s._iPub.getPublishSubscribe(),s._oPub,s.uid,n,i,c,l,e),s.initConfig(t));return s.bindView(s.container),s._bindEvents(),r.length?(o=r[0],a="Failed to create the viewer because the parameter ".concat(o," is incorrect."),s._e({code:80024,message:a})):s._e(b),s}function Lt(e,t,r,n,i,o,a,s,u){var c=W.call(this,t)||this;return c.showLatest=!0,c.isMainViewVisible=!0,c.isThumbnailVisible=!0,c.thbViews=[],c.tabMode="single",c.autoOpen=!0,c.keepZoom=!0,c.cors=!0,c.minPicWidth=800,c.minPicHeight=800,c.saveType="image/jpeg",c.saveQuality=1,c.useHermite=!0,c.rows=1,c.columns=1,c.slideTimer=null,c.showTabTimer=null,c.isDisposed=!1,c.cropBoxStyle={borderWidth:1,borderColor:"#000",invalidBorderColor:"#f00",dashLine:[4,2],background:"",ctrlBorderWidth:1,ctrlBorderRadius:0,ctrlBorderColor:"#000",invalidCtrlBorderColor:"#f00",ctrlBackground:"",ctrlWidth:8,ctrlHeight:8,enableConcaveBorderColor:!1},Object.assign(c.cropBoxStyle,e.uiConfig.canvasConfig.cropBoxStyle||{}),c.saveCanvas=u,c.uid=n,c._mPub=new h(r),c._db=a,c._tabMng=new Tt(e),document.documentMode===undefined&&!H()||(c.useHermite=!1),c._gpc=new lt(e,c._db,c._oPub,n,c.useHermite,i,o,s),c._initEvent(),c._gpc.slide.bindSlideEndCallback(function(e){e===ce?c.prevPage():e===le&&c.nextPage(),W.prototype._emit.call(it(c),"slideFinished",e),c.setFitType("window")}),c}function Nt(e){this.tabs=[],this.mode="single",this.curTab=null,this.dfConfig=null,this._opStack=[],this.tabs=[],this.dfConfig={zoom:1,fitType:"window",disMode:"single",opMode:0}}function Vt(e){var t=pt.call(this,e)||this;return t.cur=-1,t.total=0,t.slt=[],t.chs=[],t.thbs=[],t.scrL=0,t.scrT=0,t.virW=0,t.virH=0,t.iMargin=0,t.oMargin=0,t.zoom=1,t.fitType="window",t.clickZoom=!1,t.isFreeCrop=!1,t.disMode="single",t.opMode=0,t.name=e.name,t.type=e.type,t.chs=e.chs,t.zoom=e.zoom,t.fitType=e.fitType,t.disMode=e.disMode,t.opMode=e.opMode,t}function At(e){this.uid=e.uid,this.chs=e.chs||[]}function Bt(e,t,r){this._db=null,this.visible=!1,this.children=[],this.redoStack=[],this.undoStack=[],this.matrixStack=[],this.style={left:0,top:0,width:0,height:0,borderColor:"#ffffff",borderType:"solid",borderWidth:0},this.naturalWidth=0,this.naturalHeight=0,this.wrapLeft=0,this.wrapTop=0,this.wrapWidth=0,this.wrapHeight=0,this.rotateAngle=0,this.flipCount=0,this.flipCountX=0,this.flipCountY=0,this.selectionBoxes=[],this.cropMng=null,this.editor2d=null,this._db=t,this.uid=e.uid,this.naturalWidth=e.naturalW,this.naturalHeight=e.naturalH,this.cropMng=new gt(this.naturalWidth,this.naturalHeight,r),this.editor2d=new Ke}function Ot(e,t,r){this._activeBoxId=null,this._startX=null,this._startY=null,this._addNewFlag=null,this._drawingFlag=!1,this.cropBoxes=[],this.width=0,this.height=0,this.zoom=1,this.aspectRatio=0,this.keepAspectRatio=!1,this.mouseDown=!1,this.unselectedCallback=null,this.selectedCallback=null,this.cropBoxStyle={},this.width=e,this.height=t,Object.assign(this.cropBoxStyle,r)}function Rt(t){var r=this;this.uid=null,this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.isConvex=!0,this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.dpr=1,this.cropBoxStyle={ctrlWidth:8,ctrlHeight:8},this.uid=m(11),Object.keys(t).forEach(function(e){r[e]=t[e]}),this._initBox()}function Ut(e,t){var r=It.call(this,t)||this;return r.uid=null,r._tbPub=null,r._size=null,r._mouseShape="pointer",r._direction="vertical",r._sequence=-1,r._location="horizontal",r._showThb=!0,r._showPNum=!1,r._showRmBtn=!1,r._fullThb=!1,r._dragging=!0,r._resizing=!0,r._keyboard=!1,r._rows=4,r._columns=1,r._bg="rgba(67,66,70,1)",r._border="1px solid rgba(27,27,29,1)",r._pageBg="rgba(0,0,0,0)",r._pageBorder="1px solid rgba(128,128,128,1)",r._sltPBg="rgba(127,133,251,1)",r._sltPBorder="1px solid rgba(255,0,0,1)",r._hvPBg="rgba(196,250,248,1)",r._hvPBorder="1px solid rgba(255,255,0,1)",r._placeholderBg="rgba(255,192,203,1)",r._pageMargin=10,r._autoChangeIdx=!1,r._checkboxConfig={},r._pageNumberConfig={},r._multiSelectMode=!1,r._optimizeImage=!0,r.uid=m(11),r._tbPub=new h,r.init(e),r._tbPub._on("_changeThumbnailViewProp",function(e){for(var t in e)r[t]=e[t]}),r}function Gt(e,t,r,n,i,o,a,s){var u=x.call(this,r)||this;return u.uid=null,u.cvsOffW=0,u.cvsOffH=0,u.cvsCltW=0,u.cvsCltH=0,u.cvsInnerW=0,u.cvsInnerH=0,u.maxW=0,u.maxH=0,u.virW=0,u.virH=0,u.dpr=1,u.fitType="window",u.keepZoom=!0,u.clickZoom=!1,u.isFreeCrop=!1,u.zoom=1,u.zoomInDelta=1.2,u.zoomOutDelta=1.2,u.zoomDelta=1.2,u.scrL=0,u.scrT=0,u.disMode="single",u.opMode=0,u.curTab=null,u.curPages=[],u.iMargin=10,u.oMargin=10,u.rows=0,u.columns=0,u._mousedown=!1,u._pageX=0,u._pageY=0,u.rotateMode=1,u.saveBg="#ffffff",u.aspectRatio=0,u.keepAspectRatio=!1,u._startDistance=0,u.useWebWorker=!1,u.renderTaskUid=null,u.workerTimer=null,u.useHermite=!0,u.hermite=null,u.workerBlobURL=null,u.scrBarW=0,u.loadingTimer=null,u.allowSlide=!0,u.slide=null,u.isSliding=!1,u.zooming=!0,u.scrollX=!0,u.scrollY=!0,u.animating=!1,u.bouncing=!1,u.paging=!1,u.snapping=!1,u.animationDuration=300,u.locking=!1,u.minZoom=.01,u.maxZoom=8,u.speedDelta=1,u._outerWidth=0,u._outerHeight=0,u._innerWidth=0,u._innerHeight=0,u._outerLeft=0,u._outerTop=0,u._snapWidth=0,u._snapHeight=0,u._pullHeight=0,u._pullActive=!1,u._maxSrL=0,u._maxSrT=0,u._srL=0,u._srT=0,u._zoom=1,u._futureLeft=0,u._futureTop=0,u._futureZoom=0,u._zoomComplete=null,u._isSingleTouch=!0,u._isDecelerating=!1,u._isProcessing=!1,u._isDragging=!1,u._isAnimating=!1,u._interruptedAnimation=!1,u._position=[],u._startTouchLeft=0,u._startTouchTop=0,u._startZoom=1,u._lastTouchLeft=0,u._lastTouchTop=0,u._lastScale=1,u._enableScrollX=!0,u._enableScrollY=!0,u._fps=60,u._running={},u._counter=1,u.cropLineColor="rgba(0,0,0,1)",u.defaultCursor=null,u.isDisposed=!1,u.offScreenCanvas=s,u.uid=n,u.dpr=Y(),u._db=t,u.fitType=e.fitType,u.maxZoom=e.maxZoom,u.minZoom=e.minZoom,u.opMode=e.opMode,u.iMargin=e.iMargin,u.scrollX=e.scrollX,u.scrollY=e.scrollY,u.zoomInDelta=e.zoomInDelta,u.zoomOutDelta=e.zoomOutDelta,u.zoomDelta=e.zoomDelta,u.zooming=e.zooming,u.useWebWorker=e.useWebWorker,u.useHermite=i,u.scrBarW=a,u.cvsMng=new st,u.offScreenCanvas.saveColor=u.saveBg,u._initAnimation(),u._initScroller(),u.slide=new ut(r,t),u.slide.stateCb=function(e){u.isSliding=e},u.useHermite&&(u.workerBlobURL||(u.workerBlobURL=o),u.hermite=new ct(u.useWebWorker,u.workerBlobURL)),u}function Ht(e,t){this.useWorker=!0,this.workers_archive=[],this.taskUid=null,this.useWorker=e,this.cores=2,this.workerBlobURL=t}function jt(e,t){return(e=Dt.call(this,e)||this).wrapper=null,e.isVisible=!1,e.isDragging=!1,e.isStart=!1,e.startX=0,e.startTime=0,e.hideTimer=null,e.width=0,e.triggerDist=10,e.minDistanceThreshold=60,e.minTimeThreshold=300,e.pages=null,e.slideEndCallback=null,e.slidingStateChangedCallback=null,e.stateCb=null,e.touchNum=0,e.curPageUid=null,e.renderPageUid=null,e.loading=!1,e.isNew=!1,e.targetIndexes=[-1,-1,-1],e.allowDrag=!0,e.isDisposed=!1,e._db=t,e.isDisposed=!1,e.pages=[{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1}],e._initEvent(),e}function zt(){this.saveColor="#ffffff";var e=Y();this.mainCvs=new at({dpr:e}),this.cropCvs=new ot({dpr:e})}function Zt(e){return vt.call(this,e)||this}function Jt(e){return(e=bt.call(this,e)||this).maskColor="rgba(200,200,200,0.5)",e.isMask=!0,e}function Xt(e){this.cssWidth=0,this.cssHeight=0,this.dpr=1,this.canvas=null,this.ctx=null,this.dpr=e.dpr}e(Mr,tr=h),(N=Mr.prototype)._initTopEvent=function(){var o=this;this.on(ye,function(e,t,r,n){o._load(e,t,r,n)}),this.on(Te,function(e,t,r){o._open(e,t,r)}),this.on(ke,function(t,r,e,n){var i=o._tabMng.getTab(n);i&&i.vws.forEach(function(e){(e=o.uidViewer(e))&&e.vm.renameTag(t,r,n)})}),this.on(xe,function(e,t,r){var n=o._tabMng.getTab(r);n&&n.vws.forEach(function(e){(e=o.uidViewer(e))&&e.vm.emptyTag(r)})}),this.on(We,function(t,e,r){var n=o._tabMng.getTab(r);n&&n.vws.forEach(function(e){(e=o.uidViewer(e))&&e.vm.addPageTag(t,r)})}),this.on(Pe,function(t,e,r){var n=o._tabMng.getTab(r);n&&n.vws.forEach(function(e){(e=o.uidViewer(e))&&e.vm.rmPageTag(t,r)})}),this.on(Be,function(t,r,e,n){var i=o._tabMng.getTab(n);i&&i.vws.forEach(function(e){(e=o.uidViewer(e))&&e.vm.renameFile(t,r,n)})}),this.on(Ae,function(t){o.emit(Ee,{},t.chs.slice());var e=o._tabMng.getTab(t.uid);e&&(e.vws.forEach(function(e){(e=o.uidViewer(e))&&e.closeTab(t.uid)}),o._tabMng.removeTab(t.uid))}),this.on(Fe,function(t){o.vws.forEach(function(e){e.vm.changeTag(t)})}),this.on(ge,function(t){o.vws.forEach(function(e){e.vm.changeDir(t)})}),this.on(be,function(r,n){var e=o._db.getMid(r);e&&(r===o.offScreenCanvas.pageUid&&o.offScreenCanvas.reset(),o._tabMng.tabs.forEach(function(t){-1!==t.chs.indexOf(r)&&t.vws.forEach(function(e){(e=o.uidViewer(e))&&(e.vm.updateSync(r,t.uid,n),e.vm.showThbItem(r))})}),e.minData||o._loadMinPic(r))})},N._initViewerEvent=function(){var s=this;this.onM("dvsRenderMainPage",function(e,t){e.forEach(function(e){(e=s.uidViewer(e))&&e.vm.renderMainPage(t)})}),this.onM(Le,function(e,t){s.emit(Le,e,t)}),this.onM(Ne,function(e,t,r){s.emit(Ne,e,t,r)}),this.onM(I,function(e){s._err(e)}),this.onM(Se,function(e){s._loadMinPic(e)}),this.onM(S,function(t,r,n){s._getGroup(t).forEach(function(e){if(e.uid!==t)switch(r){case"first":e.vm.firstPage(!1);break;case"last":e.vm.lastPage(!1);break;case"next":e.vm.nextPage(!1);break;case"prev":e.vm.prevPage(!1);break;case"goto":e.vm.gotoPage(n,!1);break;case"cur":e.vm.setCurIndex(n,!1);break;case"slt":e.vm.setSltPages(n,!1)}})}),this.onM(Ce,function(r,e,n,i,o){var a,t=s._tabMng.getTab(e.uid);t&&(a=t.uid,t.vws.forEach(function(e){if(r!==e){var t=s.uidViewer(e);if(t)switch(n){case"switch":t.vm.switchPage(i,o,!1,a);break;case"move":t.vm.movePage(i,o,!1,a);break;case"reorder":t.vm.reorderPage(i,o,!1,a)}}}),t[n](i,o),s.emit(Ce,e,n,i,o))}),this.onM(Ee,function(t,r,n){s.emit(Ee,r,n),n.forEach(function(t){s._tabMng.tabs.forEach(function(e){e.remove(t)})}),s.vws.forEach(function(e){e.uid!==t&&e.vm.remove(n,!1,r.uid)})}),this.onM(v,function(e,t){var r=t.uid,n=s._db.getMid(r);if(n){if(s._loadMinPic(r),n.vws.length){var i=s.offScreenCanvas;if(i.pageUid===r)switch(e){case"rotate":i.rotate(t.rotateObj,t.page,t.interlayerData);break;case"flip":i.flip(t.flipObj,t.page,t.interlayerData);break;case"crop":i.crop(t.cropObj,t.page);break;case"erase":i.erase(t.eraseObj,t.page);break;case"changePageSize":i.changePageSize(t.changeSizeObj,t.page);break;case"reset":i.reset()}}n.vws.forEach(function(e){(e=s.uidViewer(e))&&e.vm.uidIdx(r)===e.vm.getCurIndex()&&e.vm.render()})}}),this.onM(we,function(e,t){(e=s._tabMng.getTab(e))&&e.removeViewer(t)})},N._getGroup=function(e){var t=this,r=[];return(e=this.uidViewer(e))&&this._group[e.group].forEach(function(e){(e=t.uidViewer(e))&&r.push(e)}),r},N._loadMinPic=function(e){for(var t=this._q,r=-1,n=0;n<this.loader.length;n++)if(!this.loader[n]){r=n;break}-1===r?-1===t.indexOf(e)&&t.push(e):(this.loader[r]=!0,this.runLoader(e,r))},N._convertData=function(n){return new Promise(function(t,e){var r;c(n)?t(n):((r=new XMLHttpRequest).onload=function(){var e=_.createURL(r.response);t(e)},r.open("GET",n,!0),r.responseType="blob",r.send())})},N.runLoader=function(l,r){var e,d,h,t,n,g=this,i=this._db.getMid(l);i&&i.minData&&i.vws.forEach(function(r){var n=-1;g.vws.some(function(e,t){if(e.uid===r)return n=t,!0}),-1!==n&&g.vws[n].vm.showThbItem(l)}),!i||i.activeMin||i.minData?(e=this._q.shift())?this.runLoader(e,r):this.loader[r]=!1:(d=!1,h=m(11),i.activeMin=!0,i.minTask=h,t=new Promise(function(t,r){i.oriData?(d=!0,t(i.oriData)):g._db.getDataAsync(l).then(function(e){f(e.oriData)&&(d=!0),10===document.documentMode?g._convertData(e.oriData).then(function(e){t(e)}):(e=_.createURL(e.oriData),t(e))}).catch(function(e){r(e)})}),n=new Promise(function(n,i){t.then(function(t){var r=new Image;g._cors&&(r.crossOrigin="anonymous"),r.src=t,r.onload=function(){var e=g._db.getMid(l);if(!e||e.minTask!==h)return(null==e?void 0:e.oriData)!==t&&_.revokeObjectURL(t),i("task cancel or page does not exist");r.onload=null,r.onerror=null,n(r)},r.onerror=function(e){return r.onload=null,r.onerror=null,i(e)}}).catch(function(e){i(e)})}),new Promise(function(u,c){n.then(function(e){var t=g._db.getMid(l);if(!t||t.minTask!==h)return(null==t?void 0:t.oriData)!==e.src&&_.revokeObjectURL(e.src),c("task cancel or page does not exist");g.offScreenCanvas||c("OffScreenCanvas is disposed");var r=g.offScreenCanvas;if(r.isDisposed)return c("The offScreenCanvas is disposed.");r.render({viewerUid:"",pageUid:l,isMin:!0,img:e,page:null,midData:t});var n=e.naturalWidth/e.naturalHeight,i=1,n=(1<=n&&r.mainWidth>g._minW?i=g._minW/r.mainWidth:n<1&&r.mainHeight>g._minH&&(i=g._minH/r.mainHeight),r.mainWidth*i),o=r.mainHeight*i,a=g.canvas,s=a.getContext("2d"),o=(a.width!==n&&(a.width=n),a.height!==o&&(a.height=o),n/r.mainWidth),n=r.mainCanvas.width*o,o=r.mainCanvas.height*o;s.drawImage(r.mainCanvas,0,0,Math.floor(n),Math.floor(o)),(t.overlays||[]).forEach(function(e){s.save(),s.globalAlpha=e.opacity,s.fillStyle=e.color,s.fillRect(e.left*i,e.top*i,e.width*i,e.height*i),s.restore()}),!d&&e.src&&(_.revokeObjectURL(e.src),e.src=""),a.toBlob(function(e){var t=g._db.getMid(l);t&&t.minTask===h||c("task cancel or page does not exist"),u(e)},"image/png")}).catch(function(e){c(e)})}).then(function(e){var e=_.createURLWithType(e),t=g._db.getMid(l);t&&t.minTask===h&&(t.activeMin=!1,f(null==t?void 0:t.minData)&&""!=(null==t?void 0:t.minData)&&_.revokeObjectURL(t.minData),t.minData=e.data,t.vws.forEach(function(r){var n=-1;g.vws.some(function(e,t){if(e.uid===r)return n=t,!0}),-1!==n&&g.vws[n].vm.showThbItem(l)})),(e=g._q.shift())?g.runLoader(e,r):g.loader[r]=!1}).catch(function(e){var t=g._db.getMid(l);t&&t.minTask===h&&(t.activeMin=!1),(t=g._q.shift())?g.runLoader(t,r):g.loader[r]=!1}))},N._open=function(e,t,r){var n=this,i=e.uid,o=e.chs.slice(),a=this._tabMng.getTab(i),i=((a=a||this._tabMng.addTab({uid:i,name:e.name,type:t,chs:[]},r)).chs=o,this.vws,null);if(r){if(0===(i=this._getGroup(r).map(function(e){return e.uid})).length)return void this._err(E)}else i=a.vws;i.map(function(e){return n.uidViewer(e)}).forEach(function(t){var e;t&&(a.addViewer(t.uid),a.chs.forEach(function(e){(e=n._db.getMid(e))&&e.addViewer(t.uid)}),(e=null==(e=t.vm)?void 0:e.tabHandler(a,null,!0))&&t.vm.showTab(e,"filter"))})},N._load=function(e,t,n,r){var i=this,o=e.uid,a=e.chs.slice(),s=(s=this._tabMng.getTab(o))||this._tabMng.addTab({uid:o,name:e.name,type:t,chs:[]});this.vws.forEach(function(e){s.addViewer(e.uid)}),s.chs=a,s.vws.forEach(function(e){var t,r=i.uidViewer(e);r&&(s.chs.forEach(function(e){(e=i._db.getMid(e))&&e.addViewer(r.uid)}),e=null,"all"!==s.type.toLowerCase()&&(e=n),(e=null==(t=r.vm)?void 0:t.tabHandler(s,e,!1))&&r.vm.showTab(e))})},N.bindViewUi=function(t){if(!G(t))return this.emit(I,y),!1;this._ViewUi=t,this.vws.forEach(function(e){e.ViewUi=t})},N.createViewer=function(e,t){var r=this,n=(void 0===e&&(e={}),null),i=[],o=null;if(t){if(!(o=this.uidViewer(t)))return this._err(E),null;n=o.group,i=this._group[n]}else n=m(11),this._group[n]=i;z(e,t=J(this._defaultConfig));var e={config:t,viewUi:this._ViewUi,workerBlobURL:this._hermiteWorkerUrl,scrollbarWidth:this._scrBarW,groupUid:n,defaultConfig:this._defaultConfig,mPub:this._mPub.getPublishSubscribe(),focus:this._focus,db:this._db,offScreenCanvas:this.offScreenCanvas,saveCanvas:this.saveCanvas},a=(t=new wt(e)).uid;return this.vws.push(t),i.push(a),o&&(n=o.vm.getCurTab())&&(n.chs.forEach(function(e){(e=r._db.getMid(e.uid))&&e.addViewer(a)}),(e=this._tabMng.getTab(n.uid)).vws.push(a),(i=t.vm.tabHandler(e,null,!0))&&(i.setCur(n.cur),i.setSlt(n.slt.slice()),t.vm.showTab(i,"filter"))),this.emit(D,"Invoking ViewControl#createViewer."),t},N.removeViewer=function(e){var t=this;if(!e)return!1;var r=e,n=null,i=null;c(e)&&(r=e.uid,n=e);for(var o,a,s=0;s<this.vws.length;s++)if(this.vws[s].uid===r){n=this.vws[s],i=s;break}if(null===i)return!1;for(a in(e=this._group[n.group])&&(o=e.indexOf(r),e.splice(o,1),0===e.length&&delete this._group[n.group]),null!=(o=this._tabMng)&&null!=(e=o.tabs)&&e.forEach(function(e){e.removeViewer(n.uid)&&e.chs.forEach(function(e){(e=t._db.getMid(e))&&e.rmViewer(n.uid)})}),n.unbindView(),n.dispose(),n)n[a]=null,delete n[a];return this.vws.splice(i,1),this.emit(D,"Invoking ViewControl#removeViewer."),!0},N.uidViewer=function(e){if(!e)return this.vws[0]||null;for(var t=0,r=this.vws.length;t<r;t++){var n=this.vws[t];if(n.uid===e)return n}return null},N.idxViewer=function(e){return e>=this.vws.length||e<0?null:this.vws[e]},N.dispose=function(){var e,t=this;this.isDisposed||(tr.prototype.dispose.call(this),null!=(e=this.vws)&&e.forEach(function(e){t.removeViewer(e)}),this.vws=null,this.offScreenCanvas.dispose(),this.offScreenCanvas=null,this.canvas.width=1,this.canvas.height=1,this.canvas.getContext("2d").clearRect(0,0,1,1),this.canvas=null,this.saveCanvas.width=1,this.saveCanvas.height=1,this.saveCanvas.getContext("2d").clearRect(0,0,1,1),(this.saveCanvas=null)!=(e=this._mPub)&&e.dispose(),(this._mPub=null)!=(e=this._tabMng)&&e.dispose(),this._tabMng=null,this._hermiteWorkerUrl&&(_.revokeObjectURL(this._hermiteWorkerUrl),this._hermiteWorkerUrl=null),this.isDisposed=!0)},N._getScrBarW=function(){var e=document.createElement("div"),t=document.createElement("div"),r=(e.appendChild(t),e.setAttribute("style","width:180px;height:180px;position:absolute;overflow:auto;"),t.setAttribute("style","width:200px;height:200px;"),document.body.appendChild(e),e.offsetWidth-e.clientWidth);document.body.removeChild(e),this._scrBarW=r,this.vws.forEach(function(e){e.vm.setScrBarW(r)})},N.initWorkerUlr=function(){this._hermiteWorkerUrl=_.createURL(new Blob(["("+function(){onmessage=function onmessage(e){var V=e.data.core,t=e.data.width_source,A=e.data.height_source,r=e.data.width,n=e.data.height,i=null;try{i=new Uint8ClampedArray(e.data.source)}catch(O){i=new Uint8Array(e.data.source)}var o=r*n*4,a=new ArrayBuffer(o),s=null;try{s=new Uint8ClampedArray(a,0,o)}catch(O){s=new Uint8Array(a,0,o)}for(var u=0;u<n;u++)for(var c=u*A/n,l=Math.floor(c),d=1-(c-l),h=l,g=(u+1)*A/n,f=g-(l=Math.floor(g-1e-5)),m=l,_=u*r*4,p=0;p<r;p++){for(var I=1-((N=p*t/r)-(L=Math.floor(N))),D=L,v=(L=(p+1)*t/r)-(F=Math.floor(L-1e-5)),b=F,y=0,T=0,S=0,w=0,C=(h+1)*t*4+4*D,E=void 0,M=void 0,E=h+1;E<m;++E)y+=i[C+2]*I*255,T+=i[C+1]*I*255,S+=i[C]*I*255,w+=255*I,C+=4*t;var P=(h+1)*t*4+4*b;for(E=h+1;E<m;++E)y+=i[P+2]*v*255,T+=i[P+1]*v*255,S+=i[P]*v*255,w+=255*v,P+=4*t;var W=h*t*4+4*(D+1);for(M=D+1;M<b;++M)y+=i[W+2]*d*255,T+=i[W+1]*d*255,S+=i[W]*d*255,w+=255*d,W+=4;var x=m*t*4+4*(D+1);for(M=D+1;M<b;++M)y+=i[x+2]*f*255,T+=i[x+1]*f*255,S+=i[x]*f*255,w+=255*f,x+=4;for(E=h+1;E<m;++E)for(var k=E*t*4+4*(D+1),M=D+1;M<b;++M)y+=255*i[k+2],T+=255*i[k+1],S+=255*i[k],w+=255,k+=4;y+=i[2+(F=h*t*4+4*D)]*(d*I)*255,T+=i[1+F]*(d*I)*255,S+=i[F]*(d*I)*255,w+=d*I*255,y+=i[2+(F=h*t*4+4*b)]*(d*v)*255,T+=i[1+F]*(d*v)*255,S+=i[F]*(d*v)*255,w+=d*v*255,y+=i[2+(F=m*t*4+4*D)]*(f*I)*255,T+=i[1+F]*(f*I)*255,S+=i[F]*(f*I)*255,w+=f*I*255,y+=i[2+(F=m*t*4+4*b)]*(f*v)*255,T+=i[1+F]*(f*v)*255,S+=i[F]*(f*v)*255;var F=(w+=f*v*255)/((L-N)*(g-c)),L=0,N=0,B=0;0!=F&&(L=y/w,N=T/w,B=S/w),L+=.5,N+=.5,B+=.5,s[_]=Math.floor(B),s[++_]=Math.floor(N),s[++_]=Math.floor(L),s[++_]=255,_++}a={core:V,target:s,taskUid:e.data.taskUid};try{postMessage(a,[s.buffer])}catch(O){postMessage(a,null)}}}.toString()+")()"],{type:"application/javascript"}))},N.on=function(e,t){tr.prototype._on.call(this,e,t)},N.emit=function(e){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=tr.prototype._emit).call.apply(t,[this,e].concat(n))},N.onM=function(e,t){this._mPub._on(e,t)},N.emitM=function(e){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this._mPub)._emit.apply(t,[e].concat(n))},N._err=function(e){this.emit(I,e)},N._ok=function(){this.emit(I,b)};var Yt,Kt,Qt,F,qt,L,$t,er,tr,N,rr=Mr,nr=(e(Er,er=h),(N=Er.prototype).createViewer=function(e,t){return this._vwMng.createViewer(e=void 0===e?{}:e,t)},N.getViewerByUid=function(e){return this._vwMng.uidViewer(e)},N.getViewerByIndex=function(e){return this._vwMng.idxViewer(e)},N.removeViewer=function(e){return this._vwMng.removeViewer(e)},N.getViewerList=function(){return this._vwMng.vws.slice()},N.bindViewUiConstructor=function(e){return this._vwMng.bindViewUi(e)},N.dispose=function(){var e;er.prototype.dispose.call(this),null!=(e=this._vwMng)&&e.dispose(),this._vwMng=null},Er),ir=(e(Cr,$t=u),(N=Cr.prototype).removeChildren=function(e,t){var r=this.chs.length;if(r){for(var n=0;n<r;n++){var i=this.chs[n];if(i.name===e&&i.type===t)return this.chs.splice(n,1)[0]}return!1}return!1},N.setName=function(e){this.name=e},N.reorder=function(e){return("file"===this.type||"all"===this.type)&&$t.prototype.reorder.call(this,e)},Cr),or=(e(wr,L=h),(N=wr.prototype).dispose=function(){L.prototype.dispose.call(this)},N._initEvent=function(){var o=this;L.prototype._on.call(this,Ve,function(e,t,r){var n=r,i=o.findChild(o.dfNode,e);i||(i=o.createFile(e),L.prototype._emit.call(o,ge,o.dfNode)),t.forEach(function(e){r!==undefined?i.insert(e.uid,n++):i.append(e.uid),o.all.append(e.uid)}),L.prototype._emit.call(o,ye,i,"file",r,o.open),L.prototype._emit.call(o,ye,o.all,"all",r,!1)}),L.prototype._on.call(this,Ce,function(e,t,r,n){var i=null;if("file"===e.type){if(!(i=o._find(e.uid,o.root)))return}else{if("all"!==e.type)return;i=o.all}i[{switch:"switch",move:"move",reorder:"reorder"}[t]](r,n)}),L.prototype._on.call(this,Ee,function(e,t){t.forEach(function(e){o.all.remove(e),o._rmPage(e,o.root)})})},N._rmPage=function(t,e){var r=this;if(!(e.chs.length<1))return e.chs[0].uid?void e.chs.forEach(function(e){r._rmPage(t,e)}):e.remove(t)},N.createFile=function(e){var t=this.dfNode||this.root,r=this.findChild(t,e);return r&&"file"===r.type?L.prototype._emit.call(this,I,Ye):(r=new ir({uid:m(11),name:e,type:"file",parent:t,chs:[]}),this.curNode.chs.push(r),L.prototype._emit.call(this,I,b)),r},N.openAll=function(e){return L.prototype._emit.call(this,Te,this.all,"all",e),this.all.chs.slice()},N.openFile=function(e,t){return(e=this.findChild(this.dfNode,e))&&"file"===e.type?(L.prototype._emit.call(this,Te,e,"file",t),L.prototype._emit.call(this,I,b),e.chs.slice()):(L.prototype._emit.call(this,I,Oe),!1)},N.removeFile=function(e){for(var t=this.dfNode.chs,r=t.length-1;0<=r;r--)if(t[r].name===e)return L.prototype._emit.call(this,Ae,t[r]),t.splice(r,1),L.prototype._emit.call(this,I,b),!0;return L.prototype._emit.call(this,I,Oe),!1},N.renameFile=function(e,t){var r=this.findChild(this.dfNode,e),n=this.findChild(this.dfNode,t);return r?n?(this._err(Ye),!1):(r.name=t,n=r.chs.slice(),L.prototype._emit.call(this,Be,e,t,n,r.uid),this._ok(),!0):(this._err(Oe),!1)},N.getCurrentFileList=function(){return this.dfNode.chs.slice()},N._getSpiltIndex=function(e){for(var t=e.length,r=0;r<t;r++)if("folder"!==e[r].type)return r;return t},N.findChild=function(e,t){return 0<=e.chs.length&&(e=e.chs.filter(function(e){return e.name===t})).length?e[0]:null},N._find=function(e,t){for(var r=t.chs,n=r.length,i=0;i<n;i++){if(r[i].uid===e)return r[i];if(r[i].children){var o=this._find(e,r[i]);if(o)return o}}},N._err=function(e){L.prototype._emit.call(this,I,e)},N._ok=function(){L.prototype._emit.call(this,I,b)},wr),ar=((N=Sr.prototype).dispose=function(){var e;null!=(e=this._tree)&&e.dispose(),this._tree=null},N.setDefaultFolder=function(e){this._tree.dfNode=e},N.openAll=function(){return this._tree.openAll()},N.getAllContents=function(){return this._tree.all.chs.slice()},N.openFile=function(e,t){return this._tree.openFile(e,t)},N.createFile=function(e){return this._tree.createFile(e)},N.removeFile=function(e){return this._tree.removeFile(e)},N.getCurrentFileList=function(){return this._tree.getCurrentFileList()},N.renameFile=function(e,t){return this._tree.renameFile(e,t)},Sr),sr=(e(Tr,qt=u),Tr),ur=(e(yr,F=h),(N=yr.prototype).dispose=function(){F.prototype.dispose.call(this),this.tags=[]},N._initEvent=function(){var i=this;F.prototype._on.call(this,Me,function(t){var r=!1,e=t.data;e.tags||(e.tags=[]),i.dfName&&-1===e.tags.indexOf(i.dfName)&&e.tags.push(i.dfName),e.tags.forEach(function(e){i.addTag(e)&&(r=!0),(e=i.getTag(e)).append(t.uid),F.prototype._emit.call(i,ye,e,"tag",null,null,!1)}),r&&F.prototype._emit.call(i,Fe,i.getTagList())}),F.prototype._on.call(this,Ce,function(e,t,r,n){"tag"===e.type&&(e=i.uidTag(e.uid))&&e[{switch:"switch",move:"move",reorder:"reorder"}[t]](r,n)}),F.prototype._on.call(this,Ee,function(e,r){i.getTagList().forEach(function(t){r.forEach(function(e){t.remove(e)})})})},N.openTag=function(e,t){var r=this.getTag(e);return r||(this._err(Re),r=this.emptyItem),this.setDefaultTag(e),this.sltUid=r.uid,F.prototype._emit.call(this,Te,r,"tag",t),this._ok(),r.chs.slice()},N.getCurTag=function(){return this.uidTag(this.sltUid)},N.addTag=function(e,t){return-1===this.checkTag(e)&&(e=new sr({name:e,chs:t||[]}),this.tags.push(e),!0)},N.removeTag=function(e){var t=this.checkTag(e);return-1!==t&&(e===this.dfName&&(this.dfName=null,this.sltUid=null),this.tags.splice(t,1),!0)},N.emptyTag=function(e){return!!(e=this.getTag(e))&&(e.clear(),!0)},N.clear=function(){return this.tags=[],!0},N.getTagContents=function(e){return(e=this.getTag(e))?e.chs.slice():null},N.getDefaultTag=function(){return this.dfName},N.setDefaultTag=function(e){if(!e)return this.dfName=null,!(this.dfUid=null);var t=this.checkTag(e);return-1!==t&&(t=this.tags[t],this.dfName=e,this.dfUid=t.uid,!0)},N.renameTag=function(e,t){if(!f(e)||!f(t))return this._err(y),!1;var r=this.getTag(t),n=this.getTag(e);return n?r?(this._err(Ue),!1):(n.name=t,r=n.chs.slice(),F.prototype._emit.call(this,ke,e,t,r,n.uid),this._ok(),!0):(this._err(Re),!1)},N.checkTag=function(e){for(var t=this.tags.length,r=0;r<t;r++)if(this.tags[r].name===e)return r;return-1},N.getTagList=function(){return this.tags},N.getTag=function(e){return-1===(e=this.checkTag(e))?null:this.tags[e]},N.uidTag=function(e){for(var t=this.tags.length,r=0;r<t;r++)if(this.tags[r].uid===e)return this.tags[r];return null},N._err=function(e){F.prototype._emit.call(this,I,e)},N._ok=function(){F.prototype._emit.call(this,I,b)},yr),cr=((u=br.prototype).dispose=function(){var e;null!=(e=this._mng)&&e.dispose(),this._mng=null},u.getTagList=function(){var t=[];return this._mng.tags.forEach(function(e){e={name:e.name,uids:e.chs.slice()},t.push(e)}),t},u.addTag=function(e){return f(e)?!!this._mng.addTag(e)||(this._err(Ue),!1):(this._err(y),!1)},u.removeTag=function(t){var r=this,e=this._mng.getTag(t);return e?(e.chs.slice().forEach(function(e){r.removePageTag(e,t)}),this._ok(),this._mng.removeTag(t)):(this._err(Re),!1)},u.emptyTag=function(e){if(!f(e))return this._err(y),!1;var t=this._mng.uidTag(e);if(!e)return this._err(Re),!1;var r=t.chs.slice();return this._emit(xe,e,r,t.uid),this._ok(),this._mng.emptyTag(e)},u.openTag=function(e,t){return this._mng.openTag(e,t)},u.getCurrentTag=function(){return this._mng.getCurTag()},u.getTagContents=function(e){return this._mng.getTagContents(e)},u.getDefaultTag=function(){return this._mng.getDefaultTag()},u.setDefaultTag=function(e){return this._mng.setDefaultTag(e)},u.addPageTag=function(e,t){f(e)&&f(t)||this._err(y);var r=this._mng.getTag(t);return r?r.append(e)?(this._emit(We,e,t,r.uid),this._emit(Fe,this._mng.tags),this._ok(),!0):(this._err(Ue),!1):(this._err(Re),!1)},u.removePageTag=function(t,e){var r=this;if(f(t)||this._err(y),e===undefined)this._mng.getTagList().forEach(function(e){e.remove(t),r._emit(Pe,t,e.name,e.uid)});else{f(e)||this._err(y);var n=this._mng.getTag(e);if(!n)return this._err(Re),!1;if(!n.remove(t))return this._err(Ge),!1;this._emit(Pe,t,e,n.uid)}return e=this._mng.getTagList(),this._emit(Fe,e),!0},u.renameTag=function(e,t){return this._mng.renameTag(e,t)},u._emit=function(e){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this._mng)._emit.apply(t,[e].concat(n))},u._err=function(e){this._emit(I,e)},u._ok=function(){this._emit(I,b)},br),lr=((N=vr.prototype).addDataSync=function(e,t){return!this._check(e)&&(this._d[e]=t,!0)},N.getDataSync=function(e){return this._d[e]},N.removeDataSync=function(e){return!!this._check(e)&&(delete this._d[e],!0)},N.updateDataSync=function(e,t){return!!this._check(e)&&(this._d[e]=t,!0)},N._check=function(e){return this._d[e]!==undefined},vr),dr=((u=Dr.prototype).createDatabase=function(e,t){this._d[e]={},this._d[e][t]={}},u.addDataAsync=function(r,n,i,o){var a=this;return new Promise(function(e,t){return a._checkDB(i)?a._checkTable(i,o)?a._checkId(i,o,r)?t("The ".concat(r," already exists.")):(a._d[i][o][r]=n,void e("Save ".concat(r," to database successful."))):t(a._erMsg(1,o)):t(a._erMsg(0,i))})},u.getDataAsync=function(r,n,i){var o=this;return new Promise(function(e,t){return o._checkDB(n)?o._checkTable(n,i)?o._checkId(n,i,r)?void e(o._d[n][i][r]):t(o._erMsg(2,r)):t(o._erMsg(1,i)):t(o._erMsg(0,n))})},u.removeDataAsync=function(r,n,i){var o=this;return new Promise(function(e,t){return o._checkDB(n)?o._checkTable(n,i)?(delete o._d[n][i][r],void e("Remove ".concat(r," successful."))):t(o._erMsg(1,i)):t(o._erMsg(0,n))})},u.updateDataAsync=function(r,n,i,o){var a=this;return new Promise(function(e,t){return a._checkDB(i)?a._checkTable(i,o)?a._checkId(i,o,r)?(a._d[i][o][r]=n,void e("Update ".concat(r," successful."))):t(a._erMsg(2,r)):t(a._erMsg(1,o)):t(a._erMsg(0,i))})},u._checkDB=function(e){return this._d[e]!==undefined},u._checkTable=function(e,t){return this._d[e][t]!==undefined},u._checkId=function(e,t,r){return this._d[e][t][r]!==undefined},u._erMsg=function(e,t){return"The ".concat(["database","table","item"][e]," ").concat(t," does not exist.")},Dr),hr=((N=Ir.prototype).addDataAsync=function(e,t,r,n){return this.DBMng.addDataAsync(e,t,r||this.databaseName,n||this.documentTableName)},N.getDataAsync=function(e,t,r){return this.DBMng.getDataAsync(e,t||this.databaseName,r||this.documentTableName)},N.removeDataAsync=function(e,t,r){return this.DBMng.removeDataAsync(e,t||this.databaseName,r||this.documentTableName)},N.updateDataAsync=function(e,t,r,n){return this.DBMng.updateDataAsync(e,t,r||this.databaseName,n||this.documentTableName)},N.addMid=function(e,t){return this.middle.addDataSync(e,t)},N.getMid=function(e){return this.middle.getDataSync(e)},N.removeMid=function(e){return this.middle.removeDataSync(e)},N.updateMid=function(e,t){return this.middle.updateDataSync(e,t)},N.addMetadata=function(e,t){return this.metadataMng.addDataSync(e,t)},N.getMetadata=function(e){return this.metadataMng.getDataSync(e)},N.removeMetadata=function(e){return this.metadataMng.removeDataSync(e)},N.updateMetadata=function(e,t){return this.metadataMng.updateDataSync(e,t)},Ir),gr=(e(pr,Qt=h),pr.prototype.updateErrorMessage=function(e){80003!==e.code&&(this.errorMessage=e.message,this.errorCode=e.code)},pr),fr=(e(_r,Kt=h),(u=_r.prototype).updateLogMessage=function(e){var t;this.allowLog&&null!=this&&null!=(t=this.logs)&&t.push(null==this?void 0:this._formatLog(e))},u._formatLog=function(e){return function(e){var t,r=new Date,n={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(t in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[t]:("00"+n[t]).substr((""+n[t]).length)));return e}("yyyy-MM-dd hh:mm:ss")+" DVS: "+e},u.clear=function(){this.logs=[]},u.dispose=function(){Kt.prototype.dispose.call(this),this.logs=null},_r),t=(e(mr,Yt=h),(N=mr.prototype).on=function(e,t){Yt.prototype._on.call(this,e,t)},N.off=function(e,t){Yt.prototype._off.call(this,e,t)},N.emit=function(e){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=Yt.prototype._emit).call.apply(t,[this,e].concat(n))},N._log=function(e,t){(t=void 0===t||t)?this._oPub.emit(D,"Initialize ".concat(e," object.")):this._oPub.emit(D,"Complete ".concat(e," object initialization."))},N.dispose=function(){var e;Yt.prototype.dispose.call(this),null!=(e=this.Tag)&&e.dispose(),null!=(e=this.File)&&e.dispose(),null!=(e=this.ViewControl)&&null!=(e=e.getViewerByIndex(0))&&e.removeAllSync(),null!=(e=this.ViewControl)&&e.dispose(),null!=(e=this.Error)&&e.dispose(),null!=(e=this.Log)&&e.dispose(),this._db=null,this.Log=null,this.Error=null,this.Tag=null,this.File=null,this.DataControl=null},mr);function mr(e){var t,u,r,n,c,i=Yt.call(this,new $)||this;return i.DataControl=null,i.ViewControl=null,i.File=null,i.Tag=null,i.Annotation=null,i.Error=null,i.Log=null,i.uid=m(11),Array.from||(Array.from=(t=Object.prototype.toString,u=function u(e){return"function"==typeof e||"[object Function]"===t.call(e)},r=function r(e){return e=Number(e),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e},n=Math.pow(2,53)-1,c=function c(e){return e=r(e),Math.min(Math.max(e,0),n)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,n=1<arguments.length?arguments[1]:void undefined;if(void 0!==n){if(!u(n))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=arguments[2])}for(var i,o=c(t.length),a=u(this)?Object(new this(o)):new Array(o),s=0;s<o;)i=t[s],a[s]=n?void 0===r?n(i,s):n.call(r,i,s):i,s+=1;return a.length=o,a})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},writable:!0,configurable:!0}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,r){for(var n=atob(this.toDataURL(t,r).split(",")[1]),i=n.length,o=new Uint8Array(i),a=0;a<i;a++)o[a]=n.charCodeAt(a);e(new Blob([o],{type:t||"image/png"}))}}),i.Log=new fr(i._oPub),i._log("DVS"),i._log("db"),i._db=new hr,i._log("db",!1),i._log("Error"),i.Error=new gr(i._oPub),i._log("Error",!1),i._log("Tag"),i.Tag=new cr({pubsub:i._oPub}),i._log("Tag",!1),i._log("File"),i.File=new ar({pubsub:i._oPub}),i._log("File",!1),i._log("ViewControl"),i.ViewControl=new nr(e,i._oPub,i._db,i.uid),i._log("ViewControl",!1),i._log("DataControl"),i.DataControl=new qe(e,i._oPub,i._db),i._log("DataControl",!1),i._log("DVS",!1),i}function _r(e){return(e=Kt.call(this,e)||this).logs=[],e.allowLog=!0,e.logs.push(e._formatLog("Initialize DVS object.")),e.logs.push(e._formatLog("Initialize DVS object.")),e._on(D,e.updateLogMessage.bind(it(e))),e.logs.push(e._formatLog("Complete Log object initialization.")),e}function pr(e){return(e=Qt.call(this,e)||this).errorMessage="ok",e.errorCode=0,e._on(I,e.updateErrorMessage.bind(it(e))),e}function Ir(){this.databaseName="dvsDb",this.documentTableName="dvsDoc",this.imageTableName="dvsImage",this.annotationTableName="dvsAnno",this.middle=new lr,this.metadataMng=new lr,this.DBMng=new dr(this.databaseName,this.documentTableName)}function Dr(e,t){this._d={},this.createDatabase(e,t)}function vr(){this._d={}}function br(e){this._mng=new ur(e.pubsub)}function yr(e){return(e=F.call(this,e)||this).tags=[],e.dfName=null,e.dfUid=null,e.sltUid=null,e.emptyItem=new sr({name:"defaultTag",chs:[]}),e._initEvent(),e}function Tr(e){var t=qt.call(this,e)||this;return t.name=e.name,t.chs=e.chs||[],t.uid=e.uid||m(11),t}function Sr(e){this.autoOpen=!0,this._tree=new or(e.pubsub)}function wr(e){return(e=L.call(this,e)||this).all=null,e.open=!0,e.dfNode=null,e.root=new ir({uid:m(11),name:"root",type:"root",parent:null,chs:[]}),e.dfNode=e.root,e.all=new ir({uid:m(11),name:"All",type:"file"}),e.curNode=e.root,e.selectedNodeId=null,e._initEvent(),e}function Cr(e){var t=$t.call(this,e)||this;return t.name=e.name,t.type=e.type,t.parent=e.parent||null,t}function Er(e,t,r,n){var i=er.call(this,t)||this;return i._vwMng=null,i._vwMng=new rr(e,t,r,n),i}function Mr(e,t,r,n){return(t=tr.call(this,t)||this)._defaultConfig=Mt(),t._ViewUi=null,t._scrBarW=0,t._q=[],t.loader=[!1,!1,!1,!1],t._cors=!0,t._outW=4096,t._outH=4096,t._minW=800,t._minH=800,t._group={},t._resizeCb=null,t._focus={viewerId:undefined,thumbnailId:undefined},t.isCanvasInit=!1,t.width=0,t.height=0,t.tempWidth=0,t.tempHeight=0,t.offScreenCanvas=null,t.isDisposed=!1,t.vws=[],t._db=r,t._tabMng=new Et,t._mPub=new h,t.offScreenCanvas=new Pt(n,e.baseCanvasSize,e.isKeepCanvasSize),(r=document.createElement("canvas")).id="dvs_generate_min_cvs_".concat(n),t.canvas=r,(r=document.createElement("canvas")).id="dvs_saveTransformation_cvs_".concat(n),t.saveCanvas=r,t._initTopEvent(),t._initViewerEvent(),z(e,t._defaultConfig),t.initWorkerUlr(),t._getScrBarW(),t.createViewer(),t}window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.ViewModel=t},8420:function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:function(){return n}})},7344:function(e,t,r){r.d(t,{Z:function(){return o}});var i=r(4341);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),i(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),i(e,"prototype",{writable:!1}),e}},4845:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(4341);function i(e,t,r){return t in e?n(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},9623:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(1446),i=r(3882);function o(e){return(o="function"==typeof n&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof n&&e.constructor===n&&e!==n.prototype?"symbol":typeof e})(e)}}},n={};function o(e){var t=n[e];if(t!==undefined)return t.exports;t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,o),t.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e=Dynamsoft.Lib;e.timestamp="?t=20220624191623",Dynamsoft.Ready=function(t){var r=Dynamsoft.Lib;if(!Dynamsoft.navInfo)return r.asyncGetNavInfo().then(function(){try{t(r)}catch(e){throw r.log(e.stack||e,"error"),e}});try{t(r)}catch(e){throw r.log(e.stack||e,"error"),e}},o(1383),o(5930),o(9435),o(2053),o(5775),o(7378),Dynamsoft.Ready(function(){o(7843),e.product.bHTML5Edition?(o(630),o(1505),o(7367),o(2246),o(9475),o(8743),o(2696),o(1097),o(8975),o(398),o(7821),o(3839),o(5719),o(5505),o(6831),e.UI=e.UI||{},o(4666),o(2766)):e.product.bActiveXEdition&&(o(9035),o(7127),o(6045))}),o(4571)}(); 
Dynamsoft.DWT.bNpm=true;Dynamsoft.DWT.dbrCanvasMaxWH=4096; 
 
Dynamsoft.aryAddonReadyFun=[];Dynamsoft.AddonReady=function(fn){Dynamsoft.aryAddonReadyFun.push(fn);}; 
Dynamsoft.Lib.mix(Dynamsoft,{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}); 
 
Dynamsoft.AddonReady(function(DL,nil){var Dynamsoft=window.Dynamsoft; 
 
/*!
* Dynamsoft JavaScript Library
* @product Dynamsoft Image IO JS Edition
* @website http://www.dynamsoft.com
* @copyright Copyright 2022, Dynamsoft Corporation
* @author Dynamsoft
* @version 1.7.3 (2022-06-22T11:11:05.912Z)
* @fileoverview Dynamsoft JavaScript Library for Image IO
* 
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Dynamsoft=e.Dynamsoft||{},e.Dynamsoft.ImageIO={}))}(this,(function(e){"use strict";function t(e,t,i,s){return new(i||(i=Promise))((function(a,n){function r(e){try{l(s.next(e))}catch(e){n(e)}}function o(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((s=s.apply(e,t||[])).next())}))}function i(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)}function s(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i}var a,n,r,o,l,d,u,c,h,f,m,p,g,v,y,T,_,k,I,S,R,w,M,P,b,A,B,x,D,W,F,O,L,C,E,N,j,H,J,z,U,G,V,Y,q,K,Q,X,Z,$,ee,te,ie,se,ae,ne,re,oe,le,de,ue,ce,he,fe,me,pe,ge,ve,ye,Te,_e,ke,Ie,Se,Re,we,Me,Pe,be,Ae,Be,xe,De,We,Fe,Oe,Le,Ce,Ee,Ne,je,He,Je,ze,Ue,Ge,Ve,Ye,qe,Ke,Qe,Xe,Ze,$e,et,tt,it,st,at,nt,rt,ot,lt,dt,ut,ct,ht,ft,mt,pt,gt,vt,yt,Tt,_t,kt,It,St,Rt,wt,Mt,Pt,bt,At,Bt,xt,Dt,Wt,Ft,Ot,Lt,Ct;!function(e){e.logInfo="logInfo",e.logDebug="logDebug",e.logAll="logAll",e.imgIO="imgIO",e.core="imgCore",e.imgProc="imgProc",e.pdfR="pdfReader",e.pdfW="pdfWriter",e.crypto="crypto",e.binaryBlobType="application/octet-stream",e.wasmExtension=".wasm"}(a||(a={})),function(e){e.pending="pending",e.ready="ready",e.failed="failed",e.destroyed="destroyed",e.init="init"}(n||(n={})),function(e){e.PARAMETER_TYPE_ERROR="Parameter Type not Supported = ",e.TIMEOUT="Timeout no Response = ",e.FILE_STREAM_ERROR="File Stream Error = ",e.WASM_EXCEPTION_ERROR="An WASM exception occurred."}(r||(r={})),function(e){e[e.LONG_KEY=0]="LONG_KEY",e[e.DLS_KEY=1]="DLS_KEY"}(o||(o={})),function(e){e[e.wasmBase=-4e3]="wasmBase",e[e.wasmException=-4001]="wasmException",e[e.wasmNoModule=-4002]="wasmNoModule",e[e.wasmJsBase=-4100]="wasmJsBase",e[e.wasmJsObjectNotInit=-4101]="wasmJsObjectNotInit",e[e.wasmJsObjectTerminated=-4102]="wasmJsObjectTerminated",e[e.wasmJsObjectInitFailed=-4103]="wasmJsObjectInitFailed",e[e.wasmJsNotLoaded=-4104]="wasmJsNotLoaded",e[e.wasmJsInvalidJson=-4105]="wasmJsInvalidJson",e[e.wasmJsWorkerRunException=-4106]="wasmJsWorkerRunException",e[e.wasmJsWorkerRunFailed=-4107]="wasmJsWorkerRunFailed",e[e.wasmJsReadFileFailed=-4108]="wasmJsReadFileFailed",e[e.wasmJsCoreTaskException=-4109]="wasmJsCoreTaskException",e[e.wasmJsProcTaskException=-4110]="wasmJsProcTaskException",e[e.wasmJsSavePdfFailed=-4111]="wasmJsSavePdfFailed",e[e.wasmJsSaveTiffFailed=-4112]="wasmJsSaveTiffFailed"}(l||(l={})),e.ImageType=void 0,(d=e.ImageType||(e.ImageType={}))[d.IT_DIB=-1]="IT_DIB",d[d.IT_RGBA=-2]="IT_RGBA",d[d.IT_BGRA=-3]="IT_BGRA",d[d.IT_BMP=0]="IT_BMP",d[d.IT_JPG=1]="IT_JPG",d[d.IT_PNG=3]="IT_PNG",d[d.IT_ALL=5]="IT_ALL",e.ReturnedDataType=void 0,(u=e.ReturnedDataType||(e.ReturnedDataType={}))[u.RT_AUTO=-1]="RT_AUTO",u[u.RT_BINARY=1]="RT_BINARY",u[u.RT_BASE64=2]="RT_BASE64",function(e){e[e.SF_DEF=0]="SF_DEF",e[e.SF_ENABLE=1]="SF_ENABLE",e[e.SF_DISABLE=2]="SF_DISABLE"}(c||(c={}));!function(e){e.imgIOVer="1.7.3",e.coreVer="1.7.3",e.imgProcVer="1.7.3",e.pdfRVer="1.7.3",e.pdfWVer="1.7.3",e.cryptoVer="1.7.3"}(L||(L={}));class Et{static get UseSimd(){return i(this,h,"f",y)}static set UseSimd(e){s(this,h,e,"f",y)}static get License(){return i(this,h,"f",f)}static set License(e){s(this,h,e,"f",f)}static get LicMode(){return i(this,h,"f",m)}static set LicMode(e){s(this,h,e,"f",m),i(this,h,"m",_).call(this)}static get UUID(){return i(this,h,"f",p)}static set UUID(e){s(this,h,e,"f",p)}static get NavInfo(){return i(this,h,"f",g)}static set NavInfo(e){s(this,h,e,"f",g)}static get Mobile(){return i(this,h,"f",v)}static set Mobile(e){s(this,h,e,"f",v)}static get DefHeapSize(){return i(this,h,"f",k)}static set DefHeapSize(e){s(this,h,e,"f",k)}static get MaxHeapSize(){return i(this,h,"f",I)}static get ImageIOWorkerJS(){return"dynamsoft.imageio_wasm-"+L.imgIOVer+".js"}static get PdfReaderWorkerJS(){return"dynamsoft.pdfReader_wasm-"+L.pdfRVer+".js"}static get ImageIOPrefixName(){return"dynamsoft.imageio-"}static get ImagecorePrefixName(){return"dynamsoft.imagecore-"}static get ImageProcPrefixName(){return"dynamsoft.imageProc-"}static get PdfReaderPrefixName(){return"dynamsoft.pdfReader-"}static get PdfWriterPrefixName(){return"dynamsoft.pdfWriter-"}static get CryptoPrefixName(){return"dynamsoft.crypto-"}static get ImageIOResource(){return i(this,h,"f",w)}static set ImageIOResource(e){s(this,h,i(this,h,"m",S).call(this,e),"f",w),i(this,h,"m",P).call(this,i(this,h,"f",w),this.imageIOModule),i(this,h,"m",P).call(this,i(this,h,"f",w),i(this,h,"f",b)),i(this,h,"m",P).call(this,i(this,h,"f",w),i(this,h,"f",B)),i(this,h,"m",P).call(this,i(this,h,"f",w),i(this,h,"f",x))}static get PdfReaderResource(){return i(this,h,"f",M)}static set PdfReaderResource(e){e.useFastCompEdition=!1,s(this,h,i(this,h,"m",S).call(this,e),"f",M),i(this,h,"m",P).call(this,i(this,h,"f",M),i(this,h,"f",A)),this.PdfReaderModule.singleInstance=!0}static get ImageIOModule(){return this.imageIOModule}static get CryptoModule(){return i(this,h,"f",b)}static get PdfReaderModule(){return i(this,h,"f",A)}static get ImagecoreModule(){return i(this,h,"f",B)}static get ImageProcModule(){return i(this,h,"f",x)}static get PdfWriterModule(){return i(this,h,"f",D)}static get LogLevel(){return i(this,h,"f",W)}static setLogFunc(e,t,i){s(this,h,e,"f",W),s(this,h,t,"f",F),s(this,h,i,"f",O)}static get LogFunc(){return i(this,h,"f",F)}static get LogContext(){return i(this,h,"f",O)}}h=Et,T=function(e){this.LicMode==o.DLS_KEY&&e.dependencyModules&&-1!=e.dependencyModules.indexOf(a.imgIO)&&-1==e.dependencyModules.indexOf(a.crypto)&&e.dependencyModules.push(a.crypto)},_=function(){i(this,h,"m",T).call(this,i(this,h,"f",B)),i(this,h,"m",T).call(this,i(this,h,"f",x)),i(this,h,"m",T).call(this,i(this,h,"f",D))},S=function(e){var t,s,a,n,r;let o={crossScript:!1,resourceDir:e.resourceDir,workerScript:e.workerScript,useFastCompEdition:null!==(t=e.useFastCompEdition)&&void 0!==t&&t,useSimd:null!==(s=e.useSimd)&&void 0!==s?s:i(this,h,"f",y),fetchOptions:null!==(a=e.fetchOptions)&&void 0!==a?a:i(this,h,"f",R),defHeapSize:null!==(n=e.defHeapSize)&&void 0!==n?n:this.DefHeapSize,maxHeapSize:null!==(r=e.maxHeapSize)&&void 0!==r?r:this.MaxHeapSize};return o.workerScript=e.resourceDir+e.workerScript,o.workerScript.startsWith("http://")||o.workerScript.startsWith("https://")?(o.resourceDir=e.resourceDir,o.workerScript.startsWith(location.origin)||(o.crossScript=!0)):e.resourceDir.startsWith("/")?null!=location.origin&&(o.resourceDir=location.origin+e.resourceDir):null!=location.href&&(o.resourceDir=location.href.substring(0,location.href.lastIndexOf("/")+1)+e.resourceDir),o.resourceDir.endsWith("/")||(o.resourceDir+="/"),e.useFastCompEdition&&(o.resourceDir+="fastcomp/",o.workerScript=o.resourceDir+e.workerScript),o},P=function(e,t){t.resourceDir=e.resourceDir,t.crossScript=e.crossScript,t.name===a.imgProc?t.useSimd=e.useSimd:t.useSimd=!1,t.script=e.workerScript,t.fetchOptions=e.fetchOptions,t.defHeapSize=e.defHeapSize,t.maxHeapSize=e.maxHeapSize},f={value:""},m={value:o.LONG_KEY},p={value:""},g={value:null},v={value:!1},y={value:!1},k={value:32},I={value:200},R={value:{mode:"cors",credentials:"same-origin",retries:3,retryDelay:500}},w={value:{resourceDir:"",workerScript:Et.ImageIOWorkerJS,useFastCompEdition:!1,useSimd:!1,crossScript:!1,fetchOptions:i(Et,h,"f",R),defHeapSize:Et.DefHeapSize,maxHeapSize:Et.MaxHeapSize}},M={value:{resourceDir:"",workerScript:Et.PdfReaderWorkerJS,useFastCompEdition:!1,useSimd:!1,crossScript:!1,fetchOptions:i(Et,h,"f",R),defHeapSize:Et.DefHeapSize,maxHeapSize:Et.MaxHeapSize}},Et.imageIOModule={name:a.imgIO,autoLoad:!1,ver:L.imgIOVer,prefixName:Et.ImageIOPrefixName,dependencyModules:[],useSimd:!1,fetchOptions:i(Et,h,"f",R)},b={value:{name:a.crypto,autoLoad:!1,ver:L.cryptoVer,prefixName:Et.CryptoPrefixName,dependencyModules:[a.imgIO],fetchOptions:i(Et,h,"f",R)}},A={value:{name:a.pdfR,autoLoad:!1,ver:L.pdfRVer,prefixName:Et.PdfReaderPrefixName,dependencyModules:[],fetchOptions:i(Et,h,"f",R)}},B={value:{name:a.core,autoLoad:!1,ver:L.coreVer,prefixName:Et.ImagecorePrefixName,dependencyModules:[a.imgIO],fetchOptions:i(Et,h,"f",R)}},x={value:{name:a.imgProc,autoLoad:!1,ver:L.imgProcVer,prefixName:Et.ImageProcPrefixName,dependencyModules:[a.imgIO,a.core],useSimd:Et.UseSimd}},D={value:{name:a.pdfW,autoLoad:!1,ver:L.pdfWVer,prefixName:Et.PdfWriterPrefixName,dependencyModules:[a.imgIO,a.core],useSimd:Et.UseSimd}},W={value:""},F={value:void 0},O={value:null};class Nt{constructor(e,t,a,n,r){C.add(this),E.set(this,void 0),N.set(this,void 0),j.set(this,void 0),H.set(this,void 0),J.set(this,void 0),z.set(this,void 0),U.set(this,void 0),G.set(this,void 0),V.set(this,void 0),Y.set(this,void 0),q.set(this,void 0),K.set(this,void 0),Q.set(this,0),X.set(this,{}),Z.set(this,null),s(this,E,e,"f"),s(this,V,a,"f"),s(this,j,[],"f"),s(this,H,!1,"f"),s(this,J,!1,"f"),s(this,Q,t,"f"),s(this,Z,Object.create(null),"f"),i(this,X,"f").modulesInfo=[],s(this,q,Object.create(null),"f"),s(this,z,n,"f"),s(this,U,r,"f"),s(this,G,null,"f"),s(this,Y,0,"f"),s(this,K,0,"f"),s(this,N,i(this,C,"m",ee).call(this,i(this,E,"f")),"f"),i(this,N,"f").on("message",i(this,C,"m",se),this),i(this,N,"f").on("error",i(this,C,"m",ie),this),i(this,N,"f").on("exit",(function(t,s,a){let n="Worker #terminated Unexpectedly\n";n+=" exitCode: `"+t+"`\n",n+=" signalCode: `"+s+"`\n",n+=" #script: `"+e+"`\n",i(a,C,"m",ie).call(a,new Error(n),a)}),this)}get WorkerScript(){return i(this,V,"f")}setLogFunc(e,t){s(this,z,e,"f"),s(this,U,t,"f")}get id(){return i(this,Q,"f")}get Module(){return i(this,X,"f")}set Module(e){s(this,X,e,"f")}get Instances(){return i(this,Z,"f")}execTask(e,t,a){a||((a={}).promise=new Promise((function(e,t){a.resolve=e,a.reject=t})));let n=s(this,K,+i(this,K,"f")+1,"f");i(this,q,"f")[n]={id:n,resolver:a};let r={id:n,func:e,params:t};return i(this,C,"m",te).call(this,e+" send"),i(this,J,"f")?a.reject(new Error("Worker is #terminated")):i(this,H,"f")?a.reject(new Error("Worker is #terminating")):i(this,N,"f").wasmReady||i(this,N,"f").ready&&"loadWasm"===e?i(this,N,"f").send(r):i(this,j,"f").push(r),a.promise}get memSize(){return i(this,Y,"f")}get busy(){return this.howManyTasks>0}get howManyTasks(){return Object.keys(i(this,q,"f")).length}get alive(){return!i(this,H,"f")&&!i(this,J,"f")}terminate(e,t){if(i(this,C,"m",te).call(this,"worker terminate "+e),e&&i(this,C,"m",ne).call(this,"Worker has been #terminated"),"function"==typeof t&&s(this,G,t,"f"),this.busy)s(this,H,!0,"f");else{if(i(this,N,"f")){if("function"!=typeof i(this,N,"f").terminate)throw new Error("Failed to terminate worker");i(this,N,"f").terminate(),s(this,N,null,"f")}s(this,H,!1,"f"),s(this,J,!0,"f"),i(this,G,"f")&&i(this,G,"f").call(this,this)}}}E=new WeakMap,N=new WeakMap,j=new WeakMap,H=new WeakMap,J=new WeakMap,z=new WeakMap,U=new WeakMap,G=new WeakMap,V=new WeakMap,Y=new WeakMap,q=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Z=new WeakMap,C=new WeakSet,$=function(e){let t=new Error(""),i=Object.keys(e);for(let s=0;s<i.length;s++)t[i[s]]=e[i[s]];return t},ee=function(e){if("function"!=typeof Worker&&"object"!=typeof Worker)throw new Error("Web Workers not supported");let t=new Worker(e);return t.on=function(e,t,i){this.addEventListener(e,(function(s){"exit"===e?t(s.data,"",i):t(s.data,i)}))},t.send=function(e){if(null!=e&&null!=e.params&&null!=e.params.input){let t=Object.prototype.toString.call(e.params.input);if("[object Array]"===Object.prototype.toString.call(e.params.input)){if(t=Object.prototype.toString.call(e.params.input[0]),"[object ArrayBuffer]"===t||"[object Uint8ClampedArray]"===t||"[object Uint8Array]"===t)return void this.postMessage(e,[null!=e.params.input[0].buffer?e.params.input[0].buffer:e.params.input[0]])}else if("[object ArrayBuffer]"===t||"[object Uint8ClampedArray]"===t||"[object Uint8Array]"===t)return void this.postMessage(e,[null!=e.params.input.buffer?e.params.input.buffer:e.params.input])}this.postMessage(e)},t},te=function(e){i(this,z,"f")&&i(this,z,"f").call(this,e,i(this,U,"f"))},ie=function(e,t){s(t,J,!0,"f"),i(t,C,"m",te).call(t,"[js]["+Date.now()/1e3+"] worker error "+JSON.stringify(e)),i(t,H,"f")&&i(t,G,"f")&&i(t,G,"f").call(t,t),s(t,H,!1,"f"),i(t,C,"m",ne).call(t)},se=function(e,t){if(i(t,C,"m",te).call(t,e.log?e.log:e),"string"==typeof e&&"ready"===e)i(t,N,"f").ready=!0,i(t,C,"m",ae).call(t);else if(!e.log){if("object"==typeof e){let i=e.result;"object"==typeof i?(null!=i.errorCode&&(i.code=i.errorCode,delete i.errorCode),null!=i.errorMessage&&(i.message=i.errorMessage,delete i.errorMessage)):"string"==typeof i&&(i=i.replace('"errorCode"','"code"'),i=i.replace("'errorCode'","'code'"),i=i.replace('"errorMessage"','"message"'),i=i.replace("'errorMessage'","'message'"),e.result=i),null!=e.memSize&&s(t,Y,e.memSize,"f")}let a=e.id,n=i(t,q,"f")[a];void 0!==n&&(delete i(t,q,"f")[a],i(t,C,"m",te).call(t,e.func+" received"),!0===i(t,H,"f")&&t.terminate(),"loadWasm"===e.func&&null!=e.result&&(i(t,N,"f").wasmReady=!0,i(t,C,"m",ae).call(t)),e.error?n.resolver.reject(i(t,C,"m",$).call(t,e.error)):e.result&&n.resolver.resolve(e.result))}},ae=function(){i(this,j,"f").forEach(i(this,N,"f").send.bind(i(this,N,"f"))),s(this,j,[],"f")},ne=function(e){for(let t in i(this,q,"f"))void 0!==i(this,q,"f")[t]&&i(this,q,"f")[t].resolver.reject(new Error(e));s(this,q,Object.create(null),"f")};class jt{constructor(){re.add(this),de.set(this,[]),ue.set(this,2),ce.set(this,60),he.set(this,!1),fe.set(this,void 0),me.set(this,null),pe.set(this,a.logDebug),ve.set(this,!1)}static get Instance(){return i(this,oe,"f",le)||s(this,oe,new jt,"f",le),i(this,oe,"f",le)}get Terminated(){return i(this,he,"f")}getModuleLoadedError(e){for(let t of i(jt,oe,"f",ge))if(t.name==e)return t.error}getModuleStatus(e){for(let t of i(jt,oe,"f",ge))if(t.name==e)return t.status;return""}addModules(e){let t=!1;if(i(jt,oe,"f",ge).forEach((function(i,s,a){i.name==e.name&&(i.ver==e.ver?t=!0:a.splice(s,1))})),!t){let t=e;t.status="",t.wasmModule=null,i(jt,oe,"f",ge).push(t)}}loadModule(e,s){return t(this,void 0,void 0,(function*(){let t=null;null==s&&(s=0!=i(this,re,"m",be).call(this,e).length);for(let t of e.dependencyModules)t===a.imgIO?(this.addModules(Et.ImageIOModule),Et.LicMode===o.DLS_KEY&&this.addModules(Et.CryptoModule)):t===a.core&&this.addModules(Et.ImagecoreModule);for(let a of i(jt,oe,"f",ge))if(a.name===e.name){if(a.wasmModule){if(s)return!0;t=a;break}if(a.status===n.pending)return!1;t=a;break}if(t)if(""===t.status)t.status=n.pending,t.wasmModule=null;else{if(t.status===n.pending)return null;s||(t.error={code:0,message:""},t.status=n.pending)}else t=e,t.status=n.pending,t.wasmModule=null,i(jt,oe,"f",ge).push(t);return i(this,re,"m",ye).call(this,t)}))}setLogFunc(e,t,i){s(this,fe,t,"f"),s(this,me,i,"f"),s(this,pe,e,"f")}get busy(){i(this,re,"m",De).call(this);let e=i(this,de,"f");for(let t of e)if(t.busy)return!0;return!1}getWorker(e,s){return t(this,void 0,void 0,(function*(){if(i(this,re,"m",Ae).call(this,e.name))return i(this,re,"m",xe).call(this),null;let t=i(this,re,"m",be).call(this,e);return 0!=t.length?i(this,re,"m",We).call(this,t,s,!e.singleInstance):(yield this.loadModule(e,!1),null)}))}removeInstanceInWorker(e,t,s,a){var n;if(i(this,re,"m",Fe).call(this,t,s),a&&t&&null!=t.memSize){let s=1024*(null!==(n=e.maxHeapSize)&&void 0!==n?n:Et.MaxHeapSize)*1024;if(i(this,re,"m",we).call(this,"current memSize="+t.memSize+", max="+s),t.memSize>s&&0!=s&&!i(this,re,"m",Oe).call(this,t)){i(this,re,"m",we).call(this,"try to terminate the worker"),t.terminate();let e=i(this,de,"f").indexOf(t);-1!==e&&i(this,de,"f").splice(e,1)}}}terminate(e){s(jt,oe,null,"f",le),i(this,re,"m",we).call(this,"worker pool terminate "+e),s(this,he,!0,"f");let t=[],a=i(this,de,"f").slice();return s(this,de,[],"f"),a.forEach((function(i){let s={};s.promise=new Promise((function(e,t){s.resolve=e,s.reject=t})),t.push(s.promise),i.terminate(e,(function(e){s.resolve(e)}))})),Promise.all(t)}terminateWorker(e){const t=i(this,de,"f").filter((t=>!t.Module.modulesInfo[e.name]||(t.terminate(!0),!1)));s(this,de,t,"f")}getMemoryUsed(){let e=i(this,de,"f"),t=[],s=0;for(let i of e)i&&null!=i.memSize&&(t[s++]=i.memSize);return t}}oe=jt,de=new WeakMap,ue=new WeakMap,ce=new WeakMap,he=new WeakMap,fe=new WeakMap,me=new WeakMap,pe=new WeakMap,ve=new WeakMap,re=new WeakSet,ye=function(e){return t(this,void 0,void 0,(function*(){let t=this,a=yield i(this,re,"m",Me).call(this,e);if(a){let r={id:0,func:"loadWasm",params:{insId:0,priority:0,module:{modulesInfo:[]},fetchOptions:e.fetchOptions}};if(r.params.resourceDir=e.resourceDir,r.params.initMemory=e.defHeapSize,r.params.module){for(let t of i(jt,oe,"f",ge))for(let i of e.dependencyModules)i==t.name&&r.params.module.modulesInfo.push(t);r.params.module.modulesInfo.push(e)}return i(this,re,"m",_e).call(this,a,r,(function(a){s(t,ue,i(t,re,"m",Ie).call(t),"f"),e.status===n.pending&&(e.status="")}))}e.status=""}))},Te=function(e,t,s,a){for(let n of i(jt,oe,"f",ge))if(n.name===e){n.status=t,n.wasmModule=s,n.error=a;break}},_e=function(e,s,a){return t(this,void 0,void 0,(function*(){let t=this;try{const n=yield e.execTask(s.func,s.params);let r=!1;return void 0===n.code||n.modules?r=i(t,re,"m",ke).call(t,n,e):i(t,re,"m",we).call(t,n),r}catch(e){return i(t,re,"m",we).call(t,e),!1}finally{a&&a()}}))},ke=function(e,t){if(i(this,re,"m",we).call(this,"handleWasmLoad:"),i(this,re,"m",we).call(this,e),("object"!=typeof e||null==e.modules)&&"object"==typeof e)return!1;let s=!1;for(const a of e.modules)e.code?(i(this,re,"m",Te).call(this,a.name,n.failed,null,{code:e.code,message:e.message}),t.Module.modulesInfo[a.name]=!1):(i(this,re,"m",Te).call(this,a.name,n.ready,a.wasmModule,void 0),t.Module.modulesInfo[a.name]=!0,s=!0);return s},Ie=function(){let e=2;return"hardwareConcurrency"in self.navigator&&(e=self.navigator.hardwareConcurrency),Math.max(Math.min(i(this,ue,"f"),Math.max(i(this,ue,"f"),e/2)),1)},Se=function(){Et.LogLevel==i(this,pe,"f")&&Et.LogFunc==i(this,fe,"f")||this.setLogFunc(Et.LogLevel,Et.LogFunc,Et.LogContext)},Re=function(e){i(this,re,"m",Se).call(this),i(this,fe,"f")&&i(this,pe,"f")===a.logAll&&i(this,fe,"f").call(this,e,i(this,me,"f"))},we=function(e){i(this,re,"m",Se).call(this),i(this,fe,"f")&&i(this,pe,"f")===a.logDebug&&i(this,fe,"f").call(this,e,i(this,me,"f"))},Me=function(e){return t(this,void 0,void 0,(function*(){i(this,re,"m",De).call(this);let t=i(this,de,"f");for(let i of t)if(i.WorkerScript===e.script)return i.busy?null:i;return i(this,re,"m",Pe).call(this,e)}))},Pe=function(e){return t(this,void 0,void 0,(function*(){let t=this,a=i(t,de,"f");if(a.length<i(t,ue,"f")&&!i(t,ve,"f")){s(t,ve,!0,"f");let n=e.script;e.crossScript&&(n=yield class{static fetchRetry(e,t,i,s){let a=t.retries,n=t.retryDelay;return new Promise((function(r,o){const l=function(d){fetch(e,t).then((function(e){r(e)})).catch((function(e){d<a?function(e,t,a){i&&i(t,s),setTimeout((function(){l(++e)}),n)}(d,e):o(e)}))};l(0)}))}}.fetchRetry(e.script,e.fetchOptions,i(t,fe,"f"),t).then((e=>e.blob())).then((e=>URL.createObjectURL(e))).catch((e=>(i(t,re,"m",we).call(t,"get new worker fetch failed: "),i(t,re,"m",we).call(t,e),s(t,ve,!1,"f"),null))));let r=new Nt(n,a.length+1,e.script,i(t,fe,"f"),i(t,me,"f"));return a.push(r),s(t,ve,!1,"f"),i(t,re,"m",Re).call(t,a),i(t,re,"m",we).call(t,"get new worker "+r.id+" succeed!"),r}return null}))},be=function(e){i(this,re,"m",De).call(this);let t=i(this,de,"f");i(this,re,"m",Re).call(this,t);let s=[];for(let a of t)if(a.Module.modulesInfo[e.name]){if(a.busy&&t.length<i(this,ue,"f"))continue;s.push(a)}return i(this,re,"m",Re).call(this,"get workers for module "+e.name),i(this,re,"m",Re).call(this,s),s},Ae=function(e){for(let t of i(jt,oe,"f",ge))if(t.name===e&&t.status===n.pending)return!0;return!1},Be=function(){return t(this,void 0,void 0,(function*(){this.terminate(!0);for(let e of i(jt,oe,"f",ge))yield i(this,re,"m",ye).call(this,e)}))},xe=function(){i(this,re,"m",De).call(this),0==i(this,de,"f").length&&0!=i(jt,oe,"f",ge).length&&(i(this,re,"m",we).call(this,"no worker ready, reinit"),i(this,re,"m",Be).call(this))},De=function(){s(this,de,i(this,de,"f").filter((function(e){return e.alive})),"f")},We=function(e,t,s){i(this,re,"m",Re).call(this,"getWorkerByIntanceId"),i(this,re,"m",Re).call(this,e);let a,n=9007199254740991;for(let i of e){if(!s&&0!=Object.keys(i.Instances).length)return null;if(null!=i.Instances[t]){a=i;break}{let e=i.howManyTasks;e<n&&(a=i,n=e)}}return a?(a.Instances[t]="",i(this,re,"m",Re).call(this,e),i(this,re,"m",we).call(this,"get worker "+t+" in "+a.id+" succeed!"),""!=i(this,pe,"f")&&a.setLogFunc(i(this,fe,"f"),i(this,me,"f")),a):(i(this,re,"m",Re).call(this,"#getWorkerByIntanceId: no suitable worker"),null)},Fe=function(e,t){let s=i(this,de,"f");i(this,re,"m",Re).call(this,"removeInstanceInWorkerInner"),i(this,re,"m",Re).call(this,s);for(let a of s)if(a===e){null!=a.Instances[t]?(delete a.Instances[t],i(this,re,"m",Re).call(this,s),i(this,re,"m",we).call(this,"removeInstanceInWorkerInner "+t+" in "+e.id+" succeed!")):i(this,re,"m",we).call(this,"not found instance "+t);break}},Oe=function(e){return 0!=Object.keys(e.Instances).length},le={value:null},ge={value:new Array},function(e){e.Text="Text",e.Link="Link",e.FreeText="FreeText",e.Line="Line",e.Square="Square",e.Circle="Circle",e.Polygon="Polygon",e.PolyLine="PolyLine",e.Hignlight="Hignlight",e.Underline="Underline",e.Squiggly="Squiggly",e.StrikeOut="StrikeOut",e.Stamp="Stamp",e.Caret="Caret",e.Ink="Ink",e.Popup="Popup"}(Le||(Le={})),function(e){e.None="none",e.Invisible="invisible",e.Hidden="hidden",e.Print="print",e.NoZoom="noZoom",e.NoRotate="noRotate",e.NoView="noView",e.ReadOnly="readOnly",e.Locked="locked",e.ToggleNoView="toggleNoView",e.LockedContents="lockedContents"}(Ce||(Ce={})),function(e){e.Solid="S",e.Dashed="D",e.Beveled="B",e.Insert="I",e.Underline="U"}(Ee||(Ee={})),function(e){e.NoEffect="S",e.Cloudy="C"}(Ne||(Ne={})),function(e){e.Comment="Comment",e.Key="Key",e.Note="Note",e.Help="Help",e.NewParagraph="NewParagraph",e.Paragraph="Paragraph",e.Insert="Insert"}(je||(je={})),function(e){e.Marked="Marked",e.Review="Review"}(He||(He={})),function(e){e.Accepted="Accepted",e.Rejected="Rejected",e.Cancelled="Cancelled",e.Completed="Completed",e.None="None"}(Je||(Je={})),function(e){e.None="None",e.Square="Square",e.Circle="Circle",e.Diamond="Diamond",e.OpenArrow="OpenArrow",e.ClosedArrow="ClosedArrow",e.Butt="Butt",e.ROpenArrow="ROpenArrow",e.RClosedArrow="RClosedArrow",e.Slash="Slash"}(ze||(ze={})),function(e){e[e.LeftJustified=0]="LeftJustified",e[e.Centered=1]="Centered",e[e.RightJustified=2]="RightJustified"}(Ue||(Ue={})),function(e){e.FreeText="FreeText",e.FreeTextCallout="FreeTextCallout",e.FreeTextTypeWriter="FreeTextTypeWriter"}(Ge||(Ge={})),function(e){e.LineArrow="LineArrow",e.LineDimension="LineDimension"}(Ve||(Ve={})),function(e){e.Approved="Approved",e.Experimental="Experimental",e.NotApproved="NotApproved",e.Asls="Asls",e.Expired="Expired",e.NotForPublicRelease="NotForPublicRelease",e.Confidential="Confidential",e.Final="Final",e.Sold="Sold",e.Departmental="Departmental",e.ForComment="ForComment",e.TopSecret="TopSecret",e.Draft="Draft",e.ForPublicRelease="ForPublicRelease"}(Ye||(Ye={}));class Ht extends class{constructor(e){this.type=void 0,this.rectangle=void 0,this.contents=void 0,this.name=void 0,this.modifiedDate=void 0,this.flags=void 0,this.border=void 0,this.color=void 0,this.normalAppearance=void 0,this.type=e}toJsonString(){return JSON.stringify(this)}}{constructor(e){super(e),this.title=void 0,this.opacity=void 0,this.richText=void 0,this.creationDate=void 0,this.subject=void 0}}class Jt{}Jt.PdfAnnotType=Le,Jt.PdfAnnotFlag=Ce,Jt.PdfAnnotBorderStyleStyle=Ee,Jt.PdfAnnotBorderEffectStyle=Ne,Jt.PdfAnnotTextName=je,Jt.PdfAnnotTextStateModel=He,Jt.PdfAnnotTextState=Je,Jt.PdfAnnotLineEnding=ze,Jt.PdfAnnotFreeTextQuadding=Ue,Jt.PdfAnnotFreeTextIntent=Ge,Jt.PdfAnnotLineIntent=Ve,Jt.PdfAnnotStampName=Ye,Jt.PdfAnnotAppearance=class{constructor(){this.annot=void 0}},Jt.PdfAnnotBorderStyle=class{constructor(){this.width=void 0,this.style=void 0,this.dash=void 0}},Jt.PdfAnnotBorderEffect=class{constructor(){this.style=void 0,this.intensity=void 0}},Jt.PdfTextAnnot=class extends Ht{constructor(){super(Le.Text),this.open=void 0,this.iconName=void 0,this.state=void 0,this.stateModel=void 0}},Jt.PdfFreeTextAnnot=class extends Ht{constructor(){super(Le.FreeText),this.defaultAppearance=void 0,this.q=void 0,this.defaultStyle=void 0,this.callout=void 0,this.intent=void 0,this.borderEffect=void 0,this.rectDifference=void 0,this.borderStyle=void 0,this.lineEnding=void 0}},Jt.PdfLineAnnot=class extends Ht{constructor(e,t,i,s){super(Le.Line),this.line=void 0,this.borderStyle=void 0,this.lineEnding=void 0,this.interiorColor=void 0,this.leadLineLength=void 0,this.leadLineExtensionLength=void 0,this.caption=void 0,this.intent=void 0,this.leadLineOffsetLength=void 0,this.captionPosition=void 0,this.captionOffset=void 0,this.line=[e,t,i,s]}},Jt.PdfSquareAnnot=class extends Ht{constructor(){super(Le.Square),this.borderStyle=void 0,this.interiorColor=void 0,this.borderEffect=void 0,this.rectDifference=void 0}},Jt.PdfCircleAnnot=class extends Ht{constructor(){super(Le.Circle),this.borderStyle=void 0,this.interiorColor=void 0,this.borderEffect=void 0,this.rectDifference=void 0}},Jt.PdfPolygonAnnot=class extends Ht{constructor(){super(Le.Polygon),this.vertices=void 0,this.borderStyle=void 0,this.borderEffect=void 0}},Jt.PdfPolyLineAnnot=class extends Ht{constructor(){super(Le.PolyLine),this.vertices=void 0,this.borderStyle=void 0,this.lineEnding=void 0,this.borderEffect=void 0}},Jt.PdfHighlightAnnot=class extends Ht{constructor(){super(Le.Hignlight),this.quadPoints=void 0}},Jt.PdfUnderlineAnnot=class extends Ht{constructor(){super(Le.Underline),this.quadPoints=void 0}},Jt.PdfStrikeOutAnnot=class extends Ht{constructor(){super(Le.StrikeOut),this.quadPoints=void 0}},Jt.PdfSquigglyAnnot=class extends Ht{constructor(){super(Le.Squiggly),this.quadPoints=void 0}},Jt.PdfRubberStampAnnot=class extends Ht{constructor(){super(Le.Stamp),this.name=void 0}},Jt.PdfInkAnnot=class extends Ht{constructor(){super(Le.Ink),this.inkList=void 0,this.borderStyle=void 0}};class zt{constructor(t,a){var r,l,d,u;qe.add(this),Xe.set(this,void 0),this._outputType=e.ImageType.IT_JPG,this._inputType=e.ImageType.IT_ALL,this._jpegQuality=80,Ze.set(this,null!==(r=Et.License)&&void 0!==r?r:""),$e.set(this,[]),et.set(this,null),tt.set(this,0),it.set(this,""),st.set(this,null),at.set(this,null),nt.set(this,s(u=zt,Ke,+i(u,Ke,"f",Qe)+1,"f",Qe)),rt.set(this,null),ot.set(this,JSON.parse(JSON.stringify(Et.NavInfo))),lt.set(this,Et.Mobile),dt.set(this,location.origin),ut.set(this,""),ct.set(this,n.init),ht.set(this,!1),ft.set(this,null!==(l=Et.LicMode)&&void 0!==l?l:o.LONG_KEY),mt.set(this,null!==(d=Et.UUID)&&void 0!==d?d:""),this._handleBooleanResult=function(e,t){return!0},s(this,Xe,t,"f"),s(this,Ze,null!=a?a:Et.License,"f"),this.setLog(Et.LogLevel,Et.LogFunc,Et.LogContext)}_prepareModule(e){}setLog(e,t,i){s(this,st,null!=t?t:null,"f"),s(this,at,i,"f"),s(this,it,null!=e?e:"","f")}_log(e){"function"==typeof i(this,st,"f")&&i(this,st,"f").call(this,e,i(this,at,"f"))}_logAll(e){i(this,it,"f")===a.logAll&&this._log(e)}_handleBasicResult(e,t){return delete e.code,delete e.message,e}_handleImageData(e,t){var s,a,n;if("object"==typeof e.imageData)if(null!=e.imageCount&&e.imageCount>1)for(let a=0;a<e.imageCount;a++)e.imageData[a]=i(s=t.context,qe,"m",yt).call(s,e.imageData[a],e.blobType,t.params.returnBlob);else e.imageData=i(a=t.context,qe,"m",yt).call(a,e.imageData,e.blobType,t.params.returnBlob);return"object"==typeof e.pdfData&&(e.pdfData=i(n=t.context,qe,"m",yt).call(n,e.pdfData,e.blobType,t.params.returnBlob)),e}_handleResult(e,t){var s,a,n;let o=i(a=t.context,qe,"m",Tt).call(a,e);if(void 0===o.code||!o.code&&"Successful."===o.message){o=t.handleResult(o,t),i(n=t.context,qe,"m",gt).call(n),(0,t.resolve)(o)}else{let e={code:o.code,message:o.code===l.wasmException?r.WASM_EXCEPTION_ERROR+"("+(null===(s=t.params)||void 0===s?void 0:s.moduleName)+":"+t.func+":"+o.message+")":o.message};t.context.terminated?t.resolve(e):t.reject(e)}}_execTask(e){let t=this,s=i(t,et,"f");if(t._logAll(e),s)try{s.execTask(e.func,e.params).then((function(s){t._log(s),t._handleResult(i(t,qe,"m",Tt).call(t,s),e)})).catch((function(s){t._log(s),i(t,qe,"m",gt).call(t);let a=s;"object"==typeof s&&null!=s.message&&(a=s.message);let n={code:l.wasmJsWorkerRunFailed,message:a};i(t,ht,"f")?e.resolve(n):e.reject(n)}))}catch(s){i(t,qe,"m",gt).call(t),t._log(s);let a={code:l.wasmJsWorkerRunException,message:s.message,stack:s.stack};i(t,ht,"f")?e.resolve(a):e.reject(a)}}_cancelAllTasks(e,t){for(let s of i(this,$e,"f"))if(void 0!==s){let a={code:e,message:t};i(this,ht,"f")?s.resolve(a):s.reject(a)}s(this,$e,[],"f")}_createTask(t,n,r){let o={moduleName:i(this,Xe,"f").name,insId:i(this,nt,"f")},l={id:s(this,tt,+i(this,tt,"f")+1,"f"),func:t,params:o};return l.promise=new Promise((function(e,t){l.resolve=e,l.reject=t})),l.func=t,l.context=this,l.handleResult=void 0!==r&&r?r:this._handleBasicResult,l.params.input=void 0!==n&&n?n:"",l.params.returnType=e.ReturnedDataType.RT_AUTO,l.params.returnBlob=!0,Et.LogLevel===a.logDebug&&(l.params.logLevel=a.logDebug),l}_addTask(e,t){return i(this,ct,"f")===n.destroyed?e.reject({code:l.wasmJsObjectNotInit,message:i(this,ht,"f")?"object has been disposed":"object not init"}):i(this,ct,"f")===n.failed?e.reject({code:l.wasmJsObjectInitFailed,message:i(this,ut,"f")}):(t?i(this,$e,"f").unshift(e):i(this,$e,"f").push(e),i(this,qe,"m",gt).call(this)),e.promise}terminate(e){let t=this;e=null==e||e;let a=i(t,qe,"m",kt).call(t);s(t,ht,!0,"f");let n=jt.Instance;n&&n.removeInstanceInWorker(i(t,Xe,"f"),i(t,et,"f"),i(t,nt,"f"),e),a.then((function(e){s(t,et,null,"f"),t._log(i(t,Xe,"f").name+" destroy return: "),t._log(e)})).catch((function(e){s(t,et,null,"f"),t._log(i(t,Xe,"f").name+" destroy failed"),t._log(e)})),s(t,ct,"","f")}_readFile(e,t){return new Promise((function(s,a){(class{static read(e){return new Promise((function(t,i){let s=Object.prototype.toString.call(e);if("[object String]"===s)0===e.indexOf("blob:")||e.indexOf(".jpg")>0||e.indexOf(".jpeg")>0||e.indexOf(".png")>0||e.indexOf(".bmp")>0||e.indexOf(".dib")>0||e.indexOf(".pdf")>0||e.indexOf(".tiff")>0||e.indexOf(".tif")>0?fetch(e,{mode:"cors"}).then((function(e){return e.arrayBuffer()})).then((function(e){return t(e)})).catch((function(e){return Promise.reject(e)})):i("Error url: Can not read the file URL");else if("[object Blob]"===s||"[object FileList]"===s||"[object File]"===s){let i=e;"[object FileList]"!==s&&"[object File]"!==s||(i=e[0]?e[0]:e);let a=new FileReader;a.readAsArrayBuffer(i),a.onload=function(){let e=a.result;t(e)}}else"[object ArrayBuffer]"===s||"[object Uint8ClampedArray]"===s?t(e):i("Not support source type: "+s)}))}}).read(e).then((function(e){s(e)}),(function(e){var s;i(s=t.context,qe,"m",vt).call(s,t,e,l.wasmJsReadFileFailed)})).catch((function(e){var s;i(s=t.context,qe,"m",vt).call(s,t,e,l.wasmJsReadFileFailed)}))}))}}Ke=zt,Xe=new WeakMap,Ze=new WeakMap,$e=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,st=new WeakMap,at=new WeakMap,nt=new WeakMap,rt=new WeakMap,ot=new WeakMap,lt=new WeakMap,dt=new WeakMap,ut=new WeakMap,ct=new WeakMap,ht=new WeakMap,ft=new WeakMap,mt=new WeakMap,qe=new WeakSet,pt=function e(t){let a=null!=t?t:this;if(i(a,rt,"f")&&clearTimeout(i(a,rt,"f")),i(a,et,"f")&&i(a,et,"f").alive)return i(a,et,"f");let n=jt.Instance;n?n.getWorker(i(a,Xe,"f"),i(a,nt,"f")).then((t=>{if(s(a,et,t,"f"),i(a,et,"f")&&i(a,et,"f").alive)i(a,$e,"f").length>0&&i(a,qe,"m",gt).call(a);else{let t=n.getModuleLoadedError(i(a,Xe,"f").name);if(null==t?void 0:t.code)return a._cancelAllTasks(l.wasmJsNotLoaded,t.message),i(a,et,"f");i(a,$e,"f").length>0&&s(a,rt,setTimeout(i(a,qe,"m",e),50,a),"f")}return i(a,et,"f")})).catch((e=>i(a,et,"f"))):a._cancelAllTasks(l.wasmJsNotLoaded,"wasm env not loaded or unloaded")},gt=function(){if(this._logAll(i(this,$e,"f")),i(this,ct,"f")!=n.init)if(i(this,et,"f")&&i(this,et,"f").alive){if(i(this,$e,"f").length>0){let e=i(this,$e,"f")[0];i(this,ct,"f")!==n.ready&&"init"!==e.func||(delete i(this,$e,"f")[0],i(this,$e,"f").splice(0,1),this._execTask(e))}}else{if(i(this,et,"f")&&!i(this,et,"f").alive&&i(this,$e,"f").length>0&&"init"!=i(this,$e,"f")[0].func)return s(this,et,null,"f"),void i(this,qe,"m",_t).call(this);i(this,$e,"f").length>0&&i(this,qe,"m",pt).call(this,this)}else i(this,qe,"m",_t).call(this)},vt=function(e,t,i){let s=t;return"object"!=typeof s&&(s={},s.code=i,s.message=t),e.context.terminated?e.resolve(s):e.reject(s)},yt=function(e,t,i){if(i){let i;return i=null!=t?new Blob([e],{type:t}):new Blob([e]),i}return e},Tt=function(e){try{return"string"==typeof e?JSON.parse(e):e}catch(t){return e}},_t=function(){let e=this;e._prepareModule(i(this,Xe,"f"));let t=this._createTask("init");t.params.key=i(this,Ze,"f"),t.params.uuid=i(this,mt,"f"),t.params.licMode=i(this,ft,"f"),t.params.val={nv:i(this,ot,"f"),mb:i(this,lt,"f"),dm:i(this,dt,"f")},t.handleResult=function(e,t){return s(t.context,ct,n.ready,"f"),e},s(this,ct,n.pending,"f"),this._addTask(t,!0),t.promise.then((function(t){e._log(i(e,Xe,"f").name+" init return: "),e._log(t)})).catch((function(t){s(e,ct,n.failed,"f"),s(e,ut,t.message,"f"),e._log(i(e,Xe,"f").name+" init failed"),e._log(t),e._cancelAllTasks(l.wasmJsObjectInitFailed,t.message)}))},kt=function(){if(i(this,ct,"f")==n.pending||i(this,ct,"f")==n.ready){let e=this._createTask("destroy");return this._addTask(e),e.promise}return Promise.resolve(!0)},Qe={value:0};class Ut extends zt{constructor(e,t){super(e,t)}_prepareModule(e){let t=jt.Instance;t.addModules(Et.ImageIOModule),Et.LicMode===o.DLS_KEY&&t.addModules(Et.CryptoModule),i(Ut,It,"m",St).call(Ut,Et.ImageIOModule,e),t.addModules(e)}}It=Ut,St=function(e,t){t.resourceDir=e.resourceDir,t.crossScript=e.crossScript,t.script=e.script,t.useSimd=e.useSimd,t.name===a.imgProc?t.useSimd=Et.UseSimd:t.useSimd=!1,t.fetchOptions=e.fetchOptions,t.defHeapSize=e.defHeapSize,t.maxHeapSize=t.maxHeapSize};class Gt extends Ut{constructor(e){super(Et.ImagecoreModule,e),Rt.add(this),wt.set(this,0)}getImageFormat(e){return t(this,void 0,void 0,(function*(){let t=this,i=t._createTask("GetImageFormat");const s=yield t._readFile(e,i);return i.params.input=s,t._addTask(i),i.promise}))}readImageInfo(e){return t(this,void 0,void 0,(function*(){let t=this,i=t._createTask("ReadImageInfo");const s=yield t._readFile(e,i);return i.params.input=s,t._addTask(i),i.promise}))}getMD5(e){return t(this,void 0,void 0,(function*(){let t=this,i=t._createTask("GetMD5");const s=yield t._readFile(e,i);return i.params.input=s,i.handleResult=function(e,t){return e.MD5},t._addTask(i),i.promise}))}getLicenseInfo(){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("GetLicenseInfo"))}))}getAesResult(e){return t(this,void 0,void 0,(function*(){return e=null!=e?e:"",this._addTask(this._createTask("GetAesResult",[e]))}))}saveImage(e,s,a,n,r){return t(this,void 0,void 0,(function*(){return(r=null!=r&&r)?i(this,Rt,"m",Mt).call(this,e,void 0,void 0,void 0,1,void 0,void 0,s,a,n):i(this,Rt,"m",Mt).call(this,e,void 0,void 0,void 0,void 0,void 0,void 0,s,a,n)}))}readImage(i,s,a,n,r){return t(this,void 0,void 0,(function*(){s=null!=s?s:this._outputType,a=null!=a?a:this._jpegQuality,n=null!=n&&n,r=null!=r&&r;let t=this,o=t._createTask("ReadImage");const l=yield t._readFile(i,o);return o.params.input=[l,s,a,r],o.params.returnType=n?e.ReturnedDataType.RT_BASE64:e.ReturnedDataType.RT_AUTO,o.params.returnBlob=!n,o.handleResult=t._handleImageData,t._addTask(o),o.promise}))}openTiff(e){return t(this,void 0,void 0,(function*(){let t=this,i=t._createTask("LoadTiff");const s=yield t._readFile(e,i);i.params.input=s,t._addTask(i);const a=yield i.promise;if(a.srcBuffer){let t=Object.prototype.toString.call(e);"[object ArrayBuffer]"!=t&&"[object Uint8ClampedArray]"!=t&&delete a.srcBuffer}return a}))}readTiff(t,i,s,a){t=null!=t?t:0,i=null!=i?i:this._outputType,s=null!=s&&s,a=null!=a&&a;let n=this._createTask("ReadTiffPage");return n.params.input=[t,i,a],n.params.returnType=s?e.ReturnedDataType.RT_BASE64:e.ReturnedDataType.RT_AUTO,n.params.returnBlob=!s,n.handleResult=this._handleImageData,this._addTask(n)}readTiffInfo(e){e=null!=e?e:0;let t=this._createTask("GetTiffPageInfo");return t.params.input=[e],this._addTask(t)}closeTiff(){return this._addTask(this._createTask("EndReadTiff",null,this._handleBooleanResult))}createTiff(){return this._addTask(this._createTask("NewTiff",null,this._handleBooleanResult))}appendImage(e,s,a,n,r){return t(this,void 0,void 0,(function*(){s=null!=s?s:this._inputType,a=null!=a?a:i(this,wt,"f"),n=null!=n?n:this._jpegQuality,r=null!=r&&r;let t=this,o=t._createTask("AppendImageToTiff");const l=yield t._readFile(e,o);return o.params.input=[l,s,a,n,r],o.handleResult=t._handleBooleanResult,t._addTask(o),o.promise}))}addTag(e,t,i){return i=null!=i&&i,this._addTask(this._createTask("AddTagToNextPage",[e,t,i],this._handleBooleanResult))}getTiff(t){let i=this._createTask("GetTiffStream");return i.handleResult=this._handleImageData,i.params.returnType=null!=t?t:e.ReturnedDataType.RT_AUTO,i.params.returnBlob=t!=e.ReturnedDataType.RT_AUTO,this._addTask(i)}getMemoryUsed(){return this._addTask(this._createTask("getMemoryUsed",null,(function(e,t){return e.memoryUsed})))}getMultiPartFile(e,t){return this._addTask(this._createTask("ds_get_file",[e,t],(function(e,t){return e})))}}wt=new WeakMap,Rt=new WeakSet,Mt=function(i,s,a,n,r,o,l,d,u,c){return t(this,void 0,void 0,(function*(){let t=this;s=null!=s?s:this._inputType,a=null!=a?a:0,n=null!=n?n:0,r=null!=r?r:24,o=null!=o?o:96,l=null!=l?l:96,d=null!=d?d:this._outputType,u=null!=u?u:this._jpegQuality,c=null!=c?c:e.ReturnedDataType.RT_AUTO;let h=t._createTask("SaveImage");const f=yield t._readFile(i,h);return h.params.input=[f,s,a,n,r,o,l,d,u],h.params.returnType=c,h.params.returnBlob=c!=e.ReturnedDataType.RT_BASE64,h.handleResult=t._handleImageData,t._addTask(h),h.promise}))},function(e){e[e.NearestNeighbour=1]="NearestNeighbour",e[e.Bilinear=2]="Bilinear",e[e.Bicublic=3]="Bicublic",e[e.BestQuality=5]="BestQuality"}(Pt||(Pt={}));class Vt extends Ut{constructor(e){super(Et.ImageProcModule,e)}initImage(i,s,a,n,r){return t(this,void 0,void 0,(function*(){s=null!=s&&s,a=null!=a?a:0,n=null!=n?n:0,r=null!=r&&r;let t=this,o=t._createTask("InitImageObject");if(o.params.input=[i,a,n],s||r)s?o.params.input.push(e.ImageType.IT_RGBA):o.params.input.push(e.ImageType.IT_BGRA),t._addTask(o);else{const s=yield t._readFile(i,o);o.params.input[0]=s,o.params.input.push(e.ImageType.IT_ALL),t._addTask(o)}return o.promise}))}rotate(e,t,i,s){return e=null!=e?e:0,i=null!=i&&i,s=null!=s?s:Pt.Bicublic,t=null!=t?t:"FFFFFF",(e<0||e>360)&&(e%=360)<0&&(e+=360),this._addTask(this._createTask("RotateEx",[e,i,s,t],this._handleBooleanResult))}flip(e){e=null!=e?e:1;let t=this._createTask("");return t.handleResult=this._handleBooleanResult,1===e?t.func="Flip":-1===e&&(t.func="Mirror"),this._addTask(t),t.promise}erase(e,t,i,s,a){a=null!=a?a:"FFFFFF";let n=this._createTask("Erase");return n.handleResult=this._handleBooleanResult,n.params.input=[e,t,i,s,a],this._addTask(n),n.promise}crop(e,t,i,s){return this._addTask(this._createTask("Crop",[e,t,i,s],this._handleBooleanResult))}resize(e,t,i){return i=null!=i?i:Pt.BestQuality,this._addTask(this._createTask("ChangeImageSize",[e,t,i],this._handleBooleanResult))}toGrayscale(e){(e=null!=e?e:1)<1&&(e=1),e>3&&(e=3);let t="";return 1===e?t="0":2===e?t="3;3;720;1.05":3===e&&(t="3;5;1080;1.05"),this._addTask(this._createTask("ConvertToGrayScale",t,this._handleBooleanResult))}toBinary(e,t){(t=null!=t?t:1)<1&&(t=1),t>3&&(t=3);let i="";return null!=e&&(e?i="1":1===t?i="0":2===t?i="2;3;720;1.05":3===t&&(i="2;5;1080;1.05")),this._addTask(this._createTask("ConvertToBWScale",i,this._handleBooleanResult))}invert(){return this._addTask(this._createTask("Invert",null,this._handleBooleanResult))}setImageWidth(e,t){return t=null!=t?t:"FFFFFF",this._addTask(this._createTask("SetImageWidth",[e,t],this._handleBooleanResult))}setImageHeight(e,t){return t=null!=t?t:"FFFFFF",this._addTask(this._createTask("SetImageHeight",[e,t],this._handleBooleanResult))}setDPI(e,t,i,s,a,n){return a=null!=a&&a,n=null!=n?n:Pt.Bilinear,this._addTask(this._createTask("SetDPI",[e,t,i,s,a,n],this._handleBooleanResult))}getImage(t,i,s,a,n,r,o,l,d){t=null!=t?t:this._jpegQuality,i=null==i||i,a=null!=a?a:0,n=null!=n?n:0,r=null!=r?r:0,o=null==o||o,l=(s=null!=s&&s)&&null==l?e.ImageType.IT_JPG:null!=l?l:e.ImageType.IT_ALL,d=null!=d&&d;let u=this._createTask("GetCurrentImage");return u.params.input=[l,a,n,r,!1,t,i,d],u.params.returnBlob=o,u.handleResult=this._handleImageData,this._addTask(u)}getSkewAngle(e){return e=null!=e?e:"",this._addTask(this._createTask("GetSkewAngle",[e],(function(e,t){return e.skewAngle})))}freeReservedData(){return this._addTask(this._createTask("FreeReservedData",null,this._handleBooleanResult))}detectDocument(e,t,i,s,a){e=null!=e?e:Pt.Bilinear,t=null!=t?t:75,i=null!=i?i:100,s=null!=s?s:0,a=null!=a?a:"";return this._addTask(this._createTask("DocumentDetect",[e,t/100,i,s/255,a,"1"]))}perspective(e,t,i,s,a,n,r,o){return this._addTask(this._createTask("Perspective",[e,t,i,s,a,n,r,o],this._handleBooleanResult))}changeBrightness(e,t){return e=null!=e?e:0,0!=(t=null!=t?t:1)&&1!=t&&(t=0),1===t?this._addTask(this._createTask("ChangeBrightnessAndContrast",[e,0],this._handleBooleanResult)):this._addTask(this._createTask("ChangeBrightness",[Math.floor(e/1e3*255)],this._handleBooleanResult))}changeContrast(e,t){return e=null!=e?e:0,0!=(t=null!=t?t:1)&&1!=t&&(t=0),1===t?this._addTask(this._createTask("ChangeBrightnessAndContrast",[0,e],this._handleBooleanResult)):this._addTask(this._createTask("ChangeContrast",[1+e/1e3],this._handleBooleanResult))}changeBrightnessAndContrast(e,t){return e=null!=e?e:0,t=null!=t?t:0,this._addTask(this._createTask("ChangeBrightnessAndContrast",[e,t],this._handleBooleanResult))}removeShadow(e,t){t=null!=t?t:1.05,(e=null!=e?e:1)<1&&(e=1),e>3&&(e=3);let i="5";return 1===e?i+=";3;720;"+t:2===e?i+=";5;1080;"+t:3===e&&(i+=";10;0;"+t),this._addTask(this._createTask("ShadowRemovel",[i],this._handleBooleanResult))}enhanceAndSharpenImage(){return this._addTask(this._createTask("EnhanceAndSharpen",[""],this._handleBooleanResult))}brighten(){return this._addTask(this._createTask("Brighten",[""],this._handleBooleanResult))}getBlurryScore(){return this._addTask(this._createTask("GetBlurScore",[""],(function(e,t){return e.blurryScore})))}drawQuadrangle(e,t,i,s,a,n,r,o,l,d){let u=(l=null!=l?l:"FFFFFF")+";"+(d=null!=d?d:5);return this._addTask(this._createTask("DrawQuadrangle",[e,t,i,s,a,n,r,o,u],this._handleBooleanResult))}}class Yt{static resize(e,i,s,a,n,r){return t(this,void 0,void 0,(function*(){if(a<=0||a>=i&&a>=s)return{imageData:e};r=null!=r&&r;let t=new Vt;try{yield t.initImage(e);let o,l,d,u=null!=n?n:Pt.BestQuality;return d=i>s?i/a:s/a,o=Math.floor(i/d+.5),l=Math.floor(s/d+.5),r?(yield t.resize(o,l,u),yield t.toBinary(!1)):yield t.resize(o,l,u),yield t.getImage()}finally{t.terminate()}}))}static createImage(s){var a,n,r,o,l,d,u,c,h;return t(this,void 0,void 0,(function*(){let t=new Vt;try{let f={src:null,result:null,preview:null},m=s.source,p=s.output,g=null!==(n=null!==(a=m.imageWidth)&&void 0!==a?a:m.width)&&void 0!==n?n:0,v=null!==(o=null!==(r=m.imageHeight)&&void 0!==r?r:m.height)&&void 0!==o?o:0,y=m.imageData||m.data;if(null==p||null==p.orgImage&&null==p.previewImage)return f;let T=null!==(l=m.rgba)&&void 0!==l&&l,_=null!==(d=m.bgra)&&void 0!==d&&d,k=null!==(u=s.doPerspective)&&void 0!==u&&u,I=m.angle||0,S=yield t.initImage(y,T,g,v,_);f.src=S.srcBuffer,k&&s.polygon&&(yield t.perspective(s.polygon.points[0],s.polygon.points[1],s.polygon.points[2],s.polygon.points[3],s.polygon.points[4],s.polygon.points[5],s.polygon.points[6],s.polygon.points[7])),0!=I&&((I<0||I>360)&&(I%=360,I<0&&(I+=360)),yield t.rotate(I));let R=!1;if(p.orgImage){let i=null==p.orgImage.returnBlob||p.orgImage.returnBlob,s=null!=m.imageBitDepth?m.imageBitDepth:void 0,a=null!=m.imageXResolution?m.imageXResolution:void 0,n=null!=m.imageYResolution?m.imageYResolution:void 0,r=Et.NavInfo.bMac||Et.NavInfo.biPhone||Et.NavInfo.biPad,o=yield t.getImage(p.orgImage.quality,R,T||_,s,a,n,i,p.orgImage.returnType,r);p.orgImage.returnType==e.ImageType.IT_BGRA?o.bgra=!0:p.orgImage.returnType==e.ImageType.IT_RGBA&&(o.rgba=!0),f.result=o}if(p.previewImage){let a=g,n=v;90!=I&&270!=I||(a=v,n=g);let r,o,l=Math.min((null!==(c=p.previewImage.width)&&void 0!==c?c:g)/a,(null!==(h=p.previewImage.height)&&void 0!==h?h:v)/n);if(90==I||270==I?(r=Math.floor(v*l+.5),o=Math.floor(g*l+.5)):(r=Math.floor(g*l+.5),o=Math.floor(v*l+.5)),yield t.resize(r,o,p.previewImage.nInterplationMethod),s.polygon&&!k){let e=s.polygon.points;0!=I&&(e=i(this,bt,"m",At).call(this,e,I,a,n)),yield t.drawQuadrangle(Math.floor(e[0]*l+.5),Math.floor(e[1]*l+.5),Math.floor(e[2]*l+.5),Math.floor(e[3]*l+.5),Math.floor(e[4]*l+.5),Math.floor(e[5]*l+.5),Math.floor(e[6]*l+.5),Math.floor(e[7]*l+.5),s.polygon.strokeColor,s.polygon.lineWidth)}let d=null==p.previewImage.returnBlob||p.previewImage.returnBlob,u=yield t.getImage(p.previewImage.quality,!0,T||_,void 0,void 0,void 0,d,p.previewImage.returnType);p.previewImage.returnType==e.ImageType.IT_BGRA?u.bgra=!0:p.previewImage.returnType==e.ImageType.IT_RGBA&&(u.rgba=!0),f.preview=u}return f}finally{t.terminate()}}))}static resizeImageWithMeta(i,s,a,n,r){return t(this,void 0,void 0,(function*(){let t=null!=n?n:85,o=new Vt,l=null!=r?r:0;try{yield o.initImage(i);let n,r,d=null!=a?a:Pt.BestQuality;s.imageWidth>s.imageHeight?(n=l,r=Math.floor(s.imageHeight*l/s.imageWidth+.5)):(n=Math.floor(s.imageWidth*l/s.imageHeight+.5),r=l),1==s.imageBitDepth?(yield o.resize(n,r,d),yield o.toBinary(!1)):yield o.resize(n,r,d);let u=!1,c=!0,h=s.imageBitDepth,f=s.imageXResolution,m=s.imageYResolution,p=1==h?e.ImageType.IT_PNG:e.ImageType.IT_JPG;return yield o.getImage(t,u,!1,h,f,m,c,p)}finally{o.terminate()}}))}static getMax4kImage(i,s,a,n){return t(this,void 0,void 0,(function*(){let t,r=null!=a?a:85,o=new Gt;try{let e=yield o.readImageInfo(i);t={imageWidth:e.imageWidth,imageHeight:e.imageHeight,imageBitDepth:e.imageBitDepth,imageXResolution:e.imageXResolution,imageYResolution:e.imageYResolution}}finally{o.terminate()}if((Et.NavInfo.biPhone||Et.NavInfo.biPad)&&n&&(t.imageWidth>n||t.imageHeight>n))return yield Yt.resizeImageWithMeta(i,t,s,a,n);o=new Gt;try{let s=1==t.imageBitDepth?e.ImageType.IT_PNG:e.ImageType.IT_JPG;return yield o.readImage(i,s,r,!1)}finally{o.terminate()}}))}}bt=Yt,At=function(e,t,i,s){let a=[];for(let n=0;n<e.length;n+=2){let r,o;const l=e[n],d=e[n+1];90==t?(r=i-d,o=l):180==t?(r=i-l,o=s-d):270==t?(r=d,o=s-l):(r=l,o=d),a.push(r,o)}return a};class qt{static decode(e){const t={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};function i(e){let t,i,s,a,n,r,o,l=[],d=e.length;for(t=0;t<d;t++)a=e.charCodeAt(t),0==(a>>7&255)?l.push(e.charAt(t)):6==(a>>5&255)?(n=e.charCodeAt(++t),i=(31&a)<<6,s=63&n,o=i|s,l.push(String.fromCharCode(o))):14==(a>>4&255)&&(n=e.charCodeAt(++t),r=e.charCodeAt(++t),i=a<<4|n>>2&15,s=(3&n)<<6|63&r,o=(255&i)<<8|s,l.push(String.fromCharCode(o)));return l.join("")}return function(e){let s,a,n,r,o=[],l=0,d=e.length;for(;l<d;){do{s=t.decodeChars[255&e.charCodeAt(l++)]}while(l<d&&-1==s);if(-1==s)break;do{a=t.decodeChars[255&e.charCodeAt(l++)]}while(l<d&&-1==a);if(-1==a)break;o.push(String.fromCharCode(s<<2|(48&a)>>4));do{if(n=255&e.charCodeAt(l++),61==n)return i(o.join(""));n=t.decodeChars[n]}while(l<d&&-1==n);if(-1==n)break;o.push(String.fromCharCode((15&a)<<4|(60&n)>>2));do{if(r=255&e.charCodeAt(l++),61==r)return i(o.join(""));r=t.decodeChars[r]}while(l<d&&-1==r);if(-1==r)break;o.push(String.fromCharCode((3&n)<<6|r))}return i(o.join(""))}(e)}}!function(e){e[e.render=1]="render",e[e.extractImageOnly=2]="extractImageOnly",e[e.auto=3]="auto",e[e.renderWithAnnot=4]="renderWithAnnot"}(Dt||(Dt={}));class Kt extends zt{constructor(t){super(Et.PdfReaderModule,t),Bt.set(this,200),xt.set(this,3),this._outputType=e.ImageType.IT_ALL}open(e,i){return t(this,void 0,void 0,(function*(){i=null!=i?i:"";let t=this,s=t._createTask("LoadPdf");const a=yield t._readFile(e,s);return s.params.input=[a,i],s.handleResult=function(t,i){if(t.srcBuffer){let i=Object.prototype.toString.call(e);"[object ArrayBuffer]"!=i&&"[object Uint8ClampedArray]"!=i&&delete t.srcBuffer}let s=qt.decode(t.infoBase64);try{let e;try{s.replace(new RegExp("\\\\","gi"),"\\\\"),e=JSON.parse(s)}catch(t){e=s}let i={PdfCount:t.pageCount,PdfInfo:e,isTextBased:t.isTextBased};return t.srcBuffer&&(i.srcBuffer=t.srcBuffer,delete t.srcBuffer),i}catch(e){i.reject({code:l.wasmJsInvalidJson,message:e.message,stack:e.stack})}},t._addTask(s),s.promise}))}readPage(s,a,n,r,o,l,d){return t(this,void 0,void 0,(function*(){s=null!=s?s:0,a=null!=a?a:i(this,Bt,"f"),n=null!=n?n:i(this,xt,"f"),r=null!=r?r:this._outputType,l=null!=l&&l,o=null!=o&&o,d=null!=d&&d;let t=this._createTask("ReadPdfPage");return t.params.input=[s,a,n,r,o,d],t.params.returnType=l?e.ReturnedDataType.RT_BASE64:e.ReturnedDataType.RT_AUTO,t.params.returnBlob=!l,t.handleResult=this._handleImageData,this._addTask(t)}))}close(){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("UnloadPdf",null,this._handleBooleanResult))}))}readPageAnnot(e){return t(this,void 0,void 0,(function*(){e=null!=e?e:0;let t=this._createTask("ReadPdfAnnot",[e]);return t.handleResult=function(e,t){let i=qt.decode(e.annotBase64);try{let t;try{i.replace(new RegExp("\\\\","gi"),"\\\\"),t=JSON.parse(i)}catch(e){t=i}return{code:e.code,message:e.message,pageIndex:e.pageIndex,annots:t}}catch(e){t.reject({code:l.wasmJsInvalidJson,message:e.message,stack:e.stack})}},this._addTask(t)}))}setRenderLimitImageSize(e,i){return t(this,void 0,void 0,(function*(){return e=null!=e?e:0,i=null!=i?i:0,this._addTask(this._createTask("SetRenderLimitImageSize",[e,i],this._handleBooleanResult))}))}findText(e,i,s){return t(this,void 0,void 0,(function*(){return s=null!=s?s:0,this._addTask(this._createTask("FindText",[e,i,s]))}))}addSystemFont(e,i){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("AddSystemFont",[e,i]))}))}getModifiedPdf(i){return t(this,void 0,void 0,(function*(){let t=this._createTask("GetModifiedPdf");return t.params.returnType=null!=i?i:e.ReturnedDataType.RT_AUTO,t.params.returnBlob=i!=e.ReturnedDataType.RT_AUTO,t.handleResult=this._handleImageData,this._addTask(t)}))}addAnnot(e,i){return t(this,void 0,void 0,(function*(){e=null!=e?e:0;let t=i.toJsonString();return this._addTask(this._createTask("PageAddAnnot",[e,t],this._handleBooleanResult))}))}addImage(e,i,s){return t(this,void 0,void 0,(function*(){e=null!=e?e:0;let t=JSON.stringify(s),a=this,n=a._createTask("PageAddImage");const r=yield a._readFile(i,n);return n.params.input=[e,t,r,0,0],n.handleResult=a._handleBooleanResult,a._addTask(n),n.promise}))}addText(e,i){return t(this,void 0,void 0,(function*(){e=null!=e?e:0;let t=JSON.stringify(i);return this._addTask(this._createTask("PageAddText",[e,t],this._handleBooleanResult))}))}addPath(e,i){return t(this,void 0,void 0,(function*(){let t=JSON.stringify(i);return this._addTask(this._createTask("PageAddPath",[e,t],this._handleBooleanResult))}))}deleteAnnot(e,i){return t(this,void 0,void 0,(function*(){return e=null!=e?e:0,i=null!=i?i:0,this._addTask(this._createTask("PageDeleteAnnot",[e,i],this._handleBooleanResult))}))}deletePage(e){return t(this,void 0,void 0,(function*(){return e=null!=e?e:0,this._addTask(this._createTask("DeletePdfPage",[e],this._handleBooleanResult))}))}changePagesOrder(e){return t(this,void 0,void 0,(function*(){e=null!=e?e:[];let t="";for(let i=0;i<e.length;i++)0!=i&&(t+=","),t+=e[i]+1;return this._addTask(this._createTask("ChangePagesOrder",[t],this._handleBooleanResult))}))}rotatePageLeft(e){return t(this,void 0,void 0,(function*(){return e=null!=e?e:0,this._addTask(this._createTask("PageRotateLeft",[e],this._handleBooleanResult))}))}rotatePageRight(e){return t(this,void 0,void 0,(function*(){return e=null!=e?e:0,this._addTask(this._createTask("PageRotateRight",[e],this._handleBooleanResult))}))}insertBlankPage(e,i,s){return t(this,void 0,void 0,(function*(){return e=null!=e?e:0,i=null!=i?i:595,s=null!=s?s:842,this._addTask(this._createTask("InsertBlankPdfPage",[e,i,s],this._handleBooleanResult))}))}mergePdf(e,i,s,a){return t(this,void 0,void 0,(function*(){a=null!=a?a:-1,s=null!=s?s:[],i=null!=i?i:"";let t=this,n=t._createTask("MergePdfPage"),r="";for(let e=0;e<s.length;e++)0!=e&&(r+=","),r+=s[e]+1;const o=yield t._readFile(e,n);return n.params.input=[o,a,i,r],n.handleResult=t._handleBooleanResult,t._addTask(n),n.promise}))}getPageInfo(e){return t(this,void 0,void 0,(function*(){return e=null!=e?e:0,this._addTask(this._createTask("GetPdfPageInfo",[e]))}))}}Bt=new WeakMap,xt=new WeakMap;class Qt{static buildWasmFileName(e,t,i,s){return e+(s?"sn-":"")+t+i}static base64DecToArr(e,t){let s=e.replace(/[^A-Za-z0-9\+\/]/g,""),a=s.length,n=t?Math.ceil((3*a+1>>>2)/t)*t:3*a+1>>>2,r=new Uint8Array(n);for(let e,t,o=0,l=0,d=0;d<a;d++)if(t=3&d,o|=i(this,Wt,"m",Ft).call(this,s.charCodeAt(d))<<18-6*t,3===t||a-d==1){for(e=0;e<3&&l<n;e++,l++)r[l]=o>>>(16>>>e&24)&255;o=0}return r}static isWasmSupport(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){let e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}static random(){return(Date.now()%10086).toString(36).slice(2)+Math.random().toString(36).slice(2)}}Wt=Qt,Ft=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0},function(e){e[e.auto=0]="auto",e[e.store=1]="store"}(Ct||(Ct={}));Ot=new WeakSet,Lt=function(e){let t={};if(null!=e&&"object"==typeof e)for(let i in e)t[i]=e[i];return t};class Xt{static log(e,t){this.logLevel===t&&("function"==typeof this.logFunc?this.logFunc(e):console.log(e))}static setLoglevel(e,t){this.logLevel=1===e?a.logDebug:"",this.logFunc=t,Et.setLogFunc(this.logLevel,t)}static getMemoryUsed(){return jt.Instance.getMemoryUsed()}static getLicenseInfo(e,i,s){return t(this,void 0,void 0,(function*(){this.Init(e,i,s),yield jt.Instance.loadModule(Et.ImageIOModule);const t=new Gt(this.productKey);try{return yield t.getLicenseInfo()}finally{t.terminate()}}))}static Init(e,t,i){this.productKey=null!=e?e:this.productKey,void 0!==t&&(this.licMode=t?1:0),this.uuid=null!=i?i:this.uuid,Et.License=this.productKey,Et.UUID=this.uuid,Et.LicMode=this.licMode,Et.NavInfo=JSON.parse(JSON.stringify(Dynamsoft.navInfo)),Et.Mobile=Dynamsoft.Lib.env.bMobile,this.simdFlag===c.SF_ENABLE?Et.UseSimd=!0:this.simdFlag===c.SF_DISABLE?Et.UseSimd=!1:Et.UseSimd=this.getUseSimd();const s={resourceDir:this.resourceDir,workerScript:"",useFastCompEdition:this.useFastcompEdition,useSimd:Et.UseSimd,fetchOptions:this.fetchOptions,defHeapSize:Et.DefHeapSize,maxHeapSize:Et.MaxHeapSize};s.workerScript=Et.ImageIOWorkerJS,s.defHeapSize=this.wasmHeap[this.ImageIOWasm].initHeapSize,s.maxHeapSize=this.wasmHeap[this.ImageIOWasm].maxHeapSize,Et.ImageIOResource=s;const a=Object.assign({},s);a.defHeapSize=this.wasmHeap[this.PdfReaderWasm].initHeapSize,a.maxHeapSize=this.wasmHeap[this.PdfReaderWasm].maxHeapSize,a.workerScript=Et.PdfReaderWorkerJS,Et.PdfReaderResource=a,""===this.logLevel||this.logFunc||this.setLoglevel(1,console.log)}static loadPdfReader(e,i,s){return t(this,void 0,void 0,(function*(){this.Init(e,i,s),yield jt.Instance.loadModule(Et.ImageProcModule);return yield jt.Instance.loadModule(Et.PdfReaderModule)}))}static loadMain(e,i,s){return t(this,void 0,void 0,(function*(){this.Init(e,i,s);const t=yield jt.Instance.loadModule(Et.ImagecoreModule);return jt.Instance.loadModule(Et.ImageProcModule),t}))}static load(e,i,s){return t(this,void 0,void 0,(function*(){jt.Instance.terminate(!0),this.Init(e,i,s),yield this.loadMain(e,i,s),yield this.loadPdfReader(e,i,s)}))}static unloadMain(){jt.Instance.terminateWorker(Et.ImageIOModule)}static unloadPdfReader(){jt.Instance.terminateWorker(Et.PdfReaderModule)}static unload(){return t(this,void 0,void 0,(function*(){yield jt.Instance.terminate(!0)}))}static getUseSimd(){if(this.useFastcompEdition)return!1;if(this.simdFlag===c.SF_DEF){if(void 0!==navigator.userAgentData&&void 0!==navigator.userAgentData.brands){const{brands:e}=navigator.userAgentData;for(const t of e)if(t.brand&&("Chromium"===t.brand||"Google Chrome"===t.brand)&&t.version&&parseInt(t.version,10)>=94)return!0}}else if(this.simdFlag===c.SF_ENABLE)return!0;return!1}}Xt.resourceDir=`${Dynamsoft.DWT.ResourcesPath}/src/`,Xt.logLevel=Dynamsoft.DWT.Debug?a.logDebug:"",Xt.logFunc=null,Xt.productKey="",Xt.licMode=o.LONG_KEY,Xt.uuid="",Xt.fetchOptions={mode:"cors",credentials:"same-origin",retries:3,retryDelay:500},Xt.simdFlag=c.SF_DEF,Xt.useFastcompEdition=!1,Xt.ImageIOWasm=0,Xt.PdfReaderWasm=1,Xt.wasmHeap=[{maxHeapSize:300,initHeapSize:Et.DefHeapSize},{maxHeapSize:200,initHeapSize:Et.DefHeapSize}];e.ImageProc=Vt,e.ImageProcWrapper=Yt,e.ImagecoreEx=class extends Gt{constructor(e){super(e)}readTiff(e,i,s,a,n,r,o){const l=Object.create(null,{readTiff:{get:()=>super.readTiff}});return t(this,void 0,void 0,(function*(){const t=yield l.readTiff.call(this,e,i,s,a);let d={imageWidth:t.imageWidth,imageHeight:t.imageHeight,imageBitDepth:t.imageBitDepth,imageXResolution:t.imageXResolution,imageYResolution:t.imageYResolution};return o&&(d.imageWidth>o||d.imageHeight>o)?Yt.resizeImageWithMeta(t.imageData,d,n,r,o):t}))}},e.PdfAnnot=Jt,e.PdfReaderEx=class extends Kt{constructor(e){super(e)}readPage(e,i,s,a,n,r,o,l,d,u){const c=Object.create(null,{readPage:{get:()=>super.readPage}});return t(this,void 0,void 0,(function*(){const t=yield c.readPage.call(this,e,i,s,a,n,r,o);let h={imageWidth:t.imageWidth,imageHeight:t.imageHeight,imageBitDepth:t.imageBitDepth,imageXResolution:t.imageXResolution,imageYResolution:t.imageYResolution};return u&&(h.imageWidth>u||h.imageHeight>u)?yield Yt.resizeImageWithMeta(t.imageData,h,l,d,u):t}))}},e.PdfSettings=class{constructor(){this.version=void 0,this.compression=void 0,this.author=void 0,this.creationDate=void 0,this.creator=void 0,this.keywords=void 0,this.modifiedDate=void 0,this.producer=void 0,this.subject=void 0,this.title=void 0,this.quality=void 0,this.jpegMode=void 0}},e.PdfWriter=class extends Ut{constructor(e){super(Et.PdfWriterModule,e),Ot.add(this)}initPdfSetting(e){return t(this,void 0,void 0,(function*(){let t=this,s=t._createTask("InitPdfWriter");return s.params.input=JSON.stringify(i(t,Ot,"m",Lt).call(t,e)),s.handleResult=this._handleBooleanResult,t._addTask(s)}))}appendPage(e,i){return t(this,void 0,void 0,(function*(){let t=this,s=t._createTask("AddPageFromImageFileStream");i=null!=i&&i;const a=yield t._readFile(e,s);return s.params.input=[a,i],s.handleResult=t._handleBooleanResult,t._addTask(s),s.promise}))}writePdf(i){return t(this,void 0,void 0,(function*(){let t=this._createTask("GetPdfContent");return t.params.returnType=null!=i?i:e.ReturnedDataType.RT_AUTO,t.params.returnBlob=i!=e.ReturnedDataType.RT_AUTO,t.handleResult=this._handleImageData,this._addTask(t)}))}newPage(e,i){return t(this,void 0,void 0,(function*(){e=null!=e?e:595,i=null!=i?i:842;let t=this._createTask("NewPdfPage");return t.params.input=[e,i],t.handleResult=this._handleBooleanResult,this._addTask(t)}))}writePage(){return t(this,void 0,void 0,(function*(){let e=this._createTask("WritePdfPage");return e.handleResult=this._handleBooleanResult,this._addTask(e)}))}pageSetRotate(e){return t(this,void 0,void 0,(function*(){0!==(e=null!=e?e:0)&&90!==e&&180!==e&&270!==e&&(e=0);let t=this._createTask("PdfPageSetRotate");return t.params.input=[e],t.handleResult=this._handleBooleanResult,this._addTask(t)}))}pageAddImage(e,s,a,n){return t(this,void 0,void 0,(function*(){let t=this,r=t._createTask("PdfPageAddImage");n=null!=n&&n,s=null!=s?s:0;let o=JSON.stringify(i(t,Ot,"m",Lt).call(t,a));const l=yield t._readFile(e,r);return r.params.input=[l,s,o,n],r.handleResult=t._handleBooleanResult,t._addTask(r),r.promise}))}},e.WasmEnv=Xt,e.pdf=class{static IsModuleInstalled(){if(Qt.isWasmSupport()){const e=jt.Instance.getModuleStatus(a.pdfR),t=jt.Instance.getModuleStatus(a.pdfW);return e===n.ready&&t===n.ready}return!1}},Object.defineProperty(e,"__esModule",{value:!0})}));
Dynamsoft.WasmEnv = Dynamsoft.ImageIO.WasmEnv;  Dynamsoft.Imagecore = Dynamsoft.ImageIO.ImagecoreEx;  Dynamsoft.ImageProc = Dynamsoft.ImageIO.ImageProc;  Dynamsoft.PdfReader = Dynamsoft.ImageIO.PdfReaderEx;  Dynamsoft.PdfWriter = Dynamsoft.ImageIO.PdfWriter;  Dynamsoft.ImageProcWrapper = Dynamsoft.ImageIO.ImageProcWrapper;  Dynamsoft.pdf = Dynamsoft.ImageIO.pdf;  Dynamsoft.ImageProcWrapper = Dynamsoft.ImageIO.ImageProcWrapper;  Dynamsoft.Enum_ImageType = Dynamsoft.ImageIO.ImageType;  Dynamsoft.Enum_ReturnType = Dynamsoft.ImageIO.ReturnedDataType;   
}); 
 
/*! 20220624191759
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: BarcodeReader
* Version: 17.3
* 
*/
var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{},Dynamsoft.DBR=Dynamsoft.DBR||{},Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[],Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(e){Dynamsoft.aryAddonReadyFun.push(e)},function(){Dynamsoft.BarcodeReaderAddon=Dynamsoft.BarcodeReaderAddon||{};var n=Dynamsoft.BarcodeReaderAddon;n.Version="8.6.0.1026",n._decoding=!1,n._decodeQueue=[],n._decodeNext=function(){var e,t;0==n._decodeQueue.length?n._decoding=!1:(e=(t=n._decodeQueue[0]).method,t=t.args,n._decodeQueue.splice(0,1),e.apply(null,t))},n._defaultRuntimeSettingsStr="",n._defaultTemplateStr="",n._wasmInstance=!1,n._activeXInstance=!1,n.BarcodeReaderException=function(){var e=arguments[0],t=Dynamsoft.DBR.EnumErrorCode.DBR_UNKNOWN,e="number"==typeof e?(t=e,new Error(arguments[1])):new Error(e);return e.code=t,e},n.RemoveNonPrintableChar=function(e){return Dynamsoft.Lib.isString(e)?e.replace(/[^\x20-\x7E]|(\\")/g,""):e},n.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty."},n._activeXMaxIEVersion=9,n.logLevel=3,Dynamsoft.DBR.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0},Dynamsoft.DBR.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0},Dynamsoft.DBR.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0},Dynamsoft.DBR.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0},Dynamsoft.DBR.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2},Dynamsoft.DBR.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0},Dynamsoft.DBR.EnumClarityCalculationMethod={ECCM_CONTRAST:1},Dynamsoft.DBR.EnumClarityFilterMode={CFM_GENERAL:1},Dynamsoft.DBR.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0},Dynamsoft.DBR.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0},Dynamsoft.DBR.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2},Dynamsoft.DBR.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0},Dynamsoft.DBR.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0},Dynamsoft.DBR.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-1e4,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061,DMERR_FAILED_TO_REACH_LTS:-20200},Dynamsoft.DBR.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0},Dynamsoft.DBR.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12},Dynamsoft.DBR.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0},Dynamsoft.DBR.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32},Dynamsoft.DBR.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4},Dynamsoft.DBR.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192},Dynamsoft.DBR.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64},Dynamsoft.DBR.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4},Dynamsoft.DBR.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3},Dynamsoft.DBR.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0},Dynamsoft.DBR.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2},Dynamsoft.DBR.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3},Dynamsoft.DBR.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0},Dynamsoft.DBR.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32},Dynamsoft.DBR.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0},Dynamsoft.DBR.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0},Dynamsoft.DBR.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0},Dynamsoft.DBR.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}}(),Dynamsoft.AddonReady(function(R,e){var t,m=Dynamsoft.BarcodeReaderAddon;function d(e){return e&&e instanceof ArrayBuffer}m.Class=function(){function e(){this._runtimeSettings=null,this._initSettingsContent=null,this._tplContentArr=[],this.bWasm=!1}var R,D=Dynamsoft.Lib;e.prototype._decodeBlob=function(t,e){var n=this;return new Promise(function(e){if(!(t instanceof Blob))throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.");e()}).then(function(){return n._innerDecode(0,t,e)})},e.prototype._decodeArrayBuffer=function(t,e){var n=this;return new Promise(function(e){if(!(t instanceof ArrayBuffer))throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.");e()}).then(function(){return n._innerDecode(0,t,e)})},e.prototype._decodeUint8Array=function(t,e){var n=this;return new Promise(function(e){if(!(t instanceof Uint8Array||self.Uint8ClampedArray&&t instanceof Uint8ClampedArray))throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.");e()}).then(function(){return n._innerDecode(0,t,e)})},e.prototype._decodeImage=function(t,n){var o=this;return new Promise(function(e){if(!(t instanceof HTMLImageElement))throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.");if(t.crossOrigin&&"anonymous"!=t.crossOrigin)throw"cors";n=n||"",e()}).then(function(){return"data:image/"==t.src.substring(0,11)?o._decodeBase64(t.src,n):o._decodeUrl(t.src,n).catch(function(e){if(3<=m.logLevel&&console&&console.warn&&(console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead."),console.warn(e)),!self.HTMLCanvasElement)return Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."));e=document.createElement("canvas");return e.width=t.naturalWidth,e.height=t.naturalHeight,e.getContext("2d").drawImage(t,0,0),o._decodeCanvas(e,n)})})},e.prototype._decodeCanvas=function(n,o){var t=this;return new Promise(function(t){if(!(n instanceof HTMLCanvasElement))throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.");if(n.crossOrigin&&"anonymous"!=n.crossOrigin)throw"cors";o=o||"",n.toBlob?n.toBlob(function(e){t(e)}):n.msToBlob?n.msToBlob(function(e){t(e)}):t(n.toDataURL())}).then(function(e){return n.toBlob||n.msToBlob?t._decodeBlob(e,o):t._decodeBase64(e,o)})},e.prototype._decodeVideo=function(d){var _,t=this,c=arguments;return new Promise(function(e){if(!(d instanceof HTMLVideoElement))throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.");if(d.crossOrigin&&"anonymous"!=d.crossOrigin)throw"cors";c.length<=2?(t=n=0,o=i=d.videoWidth,r=a=d.videoHeight):a=c.length<=4?(t=n=0,o=d.videoWidth,r=d.videoHeight,i=c[1],c[2]):(t=c[1],n=c[2],o=c[3],r=c[4],i=c[5],c[6]),_="string"==typeof c[c.length-1]?c[c.length-1]:"";var t,n,o,r,i,a,s=document.createElement("canvas");s.width=i,s.height=a,s.getContext("2d").drawImage(d,t,n,o,r,0,0,i,a),e(s)}).then(function(e){return t._decodeCanvas(e,_)})},e.prototype._decodeBase64=e.prototype.decodeBase64String=function(t,e){var n=this;return new Promise(function(e){if(!("string"==typeof t||"object"==typeof t&&t instanceof String))throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.");"data:image/"==t.substring(0,11)&&(t=t.substring(t.indexOf(",")+1)),e()}).then(function(){return n._innerDecode(1,t,e)})},e.prototype._decodeUrl=function(o,r){var t=this;return o&&o.indexOf&&(0==o.indexOf("dwt://")||0==o.indexOf("dcs://"))?t._decodeDynamsoftServiceInnerUrl(o,r):m._wasmInstance?m._wasmInstance.decode(o):new Promise(function(e,t){var n;if(!("string"==typeof o||"object"==typeof o&&o instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.");r=r||"",m._activeXInstance?((n=new ActiveXObject("MSXML2.XMLHTTP")).open("GET",o,!0),n.overrideMimeType?n.overrideMimeType("text/plain; charset=x-user-defined"):n.setRequestHeader("Accept-Charset","x-user-defined"),n.onreadystatechange=function(){4==n.readyState&&e(new VBArray(n.responseBody).toArray())},n.send("")):((n=new XMLHttpRequest).open("GET",o,!0),n.responseType="arraybuffer",n.send(),n.onloadend=function(){e(this.response)},n.onerror=function(){t(Error(n.error))})}).then(function(e){return m._activeXInstance?t._activeXDecodeArray(e,r):t._decodeArrayBuffer(e,r)})},e.prototype._decodeDynamsoftServiceInnerUrl=function(t,e){var n=this;return new Promise(function(e){if(!("string"==typeof t||"object"==typeof t&&t instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.");if(0!=t.indexOf("dwt://")&&0!=t.indexOf("dcs://"))throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.");e()}).then(function(){return n._innerDecode(4e3,t,e)})},e.prototype._activeXDecodeArray=function(n,o){var t=this;return new Promise(function(e,t){if(!(n instanceof Array))throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.");o=o||"";try{e(Dynamsoft.Lib.btoa(String.fromCharCode.apply(String,n)))}catch(e){t(e)}}).then(function(e){return t._decodeBase64(e,o)})},e.prototype._activeXDecodeHandle=function(e,t){var n=this;return new Promise(function(e){t=t||"",e()}).then(function(){return n._innerDecode(4001,e,t)})},e.prototype._decode=e.prototype.decode=function(e,t){return m._activeXInstance?"string"==typeof e||e instanceof String?this._activeXDecodeHandle(e,t):Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'.")):m._wasmInstance?m._wasmInstance.decode(e):self.Blob&&e instanceof Blob?this._decodeBlob(e,t):self.ArrayBuffer&&e instanceof ArrayBuffer?this._decodeArrayBuffer(e,t):self.Uint8Array&&e instanceof Uint8Array||self.Uint8ClampedArray&&e instanceof Uint8ClampedArray?this._decodeUint8Array(e,t):e instanceof Array?this._activeXDecodeArray(e,t):self.HTMLImageElement&&e instanceof HTMLImageElement?this._decodeImage(e,t):self.HTMLCanvasElement&&e instanceof HTMLCanvasElement?this._decodeCanvas(e,t):self.HTMLVideoElement&&e instanceof HTMLVideoElement?this._decodeVideo(e,t):isNaN(e)?"string"==typeof e||e instanceof String?"data:image/"==e.substring(0,11)?this._decodeBase64(e,t):this._decodeUrl(e,t):Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'.")):this._activeXDecodeHandle(e,t)},e.prototype._innerServiceCmd=function(e,r){return new Promise(function(t,n){var o={method:"ReadBarcode",parameter:[Dynamsoft.DWT.ProductKey,4002,"",""],updateSettings:e,initSettingsContent:r};m._activeXInstance?t(m._activeXInstance.Process(D.stringify(o),location.protocol+"//"+location.host)):(D.License.isLTS()?Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(e){return o.parameter.push(e.ar),o.parameter.push(e.cu),o.parameter.push(0),o.parameter.push(""),D.stringify(o)}):Promise.resolve(D.stringify(o))).then(function(e){return D.fetch(m._urlRoot+"ReadBarcode",{mode:"cors",method:"post",body:e,dataType:"arrayBuffer"})}).then(function(e){d(e)?t(String.fromCharCode.apply(null,new Uint8Array(e))):t(e)},function(e){var t="Init template & runtimeSettings failed.";e&&(t=[t," Http info: ",e.errorString," (",e.httpCode,")"].join("")),n(t)})})},e.prototype._innerDecode=function(e,r,i,a){var s=this;return s._runtimeSettings&&0==s._runtimeSettings.expectedBarcodesCount&&(s._runtimeSettings.expectedBarcodesCount=512),new Promise(function(_,c){function o(e,t,n){try{var o,r,i,a,s=R&&R(e);for(s&&s.textResults||c(new m.BarcodeReaderException(s.exception,s.description)),D.product.bHTML5Edition&&n&&n.config.data&&(o=D.parse(n.config.data),D.isArray(o.parameter)&&2<o.parameter.length&&4e3==o.parameter[1]&&(4<o.parameter.length&&o.parameter[4]?s.textResults.imageid=o.parameter[4]:0<=(a=(i=o.parameter[2]).indexOf("&index="))&&(s.textResults.imageid=i.substring(a+7,i.indexOf("&t="))))),r=0;r<s.textResults.length;r++){var d=s.textResults[r];d.BarcodeText=d.barcodeText,s.exception!=Dynamsoft.DBR.EnumErrorCode.DBR_SUCCESS&&(d.exception=s.exception)}s.exception!=Dynamsoft.DBR.EnumErrorCode.DBR_SUCCESS&&(s.textResults.exception=s.exception,s.textResults.description=s.description),m._activeXInstance&&s.records&&(Dynamsoft.Lib.each(s.records,function(e,t){Dynamsoft.DWT.lavrf(t,e,Dynamsoft.DWT.EnumInstance.dwt_desktop)}),Dynamsoft.DWT.lavrf_(1,Dynamsoft.DWT.EnumInstance.dwt_desktop)),_(s.textResults)}catch(e){c(e)}}var t,n={method:"ReadBarcode",parameter:[Dynamsoft.DWT.ProductKey,e,0!=e?r:null,i||""],updateSettings:s._runtimeSettings,conflictMode:1==s.conflictMode?"ignore":"overwrite",initSettingsContent:s._initSettingsContent,tplContent:function(){if(i)for(var e=0;e<s._tplContentArr.length;++e)if(i==s._tplContentArr[e].ImageParameter.Name)return D.stringify(s._tplContentArr[e]);return null}()};m._activeXInstance?D.License.isLTS()?Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(e){n.parameter.push(e.ar),n.parameter.push(e.cu),n.parameter.push(0),n.parameter.push(""),o(m._activeXInstance.Process(D.stringify(n),location.protocol+"//"+location.host))}):o(m._activeXInstance.Process(D.stringify(n),location.protocol+"//"+location.host)):(t=m._urlRoot+"ReadBarcode",0==e&&(t+="/LoadZipFromBytes?cmd="+encodeURIComponent(D.stringify(n))),(0==e?Promise.resolve(r):D.License.isLTS()?Dynamsoft.DWT.lglic(Dynamsoft.DWT.EnumInstance.dwt_desktop).then(function(e){return n.parameter.push(e.ar),n.parameter.push(e.cu),n.parameter.push(0),n.parameter.push([D.product.getDWTPrefix(),D.product.getServerVersionInfo(),"/verify?id=",a,"&t=",D.getRandom()].join("")),D.stringify(n)}):Promise.resolve(D.stringify(n))).then(function(e){return D.fetch(t,{mode:"cors",method:"post",body:e,dataType:"arrayBuffer"})}).then(function(e,t,n){d(e)?o(String.fromCharCode.apply(null,new Uint8Array(e)),0,n):o(e,0,n)},function(e){var t="ReadBarcode request fail.";e&&(t=[t," Http info: ",e.errorString," (",e.httpCode,")"].join("")),c(Error(t))}))})},R=m._handleRetJsonString=function(t){var n;if("string"==typeof t||"object"==typeof t&&t instanceof String)try{n=D.parse(t)}catch(e){n=D.parse(m.RemoveNonPrintableChar(t))}else n=t;if(!n)throw m.BarcodeReaderException(Dynamsoft.DBR.EnumErrorCode.DBR_UNKNOWN,m.errors.decodeResultEmpty);if("textResults"in n&&D.isArray(n.textResults)||n.exception==Dynamsoft.DBR.EnumErrorCode.DBR_SUCCESS)return n;throw m.BarcodeReaderException(n.exception,n.description)},e.prototype.getAllParameterTemplateNames=function(){for(var e=[],t=0;t<this._tplContentArr.length;++t)e.push(this._tplContentArr[t].ImageParameter.Name);return e},e.prototype.getRuntimeSettings=function(){return this.bWasm?m._wasmInstance.getRuntimeSettings():(this._runtimeSettings||(this._runtimeSettings=D.parse(m._defaultRuntimeSettingsStr)),Promise.resolve(this._runtimeSettings))};return e.prototype.updateRuntimeSettings=function(e){var t,n=this;if("string"==typeof e||"object"==typeof e&&e instanceof String){if("speed"==e||"balance"==e||"coverage"==e||"default"==e)return n.initRuntimeSettingsWithString("speed"==e?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"balance"==e?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"coverage"==e?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}');t=e}else{if("object"!=typeof e)throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");t=D.stringify(e)}e=D.parse(t);return n.bWasm?m._wasmInstance.updateRuntimeSettings(e).then(function(){return m._wasmInstance.getRuntimeSettings()}):(n._runtimeSettings=e,n._initSettingsContent=null,n._innerServiceCmd(n._runtimeSettings,null).then(function(e){e=m._handleRetJsonString(e);return n._runtimeSettings=e.settings,n._runtimeSettings||(n._runtimeSettings=D.parse(m._defaultRuntimeSettingsStr)),e.settings}))},e.prototype.resetRuntimeSettings=function(){var t=this;return t.bWasm?m._wasmInstance.resetRuntimeSettings().then(function(){return m._wasmInstance.getRuntimeSettings()}):(t._runtimeSettings=D.parse(m._defaultRuntimeSettingsStr),t._initSettingsContent=null,t._innerServiceCmd(t._runtimeSettings,null).then(function(e){e=m._handleRetJsonString(e);return t._runtimeSettings=e.settings,t._runtimeSettings||(t._runtimeSettings=D.parse(m._defaultRuntimeSettingsStr)),e.settings}))},e.prototype.outputSettingsToString=function(e){if(!e)return m._defaultTemplateStr;for(var t=0;t<this._tplContentArr.length;++t)if(e==this._tplContentArr[t].ImageParameter.Name)return D.stringify(this._tplContentArr[t])},e.prototype.initRuntimeSettingsWithString=function(e){var t=this;if(D.isString(e))return t.bWasm?m._wasmInstance.initRuntimeSettingsWithString(e).then(function(){return m._wasmInstance.getRuntimeSettings()}):(t._runtimeSettings=null,t._initSettingsContent=D.parse(e),t._innerServiceCmd(null,t._initSettingsContent).then(function(e){e=m._handleRetJsonString(e);return t._runtimeSettings=e.settings,t._runtimeSettings||(t._runtimeSettings=D.parse(m._defaultRuntimeSettingsStr)),e.settings}));throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.")},e}(),m._dbr=!1,m._initH5=function(n,o){return new Promise(function(e,t){m._urlRoot=Dynamsoft.dcp._getPreUrl(Dynamsoft.dcp.detect.curPortIndex)+"dcp/dbr_"+m.Version.replace(/\./g,"")+"/";var n=5,o={method:"POST",url:m._urlRoot+"VersionInfo?t="+R.getRandom(),data:'{"method":"VersionInfo"}',onSuccess:function(){e()},onError:function(){if(--n<=0)return t("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.");setTimeout(function(){R.ajax(o)},300)},dataType:"json",async:!0,timeout:800};R.ajax(o)}).then(function(){return m._dbr=new m.Class,m._dbr._innerServiceCmd(null,null)}).then(function(e){try{var t=m._handleRetJsonString(e);m._dbr._runtimeSettings=t.settings,m._defaultRuntimeSettingsStr=R.stringify(t.settings),m._defaultTemplateStr=R.stringify(t.outputSettings),n(m._dbr)}catch(e){o(Error("Init template & runtimeSettings failed: "+e.message)||e)}},function(e){o(e)})},m.dbrInitPromiseFun=function(a,s){function d(){Dynamsoft.DBR&&Dynamsoft.DBR.BarcodeReader&&Dynamsoft.DBR.BarcodeReader.createInstance&&Dynamsoft.DBR.BarcodeReader.createInstance().then(function(e){return Dynamsoft.DBR.EnumErrorCode.DMERR_FAILED_TO_REACH_LTS==Dynamsoft.DBR.BarcodeReader.lastErrorCode&&(Dynamsoft.DWT.licenseException.code=Dynamsoft.DBR.BarcodeReader.lastErrorCode,Dynamsoft.DWT.licenseException.message=Dynamsoft.DBR.BarcodeReader.lastErrorString),Dynamsoft.DBR.BarcodeReader._bNeverShowDialog=!0,Dynamsoft.DWT.dbrCanvasMaxWH&&(e._canvasMaxWH=Dynamsoft.DWT.dbrCanvasMaxWH),(c._wasmInstance=e).getRuntimeSettings()}).then(function(e){c._dbr._runtimeSettings=e,c._defaultRuntimeSettingsStr=R.stringify(e),a(c._dbr)},s)}var e,_,t,n,c=Dynamsoft.BarcodeReaderAddon;c._dbr?c._dbr.bWasm&&!c._wasmInstance?d():a(c._dbr):(e=Dynamsoft.Lib.timestamp,n=Dynamsoft.DWT.ResourcesPath,_=!Dynamsoft.navInfo.bWin||R.product.bHTML5Edition&&(!Dynamsoft.DWT.UseLocalService||R.env.bMobile||Dynamsoft.DWT.UseBarcodeAddonWasm),t=function(){var e;if(_)return Dynamsoft.DBR&&Dynamsoft.DBR.BarcodeReader||Dynamsoft.BarcodeReader||window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader?(Dynamsoft.DBR||(Dynamsoft.BarcodeReader?Dynamsoft.DBR={BarcodeReader:Dynamsoft.BarcodeReader}:window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader&&(Dynamsoft.DBR={BarcodeReader:window.DSBarcodeReader.BarcodeReader})),Dynamsoft.DBR.BarcodeReader.engineResourcePath=Dynamsoft.DWT.ResourcesPath+"/addon/dbrjs/",R.isString(Dynamsoft.DWT.sessionPassword)&&(Dynamsoft.DBR.BarcodeReader.sessionPassword=Dynamsoft.DWT.sessionPassword),R.isArray(Dynamsoft.DWT.licenseServer)&&(Dynamsoft.DBR.BarcodeReader.licenseServer=Dynamsoft.DWT.licenseServer),R.isString(Dynamsoft.DWT.handshakeCode)?Dynamsoft.DBR.BarcodeReader.handshakeCode=Dynamsoft.DWT.handshakeCode:R.isString(Dynamsoft.DWT.organizationID)?Dynamsoft.DBR.BarcodeReader.organizationID=Dynamsoft.DWT.organizationID:R.isString(Dynamsoft.DWT.ProductKey)&&(e=Dynamsoft.DWT.ProductKey,""!=Dynamsoft.DWT.ProductKey&&"f"!=(t=Dynamsoft.DWT.ProductKey.charAt(0))&&"t"!=t&&(n=e,e=void 0),Dynamsoft.DBR.BarcodeReader.organizationID=n,Dynamsoft.DBR.BarcodeReader.productKeys=e),R.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CompilingWasm),Dynamsoft.DBR.BarcodeReader._bUseFullFeature=!0,Dynamsoft.DBR.BarcodeReader._bNeverShowDialog=!0,c._dbr=new c.Class,c._dbr.bWasm=!0,void d()):void 0;if(R.product.bHTML5Edition)c._initH5(a,s);else{var t=Dynamsoft.navInfoSync,n={method:"ReadBarcode",parameter:[Dynamsoft.DWT.ProductKey,4002,"",""]};if(!t.bIE)return s(Error("The DBR init error."));try{c._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var o,r=c._activeXInstance.Process(R.stringify(n),location.protocol+"//"+location.host),i=R.parse(r);if(!i)return s(Error("The DBR init error."));if(!("settings"in i))return o=i.description||"The DBR init error.",s(Error(o));c._dbr=new c.Class,c._dbr._runtimeSettings=i.settings,c._defaultRuntimeSettingsStr=R.stringify(i.settings),"outputSettings"in i&&(c._defaultTemplateStr=R.stringify(i.outputSettings)),a(c._dbr)}catch(e){return s(Error("The DBR .dll is missing or not accessible: "+(e.message||e)))}}},!_||R.detect.dbrwasmScriptLoaded?t():function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}}()?(n=R.getScript([n,"/addon/dbrjs/dbr.js",e].join(""),!0,function(e){R.detect.dbrwasmScriptLoaded=!0,t()}),R.isString(Dynamsoft.DWT.handshakeCode)?n.setAttribute("data-productKeys",Dynamsoft.DWT.handshakeCode):R.isString(Dynamsoft.DWT.organizationID)?n.setAttribute("data-organizationID",Dynamsoft.DWT.organizationID):R.isString(Dynamsoft.DWT.ProductKey)&&n.setAttribute("data-productKeys",Dynamsoft.DWT.ProductKey)):s(Error(Dynamsoft.MSG.Err_BrowserNotSupportWasm)))};R.DynamicLoadAddonFuns&&R.DynamicLoadAddonFuns.push(function(a){var e;t=Dynamsoft.dcp.b64bit?"dbrx64_"+Dynamsoft.BarcodeReaderAddon.Version+".dll":"dbr_"+Dynamsoft.BarcodeReaderAddon.Version+".dll",R.product.bHTML5Edition&&!a._isMobileMode()&&a._innerSend("GetAddOnVersion",R.html5.Funs.makeParams("barcodereader",t),!0,!1,!1),e={BarcodeReader:{decode:function(t){return R.License.checkProductKey(a,{Core:!0})?!R.isNumber(t)||t<0||t>=a.HowManyImagesInBuffer?(R.Errors.IndexOutOfRange(a),Promise.reject(m.BarcodeReaderException(a._errorCode,a._errorString))):new Promise(function(e){m._decoding?m._decodeQueue.push({method:e,args:[t]}):(m._decoding=!0,e(t))}).then(function(e){var i;if(R.product.bHTML5Edition){if(-1==(i=a._ImgManager.convertClientIndexToServerId(e)))throw R.Errors.IndexOutOfRange(a),setTimeout(m._decodeNext,0),m.BarcodeReaderException(a._errorCode,a._errorString)}else i=e;return new Promise(function(o,r){m.dbrInitPromiseFun(function(t){var n,e;if(!t.bWasm)return R.product.bHTML5Edition?t.bWasm?void 0:(n=a._ImgManager.convertServerIdToClientIndex(i),e=a.GetImagePartURL(n,-1,-1),t._innerDecode(4e3,e,"",a.clientId).then(function(e){e.imageid=a.IndexToImageID(n),setTimeout(m._decodeNext,0),o(e),R.License.isLTS()&&Dynamsoft.DWT.lcvrf(a)},function(e){setTimeout(m._decodeNext,0),r(e)})):(n=i,e=a.GetImagePartURL(n,-1,-1),t._innerDecode(4001,e,"").then(function(e){e.imageid=a.IndexToImageID(n),setTimeout(m._decodeNext,0),o(e)},function(e){setTimeout(m._decodeNext,0),r(e)}));e=(e=t.getRuntimeSettings()).then(function(e){if(0==e.expectedBarcodesCount)return e.expectedBarcodesCount=512,t.updateRuntimeSettings(e)}),(e=(e=a._isMobileMode()?(e=e.then(function(){var e=a._ImgManager.convertServerIdToClientIndex(i);return a._ImgManager.getWebViewer().GetImageData(a._ImgManager.getUidByIndex(e))})).then(function(e){return e.oriData||e.originalData}):e.then(function(){var e=a._ImgManager.convertServerIdToClientIndex(i);return a.GetImageURL(e,-1,-1)})).then(function(e){return e instanceof Blob||e instanceof ArrayBuffer?m._wasmInstance.decode(e):R.fetch(e,{mode:"cors",dataType:"blob"}).then(function(e){return m._wasmInstance.decode(e)})})).then(function(e){e.imageid=a.objImageIndexManager.convertServerIdToGuid(i),setTimeout(m._decodeNext,0),o(e)},function(e){var t="decode failed.";e&&(t=[t," ",e.errorString," (",e.httpCode,")"].join("")),setTimeout(m._decodeNext,0),r(Error(t))})},function(e){setTimeout(m._decodeNext,0),r(e)})})}):Promise.reject(m.BarcodeReaderException(a._errorCode,a._errorString))},resetRuntimeSettings:function(){return R.License.checkProductKey(a,{Core:!0})?new Promise(m.dbrInitPromiseFun).then(function(e){return e.resetRuntimeSettings()}):Promise.reject(m.BarcodeReaderException(a._errorCode,a._errorString))},getRuntimeSettings:function(e){return R.License.checkProductKey(a,{Core:!0})?!R.isString(e)||"speed"!=e&&"balance"!=e&&"coverage"!=e&&"default"!=e?new Promise(m.dbrInitPromiseFun).then(function(e){return e.getRuntimeSettings()}):this.updateRuntimeSettings(e):Promise.reject(m.BarcodeReaderException(a._errorCode,a._errorString))},updateRuntimeSettings:function(t){return R.License.checkProductKey(a,{Core:!0})?new Promise(m.dbrInitPromiseFun).then(function(e){return e.updateRuntimeSettings(t)}):Promise.reject(m.BarcodeReaderException(a._errorCode,a._errorString))},initRuntimeSettingsWithString:function(t){return R.License.checkProductKey(a,{Core:!0})?new Promise(m.dbrInitPromiseFun).then(function(e){return e.initRuntimeSettingsWithString(t)}):Promise.reject(m.BarcodeReaderException(a._errorCode,a._errorString))}}},R.product.bHTML5Edition?(a.__addon=a.__addon||{},R.mix(a.__addon,e)):(a.Addon=a.Addon||{},R.mix(a.Addon,e))}),Dynamsoft.unloadQueue.push(function(){m._wasmInstance&&(m._wasmInstance.destroy(),m._wasmInstance=!1)})}); 
/*! 20220624191759
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: PDF
* Version: 17.3
* 
*/
var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{},Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[],Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(e){Dynamsoft.aryAddonReadyFun.push(e)},function(){for(var e=[Dynamsoft.DWT],n=0;n<1;n++){var o=e[n];o.EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3,CM_RENDERALLWITHANNOTATION:4},o.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7}}}(),Dynamsoft.AddonReady(function(t,e){var n;!t.product.bHTML5Edition||t.DynamicLoadAddonFuns&&t.DynamicLoadAddonFuns.push(function(i){var e,d=t.html5.Funs;n=t.env.bMac?Dynamsoft.dcp.b64bit?"libDynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dylib":t.env.bLinux?"libDynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".so":Dynamsoft.dcp.b64bit?"DynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dll":"DynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dll",i._isMobileMode()||i._innerSend("GetAddOnVersion",d.makeParams("pdf",n),!0,!1,!1),e={PDF:{IsModuleInstalled:function(){var e=i;return e._resetErr(),e._isMobileMode()?!!Dynamsoft.pdf&&Dynamsoft.pdf.IsModuleInstalled():""!=e._innerFun("GetAddOnVersion",d.makeParams("pdf",n))},IsModuleInstalledAsync:function(){var e=i;return e._resetErr(),e._isMobileMode()?Dynamsoft.pdf?t.Promise.resolve(Dynamsoft.pdf.IsModuleInstalled()):t.Promise.resolve(!1):e._innerFunV2("GetAddOnVersion",d.makeParams("pdf",n)).then(function(e){return""!=e})},ConvertToImage:function(e,n,o,r){var e=d.replaceLocalFilename(e),t="ConvertPDFToImage",s=i;return s._resetErr(),s._isMobileMode()||(d.showMask(t),s._innerSend(t,d.makeParams(e,n),!0,function(e){return d.hideMask(t),o&&o(),!0},function(e){return d.hideMask(t),r&&r(),!1})),!0},SetPassword:function(e){var n=i;return n._resetErr(),n._isMobileMode()?(n._pdfPassword=e,!0):n._innerFun("SetPDFPassword",d.makeParams(e))},SetConvertMode:function(e){return i._setConvertMode(e)},SetConvertModeAsync:function(e){return i._setConvertModeAsync(e)},GetConvertMode:function(){var e=i;return e._resetErr(),e._pdfConvertMode},SetResolution:function(e){var n=i;return n._resetErr(),n._isMobileMode()?(n._pdfResolution=+e,!0):i._innerFun("SetPDFResolution",d.makeParams(e))},SetResolutionAsync:function(e){var n=i;return n._resetErr(),n._isMobileMode()?(n._pdfResolution=+e,t.Promise.resolve(!0)):i._innerFunV2("SetPDFResolution",d.makeParams(e))},IsTextBasedPDF:function(e,n,o){var r=i;if(r._resetErr(),r._isMobileMode())return r._mobileNotSupport("IsTextBasedPDF",o);e=d.replaceLocalFilename(e),e=i._innerFun("IsTextBasedPDF",d.makeParams(e));return 0==r.ErrorCode?t.isFunction(n)&&n(e):t.isFunction(o)&&o(r.ErrorCode,r.ErrorString),e},Write:{Setup:function(e){var e=(e=e)||{version:15},n=(2<t.stringify(e).length&&(t.isNumber(e.version)?1<=e.version&&e.version<2&&(e.version=parseInt(10*e.version)):e.version=15),t.isNumber(e.compression)&&e.compression==Dynamsoft.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(e.compression=Dynamsoft.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),i);if(n._resetErr(),n._isMobileMode())return n._pdfWriteSetting=e,!0;e=t.stringify(e),e=t.replaceAll(e,'"','\\"');return n._innerFun("SetPDFSettings",['["',e,'"]'].join(""))}}}},i.__addon=i.__addon||{},t.mix(i.__addon,e)})}),Dynamsoft.AddonReady(function(i,e){!i.product.bActiveXEdition||i.DynamicLoadAddonFuns&&i.DynamicLoadAddonFuns.push(function(t){var e,s,n;if(!t.getSWebTwain()||!t.getSWebTwain().Addon)return!1;Dynamsoft.navInfo.bWin&&(n=!Dynamsoft.navInfo.bOSx64||Dynamsoft.navInfo.bWOW64?"DynamicPdfCore_"+Dynamsoft.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+Dynamsoft.DWT.PdfVersion+".dll"),s=t.getSWebTwain(),e={PDF:{IsModuleInstalled:function(){var e=s.GetAddOnVersion("pdf",n);return i.setErrorString(t),""!=e},IsModuleInstalledAsync:function(){var e=s.GetAddOnVersion("pdf",n);return i.setErrorString(t),i.Promise.resolve(""!=e)},ConvertToImage:function(e,n,o,r){e=s.ConvertPDFToImage(e,n);return i.wrapperRet(t,e,o,r)},SetPassword:function(e){e=s.SetPDFPassword(e);return i.wrapperRet(t,e)},SetConvertMode:function(e){return t._setConvertMode(e)},SetConvertModeAsync:function(e){return Promise.resolve(t._setConvertMode(e))},GetConvertMode:function(){return t._resetErr(),t._pdfConvertMode},SetResolution:function(e){e=s.SetPDFResolution(e);return i.wrapperRet(t,e)},SetResolutionAsync:function(e){e=s.SetPDFResolution(e);return i.Promise.resolve(i.wrapperRet(t,e))},IsTextBasedPDF:function(e){e=s.IsTextBasedPDF(e);return i.wrapperRet(t,e)}}},t.Addon=t.Addon||{},i.mix(t.Addon,e)})}); 
/*! 20220215
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 17.2.1
* 
* Module: addon/ocr
* final js: build\addon\dynamsoft.webtwain.addon.OCR.js
*/
;var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.DWT.OCRVerInName="10.0.0.0618";(function(c){var d=[Dynamsoft.DWT],b=0;for(;b<1;b++){var a=d[b];a.EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"};a.EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10};a.EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4};a.EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1}}})(typeof window!=="undefined"?window:this);Dynamsoft.DWT.OCRLanguageData_eng="4113088";Dynamsoft.DWT.OCRLanguageData_ara="1432056";Dynamsoft.DWT.OCRLanguageData_chi_sim="2469156";Dynamsoft.DWT.OCRLanguageData_chi_tra="2366642";Dynamsoft.DWT.OCRLanguageData_hin="1122751";Dynamsoft.DWT.OCRLanguageData_urd="1398718";Dynamsoft.DWT.OCRLanguageData_spa="2294433";Dynamsoft.DWT.OCRLanguageData_fra="1130365";Dynamsoft.DWT.OCRLanguageData_msa="1747801";Dynamsoft.DWT.OCRLanguageData_ind="1122661";Dynamsoft.DWT.OCRLanguageData_rus="3861738";Dynamsoft.DWT.OCRLanguageData_ben="855841";Dynamsoft.DWT.OCRLanguageData_por="1982756";Dynamsoft.DWT.OCRLanguageData_pan="497721";Dynamsoft.DWT.OCRLanguageData_deu="1525436";Dynamsoft.DWT.OCRLanguageData_jpn="2471260";Dynamsoft.DWT.OCRLanguageData_fas="431500";Dynamsoft.DWT.OCRLanguageData_swa="2167651";Dynamsoft.DWT.OCRLanguageData_jav="2982741";Dynamsoft.DWT.OCRLanguageData_tel="2769654";Dynamsoft.DWT.OCRLanguageData_tur="4550554";Dynamsoft.DWT.OCRLanguageData_kor="1677415";Dynamsoft.DWT.OCRLanguageData_mar="2118233";Dynamsoft.DWT.OCRLanguageData_tam="3237963";Dynamsoft.DWT.OCRLanguageData_vie="531275";Dynamsoft.DWT.OCRLanguageData_ita="2701314";Dynamsoft.DWT.OCRLanguageData_tha="1072600";Dynamsoft.DWT.OCRLanguageData={};Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_ENG]=Dynamsoft.DWT.OCRLanguageData_eng;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_ARA]=Dynamsoft.DWT.OCRLanguageData_ara;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_CHI_TRA]=Dynamsoft.DWT.OCRLanguageData_chi_tra;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_CHI_SIM]=Dynamsoft.DWT.OCRLanguageData_chi_sim;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_HIN]=Dynamsoft.DWT.OCRLanguageData_hin;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_URD]=Dynamsoft.DWT.OCRLanguageData_urd;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_SPA]=Dynamsoft.DWT.OCRLanguageData_spa;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_FRA]=Dynamsoft.DWT.OCRLanguageData_fra;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_MSA]=Dynamsoft.DWT.OCRLanguageData_msa;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_IND]=Dynamsoft.DWT.OCRLanguageData_ind;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_RUS]=Dynamsoft.DWT.OCRLanguageData_rus;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_BEN]=Dynamsoft.DWT.OCRLanguageData_ben;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_POR]=Dynamsoft.DWT.OCRLanguageData_por;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_PAN]=Dynamsoft.DWT.OCRLanguageData_pan;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_DEU]=Dynamsoft.DWT.OCRLanguageData_deu;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_JPN]=Dynamsoft.DWT.OCRLanguageData_jpn;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_FAS]=Dynamsoft.DWT.OCRLanguageData_fas;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_SWA]=Dynamsoft.DWT.OCRLanguageData_swa;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_JAV]=Dynamsoft.DWT.OCRLanguageData_jav;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_TEL]=Dynamsoft.DWT.OCRLanguageData_tel;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_TUR]=Dynamsoft.DWT.OCRLanguageData_tur;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_KOR]=Dynamsoft.DWT.OCRLanguageData_kor;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_MAR]=Dynamsoft.DWT.OCRLanguageData_mar;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_TAM]=Dynamsoft.DWT.OCRLanguageData_tam;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_VIE]=Dynamsoft.DWT.OCRLanguageData_vie;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_ITA]=Dynamsoft.DWT.OCRLanguageData_ita;Dynamsoft.DWT.OCRLanguageData[Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_THA]=Dynamsoft.DWT.OCRLanguageData_tha;(function(a){function b(){var c=this;c._text="";c._fontName="";c._fontSize="";c._left=0;c._top=0;c._right=0;c._bottom=0}b.prototype.GetText=function(){var c=this;return c._text};b.prototype.GetFontName=function(){var c=this;return c._fontName};b.prototype.GetFontSize=function(){var c=this;return c._fontSize};b.prototype.GetWordRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};a.NewWordBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._count=0;c._left=0;c._top=0;c._right=0;c._bottom=0;c._wordlist=[]}b.prototype.GetWordCount=function(){var c=this;return c._count};b.prototype.GetLineRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.prototype.GetWordContent=function(d){var f=this,c=f._wordlist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetWordContent");return""}var e=Dynamsoft.Lib.NewWordBasicResult();e._text=f._wordlist[d].text;e._fontName=f._wordlist[d].fontname;e._fontSize=f._wordlist[d].fontsize;e._left=f._wordlist[d].rect[0];e._top=f._wordlist[d].rect[1];e._right=f._wordlist[d].rect[2];e._bottom=f._wordlist[d].rect[3];return e};a.NewLineBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._linelist=[]}a.prototype.GetLineCount=function(){var c=this;return c._count};a.prototype.GetLineContent=function(e){var f=this,d=f._linelist.length;if(f._errorCode<0){return""}if(e==null||e>=d||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLineContent");return""}var c=Dynamsoft.Lib.NewLineBasicResult();c._count=f._linelist[e].words.length;c._left=f._linelist[e].rect[0];c._top=f._linelist[e].rect[1];c._right=f._linelist[e].rect[2];c._bottom=f._linelist[e].rect[3];c._wordlist=f._linelist[e].words;return c};b.NewPageBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._pagelist=[]}a.prototype.GetPageCount=function(){var c=this;return c._count};a.prototype.GetPageContent=function(d){var f=this,c=f._pagelist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageBasicResult();e._count=f._pagelist[d].lines.length;e._linelist=f._pagelist[d].lines;return e};b.NewPageSetBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(d){var c=this;c._errorCode=0;c._errorString="";c._resultlist=[];c._stwain=d}a.prototype.GetErrorCode=function(){var c=this;return c._errorCode};a.prototype.GetErrorString=function(){var c=this;return c._errorString};a.prototype.GetFormat=function(){var c=this;return c._resultlist[0].format};a.prototype.GetInput=function(){var e=this,d=e._resultlist[0].input;if(d){var c=Number(d);if(!isNaN(c)){return e._stwain._ImgManager.convertServerIdToClientIndex(c)}}return d};a.prototype.GetPageSetCount=function(){var c=this;return c._resultlist[0].pagesets.length};a.prototype.GetPageSetContent=function(e){var f=this,c=f._resultlist[0].pagesets.length;if(f._errorCode<0){return""}if(e==null||e>=c||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageSetContent");return""}var d=Dynamsoft.Lib.NewPageSetBasicResult();d._count=f._resultlist[0].pagesets[e].pages.length;d._pagelist=f._resultlist[0].pagesets[e].pages;return d};a.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};a.prototype.Save=function(c){var e=this,d=b.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",b.html5.Funs.makeParams(d))};b.NewOCRBasicResult=function(c){return new a(c)}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c.UnicodeFontName="";c.UseDetectedFont=true;c.MinFontSizeforMoreAccurateResult=0;c.OCRLanguage=Dynamsoft.DWT.EnumDWT_OCRLanguage.OCRL_ENG;c.PageSetMode=Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO;c.OutputFormat=Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}a.prototype.GetUnicodeFontName=function(){var c=this;return c.UnicodeFontName};a.prototype.SetUnicodeFontName=function(c){var e=this,d=c;if(!b.isString(d)){d=""}e.UnicodeFontName=d;return true};a.prototype.GetUseDetectedFont=function(){var d=this,c=d.UseDetectedFont;return c?true:false};a.prototype.SetUseDetectedFont=function(c){var d=this;d.UseDetectedFont=c?true:false;return true};a.prototype.GetMinFontSizeforMoreAccurateResult=function(){var c=this;return c.MinFontSizeforMoreAccurateResult};a.prototype.SetMinFontSizeforMoreAccurateResult=function(c){var e=this,d=c*1;if(d<0){d=0}e.MinFontSizeforMoreAccurateResult=d;return true};a.prototype.GetOCRLanguage=function(){var c=this;return c.OCRLanguage};a.prototype.SetOCRLanguage=function(c){var e=this,d=c;if(!b.isString(d)){d=""}e.OCRLanguage=d;return true};a.prototype.GetPageSetMode=function(){var c=this;return c.PageSetMode};a.prototype.SetPageSetMode=function(c){var e=this,d=c*1;if(d<0||d>Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR){d=Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO}e.PageSetMode=d;return true};a.prototype.GetOutputFormat=function(){var c=this;return c.OutputFormat};a.prototype.SetOutputFormat=function(c){var e=this,d=c*1;if(d<0||d>Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX){d=Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}e.OutputFormat=d;return true};b.NewOptions=function(){return new a()}})(Dynamsoft.Lib);Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a;function e(g){var h=c.html5.Funs;if(c.env.bMac){a="DynamicOCR_"+Dynamsoft.DWT.OCRVerInName+".dylib"}else{if(c.env.bLinux){a="DynamicOCR_"+Dynamsoft.DWT.OCRVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){a="DynamicOCRx64_"+Dynamsoft.DWT.OCRVerInName+".dll"}else{a="DynamicOCR_"+Dynamsoft.DWT.OCRVerInName+".dll"}}}if(!g._isMobileMode()){g._innerSend("GetAddOnVersion",h.makeParams("ocr",a),true,false,false)}g.__innerOCRBasicReadFunction=function(n,s,o,t,l,u,v,i,j,r,k){var q=this;if(!c.isFunction(r)){return q.__innerOCRSyncReadFunction(n,j)}else{return q.__innerOCRBasicAsyncReadFunction(n,s,o,t,l,u,v,i,j,r,k)}};g.__innerGetOCRBasicResultAsyncFunction=function(j){var i=Dynamsoft.Lib.NewOCRBasicResult(this);if(j){i._errorCode=j.exception;i._errorString=j.description;i._resultlist=j.result}return i};g.__innerOCRBasicAsyncReadFunction=function(n,t,o,u,l,v,x,i,j,s,k){var r=this;var q=function(p){if(p.exception==0){if(c.isFunction(s)){if(t!=-1){var m=r.objImageIndexManager.convertServerIdToGuid(t);if(u==1){s(m,l,v,x,i,r.__innerGetOCRBasicResultAsyncFunction(p))}else{s(m,r.__innerGetOCRBasicResultAsyncFunction(p))}}else{if(o!=""){s(o,r.__innerGetOCRBasicResultAsyncFunction(p))}else{s(r.__innerGetOCRBasicResultAsyncFunction(p))}}}if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(g)}}else{if(c.isFunction(k)){k(p.exception,p.description)}}h.hideMask(n)},w=function(m){h.hideMask(n)};h.showMask(n);r._innerSend(n,j,true,q,w);return true};g.__innerOCRSyncReadFunction=function(j,l){var n=this,k,i;k=n._innerFunRaw(j,l,false,false);i=c.NewOCRBasicResult();i._errorCode=n._errorCode;i._errorString=n._errorString;if(k&&c.isArray(k)){i._resultlist=k;i._Count=k.length;if(c.License.isLTS()){Dynamsoft.DWT.lcvrf(g)}}return i};g.__IsOCRBasicModuleInstalled=function(){var k=g;var i=k._innerFun("GetAddOnVersion",h.makeParams("ocr",a));var j=i.split("|");if(j[0]!=""){return true}else{return false}};g.__innerBasicDownload=function(q,t,k,v,l){var o=g,s;c.cancelFrome=2;q=q.toString();var n=function(){if(c.isFunction(v)){v()}return true},w=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false};if(!c.License.checkProductKey(o,{Core:true})){return w()}if(!c.License.checkProductKey(o,{OCR:true},true)){return w()}if(t!=Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){o._innerFun("SetOCRLanguage",h.makeParams(k))}var i=o._innerFun("GetAddOnVersion",h.makeParams("ocr",a));var j=i.split("|");if(t==Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){if(j[0]!=""){n();return true}}else{var r=Dynamsoft.DWT.OCRLanguageData[k];if(r&&j[1]==r){n();return true}}if(!q||q==""){c.Errors.OCR_InvalidRemoteFilename(o);w();return false}if(h.isServerInvalid(o)){w();return false}s="get";c.showProgress(o,"Download",true);var u=function(x){var y=(x.total===0)?100:Math.round(x.loaded*100/x.total),z=[x.loaded," / ",x.total].join("");o._OnPercentDone([0,y,"","http"])},m=true;if(t==Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){o._OnPercentDone([0,-1,"Downloading OCR Module...","http"])}else{o._OnPercentDone([0,-1,"Downloading OCR Language Data...","http"])}if(!c.isFunction(v)){m=false}h.loadHttpBlob(o,s,q,m,function(p){o._OnPercentDone([0,-1,"Loading..."]);var x=100;if(t==Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE){x=101}o.__LoadImageFromBytes(p,x,"",m,n,w)},function(){c.closeProgress("Download");w()},u)}}var f=function(j){var k=[],h,g,i;if(j._ImgManager.count()<=0){return k}g=j._ImgManager.getCurrentImageIndex();h=j._ImgManager.convertClientIndexToServerId(g);i=j._ImgManager.getSelectedClientIndexArray();if(c.isArray(i)){c.each(i,function(l){var m=j._ImgManager.convertClientIndexToServerId(l);k.push(m)})}return k},d=function(i){var j=c.html5.Funs,g;var h=c.NewOptions();e(i);g={OCR:{SetUnicodeFontName:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetUnicodeFontName")}return h.SetUnicodeFontName(k)},GetUnicodeFontName:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetUnicodeFontName")}return h.GetUnicodeFontName()},SetIfUseDetectedFont:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont")}return h.SetUseDetectedFont(k)},GetIfUseDetectedFont:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont")}return h.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult")}return h.SetMinFontSizeforMoreAccurateResult(k)},GetMinFontSizeforMoreAccurateResult:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult")}return h.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetLanguage")}return h.SetOCRLanguage(k)},IsModuleInstalled:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.IsModuleInstalled")}return k.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(l){var m=i;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.OCR.SetPageSetMode")}var k=l*1;if(k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||k==Dynamsoft.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR){return h.SetPageSetMode(k)}Dynamsoft.Lib.Errors.OCR_InvalidPageSetMode(m);return false},SetOutputFormat:function(l){var m=i;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.OCR.SetOutputFormat")}var k=l*1;if(k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_TEXT||k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||k==Dynamsoft.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX){return h.SetOutputFormat(k)}Dynamsoft.Lib.Errors.OCR_InvalidOutputFormat(m);return false},Recognize:function(n,k,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.Recognize")}if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}var l=o._ImgManager.convertClientIndexToServerId(n);return o.__innerOCRBasicReadFunction("OCRRecognize",l,"",0,0,0,0,0,j.makeParams(0,l,"",0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),k,m)},RecognizeRect:function(s,l,p,r,k,q,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeRect")}if((!l&&l!=0)||(!p&&p!=0)||(!r&&r!=0)||(!k&&k!=0)){var t=Dynamsoft.Lib.NewOCRBasicResult(o);Dynamsoft.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(t,"RecognizeRect");m(t.GetErrorCode(),t.GetErrorString());return}if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}var n=o._ImgManager.convertClientIndexToServerId(s);return o.__innerOCRBasicReadFunction("OCRRecognize",n,"",1,l,p,r,k,j.makeParams(0,n,"",l,p,r,k,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),q,m)},RecognizeFile:function(l,k,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeFile")}var n=j.replaceLocalFilename(l);if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}return o.__innerOCRBasicReadFunction("OCRRecognize",-1,n,0,0,0,0,0,j.makeParams(1,-1,n,0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),k,m)},RecognizeSelectedImages:function(k,n){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeSelectedImages")}var l;if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(n)){n(o._errorCode,o._errorString)}return false}var m=f(o);l=o.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,j.makeParams(2,-1,"",0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),m.join(",")),k,n);return l},Download:function(m,k,l){var n=i;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.OCR.Download")}return n.__innerBasicDownload(m,Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll,h.GetOCRLanguage(),k,l)},DownloadLangData:function(m,k,l){var n=i;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.OCR.DownloadLangData")}return n.__innerBasicDownload(m,Dynamsoft.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,h.GetOCRLanguage(),k,l)}}};i.__addon=i.__addon||{};c.mix(i.__addon,g)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(d)}}); 
/*! 20220215
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 17.2.1
* 
* Module: addon/ocrpro
* final js: build\addon\dynamsoft.webtwain.addon.ocrpro.js
*/
;var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.ProOCRVerInName="1.2.0.0806";(function(b){function a(){var c=this;c._text="";c._left=0;c._top=0;c._right=0;c._bottom=0}a.prototype.GetText=function(){var c=this;return c._text};a.prototype.GetLetterRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.NewLetterResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._letterlist=[];c._zoneCount=0;c._zoneWords=[]}a.prototype.GetLettersCount=function(){var c=this;return c._count};a.prototype.GetZoneCount=function(){var c=this;return c._zoneCount};a.prototype.GetLetterContent=function(d){var f=this,c=f._count;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLetterContent");return""}var e=Dynamsoft.Lib.NewLetterResult();e._text=f._letterlist[d].letter;e._left=f._letterlist[d].boundary[0];e._top=f._letterlist[d].boundary[1];e._right=f._letterlist[d].boundary[2];e._bottom=f._letterlist[d].boundary[3];return e};a.prototype.GetZoneContent=function(d){var e=this,c=e._zoneCount;if(e._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(e,"GetZoneContent");return""}return e._zoneWords[d]};b.NewPageResult=function(){return new a()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._input=0;c._message="";c._page=-1}b.prototype.GetInput=function(){var c=this;return c._input};b.prototype.GetMessage=function(){var c=this;return c._message};b.prototype.GetPage=function(){var c=this;return c._page};a.NewErrorInfo=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._errorCode=0;d._errorString="";d._errorlist=[];d._request="";d._ocrTotalCount=0;d._alreadyOCRCount=0;d._resultlist=[];d._resultZoneDetail=[];d._stwain=c}b.prototype.GetErrorCode=function(){var c=this;return c._errorCode};b.prototype.GetErrorString=function(){var c=this;return c._errorString};b.prototype.GetInput=function(){var e=this;if(e._request&&e._request.input){var d=e._request.input;if(d){var c=Number(d);if(!isNaN(c)){return e._stwain._ImgManager.convertServerIdToClientIndex(c)}}return d}else{return""}};b.prototype.GetErrorDetailList=function(){var g=this,c=0;if(g._errorlist){c=g._errorlist.length}var e=[];for(var d=0;d<c;d++){var f=Dynamsoft.Lib.NewErrorInfo();f._input=g._errorlist[d].input;f._message=g._errorlist[d].message;f._page=g._errorlist[d].page;e.push(f)}return e};b.prototype.GetOCRTotalCount=function(){var c=this;if(c._ocrTotalCount){return c._ocrTotalCount}else{return 0}};b.prototype.GetAlreadyOCRCount=function(){var c=this;if(c._alreadyOCRCount){return c._alreadyOCRCount}else{return 0}};b.prototype.GetPageCount=function(){var c=this;if(c._resultlist&&c._resultlist.length){return c._resultlist.length}else{return 0}};b.prototype.GetPageContent=function(d){var f=this,c=0;if(f._resultlist){c=f._resultlist.length}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageResult();if(f._resultlist){e._count=f._resultlist[d].length;e._letterlist=f._resultlist[d]}else{e._count=0}if(f._resultZoneDetail){e._zoneCount=f._resultZoneDetail[d].length;e._zoneWords=f._resultZoneDetail[d]}else{e._zoneCount=0}return e};b.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};b.prototype.Save=function(c){var e=this,d=a.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",a.html5.Funs.makeParams(d))};a.NewOCRProResult=function(c){return new b(c)}})(Dynamsoft.Lib);(function(c){var d=[Dynamsoft.DWT],b=0;for(;b<1;b++){var a=d[b];a.EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"};a.EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"};a.EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"};a.EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"};a.EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1};a.EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4};a.EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2}}})(typeof window!=="undefined"?window:this);(function(a){function b(){var c=this;c.FindText="";c.FindTextFlags=Dynamsoft.DWT.EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD;c.FindTextAction=Dynamsoft.DWT.EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}a.NewRedaction=function(){return new b()}})(Dynamsoft.Lib);Dynamsoft.WebTwain={Addon:{OCRPro:{}}};(function(a){function b(){var c=this;c.RecognitionModule="";c.Languages="eng";c.OutputFormat="";c.PDFVersion="";c.PDFAVersion="";c.LicenseChecker="";c.Redaction=Dynamsoft.Lib.NewRedaction()}a.NewSettings=function(){return new b()}})(Dynamsoft.WebTwain.Addon.OCRPro);(function(){function a(f,e,c,b){var d=this;d.left=f;d.top=e;d.right=c;d.bottom=b}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRZone=function(e,d,c,b){return new a(e,d,c,b)}})();Dynamsoft.AddonReady(function(m,h){if(!m.product.bHTML5Edition){return}var n=1000,q=function(){return n++};function o(y){var z=m.html5.Funs;y.__innerGetOCRProResultAsyncFunction=function(B){var A=Dynamsoft.Lib.NewOCRProResult(this);if(B){A._errorCode=B.code;A._errorString=B.message;A._request=B.request;A._errorlist=B.errorList;A._ocrTotalCount=B.ocrTotalCount;A._alreadyOCRCount=B.alreadyOCRCount;A._resultlist=B.resultDetail;A._resultZoneDetail=B.resultZoneDetail}return A};y.__innerIsOCRTrial=function(A,B){var D=this,C=function(){var F=false;if(D.__licenseInfo.Detail){for(var E=0;E<D.__licenseInfo.Detail.length;E++){if(D.__licenseInfo.Detail[E].EnumLicenseType=="10"){if(D.__licenseInfo.Detail[E].Trial=="TRUE"){F=true}}}}return A(F)};if(D.__licenseInfo&&D.__licenseInfo.Detail){return C()}else{return D.GetLicenseInfo(C,B)}};y.__innerOCRReadFunction=function(D,I,E,H,A,B,G,C){var F=this;return F.__innerOCRAsyncReadFunction(D,I,E,H,A,B,G,C)};y.__innerOCRAsyncReadFunction=function(D,K,E,I,A,B,H,C){var G=this;var F=function(L){if(L.code==0){if(m.isFunction(H)){if(K!=-1){if(I==1){H(K,A,G.__innerGetOCRProResultAsyncFunction(L))}else{H(K,G.__innerGetOCRProResultAsyncFunction(L))}}else{if(E!=""){H(E,G.__innerGetOCRProResultAsyncFunction(L))}else{H(G.__innerGetOCRProResultAsyncFunction(L))}}}if(m.License.isLTS()){Dynamsoft.DWT.lcvrf(y)}}else{if(m.isFunction(C)){C(L.code,L.message,G.__innerGetOCRProResultAsyncFunction(L))}}z.hideMask(D)},J=function(L){z.hideMask(D)};z.showMask(D);G._innerSend(D,B,true,F,J);return true};y.__innerGetRequestJson=function(G,I,A,K,B){var F=y,C;var E="[{";E+='"id":"'+y.clientId+'",';E+='"method":"OCRProRecognize",';E+='"dllName":"'+B+'",';E+='"productkey":"'+Dynamsoft.DWT.ProductKey+'",';if(G==Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_File){E+='"inputType":"file",'}else{E+='"inputType":"index",'}E+='"input":[';for(C=0;C<I.length;C++){if(G==Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_File){E+='"'+I[C]+'"'}else{E+=I[C]}if(C+1<I.length){E+="|"}}E+="],";E+='"settings":{';E+='"recognitionMethod": "Page"';if(A){if(A.RecognitionModule&&A.RecognitionModule.length>0){E+=',"recognitionModule":"'+A.RecognitionModule+'"'}if(A.Languages&&A.Languages.length>0){E+=',"languages":"'+A.Languages+'"'}if(A.OutputFormat&&A.OutputFormat.length>0){E+=',"outputFormat":"'+A.OutputFormat+'"'}if(A.PDFVersion&&A.PDFVersion.length>0){E+=',"pdfVersion":"'+A.PDFVersion+'"'}if(A.PDFAVersion&&A.PDFAVersion.length>0){E+=',"pdfAVersion":"'+A.PDFAVersion+'"'}if(A.Redaction&&A.Redaction.FindText&&A.Redaction.FindText.length>0){var J=parseInt(A.Redaction.FindTextFlags),H=parseInt(A.Redaction.FindTextAction);if(!isNaN(J)&&!isNaN(H)){E+=',"redaction":{';var D=A.Redaction.FindText;D=D.replace(/\"/g,'\\"');E+='"findText":"'+D+'"';E+=',"findTextFlags":'+J;E+=',"findTextAction":'+H;E+="}"}}}E+="},";E+='"zones":[';for(C=0;C<K.length;C++){E+="["+K[C].left+","+K[C].top+","+K[C].right+","+K[C].bottom+"]";if(C+1<K.length){E+=","}}E+="],";E+='"outputFile":""';E+="}]";return E};y.__LoadImageFromBytesForDownloadInner=function(E,K,O,J,L,B,H,M,D){var I=y;var A,C,G;if(E>=J){A=B*J;G=K.slice(A,L)}else{A=E*B;C=(E+1)*B;G=K.slice(A,C)}var N=function(){if(Dynamsoft.Lib.isFunction(D)){D()}};var F=function(){if(E>=J){if(Dynamsoft.Lib.isFunction(M)){M()}return}E=E+1;I.__LoadImageFromBytesForDownloadInner(E,K,O,J,L,B,H,M,D)};I.__LoadImageFromBytes(G,O,"",H,F,N,A,L)};y.__LoadImageFromBytesForDownload=function(H,B,G,D,C,J){var F=y;var A=2*1000*1000;var I=H.size||H.length;var E=parseInt(I/A);var K=I%A;if(K==0){E=E-1}F.__LoadImageFromBytesForDownloadInner(0,H,B,E,I,A,D,C,J)}}var e=function(B){var C=[],z,y,A;if(B._ImgManager.count()<=0){return C}y=B._ImgManager.getCurrentImageIndex();z=B._ImgManager.convertClientIndexToServerId(y);A=B._ImgManager.getSelectedClientIndexArray();if(m.isArray(A)){m.each(A,function(D){var E=B._ImgManager.convertClientIndexToServerId(D);C.push(E)})}return C},v=function(C,A,z,B){var y=m.NewOCRProResult(C);y._errorCode=A;y._errorString=z;var D=m.NewErrorInfo();D.input=B;D.message=y._errorString;D.page=0;y._errorlist=[D];return y},g=function(A){var B=m.html5.Funs,z,y;if(m.env.bMac){y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".dylib"}else{if(m.env.bLinux){y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){y="DynamicOCRProx64_"+Dynamsoft.ProOCRVerInName+".dll"}else{y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".dll"}}}o(A);z={OCRPro:{Settings:false,Recognize:function(N,K,D){var J=[],H,O,L,I;var G=A;G._resetErr();if(G._isMobileMode()){return G._mobileNotSupport("Addon.OCRPro.Recognize")}H=parseInt(N);if(m.isNaN(H)||!m.isNumber(H)){O=v(A,-2201,"Invalid parameter type.",N);if(m.isFunction(D)){D(O._errorCode,O._errorString,O)}else{m.Errors.WebviewerError(A,O._errorString,O._errorCode)}return false}var F=A._ImgManager.convertClientIndexToServerId(H);if(F==-1){if(m.isFunction(D)){m.Errors.IndexOutOfRange(A);O=v(A,A._errorCode,A._errorString,N);D(O._errorCode,O._errorString,O)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(D)){O=v(A,A._errorCode,A._errorString,N);D(O._errorCode,O._errorString,O)}return false}J.push(F);var M=[],C=this.Settings;var E=A.__innerGetRequestJson(Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_Index,J,C,M,y);return A.__innerIsOCRTrial(function(P){if(P||m.License.isLTS()){return A.__innerOCRReadFunction("OCRProRecognize",N,"",0,M,E,K,D)}else{return w(C.LicenseChecker,A,"OCRProRecognize",N,"",0,M,E,K,D)}},D)},RecognizeRect:function(X,P,R,G){var N=[],K,M,F,L;var S=A;S._resetErr();if(S._isMobileMode()){return S._mobileNotSupport("Addon.OCRPro.RecognizeRect")}K=parseInt(X);if(m.isNaN(K)||!m.isNumber(K)){M=v(A,-2201,"Invalid parameter type.",X);if(m.isFunction(G)){G(M._errorCode,M._errorString,M)}else{m.Errors.WebviewerError(A,M._errorString,M._errorCode)}return false}var Q=A._ImgManager.convertClientIndexToServerId(K),T=A._ImgManager.GetImageWidth(K),J=A.GetImageHeight(K);if(Q==-1){if(m.isFunction(G)){m.Errors.IndexOutOfRange(A);M=v(A,A._errorCode,A._errorString,X);G(M._errorCode,M._errorString,M)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(G)){M=v(A,A._errorCode,A._errorString,X);G(M._errorCode,M._errorString,M)}return false}if(T>0&&J>0){var V,E,U,W,I,D;for(var O=0;O<P.length;O++){V=P[O];E=V.left;U=V.top;W=V.right;I=V.bottom;if(E<0){E=0}if(U<0){U=0}if(W<0){W=0}if(I<0){I=0}if(E>W){D=E;E=W;W=D}if(U>I){D=U;U=I;I=D}if(W>T){W=T}if(I>J){I=J}V.left=E;V.top=U;V.right=W;V.bottom=I}}N.push(Q);var C=this.Settings;var H=A.__innerGetRequestJson(Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_Index,N,C,P,y);return A.__innerIsOCRTrial(function(Y){if(Y||m.License.isLTS()){return A.__innerOCRReadFunction("OCRProRecognize",X,"",1,P,H,R,G)}else{return w(C.LicenseChecker,A,"OCRProRecognize",X,"",1,P,H,R,G)}},G)},RecognizeFile:function(D,M,G){var I=A;I._resetErr();if(I._isMobileMode()){return I._mobileNotSupport("Addon.OCRPro.RecognizeFile")}var P,N,K;if(D.length==0){if(m.isFunction(G)){P=Dynamsoft.Lib.NewOCRProResult(A);P._errorCode=-2201;P._errorString="File name cannot be empty.";K=[];N=Dynamsoft.Lib.NewErrorInfo();N.input=D;N.message=P._errorString;N.page=0;K.push(N);P._errorlist=K;G(P._errorCode,P._errorString,P)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(G)){P=Dynamsoft.Lib.NewOCRProResult(A);P._errorCode=A._errorCode;P._errorString=A._errorString;K=[];N=Dynamsoft.Lib.NewErrorInfo();N.input=D;N.message=P._errorString;N.page=0;K.push(N);P._errorlist=K;G(P._errorCode,P._errorString,P)}return false}var J=B.replaceLocalFilename(D);var C=[];if(J.indexOf("|")>0){C=J.split("|")}else{if(J.indexOf(";")>0){C=J.split(";")}else{if(J.indexOf(",")>0){C=J.split(",")}}}var L=[];if(C.length>0){for(var F=0;F<C.length;F++){L.push(C[F])}}else{L.push(J)}var O=[],E=this.Settings;var H=A.__innerGetRequestJson(Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_File,L,E,O,y);A.__innerIsOCRTrial(function(Q){if(Q||m.License.isLTS()){return A.__innerOCRReadFunction("OCRProRecognize",-1,D,0,O,H,M,G)}else{return w(E.LicenseChecker,A,"OCRProRecognize",-1,D,0,O,H,M,G)}},G)},RecognizeSelectedImages:function(J,D){var G,H,K;var F=A;F._resetErr();if(F._isMobileMode()){return F._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages")}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(D)){var M=Dynamsoft.Lib.NewOCRProResult(A);M._errorCode=A._errorCode;M._errorString=A._errorString;H=[];K=Dynamsoft.Lib.NewErrorInfo();K.input="";K.message=M._errorString;K.page=0;H.push(K);M._errorlist=H;D(M._errorCode,M._errorString,M)}return false}var L=[],C=this.Settings,I=e(A),E=A.__innerGetRequestJson(Dynamsoft.DWT.EnumDWT_OCRProType.OCRDT_Index,I,C,L,y);A.__innerIsOCRTrial(function(N){if(N||m.License.isLTS()){G=A.__innerOCRReadFunction("OCRProRecognize",-1,"",0,L,E,J,D)}else{G=w(C.LicenseChecker,A,"OCRProRecognize",-1,"",0,L,E,J,D)}},D);return G},IsModuleInstalled:function(){var D=A;D._resetErr();if(D._isMobileMode()){return D._mobileNotSupport("Addon.OCRPro.IsModuleInstalled")}var C=D._innerFun("GetAddOnVersion",B.makeParams("proocr",y));return(C!="")},Download:function(G,J,C){var F=A,H;F._resetErr();if(F._isMobileMode()){return F._mobileNotSupport("Addon.OCRPro.Download")}var E=function(){if(m.isFunction(J)){J()}return true},K=function(){if(m.isFunction(C)){C(F.ErrorCode,F.ErrorString)}return false};if(!m.License.checkProductKey(F,{Core:true})){return K()}if(!m.License.checkProductKey(F,{OCRPro:true},true)){return K()}if(this.IsModuleInstalled()){E();return true}if(!G||G==""||!m.isString(G)){m.Errors.OCR_InvalidRemoteFilename(F);K();return false}if(B.isServerInvalid(F)){K();return false}H="get";m.cancelFrome=2;m.showProgress(F,"Download",true);var I=function(L){var M=(L.total===0)?100:Math.round(L.loaded*100/L.total),N=[L.loaded," / ",L.total].join("");F._OnPercentDone([0,M,"","http"])},D=true;F._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]);if(!m.isFunction(J)){D=false}return B.loadHttpBlob(F,H,G,D,function(L){F._OnPercentDone([0,-1,"Loading..."]);var M=102;F.__LoadImageFromBytesForDownload(L,M,"",D,E,K)},function(){m.closeProgress("Download");K()},I)}}};A.__addon=A.__addon||{};m.mix(A.__addon,z)};if(m.DynamicLoadAddonFuns){m.DynamicLoadAddonFuns.push(g)}function p(E,H,z,I,B,G,y,C,F,A){var D=this;D.STWAIN=H;D.AjaxFunctionUrl=E;D.FunctionName=z;D.ImageIndex=I;D.FileNames=B;D.Type=G;D.AryZone=y;D.JsonString=C;D.OnSuccess=F;D.OnFailure=A}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRReadPara=function(D,G,z,H,B,F,y,C,E,A){return new p(D,G,z,H,B,F,y,C,E,A)};function s(C,B){var D="";var E=C.responseText;if(E.length==0){var A=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError();Dynamsoft.Lib.Errors.OCR_LicenseCheckerError(A,B.AjaxFunctionUrl);E=A.responseText}D=f(E);var z=D.split(";");if(z.length==1){B.OnFailure(-1,E,Dynamsoft.Lib.NewOCRProResult())}else{if(z[0]=="true"){var y=function(G,F,H){if(Dynamsoft.Lib.isUndefined(H)){if(Dynamsoft.Lib.isUndefined(F)){B.OnSuccess(G);x(B.AjaxFunctionUrl,G.GetPageCount())}else{B.OnSuccess(G,F);x(B.AjaxFunctionUrl,F.GetPageCount())}}else{B.OnSuccess(G,F,H);x(B.AjaxFunctionUrl,H.GetPageCount())}};B.STWAIN.__innerOCRReadFunction(B.FunctionName,B.ImageIndex,B.FileNames,B.Type,B.AryZone,B.JsonString,y,B.OnFailure)}else{B.OnFailure(z[1],z[2],Dynamsoft.Lib.NewOCRProResult())}}}function w(G,J,z,K,D,I,y,E,H,A){var B=G;var F="DTW_AjaxMethod=CheckLicense&Productkey="+j(Dynamsoft.DWT.ProductKey);var C=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRReadPara(G,J,z,K,D,I,y,E,H,A);return d(B,F,s,C)}function x(A,B){var z=A;var y="DTW_AjaxMethod=WriteOCRCount&OCRCount="+j(B+"");d(z,y,b,null)}function b(z,y){}function a(){var y=this;y.responseText="";y.errorString=""}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError=function(){return new a()};Dynamsoft.Lib.mix(Dynamsoft.Lib.Errors,{OCR_LicenseCheckerEmpty:function(z){var A=-2601;var y="LicenseChecker cannot be empty.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_LicenseCheckerNotConnect:function(z){var A=-2602;var y="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_AccessDenied:function(z){var A=-2603;var y="Access denied.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_LicenseCheckerError:function(z,B){var A=-2604;var y="Error occured in '"+B+"'.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_HTTPError:function(z,A){var B=-2605;var y="HTTP Error "+A+".";z.errorString=y;z.responseText=j("false;"+B+";"+y+";")},OCR_LicenseCheckerUnauthorized:function(z,B){var A=-2606;var y="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+B+"'.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},__last:false});function i(){var y=null,A=window;try{y=new A.ActiveXObject("Msxml2.XMLHTTP")}catch(z){try{y=new A.ActiveXObject("Microsoft.XMLHTTP")}catch(z){y=new XMLHttpRequest()}}return y}function d(z,y,D,C){var A=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError();if(z==""){Dynamsoft.Lib.Errors.OCR_LicenseCheckerEmpty(A);alert(A.errorString);D(A,C);return false}var B=i();B.open("POST",z,true);B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");B.onreadystatechange=function(){if(B.readyState==4){if(B.status==200){if(D!=null&&typeof(D)=="function"){D(B,C)}}else{if(B.status==401){Dynamsoft.Lib.Errors.OCR_LicenseCheckerUnauthorized(A,C.AjaxFunctionUrl);D(A,C);return false}else{if(B.status==404){Dynamsoft.Lib.Errors.OCR_LicenseCheckerNotConnect(A);alert(A.errorString);D(A,C);return false}else{if(B.status==403){Dynamsoft.Lib.Errors.OCR_AccessDenied(A);D(A,C);return false}else{Dynamsoft.Lib.Errors.OCR_HTTPError(A,B.status);D(A,C);return false}}}}}};if(B&&y){B.send(y)}return true}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var r=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function k(E){var A,C,y;var D,B,z;y=E.length;C=0;A="";while(C<y){D=E.charCodeAt(C++)&255;if(C==y){A+=c.charAt(D>>2);A+=c.charAt((D&3)<<4);A+="==";break}B=E.charCodeAt(C++);if(C==y){A+=c.charAt(D>>2);A+=c.charAt(((D&3)<<4)|((B&240)>>4));A+=c.charAt((B&15)<<2);A+="=";break}z=E.charCodeAt(C++);A+=c.charAt(D>>2);A+=c.charAt(((D&3)<<4)|((B&240)>>4));A+=c.charAt(((B&15)<<2)|((z&192)>>6));A+=c.charAt(z&63)}return A}function t(F){var E,D,B,z;var C,y,A;y=F.length;C=0;A="";while(C<y){do{E=r[F.charCodeAt(C++)&255]}while(C<y&&E==-1);if(E==-1){break}do{D=r[F.charCodeAt(C++)&255]}while(C<y&&D==-1);if(D==-1){break}A+=String.fromCharCode((E<<2)|((D&48)>>4));do{B=F.charCodeAt(C++)&255;if(B==61){return A}B=r[B]}while(C<y&&B==-1);if(B==-1){break}A+=String.fromCharCode(((D&15)<<4)|((B&60)>>2));do{z=F.charCodeAt(C++)&255;if(z==61){return A}z=r[z]}while(C<y&&z==-1);if(z==-1){break}A+=String.fromCharCode(((B&3)<<6)|z)}return A}function u(B){var z,A,y,C;z="";y=B.length;for(A=0;A<y;A++){C=B.charCodeAt(A);if((C>=1)&&(C<=127)){z+=B.charAt(A)}else{if(C>2047){z+=String.fromCharCode(224|((C>>12)&15));z+=String.fromCharCode(128|((C>>6)&63));z+=String.fromCharCode(128|((C>>0)&63))}else{z+=String.fromCharCode(192|((C>>6)&31));z+=String.fromCharCode(128|((C>>0)&63))}}}return z}function l(D){var z,B,y,E;var C,A;z="";y=D.length;B=0;while(B<y){E=D.charCodeAt(B++);switch(E>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:z+=D.charAt(B-1);break;case 12:case 13:C=D.charCodeAt(B++);z+=String.fromCharCode(((E&31)<<6)|(C&63));break;case 14:C=D.charCodeAt(B++);A=D.charCodeAt(B++);z+=String.fromCharCode(((E&15)<<12)|((C&63)<<6)|((A&63)<<0));break}}return z}function j(y){return k(u(y))}function f(y){return l(t(y))}}); 
/*! 20220624191759
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: Webcam
* Version: 17.3
* 
*/
var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{},Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[],Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(e){Dynamsoft.aryAddonReadyFun.push(e)},Dynamsoft.WebcamVerForActiveX="15.0.0.0625",Dynamsoft.WebcamVerInName="15.0.0.0625",function(){for(var e=[Dynamsoft.DWT],t=0;t<1;t++){var r=e[t];r.EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5},r.EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9},r.EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6}}}(),function(){Dynamsoft.Lib.WebcamErrors={InvalidParameter:function(e){e._errorCode=-10001,e._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(e){e._errorCode=-10002,e._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(e){e._errorCode=-10003,e._errorString="To get the url for the current frame, the video must be playing."},Success:function(e){e._errorCode=0,e._errorString="Successful."}}}(),function(r){function t(e){var t=this;t._Count=0,t._resultlist=[],t._stwain=e}t.prototype.GetCount=function(){return r.WebcamErrors.Success(this._stwain),this._Count-1},t.prototype.Get=function(e){var t=this;return t._resultlist.length-1<=e||e<0?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(t._stwain,"Get"),""):(r.WebcamErrors.Success(t._stwain),t._resultlist[e])},t.prototype.GetCurrent=function(){var e=this,t=e._resultlist.length;return 0==t?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,"GetCurrent"),""):(r.WebcamErrors.Success(e._stwain),e._resultlist[t-1])},r.NewWebcamValue=function(e){return new t(e)}}(Dynamsoft.Lib),function(t){function r(e){var t=this;t._Count=0,t._resultlist=[],t._stwain=e}r.prototype.GetValue=function(){var e=this;return 0==e._resultlist.length?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),""):(t.WebcamErrors.Success(e._stwain),e._resultlist[0].current)},r.prototype.GetIfAuto=function(){var e=this;return 0==e._resultlist.length?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),!1):(t.WebcamErrors.Success(e._stwain),"true"==e._resultlist[0].auto)},t.NewWebcamSetting=function(e){return new r(e)}}(Dynamsoft.Lib),function(e){function t(e){var t=this;t._Count=0,t._resultlist=[],t._stwain=e}t.prototype.GetMinValue=function(){var e=this;return 0==e._resultlist.length?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),""):e._resultlist[0].min},t.prototype.GetMaxValue=function(){var e=this;return 0==e._resultlist.length?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),""):e._resultlist[0].max},t.prototype.GetSteppingDelta=function(){var e=this;return 0==e._resultlist.length?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),0):e._resultlist[0].step},t.prototype.GetDefaultValue=function(){var e=this;return 0==e._resultlist.length?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),0):e._resultlist[0].defaultValue},t.prototype.GetIfAuto=function(){var e=this;return 0==e._resultlist.length?(Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),!1):"true"==e._resultlist[0].auto},e.NewWebcamMoreSetting=function(e){return new t(e)}}(Dynamsoft.Lib),Dynamsoft.AddonReady(function(n,e){n.DynamicLoadAddonFuns&&n.DynamicLoadAddonFuns.push(function(r){r._innerSetWebcamValue=function(e){var t=n.NewWebcamValue(r);return e&&n.isArray(e)&&(t._resultlist=e,t._Count=e.length),t},r._innerSetWebcamSetting=function(e){var t=n.NewWebcamSetting(r);return e&&n.isArray(e)&&(t._resultlist=e,t._Count=e.length),t},r._innerSetWebcamMoreSetting=function(e){var t=n.NewWebcamMoreSetting(r);return e&&n.isArray(e)&&(t._resultlist=e,t._Count=e.length),t}}),n.Addon_Events.push("OnFrameCaptured"),n.Addon_Events.push("OnCaptureSuccess"),n.Addon_Events.push("OnCaptureError")}),Dynamsoft.AddonReady(function(l,e){l.product.bHTML5Edition&&l.DynamicLoadAddonFuns&&l.DynamicLoadAddonFuns.push(function(m){var e,d=l.html5.Funs,t=l.env.bMac?"DynamicWebcam_"+Dynamsoft.WebcamVerInName+".dylib":l.env.bLinux?"DynamicWebcam_"+Dynamsoft.WebcamVerInName+".so":Dynamsoft.dcp.b64bit?"DynamicWebcamx64_"+Dynamsoft.WebcamVerInName+".dll":"DynamicWebcam_"+Dynamsoft.WebcamVerInName+".dll";m._isMobileMode()||m._innerSend("GetAddOnVersion",d.makeParams("webcam",t),!0,!1,!1),(e=m)._innerWebcamValueFunction=function(e,t){e=this._innerFunRaw(e,t,!1,!1);return this._innerSetWebcamValue(e)},e._innerWebcamSettingFunction=function(e,t){e=this._innerFunRaw(e,t,!1,!1);return this._innerSetWebcamSetting(e)},e._innerWebcamMoreSettingFunction=function(e,t){e=this._innerFunRaw(e,t,!1,!1);return this._innerSetWebcamMoreSetting(e)},e._OnCaptureSuccess=function(e){Dynamsoft.Lib.isFunction(this.__OnCaptureSuccess)&&this.__OnCaptureSuccess()},e._OnCaptureError=function(e){var t=e[1],e=e[2];Dynamsoft.Lib.isFunction(this.__OnCaptureError)&&this.__OnCaptureError(t,e)},e._OnFrameCaptured=function(e){var t,r=this,n=Dynamsoft.Lib;r.__videoPause||(t=(t=r.__videoQuality)||60,r.__videoDest&&r.__videoDest.UpdateVideoContainer(r.GetImageURL(-1,-1,-1,0,t))),n.isFunction(r.__OnFrameCaptured)&&r.__OnFrameCaptured(e)},e={Webcam:{IsModuleInstalled:function(){var e=m;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.IsModuleInstalled"):""!=e._innerFun("GetAddOnVersion",d.makeParams("webcam",t))},Download:function(e,t,r){var n=m;if(n._resetErr(),n._isMobileMode())return n._mobileNotSupport("Addon.Webcam.Download");Dynamsoft.Lib.cancelFrome=2;function o(){return Dynamsoft.Lib.isFunction(t)&&t(),!0}function i(){return Dynamsoft.Lib.isFunction(r)&&r(m.ErrorCode,m.ErrorString),!1}if(!l.License.checkProductKey(m,{Webcam:!0},!0))return i();if(this.IsModuleInstalled())return o();if(!e||""==e)return Dynamsoft.Lib.Errors.Webcam_InvalidRemoteFilename(n),i();if(d.isServerInvalid(n))return i(),!1;Dynamsoft.Lib.showProgress(n,"Download",!0);var a=!0;return n._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]),Dynamsoft.Lib.isFunction(t)||(a=!1),d.loadHttpBlob(n,"get",e,a,function(e){n._OnPercentDone([0,-1,"Loading..."]);n.__LoadImageFromBytes(e,100,"",a,o,i)},function(){Dynamsoft.Lib.closeProgress(n,"Download"),i()},function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join("");n._OnPercentDone([0,t,"","http"])})},GetSourceList:function(){var e=m;if(e._resetErr(),e._isMobileMode())return e._mobileNotSupport("Addon.Webcam.GetSourceList");if(!l.License.checkProductKey(e,{Webcam:!0},!0))return[];var t=e._innerFunRaw("GetWebcamSourceList");return 0==e.ErrorCode&&t.splice(t.length-1,1),t},SelectSource:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.SelectSource"):!!l.License.checkProductKey(t,{Webcam:!0},!0)&&t._innerFun("SelectWebcam",d.makeParams(e))},CloseSource:function(){var e=m;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.CloseSource"):(this._clear(),e._innerFun("StopCapture"))},GetFramePartURL:function(){var e=m;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.GetFramePartURL"):this._isPlaying()?e.GetImageURL(-1,-1,-1,!0,e.__videoQuality):(l.WebcamErrors.VideoNotPlayingWhenGetURL(e),"")},GetFrameURL:function(){var e=m;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.GetFrameURL"):this._isPlaying()?e.GetImageURL(-1,-1,-1,0,e.__videoQuality):(l.WebcamErrors.VideoNotPlayingWhenGetURL(e),"")},PlayVideo:function(e,t,r,n,o){var i=m;if(i._resetErr(),i._isMobileMode())return i._mobileNotSupport("Addon.Webcam.PlayVideo");function a(){return c._clear(),Dynamsoft.Lib.isFunction(o)&&o(m.ErrorCode,m.ErrorString),!1}var u=Dynamsoft.Lib,s=60,c=this;return e?l.License.checkProductKey(m,{Webcam:!0},!0)?(i.__videoDest=e,i.__videoDest.ShowVideoContainer(!0),u.isFunction(r)&&(m.__OnFrameCaptured=r),m.__videoPause?(m.__videoPause=!1,l.isFunction(n)&&n(),!0):(m.__videoPause=!1,m.__videoQuality=t?s=(s=+t)<1?60:s:s,m._innerSend("PlayVideo",d.makeParams(!0),!0,n,a))):a():(Dynamsoft.Lib.Errors.ParameterCannotEmpty(m),a())},PauseVideo:function(){var e=m;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.PauseVideo"):(this._isPlaying()&&(e.__videoPause=!0),!0)},_clear:function(){var e=m;Dynamsoft.Lib;e.__videoPause=!1,e.__OnFrameCaptured=!1,e.__videoQuality=60,e.__videoDest&&e.__videoDest.ShowVideoContainer(!1),e.__videoDest=!1},_isPlaying:function(){return m.GetIfShowVideoContainer()},StopVideo:function(){var e=m;if(e._resetErr(),e._isMobileMode())return e._mobileNotSupport("Addon.Webcam.StopVideo");this._clear();var t=e._innerFun("PlayVideo",d.makeParams(!1,0));return e._innerFun("StopCapture"),t},CaptureImage:function(e,t){var r=m;if(r._resetErr(),r._isMobileMode())return r._mobileNotSupport("Addon.Webcam.CaptureImage"),l.isFunction(t)&&t(r._errorCode,r._errorString),!1;if(!l.License.checkProductKey(r,{Webcam:!0},!0))return l.isFunction(t)&&t(r._errorCode,r._errorString),!1;function n(){d.hideMask(o),l.isFunction(t)&&t(r._errorCode,r._errorString)}var o="CaptureImage";return d.showMask(o),r.__OnCaptureError=n,r._innerSend(o,d.makeParams(!1),!0,function(){d.hideMask(),0==r.ErrorCode?(d.hideMask(o),l.isFunction(e)&&setTimeout(e,0),l.License.isLTS()&&Dynamsoft.DWT.lcvrf(m)):n(r.ErrorCode,r.ErrorString)},n)},GetMediaType:function(){var e=m;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.GetMediaType"):e._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.SetMediaType"):l.isString(e)?t._innerFun("SetMediaType",d.makeParams(e)):(l.Errors.InvalidValue(t),!1)},GetResolution:function(){var e=m;if(e._resetErr(),e._isMobileMode())return e._mobileNotSupport("Addon.Webcam.GetResolution");e=e._innerWebcamValueFunction("GetResolution");if(e&&e._resultlist){var t,r,n=e._resultlist,o=[],i=[];for(""==(r=0<n.length?n[n.length-1]:r)&&0<n.length&&(r=n[0]),t=0;t<n.length-1;t++){for(var a,u=(a=n[t]).toLowerCase().split("x"),s=(d=c=s=void 0,{value:a,p1:parseInt(u[0]),p2:parseInt(u[1])}),c=o,d=c.length-1;0<=d&&c[d].p1>=s.p1&&!(c[d].p1==s.p1&&c[d].p2<s.p2);)c[d+1]=c[d],d--;c[d+1]=s}for(t=0;t<o.length;t++)a=o[t].value,i.push(a);r&&i.push(r),e._resultlist=i,i=o=null}return e},SetResolution:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.SetResolution"):l.isNumber(e)||l.isString(e)?t._innerFun("SetResolution",d.makeParams(e)):(l.Errors.InvalidValue(t),!1)},GetFrameRate:function(){var e=m;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.GetFrameRate"):e._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.SetFrameRate"):l.isNumber(e)?m._innerFun("SetFrameRate",d.makeParams(e)):(l.Errors.InvalidValue(t),!1)},GetVideoPropertySetting:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting"):t._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",d.makeParams(e))},GetVideoPropertyMoreSetting:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting"):t._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",d.makeParams(e))},SetVideoPropertySetting:function(e,t,r){var n=m;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting"):n._innerFun("SetWebcamVideoPropertySetting",d.makeParams(e,t,r))},SetVideoRotateMode:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.SetVideoRotateMode"):t._innerFun("SetVideoRotateMode",d.makeParams(e))},GetCameraControlPropertySetting:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting"):t._innerWebcamSettingFunction("GetWebcamCameraControlSetting",d.makeParams(e))},GetCameraControlPropertyMoreSetting:function(e){var t=m;return t._resetErr(),t._isMobileMode()?t._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting"):t._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",d.makeParams(e))},SetCameraControlPropertySetting:function(e,t,r){var n=m;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting"):n._innerFun("SetWebcamCameraControlPropertySetting",d.makeParams(e,t,r))}}},m.__addon=m.__addon||{},l.mix(m.__addon,e)})}),Dynamsoft.AddonReady(function(_,e){var r;_.product.bActiveXEdition&&_.DynamicLoadAddonFuns&&_.DynamicLoadAddonFuns.push(function(m){var l,e,t;if(!m.getSWebTwain()||!m.getSWebTwain().Addon)return!1;Dynamsoft.navInfo.bWin&&(t=!Dynamsoft.navInfo.bOSx64||Dynamsoft.navInfo.bWOW64,r=t?"DynamicWebcam_"+Dynamsoft.WebcamVerForActiveX+".dll":"DynamicWebcamx64_"+Dynamsoft.WebcamVerForActiveX+".dll"),l=m.getSWebTwain();try{l.GetAddOnVersion("webcam",r)}catch(e){}(t=m)._innerRead=function(e){var t;try{t=Dynamsoft.Lib.parse(e)}catch(e){}return t.result},t._innerWebcamValueFunctionPlugin=function(e){e=this._innerRead(e);return this._innerSetWebcamValue(e)},t._innerWebcamSettingFunctionPlugin=function(e){e=this._innerRead(e);return this._innerSetWebcamSetting(e)},t._innerWebcamMoreSettingFunctionPlugin=function(e){e=this._innerRead(e);return this._innerSetWebcamMoreSetting(e)},e={Webcam:{IsModuleInstalled:function(){var e=l.GetAddOnVersion("webcam",r);return _.setErrorString(m),""!=e},Download:function(e,t,r){function n(){return Dynamsoft.Lib.isFunction(t)&&t(),!0}function o(){return Dynamsoft.Lib.isFunction(r)&&r(m.ErrorCode,m.ErrorString),!1}if(!_.License.checkProductKey(m,{Webcam:!0},!0))return o();if(this.IsModuleInstalled())return n();if(!e||""==e)return Dynamsoft.Lib.Errors.Webcam_InvalidRemoteFilename(m),o();e=l.DownloadAddon(e);return _.wrapperRet(m,e,n,o)},GetSourceList:function(){if(!_.License.checkProductKey(m,{Webcam:!0},!0))return[];var e=l.GetWebcamSourceList(),t=[];return _.setErrorString(m),0==m.ErrorCode&&(t=m._innerRead(e))&&1<t.length&&t.splice(t.length-1,1),t},SelectSource:function(e){if(!_.License.checkProductKey(m,{Webcam:!0},!0))return!1;e=l.SelectWebcam(e);return _.setErrorString(m),e},CloseSource:function(){m._playVideoDWT=null;var e=l.StopCapture();return _.setErrorString(m),e},GetFramePartURL:function(){if(!this._isPlaying())return _.WebcamErrors.VideoNotPlayingWhenGetURL(m),"";var e=l.GetDIB(-1);return _.setErrorString(m),e},GetFrameURL:function(){return""},PlayVideo:function(e,t,r,n,o){function i(){return m._playVideoDWT=null,Dynamsoft.Lib.isFunction(o)&&o(m.ErrorCode,m.ErrorString),!1}if(!e||!e.getSWebTwain())return Dynamsoft.Lib.WebcamErrors.InvalidParameter(m),i();if(!_.License.checkProductKey(m,{Webcam:!0},!0))return i();var a=e.getSWebTwain().CurrentHWND;return a?(m._playVideoDWT=e,setTimeout(function(){var e=l.RunWebcamCmd("PlayVideo",a,null,null,r);_.wrapperRet(m,e,n,i)},0),!0):(_.WebcamErrors.InvalidParameter(m),i())},PauseVideo:function(){return!0},StopVideo:function(){m._playVideoDWT=null;var e=l.RunWebcamCmd("StopVideo",0,null,null,null);return _.setErrorString(m),l.StopCapture(),e},CaptureImage:function(e,t){function r(){return Dynamsoft.Lib.isFunction(t)&&t(m.ErrorCode,m.ErrorString),!1}if(!_.License.checkProductKey(m,{Webcam:!0},!0))return r();var n=l.RunWebcamCmd("Capture",0,function(){_.isFunction(e)&&setTimeout(e,0),_.License.isLTS()&&Dynamsoft.DWT.lcvrf(m)},r,null);return _.setErrorString(m),n},GetMediaType:function(){var e=m._innerWebcamValueFunctionPlugin(l.GetMediaType());return _.setErrorString(m),e},SetMediaType:function(e){if(!_.isString(e))return _.Errors.InvalidValue(m),!1;e=l.SetMediaType(e);return _.setErrorString(m),e},GetResolution:function(){var e=m._innerWebcamValueFunctionPlugin(l.GetResolution());if(_.setErrorString(m),e&&e._resultlist){var t,r,n=e._resultlist,o=[],i=[];for(0<n.length&&(r=n[n.length-1]),t=0;t<n.length-1;t++){for(var a,u=(a=n[t]).toLowerCase().split("x"),s=(d=c=s=void 0,{value:a,p1:parseInt(u[0]),p2:parseInt(u[1])}),c=o,d=c.length-1;0<=d&&c[d].p1>=s.p1&&!(c[d].p1==s.p1&&c[d].p2<s.p2);)c[d+1]=c[d],d--;c[d+1]=s}for(t=0;t<o.length;t++)a=o[t].value,i.push(a);r&&i.push(r),e._resultlist=i,i=o=null}return e},SetResolution:function(e){if(!_.isNumber(e)&&!_.isString(e))return _.Errors.InvalidValue(m),!1;e=l.SetResolution(e);return _.setErrorString(m),e},GetFrameRate:function(){var e=m._innerWebcamValueFunctionPlugin(l.GetFrameRate());return _.setErrorString(m),e},SetFrameRate:function(e){if(!_.isNumber(e))return _.Errors.InvalidValue(m),!1;e=l.SetFrameRate(e);return _.setErrorString(m),e},GetVideoPropertySetting:function(e){e=l.GetWebcamVideoPropertySetting(e);return _.setErrorString(m),m._innerWebcamSettingFunctionPlugin(e)},GetVideoPropertyMoreSetting:function(e){e=l.GetWebcamVideoPropertyMoreSetting(e);return _.setErrorString(m),m._innerWebcamMoreSettingFunctionPlugin(e)},SetVideoPropertySetting:function(e,t,r){e=l.SetWebcamVideoPropertySetting(e,t,r);return _.setErrorString(m),e},SetVideoRotateMode:function(e){e=l.SetVideoRotateMode(e);return _.setErrorString(m),e},GetCameraControlPropertySetting:function(e){e=l.GetWebcamCameraControlSetting(e);return _.setErrorString(m),m._innerWebcamSettingFunctionPlugin(e)},GetCameraControlPropertyMoreSetting:function(e){e=l.GetWebcamCameraControlMoreSetting(e);return _.setErrorString(m),m._innerWebcamMoreSettingFunctionPlugin(e)},SetCameraControlPropertySetting:function(e,t,r){e=l.SetWebcamCameraControlPropertySetting(e,t,r);return _.setErrorString(m),e},_isPlaying:function(){return!!m._playVideoDWT}}},m.Addon=m.Addon||{},_.mix(m.Addon,e)})}); 
/*! 20220624191759
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: Camera
* Version: 17.3
* 
*/
var Dynamsoft=self.Dynamsoft||{};Dynamsoft.DWT=Dynamsoft.DWT||{};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(fn){Dynamsoft.aryAddonReadyFun.push(fn);}; // jshint ignore: line
Dynamsoft.CameraVerInName = '17.3.0.0531';
Dynamsoft.AddonReady(function(DL, nil){if(!DL.product.bHTML5Edition||Dynamsoft.navInfoSync.bIE)return;
/*! 20220624 190435 */var n={757:function(e,t,n){e.exports=n(666)},666:function(t){t=function(o){var c,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i,a,o,s,t=t&&t.prototype instanceof v?t:v,t=Object.create(t.prototype),r=new I(r||[]);return t._invoke=(i=e,a=n,o=r,s=d,function(e,t){if(s===f)throw new Error("Generator is already running");if(s===p){if("throw"===e)throw t;return D()}for(o.method=e,o.arg=t;;){var n=o.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(r===c){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=c,e(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g;{if(!r.done)return r;n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c)}n.delegate=null;return g}(n,o);if(n){if(n===g)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===d)throw s=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=f;n=l(i,a,o);if("normal"===n.type){if(s=o.done?p:h,n.arg!==g)return{value:n.arg,done:o.done}}else"throw"===n.type&&(s=p,o.method="throw",o.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",g={};function v(){}function m(){}function b(){}var t={},_=(a(t,r,function(){return this}),Object.getPrototypeOf),_=_&&_(_(P([]))),y=(_&&_!==e&&u.call(_,r)&&(t=_),b.prototype=v.prototype=Object.create(t));function x(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function w(o,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,i){var a,e=l(o[e],o,n);if("throw"!==e.type)return(n=(a=e.arg).value)&&"object"==typeof n&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):s.resolve(n).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,i)});i(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=c,e.done=!0,e}).next=e}return{next:D}}function D(){return{value:c,done:!0}}return a(y,"constructor",m.prototype=b),a(b,"constructor",m),m.displayName=a(b,i,"GeneratorFunction"),o.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},o.awrap=function(e){return{__await:e}},x(w.prototype),a(w.prototype,n,function(){return this}),o.AsyncIterator=w,o.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var a=new w(s(e,t,n,r),i);return o.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(y),a(y,i,"Generator"),a(y,r,function(){return this}),a(y,"toString",function(){return"[object Generator]"}),o.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=P,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return a.type="throw",a.arg=n,r.next=e,t&&(r.method="next",r.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var o=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var a=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(n=i.completion).type&&(r=n.arg,C(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=c),g}},o}(t.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},r={};function er(e){var t=r[e];if(void 0!==t)return t.exports;t=r[e]={exports:{}};return n[e](t,t.exports,er),t.exports}er.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return er.d(t,{a:t}),t},er.d=function(e,t){for(var n in t)er.o(t,n)&&!er.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},er.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){function k(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function S(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){k(r,t,n,i,a,"next",e)}function a(e){k(r,t,n,i,a,"throw",e)}i(void 0)})}}var e=er(757),E=er.n(e),C=window.Dynamsoft;function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),r(e.prototype.constructor=e,t)}function d(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e;throw new TypeError("attempted to use private field on non-instance")}var U=0;function t(e){return"__private_"+U+++"_"+e}var i={code:0,message:"ok."},O={code:80001,message:"The parameter type is wrong."},H={code:80025,message:"The camera class is required."},W={code:80027,message:"The license of webcam is invalid."},j={code:80028,message:"The video is shown."},G={code:80033,message:"The options is invalid."},q={code:80034,message:"The file name is invalid."},X="_updateErrorMessage",z="_canvasClick",Y="_afterRender",J="_documentClickUI",Q="_pagerChangedUI",Z="__dynamsoft_camera_files",K="dynamsoft-dvs-file",$="documentScanPage",A={ORIGINAL:"original"},ee={scannerViewer:{maxDocuments:20,maxImagesInBuffer:20,fullScreen:!0,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},bodyStyle:{background:"#ffffff"},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},scanButtonStyle:{background:"#fe8e14",color:"#ffffff"},resolution:{visibility:"visible",valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoDetect:{visibility:"visible",enableAutoDetect:!1,acceptedPolygonConfidence:0,acceptedBlurryScore:0},autoScan:{visibility:"visible",enableAutoScan:!1},continuousScan:{visibility:"visible",enableContinuousScan:!0},switchCamera:{visibility:"visible"},loadLocalFile:{visibility:"visible"}},documentEditorSettings:{visibility:"visible",headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14",disabledColor:"#808080"},bodyStyle:{background:"#ffffff"},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},insert:{visibility:"visible",position:"before"},delete:{visibility:"visible"},rotateLeft:{visibility:"visible"},filter:{visibility:"visible",valueList:[{label:"Original",value:A.ORIGINAL,option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],applyToAll:{visibility:"visible",enableApplyToAll:!0,label:"Apply to All"},defaultValue:A.ORIGINAL},cropViewer:{visibility:"visible",polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},rotateLeft:{visibility:"visible"},rotateRight:{visibility:"visible"},autoDetectBorder:{visibility:"visible"},apply:{visibility:"visible"}}}},te="error",ne="cropViewer",re="mainViewer",ie=0,g=1,v=2;var B,ae=function(){function e(e){this._updateData(e)}return e.prototype._updateData=function(t){var n=this;Object.keys(t).forEach(function(e){n[e]=t[e]})},e}(),P={OK:{code:0,message:"Successful"},HTTPS_REQUIRED:{code:-4201,message:"HTTPS is required for accessing cameras."},MEDIADEVICES_NOT_IMPL:{code:-4202,message:"The current browser has not implemented the MediaDevices interface."},GETUSERMEDIA_NOT_IMPL:{code:-4203,message:"The current browser has not implemented the getUserMedia interface."},NO_MEMORY:{code:-4204,message:"Not enough memory for this operation."},NO_CAMERA_SELECTED:{code:-4205,message:"No camera is selected."},VIDEO_ELEMENT_REQUIRED:{code:-4206,message:"A Video element is required for this operation."},CAMERA_PLUG_OUT:{code:-4207,message:"The camera is not plugged in."},CAMERA_NOT_OPEN:{code:-4208,message:"The camera is not open."},CAMERA_SETTINGS_NOT_SUPPORT:{code:-4209,message:"The current browser does not support camera settings."},FAILED_GET_USERMEDIA:{code:-4210,message:"Failed to get camera input."},SOURCE_NOT_FOUND:{code:-4211,message:"The camera source can not be found."},VIDEO_NOT_PLAY:{code:-4214,message:"The video must be playing for the capture operation to work."},VIDEO_NOT_STOP:{code:-4215,message:"The video is already playing. Please stop the video before attempting to play it again to a different container."},NO_CAMERA:{code:-4216,message:"No camera is found."},LICENSE_INVALID:{code:-4217,message:"The license is invalid."},MAX_DOCUMENT_LIMIT:{code:-4218,message:"The number of images processed at one time exceeds the maximum limit."},MAX_IMAGES_IN_BUFFER_LIMIT:{code:-4219,message:"The number of images processed exceeded memory limit."},CAPTURE_NO_IMAGE:{code:-4220,message:"No image is found for the capture operation."},IMAGE_FORMAT_INVALID:{code:-4221,message:"The image format is not support."},RESOLUTION_INVALID:{code:-4222,message:"The resolution is not support."}},oe=((e=B=B||{}).iconResolution="dynamsoft-camera-icon-resolution",e.iconAutoDetect="dynamsoft-camera-icon-autoDetect",e.iconClose="dynamsoft-camera-icon-close",e.iconLoad="dynamsoft-camera-icon-loadLocalFile",e.iconSwitch="dynamsoft-camera-icon-switchCamera",e.iconCapture="dynamsoft-camera-icon-scan",e.iconAutoCapture="dynamsoft-camera-icon-autoScan",e.iconContinuous="dynamsoft-camera-icon-continuous",e.iconBack="dynamsoft-camera-icon-back",e.iconArrow="dynamsoft-camera-icon-arrow",e.iconDelete="dynamsoft-camera-icon-remove",e.iconInsert="dynamsoft-camera-icon-insert",e.iconRotateLeft="dynamsoft-camera-icon-rotateLeft",e.iconFilter="dynamsoft-camera-icon-filter",e.iconCrop="dynamsoft-camera-icon-crop",e.iconSave="dynamsoft-camera-icon-save",e.iconRotateRight="dynamsoft-camera-icon-rotateRight",e.iconFullCrop="dynamsoft-camera-icon-autoDetectBorder",e.iconNext="dynamsoft-camera-icon-next",e.uiIcon="dynamsoft-camera-ui-icon",e.uiExitMutiple="dynamsoft-camera-ui-exitMutiple",e.uiCapture="dynamsoft-camera-ui-capture",e.uiDetect="dynamsoft-camera-ui-detect",e.uiPrevious="dynamsoft-camera-ui-previous",e.uiNext="dynamsoft-camera-ui-next",e.uiDelete="dynamsoft-camera-ui-delete",e.uiSave="dynamsoft-camera-ui-save",e.displayNone="dynamsoft-camera-display-none",e.fixedFull="dynamsoft-camera-fixed-full",e.font="dynamsoft-camera-font",e.disable="dynamsoft-camera-disable",e.filterDropDown="dynamsoft-camera-filterDropDown",e.buttonMultipleImg="dynamsoft-camera-button-multipleImg",e.filterApplyAll="dynamsoft-camera-filterApplyAll",e.hidden="dynamsoft-camera-display-none",e.previewImg="dynamsoft-camera-previewImg",e.cameraVideo="dynamsoft-camera-cameraVideo",e.cameraCvs="dynamsoft-camera-cameraCvs",e.cameraContainer="dynamsoft-camera-cameraContainer",e.overflowHidden="dynamsoft-camera-overflowHidden",e.relative="dynamsoft-camera-relative",e.cvsContainer="dynamsoft-camera-cvsContainer",e.detectCvs="dynamsoft-camera-detectCvs",e.documentScanPage="dynamsoft-camera-scanPage",e.documentEditPage="dynamsoft-camera-documentEditPage",e.cropPage="dynamsoft-camera-cropPage",e.block="dynamsoft-camera-block",e.capturing="dynamsoft-camera-capturing",e.headerfont="dynamsoft-camera-header-icon-font",e.footerfont="dynamsoft-camera-footer-icon-font",e.headerSelected="dynamsoft-camera-header-selected",e.footerSelected="dynamsoft-camera-footer-selected",e.filterSelectedItem="dynamsoft-camera-filter-selected",e.filterCheckBox="dynamsoft-camera-filter-checkBox",e.filterCheckedBox="dynamsoft-camera-filter-checkedBox",e.ddlSelectedItem="dynamsoft-camera-ddl-selected",e.BUTTON_PREFIX="dynamsoft-camera-button-",["blobList"]);function se(e){e&&!e.isDestroyed&&e.destroy()}function ce(){return(ce=S(E().mark(function e(t,n){var r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!0),t){e.next=4;break}return document.body.classList.remove(B.overflowHidden),e.abrupt("return");case 4:if(!t.element){e.next=25;break}if(r=t.container){e.next=15;break}if(t.container=document.body,n)return e.next=11,t.show();e.next=11;break;case 11:return t.element.classList.add(B.fixedFull),document.body.appendChild(t.element),document.body.classList.add(B.overflowHidden),e.abrupt("return");case 15:if(!(r=M(r)?document.getElementById(r):r)){e.next=25;break}if(document.body.classList.contains(B.overflowHidden)&&document.body.classList.remove(B.overflowHidden),document.body===r&&document.body.classList.add(B.overflowHidden),"static"===window.getComputedStyle(r).position&&document.body!==r&&r.classList.add(B.relative),r.appendChild(t.element),t.container=r,n)return e.next=25,t.show();e.next=25;break;case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(){return le.apply(this,arguments)}function le(){return(le=S(E().mark(function e(t,n,r){var i,a,o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,r&&(i=x(r),a=$e(i,t.imageWidth,t.imageHeight)),s=!1,c={quality:85,returnType:C.Enum_ImageType.IT_BGRA,returnBlob:!1},!a&&r&&(Xe(i)&&8==i.length&&(o={points:i}),s=!0),e.abrupt("return",Ae(t,n,o,s,c,!1).then(function(e){return t.imageData=e.src,I(e.result),e.result}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e,t){var n,r=e.config,r=R(void 0===r?{}:r,"documentEditorSettings.filter"),i=r.defaultValue,i=void 0===i?A.ORIGINAL:i,a=r.applyToAll,r=r.valueList;return(n=(n=a&&a.enableApplyToAll&&M(e.filterApplyToAllValue)&&""!=e.filterApplyToAllValue?e.filterApplyToAllValue:n)||((n=M(t)&&""!=t?t:n)||i))!==A.ORIGINAL&&r.some(function(e){return e.value===n})?n:A.ORIGINAL}function he(){return(he=S(E().mark(function e(t,n,r,i){var a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=de(t,i))===A.ORIGINAL)return e.abrupt("return",{filterValue:a,filterBlob:r});e.next=3;break;case 3:return e.next=5,t.filterHandlerByIImageData(n,r,a);case 5:return o=e.sent,e.abrupt("return",{filterValue:a,filterBlob:o});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(){return pe.apply(this,arguments)}function pe(){return(pe=S(E().mark(function e(r,i,a,o,s,c,u){var l,d,h,f,p,g,v,m,b,_,y;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===s&&(s=!1),!c){e.next=14;break}if(!s){e.next=11;break}e.next=7;var t=r,n={source:t,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:C.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}}};return C.ImageProcWrapper.createImage(n).then(function(e){return t.imageData=e.src,I(e.preview),e.preview});case 7:l=e.sent,l=new ae({oriBlob:c,preview:l}),e.next=12;break;case 11:l=new ae({oriBlob:c});case 12:e.next=21;break;case 14:return s||(d=!1),e.next=17,Ae(r,void 0,void 0,void 0,void 0,d);case 17:h=e.sent,r.imageData=h.src,I(h.result),l=s?(I(h.preview),new ae({oriBlob:h.result,preview:h.preview})):new ae({oriBlob:h.result});case 21:if(h=R(i,"config.scannerViewer"),g=h.enableBorderDetection,g=void 0===g||g,f=r.imageWidth,p=r.imageHeight,g)return e.next=26,be(r,i);e.next=40;break;case 26:if(g=e.sent,b=function(e,n,r){return e.map(function(e,t){if(t%2==0)return t=e,t=Math.max(0,e),Math.min(t,n);t=Math.max(0,e);return Math.min(t,r)})}(x(g.cornerPoints),f,p),l.detectArea=b,o||a)return e.next=33,ue(r,void 0,l.detectArea);e.next=38;break;case 33:return v=e.sent,e.next=36,ge(v);case 36:m=e.sent,a&&(l.resImage=v,l.resBlob=w(m));case 38:e.next=43;break;case 40:l.detectArea=[0,0,f,0,f,p,0,p],o&&(v=r,m=l.oriBlob),a&&(l.resImage=r,l.resBlob=w(l.oriBlob));case 43:if(o)return e.next=46,function(){return he.apply(this,arguments)}(i,v,m,u);e.next=51;break;case 46:b=e.sent,_=b.filterValue,y=b.filterBlob,l.filterValue=_,l.filterBlob=y;case 51:return m=v=null,e.abrupt("return",l);case 54:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e,t,n,r){L.log("blobToImageData");return Ae(e,t,n,r,{quality:85,returnType:C.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(e){return I(e.result),e.result})}function ge(t){L.log("ImageDataToBlob");var e={quality:85,returnType:C.Enum_ImageType.IT_JPG,returnBlob:!0};return Ae(t,void 0,void 0,void 0,e,!1).then(function(e){return t.imageData=e.src,I(e.result),e.result})}function ve(){return me.apply(this,arguments)}function me(){return(me=S(E().mark(function e(t,n,r){var i,a,o,s,c,u,l,d;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getCurrentPage()){e.next=3;break}return e.abrupt("return");case 3:if(a=i.getHtmlElement()){e.next=6;break}return e.abrupt("return");case 6:if(o=null==a?void 0:a.querySelector("."+B.buttonMultipleImg)){e.next=9;break}return e.abrupt("return");case 9:if(s=i.queryPreviewImageElement()){e.next=12;break}return e.abrupt("return");case 12:if(!(c=n).preview){e.next=16;break}e.next=26;break;case 16:return e.next=18,D(c.oriBlob);case 18:return l=e.sent,c.detectArea&&(u={cornerPoints:c.detectArea}),e.next=22,Pe(t,u,l,!1,!1);case 22:l=e.sent,c.preview=l.preview,delete l.preview,l=null;case 26:return e.next=28,new Promise(function(e,t){var n=s.src;s.src=F.createURL(c.preview),c.detectArea&&s.setAttribute("data",JSON.stringify(c.detectArea)),qe(c),c=null,s.onload=function(){s.onload=null,n&&F.revokeObjectURL(n),e(!0)},s.onerror=function(e){t(e)}});case 28:d=null==o?void 0:o.querySelector(".dynamsoft-camera-imgCount"),0<r?(d.innerText=String(r),d.classList.remove(B.displayNone)):(d.innerText="",d.classList.add(B.displayNone)),d=null==a?void 0:a.querySelector("."+B.BUTTON_PREFIX+"continuousMode"),o.classList.remove(B.displayNone),null!=d&&d.classList.add(B.footerSelected);case 33:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(){return _e.apply(this,arguments)}function _e(){return(_e=S(E().mark(function e(t,n){var r,i,a,o,s,c,u,l,d;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.imageWidth,i=t.imageHeight,o=n.config.scannerViewer||{},o=o.autoDetect,a=(o=void 0===o?{}:o).acceptedPolygonConfidence,a=void 0===a?80:a,o=o.acceptedBlurryScore,o=void 0===o?80:o,s=n.getAreaDetectCallback()){e.next=7;break}return n.emit(te,{message:"The detect function is not bind.",code:-4290}),e.abrupt("return",{cornerPoints:[],detectedArea:!1});case 7:return e.next=9,s(t,a,o,void 0,void 0);case 9:return c=e.sent,t.imageData=c.src,u=c.confidence,u=void 0===u?[0]:u,l=c.blurryScore,l=void 0===l?0:l,d=c.cornerPoints,n.emit("documentDetected",c),u[0]<a/100||l<o||d.every(function(e){return 0===e})?(c.detectedArea=!1,c.cornerPoints=[0,0,r,0,r,i,0,i]):c.detectedArea=!0,e.abrupt("return",c);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ye(){return(ye=S(E().mark(function e(t,n,r,i,a){var o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a===A.ORIGINAL)return e.abrupt("return",n);e.next=2;break;case 2:if(o=r.find(function(e){return e.label===a}),s=i.find(function(e){return e.value===a}),o&&o.handler&&s){e.next=6;break}return e.abrupt("return",n);case 6:return e.next=8,D(n);case 8:return c=e.sent,e.next=11,o.handler(c,s.option);case 11:return c=e.sent,e.abrupt("return",c.result);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xe(){return(xe=S(E().mark(function e(t,n,r,i,a){var o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a===A.ORIGINAL)return e.abrupt("return",n);e.next=2;break;case 2:if(o=r.find(function(e){return e.label===a}),s=i.find(function(e){return e.value===a}),o&&o.handler&&s){e.next=6;break}return e.abrupt("return",n);case 6:return e.next=8,o.handler(t,s.option);case 8:return c=e.sent,t.imageData=c.src,I(c.result),e.abrupt("return",c.result);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function u(e,t){var e=e||{},n=e.iconCss,e=e.visibility,e=void 0===e||e;return n&&(t.icon=n),(M(e)&&"hidden"==e.toLowerCase()||!1===e)&&(t.visibility="hidden"),t}function we(){return(we=S(E().mark(function e(t,n,r,i){var a;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r)return i.blobList,a=function(e,t){if(null==e)return{};for(var n,r={},i=Object.keys(e),a=0;a<i.length;a++)n=i[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}(i,oe),e.next=4,Promise.resolve(r([{iImageData:n,file:s({},a)}]));e.next=8;break;case 4:!1!==e.sent&&t.redirectToHome(),e.next=9;break;case 8:t.redirectToHome();case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(){return(ke=S(E().mark(function e(t,n,r,i){var a,o,s,c,u,l,d,h,f,p,g,v,m,b,_,y,x,w,k,C,I;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getCurrentPage(),o=t.config.scannerViewer,o=(void 0===o?{}:o).continuousScan,o=void 0===o?{}:o,0==n.length)return e.abrupt("return");e.next=5;break;case 5:if(o.enableContinuousScan||1!=n.length){e.next=20;break}return s=n[0],e.next=9,D(s);case 9:return c=e.sent,e.next=12,fe(c,t,!1,!1,!1,s);case 12:return l=e.sent,l=l.detectArea,l={cornerPoints:l,detectedArea:!0},e.next=17,Ce(t,c,!1,l,r,s);case 17:a instanceof N&&a.enableMultiImages(),e.next=56;break;case 20:if(u=a.getImageCount(),l=t.config.scannerViewer||{},h=l.maxDocuments,f=h=void 0===h?20:h,d=n.length,(u+n.length>f||u+n.length>h)&&(t.emit("video-error",P.MAX_IMAGES_IN_BUFFER_LIMIT),d=f-u),h=a.getDvs(),!(0<d)){e.next=56;break}f=de(t,null),v=g=0;case 30:if(v<d)return m=n[v],e.next=34,D(m);e.next=46;break;case 34:return b=e.sent,e.next=37,fe(b,t,!0,!0,!1,m,f);case 37:b=e.sent,_=b.filterBlob,y=b.resBlob,x=b.detectArea,w=b.oriBlob,C=k=void 0,C=Te(k=i?w:_||y),p=x,h.DataControl.appendSync(r,[{oriData:k.imageData,metadata:C,customData:{oriBlob:w,angle:g,detectArea:x,filterValue:f,resBlob:_||y}}]);case 43:v++,e.next=30;break;case 46:return I={oriBlob:n[d-1],detectArea:p},e.next=49,ve(t,I,u+d);case 49:if(qe(I),I=null,o.enableContinuousScan){e.next=56;break}if(a instanceof N)return a.enableMultiImages(),e.next=56,He(null,{dcs:t});e.next=56;break;case 56:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ce(){return Ie.apply(this,arguments)}function Ie(){return(Ie=S(E().mark(function e(n,r,i,a,o,s){var c,u,l,d,h,f,p,g,v,m,b,_,y,x,w,k,C,I;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n.getCurrentPage(),l=u.options,d=n.config.scannerViewer,d=(void 0===d?{}:d).continuousScan,d=void 0===d?{}:d,h=R(n,"config.documentEditorSettings.cropViewer"),h=h.visibility,h=void 0===h||h,f=r,p=n.config,p=(void 0===p?{}:p).documentEditorSettings,p=void 0===p?{}:p,v=n.config.scannerViewer||{},v=v.maxDocuments,m=v=void 0===v?20:v,g=u.getImageCount()+1,L.log("continuous mode."),m<g||v<g)return L.log("maxImagesInBuffer."),n.emit("video-error",P.MAX_IMAGES_IN_BUFFER_LIMIT),(n.config.scannerViewer.autoScan.enableAutoScan||n.config.scannerViewer.autoDetect.enableAutoDetect)&&(m=n.captureLoop.getLoopType(),n.captureLoop.stopCaptureLoop(),n.captureLoop.changeStyle(),n.captureLoop._setLoopType(m),n.captureLoop.setDisable()),e.abrupt("return");e.next=17;break;case 17:if(d.enableContinuousScan){e.next=61;break}if(n.showLoading("handle sigle image"),L.log("not continuous mode."),n.stop(),h)return L.log("get BlobItem no filter+noPerspective+no preview"),e.next=25,fe(f,n,!1,!1,!1,s);e.next=30;break;case 25:c=e.sent,i&&n.setImageDataBack(f.imageData),c.filterValue=de(n,null),e.next=48;break;case 30:return L.log("get BlobItem filter+Perspective+no preview"),e.next=33,fe(f,n,!0,!0,!1,s);case 33:if(c=e.sent,i&&(n.setImageDataBack(f.imageData),delete f.imageData),m=(v=c).filterBlob,_=v.resBlob,y=c.resImage,(t=c)&&(je(t),Ge(t),qe(t)),y&&delete c.resImage,m&&delete c.filterBlob,"hidden"==p.visibility.toString().toLowerCase())return y={blobList:[]},e.next=44,function(){return we.apply(this,arguments)}(n,m||_,l.onSaveCapture,y);e.next=48;break;case 44:return n.captureLoop&&n.captureLoop.setIsLooping(!1),n.emit("focusPage"),n.hideLoading("handle sigle image"),e.abrupt("return");case 48:if(n.emit("blurPage"),b=n.getCurrentPage())return b.hide(),_=b.getDvs(),y=c.resBlob||c.oriBlob,_.DataControl.appendSync(o,[{oriData:y.imageData,metadata:Te(y),customData:{oriBlob:c.oriBlob,detectArea:c.detectArea,filterValue:c.filterValue}}]),e.next=57,b.clickMultipleImage();e.next=57;break;case 57:b instanceof N&&(b.enableMultiImages(),b.setPreviewImageFlag()),n.hideLoading("handle sigle image"),e.next=74;break;case 61:return e.next=63,Pe(n,a,f,i,!0);case 63:return x=e.sent,w=(k=x).oriBlob,k=k.detectArea,C=de(n,null),I=Te(w),u.getDvs().DataControl.appendSync(o,[{oriData:w.imageData,metadata:I,customData:{oriBlob:w,detectArea:k,angle:0,filterValue:C}}]),e.next=72,ve(n,x,g);case 72:qe(x),x=null;case 74:case"end":return e.stop()}var t},e)}))).apply(this,arguments)}function Pe(){return De.apply(this,arguments)}function De(){return(De=S(E().mark(function e(s,c,u,l,d){var h,f,p;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.log("package to BlobItem"),s.config.scannerViewer.enableBorderDetection){e.next=5;break}h={},e.next=12;break;case 5:if(!c){e.next=9;break}h=c,e.next=12;break;case 9:return e.next=11,be(u,s);case 11:h=e.sent;case 12:f=h.cornerPoints,p=R(s,"config.scannerViewer"),p=p.polygonStyle,p=void 0===p?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:p,L.log("get detected preview"),e.next=18;var t,n=u,r=f,i=p,a=d,o="fe8e14";return i&&M(i.stroke)&&0==i.stroke.indexOf("#")&&(o=i.stroke.substr(1)),r&&(i=x(r),t={points:i,lineWidth:5,strokeColor:o}),Ae(n,void 0,t,!1,a,!0).then(function(e){return n.imageData=e.src,e&&(I(e.result),I(e.preview)),e});case 18:return p=e.sent,L.log("get detected preview ok"),l&&(s.setImageDataBack(u.imageData),delete u.imageData),e.abrupt("return",new ae({oriBlob:p.result,preview:p.preview,detectArea:f}));case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Se(e){if(!e)return[];for(var t=0;t<e.length;t++)e[t]=Math.fround(e[t]);return e}function x(e){var t,e=function(e){var t=e.slice().sort(function(e,t){return e.y-t.y})[0],n=e.indexOf(t),r=e[n-1],i=e[n+1];0===n&&(r=e[3]);r={x:t.x-r.x,y:t.y-r.y},i={x:i.x-t.x,y:i.y-t.y},t={x:10,y:0},r=Ee(t,r),t=Ee(t,i),i=n;r<t&&(i=0===n?3:n-1);return e.slice(i).concat(e.slice(0,i))}(function(e){var n;if(e&&8===e.length)return e=function(e){for(var t=[],n=0;n<e.length;n+=2){var r={x:e[n],y:e[n+1]};t.push(r)}return t}(e),n=function(e){var t={x:0,y:0};return e.forEach(function(e){t.x+=e.x,t.y+=e.y}),t.x/=e.length,t.y/=e.length,t}(e),e.sort(function(e,t){return Math.atan2(e.y-n.y,e.x-n.x)-Math.atan2(t.y-n.y,t.x-n.x)}),e}(e));return t=[],e.forEach(function(e){t.push(e.x,e.y)}),t}function Ee(e,t){var n=Math.pow(Math.pow(e.x,2)+Math.pow(e.y,2),.5),r=Math.pow(Math.pow(t.x,2)+Math.pow(t.y,2),.5),e=e.x*t.x+e.y*t.y;return Math.acos(e/(n*r))}function Ae(e,t,n,r,i,a){var o=void 0,o={polygon:o,doPerspective:o,source:{angle:o},output:{orgImage:o,previewImage:o}};return b(e,o.source),o.source.angle=t,n&&Xe(n.points)&&8==n.points.length&&(o.polygon=n,r&&(o.doPerspective=!0)),!1!==i&&(i instanceof Object?o.output.orgImage=i:o.output.orgImage={quality:85,returnType:C.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==a&&(a instanceof Object?o.output.previewImage=a:o.output.previewImage={quality:85,width:200,height:200,returnType:C.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),C.ImageProcWrapper.createImage(o)}function m(e){e%=360;return e<0&&(e+=360),e}var L={log:function(e,t,n,r){window.Dynamsoft&&window.Dynamsoft.Lib.debug&&window.Dynamsoft.Lib.log(e,t,n,r)},error:function(e){window.Dynamsoft&&window.Dynamsoft.Lib.error(e)}};function Be(){return Le.apply(this,arguments)}function Le(){return(Le=S(E().mark(function e(t,n,r,i,a){var o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),e.next=3,n.DataControl.getData(r);case 3:return s=e.sent,o=s.customData,s=Te(t),o?i&&(Ge(o),qe(o)):o={},a&&(c=i?["angle","detectArea","filterValue","bitDepth"]:["angle","detectArea","filterValue","bitDepth","resBlob","preview"],C.Lib.each(c,function(e){void 0!==a[e]&&(o[e]=a[e])}),!o.oriBlob&&a.oriBlob&&(o.oriBlob=w(a.oriBlob))),n.DataControl.updateSync(r,{oriData:t.imageData,metadata:s,customData:o},!0),e.abrupt("return",!0);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Te(e){return{width:e.imageWidth,height:e.imageHeight,bitDepth:e.imageBitDepth,resolutionX:e.imageXResolution,resolutionY:e.imageYResolution,rgba:e.rgba,bgra:e.bgra}}function Ve(e){return{imageWidth:e.width,imageHeight:e.height,imageBitDepth:e.bitDepth,imageXResolution:e.resolutionX,imageYResolution:e.resolutionY}}function Me(e){var t=null==e?void 0:e.querySelectorAll(".dynamsoft-camera-preFilter");if(t)for(var n=0;n<t.length;n++){var r=t[n];r&&"IMG"==r.tagName&&r.src&&(F.revokeObjectURL(r.src),r.onload=null,r.parentNode.remove())}}function T(e){var t,n=e.getCurrentPage();!n||(n=n.getHtmlElement())&&((t=null==n?void 0:n.querySelector("."+B.filterDropDown))&&(Me(t),e&&e.removeGlobalClickEvent(t),t.remove()),null!=n&&null!=(e=n.querySelector("."+B.filterDropDown))&&e.remove())}function Re(e){var t,n,r;return(C.navInfo.biPhone||C.navInfo.biPad)&&(t=5,n=85,r=3840),C.ImageProcWrapper.getMax4kImage(e,t,n,r)}function Fe(e){var t=e.defaultViewerName,t=void 0===t?ne:t,n=e.cropViewer,r=!0,n=(void 0===n?{}:n).visibility,e=e.visibility;return(M(n)&&"hidden"==n.toLowerCase()||M(e)&&"hidden"==e.toLowerCase())&&(r=!1),t=t.toLowerCase(),!(!r||t!=ne.toLowerCase())}function Ne(){return(Ne=S(E().mark(function e(t,n,r,i,a){var o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe(r))return o={fileName:i,initFileName:i,curIndex:-1,saveData:!1,fromInternal:a},e.next=5,t.showCropPage(o,n);e.next=7;break;case 5:e.next=10;break;case 7:return o={fileName:i,initFileName:i,curIndex:-1,saveData:!1,fromInternal:a,visibility:r.visibility},e.next=10,t.showDocumentEditPage(o,n);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ue(e){if(null!=e)if(M(e)&&e.toLowerCase(),"hidden"===e||!1===e)return!1;return!0}function Oe(e,t){return!M(e)&&t==A.ORIGINAL||e==t}function He(e,t){return We.apply(this,arguments)}function We(){return(We=S(E().mark(function e(t,n){var r,i;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.dcs,i=r.getCurrentPage()){e.next=4;break}return e.abrupt("return");case 4:return r.hideLoading("handle multiple image"),r.emit("blurPage"),r.stop(),e.next=9,i.clickMultipleImage();case 9:i.setPreviewImageFlag();case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(e){e&&e.oriBlob&&(delete e.oriBlob.imageData,delete e.oriBlob)}function Ge(e){e&&e.resBlob&&(delete e.resBlob.imageData,delete e.resBlob)}function qe(e){e&&e.preview&&(ze(e.preview)&&delete e.preview.imageData,delete e.preview)}function w(t){var n;return t&&(ze(t)&&t.imageData?(n={},C.Lib.each(["imageHeight","imageWidth","imageBitDepth","imageXResolution","imageYResolution","rgba","bgra","imageData"],function(e){void 0!==t[e]&&(n[e]=t[e])})):n=t),n}function I(e){e&&(delete e.code,delete e.message)}function Xe(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function ze(e){return"[object Object]"===Object.prototype.toString.call(e)}function V(e){return"function"==typeof e}function M(e){return"string"==typeof e}function Ye(e){return"number"==typeof e&&!Number.isNaN(e)}function b(e,t){for(var n in e)void 0===t[n]?t[n]=e[n]:ze(e[n])&&ze(t[n])?b(e[n],t[n]):void 0!==e[n]&&(t[n]=e[n]);return t}function h(e){if(null==e||"object"!=typeof e)return e;var t,n,r;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){for(t=[],r=e.length,n=0;n<r;n++)t[n]=h(e[n]);return t}if(e instanceof Object){for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=h(e[n]));return t}return Ye(e)||"[object Boolean]"===Object.prototype.toString.call(e)?e:M(e)?new String(e):{}}function Je(e,t){e&&e.emit(te,t)}function R(e,t){return t.split(".").reduce(function(e,t){return e[t]||{}},e)}function Qe(e){var t,n,r;return(C.navInfo.biPhone||C.navInfo.biPad)&&(t=5,n=85,r=3840),C.ImageProcWrapper.getMax4kImage(e,t,n,r)}var Ze="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";var F={windowURL:window.URL||window.webkitURL,createURL:function(e){return M(e)?e:function(e){if(M(e)||void 0===e)return{type:"string",data:e};{if(e instanceof Blob)return{type:"object",data:F.createObjectURL(e)};if(e.imageData&&e.imageData instanceof Blob)return{type:"object",data:F.createObjectURL(e.imageData)}}if(e.imageData){var t=Object.prototype.toString.call(e.imageData);if(/\[object \w*Array\w*\]/.test(t))return{type:"object",data:F.createObjectURL(new Blob([e.imageData]))}}else{t=Object.prototype.toString.call(e);if(/\[object \w*Array\w*\]/.test(t))return{type:"object",data:F.createObjectURL(new Blob([e]))}}if(/data:image\/\w+;base64/.test(e))return{type:"string",data:e};return{type:"object",data:e}}(e).data},createObjectURL:function(e){if(!e)return"";e=F.windowURL.createObjectURL(e);return L.log("createObjectURL:"+e),e},revokeObjectURL:function(e){L.log("revokeObjectURL:"+e),M(e)&&0==e.indexOf("blob:http")&&F.windowURL.revokeObjectURL(e)}};function Ke(e){var t=Math.random().toString(35).substring(2);return t.length<11&&(t+=Math.random().toString(35).substring(2)),e=Math.max(Math.min(Math.round(e),11),8),t=t.substring(0,e)}function _(e,t){if(e==t)return 1;var n=!1;if(Xe(e)&&Xe(t)){var r=e.length;if(r==t.length)for(var n=!0,i=0;i<r;i++)if(!l(e[i],t[i])){n=!1;break}}return n}function l(e,t,n){return void 0===n&&(n=1),Math.abs(e-t)<n}function $e(e,t,n){var r,i,a,o,s,c,u;return!(!Xe(e)||8!=e.length)&&(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],c=e[5],u=e[6],e=e[7],l(r,0)&&l(i,0)&&l(a,t)&&l(o,0)&&l(s,t)&&l(c,n)&&l(u,0)&&l(e,n))}var e=function(){function e(e){this._evtIds=[],this._oPub=null,this._bDisposePub=!1,e?this._oPub=e:(this._oPub=new et,this._bDisposePub=!0)}var t=e.prototype;return t.getPublishSubscribe=function(){return this._oPub},t._on=function(e,t){t=this._oPub.on(e,t);this.push(e,t)},t._emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null!=(t=this._oPub)&&t.emit.apply(t,[e].concat(r))},t._off=function(e,t){var n;null!=(n=this._oPub)&&n.off(e,t)},t.push=function(e,t){this._evtIds.push({name:e,id:t})},t.dispose=function(){if(this._oPub){for(var e=this._evtIds.length,t=0;t<e;t++){var n=this._evtIds[t];this._oPub.offById(n.name,n.id)}this._bDisposePub&&this._oPub&&this._oPub.dispose()}this._oPub=null},e}(),et=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(e,t,n){this._events[e]||(this._events[e]=[]);var r=Ke(10);return this._events[e].push({fn:t,once:n,evtId:r}),r},t.once=function(e,t){this.on(e,t,!0)},t.emit=function(e){var t=this._events[e];if(!t||0===t.length)return!1;for(var n=t.length,r=arguments.length,i=new Array(1<r?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var o=0;o<n;o++){var s,c=t[o];c&&((s=c.fn).call.apply(s,[null].concat(i)),c.once&&(t.splice(o,1),o--))}},t.emitEx=function(e){var n=this._events[e];if(!n||0===n.length)return Promise.resolve(!0);for(var t=n.length,r=Promise.resolve(!0),i=arguments.length,a=new Array(1<i?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if(1===n.length)return(e=null==(e=n[0])?void 0:(e=e.fn).call.apply(e,[null].concat(a)))instanceof Promise?e:r;for(var s=0;s<t;s++){var c=n[s];c&&!function(){var e,t=(e=c.fn).call.apply(e,[null].concat(a));t instanceof Promise&&(r=r.then(function(){return t})),c.once&&(n.splice(s,1),s--)}()}return r},t.off=function(e,t){var n=this._events[e];if(!n)return!1;if(t)for(var r=n.length-1;0<=r;r--){var i=n[r];i&&i.fn===t&&n.splice(r,1),i=null}else n&&(n.length=0)},t.offById=function(e,t){var n=this._events[e];if(!n)return!1;if(t)for(var r=n.length-1;0<=r;r--){var i=n[r];if(i&&i.evtId===t){n.splice(r,1);break}i=null}else n&&(n.length=0)},t.dispose=function(){for(var e=Object.keys(this._events),t=0,n=e.length;t<n;t++){var r=e[t],r=this._events[r];r&&r.splice(0),r=null}this._events={}},e}(),tt=function(){function e(e,t){this.name="",this.icon="",this.text="",this.color="",this.className="",this.onclick=null,this.element=null,this.options=e,this.context=t,this.element=this._initEl()}var t=e.prototype;return t._initEl=function(){var e,t,n,r,i,a,o,s,c,u,l=this.options,d=l.icon,h=l.text,f=l.colorStyle,p=l.className,g=l.bHeader,v=l.onclick,m=l.name,b=l.onmount,_=l.onunmount,y=l.dropdown,x=l.order,x=void 0===x?0:x,w=l.onSelected,k=l.isSelected,k=void 0!==k&&k,l=l.visibility,l=void 0===l?"visible":l,C=this.context,I=document.createElement("div");if(this.name=m,"capture"==this.name&&(I.style.background=f.background),p){if("hidden"===l)return I.className=p+" "+B.block,I;I.className=p}I.style.order=String(x);var m=I,l=d,p=f.color,d=(l&&((x=document.createElement("i")).className=l,x.style.color=p,m.appendChild(x)),I),l=h;return l&&((p=document.createElement("p")).innerText=l,d.appendChild(p)),e=I,n=C,r=k,(t=b)&&setTimeout(function(){t(e,n,r)},0),_&&(this._unmount=_.bind(null,I,C)),i=v,a=C,I.addEventListener("click",function(e){M(i)?a.dcs.emit(i,e,a):V(i)&&i(e,a),e.preventDefault()}),s=w,c=C,m=k,x=g,(u=o=I).bSelected=m,u.bHeader=x,s&&(m&&(x?o.classList.add(B.headerSelected):o.classList.add(B.footerSelected)),o.addEventListener("click",function(e){u.bSelected=!u.bSelected,u.bHeader?o.classList[u.bSelected?"add":"remove"](B.headerSelected):o.classList[u.bSelected?"add":"remove"](B.footerSelected),null!=s&&s(u.bSelected,c),e.preventDefault()})),function(){nt.apply(this,arguments)}(I,C,y,f),I},t.destroy=function(){var e;null!=(e=this._unmount)&&e.call(this),this.element=null},t.update=function(){var e,t;this.element&&(t=this._initEl(),null!=(e=this.element.parentElement)&&e.insertBefore(t,this.element),this.element.remove(),this.element=t)},t.setSelected=function(e){var t=this.options.onSelected;t&&t(e,this.context)},e}();function nt(){return(nt=S(E().mark(function e(t,n,r,i){var a,o,s,c,u,l,d,h;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h=function(t,n,r){n.dataset.showDropdown="false",t.onclick=function(e){"true"!=n.dataset.showDropdown&&(n.classList.remove(B.displayNone),t.classList.add(B.headerSelected),n.dataset.showDropdown="true",e.stopPropagation(),r.dcs.addGlobalClickEvent(n,function(){return!(!n||"true"!=n.dataset.showDropdown)&&(n.classList.add(B.displayNone),n.parentElement.classList.remove(B.headerSelected),n.dataset.showDropdown="false",r.dcs.emit("hideResolutionList"),!0)}))}},d=function(r,i,a,o){void 0===i&&(i=!1);for(var s=[],e=r.children,t=0;t<e.length;t++)e[t].classList.contains(B.ddlSelectedItem)&&s.push(e[t]);var c=!0;function u(e,t){e.classList[t?"add":"remove"](B.ddlSelectedItem)}r.onclick=function(e){var t,n=!1;if(e instanceof MouseEvent){if(e.stopPropagation(),!c)return;t=e.target,n=!0}else t=e;if("LI"===(null==(e=t)?void 0:e.tagName)){c=!1;var e=s.indexOf(t);if(-1<e){if(!i)return void(c=!0);s.splice(e,1),u(t,!0)}else if(i)s.push(t),u(t,!0);else{for(;s.length;)u(s.pop(),!1);u(t,!0),s.push(t),r&&(r.parentElement.classList.remove(B.headerSelected),r.classList.add(B.displayNone),r.dataset.showDropdown="false",o.dcs.emit("hideResolutionList",r,o))}n&&(e=null==a?void 0:a(t,t.customData,o),Promise.resolve(e).then(function(){c=!0}))}}},l=function(e){var a=document.createDocumentFragment();return e.forEach(function(e,t){var n=document.createElement("li"),r=e.value,i=e.innerHtml;n.customData=r,e.isSelected&&n.classList.add(B.ddlSelectedItem),i?n.innerHTML=i:((r=document.createElement("i")).style.pointerEvents="none",r.className=e.icon||"",(i=document.createElement("p")).style.pointerEvents="none",i.innerText=e.text||"",n.appendChild(r),n.appendChild(i)),a.appendChild(n)}),a},r){e.next=6;break}return e.abrupt("return");case 6:return s=r.list,a=r.multiple,o=r.onclick,e.next=9,s(t,n);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0=[];case 12:s=e.t0,c=l(s),(u=null==t?void 0:t.querySelector("dropdown"))?(u.removeEventListener("click",null),u.childNodes&&u.childNodes.forEach(function(e){e.remove()}),u.appendChild(c)):((u=document.createElement("ul")).className="resolutionList dropdown "+B.displayNone,u.style.background=i.background,u.style.color=i.color,u.appendChild(c),t.appendChild(u)),h(t,u,n),d(u,a,o,n),e.next=29;break;case 20:return e.prev=20,e.t1=e.catch(0),L.log("Error Begin---"),L.log(e.t1),L.log(t),L.log(n),L.log(r),L.log("Error End---"),e.abrupt("return",null);case 29:case"end":return e.stop()}},e,null,[[0,20]])}))).apply(this,arguments)}var rt="dvsDb",it="dvsDoc",at=function(){function e(e,t){this._db=e.DataControl._db,t?this.syncDb={}:((e=this._db.DBMng._d)[rt]||(e[rt]={}),e[rt][it]||(e[rt][it]={}),this.syncDb=e[rt][it])}var t=e.prototype;return t.setCustomDataSync=function(e,t){if(this.syncDb)return this.syncDb[e].customData=t,!0},t.getCustomDataSync=function(e){return this.syncDb&&this.syncDb[e]&&this.syncDb[e].customData?this.syncDb[e].customData:null},t.getOriDataSync=function(e){return this.syncDb&&this.syncDb[e]?this.syncDb[e].oriData:null},t.getDataRootSync=function(e){return this.syncDb&&this.syncDb[e]?this.syncDb[e]:null},t.getMetaDataSync=function(e){if(this._db)return this._db.getMetadata(e)},t.removeMidSync=function(e){var t,n=this._db.middle._d;n&&(n=n[e])&&((t=n.customData)&&(je(t),Ge(t),qe(t),delete n.customData),M(n.oriData)&&F.revokeObjectURL(n.oriData),M(n.minData)&&F.revokeObjectURL(n.minData),delete n.oriData,delete n.minData,(t=n.img)&&(t.src=Ze,t.onload=null,t.onerror=null,n.img=null)),this._db.removeMid(e),this._db.removeMetadata(e)},t.removeSync=function(e){var t;this.syncDb&&this.syncDb[e]&&((t=this.syncDb[e])&&(delete t.oriData,je(t.customData),Ge(t.customData),qe(t.customData),t.metadata&&delete t.metadata,t.tags&&(t.tags.slice(0),delete t.tags)),delete this.syncDb[e]),this.removeMidSync(e)},t.dispose=function(){this._db=null,this.syncDb=null},e}(),ot=function(){function e(e){this._fileTree=e._tree}var t=e.prototype;return t.createFile=function(e){if(this._fileTree)return this._fileTree.createFile(e)},t.openFile=function(e){if(!this._fileTree)return[];e=this._fileTree.findChild(this._fileTree.dfNode,e);return e&&"file"===e.type?e.chs.slice():[]},t.findFile=function(e){if(!this._fileTree)return[];if(this._fileTree.dfNode){e=this._fileTree.findChild(this._fileTree.dfNode,e);if(e&&"file"===e.type)return e}return null},t.replaceFileContent=function(e,t){e=this.findFile(e);e&&(e.chs.splice(0),e.chs=t)},t.getFileCount=function(e){e=this.findFile(e);return e?e.chs.length:0},t.getIndexByUidInFile=function(e,t){var n=this.findFile(e);if(n)for(var r=n.chs.length,i=0;i<r;i++)if(n.chs[i]==t)return i;return-1},t.removeByIndexInFile=function(e,t){e=this.findFile(e);if(e){var n=e.chs.length;if(0<=t&&t<n)return e.chs.splice(t,1)}return null},t.removeFile=function(e,t){if(e&&t)for(var n,r=this.openFile(t),i=0;i<r.length;i++)n=r[i],e.removeSync(n)},t.dispose=function(){this._fileTree=null},e}(),n=function(){function e(e,t,n){this.element=null,this.headerButtons=[],this.footerButtons=[],this.className="",this.pageName="",this.container=null,this.isDestroyed=!1,this._fileWrapper=null,this._dvsWrapper=null,this.template="",this._dcs=null,this._dvs=null,this._pagepubsub=new et,this._dvsWrapper=new at(t),this._fileWrapper=new ot(t.File),this.initPageOption(e,n),this._dcs=n,this._dvs=t}var t=e.prototype;return t.initPageOption=function(e,t){this.options=e},t.getDcs=function(){return this._dcs},t.getDvs=function(){return this._dvs},t.getHeaderButtons=function(){return[]},t.getFooterButtons=function(){return[]},t.getOptionsEl=function(){return null},t.createEl=function(){this.headerButtons=this.getHeaderButtons(),this.footerButtons=this.getFooterButtons(),this.container=this.getOptionsEl(),this.element||(e=this.template,(t=document.createElement("div")).innerHTML=e,t.className=this.className,this.element=t);var e,t=null==(e=this.element)?void 0:e.querySelector("header"),t=(this.insertButtons(t,this.headerButtons),null==(e=this.element)?void 0:e.querySelector("footer"));this.insertButtons(t,this.footerButtons)},t.insertButtons=function(e,t){var n;e.appendChild((e=t,n=document.createDocumentFragment(),e.forEach(function(e){n.appendChild(e.element)}),n))},t.destroy=function(){this.isDestroyed=!0,this._dvsWrapper&&this._dvsWrapper.dispose(),this._dvsWrapper=null,this._fileWrapper&&this._fileWrapper.dispose(),this._fileWrapper=null,st(this.headerButtons),st(this.footerButtons),this.headerButtons=[],this.footerButtons=[],this.element&&(this.element.parentElement&&this.element.parentElement.childNodes&&1==this.element.parentElement.childNodes.length?this.element.parentElement.remove():(this.element.remove(),this.element=null)),"documentScanPage"==this.pageName&&(T(this._dcs),this._dcs.emit("video-closed")),T(this._dcs),this._dcs=null},t.hide=function(){var e;null!=(e=this.element)&&e.classList.add(B.displayNone)},t.show=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!=(t=this.element)&&t.classList.remove(B.displayNone);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.updateButton=function(e,t){for(var n=[].concat(this.headerButtons,this.footerButtons),r=0;r<n.length;r++){var i=n[r];if(i.name===e)return b(t,i.options),void i.update()}},t.on=function(e,t){this._pagepubsub.on(e,t)},t.once=function(e,t){this._pagepubsub.once(e,t)},t.off=function(e,t){this._pagepubsub.off(e,t)},t.emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._pagepubsub).emit.apply(t,[e].concat(r))},t.emitEx=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this._pagepubsub).emitEx.apply(t,[e].concat(r))},t.setDefaultBackgroundColors=function(e,t,n){e.background||(e.background="#000"),t.background||(t.background="#323232"),n.background||(n.background="#000")},t.createIconItems=function(e,t,n,r){var i,a=[],o={dcs:this._dcs,page:this};for(i in e)e[i]&&(e[i].colorStyle="capture"==i&&r?r:t,e[i].bHeader=n,a.push(new tt(s({},e[i],{name:i}),o)));return a},t.getHtmlElement=function(){return this.element},e}();function st(n){n.forEach(function(e,t){e.destroy(),n[t]=null})}function ct(){return{icon:B.font+" "+B.iconLoad,onclick:(n=S(E().mark(function e(t,n){var r,i,a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.dcs,!(o=r.getLoadCallback())){e.next=18;break}if(e.prev=3,i=r.getCurrentPage())return r.emit("blurPage"),a=i.options.documentEditorSettings,a=Fe(void 0===a?{}:a),e.next=11,o(n);e.next=13;break;case 11:(o=e.sent)&&!i.isDestroyed&&ht(o,r,a);case 13:return e.prev=13,r.emit("focusPage"),e.finish(13);case 16:e.next=19;break;case 18:!function(t){var n=document.createElement("input");n.style.display="none",document.body.appendChild(n),n.addEventListener("click",function(e){e.stopPropagation()}),n.type="file",n.multiple=!0,n.accept="image/png,image/jpeg,image/jpg",n.click(),n.onchange=function(){var e;""!=n.value&&((e=t.dcs).showLoading("load local image"),e.emit("blurPage"),ut({el:n,context:t,callback:lt})),document.body.removeChild(n)}}((t.target,n));case 19:case"end":return e.stop()}},e,null,[[3,,13,16]])})),function(e,t){return n.apply(this,arguments)}),className:B.BUTTON_PREFIX+"loadBtn",text:"Load"};var n}function ut(e){e.context.dcs.captureLoop.getIsLooping()?setTimeout(ut,200,e):e.callback.apply(null,[e.el,e.context])}function lt(e,t){return dt.apply(this,arguments)}function dt(){return(dt=S(E().mark(function e(t,n){var r,i,a,o,s,c,u;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.dcs,i=t.files,e.prev=2,a=r.getCurrentPage(),a=a.options.documentEditorSettings,a=Fe(void 0===a?{}:a),s=!(o=[]),c=0;case 9:if(!(c<i.length)){e.next=22;break}if("application/pdf"==(u=i[c]).type||"image/tiff"==u.type)return 0==s&&r.emit("video-error",P.IMAGE_FORMAT_INVALID),s=!0,e.abrupt("continue",19);e.next=15;break;case 15:return e.next=17,Qe(i[c]);case 17:u=e.sent,o.push(u);case 19:c++,e.next=9;break;case 22:0<o.length&&!n.page.isDestroyed&&ht(o,r,a);case 23:return e.prev=23,r.hideLoading("load local image"),t.value=null,t.files=null,t.onchange=null,t=null,r.emit("focusPage"),e.finish(23);case 31:case"end":return e.stop()}},e,null,[[2,,23,31]])}))).apply(this,arguments)}function ht(){ft.apply(this,arguments)}function ft(){return(ft=S(E().mark(function e(t,n,r){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.showLoading("handleBlobList"),!function(){return ke.apply(this,arguments)}(n,t,Z,r).finally(function(){n.hideLoading("handleBlobList")});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pt(){return{icon:B.font+" "+B.iconCapture,className:B.BUTTON_PREFIX+"captureBtn",onclick:function(e,t){t.dcs.captureLoop.startManualCapture(t)}}}function gt(){return{icon:B.font+" "+B.iconClose,className:B.BUTTON_PREFIX+"closeBtn",onclick:(n=S(E().mark(function e(t,n){var r,i,a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.dcs,i=n.page,a=!1,0<i.getImageCount()&&(a=!0),i.pageName==$&&r.config.scannerViewer.funcConfirmExit)return e.next=6,r.config.scannerViewer.funcConfirmExit(a);e.next=13;break;case 6:if((o=e.sent)==ie)return e.abrupt("return");e.next=11;break;case 11:if(o!=g&&o!=v)return e.abrupt("return");e.next=13;break;case 13:if(void 0===o&&(o=g),i._isClosed)return e.next=17,r.navigateBack();e.next=18;break;case 17:return e.abrupt("return");case 18:return i._isClosed=!0,r.emit("blurPage"),r.stop(),e.next=23,r.navigateBack();case 23:i.pageName!=$||o!=g&&o!=v||r.exit(i.getDvs());case 24:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})};var n}function vt(){return{icon:B.font+" "+B.iconSwitch,onclick:function(e,t){var n=t.dcs,t=(n.emit("blurPage"),n.showLoading("switch camera button click"),n.config.scannerViewer.resolution.defaultValue);n.toggleCamera(t.width,t.height).finally(function(){n.hideLoading("switch camera button click"),n.emit("focusPage")})},className:B.BUTTON_PREFIX+"toggleCamera",text:"Switch Camera"}}function mt(){return{icon:B.font+" "+B.iconAutoCapture,className:B.BUTTON_PREFIX+"autoCapture",onmount:function(e,t){},onSelected:function(e,t){var n=t.dcs,r=n.config;e?(r.scannerViewer.autoDetect.enableAutoDetect=!0,r.scannerViewer.autoScan.enableAutoScan=!0):r.scannerViewer.autoScan.enableAutoScan=!1,n.captureLoop.loadLoopTypeFromConfig(),n.captureLoop.startLoop(t)}}}function bt(){return{icon:B.font+" "+B.iconResolution,className:B.BUTTON_PREFIX+"resBtn",dropdown:{multiple:!1,list:function(e,t){var s=t.dcs;return new Promise(function(o,e){s.once("onPlayed",S(E().mark(function e(){var t,n,r,i,a;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=R(s,"config.scannerViewer.resolution"),t=n.valueList,n=n.defaultValue,s.showLoading("resolution list"),e.prev=3,t&&t.length){e.next=12;break}return e.next=7,s.getResolution();case 7:r=e.sent,n=n||{width:1280,height:720},t=r.map(function(e){return{label:e.width+"×"+e.height,value:e}}),e.next=13;break;case 12:n=n||t[t.length-1].value;case 13:if((i=_t(n,t))<0)return e.next=17,s.getCurrentResolution();e.next=35;break;case 17:if(!(a=e.sent)||a.width==n.width&&a.height==n.height){e.next=34;break}return e.prev=19,e.next=22,s.setResolution(n);case 22:return e.next=24,s.getCurrentResolution();case 24:a=e.sent,(i=_t(a,t))<0&&(t.push({value:a,label:a.width+"×"+a.height}),i=t.length-1),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(19);case 32:e.next=35;break;case 34:i<0&&(t.push({value:a,label:a.width+"×"+a.height}),i=t.length-1);case 35:o(t.map(function(e,t){return{value:e.value,text:e.label,icon:"checkBox",isSelected:t===i}}));case 36:return e.prev=36,s.hideLoading("resolution list"),e.finish(36);case 39:case"end":return e.stop()}},e,null,[[3,,36,39],[19,29]])}))),s.on("resetResolution",function(){var e,t=s.config.scannerViewer.resolution.defaultValue,n=s.config.scannerViewer.resolution.valueList,r=_t(t,n),t=(r<0&&(n.push({value:t,label:t.width+"×"+t.height}),r=n.length-1),document.getElementsByClassName("resolutionList"));if(t&&0<t.length){var i=t[0];if(i.childNodes)for(var a=0;a<i.childNodes.length;a++)e=i.childNodes[a],a==r&&i.onclick(e)}}),s.on("resetRealResolution",function(){var e=s.config.scannerViewer.resolution.defaultValue;s.showLoading("resolution button click"),s.setResolution(e).then(function(e){s.hideLoading("resolution button click")})})})},onclick:function(e,t,n){var r=n.dcs;r.showLoading("resolution button click"),r.setResolution(t).then(function(e){t.width!=e.width&&t.height!=e.height&&r.emit("video-error",P.RESOLUTION_INVALID),r.config.scannerViewer.resolution.defaultValue=t,r.hideLoading("resolution button click"),r.getCameraView().resetVideoInfo()})}},onclick:function(e,t){var n=t.dcs;n.emit("blurPage"),n.once("hideResolutionList",function(){n.emit("focusPage")})}}}function _t(e,t){var n=e.width,r=e.height,e=t.findIndex(function(e){var e=e.value||{},t=e.width,e=e.height;return t===n&&e===r});return e=e<0?t.findIndex(function(e){var e=e.value||{},t=e.width,e=e.height;return t===r&&e===n}):e}function yt(){return{icon:B.font+" "+B.iconAutoDetect,onmount:function(e,t){},onSelected:function(e,t){var n=t.dcs,r=n.config;e?r.scannerViewer.autoDetect.enableAutoDetect=!0:(r.scannerViewer.autoDetect.enableAutoDetect=!1,r.scannerViewer.autoScan.enableAutoScan=!1),n.captureLoop.loadLoopTypeFromConfig(),n.captureLoop.startLoop(t)},className:B.BUTTON_PREFIX+"detectCamera"}}var xt="dynamsoft_camera_scan_page_style",wt=t("initElement"),kt=t("addStyle"),N=function(r){function e(e,t,n){t=r.call(this,e,t,n)||this;return Object.defineProperty(a(t),kt,{value:It}),Object.defineProperty(a(t),wt,{value:Ct}),t.fileName=null,t._nextViewerPage=null,t.pageName=$,d(a(t),wt)[wt](),t.attachDefaultEvent(),t.initFileName(e),t}o(e,r);var t=e.prototype;return t.initFileName=function(e){this.fileName=Z,this._fileWrapper.findFile(this.fileName)||this._fileWrapper.createFile(this.fileName)},t.getFileName=function(){return this.fileName},t.getImageCount=function(){return this._fileWrapper.getFileCount(this.fileName)},t.attachDefaultEvent=function(){var a=this;this.on("onSaveCapture",function(e,t,n,r,i){return Ce(t.dcs,n,r,i,a.fileName)})},t.setDefaultColors=function(e,t,n,r){this.setDefaultBackgroundColors(e,t,n),e.color||(e.color="#fff"),e.selectedColor||(e.selectedColor="#fe8e14"),t.maskColor||(t.maskColor="#323232"),n.color||(n.color="#fff"),n.selectedColor||(n.selectedColor="#fe8e14"),r.color||(r.color="#fff"),r.background||(r.background="#fe8e14")},t.getOptionsEl=function(){var e=this.options.scannerViewer,e=(void 0===e?{}:e).element;return e=M(e)?document.getElementById(e):e},t.getHeaderButtons=function(){var e=this.options,t=e.headerButtons,e=e.scannerViewer,e=void 0===e?{}:e,n=e.scanButtonStyle,e=e.headerStyle;return r.prototype.createIconItems.call(this,void 0===t?{}:t,void 0===e?{}:e,!0,void 0===n?{}:n)},t.getFooterButtons=function(){var e=this.options,t=e.footerButtons,e=e.scannerViewer,e=void 0===e?{}:e,n=e.scanButtonStyle,e=e.footerStyle;return r.prototype.createIconItems.call(this,void 0===t?{}:t,void 0===e?{}:e,!1,void 0===n?{}:n)},t.initPageOption=function(e,t){e.scannerViewer||(e.scannerViewer=h(t.config.scannerViewer),t.config&&t.config.scannerViewer&&t.config.scannerViewer.element&&(e.scannerViewer.element=t.config.scannerViewer.element));var t=e.scannerViewer,n=t.resolution,r=t.autoScan,i=t.autoDetect,a=t.switchCamera,t=t.loadLocalFile,o={icon:B.font+" "+B.iconContinuous,className:B.BUTTON_PREFIX+"continuousMode"},n={headerButtons:{changeResBtn:u(n,bt()),autoDetect:s({isSelected:(null==r?void 0:r.enableAutoScan)||(null==i?void 0:i.enableAutoDetect)},u(i,yt())),closeBtn:gt()},footerButtons:{load:u(t,ct()),toggleCamera:u(a,vt()),capture:pt(),autoCapture:s({isSelected:null==r?void 0:r.enableAutoScan},u(r,mt())),multipleBtn:{onclick:He,onmount:function(e){e.innerHTML='<img class="'+B.previewImg+'">\n<div class="dynamsoft-camera-imgCount '+B.displayNone+'"></div>\n<div class="dynamsoft-camera-nextArr '+B.font+" "+B.iconBack+'"></div>',L.log(e)},className:B.buttonMultipleImg+" "+B.displayNone,text:"Continuous"},continuous:o},scannerViewer:{resolution:{defaultValue:{width:1280,height:720}},fullScreen:!1}};this.options=b(e,n)},t.show=function(){var e=S(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.prototype.show.call(this);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.generatePreview=function(){var e=S(E().mark(function e(){var t,n,r,i,a,o,s,c,u,l,d;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._fileWrapper.openFile(this.fileName),n=t.length,r=null==(r=this.element)?void 0:r.querySelector("."+B.buttonMultipleImg),i=null==r?void 0:r.querySelector("."+B.previewImg),r&&i){e.next=6;break}return e.abrupt("return");case 6:if((a=null==r?void 0:r.querySelector(".dynamsoft-camera-imgCount"))&&(0<n?(a.innerText=String(n),a.classList.remove(B.displayNone)):(a.innerText="",a.classList.add(B.displayNone))),n<=0)return r.classList.add(B.displayNone),i.src!=Ze&&""!=i.src&&(F.revokeObjectURL(i.src),i.src=Ze),i.setAttribute("data",""),e.abrupt("return");e.next=13;break;case 13:if(a=t[n-1],!(o=this._dvsWrapper.getCustomDataSync(a))){e.next=41;break}if(s=o.detectArea,!0!==o.preview){e.next=23;break}if(_(u=M(u=i.getAttribute("data"))&&""!=u?JSON.parse(u):u,s))return e.abrupt("return");e.next=22;break;case 22:delete o.preview;case 23:if(i.src!=Ze&&""!=i.src&&(F.revokeObjectURL(i.src),i.src=Ze),!o.preview){e.next=28;break}c=o.preview,e.next=38;break;case 28:return e.next=30,D(o.oriBlob);case 30:return u=e.sent,s&&(l={cornerPoints:s}),e.next=34,Pe(this._dcs,l,u,!1,!1);case 34:d=e.sent,c=d.preview,je(d),0;case 38:i.src=F.createURL(c),c.imageData&&delete c.imageData,s&&i.setAttribute("data",JSON.stringify(s));case 41:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.playVideo=function(){var e=S(E().mark(function e(){var t,n,r,i,a,o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._dcs,n=this.element,n=n.children[1],t.showLoading("ShowDocumentScanPage"),e.prev=4,i=this.options,i=i.scannerViewer,a=(i=void 0===i?{}:i).resolution,a=void 0===a?{}:a,r=i.fullScreen,i=i.deviceId,i=void 0===i?"":i,o=a.valueList,o=void 0===o?[]:o,(a=a.defaultValue)||o&&0<o.length&&(a=o[o.length-1].value),!t.isRunPlaying()){e.next=13;break}if(t.getCameraManage().getCurrentCamera())return e.next=13,t.closeSource();e.next=13;break;case 13:if(""!=i)return e.next=16,t.selectSource(i);e.next=16;break;case 16:return s=(o={width:void 0,height:void 0}).width,c=o.height,a&&(s=a.width||void 0,c=a.height||void 0),e.next=20,t.play(n,s,c,r);case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(4),e.next=26,t.navigateBack();case 26:t.emit(te,e.t0);case 27:return e.prev=27,t.hideLoading("ShowDocumentScanPage"),e.finish(27);case 30:case"end":return e.stop()}},e,this,[[4,22,27,30]])}));return function(){return e.apply(this,arguments)}}(),t.queryPreviewImageElement=function(){var e=null==(e=this.element)?void 0:e.querySelector("."+B.buttonMultipleImg);return e?null==e?void 0:e.querySelector("."+B.previewImg):null},t.destroy=function(){var e=this.queryPreviewImageElement();e&&(e.src&&F.revokeObjectURL(e.src),e.onload=null,e.onerror=null),this.pageName==$&&(null!=(e=this._fileWrapper)&&e.removeFile(this._dvsWrapper,this.fileName),null!=(e=this._dvs)&&null!=(e=e.File)&&e.removeFile(this.fileName),this._dcs.exit(this._dvs)),this._nextViewerPage&&(this._nextViewerPage.destroy(),this._nextViewerPage=null),r.prototype.destroy.call(this)},t.setNextViewerPage=function(e){this._nextViewerPage=e},t.clickMultipleImage=function(){var e=S(E().mark(function e(){var t,n,r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._nextViewerPage)return t=this._nextViewerPage,n=this._fileWrapper.openFile(this.fileName),e.next=5,t.syncFiles(!1,n);e.next=13;break;case 5:return n=e.sent,t.gotoViewPage(n-1),e.next=9,this._dcs.navigateToPage(t);case 9:this.hide(),this._nextViewerPage=null,e.next=16;break;case 13:return r=this._dcs.config.documentEditorSettings,r=void 0===r?{}:r,e.next=16,function(){return Ne.apply(this,arguments)}(this._dcs,this._dvs,r,Z,!0);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.removeDataByIndex=function(e,t){e=this._fileWrapper.removeByIndexInFile(e,t);this._dvsWrapper.removeSync(e)},t.insertDataByIndex=function(e,t,n){n=0<=n?this._dvs.DataControl.insertSync(e,[t],n):this._dvs.DataControl.appendSync(e,[t]);return n&&1==n.length?n[0]:null},t.enableMultiImages=function(){var e;this.element&&((e=null==(e=this.element)?void 0:e.querySelector("."+B.iconContinuous))&&e.classList.add(B.displayNone),(e=null==(e=this.element)?void 0:e.querySelector("."+B.buttonMultipleImg))&&e.classList.remove(B.displayNone))},t.moveMultipleImgPosition=function(){var e,t;this.element&&(e=null==(e=this.element)?void 0:e.querySelector("."+B.buttonMultipleImg))&&(e.style.top="0",e.style.right="0",e.style.position="relative",(t=null==(t=this.element)?void 0:t.querySelector("."+B.BUTTON_PREFIX+"continuousMode"))&&t.appendChild(e),(null==(t=this.element)?void 0:t.querySelector("."+B.iconContinuous)).classList.add(B.displayNone))},t.refreshPreviewWhenChanged=function(){var e=S(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.generatePreview();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.setPreviewImageFlag=function(){var e=this._fileWrapper.openFile(this.fileName);if(0<e.length)for(var t=e.length,n=t-1,r=0;r<t;r++){var i=e[r],i=this._dvsWrapper.getCustomDataSync(i);i&&(r==n?i.preview=!0:void 0!==i.preview&&delete i.preview)}},e}(n);function Ct(){var e=this.options,t=e.scannerViewer,t=void 0===t?{}:t,n=t.headerStyle,n=void 0===n?{}:n,r=t.bodyStyle,r=void 0===r?{}:r,i=t.footerStyle,i=void 0===i?{}:i,t=t.scanButtonStyle,t=(this.setDefaultColors(n,r,i,void 0===t?{}:t),'\n        <header style="background:'+n.background+'"></header>\n        <div style="background:'+r.background+'" class="videoContainer"></div>\n        <footer style="background:'+i.background+'" class="buttonList">\n            '+(e.title?'<div class="modeTitle">'+e.title+"</div>":"")+"\n        </footer>\n        ");this.template=t,this.className=B.documentScanPage,this.createEl(),d(this,kt)[kt]()}function It(){var e=this.options.scannerViewer,e=void 0===e?{}:e,t=e.headerStyle,t=void 0===t?{}:t,n=e.bodyStyle,r=e.footerStyle,r=void 0===r?{}:r,e=e.scanButtonStyle,e="\n."+B.documentScanPage+" ."+B.headerSelected+" i {\n  color: "+t.selectedColor+" !important;\n}\n."+B.documentScanPage+" ."+B.footerSelected+" i {\n  color: "+r.selectedColor+" !important;\n}\n@keyframes dynamsoft-camera-glow-keyframe-insert {\n  0% {border: 3px solid transparent;}\n  100% {border: 3px solid "+(void 0===e?{}:e).background+";}\n}\n."+B.documentScanPage+" .resolutionList .checkBox {\n  border: 1px solid "+t.color+";\n}\n."+B.documentScanPage+" .resolutionList ."+B.ddlSelectedItem+" .checkBox {\n  background-color: "+t.selectedColor+";\n}\n."+B.buttonMultipleImg+" .dynamsoft-camera-imgCount {\n  color: "+r.color+";\n  background: "+r.selectedColor+";\n}\n."+B.buttonMultipleImg+" .dynamsoft-camera-nextArr {\n  color: "+r.selectedColor+";\n}\n.dcs-loading-content div>div {\n  background: "+(void 0===n?{}:n).maskColor+";\n}\n",t=document.getElementById(xt);if(t)t.innerHTML=e;else{(t=document.createElement("style")).type="text/css",t.id=xt;try{t.appendChild(document.createTextNode(e))}catch(e){}document.body.appendChild(t)}}function Pt(){return{icon:B.font+" "+B.iconFilter,className:B.BUTTON_PREFIX+"filter",onclick:function(e,t){var n,r,t=t.dcs,i=t.getCurrentPage();i&&(n=i.getDvs(),r=i.getViewerUid(),i.getViewerByUid(r).getCurrentIndex()<0||function(){Dt.apply(this,arguments)}(e,n,r,t))}}}function Dt(){return(Dt=S(E().mark(function e(t,f,n,p){var o,g,r,i,a,s,c,v,u,l,d,h,m,b,_,y,x,w,k,C,I,P,D;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D=function(){var n,e,t,r=document.createElement("span"),i=document.createElement("div");i.className=""+B.filterCheckBox,n=document.createElement("span"),(e=document.createElement("input")).type="checkBox",e.id="dynamsoft-camera-"+Ke(6),i.appendChild(n),n.appendChild(e);var a=(null==(a=p.config.documentEditorSettings)?void 0:a.filter).applyToAll,a=(a&&a.enableApplyToAll&&(e.checked=!0),(t=document.createElement("label")).innerHTML=a.label,t.setAttribute("for",e.id),r.appendChild(i),r.appendChild(t),document.createElement("span"));return a.className="dynamsoft-filter-close dynamsoft-camera-font dynamsoft-camera-icon-arrow",a.onclick=function(){T(p),o=!1},r.appendChild(a),e.checked?(i.classList.add(B.filterCheckedBox),n.style.background=""):(i.classList.remove(B.filterCheckedBox),n.style.background="none"),e.addEventListener("click",function(){var e=this.checked,t=(e?(i.classList.add(B.filterCheckedBox),n.style.background="",g?p.filterApplyToAllValue=g.dataset.filterValue:(e=!1,p.filterApplyToAllValue=void 0)):(i.classList.remove(B.filterCheckedBox),n.style.background="none",p.filterApplyToAllValue=void 0),null==(t=p.config.documentEditorSettings)?void 0:t.filter);t.applyToAll||(t.applyToAll={}),t.applyToAll.enableApplyToAll=e}),r},P=function(){var e;null!=(e=g)&&e.classList.remove(B.filterSelectedItem),null!=a&&null!=(e=a.querySelector("."+B.filterDropDown))&&null!=(e=e.querySelector("."+B.filterSelectedItem))&&e.classList.remove(B.filterSelectedItem)},I=function(){return(I=S(E().mark(function e(t){var n,r,i,a,o,s,c,u,l,d,h;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),(n=t.target)===g||"LI"!==n.tagName)return e.abrupt("return");e.next=4;break;case 4:if(p.showLoading("click filter"),e.prev=5,o=p.getCurrentPage(),0<=(a=v.getCurrentIndex()))return r=v.getUidByIndex(a),s=o.GetFilterDirty(),e.next=13,o.getCurImageData(r);e.next=15;break;case 13:i=e.sent,s||o.ClearFilterDirty();case 15:if(r&&i)return c=v.getRotateAngle(a),P(),(g=n).classList.add(B.filterSelectedItem),u=n.dataset.filterValue,e.next=23,ge(i);e.next=38;break;case 23:if(l=e.sent,u!==A.ORIGINAL){e.next=28;break}d=l,e.next=31;break;case 28:return e.next=30,p.filterHandlerByIImageData(i,l,u);case 30:d=e.sent;case 31:return h=p.config.documentEditorSettings.filter,h=h.applyToAll,p.curFilterValue=u,h&&h.enableApplyToAll?p.filterApplyToAllValue=u:p.filterApplyToAllValue=void 0,e.next=37,Be(d,f,r,!1,{filterValue:u,bitDepth:d.imageBitDepth});case 37:v.rotate(c);case 38:return e.prev=38,p.hideLoading("click filter"),e.finish(38);case 41:case"end":return e.stop()}},e,null,[[5,,38,41]])}))).apply(this,arguments)},C=function(e){return I.apply(this,arguments)},k=function(e,t){e&&(e.classList[t?"remove":"add"](B.displayNone),t&&g&&(e.scrollLeft=g.offsetLeft),o=t)},w=function(){var e=null==a?void 0:a.querySelector("."+B.filterDropDown);k(e,!1)},g=null,r=o=!(x=function(){r||(v.on(J,w),v.on(z,w),v.on(Q,function(){T(p),o=!1}),r=!0)}),!(i=p.getCurrentPage())||i.isDestroyed)return e.abrupt("return");e.next=13;break;case 13:if(a=i.getHtmlElement()){e.next=16;break}return e.abrupt("return");case 16:if(s=null==a?void 0:a.querySelector("."+B.BUTTON_PREFIX+"filter"),c=null==s?void 0:s.querySelector("."+B.filterDropDown),v=i.getViewerByUid(n),(u=v.getCurrentIndex())<0)return c&&(Me(c),c.remove()),e.abrupt("return");e.next=23;break;case 23:if(M(l=v.getUidByIndex(u))&&""!=l){e.next=27;break}return c&&(Me(c),c.remove()),e.abrupt("return");case 27:if(c&&(d=c.getAttribute("data")),c&&d==l){e.next=39;break}return h=!c,c?(Me(c),m=null==(m=c)?void 0:m.querySelector("ul")):(c=document.createElement("span"),m=document.createElement("ul"),c.appendChild(m)),e.next=33,i.appendFilterDropdownImages(v);case 33:_=e.sent,b="",_&&(m.appendChild(_),g=null==(_=m)?void 0:_.querySelector("."+B.filterSelectedItem),_=!1,(null==s?void 0:s.querySelector("."+B.filterApplyAll))?_=!0:(y=p.config.documentEditorSettings.filter,(y=y.applyToAll)&&"visible"==y.visibility&&(y=D())&&(y.classList.add(B.filterApplyAll),c.insertBefore(y,c.firstChild),_=!0)),b=_?"dynamsoft-camera-H100":"dynamsoft-camera-H71"),c.className=B.filterDropDown+" "+B.displayNone+" "+b,h&&(c.addEventListener("click",function(){var t=S(E().mark(function e(t){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C(t);case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),s.appendChild(c)),l&&c.setAttribute("data",l);case 39:k(c,o=!o),t.stopPropagation(),x();case 43:case"end":return e.stop()}},e)}))).apply(this,arguments)}function St(){return{icon:B.font+" "+B.iconInsert,className:B.BUTTON_PREFIX+"insert",onclick:function(e,t){var n,r,i,t=t.dcs,a=t.getCurrentPage();function o(e){var t=e.dcs;t.captureLoop.getIsLooping()?setTimeout(o,200,e):e.callback.apply(null,[e.selectedFile,t])}function s(e,t){var n;e&&("application/pdf"==e.type||"image/tiff"==e.type?t.emit("video-error",P.IMAGE_FORMAT_INVALID):(n=t.getCurrentPage())instanceof wn&&(t.emit("blurPage"),t.showLoading("insert - load image"),o({selectedFile:e,dcs:t,callback:n.selectedFile})))}function c(t,n){var r=document.createElement("input");r.style.display="none",document.body.appendChild(r),r.addEventListener("click",function(e){e.stopPropagation()}),r.type="file",r.multiple=!1,r.accept="image/png,image/jpeg,image/jpg";r.onchange=function(){var e;""!==r.value&&0<(e=r.files).length&&(n&&n(e[0],t),n=null),document.body.removeChild(r),r.value=null,r.files=null,r.onchange=null,r=null},r.click()}a&&((n=a._dcs.getPreviousPage())&&n instanceof fn&&n.exitReuseMode(),r=t,t=(n=a).getDvs(),i=!1,r.showInsertPage({fileName:n.getPageFileName(),footerButtons:{capture:{onclick:function(e,t){i||(i=!0,r.getCurrentPage()instanceof wn&&r.captureLoop.startManualCapture({dcs:r}),i=!1)}},load:{onclick:function(e,t){r.getCurrentPage()instanceof wn&&c(r,s)}}}},t),r.emit("focusPage"))}}}var Et="dynamsoft_camera_viewer_style",At=t("bindCameraEvents"),c=t("getViewer"),Bt=t("createCameraDvs"),Lt=t("removeCameraDvs"),Tt=t("setViewerStyle"),Vt=t("addStyle"),Mt=function(r){function i(e,t,n){t=r.call(this,e,t,n)||this;return Object.defineProperty(a(t),Vt,{value:Ht}),Object.defineProperty(a(t),Tt,{value:Ot}),Object.defineProperty(a(t),Lt,{value:Ut}),Object.defineProperty(a(t),Bt,{value:Nt}),Object.defineProperty(a(t),c,{value:Ft}),Object.defineProperty(a(t),At,{value:Rt}),t._backFileName=null,t._initFileName=null,t._pageFileName=null,t._viewerId=null,t._editUid=null,t._zooming=!0,t._savedUid=null,t._copyRefMap={},t._isHandlingPageUid=!1,t._nextHandlePageUid=null,t._backInfo={origApplyToAll:"",origDocumentData:{},initDocumentData:{}},t._currentInfo={documentData:{}},t._nextViewerPage=null,t._bSyncViewerDataFromBackupData=!1,t._backFileName=e.fileName,t._initFileName=e.initFileName,t._pageFileName=e.fileName,t.setPageFilename(),t.options.initDocumentData&&(t._backInfo.initDocumentData=t.options.initDocumentData),t.setZooming(),d(a(t),Bt)[Bt](t.options),d(a(t),Vt)[Vt](),t}o(i,r);var e=i.prototype;return e.setPageFilename=function(){},e.setZooming=function(){},e.getPageFileName=function(){return this._pageFileName},e.getViewerUid=function(){return this._viewerId},e.getViewerByUid=function(e){return this._dvs.ViewControl.getViewerByUid(e)},e.getImageCount=function(){var e=d(this,c)[c]();return e?e.getCurrentPageUids().length:0},e.initPageOption=function(e,t){e&&0==e.fromInternal&&e.documentEditorSettings?this.options=e||{}:(this.options=b(e||{},{scannerViewer:h(t.config.scannerViewer),documentEditorSettings:h(t.config.documentEditorSettings)}),t.config&&t.config.documentEditorSettings&&t.config.documentEditorSettings.element&&(this.options.documentEditorSettings.element=t.config.documentEditorSettings.element))},e.destroy=function(){this.isDestroyed=!0,this._nextViewerPage&&(this._nextViewerPage.destroy(),this._nextViewerPage=null),d(this,Lt)[Lt](),r.prototype.destroy.call(this)},e.getOptionsEl=function(){var e=this.options.documentEditorSettings,e=(void 0===e?{}:e).element;return e=M(e)?document.getElementById(e):e},e.gotoViewPage=function(e){var t=this.getViewerByUid(this._viewerId);if(t){var n=t.getCurrentPageUids();if(0<=e&&e<n.length)return t.gotoPage(e),!0}return!1},e.handlePageByIndex=function(){var t=S(E().mark(function e(t){var n,r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getViewerByUid(this._viewerId),n=r.getCurrentPageUids(),!(0<=t&&t<n.length)){e.next=9;break}if(r.gotoPage(t),M(n=r.getUidByIndex(t))&&""!=n)return r=this._dvs,e.next=9,this.handlePageByUid(n,r);e.next=9;break;case 9:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),e.handlePageByUid=function(){var n=S(E().mark(function e(t,n){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initOrigDataByUid(t);case 2:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),e.getCurrentIndex=function(){return this.getViewerByUid(this._viewerId).getCurrentIndex()},e.removePageFile=function(){this._pageFileName&&(L.log("remove file: "+this._pageFileName),this._dvs.File.removeFile(this._pageFileName),this._pageFileName=null)},e.show=function(){var e=S(E().mark(function e(){var t,n;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(!(n=d(this,c)[c]())){e.next=12;break}if(0<=(t=n.getCurrentIndex()))return n=n.getUidByIndex(t),e.next=9,this.handlePageByUid(n,this._dvs);e.next=9;break;case 9:if(this.isDestroyed){e.next=12;break}return e.next=12,r.prototype.show.call(this);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),e.isVisible=function(){var e=!1;return e=this.element?!this.element.classList.contains(B.displayNone):e},e.backupImageDataFromUids=function(e){for(var t,n,r=e.length,i=0;i<r;i++)M(t=e[i])&&""!=t&&(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(t),this.backupImageDataFromSrcUid(t,n))},e.backupImageDataFromSrcUid=function(e,t){this.isDestroyed||(this._backInfo.origDocumentData[e]=t?{detectArea:t.detectArea,angle:t.angle,filterValue:t.filterValue}:{detectArea:null,angle:0,filterValue:A.ORIGINAL})},e.isCropPage=function(){return!1},e.fileDataCopyOneToViewer=function(e,t,n,r,i){var a,o,s=null==(s=this._dvsWrapper)?void 0:s.getCustomDataSync(n),s=s?b(s,{}):{},c=s.oriBlob,u=s.resBlob;return t?c&&c.imageData&&(a=c.imageData,o=Te(c)):u&&u.imageData&&(a=u.imageData,o=Te(u)),a&&o||(a=null==(t=this._dvsWrapper)?void 0:t.getOriDataSync(n),(u=Ve(o=null==(c=this._dvsWrapper)?void 0:c.getMetaDataSync(n))).imageData=a,s.oriBlob||(s.oriBlob=w(u))),t=r<0||i<=r?this._dvs.DataControl.appendSync(this._pageFileName,[{oriData:a,metadata:o,customData:s}]):this._dvs.DataControl.insertSync(this._pageFileName,[{oriData:a,metadata:o,customData:s}],r),o=a=null,t&&1==t.length?(c=t[0],this._copyRefMap[c]=n,c):null},e.fileDataCopyToViewer=function(e){for(var t,n=this.isCropPage(),r=e.length,i=0;i<r;i++)M(t=e[i])&&""!=t&&this.fileDataCopyOneToViewer(!1,n,t,-1,r)},e.initOrigDataByUid=function(){var t=S(E().mark(function e(t){var n,r,i,a,o,s;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._dvs,this.isCropPage(),this.isDestroyed)return e.abrupt("return");e.next=4;break;case 4:if(M(t)&&""!=t){e.next=6;break}return e.abrupt("return");case 6:if(n=this._dvsWrapper.getDataRootSync(t)){e.next=9;break}return e.abrupt("return");case 9:if(r=n.customData,r=void 0===r?{}:r,i=n.metadata,i=void 0===i?{}:i,s=n.oriData,o=!1,r.oriBlob?a=r.oriBlob:(a=s,r.oriBlob=w(s)),M(a))return e.next=15,fetch(a);e.next=20;break;case 15:return s=e.sent,e.next=18,s.blob();case 18:a=e.sent,o=!0;case 20:if(a instanceof Blob)return e.next=23,Re(a);e.next=26;break;case 23:a=e.sent,1==i.bitDepth&&(a.imageBitDepth=1),o=!0;case 26:o&&(r.oriBlob=w(a),r.angle=0);case 27:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),e.ifOldDocumentDataChanged=function(){var e=this.getViewerByUid(this._viewerId),t=!1;if(e)for(var n=e.getCurrentPageUids(),r=0;r<n.length;r++){var i=n[r];if(M(i)&&""!=i){var a=this._copyRefMap[i];if(M(a)&&""!=a){a=this._backInfo.origDocumentData[a];if(!a)return!0;var o=null==(o=this._dvsWrapper)?void 0:o.getCustomDataSync(i);if(o){i=o.oriBlob;if(t=this.compareOldValueChanged(a,o,i))break}}}}return t},e.compareOldValueChanged=function(e,t,n){if(!e||!t)return!0;if(void 0===e.detectArea){if(n){var r=n.imageWidth,n=n.imageHeight;if(!$e(t.detectArea,r,n))return!0}}else if(!_(e.detectArea,t.detectArea))return!0;if(void 0===e.angle){if(0!=t.angle)return!0}else if(e.angle!=t.angle)return!0;return!Oe(e.filterValue,t.filterValue)},e.getRefUid=function(e,t){if(this.isDestroyed)return null;e=this._copyRefMap[e];if(t){var n=this._dcs.getPreviousPageByPage(this);if(n&&n instanceof i)return n.getRefUid(e,t)}return M(e)&&""!=e?e:null},e.setNextViewerPage=function(e){this._nextViewerPage=e},e.syncFiles=function(){var n=S(E().mark(function e(t,n){var r,i,a,o,s,c,u,l,d,h,f,p,g,v,m,b,_,y,x,w;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(r=this.getViewerByUid(this._viewerId),i=0,!r){e.next=74;break}if(!(a=r.getCurrentPageUids())){e.next=73;break}c=[],u=[],l=a.length,o=0;case 9:if(!(o<l)){e.next=33;break}if(M(d=a[o])&&""!=d){e.next=13;break}return e.abrupt("continue",30);case 13:if(M(h=this._copyRefMap[d])&&""!=h){e.next=17;break}return c.push(o),e.abrupt("continue",30);case 17:f=!1,s=0;case 19:if(!(s<n.length)){e.next=29;break}if(M(p=n[s])&&""!=p){e.next=23;break}return e.abrupt("continue",26);case 23:if(p==h)return f=!0,e.abrupt("break",29);e.next=26;break;case 26:s++,e.next=19;break;case 29:f||(c.push(o),this._dvsWrapper.removeSync(h),delete this._copyRefMap[d],delete this._backInfo.origDocumentData[h]);case 30:o++,e.next=9;break;case 33:0<c.length&&(l-=c.length,r.removeSync(c)),s=0;case 35:if(!(s<n.length)){e.next=43;break}if(M(g=n[s])&&""!=g){e.next=39;break}return e.abrupt("continue",40);case 39:this._backInfo.origDocumentData[g]||u.push({uid:g,index:s});case 40:s++,e.next=35;break;case 43:if(v=this.isCropPage(),!(0<u.length)){e.next=71;break}m=[],s=0;case 47:if(!(s<u.length)){e.next=60;break}if(b=u[s],M(_=b.uid)&&""!=_){e.next=52;break}return e.abrupt("continue",57);case 52:if(this._backInfo.origDocumentData[_])return e.abrupt("continue",57);e.next=54;break;case 54:x=null==(x=this._dvsWrapper)?void 0:x.getCustomDataSync(_),this.backupImageDataFromSrcUid(_,x),this._pageFileName&&(x=this.fileDataCopyOneToViewer(t,v,_,b.index,l))&&(l++,m.push(x),this._copyRefMap[x]=_,0);case 57:s++,e.next=47;break;case 60:if(!this._pageFileName){e.next=71;break}s=0;case 62:if(!(s<m.length)){e.next=71;break}if(M(y=m[s])&&""!=y){e.next=66;break}return e.abrupt("continue",68);case 66:return e.next=68,this.fillOneCustomDataByUidFirstTime(y,this.isCropPage(),!0);case 68:s++,e.next=62;break;case 71:(x=this._dvs.File.openFile(this._pageFileName,r.uid))&&(i=x.length);case 73:this._nextViewerPage&&(w=r.getCurrentPageUids(),this._nextViewerPage.syncFiles(t,w));case 74:return e.abrupt("return",i);case 75:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),e.reorderImages=function(e,t){for(var n,r,i=t.length,a={},o=0;o<i;o++)!M(r=t[o])||""==r||M(n=this._copyRefMap[r])&&""!=n&&(a[n]=r);var s,c=e.length,u=[];for(o=0;o<c;o++)M(s=e[o])&&""!=s&&u.push(a[s]);return u},e.resetViewerAngleByIndexes=function(e){var t=this.getViewerByUid(this._viewerId);if(t&&e)for(var n,r=e.length,i=0;i<r;i++)n=e[i],t.resetByIndex(n,!1)},e.restoreViewerCustomData=function(){var e=[],t=d(this,c)[c]();if(t)for(var n,r,i=t.getCurrentPageUids(),a=i.length,o=0;o<a;o++)M(r=i[o])&&""!=r&&(M(n=this._copyRefMap[r])&&""!=n&&(n=this._backInfo.origDocumentData[n])&&(r=this.restoreOneViewerCustomData(t,r,o,n)).changed&&r.needReset&&e.push(o));return e},e.regetViewerCustomDataFromSrc=function(){var e=[],t=d(this,c)[c]();if(t)for(var n,r,i,a=t.getCurrentPageUids(),o=a.length,s=0;s<o;s++)M(n=a[s])&&""!=n&&(M(i=this._copyRefMap[n])&&""!=i&&(r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(i))&&(i=this.restoreOneViewerCustomData(t,n,s,r)).changed&&i.needReset&&e.push(s));return e},e.restoreOneViewerCustomData=function(e,t,n,r){var i={changed:!1,needReset:!1},a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(t);if(!a||!r)return i;t=a.oriBlob;return this.compareOldValueChanged(r,a,t)&&(void 0!==r.detectArea&&(a.detectArea=r.detectArea),a.angle!=r.angle&&(a.angle=r.angle,i.needReset=!0),void 0!==r.filterValue&&(a.filterValue=r.filterValue),Ge(a),i.changed=!0),i},e.saveViewerCustomData=function(){var e=d(this,c)[c]();if(e)for(var t,n,r,i,a=e.getCurrentPageUids(),o=a.length,s=0;s<o;s++)M(i=a[s])&&""!=i&&(M(t=this._copyRefMap[i])&&""!=t&&(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(t))&&(r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(i))&&(i=!1,_(n.detectArea,r.detectArea)||(n.detectArea=r.detectArea,i=!0),n.angle!=r.angle&&(n.angle=r.angle,i=!0),Oe(n.filterValue,r.filterValue)||(n.filterValue=r.filterValue,i=!0),i&&n.resBlob&&delete n.resBlob,this._backInfo.origDocumentData[t]={detectArea:r.detectArea,angle:r.angle,filterValue:r.filterValue}))},e.render=function(){},e.syncFileFromExternalEvent=function(){var n=S(E().mark(function e(t,n){var r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:return r=null==(r=this._fileWrapper)?void 0:r.openFile(this._backFileName),e.next=5,this.syncFiles(t,r);case 5:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),e.getCurrentEditUid=function(){return this._editUid},e.setEditUidAfterSyncImages=function(){var t=S(E().mark(function e(t){var n,r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(!(n=d(this,c)[c]())){e.next=9;break}if(0<=(r=!Ye(r=n.getIndexByUid(t))||r<0?n.getCurrentIndex():r))return e.next=9,this.handlePageByIndex(r);e.next=9;break;case 9:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),e.fillOneCustomDataByUidFirstTime=function(){var r=S(E().mark(function e(t,n,r){var i,a,o,s,c,u,l,d,h,f,p;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(M(t)&&""!=t){e.next=4;break}return e.abrupt("return");case 4:if(i=this._dvsWrapper.getDataRootSync(t)){e.next=7;break}return e.abrupt("return");case 7:if(a=i.metadata,a=void 0===a?{}:a,f=i.oriData,c=s=!1,(u=i.customData)||(u={},i.customData=u,c=!0),u.resBlob?(h=n&&u.oriBlob?u.oriBlob:u.resBlob)&&h.imageData&&(i.oriData=w(h.imageData),i.metadata=Te(h),l=h.imageWidth,d=h.imageHeight):((h=Ve(a)).imageData=f,n||r||(u.resBlob=w(h)),u.oriBlob?o=u.oriBlob:(o=h,u.oriBlob=w(h)),void 0===u.angle&&(u.angle=0),s=!0),M(o))return e.next=14,fetch(o);e.next=19;break;case 14:return f=e.sent,e.next=17,f.blob();case 17:o=e.sent,c=!0;case 19:if(o instanceof Blob)return e.next=22,Re(o);e.next=27;break;case 22:o=e.sent,l=o.imageWidth,d=o.imageHeight,1==a.bitDepth&&(o.imageBitDepth=1),c=!0;case 27:c&&(u.oriBlob=w(o),u.angle=0,s=!0),u.detectArea||(l&&d||(o=u.oriBlob)&&(l=o.imageWidth,d=o.imageHeight),0<l&&0<d&&(u.detectArea=[0,0,l,0,l,d,0,d]),s=!0),u.filterValue||(u.filterValue=A.ORIGINAL,s=!0),s&&(p=this._copyRefMap[t])&&this.backupImageDataFromSrcUid(p,u);case 31:case"end":return e.stop()}},e,this)}));return function(e,t,n){return r.apply(this,arguments)}}(),e.fillOrigCustomDataFirstTime=function(){var e=S(E().mark(function e(){var t,n,r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(!(t=this.getViewerByUid(this._viewerId))){e.next=17;break}if(!(t=t.getCurrentPageUids())){e.next=17;break}n=0;case 7:if(!(n<t.length)){e.next=17;break}if(M(r=t[n])&&""!=r){e.next=11;break}return e.abrupt("continue",14);case 11:return e.next=13,this.fillOneCustomDataByUidFirstTime(t[n],this.isCropPage(),!1);case 13:this.copyOneBackupToInitData(r);case 14:n++,e.next=7;break;case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),e.copyOneBackupToInitData=function(e){e=this._copyRefMap[e];M(e)&&""!=e&&(this._backInfo.initDocumentData[e]=b(this._backInfo.origDocumentData[e],{}))},i}(n);function Rt(){var n=this;this.getViewerByUid(this._viewerId).on("slideFinished",S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=n.getViewerByUid(n._viewerId))&&0<=(t=t.getCurrentIndex())&&n.handlePageByIndex(t);case 2:case"end":return e.stop()}},e)})))}function Ft(){return this.getViewerByUid(this._viewerId)}function Nt(e){var t=this._dvs.ViewControl.createViewer({container:null,displayMode:"single",uiConfig:{canvasConfig:{canvasMouseShape:"pointer"},outerBorder:"0px"},scrollerConfig:{},zooming:this._zooming}),n=(this._viewerId=t.uid,this.options.curIndex),r=null==(r=this._fileWrapper)?void 0:r.openFile(this._backFileName);this._dvs.File.createFile(this._pageFileName,this._viewerId),this._dvs.File.openFile(this._pageFileName,this._viewerId),0==r.length?n=-1:(this.backupImageDataFromUids(r),this._pageFileName&&this.fileDataCopyToViewer(r),0<=n&&(n>=r.length?n=r.length-1:n<0&&(n=0),t.gotoPage(n)),0<=(r=t.getCurrentIndex())&&(this._savedUid=t.getUidByIndex(n=r))),this.options.curIndex=n,t&&d(this,Tt)[Tt](t),d(this,At)[At]()}function Ut(){var e=d(this,c)[c]();e.removeAllSync(),this._dvs.ViewControl.removeViewer(e)}function Ot(e){var t=this.options.documentEditorSettings,t=void 0===t?{}:t,n=t.headerStyle,n=void 0===n?{}:n,r=t.bodyStyle,r=void 0===r?{}:r,t=t.footerStyle,t=void 0===t?{}:t;n.background||(n.background="#000"),r.background||(r.background="#323232"),t.background||(t.background="#000"),e.topMenuBorder="none",e.topMenuColor=n.background,e.canvasBorder="none",e.canvasBackground=r.background,e.displayMode="single",e.footerColor=t.background,e.width="100%",e.height="100%"}function Ht(){var e=this.options.documentEditorSettings,e=void 0===e?{}:e,t=e.headerStyle,t=void 0===t?{}:t,n=e.bodyStyle,e=e.footerStyle,e=void 0===e?{}:e,n="."+B.headerfont+" { color: "+t.color+"; background: "+t.background+" !important; }\n."+B.footerfont+" { color: "+e.color+" !important; }\n."+B.documentEditPage+" ."+B.headerSelected+" i { color: "+t.selectedColor+" !important; }\n."+B.documentEditPage+" ."+B.footerSelected+" i { color: "+e.selectedColor+" !important; }\n."+B.cropPage+" ."+B.footerSelected+" i { color: "+e.selectedColor+" !important; }\n."+B.documentEditPage+" ."+B.cvsContainer+", ."+B.cropPage+" ."+B.cvsContainer+" { background: "+(void 0===n?{}:n).background+" !important; }\n."+B.documentEditPage+" .dvs-cameraPager, ."+B.cropPage+" .dvs-cameraPager{  color: "+t.color+" !important; }\n."+B.documentEditPage+" .dvs-cameraPager p, ."+B.cropPage+" .dvs-cameraPager p{  color: "+t.color+" !important; }\n."+B.documentEditPage+" .dvs-cameraPager .dvs-curPage, ."+B.cropPage+" .dvs-cameraPager .dvs-curPage{ color: "+t.selectedColor+" !important; }\n."+B.documentEditPage+" .dvs-cameraPager ."+B.disable+", ."+B.cropPage+" .dvs-cameraPager ."+B.disable+"{ color: "+t.disabledColor+" !important; }\n."+B.filterDropDown+" {background: "+e.background+" !important;}\n."+B.filterDropDown+" ul {background: "+e.background+" !important;}\n."+B.filterDropDown+" ul li {border-color: "+e.background+"}\n."+B.filterSelectedItem+" { border: 2px solid "+e.selectedColor+" !important; }\n."+B.filterCheckedBox+" { border-color:"+e.selectedColor+"; !important}\n."+B.filterCheckedBox+" span { background: "+e.selectedColor+" !important}\n."+B.filterCheckedBox+" +label { color: "+e.selectedColor+" }",t=document.getElementById(Et);if(t)t.innerHTML=n;else{(t=document.createElement("style")).type="text/css",t.id=Et;try{t.appendChild(document.createTextNode(n))}catch(e){}document.body.appendChild(t)}}var Wt=t("initElement"),jt=t("initViewer"),y=function(c){function e(e,t,n){t=c.call(this,e,t,n)||this;return Object.defineProperty(a(t),jt,{value:qt}),Object.defineProperty(a(t),Wt,{value:Gt}),t.viewerPagerEventId=null,t._curImageData=null,t._filterDirty=!1,t._preEditPageCropData=null,t._bInsertingImage=!1,t._iInsertingIndex=-1,t.pageName=re,d(a(t),Wt)[Wt](),t._backInfo.origApplyToAll=n.filterApplyToAllValue,"hidden"==e.visibility&&t.clickSaveButton(),t}o(e,c);var t=e.prototype;return t.rotateLeft=function(){this._rotate(-90)},t.rotateRight=function(){this._rotate(90)},t._rotate=function(e){if(!(this.isDestroyed||this.getImageCount()<=0)){var t=this._dcs,n=this.getViewerUid(),n=this.getViewerByUid(n),r=n.getCurrentIndex();if(!(r<0)){t.showLoading("rotate button init");try{n.rotateMode=0,n.rotate(e),this._rotateFilterDropDown(n.getRotateAngle(r))}finally{t.hideLoading("rotate button init")}}}},t._rotateFilterDropDown=function(e){var t;if(!this.isDestroyed){var n=null==(t=this.element)?void 0:t.querySelectorAll(".dynamsoft-camera-preFilter");if(n)for(var r=0;r<n.length;r++){var i=n[r];i&&"IMG"==i.tagName&&i.src&&(i.style.transform="rotate("+e+"deg)")}}},t.getOrigAngle=function(e){var t=0,e=this._copyRefMap[e];return t=e&&(e=this._backInfo.origDocumentData[e])?e.angle:t},t.getCurrentCustomData=function(){var e,t,n=this._editUid;return e=M(n)&&""!=n?(e=this._preEditPageCropData&&M(t=this._copyRefMap[n])&&""!=t?this._preEditPageCropData[t]:e)||this._dvsWrapper.getCustomDataSync(n):e},t.destroy=function(){this.isDestroyed=!0,T(this._dcs);var e=this.getViewerByUid(this._viewerId);e&&this.viewerPagerEventId&&e.offById(Q,this.viewerPagerEventId),this.viewerPagerEventId=null,this.removePageFile(),this.setCurImageData(null),c.prototype.destroy.call(this),this.options=null},t.setPageFilename=function(){this._pageFileName=["__dynamsoft_edit_files",Ke(6)].join("_")},t.getHeaderButtons=function(){var e=this.options,t=e.headerButtons,e=e.documentEditorSettings,e=(void 0===e?{}:e).headerStyle;return c.prototype.createIconItems.call(this,void 0===t?{}:t,void 0===e?{}:e,!0,null)},t.getFooterButtons=function(){var e=this.options,t=e.footerButtons,e=e.documentEditorSettings,e=(void 0===e?{}:e).footerStyle;return c.prototype.createIconItems.call(this,void 0===t?{}:t,void 0===e?{}:e,!1,null)},t.initPageOption=function(e,t){c.prototype.initPageOption.call(this,e,t);var e=this.options.documentEditorSettings,n=e.remove,n=void 0===n?{}:n,r=e.insert,r=void 0===r?{}:r,i=e.filter,i=void 0===i?{}:i,a=e.rotateLeft,a=void 0===a?{}:a,o=e.crop,o=void 0===o?{}:o,e=(e.cropViewer,i.defaultValue),e=void 0===e?A.ORIGINAL:e,s=i.applyToAll,s=void 0===s?{}:s,s=(t.curFilterValue=e,s&&s.enableApplyToAll?t.filterApplyToAllValue=e:t.filterApplyToAllValue=void 0,{curIndex:-1,fileName:null,initFileName:this._initFileName,headerButtons:{close:{icon:B.font+" "+B.iconBack,className:B.BUTTON_PREFIX+"back",onclick:function(e,t){t=t.dcs.getCurrentPage();t&&t.clickBackButton()}},pager:{className:"dvs-cameraPager"},delete:u(n,{icon:B.font+" "+B.iconDelete,className:B.BUTTON_PREFIX+"delete",onclick:function(e,t){t=t.dcs.getCurrentPage();t&&t.clickDeleteButton()}})},footerButtons:{insert:u(r,St()),rotate:u(a,{icon:B.font+" "+B.iconRotateLeft,className:B.BUTTON_PREFIX+"rotateLeft",onclick:function(e,t){t=t.dcs.getCurrentPage();t&&t.rotateLeft()}}),filter:u(i,Pt()),crop:u(o,{icon:B.font+" "+B.iconCrop,className:B.BUTTON_PREFIX+"crop",onclick:function(e,t){t=t.dcs.getCurrentPage();t&&t.clickCropButton()}}),save:{icon:B.font+" "+B.iconSave,className:B.BUTTON_PREFIX+"save",onclick:function(e,t){t=t.dcs.getCurrentPage();t&&t.clickSaveButton()}}}});this.options=b(this.options,s)},t.changePageNumber=function(e,t){var n,r;this.element&&(n=null==(r=null==(r=this.element)?void 0:r.querySelector(".dvs-cameraPager"))?void 0:r.querySelector(".dvs-curPage"),r=null==r?void 0:r.querySelector(".dvs-totalPage"),n.innerText=String(e+1),r.innerText=String(t))},t.changeStatus=function(e,t){var n,r;this.element&&(n=null==(r=null==(r=this.element)?void 0:r.querySelector(".dvs-cameraPager"))?void 0:r.querySelector(".dvs-previousPage"),r=null==r?void 0:r.querySelector(".dvs-nextPage"),0<=e?(n.classList[e<=0?"add":"remove"](B.disable),r.classList[t===e+1?"add":"remove"](B.disable)):(n.classList.add(B.disable),r.classList.add(B.disable)))},t.handlePageByUid=function(){var n=S(E().mark(function e(t,n){var r,i,a,o,s,c,u,l,d;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(this._isHandlingPageUid)return this._nextHandlePageUid=t,e.abrupt("return");e.next=5;break;case 5:return this._isHandlingPageUid=!0,r=this._dcs,i=t,this._editUid!=i&&(this.setCurPageId(i),this.setCurImageData(null)),null!=r&&r.showLoading("handle page by uid"),e.prev=10,e.next=13,this.initOrigDataByUid(i);case 13:if(a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(i)){e.next=21;break}if(!(s=this.getViewerByUid(this._viewerId))){e.next=21;break}if((i=s.getUidByIndex(0))&&(a=null==(s=this._dvsWrapper)?void 0:s.getCustomDataSync(i),this.setCurPageId(i)),a){e.next=21;break}return e.abrupt("return");case 21:if(o=a.detectArea,s=a.filterValue,l=a.resBlob,c=de(r,s),s&&c==s&&l||this.SetFilterDirty(!0),!o||!s||this._filterDirty){e.next=29;break}e.next=44;break;case 29:return o||(this.setCurImageData(null),this.SetFilterDirty(!0)),e.next=32,this.getCurImageData(i);case 32:if((u=e.sent)&&this._filterDirty)return e.next=36,ge(u);e.next=42;break;case 36:return l=e.sent,e.next=39,r.filterHandlerByIImageData(u,l,c);case 39:return d=e.sent,e.next=42,Be(d,n,i,!1,{resBlob:d,filterValue:c,bitDepth:d.imageBitDepth});case 42:this._filterDirty=!1,this.setFilterDropDownDirty();case 44:return e.prev=44,null!=r&&r.hideLoading("handle page by uid"),this._isHandlingPageUid=!1,e.finish(44);case 48:if(this._nextHandlePageUid)return d=this._nextHandlePageUid,this._nextHandlePageUid=null,e.next=53,this.handlePageByUid(d,this._dvs);e.next=53;break;case 53:case"end":return e.stop()}},e,this,[[10,,44,48]])}));return function(e,t){return n.apply(this,arguments)}}(),t.setCurImageData=function(e){this._curImageData&&delete this._curImageData.imageData,this._curImageData=e},t.getCurImageData=function(){var t=S(E().mark(function e(t){var n,r,i,a,o,s,c,u,l;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(n=this._dcs,!(r=this._editUid==t)){e.next=6;break}if(this._curImageData)return e.abrupt("return",this._curImageData);e.next=6;break;case 6:if(i=null==(i=this._dvsWrapper)?void 0:i.getCustomDataSync(t)){e.next=9;break}return e.abrupt("return");case 9:if(a=i.oriBlob,o=i.detectArea,s=i.angle,s=void 0===s?0:s,null!=n&&n.showLoading("handle page by uid"),e.prev=11,o)return e.next=15,D(a);e.next=22;break;case 15:return u=e.sent,e.next=18,ue(u,s,o);case 18:c=e.sent,r&&(this.setCurImageData(c),this.SetFilterDirty(!0)),e.next=32;break;case 22:return e.next=24,D(a,s);case 24:return u=e.sent,e.next=27,fe(u,n,!0,!1,!1);case 27:l=e.sent,i.detectArea=l.detectArea,c=l.resImage,this.setCurPageId(t),r&&(this.setCurImageData(c),this.SetFilterDirty(!0));case 32:return e.prev=32,null!=n&&n.hideLoading("handle page by uid"),e.finish(32);case 35:return e.abrupt("return",c);case 36:case"end":return e.stop()}},e,this,[[11,,32,35]])}));return function(e){return t.apply(this,arguments)}}(),t.render=function(){var t=this.getViewerByUid(this._viewerId),e=t.getCurrentPageUids();e&&0<e.length&&setTimeout(function(){var e;null!=t&&null!=(e=t.ui)&&e.styleChange(),null!=t&&t.rotate(0)},0)},t.setCurPageId=function(e){this._editUid=e},t.setFilterDropDownDirty=function(){var e=null==(e=this.element)?void 0:e.querySelector("."+B.BUTTON_PREFIX+"filter");e&&(e=null==e?void 0:e.querySelector("."+B.filterDropDown))&&e.setAttribute("data","")},t.SetFilterDirty=function(e){this._filterDirty=!0},t.ClearFilterDirty=function(){this._filterDirty=!1},t.GetFilterDirty=function(){return this._filterDirty},t.clickCropButton=function(){var e=S(E().mark(function e(){var t,n,r,i,a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("hidden"==this.options.documentEditorSettings.cropViewer.visibility.toString().toLowerCase())return e.abrupt("return");e.next=2;break;case 2:if(this.getImageCount()<=0)return e.abrupt("return");e.next=4;break;case 4:if(t=this.getDvs(),n=this.getCurrentIndex(),!this._pageFileName){e.next=23;break}if(r=this.saveViewerAngle(),i={fileName:this._pageFileName,initFileName:this._initFileName,curIndex:n,saveData:!0,fromInternal:this.options.fromInternal,documentEditorSettings:this.options.documentEditorSettings,nextButtonCss:B.font+" "+B.iconSave},(a=this._dcs.getPreviousPage())&&a instanceof fn)return o=this.getViewerByUid(this._viewerId),o=o.getCurrentPageUids(),a.enterReuseMode(i,o),a.gotoViewPage(n),e.next=17,this._dcs.navigateToPage(a);e.next=18;break;case 17:return e.abrupt("return");case 18:return(o=new fn(i,t,this._dcs)).gotoViewPage(n),e.next=22,this._dcs.navigateToPage(o);case 22:this.resetViewerAngleByIndexes(r);case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.updateFileDataToViewer=function(){var e=S(E().mark(function e(){var t,n,r,i,a,o,s,c,u,l,d,h,f,p;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getViewerByUid(this._viewerId))){e.next=47;break}0<=(n=t.getCurrentIndex())&&(r=t.getUidByIndex(n)),i=t.getCurrentPageUids(),s=i.length,u=!(c=[]),o=0;case 7:if(!(o<s)){e.next=18;break}if(M(a=i[o])&&""!=a){e.next=11;break}return e.abrupt("continue",15);case 11:if(M(l=this._copyRefMap[a])&&""!=l){e.next=14;break}return e.abrupt("continue",15);case 14:c.push(l);case 15:o++,e.next=7;break;case 18:this.backupImageDataFromUids(c),o=0;case 20:if(!(o<s)){e.next=47;break}if(M(a=i[o])&&""!=a){e.next=24;break}return e.abrupt("continue",44);case 24:if(u=r==a,M(d=this._copyRefMap[a])&&""!=d){e.next=28;break}return e.abrupt("continue",44);case 28:if(h=this._backInfo.origDocumentData[d],f=this._preEditPageCropData[d],!((p=null==(p=this._dvsWrapper)?void 0:p.getCustomDataSync(a))&&f&&h)){e.next=44;break}if(!_(f.detectArea,h.detectArea)||f.angle!=h.angle){e.next=35;break}e.next=44;break;case 35:if(p.angle=h.angle,p.detectArea=h.detectArea,p.resBlob&&delete p.resBlob,this._dvsWrapper.setCustomDataSync(a,p),u)return t.resetByIndex(n,!1),this.setCurImageData(null),e.next=44,this.handlePageByUid(r,this._dvs);e.next=44;break;case 44:o++,e.next=20;break;case 47:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.hide=function(){c.prototype.hide.call(this)},t.show=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return this.hide(),e.abrupt("return");e.next=3;break;case 3:if(this._bSyncViewerDataFromBackupData)return e.next=6,this.updateFileDataToViewer();e.next=8;break;case 6:this._preEditPageCropData=null,this._bSyncViewerDataFromBackupData=!1;case 8:return this._dcs.config.documentEditorSettings.visibility="visible",e.next=11,c.prototype.show.call(this);case 11:(t=this.getViewerByUid(this._viewerId))&&0<t.getCurrentPageUids().length&&this.render();case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.clickDeleteButton=function(){var e=S(E().mark(function e(){var t,n,r,i,a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(this.getImageCount()<=0)return e.abrupt("return");e.next=4;break;case 4:if((r=this._dcs).config.documentEditorSettings.remove.funcConfirmRemove)return e.next=8,r.config.documentEditorSettings.remove.funcConfirmRemove();e.next=11;break;case 8:if(0==e.sent)return e.abrupt("return");e.next=11;break;case 11:if(t=this.getViewerByUid(this._viewerId),(n=t.getCurrentIndex())<0)return e.abrupt("return");e.next=15;break;case 15:if(r=t.getUidByIndex(n),(o=this._dcs.getPreviousPage())&&o instanceof fn&&o.exitReuseMode(),o=this.getRefUid(r,!0),i=!1,!M(o)||""==o){e.next=29;break}if(!(a=this._initFileName)){e.next=29;break}if(0<=(a=this._fileWrapper.getIndexByUidInFile(a,o)))return o=this._dcs.getRemovePhotoCallback(),e.next=28,o(this._initFileName,a);e.next=29;break;case 28:i=!0;case 29:if(i||t.removeSync(n),0<t.currentPageCount)return e.next=33,this.refreshViewer();e.next=33;break;case 33:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.clickSaveButton=function(){var e=S(E().mark(function e(){var t,n,r,i,a,o,s;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(t=this.getDvs(),n=this._dcs,a=this.getViewerByUid(this._viewerId),n.showLoading("save button init"),r=!1,i=this.options.fromInternal,e.prev=7,this.saveViewerAngle(),(o=n.getPreviousPage())&&o instanceof fn&&o.exitReuseMode(),this.setCurImageData(null),this.SetFilterDirty(!0),!(0<(o=a.getCurrentPageUids()).length)){e.next=23;break}if(i)return e.next=18,this._saveToWebTwain(o);e.next=21;break;case 18:t.File.removeFile(this._backFileName),e.next=23;break;case 21:return e.next=23,this.saveFromExternal(o);case 23:(s=null==(a=document)?void 0:a.querySelector(".dvs-showImageArea"))&&(""==s.style.display?s.style.display="block":s.style.display=""),T(n),r=!0,n.exit(t);case 28:return e.prev=28,n.hideLoading("save button init"),e.finish(28);case 31:if(r&&n.closeAllPages)return e.next=34,n.closeAllPages();e.next=37;break;case 34:if(n.config.documentEditorSettings.funcConfirmExitAfterSave)return e.next=37,n.config.documentEditorSettings.funcConfirmExitAfterSave(!i);e.next=37;break;case 37:case"end":return e.stop()}},e,this,[[7,,28,31]])}));return function(){return e.apply(this,arguments)}}(),t.ifOldDocumentDataChanged=function(){if(this._backInfo.origApplyToAll!=this._dcs.filterApplyToAllValue)return!0;var e=this.getViewerByUid(this._viewerId),t=!1;if(e)for(var n=e.getCurrentPageUids(),r=0;r<n.length;r++){var i=n[r];if(M(i)&&""!=i){var a=this._copyRefMap[i];if(M(a)&&""!=a){a=this._backInfo.origDocumentData[a];if(!a)return!0;var o=null==(o=this._dvsWrapper)?void 0:o.getCustomDataSync(i);if(o){i=b(o,{}),o=i.oriBlob;if(i.angle=m(i.angle+e.getRotateAngle(r)),t=this.compareOldValueChanged(a,i,o))break}}}}return t},t.refreshViewer=function(){var e=S(E().mark(function e(){var t,n;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getViewerByUid(this._viewerId),0<=(n=t.getCurrentIndex()))return n=t.getUidByIndex(n),e.next=6,this.handlePageByUid(n,this._dvs);e.next=7;break;case 6:t.render();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._saveToWebTwain=function(){var t=S(E().mark(function e(t){var n,r,i,a,o,s,c,u;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this._dvs,r=this._dcs,i=r.getSavePhotoCallback(),a=0;case 3:if(!(a<t.length)){e.next=24;break}if(M(o=t[a])&&""!=o){e.next=7;break}return e.abrupt("continue",21);case 7:if(s=this._dvsWrapper.getDataRootSync(o)){e.next=10;break}return e.abrupt("continue",21);case 10:return c=!1,s.customData&&!s.customData.resBlob&&(c=!0),e.next=14,zt(r,s,c);case 14:return c=e.sent,u=c.filterBlob,delete c.filterBlob,e.next=19,i([{file:c,iImageData:u}]);case 19:return e.next=21,n.DataControl.removeData(o);case 21:a++,e.next=3;break;case 24:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.getFileName=function(){return this._backFileName},t.saveCurrentCropData=function(){var e=this.getViewerByUid(this._viewerId),t={};if(e)for(var n,r,i,a=e.getCurrentPageUids(),o=a.length,s=0;s<o;s++)M(n=a[s])&&""!=n&&(r=this._copyRefMap[n],i=null==(i=this._dvsWrapper)?void 0:i.getCustomDataSync(n),t[r]=i?{detectArea:i.detectArea,angle:i.angle,filterValue:i.filterValue}:{detectArea:null,angle:0,filterValue:A.ORIGINAL});return t},t.saveFromExternal=function(){var t=S(E().mark(function e(t){var n,r,i,a,o,s,c,u,l,d,h;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:n=this._dvs,r=this._dcs.getPreviousPageByPage(this),i=t.length-1;case 5:if(!(0<=i)){e.next=37;break}if(M(a=t[i])&&""!=a){e.next=9;break}return e.abrupt("continue",34);case 9:if(o=!0,s=void 0,c=null==(c=this._dvsWrapper)?void 0:c.getCustomDataSync(a)){e.next=13;break}return e.abrupt("continue",34);case 13:if(M(u=this._copyRefMap[a])&&""!=u&&(s=(s=this._backInfo.initDocumentData[u])||this._backInfo.origDocumentData[u])&&(this._dcs.filterApplyToAllValue?this._dcs.filterApplyToAllValue!=A.ORIGINAL||M(s.filterValue)&&s.filterValue!=A.ORIGINAL||_(s.detectArea,c.detectArea)&&s.angle==c.angle&&(o=!1):_(s.detectArea,c.detectArea)&&s.angle==c.angle&&Oe(s.filterValue,c.filterValue)&&(o=!1)),!o){e.next=34;break}if(l=this._dvsWrapper.getDataRootSync(a)){e.next=19;break}return e.abrupt("continue",34);case 19:if(l.customData&&l.customData.oriBlob){e.next=22;break}return e.next=22,this.handlePageByUid(a,n);case 22:return e.next=24,zt(this._dcs,l,!0);case 24:if(d=e.sent,h=d.filterBlob,delete d.filterBlob,r&&r instanceof fn)return e.next=30,r.updateUid(u,h,d);e.next=32;break;case 30:e.next=34;break;case 32:return e.next=34,Be(h,n,u,!0,d);case 34:i--,e.next=5;break;case 37:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.clickBackButton=function(){var e=S(E().mark(function e(){var t,n,r,i,a,o,s,c,u,l,d,h,f,p;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(t=this._dcs,n=this.getCurrentIndex(),r=t.getPreviousPage(),i=this.ifOldDocumentDataChanged(),(u=this.options.documentEditorSettings.funcConfirmExit)&&V(u))return l="",r&&(l=r.pageName),e.next=12,u(i,l);e.next=19;break;case 12:if((a=e.sent)==ie)return e.abrupt("return");e.next=17;break;case 17:if(a!=g&&a!=v)return e.abrupt("return");e.next=19;break;case 19:if(void 0===a&&(a=r?v:g),!r){e.next=23;break}e.next=29;break;case 23:if(a!=g){e.next=26;break}e.next=29;break;case 26:if(a==v)return this.clickSaveButton(),e.abrupt("return");e.next=29;break;case 29:if(o=!1,e.prev=30,c=t.getCurrentPage(),T(t),r&&r instanceof fn)return r.exitReuseMode(),a==v?(s=this.saveViewerAngle(),this.resetViewerAngleByIndexes(s),this.saveViewerCustomData()):a==g&&(this.restoreViewerCustomData(),this.resetViewerAngle()),i&&(u=r.getViewerByUid(r.getViewerUid()),l=u.getCurrentPageUids(),s=r.resetCropInfoByUids(l),r.resetViewerAngleByIndexes(s)),this._bSyncViewerDataFromBackupData=!0,this._preEditPageCropData=this.saveCurrentCropData(),r.gotoViewPage(n),e.next=42,t.navigateBack(1,!1);e.next=47;break;case 42:d=e.sent,t.showLoading("close edit page"),1==d.length?r.setNextViewerPage(d.pop()):t.destroyRemovedPages(),e.next=88;break;case 47:if(r&&r instanceof N)return a==v?(s=this.saveViewerAngle(),this.resetViewerAngleByIndexes(s),this.saveViewerCustomData()):a==g&&(this.restoreViewerCustomData(),this.resetViewerAngle()),e.next=51,r.refreshPreviewWhenChanged();e.next=78;break;case 51:return e.next=53,t.navigateBack(1,!1);case 53:if(d=e.sent,t.showLoading("close edit page"),1==d.length?r.setNextViewerPage(d.pop()):t.destroyRemovedPages(),"playing"!=(h=t.getStatus())){e.next=60;break}e.next=74;break;case 60:if("paused"!=h){e.next=64;break}t.resume(),e.next=74;break;case 64:if(f=r.element,f=f.children[1],(p=this.options.scannerViewer)&&p.resolution&&p.resolution.defaultValue)return e.next=70,t.play(f,p.resolution.defaultValue.width,p.resolution.defaultValue.height,p.fullScreen);e.next=72;break;case 70:e.next=74;break;case 72:return e.next=74,t.play(f);case 74:t.emit("resetResolution"),t.emit("focusPage"),e.next=88;break;case 78:if(t.showLoading("close edit page"),r)return e.next=82,t.navigateBack();e.next=85;break;case 82:c.hide(),e.next=88;break;case 85:o=!0,c.hide(),t.exit(this._dvs);case 88:return e.prev=88,t.hideLoading("close edit page"),e.finish(88);case 91:if(o&&t.closeAllPages)return e.next=94,t.closeAllPages();e.next=94;break;case 94:case"end":return e.stop()}},e,this,[[30,,88,91]])}));return function(){return e.apply(this,arguments)}}(),t.insertImgByBlobItem=function(){var n=S(E().mark(function e(t,n){var r,i,a,o,s;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.oriBlob,s=t.detectArea,i=t.filterBlob||t.resBlob||r,o=(null==(o=n.config.documentEditorSettings)?void 0:o.filter)||{},o=o.defaultValue,s={detectArea:s,oriBlob:r,resBlob:i,filterValue:o,angle:0},r={oriData:i.imageData,metadata:Te(i),customData:s},o=n.config.scannerViewer||{},i=o.maxDocuments,o=s=void 0===i?20:i,i=this.getViewerByUid(this._viewerId),a=(null==(a=n.config.documentEditorSettings)?void 0:a.insert)||{},a=a.position,a="before"===(void 0===a?"before":a)?i.getCurrentIndex():i.getCurrentIndex()+1,!this.options.fromInternal||i.currentPageCount+1<=o&&i.currentPageCount+1<=s)return o=i.currentPageCount,(a<0||o-1<a)&&(a=-1),this._bInsertingImage=!0,s=this._dcs.getInsertPhotoCallback(),e.next=17,s(this._initFileName,r,a);e.next=19;break;case 17:e.next=20;break;case 19:n.emit("video-error",P.MAX_IMAGES_IN_BUFFER_LIMIT);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.insertFile=function(){var t=S(E().mark(function e(t){var n,r,i,a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._dcs,this.isDestroyed)return e.abrupt("return");e.next=3;break;case 3:if(e.prev=3,a=n.config.scannerViewer||{},a=a.maxDocuments,r=a=void 0===a?20:a,i=this.getViewerByUid(this._viewerId),!this.options.fromInternal||i.currentPageCount+1<=r&&i.currentPageCount+1<=a)return e.next=10,Qe(t);e.next=29;break;case 10:return r=e.sent,e.next=13,D(r);case 13:return i=e.sent,e.next=16,n.packageBlobItemFromIImageData(i,!0,!0,!0);case 16:return a=e.sent,e.next=19,this.insertImgByBlobItem(a,n);case 19:if(o=e.sent,0<=(this._iInsertingIndex=o))return e.next=24,this.handlePageByIndex(o);e.next=24;break;case 24:return e.next=26,n.navigateBack();case 26:e.sent,e.next=32;break;case 29:return n.emit("video-error",P.MAX_IMAGES_IN_BUFFER_LIMIT),e.next=32,n.navigateBack();case 32:return e.prev=32,n.stop(),e.finish(32);case 35:case"end":return e.stop()}},e,this,[[3,,32,35]])}));return function(e){return t.apply(this,arguments)}}(),t.isInsertingImage=function(){return this._bInsertingImage},t.setInsertingImageIndex=function(e){this._iInsertingIndex=e,this._bInsertingImage=!0},t.clearInserting=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._bInsertingImage=!1,0<=(t=(t=this._iInsertingIndex)<0&&0<this.getImageCount()?0:t))return this.setCurImageData(null),this.SetFilterDirty(!0),e.next=8,this.handlePageByIndex(t);e.next=8;break;case 8:this._iInsertingIndex=-1;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.applyChanged=function(){var e=this.getViewerByUid(this._viewerId);if(e)for(var t=e.getCurrentPageUids(),n=0;n<t.length;n++){var r,i,a,o=t[n];!M(o)||""==o||(a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(o))&&(r=a.detectArea,i=a.angle,(o=this._copyRefMap[o])&&(a=a.filterValue,this._backInfo.origDocumentData[o]&&(a=this._backInfo.origDocumentData[o].filterValue),this._backInfo.origDocumentData[o]={detectArea:r,angle:void 0===i?0:i,filterValue:a}))}},t.appendFilterDropdownImages=function(){var t=S(E().mark(function e(r){var i,a,o,s,c,u,l,d,h,f,p,g,v,m,b,_,y,x,w,k;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._dcs,e.prev=1,0<=(o=r.getCurrentIndex()))return s=r.getUidByIndex(o),u=this.GetFilterDirty(),e.next=8,this.getCurImageData(s);e.next=10;break;case 8:c=e.sent,u||this.ClearFilterDirty();case 10:if(!s||!c){e.next=48;break}l=r.getRotateAngle(o),w=this._dvsWrapper.getCustomDataSync(s),h=null==(h=i.config.documentEditorSettings)?void 0:h.filter,k=h.defaultValue,k=void 0===k?"original":k,b=h.applyToAll,h=h.valueList,d=(d=b&&b.enableApplyToAll&&M(i.filterApplyToAllValue)&&""!=i.filterApplyToAllValue?i.filterApplyToAllValue:d)||((d=w.filterValue)||k),e.next=19;var t=c,n={source:t,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:C.Enum_ImageType.IT_BGRA,returnBlob:!1,nInterplationMethod:5}}};return C.ImageProcWrapper.createImage(n).then(function(e){return t.imageData=e.src,I(e.preview),e.preview});case 19:if(f=e.sent)return e.next=23,ge(f);e.next=48;break;case 23:p=e.sent,v=!(g=[]),m=0;case 27:if(!(m<h.length)){e.next=43;break}if(b=h[m],_=b.value,y=b.label,x=void 0,"original"!==_){e.next=35;break}x=p,v=!0,e.next=39;break;case 35:return e.next=37,i.filterHandlerByIImageData(f,p,_);case 37:w=e.sent,x=w;case 39:x&&(k=F.createURL(x),g.push({value:_,url:k,label:y}));case 40:m++,e.next=27;break;case 43:f=null,v||g.unshift({value:A.ORIGINAL,url:F.createURL(p),label:"Original"}),h.some(function(e){return e.value===d})||(d=A.ORIGINAL),0<g.length&&(a=document.createDocumentFragment()),g.forEach(function(e,t){var n=document.createElement("li");n.innerHTML='<img class="dynamsoft-camera-preFilter" src="'+e.url+'" style="transform:rotate('+l+'deg)"><p>'+e.label+"</p>",a.appendChild(n),n.dataset.filterValue=e.value,e.value===d&&n.classList.add(B.filterSelectedItem)});case 48:return e.prev=48,e.finish(48);case 50:return e.abrupt("return",a);case 51:case"end":return e.stop()}},e,this,[[1,,48,50]])}));return function(e){return t.apply(this,arguments)}}(),t.initOrigDataByUid=function(){var t=S(E().mark(function e(t){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.prototype.initOrigDataByUid.call(this,t);case 2:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.restoreViewerCurrentCustomData=function(){var e=[],t=this.getViewerByUid(this._viewerId),n=t.getCurrentIndex();if(0<=n){var r=t.getCurrentPageUids()[n],i=this._copyRefMap[r];if(!M(i)||""==i)return;var a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(i),i=this.restoreOneViewerCustomData(t,r,n,a);i.changed&&(this.setCurImageData(null),i.needReset&&e.push(n))}return e},t.saveViewerAngle=function(){var e=[],t=this.getViewerByUid(this._viewerId);if(t)for(var n,r=t.getCurrentPageUids(),i=r.length,a=t.getCurrentIndex(),o=0;o<i;o++)M(n=r[o])&&""!=n&&this.saveViewerOneAngle(t,o==a,o,n)&&e.push(o);return e},t.resetViewerAngle=function(){var e=[],t=this.getViewerByUid(this._viewerId);if(t)for(var n=t.getCurrentPageUids().length,r=0;r<n;r++)0!==t.getRotateAngle(r)&&e.push(r);this.resetViewerAngleByIndexes(e)},t.saveViewerOneAngle=function(e,t,n,r){var i=!1,e=e.getRotateAngle(n),n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(r);return n&&0!=e&&(n.angle=m(n.angle+e),n.resBlob&&delete n.resBlob,t&&this.setCurImageData(null),i=!0),i},e}(Mt);function Gt(){var e=this.options.documentEditorSettings,e=void 0===e?{}:e,t=e.headerStyle,t=void 0===t?{}:t,n=e.bodyStyle,e=e.footerStyle,e=void 0===e?{}:e;this.setDefaultBackgroundColors(t,void 0===n?{}:n,e),this.template=['<header style="background:'+t.background+'" class="headerButtons"></header>','<div class="'+B.cvsContainer+'" style="width:100%;height:100%"></div>','<footer style="background:'+e.background+'" class="footerButtons"></footer>'].join(""),this.className=B.documentEditPage,this.createEl(),d(this,jt)[jt]()}function qt(){return Xt.apply(this,arguments)}function Xt(){return(Xt=S(E().mark(function e(){var n,t,r,i,a,o,s,c=this;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.element){e.next=2;break}return e.abrupt("return");case 2:i=this.options,i=i.documentEditorSettings,i=(void 0===i?{}:i).bodyStyle,i=void 0===i?{}:i,n=this._dvs,this._dcs,o=null==(o=this.element)?void 0:o.querySelector(".dvs-cameraPager"),s=null==o?void 0:o.querySelector(".dvs-previousPage"),t=null==o?void 0:o.querySelector(".dvs-nextPage"),(r=this.getViewerByUid(this._viewerId)).canvasBackground=i.background,r.bindView(null==(i=this.element)?void 0:i.querySelector("."+B.cvsContainer)),i=r.getCurrentTab(),s&&t||(o.innerHTML='<div class="dvs-previousPage '+B.font+" "+B.iconArrow+" "+B.headerfont+" "+B.disable+'"></div>\n      <p><span class="dvs-curPage">0</span>/<span class="dvs-totalPage">0</span></p>\n      <div class="dvs-nextPage '+B.font+" "+B.iconArrow+" "+B.headerfont+" "+B.disable+'"></div>',s=null==o?void 0:o.querySelector(".dvs-previousPage"),t=null==o?void 0:o.querySelector(".dvs-nextPage"),i&&0<=i.total&&(s.onclick=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!=(t=r.getPrePageIndex()))return t=r.getUidByIndex(t),e.next=5,c.handlePageByUid(t,n);e.next=6;break;case 5:r.prevPage();case 6:case"end":return e.stop()}},e)})),t.onclick=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!=(t=r.getNextPageIndex()))return t=r.getUidByIndex(t),e.next=5,c.handlePageByUid(t,n);e.next=6;break;case 5:r.nextPage();case 6:case"end":return e.stop()}},e)})),(a=this).viewerPagerEventId=r.on(Q,function(e){a&&e&&(a.changePageNumber(e.cur,e.total),a.changeStatus(e.cur,e.total))}))),i&&0<=(o=i.total)&&0<=(s=r.getCurrentIndex())&&(this.changeStatus(s,o),this.changePageNumber(s,o)),null!=(t=r.ui)&&t._resizeViewer();case 16:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function zt(){return Yt.apply(this,arguments)}function Yt(){return(Yt=S(E().mark(function e(t,n,r){var i,a,o,s,c,u,l,d,h,f,p,g,v;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n.customData,i=u.oriBlob,a=u.detectArea,s=u.filterValue,o=u.angle,o=void 0===o?0:o,u=u.bitDepth,u=void 0===u?0:u,h=r,o=m(o),s=s,c=w(i),t.filterApplyToAllValue&&s&&s!=t.filterApplyToAllValue&&(s=t.filterApplyToAllValue,h=!0),!h&&a&&s&&0==o)return(h=n.metadata?Ve(n.metadata):{}).imageData=n.oriData,0<u&&(h.imageBitDepth=u),t.emit("resetResolution"),e.abrupt("return",{filterBlob:h,detectArea:a,oriBlob:c,angle:0,filterValue:s});e.next=14;break;case 14:if(a)return e.next=17,D(i);e.next=32;break;case 17:return u=e.sent,e.next=20,ue(u,o,a);case 20:return l=e.sent,d=de(t,s),e.next=24,ge(l);case 24:return h=e.sent,e.next=27,t.filterHandlerByIImageData(l,h,d);case 27:return p=e.sent,t.emit("resetResolution"),e.abrupt("return",{filterBlob:p,detectArea:a,oriBlob:c,angle:o,filterValue:d});case 32:return f=de(t,s),e.next=35,D(i,o);case 35:return p=e.sent,e.next=38,t.packageBlobItemFromIImageData(p,!0,!0,!1,f);case 38:return v=e.sent,g=v.detectArea,v=v.filterBlob,t.emit("resetResolution"),e.abrupt("return",{filterBlob:v,detectArea:g,oriBlob:c,angle:o,filterValue:f});case 42:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Jt=function(){function e(t){var n=this;this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.imgWidth=0,this.imgHeight=0,this.leftEdge=0,this.topEdge=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.dpr=1,Object.keys(t).forEach(function(e){n[e]=t[e]}),this.resetBox()}var t=e.prototype;return t.getRect=function(){var e=this._getMaxPoint(),t=e.minX,n=e.maxX,r=e.minY,e=e.maxY;return{x:Math.floor(t),y:Math.floor(r),width:Math.floor(n-t),height:Math.floor(e-r)}},t.resetBox=function(){this.midpoints=Qt(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=Zt(this.vertexes)},t._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},t.checkPointPosition=function(e){var t=this._getMaxPoint(),n=t.minX,r=t.maxX,i=t.minY,t=t.maxY,a=this.probePoints[2*e],o=this.probePoints[2*e+1];return e<4?a===r&&o===t?"se":a===r&&o===i?"ne":a===n&&o===i?"nw":a===n&&o===t?"sw":null:a===r?"e":o===t?"s":a===n?"w":o===i?"n":null},t.onStartHandler=function(e,t,n){var r=this.isBoxSelected(e,t);null!==(r=void 0!==n?n:r)&&(this._startX=e,this._startY=t,this._lastX=e,this._lastY=t,-1===r?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=r,this.isMoveBox=!1),"free"===this.mode&&3<r&&(this.k1=this.slopeRatio[(1+(n=r-4))%4],this.b1=this.probePoints[(2*n+3)%8]-this.k1*this.probePoints[(2*n+2)%8],this.k2=this.slopeRatio[(3+n)%4],this.b2=this.probePoints[(2*n+1)%8]-this.k2*this.probePoints[(2*n+0)%8]))},t.onMoveHandler=function(e,t,n){if(this.isPointSelected||this.isMoveBox){var r=this.probePoints.slice();if(this.isPointSelected){var i=this.activeProbePoint;void 0!==n&&(i=n),"normal"===this.mode?r=this._movePointNormal(r,i,e,t):(r=this._movePointFree(r,i,e,t),this.slopeRatio=Zt(this.probePoints).slice(0,4)),this.probePoints=r.slice(),this._checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){n=e-this._lastX,i=t-this._lastY;if(0==n&&0==i)return;r=this._moveBox(r,n,i),this.probePoints=r.slice()}n=Qt(this.probePoints);this.probePoints=this.probePoints.slice(0,8).concat(n),this.midpoints=n,this._lastX=e,this._lastY=t}},t.onEndHandler=function(){this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var e,t=this._startX,n=this._startY,r=(this._startX=0,this._startY=0,this._lastX),i=this._lastY;(this.isPointSelected||this.isMoveBox)&&(this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null,e=this._checkRectConvexity(this.probePoints),(t!==r||n!==i)&&e||(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=Qt(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=Zt(this.probePoints).slice(0,4))},t._checkEdge=function(e,t){return!!(0<=e&&e<=this.width&&0<=t&&t<this.height)},t._movePointNormal=function(e,t,n,r){n=Math.max(this.leftEdge,Math.min(this.width,n)),r=Math.max(this.topEdge,Math.min(this.height,r));var i=0,a=0;if(this.keepAspectRatio){var o=this._getMaxPoint(),s=o.minX,c=o.maxX,u=o.minY,o=o.maxY,l=this.checkPointPosition(t),c=(c-s)/(o-u),s=(0===c||c===1/0||c===-1/0||Number.isNaN(c)?c=this._lastWhr:this._lastWhr=c,a=i=0,"width");if(t<4){if(i=n-e[2*t],a=r-e[2*t+1],0===i||0===a)return e;s="width"}else{o=t-4;if("e"===l?(t=(1+o)%4,s="width"):"s"===l?(t=o,s="height"):"w"===l?(t=o,s="width"):"n"===l&&(t=(1+o)%4,s="height"),i=n-e[2*o],a=r-e[2*o+1],0===i||0===a)return e}"height"===s?(i=a*c,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(i=-i)):(a=i/c,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(a=-a));u=e[2*t]+i,o=e[2*t+1]+a,s=(u<0?(i=0-e[2*t],a=0):u>this.width?(i=this.width-e[2*t],a=0):o<0?(a=0-e[2*t+1],i=0):o>this.height&&(a=this.height-e[2*t+1],i=0),e[2*t]+=i,e[2*t+1]+=a,(t+1)%4),c=(t+3)%4;t%2?(e[2*s]+=i,e[2*c+1]+=a):(e[2*s+1]+=a,e[2*c]+=i)}else if(t<4){if(i=n-e[2*t],a=r-e[2*t+1],0===i&&0===a)return e;e[2*t]=n,e[2*t+1]=r;l=(t+1)%4,u=(t+3)%4;t%2?(e[2*l]=n,e[2*u+1]=r):(e[2*l+1]=r,e[2*u]=n)}else{o=t-4,s=this.slopeRatio[o%4];0===s?(e[(2*o+3)%8]=r,e[(2*o+1)%8]=r):s!==1/0&&s!==-1/0||(e[(2*o+2)%8]=n,e[(2*o+0)%8]=n)}return e},t._movePointFree=function(e,t,n,r){n=Math.max(this.leftEdge,Math.min(this.width,n)),r=Math.max(this.topEdge,Math.min(this.height,r));var i=e.slice();if(t<4){var a=n-e[2*t],o=r-e[2*t+1];if(0==a&&0==o)return e;e[2*t]=n,e[2*t+1]=r}else{var a=t-4,o=this.slopeRatio[a%4],t=r-o*n,s=-t/o,c=t,u=e[(2*a+9)%8]-o*e[(2*a+8)%8],l=-u/o,d=this.k1,h=this.b1,f=this.k2,p=this.b2;0===o?(e[(2*a+3)%8]=r,d!==1/0&&d!==-1/0&&(e[(2*a+2)%8]=(r-h)/d),e[(2*a+1)%8]=r,f!==1/0&&f!==-1/0&&(e[(2*a+0)%8]=(r-p)/f)):o===1/0||o===-1/0?(e[(2*a+2)%8]=n,e[(2*a+3)%8]=d*n+h,e[(2*a+0)%8]=n,e[(2*a+1)%8]=f*n+p):(0===d?e[(2*a+2)%8]+=s-l:d===1/0||d===-1/0?e[(2*a+3)%8]+=c-u:(e[(2*a+2)%8]=(h-t)/(o-d),e[(2*a+3)%8]=(o*h-d*t)/(o-d)),0===f?e[(2*a+0)%8]+=s-l:f===1/0||f===-1/0?e[(2*a+1)%8]+=c-u:(e[(2*a+0)%8]=(p-t)/(o-f),e[(2*a+1)%8]=(o*p-f*t)/(o-f)));for(var g=0;g<4;g++){var v=e[2*g],m=e[2*g+1];if(v<this.leftEdge-.5||v>this.width+.5||m<this.topEdge-.5||m>this.height+.5)return i}}return e},t._moveBox=function(e,t,n){if("normal"===this.mode){var r=Math.min(e[0],e[2],e[4],e[6]),i=Math.max(e[0],e[2],e[4],e[6]),a=Math.min(e[1],e[3],e[5],e[7]),o=Math.max(e[1],e[3],e[5],e[7]);i+(t=r+t<0?-r:t)>this.width&&(t=this.width-i),o+(n=a+n<0?-a:n)>this.height&&(n=this.height-o);for(var s=0;s<4;s++)e[2*s]+=t,e[2*s+1]+=n}return e},t._isPointOnBox=function(e,t){var n,r,i,a;return"normal"===this.mode&&(n=(a=this._getMaxPoint()).minX,r=a.maxX,i=a.minY,a=a.maxY,n<=e&&e<=r&&i<=t&&t<=a)},t.isBoxSelected=function(e,t){var n=this._isPointOnBox(e,t),e=this.isCtrlPointSelected(e,t);return null!==e?e:n?-1:null},t.isCtrlPointSelected=function(e,t){var n=this.sensorRadius,r=this._getMaxPoint(),i=r.minX,a=r.maxX,o=r.minY,r=r.maxY,s=Math.min(Math.max(n,.1*(a-i)),3*n)*this.dpr,c=Math.min(Math.max(n,.1*(r-o)),3*n)*this.dpr,u=8;"free"===this.mode&&(u=8);for(var l=0;l<u;l++){var d=this.probePoints[2*l],h=this.probePoints[2*l+1];if(e<=d+s&&d-s<=e&&t<=h+c&&h-c<=t)return l}return null},t._checkRectConvexity=function(e){var t=(e[6]-e[0])*(e[3]-e[1])-(e[7]-e[1])*(e[2]-e[0]),n=(e[0]-e[2])*(e[5]-e[3])-(e[1]-e[3])*(e[4]-e[2]),r=(e[2]-e[4])*(e[7]-e[5])-(e[3]-e[5])*(e[6]-e[4]),i=(e[4]-e[6])*(e[1]-e[7])-(e[5]-e[7])*(e[0]-e[6]);if(t*n*r*i<0)return!1;var a=e.slice().concat(e.slice(0,2));if(this.slopeRatio.length)for(var o=0;o<2;o++)if(this.slopeRatio[o]!==this.slopeRatio[o+2])if(function(e,t,n,r){if(function(e,t,n,r){var i=Math.min,a=Math.max;return i(e[0],t[0])<=a(n[0],r[0])&&i(n[0],r[0])<=a(e[0],t[0])&&i(e[1],t[1])<=a(n[1],r[1])&&i(n[1],r[1])<=a(e[1],t[1])}(e,t,n,r)&&function(e,t,n,r){var i,a;if(i=e[0]*(n[1]-t[1])+t[0]*(e[1]-n[1])+n[0]*(t[1]-e[1]),a=e[0]*(r[1]-t[1])+t[0]*(e[1]-r[1])+r[0]*(t[1]-e[1]),0<=(i^a)&&0!==i&&0!==a)return;if(i=n[0]*(e[1]-r[1])+r[0]*(n[1]-e[1])+e[0]*(r[1]-n[1]),a=n[0]*(t[1]-r[1])+r[0]*(n[1]-t[1])+t[0]*(r[1]-n[1]),0<=(i^a)&&0!==i&&0!==a)return;return 1}(e,t,n,r)){var i,a;if(i=(r[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-r[1]),a=(e[1]-n[1])*(t[0]-e[0])*(r[0]-n[0])+n[0]*(r[1]-n[1])*(t[0]-e[0])-e[0]*(t[1]-e[1])*(r[0]-n[0]),0==i||0===a){var o=Kt(e,t),s=Kt(n,r),c=o[0],u=o[1],l=s[0],d=s[1];if(u[0]===l[0]&&u[1]===l[1])return u;if(c[0]===d[0]&&c[1]===d[1])return c;if($t(u,s)&&$t(l,o))return[l,u];if($t(c,s)&&$t(d,o))return[c,d];if($t(c,s)&&$t(u,s))return[c,u];if($t(l,s)&&$t(d,s))return[l,d]}o=a/i,c=(i=(e[0]-t[0])*(r[1]-n[1])-(t[1]-e[1])*(n[0]-r[0]),(a=t[1]*(e[0]-t[0])*(r[1]-n[1])+(r[0]-t[0])*(r[1]-n[1])*(e[1]-t[1])-r[1]*(n[0]-r[0])*(t[1]-e[1]))/i);return[o,c]}return!1}(a.slice(2*o,2*o+2),a.slice(2*o+2,2*o+4),a.slice(2*o+4,2*o+6),a.slice(2*o+6,2*o+8)))return!1;return 0<t*n*r*i},e}();function Qt(e){for(var t=e.slice(0,8).concat(e[0],e[1]),n=[],r=0;r<4;r++){var i=(t[2*r]+t[2*r+2])/2,a=(t[2*r+1]+t[2*r+3])/2;n.push(i,a)}return n}function Zt(e){for(var t=[],n=null,r=e.slice(0,8).concat(e[0],e[1]),i=0;i<4;i++)n=r[2*i+3]-r[2*i+1]==0&&r[2*i+2]-r[2*i]==0?0:r[2*i+2]-r[2*i]==0?1/0:(r[2*i+3]-r[2*i+1])/(r[2*i+2]-r[2*i]),t.push(n);return t}function Kt(e,t){return e[0]===t[0]?e[1]<t[1]?[e,t]:[t,e]:e[0]<t[0]?[e,t]:[t,e]}function $t(e,t){return t[0][0]===t[1][0]?e[1]>=t[0][1]&&e[1]<=t[1][1]:e[0]>=t[0][0]&&e[0]<=t[1][0]}var en=function(){function e(e){this._cvs=null,this._cropBox=null,this._isCropping=!1,this._zoom=1,this._edgeMargin=10,this._cropStyle={cornerColor:"#FE8E14",lineColor:"#FE8E14",lineWidth:2,lineDash:"solid"},this._cvs=e,this._initEvent()}var t=e.prototype;return t.getEdgeMargin=function(){return this._edgeMargin},t.dispose=function(){this._cvs.removeEventListener("touchstart",null),this._cvs.removeEventListener("touchmove",null),this._cvs.removeEventListener("touchend",null),this._cvs.removeEventListener("mousedown",null),document.removeEventListener("mousemove",null),document.removeEventListener("mouseup",null),this._cvs=null,this.onAreaChanged=null},t.setCropMode=function(e){this._isCropping=e},t.getCropMode=function(){return this._isCropping},t.clearCropBox=function(){this._cropBox=null,this._cvs.getContext("2d").clearRect(0,0,this._cvs.width,this._cvs.height)},t.setZoom=function(e){this._zoom=e},t.setCropArea=function(e,t){var n,r,i,a,o,s;e&&(n=t.relLeft,r=t.relTop,o=t.relWidth,t.relHeight,this._limitArea=t,t=this._cvs,i=this._zoom,a=this._edgeMargin,s=o=o/i,e=x(Se(e.map(function(e,t){return t%2==0?e/i+n+a:e/i+r+a}))),this._cropBox=new Jt({vertexes:e,width:t.width-a-n,height:t.height-a-r,leftEdge:a+n,topEdge:a+r,imgWidth:o,imgHeight:s,mode:"free",dpr:window.devicePixelRatio}),this._isCropping&&this._drawCropArea())},t.getCropArea=function(){var e=this._cropBox,n=this._zoom,r=this._edgeMargin,i=this._limitArea;return e?x(Se(e.vertexes.map(function(e,t){return t%2==0?(e-i.relLeft-r)*n:(e-i.relTop-r)*n}))):[]},t.setCropStyle=function(e){b(e,this._cropStyle),this._isCropping&&this._drawCropArea()},t.resize=function(e){var t,n,r=this._cropBox,i=this._edgeMargin;r&&(t=(n=this._cvs).width,n=n.height,r.width=t-i-e.relLeft,r.height=n-i-e.relTop,r.leftEdge=i+e.relLeft,r.topEdge=i+e.relTop,r.imgWidth=e.relWidth,r.imgHeight=e.relHeight)},t._initEvent=function(){var n=this,e=this._cvs;function t(e){this._cvsBoundingRect=this._cvs.getBoundingClientRect();var t=this._cropBox,n=this._cvsBoundingRect;t&&(t=n.left,n=n.top,this._cropBox.onStartHandler(e.clientX-t,e.clientY-n))}function r(e){var t,n;this._cropBox&&this._cropBox.isPointSelected&&(t=(n=this._cvsBoundingRect).left,n=n.top,this._cropBox.onMoveHandler(e.clientX-t,e.clientY-n),this._drawCropArea())}function i(){var e;this._cropBox&&this._cropBox.isPointSelected&&(this._cropBox.onEndHandler(),this._drawCropArea(),null!=(e=this.onAreaChanged)&&e.call(this,this.getCropArea()))}e.addEventListener("touchstart",function(e){e=e.touches;1<e.length||t.call(n,e[0])},{passive:!1}),e.addEventListener("mousedown",t.bind(this)),e.addEventListener("touchmove",function(e){var t=e.touches;1<t.length||n._cropBox&&n._cropBox.isPointSelected&&(r.call(n,t[0]),e.preventDefault())},{passive:!1}),document.addEventListener("mousemove",r.bind(this)),e.addEventListener("touchend",i.bind(this)),document.addEventListener("mouseup",i.bind(this))},t._drawCropArea=function(){var e=this._cropBox,t=this._cvs,n=this._cropStyle;if(e){var r=e.probePoints.slice(),e=t.getContext("2d"),i=(e.clearRect(0,0,t.width,t.height),n.lineWidth);if(i%2!=0)for(var a=0;a<r.length;a++)r[a]=Math.floor(r[a])-i/2;var o=r.slice(0,8),s=(e.fillStyle="rgba(255,255,255,0)",e.fillRect(0,0,t.width,t.height),e),c=o,t=n;s.save(),s.beginPath(),s.strokeStyle=t.lineColor,s.lineWidth=t.lineWidth,"dashed"===t.lineDash&&s.setLineDash([5,5]),s.moveTo(c[0],c[1]);for(var u=0;u<c.length;u+=2){var l=(u+2)%8,l=[c[l],c[1+l]];s.lineTo.apply(s,l)}s.closePath(),s.globalCompositeOperation="destination-out",s.fillStyle="rgba(0,0,0)",s.fill(),s.globalCompositeOperation="source-over",s.stroke(),s.closePath(),s.restore();var d=e,h=r,o=n,f=Math.floor(8);d.save(),d.strokeStyle=o.cornerColor,d.lineWidth=o.lineWidth;for(var p=0;p<h.length;p+=2){var g=[h[p],h[p+1]];d.clearRect(g[0]-f/2,g[1]-f/2,f,f),d.strokeRect(g[0]-f/2,g[1]-f/2,f,f)}d.restore()}},t.setFullArea=function(){var e,t,n,r;this._cropBox&&(e=(r=this._cropBox).imgWidth,t=r.imgHeight,n=r.leftEdge,r=r.topEdge,this._cropBox.vertexes=[n,r,n+e,r,n+e,r+t,n,r+t],this._cropBox.resetBox(),this._isCropping&&this._drawCropArea())},t.checkFull=function(){if(!this._cropBox)return!1;var e=this.getInnerCropArea(),t=this._cropBox.getRect();return $e(e,t.width,t.height)},t.getInnerCropArea=function(){var e=this._cropBox,n=this._edgeMargin,r=this._limitArea;return e?x(Se(e.vertexes.map(function(e,t){return t%2==0?e-r.relLeft-n:e-r.relTop-n}))):[]},e}();var tn=function(){function e(e,t){this._obElement=null,this._callback=null,this._unbindFn=null,this._callback=t,this._obElement=e,this._initObserver()}var t=e.prototype;return t._initObserver=function(){var e,t,n=this._callback,r=this._obElement;void 0!==window.ResizeObserver?((e=new window.ResizeObserver(function(e){e=e[0];n(e.contentRect)})).observe(r),this._unbindFn=function(){e.unobserve(r),e.disconnect(),e=null}):((t=document.createElement("iframe")).id="fm",t.style.cssText="width:100%;height:100%;z-index:-1;",t.onresize=function(){var e=r.getBoundingClientRect();n(e)},this._unbindFn=function(){t.remove(),t=null})},t.dispose=function(){this._unbindFn(),this._unbindFn=null,this._callback=null,this._obElement=null},t.getCallback=function(){return this._callback},e}(),nn=0,rn=1,an=2,on=3,sn=function(){function e(){this._cropInfoObjs={}}var t=e.prototype;return t.getCropInfo=function(e){return this._cropInfoObjs[e]||(this._cropInfoObjs[e]={}),this._cropInfoObjs[e]},t.destroy=function(){if(this._cropInfoObjs)for(var e in this._cropInfoObjs)delete this._cropInfoObjs[e];this._cropInfoObjs=null},e}(),f=t("getCropInfo"),cn=t("initCanvas"),un=t("initToggleButtonEvent"),ln=t("getImageArea"),dn=t("initElement"),hn=t("initViewer"),fn=function(s){function e(e,t,n){e=s.call(this,e,t,n)||this;return Object.defineProperty(a(e),hn,{value:_n}),Object.defineProperty(a(e),dn,{value:bn}),Object.defineProperty(a(e),ln,{value:mn}),Object.defineProperty(a(e),un,{value:vn}),Object.defineProperty(a(e),cn,{value:gn}),Object.defineProperty(a(e),f,{value:pn}),e.viewerPagerEventId=null,e.cropMng=null,e._resizeMng=null,e._cropInfoHelper=null,e._renderEvents=[],e._imageArea=null,e._reused=!1,e._bk={_cropInfoHelper:null,_backInfo:null,_backFileName:null,_copyRefMap:null,_customData:null},e._renderType=rn,e.pageName=ne,d(a(e),dn)[dn](),e}o(e,s);var t=e.prototype;return t.isCropPage=function(){return!0},t.enterReuseMode=function(e,t){var n,r,i,a,o=this.getViewerByUid(this._viewerId),s=o.getCurrentPageUids(),c=0;if(!this._reused){for(this._reused=!0,this._bk._cropInfoHelper=this._cropInfoHelper,this._bk._backInfo=this._backInfo,this._bk._backFileName=this._backFileName,this._bk._copyRefMap=this._copyRefMap,this._bk._customData={},c=0;c<s.length;c++){var u=s[c],l=null==(l=this._dvsWrapper)?void 0:l.getCustomDataSync(u);l&&(this._bk._customData[u]={detectArea:l.detectArea,angle:l.angle})}this._cropInfoHelper=new sn,this._copyRefMap={},this._backInfo={origApplyToAll:"",origDocumentData:{},initDocumentData:{}},this._backFileName=e.fileName}for(this.backupImageDataFromUids(t),c=0;c<s.length;c++)u=s[c],n=t[c],this._copyRefMap[u]=n,(r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(u))&&(i=null==(i=this._dvsWrapper)?void 0:i.getCustomDataSync(n))&&(r.detectArea=i.detectArea,r.angle=i.angle,d(this,f)[f](u).alreadyHandle=!1,o.resetByIndex(c,!1));e.nextButtonCss&&((null==(a=this.element)?void 0:a.querySelector("."+B.BUTTON_PREFIX+"save i")).className=e.nextButtonCss),this._editUid=null,this.render()},t.render=function(){var t,n=this.getViewerByUid(this._viewerId),e=n.getCurrentPageUids();e&&0<e.length&&(t=this,setTimeout(function(){var e;null!=n&&null!=(e=n.ui)&&e.styleChange(),t._renderType=rn,n.rotate(0),t._resizeMng&&V(e=t._resizeMng.getCallback())&&e(null)},0))},t.exitReuseMode=function(){var e;if(this._reused){var t=this.getViewerByUid(this._viewerId),n=t.getCurrentPageUids(),r=0;for(this._cropInfoHelper=this._bk._cropInfoHelper,this._backInfo=this._bk._backInfo,this._backFileName=this._bk._backFileName,this._copyRefMap=this._bk._copyRefMap,r=0;r<n.length;r++){var i,a=n[r],o=null==(o=this._dvsWrapper)?void 0:o.getCustomDataSync(a);o&&this._bk._customData&&((i=this._bk._customData[a])&&(o.detectArea=i.detectArea,o.angle=i.angle)),d(this,f)[f](a).alreadyHandle=!1,t.resetByIndex(r,!1)}this._bk._cropInfoHelper=null,this._bk._backInfo=null,this._bk._backFileName=null,this._bk._copyRefMap=null,this._bk._customData=null,this._editUid=null,this._reused=!1}(null==(e=this.element)?void 0:e.querySelector("."+B.BUTTON_PREFIX+"save i")).className=B.font+" "+B.iconNext},t.getCurrentArea=function(){if(this.cropMng){var e=this.cropMng.getCropArea();if(e&&0<e.length)return e}return d(this,f)[f](this._editUid).savedArea},t.getEditUid=function(){return this._editUid},t.setPageFilename=function(){this._pageFileName=["__dynamsoft_crop_files",Ke(6)].join("_")},t.initImageCropInfoByUid=function(e){var t,n,r,i,a,o,s;this.isDestroyed||M(e)&&""!=e&&(t=d(this,f)[f](e),(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(e))&&(r=null==(r=this._dvsWrapper)?void 0:r.getMetaDataSync(e),e=!1,s=o=0,n.detectArea?i=n.detectArea:(i=[],o=r.width,s=r.height,n.detectArea=i=0<o&&0<s?[0,0,o,0,o,s,0,s]:i),n.angle?a=m(n.angle):n.angle=a=0,r&&(o=r.width,s=r.height,0<o&&0<s&&(t.w=o,t.h=s),e=$e(i,o,s)),t.fullArea=e,t.savedArea=i,t.angle=a))},t._updateViewerSize=function(){var e,t,n;!this.isDestroyed&&this.element&&(t=null==(t=this.element)?void 0:t.querySelector("."+B.cvsContainer))&&(e=(t=t.getBoundingClientRect()).width,t=t.height,n=null==(n=this.element)?void 0:n.querySelector(".dvs-WebViewer"),e-=2*this.cropMng.getEdgeMargin(),t-=2*this.cropMng.getEdgeMargin(),n.width=e,n.height=t,n.style.cssText="width:"+e+"px;height:"+t+"px")},t._resetCropCanvas=function(){var e=null==(e=this.element)?void 0:e.querySelector(".dvs-cropper"),e=(e&&(e.width=1,e.height=1,e.style.cssText="width:1px !important;height:1px !important"),null==(e=this.element)?void 0:e.querySelector(".dvs-canvasEventLayer"));e&&(e.width=1,e.height=1,e.style.cssText="width:1px !important;height:1px !important;background:rgba(255,255,255,0)")},t._listenResize=function(){var n=this,e=(e=null==(e=this.element)?void 0:e.querySelector(".dvs-WebViewer"))||this.element;this._resizeMng=new tn(e,function(){setTimeout(function(){var e,t=n._editUid;t&&(n._setDetectCanvasSize(t),n._updateViewerSize(),e=n._rotateSavedArea(t,0),n._drawCropArea(t,e),n._renderType=an)},0)})},t._drawFullArea=function(){this._setDetectCanvasSize(this._editUid);var e=d(this,ln)[ln]();if(!e)return this._renderType=rn,void this.render();this.cropMng.resize(e),this.cropMng.setFullArea()},t.getAreaForResize=function(){var e=this.cropMng.getCropArea(),t=d(this,f)[f](this._editUid);return this.isAreaFulfilled(e)?[0,0,e=t.w,0,e,e=t.h,0,e]:t.savedArea},t.rotateLeft=function(){this._rotate(this._editUid,-90)},t.rotateRight=function(){this._rotate(this._editUid,90)},t._rotateSavedArea=function(e,t,n){void 0===n&&(n=null);var r,i,a,o,t=m(t);return this.cropMng&&(r=(i=(e=d(this,f)[f](e)).angle%180==0)?e.w:e.h,i=i?e.h:e.w,a=!1,0==(o=n||this.cropMng.getCropArea()).length&&(o=e.savedArea),a=this.isAreaFulfilled(o),o=xn(o,t,i,r),a?(e.fullArea=!0,0!=t&&(e.savedArea=xn(e.savedArea,t,i,r))):(e.fullArea=!1,e.savedArea=o)),o},t._rotate=function(e,t,n){if(void 0===n&&(n=-1),!(this.isDestroyed||this.getImageCount()<=0)){var r=this._dcs,i=this.getViewerByUid(this._viewerId),t=m(t),a=i.getCurrentPageUids();if(0!=a.length){var o=-1;try{if(null!=r&&r.showLoading("rotate button init"),(o=(o=i&&e?i.getIndexByUid(e):o)<0?this.options.curIndex:o)<0||o>=a.length)return;var s,c,u,l=this._rotateSavedArea(e,t);0!=t&&(this._renderType=on,i.rotateMode=0,i.rotate(t,o),(c=null==(s=this._dvsWrapper)?void 0:s.getCustomDataSync(e))&&(-1==n&&(n=void 0===(u=c.angle)?0:u),c.angle=m(n+t),c.resBlob&&delete c.resBlob,d(this,f)[f](e).angle=c.angle))}finally{null!=r&&r.hideLoading("rotate button init")}this._drawCropArea(e,l)}}},t.getAngle=function(e){e=d(this,f)[f](e);return Ye(e.angle)?m(e.angle):e.angle=0},t.hide=function(){s.prototype.hide.call(this)},t.show=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return this.hide(),e.abrupt("return");e.next=3;break;case 3:return this._dcs.config.documentEditorSettings.visibility="visible",e.next=6,s.prototype.show.call(this);case 6:this._updateViewerSize(),(t=this.getViewerByUid(this._viewerId))&&(t.getCurrentPageUids().length<=0&&this.disableCrop(),t.render());case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.destroy=function(){var e;this._reused?this.hide():(this.isDestroyed=!0,(e=this.getViewerByUid(this._viewerId))&&this.viewerPagerEventId&&e.offById(Q,this.viewerPagerEventId),this.viewerPagerEventId=null,this.removePageFile(),null!=(e=this._resizeMng)&&e.dispose(),(this._resizeMng=null)!=(e=this.cropMng)&&e.dispose(),null!=(e=this.detectCvsEl)&&e.remove(),this.cropMng=null,this.detectCvsEl=null,this._renderEvents.slice(0),null!=(e=this._cropInfoHelper)&&e.destroy(),this._cropInfoHelper=null,s.prototype.destroy.call(this),this.options=null)},t._calImageArea=function(e){var t=this.getViewerByUid(this._viewerId);if(!t)return null;t=t.getCurrentTab();if(!t)return null;t=t.getCurPage();if(!t)return null;t={x:t.style.left,y:t.style.top,width:t.style.width,height:t.style.height};if(t.width<=1||t.height<=1)return null;var e=this.getAngle(e)%180==0,n=d(this,f)[f](this._editUid),r=n.w,n=n.h,i=e?t.width:t.height,a=e?t.height:t.width,o=Math.min(i/r,a/n),r=Math.fround(o*r),n=Math.fround(o*n),i=Math.floor(.5*Math.abs(i-r)),a=Math.floor(.5*Math.abs(a-n));return this._imageArea={relLeft:t.x+(e?i:a),relTop:t.y+(e?a:i),relWidth:e?r:n,relHeight:e?n:r,zoom:1/o},this._imageArea},t._drawCropArea=function(e,t){if(!this.isDestroyed&&(this._setDetectCanvasSize(e),this.cropMng)){var n=d(this,ln)[ln]();if(!n)return this._renderType=rn,void this.render();this.cropMng.resize(n);n=t;n=n?x(n=Se(n)):d(this,f)[f](e).savedArea,this.cropMng.setCropArea(n,d(this,ln)[ln]())}},t._setDetectCanvasSize=function(e){var t,n,r;this.element&&(t=(n=(null==(n=this.element)?void 0:n.querySelector("."+B.cvsContainer)).getBoundingClientRect()).width,n=n.height,(r=this.detectCvsEl)&&(r.width=t,r.height=n,r.style.cssText="left:0px;top:0px;width:"+t+"px;height:"+n+"px")),this.cropMng&&e&&((r=this._calImageArea(e))&&this.cropMng.setZoom(r.zoom))},t.getCropManage=function(){return this.cropMng},t.getDetectAreaForNotRotate=function(e){if(!this.cropMng)return[];var t=this.cropMng.getCropArea(),n=d(this,ln)[ln]();if(!n)return this._renderType=rn,this.render(),[];var r=n.relWidth,n=n.relHeight,i=this.cropMng._zoom;return x(function(e,t,n,r){var i=[],a=m(t);if(0==a)return e;for(var o=0;o<e.length;o+=2){var s=void 0,c=void 0,u=e[o],l=e[o+1],c=90==a?(s=l,n-u):180==a?(s=n-u,r-l):270==a?(s=r-l,u):(s=u,l);i.push(s,c)}return i}(t,this.getAngle(e),Math.fround(r*i),Math.fround(n*i)))},t.isAreaFulfilled=function(e){var t=this.cropMng;if(!t)return!1;if(this._editUid){var n=this._calImageArea(this._editUid);if(!n)return!0;var r=n.relWidth,n=n.relHeight,t=t._zoom;return $e(e,Math.fround(r*t),Math.fround(n*t))}return!0},t.toggleFullAreaButton=function(){var e=this.cropMng;if(!e)return!1;if(!(this.getImageCount()<=0)){var t=d(this,f)[f](this._editUid),n=t.angle%180==0,r=n?t.w:t.h,n=n?t.h:t.w,i=this._calImageArea(this._editUid);if(!i)return!1;var a,r=Math.fround(+r),n=Math.fround(+n),o=this.getCurrentArea(),s=$e(o,r,n);return s?0===t.savedArea.length?(t.savedArea=[0,0,r-2,0,r-2,n-2,0,n-2],a=t.savedArea):$e(a=x(a=Se(a=t.savedArea)),r,n)&&(t.savedArea=a=[0,0,r-2,0,r-2,n-2,0,n-2]):(t.savedArea=o,a=[0,0,r,0,r,n,0,n]),e.setCropArea(a.slice(),i),s}},t.setZooming=function(){this._zooming=!1},t.getHeaderButtons=function(){var e=this.options,t=e.headerButtons,e=e.documentEditorSettings,e=(void 0===e?{}:e).headerStyle;return s.prototype.createIconItems.call(this,void 0===t?{}:t,void 0===e?{}:e,!0,null)},t.getFooterButtons=function(){var e=this.options,t=e.footerButtons,e=e.documentEditorSettings,e=(void 0===e?{}:e).footerStyle;return s.prototype.createIconItems.call(this,void 0===t?{}:t,void 0===e?{}:e,!1,null)},t.resetCropInfoByUids=function(e){var t=[],n=this.getViewerByUid(this._viewerId);if(e&&n)for(var r,i,a=n.getCurrentPageUids().length,o=0;o<e.length;o++)!M(i=e[o])||""==i||Ye(r=n.getIndexByUid(i))&&0<=r&&r<a&&(this.initImageCropInfoByUid(i),d(this,f)[f](i).alreadyHandle=!1,t.push(r));return t},t._resetViewerWhenChanged=function(){var e=[],t=[],n=this.getViewerByUid(this._viewerId);if(n)for(var r=n.getCurrentPageUids(),i=0;i<r.length;i++){var a,o,s,c=r[i];M(c)&&""!=c&&d(this,f)[f](c).alreadyHandle&&(this._editUid=null,(o=this._copyRefMap[c])&&(o=this._backInfo.origDocumentData[o])?(a=o.detectArea,o=o.angle,(s=null==(s=this._dvsWrapper)?void 0:s.getCustomDataSync(c))&&_(a,s.detectArea)&&o==s.angle||(t.push(c),e.push(i))):(t.push(c),e.push(i)))}return this.resetCropInfoByUids(t),e},t.clickBackButton=function(){var e=S(E().mark(function e(){var t,n,r,i,a,o,s,c,u,l,d;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(t=this._dcs,this.options.fromInternal,t.getCurrentPage(),n=t.getPreviousPage(),this.saveCurrentDataToUid(this._editUid),r=this.ifOldDocumentDataChanged(),o=this.options.documentEditorSettings.cropViewer,(o=(void 0===o?{}:o).funcConfirmExit)&&V(o))return s="",n&&(s=n.pageName),e.next=14,o(r,s);e.next=21;break;case 14:if((i=e.sent)==ie)return e.abrupt("return");e.next=19;break;case 19:if(i!=g&&i!=v)return e.abrupt("return");e.next=21;break;case 21:if(void 0===i&&(i=!n||n instanceof y?g:v),!n){e.next=35;break}if(!(n instanceof y)){e.next=33;break}if(i!=g){e.next=27;break}e.next=31;break;case 27:if(i==v)return e.next=30,this.clickSaveButton();e.next=31;break;case 30:return e.abrupt("return");case 31:e.next=33;break;case 33:e.next=42;break;case 35:if(i!=g){e.next=38;break}e.next=42;break;case 38:if(i!=v){e.next=42;break}t.showLoading("crop back button SaveAndExit");try{this.clickSaveButton(!0)}finally{t.hideLoading("crop back button SaveAndExit")}return e.abrupt("return");case 42:if(a=!1,e.prev=43,!n){e.next=85;break}if(r&&(o=this._resetViewerWhenChanged(),this.resetViewerAngleByIndexes(o),i==v?this.saveViewerCustomData():i==g&&(o=this.restoreViewerCustomData(),this.resetViewerAngleByIndexes(o))),n instanceof y)return a=!0,t.showLoading("click crop back"),s=this.getCurrentIndex(),n.hide(),n.gotoViewPage(s),e.next=54,t.navigateBack();e.next=56;break;case 54:e.next=85;break;case 56:if(n instanceof N)return a=!0,e.next=60,t.navigateBack(1,!1);e.next=85;break;case 60:return c=e.sent,t.showLoading("click crop back"),e.next=64,n.refreshPreviewWhenChanged();case 64:if(1==c.length?n.setNextViewerPage(c.pop()):t.destroyRemovedPages(),"playing"!=(u=t.getStatus())){e.next=69;break}e.next=84;break;case 69:if("paused"!=u){e.next=73;break}t.isHidden()||t.resume(),e.next=84;break;case 73:if(t.isHidden()){e.next=84;break}if(l=n.element,l=l.children[1],(d=this.options.scannerViewer)&&d.resolution&&d.resolution.defaultValue)return e.next=80,t.play(l,d.resolution.defaultValue.width,d.resolution.defaultValue.height,d.fullScreen);e.next=82;break;case 80:e.next=84;break;case 82:return e.next=84,t.play(l);case 84:t.isHidden()||t.emit("resetResolution");case 85:if(n){e.next=93;break}if(t.showLoading("click crop back"),t.closeAllPages)return e.next=90,t.closeAllPages();e.next=90;break;case 90:t.exit(this._dvs),e.next=96;break;case 93:if(a){e.next=96;break}return e.next=96,t.navigateBack();case 96:return e.prev=96,n&&t.emit("focusPage"),t.hideLoading("click crop back"),e.finish(96);case 100:case"end":return e.stop()}},e,this,[[43,,96,100]])}));return function(){return e.apply(this,arguments)}}(),t.initPageOption=function(e,t){var n,r=this,t=(s.prototype.initPageOption.call(this,e,t),this.options.documentEditorSettings.cropViewer),t=void 0===t?{}:t,i=t.rotateLeft,a=t.rotateRight,t=t.autoDetectBorder,o={icon:B.font+" "+B.iconNext,className:B.BUTTON_PREFIX+"save",onclick:function(e,t){t=t.dcs.getCurrentPage();t&&t.clickSaveButton()}},e=(e.nextButtonCss&&(o.icon=e.nextButtonCss),{footerButtons:{rotateLeft:u(i,{icon:B.font+" "+B.iconRotateLeft,className:B.BUTTON_PREFIX+"rotateLeft",onclick:function(e,t){t=t.dcs.getCurrentPage();t&&t.rotateLeft()}}),rotateRight:u(a,{icon:B.font+" "+B.iconRotateRight,className:B.BUTTON_PREFIX+"rotateRight",onclick:function(e,t){t=t.dcs.getCurrentPage();t&&t.rotateRight()}}),toggleFullArea:u(t,{icon:B.font+" "+B.iconFullCrop,className:B.BUTTON_PREFIX+"toggleFullArea",onclick:function(e,t){var n=t.page;t.dcs;n.getImageCount()<=0||(t=n.toggleFullAreaButton(),(n=null==e?void 0:e.currentTarget)&&n.classList[t?"remove":"add"](B.footerSelected))}}),save:o},headerButtons:{backBtn:{icon:B.font+" "+B.iconBack,className:B.BUTTON_PREFIX+"backBtn",onclick:(n=S(E().mark(function e(t,n){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.dcs,e.next=3,r.clickBackButton();case 3:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},pager:{className:"dvs-cameraPager"}}});this.options=b(this.options,e)},t.changePageNumber=function(e,t){var n,r;this.element&&(n=null==(r=null==(r=this.element)?void 0:r.querySelector(".dvs-cameraPager"))?void 0:r.querySelector(".dvs-curPage"),r=null==r?void 0:r.querySelector(".dvs-totalPage"),n.innerText=String(e+1),r.innerText=String(t))},t.changeStatus=function(e,t){var n,r;this.element&&(n=null==(r=null==(r=this.element)?void 0:r.querySelector(".dvs-cameraPager"))?void 0:r.querySelector(".dvs-previousPage"),r=null==r?void 0:r.querySelector(".dvs-nextPage"),0<=e?(n.classList[e<=0?"add":"remove"](B.disable),r.classList[t===e+1?"add":"remove"](B.disable)):(n.classList.add(B.disable),r.classList.add(B.disable)))},t.handlePageByUid=function(){var n=S(E().mark(function e(t,n){var r,i,a,o,s;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._dcs,this.isDestroyed)return e.abrupt("return");e.next=3;break;case 3:if(this._editUid==t){e.next=7;break}this._editUid=t,e.next=8;break;case 7:return e.abrupt("return");case 8:if(this.isDestroyed)return e.abrupt("return");e.next=10;break;case 10:return r.showLoading("handle crop page by uid"),e.prev=11,this._renderType=rn,e.next=15,this.initOrigDataByUid(t);case 15:if(this.isDestroyed)return e.abrupt("return");e.next=17;break;case 17:this.initImageCropInfoByUid(t),i=0,s=d(this,f)[f](t),o=s.fullArea,i=s.angle,s.alreadyHandle?null!=s.angle&&(i=s.angle,s.angle=0,a=this._rotateSavedArea(t,i,s.savedArea),s.angle=i,this._drawCropArea(t,a)):(0!=(i=null==i?this.getAngle(t):i)?(s.angle=0,a=this._rotateSavedArea(t,0,s.savedArea),this._drawCropArea(t,a),this._rotate(t,i,0)):(a=this._rotateSavedArea(t,0,s.savedArea),this._drawCropArea(t,a)),this._renderType=rn,s.alreadyHandle=!0),(s=null==(i=this.element)?void 0:i.querySelector("."+B.BUTTON_PREFIX+"toggleFullArea"))&&s.classList[o?"add":"remove"](B.footerSelected);case 25:return e.prev=25,r.hideLoading("handle crop page by uid"),e.finish(25);case 28:case"end":return e.stop()}},e,this,[[11,,25,28]])}));return function(e,t){return n.apply(this,arguments)}}(),t.saveCurrentDataToUid=function(e){if(M(e)&&""!=e){this._dcs.showLoading("crop save current data");try{var t,n,r,i=this.getAngle(e),a=null==(t=this._dvsWrapper)?void 0:t.getCustomDataSync(e);a&&(n=!1,this.cropMng&&this.cropMng.getCropMode()&&(r=this.getDetectAreaForNotRotate(e),a.detectArea=r,n=!0),a.angle!=i&&(a.angle=i,n=!0),n&&a.resBlob&&delete a.resBlob)}finally{this._dcs.hideLoading("crop save current data")}}},t.clickSaveButton=function(){var t=S(E().mark(function e(t){var n,r,i,a,o,s,c,u,l,d,h,f,p,g,v,m;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),this.isDestroyed)return e.abrupt("return");e.next=3;break;case 3:if((n=this._dcs).showLoading("crop save"),e.prev=5,s=n.getPreviousPage(),this.saveCurrentDataToUid(this._editUid),r=!1,!s){e.next=24;break}if(s instanceof y)return(l=this.ifOldDocumentDataChanged())&&(s.setCurPageId(null),s.setCurImageData(null),s.SetFilterDirty(!0)),this.mergeChangedToSavedFileSync(),this._reused&&this.saveChangedTo_bk(),l&&(this._editUid=null),this.options.fromInternal&&s.applyChanged(),r=!0,l=this.getCurrentIndex(),s.hide(),s.gotoViewPage(l),e.next=23,n.navigateBack();e.next=24;break;case 23:T(n);case 24:if(r){e.next=85;break}if(a=this.getDvs(),o=this.getCurrentIndex(),s=this.getViewerByUid(this._viewerId),c=s.getCurrentPageUids(),(u=this._nextViewerPage)&&u instanceof y)return e.next=33,u.syncFiles(!1,c);e.next=53;break;case 33:if(i=u.regetViewerCustomDataFromSrc(),u.resetViewerAngleByIndexes(i),l=u.getCurrentIndex(),o!=l&&(u.setCurImageData(null),u.SetFilterDirty(!0)),this.isNextEditPageCurrentDataDifferent(u)&&(i=u.restoreViewerCurrentCustomData(),u.resetViewerAngleByIndexes(i),u.setCurImageData(null),u.SetFilterDirty(!0)),u.gotoViewPage(o),t)return e.next=42,this._dcs.navigateToPage(u,!1);e.next=48;break;case 42:return u.hide(),this.show(),e.next=46,u.clickSaveButton();case 46:e.next=50;break;case 48:return e.next=50,this._dcs.navigateToPage(u);case 50:this._nextViewerPage=null,e.next=83;break;case 53:if(d={fileName:this._pageFileName,initFileName:this._initFileName,curIndex:o,fromInternal:this.options.fromInternal,documentEditorSettings:this.options.documentEditorSettings},this.options.fromInternal){e.next=70;break}h={},f=0;case 57:if(!(f<c.length)){e.next=69;break}if(M(p=c[f])&&""!=p){e.next=61;break}return e.abrupt("continue",66);case 61:if(M(g=this._copyRefMap[p])&&""!=g){e.next=64;break}return e.abrupt("continue",66);case 64:m=this._backInfo.initDocumentData[g],h[p]=b(m,{});case 66:f++,e.next=57;break;case 69:d.initDocumentData=h;case 70:if(v=new y(d,a,n),t)return e.next=74,n.navigateToPage(v,!1);e.next=80;break;case 74:return v.hide(),this.show(),e.next=78,v.clickSaveButton();case 78:e.next=83;break;case 80:return v.gotoViewPage(o),e.next=83,n.navigateToPage(v);case 83:t||((m=n.getPreviousPage())&&m.hide(),i=this._resetViewerWhenChanged(),this.resetViewerAngleByIndexes(i)),r=!0;case 85:return e.prev=85,n.hideLoading("crop save"),e.finish(85);case 88:case"end":return e.stop()}},e,this,[[5,,85,88]])}));return function(e){return t.apply(this,arguments)}}(),t.isNextEditPageCurrentDataDifferent=function(e){var t=e.getCurrentEditUid();if(t){var t=e.getRefUid(t,!1),n=e.getCurrentCustomData();if(n&&t){var r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(t);if(r)return e.compareOldValueChanged(r,n,null)}}return!0},t.mergeChangedToSavedFileSync=function(){for(var e=this.getViewerByUid(this._viewerId).getCurrentPageUids(),t=0;t<e.length;t++){var n,r,i=e[t],a=this._copyRefMap[i];!M(a)||""==a||(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(i))&&(i=this._backInfo.origDocumentData[a],!(r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(a))||_(r.detectArea,n.detectArea)&&r.angle==n.angle||(a=!1,_(r.detectArea,n.detectArea)||(r.detectArea=n.detectArea,a=!0),r.angle!=n.angle&&(r.angle=n.angle,a=!0),a&&r.resBlob&&delete r.resBlob,i&&(a=!1,_(i.detectArea,n.detectArea)||(i.detectArea=n.detectArea,a=!0),i.angle!=n.angle&&(i.angle=n.angle,a=!0),a&&i.resBlob&&delete i.resBlob)))}},t.compareOldValueChanged=function(e,t,n){if(!e||!t)return!0;if(void 0===e.detectArea){var r=n.imageWidth,n=n.imageHeight;if(!$e(t.detectArea,r,n))return!0}else if(!_(e.detectArea,t.detectArea))return!0;if(void 0===e.angle){if(0!=t.angle)return!0}else if(e.angle!=t.angle)return!0;return!1},t.saveChangedTo_bk=function(){if(this._bk&&this._bk._customData){var e=this._cropInfoHelper;this._cropInfoHelper=this._bk._cropInfoHelper;for(var t=this.getViewerByUid(this._viewerId).getCurrentPageUids(),n=0;n<t.length;n++){var r,i,a=t[n],o=null==(o=this._dvsWrapper)?void 0:o.getCustomDataSync(a);o&&((r=this._bk._customData[a])&&(i=!1,_(r.detectArea,o.detectArea)||(r.detectArea=o.detectArea,i=!0),r.angle!=o.angle&&(r.angle=o.angle,i=!0),i&&r.resBlob&&delete r.resBlob),this._cropInfoHelper&&this.initImageCropInfoByUid(a))}this._cropInfoHelper=e}},t.updateUid=function(){var r=S(E().mark(function e(t,n,r){var i,a;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._reused)return e.abrupt("return");e.next=2;break;case 2:if(i=this._dvs,M(a=this._copyRefMap[t])&&""!=a){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Be(n,i,a,!0,r);case 8:case"end":return e.stop()}},e,this)}));return function(e,t,n){return r.apply(this,arguments)}}(),t.syncFileFromExternalEvent=function(){var n=S(E().mark(function e(t,n){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(this._reused)return e.next=5,this.syncFileForReusedFromExternalEvent(t,n);e.next=7;break;case 5:e.next=9;break;case 7:return e.next=9,s.prototype.syncFileFromExternalEvent.call(this,t,n);case 9:this.getImageCount()<=0&&this.disableCrop();case 10:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.syncFileForReusedFromExternalEvent=function(){var n=S(E().mark(function e(t,n){var r,i,a,o,s,c,u,l,d,h;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._reused)return r=this._copyRefMap,i=this._backInfo,this._copyRefMap=this._bk._copyRefMap,this._backInfo=this._bk._backInfo,o=this._fileWrapper.openFile(this._bk._backFileName),e.next=8,this.syncFiles(t,o);e.next=19;break;case 8:for(this._copyRefMap=r,this._backInfo=i,this._bk._copyRefMap=this._copyRefMap,this._bk._backInfo=this._backInfo,a=this._fileWrapper.openFile(this._backFileName),this.backupNewImageDataFromUids(a),o=this.getViewerByUid(this._viewerId),s=o.getCurrentPageUids(),c=s.length,l=a.length,u=0;u<c;u++)d=s[u],u<l?(h=a[u],this._copyRefMap[d]=h):this._copyRefMap[d]=void 0;case 19:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.backupNewImageDataFromUids=function(e){for(var t,n,r=e.length,i=0;i<r;i++)M(t=e[i])&&""!=t&&!this._backInfo.origDocumentData[t]&&(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(t),this._backInfo.origDocumentData[t]=n?{detectArea:n.detectArea,angle:n.angle,filterValue:n.filterValue}:{detectArea:null,angle:0,filterValue:this._dcs.curFilterValue})},t.disableCrop=function(){this.cropMng&&(this.cropMng.setCropMode(!1),this.cropMng.clearCropBox());var e=null==(e=this.element)?void 0:e.querySelector("."+B.BUTTON_PREFIX+"toggleFullArea");e&&e.classList.remove(B.footerSelected)},e}(Mt);function pn(e){return this._cropInfoHelper||(this._cropInfoHelper=new sn),this._cropInfoHelper.getCropInfo(e)}function gn(){var n=this,e=this.element;this.detectCvsEl=null==e?void 0:e.querySelector("."+B.detectCvs),this.detectCvsEl&&(e=(void 0===(e=this.options.documentEditorSettings.cropViewer)?{}:e).polygonStyle,this.cropMng=new en(this.detectCvsEl),e&&this.cropMng.setCropStyle({lineColor:e.stroke,lineWidth:parseInt(e.strokeWidth,10),cornerColor:e.stroke,lineDash:e.dash}),this.cropMng.onAreaChanged=function(e){for(var t in n.isAreaFulfilled(e)||(d(n,f)[f](n._editUid).savedArea=e),n._renderEvents)V(n._renderEvents[t])&&n._renderEvents[t](e)})}function vn(){var n=this;this._renderEvents.push(function(e){var e=e||n.getCurrentArea(),e=n.isAreaFulfilled(e),t=null==(t=n.element)?void 0:t.querySelector("."+B.iconFullCrop);t&&t.parentElement&&t.parentElement.classList[e?"add":"remove"](B.footerSelected)})}function mn(){return this._imageArea||(this._imageArea=this._calImageArea(this._editUid)),this._imageArea}function bn(){var e=this.options.documentEditorSettings,e=void 0===e?{}:e,t=e.headerStyle,t=void 0===t?{}:t,n=e.bodyStyle,e=e.footerStyle,e=void 0===e?{}:e;this.setDefaultBackgroundColors(t,void 0===n?{}:n,e),this.template=['<header style="background:'+t.background+'" class="headerButtons"></header>','<div class="'+B.cvsContainer+'"><canvas class="'+B.detectCvs+'"></canvas></div>','</div><footer style="background:'+e.background+'" class="footerButtons"></footer>'].join(""),this.className=B.cropPage,this.createEl(),this._listenResize(),d(this,hn)[hn](),d(this,cn)[cn](),d(this,un)[un]()}function _n(){return yn.apply(this,arguments)}function yn(){return(yn=S(E().mark(function e(){var n,r,t,i,a,o,s,c=this;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.element){e.next=2;break}return e.abrupt("return");case 2:t=this.options,t=t.documentEditorSettings,t=(void 0===t?{}:t).bodyStyle,t=void 0===t?{}:t,n=this._dvs,this._dcs,a=null==(a=this.element)?void 0:a.querySelector(".dvs-cameraPager"),o=null==a?void 0:a.querySelector(".dvs-previousPage"),s=null==a?void 0:a.querySelector(".dvs-nextPage"),(r=this.getViewerByUid(this._viewerId)).canvasBackground=t.background,r.bindView(null==(t=this.element)?void 0:t.querySelector("."+B.cvsContainer)),r.on(Y,function(){if(!c.isDestroyed)if(c._renderType==on)c._renderType=nn;else{c._renderType!=nn&&(c._renderType=nn);var e=r.getCurrentTab();if(e){e=e.getCurPage();if(e&&1<e.style.width&&1<e.style.height){c.cropMng.setCropMode(!0),c._resetCropCanvas();var t,n=c._rotateSavedArea(c._editUid,0);for(t in c._drawCropArea(e.uid,n),c._renderEvents)V(c._renderEvents[t])&&c._renderEvents[t]()}}}}),this._resetCropCanvas(),t=r.getCurrentTab(),o&&s||(a.innerHTML='<div class="dvs-previousPage '+B.font+" "+B.iconArrow+" "+B.headerfont+" "+B.disable+'"></div>\n      <p><span class="dvs-curPage">0</span>/<span class="dvs-totalPage">0</span></p>\n      <div class="dvs-nextPage '+B.font+" "+B.iconArrow+" "+B.headerfont+" "+B.disable+'"></div>',o=null==a?void 0:a.querySelector(".dvs-previousPage"),s=null==a?void 0:a.querySelector(".dvs-nextPage"),t&&0<=t.total&&(o.onclick=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(-1!=(t=r.getPrePageIndex()))return t=r.getUidByIndex(t),c.saveCurrentDataToUid(c._editUid),e.next=8,c.handlePageByUid(t,n);e.next=10;break;case 8:c.disableCrop(),r.prevPage();case 10:case"end":return e.stop()}},e)})),s.onclick=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(-1!=(t=r.getNextPageIndex()))return t=r.getUidByIndex(t),c.saveCurrentDataToUid(c._editUid),e.next=8,c.handlePageByUid(t,n);e.next=10;break;case 8:c.disableCrop(),r.nextPage();case 10:case"end":return e.stop()}},e)})),(i=this).viewerPagerEventId=r.on(Q,function(e){c.isDestroyed||i&&e&&(i.changePageNumber(e.cur,e.total),i.changeStatus(e.cur,e.total))}))),t&&0<=(a=t.total)&&0<=(o=r.getCurrentIndex())&&(this.changeStatus(o,a),this.changePageNumber(o,a),M(s=r.getUidByIndex(o))&&""!=s&&this._editUid&&this.saveCurrentDataToUid(this._editUid)),null!=(t=r.ui)&&t._resizeViewer();case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function xn(e,t,n,r){var i=[],a=m(t);if(0==a)return h(e);for(var o=0;o<e.length;o+=2){var s=void 0,c=void 0,u=Math.fround(e[o]),l=Math.fround(e[o+1]),c=90==a?(s=n-l,u):180==a?(s=r-u,n-l):270==a?(s=l,r-u):(s=u,l);i.push(s,c)}return i}var wn=function(r){function e(e,t,n){e=r.call(this,e,t,n)||this;return e.pageName="insertPage",e}o(e,r);var t=e.prototype;return t.initFileName=function(e){e&&e.fileName&&(this.fileName=e.fileName)},t.attachDefaultEvent=function(){this.on("onSaveCapture",function(e,t,n,r,i){!function(){kn.apply(this,arguments)}(e,t,n,r,i)})},t.initPageOption=function(e,t){e.scannerViewer||(e.scannerViewer=h(t.config.scannerViewer),t.config&&t.config.scannerViewer&&t.config.scannerViewer.element&&(e.scannerViewer.element=t.config.scannerViewer.element));var t=e.scannerViewer,n=t.resolution,r=t.autoScan,i=t.autoDetect,a=t.switchCamera,t=t.loadLocalFile,n={headerButtons:{changeResBtn:u(n,bt()),autoDetect:s({isSelected:(null==r?void 0:r.enableAutoScan)||(null==i?void 0:i.enableAutoDetect)},u(i,yt())),closeBtn:gt()},footerButtons:{load:u(t,ct()),toggleCamera:u(a,vt()),capture:pt(),autoCapture:s({isSelected:null==r?void 0:r.enableAutoScan},u(r,mt())),continuous:{icon:B.font+" "+B.iconContinuous,className:B.BUTTON_PREFIX+"continuousMode",visibility:"hidden"}},scannerViewer:{resolution:{defaultValue:{width:1280,height:720}},fullScreen:!1}};this.options=b(e,n)},t.selectedFile=function(){var n=S(E().mark(function e(t,n){var r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stop(),e.prev=1,(r=n.getPreviousPage())&&r instanceof y)return e.next=6,r.insertFile(t);e.next=6;break;case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),n.hideLoading("insert - load image"),e.t0;case 12:return e.prev=12,n.hideLoading("insert - load image"),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,8,12,15]])}));return function(e,t){return n.apply(this,arguments)}}(),e}(N);function kn(){return(kn=S(E().mark(function e(t,n,r,i,a){var o,s,c,u,l;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.dcs,!(s=o.getPreviousPage()).isDestroyed&&s instanceof y){e.next=4;break}return e.abrupt("return");case 4:if(o.showLoading("OnInsertPageSave"),e.prev=5,c=o.config.scannerViewer||{},c=c.maxDocuments,u=c=void 0===c?20:c,l=s.getViewerByUid(s.getViewerUid()),!s.options.fromInternal||l.currentPageCount+1<=u&&l.currentPageCount+1<=c)return o.config&&o.config.scannerViewer&&o.config.scannerViewer.autoScan&&!o.config.scannerViewer.autoScan.enableAutoScan&&o.setLoadingNumber(2),e.next=13,o.packageBlobItemFromIImageData(r,!0,!0,!1);e.next=28;break;case 13:return u=e.sent,e.next=16,s.insertImgByBlobItem(u,o);case 16:if(l=e.sent,s.setInsertingImageIndex(l),0<=l)return e.next=21,s.handlePageByIndex(l);e.next=21;break;case 21:return i&&o.setImageDataBack(r.imageData),o.emit("blurPage"),e.next=25,o.navigateBack();case 25:e.sent,e.next=31;break;case 28:return o.emit("video-error",P.MAX_IMAGES_IN_BUFFER_LIMIT),e.next=31,o.navigateBack();case 31:return e.prev=31,o.stop(),o.hideLoading("OnInsertPageSave"),e.finish(31);case 35:case"end":return e.stop()}},e,null,[[5,,31,35]])}))).apply(this,arguments)}var Cn=[{width:320,height:240,type:"exact"},{width:640,height:480,type:"exact"},{width:640,height:360,type:"exact"},{width:800,height:600,type:"exact"},{width:1280,height:720,type:"exact"},{width:1920,height:1080,type:"exact"},{width:2560,height:1440,type:"exact"},{width:3840,height:2160,type:"exact"}],In={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}};function Pn(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sn(e,t,n,r,i,a,o,s){void 0===s&&(s=!1);var c,u=JSON.parse(JSON.stringify({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:s?"user":"environment"}}})),r="exact"===r&&!i;if(t&&(u.video.width=((c={})[r?"exact":"ideal"]=t,c)),n&&(u.video.height=((c={})[r?"exact":"ideal"]=n,c)),a&&a.bMobile&&a.bSafari&&i&&(c=Math.max(t||1280,n||720),u.video.width=((i={})[r?"exact":"ideal"]=c,i),delete u.video.height),e)delete u.video.facingMode,u.video.deviceId={exact:e};else if(o&&!s){for(var l,d=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"],h=Pn(o);!(l=h()).done;)if("break"===function(){var e=l.value,t=e.label.toLowerCase();if(t&&d.some(function(e){return-1!=t.indexOf(e)})&&/\b0(\b)?/.test(t))return delete u.video.facingMode,u.video.deviceId={ideal:e.deviceId},"break"}())break;!u.video.deviceId&&a.bAndroid&&a.bHarmonyOS&&(delete u.video.facingMode,u.video.deviceId={ideal:o[o.length-1].deviceId})}return u.video.facingMode&&"environment"===(t=(t=(t=u.video.facingMode)instanceof Array&&t.length?t[0]:t).exact||t.ideal||t)&&(u.bFmEnvironment=!!u.video.facingMode),u}function En(){return An.apply(this,arguments)}function An(){return(An=S(E().mark(function e(t,n,r,i,a,o,s){var c,u,l,d,h,f;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c={},l=u=null,e.prev=3,h=Sn(t,n,r,i,!1,a,o),e.next=7,Bn(h,!1,a,o);case 7:if(u=e.sent){e.next=10;break}return e.abrupt("return",c);case 10:if(document&&document.createElement?l=document.createElement("video"):Je(s,P.VIDEO_ELEMENT_REQUIRED),d="exact"===i,a.bFirefox||!d)return l.srcObject=u,e.next=16,l.play();e.next=16;break;case 16:c.type=i,d?(h=u.getVideoTracks()[0],(f=h.getConstraints())&&f.width?(c.height=f.height.exact||f.height,c.width=f.width.exact||f.width):(f=h.getSettings(),c.height=f.height.exact||f.height,c.width=f.width.exact||f.width)):(c.height=l.videoHeight,c.width=l.videoWidth),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),this._fireLog&&this._fireLog("_getResolution exception:"+(e.t0.message||e.t0));case 23:if(u)return a.bFirefox&&(l.srcObject=null),e.next=27,u.getTracks().forEach(function(e){e.stop()});e.next=29;break;case 27:l=u=null;case 29:return e.abrupt("return",c);case 30:case"end":return e.stop()}},e,this,[[3,20]])}))).apply(this,arguments)}function Bn(){return Ln.apply(this,arguments)}function Ln(){return(Ln=S(E().mark(function e(t,n,r,i){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"boolean"==typeof t.video&&(t.video={}),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!e.t0.name||"OverconstrainedError"!==e.t0.name){e.next=13;break}if(n)throw e.t0;e.next=12;break;case 12:return e.abrupt("return",null);case 13:return r&&r.bMobile&&r.bSafari?(delete t.video.width,delete t.video.height):t.bFmEnvironment?(delete t.video.facingMode,i&&i.length&&(t.video.deviceId={ideal:i[i.length-1].deviceId})):t.video=!0,e.abrupt("return",navigator.mediaDevices.getUserMedia(t));case 15:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function Tn(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Tn=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new Tn(e)}var Vn=function(){function e(e,t,n,r){this.videoSettings=In,this._browserInfo=null,this._isPlugOut=!1,this._resolutionSelector=null,this._cameraInfo=null,this._allCameras=null,this._videoTrack=null,this._allResolutions=[],this._curResolution=null,this._videoEle=null,this._isFill=!1,this._isUser=!1,this._useWebgl=!0,this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this.glCropImgData=null,this._cameraManager=null,this._oPub=null,this._browserInfo=C.navInfo,!this._browserInfo.bMobile&&this._browserInfo.bSafari?15<=parseInt(this._browserInfo.strBrowserVersion)&&(this._useWebgl=!1):this._browserInfo.bHuaWeiBrowser&&(this._useWebgl=!1),this._cameraInfo=e||{deviceId:"",label:""},this._videoEle=t,this._allCameras=n,this._oPub=r||new et}var t=e.prototype;return t.getFrame=function(){Date.now();var e,t,n=this._videoEle.videoWidth,r=this._videoEle.videoHeight,i=(this.videoGlCvs||(this.videoGlCvs=globalThis.OffscreenCanvas?new globalThis.OffscreenCanvas(n,r):document.createElement("canvas")),this.videoGlCvs),a=this._useWebgl,o=null;return(o=a?this.videoGl||i.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})||i.getContext("experimental-webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0}):o)&&a||(a=!1,this.videoGlCvs=document.createElement("canvas"),i=this.videoGlCvs),i.width==n&&i.height==r||(i.height=r,i.width=n,o&&o.viewport(0,0,n,r)),a?(this.videoGl||(a=(this.videoGl=o).createShader(o.VERTEX_SHADER),o.shaderSource(a,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\ngl_Position = a_position;\nv_uv = a_uv;\n}\n"),o.compileShader(a),o.getShaderParameter(a,o.COMPILE_STATUS),t=o.createShader(o.FRAGMENT_SHADER),o.shaderSource(t,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\nvec4 sample =  texture2D(u_texture, v_uv);\ngl_FragColor = vec4(sample.b, sample.g, sample.r, 1.0);\n}\n"),o.compileShader(t),o.getShaderParameter(t,o.COMPILE_STATUS),e=o.createProgram(),o.attachShader(e,a),o.attachShader(e,t),o.linkProgram(e),o.getProgramParameter(e,o.LINK_STATUS),o.useProgram(e),o.bindBuffer(o.ARRAY_BUFFER,o.createBuffer()),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),o.STATIC_DRAW),a=o.getAttribLocation(e,"a_position"),o.enableVertexAttribArray(a),o.vertexAttribPointer(a,2,o.FLOAT,!1,16,0),t=o.getAttribLocation(e,"a_uv"),o.enableVertexAttribArray(t),o.vertexAttribPointer(t,2,o.FLOAT,!1,16,8),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,o.createTexture()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.uniform1i(o.getUniformLocation(e,"u_texture"),0)),(!this.glImgData||this.glImgData.length<n*r*4)&&(this.glImgData=new Uint8Array(n*r*4)),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,this._videoEle),o.drawArrays(o.TRIANGLE_STRIP,0,4),a=this.glImgData,o.readPixels(0,0,o.drawingBufferWidth,o.drawingBufferHeight,o.RGBA,o.UNSIGNED_BYTE,a),this.glImgData):((t=i.getContext("2d")).drawImage(this._videoEle,0,0),0===i.width||0===i.height?null:((!this.glImgData||this.glImgData.length<i.width*i.height*4)&&(this.glImgData=new Uint8Array(i.width*i.height*4)),this.glImgData.set(t.getImageData(0,0,i.width,i.height).data),this.glImgData))},t.capture=function(){var t=S(E().mark(function e(t){var n,r,i,a,o,s,c,u,l,d,h,f,p,g,v;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),n=null,e.prev=2,L.log("capture"),s=this._videoEle,s.videoHeight,r=s.videoWidth,s=this.getVideoSizeInfo(),i=s.width,a=s.height,o=s.offsetX,s=s.offsetY,c=this.getFrame(),l=u=!1,this.videoGl?l=!0:u=!0,n={imageData:null,imageWidth:i,imageHeight:a,rgba:u,bgra:l},this._isFill){for((!this.glCropImgData||this.glCropImgData.length<i*a*4)&&(this.glCropImgData=new Uint8Array(i*a*4)),d=this.glCropImgData,h=0,f=s+a,p=s;p<f;p++)g=4*(p*r+o),v=h*i*4,d.set(c.subarray(g,g+4*i),v),h++;n.imageData=d.buffer}else n.imageData=c.buffer;if(t){e.next=16;break}return e.next=15,ge(n);case 15:return e.abrupt("return",e.sent);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}},e,this,[[2,18]])}));return function(e){return t.apply(this,arguments)}}(),t.setImageDataBack=function(e){L.log("setImageDataBack"),this._isFill?this.glCropImgData=new Uint8Array(e):this.glImgData=new Uint8Array(e)},t.getVideoSizeInfo=function(){var e=this._videoEle;if("none"==(null==e||null==(t=e.style)?void 0:t.display))return t=e.videoHeight,{width:e.videoWidth,height:t,offsetX:0,offsetY:0};if("playing"!==this.getStatus())throw P.VIDEO_NOT_PLAY;var t=e.getBoundingClientRect(),n=t.width,t=t.height;if(0===n||0===t)throw P.CAPTURE_NO_IMAGE;var r,i,a,o=0,s=0,c=e.videoHeight,e=e.videoWidth;return this._isFill?(r=n/(e*(n=Math.max(n/e,t/c))),t=t/(c*n),i=Math.floor(e*r),a=Math.floor(c*t),o=Math.floor((1-r)/2*e),s=Math.floor((1-t)/2*c)):(i=e,a=c),{width:i,height:a,offsetX:o,offsetY:s}},t.setFillMode=function(e){this._isFill=e,this._videoEle&&(this._videoEle.style.objectFit=e?"cover":"contain")},t.setPlugOut=function(){this._isPlugOut=!0},t._checkPlugOut=function(){this._isPlugOut&&this._oPub.emit("video-error",P.CAMERA_PLUG_OUT)},t.getResolutions=function(){var t=S(E().mark(function e(t){var n,r,i,a,o,s,c,u,l,d;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),0<this._allResolutions.length&&!t)return e.abrupt("return",this._allResolutions);e.next=3;break;case 3:if(this._cameraInfo){e.next=5;break}return e.abrupt("return",null);case 5:n=[],this._allResolutions=[],i=r=!1,e.prev=9,o=function(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Tn(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(Cn);case 11:return e.next=13,o.next();case 13:if(r=!(l=e.sent).done)return l=l.value,s=l.width,c=l.height,l=l.type,e.next=18,En(this._cameraInfo.deviceId,s,c,l,this._browserInfo,this._allCameras,this._oPub);e.next=32;break;case 18:if(u=e.sent,l=u&&u.height,d=u.height===c&&u.width===s||u.height===s&&u.width===c,l&&d){e.next=27;break}return e.next=24,En(this._cameraInfo.deviceId,s,c,"ideal",this._browserInfo,this._allCameras,this._oPub);case 24:return(d=e.sent)&&d.height&&!function(e,t){for(var n=e.width,r=e.height,i=Pn(t);!(a=i()).done;){var a=a.value;if(a.height===r&&a.width===n)return 1}}({width:d.width,height:d.height},n)&&(delete d.type,n.push(d)),e.abrupt("continue",29);case 27:delete u.type,n.push(u);case 29:r=!1,e.next=11;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(9),i=!0,a=e.t0;case 38:if(e.prev=38,e.prev=39,r&&null!=o.return)return e.next=43,o.return();e.next=43;break;case 43:if(e.prev=43,i)throw a;e.next=46;break;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return this._allResolutions=n,e.abrupt("return",n);case 50:case"end":return e.stop()}},e,this,[[9,34,38,48],[39,,43,47]])}));return function(e){return t.apply(this,arguments)}}(),t.setResolution=function(){var n=S(E().mark(function e(t,n){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.playing())return e.abrupt("return",this.play(t,n,this._cameraManager));e.next=2;break;case 2:return this._curResolution={width:t,height:n},e.abrupt("return",this._curResolution);case 4:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.getCurrentResolution=function(){return this._curResolution},t.getCameraInfo=function(){return this._cameraInfo},t.destroy=function(){this.stop(),this._cameraInfo=null,this._allCameras=null,this._allResolutions=null,this._videoEle=null,this._browserInfo=null,this.videoGlCvs=null},t.stop=function(){this._videoEle&&this._videoEle.srcObject&&(this._videoEle.srcObject.getTracks().forEach(function(e){e.stop()}),this._videoEle.srcObject=null,this._videoTrack=null)},t.getDeviceId=function(e){if(e){e=e.getVideoTracks();if(e.length)return this._videoTrack=e[0],this._videoTrack.getSettings().deviceId}return""},t.updateCameraInfo=function(e){var t={};return e&&(e=e.getVideoTracks()).length&&(this._videoTrack=e[0],e={deviceId:(t=this._videoTrack.getSettings()).deviceId,label:this._videoTrack.label},this._cameraInfo=e),t},t.getBestMediaStream=function(){var r=S(E().mark(function e(t,n,r){var i,a,o,s;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.videoSettings=Sn(this._cameraInfo.deviceId,t,n,r,!0,this._browserInfo,this._allCameras,this._isUser),i=this.videoSettings,e.prev=2,e.next=5,Bn(i,!0,this._browserInfo,this._allCameras);case 5:if(a=e.sent,o=this.getDeviceId(a),this._cameraManager&&i.bFmEnvironment&&!this._isUser)return e.next=10,this._cameraManager.getAllCamerasInfo();e.next=21;break;case 10:if(this._allCameras=e.sent,this.videoSettings=Sn(this._cameraInfo.deviceId,t,n,r,!0,this._browserInfo,this._allCameras,this._isUser),"boolean"==typeof(i=this.videoSettings).video&&(i.video={}),(s=(s=i.video.deviceId)&&(s.exact||s.ideal||s))&&0<o.length&&o!=s)return a.getTracks().forEach(function(e){e.stop()}),e.next=20,Bn(i,!0,this._browserInfo,this._allCameras);e.next=21;break;case 20:a=e.sent;case 21:return s=this.updateCameraInfo(a),e.abrupt("return",{settings:s,stream:a});case 25:e.prev=25,e.t0=e.catch(2),"NotAllowedError"===e.t0.name||"Permission denied"===e.t0.message?this.throwError(P.CAMERA_NOT_OPEN):this.throwError(P.FAILED_GET_USERMEDIA);case 28:case"end":return e.stop()}},e,this,[[2,25]])}));return function(e,t,n){return r.apply(this,arguments)}}(),t.play=function(){var r=S(E().mark(function e(t,n,r){var i,a,o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=this._videoEle)||this.throwError(P.VIDEO_ELEMENT_REQUIRED),this._cameraManager=r,this._checkPlugOut(),s=this._curResolution,a=this._allResolutions,"number"==typeof t&&0<t&&"number"==typeof n&&0<n||(t=s?s.width:1280,n=s?s.height:720),s=function(e,t){for(var n=e.width,r=e.height,i=Pn(t);!(a=i()).done;){var a=a.value;if(a.height===r&&a.width===n)return a.type}return"ideal"}({width:t,height:n},a),this.stop(),e.next=10,this.getBestMediaStream(t,n,s);case 10:return a=e.sent,o=a.settings,s=a.stream,i.srcObject=s,e.next=16,new Promise(function(t){i.onloadedmetadata=function(e){t(e)}});case 16:return e.prev=16,e.next=19,i.play();case 19:e.next=27;break;case 21:return e.prev=21,e.t0=e.catch(16),e.next=25,new Promise(function(e){setTimeout(e,1e3)});case 25:return e.next=27,i.play();case 27:return c={width:i.videoWidth,height:i.videoHeight},o.width&&o.height&&(o.width===t&&o.height===n||o.width===n&&o.height===t)&&(c.width=t,c.height=n),this._curResolution=c,this._oPub.emit("onPlayed",i),e.abrupt("return",c);case 32:case"end":return e.stop()}},e,this,[[16,21]])}));return function(e,t,n){return r.apply(this,arguments)}}(),t.pause=function(){this._videoEle&&this._videoEle.pause()},t.resume=function(){this._videoEle&&this.paused()&&this.playing()&&this._videoEle.play()},t.paused=function(){return!!this._videoEle&&this._videoEle.paused},t.playing=function(){if(this._isPlugOut)return!1;if(this._videoEle&&this._videoEle.srcObject)try{var e=this._videoEle.srcObject;if(e){var t=e.getVideoTracks();if(t&&0!==t.length)return!0}}catch(e){this.throwError(e)}return!1},t.getStatus=function(){return this.playing()?this.paused()?"paused":"playing":"stopped"},t.getVideoSetting=function(){return this.videoSettings},t.toggleCamera=function(e,t,n){return this._isUser=!this._isUser,this._cameraInfo.deviceId="",this.play(e,t,n)},t.throwError=function(e){this._oPub.emit(te,e)},e}();function Mn(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fn=function(n){function e(e,t){e=n.call(this,e)||this;return e._allCamerasInfo=[],e.selectedCamera=null,e.videoEl=null,e._trackCameraDeviceChanged(),e._initEl(t),e}o(e,n);var t=e.prototype;return t.selectCamera=function(){var t=S(E().mark(function e(t){var n,r,i,a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._allCamerasInfo.length){e.next=3;break}return e.next=3,this.getAllCamerasInfo();case 3:if(n=this._allCamerasInfo,t=t||new Vn(null,this.videoEl,n,this._oPub),r=null,!M(t)){e.next=21;break}i={deviceId:"",label:""},a=0;case 9:if(!(a<n.length)){e.next=19;break}if(o=n[a],t===o.deviceId)return i.deviceId=o.deviceId,i.label=o.label,r=new Vn(i,this.videoEl,n,this._oPub),e.abrupt("break",19);e.next=16;break;case 16:a++,e.next=9;break;case 19:e.next=22;break;case 21:t instanceof Vn&&(r=t);case 22:return this.selectedCamera&&this.selectedCamera.destroy(),this.selectedCamera=r,e.abrupt("return",r);case 25:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.closeCamera=function(){this.selectedCamera&&(this.selectedCamera.destroy(),this.selectedCamera=null)},t.getCurrentCamera=function(){return this.selectedCamera},t.destroy=function(){this._oPub.off("onCameraChanged")},t.getAllCamerasInfo=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Nn(this._oPub),e.next=3,function(){return Un.apply(this,arguments)}();case 3:return t=e.sent,this._allCamerasInfo=t,e.abrupt("return",this._allCamerasInfo);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._trackCameraDeviceChanged=function(){var t=this;void 0!==navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=function(e){t._cameraChangedHandler(e)})},t._initEl=function(e){e?this.videoEl=e:((e=document.createElement("video")).className=B.cameraVideo,e.playsInline=!0,e.muted=!0,this.videoEl=e,this._oPub.on("onPlayed",function(e){On(e)}))},t._cameraChangedHandler=function(e){},t._requestCamera=function(){var e=S(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Nn(this._oPub),0===this._allCamerasInfo.length&&this._oPub.emit("onThrowError",P.NO_CAMERA),e.next=4,this._checkAllowCamera();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._checkAllowCamera=function(){var e=S(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),t.requestCamera=function(){var e=S(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.cameraExist=function(e,t){return!0},e}(e);function Nn(e){var t,n;void 0===navigator.mediaDevices&&(t=location.origin,n="https://",0!==t.lastIndexOf(n,0)?Je(e,P.HTTPS_REQUIRED):Je(e,P.MEDIADEVICES_NOT_IMPL)),void 0===navigator.mediaDevices.getUserMedia&&Je(e,P.GETUSERMEDIA_NOT_IMPL)}function Un(){return(Un=S(E().mark(function e(){var t,n,r,i,a,o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,navigator.mediaDevices.enumerateDevices();case 3:t=e.sent,n=[],i=r=0;case 7:if(!(i<t.length)){e.next=24;break}if("videoinput"!==(a=t[i]).kind)return e.abrupt("continue",21);e.next=11;break;case 11:o=!1,s=Mn(n);case 13:if((c=s()).done){e.next=20;break}if(c.value.deviceId===a.deviceId)return o=!0,e.abrupt("break",20);e.next=18;break;case 18:e.next=13;break;case 20:o||((c={}).deviceId=a.deviceId,c.label=!a.label||/^camera\s[0-9]+$/.test(a.label)?"camera "+r++:a.label,n.push(c));case 21:i++,e.next=7;break;case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function On(e,t,n){var r,i,a,o;e&&(i=e.style.objectFit,t=t&&n?(o=t,n):(o=e.videoWidth,e.videoHeight),a=(n=e.getBoundingClientRect()).width,n=n.height,r={zoom:1,left:0,top:0},"cover"===i?(i=Math.max(a/o,n/t),r.zoom=i):(a=(a-o*(i=Math.min(a/o,n/t)))/2,o=(n-t*i)/2,r.zoom=i,r.left=a,r.top=o),e.videoLayout=r)}var Hn=function(n){function e(e,t){e=n.call(this,e)||this;return e._showCanvas=null,e._containerEl=null,e._videoEl=null,e._obEl=null,e._srcVideoInfo=null,e._videoEl=t,e._showCanvas=e.createCameraCanvas(),e}o(e,n);var t=e.prototype;return t.createCameraCanvas=function(){var e=document.createElement("canvas");return e.className=B.cameraCvs,e.addEventListener("touchstart",function(e){"touchstart"===e.type&&e.cancelable&&e.preventDefault()},{passive:!1}),e},t.getCameraDvs=function(){return this._showCanvas},t.resetVideoInfo=function(){var e;C.navInfo.bMobile&&(C.navInfo.biPhone||C.navInfo.biPad)&&(e=0==(e=window.orientation)||180==e?0:90,this._srcVideoInfo={videoWidth:this._videoEl.videoWidth,videoHeight:this._videoEl.videoHeight,orientation:e})},t.bindView=function(e){var i=this,e=M(e)?document.getElementById(e):e;if(!e)return!1;var t=this._showCanvas,n=this._videoEl,r=n.parentElement,r=(null!=r&&r.remove(),document.createElement("div")),a=(r.className=B.cameraContainer,r.appendChild(n),r.appendChild(t),this._containerEl=r,e.appendChild(r),this.updateCanvasRect(),this);return this._obEl=new tn(r,function(e){var t,n,r;C.navInfo.bMobile&&(C.navInfo.biPhone||C.navInfo.biPad)&&a._videoEl&&0<a._videoEl.videoWidth&&0<a._videoEl.videoHeight&&(r=0==(r=window.orientation)||180==r?0:90,a._srcVideoInfo?r==a._srcVideoInfo.orientation?(t=a._srcVideoInfo.videoWidth,n=a._srcVideoInfo.videoHeight):(n=a._srcVideoInfo.videoHeight,t=a._srcVideoInfo.videoWidth):(a._srcVideoInfo={videoWidth:a._videoEl.videoWidth,videoHeight:a._videoEl.videoHeight,orientation:r},t=a._srcVideoInfo.videoWidth,n=a._srcVideoInfo.videoHeight)),On(a._videoEl,t,n),a.updateCanvasRect(),i._oPub.emit("uiResize",e)}),!0},t.updateCanvasRect=function(){this._showCanvas&&(this._showCanvas.width=this._showCanvas.getBoundingClientRect().width,this._showCanvas.height=this._showCanvas.getBoundingClientRect().height)},t.unbindView=function(){this._obEl&&(this._obEl.dispose(),this._obEl=null);var e=this._containerEl;return!!e&&(e.remove(),!0)},t.dispose=function(){var e;this.unbindView(),this._showCanvas.width=1,this._showCanvas.height=1,null!=(e=this._showCanvas)&&e.remove(),this._showCanvas=null,this._containerEl=null,this._videoEl=null,this._obEl=null},e}(e);function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p,jn=function(){function e(){this.path=[],this._removedPages=[],this._currentPage=null}var t,n,r=e.prototype;return r.setCurrentPage=function(){var n=S(E().mark(function e(t,n){var r,i,a;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!0),r=this._currentPage,this._currentPage=t,r&&r instanceof N?(i=r.getDcs())&&i.emit("blurPage"):t&&t instanceof N&&t.pageName==$&&(i=t.getDcs())&&i.emit("focusPage"),t)return e.next=7,function(){return ce.apply(this,arguments)}(t,n);e.next=7;break;case 7:r&&!t&&(a=r.getDcs())&&(a.off("blurPage"),a.off("focusPage"));case 8:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),r.navigateTo=function(){var n=S(E().mark(function e(t,n){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!0),this.path.push(t),e.next=4,this.setCurrentPage(t,n);case 4:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),r.redirectTo=function(e){this.closeAllPages(),this.navigateTo(e)},r.redirectToHome=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.path.length,this.navigatePopPageSync(t-1),e.next=4,this.resetCurrentPageAfterPopPage();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r.navigatePopPageSync=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!0);for(var n=this.path;0<e;){var r=n.pop();r&&!r.isDestroyed&&(t&&r.hide(),this._removedPages.push(r)),e--}return null},r.getRemovedPages=function(){return this._removedPages},r.destroyRemovedPages=function(){this._removedPages.forEach(function(e){se(e)}),this._removedPages=[]},r.closeAllPages=function(){this.path.forEach(function(e){se(e)}),this.path=[],this.destroyRemovedPages(),this.setCurrentPage(null)},r.hideAllPages=function(){this.path.forEach(function(e){e.hide()})},r.showAllPages=function(){this.path.forEach(function(e){e.show()})},r.showDocumentScanPage=function(e,t,n){e=new N(e,t,n);return this.navigateTo(e),n.captureLoop&&(n.captureLoop.setEnable(),n.once("onPlayed",function(){n.captureLoop&&n.captureLoop.startLoop({dcs:n})}),n.once("video-closed",function(){T(n),n.captureLoop&&n.captureLoop.stopCaptureLoop()}),(n.config.scannerViewer.autoDetect||n.config.scannerViewer.autoScan)&&(n.captureLoop.loadLoopTypeFromConfig(),n.captureLoop.clearCaptureTimer()),n.on("blurPage",function(){n.captureLoop&&n.captureLoop.isEnable()&&(n.captureLoop.saveLoopTypeToConfig(),n.captureLoop.stopCaptureLoop(),n.captureLoop.setDisable())}),n.on("focusPage",function(){n.captureLoop&&(n.captureLoop.setEnable(),n.config.scannerViewer.autoScan.enableAutoScan?n.captureLoop.setAutoScan():n.config.scannerViewer.autoDetect.enableAutoDetect&&!n.config.scannerViewer.autoScan.enableAutoScan?n.captureLoop.setAutoDetect():n.captureLoop.changeStyle())})),e.moveMultipleImgPosition(),e},r.showInsertPage=function(e,t,n){var r=n.getCurrentPage(),e=new wn(e,t,n);return this.navigateTo(e),r.hide(),n.captureLoop&&(n.captureLoop.setEnable(),n.once("onPlayed",function(){n.captureLoop&&n.captureLoop.startLoop({dcs:n})}),n.once("video-closed",function(){T(n),n.captureLoop&&n.captureLoop.stopCaptureLoop()}),n.captureLoop.loadLoopTypeFromConfig()),e},r.showCropPage=function(n,e,t){var r=t.getCurrentPage(),i=new fn(n,e,t),a=n.documentEditorSettings||t.config.documentEditorSettings,o=this,e=n.doFillData?i.fillOrigCustomDataFirstTime():Promise.resolve();return e.then(S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:return t=Ue(n.visibility)&&Ue(a.visibility),e.next=5,o.navigateTo(i,t);case 5:!i.isDestroyed&&t?i.render():i.hide(),r&&r.pageName!=ne.toLowerCase&&r.hide();case 7:case"end":return e.stop()}},e)}))),i},r.showDocumentEditPage=function(n,e,t){var r,i=t.getCurrentPage(),a=new y(n,e,t),o=n.documentEditorSettings||t.config.documentEditorSettings,e=n.doFillData?a.fillOrigCustomDataFirstTime():Promise.resolve();return Ue(n.visibility)&&(r=this,e.then(S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:return t=Ue(n.visibility)&&Ue(o.visibility),e.next=5,r.navigateTo(a,t);case 5:!a.isDestroyed&&t?a.render():a.hide(),i&&i.pageName!=re.toLowerCase&&i.hide();case 7:case"end":return e.stop()}},e)})))),a},r.removePage=function(){var t=S(E().mark(function e(t){var n,r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.path.length)<=1)return this.navigatePopPageSync(),e.next=5,this.resetCurrentPageAfterPopPage();e.next=6;break;case 5:return e.abrupt("return");case 6:if(this.path[n-1]==t)return this.navigatePopPageSync(),e.next=11,this.resetCurrentPageAfterPopPage();e.next=12;break;case 11:return e.abrupt("return");case 12:r=n-2;case 13:if(!(0<=r)){e.next=21;break}if(this.path[r]==t)return this.path.splice(r,1),e.abrupt("return");e.next=18;break;case 18:r--,e.next=13;break;case 21:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),r.resetCurrentPageAfterPopPage=function(){var t=S(E().mark(function e(t){var n,r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!0),0<(n=this.path).length)return r=n[n.length-1],e.next=6,this.setCurrentPage(r,t);e.next=7;break;case 6:return e.abrupt("return",r);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),r=e,(t=[{key:"currentPage",get:function(){return this._currentPage}},{key:"previousPage",get:function(){var e=this.path;return 2<=e.length?e[e.length-2]:null}}])&&Wn(r.prototype,t),n&&Wn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(),Gn=((n=p=p||{})[n.None=0]="None",n[n.AutoScan=1]="AutoScan",n[n.AutoDetect=2]="AutoDetect",function(){function t(e){this.isLooping=!1,this._dcs=null,this._cameraCvs=null,this._enabled=!1,this._loopType=p.None,this.loopTimer=null,this.lastConfirmTime=0,this.lastDetectTime=(new Date).getTime(),this._captureLoopSub=new et,this._oldLoopType=[],this._dcs=e}var e=t.prototype;return e.dispose=function(){this._loopType=p.None,this.clearCaptureTimer(),this._dcs=null,this._captureLoopSub=null,this._cameraCvs=null},e.resetLastConfirmTime=function(){this.lastConfirmTime=0},e.setAutoScan=function(){this.innerSetNextLoopType(p.AutoScan)},e.setAutoDetect=function(){this.innerSetNextLoopType(p.AutoDetect)},e.innerSetNextLoopType=function(e){this._loopType==t.EnumLoopType_ManualScan?0==this._oldLoopType.length?this._oldLoopType.push(e):this._oldLoopType[0]=e:(this._loopType=e,this.changeStyle(),this.clearCaptureTimer(),this.startLoop({dcs:this._dcs}))},e.saveLoopTypeToConfig=function(){this._loopType==p.AutoScan?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!0,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this._loopType==p.AutoDetect?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1)},e.loadLoopTypeFromConfig=function(){this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoScan.enableAutoScan?(this._loopType=p.AutoScan,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoDetect.enableAutoDetect?this._loopType=p.AutoDetect:(this._loopType=p.None,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1),this.changeStyle()},e.getLoopType=function(){return this._loopType},e._setLoopType=function(e){this._loopType=e},e.setIsLooping=function(e){this.isLooping=e},e.getIsLooping=function(){return this.isLooping},e.setEnable=function(){this.isAutoButtonEnabled()&&(this._enabled=!0)},e.setDisable=function(){this._enabled=!1},e.isEnable=function(){return this._enabled},e.isAutoButtonDisabled=function(){return 1!=this._dcs.config.scannerViewer.enableBorderDetection},e.isAutoButtonEnabled=function(){return 1==this._dcs.config.scannerViewer.enableBorderDetection},e.startManualCapture=function(e){var s=this;L.log("startManualCapture"),this._oldLoopType.push(this._loopType),this._captureLoopSub.once("onCapturedImage",function(){var r=S(E().mark(function e(t,n,r){var i,a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={dcs:t,page:t.getCurrentPage()},e.prev=1,a=t.config.scannerViewer,a=(void 0===a?{}:a).continuousScan,0==(void 0===a?{}:a).enableContinuousScan&&s.loadLoopTypeFromConfig(),e.next=7,i.page.emitEx("onSaveCapture",!1,i,n,!0,r);case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),L.log("manual capture error."),L.log(e.t0),702==e.t0.code&&(t.hideLoading("startManualCapture 1"),t.emit(te,e.t0));case 14:if(!t.captureLoop){e.next=30;break}if((o=t.captureLoop._oldLoopType).length<=0)return L.log("manual capture stack error."),t.captureLoop._loopType=p.None,t.hideLoading("startManualCapture 2"),e.abrupt("return");e.next=21;break;case 21:if(t.captureLoop._loopType=o.pop(),t.captureLoop.resetLastConfirmTime(),t.captureLoop.loopTypeIsManualScan())return t.captureLoop.innerLoop(i),t.hideLoading("startManualCapture 3"),e.abrupt("return");e.next=27;break;case 27:t.hideLoading("startManualCapture 4"),t.captureLoop.innerLoop(i),t.captureLoop.changeStyle();case 30:case"end":return e.stop()}},e,null,[[1,9]])}));return function(e,t,n){return r.apply(this,arguments)}}()),this.lastConfirmTime=(new Date).getTime(),this.loopTypeIsManualScan()||(this._loopType=t.EnumLoopType_ManualScan,this._dcs.showLoading("startManualCapture start loop"),this.isLooping||(this.clearCaptureTimer(),this.innerLoop(e)))},e.startLoop=function(e){L.log("startLoop"),this.isAutoButtonDisabled()&&(this._loopType=p.None),this._loopType==p.AutoScan||this._loopType==p.AutoDetect?null==this.loopTimer&&(this.lastConfirmTime=0,this.isLooping||(this.clearCaptureTimer(),this.innerLoop(e))):(this.stopCaptureLoop(),this._dcs.hideLoading("startLoop")),this.changeStyle()},e.changeStyle=function(){var e=null==(e=this._dcs)||null==(e=e.getCurrentPage())?void 0:e.element;if(e){var t=null==e?void 0:e.querySelector("."+B.BUTTON_PREFIX+"autoCapture"),n=null==e?void 0:e.querySelector("."+B.BUTTON_PREFIX+"captureBtn"),e=null==e?void 0:e.querySelector("."+B.BUTTON_PREFIX+"detectCamera");if(this.isAutoButtonDisabled())return t&&(t.classList.remove(B.footerSelected),t.classList.add(B.disable),t.bSelected=!1),e&&n.classList.remove(B.capturing),void(e&&(e.classList.remove(B.headerSelected),e.classList.add(B.disable),e.bSelected=!1));this._loopType==p.AutoScan?(t&&(t.classList.add(B.footerSelected),t.bSelected=!0),e&&n.classList.add(B.capturing),e&&(e.classList.add(B.headerSelected),e.bSelected=!0)):this._loopType==p.AutoDetect?(t&&(t.classList.remove(B.footerSelected),t.bSelected=!1),e&&n.classList.remove(B.capturing),e&&(e.classList.add(B.headerSelected),e.bSelected=!0)):(t&&(t.classList.remove(B.footerSelected),t.classList.remove(B.disable),t.bSelected=!1),e&&n.classList.remove(B.capturing),e&&(e.classList.remove(B.headerSelected),e.classList.remove(B.disable),e.bSelected=!1))}},e.getDetectRemainTime=function(){var e=(new Date).getTime(),t=R(this._dcs,"config.scannerViewer.autoDetect").fpsLimit,e=e-this.lastDetectTime;return Math.max(0,1e3/(void 0===t?3:t)-e)},e.loopTypeIsNone=function(){return this._loopType==p.None},e.loopTypeIsManualScan=function(){return this._loopType==t.EnumLoopType_ManualScan},e.innerLoop=function(n){var r=this,i=n.dcs,e=i.getAreaDetectCallback(),t=this.getDetectRemainTime();if(e)return this.loopTypeIsNone()?this.exitAutoCaptureFromInner(0):void((this._loopType!=p.AutoScan&&this._loopType!=p.AutoDetect||this.isEnable())&&(clearTimeout(this.loopTimer),this.loopTimer=setTimeout(S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.loopTypeIsNone())return e.abrupt("return",r.exitAutoCaptureFromInner(1));e.next=2;break;case 2:if(r.isLooping)return e.abrupt("return");e.next=4;break;case 4:return r.isLooping=!0,e.next=7,r.innerLoopTimeout(n);case 7:t=e.sent,r.isLooping=!1,t&&(r._loopType==p.AutoScan||r._loopType==p.AutoDetect)&&r.isEnable()?setTimeout(function(){!i.captureLoop||i.captureLoop._loopType!=p.AutoScan&&i.captureLoop._loopType!=p.AutoDetect||!i.captureLoop.isEnable()||i.captureLoop.innerLoop(n)},10):r.clearCaptureTimer();case 10:case"end":return e.stop()}},e)})),t)))},e.innerLoopTimeout=function(){var t=S(E().mark(function e(t){var n,r,i,a,o,s,c,u,l,d,h,f;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dcs,this.lastDetectTime=(new Date).getTime(),i=n.config.scannerViewer,r=i.polygonStyle,r=void 0===r?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:r,i=i.autoDetect,i=void 0===i?{}:i,a=!0,e.prev=4,"playing"!=n.getStatus())return e.abrupt("return",!0);e.next=7;break;case 7:return e.next=9,n.capture(a);case 9:if(o=e.sent,this.loopTypeIsNone())return e.abrupt("return",this.exitAutoCaptureFromInner(2));e.next=14;break;case 14:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",n,o),e.abrupt("return",!1);e.next=17;break;case 17:return e.prev=17,e.next=20,be(o,n);case 20:if(s=e.sent,this._loopType!=p.AutoScan){e.next=69;break}if(c=s.cornerPoints,this.loopTypeIsNone())return L.log("loop setImageDataBack"),n.setImageDataBack(o.imageData),e.abrupt("return",this.exitAutoCaptureFromInner(3));e.next=27;break;case 27:if(!s.detectedArea){e.next=58;break}if(this.drawArea(c,r,n.getVideoElement()),this.loopTypeIsNone())return L.log("loop setImageDataBack"),n.setImageDataBack(o.imageData),e.abrupt("return",this.exitAutoCaptureFromInner(5));e.next=35;break;case 35:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",n,o,s),e.abrupt("return",!1);e.next=38;break;case 38:if(d=i.autoCaptureDelay,d=void 0===d?2e3:d,u=(new Date).getTime(),!(this._loopType==p.AutoScan&&0<this.lastConfirmTime&&u-this.lastConfirmTime>d)){e.next=55;break}if(0,n.showLoading("auto capture"),e.prev=43,d=t.dcs.getCurrentPage())return e.next=48,d.emitEx("onSaveCapture",!0,t,o,!0,s);e.next=48;break;case 48:return e.prev=48,n.hideLoading("auto capture"),e.finish(48);case 51:return n.captureLoop.resetLastConfirmTime(),e.abrupt("return",!0);case 55:0==this.lastConfirmTime&&(this.lastConfirmTime=u);case 56:e.next=62;break;case 58:L.log("[capture loop] detect result:"),L.log(s),this.lastConfirmTime=0,this.clearCanvas();case 62:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",n,o,s),e.abrupt("return",!1);e.next=65;break;case 65:L.log("loop setImageDataBack"),n.setImageDataBack(o.imageData),e.next=85;break;case 69:if(this._loopType!=p.AutoDetect){e.next=82;break}if(l=s.cornerPoints,L.log("loop setImageDataBack"),n.setImageDataBack(o.imageData),this.loopTypeIsNone())return e.abrupt("return",this.exitAutoCaptureFromInner(3));e.next=75;break;case 75:if(d=o.imageWidth,h=o.imageHeight,h=$e(l,d,h),this.loopTypeIsNone())return e.abrupt("return",this.exitAutoCaptureFromInner(4));e.next=79;break;case 79:h?this.clearCanvas():(f=n.getVideoElement(),n.captureLoop.drawArea(l,r,f)),e.next=85;break;case 82:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",n,o,s),e.abrupt("return",!1);e.next=85;break;case 85:e.next=90;break;case 87:e.prev=87,e.t0=e.catch(17),L.log(e.t0);case 90:e.next=95;break;case 92:e.prev=92,e.t1=e.catch(4),L.log(e.t1);case 95:return e.abrupt("return",!0);case 97:case"end":return e.stop()}},e,this,[[4,92],[17,87],[43,,48,51]])}));return function(e){return t.apply(this,arguments)}}(),e.exitAutoCaptureFromInner=function(e){return this.clearCaptureTimer(),this._dcs.hideLoading("innerLoop exitAutoCaptureFromInner"),L.log("auto capture loop: loopType is None "+e),!1},e.clearCaptureTimer=function(){clearTimeout(this.loopTimer),this.loopTimer=null,this.lastConfirmTime=0},e.stopCaptureLoop=function(){this._loopType=p.None,this.clearCaptureTimer(),this.clearCanvas()},e.getCameraCvs=function(){return this._cameraCvs||(this._cameraCvs=this._dcs.getCameraView().getCameraDvs()),this._cameraCvs},e.clearCanvas=function(){var e=this.getCameraCvs();e&&e.getContext("2d").clearRect(0,0,e.width,e.height)},e.drawArea=function(e,t,n){var r=this.getCameraCvs(),i=r.getContext("2d"),r=(i.save(),i.clearRect(0,0,r.width,r.height),n.videoLayout),n=r.zoom,a=r.left,r=r.top;i.translate(a,r),i.scale(n,n),i.beginPath(),i.moveTo(e[0],e[1]);for(var o=2;o<e.length;o+=2){var s=e[o],c=e[o+1];i.lineTo(s,c)}i.closePath();a=parseInt(t.strokeWidth,10)/n;i.strokeStyle=t.stroke,i.lineCap="round",i.lineWidth=a,"dashed"===t.dash&&i.setLineDash([Math.max(2,a),Math.max(4,2*a)]),i.stroke(),i.restore()},t}()),qn=(Gn.EnumLoopType_ManualScan=3,Gn._defaultConfig={autoScan:{enableAutoScan:!1},autoDetect:{enableAutoDetect:!1},enableBorderDetection:!0},new Map),Xn=new Map,zn=new Map,Yn=function(){function e(e){this._cameraMng=null,this._cameraView=null,this._uiRouters=null,this.captureLoop=null,this.filterApplyToAllValue=void 0,this.curFilterValue=void 0,this._runPlaying=!1,this._loadingConfig={imageSource:null,background:"rgba(0, 0, 0, 0.2)"},this._loadingNumber=0,this.config={},this._container=null,this._savedFilename=null,this._externalViewerUid=null,this._oPub=null,this._areaDetectCallback=null,this._perspectiveCallback=null,this._licenseCallback=null,this._filterHandleList=[],this._savePhotoCallback=null,this._insertPhotoCallback=null,this._removeImageCallback=null,this._changeIndexCallback=null,this._freeCallback=null,this._loadCallback=null,this._exiting=!1,this._oPub=e,this._cameraMng=new Fn(this._oPub),this._cameraView=new Hn(this._oPub,this._cameraMng.videoEl),this._uiRouters=new jn,this.captureLoop=new Gn(this),document.addEventListener("click",Jn),window.addEventListener("focus",Zn),window.addEventListener("blur",Qn)}var t=e.prototype;return t.bindView=function(e){return(e=M(e=void 0===e?this._container:e)?document.getElementById(e):e)?(this._cameraView||(this._cameraView=new Hn(this._oPub,this._cameraMng.videoEl)),this.captureLoop||(this.captureLoop=new Gn(this)),this._cameraView.bindView(e),this._container=e,!0):(Je(this._oPub,P.VIDEO_ELEMENT_REQUIRED),!1)},t.unbindView=function(){var e;return(this._container=null)!=(e=this._cameraView)&&e.dispose(),(this._cameraView=null)!=(e=this.captureLoop)&&e.dispose(),this.captureLoop=null,document.body.classList.remove(B.overflowHidden),!0},t.getVideoElement=function(){return this._cameraMng.videoEl},t.getCameraView=function(){return this._cameraView},t.play=function(){var a=S(E().mark(function e(t,n,r,i,a){var o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a=!1),this._checkLicense(),!a&&this._runPlaying)return e.abrupt("return",Promise.reject(P.VIDEO_NOT_STOP));e.next=4;break;case 4:if(t&&(t instanceof HTMLElement||Kn(this._oPub,typeof t,"HTMLElement"),this.bindView(t)),this._container){e.next=7;break}return e.abrupt("return",Promise.reject(P.VIDEO_ELEMENT_REQUIRED));case 7:if(void 0===n||Ye(n)||Kn(this._oPub,typeof n,"number"),void 0===r||Ye(r)||Kn(this._oPub,typeof r,"number"),this._runPlaying=!0,e.prev=10,s=this._cameraMng.getCurrentCamera()){e.next=16;break}return e.next=15,this._cameraMng.selectCamera();case 15:s=e.sent;case 16:return null==i?(c=ee.scannerViewer.fullScreen,this.config&&this.config.scannerViewer&&null!=this.config.scannerViewer.fullScreen&&(c=this.config.scannerViewer.fullScreen),s.setFillMode(c)):s.setFillMode(i),e.next=19,s.play(n,r,this._cameraMng);case 19:o=e.sent,e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(10),this._runPlaying=!1,e.abrupt("return",Promise.reject(e.t0));case 26:return e.abrupt("return",o);case 27:case"end":return e.stop()}},e,this,[[10,22]])}));return function(e,t,n,r,i){return a.apply(this,arguments)}}(),t.pause=function(){var e=this._cameraMng.getCurrentCamera();e&&e.pause()},t.stop=function(){var e=this._cameraMng.getCurrentCamera();e&&(e.stop(),this._runPlaying=!1)},t.resume=function(){var e=this._cameraMng.getCurrentCamera();e&&e.resume()},t.getStatus=function(){var e=this._cameraMng.getCurrentCamera();return e?e.getStatus():""},t.capture=function(e){var t=this._cameraMng.getCurrentCamera();return t?t.capture(e):Promise.reject(P.NO_CAMERA_SELECTED)},t.setImageDataBack=function(e){var t=this._cameraMng.getCurrentCamera();return t?t.setImageDataBack(e):(Je(this._oPub,P.NO_CAMERA_SELECTED),null)},t.getSourceList=function(){return this._checkLicense(),this._cameraMng.getAllCamerasInfo()},t.selectSource=function(){var t=S(E().mark(function e(t){var n;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkLicense(),e.next=3,this._cameraMng.selectCamera(t);case 3:if(n=e.sent,this._runPlaying=!1,n){e.next=7;break}return e.abrupt("return",Promise.reject(P.SOURCE_NOT_FOUND));case 7:return e.abrupt("return",null==n?void 0:n.getCameraInfo());case 8:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.closeSource=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._runPlaying=!1,t=this._cameraMng.getCurrentCamera())return t=t.getCameraInfo(),this._cameraMng.closeCamera(),e.abrupt("return",t);e.next=6;break;case 6:return e.abrupt("return",Promise.reject(P.NO_CAMERA_SELECTED));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getCurrentSource=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._cameraMng.getCurrentCamera())return e.abrupt("return",t.getCameraInfo());e.next=3;break;case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getCurrentResolution=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._cameraMng.getCurrentCamera())return e.abrupt("return",t.getCurrentResolution());e.next=3;break;case 3:return e.abrupt("return",Promise.reject(P.NO_CAMERA_SELECTED));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getResolution=function(){var e=S(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._cameraMng.getCurrentCamera())return e.abrupt("return",t.getResolutions());e.next=3;break;case 3:return e.abrupt("return",Promise.reject(P.NO_CAMERA_SELECTED));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.setResolution=function(){var t=S(E().mark(function e(t){var n;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._cameraMng.getCurrentCamera())return ze(t),t.width<=0||t.height,e.abrupt("return",n.setResolution(t.width,t.height));e.next=5;break;case 5:return e.abrupt("return",Promise.reject(P.NO_CAMERA_SELECTED));case 6:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.getVideoSetting=function(){var e=this._cameraMng.getCurrentCamera();return e?e.getVideoSetting():(Je(this._oPub,P.NO_CAMERA_SELECTED),null)},t.toggleCamera=function(){var n=S(E().mark(function e(t,n){var r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._cameraMng.getCurrentCamera())return e.abrupt("return",r.toggleCamera(t,n,this._cameraMng));e.next=3;break;case 3:return e.abrupt("return",Promise.reject(P.NO_CAMERA_SELECTED));case 4:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.show=function(){return!!this._container&&this.bindView()},t.isHidden=function(){return!this._container},t.hide=function(){this.unbindView()},t.getAreaDetectCallback=function(){return this._areaDetectCallback},t.getPerspectiveCallback=function(){return this._perspectiveCallback},t.getLicenseCallback=function(){return this._licenseCallback},t.getSavePhotoCallback=function(){return this._savePhotoCallback},t.getInsertPhotoCallback=function(){return this._insertPhotoCallback},t.getRemovePhotoCallback=function(){return this._removeImageCallback},t.getChangeIndexCallback=function(){return this._changeIndexCallback},t.getFreeHandle=function(){return this._freeCallback},t.getLoadCallback=function(){return this._loadCallback},t.bindAreaDetectFunction=function(e){return!!V(e)&&(this._areaDetectCallback=e,!0)},t.bindPerspectiveFunction=function(e){return!!V(e)&&(this._perspectiveCallback=e,!0)},t.bindLicenseCallback=function(e){return!!V(e)&&(this._licenseCallback=e,!0)},t.bindLoadHandle=function(e){return!!V(e)&&(this._loadCallback=e,!0)},t.bindFilterHandleList=function(e){return!!Xe(e)&&(this._filterHandleList=e,!0)},t.bindFreeHandle=function(e){return!!V(e)&&(this._freeCallback=e,!0)},t.bindSavePhotoCallback=function(e){return!!V(e)&&(this._savePhotoCallback=e,!0)},t.bindInsertPhotoCallback=function(e){return!!V(e)&&(this._insertPhotoCallback=e,!0)},t.bindRemovePhotoCallback=function(e){return!!V(e)&&(this._removeImageCallback=e,!0)},t.bindChangeIndexCallback=function(e){return!!V(e)&&(this._changeIndexCallback=e,!0)},t.showDocumentScanPage=function(){var n=S(E().mark(function e(t,n){var o,s,r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),this._checkLicense(),this.captureLoop||(this.captureLoop=new Gn(this)),o=this._uiRouters.showDocumentScanPage(t,n,this),s=this,r=function(){var r=S(E().mark(function e(t,n,r){var i,a;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.insertDataByIndex(t,n,r),a={action:"add",fileName:o.getFileName(),fromViewerBufferChanged:!1},e.next=4,s.syncFile(a,[i]);case 4:case"end":return e.stop()}},e)}));return function(e,t,n){return r.apply(this,arguments)}}(),this.bindInsertPhotoCallback(r),r=function(){var n=S(E().mark(function e(t,n){var r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.removeDataByIndex(t,n),r={action:"remove",fileName:o.getFileName(),fromViewerBufferChanged:!1},e.next=4,s.syncFile(r);case 4:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}(),this.bindRemovePhotoCallback(r),e.next=11,o.playVideo();case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.showInsertPage=function(){var n=S(E().mark(function e(t,n){var r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),this._checkLicense(),r=this._uiRouters.showInsertPage(t,n,this),e.next=5,r.playVideo();case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.showDocumentEditPage=function(e,t){return this._checkLicense(),this._uiRouters.showDocumentEditPage(e,t,this)},t.showCropPage=function(e,t){return this._checkLicense(),this._uiRouters.showCropPage(e,t,this)},t.navigateToPage=function(){var n=S(E().mark(function e(t,n){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._uiRouters.navigateTo(t,n));case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.destroyRemovedPages=function(){return this._uiRouters.destroyRemovedPages()},t.navigateBack=function(){var n=S(E().mark(function e(t,n){var r,i,a,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!0),r=o=!0,1==(t=void 0===t?1:t)&&(r=o=!1),this._uiRouters.navigatePopPageSync(t,o),e.next=7,this._uiRouters.resetCurrentPageAfterPopPage(r);case 7:if(i=e.sent,a=this._uiRouters.getRemovedPages(),1!=t){e.next=14;break}if(i)return e.next=13,i.show();e.next=13;break;case 13:a[0].hide();case 14:if(n&&this._uiRouters.destroyRemovedPages(),(!i||i instanceof N)&&this._cameraMng.getCurrentCamera()&&this.closeSource(),!i){e.next=20;break}i instanceof N&&(o=i.element.children[1],this.bindView(o),i.pageName==$&&i.getDcs().emit("focusPage")),e.next=22;break;case 20:return this.unbindView(),e.abrupt("return",[]);case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.redirectToHome=function(){var e=S(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._uiRouters.redirectToHome());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.closeAllPages=function(){var e;this._uiRouters.closeAllPages(),null!=(e=this._container)&&e.classList.remove(B.relative),this._cameraMng.getCurrentCamera()&&this.closeSource(),document.body.classList.remove(B.overflowHidden)},t._checkLicense=function(){return this._licenseCallback&&0!==this._licenseCallback().errorCode&&Je(this._oPub,P.LICENSE_INVALID),!0},t.showLoading=function(e){this._loadingNumber++,e&&L.log(["show loading: ",e,", num: ",this._loadingNumber].join(""));var t,n,e=this.getCurrentPage(),r={background:this._loadingConfig.background};e instanceof Mt?(t=(t=null==(t=e.options)||null==(t=t.documentEditorSettings)?void 0:t.bodyStyle)||R(this.config.documentEditorSettings,"bodyStyle"),e.options&&e.options.documentEditorSettings&&(r.wrapperEl=e.options.documentEditorSettings.element,r.wrapperEl&&(r.confined=!0))):e instanceof N&&(t=(t=null==(n=e.options)||null==(n=n.scannerViewer)?void 0:n.bodyStyle)||R(this.config.scannerViewer,"bodyStyle"),e.options&&e.options.scannerViewer&&(r.wrapperEl=e.options.scannerViewer.element,r.wrapperEl&&(r.confined=!0))),t&&M(t.loaderBarSource)&&""!=t.loaderBarSource&&(r.imageSource=t.loaderBarSource),this._loadingConfig.imageSource!==r.imageSource&&(this._loadingConfig.imageSource=r.imageSource,C.Lib.hideMask()),C.Lib.showMask(r)},t.setLoadingNumber=function(e){this._loadingNumber=e},t.hideLoading=function(e){this._loadingNumber--,e&&L.log(["hide loading: ",e,", num: ",this._loadingNumber].join("")),this._loadingNumber<1&&(C.Lib.hideMask(),this._loadingNumber=0)},t.getDetectArea=function(e){return be(e,this)},t.filterHandler=function(){var n=S(E().mark(function e(t,n){var r,i;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(this.config,"documentEditorSettings.filter"),r=r.valueList,i=this._filterHandleList,e.abrupt("return",function(){return ye.apply(this,arguments)}(this,t,i,r,n));case 4:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.filterHandlerByIImageData=function(){var r=S(E().mark(function e(t,n,r){var i;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.config.documentEditorSettings,i=(void 0===i?{}:i).filter,i=(void 0===i?{}:i).valueList,e.abrupt("return",function(){return xe.apply(this,arguments)}(t,n,this._filterHandleList,i,r));case 4:case"end":return e.stop()}},e,this)}));return function(e,t,n){return r.apply(this,arguments)}}(),t.packageBlobItemFromIImageData=function(e,t,n,r,i){return fe(e,this,t=void 0===t?!1:t,n=void 0===n?!1:n,r=void 0===r?!1:r,null,i)},t.on=function(e,t){this._oPub.on(e,t)},t.once=function(e,t){this._oPub.once(e,t)},t.off=function(e,t){this._oPub.off(e,t)},t.emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._oPub).emit.apply(t,[e].concat(r))},t.getCurrentPage=function(){return this._uiRouters.currentPage},t.getPreviousPage=function(){return this._uiRouters.previousPage},t.getPreviousPageByPage=function(e){for(var t=this._uiRouters.path,n=-1,r=0;r<t.length;r++)if(e==t[r]){n=r;break}return 0<n?t[n-1]:null},t.dispose=function(){var e;document.removeEventListener("click",Jn),window.removeEventListener("focus",Zn),window.removeEventListener("blur",Qn),qn.clear(),Xn.clear(),(this._container=null)!=(e=this._cameraView)&&e.dispose(),(this._cameraView=null)!=(e=this._cameraMng)&&e.destroy(),(this._cameraMng=null)!=(e=this._uiRouters)&&e.closeAllPages(),(this._uiRouters=null)!=(e=this.captureLoop)&&e.dispose(),this.captureLoop=null,this._areaDetectCallback=null,this._perspectiveCallback=null,this._licenseCallback=null,this._filterHandleList=[],this._savePhotoCallback=null,this._insertPhotoCallback=null,this._removeImageCallback=null,this._changeIndexCallback=null,this._freeCallback=null,this._loadCallback=null},t.addGlobalClickEvent=function(e,t){var n;V(t)&&(n=this,qn.set(e,function(e){t(e,n)&&n.removeGlobalClickEvent(e)}))},t.removeGlobalClickEvent=function(e){qn.delete(e)},t.addGlobalBlurEvent=function(e,t){var n;V(t)&&(n=this,Xn.set(e,function(e){t(e,n)&&n.removeGlobalBlurEvent(e)}))},t.removeGlobalBlurEvent=function(e){Xn.delete(e)},t.addGlobalFocusEvent=function(e,t){var n;V(t)&&(n=this,zn.set(e,function(e){t(e,n)&&n.removeGlobalBlurEvent(e)}))},t.removeGlobalFocusEvent=function(e){zn.delete(e)},t.getCameraManage=function(){return this._cameraMng},t.isRunPlaying=function(){return this._runPlaying},t.setSavedFilename=function(e){this._savedFilename=e},t.getSavedFilename=function(){return this._savedFilename},t.setExternalViewerUid=function(e){e&&(this._externalViewerUid=e)},t.getExternalViewerUid=function(){return this._externalViewerUid},t.openSavedFile=function(e){var t=this.getSavedFilename();return t?(L.log("open file: "+t),e.File.openFile(t)):(L.log("open file: "+K),e.File.openFile(K)),!0},t.clearExitFlag=function(){this._exiting=!1},t.exit=function(e){this._exiting=!0,this._freeCallback&&this._freeCallback(),document.body.classList.remove(B.overflowHidden),this._savedFilename&&(this._savedFilename=null)},t.syncFile=function(){var n=S(E().mark(function e(t,n){var r,i,a,o,s;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._exiting)return e.abrupt("return");e.next=2;break;case 2:if(i=!1,!t){e.next=13;break}if("remove"!=t.action){e.next=8;break}e.next=12;break;case 8:if("add"!=t.action){e.next=11;break}e.next=12;break;case 11:return e.abrupt("return");case 12:void 0!==t.fromViewerBufferChanged&&(i=t.fromViewerBufferChanged);case 13:if(!(0<(a=this._uiRouters.path).length)){e.next=60;break}if((s=a[a.length-1])instanceof Mt&&(o=s.getCurrentEditUid()),!((r=a[0])instanceof N)){e.next=32;break}if(1<a.length)return r=a[1],e.next=23,r.syncFileFromExternalEvent(i,n);e.next=30;break;case 23:if(!(2<a.length)){e.next=30;break}if(!((r=a[2])instanceof wn)){e.next=28;break}e.next=30;break;case 28:return e.next=30,r.syncFileFromExternalEvent(i,n);case 30:e.next=41;break;case 32:return e.next=34,r.syncFileFromExternalEvent(i);case 34:if(!(1<a.length)){e.next=41;break}if(!((r=a[1])instanceof wn)){e.next=39;break}e.next=41;break;case 39:return e.next=41,r.syncFileFromExternalEvent(i);case 41:if(!s){e.next=60;break}if(M(o)&&""!=o){e.next=48;break}if(s instanceof wn)return e.abrupt("return");e.next=47;break;case 47:o=s.getCurrentEditUid();case 48:if(!(s instanceof y)){e.next=58;break}if(s.isInsertingImage())return e.next=52,s.clearInserting();e.next=54;break;case 52:e.next=56;break;case 54:return e.next=56,s.setEditUidAfterSyncImages(o);case 56:e.next=60;break;case 58:return e.next=60,s.setEditUidAfterSyncImages(o);case 60:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}(),e}();function Jn(e){qn.forEach(function(e,t){V(e)&&e(t)})}function Qn(e){Xn.forEach(function(e,t){V(e)&&e(t)})}function Zn(e){zn.forEach(function(e,t){V(e)&&e(t)})}function Kn(e,t,n){e&&e.emit("typeError",t,n)}var $n=function(t){function e(e){var n=t.call(this,e)||this;return n.errorMessage="ok",n.errorCode=0,n._on(X,n.updateErrorMessage.bind(a(n))),n._on("error",function(e){var t=new Error(e.message);t.code=e.code,n._throwErr(t)}),n._on("typeError",function(e,t){e=new Error("Argument of type '"+e+"' is not assignable to parameter of type '"+t+"'.");e.code=-4212,n._throwErr(e)}),n._on("valueError",function(e,t){e=new Error("The argument '"+e+"' is not valid for the parameter '"+t+"'");e.code=-4213,n._throwErr(e)}),n}o(e,t);var n=e.prototype;return n.updateErrorMessage=function(e){this.errorMessage=e.message,this.errorCode=e.code},n._throwErr=function(e){throw this.updateErrorMessage(e),e},e}(e),n=function(a){function e(){var e=a.call(this,new et)||this;return e.Error=null,e.videoShown=!1,e._dvs=null,e._dcs=null,e.Error=new $n(e._oPub),e._dcs=new Yn(e._oPub),e}o(e,a);var t=e.prototype;return t.notBindCamera=function(){return!this._dvs},t.bindCamera=function(e,t){var n=this._dcs.getLicenseCallback();if(n&&0!==n().errorCode)return this._e(W),!1;(this._dvs=t).ViewControl.bindViewUiConstructor(e),this._dcs.off("video-closed"),this._dcs.off("video-error");var r=this;return this._dcs.on("video-closed",function(){var e;r.videoShown=!1,T(r._dcs),null!=(e=t._oPub)&&e.emit("video-closed")}),this._dcs.on("video-error",function(e){t._oPub.emit("video-error",e)}),this._e(i),!0},t.bindAreaDetectFunction=function(e){return V(e)?(this._dcs.bindAreaDetectFunction(e),this._e(i),!0):(this._e(O),!1)},t.bindPerspectiveFunction=function(e){return V(e)?(this._dcs.bindPerspectiveFunction(e),this._e(i),!0):(this._e(O),!1)},t.bindLicenseCallback=function(e){return V(e)?(this._dcs.bindLicenseCallback(e),this._e(i),!0):(this._e(O),!1)},t.bindSavePhotoCallback=function(e){return V(e)?(this._dcs.bindSavePhotoCallback(e),this._e(i),!0):(this._e(O),!1)},t.bindInsertPhotoCallback=function(e){return V(e)?(this._dcs.bindInsertPhotoCallback(e),this._e(i),!0):(this._e(O),!1)},t.bindRemovePhotoCallback=function(e){return V(e)?(this._dcs.bindRemovePhotoCallback(e),this._e(i),!0):(this._e(O),!1)},t.bindFilterHandleList=function(e){return this._dcs.bindFilterHandleList(e),this._e(i),!0},t.bindFreeHandle=function(e){return Xe(e)?(this._dcs.bindFreeHandle(e),this._e(i),!0):(this._e(O),!1)},t._e=function(e){a.prototype._emit.call(this,X,e)},t.dispose=function(){var e;a.prototype.dispose.call(this),null!=(e=this.Error)&&e.dispose(),this.Error=null,this._dcs&&(this._dcs.exit(this._dvs),this._dcs.off("video-closed"),this._dcs.off("video-error"),this._dcs.dispose()),this._dcs=null},t.on=function(e,t){a.prototype._on.call(this,e,t)},t.emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=a.prototype._emit).call.apply(t,[this,e].concat(r))},t.off=function(e,t){a.prototype._off.call(this,e,t)},e}(e),e=function(e){function t(){return e.call(this)||this}o(t,e);var n=t.prototype;return n.showVideo=function(){var n=S(E().mark(function e(t,n){var r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.videoShown)return e.abrupt("return",Promise.reject(j));e.next=2;break;case 2:if(t){e.next=4;break}return e.abrupt("return",Promise.reject(G));case 4:if(this._dvs){e.next=6;break}return e.abrupt("return",Promise.reject(H));case 6:return this.videoShown=!0,(r=b(t,h(ee))).scannerViewer&&(this._dcs.config.scannerViewer=r.scannerViewer),r.documentEditorSettings&&(this._dcs.config.documentEditorSettings=r.documentEditorSettings),r.saveData=!0,r.fromInternal=!0,e.prev=12,this._dcs.clearExitFlag(),this._dcs.setSavedFilename(n),e.next=17,this._dcs.showDocumentScanPage(r,this._dvs);case 17:e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(12),this.videoShown=!1,e.t0;case 23:return this.videoShown=!0,e.next=26,this._dcs.getCurrentResolution();case 26:return e.abrupt("return",e.sent);case 27:case"end":return e.stop()}},e,this,[[12,19]])}));return function(e,t){return n.apply(this,arguments)}}(),n.closeVideo=function(){this._dcs.closeAllPages(),this._dcs.exit(this._dvs)},t}(n),n=function(e){function t(){return e.call(this)||this}o(t,e);var n=t.prototype;return n.createEditPage=function(e,t){if(!t)throw G;var n=t.fileName;if(!M(n)||""==n)throw q;var r=t.viewerUid,t=b(t,h(ee));t.initFileName=n,t.scannerViewer&&(this._dcs.config.scannerViewer=t.scannerViewer,delete t.scannerViewer);var i,a,o=!0;return t.documentEditorSettings&&(this._dcs.config.documentEditorSettings=t.documentEditorSettings,(void 0===(a=t.documentEditorSettings.defaultViewerName)?ne:a).toLowerCase()==ne.toLowerCase()?(i="crop",M(a=null==(a=this._dcs.config)||null==(a=a.documentEditorSettings)||null==(a=a.cropViewer)?void 0:a.visibility)&&"hidden"==a.toLowerCase()&&(o=!1)):i="edit"),this._dcs.setSavedFilename(n),this._dcs.setExternalViewerUid(r),t.saveData=!0,t.fromInternal=!1,t.curIndex=e,t.doFillData=!0,this._dcs.clearExitFlag(),"crop"==i&&o?this._dcs.showCropPage(t,this._dvs):this._dcs.showDocumentEditPage(t,this._dvs)},n.syncFile=function(e){this._dcs.syncFile(e)},n.removeEditPage=function(e){try{T(this._dcs),this._dcs.closeAllPages(),this._dcs.stop(),this._dcs.exit(null),e.isDestroyed||e.destroy()}catch(e){return!1}return!0},t}(n);window.Dynamsoft||(window.Dynamsoft={}),window.Dynamsoft.CameraViewer=Yn,window.Dynamsoft.CameraModel=e,window.Dynamsoft.DocumentEditManager=n}();
});
Dynamsoft.AddonReady(function(c,e){var t;c.product.bHTML5Edition&&!Dynamsoft.navInfoSync.bIE&&(c.DynamicLoadAddonFuns&&c.DynamicLoadAddonFuns.push(function(e){function t(){this._stwain=e,this._viewer=null}t.prototype._getCameraViewer=function(){return null==this._viewer&&(c.log("camera addon: bind viewer."),this._viewer=new Dynamsoft.CameraViewer,this._stwain._ImgManager.getWebViewer().bindCameraForCameraManager()),this._viewer},t.prototype._checkWasmAndLic=function(){var e=!0;return c.detect.wasmScriptLoaded||(Dynamsoft.DWT.UseService&&!Dynamsoft.DWT.UseCameraAddonWasm?c.Errors.WasmNotLoaded_UseWasmFalse(this._stwain):c.Errors.WasmNotLoaded(this._stwain),e=!1),c.License.checkProductKey(this._stwain,{Webcam:!0},!0)||(c.log("camera addon: check camera license failed."),e=!1),e&&!c.License.checkProductKey(this._stwain,{Webcam:!0,Wasm:!0},!0)&&(c.log("camera addon: check camera wasm license failed."),e=!1),!e&&{code:this._stwain._errorCode,message:this._stwain._errorString}},t.prototype.getSourceList=function(){var e=this._checkWasmAndLic();return e?c.Promise.reject(e):this._getCameraViewer().getSourceList()},t.prototype.selectSource=function(e){var t=this._checkWasmAndLic();return t?c.Promise.reject(t):(this._getCameraViewer().hide(),this._getCameraViewer().selectSource(e))},t.prototype.closeSource=function(){var e=this._checkWasmAndLic();if(e)return c.Promise.reject(e);this._getCameraViewer().hide();e=this._getCameraViewer().closeSource();return this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),e},t.prototype.play=function(e,t,a){var r,i,o=this._checkWasmAndLic();if(o)return c.Promise.reject(o);if(this._stwain._ImgManager.getWebViewer()._imageEditorInner&&this._stwain._ImgManager.getWebViewer()._imageEditorInner.bShowImageEditForFullScreen)return c.Errors.ImageEditorOpenCannotPlayVideo(this._stwain),c.Promise.reject({code:this._stwain._errorCode,message:this._stwain._errorString});o=e;return o||(this._stwain._ImgManager.getWebViewer().myViewer.bOnlyShowThumbnailsView||!this._stwain._ImgManager.getWebViewer().myViewer.showMain?(e=c.one(["#showImageArea",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join("")))&&0<e.length&&e[0].className.indexOf("DVS_disabled")<0&&(o=e[0]):(e=c.one(["#container",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join("")))&&0<e.length&&e[0].className.indexOf("DVS_disabled")<0&&(o=e[0])),o?("object"==typeof t&&(r=t.width,i=t.height),(o=o&&"DIV"==o.nodeName?o:document.getElementById(o)).offsetHeight||o.scrollHeight||o.clientHeight||(o.style.height="200px"),o.offsetWidth||o.scrollWidth||o.clientWidth||(o.style.width="200px"),this._getCameraViewer().show()):((e=this._getCameraViewer())&&e.hide(),this._stwain._ImgManager.getWebViewer().render()),c.log("camera addon: play."),c.isUndefined(a)&&(a=!1),this._getCameraViewer().play(o,r,i,a)},t.prototype.pause=function(){return c.log("camera addon: pause."),this._getCameraViewer().pause()},t.prototype.resume=function(){return c.log("camera addon: resume."),this._getCameraViewer().resume()},t.prototype.getStatus=function(){return c.log("camera addon: get status."),this._getCameraViewer().getStatus()},t.prototype.capture=function(){var e=this._checkWasmAndLic(),n=this._stwain,s=n.GetCurrentDocumentName();return e?c.Promise.reject(e):(""==s&&(s=n._ImgManager.getWebViewer().GetDefaultFileName()),c.log("camera addon: start capture."),this._getCameraViewer().capture().then(function(o){return c.log("camera addon: captured."),new c.Promise(function(e,a){var t=o.imageData||o.blob,r=-1,i=Dynamsoft.DWT.EnumDWT_ImageType;n._bLocalService?(c.isString(t.type)&&("application/pdf"==t.type?r=i.IT_PDF:"image/png"==t.type?r=i.IT_PNG:"image/jpeg"==t.type||"image/jpg"==t.type?r=i.IT_JPG:"image/bmp"==t.type?r=i.IT_BMP:"image/tiff"==t.type||"image/tif"==t.type?r=i.IT_TIF:"image/jp2"==t.type&&(r=i.IT_J2K)),n.__captureImage(t,r,function(){c.log("camera addon: loaded image from capture."),e(t)},function(e,t){c.log("camera addon: failed to load image from capture."),a({code:e,message:t})})):n._innerSendToMobile("LoadImageFromBinary",[t,!0,null,s],0,function(){c.log("camera addon: loaded image from capture."),e(t)},function(e,t){c.log("camera addon: failed to load image from capture."),a({code:e,message:t})})})}))},t.prototype.stop=function(){this._getCameraViewer().hide(),c.log("camera addon: stop.");var e=this._getCameraViewer().stop();return this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),this._stwain._ImgManager.getWebViewer().render(),e},t.prototype.show=function(){return c.log("camera addon: show."),this._getCameraViewer().show()},t.prototype.hide=function(){return c.log("camera addon: hide."),this._getCameraViewer().hide()},t.prototype.getCurrentResolution=function(){return c.log("camera addon: get current resolution."),this._getCameraViewer().getCurrentResolution()},t.prototype.getCurrentSource=function(){return c.log("camera addon: get current source."),this._getCameraViewer().getCurrentSource()},t.prototype.getResolution=function(){var e=this._checkWasmAndLic();return e?c.Promise.reject(e):(c.log("camera addon: get resolution."),this._getCameraViewer().getResolution())},t.prototype.setResolution=function(e){var t=this._checkWasmAndLic();return t?c.Promise.reject(t):(c.log("camera addon: set resolution."),this._getCameraViewer().setResolution(e))},t.prototype.showVideo=function(e,t,a,r){var i=this._checkWasmAndLic();return i?c.Promise.reject(i):(this._getCameraViewer(),c.log("camera addon: show video."),this._stwain._ImgManager.getWebViewer().showVideo(e,t,a,r))},t.prototype.scanDocument=function(e){var t=this._checkWasmAndLic();return t?c.Promise.reject(t):(this._getCameraViewer(),c.log("camera addon: scan document."),this._stwain._ImgManager.getWebViewer().showVideoEx(e))},t.prototype.closeVideo=function(){var e=this._checkWasmAndLic();return e?c.Promise.reject(e):(c.log("camera addon: close video."),this._stwain._ImgManager.getWebViewer().closeVideo())},t.prototype.on=function(e,t){"video-closed"!=e&&"video-error"!=e?c.Errors.EventNotExist(this._stwain):c.isFunction(t)?(c.log("camera addon: add event "+e),this._stwain._ImgManager.getWebViewer().camera_on(e,t)):c.Errors.CallbackNotAFunction(this._stwain)},t.prototype.off=function(e,t){"video-closed"!=e||"video-error"!=e?c.Errors.EventNotExist(this._stwain):c.isUndefined(t)?this._stwain._ImgManager.getWebViewer().off(e):c.isFunction(t)?(c.log("camera addon: remove event "+e),this._stwain._ImgManager.getWebViewer().off(e,t)):c.Errors.CallbackNotAFunction(this._stwain)},e.__addon=e.__addon||{},e.__addon.Camera=new t}),t=[Dynamsoft.DWT.ResourcesPath,"/addon/dynamsoft.webtwain.addon.camera.css",c.timestamp].join(""),c.getCss(t))}); 
/*! 20220624191759
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: Upload
* Version: 17.3
* 
*/
var Dynamsoft=window.Dynamsoft||{};!function(e){e.DWT||(e.DWT={}),e.Lib||(e.Lib={})}(Dynamsoft),Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[],Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(e){Dynamsoft.aryAddonReadyFun.push(e)},Dynamsoft.AddonReady(function(s,e){Dynamsoft.DWT.EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};function t(){var e,n=!1,o=Dynamsoft.navInfoSync.bMobile;return Dynamsoft.DWT&&(n=!1===Dynamsoft.DWT.UseLocalService),Dynamsoft.navInfo&&(e=Dynamsoft.navInfo,o=o||e.bPad||e.biPhone||e.biPad),n||o}var c=Dynamsoft,i=Dynamsoft.dcp,a=[1,7,2,"1026"],f="upload_"+a.join(""),n={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:!1,VERIFYHOST:!1,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(e,n){},OnRunSuccess:function(e){},OnRunFailure:function(e,n,o){}},p=0,F="",l=function(){p=-1,F="The zip file that contains the upload library (.dll) is invalid."},R=function(){p=-2,F="Upload failed because the url to upload to is invalid."},d=function(e,n,o){p=-3,e?F="Upload cancelled.":(F=n&&""!=n?"Upload failed with error: "+n:"Upload failed.",n&&""!=n&&(F=F+"("+o+")"))},m=function(){p=-4,F="Upload failed because the file to upload has invalid content."},o=function(){p=-5,F="Invalid upload job id."},E=function(){p=-6,F="Cannot create an upload job."},T=function(){p=-7,F="The file name is incorrect in the upload job."},r=function(){p=-8,F="Can not cancel all jobs when at least one job is still being created."},u=function(){p=-9,F="The zip file that contains the upload library (.dll) download failed."},S=function(){p=-2400,F="File uploader addon doesn't work under current settings."},_=function(){p=0,F=""};function U(){}function D(e){this.job=e}function A(e){this.job=e}U.prototype={runWaiting:0,CreateJob:function(){var e={HttpHeader:{},documents:[],formFields:[],bEvent:!1};return s.mix(e,n),e.SourceValue=new D(e),e.FormField=new A(e),e},Run:function(r){var e,t=this,n='""',o=r.ServerUrl,i="";if((!r.ar||!r.cu)&&c.DWT&&(c.DWT.ProductKey&&(n='"'+c.DWT.ProductKey+'"'),c.DWT.handshakeCode||c.DWT.organizationID))return Dynamsoft.DWT.lglic().then(function(e){r.ar=e.ar,r.cu=e.cu,t.Run(r)}),!0;if(!s.isString(o)||""==o)return r.id=-1,R(),!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,p,F),r.bEvent=!1),!1;if(!r.documents||!s.isArray(r.documents)||r.documents.length<=0)return r.id=-1,m(),!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,p,F),r.bEvent=!1),!1;for(r.Url=o,delete r.ServerUrl,e=0;e<r.documents;e++){var a=r.documents[e];if(!s.isString(a.files)||""==a.files)return r.id=-1,T(),!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,p,F),r.bEvent=!1),!1;s.isString(a.remoteName)&&""!=a.remoteName||(a.remoteName="RemoteFile")}var l=r.SourceValue,d=(delete r.SourceValue,r.FormField),u=(delete r.FormField,s.stringify(r)),u=s.replaceAll(u,'"',"'");r.ServerUrl=o,delete r.Url,r.SourceValue=l,r.FormField=d,o=['{"id":"',1,'","method":"RunUploadFile","version":"',f,'","parameter":[',n,',"',u,'"'],r.ar&&r.cu?(i=[',"',r.ar,'","',r.cu,'",0]}'].join(""),delete r.ar,delete r.cu,o.push(i)):o.push("]}"),l=o.join(""),t.runWaiting++;return Dynamsoft.FileUploader._sendCmd("RunUploadFile",l,function(e){var n;t.runWaiting--,e&&((n=e.UploadId)&&0<n?(r.id=n,c.FileUploader.map[r.id]=r,c.FileUploader.ids.push(e.UploadId),r.OnUploadTransferPercentage&&r.OnUploadTransferPercentage(r,0)):(n=e.errorcode,e=e.errorstring,n&&e?(p=n,F=e):E(),!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,p,F),r.bEvent=!1)))},function(e,n,o){t.runWaiting--,c.FileUploader.parseHttpErrors(e,n,o),!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,p,F),r.bEvent=!1)}),!0},Cancel:function(r){if(!r.id||r.id<0)return o(),!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,p,F),r.bEvent=!1),!1;var e='{"id":"1","method":"DeleteUploadTask","version":"'+f+'","parameter":["'+r.id+'"]}';return Dynamsoft.FileUploader._sendCmd("DeleteUploadTask",e,function(e){c.FileUploader.deleteJobById(r.id)},function(e,n,o){c.FileUploader.parseHttpErrors(e,n,o),!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,p,F),r.bEvent=!1)}),!0},CancelAllUpload:function(){var o=c.FileUploader.ids,e='{"id":"1","method":"DeleteUploadTask","version":"'+f+'","parameter":["'+o.join(",")+'"]}';if(0<this.runWaiting)return r(),!1;if(this.runWaiting<0&&(this.runWaiting=0),o.length<=0)return!0;return Dynamsoft.FileUploader._sendCmd("DeleteUploadTask",e,function(e){for(var n=0;n<o.length;n++)c.FileUploader.deleteJobById(o[n]);c.FileUploader.ids=[],c.FileUploader.map=[]},function(e,n,o){c.FileUploader.parseHttpErrors(e,n,o)}),!0},OnUploadTransferPercentage:function(e,n){},OnRunSuccess:function(e){},OnRunFailure:function(e,n,o){}},(c.SourceValue=D).prototype.Add=function(e,n,o){var r=this.job;if(!s.isString(e)||""==e)return T(),void(!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,p,F),r.bEvent=!1));o=o||"RemoteFile",e=Dynamsoft.Lib.replaceAll(e,"\\\\","\\\\"),r.documents.push({files:[e],fileName:n,remoteName:o})},c.FormField=A,c.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",wsUrl:"",running:!(A.prototype.Add=function(e,n){var o,r,t=n,i=e;if(null==t&&(t=""),!s.isString(i)||""==i||!s.isString(t))return!1;if(t=encodeURI(t),-1<(i=encodeURI(i)).indexOf("'")||-1<t.indexOf("'"))return!1;for(o=0;o<this.job.formFields.length;o++)if((r=this.job.formFields[o]).name==i)return r.value=t,!0;return this.job.formFields.push({name:i,value:t}),!0}),ws:null,nextLoopTime:600,deleteJobById:function(e){if(_(),t())return S(),!1;var n;if(e){for(n=0;n<c.FileUploader.ids.length;n++)if(e==c.FileUploader.ids[n]){c.FileUploader.ids.splice(n,1);break}var o=c.FileUploader.map[e];for(o.SourceValue.job=null,delete o.SourceValue,o.FormField.job=null,delete o.FormField,delete c.FileUploader.map[e],n=o.documents.length-1;0<=n;n--)o.documents.splice(n,1);for(n=o.formFields.length-1;0<=n;n--)o.formFields.splice(n,1);var r='{"id":"1","method":"DeleteUploadTask","version":"'+f+'","parameter":["'+e+'"]}';Dynamsoft.FileUploader._sendCmd("DeleteUploadTask",r)}},_sendCmdByWS:function(e,o,r){var n;return c.FileUploader.ws?n=c.FileUploader.ws:(n=i.newWebsocket(c.FileUploader.wsUrl),c.FileUploader.ws=n),n.onopen=function(){1==n.readyState?(n.onopen=null,n.send(e)):0==n.readyState&&setTimeout(n.onopen,100)},n.onmessage=function(e){var n=e.data;if("object"==typeof n)return e=n=null,void r();e=n.replace(/\0/g,"");try{(e=s.parse(e))&&"result"in e?o(e.result):r()}catch(e){s.log(n),r()}n=null},n.onerror=function(e){e&&s.log("websocket error: "+e),r()},n.onclose=function(e){n.onclose=null,n.onerror=null,n.onmessage=null,c.FileUploader.ws=null},!0},_sendCmd:function(e,n,o,r){if(Dynamsoft.DWT.ConnectWithSocket)return _sendCmdByWS(n,o,r);e=[c.FileUploader.protocol,c.FileUploader.ip,":",c.FileUploader.port,"/dcp/",f,"/",e,"?type=1&dsver=",a.join(""),"&ts=",s.now()].join("");return s.ajax({url:e,method:"post",dataType:"json",processData:!1,data:n,onSuccess:o,onError:r})},parseHttpErrors:function(e,n,o){var r,e=e&&s.isArray(e)&&2<e.length?(r=e[1],e[2]):(r=n,o);2==e.state&&0==e.status?"abort"===e.statusText?d(!0):R():d(!1,r,e.status)},loadHttpBlob:function(e,n,o,r,t,i,a){e={method:e,url:n,dataType:"blob",async:o,onSuccess:r,onError:function(e,n,o){c.FileUploader.parseHttpErrors(e,n,o),s.isFunction(t)&&t()}};s.isFunction(i)&&(e.beforeSend=function(e){e.addEventListener("progress",function(e){delete e.totalSize,delete e.position,i(e)},!1)}),s.ajax(e)},_OnPercentDone:function(){},Download:function(e,n,o){if(!s.isString(e))return l(),s.isFunction(o)&&o(p,F),!1;function r(){return u(),s.isFunction(o)&&o(p,F),!1}return c.FileUploader.loadHttpBlob("get",e,!0,function(e){i.loadZip(e,100,n,r)},r,!1)},Init:function(e,o,n){if(_(),t())return S(),s.isFunction(n)&&n(p,F),!1;function r(){i.detect.curPortIndex;var e,n=Dynamsoft.dcp.ports[0],n=Dynamsoft.navInfoSync.bSSL?(e="https://",n[1]):(e="http://",n[0]);c.FileUploader.port=n,c.FileUploader.protocol=e,c.FileUploader.ip=i.host,c.FileUploader.wsUrl=i._getDcpWsPreUrl(0),c.FileUploader.running=!0,o(new U),setTimeout(c.FileUploader.StatusLoop,500)}Dynamsoft.dcp.detect.bConnected?r():Dynamsoft.dcp.checkDcpV3(Dynamsoft.DWT.ProductKey,n,r)},Close:function(){Dynamsoft.DWT.ConnectWithSocket&&c.FileUploader.ws&&(c.FileUploader.ws.close(),c.FileUploader.ws=null),c.FileUploader.running=!1},VersionInfo:function(e,r){if(_(),t())return S(),s.isFunction(r)&&r(p,F),!1;var n='{"id":"1","method":"VersionInfo","version":"'+f+'","parameter":[]}';return Dynamsoft.FileUploader._sendCmd("VersionInfo",n,e,function(e,n,o){c.FileUploader.parseHttpErrors(e,n,o),s.isFunction(r)&&r(p,F)}),!0},StatusLoop:function(){return _(),t()?(S(),!1):(c.FileUploader.GetUploadStatus(),c.FileUploader.running&&setTimeout(c.FileUploader.StatusLoop,c.FileUploader.nextLoopTime),!0)},GetUploadStatus:function(){if(_(),c.FileUploader.ids.length<=0)return!0;if(t())return S(),!1;var e='{"id":"1","method":"GetUploadStatus","version":"'+f+'","parameter":["'+c.FileUploader.ids.join(",")+'"]}';return Dynamsoft.FileUploader._sendCmd("GetUploadStatus",e,function(e){if(s.isArray(e))for(var n=0;n<e.length;n++){var o=(l=e[n]).id,r=c.FileUploader.map[o],t=l.percentage,i=l.errorcode,a=l.response,l=l.errorstring;r&&(i==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_FINISHED?(r.OnUploadTransferPercentage(r,100,N(a)),!r.bEvent&&s.isFunction(r.OnRunSuccess)&&(r.bEvent=!0,r.OnRunSuccess(r,N(a)),r.bEvent=!1),c.FileUploader.deleteJobById(o)):i==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_OK||i==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_NOT_SEND||i==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_WAITFOR_SEND||i==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_SENDING||i==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_PAUSE||i==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||i==Dynamsoft.DWT.EnumTransferErrorCode.TRANS_TASK_INIT?r.OnUploadTransferPercentage(r,t,N(a)):(!r.bEvent&&s.isFunction(r.OnRunFailure)&&(r.bEvent=!0,r.OnRunFailure(r,i,l,N(a)),r.bEvent=!1),c.FileUploader.deleteJobById(o)))}},function(e,n,o){}),!0}};var v=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function N(e){for(var n,o,r,t,i=e.length,a=0,l="";a<i;){for(;n=v[255&e.charCodeAt(a++)],a<i&&-1==n;);if(-1==n)break;for(;o=v[255&e.charCodeAt(a++)],a<i&&-1==o;);if(-1==o)break;l+=String.fromCharCode(n<<2|(48&o)>>4);do{if(61==(r=255&e.charCodeAt(a++)))return l}while(r=v[r],a<i&&-1==r);if(-1==r)break;l+=String.fromCharCode((15&o)<<4|(60&r)>>2);do{if(61==(t=255&e.charCodeAt(a++)))return l}while(t=v[t],a<i&&-1==t);if(-1==t)break;l+=String.fromCharCode((3&r)<<6|t)}return l}}); 
// @20220623 160102
(function () {
  "use strict";
  var screenW = screen.width,
    promptDlgWidth = screenW > 550 ? 550 : (screenW - 10),
    promptDlgWidth2 = screenW > 680 ? 680 : (screenW - 10),
    reconnectTime = 0,
    imagesInBase64 = {
      icn_download: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII=',
      icn_install: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg==',
      icn_scan: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII='
    };

  Dynamsoft.OnWebTwainNotFoundOnWindowsCallback = function (ProductName, InstallerUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion, bSocketSuccess) {
    var _this = Dynamsoft,
      objUrl = {
        'default': InstallerUrl
      };
    _this._show_install_dialog(ProductName, objUrl, bHTML5, Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow, bIE, bSafari, bSSL, strIEVersion, false, bSocketSuccess);
  };

  Dynamsoft.OnWebTwainNotFoundOnLinuxCallback = function (ProductName, strDebUrl, strRpmUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion, iPlatform, bSocketSuccess) {
    var _this = Dynamsoft,
      objUrl = {
        'default': strDebUrl,
        'deb': strDebUrl,
        'rpm': strRpmUrl
      };
    if (!iPlatform) iPlatform = Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux;
    _this._show_install_dialog(ProductName, objUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion, false, bSocketSuccess);
  };

  Dynamsoft.OnWebTwainNotFoundOnMacCallback = function (ProductName, InstallerUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion, bSocketSuccess) {
    var _this = Dynamsoft,
      objUrl = {
        'default': InstallerUrl
      };
    _this._show_install_dialog(ProductName, objUrl, bHTML5, Dynamsoft.DWT.EnumDWT_PlatformType.enumMac, bIE, bSafari, bSSL, strIEVersion, false, bSocketSuccess);
  };

  Dynamsoft.dwt_change_install_url = function (url) {
    var install = document.getElementById('dwt-btn-install');
    if (install)
      install.href = url;
  };

  Dynamsoft.DWT_Reconnect = function () {
    var _this = Dynamsoft;
    if (((new Date() - reconnectTime) / 1000) > 30) {
      // change prompt
      var el = document.getElementById('dwt-btn-install');
      if (el) {
        el.innerHTML = 'Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()">click here to connect again</a>.';
      }
      return;
    }
    if (_this.DWT) {
      _this.DWT.CheckConnectToTheService(function () {
        Dynamsoft.DWT.ConnectToTheService();
      }, function () {
        if (Dynamsoft.DWT.NeedCheckWebTwainBySocket()) {
          Dynamsoft.DWT.CheckWebTwainBySocket(function () {
            Dynamsoft.OnHTTPCorsError();
          }, function () {
            setTimeout(Dynamsoft.DWT_Reconnect, 500);
          }, function () {
            setTimeout(Dynamsoft.DWT_Reconnect, 500);
          });
          return;
        }
        setTimeout(Dynamsoft.DWT_Reconnect, 500);
      });
    } else {
      console.log("The Dynamsoft namespace is missing");
    }
  };

  Dynamsoft.DCP_DWT_onclickInstallButton = function () {
    var btnInstall = document.getElementById('dwt-btn-install');
    if (btnInstall) {
      setTimeout(function () {
        var install = document.getElementById('dwt-install-url-div');
        if (install)
          install.style.display = 'none';
        var el = document.getElementById('dwt-btn-install');
        if (el && el.getAttribute("html5") == "1") {
          var pel = el.parentNode,
            newDiv = document.createElement('div');
          newDiv.id = 'dwt-btn-install';
          newDiv.style.textAlign = "center";
          newDiv.style.paddingBottom = '15px';
          newDiv.innerHTML = 'Connecting to the service...';
          newDiv.setAttribute("html5", "1");
          pel.removeChild(el);
          pel.appendChild(newDiv);
          reconnectTime = new Date();
          setTimeout(Dynamsoft.DWT_Reconnect, 10);
        } else {
          var pel = el.parentNode;
          pel.removeChild(el);
        }
      }, 10);
    }
    return true;
  };

  Dynamsoft._show_install_dialog = function (ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion, bNeedUpgrade, bSocketSuccess) {
    return Dynamsoft._show_install_dialog_Detail(ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion, bNeedUpgrade, bSocketSuccess);
  };

  Dynamsoft._show_install_dialog_Detail = function (ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion, bNeedUpgrade, bSocketSuccess) {
    var _this = Dynamsoft,
      ObjString, title, browserActionNeeded,
      EnumPlatform = Dynamsoft.DWT.EnumDWT_PlatformType,
      bUnix = (iPlatform == EnumPlatform.enumLinux || iPlatform == EnumPlatform.enumEmbed || iPlatform == EnumPlatform.enumChromeOS || iPlatform == EnumPlatform.enumHarmonyOS);

    if (Dynamsoft.DWT.bNpm && Dynamsoft.navInfoSync.bFileSystem) {
      return Dynamsoft._show_online_download_dialog(objInstallerUrl, bHTML5, iPlatform);
    }

    if (bNeedUpgrade)
      title = 'Please update your document scanning service'; //'Please follow the steps below to upgrade your local document scanning service.';
    else
      title = 'Please complete one-time setup';
    ObjString = [
      '<div class="dynamsoft-dwt-dlg-title">',
      title,
      '</div>'
    ];

    if (_this.DWT) {

      var bFirefox = Dynamsoft.navInfoSync.bFirefox;
      if (bUnix || bFirefox) {
        browserActionNeeded = 'RESTART';
      } else {
        browserActionNeeded = 'REFRESH';
      }
      ObjString.push('<div class="dynamsoft-dwt-installdlg-iconholder"> ');
      ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>');
      ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>');
      ObjString.push('<img style="margin: 0px 134px 0px 0px" src=' + imagesInBase64.icn_download + ' alt="download">');
      ObjString.push('<img style="margin: 2px 132px 2px 0px" src=' + imagesInBase64.icn_install + ' alt="install">');
      ObjString.push('<img src=' + imagesInBase64.icn_scan + ' alt="scan">');
      ObjString.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>');
      ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>');
      ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>');
      ObjString.push('</div>');
      ObjString.push('</div>');

      if (bHTML5 && bUnix) {
        ObjString.push('<div style="margin:10px 0 0 60px;">');
        ObjString.push('<div id="dwt-install-url-div">');

        var arm64 = Dynamsoft.navInfo.bArm64,
          mips64 = Dynamsoft.navInfo.bMips64,
          chromeOS = Dynamsoft.navInfoSync.bChromeOS,
          harmonyOS = Dynamsoft.navInfoSync.bHarmonyOS;

        if (arm64 || mips64 || chromeOS || harmonyOS) {} else {
          ObjString.push('<div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\'' + objInstallerUrl.deb + '\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>');
          ObjString.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\'' + objInstallerUrl.rpm + '\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div>');
        }
        ObjString.push('</div></div>');
      }

      ObjString.push('<div><a id="dwt-btn-install" target="_blank" href="');
      ObjString.push(objInstallerUrl['default']);
      ObjString.push('"');
      if (bHTML5) {
        ObjString.push(' html5="1"');
      } else {
        ObjString.push(' html5="0"');
      }

      ObjString.push(' onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>');
      if (bHTML5) {
        if (bIE) {
          ObjString.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">');
          ObjString.push('If you still see the dialog after installing the scan service, please<br />');
          ObjString.push('1. Add the website to the zone of trusted sites.<br />');
          ObjString.push('IE | Tools | Internet Options | Security | Trusted Sites.<br />');
          ObjString.push('2. Refresh your browser.');
          ObjString.push('</div>');

        } else {

          if (bUnix) {
            ObjString.push('<div class="dynamsoft-dwt-dlg-tail">');
            ObjString.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>' + browserActionNeeded + '</strong>  your browser.</div>');
            ObjString.push('</div>');
          }

        }

      } else {
        ObjString.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">');
        if (bIE) {
          ObjString.push('After the installation, please<br />');
          ObjString.push('1. Restart the browser<br />');
          ObjString.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.');
        } else {
          ObjString.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>');
        }
        ObjString.push('</div>');
      }
      _this.DWT.ShowMessage(ObjString.join(''), {
        width: promptDlgWidth,
        headerStyle: 1
      });
    } else {
      console.log("The Dynamsoft namespace is missing");
    }
  };

  Dynamsoft.OnWebTwainNeedUpgradeCallback = function (ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion) {
    Dynamsoft._show_install_dialog(ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion, true, true);
  };

  Dynamsoft.OnWebTwainPostExecuteCallback = function () {
    var _this = Dynamsoft;
    if (_this.DWT) {
      _this.DWT.OnWebTwainPostExecute();
    } else {
      console.log("The Dynamsoft namespace is missing");
    }
  };

  Dynamsoft.OnRemoteWebTwainNotFoundCallback = function (ProductName, ip, port, bSSL, bMobile) {
    var _this = Dynamsoft;
    var ObjString;

    if (bMobile) {
      ObjString = [
        '<div class="dynamsoft-dwt-dlg-tips" style="text-align:left;font-size:1.4em">',
        'Failed to connect to the Dynamsoft Service, please make sure that the certificate is valid.<br /><br />',
        '</div>'
      ];
    } else {
      ObjString = [
        '<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',
        'Failed to connect to the Dynamsoft Service.<br />',
        'Please make sure that the certificate is valid OR ',
        'If you change the Dynamsoft.DWT.Host to your own IP/domain, do not forget to update the certificate accordingly.',
        '</div>',
        '<div class="dynamsoft-dwt-dlg-tail">',
        '<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
      ];
    }
    if (_this.DWT) {
      _this.DWT.ShowMessage(ObjString.join(''), {
        width: promptDlgWidth,
        headerStyle: 1
      });
    } else {
      console.log("The Dynamsoft namespace is missing");
    }
  };

  Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback = function (ProductName, ip, port, bSSL) {
    var _this = Dynamsoft;
    var ObjString = [
      '<div class="dynamsoft-dwt-dlg-tips">',
      'Dynamsoft Service is outdated on the PC with IP/domain <br />',
      '"', ip, '".<br />',
      'Please open the page on that PC to download and install it.',
      '</div>',
      '<div class="dynamsoft-dwt-dlg-tail">',
      '<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
    ];
    if (_this.DWT) {
      _this.DWT.ShowMessage(ObjString.join(''), {
        width: promptDlgWidth,
        headerStyle: 1
      });
    } else {
      console.log("The Dynamsoft namespace is missing");
    }
  };

  Dynamsoft.OnWebTWAINDllDownloadSuccessful = function () {
    console.log('The Web TWAIN Module was downloaded successfully!');
  };

  Dynamsoft.OnWebTWAINDllDownloadFailure = function (ProductName, errorCode, errorString) {
    var _this = Dynamsoft;
    if (_this.DWT) {
      if (errorCode == -2371 /* EnumDWT_Error.ModuleNotExists*/ ) {
        var ObjString = [
          '<div class="dynamsoft-dwt-dlg-tips">',
          errorString,
          '</div>',
          '<div class="dynamsoft-dwt-dlg-tail">',
          '<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'
        ];

        _this.DWT.ShowMessage(ObjString.join(''), {
          width: promptDlgWidth,
          headerStyle: 1
        });

      }
      return true;
    } else {
      console.log("The Dynamsoft namespace is missing");
    }
  };

  Dynamsoft.OnGetServiceUpdateStatus = function (bError, statusCode, statusString) {
    if (statusString != "Update skipped")
      console.log(statusString);
  };

  Dynamsoft.OnWebTWAINModuleDownloadManually = function (objInstallerUrl, iPlatform, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft;
    return _this._show_install_dialog('', objInstallerUrl, true, iPlatform, bIE, bSafari, bSSL, strIEVersion, false, false);
  };

  Dynamsoft.OnLTSLicenseError = function (message) {

    var addMessage = '',
      ObjString, lexp = Dynamsoft.DWT.licenseException,
      code = 0;
    if (lexp)
      code = lexp.code;

    if (code == -2440 || // NetworkError
      code == -2441 || // Timedout
      code == -2443 || // CorsError
      code == -2446 || // LtsJsLoadError
      message.indexOf('Internet connection') > -1 ||
      message.indexOf('Storage') > -1) {

      var purchaseUrl = 'https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&deploymenttype=js';
      addMessage = '<div>You can register for a free 30-day trial <a href="' + purchaseUrl + '" target="_blank" class="dynamsoft-major-color">here</a>. Make sure to select the product Dynamic Web TWAIN.</div>';
    }

    ObjString = [
      message,
      addMessage
    ];

    Dynamsoft.DWT.ShowMessage(ObjString.join(''), {
      width: promptDlgWidth2,
      headerStyle: 2
    });
  };

  Dynamsoft.OnLTSConnectionFailure = Dynamsoft.OnLTSLicenseError;
  Dynamsoft.OnLTSReturnedAnError = Dynamsoft.OnLTSLicenseError;
  Dynamsoft.OnLTSUUIDError = Dynamsoft.OnLTSLicenseError;

  Dynamsoft.OnLTSConnectionWarning = function () {

    var ObjString = [
      'Warning: You are seeing this dialog because Dynamic Web TWAIN has failed to connect to the License Tracking Server. ',
      'A cached authorization is being used, and you can continue to use the software as usual. ',
      'Please get connected to the network as soon as possible. ',
      Dynamsoft.DWT.isPublicLicense() ? '<a class="dynamsoft-major-color" href="https://www.dynamsoft.com/company/contact/">Contact Dynamsoft</a> ' : 'Contact the site administrator ',
      'for more information.'
    ].join('');

    Dynamsoft.DWT.ShowMessage(ObjString, {
      width: promptDlgWidth2,
      caption: 'Warning',
      headerStyle: 2
    });
  };

  Dynamsoft.OnLTSPublicLicenseMessage = function (message) {

    Dynamsoft.DWT.ShowMessage(message, {
      width: promptDlgWidth2,
      caption: 'Warning',
      headerStyle: 2
    });
  };

  Dynamsoft.OnHTTPCorsError = function () {

    var ObjString = [
      "<div>The Connection from the insecure (HTTP) web page to the local 'Dynamsoft Service' failed!</div>",
      '<div style="margin-top:10px">To fix the issue, please update your website to HTTPS or refer to <br /><a target="_blank" href="https://www.dynamsoft.com/web-twain/docs/faq/http-insecure-websites-in-chromium-browser.html?ver=latest">this article</a> for other workarounds.</div>'
    ].join('');

    Dynamsoft.DWT.ShowMessage(ObjString, {
      width: promptDlgWidth2,
      headerStyle: 2
    });
  };


  Dynamsoft.OnLicenseExpiredMessage = function (strExpiredDate, remain) {

    var ObjString,
      a_contact_us = '<a target="_blank" href="https://www.dynamsoft.com/company/contact/">contact us</a>',
      a_online_store = '<a target="_blank" href="https://www.dynamsoft.com/store/dynamic-web-twain/#DynamicWebTWAIN">online store</a>',
      a_new_key_href = 'https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product';

    if (remain > 5) {

    } else if (remain > 0) { // 1~5

      var strDays;

      if (remain <= 1) {
        strDays = '1 day';
      } else {
        strDays = parseInt(remain) + ' days';
      }

      ObjString = [
        '<div style="padding:0 0 10px 0">Kindly note your trial key is expiring in ', strDays, '. Two quick steps to extend your trial:</div>',
        '<div style="margin:0 0 0 10px">1. <a target="_blank" href="', a_new_key_href, '">Request a new trial key</a> and follow the instructions to set the new key</div>',
        '<div style="margin:0 0 0 10px">2. Refresh your scan page and try again</div>',
        '<div style="padding:10px 0 0 0">If you run into any issues, please ', a_contact_us, '.</div>',
        '<div style="padding:0">If you are ready to purchase a full license, please go to the ', a_online_store, ' or ', a_contact_us, '.</div>'
      ].join('');

    } else {
      // remain<=0 Expired
      ObjString = [
        '<div style="padding:0">Sorry. Your trial key has expired on ', strExpiredDate, '. You can purchase a full license at the ', a_online_store, '.</div>',
        '<div style="padding:0">Or, you can try requesting a new trial key at <a target="_blank" href="', a_new_key_href, '">this page</a>.</div>',
        '<div style="padding:0">If you need any help, please ', a_contact_us, '.</div>'
      ].join('');

    }

    if (ObjString) {
      Dynamsoft.DWT.ShowMessage(ObjString, {
        width: promptDlgWidth2,
        caption: 'Warning',
        headerStyle: 2
      });
    }
  };

  Dynamsoft.OnLicenseError = function (message, errorCode) {

    Dynamsoft.DWT.ShowMessage(message, {
      width: promptDlgWidth2,
      headerStyle: 2
    });

  };

  Dynamsoft.OnSSLCertInfo = function (sslExpiredDate) {

  };

  Dynamsoft.funcConfirmRemove = function () {
    var msg = "Are you sure you want to delete this image?";
    return initConfirmDialog(msg, true, false);
  };

  Dynamsoft.funcConfirmExit = function (bExistImage) {
    var msg = " Are you sure you want to exit without saving?";
    if (bExistImage) {
      return initConfirmDialog(msg, true, false)
    } else {
      return Promise.resolve(true);
    }
  };

  Dynamsoft.funcConfirmExitAfterSave = function (bFiredByDocumentEdit) {
  };

  Dynamsoft.funcConfirmCropViewerExit = function (bChanged, previousViewerName) {
    if (previousViewerName == "mainViewer" && bChanged) {
      var msg = "Are you sure you want to exit without saving?";
      return initConfirmDialog(msg, Dynamsoft.DWT.EnumDWT_ConfirmExitType.Exit, Dynamsoft.DWT.EnumDWT_ConfirmExitType.Cancel)
    } else if (previousViewerName == "documentScanPage" && bChanged) {
      return Promise.resolve(Dynamsoft.DWT.EnumDWT_ConfirmExitType.SaveAndExit);
    } else
      return Promise.resolve(Dynamsoft.DWT.EnumDWT_ConfirmExitType.Exit);
  };

  Dynamsoft.funcConfirmMainViewerExit = function (bChanged, previousViewerName) {
    if (previousViewerName == "" && bChanged) {
      var msg = "Are you sure you want to exit without saving?";
      return initConfirmDialog(msg, Dynamsoft.DWT.EnumDWT_ConfirmExitType.Exit, Dynamsoft.DWT.EnumDWT_ConfirmExitType.Cancel)
    } else if (previousViewerName == "cropViewer" && bChanged) {
      return Promise.resolve(Dynamsoft.DWT.EnumDWT_ConfirmExitType.SaveAndExit);
    }
    return Promise.resolve(Dynamsoft.DWT.EnumDWT_ConfirmExitType.Exit);
  };

  function initConfirmDialog(title, OK, Cancel) {
    var boxStyle = 'position:fixed;top:50%;left:50%;width:260px;' +
      'transform:translate(-50%,-50%);background:#fff;z-index:999;border-radius: 5px;' +
      'overflow: hidden;';
    var btnStyle = 'flex:1;height:100%;display:flex;align-items:center;justify-content: center;font-size:14px';

    var ObjString = [
      '<div style=' + boxStyle + '>',
      '<div style="padding:20px;font-size: 16px; color:black;height:70%;text-align:center;display:flex;align-items:center">',
      title,
      '</div>',
      '<div style="height:40px;background:#f5f5f5;display:flex;border-top: solid 1px #cdcccc" >',
      '<span id="dynamsoft-confirm-dialog-yes" style="' + btnStyle + ';color:#fe8e14;border-right: solid 1px #cdcccc">OK</span>',
      '<span id="dynamsoft-confirm-dialog-no" style="' + btnStyle + '">Cancel</span></div>',
      '</div>'
    ];

    Dynamsoft.DWT.ShowDialog(500, 0, ObjString.join(''), true, true);

    return new Promise(function (resolve) {
      document.getElementById('dynamsoft-confirm-dialog-yes').addEventListener('click', function () {
        Dynamsoft.DWT.CloseDialog();
        resolve(OK); //Exit
      });
      document.getElementById('dynamsoft-confirm-dialog-no').addEventListener('click', function () {
        Dynamsoft.DWT.CloseDialog();
        resolve(Cancel); //Cancel
      })
    })

  }


  // -- npm start
  Dynamsoft._show_online_download_dialog = function (objInstallerUrl, bHTML5, iPlatform) {
    var ObjString,
      vers = Dynamsoft.DWT.JSVersion.split(','),
      strV = vers[0] + '.' + vers[1],
      page_path = location.pathname,
      online_url, local_file_path, ext;
    page_path = page_path.substring(0, page_path.lastIndexOf('/') + 1);

    if (iPlatform == Dynamsoft.DWT.EnumDWT_PlatformType.enumLinux) {
      if (arm64 || mips64) {
        if (arm64)
          objInstallerUrl['default'] = getDebPath('arm64');
        else if (mips64)
          objInstallerUrl['default'] = getDebPath('mips64el');
      } else {
      }
    }
    ext = objInstallerUrl['default'].substr(objInstallerUrl['default'].length - 3);

    online_url = ['https://www.dynamsoft.com/web-twain/install-dynamsoft-service/?productId=1000001',
      '&downloadLink=https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup_',
      strV, '.',
      ext].join('');

    local_file_path = Dynamsoft.Lib.Path.normalize([
      page_path,
      objInstallerUrl['default']
    ].join(''));

    if (iPlatform == Dynamsoft.DWT.EnumDWT_PlatformType.enumWindow) {
      if (local_file_path.indexOf('/') == 0) {
        local_file_path = local_file_path.substr(1);
      }
    }

    ObjString = [
      '<div class="dynamsoft-dwt-ltsdlg-body" style="padding:0 20px 20px 20px">',
      '<div>To support document scanning, please complete one-time installation of the DynamsoftServiceSetup.', ext, ' on this machine.</div>',
      '<div>You can download the file via this trust site:</div>',
      '<div><a id="dwt-btn-install" target="_blank" href="',
      online_url,
      '"><div class="dynamsoft-dwt-dlg-button">Open Site</div></a></div>',
      '<div style="word-break: break-word;">Or, go to <br />',
      local_file_path,
      ' if the file exists.</div>',
      '<div>After the installation, please <strong>REFRESH</strong>  your browser.<br /></div>',
      '</div>'
    ];

    Dynamsoft.DWT.ShowMessage(ObjString.join(''), { width: promptDlgWidth, headerStyle: 1, closeButton: false });
  };
  // -- npm end

})(); 
/**
 * Basic Configuration (config.js with differences)
 */
Dynamsoft.DWT.AutoLoad = false;
Dynamsoft.DWT.IfAddMD5InUploadHeader = false;
Dynamsoft.DWT.IfConfineMaskWithinTheViewer = false;

export default Dynamsoft;
